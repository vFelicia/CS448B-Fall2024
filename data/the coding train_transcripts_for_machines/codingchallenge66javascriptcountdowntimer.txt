hello welcome to a coding challenge where I make exactly this a countdown clock timer in the browser now I did it with a function called set interval because it's a nice demonstration out set interval works and it works really nice but I have to admit I've learned since after making the challenge that it's quite it's not such an accurate way of doing it number one is if the browser starts to get locked up set interval isn't actually going to happen at the correct time and so your timer can slowly get off over time more accurate would actually be to checks and milliseconds of since the page was loaded which is something you can do with a function called Milly's in p5 so you can watch this video if it'll be interesting for you I'm going to make a part two where I redo the timer using Millie's and it's a bit more accurate but both of them are interesting useful ways to program things okay enjoy five four three two one hello it's a coding challenge and this coding challenge I'm going to do exactly that but I'm going to program it I am going to program a timer in JavaScript I'm going to use the p5.js library for some of the elements that I'm going to put into the web page that will do the timer thing but otherwise it's just that a little simple timer this should be easy it should take very long actually the reason why I'm building this timer is because I'm gonna do a coding challenge with a timer on which I've done in the past but have it in a while so imagine the timer going on right now let's say this is going to take 15 minutes I think we can do this 15 minutes okay so what's the functionality that I want if you ever go to Google which you probably do then I just plug the Google I don't need to plug Google and if I type in timer five minutes it knows what I'm going to type that's how crazy it is and you can see I get a time so this is basically what I want to program and if I can make this and make it easy for you to do the same thing you could probably come up with a much more creative version of this or uses some other kind of application that you're doing okay so what do we need to get started let's leave this page let me go to my code here so there's really nothing in my code but the setup function and the setup function for the with the p5 just libraries like the page is loaded so it's the place you can put all your code when your it starts but actually what I wanted to do before I do that is I want to add something to the page itself so I'm just going to add a paragraph element and I'm going to put timer in it and let's just do that for a second and I am going to hit refresh and you can see look there's that paragraph element there at the top now I forgot there's some styling in here that I don't want so there it is I'll make it bigger so you can see that's all I got so far but what I want to do is display the amount of time left in that paragraph element and I'm going to do that with JavaScript and control that paragraph through JavaScript so to be able to access it I need to give it an ID let's just let's give it the eysie timer again I don't have to use the word time right and really this you just say this right it's going to stir it's going to be a fiveminute timer to start and I'll show you how to set the amount of time that you want okay so what should I do next look let's leave it blank or let's just you put this in here so we see that there's something there it refresh there you go now I'm going to go into JavaScript and I'm starting to say no canvas because it didn't because p5 makes a canvas by default because there's a lot of animation stuff with p5 no canvas will get rid of that and I'm going to say VAR timer equals select timer so I want to the Select function is in p5 to access a particular HTML element that's on the page in this case I want that paragraph element and I could set its content by saying timer H is the HTML function say this is where the timer will go so if we see this and I hit refresh you can see now I inserted that text from my JavaScript program there now what do I actually want to put there well let's start with putting 0 and now what I want to do is I want to every second and I could do this less than a second but my timer is only going to be in seconds I want to every second increase this number so I want it's just a count seconds let's start at that first guess what there's a function in JavaScript it does not concise now this is a native JavaScript option called set interval now what I can do is set intervals I could say time it 1000 now what does this do set interval is saying hey I want a certain event to happen every so often there's also set timeout so I just want this event to happen once but I want an event to happen every so often I want it to happen every 1000 milliseconds 1000 milliseconds is one second there are 1000 milliseconds milli is 4,000 in one second so I want the event time it to happen every second what is the event time it well it's something that I have to make up and what it is is a function so I can now write a function called time it and this is saying hey this time it function should happen every 1000 now there's something new wants to this and there's another JavaScript function you could look into called request animation frame which is sometimes something you want to use if you want to animate and there's your animation like take a certain amount of time and you don't have to wait but that interval is going to work just fine for this timer and if we're like off by some nano parsec a second big deal okay so what I'm going to do here is I'm going to create I'm going to have a global variable and I'm going to call it a counter and I said equal to zero and in time it I'm going to say counter plus plus and timer dot html' counter so what this is going to do is now it is going to every second increase the counter and let's and then update the Dom element okay here we go 0 1 2 3 4 thank you ok coding gun ok anyway uh Tony to get a timer is counting now here's the thing I wanted to count backwards so I wanted to count down to zero not up up because I want a countdown timer we could and also when it gets to 60 I wanted to say one minute and zero and not 61 seconds these are these are two different problems I don't know which to tackle first let's do the counting down what you got okay so let's say okay so what I need is the I need a variable like lifespan or timer so it's what's the good word for the amount of time left time left equals time left equals let's just say 60 so what I want to do then if time left is 60 what I want is to always update time left counter this will work this is an easy right because I want to countdown 60 59 so when 60 60 minus zero is 60 when it's 160 minus one is 59 etcetera okay so now 60 59 to change 57 hooray okay so we're in good shape however let's make the time left now 65 how can I have it show the amount of minutes and seconds not just the amount of seconds left so here we go let's write a function let's just make this a separate function and let's do convert I know to call this converts seconds so this function is going to get some amount of seconds into it so I need to figure out if I know the amount of seconds how many minutes well 60 seconds is one minute zero seconds 61 seconds is one bit at one second so there's a property here right I know the number of minutes how do I know the number of minutes if I say the number of seconds divided by 60 right but here's the thing I don't want to get a decimal result I look let me let me show you what I need here right so if it's 120 divided by 60 that's two if it's 125 divided by 60 that's 2.08 3 so I could convert that into seconds but I just want that number 2 and so what I can actually do is I can say floor floor is an operation to a number that takes off the decimal place even it was two point nine nine nine nine nine nine nine nine nine and nine I'm still going to get two so the number of minutes is floor seconds divided by 60 and then how many seconds do I have left the number of seconds is what hmm so let's think about this remember I just said let's let's do a simple example five divided by two is what two point five but another way 50 of 500 divided by 2 is 2 remainder 1 the remainder right 122 divided by 60 is 2 remainder 2 that remainder is the number of seconds so if a boy s I've gone backwards in time if so all I need to do now is say I use the modulus operator 122 modulus 62 modulus gives you the remainder of division so that's the number of seconds left so that's modulus 60 so minutes is s divided by 60 get rid of the decimal seconds is s modulus 60 or divide the remainder of the division with 60 so now if I go here and then I'm going to say return minutes plus a + seconds and there's some formatting stuff I probably want to do this ok so now I can say convert seconds and I can add some just taking that number and passing it through this convert function that I just wrote now we have one minute and five seconds and then 59 seconds right so there's some awkwardness there because I probably should use the same number of digits and no matter what so there's I believe there's a number 4 math function I think np5 and f p5.js I let's look at the reference the function called NS which is let's look at this number format so number format is the number of digits to the left of the decimal and the number of digits to the right so I can use number format to say I always want two digits oh this is good so I could say number format minutes to number formats seconds to and now if I do that and go back there we go now let's change it to five minutes which is a 300 seconds there we go now this is awkward because really if I want to have a timer I probably want to say the number of minutes and of course I might want to say the number of minutes and seconds all that sort of stuff but now I've got this timer what I want to do actually what I want to be able to do is just add I want to be able to add something to the URL so this might be something you may or may not be familiar with you've probably seen this you go to URLs all over webs of the web between websites and you see question mark something equals something ampersand something equals something these are what are known as URL query parameters so what it's saying is this webpage when it runs it's going to get passed this data it's going to get passed the number five so kids with variable so to speak that's key value pairs the key is min four minutes the number is five and I actually probably don't even I could just do this something simpler I don't need to be so elaborate but let's there's actually a thing in p5 query where how do I go back here a query URL params I am so this is what I want URL parameter I'll parameters dynamically it's a p5 function that wraps all this or native JavaScript you would need to do this so now what I can do is I can say var minute so let me just say equals it was the name of that function get your L params and then I can say VAR minutes equals a pram init let's just call it a minute and then I can say time left should equal what minutes times 60 there we go so now if I go to here okay so what did I forget so now if I go to here now let's let's figure out what happens if I don't give it anything so now I get this because I didn't account for the case where I don't give it anything so I should probably say if params minute like if that parameter exists and I should also probably say if params I should probably check to make sure it's a number or fully solution here checking it's exhausting let's just do this for right now so time left by default is going to be 300 only if I give it something will I get something different so we can see now let's see what's going on here let's look at those parameters did I mess something up oh so I have like an error somewhere oh woops console.log what's going on I've got a little debugging problem here oh it worked I don't know it works so it's five minutes if there are no parameters now let's oh I don't have to change my code let's go in here and type question mark minute dice a minute or minutes don't remember minute equals three three minutes all right so you can see now I can make it minutes equals 50 50 minutes timer so now I have a generic webpage that any amount that I plug into it runs a timer now if I say 65 it's not giving me one hour so I'm going to leave this as an exercise for you but let's at least make it ding when it gets the end of course now I can only make it a 1 minute timer so let's leave let's leave it at 1 minute for a second so I'm going to I have a nice little sound here I'm going to it's called to file in my folder called ding mp3 and I am going to when the timer is up I am going to say I'm going to I'm going to add a function a preload which is a function for p5 where I can load media assets and I'm gonna say var ding ding equals load sound ding mp3 and then rule and then what I'm going to do is I'm going to say I'm going to stay here when counter equals time left yes if counter right that's when it's over if I start with 60 and the counter gets up to 60 if counter equals time left then ding dot play I also want to do some other things right I want to stop the timer from going expert well I could just have it start over again let's just do that for right now I'm going to say counter goes back to zero what's the step counter go back to zero so that'll be a nice way so I couldn't have the timer stopped and II need a button to restart X do a lot of things but I'm just going to like play the sound and have the timer restart by going back to zero and incidentally if I were or I could have just completely stopped let's also show you how to have a completely stop so one thing I should show you here is let me move this up here for my own eyes here because set interval actually returns a value and if you ever wanted to stop your set interval from continuing to go you need to call something called clear interval so I'm going to say clear interval interval and set the counter back to zero or I'm going to comment down this should actually stop it so let's let's make this let's just give it like a tensecond timer for testing when I don't pass in minutes so now here we go 10 9 8 7 6 5 4 one tada there you go JavaScript counter made with pea pods yes and some other stuff there's so much you could do with there's so many features you could add and things creative kind of twist on it or maybe you just needed a interval for something so I hope you enjoyed that coding challenge as always check this video's description which will have a link to this code if you use it or make your own variation of it where you find that code there might be a readme file that you can add a link to your version of it all that sort of stuff thanks for watching and I'll see you in the next credit challenge okay I'm back actually at the end of this video to do a quick addendum I'm just going to change this timer to use Millie's instead of actually using set interval to rely on a specific second pass even if set interval is off by a little bit Millie's will never be on so let's look at how I could do that so whenever the timer starts and I guess the timer starts just when the page loads I can get I'm going to have I'm going to have a variable called start time and I think reliably Millie's the Millie function is going to learn the script first loads is going to be at zero but I'm just going to further for the sake of argument I'm going to say start time equals Millie's so I'm just going to when setup runs I'm going to check and see what the start time is then what I'm going to do is in the timeit function forget about this counter thing the counter is now completely irrelevant because what I want to do instead of having the counter is I'm going to call this current time I want to say current time equals what do I want I want the current Millie's minus the start time and then what I want to do is divide that by a thousand to get the number of seconds right because it's 5,000 milliseconds of pass that's actually five seconds and because my timer is just by the second I don't worry about five point three five point two three seconds although you could worry about you could make a more sophisticated timer that does that I'm just going to say floor and I'm going to floor that to take off the decimal so now I think let's just see I have an error sketch toucheth line 35 I guess I'm missing a parenthesis here because what I want is this divided by this and floor the whole thing okay let's come back reload sketch 30 counter so I guess I have a reference to 30 still oh right oh time left ah so current time needs to be a global variable so current time and then in places where I'm using counter I need to say current time and probably here queue current time did I use two T's in current time I did so let's go over here let's first of all move this like this if I have and okay so now it's the same exact timer but I'm pretty sure it's more accurate if I were able to do something like lock up the browser that doesn't really do it let's figure out a way to lock up the browser then that should work so this should be better and there we go I'm seeing lots of things in the chat like maybe I'm doing this incorrectly but suggest the end milli it does handle start time for me so but so I probably could be fine with actually with with not with Lifta see I'm gonna get rid of this yeah so I don't really need to I'm going to get zero by definition that setup is going to kind of run right at zero milliseconds but the reason why I'm doing that is if I ever want the timer to restart I need to start at some other melons okay thanks for watching this video and I'll see you soon