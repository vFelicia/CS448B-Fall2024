okay part two here we are with I made some changes now I have a web application that lists all the possible users in my system and I can pick the biskits King for example and hit submit nothing happens yet but what I want to do is hit submit and I want to see the five most similar users to the biskits King this is leading us towards this idea of K nearest neighbor with K being five so the K being three show me the three nearest K being ten show me the ten nearest so again I'm not fully implementing the whole K nearest neighbor algorithm for a machine learning problem yet but I'm just kind of looking at the pieces of it along the way of kind of doing some stuff so okay flipped is precise it compiled last video if you watch the bruise on was so poor I thought but maybe you watch it me do you enjoy this one's going to be probably pretty boring but I have lots of energy now good here we go okay so so all I did by the way as I changed it to just having one drop down menu and here's another thing this was kind of terrible and this by the way I should call this Euclidean distance and I don't like what I did with this at all what I should do is pass in two people right because really what I should be saying is this general function this should be a general function that can look at the Euclidean distance whoops between two people and I'm going to and boy I really don't like the way I get so many terrible things in the last example that I don't like but that's fine I want this function you know it was feeling that I put this in the HTML right here what I really want is for this function to return that similarity score so I want to have a generic function that receives two names and return that similarity score so now what I have is when I press the mouse and I say find nearest neighbors when I press the mouse I want to find the nearest neighbors so that's my function find nearest neighbors and to whom who are the nearest neighbors name is dropdown dot value so I want to find the nearest neighbors to name okay so who what am i what what bye bye goodness what am I going to do here so in order to find the five nearest neighbors what they actually unfortunately need to do is calculate the similarity score for everybody and then sort that list by the most similar and take the top five okay so how are we going to do that well luckily for us we happened to have this nice array of data users that's the array of everything so what I can do is I can say let's go loop through data users index data users dot length and what I want to say is I want to look at somebody else other equals data users index I and as long as other is not equal to name like I don't want to check my similarity rating against myself as long as other is not equal to name I want to get my similarity score between Euclidean distance we calculated this in a previous video if you didn't watch that link in the description below so turret cetera between myself name and other so I want to look at all those similarity scores now where am I going to put those similarity scores well there's a variety of places I could put ten but why not just add it to that object so data index users index I and now I don't like this so I think what I'm going to do is create a temporary list so what I want to do is create a list called similarity similarity scores is an array and what I'm going to do is I am going to for every single user this will be interesting ah yeah why not what I'm going to do is I'm going to say similarity scores index I equals equals F similarity so I'm going to make a little table called and let's so let's look at all the similarity scores let's see if this works okay here we go so I'm going to run this and let's look at okay users is not defined sketch at line 45 okay so what do I want to do I don't have access to this users variable here I'm just going to make it a global variable which is not the best solution but it will do for right now so that I can have access to it there let's hit refresh and cannot read the property for of undefined at sketch ojf fixes I have another bug here in line 60o dot name this needs to be dot name so this needs to be dot name I want to look at the others name not the full object and so now when I'm seeing everything here so I can take out some of these cons of this console dot log so now let's do this come on so there we go there's my people attempt to make this more interesting we could think this is an array of all of the similarity scores now notice there's no index zero in this array because alka happens to be user 0 and I am NOT so what I should do here is I should do something like I'm just going to do similarity scores equals negative 1 so by definition if a index I so if it is yourself I'm going to put the similarity score is negative 1 so I'm going to that well what I do the sorting later it's going to ignore so what I have here is an array of all of these values I can easily sort that array because then I have these value I have this array of all the scores sorted but that's not what I want I want all of the names somehow sorted and I have a separate array guess what JavaScript array sorting to the rescue so you then maybe you woke up this morning and thought I hope I watched a video about how to make a movie recommendation system and then you watch the video and really I think bonus I learned about sorting JavaScript arrays so we're going to do this so let me show you a little bit about this let's say I have an array and it knows what I want to type it has some numbers in it 52 1 negative 799 513 so I can actually say array dot sort and what do I get I get the array in sorted numerical order now what is the actual array it actually changes that array so it doesn't create a new array in sorted order it actually changes this array that's in sorted order and hopefully you can see that now here's the thing if I have an array and it's like some letters C B a V B G right and now I have this array of all these letters I can also say array dot sort and now I have it sorted in alphabetical order JavaScript arrays can be sorted with the sort function if JavaScript happens to know how to sort them because what if I were to just put some generic objects or some other kind of data that doesn't have an obvious way on how to sort how it it sorted well javascript to the rescue this sort function can actually take a call back I can put a function inside of there and the sole purpose of that function is to tell JavaScript how to compare two particular elements so how am I going to do this we realize there's a flaw in the way that I wrote this but we're gonna everything's going to be fine I know what to do trust me I know what to do it's going to be okay okay so what is it that I want to sort I actually want to sort data dot users I want to see that array the array of all the users in sorted order were the most similar users or at the top of that array so what I want to do is say at the end of this where I calculate all the similarity scores I want to say data dot sort sorry data users dot sort and I want to say compare similarity by having the longest so in other words I want to write a function that compares the similarity scores between two now what this callback by definition takes two elements that are in that array a and B so one thing I could do is just say let's just look at this console dot log a dot name B dot name now this is not going to do anything but let's just run it because it's just going to log stuff okay let's run this submit so console logging too many things I don't want to see this anymore let's do this again submit so look at it so it's definitely comparing doc versus Leon he walks where's Leon Daniel versus Leon blank versus Leon chewbacca so this is a list of every user be compared to every other user in order to sort that array however I don't want to sort it by their names right if I wanted it to be in alphabetical order I could do that very easily like by comparing their names I want to sort by the similarity scores oh but how do I look up their similarity score by their name now I have no real easy way to do that unfortunately luckily for us I could not put these similarity scores in an array but I could put them in an object where what I actually do is store it by their name and in other words I could just at this point now yeah I could keep that as negative one so so what I'm doing now is I'm going to store all of the scores in a lookup table that is organized by their name so now what I want to do is I'm going to say score 1 equals similarity scores for a and score 2 equals similarity scores for B so now let's console dot log score 1 and score 2 let's see what those look like undefined undefined undefined okay what it up a dot name B dot name right I want to look it up by their name because the array that I'm sorting is the array of the full object so I want to look it up by their name so let's try that and look at this so we can plainly see we're comparing all these similarity scores and now it's our job to say to JavaScript to the sort function this is how these numbers should relate to each other I won if score one is higher than score two and then user 1 should be before user 2 in the array and the way that we do that is by saying I can never remember this so I always just do this through trial and error but basically it's up to me to return a positive one if I want a before be a negative one if I want be before a or a zero if they're equal well I don't actually have to do as a positive one or a negative one but I can actually just return is I can return score one score so I am giving a comparison score to these two similarity ratings to JavaScript so that it can sort those objects okay so it's sorting the object in data users by their score in the similarity scores lookup table okay let's now say consult log data users let's take a look at this okay here we go submit so here's our array hold on six I want to look at it boy this is white okay I'm going to look at it now let's look we should see a high similarity score for note I think I did it wrong oh I don't see the similarity scores here I should put this little so clearly I thing is sorted in the wrong order because alka is the first thing in the array and alka has a similar a score of negative one I just realized I can't even see the similarity score so one thing I could do which you might do is exercise I could add as a property the actual similarity score here but I'm going to do this in a little bit of a different way so first of all let me just say score two score 1 let me invert that and run this again and hopefully what we're going to see in the first spot in the array is Praetorian so this is the user that's most similar to Al Kut we can't really see this for sure so how can I see this for short so what I actually want to do is I just want to display the top five so what I'm going to do here is I'm going to say for VAR I equals 0 I is less than data well is less than 5 I want to look at the 5 so this is let me say bar K equals 5 I want to look at the K the five nearest neighbors and I'm going to say create div data users index I name + space + similarity scores so first of all I want to look I just want to get their name so let's put that in a separate variable name + similarity scores by name so let's see if let's see those come up here we go and what I'm going to do is I'm going to make all of these divs I'm going to put them in that put that in that result parent that I was using from the previous result paragraph that is using from the previous example okay so here we go let's look at the top 5 most similar users oh boy is it just exciting to alka criterion with a similarity score of points 3 6 leone with a similarity score of i don't have other sounds 1 3 3 3 geremy with a similarity score of point 3 3 Baraka my friend Randy with a school Randy they're in the fifth spot with a score of 0.28 alright so we could try this with any other user like Chewbacca and we could see oh look at this so I got clearing it so let's uh I think what I could do is a I might as well fix this while I'm here is right when I'm about to find the nearest neighbors I should just take if this is a silly way to do this but I'm going to is this going to actually work will this delete everything that's in result P just by giving it blank HTML this might be a terrible idea no because those divs are still in there so what I want to do is result divs is an array this is a very silly thing that I'm doing but I'm going to just put all those divs in an array so that at the beginning what I can do is and I'm sure I could dynamically access all of those by doing a select or something but I'm just going to say result did index i dot remove and then result div is a new empty array so that should yeah and interestingly enough the sorting order because these are all three or equal and actually getting a different order each time which is kind of interesting to realize and now we can see we're getting similarity scores for any person Kenneth similar to this dot frost try on Stefan and Keyon okay we've done it now we have the knearest similar people to a given Raider now here's the thing this is what I'm going to do in the next video before I leave here today we make one more video what if a new person comes onto the scene and rates a few movies but hasn't seen one of the movies how could I guess a new rating for the new user based on their similarity to their K nearest neighbors and this is a regression problem I want to predict a star rating like you could say the classification because I could classify the stars into 0 1 2 3 4 or 5 but I might do like a 3.4 I might sort of calculate a numeric continuous score but so that's what I'm to do in the next video I am going to predict a star rating of a new user who hasn't seen all of the Star Wars films are you going to be here to watch that video I would say I hope so but I fully understand if not so I'll see you maybe in the next video thanks for watching