hello and welcome to a few 5g really how about seven that was kind of pathetic but I just had to do it I'm gonna mute this right now what I have here is a p5 jazz sketch that is playing a sound file and this is a first video in a playlist series of videos about working with sound in p5 guess where we'll cover things from playing back music sound effects sound synthesis and playing melodies beat detection also queuing things to happen at certain points in music this is my random list of topics in my head right now but this very first video all I want to do is kind of start with this idea of loading a sound so the very first thing that I want to look at with you the viewer listener here is how to load a sound file now there are lots of different sound file formats I'm going to use a sound file format mp3 and the function that I want to use is in NP 5 is this function called load sound so what load sound does and in here the the argument that load sound requires is a file name you can actually give it an array of several different file names if you have multiple file if you have that same sound file in multiple formats and then different browsers based on what formats are compatible was kind of like picked the right one all magically behindthescenes but I'm going to skip all that and I'm just going to pass in the mp3 file here so let me show you the gist of how this works so I'm going to come over here and I'm going to go to my finder and desktop I have this folder here called play music and in that folder is a mp3 file that is called just like a rainbow by the columbian so this just to give credit where credit is due this particular this particular track comes is available on free music archive a Creative Commons license available for derivative work so I'm using it in this video it's got a nice old tiny sound to it that you're already heard and what I'm gonna do is now go to my code and I realize I already wrote the code for this I'm going to quickly delete that code yeah quickly delete that good query delete that code you didn't see it you didn't see it submissive oh I'm in a bike men in black erase your memory thing okay but anyway so the first thing you need is a variable so you need a variable to keep track of a reference to whatever you're going to load with a load sound over here so um you might think oh I'll just do something like this var song equals load sound and then say file dot mp3 this absolutely will not work because the issue with what I've written here is load sound as a p5.js function is not available outside of setup or draw so another option I might do is all I want song to be a global variable but what I'll do is in setup I'll say this and then I'm going to say song dot play so this might be your kind of instinct here which is that uh what I want to do is load a particular sound and then immediately play it the thing is remember you and I here in this world that we're in which you are programming in JavaScript and JavaScript is the land of asynchronous callbacks things happening on their own schedule so we can't rely on the sound this large sound file might not actually be ready by the time we get to song dot play it's still going to be loading so we need some way to guarantee the file is loaded before we ask to play it and there are two ways to do this and I wrote these over here there's the sort of preload way and the callback way so let me first show you the preload way so everything a JavaScript of you know and in the world really in some ways is about events and we currently have a set up event in a draw event set up happens first draw loops over and over again but guess what in p5 there's a secret event that actually happens before setup it's like the pre setup so that thing is called preload so what I can actually do do is put things now preload is not for just stuff that you want to happen have happened before set up preload is only for things like loading files loading date loading media loading things that you want to make sure are finished loading before setup p5 is a special way of handling this behind the scenes but anything that you load load sound load image load video I mean load video is not a function I think idiots create great video but those types of things you can put in preload so now if I were to run this this would work because song play can be called because load sound is in preload now that file that mp3 is not the name of my file so I'm going to go just grab the actual name of my file and put it in here whoops and then I should be able to and let me just actually just rename the file to rainbow right now just to make things a little bit simpler looking at the code and now I'm going to unmute this tab and hit refresh that's scratching record so this works okay now what I do actually is in the console here since long ago I could just do that stop is a function that will stop a particular song from playing and then I could also play it again I'll also mention here oh oh it's very loud it's very loud so one thing that I think we should do I'm having an issue with my video recording sound setup thing where the volume of the sound is a bit too high compared to the mic people in the chat are telling me to keep dancing but you watching this as a video tutorial so don't want to see I can make a separate dancing only video there's also a theory going around the internet that I'm like a centaur or something cuz you can't see my legs but I guarantee you that I have actual legs we were wearing shorts IG's it's very hot okay um though I like the idea of being it then maybe being a centaur is a little bit weird I read more like a unicorn unicorn ah a unicorn are with a little like horn and some purple hair perhaps would be nicer for me that'd be more appropriate really gone off the deep end here so what I want to do actually you know we're here I have an excuse now to also show you that I can say other I could call all sorts of other functions on the particular song variable like set volume and I could say 0.5 so this will make the volume the volume is a number between 0 & 1 1 being at full volume 0 being at no volume so let me just do that and I can hit refresh and it should be a little bit quieter I could do a little each other I get one bottle just so you can hear it should be quieter when you should be able to hear me okay um that's one thing you could do while we're at it why not just stop it for a second uh I should let it play in the background actually let's let it play in the background uh while we're at it I might as well show you that I could consider doing things like slider equals create slider so if I create a slider then I need a couple things I need a range between zero and one I want to start at point five and I want to increment of like you know zero point zero one and then I could always say in draw now some got set volume slider value so this would allow me to now if i refresh this I should get a slider here and I can turn the volume off so this is good for me because now I can let this page run and I can keep that slider there so there's a lot of possibilities in terms of making sound very quickly and easily interactive in the browser with a slider a button set volume this is the basic idea but I digress uh because I forgot that what I was here for was to talk about now okay so here's the thing let me run this again and I'm actually having to start with a volume of zero just to like not have the sound play for a second notice see that message there it's there for a while let me zoom in on that again so p5 behind the scenes that preload function it can't make the canvas I can't do any man animation it can't do anything until that sound file is finished loading so behind the scenes automatically it just puts this the text loading there in a div or something so that you can see that something is happening so here's the thing you eventually making a fancy or more complex elaborate project you might actually want to have stuff you might first of all you might have like 50 sound files and you don't want the user to sit there and watch it loading for several minutes you also might just want to have an animation start it's fine if it takes a bit to load and it'll play once it's loaded so this is the idea of a callback so instead of using preload there's a way for you to have your sketch and animation begin immediately and allow yourself to then trigger an event a callback when the sounds is finished loading so let's look at how to do that briefly okay so where am I I'm over here no I'm over here yes gotta work on the cut button okay ah code okay so the difference is now I want to eliminate preload eliminate preload and I'm going to put this back into setup I can even keep the slider there but I can no longer have song dot play in setup because um why can i no longer have saw not play in setup because because the sound won't have finished loading it so what load sound can have is a second argument that second argument being the function that's triggered when the sound is ready so I'm going to just right in here and say I'm going to say loaded which means I can now write a function called loaded and I can say song dot play in that function so look what I'm doing here I have a global variable called song I call load sound in the setup and then I don't actually play the sound until the sound is loaded and this callback is triggered this is very similar to things that I looked at in some other videos with like low JSON and loading data and that type of thing okay so let's see if this works and you can see it's working but and we didn't see that the point is we didn't see that loading thing so you know I could if I actually had some sort of animation going on here and let's let's have the volume start at 0.5 you can see that well before the sound is playing animation is started so that's nice infection rate lucky use the callback um now I'm starting to feel like a little bit crazy person like that song is just like looping the beginning of it in my head over and over again okay so how are we doing here I think we've gotten through let's see what I've got on my list little Mentalist here we talked about um so this is an easy one play I've been using dot play I don't I use dot play it just plays the song and when it gets to the end it stops I could also use loop and loop is going to you know it's going to whenever gets to the end it's going to start over from the beginning so if you have a background track for some type of animation call loop at the beginning it will play forever we looked at set volume and maybe what I'm going to do really quickly right now is look at rate and pan and then I'm going to do jump and add cue in the next video so let's quickly just add looking at manipulating the sound with rate and pan so I'm going to just create a couple more sliders a slider volume slider rate and slider pan so and I'm actually going to get rid of the volume slider and I'm going to add slider rate and I'm going to add a slider pan and what I'm going to do is I'm going to say a song okay so I want to do a pan so I'm going to comment these out right now and we'll get you in a second pan and rates and slider pan and slider rate okay so what's going on here the rate is the speed at which a sound is played back so let's think about the range of that well if I want it let's do rate first if I want it played back at its default rate that value would be one if I want it to be half the speed it'd be 0.5 if I want it to be double the speed it would be two so let's make the rate go between zero and three and uh let's call song dot right here in draw with the slider so I'm going to run this you got the song playing it now I can kick the second slider go back here oh and let me make it a slider and let me get rid of the panel side okay so if I want to dance at the regular rate I'll do that now let's turn it up so we can see how your five times the Tiki we've got like chipmunk stared right here got a little people in the chat or like talking about me like I'm a total crazy person which clearly yeah okay but you can hear it's lower down so I don't know maybe I just want to make the range between zero and one point five so you get the idea here you can also adjust the rate and it's also adjusting the pitch at that point and I'm sure there are clever you know sound magic math formulas till they speed it up but keep the pitch but that's not part of the short for default 0.5 Jes library and then I can also add the pan I have no idea if you'll be able to hear this now pan means am I going from the left speaker to the right speaker we're panning the span the sound back and forth from if you're wearing headphones left here to right here so I'll be curious if this works at all in this particular video tutorial okay so here we go ah so what is the range the range is between negative 1 and 1 so negative 1 by the way I'd be curious what happens if you watch these videos at twospeed anyway negative 1 being left and 1 being right so let's put that slider back in and I'm just going to get rid of the rates right now and put it just that okay whew oh I have it at 25 and put on one oh no no zero so I want the default to be at zero okay so listen you should be hearing the sound in both ears right I'm going to pan it now I can hear on my laptop there's only coming out of the right speaker I'm out of the left hand to the left I hear how to the left for not at all so I can pan back and forth which you can imagine in real time you created hook everybody I have now reached the end of this particular video about loading sound so this is just the basics just kind of getting started here I'm gonna make a lot of videos about different things you can do with sound in the browser of p5.js but at least we have now loading an mp3 pile playing it back adjusting its volume it's rate it's playback all that sort of stuff figuring out how to loaded with preload loading with a callback that sort of thing and in the next video I'm going to look at the cue the jump and add cue function which I think will be be some interesting things that you might not be aware of as possible