hello alright in this video I am once again going to talk about a sink and a weight but in this case I'm gonna use a much more practical example so I'm gonna return back to what I did in the very first video about what is the promise and using fetch and I'm going to revisit this example so what this example does is it goes out to the word Nick API goes out it calls fetch on the word Nick API gets a random word once it has that random word it then requests a gift from the giffy API and we can see fetch returns a promise and so I've chained a whole lot of promises fetch from the word Nick API then we'd get a response convert the response to JSON then once you have the JSON put the word on the in the Dom then go to gif e then convert that to JSON then make an image and if there's any error anywhere on there log the error and I you know maybe I want to say console dot error error here all right so now I want to change I want to do this in a much nicer syntactically sugary way with async and await so how do I do that well the first thing that I want to do is just take all of this code and put it in a separate function so I'm gonna say whoa I don't know what this is like I'm gonna call this function word gif and I actually want to change a couple things here I what I want to do is I want to give it a because I actually this isn't important right now I'm gonna add this in the next video I want to show you what happens when you then need to call I have multiple promises but I'll come back to that I'm just gonna call this function word gift so if I go in here and setup and call this word gift function we are gonna see some gifts and sometimes there's an error right okay so now I want to make this I want to use a weight instead in other words I want to say a weight fetch word Nick API and I'm gonna say let data equals weight so this is by the way I can do this now this is the idea instead of all of this stuff all I have to do and I guess I call this response I can actually just await the result instead of having to fetch and call then that's the new thing but remember if I'm writing a function that uses a weight I must make sure that I label that function async so that's my replacement here and then guess what look at this oh my god I could just say then a weight response JSON so all of this stuff that I had to chain with vens I don't need to do that anymore I could just write them line by line by line in sequence and though all wait this will happen asynchronously because I've made it an async function so I'm just gonna keep going here then I'm gonna and I'm gonna call this response 1 I don't love that but this for the sake of argument here I'm now gonna say this now a weight fetch gif ei PI plus that word then I'm gonna call this JSON 1 then I'm gonna say let and these should all be constant and this is response one response to JSON so that's all the steps right and then and then I want to say let image equal JSON 2 dot and all of this stuff so I want to get that gif and now and I'm going to also say I think what I want to do here is say let word equal JSON one word these are the things I want to get during these steps so I'm gonna put words here and then I could just return at the very end an object with a word word image image yeah this should be like image URL probably so let's let's call this and I guess I'm going to be I I guess I'm gonna let's let me just do this I think this will be simpler JSON 1 dot word so now I've made this async function we're called word gift that oh wait oh wait oh wait oh wait oh wait just go through that all those steps and when it's done it returns an object with the data that it's retrieved guess what I don't need any of that anymore none of this and guess what this remember this is just syntax sugar to wrap all of this stuff in a promise so all I have to do now is say word gif dot then and then I can say results right what comes back an object with these things in it and I can say create P results dot word create image results dot image URL so then and then I can catch any error the same exact way console dot error error so look at this so look at this oh my goodness is this right could this possibly be right whoops I'm looking I'm looking sort of seems right sort of seems right all right here we go okay so I can't believe I just did this are you following me I guess I got lost in my own thoughts there let's just run this and see what happens cannot read property data of undefined sketch that you asked line 20 let's see what did I mess up oh hold on maybe actually oh this is right it works actually this it's just printing out the error it there was no image so I need to be better about handling the error which I'm gonna do in a second so let me change this they'll let me change the word Nick API to give me a word that's between three and five characters cuz so I really make sure that I get a gift okay well let's just see something is missed something's going wrong here let's take a look at json one huh no the word came in there's just no it's just no gift associated with any of these words really there's got to be a gift associated with fried I think I might be missing something gif tapi let's let's look at let's look at JSON oh look at this I just have this extra nonsense here uh I had that in there by accident I when I was recopy pasting things I made a mistake so hopefully that little debugging helped you sort of see what to figure out here it's nice though that it was this is so much easier to debug than if I had all that vens stuff and all the functions in sinner like anonymous function stuff I can just really debug this much more easily now all right let's try this again there we go so we haven't gotten a gift yet so why not let's look at let's look at this now all right data index zero images so data index zero images fixed height small URL why why is that oh I just called it image ah another mistake oh right forget this eventually results stop image so many little tiny errors because of all my naming weirdness okay here we go ready so I called it this variables image URL and that's what goes into the image property of the object I'm returning so that's the property need to get out here alright here we go feeling pretty good about this let me hit refresh all right we did it everybody so this was now an example of writing a function called word gif and what that function does is it asynchronously steps through all of these different asynchronous calls one at a time using the await keyword so that I can sequence them and when it's done I have the data that I want and I can send it back if I'm gonna write a sent just put a weight anywhere in my code I can't just suddenly put a weight in setup for example in p5 because I can't make setup an asynchronous function if I put a weight I've got to modify that function to make it a sync okay so what's left this is my chair I say that this is maybe a useful tutorial I don't know you tell me but what's left is I'm now going to show you what if I want to have 10 words and get all 10 words and gifts all together and I want to have something happen when they're all done that's what I'm going to need promised all for and that will be in the next video and that's the last one of this series on promises and async and weight all right thanks Wow I'm like a chef MA