Hello this video is about just matrix multiplication That's the only thing it's about. I'm gonna write a function to do matrix multiplication with simple twodimensional arrays in processing which is the java programming language so really I'm writing a Java function to do matrix multiplication now if you want to know a lot more about Matrices and matrix multiplications. I'll refer you to the Three Blue One Brown Series on linear algebra, but I also do have my own videos where I code a simple matrix library in JavaScript But this video is an anticipation of doing some... 3D Make 3D graphics in 2D. So projecting a 3D shape into two dimensions And so to do those tutorials, I need a function that will do matrix multiplication for me. So... A Matrix is a 2dimensional table of numbers. For example, this is a matrix [And, I cou... I could write I'm gon... I'm gonna... heuu... write three zeros down here just... No, you know what... you know what just...] For demonstration purposes I'm gonna leave it like this because this is actually a matrix that I'm going to use in my code itself This is a matrix it is... two rows by three columns Okay Now I'm gonna show you here's another matrix Here is another matrix, and I'm just going to write X Y Z This matrix is... three rows by one column Right and so one thing that's very important is that [When you do matrix multiplication.] Matrix multiplication only works if the columns of matrix A match the rows of matrix B. [And you can see those match up here.] Now. What do I mean by matrix multiplication? how do we multiply these two things normally when I say multiplication I might mean something like You know 2 x 3 = 6 or [I could even like do something where...] [Oh, I have these two] What if I did some like 3... 1... 4... and 2... 2... 1... You can almost think of multiplying these and getting a new matrix, that's 3 x 2 = 6, 1 x 2 = 2, 4 x 1 = 4 But that's not matrix multiplication. What I just did here is what's known as elementwise multiplication. It's not what I'm talking about here What I'm talking about here is matrix multiplication also relates to something called the dot product You know, I'm gonna I there's too much to talk about forever and ever in this video I really just want a function to perform matrix multiplication with this and what this does is basically the way that this works is you [Matrix multiplication, which has... don't really have a good symbol for it.] So I'm just gonna write MatMul right here I want to do matrix multiplication. Let's go back to that webpage that I was at at the beginning and I'm going to press multiply here. Let's see what happens whoa, OMG, aaah ! Look at that it like went up and then went sideways. That's interesting. Let's go to next. Whoo. Look at that So what so what just happened there? Look at this I am going to take this row and Multiply it by this column in a way that this number gets multiplied here. This number gets multiplied here This number gets multiplied here and they all get added together so what I'm going to get is 1X + 0Y + 0Z X now I'm gonna do exactly the same thing. We can confirm this Then we do exactly the same thing for the second row Press this button. I'm going to take 0 times X plus 1 times y Plus 0 times Z and I'm gonna get Y and then I am done so 2 by 3 matrix multiplied by a 3x1 matrix rows in what a 2 by 1 2 by 1 matrix now, so This is the basic idea this is actually the reason why I'm showing you just this one scenario is this is what's going to happen over and over again in the videos I'm about to make about taking a 3d point with an x,y,z and Projecting it into two dimensions and what this matrix actually just did is just eliminate the Z. It's as if I am looking straight on at a threedimensional object and I just can't see the Z at all Ok so now let's Go and write the code to do this matrix multiplication So now let's open up processing and... how am I going to make a matrix? So I'm gonna do I'm going to call This first matrix. I'm going to make it a twodimensional array a projection and I can just say what I say {1, 0, 0} And I'm going to format it in my own goofy way {0, 1, 0} and then I'm gonna say... float [][] point = [now this is silly but I'm gonna do...] float [][] point = {175, 50} [Okay, so let me just do this and let me do...] matrix multiplication All right, what's wrong here need another bracket All right, so you can see and I guess if I want to be consistent I could do this And there we go, so these are my two matrices I have This one and I'm just storing them as twodimensional arrays and I'm basically the first Array the first index is which row and the second index is which column? Okay, so that's what I've got right now alright first since I'm in processing Let me just add a setup function here because the idea is what I want to do is I want to say float result being a new matrix is is something like the result of matrix multiplication Between the projection and the point matmul So I need to write my own function. Of course. It's complaining to me because it doesn't know what this is I need to write my own matrix multiplication function. So I'm gonna go ahead and do that right now and I'm gonna say This is a function. That's also going to return a twodimensional array And it's going to take two Two matrices in which are two and then it's got to return something. So let me just add `return null` at the bottom here So now I should have no errors. NO ERRORS ! So this is now this is what I want to do. I have projection point I Want to be able to matrix multiply both of those and get the result. So, how do I do that? Well one thing as I need to do is I need to know Columns A is a dot Right. Okay, how is it a dot length? And then rows a is a index 0 dot length Does it not let me do that? Yes, okay so in other words I first want to figure out the columns and rows of each one of these because that's going to be pretty important now It's a twodimensional array So if I say Index 0 the length, that's actually that's the number or no. So this is the columns This is the columns right? The number of things in it is the number of rows Right, we could see here like just `point.length` is three, `point[0].length` is one so that's the columns of A and and now the columns and rows of B, or `B[0].length` now this assumes that there's at least one thing. So an empty matrix this is going to give us an Error but... big deal now, the other thing that I need to look at is I need to make sure That the number of columns of a matches the number of rows of B So if Columns a Does not equal rows B Then I'm going to just like return null and maybe print line columns of a must match rows of B Okay. So now we have a little and then now assuming that everything is okay. I can now say float result is a new array with The number of [so hard] the number of rows of A and the number of columns of B The number of rows of A and the number of columns of B There's a great comment in the chat "why would they be float? I'm pretty sure .length is an int." Yes These should be integers. There's no reason to make them a float. In fact, that's only gonna cause me problems. I'm just so used to Programming in JavaScript. I don't have to worry about this stuff And so to me float is like var let [or const] that sort of thing, but great point. Okay, so that's a really great point. So what I need to do, first of all is I need to fill every single spot of the resulting matrix So I need to go through all of the rows And then I need to go through all of the columns [Oops... result] [Oh Wait wait, yeah result...] This is silly because I could just use rows A and cols B, [but I'm gonna... oh... these don't have... aaaaaah] Sorry, I need to go through all of the rows which is rows A and all the columns which is columns B sorry. I was imagining like in my previous [and this is for] I made this matrix library So this could be the beginnings of a matrix library potentially if you wanted to write your own. Have fun ! How about it ! Look, I'm like Sisyphus and I just programmed the same stuff over and over again and I make the same and then I get all The way up to the top and my matrix thing works and then it the matrix Multiplication rolls all the way down to the bottom the hill I forget how it works completely and have to like push it all the way back up. Again. This is my life Alright, so, okay. So now what I need to do Is now do that dot product the reason why I say dot product is really What this is is it's the dot product of these three numbers with these three numbers. So I need to take row from one and The the row and the column here, okay So what I'm going to do is so the dot product needs a sum So I'm gonna say `sum = 0` then I need to go through All of the columns again, I guess I'll call this K Columns B. And then I need to add up [What do I need to add... I need to add the...] [The the J... Sorry...] I need to add [This which is in position most in position (0, 0), but that's really positioned] position (I, K) I think A[I][K] * B[K][J] Does that make sense? right because I'm going through all the columns of B all the rows of a and then K is just Moving me along all the columns of A and all the rows of B, right [This is... so...] I'm gonna go through I'm in row I and I'm in column J. And then I'm gonna take K which from row I ? From column I times row... J (Crying nervously) [Are you watching this ? I am so sorry for you.] It is right though I actually think I have this right, but let me actually make this more clear This is row. I Column K. And so when Row I is 0, K is the thing going up this is Row K is the thing going up Column J which is fixed here. Just zero. So look at that. This should be what I have here I want to take and multiply add all those things together. And guess what? You might have to pause this video and and and make sense of this yourself [I should have practiced this] the `result [I][J]` is that sum? so now I Should be all say return results. This is by the way what happens when you don't have numpy? Your life becomes I'm sure there's plenty of matrix libraries for Java I just can't bring myself to use them Alright first let's just run this and see if I get any errors. So no errors came up. That's good I want to write a function. I'm gonna call it Log matrix or let's call it print matrix. That's already a function in processing actually. Oh so great if we get to show that later all this is so exciting okay, I'm gonna call i'm just called log matrix and it's gonna get Matrix m and then first i'm just going to get the columns and rows Columns and rows and Then I'm going to print line columns by on a rows By columns Then I am going to a print line Some nonsense and then I'm going to say I'm gonna do this nice little loop again this double loop And this is rows and this is columns and I'm gonna say print Matrix row column Plus a space And then when I get to the end I'll do print line and now what I should be able to do is I should be able to say to Test if this works I should be able to say log matrix projection Log matrix point Log matrix result so now let's see if anything I did work correctly All right, let's look. Oh no, no, no, it's wrong. Well, I've gotten close. So okay, so First of all, let's let's do an extra. I need an extra print line in my log function Let's do when it's done let's do an extra print line. Okay, we run this again, so I have some mistakes So the good news is this is right two by three. This is a two by three matrix and that Looks right. This is a three by one matrix three rows one column that looks right and the result should be a 2 by 1 matrix 7550 now I Oh We're not 7550. I've used different numbers. It should be 175. That's what I should see, right 175 X Y. So something is wrong in my matrix Math calculation, so let's look at this Okay, I found my bug This right? This is the bug. This is the offending line of code columns B Why is that wrong? That is wrong? That is most definitely wrong. Let's go over and look as to why it's wrong Remember how I was saying K is? Counting through each column here and then counting through each row here. That's the whole thing that has to be equal Three columns three rows three columns three rows So that number could either be columns a or rows b either one of those things. Is that what I put in there no, so this should be columns A could be rows B, that would also work and I am now going to run this again and VOILA ! (Jumps) We perform matrix multiplication now, I need one more helper function if you will bear with me I'm going to need this for For the future In these videos that I'm intending to make I need a function because I'm gonna use PVectors a lot So a PVector, by the way like PVector V is Typically how I'm going to want to represent a point So if I want to represent a point I don't want to have to write it like this all the time my code that's gonna be a major pain but if I want to do matrix multiplication I'm gonna want a some tool to convert from a point to a PVector to a matrix. So I want to function Vec... vec to matrix That receives a P vector and then I want to function probably also matrix to Vec That receives a matrix And So let's write both these functions. So This should be pretty easy. I just want to create a matrix, which is It has one No, three rows at one column and then I mean I'm gonna be really lazy about this I'm going to say `M [0] [0] = v.x` and then [Whoops 1 I can't type] 1 and 2 v.y, v.z, that's useful and then I just say return M Then I'm gonna write the other function here now which is I'm gonna say PVector V is a new PVector And V.X equals M What am I saying here which is M [0] [0] V.y equals and 1 0 now I might get some matrices back That don't have that many rows. So only if m dot length is Greater than 2 2 Then I can say V.Z equals M [2][0] and return V So assuming these helper functions are written correctly Now I don't need this. I'm going to take this out and I'm going to say we're set up. I'm going to say Float[][] point equals Vec to matrix Vector matrix V Now I can do that. Then. I also want to say just to be sure I'm gonna say Yeah, I'm gonna say now I'm also going to say PVector V equals Matrix to Veck result and then print line V also, okay Let's run this now and we should see What do we got? so I have my two by three matrix My vector got so I really just to be clear about this. I Should probably say right up here also print line V So just to see that everything worked This is my PVector 175 50 this is my projection matrix This is my PVector converted to a 3 by 1 matrix this down here is the result of the matrix multiplication as a vector and this down here is That same result all of this to just take the Z component out but oh Boy, we're ready. Now. We're gonna have rotation matrices. I'm ready. I'm ready I'm ready to move from the first dimension to the second dimension. Oh One more thing suggestion from Kelli in the chat in terms of making a useful helper function It would be really nice for this here to be right the first thing that's passed in the second thing is the vector so So I should have an option where this is a vector and then I would just say I Could just quickly com overloading the function I'm running a same version of function, but with a different argument. This is how this is done in Java I would say Veck to matrix B and then I would say return Matmul a M Right, so if I do that then now I can get rid of this line and I can just say V here and I should have the same result and get rid of this log I don't think I need these logs anymore just to make sure it works. Yep So that that worked we can see that worked as well So this makes our life a little bit easier now again, this is by no means comprehensive In terms of matrix mathematics, but I happen to know that for the next video I'm going to make where I'm going to take 3d points and project them into 2d. This is all that I need Okay, see you in the next video which I will link to through the magic of the linking of the the things (BELL RINGING) (MUSIC)