welcome to part two of this firebase tutorial stuff in the previous video I made a very simple game where you try to click as much as you could and then you type in your initials and you hit submit and your score gets sent to a database as part of firebase and we can see that that score is here right now if that one that I just submitted as I look in the firebase console we can see we can see it right there so now what I need to do is be I need to figure out a way to ask for all the data from the database itself and display those results on the webpage and then anytime a new high score is submitted the data could be shown as well so ok so what I'm going to do is in the code I need to I need to get again I need to say hey the part of the database that I want to access the reference the path to the reference is scores and then what i want to say is ref on so on what I'm now doing is I'm saying I want to start to bind different kinds of events so there are all sorts of kinds of events one particular kind of end is hey there's data and that particular event is a value so I want to say on the event value I want to have two callbacks now I want to call back a function that gets triggered where I could receive the data and then I also need a Carl Hall back in case there's an error I can't remember which one goes where let's guess I'm going to make a function called got data and then air for error data and I might have gotten those reversed and I'm going to just add those functions now got data data and I'm going to say air data error and I'm going to say console dot log error console dot log air and then I'm going to do a console dot log data here so let's see if I got that right so what should happen is right when the program starts I should see some data in the console so let's look at that that looks promising so I don't think this is the error but you can notice like is there any way I'm ever going to make sense of this what is this crazy javascript object so the thing about it is firebase has its special magical way of doing things and the data that I actually want is in I have to retrieve it with a function so this thing that comes in is a full JavaScript object with lots of functionality in all senses that you do and I think if I call dot Val I'll see the actual data there we go that looks more promising and you can see look at this this looks like an array the or it actually is not an array sorry it looks like an array but this is an object where the keys each key is bound to an object that has the initials and the score initials in the score initials in the score so what I want to do now is iterate over all of those keys to display all the scores on the page so how do I iterate now if I had an array I would just write a for loop or I could use a for each loop everybody always complains that I don't use for each loops you know I'm just I'm less like a little baby programmer and they scare me I just like I like a good anyway I just like code to be sort of readable and I of it's just a convention that I'm adopting someday I'll you support each loops for all of you who are wondering so what I want to do is I want to say I'm going to actually save our scores equals date eval and then I'm going to say what I want to do is say keys equals object dot keys I think this is how I do this in a JavaScript object keys or maybe it's get keys but this should give me an array of all the keys in that javascript object let's try this that looks promising yep so now I have an array with all the keys those keys to the divet to the data so now I can say for VAR I equals 0 I is less than Keys length I plus plus var the key is keys index I whoops and now I can say the score the name or the initials is scores index sorry a scores index K dot initials and the score is scores index K right that's the key that it's dot a dot score okay I think I'm doing this right I'm gonna and I'm gonna just I just want a console log it to see that it works so there we go oh my god I know why I got undefined 43 I wonder if initially I didn't call it initials so let's go back let's see why did I get undefined so yeah look at this these first whoops these and this by the way is the the first things I put in the database so I just need to delete these that were like old data when I was like testing this is the wonderful thing about firebase I can just remove them right here so now this one is correct so now I can run this again and I can see there's all the school there's all the initials and high scores so this is good and by the way let me now I want to show you something that's going to happen this is going to be crazy I'm going to add my initial I need different initials are BW and I'm going to get some points here and hit submit look I added something new to the database and an event got triggered that showed me all the data so this is what's so great about firebase I can set up an event just call that function anytime anywhere the data changes so I don't need like a separate like update data method this is always going to happen so what should I do I want to display those the high score list here so I don't know how fancy I want to get about this but I'm going to do it in a slightly fancy way uh it's not going to be very fancy I'm going to in advance set up a list an ordered list and I'm going to give that an ID score list I'm putting some stuff in HTML and then what I'm going to do is I am going to here I'm going to say VAR el I equals create element so this is a you know document I create element this is the same sort of I'm just using the p5 Dom library create element I want an Li element that has as its content the initials plus colon space plus score and then I want to say Li dot parent what did I call that score list so that's going to create that element and then put it in the score list and so here we go we should see there's the score list and it's always at the top so look now I've retrieved the data from the database and there is now interestingly enough what happens if I submit again and I now I do you need for with a some another look all of those came in again because at any time the data changes it refills my whole list so what I actually want to do is I need to also in this got data function I need to clear clear the clear the clear the list boys after doing these videos for a while my brain starts to melt so I don't know there's probably a bunch of ways I could do this I'm going to just also give it a class which is like a score score list ding I'll call it score listing so all these elements I'll assign them to a class because now I can just say at the beginning here I could say something like score listings equals select all dot score listing so I could before I'm about to end this rupture there's a much more efficient way I could do this but just to sort of like finish this off dot length I plus plus so this is a function in the p5 library that allows me to select and get an array of elements I want all the elements that are part of that class and since everything I created it was assign this class before I regenerate that list let me just clear it so I'm gonna say score listings index i dot remove so now what this should do is a I should see those are the scores and now I'm going to add another one you know AAA with four and we can see that just gets added there so now we have a full we featured web application with a simple gait now I kind of I hate that this I hate that the game is below the score list and I just I just have to fix it so I'm going to fix that I've done this in like a kind of ridiculously horrible way that I don't like but what I'm going to do is I'm going to make a div and I'm going to call it game and what I'm going to do is all the other elements that I'm making but I made in the code I'm going to parent them to the div which is above this is so silly what I'm doing this but I just can't help it so I'm gonna say canvas dot parent what did I call that again game create P I can actually chain these kind of functions parent game and then the buttons I should initial input up but you could do this so many ways this could be improved but I'm just doing it this way because it's going to work and it's going to make me feel happy and submit button parent so now there we go so now I can play this game Oh where's that click button the submit button the initial input who I forgot about this button so now we can see here I can get a high score and I can say I can have another set of initials ABC hit submit and we can see there it is at any time i refresh this page I come back to this web application I've got no oh I'm on firebase yeah any time any time i come back and i refresh this web application i've got the high score list from before so there we go we now have a fully fledged web application with a game that you can play a place for you to type in your initials a place for you to submit your score and a high score list that will be stored for all time in a firebase database and it is always updated whenever so if multiple people and multiple clients were playing this game this would update even as you're playing the game one thing that i want to point out that i haven't done yet in this and i haven't needed for this example is sometimes i want to as soon as i that's something that a database have have that key in my local code so I can update or change or work with that particular a record that's in the database itself so you know for example what if I wanted to instead of every time I do DTS and hit submit again it overrides my previous entry so a way that I can do that is right here when I actually push data to the database I actually get something back and what I get back is kind of like a result I'm going to call it this object it has all this information about my what I just did to send and one thing that's in there that's actually generated through the library itself is result is the key so I think if I console.log now result that key anytime I add something to the database we should see BFG and I'm going to hit BFG is going to have a nice score and I can say there's the key so you can see I have access immediately to that key and I can also store that in variable I know the one that was just submitted so there's a lot more things on that you might want to do here so let me so this I finished this up I've got this whole working example and I'm going to give you some exercises if you want to try to build the first of all make a more interesting game second of all could you sort this high score list by the highest score does firebase do that for you or is it up to you to sort the data once you get it back interesting question tell me tell me your answer in the comments the other thing you might do is you know have a be able to like override your own score during an individual session by updating a particular key so at some point I'll have to add another tutorial about how to update records in the database and if you're interested in that I don't have the video yet write that in the comments but what I'm going to do I'm going to do one more video as a coding challenge about working with firebase and I'm going to create an application where you create a drawing and that drawing gets saved to a firebase database and then you have a kind of gallery of all the drawings that that other people have made so a kind of collective crowdsourced drawing library okay thanks very much and I'll see you soon you