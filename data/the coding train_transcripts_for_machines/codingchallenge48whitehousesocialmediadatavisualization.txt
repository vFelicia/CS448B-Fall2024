hello welcome to another coding challenge in this coding challenge I'm going to do a tutorial and look at how to work with the recently released social media data released by the White House the White House made an announcement today saying hey we are inviting artists designers researchers scientists people of anybody to work with and make projects around the social media data from the White House from POTUS from FLOTUS over the last eight years so check this video's description there'll be a link to the White House press release and in that press release there are links to download Twitter data for the POTUS account the FLOTUS account the White House account as well as Facebook data and vine data as well so hopefully I'll do another coding challenge or some toriel's around working with some of the image or video data so what I'm doing here is I just want to do a kind of drop dead simple example of how to sort of like get access to the Twitter data and how you can start to look at it and if you lay tit and like like just present it back in a web page I'm going to do kind of a simple example with no point of view but I'm hoping this might inspire people to make projects projects that are critical in nature or political in nature or wacky in nature whatever you can kind of like think of it be creative with with this data and also you know there are lots of other Twitter accounts out there and I don't want to like you know there is this other incoming presidents who has a very active Twitter account which only gives me a lot of like pain and anxiety but that said you know you might think about what kinds of projects could you make out of this data set alongside of other data sets as well so so now first of all the data itself if you go to the links and get it you're going to get the data as a CSV file beating a spreadsheet a comma separated values file what I've done for this video is I've converted it into a JSON file so I have to I'll in the code that I'll link to you'll see there are two data files potus json and flow to stuff json and these are json files that have all data for every single tweet from both of those accounts since those accounts started if we go to the POTUS JSON file we'll see here it is a big array of tweaked objects each object has an d timestamp source meeting what was what was it tweeted with Twitter for iPhone so interesting to look at the text and some other metadata associated that tweet now this isn't the full metadata associated with a particular tweet you don't see like how many times with that tweet liked or retweet or what are the replies to that tweet these are things however that you could get access to by using the Twitter API because you have the ID for each tweet so for any tweet ID because they hey how many likes this tweet have or give me all the replies to this particular tweet so at some point ultra maybe I can make some other video tutorials about working with the Twitter API that so I'm just going to use this particular raw data so the first thing that I need to do is figure out how do I even load this data into a program that I'm writing and I'm going to do this in JavaScript HTML and CSS for a web page and I'm also using the p5 GS JavaScript library more about that in this video's description as well okay so in p5 I'm going to go to my code which is here so a p5.js is a framework that asks you to write a setup function and a draw function the draw function is for an animation loop if I'm going to do something animated which I don't know whether or not I'm going to do so I'm gonna leave that out for right now and in the setup function I'm going to and actually I'm going to add another function I'm going to say function preload I'm going to create a variable called POTUS tweets and that in preload I would say POTUS tweets equals load JSON POTUS JSON so what I want to do first is just say I want to load all the stuff that's in that JSON file into a variable and in setup I'm going to say console dot log POTUS tweets so let's make sure loading the data itself works other JavaScript frameworks or native JavaScript have other ways of loading JSON data from a file but this is one way okay so I'm going to go now here I'm going to hit refresh then we can see great looks like it came in it's a big array we can see like if I scroll down there's going to be a lot of there's actually only 320 tweets nice thing about this particular dataset from the POTUS account is that was a new account um from just maybe a year or two guidon the first we will see as we look at the data when the first tweet was but doesn't have that much data in it so it makes it easy for us to kind of work with and play around with if I look at any particular tweet we can see here is the information the ID the timestamp and the text I just met with CEOs some of our biggest companies who are blah blah blah okay so the what do I want to do here I think what I want to do is just sort of see let's I what I want to do is try to find the most frequently used word in a tweet for each month so I need to figure out how to first least parse the dates of the tweets so the first thing that I want to do here is definitely have some sort of for loop so I could say for loop I equals 0 I less than POTUS tweets length I plus plus I'm going to make this variable just called POTUS because I'm going to probably use it a bunch of times and now it's a little bit shorter and then what I could do is I could say something like hey let me create P POTUS index i dot tweet ID and what that's going to do is POTUS tweets is not defined oops because I change it to POTUS so I'm going to save our tweets equals POTUS tweets and so now I can look at tweets dot length and create a paragraph for each tweet ID and we can see there we go here are all the IDS I can look at each tweets text and here you can see here all here's the text of all the tweets now you can see this by the way it looks makes much more sense it's actually listed as an irrational ER and so we have the data so what can I do now first let's just see if I could count the number of tweets by month okay so the first thing that I want to look at is the date/time stamp so if I look at this if I look at each object this here's the timestamp whoops is this so if I come back and so let's look at the timestamps we can see and we can see this by the way is the newest tweet in this data set is November 11th and the oldest tweet is a May 18th 2015 I think five is May I hope so okay so now I have all the timestamps so now what can I do with that so one of the things that's interesting about JavaScript I'm good what I'm going to just put this a date I keep writing data date console dot log date and so let's look at this for a second whoops tweets is not defined so these are all I'm putting them in the console the reason why I'm doing that is I just want to grab one of them and I'm going to kind of muck around and figure out how do I work with a string that's a date in JavaScript so if I say date equals that I now have that string in this particular variable let's try some stuff I've done this before I just can't really seem to remember new date date that's interesting so that seemed to work date get a month for look at this we're a good shape right for now isn't the month five why did I get four so if I have this string I can create a date object then I can call functions on that five four but think about this January is 0 February is 1 March is 2 is so hard April is 3 and may 5th month is 4 so index 4 so we start counting from 0 where you get 4 instead of 5 so what I can do now in the code is I can say a date object is a new date with the timestamp I can say the month is date dot get month the year is important to here the year is date get year so now I have both the month and the year for a particular tweet and what I can do is I can say the key now is month plus I'll just put a slash plus year why am I doing this because if you've watched any of my videos about word counting what I want to do is I need to associate a number the number of tweets that month with a key and the unique identifier of a particular month is the month in the year because I want to differentiate February 2016 from February 2015 for example okay so now we're getting somewhere I need an object which is I'm going to call it tweet counts I'll just call it counts and it's going to be an object and what I want to do is I want to figure out if counts and I'm going to say has own property key so I want to know does this object already have a property that's that month if it does increase its count so what I'm doing is I'm counting every time a tweet has the same month and year if it does not I need to add that property I need to add that property and give it a count of one so if now I console.log counts here and I run this program again we can see here's my object get full year thank you so many in the chat says that the function I'm actually looking for is get full year so let's run that again and we can see there we go so thank you so the that other function is doing something else slightly different so we can see I've now counting each by year so so now we could visualize this data let's visualize this data using canvas and draw like a little bar graph or something like that so one thing I'm going to do is I'm going to say create create canvas which is a p5 function for making a canvas 600 by 400 I'm going to say background 0 so now we can see here we can see I have a canvas that I'm going to draw two other thing I can do is now what I want to do hmm now did I get lucky art like so so here's the thing the order of the month is kind of important for what I'm doing right I want the oldest month to be first and the newest month to be last so let's look at one thing I could do here really quickly as I can say VAR months equals counts or object keys counts so this is a way of me pulling out just all of the keys that are in that particular object and just putting them in an array let's look and see what order they're in so the order is 10 16 there in word this looks like they're in sorted order but in Reverse so I should be able to say now month reverse I could have sorted it but I got lucky here they're just they're in the right order just in Reverse so I'm going to reverse it and now I can say for VAR i equals 0 I is less than month's length I plus plus and so now let's say I want to just draw a little bar graph so the first thing is the width of the canvas is 600 and I want to draw a bunch of like rectangles or lines or something so I need the width of each one of those should be the width of the canvas divided by how many months I actually have to draw and then I can just say let me draw I the each rectangle is going to have some sort of height let's just say the height right now is 100 each rectangle is going to be some color let's just say it's some shade of gray and so if I draw a rectangle at i times w write the number of months times the width comma the bottom of the canvas minus the height right so this is a little so the thing that I'm trying to do here is I want a bar graph so a bar graph involves a rectangle coming from the bottom but the way the easiest way p5 to define a rectangle is from this point here so what I actually want to do is say the X location is the height of the window minus the height of that rectangle that'll give me that point right there so if I come back here and I say a height minus H and then the width and I'm going to say width minus 1/2 have a little space and then the actual height itself up sketch line 32 oh float I wrote float because again I've used to programming in Java but here's just bar and you can see there are all of my bars they're all the same height if I made them a random height we can see there's now a bar graph of bars just draw it in canvas d3 for example if I use that would be able to do this probably for me automatically with SPG's and be so fancy but this is one way of doing it in p5 so now I want those bars to actually not just be random numbers but I want them to tie to the actual number of tweets so what I can do is I can say num equals counts index the key months index I so this is a little that syntax a little bit ugly looking and confusing to follow so I'm just going to say month equals months index I and then I want the count for that particular month and H I'm just going to say is equal to that particular number so we can see now here's my graph of tweets frequency by month then video there's not that money so I could say you know times 10 and we can see I expand it up now one thing I might want to do is actually normalize the data so I might want to find the maximum value and the minimum value and then normalize each bar so that the maximum is the tallest let's quick we add that here you know again a library you know a data library is going to do this kind of stuff for you automatically but we could pretty quickly normalize this data ourselves and what I want to do is there's probably I'm trying to think there's like also to like fancy ways you could probably do it but I'm gonna do it in a very simple way which I'm going to say like max max tweets equals zero so I'm gonna start by assuming that the max tweets are zero then I'm going to look through here I'm going to just look through all of the values in advance the same way I'm doing here but I'm going to say if num is greater than max tweets whoops then max tweets is that number so what I'm doing is I'm doing a quick loop to say like I assume the max tweets are zero anytime I find something bigger than that that'll be the maximum number so now I have the maximum amount of tweets and now what I could do is I could say H equals map they could use p5 s mapping function which takes the number of tweets which has a range between 0 and max tweets and map that range to between 0 and what how about height how about height divided by well let's not be too fancy about this that the window is 400 pixels high I'm just going to say 300 so now if we do this again we can see that this particular month which had the highest number of tweets is at the the top of our sort of our mapping so the so this is now the bar graph of Obama's POTUS ik the POTUS that counts tweets by months from the first month which looks like it's for May 2015 all the way to November 2016 ok okay so now let's this soar we've gotten somewhere we're doing a little bit of visualization things that if you were when after I published this code if you want to like try to do your own stuff this you know you could have a mouse hope you could have a key to show the the month you could have another Twitter account you can add the FLOTUS account to have like the bar side by side you can hover over it to see more information I could put the number of the actual tweets I could draw that onto the canvas as well but all that aside let's do a little bit of something else let's do some word counting to see if we can find the most frequently used word for each month as well okay now so this is something I'm going to need to deal with here so in addition I have key by month but what should each one of those months have each month should actually have a dictionary of words and they're counts so we immediately have made this program so much more complex right the only thing we're associating with each month right now is a number how many tweets but now what I need to do is really I need to have an object right and in that object I might start off with some stuff like the number of tweets total is one and then I might have words which is going to be another object so for each month right and counts is kind of like the wrong word now but I'll just leave it in there I have I want to have an object that stores information about all the words that were used that month and the total number of tweets that month and then here this has to change to dot total plus plus right because I'm increasing the total each time it's founded already and then I am also here what would have to change is dot total and dot total here so I should have the same exact program right now mmm missed something so I had said months index I dot total which doesn't exist for the month one of these weird mysterious JavaScript problems here we go so now I'm back to where I started but I have an opportunity now to add more so the thing that I need to do is also look at the text so the text is the tweet tweets index I dot dot text so now I have the text of each tweet the words so to speak are that text split right the split function takes a piece of text and chops it up into pieces makes it into an array and the thing that I tell it to split by that's what the thing that's in between words so the simplest thing I do is just slip by space or I could save slip by space or comma or period I'm going to do something a little bit goofy which is I'm going to say and this is using a regular expression so I have some video tutorials about that which split by anything that is not a word character so this means backslash W is a meta character that stands for any character that isn't a letter or a number use that to split and the plus means it's okay if there's a bunch of those in a row so if it's exclamation point exclamation point exclamation point or comma space use those together to split so if I even just look at this console dot log words and run this program again we can see here that you can see I now have all of these arrays of words so now what I need to do is count write this words object should have every single word an account in it boy this is like nested objects there's a lot to hold into our head here I think I could do it you like if you're having trouble following like a pencil and paper diagramming this might help pause but don't put me on a half speed desires now like a drunk person to be honest but anyway that's another story for another time there's no story there what am I talking about okay so what was I saying right so now what I need to is okay so this should thinking here because this is I made this a hard problem so this should happen first I should because I need to figure out if there's an object there already once that's done I actually should be doing this afterwards so once that's done I can do this and what I can do now is I can loop through and I think I don't want to use I here right I'm already inside a loop with I so I better make sure I use a different index for this particular loop look at every single word word equals words index J now what I want to do is something very similar right I actually want to now count the frequency of the words so what I want to do is say a word what I want to do is say if count write counts is the key accounts key counts for this particular bunch dot words has own property right if this particular words object has that property already oh boy I made this really complicated event counts index key dot words index word plus plus so each word is going inside of that words object is going to be associated with a number otherwise set its initial value to one okay so this is a this one quiet there's a lot of nesting going on here and I think if we look at the object itself in the console will actually help make this immediately clear because it seems sort of crazy but it's actually not that but but the nesting here is confusing because there is an object called counts and for each member of that object each property each month property there is an object that has a total and a words object and that words object has a bunch of words and counts totals in that as well and that's what I'm doing down here okay so let's put back in it so it's there already so let's run this again and we can see here here is this whoops here is this object so I want to look at is let's see if this worked so let's look at a particular what was the month that had the most was 0 1 2 or something so let's look at know who knows this was in reverse order so I'm this is not an order whatever let's look at this 27 tweets and words is an object and you can see here blank was 33 times so that's something I need to deal with the fact that oh look there's some like extra noise and you can see here's all the other words in alphabetical order act on climate was used three times ask POTUS twice big Betty floor FL may be for Florida three so you can see here here are all of the particular words and their counts so but we need to do we need to clean some stuff up a little bit because this is a definitely a problem that every single one is going to have a lot of blank in it so let's look and see here we can we can in the part where we are creating that table we can say if as long as word it length is greater than 0 then do this ok so I just want to quickly test to make sure there's an actual word there and if I run this again we should see whoops I don't have that blank anymore and the other thing I should do is capitalization I should ignore because if though if Twitter is used uppercase or lowercase I should allow for that to count as the same thing so one thing I'm going to do is going to say words index j to lowercase so that way everything is lowercase and I can look at a given month and we can see we can see we've got a bit more data here can 5 yes I can yes we yes we can make this coding example happen yeah okay so now what do I need to do I need to find what is the word that was used the most frequently each month and actually will be probably more interesting I have a video tutorial about something called tfidf which is term frequency inverse document frequency that might be interesting to apply here because we say what was the term used this particular month that was not used other months which would get you know I have a feeling where to get things like uh but we could we could kind of you know ignore we could have a set of words that we ignore that type of thing but let's at least see what we get okay so now what do I want to do so here as I'm doing the drawing I can say var words equals equals counts month dot words okay so I have now this array I have without these words but one way it would be to just sort it right sort it by count it's actually wouldn't be such a bad way to do so I'm going to get I'm going to call this word counts and I'm going to say words equals object keys that I can't remember what I what I use before object keys word counts because now you know now I'm just going to do this is silly I could sort it but I'm just going to do something just to find the the biggest one and I'm going to say biggest equals zero and I'm going to save our biggest word it is empty string and now I'm going to go through and look at words length J plus plus and I'm going to I'm going to say if word counts index word is greater than biggest then biggest equals that new count and the biggest word biggest just totally the wrong phrase there Bigley I don't know that's worse for a lot of reasons is that and now what I could do is I'm just gonna say console dot log month and whoops month and biggest word and biggest so let's just look at that data in the console and we can see uh something went wrong here Oh var word equals words index J so I need to actually pull that word I really this is not my finest baby I've ever made I need to pull that word from the array to look it up and we can see here right the the to the we to the tooth to the so let's do something let's have an object of words to ignore and I'm going to say var ignore the to the we you can get by the way list of like most common words and that type of thing so I just made a quick object called ignore and what I'm going to do here is say if word counts is greater than biggest and it's not a ignore word so I want to just checking like it's only gonna be something we count as long as it's as long as it's not in that ignore list so let's do this now and see what we get oh ah let's put something here that will evaluate to true empty string evaluates default try to figure out a way to just have this be like a lookup table obviously we could be more thoughtful about this and now we can see okay so now we're getting somewhere ITT it so unfortunately oh there's so much mass here this is what this video is all about why you need to like clean your data people were thoughtful about these kind of things so first of all we're getting we're getting some here so first of all you get rid of of and an a can add those to our ignore list of and a I'm also going to do something here which is kind of ridiculous and say and word length is greater than one so I'm not going to allow it to be any words that are of like actually you know what nope how about no three letter and I think that's a three letter word and definitely part of X to ignore HTTP and HTTPS it could have done a better job of parsing today and I look at this now we've got something we'll more today have with refugees what this that but we're getting somewhere let's at least draw this data to the window to the canvas so what I'm going to do now is also say fill 255 and I'm going to say text biggest word and where do I want to write that i times w comma H minus a like five height so height minus H so I'm just trying to find an XY position that's not the top of the rectangle that I just drew so it's the same x value and then the Y values at the top of the rectangle and if we do this we could see here now we have the number of tweets and again this graph is like misleading in so many ways I'm not being thoughtful about the design here at all and I could send to the but you can see I have the most aggressive treatment this example you can see what what it takes to load a data file parse the data file count various things in the data file trying to store the data in various ways let's at least try running this with a different data set so I have let's use the the floated I think it's already here up so one thing I need to do is I need to adjust the FLOTUS data set to have this at the beginning as well now let's change this to FLOTUS JSON and let's run this there we go so we can see I got there's so much more data so there's a there's a the date that the tweets go back much less and you can see this particular month which has the highest was I don't know what this initiative is but that's probably a hashtag that got parsed out so just counting hashtags could have been interesting actually hashtag 62 million girls so I feel almost embarrassed that I don't know what that refers to but I'm definitely gonna look it up afterwards so you can see here that the basic idea is working and we've done in a coding challenge we've taken some of this White House data we've loaded it into p5 we've drawn some stuff in the window but what's really missing here are two things thoughtful design thoughtful approach to looking at the data and cleaning the data as well as having some sort of point of view or question that we're asking about the data and I hope that seeing you how to work with the data in a very kind of kind of rough and rudimentary way gives you an inkling or some idea so if you work with this data if you make stuff please share it with me I hope you enjoy this particular coding challenge and I hope that I see you in future ones okay good bye and I'll see you soon