good afternoon good evening good morning good day good day I say good day this is the coding train on a Wednesday I think it's Wednesday today as you might remember if you watched last Friday that I was not then I said I would not be available this Friday which is still true and so instead the Train hoped a couple days early this week I had I noticed in my schedule four o'clock six o'clock window of time Here I am live streaming on the coding train so what am i planning to do today you are you might be asking yourself well so happens that I have a bit of a plan I would like to look I got some suggestions that came in I would like to do a part four for the flappy bird neuro evolution coding challenge which now has been released in three parts and it's very cruel to this poor bird but I'm gonna I want to make this bird a better bird we all should strive to be a better bird with better flapping in our lives and that's my plan so I'm just looking everybody seems to be saying hello and this is what's going on blah blah blah blah blah alright so now what else do I have to say hmm just gonna check just give me a second to check for something because I would like to make an announcement but I have to check just have to check check he ran into doo doo doo did it okay okay not yet not yet not yet not yet nope can't make my announcement just yet but maybe sometime during this live stream I will talk about mine it's not really now I made this too much of a thing I might have another live stream this week and a surprising time with some surprising guests and if it doesn't happen this week it'll happen a different week it'll happen sometime all right now Daniel says lahpet Colo field you seek soir song s what song do is that right alright now I can't read it Oh should I launch the casual debate about whether Java or C++ is faster okay so let's just get started here oh one more thing I want to talk about I'm also a there's a class going on back here I can hear them talking and some sound I think it ends at 5 o'clock so in about a half an hour I might feel a bit more inclined to be a little bit more ridiculous but for right now I'm taking this very seriously this is a serious coding channel with serious educational content to learn stuff ok let's see uh I want to talk about something to do so as you know maybe probably dough why would you know I'm currently teaching a course at a New York University called the nature of code spring 2018 I have been making a lot of videos on this YouTube channel this spring that go along with that course the students watch the videos kind of they watch the videos if they can watch the videos you apparently watch the videos anyway so week 10 of this course the topic was neuro evolution and that is why I spent last week's focus was on neuro evolution and the flappy bird game so if I go to the notes here for neuro evolution hold on hold on good I'm getting some private messages I'm just gonna reply that I've live streaming online this is gonna be entertaining just for my own sanity oh well just give me a second here I'm going to reply with this link and I'm going to go here well we'll get back to you soon I am live on YouTube right now okay that entertained me to be able to send that message now I'm just gonna check and I make my announcement can I make my announcement I don't see them emails right now all right back to the slack channel there we go all right I was saying something so I have this neuro evolution code example and demo that's what I'm gonna work on today to improve and after that's done if I have some more time I'm going to talk through this other example that I have been building so I actually started making this example last year and it didn't work very well I mean I tried it again and then again and then again some more and then again some more and then I gave up then I tried it some more and I gave up it's a circle of coding life I try some more I give up and come back to it I try someone give up but every once in a while in the circle of coding life somebody comes along to help you out and me I am so me frequent coding trained contributor and viewer had some excellent suggestions that fixed a couple things that I had really kind of done in an odd way and now this example is do I don't know if I should say that it's working but it's doing something so let's take a look at it okay so let's take a look at what's happening here the goal for this example is to evolve steering agents to collect food and so what you're seeing right now if I actually let me let me know loop this for a second so if I look at any one of these oh interesting so I kind of alright well so I got to work I got to think about this cuz but there's so you can see here each one of these vehicles oh I'm standing from this one each one of these vehicles has eight sensors attached to it those sensors light up when they come across a piece of food those sensors are then inputs into a neural network in the code and the output of the neural network is a desired velocity I want to go this way I'm gonna go this way it's and when it starts they're all making random choices based on their sensor readings over time that they will slowly lose their health and they will die if they collect food their health will increase they will live longer every moment that one of these vehicles or agents what everyone call them lives it has a chance of reproducing and it makes a copy of itself with that same neural network with some mutation so over time they should evolve a neural network system that would push them in the direction of the food you would think and in fact they also get deleted they die if they leave the window so in theory they are also being fed as inputs information about where they are in the space they would probably in theory also evolve a behavior where they would turn around when they're getting close to the edge so this is what I've been working on you can see what the annotation here is this is how many frames this particular agent has been alive so you can see here if I set this running again say loop I don't and let this run now what I'm going to do so most of what you're seeing here is random behavior we could sit here and watch it evolve for a while but I have this slider here which will let me speed it up and right now it's just doing a hundred cycles per frame so let's let it do this 17 new messages okay let's see do you think I've get enough time up I'm looking at the chat any questions about this people are still speaking French all right I think that's good let me slow this back down and let's evaluate them let's take a look what do you think I like this one it's just spinning there so you can see there hopefully sometimes after watching this for a while there's one that just lasts a really long time in theory the one that has the highest score rate is highlighted so this one currently has the high score unfortunately it just died okay I'm watching this nobody's discussing in the chat this wonderful example that I worked for an entire year on the soundboard volume is very low interesting alright that can be fixed so I'm gonna just I just wanted to show this this is hopefully I will I would like to do this actually as a coding challenge build the whole thing from nothing but but I would like to see if I can make some like minor tweaks and improvements to this first even still I really like what this one is doing here it feels very o come around turn around turn around turn around oh that's so sad that's so sad oh it sounds like it's coming through your mic and knock the system that's interesting hold on oh well I mean am I really gonna go crazy about the sound stuff right now mute output there this Pro oh whoops I think I I think now I might have fixed that that fix it alright alright so now let's put this aside and let's let's let me return to what I'm here to do okay so now what I need to do is I need to find and how it could be turned down yeah I bet cuz I turned it up quite a bit so let me turn it back down to what it was okay there we go alright actually hmm yeah this should be fine alright let's look here there we go there we go there we go alright so this is where we last left off let me see if I have this camera up and running okay that camera is up and running I am over here doing some jumping jacks neck pain it's only 440 we're doing all right now they come back here and see what's going on how we doing there flappy bird okay whoa all right everybody so I'm gonna just let me look at this list let's think about this does anyone have any other suggestions in the chat well let's read through these so first I want to add a feature where the bird is removed if it hits the bottom or the top that apparently is part of the game the pipes the closest pipe detection I think I need to fix because when the front of the pipe passes it's no longer a relevant pipe and I still need to I still need to detect it all the way until the back passes why velocity is the input I don't know why I just thought like why bother adding that it was a really key and then if this might end up needing to be a part five which is saving and loading a bird that's been trained to play really well and like loading it back in like a separate environment to just play the game okay so so here we go people are saying better hit detection limit the jumping rate to the birds don't fly straight up in the original game yes so I've got those okay so I think this is what I'm gonna do so let me get the code going in case you're wondering by the way this other if you're looking for there's also this version of the same exact thing which has a lot of these features built into it already this is just the version that I made last year and you can see look the e key does not work you can see here that there's some more information about the high score and it also I gotta move this over there we go I can run the best one so far and this by the way has the Y velocity of in this has the Y velocity as input and it also has the feature that if it hits the bottom or the top this one just this one that did the best so far seems to only want to stay in the middle it's gonna die right now right yeah so let's let's uh let's let this go a little bit longer oh wait I got a continue training let's get one to do better they look like they're doing better now alright so let's let this go for a little while this one seems like a really good one I kind of want there to be just one left okay there's one left run best go back now we can just speed it up just a little bit so we can see now this one has been trained really really well and it doesn't seem to have any problem beating this very simple game so that I want to achieve results like this as I make these improvements to the tutorial okay does it get data about how near the next pipe is or just its gap Y location ask Medan I believe I mean yes it gets information about the the X location of the closest pipe but unfortunately it does starts ignoring that pipe as soon as the front of it as soon as the front of it passes the bird and it probably should consider it like and it starts looking at the next one it could easily jump up by accident so so yeah okay it seems to have no problem anyway but that might be worth fixing okay that's an easy fix all right so I'm gonna close that I'm going to close this I'm going to oh actually I didn't want to close that I was gonna have that at the beginning the whole point of me opening that also must to have this version the improved version so just give me a second let me train it again to have the improved version as these sort of starting background to this part for okay you guys probably can't hear the music coming from the classroom next door but I can alright how are we doing here we got a good one ok ready everybody you could vary the gap width but I'll make the birds have to train more yeah okay let me Reese let me recycle the camera I'm a recycles the camera it's a very expensive camera why not just recycle it no I meant cycle the camera not recycle welcome to part 4 of the flappy bird neuro evolution coding challenge so I didn't actually do part 4 when I read to the original challenge which was parts 1 through 3 links in this video's description breathe but I got many excellent suggestions about things that I could do to improve it and so I actually did implement a bunch of those and what you're seeing here right now is a version of the neuro evolution challenge with those things improved and this is a particular it's really oh it keeps dying hold on I'm gonna start over I want a better one that doesn't die well train it some more the funny thing that I just realized is it go it kind of if it if it if one beats the game perfectly it's not gonna train anymore because so let's try this one did that one get a new high score I don't remember now hold on let me let it beat the high score so I just have to get above 5,000 to see that I have one that's doing better then I'm going to start this video over all right we're above do we have two of them I think there's two of them there come on which one's gonna win ah maybe there's one now no let's think there's still two I don't think that's like effect who knows let's get to ten thousand this is good enough this is gotta be good okay too much noise hello welcome to part 4 of the flappy bird coding challenge so when I originally did the coding challenge parts one through three linked in this video's description I did not do a part four in fact I finished I was like I'm done but I got so many great comments from the in the in the comments feed probably shouldn't do that they probably hear me through the wall I got so many great comments I got so many great comments in the videos the videos comments is that what it is I'm gonna make I'm really gonna make Macchio work on it's editing today I can feel it already I got so many great comments with wonderful suggestions on how to improve the game the training the bots the thing let me just start over I'm just gonna start over Oh can't we c'mon isn't this too late for you last time I know this is torture for the people watching live two comments feed yeah my I used my Google Reader to check the RSS feed of the comments and I read them in 1997 I traveled back in time hello and welcome to part 4 of the flappy bird neuro evolution coding challenge now you might have thought you might have watched part 3 it's on it's done finished coding challenge complete but I got so many excellent comments and suggestions about how to improve my neuro evolution simulation that I decided to come back and attempt a part for mmm this is part 4 so oh by the way and before I actually came back to attempt I did some work to test out some of these ideas and here you can see this is a version of it running with some of these improvements and you can see that I pretty much have a little bird here that has beaten the game as it stands alright so let me close this out I'm gonna go to this github issue and look at these for look at these for timeout for a second tonight I forgot to look at these at a generation count deserialize this in the part 4 video yeah yeah all right so I'm gonna these are good suggestions but I'm let me just go with my list right now thank you I'm gonna go over to this github page where I kept track of some of the comments and put them here in a list so these are the things that I want to add to be honest I might do this last one in a part 5 but let's see LEDs at the very least what I want to do is apparently a very important feature of the game is that if the bird reaches the ceiling or the floor output to the bird so I want to make sure to implement that there's an issue a bug in which the pipes detection for the closest pipe I'm only detecting it up to the point where it reaches the bird itself and not as it passes it and that sort of causing some issues as well as oh my goodness why velocity I mean let's think about this for a second I have this diagram over here right if this is my bird and this is the gap approaching right what if the bird is already moving up or what if the bird is following that falling down this would make a very big difference in whether I should jump or not because if I'm moving up jumping might cause me to hit the top the the top part of the pipe so I shouldn't jump but if I don't jump while I'm moving down I'll probably hit the bottom so having Y velocity whether I'm already moving up or down as part of the inputs into the system is going to create a much smarter bird and it makes sense that a bird playing the game would know if its move up or down so I feel like that's a fair input so let's go and add those things all right so what do i what do I need to do so first let's go with adding the Y velocity verse order let's go with adding the Y velocity as an input that's probably most interesting thing in terms of the actual algorithm that's going on here I'll go back to my code blue zoom beckon I'm gonna go to the bird the bird as you recall has a brain so the brain previously has four inputs top and bottom of the pipe exposition of the pipe Y position of the bird now I want five inputs I don't know let's increase the number of hidden neurons to make it a bit more sophisticated I like a sophisticated bird now then we're gonna go down and we're going to look here aha these are the inputs the Y location the top the bottom the X location all normalized to arrange between zero and one so now all I need to say is that this dot velocity let's make that an input now this is a bit interesting here now let me just make sure that's the variable right this dot velocity now here's the thing when I wanted to when I use something like the exposition as an input or the Y position there's a distinct right there's a distinct way to normalize that value to arrange between zero and one the Y values go between zero and four eighty divided by four you have a number between zero and one but the velocity is a bit more mysterious first of all it could be negative it could be positive what should I really do here let's try something arbitrary let me try dividing by ninety no ten so you know in the end I just need an input maybe it's okay if it's also negative I want it within kind of like a smallish range but I think if I divide it by something that's probably gonna do just fine oh and this should be inputs four so in that sense I now if I go back and run it I should have already a smarter bird so let's let this run for a little while let's train it for a little while and we can see oh yeah this is the number of generations I've gotten up to seven because it's already kind of pretty smart let's down and we can see we can see there it is figuring it sort of figured it out alright well this some things are a bit different from this than the other version but you can see that adding that Y velocity has already probably improved it okay time out looking at some chat messages here I should take the log of the velocity and normalize that's interesting is that really true what did I do in my other one that I prepared so if I go to the code to the other one that I did then I go to the bird class and I find oh oh look at that I actually did this I didn't realize that I are but rarely gave it a range between negative five and five and map that between zero and one is that better the bird doesn't die when it touches the ceiling in the original game oh I didn't have a max velocity bird no died on the ceiling you can't take a log of a negative that's a good point well Simon Says make them read if they're bad and green if they're good but how do I know if they're bad or good all right I'm just gonna leave it as I have it we'll see how it does it's working um one thing I don't love that I did here also okay hold on I'm gonna just secretly fix this because outside of the video itself oh yeah I just don't want the range of the slider to go so high alright okay so really not the ceiling all right well let the still love them live if they if they go to the ceiling you can't jump if you're already going up in the original game really if your Y velocity is up it won't let you tap to like jump jump that's interesting well these are all important details I can't possibly implement them all let me just get them one at a time all right okay so the next feature I would like to implement now that we've added Y velocity is let's try fixing the pipes closest detection so let me explain what's wrong so what I'm doing is if I have the bird here and I have this pipe I am looking well hold on this isn't really a great place to draw because I'm not standing because I could do it over here that might be better okay so if this is the bird and this is the pipe and this is another pipe I have an algorithm that says oh hey this is the one I should look at but if there happens to be another pipe over here that's technically closer I want to ignore it because I only care about the pipes that are in front of me but still it's there on this in the canvas because it's part of the animation so I have an algorithm that already deals with that but unfortunately right as soon as the if the pipe is here it's still gonna read as the closest but if it's actually like here right above it as soon as the front of the pipe passes the bird it's gonna ignore that pipe and so if it sees another one coming it's got to go up it could kind of get it should really still consider that pipe it should consider that pipe all the way until the back of it passes I think this is going to be an easy thing to fix hold on a sec here I think this is going to be an easy thing to fix so let's go to tritter to do and find this part of the code yes that's what I'm doing in bird bird somewhere in here in think this is me finding the closest pipe and as long as the distance between the pipes X location and my location is positive that's something that I want to look at but let me actually just find the distance in the back of the pipe oh this is so easy pipes dot X plus pipe W so that that W is the width of the pipe so I should be a plus pipes index I dot W minus this X so this should now work this is actually the location that I'm looking for it which is behind the pipe wonderful alright do I even want to run it again do I care let's run it again let's speed it up to train for a little while and there we go and let's just let's still run we can see there we go oh poor poor little flappy bird lost the game alright so now what else do we have to do I go back to my list we now ah fix when the bird hits the bottom now I'm told by the chat that actually in the original game hitting the ceiling is allowed so let's only add the bottom I guess so if I go into the bird there is a function called I believe well there isn't actually so hold on a second let's go to the sketch I forgotten how my code works completely and let's go and see here ah if pipes index I hits bird so if a pipe intersects the bird then I want to remove that bird we've done that now I also if the bird or hmmm edit point here I don't I just have done this all I think I want to refactor this yeah no that's fine we'll just do we'll do it we'll do another the problem is here alright so this is the loop where I remove birds but the problem is this loop is inside the pipes so do I really want to remove a bird here I mean I don't know what the best way of doing this is but what I'm going to do is I'm just gonna create another little quick check down here I'm gonna use I and I'm gonna say if Birds index I what should I say off screen off screen then here is another reason why I might want to remove that particular bird and put it into my saved Birds array which was immediately a bit of a silly solution but it works so I need to write a function here in bird which is called offscreen and I'm just going to return return this dot y is greater than height or this dot well I can't resist having it die if it hits the ceiling I cannot resist let's just add that for a second offscreen so let's see if this works and let's do this so look there at the bon ha you know what there's an issue here I think somewhere in here alright I had this extra code to constrain them within the screen which is sort of silly and now I can remove that they don't get constrained they just die so you can see they're hitting the bottom they're dying so now let's speed this up and let's let this go I'll be back in a minute all right oh I could use a sigmoid to squash the velocity that's a clever idea all right okay okay I have returned looks like we've got a pretty good one here that doesn't seem to have any problem beating this game lovely look at you go look at you scrappy little bird flapping your way through this course beautiful so I think we've made some pretty good improvements here I don't know let's make the game a little bit harder just to see so what did we have now in pipe oh the spacing is 175 that is way too easy so let's make it 125 and let's give a little refresh here and I will be back again in a minute so sigmoid was a really good suggestion five o'clock let me check my email see if I can make my announcement Thank You Isaiah who is flappy bird is dedicated to you okay all right I have returned this bird looks pretty pretty pretty good let's see how it's doing here yep doesn't seem to have any problem with this one 25 spacing what do you think can we push it a little just 100 75 80 50 I don't know let's try flip a coin whoa look at that look at it go oh it's such a good little bird there all right oh this is a bad idea 75 it's gonna be way too hard see in a little bit who seems to be doing it alright dare I say that it's working it's hard to tell with its so sped up let's actually slow down there's actually two of them going oh my goodness oh there's a bunch of them in there let's just let's let's look at it at a more yeah seems pretty reasonable to me alright so this is pretty exciting to see you know I probably again I don't have the exact physics of the original game so that probably could be some tweaks there but as you can see just really that Y velocity if I take the out that Y velocity input well let me just I think the Y velocity is probably the most important fix that we made so I can really quickly just in the bird itself I can just let me just set the Y velocity to zero so basically it's not getting it anymore it's as if it's a constant input so it sort of become irrelevant I don't think it's going to be able to solve this now so let me give it a little bit of a run here for a few minutes right people is it Remy in the chat says jumping height way too low to gap size so that's a good point all right so I've let this run for a while but you can see like it's just like it's all over the place it's not able to sort of fit itself through these pipes there there is a good point in the chat that I probably with that then I haven't really debate this sort of amount that it jumps very very low so it's able to kind of like perfectly position it's almost as if it's just like finding the exact spot so you know one thing I might just try let's put it back let's put the velocity back let's make it a little bit harder for the bird let's give it a bit more of a powerful jump let's give it 16 instead of 12 this will make it a harder game for it to play I think but let's see if we can do it I don't know back to you if you're gonna do all of these is like weird little sped up things that could be fun I feel like you should have one output then check if it's over 0.5 or not yeah that would that's a very reasonable suggestion so the reason why the generations now are so much or so variable is that like why did it have like 50 generations that it only had three so it starts a new generation once all the birds have died so I could program it in a different way but that's currently how it works so you could see I don't know it's my hit detection looks like it might be a little bit generous I think that collision detection is a little bit generous you can see I don't know that maybe maybe the lift okay so I'm being told there's a very important feature which is that if it's moving up it cannot jump it can only jump if it's moving down so let's see if we can add that oh boy I did not know that was the case so the way that I would add that is this is where it chooses to jump up and so I suppose I mean I guess it just I might as well render the decision irrelevant right so and if output 0 is greater than output 1 and this dot velocity is moving down which means greater than or equal to 0 okay so I'm allowed I'm not allowed to go up unless I'm already going up let's try it and let's let me just for the sake of argument let me put this back to the the pipe distance let me put that back to 100 this was gonna be such a short video now it's so long and let me speed this up and I shall return yeah we really need better graphics I agree oh I forgot about the slack Channel I'm Bob whitey right I'm 15 I've been following your channel for many years so how old were you when you started following the channel yeah you can jump when going up oh you can pretty sure all the times I played and I'm sure I jumped while going on yeah I feel like you can jump while going now anyway alright there's some interesting discussion now in the chat as to whether that's actually a feature of the game but I did implement it and I'm only letting it jump while it's moving down and it still seems to be able to kind of get through these which is pretty cool to see I do kind of like the quality of it right now of what it's what it looks like so that's kind of cool all right so who knows I'm gonna take that feature out because apparently that there's it's unclear as to whether that's actually a feature of the game I don't feel like that needs to necessarily be a feature of the simulation but I will leave it in as a comment in case anyone wants to reference it alright so now I feel like this is in good shape but what I want to be able to do right what I want to be able to do is let's say I mean this isn't a very complex problem I'm able to kind of like train a bird to play the game very well very quickly but if I had something that took a really long time to train I would want to be able to save the model and buy the model I mean a copy of all of the parameters and values and weights and variables and things that are in that bird's neural network brain I want to save a copy of that so that I could load that later and luckily for us there's a nice way of doing that so we'll come in part now what is part five oh this is a part 5 code challenge see you there yes so Marcos Rios in the chat rightz wouldn't bird training get faster if you limit the bird lifespan so probably it makes it would that would make sense for me to add something like that like right now once it's sort of figured it out it could just go infinitely so let's see here let me think about how I want to do this Oh flappy bird al well here we go oops restart oh so it's actually like until I jump yeah boy this is much so one thing is the gravity as much oh so it's not as generous with the collision detection I use the spacebar oh space where so much easier okay here we go everybody Oh terrible at this I'm now I'm officially a YouTube gaming channel this is me at a YouTube gaming channel playing flappy bird well I get millions of subscribers now I hear the gaming channels are very popular come on [Laughter] ok I can do it breathe breathe breathe it's gonna happen for me though it's gonna happen it's gonna happen ok I did it uhhuh alright so but let's just just to check a few things definitely dies when it gets the bottom hold on does it die when it goes to the top no I can just go forever and ever and ever but I will die because the pipe is infinitely high I wonder if in my game there's a bug where I could actually jump over the pipe probably not the way I programmed it alright so I think I'm close enough I would love for people to make their own variations of this but I think yeah yeah yeah all right look I'm much better at training a neural networks like the game yeah so you know who knows okay so let's move on and let's do that last part so one thing that I want to just check is the am I using the latest version of the neural network library which has a serialized deserialize so serialized will this should work yep there's a copy serialize so so yeah I should be able to do this alright so I'm not going to implement obviously the serialization I could show it but scrape oh i'm i might be using scratch sooner than you think you guys are already you guys are hacked into my email to see what i keep checking to find out about all right um this is we this is great what what what everybody should do if you start a youtube channel i highly recommend that in the middle of your live stream you just start checking your email that's like the only thing i can do that's worse than that is like see if I haven't text on my phone alright let's do this last part what time is it 515 all right I'm good I'm good I'm good there's time here hello can you believe it Oh 514 this means hold on let me just scooch I just gonna go peek in the classroom next door to see if there's nobody in there I'll be right back you'll be able to hear me as I go oh this okay I'm over here hello this is a door there's a door this is a room it's actually a closet it's a fairly large closet the door is now open I'm exiting exiting can you still hear me I'm in the hallway I'm looking in the classroom I'm actually standing in the classroom next door I'm gonna bang on the wall do you think you can hear if I bang on the wall hmm unfortunately my mic is still on me so this is kind of like a very poor test but there is nobody in there now I could be loud okay here we go everybody ready welcome to of this multipart flappy bird coding challenge I anticipate only at least 600 more parts to go I think this might actually be the last one so look what I've got I've got this bird it jumps it doesn't jump it fits through pipes it does what I have always dreamed it would do but I want here's the thing now I have this and what if I just by accident I'm over here and I'm like whoa whoops and I hit refresh that bird that bird that I've loved is gone forever I will never get it back never I might be able to get another bird that's similar that does as well but I will never get that original bird back however I'm gonna that's why I'm gonna add another feature this thing so the feature that I'm going to add is save and load a particular bird okay so I what what I want to do let me let it let me let it train again so I'm gonna let sit that let this go actually the thing is when I when I tab away from the Browse hurts the browser is smart and stopped the animation from going so it's actually not continuing to train but that's fine and what I want to do actually there is a function inside of the neural network library called serialize and deserialize no I actually didn't implement these functions in a tutorial you could act if you want to see how the neural network library was built I have a tenpart or something video series building the whole library but through a pull request I'm gonna go see who made that pull request so I can I credit them let's find who pull requested to serialize and deserialize there's closed serialize this is it here great merged I have returned to show you the pull request from engine feeder this was pull request number 50 that added these serialization and deers de serialization functions so what it actually does well you know it's it's it's fine it's fine well I'm like I always have the slack channel the Patriot group slack channel in the corner of my eye sometimes when and there's like some like YouTube video that gets posted it's like what is that but I will I will gracefully ignore it even though I didn't just do that then coming back to making I really see a whole thing that I used to do was just go off on all these tangents and make these totally insane and not actually edit them now I'm drunk with power drunk with editing power because I'm not even doing the editing thank goodness for math blank who does the editing but now I I think I got a really slow down here a little that's crazy I'm gonna back up a little bit just to make this less complicated for you and I'm then I'm not gonna do any more anything whoops I have returned to show you the actual pull request where the serialize and deserialize methods came in thank you engine feeder 101 who made this pull request on 3/10 which was a little while ago so if I go back to those functions you'll see that look at this JSON dot stringify this well I want to use the whiteboard all right let's talk a little bit about what's happening in the let me actually just erase some of the whiteboard and then come back feel sad to lose these diagrams but I think it's fine just okay okay okay so let's say I have a simple class like let's say I have a particle class class boy lots of squeaking going on here class particle and in the constructor function I set like this dot X equal to something maybe it's a random number and this dot y equal to something maybe a random number so then what I'm going to do next is I'm going to write some code like this let P equals equal a new particle and what if I now say JSON dot stringify P what do I get well what I get is a strength raw text that is the json formatted data that is part of this particular instance of a particle object now if there's methods and functions in here those won't be included but if all I want are the sort of variables the properties of the particle what's its current velocity what's its current XY location then I'm gonna get that stuff this is going to give me a string that just looks like this X you know whatever it is 100 comma Y you know 20 and curly bracket so even though the neural network is much more complex this is doing exactly the same thing it's basically saying hey all that stuff that's part of the neural network all of the values of all of these weights and things just serialize all that put it all in a big JSON file let's take a look at what that actually looks like so so now what I'm gonna do is I'm gonna go to my code I'm going to go to the bird code and what I'm gonna do actually go to the sketch and what I'm gonna do is I'm gonna say is there a mouse press I'm gonna just I'm gonna add key pressed what I'm gonna do when I add key pressed is I'm gonna say let be equal population index zero so I'm gonna pick just one bird from the population Brett eventually I want to like get the best one the one that I want to save then I'm going to say and I'm gonna call this a bird then I'm gonna say let JSON equal bird dot serialize and all this is doing right I could have just right here I could just say let JSON equal json dot stringify bird so the serialized function just does this for us it calls json dot stringify so i'm gonna do that then did you something totally insane actually I'm not just gonna say console dot log JSON let's just look at it in the console and I'm gonna say if key equals s so I'm only gonna do this if I've pressed the s key and I feel like there's something weird in JavaScript or p5 where I actually say the capital S but whatever let's figure that out so here we go let's go here so all these birds are going I'm now gonna press s and population is not defined because it's not called populations called birds that would be nice to call it what it's called and now I'm going to press s bird dot serialized oh right of course it's not the bird object that has the serialized function built into it it's the brain it's the bird brain bird brain so this also should have been json dot stringify birdbrain okay we're getting there brain is the neural network object inside of the bird that's the only thing that I care about to save if I wanted to save more stuff I'd have to do that but right now we're good I'm gonna do this we're gonna get it fit save and look at this you can see look at that this is all the data these are all the values that are in all those arrays it's all the stuff so guess what I could do next I can say save JSON bird dot JSON JSON so I think this function in p5 the save JSON function will save the data Oh actually interestingly enough it's already made into a string oh this is so interesting I think I actually don't need to see so I could just say I could just say save because this is technically as well I've won waited into territory that I didn't want to wait into but the save JSON function in p5 is designed to take an object that hasn't been turned into a string and turn it into the string so you can save it where as what I want to do is I already made the thing into the string I just want to save the string so let's actually try a few different things just for fun let's try saying save JSON bird sorry bird dot JSON and then bird so I'm not gonna bother with serializing it I think the p5 save JSON function will do that for me so let's do this then I'm gonna hit s and ooh boy we got some crazy air saved JSON so let's look up the reference hey I probably got the order wrong save JSON p5.js let's look at the reference and let's look ah the data goes first and then the name of the file goes second okay so bird comma bird JSON there we go now let's try this again JSON is not defined because I don't need to console.log anymore let's do it again oh it actually did it you can see right down here what when you call save Oh doc when you call save Oh you can't no you hold on Mathieu let me try that over again okay wait a second okay oh thank you keys have to be wrapped in quotes good point all right holy we're gonna get there let me try that again so let me hit save now again finally and now what you can see is actually I'm gonna go here and do show and find her so I don't know if you could see that down here but down here right down here it actually oh look at this this is bothering me is that better try this one more time let me delete them so hold on we're gonna make this okay try this one more time oops alright we're gonna try this one more time actually what I'm also gonna do is move this up alright I'm gonna try this one more time I'm gonna hit s and you can see I look what just happened right down here the browser downloaded a file called bird JSON automatically so I don't have any real file management capabilities from the client but I can auto trigger a download to go directly to the default downloads directory of the browser so I can now click here and say show and find her and now I should have look at that this bird JSON file whoops and what I should be able to do is then drag that and take a look at it in atom so there it is look at this this is actually oh I saved the whole bird look at this I didn't mean to do this I saved the birds X&Y it's gravity it's lift its velocity look now I saved its brain input nodes so I forgot of course all I want to do is just save the brain so what I can do now is I can change this to go back to bird and I can change whoops I'm sorry back to sketch and I can change this to save JSON bird brain ok here we go ready and I'm gonna save that and now I have another one I'm gonna open that up in atom and we can see this is now just the bird itself so you can see these are the weights that this this is sorry not the bird this is the neural network of the bird and these are all of its current weights all these numbers seem and feel rather meaningless but they're quite meaningful until how how it works so now we can then write another sketch that loads that JSON file back in so how do I want to do that let's take a minute here because give me minutes so a couple options are one is I could I couldn't make an entire other sketch that's just the flappy bird game that loads a bird or another is I could create a mode in this that loads a bird let's make a totally separate sketch yeah I can use drop but so actually before I go and create a sketch that loads the JSON let's actually make this load a bird that we want to load so one thing that I could do is after I've I have to drive training for a while I could kind of find the current bird and the population that has the highest score so I could say actually I could say no there's only one bird right now whoops no loop so look I'm gonna do this kind of manually this is pretty terrible so now I'm just want to make sure there's just one bird so it's just one bird so this is definitely the one that I want to save so I'm gonna hit s and I got that bird so now I have the bird that's doing really well and it's in bird to JSON so I am going to just call this best bird JSON okay so now of course what I would really want to do and I leave this to you the viewer as an exercise is make it interface auto detect one that's been doing well trigger the download make like an upload button that I can upload the best one but I'm gonna do this in sort of a hacky way what I'm going to do is I'm going to make an exact copy of my sketch and I'm just gonna call it flappy bird and I am going to go into Adam and I'm gonna get rid of the genetic algorithm code completely I'm done no genetic algorithm here I'm gonna go to the sketch and I'm gonna say hey you know what I don't need all the birds and one'd all save birds I don't need the counter all I need is one bird and I don't need the save thing and I'm going to just say function preload I am going to say let data bird data or birdbrain birdbrain then I'm gonna say birdbrain equals load JSON best bird JSON then in setup all I need to say is bird brain sorry bird equals neural network dot d serialize birdbrain and this is actually so I should call this brain data or brain JSON let's call this trying to make this make sense brain JSON then this is the actual bird brain deserialize the brain JSON and then the bird is a new bird with that bird brain so this is the process of loading the data then deserializing it into an object than creating a new bird with that object because my bird code the constructor accepts a neural network object as the brain it will remake it so let's go back what else do I need to do in sketch adding new pipes you know there's only one bird now so all I need to do is I'm actually not even gonna worry about this I'm just gonna let the bird play and I'm gonna let the bird go offscreen I'll just like you know I hold on so in theory I should do something if the bird hits the pipe I'm gonna just say console.log collision just so we see it doing something if the bird goes off screen I'm gonna say bottom and then here oh that's the pike sorry and this is just one bird now if one bird offscreen I'm just gonna say console dot log bottom oh so much code to write and now I could just say bird think bird updates this is all this stuff for the genetic algorithm so I don't need to worry about that and then I want to draw up show the bird and show all the pipes so this is now I just made a version of the game basically all I did was eliminate the genetic algorithm and eliminate the array of birds because there's just one bird and I also need to make sure I don't want to have this J dot J s file anymore in index.html and now I also need to go and grab from my downloads where was that I need to grab that best bird JSON file I'm gonna go to the desktop and put it in flappy bird so now this best bird this is the data from that best bird that I saved and I should be able to go back to sketch and say best I called it best underscore bird so give me a second here and let's run that sketch I'm gonna run a little webserver so I can look I will run it on a different port so now I'm gonna go to localhost 8001 and I have some errors counter is not defined so I'm using I left this counter thing in there which is oh no I do need counter oh I do want counter so I need to have the the counter I need that's my frame count to know how many pipes I is not defined and sketched at J s line 36 pipes ooh this should not be a bracket there right because this is me checking all of the pipes unexpected and fit foot sketch alright so I think I'm missing yet another curly bracket here and there we go so this should be that bird right so now I've loaded the one that I trained oh yeah that worked and loaded the one that I trained how exciting so now what could I do let me just be sure that this is working let me go back to the other sketch all right and let me save another one so I'm gonna just I'm gonna save like a bad one because I'm this is just going to be an arbitrary one right so I'm gonna hit s and I'm gonna get this one and this one I'm gonna call bad bird and I'm gonna go to back to my sketch and it would put bad bird in there so now I have whoops what is this sublime is open I have bad bird this is all of the waits for the bird that wasn't really trained these are the waits for the bird that was trained so if I go here if I go back to my code and go to sketch that j/s you know and I could what I what would be interesting is to run both of them like to load a few different birds now I'm gonna load the one that doesn't do well let's just see and let me by the way let me set the slider the default of the slider to whoops where did I create that slider oh yeah sorry let me set the default of the slider to 3 just so it starts sped up whoops I'm in the wrong sketch so now this is the bad one bad ones pretty good you can see the bad ones not doing very well right as opposed to the good one which is not colliding it really should be is the collision thing actually saying collide did it say it when I did the bad one yeah it is okay you can see that I'm getting lots and lots of collisions with the one that wasn't trained well so again this could use a lot of refinement like maybe I want to think more systematically maybe I want to have an electron app that's actually doing the training and saves the JSON file so I could have some file management maybe you're asking yourself what's an electron app it's a way of wrapping a webpage basically into a desktop application so you have more control over your file system I could write a node I could have a serverside program written in node that is managing saving JSON files of birds that I've trained and reloading them and requite could make a bird flappybird API I'm just gonna give you all these different trained birds for different situations so there's a lot of ways you could go forward with this so hopefully you've got something out of this I think dare I say I'm but right now this part five really wraps it up I will say that even though so you're going on the coding train website you will find the exact code for both of these examples in there kind of raw state but I'm also making a separate example that I've demonstrated which is here I'm just gonna quickly load it up that's going that that has a bit more interface stuff to it so I will also link to this example that will have a bit more that'll be a bit nicer like I'm gonna do I have a save and a load button in here so this one already has the feature now if I speed it up and train it for a little bit train train train train train train train train train train train train train train that I could then say hey just show me the one that's done the best so far so and so now you could save that one and load that one so I will create that stuff I'll make that example available but as an exercise for yourself try to make it what can you do add some design add some saving loading have have a computer bird compute could compete with a human player bird I don't know be creative make something share it with me and I hope to see you in a future video uh oh my god eightysix new messages I'm so not checking out the chat anything important like Alessi and said maybe you can explore going into something like cookies or local storage Oh what oh yeah cookies are local storage that is a good idea I should do that yes I would like to do that all right how did I do is that gonna turn into something that I can release just hold on let me check something I'm not checking my email I'm totally not checking my email no messages nothing important okay right local storage is perfect since you need to serialize anyway that is a good point is this the end the end is just a little anyway is this the end I don't know okay it seems that for every new iteration 90% collide right away yeah that's probably cuz there's a lot of mutation going on so most of them are just gonna do wildly incorrect things review support requests alright oh well look at this look at this it's actually written in here look at this ah that's that's all local that's all you need to do to use local storage seriously amazing can we fix the collide part yeah yeah I would take a pull request to fix that because I don't really feel like it what did I do that's funny shows the highlight thing in it so I'm just checking if the bird is in between the top and the bottom and the X and the y so I'm not taking in consideration this size so I really should be saying like the bird radius right right now the bird it doesn't actually have a size the bird is just so this is the issue with the the collision like if I do this this is actually exactly the same right this is exactly the same as if I do this this is basically what its collision detection so I probably should if I wanted to fix this oh if I wanted to fix this I would have to make this dot our the thing is I didn't train it with a radius so I'm gonna I'm gonna stop myself I'm not gonna do that right now I would gladly accept a pull request I could certainly make a part 7 but that's the issue you just need to add the radius and then this if statement here would need to take in account that radius could you round the corners of the obstacles yeah a save and load button might be nicer than a key press should think you think yes that's a very good point flappy mosquito all right uhhuh part 7 so I'm trying to think here 545 I've got to get going soon but what I wanted to do let's do the fall I need to do this anyway so let's give me a second here what I want to do is let me let you see what I'm doing here I should really set up I should fix the camera oh do I have what's the chance oh no I don't have I need a memory card reader I think I should lie I should do a cut why magic lantern child oh no way we'll wait I think I don't want documentation do I I don't care do is there a problem if I document me using magic lantern by the way how did I do that thing before where I just kept layering on oh yes I had the live thing okay now hold on I don't have I have stuff downstairs that I could use oh but I was gonna verse thing else oh yeah okay so hold on oh hey let me set up I term let me go to NSC s 18 so now I've got the the new neuro evolution steering and let me open that up and let me go in here actually let me just let me open this in Adam you know it's thinking of making a video by the way I was thinking of making a video of just kind of like what is tensorflow jas maybe I'll do that before I go but let me do this other thing I wanted I want to do tutorials with it but I'm not really ready to do that okay so sketch vehicle okay so what I'm looking at here is I am now looking at this other demonstration of neuro evolution whoa oh whoops no wait oh there we go this is another demonstration of neuro evolution I talked about at the beginning of this live stream and but what I want to do is kind of like just go through and add some comments and clean up the code a little bit so let me do that because I want to release this for my class okay so let's see this is an array of vehicles that's correct this is an array of food this is show a dish this is really a checkbox to show additional info this is a a slider to speed up simulation how how big is the food how much food should there be so these are all I'm just gonna add confidence to this how many sensors does each vehicle have how far can each vehicle see okay so add the canvas grab the checkbox and slider I think the default angle mode in p5 is radians so you don't think didn't need to do that so this is a now so this is create initial population I think I could simplify this right now to just have the vehicles spawn in a random location so let's actually just build that in here it's gonna make things simpler and then the constructor just needs the brain object and here I can just say if brain right if there's an actual brain object so that that simplifies things a little bit okay back to sketch this is how how fast should we speed up variable to keep track of highestscoring vehicle so this okay run the simulation cycles amount of time okay so this is always keep a minimum amount of food so the first thing that I do is if the amount of food is less than a certain amount just more food and there's a there's this like buffer here and that should probably be a global variable that's really like food buffer equals 50 so let's put that here don't put food near the edge you know a lot of these things are kind of silly they're just in there it's sort of like trying things out so this should now be food buffer food buffer food buffer food buffer and interestingly enough there's another place where I use that value which is in the neural networks inputs right here whoops so this is food buffer I'll come back to this in a little bit all right so now eat any food great go through all the vehicles and find the best so this is looping through am i removing stuff here yes so I need to loop through backwards this is a little bit silly if I'm finding the best and okay so so this is like think and update every vehicle if the vehicle is dead remove it otherwise it's a candidate to be the best if it scores higher than the record so save it now if there is less than 20 apply reproduction so I'm only going to reproduce the vehicles if they're less than 20 I don't know if that makes sense maybe I should always allow them to reproduce I don't know let's leave that in there though this would be max or minimum population I don't know this should probably be a variable I believe that right now for every vehicle create a child vehicle with a probability based on the score divided by the record so I kind of feel like maybe I think this is fine so this is kind of arbitrary but I'm going to leave that and as long as it did produce one add it to the population okay according to score argument to birth is probability and then here if if there is a child then push that all right let me just check the chat here okay so now this is drawing all the food there's no poison involved and just this is just drawing all the food arbitrary colors this is if it's D and debug highlight the best so this is highlight the best if in debug mode and then draw all the vehicles okay let's see how let's see if I didn't break anything ah brain dot copy is not a function shoot let's see I broke something I probably should have tested a little bit more in the interim what line of code was that vehicle dot J s line 37 if brain okay so what did I do here let's see what this is undefined oh it got a number oh because I forgot when I create them probably in the birth function so anywhere I make a new vehicle let's look for that I'm giving it the location which I don't want to do so I just want to pass in the brain that should fix it new so this should say new vehicle with brain copy and then I guess the it it mutates here that's fine so it should mutate here okay all right I can take out the console.log and now that that's fixed all right let's just let this run for a little bit so me I am so me writes in the chat my reasoning behind population length population dot length limit is that when they get really good they outcompete for food and all score really low so that makes sense to like limit the population because if there's too many cloning themselves they'll run out of food so let's just let this run for a while and see if it's doing something that feels somewhat logical yep this looks pretty good you can see this one over here is doing really well it needs to find something though ah yeah there we go oh come on you can do it oh this one is good this one is like I can't believe it's not the high score it's gonna be soon enough where'd it go come back oh it's gonna get stuck that's sad it's gonna get stuck oh I'm standing in front of it it's gonna get stuck over here so hopefully once one someday one will overtake it this one is doing well now so they get really stuck here on the edges because they've kind of learn to like move away but then as soon as they move away they trying to go back so it's kind of interesting I don't know how to deal with that well but they're they're learning okay so you can see there's a bunch of getting stuck in the corner that's fine all right so things are working well now let me go back to vehicle so this is this this is a class for an individual sensor so the vector describes the sensors direction and you know I almost feel like it might make more sense to give it an angle here so right here I kind of feel like I want the sensor to get an angle I don't know why I want to refactor this and have the it make the vector from the angle so it's just a unit vector so I'm gonna call this direction instead of vector BEC that might be silly and then the value so the idea of each sensor is each sensor is if I could just slow this down for a second I should have a pause button but I'll just say no loop each sensor is emanating from each vehicle it has eight surrounding it and the debug mode only draws it if it's sort of like detects it's near a piece of food and the thickness is relates to how near it is to that food so the idea of the sensor is that this is the sensors direction and this is the sensors reading the value like and I guess it's I think it's zero if it's not detecting anything and one if it's like detecting the food all the way there but we'll find out so this is a class for an individual sensor each vehicle will have n sensors this is the class for each vehicle a vehicle can be made from a brain neural network okay so I'm commenting this so this is all the physics stuff right acceleration velocity position interestingly enough I sort of feel like right it's a little cleaner just to give it no velocity I've broken too many things okay so I because I changed this up here I gotta fix this I probably shouldn't have done that and I know I could be using let me search for this with okay so this is actually now the direction here this is now I could have used a tool that would actually like re4 that that should have fixed that all right so what was I doublechecking I was up here and oh wait all the physics stuff right does it matter if I just give them no velocity when they start I think I prefer that why I have them moving in a random location okay another super chat from Isaiah thank you okay Thank You Isaiah Federer thank you you're welcome to join the patreon if you want that you're you credit is good okay so now all the physics stuff oh this is silly that's unnecessary if they have no velocity to begin with and now this is how this denotes this indicates how well it's doing this is really like fitness more it's really more like fitness but we'll call it score Oh this sensor angle so this doesn't need to be a variable I this can be this is never changing so this variable I think I'm kind of abusing global variables a little bit but let me take this out here this doesn't really this is kind of a global constant and really would go here what's so this is what's the angle in between sensors don't autofill for me yeah and then now I'd be saying this and this is not this is not gonna no it's not going to know what to pious is two pi is out here so I can say math dot pi times two because that's a p5 builtin variable and the p5 variables aren't available until setup happens all right so now this is now a global variable so create an array of sensors and if a brain is passed via constructor copy it otherwise make a new brain inputs are ups inputs are all the sensors plus position and velocity info so again I could be more thoughtful about this about sensors dot length plus 6 but that will work too out arbitrary hidden layer and two outputs for x and y will desire velocity so this neural network takes in all the sensor readings some position and velocity information and then spits out an x and y desired velocity health health keeps vehicle alive okay so this is update called each frame each time step physics so okay fine update update velocity limit speed to max keep speed at a minimum yeah that's fine Matt a minimum update velocity no update position and then reset acceleration slowly die I'll just lead decrease health decrease health increase increase score okay now dead return true if health is low if health is less than zero or if vehicle leaves the canvas that's what's going on here I'm gonna call this clone is that a reserved word in JavaScript clone I feel like I'd rather call this clone than over birth it's a bit more of I think an appropriate term argument to clone is probability and I'm gonna say this I'm gonna call this new vehicle rather than child I think that's probably better and so this function is called clone make a copy of this vehicle with according to probability so pick a rant pick a random number okay otherwise we'll return undefined okay so now clone is not reserved thank you so now this by the way is what well this is this is not gonna this is only gonna live in this live stream I'm not gonna make a tutorial out of this or anything like that's stand but I'm you're watching this so hopefully this is something to watch okay so all sensors start with the maximum length then okay so this is a function to calculate all the sensor readings and predict a desired velocity that's right think list is the list of food maybe I should just call this food list is a little bit weird so let's call this food it'll be a little clearer I think okay all sensors start with maximum length then iterate over all the food the food other position is the food position that's fine that's a good name where is the food how far away skip if it's too far away if it's too far away otherwise what is what is vector pointing to food so now I take a I make a vector pointing from this position to the foods position then I check all the sensors okay the Delta is the angle between the sensors angle and the foods and angle so this is what's going on here is in this example is the idea is that I have a vehicle it has all of these sensors poking out of it and maybe there's a piece of food right here so what I'm looking for is from here I calculate the vector pointing to the food and then I calculate the Delta relative to every one of these sensors right what's the angle in between every one of these sensors and if the angle between is within a given threshold and now here's the thing that angle is between is just that checking the Delta if it's you know if it's this closest sensor but I might want to I mean this is an interesting question for this like so right now right it technically it's going like if the food is here this sensor is gonna I'm sorry I should say let's say the sensor reaches out to here this sensor is gonna light up because it's kind of it's within the halfway point between these two sensors this piece of food but it's not actually intersecting it so I might actually really want to be more thoughtful about like doing some kind of detection of like within a certain range but I'm not gonna worry about that this is pretty good close enough so this is checking the Delta and then if this food is closer than the previous one so then replace the sensors value so actually the sensors value is 50 or the sensor length otherwise it's the sensors value is just the value of the closest piece of food and if it doesn't see any food its value is the total okay so that works now I have to create the inputs so I'm gonna just say this is goofy but these inputs are mapped these four inputs are mapped to distance from edges then these inputs are the current velocity vector and then now all of the sensor readings these are all the sensor readings and now the sensor readings get mapped then in the inverse so if if if there's a food zero pixels piece of food zero pixels from the vehicle its sensor its input to the neural network is one if it's at the if its the backs of them its input is zero then I get the outputs the outputs I map to a velocity vector between negative 1 and 1 this is kind of I wonder if the outputs should actually be the angle and magnitude would that make any sense more than the X&Y amount I mean really what would make more sense for this would be to basically like think about the outputs being a joystick and the joystick is saying like just how much to turn left or right how much to speed up or how much to slow down that probably would make the most sense but I don't really so I could but but I'm gonna leave this as I'm gonna leave this for what it is I'm sort of cure I'm gonna leave it I'm gonna try it with the angle in a second so turn desired velocity and apply the steering formula Craig Reynolds steering formula and apply the force yeah right so me I am Sania is making a good point which is that all the inputs are kind of based on X Y values so if I expect my outputs to suddenly be like angle and magnitude that might but you know with if I had a more stuff it may be more hidden layers you know a neural network is as a universal function approximator should be able to convert from an XY coordinate system to a polar coordinate system so now okay check against array of food calculate distance if we're within food radius if we are in if vehicle is within food radius remove that piece of food increase the health apply force display color based on health translate to vehicle position draw lines for all the activated sensors so this just looks at all the sensors if the value is greater than zero draw a line for it and then also draw text school draw a school display score next to each vehicle then draw a triangle rotating in the direction of velocity that's what this is this is a highlight with a gray bubble so I think I'm done now commenting this this is the wrong URL nature of code 2018 all right is this still working or what did I break all right it's not refreshing for me okay I didn't break anything so let's let this run for a while okay I'm gonna let this run for a while and see how it performs please oh yeah don't worry this is going to get uploaded and I'm looking for contributions now let me be clear I'm not looking for contributions to necessarily I mean I am looking for contributions to make this better but let me qualify that with what makes this better this is meant to be an example demonstration so there's certain things that would make this better would be adding a lot of features to it but I don't want to add features to it I want I just I want it to be as simple so I would like it to perform better wait what what just happened here why did it that was weird I don't remember dragging it back to one did I hit refresh or something I'm gonna let this run for a little while so in other words I would like it to work better in instance like evolved smarter vehicles that collect the food with greater efficiency but I don't want to over complicate it or add a lot of features that make this a big complex simulation so but if you make something from this I would love to learn about it and see it linked out to that so creative projects that have more design ideas and feature ideas I would like to link out to butt fixes and things just anything to simplify this or to make it more clear from an educational point of view or to improve the efficiency of the food collection evolution I would love so let's I just ran this for a while let's take a look at it now so let me slow it down and kind of zoom in you know it's doing something it's clearly doing something different than where it started so and you can see it's speeding up is this one detected it it's sped right up and to go to it so that's good like now it this one seems to only be able to like it's really only learned one of its sensors and you can see how they get stuck in between them and why now it sort of figured that out so you know again they have to learn over time now maybe I need multiple hidden layers this may be this is a complex enough problem that the neural network actually needs multiple hidden layers I don't know about that I mean I could I could try adding more nodes but I don't a certain point like more nodes in one hidden layer isn't as powerful as multiple hidden layers because you create many more combinations of parameters so same player in the chat rightz please create a discord server dan I believe there is an unofficial and whatever that means a discord server I would be happy to log into it or try it but I the official like coding terrain community well is the YouTube community I'm also available on Twitter at Schiffman but there is a slack channel that is for patreon subscribers so that's kind of how I create some discussion and that's the equivalent of kind of like signing up for the class I guess I don't know I don't know what you get from that but it's a smaller community people have signed up for the patreon that I'm using a slack rather than the discord Ben writes hate coding trading I started watching your videos two years ago and I'm now working as a backend web developer I love hearing that that's wonderful so let's see how this is performing over time now so you know look this one has lasted this one has a score of 5,000 I have not seen them now I've sadly to say that I think unless a piece of food spawns over here oh come on you can do it yes yes yes so this one has really lasted a long time unfortunately it's kind of just waiting for food food to spawn near it they don't seem to be able to evolve right now what would be really effective is for them to evolve a good wandering strategy to like really explore if there's no food near them they seem to be stuck going in circles in this corner but this one is definitely the highest score you can see it highlighted here we can like look at this one here what it's doing it's kind of collecting that food now it has nothing we still have our friend who's got like a score of like 6,000 right now moving in circles so it's really interesting to see what this is done now let's speed this up let me let me let some a bunch more generations go slack is definitely better for a programming related group and less linear conversation well that's good I have been thinking about doing some one thing I would like to do someday with the channel is like I kind of call in office hours type thing Zack Lieberman does these open office if you don't know Zack Lieberman follow him on Twitter yes makes amazing like daily sketches using open one of the core developers have open frameworks he does this open office hours thing it's not it's not broadcast it's private but people can just sign up and Skype in and have free office hours with Zack which is kind of amazing or meet in person and I've always wanted to do something like that as well but haven't figured out a way to do that all right let's slow this back down I probably should just highlight the score of the best one where is the best one oh it's over here look at them what is it that causes them to evolve this like swirling behavior in the corner I wonder if the food buffer is actually a bit of an issue like right now the food cannot spawn is that is this exactly like fifty pixels from the edge maybe right this is probably about fifty pixels from the edge that food buffer variable you know I could have one thing as I could add wrap so instead of like having to learn to like not leave I could let them leave and come back but ah Kari K H got the same kinds of results that's good to know so I would like to build this as a coding challenge look at this you can see like they all the food down here so then when a new one spawns they spawn in a random location they can kind of find some of the food that's up here yet where's the best one it's still here it's gonna like lose its health soon enough that's the thing they eat so much food they become these like gluttonous vehicles I've just collected so much elf it lasts for so long I wonder if I should like they should have to continue to eat more quickly to survive I think the reason is they learned with me I have some here they learn to respond to the buffer by moving in the inverse direction but not directly well I've got to go so when they hit the buffer they drift to one side Y divided by height same for X no buffer into account I'm not sure what that means TMC max health saturation yeah I think like I think probably limiting they're either limiting a maximum health let's try adding that so let's say max health I'm just going to say it's two for right now and this dot health this dot health zero and max health can you have stat I know you can have static functions in JavaScript can you have static variables because a lot of these constants would sort of make sense as static properties of the vehicle but I don't I don't think you can do that like I kind of some things are properties of the vehicle and then some things are like these global variables cuz they don't really change so I don't know those should be I'm constants as well okay let's see let's try max health what did I call it max health static properties are coming but not yet right so food isn't useful when you don't need it let's try this let me just look at like any random popular element of the population what's its max health is two and its health was some negative because it died so I can't tell the thing is that I don't have a good sense of what a reasonable oh I have the best one so hold on let me take out the max health for a second so in theory I have always the best one here oh no it's a local variable we make that a global variable so I can examine it and the console so the best ones health is like almost two right now now die that one died oh well this update in real time it won't right but I can what I should just say is best on health Oh 18 yeah god it could get really high I guess it goes down pretty fast I don't know what's a reasonable thing to cap it at me I am sue B is suggesting are you set interval to log to health you don't like I like to do it manually like this okay alright so let me add that in now anybody anybody have suggestions for what a good something to try as a maximum health I tried to let me limit it where did I do that let's try three let's not be so aggressive let's just limit it's at three and so let me constrain it and let's let it run for a little bit as soon as I get that thing where I could copy/paste from one computer to another set up static and constant all right so now let's see what this does like I think they're gonna die much more quickly and not so they're not really gonna get stuck at the edge so the thing is can they figure out to move more towards the center to wander more I don't know you can see they're still getting stuck at the edge but they're dying work we this one's doing really well like look how like well it's just picking up the food it probably needs also like a little bit more maximum force because it's difficult for it to steer but it does it now see now it's stuck I mean the other thing is I could give them much further sensors and I don't know if this defeats the purpose but like I could say the vehicles I had to go get tweaked this stuff forever like if I make a sensor length 150 like watch what happens now they can really they're really like they're probably I would think not going to get stuck as much on the edge cuz they're gonna pick up food even if they're like far away from the food so let me run this for a little bit max health should be PI add an input for its health that's interesting right if it's health is getting low should it do something different I don't know so let me like do this now the thing is it the way I have this debug view it's sort of hard to see them but let me take that off so what do we see now it looks like sort of more reasonable right like I don't see them getting stuck along the edge I actually kind of like this let's speed it up a little bit alright this this the problem is there's a lot of noise to the sensors because they're gonna see so many more pieces of food but so they're they're kind of acting a little crazier in the center but they're not getting stuck at the edge because they're detecting the food so this is certainly better I think this is pretty interesting to watch though real the thing that I would like to do now is turn off debug and watch it like more slowly over time like can we really see like if I sit here I'm going to zoom in like this is not really sped up can we really get a sense of watching this evolution now max health equals pi so even over it without it really sped up over a little bit of time we're seeing this evolutionary behavior I kind of liked it when I made it lose score when it accelerated that's interesting but I would I like those I like these little moments when they get a burst of speed and then they slow down so but anyway there's so many properties here I'll let I'm gonna let let me let me upload this so I'm gonna put this in in a couple different actually I where am I gonna put this all right git add changes made during livestream to improve the simulation what live stream changes dear diary today on the coding train I tried something new instead of making a tutorial I just pulled up an example I been working on for quite some time and I added comments to it then I became obsessed with tuning it tuning it and against and tuning it but I really whoops but I really but I really should go home and have dinner now because it's late maybe tomorrow Oh maybe tomorrow the pull request ferry will visit me with some nice improvements mind you I don't want to make the code more complex so improvements by improvements I really mean simplifications or small changes that improve the the the be evolutionary genera the evolutionary algorithm for neural network model I hope this example spires some interesting work special thanks to me I M so me for their contributions and also to dairies because I'm me github to Darius K for inspiring me to think of git commits as a diary Sincerely Yours Daniel chief maman okay alright so now I'm gonna close this and hey where to go don't tell me I lost it close please I would hate to lose that get status get oh I'm in neuro oh I'm on branch neuro that's fine git push origin neuro and this is a little kind of unnecessary but I'm gonna do anyway I'm gonna pull request it to myself so you look great pull request and I'm going to whoops I'm going to merge ok so that is completed and so I think I'll leave this here for a little bit longer just in this repo ultimately this is going to get moved to here so ultimately the idea right now I have in the neural network library an XOR example an amnesty actually the amnesty example is kind of broken I think doodle classification and the neuro evolution flappy bird so eventually the neuro evolution flappy bird steering will make its way here and then and then and then I'm gonna start remaking these examples the first one being the doodle classifier with tensorflow jas so that's my plan that hopefully I'm gonna get to that next week alright so thank you everybody for watching and tuning in to this live stream I'm just gonna check my email this is good these are some good messages these are some really good messages they're not what I'm looking for right now ok so I am really hoping to be back here let me just say I'm hoping to actually do a live stream this Saturday morning and there's a project that I'm looking to investigate it's related it's related to Google's CS first and Earth Day and their Google logo challenge but I was sort of waiting to hear back from the Google's education team I think to get some feedback about what would make the most sense for me to do so if I get it together I'm making no promises right now but Saturday morning probably around 10 a.m. well I have to be done by 1130 a.m. but that now has probably isn't but I also might just record a video offline and release it on Saturday so stay tuned hopefully on Saturday there will be a live stream or a new upload looking at doing an Earth Day challenge with the Google logo so that's something I'm thinking about doing if you have any ideas or thoughts about that please let me know okay so thank you everybody I'm going to be gone now wait I don't have it yet but apparently I'm told I could have an outro so instead of just pressing like stop on the live stream there could be like this outro actually let me try this here's gonna be my outro go I'm not there let's see if we can make this work wait how do i how do I do this Oh clothing tree live and then if I go over here and then right if I go here and I and I do something weird and then I come back over here waiting at certain point the duplication fix happened that's not good oh I think this should be blank I shouldn't be in that that's the problem right because oh wait no not this again how do I get it without this like opening sequence thing oh so much duplication I know I'm back okay let's see this is my outro it's gonna take forever to get to so many because I had this whole long process of so many people yeah this by the way I find very entertaining fun entertaining if you were actually still watching at this point you know yeah it's pretty scary alright goodbye thank you for watching the coding tree I guess it works better if I just have this open because it definitely needs to be one wearing a like conductors cap right also perhaps a oh let's make sure the camera doesn't shut off well this is bad for me to go in front of it that's really bad unicorn hoodie is probably a good thing to add to this okay now I think we're finally ready for me to read the random number okay 4053 seventeen thousand seven hundred fifteen forty three thousand four hundred thirty four thousand five hundred twenty two sixty eight thousand eighty nine thirty thousand three hundred fifty five twenty thousand three hundred and twenty two fifty two thousand three hundred and thirty three seventy six thousand 76 and ninety one thousand seven hundred and twenty seven alright thanks for watching the cody dream this has been the coding train with me your host Daniel Schiffman whether we I think the quality of the background is like degrading over time that's kind of interesting why is it doing that where's the unicorn hoodie the court buddy is my favorite part come on back here to court lady come on back you there no that's the oh there's the unicorn everybody out of the way the unicorn hoodie is the video compression is totally insane right I mean what would happen if I just oh oh whoa oh no no Kay this is this is over now goodbye hey um this is crazy what it's doing all right let me okay so I'm gonna leave I'm gonna leave and um oh the SpaceX stream started I've got a good idea space X livestream okay oh it's gone now somehow I thought wait a sec oh no no II what am i watching here I'm so confused okay I'm not watching my stream anymore like why am I not duplicating anymore I'm just gonna sit here wait for the space Xtreme is it gonna launch how long till it launches Oh 11 minutes people want to hear that hold on let me let me make it so you can watch both the coding tram and a rebroadcast am I gonna get in trouble for three broadcasting the space Xtreme I don't think so whoops we're gonna attempt to land this stage today on the drone ship after it separates from the upper stage now that upper stage our stage two as we call it that's right on top of stage one poster boy is single in vac engine on it that's Merlin vacuum engine that's the engine that ignites after stage one separates and begins its journey back to earth the second stage it's what's going to carry tests from the edge of space and accelerated it to orbital speeds of just over seven and a half kilometers per second now Tess is currently sitting on the very top of that stack inside of our seventeen foot diameter payload fairing that's that nose cone structure you see on your screen up top the fairing is what protects the spacecraft from Aero thermal heating and looks as we launch it into space once we reach vacuum ten minutes we don't need them anymore there's just a structure that you see on your screen there that is referred to as our transporter erector this is what we use not only to roll the rocket out of the hangar and to the pad and then to lift it up and support it in its vertical position but it's also what routes Falcon 9's fluids power until image umbilicals from the ground systems all the way to the vehicle itself and does so until Falcon 9 goes on internal power and launches and clears the pad at that point the vehicles internal flight computer and automation and radio frequency communication is what's going to take over the test space there we go this is going to be the quality the 24th Falcon 9 landing if we're successful today and SpaceX just eight launch this year I'm gonna wait I just I had my own commentary I don't have anything you know what I would like to do is do like a lunar lander challenge somebody on Twitter I think it was on Twitter sent me like a lunar lander simulation I mean it's obviously much simpler than oh and coating stem stem cotangent a wonderful YouTube channel and an oxidizer which is liquid oxygen fuel is about 90 percent are so loaded on the rocket and stage sorry on stage one and 75 percent loaded on stage oh I'm sorry actually our p1 the fuel is fully loaded on stage one in two and it's LOX that's about 90 percent loaded on stage 175 Toby strong what's the music you use at the start it's called core even I'd allow filming television composer in Los Angeles because a friend of mine and he sent me a bunch of music tracks actually the composer of Zuko de train song and that's when we're creating rainbow so that when you start feeding them their full flow of liquid oxygen in flight that lock stays nice and cold and doesn't manage the landings the rocket village in exact exactly what I wanted to do I would love to do a neuro sounding like we are looking good for an ontime wash today I'm not hearing about any issues with upperlevel clouds our ground level winds are looking within limits as are those upperlevel winds and we're within our lightning rules spacecraft is currently healthy it's on internal power and the range is currently go for an ontime they're super Chad I missed that thank you super child now I'm looking at my phone literally looking at my phone yeah I don't think that music is anywhere we're waiting for the lunch we're launching NASA's transiting exoplanet survey satellite come on SpaceX you can do it you can launch tminus seven minutes everybody exercises oops wrong oh how come I don't hear it anymore we're high tech wide fieldofview cameras designed and manufactured by mi t's Lincoln Laboratory cool these cameras will allow tests to detect exoplanets which are planets that are outside of our solar system well it does this by looking for a phenomenon known as a transit this is where a planet passes in front of the toast star causing a periodic dip in that star's brightness this allows scientists to assess the size mass atmospheric composition and structure of those planets and this is particularly exciting to astrophysicist and astrobiologists because some of those planets may fall into what is referred to as the habitable zone that means it might have the right conditions to sustain liquid water and potentially support life falcon 9 will be ingesting Taniguchi are a at its highest point reaches two hundred and seventy three thousand kilometers that's over two thirds of the way to our moon after test separates from Falcon 9 over the net 60 days the spacecraft will use its onboard dressers to perform a series of maneuvers which includes a flyby of the moon in order to slingshot it into its final high earth science we will this orbit is what's going to give test an unobstructed view of the night sky allowing the spacecraft to absorb and observe and catalogue thousands of exoplanets for future studies James Webb Space Telescope Space Telescope and large groundbased observatories there's a wonderful project by Jer Thorp which is a data visualization of a lot of the Kepler data we have five minutes I can go track that down really quickly Jer Thorp Kepler turtle sequences have started sequences are starting at one point I had 45 seconds away from liftoff so let's check in on the rocket one more time before stepping in in a terminal count so anyway III do exciting no I can't look at this anymore I have a code example an old puffing coded rocket while on the ground and in flight and very soon what you're gonna see is those cradle arms that are holding their rocket they're going to open up and the transporter erector it's going to lean back slightly it's going to retract you also might see some venting coming from the side of CV that's totally normal it's just liquid oxygen that's boiling off eating up and being released from the tanks at tminus one minute the Rockets internal fly computers are going to take over which are here on the countdown that as Falcon 9 is his merits the range is currently looking good for an ontime launch today that they are going to launch with the Roger no power and it's go and whether it's go we are looking awesome for a 651 p.m. t0 now our launch window today is only 30 seconds long but that's pretty much an instantaneous window for some reason we can't get off today we'll come back again tomorrow at 7 o 9 p.m. Eastern Time Here I am inside the space X rocket last three and a half minutes of terminal count I'm ready to go come on SpaceX let's lunch ready looks messed up a pleasure complete launch rocket come on switch to the middle it's cured by the way I highly suggest you just go and watch the actual SpaceX livestream you won't have to meet here Oh to the my stitch to know how clocks on that week right we want to know what they're saying Falcon 9 is on internal power Falcon 9 on internal power maybe it goes in someone Gragas closeouts is starting clothes out clothes out eeeh PS is ready for launch FTS ready for launch token Hines and startup grant as close as it's complete congas completing for floyd present for flight how do you go from watching go for launch LD all aboard all aboard stage ones that start at pressures DUI is 15 seconds 9080 usually 10 9 8 7 6 6 5 5 4 4 3 3 2 2 1 launched my decorations as you just saw Falcon 9 has successfully cleared the pad and is now on its a spent Basin is coming up in about 15 minutes you're gonna hear the call out that Falcon 9 would have had max Q that James for maximum aerodynamic pressure that's the point at which the rocket is seeing its highest stresses on its ascent vehicle has passed maximum aerodynamic pressure to tell by the cheers what you heard on that callout we have gotten through max Q coming up next we're gonna hear the call for impact absorption as we go that was it that is where we chill in that Merlin vacuum engine down to operating temperature now coming up your short where you're gonna hear three big events happening in rapid succession the first is Miko that stands for main engine cutoff that is where all nine of the first agencies are going to shut down that's in preparation for the next step which is stage set for stage separation there's where stage 1 will separate from stage to stage 1 will make its way back down to the drone ship stage 2 will continue on with tests to its orbit and then you're going to hear second engine start that is the ignition of the second stage engine let's check it out here hello I'm here reporting live from inside the rocket pretty pretty warm in here actually we go and as you just saw we had a successful stage separation and in successful mission of that second stage engine fairing should be deploying at any moment there we go and you can see that tiny but strong test spacecraft inside of that on top of stage two stage one is making its way back down to earth well we're gonna see coming up pretty shortly is a boost back burn grid fins have deployed today just following nominal trajectory call trajectory yes how long does this thing go right now stage is gonna continue to burn all right I think maybe I'm gonna go I hope you're enjoying the SpaceX livestreams coming up for stage one the next one's going to be the entry burn that's where we're going to reignite three of the stage 1 engines and that turn is intended to slow down stage ones descent as it makes its way through that thick upper atmosphere how do I rotate in I feel like rotating would be good there's gotta be like a rotation seeing that at 6 minutes and 29 seconds or so so in about a new transform rotate well there's this but how do I just like can resize is there a place I can grab on to to rotate it's silly Apple taskbar no this is live okay okay I gotta go we're hearing that stage choose burn is still performing nominally all right everybody at least wait for the booster LAN this was fun this will be recorded I can always come back and do this again hey stay choose gonna continue to pressure about another what this really should be in one minute until we see that reentry burn this now after that reentry burn stage one is gonna continue on making its way down to the drone ship and coming up thereafter will be the landing burn that'll be the third of the three burns and at that point we're gonna reignite that center engine inai and that'll be it's actually a seven o'clock I have to go alright thank you but go and watch the real SpaceX go and watch the actual SpaceX livestream I'm gonna go and I will see you hopefully another livestream next week for sure a week from this Friday won't be here this Friday I'll definitely be here a week from this Friday and it might be at least a livestream in between then or a video that that I'll be doing between then okay so let me get going here I'm gonna hit stop and goodbye I will see you next time on the coding train thank you for tuning in and participating this insane