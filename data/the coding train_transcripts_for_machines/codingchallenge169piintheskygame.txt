happy pi day coding train passengers welcome aboard i've heard you in the comments i've heard you say oh i miss those old simple coding challenges like the snake game and purple rain when will you do another one of those and i'm here to tell you that today pi day i want to make a game a game with the digits of pi it's gonna be a basic beginner friendly tutorial you can make your own version of it i hope you will make your own version and the world will be filled of beautiful delicious pies my favorite treat circumference divided by diameter day let me tell you a story oh it was many years ago in the 2000s when i was first writing up some tutorials about processing oh in html and uploading them through ftp to the internet when someone came to me and said why don't you put these tutorials into a book and i said no oh no oh no oh no i couldn't possibly no oh me no i couldn't okay if you insist that book was called learning processing and you could buy it today but i don't suggest you do because i don't know maybe it's a little too out of date but that book at the end of chapter i don't know six after all the fundamental basics of programming are covered variables conditionals loops functions object arrays and all those things were put together in a game known as the rain catcher game well i am here today to present to you the game pie in the sky the idea here is that's a plate and there are pies falling from the sky the player must move the plate to catch the pies aha but there's a catch the pies have a certain number of slices and you as the player must catch pies in the correct order you must catch a pie with three slices then one and four then one then five and nine and if you don't i don't know you lose points if you do you gain points this is the basic idea let's go make this game so here we are in my happy place when i like to spend pi day in the p5.js web editor and the first thing i need to add is the plate and the plate i'm just going to place it where the mouse is at the bottom of the canvas so i would like the plate to be centered on the mouse and there's my beautiful beautiful plate change the background to zero and we're starting the game next up i want to add the falling pies i think to do that i'm going to want to make a pie class and an array of pi objects so the idea of a class is a template for making an object a thing that's going to exist in the world of my program it has a constructor function that initializes a set of variables or properties that belong to that particular object so i could create a variable called pi once i've created the pi object maybe i want to draw it on the canvas i can go to the pi class and add a function that draws it then all i need to do is call show on the pi variable now i have both my plate and my pi next i would like the pi to fall from the sky to do that i'm going to increase its y value every time through draw adding another function to the pi class called update and increasing the value of y by one every time update is called and there falls the pi so clearly i need some mechanism by which i compare the pi's location to the plates location when it reaches the bottom of the window i'm kind of feeling like i want to make a plate object so the plate needs an x position which is variable a width which is how big is it and then its height and its y position are locked to the bottom of the canvas although that is something that potentially you could also experiment with now i can create my plate object oh oh no it's happened i can't believe it you know what i've forgotten right if the variable is a property of the object in the class we must refer to it with this dot there we go oh but i can't move the plate so now how do i know if the plate has caught the pie if the plate catches the pie console log yum this is one of the things i love about objectoriented programming and i should just take a minute here if you happen to actually be watching this video and you have no idea what's going on i'm trying to step through it slowly but ultimately what i'm making use of is the fundamentals of programming i've got variables i've now got a conditional i have objects soon i'm going to add an array then i'm going to need a loop i'm going to talk you through these things maybe you're a beginner and this is your first time coding if so hello and welcome but i also want to mention that what i'm doing here is synthesizing everything that i have in my intro to coding with p5.js playlist and if you want to go back and kind of learn all these pieces more slowly and step by step you could take a look at that playlist which i'll link to in the video's description but what this means here is that i need a new function inside of the plate class called catches to receive a pie and do something with it what does it need to do well if it's in a conditional statement if it's if the plate catches the pie it needs to return true or false i could just say right now return true so now look at this i'm catching pies i'm always catching pies the pies are falling i've got them all i'm eating them all it's too much pie help so it would make more sense for me to first test if the pie's location is down at the bottom of the canvas where the plate is i'm going to do this in the simplest way possible first i'm just going to say if pi dot y is greater than or equal to the plates which is this dot y then i'm going to return true otherwise i'm going to return false and now i just write the code this way because i love seeing the flood of comments on my youtube video about how i could have written this i mean yes it's one line it's kind of elegant but let me just have my piece all right that pie is falling really really slow i caught the pie let's try it again i caught the pie so clearly i also need to check if the pie is between the boundaries of the plate if the pie is at the bottom and pie dot x is greater than the left edge of the plate that's the plate's position minus half its width and its right edge which is its x position plus the width run it okay i'm gonna catch the pie oh what oh no i have caught the pie try it again i have not caught the pie what's next we have variables we have conditionals we have functions we have objects but we don't have arrays or loops instead of one pie let's make a variable called pies and set it equal to an empty array i could say the first element of the array index zero is a new pi and my code doesn't have to change other than just referencing the index 0 of the pi's array but what if i want to have more than one pi in the array pi's index one the second element of the array is another pi well but i only see one this is where a loop comes in now i can write a loop this is called a for loop where i have a counter i which goes from zero up until the length of the array counting through every single pi then instead of referencing index zero i can reference index i now i have two pies and i can test both of them all of the pies against the plate now this is a little bit silly what i've done by just individually assigning each pie into that list into that array what if i want to have 100 of them well i can actually use a loop as well in setup to put a whole bunch of pies in the array let's put 314 pies in there and in fact even though i can do this by referencing the index i i can use a function called push to just push pi's into that array without having to worry about the index this allows me to also use a slightly fancier loop called a four of loop now instead of counting through the pies i'm saying for every pie i want to say the word in it's a long story why i can't say the word in even though i could say the word in but that's something else in javascript for every pie of the array pies show it update it check if the plate catches it and if so console log yum but i still only see one pie all the pies are being created at the same exact location so let me give a random location anywhere in the width of the canvas and actually let me set it up so that it starts above the canvas itself so it's raining pies so anywhere between negative 100 and negative 20 those are pixels off the canvas oh look at all the delicious pie let's go back to 31 pies and actually i have a different idea why don't i just add a new pie every frame so i'm actually going to start with zero pies but just in draw i'm gonna push one random new pie every time through draw it's raining pies now we have a problem i'm adding pies i'm trying to catch them but i haven't eaten any my animation is starting to slow down so maybe every time a pie gets to the bottom i should get rid of it so i want to say something like if pi dot y is greater than the height of the canvas eat the pie to remove an element from the array there's a javascript array function called splice but splice requires me to reference which element the index to the element so i need a kind of loop where i'm counting the index values so i'm back to referencing index i if the pi at that index is greater than height eat the pie or remove index i and only that element now i believe that the elements of the array are being removed as they get to the bottom i can't be sure what if i use a console log and look at the length of the pie's array lots of pie lots of pie lots of pie lots of pie oh yeah stabilizing we are not getting more than 100 pies i have done something in a way that's slightly problematic however and i've covered this extensively in my videos around objects and arrays and removing objects from arrays but in this case if i'm going to be taking elements out of the array it's important that i go through the array backwards from the end to the start due to the way the array recalibrates itself when things come out of it now i'm realizing something here when the plate catches the pie i also want to take it out of the array it's done it's not eaten it's caught so i'm eating some pies catching others it's confusing what's going on here but regardless any pies that make it to the bottom whether they're caught or go past the plate they need to be removed from the array so i'm going to take the if statement from the loop up top and bring it down here to this one you're probably thinking oh what about consolidating these two boolean tests this if the plate catches the pie or if the plate goes off the bottom and yes i could do that but right now i think i want to do something different in each case whereas this is just saying goodbye to a pie and here i need to remember the whole goal of the game is to catch the digits check what digit was caught and deal with score but let's also clean up a couple things one thing you might notice is as the pies get to the bottom they kind of disappear before they're really gone so i think in this case it would make sense for me to say if pi's index i dot y is greater than height plus and let me look at the pi object oh i have hard coded 32 so i have this i'm going to use d for diameter or let me say actually r for radius and make it 16 and this is going to be this dot r i remembered that this dot times two and then in the sketch i can see if the pi's y position is below the height plus the pi's r and now it just looks a little bit more elegant as we don't see the pi's disappear until they're off the bottom but what about the pies that are caught how about if pi dot y plus pi dot r now you can see how those pies disappear right at the plate whereas the other ones move past below the canvas itself i don't need this console log anymore and also it's a lot of pie so let me reduce the number of pies by adding some randomness i'm only going to add pies randomly maybe one out of every 10 times through draw so now by picking a random number between 0 and 1 and only if it's less than 0.1 that will be 10 of the time do i add a new pi to the game eventually i want these falling pies to represent the digits of pie and the player has to catch the right digits so i want to design them with slices and all that but for now let's just put a number in the center of each pie so every time i make a pie it'll pick a random digit between 0 and 9 and i can use the text function to draw the digit right there over the circle itself i don't see the number oh my goodness order of operations is an important thing i'm drawing the circle after i'm drawing the text so i drew the text but then i covered up with the circle drew the text but then i covered up with the circle let's fix that there we go now they're all the number one now we have digits falling from the sky up what happened to my plate i wasn't very thoughtful about making sure i set the color of everything i'm drawing so now i have my plate back it's still too many digits because it's going to be very hard to like catch one and then move out of the way let's make the plate a little bit smaller a little less frequent with the digits i guess a little bit more also i would like these digits to feel like they're falling more right now they're moving at a constant speed down so if i add an acceleration so that that speed changes over time that's as if gravity is pulling them down and they're accelerating as they're falling so if i were to start with a y speed of zero if y speed increases over time well it probably should increase a little bit faster now they feel much more like they're falling now i have an idea i think what i want to be able to do is display the string of digits that i'm catching below the canvas even though i'm using dark mode for the web editor i can change the background color of the canvas area to be white by altering the css then i can add a paragraph element to go below the canvas so you can see it there as the word hello let's make that a little bit bigger i'm going to call this digits div start it as empty and then have a variable called digits be a string itself every time i catch a pie i want to add its digit to that string but i also need to make sure the div is updated with the current value of that digits variable here we go i'm gonna catch one oh oh well that's a problem i better do that before i delete the pie from the array okay here we go no html digits oh it's not digits p it's digit div six six eight nine four nine that's not pi so first of all let's start it with three dot so we will make the the idea of the game is i need to find a one first and i need to avoid everything that's not a one there it is there it is there one oh no wait what just happened oh i can't put that there needs to go here after all that okay here we go three point there it is there it is one and i need a four give me a four no this is hard there we go one four one all right so there's some playability issues here i mean one thing would be to make a bigger space and then have more digits falling is there really no is it never going to pick a 5. i'm not going anywhere until a 5 shows up oh there we go yes okay pie in the sky i'm trying to think of what to do next certainly i want to test whether it's the correct digit or not so thank you to eve anderson i'm going to download this file with 1 million digits of pi upload this file and in the preload function i'm going to load all of the data from that text file into a variable called pi now what the load strings function does is it takes that text file and brings it into an array so each chunk of digits that is on a separate line is a separate element of the array so very quick thing that i can do is just set pi equal to itself with the join function and now i have in this variable pi one million digits of pi now i want to create a variable called pi counter and the correct digit is the one at the pi counter index in the one million digits i'm going to put the actual digit that i'm getting from that pi in a separate variable this way i can say if the correct digit is equal to that digit then console log of pi otherwise if it's wrong a train and also if it is correct move on to the next digit and maybe only add it to the string on the bottom if it was correct so now i'm catching all of these oops oh i misspelled correct so we're seeing train emojis while i'm catching the incorrect digits but if i could ever find a one there it is oh it's not called pie counter oh pie counter without the e of course let's catch these okay train emojis now let's look for a one okay good and i got a pie i need more pies okay we're getting somewhere there are a lot of directions i could take this but i would like to add a few more features before i go and just leave it to you to make the most amazing pie in the sky game that ever was created i'm going to first increase the level of difficulty by instead of drawing the digit drawing a certain number of slices of pie so the most slices there could be would be nine and i'm going to use the arc function to draw each slice let me start by just drawing one slice the arc function is just like the circle function the difference is instead of drawing a full circle i'm drawing a portion of the circle from a starting angle to an ending angle and because i'm using the arc function i don't think i can get away with just the radius like with circle i've got to consider the horizontal and vertical diameter of what would be a full ellipse so i made another variable called d to store the diameter now i can give the start angle and the end angle so let's try zero and pi divided by two let's make it a blueberry pie and you can see there each pie has a quarter of it blue it's like falling pacman so now if the pie were divided into nine slices a full pie is two pie divided by nine so that's one slice so if i wanted to draw all nine slices i would need to start from i times a and go to i plus one times a right i want to go from zero to the angle or the angle to two times the angle or two times the angle to three times the angle so that's a full blueberry pie let's add a stroke i forget the arc function can actually draw the outline of the slice itself and we can see that on the reference as i can draw it as open cord or pie of course i want a pie so these are my pies with nine slices can you see that then i can change this nine to this dot digit so now oh this is really easy to play i'm now filling in the correct number of slices based off of the digit let me change the look of the pie a little bit and maybe it'll be more like a strawberry pie i'm going to make the stroke weight a little thicker and i think these pies need to be bigger there we go oh my god it's totally gonna be impossible what have i done where's one slice i need one slice give me one slice there's one slice one is that four no that's three ah no wait ah that's four let's change this to no fill it bugs me that the pies always have the slices in the same position so i think i'm going to just add a little rotation random rotation to them now rotating a shape in theory you might think it's as simple as me saying call the rotate function with the angle but this is going to set everything out of whack oh my god craziness kind of interesting because everything is rotating around the point of origin of the canvas so i have a full set of tutorials around how transformations work but essentially i need to make sure i move the origin of each rotation to the center of the pi itself that's done with the translate function then the pi is drawn at 0 0 so that each pi is selfcontained with its own rotation i can add the functions push before i translate rotate and pop after i translate and rotate okay so we have falling pies each with a number of slices in them and we need to catch them in the order of the digits of pi let's make this game a bit more possible to play by actually displaying the correct digits that you're looking for we'll call this pie show in pi show i'll use the substring function just to get out an initial set of digits and then after i've caught a digit i should slide it over so every time i catch a digit the digits shift i wonder what this would look like if i didn't draw this circle at all oh yeah i like the falling it's like this much better that's more fun this is kind of ridiculous showing so many digits i'm sure those of you who are designers can think of a better way to display this but for me i'm just going to move them over and just show a few the live chat is making a very good point which is that you don't see the zero anymore so i've got to put the circle back in there but i could make the circle more subtle than have the slices have a thicker stroke weight this i kind of like you know i should just only display the one you're looking for and the next one so let's make this two digits and when i draw them this is a little silly but let me draw it twice with the second time i draw it just draw the first character so the first one is green and so i know what i'm looking for and what's coming up next so now i need to get a one that's a one ah and you get a four i've been at this for a while i need to wrap this up let's make the game very simple if you get the correct digit you keep going if you get the wrong digit the game is over a boolean variable game over is false instead of console logging a train if it's the wrong digit game over is true and i can say now at the beginning of draw if game over background red fill 255 text align center center text game over go and enjoy some pie and then return get out of draw don't do the rest of it so now as soon as i catch the wrong digit oh i need to say where the text should be game over and enjoy some bye breaking news i'm being told that silver would be a nice color for the plate let's try that there we go so now we see that there's a plate design aside i think we have a somewhat finished version of this game that i could actually play first let me give myself quite a bit of a wider space to play the game and here we go ready everyone i'm about to play pie in the sky okay i need a one i need one it's gonna be really sad if i don't even get past one oh there's a one okay one now i need a four i probably should lose if a four goes by and i don't catch it but you know who's the real loser here i think it's definitely me ah i only got one digit that was so sad there it is okay one okay i need a four four it's like hard to find the four there's a four four i need a one again three point one four one yes that's so confusing a one then a five one okay now i need a five is that a five ah no shoot hey come on i got to at least include in this video a version of it where i make it past the third digit i can even remember past the third digit one more time there's a one can i get it one no now i need a five i haven't been able to get past the four that's a three that's a five five now i need a nine okay there's a nine nine no i missed it i'll find a nine there's a nine oh i'm gonna get this one all right okay now i need a two there's a two there's two oh two six oh god six that's a six oh i missed it i just like have to it's so much work to avoid everything this is a six right six yes that's a five five what do i need now three need a three that's a three three i need a five again oh my god that's a five that's five no i missed it oh it's a five that's five five eight eight eight eight is that one ah nine near nine there's a nine no ah this here's one nine okay seven what's seven seven is missing two slices so that's a seven nine three i need a three three well once you get the hang of it oh no no no i'm in deep trouble here an eight and eight is one missing that's me i get it four that's a four six ah okay i did pretty well there can you beat my high score well that's all i've got for you today so happy pi day to you i hope you enjoyed this coding challenge i hope that you are inspired to make your own pie themed game whatever that might be i will make a version of this with coding trained character illustrations that you can play and you can base your code on please share it with me to celebrate the day there's a link in the video's description to the coding train website where you can submit your version of your own pie game have a wonderful pie day everybody