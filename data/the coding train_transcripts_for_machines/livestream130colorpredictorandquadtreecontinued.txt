okay I have returned and I have restarted the computer and I have also switched some settings I had it set on youtube for low latency because I like the live stream viewers to be as close in time to the actual real time of me speaking and demonstrating things but I switch it to normal latency in the hopes that that it you know it says their highest viewer playback quality so fixed great alright wonderful ok so that's good to know I guess I can't really use that low latency what I'm curious about is to do a little bit of timing so what i'm gonna do so i'm gonna watch the patron group in the slack channel i'm going to clap and then i'm gonna start a timer on my watch stopwatch reset and i'm gonna clap and then i want you to type clap into the patron slack channel when i clap and i'll see how well how long the delay is ready oh wait oh yeah actually i'm gonna say now i can't clap because I've been to press into I'm gonna I'm gonna press into the stopwatch ready and now so just type now when you hear this although it'll be passed I'm waiting I'm waiting okay I really botched that but so you're about 17 seconds behind which is fine typically I've been able to get the live stream lag down to less than 10 seconds but I'd much rather have higher quality for you okay we're back all aboard good boy it's the coding train with me your host something or oh there's actually a thing which gives the live latency alright so I'm all rattled now so what was I talking about let me read let me let me let me act as if nothing has happened and I've just started I'm gonna click over here now I wasn't saying run out of so much time it's coming soon next week some point a video tutorial from Lisa Jamboree about the connect Tron project so I was talking about that earlier I guess I won't talk about it again I feel like I'm repeating myself even though maybe that's all that bad quality stream thing is now gone from the internet any forever this afternoon I want to get started with some coatings I've already lost a lot of my wasting time time this afternoon I am very excited to announce that twitter.com let me go actually twitch noop cat lets on the live stream this afternoon will be a new cat from twitch that you might know from ads don't let me watch this ad okay okay hold on let's go to new cats website Sue's so a new cat Sue's Hinton will be here this afternoon at about 230 p.m. eastern time to talk about doing stuff with hardware and JavaScript I will stand all the way I will have to leave the room or stand all the way in the corner or something cuz if I go near hardware its spontaneously burst into flame there's actually downstairs in the shop and the physical computing areas there's various alarms that are set up if I walk anywhere near all the alarms go off all the students go running because but I have the opposite effect sometimes on just like code JavaScript code I could just walk by a computer and the bugs kind of go away I lead a very strange life so I would love for you to come and tune in this afternoon I'm really excited to have new cat as a guest and I encourage you to subscribe to her twitch channel she typically does live streams on Sundays and I'm hoping to make a appearance on one of her live streams as well in my desire to collaborate with other people in the world of streaming educational coding technology I don't know I if there's anybody out there doing musical theater I would love to collaborate with you actually but you probably don't want to collaborate with me okay is it new cat or no ope no like no op I always just say new cat am I've been saying it wrong all this time like no op cat like no operation cat I have no idea have I been saying it wrong all this time well guess what we're gonna find out this afternoon the mystery will be solved so what am I here to do today I am going to talk to you about these things first what I'm gonna do while I'm talking about these things I'm going to erase this whiteboards wouldn't it be nice if during a live stream I could have that like effect we're just like being fastforward doing it really fast maybe I could try to do that live because that was recently in one of my videos Matt Jie who does the editing put in this like speed up effect thing and everybody loved it I'm kind of in love with that okay I'm an attempt I'm an attempt to do that maybe if I have the music on it'll help me sorry beast up it was a beautiful diagram okay how's my exercise for the day see what my Fitbit thinks of my steps Fitbit not officially a sponsor but Fitbit sponsor sponsorship on ticket sponsors now living in New York City is very expensive okay what does it do it need a marker alright so here's what I want to do today first of all Sue's which now I'm apparently even saying this wrong all my life no o P cat or noob cat which is the way that I say it 230 Eastern Daylight Time come for the rainbows stars hearts this is the most important thing to happen today at least I don't know I might have something else that's kind of important but I don't think so no today in my life this is the most important thing to happen now this morning she's coming at 230 we're meeting to get set up here before that I need to eat some lunch so I think that I can reasonably stream until about 1 p.m. right now which is only an hour and 20 minutes right now which is not a lot of time so on my list is I wanted to finish off the quadtree challenges and do quadtree with collisions I want to do gibreel color predictor my to finish off that collaboration so if you're not aware Jabril was here last Friday did a guest spot on the coding train about the color predictor then on Sunday released a video on his own channel about the color predictor that has me in it and then I thought I would do as a las or last piece of that do a tutorial about building your own neural network based color predictor and that's kind of my highest priority I think for this morning the third thing as I want to follow up on my p5 load bites pull requests and number four oh boy I need to like come back tomorrow or something and Sunday and Monday so I got like an hour there's like any one of these things that really take me the whole time and the fourth thing is I want to talk about tensor flow wait hold on I've got a sound effect for this somewhere tensor flow dot yes so if something new came out last Friday called tensor flow j/s which is actually formally known as deep learned is which I have referred to and boy am i planning a lot of sessions and tutorials and stuff about using that and how it relates to this other project which is called ml5 I guess dot J s which is an open source library built on top of tensorflow J s this is kind of like a flawed analogy but just to make the case for a second you might say that like p5 is a kind of higher level API for html5 canvas sort of a lower level API for working and drawing in the browser p5 is more than that and the distance between these two things actually isn't even that far but that's the I guess that's the easiest way for me to explain what ml 5 is tensorflow being a JavaScript version of tensorflow with lowlevel functionality to do machine learning algorithms and mathematics and various tasks ml5 being a higher level layer API on top of that now the other thing is I should mention in between those two things is something called Kerris without going into a long history of what's tensorflow what's carousel that would probably be an interesting topic for a video tensorflow digest supports what's called the layers API which is Kerris itself is a higherlevel layer on top of enter flow and so ml5 is probably even higher level so a lot of the features that I'm hoping to work on in the next month or two and certainly well over the summer is building out examples and tutorials that build on top of Harris and tensor flow yes okay for machine learning stuff thank you good night that's all I have so this is my list and I have to decide what to do and I know if Simon is watching Simon's and say to a straw poll but the straw balls never go well for me I think what I'm going to I'm actually looking to see if there's any questions here in the chat I know you're 20 seconds behind of me oh and I guess I should put my secret cloaking device on top of this secondary laptop where I keep all of the answers and all my code because like that's my secret no I'm just kidding and that's pretty good this needs to be actually I need to fix one thing you do this oops wrong thing sorry I'm just fixing something in the live stream here moving myself down a tiny bit there we go that's usually how I have it and there we go ah Kenneth Lim is around for an hour if you want to do the pull request first I do but I think that's probably not wise but let's let's actually let me at least revisit why I did since since Kenneth has in the chat let me go quickly to github.com processing p5.js pull requests and load bytes here we go okay so I did just release a video this morning I mean this was made like weeks ago I just was kind of had like a mental block with releasing it which was this is this video adding a function to p5.js so I wanted to in that video show the process of making a pull request to a larger opensource project and what's involved with that and I did that this is the pull request there are some nice comments from me I am so me and from Lim zy Kenneth who's in the chat and so I think actually just scanning this over probably what I just want to do is implement this change to how I'm finding the error but so before this can be merged what is over here there's like some noise but that's fine before this can be merged I've got to push some more changes to the pull request but I think I'm not going to do that right now but I would welcome any feedback or comments here and I'll try to get to that soon all right so now the question is color predictor or let's do this let me do a straw poll because that I can't decide color predictor I really feel like I should do the color predictor because it's following up on the live stream from last week and it will doing it later will be stale I'm gonna do the color predictor yeah let's do the color predictor so let me get let's we have an hour and 15 minutes for that and that I think it's gonna have one thing though I'm a little bit freaked out about is the following let me show you what I'm freaked out about coding challenges we go to this playlist coding challenge 1 13 minutes starfield in processing many fewer gray hairs nicer shirt this shirt has now been gone into textile recycling because it had two holes in it but anyway that's according challenge 1 whenever that was recorded if I go all the way down to here keep scrolling I'm gonna scroll look at this quadtree 98 this means my color predictor the color particular Brielle's color predictor would be coding challenge 99 now I can get away with coding challenge 98.3 bidding quadri part 3 but then it's gonna be time for coding challenge number 100 I feel really stressed out about but I could just say it's just another it's just another coding challenge it's just number 100 but I feel this like pressure to do something extra special for that could be the neuro evolution thing because that's kind of like a topic I've been building up to for a while it could be Tetris but I don't not so game focus that that really makes sense anyway I'm open to your ideas that's what that's what I'm thinking about these days all right let's do the color predictor so let me get myself situated someone's gonna have to wake up gibreel who's early on the west coast that I know he's not a morning person that's me thing I learned I was like let me schedule you for this thing at NYU at 10 a.m. that's a problem for you right yeah we're gonna have a y2k issue because suddenly now the coding challenges have three numbers instead of two and we haven't our unit tests don't accommodate that CD desktop p5 G B color predictor I don't know if color predictor is actually the right term for this CD color predictor open let's see I don't care about so actually this is ridiculous what I'm doing here but I'm gonna do it anyway I'm gonna get rid of the libraries folder I'm gonna go to think here I'm gonna see if there's any changes to my neural network library I'm going to grab come on what okay I'm gonna go grab me a whoa I'm gonna go grab matrix J ass a neural network Jas and to put those in here let's put those in a little folder called Lib because I'm being silly and then now we need to get one of these days what are these days of switched to visual studio code and I term but I mean I'm way behind the times I'm waiting til there's like the thing that people are using that's not AI term then I can switch tighter that's how it works with me oh look and this is Jabril here's this code is the last thing that was open on this computer so maybe that's good to have that available so because I can reference it where is that where was that just probably just on the desktop also it's gonna be sad when by the time I get this set up to ready to start coding the e key doesn't I need a password with no e key that yeah that there we go thank you alright so now what am I doing here now I need the atom editor I want to open why your computer's never work huh someone tell me that why do they not work the way they're supposed to come on Adam there you are let's open the color predictor code which is nothing right now a blank sketch dot J yes file index.html let's I want to link to the p5 CDN because I feel like that's just gonna be better so let me do that here and I'll put that here and I don't need sound I probably do need dumb you know what I should also I should just use them minified because I'm not going to be messing with the p5 library itself so let me do this actually and let me link to those get rid of this extra stuff one of these days I will change my template instead of just redoing it every time neural network touch a smatrix dot yes all right I think we are just about ready to go Here I am let's run a little local web server I will check the chat in a second fail to load because why because I put those in a folder called Lib I think we're good yep let's make this let's think about the amount of space I want here make this a little bigger alright I think I am ready now to start coding there's some discussion in the chat going on about numbers now I just realized something which is that I'm going to use the whiteboard for this tutorial and I now have this whole thing here I guess what I'll do is scream somebody's just screencap this for me we'll save it for later I guess I'm gonna erase it I need so I'm gonna remember this list for another time I'm gonna remember that Suze I'm calling her by her name because I'm afraid to say noop cat no peek at no op cat incorrectly cat you know I view er me I am so me I used to call me I am son that's what I thought it was so this is a pattern I have misinterpreting and mispronouncing things okay we are just about ready to get started I am going to very briefly now I just need to pull up something now maybe I'll pull up let me pull up a Jabril youtube channel that can be my background here to start it's no ooh peek at no Oh peek at I don't know new but cat no anyway okay thanks for all the suggestions all right okay super simply writes I'm so bored I don't blame you it's only been what like an hour and I haven't done anything yet it's like 1153 already alright that was exciting there all right you're no longer bored right that's dispense of weather I will catch that or not here we go we are going to make a color predictor sip of the tea tea tea goes to dangerous spot and here we go okay there's like a thing oh it's actually just on my screen that's what that is by the way I keep thinking it's time for me to get rid of this snowy background but it just keeps snowing in New York let's go just got very hot here Oh sweating okay here we go okay hello and welcome to coding challenge number 99 oh boy you're getting close to 100 I don't know what I'm gonna do if you have any ideas for what coding challenge 100 should be please put them in the comments but this coding challenge is to make a colorful network color predictor and I am basing this coding challenge off of s okay Matt you just got to do it edit there and I'm gonna figure it out here I liked my beginning so I'm gonna keep it F how does he say it s science F science F science I can't say it anybody tell me he told me this before SEF science I should just say Jabril I'm just gonna say gibreel this coding challenge is based off of Jabril youtube channel and his color predictor machine learning demo so I encourage you to check out that video he also did a live stream actually have Seth stuff Seth stuff I think I just say SEF stuff that's what it is I'm gonna do the whole thing again here we go it won't be as natural when I redo the whole 99 thing but hello and welcome to coding challenge number 99 no IFL comes later never ever stick a hello and welcome to another coding challenge now this coding challenge is number 99 which means the next coding challenge is we're 100 and idea what I feel this pressure to do something special so please in the comments write your suggestions for coding challenge number 100 and maybe I'll think of something or you'll help me think of something okay so what's happening now I am going to do a coding challenge to make a neural network color predictor this is based off of project made by Jabril I would check out his YouTube channel this link in this video's description he has a video called color predictor machine learning demo that I'd encourage you to watch he also actually came on as a guest and I'll link to a video with Jabril where he talks through this color predictor but I'm gonna make my own version of it and I'm gonna use my toy neural network JavaScript library okay so first before I start coding I want to spend some time with you you were just taking deep breaths together thinking about flowers okay well I I guess I should talk through what the problem is so here's here's the problem so to speak now one of the reasons why I love this idea which came from Jabril is that I'm always looking for really simple almost trivial scenarios to demonstrate a machine learning concept where they all the pieces of how the algorithm works its visual it involves interaction and involves drawing because this to me is a good basis for people watching and learning to then build their own more complex or sophisticated design machine learning system things so this is incredibly simple and in fact just to be clear you do not need a neural network for this it almost makes no sense at all to use a neural network for this but it makes the point you might have heard this you might have heard this idea that a neural network is a universal function approximator so I think that this video and this topic in this demonstration will unpack what this means in a in a nice way what do I mean by that so what is the problem that we're trying to solve so the problem is let's say I have a color some RGB color some RGB color and I want to put text on top of that color so I could make a more complex problem which I would encourage do as an exercise after watching this what would be the most pleasantly looking or complimentary that detector that's actual thing color to overlay on that RGB color but I'm just gonna ask a simple question which looks better black or white and we could get an old discussion of why you know perception and what looks better but I just mean just in the sort of arbitrary sense like which is easier to read which is more legible and we could write a function right we could write a function a JavaScript function I'm just checking to see right and that JavaScript function takes as its arguments on our a G and a B and what it does is it returns maybe it returns I mean black or maybe somewhere else in the function it returns white and maybe we just have like this if statement and maybe I'm doing something like if R + G + B is less than 100 or less than 200 returned black otherwise return white so this is the idea this is a function it takes inputs how many inputs 3 and it returns an output how many outputs 1 but out of 2 possibilities is important here there are 2 possible out out 2 possibilities it takes one output it to function it takes 3 inputs and returns one output the inputs are numbers between 0 and 255 and the output is one label which is a string but another way I could think about this as it could return a kind of probability value how likely is it that black looks better and how likely is it that white looks better and that would be that would be kind of also so floatingpoint numbers we could think of it that way so this is a function so a lot of machine like imagine this so now I have this function takes the RGB color now let me tell you let me let me give you another function write a function that takes a image data of 200 by 200 pixel image and then return what's in that image now you could imagine in this case deciding whether it should be black or white is just a matter of okay should I is it bright as a dark which close gonna be like a bright color looks better on a dark color a dark color looks better on a bright color but if I took in a full image I needed to return whether it's a cat a dog a turtle a coffee mug cell phone a walking stick a conductors baton I don't know where my brain is going here i toy tricking right try writing a bunch of if statements to do that well if the pixel colors are this and shaped like this right having to hard code and algorithm a function that takes inputs and generates an output would be really difficult this is what a neural network is for and just to make this case here the idea here is that a neural network can approximate any function it can learn to receive inputs and return the outputs for any input data for any sort of problem in field is this true that at Google any in capital letters the big underline is true that's an open question what are the limitations what should and should not we be doing should we even be using a neural network for this task are we causing harm by doing this machine learning tasks but those those questions aside now we can say well if I have this quoteunquote neural network thing what if I were to just send three inputs into it our G B and then I want to receive two outputs probability of black probability of white this is now a universal function a approximator it is going to stand in so what is neural net machine learning doesn't necessarily replace you can think of it as I mean it will machine learning replace the need to write code completely at some point maybe but here what I would make the case is that machine learning a neural network might replace the guts of a function that you might hard code otherwise okay boy am i spending a long time explaining this so now how what goes here what goes here now if you want to learn more about the structure of a neural network and the internals of it I would refer you to the three blue one brown video series as well as my video series the I would refer you to the three blue one brown video series as well as my video series which goes through building this neural network library in JavaScript for us as the user of the neural network library the only things we need to decide are how many how many inputs and how many outputs and then so this is inputs and outputs are the things we as the end user of the neural network look at and control we're sending in the input we're reading the output we're doing something with the output we're sending you the input we're reading the output we're doing something with the output but those sort of quoteunquote magic which isn't magic it's just math numbers multiplied and added together all sorts of other stuff is this idea of a hidden layer and there could be multiple hidden layer there can be hidden layers of different nodes but for the sake of argument this is such an incredibly simple problem who knows if we even need the hidden layer for it we probably do but we can just kind of come pick something somewhat arbitrarily so I'm gonna say there are three inputs there are two outputs and what I'm going to do is just say this is what Jabril use so why not use the same I'm gonna add three hidden nodes and the idea of a neural network is the inputs all go into each hidden node they get processed by the hidden node they an each in node connects to every output whoops I do that and then they get processed by the outputs and we get the results that's known as feedforward what is that processing it has to do with the weights of the connections the summing of the values the activation of the neural net work I think at this point it probably makes more sense for me to refer you to my other tutorials that go through the mechanics of this I just want to now use it and in the sort of higher level way as a library where I'm gonna send in my inputs and look at the outputs and of course I'm gonna have to train it I'm gonna have to teach their neural network to give me certain outputs that I want so that's what I'm gonna get into when I go and write the code right now okay boy how was that like half an hour but I kind of wanted to make that explanation because I feel like people say Universal function approximator I hear that all the time and I don't and I wanted to make some sort of connection of what that actually means was that helpful give me a little feedback here before I move on should this now be part two I don't think so I think this can all still be in one video and by the way I really should be adding softmax it's about neural network library but I don't have time to do that oh yes yes yes yes yes the normalization so that will come up that will cut have mentioned that here thank you for pointing that out but I'll just have to get to that when I start doing the coding that will come up all right what time are we at 1206 that's a lot of time let me do a little camera cycling maybe if I had time in between during lunch today bye time to try to install that firmware to fix the camera finally oh that was only eight minutes at the white board oh that's not bad at all that's fine okay great oh yeah Tim I apologize so let me just touch on this for a second because this is a really good question I have to really apologize I I did not expect I mean maybe I should have I I sometimes don't realize that the audience for this channel it's kind of you know large and when I release something people really are excited to contribute and there are currently 32 outstanding pull requests here on this neural network library I just honestly like haven't really had the time to go through them and see and I also want to like add some stuff to it first I really appreciate all of these contributions and I got to figure out a way to manage that I just don't have the truth that matters I just don't really have one right now Cody challenge 100 should be fixing the camera that's good get a bell for that alright okay so let me alright alright there's a lot of messages retracted I don't know what that means okay okay so first let's take a look at gibreel code he might have a newer version by now but this is what he demonstrated last week on the coding train so I could say like oh I think white looks better on this color by the way I'm like the have no ability for what our talent for visual design whatsoever time to get on the truck I don't know black looks better black looks better white looks better so you can see this is me active this is a this dot represents the computer guessing which ones it thinks it should be and me clicking has to do with me giving this or like training information like hey girl network it should be this one so I'm gonna go through a bill all the pieces of this there's some other stuff going on in here where Jabril is using a genetic algorithm and there's like this sort of voting thing going on but let's let go let's just start building some code from scratch and we can kind of compare and contrast or you can compare test on your own later okay so this is my color predictor I'm going to go to an empty sketch the first thing that I want to do is I'm just going to create variables for r g and b and when the pro i'm gonna write up maybe i'll write a function pick color and I'm just gonna say R equals random 255 g/b and I am going to then draw the background RG B and I'm gonna say mousepressed pick color so let me make a few key points here me in creating this example in writing this code I'm not thinking about interaction design I'm not thinking about visual design I'm not thinking about optimized efficient code I just want to sort of demonstrate the idea and get something up and working quickly you the viewer can then take this and make a more interesting thoughtful designed version of it even perhaps with a different algorithm or a different problem altogether but let's just see now this should be enough code for me to every time I click the mouse get a new random color okay so I might as well also pick that color in setup now I also want to draw let me say text size 64 then I want to safe I mean to know stroke I think if text can have an outline in a fill I'm gonna do fill 0 text black and let me do textaligncenter also so black and that should be what is my let me make the dimensions of this a little simpler 400 by 300 so this would be 150 then I guess 150 150 I don't know and 250 150 and this would say white so let's see how this goes alright so that's a little bit too big but I could also just make it wider 600 and then this would be 200 and 400 right there we go okay this one should be fill 255 okay so now I have a system where at least I am seeing which one it should be black or white I'm not seeing both colors written on in the background let's draw a line down the middle I think they me visually it needs that i don't think i centered these correctly but whatever okay okay we're getting somewhere center Center someone in the chat is telling me to use center center why not so that aligned it Center vertically two beautiful thank you well that was an excellent suggestion okay so now what I want to do is I guess what we're ready so this is what I love about this problem we're ready for the neural network because we could do it so what do i what do I need I want to make a I'm gonna call it brain I'm gonna make a variable called brain it's gonna be the neural network now I just don't get a neural network in JavaScript just by the nature of programming JavaScript I'm getting it because I have imported already into my HTML file two files and nsj and matrix touches this is a little toy neural network library that I developed in a whole set of video tutorials at some point in the future I'm gonna replace this with this new project called tensorflow j/s which is a lowerlevel machine learning library and almost also ml5 this other library but I'll come back to that another time I'm still using this little toy neural network so what I want to do now in the code is I just want to say brain in setup I want to say brain equals a new neural network now it expects three arguments three arguments now this is not universal to how neural network libraries work this is a very simple one that is very basic features and what it expects is how many inputs how many outputs and how many hidden nodes but not in that order inputs hidden outputs so this we can see is 3 3 2 that's the architecture the model architecture that I have designed three three two wonderful now I've got them done I got it no I keep going now what I could do is let's say every time so let's make let's let's let's make a variable called which like which one is better black or white and I will just start with saying black and what I'm gonna do is let's do the same sort of technique that gibreel did if which equals black then then I'm gonna draw a circle a circle which is where at two hundred two hundred three hundred sixty sixty and I there and then else if it's white then draw it at four hundred and so this would be fill zero this would be fill two fifty five and we're still no stroke okay so now we can see that's very far down so let me move this up to two hundred that's no sense of dimensions whatsoever perfect oh this looks weird now it's not all centered but fine oh my god I can't I can't take it I can't take it let's let's move this I really shouldn't be doing this what I'm going to let's make this one hundred one hundred and let's make this two hundred two hundred oh okay I feel better now okay so it's always going to it's always going to pick black right now because no matter what I've just made which equal to black but I can use the neural network now I could use the neural network the neural network is my function approximator let's actually let's let's actually write this code with our own non neural network first just to make this case I'm gonna write a color predictor and I'm gonna say again an RGB and now if I'm gonna just say if R plus G Plus B is greater than 300 then return black else return white so I'm gonna do a hard coded this is my own human learning algorithm I've decided that this is what it means to predict which color would be better and then I'm going to say let which equal color Victor RGB so now we can see it's making that prediction based on my algorithm I wrote an algorithm to make that prediction now so we've got this we could be done no machine learning necessary I finished this project now what I want to do though is I want to chim to comment this out and I'm going to say what am I going to say I'm going to say first I need to make some inputs so the neural network library expects as inputs right my library expects and this is pretty typical of any kind of machine learning based library that you might use it expects the inputs to come in as an array of three numbers and typically you're going to want to have those numbers normalized between 0 and 1 so this is what I need to send into the neural network so inputs equals an array and so how do i normalize these values I can just divide them all by 255 and again more likely this is going there's going to be a much longer process of sort of cleaning and normalizing your data but in this case of a single color super easy to do now what I'm going to do is I'm going to ask for the output from the neural network let outputs equal and I'm going to say brain dot and the function write the function to do the feedforward algorithm to send the data through and get the result back in my library it's called predict because I'm making a prediction another term for this might be inference guess that type of thing so I'm gonna say brain dot predict and I'm gonna pass in the inputs now let me just let me just console.log those outputs just so we can see and this is gonna sort of break but let's just see what the outputs look like whoa hold on why is this do okis draws right so one thing I just realized is I'm kind of I'm doing all this in the draw loop which is sort of silly so let me actually just say no loop and then in pick color in pick color which is where where is the pick color right here I'm gonna say redraw so I only want to like redraw the canvas up there I don't have anything animating so I don't need the draw loop to be going over and over again so cannot read property predict of undefined sketched out yes oh you know what oh why do I have that bug I created the neural network after I called pick color the neural network needs to exist before I call pick color okay that's good to know great so we can see look at this and why do I have this happen twice 29 why is it happening twice you know I guess it's going through the draw loop once so maybe yeah interestingly okay I'm not gonna worry about I'm not gonna get I'll fiddle with that later the point is oops every time I click we can see these this is the output of the neural network it's an array with two floatingpoint numbers and those I'm considering to be like the probability right if this number is higher it should be a white maybe black is the correct color if this number is higher the other one what's my hand disappeared the white color should be the one of it now I have to I haven't implemented some things there's a particular algorithm which I really should put into my neural network library I called softmax I have to make a video tutorial about that in the future which would ensure that these two numbers these add up to a total of one and really represent a probability but my neural network is very simple I can just look at which of these output numbers is bigger so I can say then right here I can say now if outputs index 0 is greater than outputs index 1 will make that mean return black otherwise return white so now I have my color predictor function no longer uses a hard coded algorithm it uses the results of sending the input data through a neural network so let's go ahead and run this and I can click that you can see it's kind of always picking white by refresh still always picking white by refresh it's kind of always picking black so what's going on here how come this isn't working why is this not learned properly which color should go on top of the other color guess what the the entire mechanic into all of the settings all the parameters all of the weights of all these connections of the neural network were initialized completely randomly a new network isn't just going to learn as if by magic it needs to be taught and there are lots of different strategies for training and working with the neural network one of those strategies is something called supervised learning and you probably can't supervised learning which I have covered in other videos in particular my doodle classification coding challenge so you might look at that as an example but what's going on here so in a sort of normal date mortar of data science driven machine learning context we might prepare a giant training set like I'm going to make a big spreadsheet of every RGB color I can think of and which one looks better black or white that's my training data set to pass through and train this neural network with then I'm going to have a testing data set and that testing data set I'm not it's not part of the training data set because I don't I don't want that neural network to know about it but it also has a bunch of label data colors with black or white labels then I'm going to pass that through and see how well the neural network does guessing against those and if it starts to do well then I could say my model is complete it has been trained I can save it and I could deploy it in some application which has to pick black or white on the fly but I'm not gonna do any of that in this video I'm gonna live in sort of a looseygoosey interactive world where I'm just gonna let it guess randomly and I'm going to click in order to correct it so I'm gonna I'm going to train the neural network one data point at a time with no training data no testing data just random data as I go so you might think about how would you restructure this to in a more sort of traditional training testing deployment context so what do I mean by that what I want to do is I'm going to create two button I am going to let's just do this here let's say Korea let's do let w button I'm going to have a W button and a B button white button black button and we say W button equals create button white and B button equals create button black and let's take a look here now let's see if I can make this let me I know I don't want to get lost in time manipulation but really really briefly style no no I'm not gonna get lost in Dom manipulation I'm just gonna leave it okay I'm gonna leave oh you can't see that I'm gonna move this over I'm gonna make everything a little smaller no no no no stop stop the coding train does not spend hours and hours and hours during tutorials trying to style and layout is simple examples where it really doesn't matter say this to yourself over and over again okay I'm just gonna keep going doesn't matter doesn't matter if it's a little bit off you can't see it perfectly you get the idea these are my buttons over here white black the idea is that look at this each time I press it goes on to the next color which is kind of interesting I actually fine with that so what I want to do now and I probably would be a nicer interaction if I just sort of like clicked in the in the window there but what I want to do who is that wait some events I'm gonna say mousepressed oh this is so silly but it's fine it's fine it's fine you go pause just give me a timeout for a second I'm gonna need you to edit point got take a deep breath yeah on click figure out which side of the canvas is clicked that seems much better yeah I think I'm gonna back up here let's back up let's forget about the buttons buttons were like an attempt in my mind to make this simpler but there's really no point to them let's draw that line down the middle okay what time is it I got 35 minutes let's keep going all right okay so I want to click what I'm gonna do here is as the trainer I'm gonna click on the side of the canvas that I think looks better like I think white looks better so I'm going to click over here just to make this a little bit easier to follow I'm also going in to draw I'm going to draw a stroke wait for stroke 255 0 I guess I'm going to align with / 2 0 with width / 2 height there we go so I'm gonna draw this so I can click wise these are totally not centered at all I'm like a lunatic either they're not in the right place I I'm sorry I have to correct that it's making me crazy it is how wide is the window it's 600 wide 300 is the middle Oh silly me 15350 thank you very much No 450 450 thank you very much okay 152 please bear with me 450 okay now we're doing well here okay so now the idea here is every time I click over here I want to teach the neural network which one I think it should be so how do I do that so I told you there was a function called predict and the function called predict would send in the input data and give me an output prediction now what I want to do is I want to use a different function called train so each time I click the mouse where is that mouse press before I pick the new color I want to determine is the mouse on the right side or the left side so if met so so I want to create some inputs which is an array and we just let put inputs and if Mouse X is greater than with divided by two then the correct the correct actually so I'm sorry I want to create some targets this is known as targets I mean there's gonna use different terms for all these things but targets are the target outputs I want so if I click on the right side I want the target outputs for white and white means the second number is greater than the first number so the targets if I click on the right should be 0 1 these is the correct this is the correct output if that I that I'm telling the neural network should be if I'm clicking on the right side else the targets and I know I could use one of those ternary blah blah blah things but this is just gonna have to do the targets are if if they're on the Left should be 1 comma 0 let's pick up the pace here people by people I need me not you you're doing you're doing great if you're actually still watching this and now what I'm going to do is I'm going to say brain dot train up I need those inputs so the inputs are the same exact thing I did here the inputs are the current RGB and what I want to do is I want to say hey train brain train yourself with these inputs with these targets and in fact this now is going the neural network is going to what's it going to do I'm saying here are the inputs here are the correct outputs that go with those inputs do whatever adjustments you need to do whether you were right or wrong just figure it out and what is that figuring out so interestingly enough I think this is worth even though this is covered in much more detail in my other videos let's say I let's say the neural network I feed in some inputs and what it actually gives me is like 0.8 0.2 right this is what it gives me the outputs but ice cave it I'm training it I'm gonna give it targets and the correct targets are zero one that's what the odds the output that I wanted to get that's the correct output so what the neural network does is actually calculate something called an error and the error is really simple it's simply the desired the desired minus the guests or the targets minus the prediction or the targets minus the outputs so the error would actually be negative zero point eight one minus and point zero point eight interestingly enough very symmetrical there so this would be the error and then what happens inside that train function an algorithm called back propagation happens the back propagation takes this error and sends it backwards so when I do prediction I'm sending the data forward through the neural network the training process is about looking at the outputs calculating an error and sending the error backwards through the network and all these little changes all these weights that are adding up numbers and doing those math they all get adjusted so the errors would adjust all the parameters and that's what's happening again you could dive into my other tutorials which go through this in more detail but that's what's happening right here in this function so we are ready to go right all right so I'm gonna what I'm gonna do maybe will do I'm gonna train this for a while you'll watch if you're watching the edited version this it'll speed through fast if you're watching this live here we go what white white black black uh wait anybody see these numbers are they really adjusting this isn't really working very well is it but don't worry wait wait wait just talk amongst yourselves I probably need to have like a the interesting thing is like this is why you need a lot of data for this stuff to work do anything I could make the learning rate much higher that's probably what I should do but you can see here let me just keep going hold on let me at least just tell everything to be white yeah okay so it is sort of learning whoa and I probably using like softmax and it's going to have much more okay so let me keep going do I have an error somewhere good news is I have a half an hour left all right so one thing I want to try to do let's see if I can train it okay I have an idea I mean it is working the problem is like for this to actually so first of all maybe I need more than three hidden nodes I don't think so it's such a simple problem and it I think it probably just needs a lot of training data so so let's actually let's train it let's train it with a lot of training data so I'm gonna I'm gonna go through and do that so I'm gonna ask okay so much.you this can be the end of that sped up thing so and I'll come back alright I'm back actually you know so guess what this didn't work very well I mean I think it is working working with air quotes because if I start teaching it like hey I think black looks better over everything it's eventually gonna switch and then if I just click on white for a while it's gonna switch oh and it's kind of you can see sort of switching back and forth but I think I'd have to sit here and click like for a really really really really really really long time to get it just really like learn to make an optimal decision I need like a lot of training data this is a thing what the discussion is going on in the chat you're really messing with me I just I guess I just shouldn't look at it when it's like you're out there not not about what I'm talking about so I'm oh jeez what if what have I done what have I done wrong alright let me let me uh I don't know you can use all this as like some more fast forwarding time I'm going to start over okay okay I'm back so I tried training this for a while I tried talking about it for a little bit I didn't really get very far even though I think you could see like I I'm gonna like I'm picking and it's kind of actually whoops no I should really move it's giving me sort of different results that's black this one is black that's correct that one is white that's correct look at this yeah hey I think we're good we could see that it's not kind of making some decisions we think this one it should be white let's correct it that seems right this is definitely right that seems right this seems right this seems right right right black is better with this one white is better I don't know why anyway you can see it's kind of gay I don't know that I really give it enough training data to really work optimally and maybe I could be an interesting project if this were like deployed in a distributed way on the web and thousands of people could all come and click on it and like through and train it together as a group of people in the world but let's try training it automatically to see if that works a little bit better so how are we going to do that so let me go back to the code remember this nice little bit of code I had here why not let's train it to actually learn a certain threshold so I'm going to I'm going to write a function here called train color and it gets an r g and b and it's going to return black or white and what i'm going to do now is in setup this is a little bit silly before I do anything I'm just going to say for let I equals 0 I is less than 1000 i plus plus and i'm going to pick a i'm going to pick a different set of random colors that are different from the global random colors then i'm going to i'm going to say the correct answer or the answer oh shoot I'm gonna say the answer is where's a train color train color with RGB and you know what I'm gonna do I'm gonna send you this targets let's let's skip a step here and this I can't remember which is which whoops let's just return the targets is this right somebody in the chat tell me if I've got these back routes or not let's just return the targets I'm kind of skipping some steps here I'm not now I'm not being as thoughtful about how I'm organizing this but I want to get those targets then I want to say the inputs are are divided by 255 g g / 255 b / 255 and this should say inputs and then i'm going to say brain train inputs with these targets so this is me just running through and kind of quickly using a thousand colors to train it and i'm being told that this is probably backwards there's no way I could have possibly guessed that correctly okay so let's and actually I'm gonna even I'm just gonna let's let it run 10,000 times so I'm gonna run 10,000 colors through the network right and set up I was like training data basically okay so now let's just and actually in a way what I'm gonna do now just to see I'm not even gonna click I'm going to not bother to train it anymore I'm just gonna be I'm just gonna pick let me comment out my own interactive training and let me just pick new colors okay so so every time I click yeah you can see it's making guesses are they good guesses I don't know but they I bet you those guesses are pretty accurately aligned with that threshold of 300 so I could continue to train it a little bit but I feel pretty happy now with this color predictor okay what's what's going on I finished this coding challenge I'm gonna release this code what can you do with it so a couple things one is could you make this same exact project but instead of having it just pick whether black or white goes on top could you pick a RGB color that looks nice maybe it's a maybe you could have a neural network solve the formula for complementary colors could you think of a more thoughtful way to design this could you use some other data entirely could you train based on like fun which font to pick could you train a system to make design decisions based on you some set of training data or some user interaction something like that so I hope you make your own neural network design predictor thingy and share it with me you can go to the kodi train comm website there's some instructions there for how to contribute your version of a project like this you can write in the comments you can tweet me at Schiffman I guess I'm supposed to say you should subscribe to the channel blah blah blah thank you for tuning in and there is the color predictor wait hold on stop timeout I'm getting a good suggestion in the chat well it might be nice to see like what the number is so hold on let's this is a good idea let's do this hold on hold on timeout everybody where do I have I have some console.log going on here let me get rid of this console.log and let me in here let's console log R + G + B so let's see if this value is bigger and I'm just going to floor it so it looks I don't need to see the decimal let's see if this let's see if it really learned the threshold of 300 right 319 that should be white so it didn't get that right looks 376 ah 442 289 oh wait no no it did get it right I'm done I've got it backwards if it's if it's higher than 300 it should be over black if it's lower than 300 it should be over white and we can see here right 289 white 431 black 550 13 black 561 black 520 seven right this is working and just to prove this point let me run it again with a different threshold where do I add that in the training let me give it a silly threshold of 100 that's much too low for it to be visually correct probably whatever that means but we can see now it's going to only go to white if it's below 100 oh it didn't actually 97 it didn't even get there now the quite I'm gonna have to do this for quite a while to get lucky enough to pick something lower than 100 what I really doesn't want it how long do I have to can I have like a 1 out of I guess 7 or 8 chance my goodness I'll speed this up again will speed this up keep going edit this out come on give me something oh no no no no no no no and I'm very unlikely to get a number lower than 100 because I'm picking three random numbers between 0 and 255 so I actually have I'd have to pick three random numbers basically lower than 33 and which has a pretty low probability of doing that in a row so let's do the opposite thing let's say let's do this only if it's greater than 500 296 white so if I ever get it greater than 500 black write 393 is white so it is learning that threshold whatever I kind of whatever I earn I picked 300 and probably what would make sense for me to pick is just you know 256 or 2055 times 3 / yeah or 55 times 3 / I really should stop this video of two or three minutes ago when I had the chance so we can see now here's my color predictor it's trying to predict which text looks better over the colorbond season now we're finally done oh please PLEASE creative wonderful people of the internet make a more interesting better version of this and I will see you in a future coding challenge good bye thank you again gibreel for this particular idea subscribe to his channel link in this video's description yes hardcode the colors I could have hardcoded the colors yes yes Oh Tim makes a great suggestion you should use softmax and set the circles exposition based on the output to visualize the confidence if it's more confident and put the circle more to the left and vice versa that is such a good idea some people ease scope to that as their own project all right I think I finished for today's 1243 oh oh boy do I want to try to do that quadtree thing this is probably gonna be like a 45 minute to an hour coding challenge I would guess but hopefully there's a lot that can be edited out when it gets to that point I was getting some like messages let me see if there's anything super important here okay yeah okay everything seems good I'm just checking my email I'm not checking my email not checking my email I got a super chat thank you for alerting me let me look in my dashboard here that might be an easier way so I can thank the super chat Oh uncreated name thank you for your super chat message and your donation it is much appreciated thank you if you want to support the work that I'm doing you can subscribe also to the patreon and join our little slack community which is a fun place to discuss and ask questions and that sort of thing I should work on the p5 pull request I could do that I kind of feel like I could do the Quadra I mean I don't have mmm 45 let me take a look at the quadtree thing for a second let's let's just just hol hold your horses let's be ambitious here for a second I really should get myself more time to do other things I need to do today is this this is just the example so hold on quadtree let me grab this repo real quick oh oh right quadtree why I think I should do this I don't know I just kind of wanted that to be done do I still need to fix the quadtree bug what was the quadtree bug I mean I was just gonna go and use the the quadtree code that's already in the new quadtree repo which probably has that bug fixed but I should oh it's the return the I'm not returning the right array yeah hundred people left that's fine but people should do this oh but I that's not a real place oh that's not it's gonna say that's not a real bug it is a real bug but it's not a bug that I feel that I need to fix it is so let me go to this I mean now I'm sort of Oh number 98 where did all the issues go oh that's on coding terrain website so let's discuss this for a second yeah so this I don't this is this is a great whoa so this is a really great point and maybe I should open the video with this but and let me let me try to explain this so the quadtree that I made does not continuously pass and I apologize if you're tuning in this livestream you didn't watch the quadtree live stream or the quadtree videos you probably have no idea what I'm talking about so I apologize for that but I suggest you go back and watch those if you're interested but the quadtree is a data structure that stores points in in my case in twodimensional space into the leaves of this tree it's constantly subdividing sections of the canvas intercept into fours and then if there's too many points there it's subdivides again into fours if there's too many points there it's subdivide beginning for us and it has a capacity variable like 4 I actually use mean that's a coincident could've made it 5 could have made it 3 quadtree is dividing into 4 but I also have to use that capacity for each leaf as having 4 so this looks like this should be a mistake right how this is a leaf how could there possibly be more than 4 even if we kind of are generous and say that these are in these are just drawn in a weird way and they're actually in the other ones there's still 1 2 3 4 5 6 and the reason that this is the case is that a bunch of these are likely actually in this node this larger space because when I subdivide a node into 4 I don't take the points that are in that parent node and pass them down I could do that and there's a case to be made for that being you know more correct or more efficient but in terms of like writing the code in a simple way it's much easier to just not bother with that and I get enough of a speed improvement without doing that that I don't need to I didn't bother I'm not doing this to try to make this perfect visualization I'm just trying to do this to make looking at the I'm just doing this to really the chat the same time which I should never do I'm done I'm doing this to you why am I doing this I'm doing this to try to make a collision detection example faster and I can show you that even with this quoteunquote bug if I go to my tree repo and I go here I've actually made this example already just to test if it would even work I'm gonna go to demo so this is now a p5 sketch which has 1000 dots in it and every dot is checking if it's intersecting another dot and if it is it lights up and it's using the quad tree data structure right now let me just uncheck this check mark and you can see right now without the quad tree data structure I'm getting a frame rate of 5 with the quad tree data structure I'm getting it let's just let's just move down and see if we can oh I think it might be you can see like even with like 2500 I'm getting a pretty decent frame rate if I take off the quad tree you know forget it the frame rate is basically like 1 frame per second even at best so so I feel that my code does the job does it do it the best way the most optimally way it was optimally optimal way I'm not entirely sure okay so hopefully that explained it oh there are flocking examples in the poll requests what's empiricist Academy what is your idea I missed it I'm really not following the chat I should say like look over here every once awhile so the question now is with my ten minutes can I create this demonstration and I think that I can I did have some other real bugs and I'm sorry I don't mean to say that I I don't I don't if I'm not thoughtfully I I I'm worried that I'm not being sort of kind in my reply to this bug report cuz that is an excellent github issue to post and merits a lot of discussion and I don't even know if I'm am right about this so that is an appropriate bug report whether I but in my point of view I'm wondering if that's a bug or sort of more of a question of how I want to design the algorithm and in fact if you go to the quadtree Wikipedia page and you look at the pseudocode for the quadtree down here you will find that the insert function not redistribute the points so this example Wikipedia version pseudocode version of the quadtree algorithm does not redistribute points at the subdivision points so that's kind of that's kind of my point of view about that all right so let's see this is bad idea a terrible idea terrible idea but we're gonna do it anyway so what I'm gonna do is I'm gonna go into examples I'm gonna rebuild this intersection quadtree no copy of it I'm going to just delete that this is so I just literally copied a folder deleted it and then repainted but I wanted to save a backup of it but there's really no point in me doing that so silly what I just did I remember what I was gonna then what I was doing is I don't have time to do this I meant to do this take this put this on the desktop then go grab this quadtree j/s put that in here then go and open this on the desktop go into sketch and go into index.html and do that then I'm going to terminal know and then I'm going to say oh then I'm in a server that's there but what I'm gonna do now I think what I'll do is I'm gonna leave this particle code I'm gonna leave this simple particle code I'm gonna take this out I'm gonna take the highlight thing I don't add that and leave that and then I'm gonna get rid of everything here well there's a lot of code I'm gonna have to write apparently Oh cuz I know I don't need to show the quadtree stuff okay that's great okay okay so I think I'm ready for this this could be I think six minutes left and I gave myself till one o'clock I'm gonna get myself till 115 and if this is not done at 115 I really can't do this now I'm gonna I'm gonna try against my better judgment I'm gonna try what I'm gonna do here okay okay hello and welcome to part 3 of my quadtree coding challenge and in this coding challenge what I want to do is I want to see can this work will this work I have this very very very slow sketch that has 1000 particles each particle is checking every other particle where it is in the window and if it is overlapping or intersecting one of them it's highlighting itself white and if it's not it's keeping its color to gray and you'll notice this is running at about 5 frames per second can I use a quadtree to reduce the number of cycles computational cycles I need to do to check every particles location against every other particles location and get this running at 30 frames per second let's let's go ok so I'm actually gonna refresh this and when there's nothing there now because I actually do I had all that code I deleted it I'm gonna write it now so what I do have already is a particle class so I have a very simple particle it just has an X a Y and a size and it's drawn as a circle so let's do this let's say I'm thinking about this I'm thinking about this let's make an array of particles and I'm gonna say 4 let I equals 0 eyes less than 1 let's just start with 100 because I don't want to deal with it running slow until it's time to really implement the quadtree and I'm gonna say particles index I is a new particle and I'm gonna give the particle a random location on the window then I'm gonna say 4 let P of particles and I think it's like P dot update probably and P dot I don't know what it is let's look move and render alright who knows what I called these things move and render and I must say background 0 ok so now we can see there we go no problem look at all my beautiful particles I'm moving around and so we can see by the way just even with like a thousand of them drawing a thousand particles is no problem p5 canvas I could draw a thousand circles any old day of the week 30 frames per second whatever nice frame rates but now what if I were to say four and I think I could say let I'm gonna do this again this is I'm gonna separate this out into a separate loop let P of particles for let other of of particles and I want to now check if P intersects other then I want to highlight this particle P dot highlight so this is the idea right I want to check I want to do a nested loop for and also I should I got to make sure as long as P is not equal to other so as long piece shouldn't check itself again there are plenty of ways to optimize this nested loop like I don't if P is checking other I don't need other to check P but that's not the point here I'm going to let this be as inefficient as possible is right now do I have an intersect function do I have a highlight function I don't think so it would have been nice if I kept those so let's write an intersex function intersects other so what do I need to do I need to know the distance between this X this dot Y and other dot X other dot Y and then I'm going to return distance is less than so they're intersecting if the distance is less than this dot R plus other dot R right so this is going to tell me then I'm gonna just do I'm gonna make a variable called highlight and set that equal to false I'm going to in render if highlight fill white otherwise fill just this sort of grayish color and it should be this dot highlight and then reset highlight and I'm gonna say this highlight equals and then value so I'm gonna write a function that's like set highlight that's going to turn highlighting on or off I could do a better job of this but this will work right because basically what I want to do is first I want to just set the highlight false for all the particles right they're all not highlighted then what I'm doing the if it actually is intersecting I can set the highlight to true so now let's go back to just 100 particles and we can see perfect when there okay now the distance oh you know what I'm not drawing them I'm drawing them with the radius as the diameter so they're actually half the size so I should fix that in my render function I'm not being consistent this should really be radius times two if I'm using R as a radius for the math so now we can see right when they are overlapping they're highlighted white when they're not overlapping they're not okay so this is working fine I can actually let me look here in the oh there's like oh I got a deal with that for a second hold on I have a little extra bit of code in there by accident I can look at the framerate no problem 27 frames per second let me just ignore what I'm doing for a second in my quadtree code I was adding some unit tests and stuff and I'm gonna just get rid of that okay so we can see here look at the frame rate 26 frames per second now let's see that if I go back to my sketch and I add a thousand particles let's look at the frame rate now five frames per second also now that I have so many I'd probably want it to be them not to be as big because so let's actually make them half the size and now frame rate is still 5 frames per second okay we're here for the quadtree right let's add the quadtree so the thing is what do I need to do right here this is what I need to replace I'm saying I'm still want to go through every particle but now instead of looking at every every every every particle I want to just query I'm gonna say let others equal oh wait I have to create a quadtree so I'm going to first I need a quadtree variable quadtree then I'm gonna say quadtree is a new quadtree I have I did that color coded John so long ago I forgotten what I need I think I need a boundary so I'm gonna say boundary is a new rectangle like my quadtree example has some geometry classes like a rectangle and the rectangle I'm going to make it 300 comma 200 that's the center and it's 600 comma 400 so I probably should use width / 2 height divided by 2 with light but it's fine I'm just gonna leave that so I'm gonna make a new quadtree with that boundary then what I'm going to do and I think this got added after so what are the things that actually this is a bit I can't leave I'm not even at I forgot about this but these things are moving so if I build the quadtree with all of those particles as soon as they move how like I'm missing so many pieces here there's more to this video than I thought all right hold on here we go this is gonna be good I knew I knew there was something going on here okay so what do I what does what does this quadtree expect the quadtree if I look at it it expects me to insert a point a point is a particular object with an x and a y oh look I already added this oh so this is so if you follow the last tutorial this won't be there let's take this out so here's the idea let's watch watch and learn okay here we go this is where I left off in the last tutorial I forgot about this now I'm gonna go back to my code save this and I'm gonna say okay what I want to do is I want to build this quadtree so what I'm gonna do is I'm gonna say quad tree I'm gonna say let a point be a new point at particles index I dot X and particles in X I dot Y and I'm going to say quadtree dot insert that point right this is where I last left off I'm creating a point object and putting the point object in the quadtree the quadtrees going to organize itself to keep points together that need to be together but here's the thing I've now made this new point object I want to put the particle in the quadtree so really I want my quad tree to store the particles and then the particles are moving some kind of like update their location in the qua tree how am I gonna deal with this well there are a variety of solutions to this number one I wrote the quad tree code so I could just rewrite it to work with my particle object and set the point object but something I could do to make it more generic is I could add this is a this box2d works this way and some physics libraries do I could add a property to the point object called user data and what that means is when I create a point object the core McDade ahthe at i need for the quadtree is its XY location but I could also say attach yourself to this other object so that when I find this XY location I can know that it's attached to this particular particle so in other words what I can do now is I can say make a new point with this particles X&Y referencing also this particle again there's some redundancy here but this will work well enough it's also very generic so if somebody else is using this quad tree as a library they could kind of use it with whatever classes they've they've they've created so but here's the thing this created that quad tree but as soon as I call all the points move they're going to be in a different location they're not where they originally were so actually I don't want to do this here what I want to do is do this here in draw and I this the nice thing about this is I have the particle and a variable called P so I want to create a new point whoops what is going on here give me back my coche okay I want to do a new I want to create a new point add an x and y with a P and I want to insert it into the quadri but draws looping over and over again so when I insert the first time the next time I don't want to reinsert it I just want to update this location well the truth of the matter is while that would be a nice way of doing it updating the locations and probably most efficient it actually is a little bit simpler if I just remake the quadtree every frame the quad tree is the thing that I'm just going to recreate every frame for the purpose of optimizing the collision detection so again I could be more thoughtful about this and have a global quad tree I think there's even maybe a clear function by now in that quad tree class that I wrote but I'm just gonna remake the quad tree object every frame build it from scratch build it from scratch every time through draw okay so now I've inserted all of the points the quadric let's just run this to make sure it's like still working oh syntax error sketch ah yes line 29 oh I forgot that I was doing something down here okay another error quadtree 9 your capacity should be a number but is undefined ah I forgot about the capacity so the quadtree each node of the quadtree has a limit to how many particles can go in it let's just use for that's what I've been using we might get better better or worse results depending on that number so let's and let's let me give myself some more space here with all this okay so we can see that this is working but running slow so while I've got the Quan building the quadtree I have it lost even though there's computation involved in building the quadrat for rebuild at every frame there's so much less involved in doing that then checking all the locations and now here's the thing that I want to do let me just shut this off so that I don't like kill my computer what I want to do now is here I started here instead of looking at every other particle in the whole particles ArrayList I want to query I want to say I'm gonna say let others equals QT e dot query now what do I want to quit I think query is the name of the function query query class query query query query query quick query range and found but and also worried about found found a member when I wrote that found as the array that's being recursively added to but I want to query a range and the range could be and Moraine could be a rectangular range or a circular range and actually I have this this has been added since the last tutorial but this geometry object for a circle I'm going to use a circular range why I have to erase the whiteboard shoot I think that color predictor thing was done so as long as I just erased this really quickly I can finish this by 1/15 have this video out next week sometime okay if I have a particle and has a given R and my other particle has a given R I only need to look at particles within what a range that is are I drew this kind of bigger R times 2 right because a particles are intersecting only if they are within our times 2 of this particle now if the particle were different sizes we'd have a more complicated problem and I encourage you to implement that as your own exercise but because my partners are the same sizes I've got a pretty easy easy scenario here so what I can do is I can in sketch I can say quit okay so first make a circle there's a new circle object where it should be at P X P Y and it's size is PR times two this is the range I want to check for any other particles within the range the distance of this particles radius times two I want to query that circle and let's call this range I want to query this range then others is now a smaller amount this is all I just needed an other of others so I'm no longer checking the full particles list I'm querying the crotch quadri for a smaller subset of particles for me to check intersection and now I think we might be done I don't know I don't know I don't know they look at this this was remember this let's let this run again this is it running before really slow five frames per second I'm gonna hit refresh I hope I don't have any errors okay oh that looks good it's running fast but it's not highlighting so what happened there P does not equal other and P intersects other Y okay hold on I have a bad feeling that oh the particle thank you I forgot so that's the thing ah right right right right right so this is the whole thing these are points I called them others well let's call them points I'm getting the points for every other of points for every point of points other equals point dot user data I need to actually look at the that object right the remember the particle which is the thing that works with intersects that set highlight and all of that is is this this Quadra is giving me an array of points and as I look at each point I need to pull out the user data okay I can't I can't bring myself to use that drummer there we go so now whoops framerate look at that 48 frames per second it was 5 frames per second now it's 48 frames per second whoohoo so you know there's issues with this well I've really set myself up for success here these particles have a really nice even uniform distribution across the entire canvas they're all the same size there's only a thousand of them I'm not actually like having them bounce off of each other or any kind of complex collision resolution but this is the basic idea which you can see is that with a quadtree right if I just quickly like all I have to do now to to switch them on and off right is to say let me comment this out and if I say for other let other of particles this is so now no quadtree right I'm just looking at every other particle super slow super slow frame rate of about five and now switch to using the quadtree super fast so goodbye everyone thanks for watching this tutorial I encourage you to try to make a version of this where the particles on a somebody already has done this a pull request on my quadtree repo but making it a version of this with the flocking simulation can't you know how is that going to work what if you have you know what if the particles aren't so evenly distributed how could you do it with different sizes Oh could you visualize the quadtree so draw the quadtree dynamically as it's like changing and updating that might be a beautiful thing to create make your own quadtree visualizations I hope you do all those things share them with me and I will see you in a future got any challenge something or other video goodbye subscribe like I don't know that kind of stuff goodbye oh yeah I could have done map okay okay map I could have done map all right grant asks is there a forum or group where people discuss p5.js yes forum dot processing work isn't there a way to share the code realtime typically what i do is try to upload this stuff to github right afterwards this code is already on github because it's part of the quadtree repo and is it possible to use quadtrees with kmeans clustering probably that would be an interesting thing anyway I really got a run because I'm gonna be back in an hour in 15 minutes it won't it'll be it's if I go to coding train well is it here where do I find it there's an event let me just go to twitter twitter no peek at oop cat here is the link live in 74 minutes there will be a guest tutorial here about hardware and JavaScript so I'm going to run I'm gonna grab something to eat I will be back in an hour or so will be a new new cat and I will be here for a couple hours doing her desk tutorial and that will then be the end edited versions of all these challenges and stuff will come out next week yeah alright so thanks everybody for watching and I will see you I'll see you it if you're gonna tune in I'll see you in like an hour okay goodbye