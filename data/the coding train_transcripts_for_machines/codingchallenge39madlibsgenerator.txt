hello and welcome to another coding challenge in this coding challenge I'm gonna demonstrate a lot of different techniques and what I'm gonna do is I'm going to build a mad libs generator from scratch in the browser using javascript and reading data from a Google sheet so there's gonna be a lot of pieces to this but hopefully by the end you'll learn something and be able to take a creative riff on what I'm doing to do something that's more original than me just literally creating the exact Mad Libs now you might be wondering what mad libs are it's a word game where you have to come up with nouns and adjectives and adverbs words of different parts of speech and those get substituted into a story and then when you read the story it's funny you know I've been thinking a lot about the history of Mad Libs and the creators of Mad Libs Leonard Stern and Roger price and you know they must be laughing all the way to the shoe where's my drum roll boom I have to credit Josh Gordon for that joke I don't know if he came up with it but I told me that joke that's okay but bad joke aside um let's see what happens if we can try to create a mad libs generator in the browser so the first thing I want to do first of all is come up with the actual structure of the mad libs itself so I have here a text file and this is what it's going to be blank exclamation point they said blankly as they jumped into their blank and flew off with their blanketyblank s so I need an exclamation an adverb a noun an adjective and a plural noun so I could say links they said joyfully as they jumped into their unicorn and flew off with their colorful rainbows right so this is the idea of a mad lib so the first thing I want to do is figure out where am I going to pull the words from you know with a project like this I probably shouldn't go straight to making the data source and I should just actually do the mad lib generation in a JavaScript program and then connect the data source but let's not take my own advice and go backwards so yeah nobody people thumb there's a lot of thumbs down a lot of dad joke yeah in sorry that was terrible maybe we'll edit the joke out anyway coming back start this video over so what not one thing I want to do is I first I want to make a Google sheet so I'm gonna make oh no I don't wanna make a Google sheet actually I'm gonna do this with a Google Form so I'm gonna make a new Google Form more Google form and this is my no thanks this is my mad libs form and I need to create a bunch of questions so I just want a text question where do where do I find short answer so I want an adverb and then uh and it's gonna be required and then I want a duplicate I want what did I say I wanted an adverb no exclamation exclamation then I want an adverb duplicate then I want a noun adjective plural noun noun noun duplicate adjective duplicate plural noun and then I can trash this one and save this is a matte lips form and what I want to do now is share this get a shareable link shortened URL those of you who are watching this on the live stream somebody copy the screenshot that copy that down share it in the chat I'm not gonna leave it up to Mark and then a police family friendly language please if you wouldn't mind and I should be able to do responses and connect this to a new spreadsheet and here now is my spreadsheet so as people submit responses I should see those responses appear in this particular spreadsheet and in the chat tell me if nobody was able to get it and I'll sort of pause making this video and edit the pause out but for right now I'm going to keep going okay and people in the chat are pointing out by the way that I could use one of my other video examples like the rita library which gives you random nouns and random words I could query something called word Nik but in this coding challenge I want to show you how to get aggregate data from users and use them in your JavaScript program and of course you could write a database program you could spin up a web server in my database and all this stuff or you could connect to some service and save your data but what I'm suggesting to you if you want to prototype your idea and get data from users really quickly a Google Form and a spreadsheet is a really quick and easy way to do it ok I'm back I paused for a bit to let people submit stuff and you can see now people are submitting into the Google form and I've got lots of exclamations lots of adverbs lots of nouns lots of adjectives so what I need to do now is get this data into my program and there are a variety of ways you could do this there's something called shihtzu sh e ETSU comm there are probably other JavaScript libraries and frameworks for grabbing data from a Google sheet but I'm going to use something called tabletop J s1 it's open source and free and it's pretty easy to use so what I'm going to do here is the first thing I want to do is grab the tabletop J's library so I'm on this github repository all the links I'm using in this video will be in the description of this video and I apologize for my scratchy voice got a bit of a cold today so I'm gonna click under source I'm gonna go to tabletop j s then I'm gonna go to raw and I'm just gonna save this javascript library into my libraries folder tabletop J s so now you'll see in my code here what I have is I have a text file where I'm keeping track of my mad libs I've got my JavaScript code I've got an HTML file I have p5 libraries because I'm using p5 as I usually do as I sort of base JavaScript framework to use for various Dom manipulation tasks and then also tabletop Jas for getting the data so now what I need to do is figure out how can I get the data from that spreadsheet so let's look here and oops let me go back to tabletop j/s and I'm gonna look at the readme so this is how easy all I need to do is call this tabletop dot and knit function and I need to give it a key and a callback function and simple sheet being true means I'm gonna work with the sheet that just only has one tab so this is gonna make things really really easy so all I need basically is to take this code I'm gonna copy paste this code and I'm gonna go to my code and I'm gonna put it in setup and let's just see what happens when I do this so now I'm gonna come back here that refresh now table top is not defined so I saved that JavaScript library but I forgot to add it to my index.html so I need to also have a reference to it in index.html let's try again and we can see this data came in now this data came in from some demo spreadsheet available from that table top makes available to use with an example I need to get the key to my spreadsheet so if I go over to my spreadsheet here where is the key well it's just this crazy long thing now this actually isn't going to work because I missed a crucial step but I'm gonna copy paste this long key here and I'm gonna come back here and where am I in my code I'm gonna add this here right so that's the key so if I add this here I should see everything in the spreadsheet here just in that data object so I'm gonna come back and hit refresh but I'm gonna get an error it says access control allow origin header is present on the requested resource it is not allowed access the reason why is not allowed access is in order for this spreadsheet to be available to this program in this very simple way without authenticating in any way whatsoever I need to publish it to the web so there's an option in Google sheet which is here where I can go under file and look here publish to the web so again I wouldn't do this with like hey everybody send me your social security numbers and/or username and passwords I wouldn't use a Google sheet for that but was the sort of quick crowdsourced forward you can do that so I'm gonna do publish to the web and it should say entire document web page I think that's all I need and I'm gonna say publish and I sure you want to publish yes okay and now it's published and I should be able to go back and refresh my program look at this this is beautiful this is live this is live as people every time i refresh as people enter submissions I've got more and more and you can look at this I've got an array of objects adjective adverb exclamation noun plural noun and the timestamp so there's not a lot of metadata here other than the timestamp but you know a Google Form you can ask people for lots of things you can say hey make a Google Form for people to type out their dreams so we wake up in the night enter their dreams you've got this vast spreadsheet mean you need to have an audience and figure out a way to people but this is a quick way to get data I'm excited about this I hope you are too so this is really easy now so now in my program what I want to do is I want to clean this up a little bit so one thing I want to do is I want to pull this function out because this is really where all my work is going to happen and I want to make this a separate function which is a generate Madlib actually you know what I want to do actually is I just want to I want to just say got data I'm just gonna call this got data and I what I want to do is have a global variable quick solution to just have a global variable called all data it could probably come up with a better name than that and I'm gonna say all data equals I know what I'm just gonna call it data I have to call it sheet now it's called data data equals and I'll just call this stuff so basically what I want to do here is when i refresh this page I now have a global variable called data that has all of the entries in it so now let me let me let me here also create a button let me say create button generate Madlib and I'm gonna save our button equals create button I'm gonna say button dot mousepressed button dot mousepressed generate so I'm gonna create a function that generates the Madlib here so I just want to make sure this is working I'm gonna say console dot log generate whoops and then I want to add something I want to go and just into my page I just want to take this and I want to put it into the page just so people can see it so I'm gonna make a paragraph at the top that has that so we can see oh and I forgot to add to my JavaScript code p5 by default creates a html5 canvas for drawing but I don't need a canvas so you can see this is my page now it has it has sorry it has all of the it has the Mad Libs listed there and has a button now so whenever I click generate all I'm doing right now is console logging the word generate but I now want to generate a version of the Madlib from all the stuff that people have sent ok so now here we go so let's do that so first thing I need is this text and there's a variety of ways I could do this I'm gonna do something I'm gonna say text equals I'm gonna make this a global variable but what I'm gonna do instead of these blanks is I'm gonna create like a secret code for myself exclamation they said adverb I'm just gonna put this into their noun and flew off with their adjective and plural noun so I'm gonna I'm gonna just I'm gonna do this as like a secret code to myself because I what I'm saying is whenever I say dollar sign dollar sign the name of something dollar sign dollar sign this is something I want to search for in that string and replace so the first thing I just want to do is say create P create P what that text so let's just see if that appears okay so that appears now what I need to do is run I can use the replace function with regular expressions to replace those things with data that's coming from the database itself so let me look at this again the data is a big array and each object has now what I could do here oh I wish I had made do you think I could change this I wish I didn't have that space there that might cause me some issues it might be fine but I'm gonna go back to the spreadsheet just to be sure about this I'm gonna change this heading to just plural noun and then I'm going to I'm gonna go back to my code run it again when we look at data we look at one of them great plural now so what I actually want to do is I want to have these things match what's in here in the regular expression I don't know if this is really gonna be useful but let me just match it exactly exclamation adverb I'm going to add a noun adjective plural noun okay so I just wanted to adjust that have the capitalization match because what I want to do is what I'm gonna do the following okay thinking about this I want to say var Madlib equals text dot replace and I want to match anytime there's dollar sign dollar sign dot star question mark dollar sign dollar sign so I want to match any place where I have dollar sign dollar sign dot star and then I just want I'm gonna just have a function called replacer that way I can like kind of do this in its own function right remember with the replace method in JavaScript I can pass a callback and I want to capture this middle thing as a group so the arguments are the full match and then group one which is really the part of speech so what I want to do is now say I have this okay so let me just let me just return test let me just make sure this is working so this whole thing is working and I want to create P with that Madeline so what I did is I'm looking for anytime I put this secret code in the text I want to match it and then replace it with the word test so let's refresh this uh that didn't seem to work so let's let's look at text as that and let's uh let's let me try my regular expression oh you know what these are meta characters the dollar sign forgot is end of line so I need to escape that I totally forgot so these have to be escaped so I maybe I should have picked something else as my secret code but those have to be escaped so that should do it great so you can see test as oh and what did I forget now it only did the first one so I need the global flag so I need the slash g4 that's the global flag to do all of them so it tests they said test as they jumped into their test and flew off with their test test but now what I can do is I could replace it with the part of speech let's just see what that does exclamation they said adverb as they jumped into their noun and flew off with their adjective plural noun this is great because now I have the kind of thing it is which I can use to look up the particular thing in this array so the first thing I might want to do is just pick a random element from that array so let me pick a random element from an array so I'm gonna say entry equals random data now this data just an array itself it is so the random function in p5 is just a function if you give it an array it'll give you a random thing from that all right let me just show you here in the console random data I got one I got another one I got another one etc etc etc so you can see if somebody put that in someone's really trying to mess with me and put that in as an entry I see you out there who's ever doing that okay so I pick a random one and then what do I return data now normally in JavaScript this is a this is a thing that you might not be aware of oh I'm excited about this and I'm gonna be squished something's wrong with an aspect ratio of this camera if you have an object entry and I say now why don't I say dog when I could say rainbow right so this is my object normally you would say entry dot noun and you would get rainbow but guess what another way to say this is entry bracket bracket now this looks like it suddenly is an array and I would need to give it an index but I don't have to if I give it a string like noun this is actually looking up the property that is named with the text inside that string so I can dynamically pull a particular thing based on what part of speech I matched by saying return entry bracket POS right remember I matched exclamation or adverb or noun and in those objects that's what those things are called exclamation adverb or noun so now if I do this and go back here oh Smurf they said lively as they jumped into their Phoebus and flew off with their low forms I'm a little bit afraid to just keep doing this because I'm hoping that people are using family friendly happygolucky language but let's try let's be bold to try one more hooray they said carefully as they jumped into their lamb and flew off with their tall bananas so we've got some great options here and you can see instantly this every time i refresh the page I'm gonna get more and more possibilities and there's so many so much I could do more with this right you know this is a very simple Madlib I could do some natural language processing like I could make sure it's actually a plural noun and if it's not it could PluralEyes it or I could check to see if it is a valid down um there's so many things I could do in terms of how to making this better in terms of a mad libs generator but what I'm asking you to do it in a way that if you're watching this video is think about what might be a creative experiment that's your own weird word game possibility that you could do where you crowdsource data from people so make a Google Form ask your friends to fill out that google form get a JavaScript program that reads from that Google form and visualize what people entered mash it up make a poem out of it whatever I'm sure you have more creative ideas and strange weird internet things that you could try to make by doing this idea but it's a really quick way of having an instant database with crowdsourced information so hopefully you got something from seeing this little Mad Libs generator if you make your own actual mad libs generator please share it with me so I can take a look and be inspired by your own work and I'll see you in a future coding challenge