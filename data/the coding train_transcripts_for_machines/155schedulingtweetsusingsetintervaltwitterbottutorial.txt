in this video I'm going to look at how you can use the set interval function to schedule tweets from the bots in node so we already have working from the previous video an example that makes the status post to the Twitter API and has a callback to tell us whether it didn't work or work so now what I need to do is what if I want this particular program to do this every five minutes or once an hour how would I add that to the program the other thing I'll show you in this video is how you can have the bot tweet based on a particular event so the example that I'll use in this video is anytime someone follows me I'll also tweet back saying like you know thank you for following me or something there's a lot of other kind of events and eventually at some point I want to look at if someone tweets at mentions me with an image going to process that image and send the image back but we'll get to I'll get to that in future videos but and this one is going to look at scheduling the tweets and using the Twitter API stream to have tweets happen based on a given event okay so the good news is we already have this this is all the code that I need for posting a tweet tweeting a tweet twittering twittering twittering okay so what I want the first thing I might do is just wrap this in a function and I'm going to call this function tweet it because apparently everything has to start with TW in this example in this so I'm going to take all of this code and I'm going to indent this a little bit I don't have like sublime settings them in a different user account this force for space indent I can't I have to tolerate it for the purpose of this video I'm definitely gonna fix that for a future video two spaces two spaces I much prefer but you shouldn't be like that you should welcome any kind of spaces for your indentation you that should be the kind of person you are but the point is look I have this now in a function so anytime I were to call this function if I call that function boom its kind of post a tweet now one thing that I might have an issue of like so I could run this right now and I'm gonna say node bot I have a feeling I might get an error something went wrong so why does something go wrong the reason why I sent something went wrong is I just run this example and I made the same exact tweet two times in a row so Twitter doesn't like that Twitter's like you that's a duplicate status and it's not I could have gotten a better error message down here to look at what that error actually is but I just don't have done this before I know that was an error so something that you know it doesn't really make sense to have a Twitter bot anyway that posts the same tweet every so often there is actually a page on Twitter's website I'll try to link to it that you do kind of like the rules that you should follow for because bots are allowed but there's certain kinds of do's and don'ts in terms of what Twitter allows for a bot but one thing that I could do really quickly is I could just say let's make this a random number bot so I could say in my tweet it function I could say R is a random number between 0 and 100 and maybe I'm going to use the floor function so it's not it doesn't have a decimal point so I'm getting 0 5 integer a whole number and then in my tweet I could say the status is here is a random number plus R plus coding rainbow from nodejs hopefully that's not more than 140 characters I think that's fine so now at least each tweet will be different because I'm getting a random number so let's run this again and see it worked and now if I go to the browser and look at my account page refresh you could say here is a random number 3000 and I forgot to put a space between the number and the hash symbol so my super important hashtag is gone so let me add that space back in and you can see there we go I this is a bot a bot that tweets a random number I mean the point of me making these videos is that just trying to show you how to do it and so it's up to you now to come up with a much more creative or interesting idea and I'll try to include some links to interesting BOTS and examples and ideas that might help you get started in this video's description but the real key here now is this is happening just once what if I want this to happen every so often the way that I can do that is by using a function in JavaScript called set interval and the set interval function is a function that says trigger this particular fun tweet it every how some number of milliseconds so what I could say is a thousand milliseconds would be one second a thousand times ten would be ten seconds so a thousand times sixty would be sixty seconds or a minute times five would be every five minutes times 60 would be once an hour so it's up to you how often you want your bot to run again you want to read that Twitter page that explains like you know if you're posting tweets like every 10 milliseconds they're probably going to shut down your account I imagine I don't know what those parameters are off the top of my head but for our purposes right now let's see if we can get away with like tweeting every 20 seconds just briefly so we could at least see this run and the one thing I might also do is actually when my bot starts exquisite explicitly call tweet it once because the first time this is going to run is only 20 seconds in so I don't have to think of something to do for 20 seconds while we're waiting but let's run the bot and say node bot J s so it worked it did tweet something and probably would make sense for me to do something better in the console like print out the tweet that it actually tweeted I'm rambling out for this probably take me 20 seconds to go back over here refresh this page and you can see I got the number 18 from nodejs and now I'm go back to node and uh wait here oh it works it did another one that was 20 seconds and I'm gonna come back here and sit hit refresh and look I got the number 72 now I'm quickly going to go here and hit ctrl C which is going to stop the thing from running because I don't want to tweet too often from this account right now but you can see this is it all of these videos of all this like setting up and getting your account and working with node it boils down to actually something really quite easy which is just a matter of having a single function that posts the tweet and a single function set interval that schedules it now of course the real work for you is what goes here like why you making a bot is it to be you know to just try a playful experiment is it to do something practical to help deliver information is it to make a political statement or to provoke some thought you know there's lots of different kinds creative reasons why you might want to make a bot and I think it's kind of a unique form of expression that is really something that I think that I'm like so tired for making these videos for hours this way but I think it's I'm excited to see that those of you who are maybe just coming to this for the first time what kinds of things you might make so please share those if you end up making stuff in the comments that would be helpful and interesting to me so now let's look at one more aspect of this so if you remember that these are the three kinds of things that you can do with the Twitter API you could search the Twitter API so one of the things you might do is I could search for all the tweets with a given term and then I could make up a tweet from those tweets and send it back on with posts but the thing that we haven't seen is this stream so how do you set up a stream so first of all there's a couple things there are different kinds of streams and the stream that I'm going to demonstrate to you is a stream called a user stream the reason why I want to set up the user stream is I want to get an event for certain kinds of actions if someone favorites one of my tweets if someone follows me if someone retweets me if someone at replies me so you can get did an event and let's start with just the follow event which i think is one of the easier ones to work with now I don't actually have the code for this off the top of my head I'm going to just kind of grab it from over here for a second which I prefer to like type it out but I'm just going to do this from a previous example so I'm going to leave this down here so this particular this particular interval is going to keep going to go as well but I'm going to add something to this particular bot so I'm going to add these two lines of code set up a stream a user stream remember T is a reference to the API connection to the API the twit package so I'm going to set up a user stream and then I'm going to assign use the on function so I have a reference to that stream the on function assigns a callback followed to a particular event follow so different things can go there follow favorite re tweet tweet there's lots of other kinds of things that you could at the Twitter API doc streaming documentation I could pull that up for you but I'll include a link in the video description somebody remind me if I didn't but now what it's up to me is to write this followed function so as long as I write a function called followed this code will access a callback an event callback just like when I press the mouse this happens when I press when I move a slider you know with the Dom element this event happens this is a function to handle a follow event for this stream so any time anybody ever follows me this code will be executed what could I do in here well one is I could just call tweet it so anytime somebody follows me that's when I tweet a random number but maybe what you want to do is actually what you might want to do is send a reply so how do you know who followed you well if you add an argument to your callback like data or like event or I think I used in my example that I pre made it called an event message I probably got that from somebody else is an example the reason I call it event message is what is the message what is the data associated with this particular event so there are various pieces of data and again I'm just going to grab them from here because I have them already whoops I'm and I'm going to paste those in here now I'm gonna have like my indentation is all off so you can see here now on I called it just event so if I'm calling an event message I need to be consistent here so that is just JSON data it's data it's an object that has all the metadata all the things associated with that particular follow event and again you could go to the Twitter API to look at how that JSON structure and what type of things you might get but here I can get the user's name and their screening so screen name is our actual twitter twitter account name so perhaps what I want to do now is say something like at plus screen name plus thank you for following me that's so lame do you like rainbows I don't ask a question so of course you can absolutely be different but this is how now I could now that I haven't actually made the tweeted function to handle like receiving a parameter but I could actually receiving an argument with the tweet but I could add that now so this is the idea this event occurs I get some metadata and I then post a tweet back so in a minute if any of you who are watching live I'm going to ask you to follow the account atoz ITP but but let's let's let's get a little further here so if you notice here this particular tweeted function it already has this status set with it so what I'm going to do now i think is i'm gonna i'm gonna i'm going to just comment there's a way that i could do I'm just going to comment the interval out actually because we don't need that for this and I'm going to put the I'm going to put a argument here just called txt for text like so that whenever I call this tweeted function the text that gets passed in that's the thing that's that's tweeted and then I could instead of having the random number stuff that I did in the previous video I'm just going to put that variable right here in there and I can get rid of this random number stuff so I really should have made this two separate examples I'm going to have to backtrack to to save it but you can see now in this particular followed function I call the tweeted function I pass this tweet that I made and I send it through and I post it so let's hope this works and the only way you know this is the thing I don't know how to test this other than have somebody follow me but I can kind of like hope that this really works so here we go let's run this bot and let's make sure just to make sure we're in the right place I'm going to say I'm going to call this the follow bot so I'm going to change that to the follow bot is starting so that I know and I'm going to say clear I'm going to say node and you know I just still like watch how things are going I probably should add something here like console dot log follow event just to see that this happens and yeah so let's let's go with this it could add more to that and run this the follow bot is starting okay somebody follow me it's a the account name is A to Z ITP okay so follow it out account name I'm going to go do it from over here because I'm already on Twitter on another laptop I already follow this accountant unfollow and follow come on everything this is like the it worked okay people are following nevermind so we can go back now so people watching this live we're following and so I can refresh this page and uh you know so it's not showing up here the reason why it's not showing up here is because it's an ACK reply which only shows up on the website under this tweet so you can say does robot do you like rainbows J Brian frost or do you like rainbows so it's working if I wanted to show up on the main page one thing I might add is just to this I might add a dot here so that the @ @ symbol is not the first part of the tweet and I could go back and run it again and maybe somebody else can unfollow and follow me again unfollowing follow me again or somebody else has done it yet could could follow and will see this happen so hopefully this gives you like a nice picture of what's possible right I previously showed you just how you know you just have a function that sends a tweet you could use the set interval to schedule that function at a particular point in time or you could put a post a tweet based on a particular event a follow event now I do have an excel I will in a future video go over what might be the most useful is if somebody @ mentions you right because you want to bot that just participate I think this is really that an interesting question here are you making a bot that's just sort of like a thing that doesn't know about the world and is just automatically posting are you making a bot that somehow participating in the conversation on Twitter is it reading tweets and responding to treats and and and what does that mean to have something that's a human or not a human but made by a human there's lots of wonderful questions that this opens up that I hope you will explore from watching these videos and making creative projects let's just see oh look all these follows happen if I go back here we can see now bot wiki org is watching hi bot wiki org all of you wonderful people so there we go this gives you cut like the tools you can stop now go for the rest of your day make BOTS let me know tweet at me I Pat Schiffman anything you make I would love to hear about it but I even though it's 1230 in the doing this for two hours I am firmly committed to pushing through it doing one more video where I show you how to generate an image from processing and have that image have that image get posted along with your tweet which i think is a really opens up a lot of doors and then I'll just have to hopefully later today or tomorrow or next week come back and look at a few more scenarios of like getting downloading images and processing them I'm not gonna get to all that today for sure okay so here we go 15 minutes in I'm going to move this