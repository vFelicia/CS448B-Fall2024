hello in this video I'm going to take this example which is currently I called a brightness mirror where each pixel of the image is drawn as a rectangle brighter pixels bigger rectangle darker picture smaller rectangle I'm going to turn this example into what I'll call the check box mirror so instead of drawing to an html5 canvas based on a video source or an image source I want to create Dom elements checkboxes that get checked or unchecked based on the brightness of a pixel and incidentally while doing this we're going to look at an image processing effect called a threshold in effect so I'm just going to dive right in if you into this code example which was covered in the previous video which you could go back and watch if you haven't but I'm going to dive right in and start making it so let's go over to the code and the main thing the main sort of piece here in the code is that for every pixel I'm getting a brightness value that brightness value is the red plus the green plus the blue divided by 3 the average of the red green and blue components of the color so a threshold effect is an effect where you say ah there is a given threshold 127 any pixel that is a brightness over 127 I want to do something any pixel editor brightness less than 1 in 2127 I want to do something else typically I might assign the pixel value for anything over 127 to white and anything less than 127 to black so let's do something like that I can say if bright is greater than threshold fill 255 so just anything above 127 make it 255 anything below 2127 make it 0 now I could set pixels but since I'm doing drawing stuff I'm not going to bother with setting pixels I'm just going to go I don't need to do this mapping anymore to a size of a rectangle I'm just going to go right down get rid of this fill and just draw a rectangle at the full size that is either white or black based on that threshold so let me zoom back out let me refresh this and we should see now you can sort it now you see exactly what I'm talking about each rectangle in the screen is all is either white or back and you can see how it's white are white or black and you can see how I'm getting the sort of contours of the video almost like a silhouette a lowresolution silhouette with this threshold effect now one thing about it you'll notice if I go back to this example that I hardcoded a threshold value of 127 what would probably be more useful is to have a slider so you could adjust that threshold you based on you know whatever this sort of existing video is so let's actually do that so one thing I'm going to do is I'm going to make a variable called slider in p5 an easy way to place a slider in the browser is with the create slider function of course there's a zillion other ways you can get a slider there but this is just one I'm going to say slider equals create slider and when you make a slider you need three values the minimum value for the slider the maximum value of the slider and where that slider starts so zero is the minimum 255 is the maximum and we'll start it right there in the middle at 127 so if I go back and refresh you can see there's a slider down here now that I can move around the issue is I want to take the value of that slider and I want to I want to assign it to the threshold and that's actually a really easy thing for me to do right now because here I said threshold equals 127 all I have to do now to change that is say threshold equals slider dot value the value of the slider is the threshold sometimes code it just reads like language in its own sort of way if you read it backwards so now if I hit refresh you can see here there's the image I'm trying to look at the camera look at this but as I slide it up you can see that threshold is changing and you can see now with a lower threshold all of the pixels that are rather bright behind me are getting white and actually only my shirt which is kind of dark it's my hair which is kind of dark and you can see this is what the actual video is right all those dark pixels are getting assigned a black a black value so I kind of want to remember what this value is so I can actually just here in the console type slider dot value to see 77 I kind of like this as a threshold value so I'm going to now I'm going to go and change the slider to start at 77 of course I can still adjust it but now each time I hit refresh it'll just start right at seven okay so now we have this threshold effect the thing that I want to do is I want to take each of these rectangles that I'm drawing in this canvas and not have it be a canvas with shapes and colors that I'm drawing I want to actually make Dom elements checkbox' Dom elements so let's look at how we do that if I go back to the code here I'm recording this yes okay just checking if I go back to the code see how I said create slider there's also a p5 function called create checkbox I'm just going to toss that into setup and you can see look there's a checkbox now there's a checkbox there now what I want to do is I want to make a lot of checkboxes in fact I want a checkbox for every single pixel in the video so I need a loop to make checkbox after checkbox after checkbox so I'm going to go back to the code and I'm going to say now what should I loop through how many checkbox design do I need well I need one for every X and every Y pixel so I need as many checkboxes as the width and the height width times the height of that video source how is going to draw a diagram but I think you're with me so one thing that I think would be useful is actually to just keep track of variables for the grid so what we've got here is going to have this whiteboard I insist on using it so in other words I want a checkbox and there's a certain number of columns right and a certain number of rows and those map to the width and height of the video so what I think would be useful is to have variables called columns and rows so I could just keep track of that number throughout my code because I'm gonna need to use it at a bunch of different places so what is columns the number of columns is the width of the canvas but the canvas is going to go away so I'm going to say 640 in fact it's funny how I could I could actually just sort of interestingly enough you know I just realized these should be actually a hardcoded value so let's think about what is a 640 divided by 16 you know I could probably do that math in my head but I got a console here 40 so let's say we're going to have 40 columns and 30 rows it's kind of a reasonable number of boxes so so my video definitely needs to be the size of columns rose and I don't need to worry about all of that math anymore of scale of canvas because the canvas is going to go away I'm going to leave it there right now because it's useful to have it there as a reference so now what I need to do is I need to say for every column and for every row create a check box and that's not done there we go so now look at this look at all those check boxes so I now have a check box in the browser page for every single pixel but they're not really organized through by any logic right they're just all next to each other right and so I need them to maintain the same grid right I need to have exactly the number of check boxes in the first first row the second row the third row so I need to figure out some way of doing that so one way of doing that I knew I had a use for this whiteboard is that let's say I have I have this web page right this is the browser and what's happening when I call create checkbox is it just sticks of checkbox in the page then it sticks another one then 600 I'm doing that millions if not millions of times 40 times 30 times you can do the math right and it just keeps doing that it gets the edge of the page it wraps the next one what I want to actually do I think is establish a div a div being a container a box an area in the web page maybe I'll call that div mirror and I want to be able to always put the check boxes in that div that way I could control some style of the div its width and height its position on the page all of that sort of stuff so I think it would be useful to put a div now I could say creative because p5 has a function creative to put a div in the page but I think this might be a moment where it's actually easier to just dig into the HTML itself so I've gone to the index.html file that's associated with this particular sketch and I'm actually just in the body right here I'm going to add a div and I'm going to say div id equals whoo let's zoom didn't weigh too much ID equals mirror so I the ID is very important I need to give that div an ID so I know how to reference it from my JavaScript code for my p5.js code so I want to put all the checkboxes into that particular div so let's do that whoops let's go back to sorry I need to go back to the JavaScript code and I need to I'm just going to I need to assign a variable to that checkbox take that bot that checkbox I may put it in a variable say box parent mirror and the parent function what it does it's a this Dom element you've just made put it inside that div so that div the mirror div becomes the parent to those checkboxes and if I run this now you can see they're there now you'll notice thing they're above because the canvas and everything else gets created after that particular div now what this allows me to do if I go back to the HTML file is add some styling for that div so pound or hash mirror this is CSS yeah we refer you to my CSS tutorial videos but I can do some things like say width and I'm going to make it a fixed width of 800 pixels I think I kind of worked this out earlier today I think that's going to work about right you know trial and error will probably get me that number and also just so I can see it for a moment I'm going to give it a background color like something kind of light just so we can see that that div is there I'm gonna hit refresh now you can see that that's the container essentially the box the div and all the check boxes are there and you can see it has a little bit of a background color now notice this didn't really work out I didn't get the exact number of width to like make sure that the make that sure the check boxes wrap appropriately but I'm gonna I'm going to actually do something to like 100% be right about this so in the sketch I'm looking at every single column in every single row and what I want to do is when I get to the end of a row I want to add a line break an HTML line break so the check boxes then go on to the next right I want to do you know 40 check boxes and then put a line break I came over here and I didn't change look I'm over here now sorry I want to put 40 check boxes then do a line break and then do the next 40 check boxes okay so where do I do that in this loop I need to put a line break well incidentally I actually have my loop this is one of the few times where whether the X's on the outside or the X's on the inside is quite important right because what I need to be doing is I need to be saying first do the first row then all the x's then do the second row then on the X's so Y needs to be on the outside I have to do all the X's for every Y so I've actually got it fixed this and put Y on the outside and then what I can do is after I do a whole set of X's I can say a line break equals create div I'll just make a div with a line break in it and then also put parent that to what the mirror so now I'm guaranteeing that after every row of check boxes I get a line break so now let's run that oh that doesn't look right uh you know what let's try using create span I think the div has a lot of stuff it's not like in line so let's let's use creates man yeah that's better I knew I have this something so I'm trying to put something in there that doesn't have any padding or line break around it already and a span element allows me to that you could see at 800 pixels was about right for this particular area I could have you know maybe it's 750 or whatever but now I can also get rid of that I don't need to see the background color anymore that was just sort of for debugging I can take that out and we can see now I have a perfect grid of checkboxes the exact number for every single pixel in that source video and you can see here you know I can check them and uncheck them but that's not what I want to happen I want to maybe check the dark once and uncheck the light ones so how do I do that well first of all I need to have a way of referring to those checkboxes like I made them all and I put them on the page but I didn't store anything so I need an array I need to keep track of all those Dom elements over time how am I doing here 13 minutes let's try to make this under 15 minutes it's not going to be okay so I make an array called boxes and what I'm going to do is for every checkbox that I make I'm going to put that checkbox in the array so I make an empty array and I'm storing them all so I now have this big array if i refresh the page and I go over here the console and take a look you can see I have an array with 1200 check boxes in it gives 40 times 30 is 1200 1200 pixels 1200 check boxes there's a lot of them they're all p5 elements okay and you can there's all sorts of stuff associated with that so now how do I check or uncheck them so right here where I was saying with my threat threshold effect I was previously saying if the brightness is greater than a given threshold fill white otherwise fill black instead what I want to do is I want to say something like check o boxes index checked false boxes index checked true so what I want to do is I want to uncheck the bright ones check the dark ones and this is a p5 function the check function is a way of dynamically checking or unchecking a check box with code if you don't give an argument it just gives you returns you whether it's checked or unchecked which is usually what you use a check box for okay but this index isn't exactly right remember because the index was this thing where I was trying to look up a pixel and the pixels are like RGB so I need my own index this index of looking up the pixels is different than the index into that array of of check boxes unfortunately so I'm going to make a new variable I'm going to call that a check index and it is equal to x plus y times the number of columns and then I'm going to use that checked index so there we go what I'm doing is it's I'm doing both actually to get rid of the rectangle in a second but instead of ultimately instead of drawing rectangles based on pixels I'm checking it unchecking check boxes and I have an array of pixels that I have to look up the color one way using the X plus y times for a whole nonsense and I have to look up in the check box array a different way because there are not there's not an RGB and alpha for each check box or just one check box I had to say this to myself because it's very confusing okay let's take a look now hit refresh and we can see here come on video there it is so you can see that right there I am I'm going to highfive myself again that's not really working but you can see my face here in check boxes can zoom in a little bit you can see those check boxes are going up and down based on my face here and what I'm looking at amar okay it was exciting it works sorry I wasn't sure where that was going to happen so what I want to do now is just get rid of I'm going to say instead of create canvas I'm going to say no canvas and I'm going to get rid of load pixels which doesn't need to be in there and I don't need background anymore there's no canvas I don't need these fills anymore I just want to simplify this I don't need this anymore and now if we run this again we should see just the check box mirror on the page and you can see here I can play with that threshold still you can see based on what I do with the threshold we get different sort of effects and there it is the dumb check box up load it refreshing it because I like that value of seventyseven the Dom check box mirror so I don't know so one somebody had in a comment really said oh wouldn't radio buttons be better maybe you'll get a better effect you know I would encourage you can you do something weird with like sliders make just regular divs text on the page what kind of I would love to see people's Frankenstein creations of Dom elements of visualizing image data with no canvas and no pixels no drawing just manipulating elements themselves so give that a try tweet me or write in the comments if you make something I would love to see how it turns out thanks for watching