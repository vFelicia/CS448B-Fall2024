part two of a fin 111 seventh analysis okay here we go so the first thing that I need to do is I want to load this file so so let's let's make a variable I'm gonna call it a fin again a fin equals low JSON eighth a fin 111 JSON and I just want to see that that worked I'm gonna say console that log a fin okay so we're starting up and I just want to see great so we can see that that list has been loaded which is wonderful now the next thing I need is I want to have a place so let's add some stuff here a fin sentiment demo let's say type here and make a text area of like this text area ID equals text text area okay so now I should have on the HTML page we should see whoops I definitely did something wrong text area text area there we go okay so we should see Oh a global function text because your code has already used it so I think that's bad idea too so let's call this txt okay so we can see here that now how do I by the way with text area I kind of just want it to already start as like a slightly bigger thing which is kind of unnecessary I'm gonna say columns equals 50 so that's good and rows equals 10 okay so now I can the idea here is that what I want to do is as I type here I am happy how are you what I want to do is I want to live calculate the sentiment of this text and have it appear below even as I press every single key so first I need to bind some sort of event so I needed an event for every time I type into this text area so first of all I need access to this text area in JavaScript and I can do that with the Select function if I were jQuery I'd use that dollar sign thing or document dot get element by ID and with a regular JavaScript so I called ID was txt so what I need to do is say VAR t x2 equals select by the ID txt and then the event that I want to track is called an input event there's a changed event there's a change event and an input event it's a little weird and in job in the browser the changed event is only if I hit like enter or tab so I like finished my action but the input event happens any time I press a key at all so text input I'm gonna call this event typing and I'm gonna say now function typing and I'm just gonna say console dot log txt value so what I want to see is as I'm typing I just want to see that I have access to the words that are in what I'm typing okay so let's refresh this and say hello how are you and you can see that this is working that as I type what I'm typing every time I hit a key it comes out in the console there okay so that's perfect that's what I want now I can start to calculate the sentiment score so what should I how should I calculate the sentiment score the first thing I need to do is split up the text by words and I can use a regular expression see my videos about regular expressions using the split function so I'm gonna say var I'm gonna say tokens I'm gonna say words words equals txt dot split and then I want to split by a regular expression and a regular expression in JavaScript is a string like a sequence of characters that goes between forward slashes rather than between quotes and it defines a pattern in the text I have a whole set of videos all about regular expressions what the pattern is what separates the words so whitespace commas periods punctuation whitespace that sort of things basically I'm gonna do something kind of silly and simple here I'm gonna say anything that's not a letter or number and so there's I can actually just say /w so this is /w is any letter or number and backslash capital W is any non letter non number and I could also say maybe I should say or an apostrophe oh no but that's included no one I should have let it be or not anyway whatever this will be good enough for now you can refer there's you can spend your life dupatta to trying to define the best regular expression for splitting tokenizing a sentence into words or words a paragraph in descent into sentences or essay into paragraphs all that sort of thing okay so I'm gonna do that and then I'm just gonna see that this works I'm gonna say console dot log words just to check that hello Oh txt dot split is not a function well of course it's not a function because txt oh I can't come up with variable names were text input fine equals T X T dot value so I want to get the value that's the contents and then I need to split that so that's good that I checked that and now I'm gonna say hello this is a test so you can see as I type it's splitting up into an array of words perfect so now I need to iterate over that array of words so I need to say for VAR I equals 0 is less than words dot length I plus plus now here's to something that's important let's go back to our a fin 111 list notice something here all of these words are entirely lowercase there is not a single uppercase letter in this particular word list so one thing I definitely want to do is when I'm in my code the first thing I want to do is say word equals words index i dot to lowercase because when I look up to see what its score is I need a lowercase word so now now that I've done that then I want to say does does that word exist so if a fin word but does it exist now I could use this has I should probably use the has owned property thing so this is me asking like this will if let's say the word is cat if cat is in the F in word list I'm gonna get the score for cat like three maybe kitten would be like four I don't know Catherine kittens they're equal I love anyone I'm so worried about offending words and their positive negative score very strange personality I have okay but there was a point to what I was saying which is that that right if cat exists I'll get the score like for if it doesn't I'll get undefined which will evaluate to false but there's a weird sort of issue here like sometimes like there might be like some built in JavaScript properties that happen to have the same word as a word and they'll in the essay so to be a hundred percent sure I can say has own property this will evaluate to true or false if word is a particular property of this list that I've developed that's not part of the sort of JavaScript object thingy language itself whatever okay so if it does first of all I need to say score equals zero I can say score plus equals effing word so now I can look up the score and add it and then what I'm gonna do is let's let's add a little area for results I'm gonna say PID equals score and let's I'm gonna add some things p score comparative and what else maybe I'll do a word list just so we can see everything on the page so okay so I added three paragraphs because I want to like report some information on the page so the first thing I can do now in JavaScript here is say I can save our score P equals select score and then say scorpio HTML is the score this is sort of I have there's better ways I could do this but this will work just fine Comparative select comparative and then the comparative is the score / words length so the score divided by the number of words in the file and then also maybe word list select word list and word list HTML oh I'm not saving the words so let's make a list so let's let's make a list we'll call it scored words and it's an empty array and if I ever find one of those I'm gonna say scored words don't push the word oh and maybe its score something like that so you know this I'm not being very thoughtful about the design of the display of the results but comparative okay but let's see if this works hello oh uncaught reference error score words is not defined scored words scored words and Oh scored words I don't know what I'm doing here okay let's try this so okay let's try typing I love kittens and rainbows also unicorns and the color purple and pink and red green and blue I am happy so so very very happy and joyful so you can see Oh some couple things are wrong here this is not at all correct so what's happening here it's getting the information from the it's getting the information from the JSON file and it's adding those numbers together it's saying 3 plus 3 plus 3 plus 3 equals 3 3 3 3 3 so it's not adding them as numbers it thinks everything is a string which is also I'm getting some goofy results here so one thing that I need to do here is make sure that when I get that score I convert it to a number so let's fix that right that that score that's coming out of the word listen I need to convert it to a number I should have just happy sad not so sad but not so happy okay happy and joyful and full of scared fear for things that scream and monsters but I like I still recording because it dies by my weird nonsensical typing so you can see I'm now getting now I'm seeing some weird stuff going on here which might just be the fact that I'm not being very thoughtful about how I display the information but let's do some more tests here if I say sad okay that works exactly what I would expect let me move this over here right I got a total score of negative two comparative is negative two because it's negative two divided by one word total if I say happy right okay so this is working and abandoned I remember was in there is negative one so it's just the formatting so what so we're really done I could copy and paste some text like I don't know if I go to kittens Wikipedia let's get some text about kittens and see what happens if I paste it in here we can see I got a score of four comparative of 0.04 this is positive text the words that I got were solid and enjoy I should get a score of six so something is wrong here right what did I forget I made it there's a bug in my code oh I put the score once again I'm conflating the total score and the individual word score so I should really if I want to be thoughtful about this boy I'm terrible this was stuff I should really say var score equals I don't think it was that at all I think it was this was my problem all along so I want to make sure I have a difference between the individual words score and the actual total score that I'm adding up and so this is the total score and this is the total score and the in the things that I'm putting into the list just add some padding here for formatting now happysad this is better yes no no no no no no no no no no no okay so there we go you can see now I have realtime sentiment analysis where I could be much you know if you're watching this video if you're gonna make something with this you could be so much more thoughtful in terms of how you display the results whether it's color of visualization formatting the numbers nicely formatting the list of words in a different way but you have the basic framework for it here I will show you that there is a major issue with this particular approach okay so here's a particular issue here is my text that I am going to type right now I am NOT sad I am not at all unhappy I am not feeling worse today so you can see I've got a really really negative score of negative six even though I said I'm not sad I am not at all unhappy I'm not feeling worse today because this particular technique is only looking at the raw counts words and those scores if I want it to be a little more thoughtful about this I could try to add a little bit of natural language processing for example the JavaScript library NLP compromise that I demonstrated can look for um if a statement is a negation and you could perhaps invert the score and then of course I could use a more sophisticated not training methodology I'm actually not using a word list but having a machine learning system learn about positive text learn about negative text based on just word frequencies and words being next to each other and that sort of thing in a much more openended way but this hopefully should get you started on something if you're interested in its text analysis and how you might apply this to what type of data source and how you might show the result or how you might create an interface for people to type into and give us some information back ok um so in the chat Gaurav writes you must be sad that's why you were insisting on it very much and you know what I think maybe this is a smarter sentiment analysis technique tonight than I knew because maybe it can read in between the lines ok thanks very much for watching this sentiment analysis video and I'll see you in other videos in the future perhaps