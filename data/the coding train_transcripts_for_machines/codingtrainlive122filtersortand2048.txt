hello I am back for a second livestream session today this is the coding train on YouTube my name is Dan I had some lunch and fresh I had a lovely sweet greens bowl with some like kale and cabbage nuts delicious I've got some nice warm tea here slowing down with the caffeine and feeling the music and I'm back to talk about emptiness the void there is nothing but now higherorder functions so I had a session this morning if you weren't here you missed it but it obviously was recorded and archived and I started talking about this idea of higherorder functions what that means in JavaScript and then I moved on to looking at higherorder functions that are part of the array class or the rate object in JavaScript and I think I got through map fill and reduce was okay I feel like I started out well in other words I kind of went out and there's some two things I didn't like number one is I did this whole example about passing a function in as a callback I feel like it didn't it wasn't like didn't have any actual realworld practical Mis to it whatsoever so I feel like that example wasn't so great the example about returning a function I think worked better and then also I feel like once we were kind of doing reduce I was off into the weeds of cryptic syntax but that's what I did I so what what's gonna happen this afternoon is I want to talk about filter it's really I guess I could talk about sort also then I want to take some of these array functions and apply them to one of my particle system examples to kind of like rewrite the code with this new functional style way with arrow syntax because that's what my nature of code examples are that's actually how they're written right now if you go to the github repository so I'm going to kind of go through that so that's an 8000 and then oh my goodness I don't know I'm a time for all this I want to talk about inheritance and polymorphism what is that if you're asking yourself that question good then you could stay and watch that and I should do at least one coding challenge maybe I'll just do a simple spring the thing is I want to get back into the neural network stuff there's so much to get to there but I don't know realistically what I'll have time for today so we'll see that's what's coming down the tracks the coding train choo choo chugga chugga choo choo tracks so to speak so here I am boy I hope someone's actually watching I better hope this is working am i streaming yes there's people in the chat ok so now I'm back over here let's see ok before I get started without any of that while I was relaxing having my lunch call I noticed some pull requests come in so let's take a moment to go to rainbow code which is actually now just github.com coding train slash website and there are a lot of pull requests here I need to get back into them but let's look at this one that came in an hour ago my contribution to the fractal tree coding challenge thank you to Niels Webb who is the creator of the coding train website and approved these changes because as I mentioned something I would hopefully off time to implement it myself is unit testing for this repository in particular does somebody's contribution that they're submitting we can see it right here does it break the build system for the website is there a syntax error the system is being built with Jekyll and this is a markdown format special for Jekyll I suppose maybe this is like yeah mole somehow I don't know I don't know what a this stuff is what did I say Gamal was this before I mean this is about what it actually stands for but I like to think of cents for ya markup language ok so thank you to a Rashad and so what I'm going to do is I'm going to merge this live my sound board is working again how far can i zoom in on the merge button I want to be able to do this through like some gesture oh no wait one more click there you go all right so this has been merged so what happens here what is going on if I go to the coding train comm this is the new coding train website you can see here that there's a little note at some point be actually great to have a little big like on air live on air right now those blinking red things on websites is a little probably passe so to speak but it could say it does say tune in live right here and up so now I want to go to coding challenges and I'm gonna look for fractal tree 3d fractal trees which is the one that that was just contributed to I think it was this one so each challenge now has a card with a little thumbnail the number description this will take you directly to YouTube to watch it and this will take you to a page on the website where it looks like the site hasn't built yet so let's make sure which one did this go to this one went to 14 fractal tree and I am on 14 fractal tree ah just one refresh and here we go now we can see that Raja tz contribution is here thank you for that I am going to click on this it uses code pen I love code pen and there we go beautiful work I like how there's like a little bit of first of all couple things let me mention so this is an expansion off of mine for a number of reasons number one is I love the use of the different thicknesses of the branches I love the fact that branching to the left and to the right both have different angles and this lure of lovely addition of leaves these green ellipses that look like they're rotated a nice way towards the end if you know one thing that I uh you know that I think is interesting to look at now it looks to me like this is running at a rather slow framerate so first of all we could say my computer not the best computer in the world it's kind of slow it's it bears some responsibility here but I think that's often a question when working interactive animations is you want to fill the screen with all your stuff that you want to draw and because it's gonna look the most beautiful if you can layer the most leaves but if you can't get up to probably at least 20 24 frames per second it's going to stutter and perhaps that takes you outside of the of the feeling of you know so there's a balance here yet there's a tradeoff do you want perfectly smooth animation or do you want to have as many layers of color and particle leaves things as you want and I would say probably here it's probably worth it with something like this if the idea is to have it feel like it's experiencing physics or in the wind to like reduce the amount of stuff that is being drawn in order to gain a bit and the frame rate so that's and then of course there's always ways of optimizing things and using other environment the canvas is a bit slow of just pure 2d canvas especially with p5 which is a higher level library so there's even some additional slowness there all right so look taking a look at the chat and all right so let's see where now what's going alright now let's go to somewhere just for a moment I'm quite afraid this is like blown my mind what's happened in the last week so you may recall if you've been watching if I even just go to my channel that probably the most active playlist right now with new content is oh I'm not logged in as myself so it looks totally different let's go down to nature of code and neural networks and so here is the neural network playlist and I got basically there's edited versions of everything that I've done in the live stream all the way down to coding challenge number 92 now you might remember that I did a version of M missed digit classification during the live stream in the end I opted not to edit that and post that as a standalone video it was a bit of a mess there's some things in it that there was like a major mistake in it where I forgot to normalize the values of the pixels of the image I was drawing and it also was just there was a lot of me fighting with Dom manipulation which is really outside of the core content of looking at doing classification with a neural network so I might come back to do that again in a more thoughtful way but one thing that I've been but but all of these videos if you get all the way through tenpoint 18 which is right here and you go to the that same website repository and I go again I've got a wreath I've really got to think the organizational structure of this but if I go into courses under nature of code and tenpoint 18 this is the code for the neural network library as I left it neural network yes matrix not yes now if you've been following along I'll just mention again briefly that I am trying to get to the point where I'm going to replace a lot of the internal mechanics of the machine learning system that I built from scratch in a very inefficient way with deep learning is which is a JavaScript library for machine learning that is hardware accelerated this also relates to a project that is happening a research project at ITP right now called ml 5 which is a higherlevel library on top of deep learning is this is not exactly accurate but you could sort of think if you've heard of tensorflow and Charis Charis is a sort of higherlevel library to do machine learning stuff that's built on top of tensorflow ml 5 is a higherlevel JavaScript library built on top of deep learning is I could just click here for a second and go to examples and we can see here here's an example running guess this is a tabby cat this is doing image classification with a pre trained model and you can see that the code is very p5 friendly you're just creating an image with this kitten you call this predict function and you get a callback with results and you see a label and a probability so this is the idea of being able to create some sort of higher level tools to be able to access some of this machine learning except now why am I talking about all this so that's where I'm going and I wish I could just like be here live streaming every day I think I would get further faster but I also have to like research and try stuff out a little bit non livestreaming I'm sort of a full time job which is a wonderful wonderful thing but what I wanted to mention is this code so this is the code that matches exactly with the videos however there's also this repository toy neural network j/s and I put the word toy in there because it wasn't my intention to it wasn't my intention to have this be necessarily something that anyone would use for like real scientific work maybe for some creative exploration or to educational purposes or just to sort of play and experiment with but I've been amazed I am like overwhelmed right now there are currently 19 total requests since last Friday and I just really haven't had the time to review them and fall and I've read every single comment I want to give a shout out to where is this particular is it an issue or a poll let me look into the issues to versatil asan github who added this sort of summary of some of the things I've talked about alike these are some things that I hope to accomplish referencing various pull requests and issues that was not a notification for a life slack channel ok good and then some other things that I might do later and there are some discussion then if I go to the pull request there's like a pull request for adding some tests for more activation functions for there's a really amazing one for over learning decay there's another one for multi layer multi hidden layer support so I got to figure out what to do about this I got a carve out some time to go through these and see what I can merge and then I also kind of want to make a list I'll probably keep this sort of like parallel thing going where I'll let this go with community contributions but some of the community contributions that are really helpful I might try to like implement in my own way with the code that's part of the tutorial series so this is what I'm thinking no promises in Elmo I think that's I'm catching up late to the chat I think there's some JavaScript promises joke going on so why am I saying all this so so this I would love to get to a bit more to day but I don't know if that's realistic and maybe what I need to do is work on this quite a bit outside of the livestream and come back and report on it the next time but I was thinking one thing ideas I would like to have a simple classification example I've done as a video tutorial and so what I'm thinking of doing is using instead of doing the digits I was thinking of using the quickdraw data set to do an amnesty like data set so because I think also something that's really easily forgotten is that the act of collecting and preparing your data in a thoughtful ethical and careful manner of course it's fine to experiment and play and and and and in a creative and exploratory way but this is a project unto itself so I think it's important if we're going to have a tutorial series I it's it's not just like Oh get the sample baked mmm missed digit data set that everybody uses oh that's useful too anyway so this is this is where I'm going oh boy do I want to just do this right now oh all right but I won't also like I feel like it's a mistake for me to use M NIST as my core example I'm gay I hooked that up so that I could get notifications from people who are in this patron slack channel in case like the microphone dies or something for some reason I'm getting all these other got to turn those off eventually I get a good system alright so this is coming this is what I'm gonna do next thank you to Rajiv Shah whose blog this is from July 2017 I'm sure I will follow along to figure this out and then there's so much we could do because we could do clustering so much so many possibilities the quickdraw dataset is a really fun dataset okay and it's relates to creative coding I think more than the digit stuff all right so okay so now camera goes off really gonna install that magic lantern thing sooo nice I promise my promise is pending I promise and spending it's not resolved yet it has not been rejected but it is pending so where did I leave off I left off this morning talking about reduce so I'm gonna do a video about filter when I say video I mean tutorial and that will get edited into a separate video alright where's my marker where's my code so I have my system is terrible but I'm gonna go back to it where I have the like console oh I'm in the wrong key camera of the console up at the top notification coming in five four three two one I am going to come here and I've got mine this is where I left off I looked at the reduced function and looked at how I could use reduce to find the largest value in an array as well as reduced to add all the elements of an array together okay so filter is next let's do filter and sort why not right okay yep I'm love the lookout by the way me I am so me sent me a suggestion I looked into it for a way that I can make coding train branded train whistles because that's that could be a nice like patreon reward or something I don't know you all I'm sure would immediately subscribe to the patreon if you would get a coding train train whistle all right I'm back for another higherorder function with JavaScript arrays video and in this video I will talk about filter filters actually to be honest it might be my favorite one of these it's lovely so let's look at what let's so filter what does the word filter means it's it's called filter for a reason just like you might filter your water and and filter out all the stuff you don't want if you have an array that has some grime and stuff in it you could filter it out so how do you do that it's a higher order function so what that means is it expects as an argument some function and what that function is it's a function that receives as an argument itself an element of the array and based on that element it should return true or false and I always forget this I think it returns true if you want to keep it and false if you don't want to keep it so even though it's filter you would think true I want to filter it out I think it's true I want to keep it we'll have to try and look up and documentation okay and I'm going to do the same thing so this is where we last left off of this reduce stuff she's still here after that thank you and so what I'm gonna do is I'm gonna keep this same little silly array and I'm gonna Simon write a function and I'm gonna say it is you know interesting let's mmhmm let's call this function is even so what this function is going to do is it's going to take a number and it will return true if it's an even number or false if it's an odd number so it's going to if numb and how do I do this I can use the modulus operator the modulus operator see the coding train video from go 11 about modulus is an operator that gives you the remainder of division so if you divide something by two and get a remainder of zero it's an even number so if nan modulus two equals zero then I want to return true otherwise I want to return false now I always do this because this is the kind of person I yeah I will write it in seven lines of code to make it say exactly what it's doing even if it can be done in one line of code but this is this is a moment where I think it's worth today these videos are a little bit about reducing the amount of typing it's worth saying that I don't need to say if this is true return true if it's true just return the fact that it's true so this evaluates a true or false I'm gonna just return that so I can do this now I should be able to say what's I should be able to say Vale's dot reduce is even so the question is is my array going to have only left in it the even numbers or the odd numbers we could look it up in the documentation I could speculate but we could also just try it now I'm pretty oh this didn't say reduce this should say filter of course I should be filtering based on this function hello and I'm pretty sure let's just double check I'm pretty sure that this is the case where it creates a new array and returns back like I like we saw with the map function so if I save this here and I hit refresh we're say ok so that's the original array so this is not working yet I want to say vows equals the new array so I'm going to overwrite that variable with the new array that's been filtered and I'm gonna hit refresh and there we only have the even ones left so we have the even ones left because this returned true so if it returns true keep the value if it returns false don't keep the value and by the way what I'm going to do with this later in like a particle system example is I have an array of all these particle objects I could just say filter out all the ones that are off the screen our filter all the ones out that alpha has faded out to zero so that's why this filter can become really really useful so let's now shorten this using es6 syntax one thing I might want to do is just use this as X right change this to X now I'm gonna get rid of function I'm gonna get rid of the name I'm gonna put the arrow syntax in I'm gonna forget about this and I'm gonna get rid of the return because it's assumed so basically this is what I can do right this is basically I can now write that I do that really quickly because I'm kind of assuming you've watched my previous videos where I step through that more slowly but basically I can say hey filter every value X based on the weather X modulus two equals zero so this should give me exactly the same result again this is the thing this is why I hesitate this is so unlike me I don't just I I would write this in like 10 but there's there's a wondering beauty to this because even though I feel like this is cryptic and a little harder to follow there is a moment I think after you get used to this arrow syntax and write a lot of these functions and I'm comments are going on that I'm gonna look at in a second that you start to get used to this and this this becomes a bit more intuitive and it actually can make the code more readable oh there we go it worked now I can say let's just filter it out for the odd ones equals one now I have the odd ones I could say not this and that would be that's like not the odd ones there's also the even ones and we could see there we go so wonderful I'm gonna take a look at the chat and see that I got some extra notes in there oh yeah okay so um alka in the chat points out that you can filter by truthy and falsy values not just explicitly true or false what does that mean in other words I could filter out let's say I had an array of objects and a few of them were undefined you know we're empty I could filter out any spots where something's undefined so many things in JavaScript can be sort of like as false are true based on its its value like an object exists it's true if it's undefined its false so I could say so this would say like hey I have an array with stuff in oh then this actually oh okay so I could actually just do this right that's what that's what Alka is telling me so I could check like Oh filter out just keep everything that's not undefined right so this if I did this it would give me five four to one because I would filter out the undefined but undefined is like a false e value so I could just filter out the items that like kind of turn into false things and actually this is gonna give me yeah right so this worked as well and I could say not X then I have an array with just undefined okay so I think we've seen I think this has been good I think we've seen filtered filter filter filter the function filter do you have any questions we're not actually in the same room at the same time because I'm recording a video there is a live chat going on let me check if there's any questions oh that's a great example Alka I love that Oh X modulus 2 for example okay okay two wonderful tips that just came in from the chat that I would love to show this is great having a live chat wide for these videos so let's say I wanted to do that eat that even thing again where I'm keeping only the even values I had it like this X modulus two equals zero that's the even ones well that's silly X modulus two evaluates always to zero or one one being true zero being false in a sort of truth me falsity way so I could have actually done this and that's gonna keep the odd ones and if I were to say not I think I'm gonna need parentheses yeah I'm gonna need parentheses around this and now I'm gonna get the even ones so that's lovely then there's a lot of times when you're working with strings that's that I've had this problem actually a ton so let's say I have a this is gonna be useful let's say I have a string it was a dark and stormy night and what I'm doing is I'm saying let words equal s dot split and I'm gonna use a regular well I'm just gonna say split by space and then I'm gonna say console dot log words so you can see uh it was a dark and stormy night now Oh interesting so okay so things things could happen like what if I had two spaces here by accident and I hit refresh look at that because I had two spaces I got an empty string by accident now the truth of the matter is if you watch my videos about regular expressions I can be more thoughtful about the split what I pass into split and use a regular expression for a particular pattern to match but even so like live item you might not know I can break expression as a way of creating a pattern and so what I could do is say anything that's not a word character and what I wanted to see here is whenever I do this I always get things extra empty strings this happened even here so this is something that I do in one of my previous videos this is basically a secret code for saying split by anything that's not a through Z or 0 through 9 and that has to do with meta characters and regular expressions but actually I'm always having this problem where I get these extra empty strings so I could always just have a filter now filter by s s length by s dot length so look at this this should say because it's true or false see if this string has a not s dot length right if the string is the length of 0 I should filter it out so now let's do this we can see oh no no that didn't work not maybe I shouldn't use s here let's use X filter X not X dot length Oh No X dot length I want x dot length ah the opposite that was right so I can use s here I just was using s in too many places because it was a string so word word dot length right so I want to use the length to evaluate the word whether it qualifies or not I could of course say like greater than 3 right if I want to just have only the 3 letter words this will get rid of it an A now you can see I only have darkstorm you got rid of was 2 because it's not greater than or equals 2 so you can see how this filter you can chain these kind again I've got these really long lines of code which is very unlike me but you can see I can chain this stuff so I take this string I split it up so I all the words but you know what I actually only want the words that are three or more characters and instead of having to write a loop and an if statement and you splice how I always do it this is a nice really one line of code kind of way of using coulter oh I'm happy about that okay so thanks for watching this video I hope this was helpful to you about filter and I will come back in one more video I might as well I believe I've covered sort somewhere but maybe I'll make a standalone video that's just about the sort function and that'll be the last one that I'll do in terms of these higherorder array functions thank you okay so Tim asked will you merge the pull request on the toy a lot repository I want to I just it's I'm a little overwhelmed by how much how many contributions there were I want to be thoughtful about it I guess I could just kind of like but I usually do with the open source project this I just merged birch merger in March but I've learned that maybe it's helpful to like have a process and be more thoughtful about it so I'm gonna try to do that alright right I don't even need dot length right because an empty string would evaluate to false but what if I if I had the word false in there I could have a problem right look at this it was a dark and stormy false nice night if I do this oh no false meet it how interesting I would have thought this would evaluate to I would have thought quote false in quotes would evaluate to false all right false will be truth e false does not equal false okay well what do I know I don't know any of this stuff maybe merge video again all right sort oh so close I don't really well do sort it's fine because I'm just here I got to do sort okay now one thing I want to do with sword let's use what's a good there's a often I'm finding myself that I want to sort an array of objects that's often buy a certain property of that object so I guess I could just make something up or could I find like a JSON file with some data in it that I could use that I could sort let's think about this yeah word counts actually so you know what let's do the word counting thing that's that's where I covered sort word counting Schiffman sort o so somewhere in here I bet I I do it in this video oh but that's a processing one I think I have a JavaScript one where I do it anyway well we'll do it here this is perfect okay ah wrong thing oh all right okay sort the colors Oh sort the colors of a rainbow I don't know why I'm so standing in front of the code so much today all right if you've actually managed to sit through and watch all of these videos about all of these different functions I'm kind of amazed and it really the truth isn't that the point of what I'm doing is not to like cuz there's a lot more of these array functions is did I say this already in a previous video but is not to go through all these one at a time and explain every single one as useful as that possibly might be in some cases but if you can kind of understand how they work and then figure out how to look up in the reference in the documentation you can look at all the array functions to figure them out for yourself but I'm here let's do one more one more really useful one let's talk about sort so I'm gonna come back over here I'm gonna save I'm gonna come back to this word stuff because we're gonna need that in a second but let's just look at the let's just look at this array of vowels for a second so I'm gonna say console.log Val's and I'm just gonna say Val sort with no function passed in and console dot log Val's so let's see what happens and let me give this the number nine I'm gonna hit refresh now we can see look at that it's sorted it in numerical order from lowest to highest that's ascending order and in fact it didn't make a new array it sorted exactly that array so this is important to realize this is a distinction that we've really got to pay attention to so far in looking at these filter makes a new array reduce well reduce doesn't make an array it reduces things down to a single it could make an array but that's a special case reduce and map make a new array Phil Phil's an existing array and sort sorry filter and map new array Phil and sort act on in existing reduces a special case so that's kind of important distinction between all of these so but how did it know to do that well sort you kind of like would say like oh I sort it should sort by numerical order and if these were words you know a Hello be goodbye you would guess it's gonna sort them in alphabetical order now if this is capital B that shows up first because it's actually going to sort by capital letters first if there was something else that I was gonna look at here I wasn't gonna say capital B yeah if it's also like numbers and letters it's gonna first put the numbers and then in out in numeric order and then the letters in alphabetical order so there are there's a default way that an array will be sorted now let's let's look at this case what if I had just an array of objects so what if my array was actually something like a bunch of XY pairs so this is now an array and I oughta format it for me of two objects each with an x and a y well what if I sort that well it didn't change didn't change the order five six to ten all right well let's be sure about this let's say to ten five six and let's do it again to ten is first well that's there and now after sorting it to ten it's the same order so this is the thing there is a default way of sorting stuff but JavaScript the sort function only knows that default way for certainly kind of obvious things like numbers and strings if you want to sort something yourself you need to write your own comparing function this is why sword is a higher order function because it expects the sort function expects as an argument a function which you could call the compare or the comparator it's not actually a word I just feel like there's all sorts of goofiness in Java with these like longwinded strange words but you need to write a function that compares and what does that function look like so let's come back over here so let's say for this particular case here what I wanted to do is I wanted to sort this by the Y values so I would write a function I'm gonna call it compare and it's going to compare two elements this higherorder function requires two arguments two elements of the array and it's your job to say which one should go before the other and the way that you can tell the way that you can tell the sword function to do that is by returning a positive or negative number and I can never remember which is which but positive maybe means a goes before B negative means B goes before a and zero means they're equivalent or it's the other way around I always just try it both ways and eventually I figure it out so for example I could say return a dot Y minus B dot Y right that makes sense because in this case we're going to have 10 minus 6 is 4 or 6 minus 10 is negative 4 so if I put that compare function right here in Val's and I hit refresh we're going to see that 6 comes before 10 let's change this to B minus a and we're gonna see that 10 comes before 6 I know this is small but can you see that 10 comes before 6 so this and if they're equal but that value is going to be 0 so what other ways can we have fun with this well let's go back to let's go back to this it was a dark and stormy false night it was trying to league that's false let's put this back in here and let's say what I did with filter in the previous video is I filtered out all of the words after I split up this text that were less than three characters and let's just split out let's let's actually well three or less so let's make it two or less so let's just make sure this still works we can see ovale fine I'm gonna gonna comment this out I'm not using that anymore I'm just gonna look at this code and I'm gonna see okay so that's my was dark and stormy night now if I were to just say right before hear words dot sort I would get and dark stormy and dark night stormy was but what if I wanted to sort by the length of the words so I would we need to write a compare function and so I could start doing this with function compare a comma B return but here's the thing I'm trying to use as much as possible this arrow syntax to be able to sort of in line right there have the function that does the compare all in one line in a very condensed way let's try to do that maybe we've done it I've done it enough times now that don't need to write it first as a longwinded function then make an anonymous function then an arrow function let's do it all at once so I'm going to I'm gonna say we're word Ono so this is a comma V try always four up so this is the the the sort that compare function requires two arguments two elements of the array that I'm going to compare I'll keep this a and B sort of variable naming it's totally arbitrary I could call it cat and dog then I want to return the the difference between the lengths if one if one's length is bigger than the other it should be after it so I'm gonna say B and I don't need to say return I'm just gonna say B dot length minus a dot length so this should this should give me now a way of sorting the array where the longer ones appear at the end and let's see I probably got this backwards I always get it backwards I got it backwards of course where the longer ones are at the beginning so you know I could have figured that out but in the end I could just say a minus B and then there we go was and dark stormy so you can see three letter three letter for letter five letter five letter so this is the way that you can sort you can sort custom any list of any array of stuff based on however you want to compare two elements of that array all right now I'm trying to think if there's anything else I have to say I think that's it so we were done we've gotten through all this stuff what I want to do now is I want to look at taking a lot of these concepts into a kind of creative classic creative coding scenario a particle system and using a higherorder function to write a bunch of ways of managing so do a bunch of things to manage that array of particles and I'll do that in the next video which you might may or may not choose to watch thanks very much okay okay I should be back I didn't check the sound or anything but I think everything's hopefully working let me know if there's any weird glitches in the sound or video but I am back alright sorry about that I don't know why the stream crashes every once in a while but it does so I'm so excited to get out of this weird silly way that I have the screen here and let's get to the putting out lets me find let's see if I can find I want to look at the particle system the particle system coding challenge and I can't remember yeah so this I didn't use maybe it's fine I didn't use P vectors I mean p5 I didn't use create vector for this simple challenge and what I want to do is the filtering and yeah I think it's fine let's keep it simple let's keep it simple so what I'm gonna do this is exciting I'm gonna go to the coding training calm and I'm gonna go to coding challenges and particle systems I'm gonna go here and I'm gonna hit get the code let's see what this gives me oh that's gonna give me the processing one which is fine that's what I did it in no it's JavaScript ok this is the JavaScript one so I'm gonna put this now on the desktop and I am going to go to terminal and I'm going to go to desktop particle system and open it up an atom so here we go so look at this look at this look at this horrific Ness I'm going to so what are the things that I'm gonna do let's first let's just run this so this is the particle system so I can use filter to filter out particles that I no longer need to draw anymore I could use like reduce to find the centroid of all the current particles and draw that as something what else what else what else could I do I mean sort I could do in a weird sort of way to sort the particles by like where they are on the screen but I don't know what I would visually do with that I mean I could I could them a color based on where they are but I also just know their Y position so so what what what other ideas do people have the ideas that I have that are I mean I could use map for something probably so filter I definitely want to use in a four of loop for of loop filter what else Z sorting I was gonna do this Z o z sorting that's a great idea which are on top ah that's a great idea because without the fake depth I can draw I want to draw them in a certain order so what would I but visually what do I want to do like sort them by their color or something yeah I'll do that so I'll give them like a random brightness value and then sort them by that or something like that to draw them in that order that's great okay so just just for the sake of argument right so I could sort them so like and actually I could give them no alpha and I could always draw them so the brighter ones are on the front on front so I'll do make this change later that's a great one okay what else rotate there XZ to make it look like a camera going around them oh that's kind of cool all right so I don't want to get too crazy with it I just want to demonstrate the fact that you could sort them and have like fake depth because of that okay I'm not seeing any other suggestions so I have a sort I have a filter I mean maybe that's enough I could use fill but to start with a bunch but I don't that doesn't really I don't care about using map and reduce I'll do the centroid with reduce why not okay great all sort is also useful for sorting a population by fitness and genetic algorithms yeah okay all right I feel like so one thing I want to do is I think it makes sense for me to put this in a separate file even though I did so I'm gonna make a separate particle jas file because I'm gonna keep using this for the inheritance and polymorphism stuff particle J s and then index.html I need particle J s I don't need the sound library everything's good sketch it now a little simpler oops let's just improve this a little bit okay great just want to give myself some more space in the console there we go all right I think I'm in good shape so this is coding challenge 78 all right okay I could use fill to populate the initial array all right so any people try that too okay hello welcome to a video about higherorder array functions so I just made all bunch of individual videos with kind of some nonrealism like madeup scenarios to cover map sort reduce filter and fill and I thought there might be a way of making use of all those functions to improve I don't know if it'll really improved but to change to adapt my coding challenge number 7070 eight simple particle system so this is the coding challenge this is the code it's got an array in it I'm doing everything rather manually with a loop what can I do to use these functions so let's let's start with let's start with fill so the first thing I want to do is let's see if I could use fill to start the array with like a hundred particles so I could say new array 100 and then oh so here's the thing so I could say let's say I could obviously I could write a for loop right normally what I would do is I would have a for loop I equals 0 I is less than you know particles dot length or less than three hundred particles index I equals a new particle maybe you've seen that before but let's say particles dot fill now here's the thing this is what I want to do this is not going to work by any stretch of the imagination this is kind of like what I want to do but it will not work I want to make a new particle and I want to fill the whole thing but this is a problem let's just run this and see if we get some errors we're leave that work just fine but let's not add any particles and draw and let's look at the array and it is completely empty so the reason is fill needs to fill an array that has stuff in it already so what I could do yeah yeah oh shoot I'll just give you weird I would have thought no no cuz I have to map I should just start over I'm looking at the chat because I could see get rid of the new keyword right cuz I could I just sort of curious for a second here no no but it's not a yeah no all right what I want to do yeah I thought it would have been 100 references to one particle but maybe because I updated it Oh cuz I updated it and it it it moved oh you know what okay okay okay let me start this over because I know what's going on now you start all the way back in the beginning all right so let's see let's start with by saying the oops what happened here let part let's start by saying particles is a new array with a hundred spots now in theory what I kind of want to do is this particles dot fill new particle right I want to just say hey fill all the spots with a new particle and I already told you there's a hundred spots there this is kind of gonna do something interesting I'm gonna actually just to demonstrate I mean I'm gonna take out adding particles and draw and I'm gonna run this real quick and see today you see something there real fast look at that real fast what was that well actually what it did is it made a new particle and it put that new particle in every spot in the array but it's all pointing to the same particle object I need a different particle object in every spot so in this case I've actually really got to use the map function so I can fill it I can fill the array with like emptiness and then use the map function to create a new particle for each and every spot so what I can do here is I can just say fill dot map and then each element I'll call it P should be a new particle so this now should give me whoops what did I get wrong here particles dot film at P is a new particle that looks right to me hopefully there's 100 undefined spots Phil Oh Phil requires an R no yeah that didn't work either no no no oh it's making a new array oh it's making a new array map returns a new array ah why didn't this work uh okay so here's the problem I forgot I know maybe this isn't the greatest thing to do because map requires a new array so this is all sort of silly that I'm doing here so it would make more sense for me to say this because why make a new array twice so what I want to do is make a new array fill with nothingness I could put null in here and then map oh I don't like where this and then map to new particles I hate this yeah that worked I got a little burst of 100 particles can I take out this null yes so I don't know do we like this this is almost ridiculous I don't know if I really need this but it works I have a particles which is a hundred or a hundred a of a hundred particles and each each element is a new particle object and you can kind of see that one line of code great okay so we used this video we now use to fill oh and we use map oh how lucky for me and again I've really got to pay attention to what just acts on the current array what makes a new array alright so what can I use next let's go ahead and use filter I'm going to show you something interesting about filters so if you've looked if you've gone through this count if you watch this challenge and looked at this code look what I'm doing here I have this very awkward loop that loops to the array backwards of using the index I access each element of the array update I show I check this finished function if that finish function returns true I use the splice function to remove it out of the array so I can really improve this let me add this back in where it adds five new elements to the array and maybe there's a way I can do that with one of these higherorder functions there we go now we can see here's the particle system one thing I could do to improve this is let's just use let's just use the for Loup so for every particle of particles this is a new this is a loop that's part of e a loop structure this part of the JavaScript es6 I have a whole video just about this loop it's saying every single element of the array reference that each element in the variable particle so I can just say here particle dot update particle dot show so that's nice I like that already better than this down here which I'll comment out so this is a nice simple way of iterating through every element and there we go I probably just use two for each loops and this is about higherorder functions so we can see this is the same it now let's look at particles dot length 1975 2000 190 it's not deleting any of the particles as they fade out so how can I do that I can say in instead of having to check each one and remember the index and use splice I can now say particles dot filter and what do I want to filter now remember I'm gonna I can write the function to return true or false to tell it whether to keep it or not if you watch my video on filter all in line using the arrow syntax so really what I'm trying to write here is I want to write a function like keep and it receives a particle and I'm going to return P dot is finished right and in ultimately I want to keep it if it's not finished so this is the function that I want to write to filter everything out it returns true if it's not finished so keep it but I can just write this as and not so look at this now and I have to remember on my list filter is one of those ones that returns a new array so this actually isn't going to do anything unless I say particles equals particles dot filter filter them all out based on the is finished property and now okay it's finished is not a function just calling just called it finished okay and there we go now is this really working let's check particles not lengths to order 55 to 55 it makes sense that it's always 255 because its lifespan starts at 255 and goes down by one and I'm adding like five per frame somehow the math works out then it's like nicely 255 that's very interesting all right so look at this now the reason why now these this particle system example is a bit of a simplified version of my nature of code ones I just want to really briefly go to github github.com slash Schiffman slash the nature code examples p5.js so if you want to see more examples that do this and I go into chapter four systems I have a lot of particle system examples here's one of the systems of systems of the particle system class you can see I am now doing this in my examples with some extra comments so this is this is now if you want to see many more examples where I'm kind of using this type of es6 style to you operate on an array of particles you can check out these examples as well okay what else can we add to this let's use what else can we add to this let's ah let's use reduce so let's see if we can use reduce so one one thing that I might want to do with reduce is something that happens in my flocking examples for example is I want to calculate like what's the center what's the average location or the average velocity of everything so let's compute what's known as the centroid which is a term for the average location of a position of a collection of things the center of it so let's think about how I would do this I want and I can get rid of all this now so I want to say particles dot reduce and remember reduce always gets an accumulator and a particle right there's an accumulator and a particle and what I want to do is I want to add up each particles location so there's a bunch of different ways I could do this for example I think it might be simpler right now to just do it with the x and y so first let's just calculate this X I'll call it C X for center X and this is going to be I'm going to call this X so the X is just to have like fewer shorter variable names X is the accumulator P is each particle so what I want to do is say X plus px right I want to add up all the X values of P this is not going to work right because if remember if you watch my reduce video the accumulator has to have an initial value if you don't specify it's the first element of the array well what's the first element of the array it's the particle object so in this case I can't like add the x value I want the I want the first element of the array to be the first particles X value but what would be simpler here would just be to explicitly initialize it at 0 so I can then say just comma 0 and this should give me the center X location right I'm taking all I'm adding up all the X values now I did I need to divide by the length but let's so this should really be this is really some X I'll call it the sum of all the X values this is this would be some Y and I'm going to do this and and just to rename the variables I'm going to do this right and then I should be able to say Center center X equals some X divided by particles dot length and Center Y is some Y divided by particles dot length and let's just draw a nice you know red circle right there and see what this looks like let's see if I got this right there we go you can see that's always the average center of all the particles the centroid of all the particles so again does this what have I done here I could have written a loop I could have said some x equals zero before the loop every element of the loop I say some X plus equal the particle that X so I don't know what if I really have I improved anything but this you make this is a way that you could write it using a higherorder function called reduce now could I do this in one line could I do this without separate x and y values and I can let's look at that so one way I could do that oh you know what though the particles don't have vector objects so I might almost want to leave this as an exercise I'm gonna leave this uh in some way so what I would say is like go to where was that where was that go to this particular example right where I'm actually here each particle if I go to this example in nature of code and I look at the particle object the elements are not or actually p5 vector objects so how would you write this function to add everything up with a p5 vector so let's actually I think we can actually do this here let's do this here okay so let's say I were to say I'm gonna comment this out comment this out I'm gonna say let some I'm gonna say some V which is the vector sum be create vector 0 0 that's the accumulator right that's going to be the end that's the accumulator I'm going to make an empty vector at 0 0 then I'm gonna say I'm gonna call this accumulator V then I'm gonna say let some V equal and we do the same exact thing particles reduce this accumulator which is V which is going to be a vector P then say V dot add because I'm gonna use the p5 vector syntax it's really crazy pxpy so I believe the the p5 vector object has an ad function and I can add to the vector x and ycomponents directly and then I'm going to give this as the initial value of the accumulator so really what I probably want to do is just put this right here be a little less confusing line of code I can't even fit it on the screen here there we go right I'm reducing let's see if we got this I'm reducing the array I'm gonna accumulate a bunch of vectors with the first vector being an empty vector with zero zero in it and then for each one of those I'm gonna add to it each particles X&Y and then I'm gonna say I know I'm standing in front of the code right now I'm gonna say some V divided equal particles dot length well I can't do that I have to use it's a vector I've used the divide function divided by the total number of particles and then I'm gonna say some V dot X and some V dot Y so let's see let's see how this goes are you actually still watching this video because I'm gone up the deep edge with all these things okay let's go back to my sketch same result so that's working to calculate the centroid so you've seen now I can use filter I can use reduce you know here's let's let's look back at the list filter reduce fill map I still have swords well um this video is just gonna be longer I'm gonna use sort in this video so here's the thing I don't think that the code is necessarily gonna run faster and more efficiently this way and this could be a problem if I have a particle system with thousands hundreds of thousands millions of particles I really want probably then a simple for loop is going to actually execute the fastest but there's something nice about learning how these functions work and sort of seeing how this can be done because you will especially see these in libraries that are manipulate large amounts of data in JavaScript libraries that are kind of using this sort of style of coding so hopefully this is helpful to you let's do sort so I'm gonna let's do some so one thing you could do about sort is you could like why would I want to sort these particles well one thing might be pause for a second why would I want to sort these particles well one reason might be what if your create first one if you're actually in 3d space it's sometimes advantageous to know the Z does the order of things because you might want to draw them in that order related to how the alpha or the blending and various things are working but I'm not in 3d but even in 2d what if I wanted to have some type of layering system where I always wanted certain things to be drawn over other things even if they're out of order in the array because right now I'm only gonna draw things in the order that they are in the array so let's create kind of a fake scenario that will do that so what I'm gonna do is I'm gonna go to the main sketch the particle and I'm gonna add oops no I'm sorry I'm gonna go to particle and I'm gonna add I already did this actually I'm gonna add a color variable which is just a random brightness value between zero and I guess technically this can be random 256 because I can get 0 through 255 and then I'm gonna fill by this color and I'm gonna get rid of the Alpha so they're gonna be no alpha now let's look at this whoops let's go back I'm gonna run this and I'm gonna get rid of the centroid just so we don't have that big red dot for no reason I will obviously leave this in the code go back to here now look at this so there's obviously a layering going on here the layering happens to be just the order that the particles were added but what if what I wanted to do for example was always have the brighter ones appear on top of the darker ones I don't know that will produce any visual value but you could imagine a scenario where you're actually thinking about layers and depth and maybe you create fake Z value variable for each object or something like that so I could sort them by their brightness so let's look at that if I go now back to sketch before I draw them I could say particles dots sort and remember when I sort I need to create a function and again I'm using this arrow syntax just almost automatically now this is this working for you please let me know it's all these videos help you kind of just see it where I get where I start with two elements of the array a or B and now it's up to me to return a value that says which one should be before the other and so I can actually just say a dot color minus B dot color because if you return a positive number a negative number that means positive number means one is before the other a negative number means the others before the other and then zero means they're equal that's how you're telling it to sort so this should be a way of sorting the array and sort actually manipulates the existing array not making a new one so this now if I run this we should see look at that the brighter ones are always on top of the dark ones which is kind of an interesting effect again you know I you could probably invent your own scenario of layering as to why you want to do this but now we have a particle system coding challenge 78 that has map and fill to create an initial set of particles it has sort to sort the way I'm drawing them based on brightness I'm using a four of loop to be able to iterate through all the particles and I'm using filter to filter out whoops and I'm using filter to filter out particles that I no longer need that have faded out as a bonus I think it would be interesting for me just to try to use for each right so I could also say if I really want everything to be a higherorder function I could say particles for each right and then I could say this but I need multiple lines of code so I'm gonna say P dot update all the laws of physics are like exploding around in my head as I'm using for each loop I can't believe I'm doing it so is this right let's just run this hey and let's put the centroid back in there we go so I can't believe I just did this but a for each loop what a for each loop does and says apply this function to every element of the array and my function is to update and show if incidentally I because I have two lines of code I have to write out the full curly brackets but I could do this I don't know what the point of this would be but if I just wanted to write it like this just to be like kind of a crazy person for today I could say update all of them show all of them and sometimes you actually want to get through updating all of them before you draw all of them so this would do that let's see and there we go I have really I'm like am i a function do I qualify as a functional programmer I seriously doubt it but I have gone through and hopefully shown you a bunch of techniques for applying the arrow syntax and functional higherorder functions of JavaScript arrays in this video hopefully you learned something it will improve or help something you're doing in the future please let me know in the comments and thank you for watching Oh chaining yeah chaining use chaining and do this okay that's for another day reading the chat for a second here hey just 340 okay so I really did get through all this guy all this content about functional stuff any more stuff today yeah I wanted to do inheritance and polymorphism oh that's interesting someone is asking me to turn around the layering just to see what that looks like yeah that's also interesting oh yeah that's too crazy for me me I am so many getters and setters oh yeah we'll see I definitely need to cover that at some point no let's think about how to do this I'm gonna erase the whiteboard we're gonna move on to the next topic I think I should just admit then I'm not gonna be doing the neural network stuff today but I should do at least one coding challenge by the way it's interesting to watch my youtube analytics I'd be happy to like share some of that at some point but like so I almost the videos get edit and I try to release one every single day I usually do it sometime between 700 a.m. and 1200 noon eastern time because I'll like remember at some point but if you look so you know the graph of the analytics is always all these spikes of where I released the video each day but there's if I release a coding challenge video like the double pendulum was like three times as high as some of the other stuff interesting to see all right let's erase all this oh I totally forgot to talk about google Summer of Code I usually do that at the beginning because mmhmm but you know who knows maybe there's a bunch of people watching now I could mention this too let's take a pause for a second for me to mention google Summer of Code so if you are a student you have to read the Google Website in terms of eligibility but if your students your edge of eligible to apply for a google Summer of Code summer of well let me just search summer google Summer of Code okay so this is the google Summer of Code homepage this is a program that I have participated in almost every year and there was one year that I missed when processing was not an organization for google Summer of Code in for the last five or six years if you click here and go to view organizations these are all the these are all the organizations that applied and were accepted by Google to be part of Google Summer of Code and again I'm not an official representative of Google here I'm just telling you about it I am participating through if I keep scrolling down eventually I will find the processing foundation so I am the I am one of the administrators for the processing foundation I think I must have gone past it there it is so the way the google Summer of Code works is if you're a student you can apply to work on one of these opensource projects for this summer you'll be assigned a mentor for example if you apply to processing I will probably be a mentor for a project this summer along with many other people and Google pays you a stipend I believe you know you should really read all the FAQ materials because eligibility and whether you're eligible it's not something the foundation processing foundation of the organization to decide that's something that Google does and how you're paid and what based on where you live and that sort of thing is also all done by goo but if you click on here so I'm going to show you the processing foundation obviously you should look at all these organizations but if you go here you'll see here's the processing foundation creative colon graphic design if you go to learn more you'll get to the processing foundation page which has some more information and then you'll want to click on View ideas list and this will take you to our github page that has a lot of things that we're looking for help with like improving p5.js WebGL testing and updating mobile functionally improving file other method update hello def p5.js website p5 just web editor classroom management system utilize the audio work but exactly there's lots of stuff here for p5 GS then for processing desktop environment analyzation tool so these are all just suggestions also I should mention very clearly that this is a that one of the things we always consider are just libraries for processing or addons for p5.js so and if you want to discuss your idea and I've got a you can go to form processing org and go to summer Summer of Code 2018 and then oh my goodness look at all these things that have been posted here already I've got to get reading through these so people have and there's been some comments already so these are this is where you can make a post about your idea and hopefully get some questions answered you can also tweet at me at Schiffman and yeah so if you're interested I encourage you to apply it's a wonderful program and it's super helpful for us as a somebody who works on a Topa sort of volunteerdriven or donor funded opensource project these kind of programs where you get a lot or a large amount of sub help and support over a intense period of time is really does wonders for the project if you want to see what we did last summer if you go to medium.com slash at processing org this is where there we have a bunch of posts about recent things but some one of these is google Summer of Code wrap up processing meat I can find mm yeah so this is a post on medium that that goes over all these are all the google Summer of Code students from last year and all the different projects for processing that they worked on so I encourage you to check this out okay I wanted to mention that so the question now becomes i editi our rights you never reply to the tweet I actually I do I read all my mentions and I try to reply to all of them sometimes I miss one or two like not attached to my glowing rectangle all day long you know I have to like put it aside for a large portions of the day and time and weeks but I do do to 2048 that you promised us a few weeks ago ah interesting interesting that is not the worst idea I've ever heard I wanted to look look into that a bit more think about it a bit more before I came and did it but but I think I should do all right so I let's um let's think about this what time is it 340 so I really only have an hour all right all right wonderful people watching inheritance and polymorphism with particles 2048 a simple spring challenge oh this is what I want to do simple springlike i springlike Boynton Springs simulation not not like this springtime the flowers blooming although that would be wonderful to 2048 it's gonna make you so crazy right now if I try but it is kind of it's kind of I do I did it would be good to try to do that I think I should do it in JavaScript though because all I can use all the higherorder array functions that's kind of fun all right let's let's see what you guys think I need a little break actually so I can let you guys let all of you watching excuse me put your votes in right now yeah I know 24 24 th drove me crazy before and so the reason why I didn't end up releasing that is because I wanted to go back and like think about it again but okay I'm gonna take a short break I'm gonna mute myself and I'll be back all right I have come back it is time to relax have some quiet time let's read the last numbers in the book this is the very last page these are these are Gaussian deviates they're like my favorite kind of numbers they're Gaussian and their deviant point three three zero point nine seven six point three three seven negative point zero four three negative 0.476 some other ones were negative before I didn't realize that one point five seven seven negative point seven seven five negative 0.106 0.189 point negative point one to two all right you can all see the results right I'm gonna vote for the spring challenge that's the easiest for me I think I can't look well I see something that's green with a lot of space in it okay really seriously Oh nobody's interested in this inheritance and polymorphism this is gotta be pretty good I could make a few people happy by doing the spring please right we're gonna do this I don't I never bother to really like think through what I did wrong before but I'm gonna let's let's go for it okay we've got we've got it I've got an hour no chance of getting this done in an hour okay p5 G B 2048 seed each one I'm gonna definitely do this in JavaScript now because the array stuff I think will actually be much easier 400 400 I mean it would make sense to use Dom but oh wait wait I've got a secret a secret k week month sent me his code all right well I've lost where I am all right so what do I need here okay so now I need to be where this inheritance of polymorphism will come another I'm kind of to be honest with you I'm very happy to not do the inheritance and polymorphism right now is I'm a little tired of just kind of technical JavaScript stuff um I do need to come back to that because that I think is core core material to be oops to be a part of the tutorials on my channel alright all right let's now go to 2048 and 2048 Wikipedia I already erased the whiteboard all right let's think about this what was the problem I ran into before the main problem I know okay the main problem I ran into before why not background 51 asks see creative a good question Oh see the thing is you know when I should be doing 2048 I should be doing it about 930 in the morning when I'm like fresh and just had some breakfast and arrived at work doing it at 400 p.m. on a Friday after I do live streaming all day is pretty much a terrible idea I will write but the nice thing about doing this is the more of these that I have the more I can build little machine learning systems to play them which I do eventually want to get to why is this oh my the my keying has a little bit of noise like in it today why how can I do here is that better it's a little better I think all right so it would make sense to do this with Dom elements but I'm going to do this with canvas all right where do we go okay oh look what's pulling into the station it's the classic game 2048 that I always try to program and completely fail at so here's another attempt you hopefully haven't seen the previous attempt but there was a livestream where I tried to do this and kind of ran into a lot of problems I'm going to attempt to make the game 2048 if you're not familiar with it check out the link in the description play it this game according to this website was written in JavaScript and CSS during a weekend by Italian web developer Gabriele Shirley it's now an open source software a project under the MIT license I have not looked at the source code I am going to try to make a canvas version of it I think that'll be a little bit easier just to start then using Dom elements and I'm gonna use the p5 library to draw to the canvas so what is the core let's let me first before I get started coding I really very pessimistic about this let me try to talk through my understanding of how the game works and what kind of code stuff I might need all right so the game by definition is played on a four by four grid now again there are obviously variations of this this is not their their predecessors to 2048 of the same game with slightly different designs and flavors and ideas but the core idea of the 2048 game is four by four grid it starts I think with two random spots filled in with either a two or a four and then you can press a key right up left down obviously on a mobile or touch version you can swipe and you send all the values so if I swipe to the right I send all the values this way so the two and the four would end up here then maybe a new value pops in if a two pops in here and I swipe to the right again numbers that are the same will combine so these twos will combine into a four and so let's go back and look at that and we can kind of see let's see that happening here right as I press down nothing happens I press the left everything was the left of four moves to the left at two uh let me move that to up and then let me move that over those two 16s will combine and those two twos will combine and these two twos will combine there we go that can go down so you get the idea so what do I need well actually interestingly enough all I need to figure out is if I have basically four you know I have a matrix a twodimensional array but it's really just an array of arrays and I did two Betty of it so if I have four if I can figure out how to just condense things to one direction one direction then I don't know any one direction songs otherwise I would started like singing as a joke but I don't actually know the name one direction anyway I'm more of like a 98 degree 98 degrees I don't even remember whatever was in the like 1940s when I was a teenager okay oh yes 2048 if I can just get them figure out how to do it in one direction then if the user or the player presses up I could kind of just rotate the whole thing and go in that direction so so let's let's see if we can figure this out I need some kind of structure for doing this let's go to our code and by the way I just did a whole series on JavaScript array functions higherorder functions like map fill all that sort of stuff so I think I can use that right now so what I'm going to do is I'm gonna have I'm gonna have a variable called grid and grid is a new array with four spots in it and what I'm gonna do is in each of those spots I'm going to fill it and map it with another new map map it with zero zero zero zero so I think what this would do right you're looking oh you got lost in my own world there they'd never write code like this but let's try this so I'll explain this in a second let's see what happens here our object array is not a function where's that line number six oh I need to just start that part over I told you this is a bad idea now I'm gonna try to use higher order functions I'm gonna get all lost okay all right so let's start writing some code the first thing I'm gonna do is I'm gonna have a variable called grid and I want that grid to be a two dimensional array really just an array of arrays so I want one two three four arrays and I'm gonna try to use I just made a whole video series about higher order JavaScript functions and array function so let's try to use those so the grid needs to have four rows I'm going to think of those as rows then I can use this function called fill to fill each of those spots and then map and to say each of those spots is going to be an array with four zeros in it so this is a pretty goofy pretty pretty goofy but this should allow me to do I have an error here and I say grid undefined okay so I got close I got for undefined arrays what can i what can I do empty array and then fill it with empty arrays and then have each array map to fill with 0 right with Phil and map I'm like well we fill it with empty arrays then each one would be a new new array an array with four spots filled with zeros I think this might actually work right fill it with Chi just fill it with null though right so I can fill it with oh here's to watch I'm gonna come back to do this ahead grid and the worst I like looking at the chat as if as if I'm gonna be saved by the chat Oh I'm gonna come into this again this is really gonna be like lots of cuz this is you were ready for oh this should work you know I got a better idea everybody relax I'm not doing it that way I thought doing it that way Phil okay all right let me come and write some code I'm going to say I'm gonna have a variable called grid and guess what I'm just gonna hard code it I feel okay with that do you feel okay with that obviously what is it it's gonna start as it needs it's basically this right I need to have four arrays of zeros and let's see if yeah there we go this is that's the book 2048 board I could try to say like new array and fill and math and all that stuff all these like but this is gonna work there we go so now what do I need to do first the first thing that I need to do is for each is unless write a function to do this is add add num add I don't know what's add spot I don't know how to call this add number so what the add number function should do is it should pick a random location that does not already that has a zero and it should add a two or a four there so what I'll do is so first I should check first I need to check is the whole board full of everything that's not is there are there any zero spots so what I want to do okay so let's give so let's make a list of all of the in all the possible spots that I can add so I'm gonna say I'm gonna make an array called options and now what I'm gonna do is how could I use to get the index values out I'm just gonna loop through it so I'm gonna use I and J I kind of have this idea that I'm gonna use all these fancy array functions you're just gonna loop through it I and J and I'm gonna say if grid I J equals 0 this is a valid spot options dot push and I'll just make a little array with I and J I and J in it maybe I'll make an object X I Y J ok so I'm going to put a little object in that array now what I'm going to do is once I'm done I'm going to say let spot equal a random option so if options dot length is greater than 0 then I can pick a spot and then I'm going to say grid spot dot X spot dot Y spot dot y equals and I can I basically want to pick I don't want to pick a 2 or a 4 so I can use a ternary operator whoo I've gone totally nuts today which basically what a ternary operator does is it says what kind of pick a random number and okay hold on I'm gonna pick a random number R is a random number between 0 and 1 and I'm gonna say is are greater than 0.5 if it is give me a 2 otherwise give me a 4 I think and I don't know if this should be in parentheses or not I don't think I need it so this is a nice little way of just giving me based on whether R is than 0.5 give me a two or a four I could've written an if statement but everybody always complains when I don't use the ternary operator so I'm gonna try using it and who knows if I got it right so let's in setup I'm gonna say console dot log table I'm gonna say add number add number and console dot table grid console dot table is a really nice way to display a array in the browser in the end of JavaScript console in the browser so let me do this so a look at that look at that let's do it again 2 & 2 2 & 2 all right so in a way like almost 100 just do this the entire thing in the console and not draw anything because I could just do the whole thing in the console and play the game but I think it's gonna be much easier if I can represent what we're seeing in the console in the canvas so let's put that into draw so here I'm gonna this is my nested loop that I'm going to be using constantly and I am going to first draw a rectangle and I guess though the size is always going to be the width divided by 4 you know I think I can probably for right now just say it's a hundred like I get a hard code a lot of stuff cuz it's 400 by 400 refactor later and so I'm gonna draw a rectangle at I x WJ x www and I'm gonna say no fill stroke weight to stroke zero and let's make the background 255 and I should see a nice grid now there we go I've got my nice grid now what I should do and this is almost like too big I don't need that much space okay now and I'm gonna move this over a little bit so I'm not staying in front of it so much I am going to now I should also say if grid I J is not equal to 0 I could draw the number there now let's do to use the text function in p5 so I'm gonna say textaligncenter text I'm on to draw the value so I should actually just let me get the value the value is grid I J and so I'm going to draw that value at x w w / that's kind of like the center J times W minus J divided by 2 W divided by 2 what does that do and I'm gonna say text size 64 I don't know fill 0 no stroke this should be rendering it actually I should just put this in its own function just to kind of like get out of here function draw grid and I'll call that in draw so let's see how this goes yeah that's not so horrible I've seen worse so let's W divided by 4 about oops Oh what happened here J times oh wait oh wait does the text draw from let's see this so I'm seeing a 4 times Oh interestingly I am seeing things in the wrong differently than I'm seeing them here because the way that I'm treating columns and rows and I think I'm drawing stuff above so it actually should be J times W plus W divided by 2 why do I sometimes get one thing textalign textaligncenter Center that's what I meant to do thank you textaligncenter Center there we go I knew those that's what I wanted to do but why am I sometimes getting only one number maybe I'm not anymore right before I was getting one number I'm not any oh why did I only get one number what's the grid zero two zero zero zero four zero isn't is in three how I'm like hold on let's say I let's actually draw the let's draw the coordinates look at me I have everything shifted over wrong that's clearly the problem so my X location is I times I times W minus plus what am i do / 4 it's a plus I lost my mind oh what a terrible error that's much better sorry you had to sit through that so now it's fine and now I can put the value there there we go so now this should work this is my opening board no matter what poof okay we're getting there 2048 here we come so now what's the deal I'm just gonna say for right now whenever I hit the spacebar I'm gonna send everything to the right so what I need to do okay so let's think about this there's if I have an array of numbers and there's so many different ways you could approach this problem when I'm sure I'm not going to do it in the most efficient or sensible way but the first thing that I would do like let's say let's say this is the row the first thing that I would do is just pack everything to the right so that any empty spots would be left on the left side so let's first do that so that's let's write a function called slide so I'm gonna write a function called slide and it takes a row which is an array and I again I might have to thank you I know I'm in the wrong camera alright okay let's go over here so I'm gonna write a function called slide and I'm gonna give it an argument a row now I know that I probably am mixing up my rows and columns have to figure that out later but I'm going to assume row it's just a single array and what I want to do is I want to look through I'm gonna take that row and I want to filter out I could use filter to I mean it's sort of silly I just want to move everything over if it's not a zero so let's try using let's let's try using some array functions I'm gonna say row equals I'm gonna want to return I'm gonna so I'm gonna we're going to return an array so array equals Rho dot filter so this is actually going to keep everything that is not a zero in the same order this is kind of crazy but filter is a function that takes any value and let me just and that and that because there's a true or false test a map would be interesting here too anyway I'm gonna do this so this should just see then I'm gonna say return array so first I'm just gonna oh no no and then what I need to do is I need to say I need to add two I need to add however many so whatever many their rates are like the missing is all I could just sort new I can't sort it missing equals 4 minus array dot length and I'm just going to I'm gonna say let and then I'm gonna say missing let zeros equal an array of missing size filled with zeros and then I should be able to just say arrey dot put now what how do you put something on the front of the array push would go on the back which maybe is fine because I could be sliding that other way just be sliding the other way so I'm gonna say push the zeros and then return the array let's let me just test this function out right so the idea here let me get rid of this console this console got table stuff where is that yeah I don't need that anymore so let's say I haven't or let's say I want to say slide and my array is zero zero two four okay so push doesn't do that it doesn't push I use can cat maybe can cat where's I slide array can cat zeros know how do I join join concatenate concatenate let's look at the array page Mozilla array concat oh it makes a new array it makes a new array okay so I need to say array equals array can cat zeros okay there we go now let's take a look at this let's get out of here go back to here there we go it slides everything to the left yeah and let's just try some other things slide 4 0 2 4 4 2 yes that's good everything's going that way which is fine I don't care which direction that's fine with me so now I should say every time I press a key I'm just using the spacebar right now if key key equals space what I want to do is loop over loop over the grid and say grid index I equals slide grid index I right so this is sliding them over for each one oh they're going up so that's great so after I do that right each time after each time I play play the game like this is one this is one move so to speak then I should add a number again add another two or a four randomly great this appears to be doing what it's supposed to be doing be nice to have an animation but there is no animation now there's no more room left that's fine okay okay all right so now I need to combine so just like I have this slide function now I need a combined function so assuming that I've slid everything one way or the other what I need to do is if there are two that match starting from the back they should be combined into one number all right I know this is where I ran into a problem before someone's I'm gonna need somebody of watching this live to help me oh if nothing moves no tiles should be added okay okay I gotta get to that later yes so that's a part of the game we don't if if you're done if nothing can move you can't add another tile but I will I will remind me I need to fix that I need to fix that at some point so let's do combine so if I have a row what I want to do can I use reduce filter then I could loop through it for sure so let's let me try doing this very manually right now let me Luke from the back right let me loop from the back all the way down and first I want to say and I actually just want to go to here because I want to say a is the this one right the current one that I'm at like the last one and B is Rho I minus one and if a equals B then Rho I should equal a plus B and Rho I minus 1 should equal zero and then I shouldn't do any more so I'm gonna say break so this is again I'm gonna need to do more but this and this probably way for me to write this shorter but I'm just gonna go from the back and check the last two like what am i doing whoops I'm in the wrong keyboard I'm gonna check so if this is so we fit got I've already slid everything so if it's like this I'm gonna check this one versus this one if they're the same this becomes 0 and this becomes 4 now if this were here I still have to do more I've got a slide again but let's see here now I should be able to now I should say where I want to slide the grid oh and so hold on oh I'm actually operating on the row itself so in this case I don't need to I'm up this is a little bit this is a little awkward I'm making a new array to send back and here I'm operating on that array so this is a bit awkward but I'm just gonna remember that so I'm just gonna write in comments operating on array itself making a new array and so now I'm gonna say after I slide I'm gonna combine so I'm gonna combine let's see if this works okay I forget what I just press spacebar and everything goes up oh boy error error cannot read properties 0 of undefined at add number sketchyass line 20 sketch day s line 20 if grid o had number oh oh I messed up something Oh because silly me silly me if I am not returning her this is terrible so this one returns a new array this one acts on it oh I got it gotta clean that up later that's not good I don't like that okay now things move up things move up things move up oh those should combine those should combine to be an eight nope nope but those combine to be an eight Oh something is wrong oh I must be looking the wrong direction I must be actually because I'm doing stuff backwards so actually that's fine I'm doing it backwards I could really think about this but I have a feeling that I just wrote the code backwards which is fine I can go backwards let's do this now those should combine to be a four ooh oh no this is all wrong all wrong all wrong all wrong oh just return the array then who cares yeah let me go back to that that's yo this is gonna be a backup moment cuz I instead of doing this so let me actually just say return the row even though it's the same array I can return a reference to itself and that's going to fix it now here's the thing this is I don't think this is working so those two should combine to be a four they're not at the moment and something weird is going on so let me look at my code again I plus one no okay hold on if I'm going through it backwards I started three and I want to look at three and two then I want to look at two mm yeah this is right so hold on okay these move up so hold on okay I need to I don't know why I'm being crazier I need to I need to do some tests here so this is actually my algorithm is correct according to this I think I have not been very thoughtful right my algorithm is doing what I wanted to do the combined algorithm is doing this correctly so why is this not working it's probably because I am drawing this not matching the way that I'm actually thinking of it so how can I think about that like what if am i actually like hold on mmm yeah I'm reading the chat I plus one of that bathroom before a 2048 like this is correct so am I going backwards and what I actually need is your combination is backwards till you set the wrong one to zero really oh because I have it because I'm reversed switch the rows line six everyone's saying that the same thing which I think you're right okay all right hold on let me let me four let me try to make some continuity formats yeah let me check let me let me do something smart here hold on let me do something smart here and check my actual combined function whoops sorry everybody let me do something smart here and try to actually check my combined function like this should give me that's correct that's correct so these are correct so I'm doing something goofy here in the way that I'm rendering it and I think because I have everything flipped thank you to the chat for telling me this I think this should be zero and this should be a plus B let's see if that fixes it okay I hit the spacebar whoops and things move up and things move up and things look oh come on give me something to combine so why is it not combining it's combining in the wrong first combine then slide your combination is backwards still you set the wrong one two zero zero four two two should be zero four four zero I should do a matrix you were right just slide it then combined and slide oh it's working I just need to slide it again no because those these four and four should combine so everything's moving up but it did then that's so weird I'm only checking the adjacent spaces combined combined only if elements are one next to each other I know now this works I just think that I'm do the combined tests in the console again okay combine 0 for 2 ah right that's why I had it this way originally now combine is that's what I want it to be because these two should combine right and then I do slide again and this comes over right then I want to do slide of 0 4 0 4 oh it's going the other way slide goes the other way slide goes the other way combined goes the other way ah ok Mathieu back all the way up yeah okay alright alright let me be tried let me try to be smart about this here and let's try to do some work in the console so if I say combined 0 4 2 2 that's right 0 4 2 2 those two get combined now I need to slide that slide zero four zero four and that's lit the other way so I'm combining the opposite way that I'm sliding which is definitely a problem so maybe what I should do is just slide the other way around which would be let me think about this I could just reverse it right but that's probably a bad idea what I should just do is right I could no no no I can just say zeros can cat array right I could just put the zeros on the other side yeah that should do it right so now if I say combine 0 4 2 2 0 4 0 4 then slide 0 0 4 4 ok this seems right now so now hit spacebar 8 yep they've slid down 2 4 2 2 2 4 yep yep okay this is working now okay now I'm sure there's going to be lots of scenarios that aren't correct so what I need to do also is after I combine where we need to slide again right because and so really what I what I kind of want is I need a I operate row row equals operate on the row so let me make this one function where I get an array and I say Rho equals slide Rho equals combined Rho equals slide and then return row so I just want to do this in a function I'm in some ways this is kind of silly and what I'm doing here but I just want this to be a separate function so I can call it myself so now up sketched out 48 returned I forgot my R okay so now what I want to do is I want to say operate on 0 0 2 2 that should now be 0 0 0 4 operate is not defined I didn't refresh I is not defined Oh silly me these are no longer grid index i these are row okay we're we're moving along here operate all right that's good okay operate that's right now here's what's going to be wrong right this now should be 0 0 4 4 is that correct so I need to do it one more time but I need to be careful because this should not go to 8 so how do I consider that so how do I consider those two as different scenarios I mean certainly right if I just run this again it can only happen twice because there's only four spots but this isn't going to be correct because like this oh I didn't did i refresh this gave me the correct response but this is going to give me the incorrect this should be zero to four this would be zero to four four and I got zero to zero eight because the four and the four combined me I am so me is telling me that this should be zero four zero four I don't think so wouldn't it it would all slide together it should be zero four zero four well that's easier how do I let's look at this game for a second yeah no zero zero zero four okay good sorry okay so this is correct but how do I protect I need to do combine yazi row zero zero four okay so I suppose what I could do is the second time I do combine alright the second time I do combine I could start from the secondtolast spot right just start from the secondtolast spot or do combined twice before sliding that's an interesting idea well this actually do the trick so let's say operate two four two two zero two four four that is correct Oh interesting can anybody let me think of I think that actually worked are there any other scenarios that wouldn't work like operate zero two two four let's try this one this should be zero zero zero four oh that's not right oh is that or is this correct this is this wouldn't work right this should give me zero zero four four right it is zero zero four four so the break so actually am I just being silly and I just need to do combine once but get rid of the break and so let me think about this look it's look at the combine if I get rid of the break ah so I think here's what I could do so let's this is I think this is it oops this is what I think I can do let's say I have this is the case that's a little bit weird I have zero for two if I do this and now try to combine again and then slide these won't go together but and if I do this then I this should give me zero four zero four and then slide they will go together so I think I'm thinking this through I think that I can actually in you I it get rid of the break and just come back all combined once and call slide again after that's correct that's correct blows another one of my scenarios and that is correct the break is so silly I thought I was being smart by getting out of there but actually I just need to combine everything and then slide everything hahahaha okay wonderful I I think we're just about kind of done right so now I need to oops uhoh what did I do rose not to find a key pressed okay wait wait I messed something up row o equals operate Oh a little bit of a operate on grid index I so this gets passed in okay hey welcome this isn't what did I do now slide combine slide wait what just happened oh to be great hold on okay okay hold on hold on let's actually look at it now oh yeah I messed something up where's that line 38 oh look at silly me these are grid index I and down here I'm passing it into row so they're row here very silly thing that I've done here okay so now I hit space yep this to me is the behavior of the game now here's the thing yeah here's the thing I shouldn't be adding numbers if nothing moved so one thing I have to check is if anything moved so one thing that I might do is right here I might create what I what I think I'd like to do is let past equal copy grid so let me make a function copy grid we're past equals this is very silly but I'm just gonna do this past equals the new a new twodimensional array and then our copy new no no grid extra I'm gonna call it extra extra equals a new copy then I'm just going to four I'm going to use my nested loop which I have somewhere else I'm sure I could just you slice or something but I just don't have it within me right now 2048 at i J equals grid i J okay so I'm just and then I'm going to say return extra so that's just a total copy of the twodimensional array because sorry spaced out for a second because my phone was buzzing someone's telling me that 2 to 4 2 is wrong that's correct isn't that what it would do the game 2048 it's gonna combine those twos and slide everything over yeah okay where am I looking for I have too much code oh yeah okay oh so so past so past is past is now a copy and now this is the new grid so I can check to see if anything changed so I can say changed equals compare copy and grid okay so I'm gonna write another function this is all very silly but called compare where I have two different matrices and I'm gonna say if a does not equal to be returned something changed return true so true means something change I'm gonna check every spot as soon as something's not equal something moved and then if I get all the way to the end I'll just return false so now I should only add a number if changed now add a number okay here we go oops so p5 doesn't like that I call it something copy so I'm gonna call this copy grid and I'm gonna do this so now I should be able to say whoops OOP cannot read property zero of undefined at compare sketch dot J's line 37 so a and B in compare oh and this is called this should be passed this is why shouldn't use the word copy this is passed that should be passed oh yeah no nothing's moving so I don't get a new number nothing's moving so I don't get a new number got a new number got a new number got a new number got a new number nothing's moving got a number all right so ends part 1 of 2048 where I have the entire game mechanic but only for going in one direction one direction I'm gonna take a short break and have a part two to the 2048 challenge where I deal with the rotation of the matrix I and I hope you enjoy watching that part and then the game will be finished ok what time is it it's 450 I don't have a lot of time left people I'm pretty sure this is correct I now have the entire correct game mechanic the rotation yeah can anybody give me a combination that they think will not work for example that's correct that is correct that is correct two two two two two two four eight two two four eight that is correct so I'm pretty confident four four eight sixteen I think I'm pretty good yep that's correct also eight eight all right let's try that one p8 that's correct that is correct all right I've got it all right everybody 0 0 I'm pretty sure that's gonna worry about mints the last one I'm gonna do that is correct also all right I think we're in good shape here now so I can do this welcome back I'm here trying to this is like the most painful time in my entire life and I can't believe that you're watching this but you are I'm trying to make the game 2048 and I have gotten so far as to make the game work but only in what's the One Direction song somebody tell me only in one direction which is down so if I hit the spacebar everything will move down now it would be really nice for you to be able to see an animation to have a sense that what it's really doing and then we haven't seen anything combined yet let's come on get something to combine there we go but you can see that everything's coming down and the numbers are combining when they're equal this is exactly like how the game 2048 plays of course this is much nicer to have a nice animation and different colors and all that sort of stuff but what I need to do is I need to be able to go in any direction so let's at least double check here and keep rest that I can say I think if key equals up arrow let's let me look in I can't remember what the constants are np5 up arrow is something yeah it's 38 so and what if I say console dot log key ah so I think I probably want the key code because the key it's giving me it's not giving me the number I think I want I think I want this yeah so key code is what I want I want key code equal to up arrow and I can use a switch statement I'm not going to down arrow so down is what it's doing already let's just try to get up and down so if key code equals down arrow do nothing to nothing if key code equals up arrow what I need to do is just flip everything right so I can go through and I can a flip grid equals flip grid right I just want to flip the grid so I can write a function called flip for any twodimensional array then I'm gonna go through all four rows and I'm just going to say grid index I if I say dot reverse on an array does it return in a new array let a equal one two three four one two three four a dot reverse so it actually reverses the array so it operates on that same array so I could say grid index I reverse I can say let flipped equal false flipped equals true so I want to flip it then I want to I'm just gonna let I'm gonna sue Mike only gonna press the arrow keys and then I'm going to flip it again so and I do I wonder I don't need to return it I just need to flip it so I don't need to so I'm gonna flip the grid and then if it was flipped flip it back so this should be now this is just like for up and down this should work for up and down let's see if this works little little crazy thing I've done here down whoops down okay down let's go up up down up down down up down down up down up this is totally working down up down up down and eventually the games going to be over because I don't have anymore okay so that works whoo so now I need else/if key code equals right arrow now I need to rotate the grid grid equals rotate the grid so I need to rotate it let's rotate the grid I think I want a new array I think I want a new so I'm by the way I want a function this is very silly I want to have a function and put it all the way at the top called blank grid and what that does is it just returns this because I need to do this quite a bit just give me a blank one so now I can say grid equals blank grid yeah I love that and then somewhere else where I did the crazy copy thing extra equals blank grid so that's gonna be much nicer because what I want to do when I rotate it and I definitely I need to call it rotate grid and I should probably be consistent here it's a flip grid with my naming flipgrid flip grid and I definitely should break this up into different files and maybe organize my code boy I got a refactor this stuff flipgrid change this to flip grid now I'm going to write one called rotate grid now this shouldn't be too hard I should just do a nice little nested loop and I should get I should create I should create a new grid is a blank grid and then in the new grids I J I take the old grids J I and now so what this would do is now I want to rotate the grid and then I'm going to have to unrotated get I've just rotated a few more times so right so let's think so so I'm gonna have a variable called let rotate equal false rotated so this is rotated equals true then what I'm gonna do if rotated then what should I do I just want to rotate it through a few more times right rotate it once twice one two three only three more times I'll get back right that's brilliant coding right there let's see if this works on this so first of all let's just say I have a let a equal new grid a blank grid whoops okay so a is this and I could say console dot table a so you can see that's what it looks like and I'm gonna say I want it actually let's just do this so what am I looking for at grid so console table grid maybe I shouldn't bother trying this debugging I should just do it then I'm gonna say rotate grid grid and console dot table that I hold on all right um okay hold on let's see what happens not to let you edit that whole part out let's see what happens so I'm gonna hit up whoops ah let me just do the up and the down still clear this what is going on hold on up why oh look Lee's what I was last typing if I had clear just hold on fighting with the computer for no reason all right let's give this a try up down up down those work what did I express eight right arrow okay got an error cannot set property undefined at rotate grid sketch js9 71 rotate grid new grid is a blank grid i J equals grid J oh look at this that's really bad that's really bad J okay let's try this again down up down up right okay got another error cannot read property undefined a copy grid sketch digest line 53 copy grid extra equals blank grid is my blank grid function not working Oh return no that looks good copy grid grid catch line 53 so what did I do here hold on a sec care into this can I write property 0 I'm going to sketch the chest line 53 what did I miss here let's look at this ah grid is nothing here where am i calling copy grid where I'm sending it nothing past equals copy grid grid that's the only place ah rotate grid is messing something off rotate grid does not return the new grid there we go return the new grid rotate grid thank you very much ha this is totally working up down up right now I can't go to the left so now I need this is gonna be this is no problem that watch this this is total insanity but else if key code equals left arrow now grid equals rotate grid grid I want to rotate it and then flip flip grid grid equals flip grid grid and you know what I should just always return I should always return a reference like even though like because it's just too confusing to keep track of which functions do which so I'm gonna go back to my flip crit function scrolls girl's girl and just say return grid so now if I'm going to the left I could rotate it then flip it then and grid equals flip and so here not only is it rotated but it's also flipped so then I can flip it back and rotate it three times and I should be good now here's the thing I should only be doing this if I press one of these keys so I'm gonna make a variable called played equals fall and I'm gonna say played equals true and again this can really be refactored oh really I should do with part three of this to refactor this probably but all of all four of these keys I am playing and so now if I have played then I can do all this crazy nonsense if it's changed at a number otherwise console dot log game well it's not game over because I could it's only if I have no moves left so huh I'll get to that a little bit okay let's see what's the chance oh oh yeah I could use else played is true right I can assume that I've played but in all other kids I can at least make this a little better in all other cases right if it's some other key plate is false so I'm gonna assume that I've played and now let's see get down whoops down okay down down is combining to the right to the right to the right to the left to the left up to the right to the right to the left down to the right down whoops I don't know what I just did to the right I I'm pretty sure this is actually working it actually is doing what it's supposed to do and hooray great okay so this is the functionality of the game there's gonna be a part three this is three three parts part three I'll add the score and determine if there's no moves left okay so that's what I need to do and I think that what I can do is maybe I'll it bar three I might refactor a few things I'm getting some good suggestions from the chat okay all right thanks for watching this so far Wow think I might have made 2048 by accident somehow okay that's a transpose not a rotation yeah it's all switch it to transpose then what do I need to do how does the score work in 2048 make the 64 okay let me actually get to a point where I can't make any more moves see if I get an error whoa just happen there yeah the font size is gonna be a problem once they get to 128 I think all right I just want to see can i I want to get stuck I think it's giving me I get a new number every time I move right let me try to play this poorly oh my got 128 yeah I think this is corrected so without the animation it's like really weird can anybody see any mistakes you can't tell what I'm pressing is the problem I want to get stuck but is it should I be able to get you can get stuck before the board fills up that's what I don't understand I seem to only be able to get stuck if yeah the newest number newest number could be a new color that's a good idea okay every all right so so the two things I need to add let me just play the real game here for a second like poorly no yeah I guess you're only gonna lose when you lose the whole board is filled up right because otherwise I could always move up and down okay so I think I think it's playing correctly yeah game over so let's look at this okay let me find the score the user score starts as Iran is incremented whenever two tiles combined by the value of the new tile okay the game is won when a tile the value 2048 appears on the board when the player has no legal moves there are no empty spaces and no adjacent tiles with the same value okay so this is should be easy to figure out so okay so let's make a list of some things to add in part 3 the score is gonna be easy the game being over it shouldn't be too hard adding a fill I think I'm not gonna do the animations because that's not I could come back and do that another day but I'm happy to add the color I need to deal with the how does the real game deal with the font so I need to deal with the font size so the font size should be dynamic okay I am so exhausted time 515 I got it goes really soon okay part three of my 2048 coding challenge so what am I trying what do I got here I actually have it's very hard to follow without animations and not maybe I'll come back and add animations in another part but I have the full game mechanic available to play right now so the things that I want to add in this video are number one score number two a test to see if I've run out of moves to say game over and number three I want to be more thoughtful like if I could ever play it well enough to get to 128 you would see that it wouldn't fit so I'm just like randomly making moves right now so I need to deal with the font size to make it more dynamic so let's try to do some of that stuff so according to the game rules I'm going to say let score equal zero whenever you combine two tiles your score goes up by the value of that combined amount so we can say here wherever I have my combined function and again this would be so helpful to organize this so right here whenever I combine if a and B I can say score plus equal a plus B all right and why don't I say row index I just for the sake of so I added those to the score goes up by that much now let me just really really quickly in the body add a paragraph I D score and again I'm not going to be this is a very very early crude way of doing it but I'm just going to in using the p5 Dom library in the draw function I'm going to say sketch I'm going to say select score dot HTML score so now should see there's the score and let's um let's just go and say something really silly like style body text size set where's the font size text size 32 point just so it's a little bigger and then close style that'll CSS this is me adding CSS to the code very poorly cuz it's not the font size of font size no how come I don't know how come I don't know CSS anymore Oh Pete oh there's no coal in here there we go oh look at that let's just do P hold on this is what always happens to me Dom manipulation horror just ignore me just pretend I'm not even here don't watch me okay let's make that score a little bit bigger and I'm just gonna say style just gonna put it in line style here style equals font size 32 point that should do the trick there we go and now okay so now I should have the score I'm pretty sure this is working correctly as it's supposed to so now I have my score all right boy am i doing great so I added a score that's wonderful now I need to add a check to see if I finished playing the game so how do I do that so in the main code and by the way this is this is the other thing that's terrible I don't want to have a draw loop here I should really just be I should be update canvas I should in setup oh look at all this code this is horrific I should say no loop and again I'm gonna need to animate later so I'm gonna need the draw loop back but just for right now in keep rest where I say if the game was played I'm gonna say update canvas so now and I should to it at least once at the beginning update canvas so now at least performancewise I'm not like spitting the browser sprinting that using the processor over and over again to redraw the same thing okay so now I need to check when I've played I need to right here I need to sue is game over so I'm going to write a function I'll just going to put it on the top right now function is game actually we kind of know here's the thing the game is over when if the board is full and nothing can be combined so actually all I need to do is see if the game is over if there are no if the book the game is over if there are no numbers next to each other that are identical and the board is full so there's no zeros so I can write a function I will write this function is game function is game over and I'm gonna say I'm gonna do a loop I'm gonna get my double loop which I have everywhere and for each spot I'm gonna I'm gonna assume game over is true and I'm gonna for each spot if the grid I J equals zero then the game is not over return false so if there's a zero the game's not over because I can move if grid I J equals grid I J plus 1 so I could check everything to the right and just go 0 through 3 and I'm gonna have to check the four for a zero I think if it's equal then something can be combined return false if grid I J equals grid I plus 1j j then also the game is not over so the game is not over and really so the game is not over if there's any zeros or and so I'm gonna check every single spot but I'm only going to check the edges if I is not equal to three and there's two that are the same or if J is not equal to three and they're to the same so this should tell me if I get through every single spot and it's not equal to what's to the right of it or to blow it or it's not a zero then the game is over and so if I get to the end I'm going to say return true I don't actually need this boolean variable at the beginning this is my ridiculous function now to determine if the game is over and where did I check it here so I'm gonna say let game over equals is game over and if game over console dot log game over okay let's see if this works up sketched a test line 13 has an error if J oh I'm missing a curly bracket somewhere I'm an extra parentheses there we go okay here we go let's take this again line 21 I have an extra bracket here now okay let's try to make the game over I'm just gonna rely on my random whatever the game was not over it's got to be over eventually there we go uncut type error cannot read sketch such as line 13 property 0 vinum undefined so I got into a funny place here so I just now the game is over but I got an error when the game ended if J is oh whoops look at this I got to be checking J here and I here I did this in like a weird order I want to do I first and J second so that was a mistake what I should I should build in something to test it without having to like go crazy playing it but you know eventually I get to the game over game over okay it actually tells me the game is over because there are no more moves left okay now we need to let's add a little bit of color and change the font size so where do I where do I draw the text here so text size should be actually a function I'm going to map the value which goes between 0 and 248 and when it's 248 it should be 16 point and when it's 0 it should be 64 so it's bigger maybe it's like 16 point when it's 2048 so let's try this why is the font size not changing is it follow its font size not text okay oh and else has to be this no its text size but I got to use the variable is it font size I don't know apparently I don't know P five font size is not a function font size is not a function the value map the value text size how come that's not working what did I do text sighs losing my mind here value goes between zero and 2048 when at zero at 64 yeah I know I need to like but it should be slightly different oh it is slightly different it's just so yeah yeah yeah no no that's kind of what I want can I get a bigger number hmm oh I need to choose my scaling is crazy no wonder okay I need to use it's just like it's barely changing as I'm going from zero to 24 okay okay so this was kind of a nice idea but now I'm realizing that basically I really need to shrink it exponentially as it goes down so I really should take like the log of the value maybe I could and then that'll go from zero between the log of zero and 2048 will this do the trick for me to dip logarithmic scale yeah you can see it's getting but ultimately yeah so this is better using logarithmic scales a little bit nonsensical because really I should just I have a better idea like let's get rid of this for a second let's just let's just convert it into a string so this is be making a string from the value and then I want to get the length of that string and then the font size text size should be the I can make an array right sizes equals okay so if it's the if it's one I wanted to be 64 if it's two I want it to be 64 if it's three maybe 32 and if it's for 1024 or 248 let's make it 16 so now I just want to say sizes just based on that length so I could just see how long is the string and then pull one of these from the array based on the length is now an index into that array and that should give me up to play it for a little yeah 16 which is 200 this it would be 0 so length plus or minus 1 apologies for that so now if I get to 3 if oh I have to get to ten you're gonna have to trust me on this this is gonna require a lot of editing so I'll come up back in a minute play this I actually I'm not even paying attention to like how I'm playing it I'm just I've gotta get those 264 there we go 128 okay oh I'm back because I finally got a 128 and you can see the 128 is smaller oh boy you could do so many better ways of doing that okay so now you know obviously I couldn't map a color to the background I could do animations but this is really it I now have essentially the full game I have a mechanism for trying to figure out you know I could map a color to each number easily by having some kind of lookup table but I it's some point maybe I'll come back and try to animate this but please please make your own version of this improve it this is the end of this coding challenge I have made 2048 it's not what it's called goodbye log base 2 is what I wanted to do yeah I know I could just insert the values into the grid would make a lot more sense let's play this for a little bit more game is over I don't know at least I made it whether this can be made into something that people could watch I have no idea but at least now I'm playing it a little better it's actually really hard to do this without the animation the animation really helps you kind of under see the board better but it'll be fun is to have an AI play this which I don't think here we go 128 got 128 faster now should have done polymorphism lerp the background color it'll be much nicer looking yeah yeah yeah colors would be awesome I didn't add color uh I'll just add color for you all here where do I do this fill to lerp color between I don't feel like doing this right now goody I gotta go it's 530 I gotta go so this is all I got to today color the new numbers that are coming Oh color the new numbers that were coming no Benjamin I do see your comments how about refactoring the code I would like to do that I'm gonna have to come back explain log base 2 and do color these are all such good suggestions I'm gonna have to come back another time I will publish this code it is a monster and can we get early access to the code yes so what I'm gonna do right now is I'm gonna go to I'm just gonna do this in a ridiculous way that if I had unit tests it would I'm gonna go to coding challenges and I'm just gonna go and grab somebody can quickly pull request renaming this correctly and everything actually and I can say this will be coding challenge if it actually ever makes it to something it'll be coding challenge what 93 what's the last one right now no 94 was doubledouble perceptron I mean double pendulum on my brain is so dead so to be 94 whoa coding challenge 94 2048 coding challenge 94 commit directly to the master branch so the code is now on github yes so we'll see we'll see yeah 534 I got to go everybody all right thank you for watching I appreciate you be here with these live streams I don't know what I'm doing anymore I will I would consider doing a part for for this which would adding color and animation so I will think about that math sure I will message you there so while I'm thinking of it I could possibly on Tuesday come and do some cleanup for this so if like we need to do anything of like some intros and outros or like figure out some things to like help make this actually a coding challenge that could be edited then I would be glad to do that so thank you everyone I hope I won't be here next Friday there will be no live stream next Friday I will be working hopefully on that neural network JavaScript repository so stay tuned follow that and oh that's cool a greedy agent one that chooses the move with the most points where the taichi's is random like a weak bond is saying that would be a fun thing to add thank you everybody and yeah make the sizes of hash great suggestions and I will be back next week the code should be there now yep there it is 94 okay goodbye everybody and when will I do neural networks um I will come back I mean that I have a long list of stuff to do with that topic and I will get to it as soon as I can so thanks for watching and I'll see you in a future live stream