hello I'm back to continue my exciting snakes and ladders game and what I'm realizing and what you've seen as I've been kind of putting this together in a very messy and overly complicated probably way is it's very hard to know what's going on and whether it's working or not I inbetween this last part that you might have seen in this I'd stopped and I'd like check some things so I'm pretty sure that it is working correctly logically but it would really help I could just sort of do some debugging by like console logging more stuff to see what it's doing but I would really like to just see an animation so I would like to see an animation where I kind of think of the game as having different states there's the state where I am somewhere then there's the state where I roll the die or the die if that's or maybe it's been whatever it is roll the die and then I see where I'm going to move to then I move there then if that part is a snake or a ladder I see that I'm going to move to a new spot if not I'm just going to roll again so I want to think about different states so I'm gonna do this in a goofy way that is a minute for the first time in my life ever use Const because what I really want to do is make some constants that are like look that are talking about the state of the game so I'm gonna say oh this is probably I'm gonna say roll state oh this is like so overly like talkie and too many characters but I'm gonna I'm if it's afraid to call it roll because what if I thing else called roll roll state where I'm rolling the die I'm gonna say a preview state which actually is that the sames when I roll the die I see the preview of where I'm about to go so I'm gonna make that's gonna be the same then I'm going to have move state where I draw my next move and then I'm going to have a snake ladder what's a word there's got to be a word for snake and ladder Schnatter lake let's try Snyder I like that Schnatter s'matter which is that the state of moving to the snake or ladder if that exists and then I'm gonna go back to the roll state so looking through the draw loop let's think about what happens so if so now I need a variable called state and States is going to start at roll state so I'm gonna start the game the game is gonna have the roll States so if then I'm going in to draw I'm always gonna draw all the tiles why not I'm always gonna draw all the Snider's that's my new word show Snyder's refactoring that's my word for snakes and ladders so if I go into the tile object show Snyder's and this should actually be I could probably do some global find and replace I might change that later from snake or ladder to s'matter okay so now back here player dot roll so definitely this is something that happens if state equals if state equals roll state I want to roll and I want to increase the number of rolls okay so that I want to do now then I want to maybe had to say player show preview so in the player what the player does in roll is have an actual so right now I do everything all at once I roll the die I move the spot I draw the tide I check if it's a snake or ladder I move it so I got to divide all this up into different parts this will make this better so I need more variables always the board variables the answer is more variables this dot roll maybe I can use the word die I don't know that because for I'm going to say roll equals yeah roll equals negative 1 so it doesn't have a roll at the beginning and this is gonna be rolled die I'm gonna call this roll die actually rolling the die and then I'm gonna keep whatever this roll is so that's the only thing I'm gonna do in roll die so I don't know something this is something else Oh figure that out later all I want to do is pick that roll and so go back to the sketch I want to role die and I don't need the tiles so back in the player I don't need the tiles I'm just picking that number now what I said that I want to do I think is show the preview so what I might like to do is just kind of like highlight all the ones up until the next spot so I need to like figure out what the next spot is but not actually move the player there yet so if I think about that actually what I do is I maybe I have next I have a next this dot next equals negative one is it nice by the way how all of these variables have the same number of characters they line up so nicely that makes me so happy so I'm going to say then this dot next equals this dot spot plus this dot roll right so I keep track of the current spot and the next role and then I want to say player show preview and what the preview is going to do and I'm going to need the tiles for this is it's going to highlight some of the tiles so I'm going to say for let I equal this dot spot is less than this dot next and the end is going to be if if this dot next is that is past the end of the tiles so I have to say the end is the maximum of this dot next and tiles dot length right if this dot no no no the minimum whichever ones lower minimum are the maximum right I want to say like if if next is 12 then the number of tiles is 10 I want the end to be 10 so it's whichever one is the smaller than one so I think that's the minimum function I'll fine so I'm going to go all the way up to the end I plus plus and I'm gonna say tiles index I high so what that's going to do it should highlight all of the tiles that I'm about to move to and so if I go into tile and I create a highlight function I can just say let me highlight them with a nice little green and some alpha and draw that rectangle so what happens dare I dare I attempt to run this now and just see this so what I'm going to do actually is comment out the rest of all of this and see if I can roll the die and see the highlighting show Snider's it's not a function really really sketchup test line 63 shows Natters is not a function shows Natters snakes and let Schnatter it's not a Schnatter it's a stack s'matter show Schnatter show Schnatter never record coding challenges late in the evening on a Friday all right cannot read property length of undefined players is line 13 so let's figure this out tiles doesn't know what it is because I forgot to pass in the tiles when I call show preview probably you just use tiles of the global variable but cannot read highlight of undefined now I think I know why this is the problem so in the show preview function when the game starts the player is actually at spot negative one because it needs to a role of one gets you to the first spot so I do have this other thing where I need to say start equals the maximum of zero and this dot spot so if it's negative one I gotta think I can fix that right maximum means the highest is that right is that right oh no no I'm doing it backwards I'm doing it backwards if you want the maximum to be ten you use minimum because I want the lower one I did that backwards all along silly me silly me silly silly me all right cannot read properly highlight of undefined so let's look at let's look at console dot log I right here just to sort of see whoops the e key on my computer barely works negative one it's still got negative one the minimum no no I did it backwards again okay here we go there we go okay so we can see here I'm getting that preview perfect perfect I'm getting that preview for state one now I'm not doing anything but doing that over and over again but that's great now what I need to do is say the state what happens now immediately equals move state what I call it move state move state yep the state should equal move state now if the state equals move state then what I actually want to do is move the player so I'm gonna say player dot move so I'm gonna say player dot move and in the player I'm going to say move and I think it's really just a matter of saying this dot spot equals this dot next right just move it to the next spot and I could also like check if it's off the edge at the end but let's not worry about that right now then what I want to do a ball of these I want to call player dot show right I want to say player dot show right which just draws the player in the spot where is the show function and I need to give it the tiles this is really kind of convoluted about giving the touch all right so then I'm gonna give it the tiles because it needs to figure out what tile to show itself on so let's try this all right so why did this happen only once did I put a No been there zero one two what's what is what am i console logging anyway I wanted I want to move and then I wanted oh and then I want to set the sorry state equal to roll state so I'm gonna have to check the snakes soon but let me do this so let me do this oh yeah so let me set the frame rate down this is great now I've really got something I can kind of track a little bit let me put the frame rate back down oh look at that whoa wait a second something's wrong here I want to see a head and then I want to see it move I want to see it in its old spot what do I have wrong all right what do I have wrong oh boy this needs to be an elseif right because I just changed it to move State and then I do it immediately but no no no I only wanna be able to do one of these states yes switch statement would have done me well here so let's now run this again and I have an error cannot get Center of undefined Claire J s line 44 let's Center equals current current equals tiles dot this dot spot so what is this dot spot there it is negative one because once again I can't draw the player at its negative spot so this is a case that as long as this dot spot is yeah I guess a nice way of doing this would be if if not current returned so just like get out of here this is one way that I could do it if there's no current thing I don't need to draw it get out of here it moves but it's moving one spot beyond where the role is right so why is that so that's a little bit of a mistake the role says I need to include the next less than or equal to next I need to go all the way up to that spot there we go moves are there I kind of want to keep the highlight in there but I could do it but at least I could see so this is really doing what I wanted to do now I can see it it's roll and then it moves there now now what I want to do is oh it's going to land on the ladder but it's not gonna go to a snake it's not going to go down now or that's a ladder visually I've got some real serious graphic design issues there now what I need to do is at the end of the move state at the end of the move state I need to check if the player is on us if the player so if the player is honest matter I need to do something otherwise I can just go back to the roll state right if the player is honest matter now how do I know that what do I have going on is that the something else that I hadn't figured out yet yes it sort of is right so this is I can call this is Schnatter and I can say I can look at the tile at its spot and I can say if tile snake or ladder is not equal to 0 return true so this at least so as long as there as long as it's actually on a tile and that tile is a snake or a ladder return true otherwise return false let's just put this in there right now and I know I could return the result of this let's do that but I might want to do some other stuff in here which maybe is a bad idea so let me just return the result of this just to like make this a little bit more elegant and I need more space to see my code as long as there is a tile and hey that tile is a snake or a ladder return true otherwise oh no otherwise return false that's what I'm doing so now if I were to go out into the sketch I'm going to say No you know like no loop console dot log hello so I just want to see that right there it's stuff so if I can get lucky and have it land on one of these so now I can speed it up and it should stop at some point it'll land on one of these it didn't and it got to the end so if it gets to the end so let's fix it so it starts over again player dot J s line 21 player line 21 if it gets to the end and the end is this is the last one now that have less than equals the length minus 1 that should fix that okay if you guess the end it didn't actually restart because I got rid of all that game logic what is this player dot j s line 20 though I don't need this anymore thank you Mike come on land on one of these oh I know a way to fix that let's have it just move one spot every time the roll is always one Oh interesting so it's not detecting that it's landing on a Schnatter why not if I mess something up let's let's look at this return tile this is the tile that it's on this dot spot right because it has moved its moved oh this is not a I didn't call the function so if I didn't rename the funk is is Schnatter okay great there we go so we can see it stopped so that's good I'm detecting that correctly now what I want to do is go to another state I want to say state equals what did I call it s'matter state state equals Schnatter state okay so now Oh go back to the role state so you can move and go back to the role state now I need to check else if state equals Schnatter state oh this is very exciting Oh everything is so much harder to program than you think if state equals Schnatter stake state creating a tonguetwister here now what I need to do is what I need to go back to here and where's my something else the stuff that I saved did I lose it well this is the time where I need to move Schnatter move Schnatter so what I want to do is I want to say this dot it's why need I'm the player I need the reference to the tiles you know what this is ridiculous I should really have the player just store an internal an internal variable that stores a reference to the like it could actually add this dot tiles here and it points to the tiles or just use as a global variable I think for expediency right now I'm trying to stay true to object oriented programming in some way there's really no point in me passing in the tiles everywhere because I can just use the fact that it is a global variable tiles Styles tiles is a global variable I need it everywhere let's not go nuts let's take that out of having to pass it through everywhere and just know that the player can go look up stuff in the tiles whenever it wants to because what I need to do right now in the player is move according to this matter so I need to get its current spot and it actually would make sense that the spot perhaps not to be an index but to store which tile it's on but that aside then I could say this dot spot plus equal the tiles snake or ladder value so now let's go and just change this to Schnatter to be consistent so let's find everywhere I say this dot snake or ladder and change that to this dot Schnatter and replace all and that should be make our lives a little bit more consistent so now if state equals Schnatter state now what do I do I say player dot what did I call it move Snyder move Snyder so there's a regular move and there's a Schnatter move and those happen separately and as soon as that's done the state goes back to the role state okay let's see if we let's see if this is if we're good here where did everything go this is a bad sign let's look at the player the spot is not a number next it's not a number so something went wrong with the players next and spot almost immediately so let's take out this little bit here let's take out this else if to see if the move SNAT are really just screwed stuff up spot zero roll one next zero but it's because hmm I'm gonna just back up for a second and I'll go back to move state roll state move state roll state okay so move state roll state works hey what happened to my Snyder's why don't I see them anymore I must be something to do with the show Snyder's so these seem to not exist oh because I left this in there I left the tiles in one spot which is really a problem when I was like refactoring I left that in there so is there some other place I I have tiles and this is okay so let's see here what have I done to deserve this if this dots not or does not it probably also messed something up when I oh I know I think I might know what the problem is I think I know what the problem is I refactored oh this is I'm a terrible programmer and I change didn't change the property here that's why we don't have them anymore so let's put that back okay now we're back where we were before my refactoring actually caused more problems than its solved so let me see now if I can put this back and even I don't know I'm just gonna go crazy and put this Schnatter snake back okay so uh huh okay good now I'm back I'm still debugging let's let's go back to all right so do we ever get to what's causing the problem we did we lose immediately okay hold on by the way this I really should this is a little nice little improvement I can make but let's figure out let's figure out where it's going wrong I'm gonna back out of my adding the Snyder State let's go back and just see all right I still have a problem that's good so I have a problem where spot zero Row one oh and I forgot this has to be in there that's where the problem is okay so this is fine this is fine now do I detect at least I can say is this detect correctly if it lands on one it's gonna keep going whoops whoops I don't want that this is another I don't want this else here so so much mess but I just want to see if the detection oh it's detecting it all the time no my is Schnatter function is a big problem this function is not working properly so let me look at the player object if Oh this I forgot the boy this renaming of variables really really bad bad bad shipment all right so now we're not seeing it yep there we go we landed on a spot and there we go so we land it on two there were just two and we can see here when we land on one we got one another one another one okay so we're good now now we're good with the is is Schnatter okay we're good with its natter now we can go back to once we are honest natter setting that state to the Snider state otherwise go back to the role state okay oops and I've got my brackets out of place there we go so basically what I'm doing here is I move the player if it's a snake or a ladder go to that state otherwise just roll again so now if it is a snake or a ladder let's try actually doing this and rolling oh it's working look did you see that now it happens really fast look what's gonna happen when it gets to there it goes back see we're in this nice loop and we're actually seeing it we're actually seeing it if I slowed it down a little more you know it might be nice to animate it going you sliding down that thing but as you can see you probably don't want to watch me try to okay so we're we're in pretty good shape now a couple things I need to do number one is I need to figure out if the game is over so that should work fine this should be the same idea if the player spot is greater than equal to the end keep it at the end set game over equal to true I don't need this player show anymore if game is over reset the player all this stuff should really still work in terms of averaging and all of that so let's put all this stuff back and let's run this now the thing is I need to be able to roll more than just a 1 and I want to slow it down a tiny bit so I can really watch and see that it's running so what I'm gonna do is I'm gonna go by a minute not make the frame rate 1 frame per second but I make it 5 frames per second and then by golly I am going to really trying to like keep up the energy right it's like fading fast but I'm keeping it up I am going to up be able to roll 1 through 6 so if I go back to here I want to roll 1 through 6 and now here we go so I'm seeing where I roll now remember white is a snake so I fell down I got past it here we go I got up the ladder and we made it to the end yes we are making snakes enough now you can see here that my talent well it barely lies in anything I talent lies in maybe talking and coding at the same time although I kind of do that brother ridiculously employed my talent certainly doesn't lie in visual design in interaction design there's a lot of improvements here but at least I'm kind of showing you the pieces here how could you create these different states now that I have these different states I could actually have internal animations in those states as well so let me at least just to really like feel that this is working in an interesting way let me go back to the sketch just to finish off here let me make five five snakes five ladders let me make let me instead of making it ten by ten let's make it twenty by twenty for fun so I'm used to look for that resolution to make it twenty now and then let me let it run quickly so we're going to now watch a simulation of snakes and ladders on a twenty by twenty grid I'll make I'll make this bigger and see how this plays out whoa okay I forgot that my circle is much too big so we can see that on this twenty by twenty grid with these random snakes and ladders that we are averaging so far sixty seven rolls let's let that this is a little bit of a bug here that when I'm drawing the player the player should be drawn according to the tile size so I I guess this where does that does that have a where can I access that I'm not gonna I don't know I'm just gonna make that sixteen right now so I could refine so now we can see here is it and I almost want to make this even more insane by just creating fifteen of each and now let's watch this totally insane snakes and ladders game can it ever make it it's doesn't made oh it made it in 75 rolls I made it in like just a few rolls so we can now see we can see this is something if you try to create a math formula to compute the average amount of rolls that would take for it to make it from the beginning to the end I don't know that you could do that but now we can watch this little Monte Carlo simulation of just running it over and over again and kind of get that average ourselves so this is snakes and ladders so much you could do to animate this better to make it a game that you could play to try different ideas out to think about the space not as a grid but as some kind of like you know pathway you know Candyland like pathway so many possibilities and yes I should have used ctrl shift F to find a replace in all of the spots but next time I will do a better job of that so this is our really for sure definitely the end of this game which I am now told from the live chat that this is also called escalators and eels snakes and ladders chutes and ladders escalators and eels make your own thanks for watching see you in a future coda challenge