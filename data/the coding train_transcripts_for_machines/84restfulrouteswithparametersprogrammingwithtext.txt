in the previous video I got as far as defining a route with parameters the route is search / some keyword / some number and the response from the server that comes back is always I love whatever word however many times the number is so if I were to change this to unicorn and unicorn and put it just with slash 3 I would see I love unicorns 2 3 times so this is Wow fun and I like to see how much you love unicorns and rainbows do you love them as much as I don't know probably not which is a very healthy probably much healthier than however I am but the point of what I'm saying is this is kind of useless let's turn this into something useful and so the example that I'm ultimately building here is a sentiment analysis API and so one approach to sentiment analysis is to keep a dictionary of words that either have a positive or negative score associated with them so I'm going to go to the code and I'm just gonna write here at the top I'm gonna create a variable and I'm gonna call it words and I'm going to put some words in it with a score so I'm gonna say rainbow has a score of 5 and unicorn has a score of 3 what are some sad words doom has a score of negative 3 ok so this is my very basic sentiment analysis dictionary I've got three words in it and what their score is so first thing that I want to do in making a sentiment analysis API is expose this data so I'm going to actually add another route here I'm gonna say app get all send all and then I would say function send all and this is the callback which has a request and a response and all I'm gonna do is say response dot send words now notice what I did up here in this reply I just created this string and this string just kind of like spit itself out into the browser but somebody use the API is probably going to want to get the reply back formatted as JSON so I better do something to format this as JSON well what is words it's a JavaScript object what is job what is JSON JavaScript object notation so one of the magical things about using Express is Express will automatically format your JavaScript object that you send out into the world as JSON so this is actually done so I can now go to slash all and I can see this is now me making an API request to my API and I'm getting the list of words and if I add another word to it like gloom doom and gloom now I have another word there with a score of negative two I hit refresh I see that as well so what I want to do in addition to having this be an API so there's a couple of things I could do one is that I might want to search for a particular word to see if it's in the API if it is get the score or I might also want to be able to as a user add words to the API so that you know this is a sort of design decision you know what are you what are you doing here I'm just making a demonstration I think would be useful to see how can you create a route where a user can insert data into the database and by the way that's my database right now so as I go through these videos I'm gonna get into persistence working with databases and there are various levels of that you know on the one hand this will persist it will never go away it's written there into the code my database is hardcoded not the best solution but it's a good starting point so I'm gonna change this particular route and I'm gonna change it to add word score add word so I want to route where if the user adds a word with a score it goes into the database so I'm going to change this to add word here are the parameters the word is data data word the score is and this is I'm kind of being very longwinded about I can just say word equals request stop params not word but datascore and then what I want to do is say words word equals score look at this this is me taking in the data from the user the word and the score and putting it into that object right putting it into that object look with a key value pair the word is the key the score is the value and then I need to create a reply and all of my replies I want them to be written as an object so I'm gonna say message thank you for your word okay so there we go so now if I run this and I go here to all we can see all of the data is there now I'm going to go to one more window and I'm going to go to add purple five purple is a very happy word I'm gonna hit enter it's gonna say message thank you for your word so I got that message back and if I go to all we can see purple oh and look at that it got the you know of course the way that it's working is it came in as a string not a number so I could correct that if I want let's correct that so I could say let's make sure that is actually a number because I might want to do some mathematical operations with it later so let's convert that to a number and I'm going to add the word again hit refresh and now you can see I got purple five so there we go I have saved this word forevermore in the API now let's there's a couple things I want to add to this number one is what if I just go to add purple and I forget to add a number I run this it says it cannot get that it cannot add this because it's looking for this particular route and the route requires also a score however there is a way to make that score optional which could be useful for something you might do which is adding just a question mark to and it's really all works for the last one or though I'm sure there's some fancy ways around that and then what I could do is I could say if not score you know score equals five or I could say I could actually say score is required so let's say score is required just like I could add some error handling here like I could save our reply score is required else all of this so I'm basically saying whatever word comes in if I get a score so if not score and also I should probably check and I'm not going to do all this but you know if I want to be really serious about this I would also check like to make sure score is a number and if it's not if you sent me the score as like friendship I would say the score has to be a number but here I can just create this variable var reply I can fill it if there is no score I can say score is required if there is a score I can add it to the table and say thank you for your word and then send the response so this is one extra thing that I'm adding to this and if I now run this it's gonna say hey score is required so I can say now five thank you for your word and we can go back here and we can see purple is there with a score of five so there are a lot of ways to sort of check and see what will how people what what what's coming in and determine whether something is there or not okay so let's add one more thing to this let's add a search route so that if the user of this API wants to query for a particular word and get the score back let's see how that would work so I'm gonna add another route and I'm gonna call that I'm just gonna go down here to the bottom I'm gonna call it a search for a word and I'm gonna say search search word I'm going to add that fun a callback now search word with a request and a response and I'm gonna say the word you're searching for is whee Qwest params word and now what I want to do is see does that word exist if if that word is part of our words table I need to make a reply I'm going to send back a message but you know some going to say status found you know word word that's kind of probably a it's a little awkward what I'm doing I'm just gonna call this yeah it's fine it's a little awkward I'm doing with these variable names and then score I'm gonna say words word so what I'm doing here is I'm saying if it's found then the reply sorry equals this particular object so if it's found the status is found here's the word here's the score otherwise the reply is status not found and then there is no I can send back the war that word there is no score and I can say response dot send reply so the idea here is that you know I'm just showing you an example now I'm making a route for the API where a user could say hey do you have this word rainbow in your database if you do could you give me a score if you don't will you tell me that you don't have it so this is yet another thing search word check to see what word did the user set in is it part of the data if it is say it's found and this is often a good technique let me give you back the data you asked for because a user of this API might be querying like a thousand different words and all the other responses are coming back and if the data that came with the request also comes back with a response is gonna make it easier for the user to manage so now let's run this and I can see here I'm gonna go now to search slash rainbow we can see status found the word is rainbow the score is five search unicorn status found word unicorn score 3 search kitten status not found word kitten so this is how I am now making an API that allows a user to query the database so we have the ability and then by the way now I can say add kitten 5 and then I can say search kitten and now it's found with the score of 5 so notice how I'm only interacting with this API via the URL address bar and ultimately as I get through more videos here I'm going to look at how do I actually interact with it from my client side JavaScript code which will really open up a lot of possibilities so I now have an API which has three features I can look at all the words that are in the database and their score I can add a word like purple didn't I already add purple so we're gonna have to talk about that and Oh purple is positive give it three so I can add a word and I can also search and see if a word is in there purple is in there but perhaps pink is not so this is a good start I have this idea of persistence there's a database of information users can add to that database users will can request all of the data from the database or they can request one item from the database but you'll notice here I have this wonderful thing where I have I add kitten in purple so now what I'm gonna do is I'm going to quit the server and I'm going to restart it and I don't have kitten in purple anymore so while there is persistence across to here the puppies barking about my wonderful API discussion while there is this idea of persistence while the server is running as soon as I quit the server and restart the server I've lost any new data that wasn't just part of what was originally written in here so in the next video what I'm going to show you is how to keep persistent across and multiple times running the server how do I take what's here and actually not have it be hardcoded but save it to database okay and I'll see you in the next video whoa I'll do that