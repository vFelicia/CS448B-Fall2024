(Bell) Okay I am back again, ugh so many Mastodon videos. This now, what I want to do is look at how I can deal with a mention. A mention is when somebody else toots, posts, and mentions me, the bot, in their message post. So and this will come in as a notification event type mention before I dealt with, if I look at my code, in the previous video I dealt with anything that is a follow. So now I want to say, else if message data dot type equals a mention, so what I'm going to do is in this example is if somebody says "please like or favor it" or something like that, I will like or favor it. If someone says please boost or reblog I will boost/reblog. So I'm not going to toot back but I am going to act on the message based on what the content is. So, the first thing that I might want to do is I could use a regular expression. So, for example I could say, to make this regular expression, like or favorite or heart so now I basically want to look and see what is the content I need to look at the data dot status dot content. So I need to say, content equals data dot status dot content and I want to say, if regular expression test content. I am pretty sure this is a function; and, if I have a regular expression if the regular expression is matched somewhere within that string content it will return true. So if that is the case, I want to say M dot post and then what so I need to go back and look the API documentation because I want to favorite it. So if I go back here, and look under favorite the path to favorite it is statuses, the id, and favorite. So, I need to say statuses/ and I want to make this a template literal once again I need to put the ID in here, favorite. This is me if it matches favorited. Then I need to get the id, so the id is under data status id, perfect, data status id, and there aren't any parameters that I need here so I can just go straight to the call back error data and I can make a little function here and say if error console log console error error else console log favorited. And presumably, this is going to look a lot like this I imagine favorited id so let's just do data dot id I'm guessing, so just to have a little more info here favorited and data dot, and by the way this is message dot data and this is message dot data and this is favorited data dot id. So lets see here, what's wrong. Something is terribly wrong. I am out of whack in terms as my brackets and things. Oh, this also needs an end tic there I go and a semicolon. So apologies if this is hard to see here, I can move this over and give myself a little more space so we can look at this code. Ah! (giggle) Let me make this font a little bit smaller, there we go! So what we are looking at here is if it is a follow, then we are just going to say thanks for the follow. If it's a mention, we are going to see did the mention use the word like, favorite or heart. If it did, favorite it and give me some information on if it worked or not. So probably I should also do something like let's say console dot log, just in case the message has let's say console dot log a mention, a id, and then add content. We are going to run this! Whew! Okay, what did I lose? Something weird happened here. I also need this, ah, oh boy, template literal come back. I am going to try and reformat all this stuff. Ah, so sad, hold on. We are going to get this back! There we go, okay we are good again! Here we go, here's our code we've got it! If you mention me, check to see if you like, favorite or heart and if so, I am going to favorite it. So, here we go run this bot and see if we have any errors. Okay it started, alright better start mentioning me! Try mentioning me with a heart, with a like, with saying favorite or not. I will just wait. (dings and upbeat music) Oh what is going on? This isn't right! Ahhhh something bad is happening! (music stopped) My console logging is crazy. What happened here did I put a break point by accident? I did not mean to do that. (buzzer) So, by the way we are at an awkward edit point because it didn't work, some weird stuff happened, but I now discovered through the thankful helpful people in the chat that I have a few errors here. So, number 1 let's go back to the API for a second, and I didn't pay close attention because it is actually spelled with a "u" here. Id/favourite, so this seems kind of important that I spell it correctly. So let's fix that here. The important place is here and then a couple of other things I want to use a flag for "i" for case insensitivity and the "u" should be optional here, it really doesn't matter. I'm still not sure if this is the right kind of heart. Now, this should fix that! I should now actually be favouriting things. So, we are going to try this again. I'm going to go back to here and I'm going to run this bot again and I'm going to wait. (upbeat music) I'm back and a lot of people mentioned me. Let's go take a look at the actual timeline. We can see it is favoriting and we can get an id out. You can see that this id is different from this id and some people are asking about that. Let me mention that in a chat in a second. Let me go here, "You're my favorite" hmm how come it didn't get favorited, ah because I've got to refresh. Okay, this got favorited because it has favorite in it, and this got favorited because it's got a heart, uh this got favorited because it's got the word like. I'm looking for one that doesn't have ah, this must have been from a while ago when it wasn't working. But, we can see here please like, please clap so, please mention me without using like, favorite or heart to make sure that also works. Okay I'm back and we can see here that kwichmann wrote @codingtrainbot Choo choo and after refreshed was not favorited. So it is working only if I go back the code only if this regular expression matches will I favorite it. By the way, we can really quickly now just also copy and paste this whole thing and say boost or re blog or retweet or, lets get another emoji in here, control option if you use a train emoji or if you use the train emoji then we will reblog. Now, if I quickly run this again I will make this regex2 and I don't need to get the content or id anymore and I don't need this again; and, it probably makes sense for me to actually put it, actually it would be okay because they both can happen. So, here now, this will boost anyone that says boost, reblog, retweet, or the train. I'm mentioning this is a mistake here so this data dot id, this is the id of the actual favorited action which every action has an id. If someone mentioned that has and id, which I captured up here but this is the id of the actual act of favoriting it. So, debugging wise, I don't know which is more important to display. I could display both of them, but you will see these are two different things. And this should say re blogged and this should say favorited. So let's now do this and here we go! Everybody you can now ask to be favorited or re blogged. (music at ultra fast speed) A lot of mentions came in, you can see some things are being favorited and re blogged, some things are being re blogged. Let's go take a look at the timeline. Oh yeah, "I love trains", this got boosted. @codingtrainbot got boosted. This one, "re blog this I want the followers!! Like it too! We got both a re blog and a like. Hooray! We now have a bot that both just checks for follows, mentions, and if somebody follows it toots back "welcome aboard" to that account and if somebody mentions and uses any of these key words it either favorites or re blogs. So the things that I didn't do, which I will add to this, I don't know if it makes sense to keep adding to this. I'll do another video where I will add this. But, you might want to try this as an exercise. What about actually replying? What about posting and actual reply back to the person? If the person asks, what is the meaning of life? Then, the Bot replies with a random number or something like that. Give that a try I'll add that but in the next video. Goodbye! (bell) (upbeat music)