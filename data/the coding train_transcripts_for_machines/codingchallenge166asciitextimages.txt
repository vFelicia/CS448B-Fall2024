hello choochoo welcome to another coding challenge video i am i want to let you know something before i get started thinking about changing the name of the coding challenges to me the idea of a challenge is something you have to beat or like defeat i want something more exploratory and collaborative and train themed like a maybe a journey but i don't know if that works if you got any ideas let me know in the comments we'd love to hear what should these be called going forward but today boy do i have an exciting one for you it is one that i made during a live stream uh about a year ago translating an image's pixels to ascii characters like you're seeing right here so i want to do this again i bear i have no memory of doing this a year ago so i'm kind of starting fresh we'll see if the result i get is the same as what i have here and then hopefully you will make your own creative version of this and share it with me on the coding train website or in the comments or on social media or all the ways people share things with each other let's get started first i would like to thank ert this is a wonderful example i believe of some shader code to render some beautiful ascii art and it all relies entirely on this array of characters this array of characters is ordered from either brightest to darkest or darkest to brightest depending on what color you're sort of rendering the background or the character so i believe that what i can do oh let's use the whiteboard so the idea is that i have an image and maybe i'll start like i did a year ago with an image of a kitten now every pixel of an image has an rgb value typically the rgb values are stored as numbers between 0 and 255. if i want to get a brightness value for a given pixel the higher the number the more the color there is the more red the more green the more blue if all of those values are all the way up to 255 we've got white so the higher the numbers the brighter the pixel if i wanted to have one number to represent the brightness of a given pixel the sort of grayscale value of that pixel one way i could do that is by averaging these three values now there are more sophisticated algorithms for taking an rgb value and translating it into a black and white image a brightness value maybe i'll investigate that as i get further along with this project but i think i'm going to get a good enough effect just with the average so let's say that any one of these pixels let's pick this one let's say that its brightness value happens to be 137 now if you'll come with me back over to my computer screen let me remind you again of this string of characters called density do you think is there any chance i could write out all of those in the same order on my whiteboard over there almost none but i'm gonna try to do it anyway mark estimation abc oh no i ran out of room i did not plan this well close enough that keeps going maybe i'll maybe it'll be fixed who knows i don't know what you're seeing because it's like a magic thing happens after i do this it's amazing if we're looking at this like first of all there are so many possible one beautiful abstract generative kinds of images we could make just using these ascii characters so i would encourage you to go in that direction but i'm going to go in a different direction which is to say the denser the character the more pixels it uses i'm going to match that to a bright pixel so essentially i could create some sort of mapping where if the color is 255 the brightness value then i would render this particular character if the brightness value were zero i would render whatever character i didn't get to down here and then 137 would be appropriately somewhere here so like 127 would be exactly in the middle so maybe 137 this is like highly approximate might be this character would get drawn over here to represent you know the uh ear of this particular cat who is now sadly in jail oh that poor cousin let's play we got to let the cat out cat go free run like the wind go so the first thing i'm going to do is take this string of characters and bring it into my own p5.js sketch now in case for some reason this is the first time you're ever watching the coding train this is p5.js a javascript library for creative coding images animations and all sorts of wonderful beautiful stuff find out more at p5js.org i also want to point out that i'm trying to get in the habit a little bit more about when i declare a variable that i know isn't going to ever change i'm going to use const instead of let oh i forgot to talk about the timer has there been a timer going this whole time i hope so good it's usually now over here that's where it is it should be there how long i've been doing this for like seven and a half hours even though you've only been watching this for 10 minutes or whatever it is right now before i start trying to load a video into my p5 just sketch i have got this nice little photo of gloria pickle dog and i quickly just removed the background from the image in photoshop which i think will make the ascii version of this image pop a bit more in terms of what i'm about to try to do so um i uploaded a very small 48 by 48 pixel size image to this p5 uh project i've got a separate video about how to upload files to the editor if that's something that you haven't done before and then all i need to do is add a preload function to load the image and we can see that gloria has been loaded it's kind of fuzzy it's blurry because i'm using this very low resolution version that's going to make translating it over to ascii easier of course i could work with altering the scale within the code itself but i think the demonstrations could be much easier if it is a onetoone napping each pixel gets one character the next step that i need to do is write an algorithm to walk through and look at the brightness of every single pixel within this image now this is probably a block of code that i have typed in countless numbers of videos and explained it over and over again i do have an entire video all about how the pixel array works in p5.js so i would look at that if you want all of the details but just to give you the quick high level points every single pixel has an rgb value as well as an alpha value the alpha dealing with transparency so i am not worrying about transparency for this particular application but i do have to account for that within the pixel array every single pixel we can think of as having a number zero through the end of the image so in this case with this five by five image there's 25 pixels but since every single pixel has four numbers associated with it the actual array storing all the information is rgba for pixel 0 then rgba for pixel 1 then rgba for pixel 2 etc etc so that translates back to this really nice formula where i can say the column plus the row times the width times 4 gives me the red value for any given column and row pixel and then i could get the green value by going one spot later and the red the blue value sorry by going two spots later so i kind of just explained the whole thing uh it might not have total made sense to you what i would suggest if this is confusing to you go find a piece of graph paper or any regular paper make your own little five by five image and just try numbering everything and trying things manually that's really the way i learned this stuff and kind of was able to wrap my head around it and you can also check out that other video where i explain it in more detail just to make sure this worked let me now try to draw every pixel as a square so first thing i need to do is figure out how what is the size of the squares for the moment i'm still working on this for canvas i'm going to try to switch over to making these dom elements at some point but i could just take the width of the canvas divided by the width of the actual image to know what that ratio is what did i do wrong what did i do wrong here i messed something up i guess i need to call load pixels ah i need to call load pixels so if i'm going to use the pixel array of that image i've gotta alert p5 to it and call load pixels so there you can see pixelated gloria i think for changing this into ascii having an even lower resolution image of gloria is going to improve things so i quickly made one that's just 20 by 20 and uploaded that and i'm using that instead now now again there's so many visualization possibilities we could do here with rgb color with multiple images with varying degrees of resolution i'm not gonna go down all of those roads it's a train it's a train it's not a car we're not driving on a road it's a train the track the train track i'm gonna follow is towards ascii so let's now look at the brightness value of each of these just by doing the average of rgb now there is a p5.js function called brightness we could try that and see if we get a different result um this is actually taking the color value and converting it to hue saturation brightness but just to keep things simple for me just going to do the average now we can see a grayscale version of gloria now to add text so what if i were instead of drawing a square we're just to draw an individual character just the character g for gloria let's not draw the image anymore let's make the font the size of the square and then i will need to shift everything down because i want the letter to appear in the center of the square i think this would probably more be much more clear if i use the black background and we could kind of see gloria peeking out there from all of those g's but again this is not what i want to do this is something i could do and there's plenty of possible outcomes maybe i could start writing some poetry or having the text change or pulling from a live data feed so many things but instead i want to take the brightness value and map it to one of these characters in my density string so i can get the length of the string so now i need the mapping to go from zero to that length or length minus one so that character index is take the brightness value which has a range between 0 and 255 and map that to some number between 0 and the length of the string ah but this is going to give me interim values like character 3.1759 it's like kind of like pi but not i don't know why i picked that out of my head so i need to add the floor function to take the decimal off so i'm only getting the index to a particular value 0 1 2 3. now instead of drawing g i can just draw that particular character and the point of this is for the brightness to come not from me setting the color of that character i'm drawing but from the contours the amount of pixels that shape of that character itself so now the fill shouldn't be tied to brightness it should just be 255 for all of them now do you see do we see gloria in there not so much just yet let's see if we can fiddle with this a bit one thing is this is inverted right so remember the brightest characters are at the front the beginning of the string and the darker ones are at the end so i want to reverse this to from length down to zero there now that looks quite a bit more like gloria i think there's an issue here with the spacing between the characters maybe i want to have the the spacing between the characters to be less i want to arrange them in a different way i want to use a different font a different scale but i think that this is going to be more effective to play with by changing this over from canvas to actual dom elements meaning i'm going to render the text on the web page itself rather than draw the pixels for text into a image a canvas image both have value depending on what application you might want to use this for but i'm just curious to see since i'm in the browser i could actually just copy paste my ascii art and put it into somewhere else that would be kind of fun to do i'm going to take a big leap of faith now and get rid of create canvas and type in no canvas i'm also going to remove the draw loop because i'm just rendering a static image now of course once i add video in a moment you know at about 17 hours into this video then i'll need to put the draw loop or some type of uh animation back in but right now i'm going to remove that one thing i'm curious about actually is can i get gloria to show up just in the console right because ultimately what i'm doing is for every row now i need to do the rows and i just realized that my algorithm is in reverse because i'm taking for every column no i need i need to do all of the columns in other words currently the way i've written those nested loops i'm going to this pixel then this pixel and this pixel and this pixel and this pixel then back up to here and what i want to do instead is go through all of the columns then down to the next row so i think i could just flip those two lines of code and then i can accumulate all of the characters into a string for each row there's no concept of drawing now just that row of characters and i believe then i should be able to just say console log row run the sketch that's kind of a squashed gloria right stretch it out can we like stretch out in post somehow just to like see it for a moment so the reason it's squashed is because each pixel takes up the same amount of space horizontally and vertically but these particular pixels are spread out there's more spacing between each line than there is between each character so i could have more control over manipulating that by rendering my own text into the browser page now i can't see it because i've got a dark gray background and very small characters that are black text so i can add some code into the css file to change the background color set the font and make the font larger now if you don't know css good we're in the same boat neither do i but i know enough to kind of make things work when i need to and i do have a video tutorial a bit about the basics of css that you could refer to one thing that's kind of critical here that i haven't addressed is that i'm using the font courier on purpose for me it's a little bit easier right now to just use a fixed width font meaning every character no matter what it is takes up the same amount of horizontal space um this makes just sort of the math of arranging the pixels much easier although it is an interesting problem to think about how we would do this without a fixed swift font that's something that you could take on as your own challenge perhaps i'm also noticing something a bit odd here which is that the contours of gloria are lost every single row starts all the way over at the left why is this well if we go back to here you might notice that this character at the very end of the density string is a space and if i put a space into a web page it's not actually going to necessarily render it unless it's in between characters in a particular way so what i need to do here is instead of rendering a space actually use the nonbreaking space character thingymabob what is that ah it is an html entity which is a piece of text that begins with an ampersand it ends with a semicolon and there's different reserved ones like ampersand greater than less than there's one for nonbreaking space character i forget what that is though what does it stand for nonbreaking space i think it's just sp for space i think what i'll try to do is add the line height property to spring the lines a bit closer to each other if i make that 12 point okay that's much too overlapping that's a little bit better let me go back to the higher resolution image the one that was 48 by 48 pixels make a smaller font size and there we go you can see glory in there can't you don't you see gloria what i love about this now is i can take this hit copy make a just a plain text file and paste it in this is definitely looking much better kind of white on black let me try to recreate that in my version here tada gloria pickle as ascii art now i want to show you how easy i think this will be to take this from a static image to a video i have no idea where the timer is at right now but i expect that i'm gonna have it in the next minute or two instead of gloria let me make a variable called video no more preload there's my video image right now let me resize it to 48 by 48 i'm going to add draw back in to use the draw loop even though there's no canvas i don't need these width and heights anymore i forgot about that because i'm not drawing this should be video hey i'm getting somewhere really fast and oh i've i've done a horrible thing so because i'm using creative i hit stop i just created image after image after image on the page so instead of using creative i need to update the text of each div i think this will also be easier if i just make one div that has line breaks in it rather than each row is a particular div you might be asking what is the div i'll include a link in the video's description with more info so now just one div that i'm going to display on the page so instead of each row being a separate string i'm just going to write a string called ascii image and accumulate all the text into ascii image and then after each row add the html tag for a line break i believe this should work okay well i need to update the div to include that text and we've done it we can stop the timer i mean we have some more things to say i want to clean this up a little bit but we can stop the timer this is pretty close to whatever i did a year ago looking at this i'd like to sort of see if i can fix this up a bit one of the things that i can immediately do is work with that string of characters that i have in my density string for example what i since i have this kind of locked in green background i think i can use many more blank characters blank spaces for uh darker characters so for example just adding a lot of spaces here we can start to see that i am kind of reducing i'm essentially thresholding the image in a way so that only the brightest pixels get uh kind of going with a particular character i can also just use different character strings for example here's another one although i have it inverted so if i have the darker characters at the beginning of the string and the brighter characters at the end i will want to change update my mapping to go from zero to length we can also play around with the resolution of the image i don't need to squash it into a square i don't think so now if it's 64 by 48 and i've adjusted the spacing of the characters and the line height i've done a pretty good job of having the image retain its original aspect ratio and dimensions i'm recording this during a live twitch stream so by the way you can go subscribe on twitch i don't know how much i'll be streaming on twitch versus youtube but i might as well put this in the video right now and in the chat i just got a suggestion why don't you filter out green since that's what a green screen is for so yes if i want to make use of the color values of the pixels there's a lot more that i could try i just i could keep going i don't want to keep going i want to stop here i want you to explore this and i want to create i want to see what kind of ascii art you create from this video please share it with me on the coding train website on social media all the links and various things are in the description thanks for tuning in i hope you enjoyed this coding challenge ah the boiler just came on there's a loud buzzing sound i'm leaving it in we're leaving it in this is in i'm in a freezing cold garage right now i had the heat off during this whole time just so i've been recording this coating challenge with you the heat just came back on i'm gonna go warm up inside with a toasty mug of something and i'll see you next time on the coding train you