hello good morning in the morning in New York City where I am here time for the boating trade I'm very excited for today because I have a couple things that I'm planning and excited to do you are here watching my microphone is actually on I haven't seen anyone in the chat saying they see me yet so who knows if this is actually a live streaming but I suspect that it is because it says here on my secret invisible computer stream status good the health is good the health is good all right so I'm checking my Twitter which is the thing that people tend to do not doing that I'm not doing that I am checking the YouTube chat and people are saying it's on then great alright so um couple things I want to do I would like to first say thank you I've noticed thing that they're all these little shiny icons in the YouTube chat going by four people have joined as a member of the coding train and I just want to start today and I know there's been many people who also back via peaktopeak the patreon thing and and some who have for like possibly I don't know what when I started it but I've got me almost like two years now so thank you so much I would say that the the the support that I get through those mechanisms allow for a couple things number one it really motivates me because I I think part of my my work ethic sort of goes a little bit is driven by fear to some extent and this I don't want to disappoint anyone and if there are people who are contributing some small amount of funding to the work that I do I feel an obligation to make the videos which is sort of weird maybe that's not how I should start but I it's sort of it's hard to find the time and this really helps me find the time it also Allah has allowed me to do a whole bunch of things in terms of hiring and and paying for some technical support and video adding support and community management support over the years a lot of people also volunteer their time to help with a lot of different things whether it's github repos there's a whole project of developing a new website for the coding train that seems to be entirely volunteer driven which I makes my heart sing so thank you for all of these this kinds of support so if you feel so inclined saw but there's a new member right now Giovanni Moncton ro Moncton ro welcome if you have joined as a Youtube member I'm tentatively thinking of sunsetting the patreon at some point I'm not sure what sort of it's a little bit it's a little bit much to maintain multiple platforms but if you have joined as a YouTube member check the community tab and there are some special posts there that you can find with a link to a Google form and we have a slack channel and that sort of thing so I wanted to say that another one I'm just opening with like the sales pitch stuff today can you believe it that's very unlike me I don't know I'm feeling saucy Bernays ok so the thing I want to mention because I've been I got a couple new books recently one book was recommended to me by Lee Tustin the other I saw on Sabra khan's Twitter one is this book rise of the video game zine stirs how freaks normals amateurs artists dreamers dropouts queers housewives and people like you are taking back an art form by Anna Anthropy it's like semitranslucent because it's not there's no green but I guess yellow is some somehow this one will be require and solution right this is actually green the bottom of this book is green and the author's name is also green welcome new member Rock will or well I guess I should pitch this kind of stuff more often Hey oh oh out to bruno Ruchika who postprocessing community day in Santa Maria Brazil is sorry for that it was like some sort of attempted Portuguese pronunciation which I probably did terribly is this Saturday I know they're a bunch of the processing de New York City is this Saturday processing day Baltimore is this Saturday processing gave bond alors was just this we get oh and processing day Abu Dhabi is this Saturday so there if you if you're not aware but I have this tab open don't I mention there are processing community days happening worldwide for this onemonth period between January 15th and February 15th I have now been to just one but I'm gonna go to a second one in New York to Saturday and if you go to a processing community day share with me your experience what you learned but I wanted to mention these two new books that I have approximately Copenhagen happened and then I believe Simon is speaking at a processing community de Amsterdam yes processing community Amsterdam is this Saturday Simon Tiger loyal coding trained viewer Simon Tiger has a wonderful channel that you should also check out will be speaking and I'm I can't I wish I could be there I so wish I could be there but I hope that I will get to hear about it or if it's recorded I will get to see it alright but if you are if you are interested in books because first of all go to your local library support your local library libraries are an amazing wonderful thing but another way that you can support the work that I'm doing is through the coding trains Amazon page and I spent about five minutes like looking at this page and adding some stuff to it I added these two books I haven't actually read them yet they both just recently came via Amazon but so I keep a list of like now I made a new category for games I have some other gaming game books game history books like some really excellent ones I love that book by Ian bogus about the Atari the history of the Atari that racing the beam yeah this I got to add this to my Amazon this book is really fantastic racing the beam it's a study of the early video game console the Atari video system is really fascinating to read about the kind of constraints programmers had to deal with in earlier days of computing when access to RAM and resources wasn't as vast I will add that you can also get your own it's not oh the million random digits book I've got to find that original your top yes I know there's some issues with the green screen I will I will address that in a second you know this you might like this unicorn maybe this is like terrible for the environment and I should take this off but it's a nice like balloon unicorn thing but you call those floating unicorn flip deep there's some books here for beginners data visualization books that I have here there's plots of more stuff that I need to add so I'm trying to soup this up cuz people always ask me for oh that thing book you mention or there's you have any recommendations I want to learn this books are wonderful thing again support your before you buy something from like Amazon I would say go support your local library but you know if you do need to order something from Amazon if you order it through here a little a little bit of money will go from the storefront I don't know why I'm all about the money today just again I woke up feeling like a little Bernays and I'm a little bit saucy I think actually one of the things I wanted to mention is I have gotten recently more requests from people asking to sponsor videos and I haven't really figured out how to deal with that I think that would be a good thing for me to do in terms of growing the channel and the possibilities of things that I can do but I also want to be careful about you know not plugging some sort of product that has whether it's you know ethical considerations or just kind of not something that would be of interest to the viewers but one of the things that I'm toying with is I'm hesitant to read sponsor messages on the sort of like edited videos but I feel like maybe periodically during a live stream I could possibly do that alright so I don't want to spend too much time but if you have thoughts or ideas or experience with that and advice for me get in touch I would love to hear about it but as you know coding train live is sponsored by water and today we're going to do a sponsored coding challenge about turbulent flow does laminar flow you know this water has really been behind on paying their bills I get what's I'm get I get about 37 cents for each mention of h2o alright alright so I'm gonna get started coding now what's happening today we oh oh I have two other things I want to mention I wrote some things down and a piece of paper oh wait that's the wrong one okay hmm I would like to try to experiment and Matt Shia who does video editing for the coding training I have been discussing this different experimental things we could try in terms of editing the content after the livestream and one of the things that would allow for a lot more possibilities is to record the green screen without right now the only thing that I do record to disk is what you are actually seeing so if I recorded the green screen and did a screen capture separately that would be possible that that would open up some possibilities after the fact the issue is I don't know how to do that with open broadcast studio because I'm recording to disk the sort of feed the broadcast feed is there a way to also record or maybe just record instead I think the green screen footage if you have any experience with that or know the solution please let me know oh thank you to youtube for supporting this new project I'm about to do which is a playlist of videos called working with data and api's like that Google search is gonna come up for what I'm looking for coding train my look I already made this playlist no no no no don't get to Outlook there's even a web page on that no this is what I'm looking for I have made content like this before but it was a very p5 focused which is fine and good and it also is a little bit out of date now so this is my new plan I guess I should try to fix this oh wait oh no it's it's not this it's actually that what's going on with the green screen this is all noisy today it's maybe this light moved no this light moved there we go that fixed it so why POC rights you could run OBS with multiple instances one encoding a screen capture of another did you ever try the stream labs version of OBS no I have not I am NOT opposed to using commercial software I don't know what stream Labs offers but I will I will look at that alright umm but this is something I really have to get working on this I have made a commitment to do it I have to do it I'm excited to do it but if you have thoughts or ideas about topics that would be useful for me to include under the umbrella of working with data and API in JavaScript and I think I'm leaning towards the kind of like data side as opposed to the visualization side I'll make examples that create visual demonstrations but that's not really my forte I don't know what my forte is I love the word Forte but it certainly is not the sort of front in the visual design sensibilities so if you have ideas of topics please file them as a github issue here rest API that sounds great be specific if you can and I will take that under consideration so this is coming to your YouTube TV's I'll guess YouTube TV is an actual thing so your your YouTube your YouTube thing soon I'm going to the next week I have to start exactly I have to start this next week I I'm gonna start this next week alright that was my list now I'm gonna start with a warm up today a little throwback Wednesday that's a thing right throwback throwback for Wednesday it's not really even a throwback it's you know apparently there's this mean you know you've got a I'm gonna need some help from the young people out there to teach old man Schiffman here about memes but apparently there's this DVD bouncing logo meme so let's go to here let's go lets go rainbow topics and this came up thank you to Mike Boyd's video by the way first of all huge thank you to Mike Boyd who who he has a channel actually hadn't seems channel before we made this video but now it's kind of addicted to it he makes videos about how to learn stuff I'm really a man there's so much there that I want to kind of like go through and try you can see sort of it's starting to recommend these channel these videos to me now over here actually this is not what account of my login oh I'm actually logged into my account okay that's fine I usually don't like to be logged into my account while I'm livestreaming but it's fine what am I looking what's a thank you to Mike Boyd because Mike Boyd made a whole video okay okay yes yes yes I hear your thought okay about learning to code look there's me and there's the there's the p5 logo learn to code and made this like amazing game and actually have some ideas for what I might like to do to make my own version of that game or augment the version of the game he made oh and welcome to new viewers from my quite so best F says I subscribe to you through him so I you know I'm not kidding like if you look at my new subscribers graph it's like it's huge spike I gained like a few thousand subscribers the day that he posted this video so thank you and welcome to new viewers of Mike boy who are now here on the go degrade yes Kotick train is a channel where a 45 year old human beam has a toy train whistle and struggles through programming that is a good way to summarize this channel and what was I saying ah but I got the idea I tied was this before because I think one of the things that Mike boy did to first practice learning programming was to recreate the bouncing DVD logo and I love this idea I think by the way there's a website like bouncing DVD logo comm probably yeah there is a website that has this that so I love the idea of doing this because I am often looking for challenges that are super beginner friendly but I think actually the most viewed videos on my channel are the snake game and the Purple Rain video and again I'm not just here for the views I have to admit I'm trying mean it's very hard to turn off that chemical thing that happens in your brain when the like clicks and the likes and the fake internet points come to you but I I really want to do lots of different content some that a lot of people might like to see in some that very few people would like to see but I think one of the things that I'm often missing are very like beginnerfriendly challenges and this I mean to be honest like I've done this before this is basically like my bouncing ball in p5.js video but this might you know it's got a little got a little thing to it would be video bouncing mean thing plus we can wait to see if it gets to the corner it's very exciting we can like have lots of high jinks and so I'm gonna so I'm going to attempt this that's what I'm gonna start with so what other I want this link and I am going to do it in editor dot p5 just oh I want to put a bounty on something but but but but I okay let me just let me talk about what I want to put a bounty on this is the trust me this is not gonna be I don't know what a good prize would be or if how to like manage this so maybe maybe you just get like a lot of thank yous all that your coding training teacher if but there's a really like weird bug and with the p5 web editor let me just go to recently updated save refresh issue I actually made a video I that demonstrates this issue whoa oh no that's that's where it was in the livestream let me go down here so I'm gonna show you like at a certain point you're gonna see what I mean look at this let's see let's make sure let me go back a little bit okay I changed the background to 220 I hit play look at this there is this thing that happens sometimes with the web editor right now and I cannot figure it out cannot reproduce it I cannot reproduce it consistently and by the way okay oh that chat message just went by winner reference it I don't have it here it's fine you can see that the background is 220 it's drawing that's like a background of like 100 and I'm about to refresh the page in a second so refresh the page and background went back to 100 so there's something happening where what's in the actual code editor itself doesn't get saved or the autosave or the saving system there's some mismatch I think Cassie writes here there is an inconsistency between what is in the editor what is in the Redux store what's on the server when a sketch is saving and then a user changes the editor I think it's not getting into sync proper Boop properly so I'm having a hard time consistently being over up everybody who filed every buddies account this has a hard time consistently reproducing this so there's a couple things that I would love to throw out into the universe if you can figure out this bug oh boy that would make me so happy but even even benign instead of that if you could figure out a way to consistently reproduce it like you follow these exact steps with this timing that would be great because I really want to use the P 5 web editor for this coding challenge and I'm think I'm going to but I'm slightly afraid of running into this error and also it can cause a little bit of heartache because you know it's one thing for me to just lose like one little change and after like retype it in I think some people are losing more significant code ciphers reminding me that there's a 1 billion dollar prize to the first person that mathematically proves the navier's stokes problem in 3d offered by the clay math institute that's definitely like a breaking news but that's maybe should work on that because I'm not offering anything like that alright I better get coding it's almost 1100 a.m. alright so going to the P 5 web editor let me go here so let me do some pre pre this is all over this assignment this is actually a YouTube video the science behind the perfect it did in the bottom right and then it moved to the top left we want to take bets yeah I'm going with bottom right I can actually watch alright alright so this is great so I want to get this diagram here wow they're actually like solving the math to predict which corner it's gonna go to Oh a there's JavaScript code this is crazy all right oh I could even use the timer do I dare use the timer mmhmm I don't know do I dare use the timer let's just see that this could be our fastest coding challenge yet oh but before I do what I want to do is get this and I'm gonna do this before what do I want um I think I just want like the 64 pixel one no oh oh that's really small let's get a bigger one let's go to well let's just go to the original file why not write dvdvideo logo logo downloads tend to do this in processing but then I'm going to do put this in where we go let's see DVD bouncing logo and I'm gonna do ad file I'm just gonna do this in advance think how is that font size wise how is this font size wise pretty good right and if I do 400 by 300 that's 4 by 3 what does that look like that's very small 600 by 400 is also 4 by 3 no it's not I guess 800 800 by 600 is 4 by 3 it's kind of big though that's good let's do that and I think I can probably keep this over a little bit so on nuraghe Hazra writes in the chat just tried the p5 bug I think auto reload causes the bug I think you mean Auto refresh and you're right I think Auto refresh is related to the bug however I have experienced that but even with Auto refresh off high contrast I can do the high contrast view yes thank you for that suggestion all right how's this everybody the issue here is that I'm ultimately going to make the background black oh that's fine in high contrast even ok great ok you should do it as a ten minute challenge like in the old days ok I'm just like I hesitate to overlay a timer so what if I use ok I guess bear with me for a second I've got open broadcast studio I used to do this ridiculous thing where I would put the if you really want me alright let's do a quick let's do a quick straw poll use a use a timer on screen yes no sure improve spam all right somebody vote no no I'm not gonna influent this no I don't want to vote just share no Twitter what URL if you want to vote in this I'm sure somebody can put this into the chat and with moderator privileges and vote there okay so what I'm going to do while you're all voting is pull this up and now is this really true the DVD logo moves with perfectly is is this assumption like based on how it actually behaves or is this an assumption they're making just for like just for the purpose of this article all right I don't know like because I was tempted to just make a random speed but I guess if I could pick it's easier I just pick one variable absolute speed and maybe if it's all integer math I could actually check if it really hits a corner but give it like a random location like that's what I don't know this is why I kind of want to like the question I have for you all is should I be doing this with with some kind of precision and I don't want to draw it out yet strawpoll site is down oh let me just vote oh my god really seriously seems to not be down oh wow oh you know kids see this it now shows you live I love this this is amazing I got to use this draw pull stuff more often so the fact that has ads on it I guess I can zoom into it and then you won't be able to see the ads there is one L missing where's the L in the link oh I probably know I probably posted the wrong link sorry I'm allowing people to post the link except they look the chat goes by much you fast I can't click okay all right I can't believe that there's 141 people voting right now that's kind of amazing so my question for you is this is like phoneafriend and and maybe we could try to get the answer here and it's like for this DVD logo thing are there any constraints I need to take a mic like should speed always be a certain amount should they locate should where it starts be constrained like how does it actually work oh like this is a different website I'm actually using this straw poll dot me I'm using straw poll dot me which is a different website than straw poll com apparently which is what I've used in the past okay whatever so like how does the DVD bouncing logo really work thank you google okay all right no I don't want notifications the object moves according to a vector upon hitting the boundary interpolate sub ball blah blah blah blah oh my goodness oh my goodness always moving in a straight line probably a 45degree angle okay so does it start though in a random place random starting point the logo doesn't move smoothly moves in chunks like ten pixels at a time and the x and y velocity are constant okay thank you to char so if the x and y velocity are constant are they also always equal is it a requirement that it moves at a vector where the components are equal where the heading is basically 45 degrees and do they have to be both positive always start moving down to the right that's my question random starting point I could do and I guess I should but this is why I almost want to do i I want to do it with integers like that way I can check to see if it's equal all right I think this is good enough oh I I think people want the timer I think that much is clear let's see if we've got a little screenshot of Mike Boyd doing the bouncing okay where's a timecode where Mike Boyd does the bouncing yeah okay here we go and what is the dimensions of this logo file the logo is this is black it's not gonna 10th I need to change this to white and yeah I need to change I'm gonna have to process this do I have Photoshop or something on this computer anybody want to quickly make me a version of this where it's white I bet you I get let's see we could do this faster start coming down to the right oh did I not enable slow mode that's interesting Oh Photoshop that's like Photoshop apparently that computer thinks it has Photoshop oh hello Creative Cloud all right this is like I need the chat to teach me how to use Photoshop I don't know I kind of know how to use for where did I put it downloads so I wonder if I could do just like like I know I could do if I could fill it in but what if I just do like auto color adjustments brightness cups levels like what if I did this hold on what if I did just like brightness contrast am I just gonna have to like fill it in control click on the layer control kick on control i/o command I know I would be on a Mac the command I do invert AHA invert of course it's got this little like black outlines I don't think anyone will care especially when the background is black okay and then let me look at the image size so let's make it I mean I just don't want to let's make it let's say 300 100 so if my canvas is gonna be 800 by 600 I probably want it to be something like 64 I mean they looked like it 128 128 by 76 let's try well first let's save it then let's do image size 128 by 76 let's do save as save as to sure whatever quit photoshop that looks like that'll work now I'm going back to the editor delete let me just make sure it looks like something I feel so lazy but I will take this out you rename this okay I think we're good that's gonna work and then just to make sure this works great okay are there any specific colors or can I do a random RGB color that's the other thing about it include the upload of the file in the video because it's for beginners that's actually a good point so let me do that that is a very good point so let me delete the file and let me go to downloads I can get rid of this stuff let me save this one just in case I need it there we go okay all right the time world I got I'm never gonna get to the fluid simulation thing but if I run it okay um all right thank you very much I like this thumbs us Vita if my maths teacher is somehow watching this you'll be pleased to know that fifteen years later I still got my trig down thank you okay um all right if this is the longest one ever I totally agrees nothing all right here we go oh I got a did the timer oh what's the easiest way in OBS for me to add a timer the way I did it before it's gonna take me a minute is I opened up a chrome window ten minute timer then I shrunk this window and then what I did is in OBS I did add display capture whoops add timer oh no that's not what I want to do ah it didn't work turn that off now you see what my screen looks like that didn't work window capture probably window capture window capture then capture oh here we go chrome chrome chrome Chrome 10 minute timer okay that's good then just crop it so let me do this and then crop we're gonna do transform transform crop know that shrinks it can I just drag the crop properties no coppy do you know transfer order transform copy rotate stretch fit scale filters properties know I used to know how to do this because I did it once before yeah I should just I mean why would I should do it forget this I should just put a timer in my screen here yeah but I was trying to do it so it's appearing in OBS this is also like flickering in this horrible way let's not do this let's do this 10 minute timer that's terrible I'm not doing it that way make your own timer yes I can make my own timer uh I guess I could make one in processing one must exist but that would be oh so much work I know I made one in p5 do we really do the timer no we don't really need a timer but now look now there's gotta be a way to crop this I don't crop this it's making me crazy oops crap you know what I used to do this with with now I'm remember I used to do this with different software control maybe and it transformed okay someone's telling me edit transform edit transform oh oh yeah there's the crop there it is oh my god this computer is the worst the delete the Delete key is broken on this computer so I can't actually delete it okay let's do this don't worry every to get there by the way this challenge is it's taking me longer to make I'm like sweating it's taking me longer to make a vow what just happened there well I lost everything oh no wonder the zero oh geez this is the worst you have no idea of what's happening but I can't type certain numbers in without not without without triggering other like hotkeys that I have set up this is insane but now I feel like I have to oh my god I cannot believe this I'm like I'm really getting really super sweaty band I'm like panicking I'm having like a panic attack here the only way to do this is manually with the arrow key should just done I was just gonna do a timer on my phone that would have been better it's okay we're just doing this I'm gonna read to you from while I'm waiting for this to use alt key to crop no does that actually work I'm afraid I tried that I thought I'll try that again once I once I you can use alt and grab edges in OBS okay let's try that I have to give up on this because there we go ah okay thank you thank you whoever told me I can use alt and grab edges this is like a game of Twister here all right I'm sorry everybody you know that I have like the sort of obsessive thing and I get stuck on stuff which is not a good quality to have while live streaming and I really apologize that was not a good use of your time my time anybody's time let's move on from that let's get started oh okay sorry everybody I actually like I got so panicky there that I feel so hot I gotta take off this sweater and we're gonna get started don't worry I'm gonna do the fluid simulation today I want to apologize especially to Simon who I think it's waiting patiently for that okay okay here we go everyone oh I gotta start the timer ready and let me do it let me actually change the timer to like 10 minutes and 30 seconds ah don't worry it's coming back everybody I know it just went black well it's because I have all these I've got to change my open broadcast studio settings okay so I'm gonna hit start gonna go here and here we go ready at 10 minutes I'm starting okay well I can't see the chat now hello it's throwback Wednesday wet Thursday whatever I'm gonna do an oldfashioned Kotick train coding challenge and I'm going to make the bouncing DVD logo and I'm gonna try to be done work this timer reaches zero which has never historically ever been a good idea but I already lost 20 seconds I do want to say that one of the reasons why I'm making this challenge is shouldn't count into my time but it's going to is that on this challenge if you were new to programming it's my hope that you might actually be able to follow along and almost and understand even if you've never programmed before and certainly I will include links to in the description where you can put some video tutorials that might actually take some more time to step through some of the concepts and in fact basically I'm just redoing my bouncing ball tutorial but I'm beaming it with DVD video bouncing logo for you know to attract the youth the youth the youth Utes anyway okay so let's let's talk about what I have to do so I have a canvas the canvas is going to be a JavaScript canvas in the browser what Alex went off I don't wanna do any editing whywhywhy loose cable okay Oh can't do any we have to let me just just give me a second here the timer is going and I also so hold on we're gonna do this is terrible this is terrible we're gonna do a little bit of postproduction magic when this gets released so what was the timer at a moment ago when I switched and the camera went off what was the timer at I'm gonna reset the timer to that not that amount what was the timer at somebody's somebody in the chat will tell me because I also need to put the timer here which I forgot to do window capture okay I'm gonna have to put slow mode on also seriously god today's just gonna be one of those days huh no I'm seeing a lot of 902 seeing a lot of 902 so I'm going to choose to trust that 902 and put that up here okay I guess I could start again but but I liked my intro it was good ah sorry 902 ditch the timer I really should have did that I really should have ditched the timer a long time ago that's for sure okay here we go I'm sorry everybody let me just fix the slow mode thing because this is really making me crazy so and then then and then let me just go to slow mode I'm trying to slow mode on everybody okay all right everyone okay Ivan Teresa I can't take it I can't take it I can't look at the I really shouldn't have the chat up alright second time alright fine I'll restart let's restart everybody but now I have at least all right now okay likely the cameras turning this to mute I'm gonna make the same throwback Wednesday joke okay go five three two hello throwback Wednesday I don't know when you're watching this is probably not even Wednesday but this is Wednesday right now I am going to do an oldfashioned coding train style coding challenge oh I'm to attempt to make the bouncing dvdvideo logo and I'm going to attempt to do it in ten minutes I'm sure something's gonna go horribly wrong I should never use this time where nothing ever good never comes from it but I'm gonna try here's the one thing I'm excited about here with this challenge if you are beginner if you have never programmed before I'm hoping that this is a coding challenge that you could follow and actually possibly create yourself but so beginners welcome I'm gonna try to talk through all the concepts I'm gonna use very few kinds of basic beginner concepts of programming in JavaScript using the p5 library go to editor p5.js org I'm gonna pull that up in a second where I'll be typing the code so this is the bouncing DVD logo and I think I got plenty of time I'm gonna wait like 20 seconds just to see if it hits the corner okay anyway I should probably move on so what do i what do I need oh and I wanted to also do a quick shout out and thank you to Mike Boyd who learned to code from a lot of different resources including possibly coding I think well I check out this video he makes this really awesome game and also at some point tries to make a bouncing DVD logo which is where this idea came from so let me move over to the whiteboard and just just talk through a couple concepts so I'm gonna create something in HTML a call to canvas and I'm gonna use the p5 library which has a nice function for doing that called create canvas and I'm gonna make my canvas 800 by 600 because this is for as an aspect ratio of four by three four hundred times one hunt teams two hundred is is 800 by 600 and that's the aspect ratio of oldtimey television tubes not like this fancy YouTube with your like 16 by 9 aspect ratio it's a fancy and then I need to draw an image of that DVD logo and I need to place it randomly somewhere in this canvas I'm it's location is gonna be defined by the corner that's gonna be sorry it's X sorry X Y location and then I need to determine when it hits the edge and have it bounce off that edge and according to my research I actually did some research into the science behind this DVD logo thing which you can actually there's all sorts of formula to calculate the probability of when it's gonna hit the corner and all sorts of stuff like that I'm gonna include a link to that article in this video's description it is always moving in a direction where it's X speed and it's Y speed are equal so essentially at a 45 it already starts at a 45 degree angle pointing down and then ricochets off of the edges and maybe someday hits the corner I got seven that's left let's go alright so the first thing that I want to do is I already forgot oh go to the videos go to the p5 editor this is editor dot p5.js org and you can see here I've made a canvas it's 800 by 600 and I've drawn a background of 0 that means black so this draw function is looping over and over again and setup is happening just once set up the canvas draw that background over and over again so what I need is I need to keep track of that X and the y position of the DVD logo so I need a variable I need X to store the exhibition and Y just or the Y position and by the way the way the canvas works is 0 0 is in the top left here this is this is x equals 0 y equals 0 all the way up to x equals 799801 hero through $7.99 think about that I know I'm going too fast check my other two where I speak hopefully a little bit slower all right so I'm gonna start I'm just gonna set X equal to 400 and y equal to 300 and I'm actually just going to draw a rectangle that's like 80 by 60 sir that's sorry rectangle at x and y so this I want to draw a rectangle at x and y and I want the width of the rectangle to be 80 and the height of the rectangle be 60 these are p5.js the JavaScript library p5.js functions to draw things like rectangles and circles and lines you can look them up in the reference which I will also link to in this video's description okay there we go look there it is with you now I need to have something that tells me its rate of change along the x axis and rate of change along the y axis I should note that Y points down Y points down X points to the right so if this were three this were three I heard somebody say oh and the actual thing it moves like 10 10 units per per frame I don't know what is old but we could think of how many pixels does it move down into the down into the right so let's try with 10 so I'm going to say I'm gonna call that X speed and I'm gonna and I'm gonna have Y speed these by the way up here are known as global variables so they're variables that I can use throughout the program I want to initialize them and set up and then use them in draw so I'm going to say X speed equals 10 y speed equals 10 I need separate variables because when it bounces on one side the Y continues to go down but the X reverses direction or when it's on the top the Y changes direction but the X stays the same so then what I need to do let's just make sure this runs it runs what I need to do is say x equals x plus X speed y and let's just do that so every time draws looping x equals XY so goodbye it's gone get rid of that again look it's moving oh it's gone so X is changing every time draw Luc's which is like around 30 frames per second and then I'm going to say y equals y plus y speed and there we go it's moving you can see that's moving down and to the right and now for the exciting part Oh every isn't this all exciting I need to figure out how do I know how do I turn it around so I need to check there's something in programming called an if statement when do I want to turn it around I want it to turn around if it hits the edge if it hits the edge change the amount of change the value of XP reverse its direction so if XP is is positive that x beat should be negative so I could say if x equals and this is a little bit flub but I'm gonna do this right now equals the with with is a variable by the way that's keeping track of the width of the canvas which is 800 then X speed equals x speed times negative one multiply any number by negative 1 10 becomes negative 10 negative 10 becomes 1000 3 minutes left gotta keep moving here ok there we go look oh boy let's add also a y if y equals the height see what happens oh what's going on here let's um let's change where it starts I'm just gonna let it start a little bit higher so you can actually see look it bounced but one thing I'm not taking into an account it's X Y position is this corner so when it equals the edge it's actually sitting here off of the screen so I need to know in this corner so actually what I want to say is when X plus its width which is 80 plus 80 equals width then reverse its speed look at that ah and then when y plus what 60 equals height oh oh but I don't want to change the X speed I want the wide speed to change when it's Y boom boom ah this is looking good ok oh now I've got to do the other I've got to do the other spots well I can I can use something called an elseif so I could say else if x equals 0 X speed equals x speed times negative one but you know what there's another way I could do this I can actually say or or if x equals zero I want to do the same thing so this weird double pipe symbol means or so and by the way to test if something is equals I have to use two equals two equals so I can actually use three and that's a whole other story in a one minute I don't have time to get to it but there's a reason why you might use double equals or triple equals but just more than one equals is asking the question so now I'm going to say or y equals zero let's look at this and and then I need a close bracket and then let's see what what's going on I'm missing something here oh I've got some an extra parenthesis there we go okay let's there we go okay I'm gonna give myself a little more room here a little more room here okay here we go let's run this ah line 32 token missing token on is Beckett okay here we go oh no I knew I shouldn't hit save undo timers at zero wait it came back what just happened wait what just happened it just came back I'm so confused I'm so confused this is the weirdest thing ever I wanna I thought I'd turned autosave off I wanted Auto refresh on I wanted Auto refresh on actually I meant to have that on but whatever Wow magic right I don't want to have any edits maybe we should just like speed that up I apparently the slow mode is not on or else there are like 20 million people watching today I Simon I did see your message yes I am sometimes I write things out in a more longwinded way just to be friendlier to the beginner although I do take your point that actually this would probably be a nicer way to write it I don't know what to do I really want to get I really got to get to the fluid simulation in an hour you might warm up it's gonna be done with this in like 15 minutes I do the whole thing again do we just like give up and have an edit if I if I do it again the same I'm at risk of the same thing happening the slow mode is on okay well I think I just have to move on all right okay we're gonna redo redo just accept the end okay I'm taking that as the gospel I'll tell you what I'm accepting to edit if I have time at the end of today's livestream because I want to get to the fluid stuff if I have time at the end of today's livestream I will come back and redo this all right the timer went I'm back there was an edit there the timer went to zero the começo disappeared then it reappeared there's like magic all around us today but I but I have what I have I now have the the rectangle bouncing along the egg on both sides both eat right just what now that I'm doing the edit I might as well I get to like do that again let's just oh hi I said I wasn't gonna edit anything but I I have to take a little like short break there because my code disappeared in the browser then the timer went to zero but now my code is back it was some some mystical magic floated into this room but this is where I was a moment ago I now have two if statements checking to see if this rectangle hits the right side the left side right side or the left side reverse the X speed the bottom or the top reverse the Y speed and Simon loyal viewers Simon pointed out that another way I could write this is just like this set the speed equal to negative of itself and there we go now now for the really exciting moment let's get that DVD logo so I've already downloaded this PNG file of the DVD logo itself and what I'm gonna do is I'm gonna click on this little arrow here I am going to add a file then I'm going to drag the DVD logo file here upload it I'm gonna say I am done we can see now the DVD logo is part of my project so I'm gonna add some code I'm gonna have a variable called DVD I'm gonna add something called preload preload is a block of code a function where it's good to write things that you want to happen like I know I said I'd set up this stuff that happens at the beginning preload is like that pre set up and something that I want to do there is like load media assets so I'm gonna say DVD dot P and what I call it DVD underscore logo dot PNG by the way in the mean time I selected this Auto refresh thing so that it's like a it's rerunning the code every time I make a change and now what I can do is instead of drawing a rectangle by the way this is a way I can turn off a line of code it's really called a code comment I'm gonna say draw the DVD logo and I can take this exact line of code but instead of saying rectangle I can say image and then I can say image Oh what did I call it DVD at that same location so look at that there's the DVD logo now I might have messed with its dimensions I can actually just use its native dimensions ooh but now it's not bouncing correctly so let's actually look at what it's dimensions are I can just in the apple finder I can see it's 128 oh I you gets it 128 by 76 so I can change those numbers but the truth of the matter is it's not such a great idea to have hardcoded numbers in your code like 128 and 76 but the nice thing is I can actually say DVD width so the image itself the DVD image knows its own width and I can also say instead plus a DVD DVD height and now it whoa no no how come that didn't work huh that's weird let's just make that 128 wait why didn't that work so when stuff doesn't work I like to do print use the print command and let's just say print DVD and I can see all this stuff look with 128 height 76 how come that's not working with height oh I think I may know what the problem is oh oh boy I have done something bad I have done something bad terrible big mistake encoding aha so it's very it's generally not such a good idea to check if something is exactly equal because you never know I mean I'm saying oh of course I and oh my goodness this is really really bad so it only worked by accident because because I can't I didn't think of this because that the multiple right if this starts at like 100 and I'm adding 10 to it every time like and this width is is 800 I am going to at some point get to the fact that it's going to be equal to 800 but if I if it's if this width is like 128 X plus 128 plus some multiple of 10 is never going to actually end up equaling 800 so I just want to basically just check if it goes past the width and the height and I'm not sure and or what I probably want to do is resize the image to be something but this is now going to be fine okay so I can Club move this console down I should do this again this is actually what programming is by the way and now here we go bouncing DVD logo some things I want to do to this number one is I want it to start in a random position every time so I can use the random function so this will now every time I run the code it'll start oh look at that oh it's stuck oh oh oh this is the worst alright there's another problem here oh because it's not now I'm not using integer math and I'm letting is random oh this is what I need to do let me separate this out I'm gonna say I'm gonna be very strict about this DVD logo I'm gonna say if it goes past the width reverse its direction and set it to that spot shuffle it back and I got to do this now separately I got to do the same thing then I'm going to set it back equal to zero so there's this issue that can happen work and go kind of like past the edge and then not make it all the way back on I think and so I'm gonna do this now for the X and the y huh oh this is greater than height sorry this is much simpler then Y is equal to height I lost all my energy the but the my balloon my bubble has burst all the air has come out as a balloon but we're there we're practically there you see what I'm coding here so let me just explain what I have done is that I am now made this a little bit more complicated but I'm saying okay when I get to the edge before you turn around right just set it back to this location and this is not right with DVD dot with right that's where I want to set it back to otherwise if it gets to the left set it back to the left and keep going if it gets to the bottom and this of course is height might if Y + DVD height is than height then set it back to height DVD height okay okay now we got to do something else we got to do something else I've got to add a red green and blue value so I'm just gonna say RGB you can declare three variables at once by the way with commas and then I want those values to be you're gonna see why I want those values to be some random number between two honest between 0 and 255 and then I am going to say tint RGB so tint is a function that allows me to tint the image look so every time I run this it's going to be a different color now I think I want to like guarantee that it is some that it is so the chat is going crazy with Corner corner corner I swear slow mode is not on I want it to be to have some amount of brightness so I could do like a hue saturation brightness thing but I'm just gonna limit the bottom range to 10 and then every time it hits one of the edge edges I'm actually going to put this in a separate function called function pick pick color and I'm gonna say pick color now call that function so this is me making up my new function and then calling that function cuz I want to reuse that code so in all of these cases and really there's got to be a nicer way to write this and here we go so now we're done oh it is now bouncing it starts at a random location now here's the thing I have done something here quite insane and like crazy but what I would like is for you to take this code refactor it make it better there's so many possibilities here so first of all I could add a test if it hits the corner right how would I do that how would I add a test if couldn't use a distance value if it equals if it's greater than what is is that the never really gonna truly hit the corner or get really close to the corner what could I make happen I make some fireworks go off sort of another image up here whatever I don't know but I also might want to just for the sake of argument right now change 800/600 to window with window height and that will make it no matter what always do the full and I then I can share this link which is this so now I have in the peopIe better I can't like the DVD logo size maybe should be tied to the size of the window but I think we're done I mean I could sit here for a while maybe we'll let this just go for a little bit and if it hits the corner I don't know what do we do if it hits the corner let me refresh this and then we could speed this up and see if there's a moment where he hits the corner no it did hit the corner oh oh okay oh here's something interesting by the way all right let's all right I'm gonna add something to this let's add a little test for if it hits the corner okay just give me a second here let's say let's say what we want to do is test if it hits the corner so what I'm going to do here is I'm going to say let D equals the distance between x and y and zero zero so I'm just gonna do the top left okay and I'm gonna say if that distance is less than one like one pixel then I'm gonna say console.log hit corner now it's only the top left corner so now here's the thing am I really gonna sit here and watch and watch and watch and watch and watch and watch to see if the message appears there I not really but I could speed this up because what I could do is I could use something called a for loop and basically I could say every time through draw do a hundred cycles of moving the DVD logo and checking the corner if it hits the corner by the way I'm going to say break so that it breaks out of that loop and so now we can see it's going really fast sped it up come on I don't know yeah let's speed it up even more thousand times oh wait oh no cuz ten thousand times should I let it be any corner so I can do one thing I can do is all the distances two three four so this is with DVD dot with well zero zero is the first one then the other one is the top the top right this would be the bottom the bottom right this would be the bottom left what's wrong Oh d4 and then I'm going to say let D equal the minimum of d1 d2 whichever ones smaller and then D equals the minimum between D and D 3 and D equals the minimum between D and D for let's just make sure yeah okay so I hit the corn whoa it's the corner a lot if it's and there's certain times where it won't ever hit the corner I'm not going to include this start from a corner yeah alright I'm gonna that was an interesting aside I'm not gonna bother with that that won't make it in check D not oh it's like checking d1 no wonder oh yeah whoops it's hitting the corner a lot hitting the corner a lot okay so it is hitting the corner quite a bit every 10,000 frames it also depends on where it starts I think there are certain places that it'll start that it won't ever get there there's probably a way we could calculate this probability hmmm interesting so it really depends on where it starts it seems to me right now it's hitting the corner all the time drawing a pet okay I have to stop all right and thank you for watching this coding challenge I'm sorry this turned into something of a mess I hope that you will take this and make your own variation on it play with it use different imagery different way of moving way of checking the corner maybe you'll make some kind of beautiful particle effect when it hits the corner and maybe you will think of a new idea and who cares about the corner how about the middle what if it crosses the perfect middle I don't know the world of the bouncing DVD logo is now yours to play with I don't know I hope you learned something had a little bit of fun if you want to learn more about programming I basically do this exact same thing in my foundations of JavaScript with p5.js tutorial series but kind of step through all these concepts quite a bit more slowly I don't know well then that's gonna be helpful or interesting to you but you're welcome to watch it thanks and see you in a future coding challenge alright so I got to put this away I got to put this away I would say this was a cminus sorry that this didn't end up being a non edited 10minute coding challenge let's go and let's do some fluid simulation everybody it is 12 o'clock I've got at least another hour hour and a half in me here so let's let's see if we can do this fluid thing the funny thing is this was supposed to be my easy thing and the the fluid simulation is really hard and I don't even know how I'm gonna do this coding challenge but I'm going to attempt it so and maybe I'll just do this one again thank you Mike Pig Mike Boyd I blame you okay let's go to rainbow topics issues the next thing I want to look at is here and did I get a message from yes okay Oh oh wow this is awesome thank you okay somebody can do the hypercute the five four dimensional four dimensional DVD bouncing logo that you should do that'll be oh wait wait I kind of want to do that right now I'm not going to I gotta go you know I was getting this all these tweets yesterday about like the similarities between what I do with coding and what Bob Ross did with painting and I would say the similarities are very few and far between Bob Ross was like the most gentle I mean I hopefully I'm a gentle person but soothing calm tons of talent visual talent slow just meditative lessons I feel like that was not anything Bob Ross whatsoever I appreciate the comparison Bob Ross is amazing but I that's it's super flawed all right we are gonna use processing for this one I'm gonna write some concepts on the whiteboard in advance here to try to get myself a little prepared here 240 please okay let me come over here for a second let's erase this a total disastrous failure let's get rid of that timer oh my god like the 30 minute video oh let's get rid of the timer I don't need the timer lock that lock that don't need the timer okay yes I'm gonna do this in processing which is built on top of Java so what I want to do let's just talk about three okay so diffusion it's gonna call it projection but I guess you know what I will use the terminology that my cash uses everything today is based on somebody thank you Alex Smith I can't believe people are joining in this this nonsense diffuse Advent actually project just do this the same order project and add vector I'm also going to talk about boundaries and linear solve and I'm gonna make a note of something to reference which is I've made some notes as I was reading through this stuff I can't find my pages are all out of order now I forgot we're trying to look up what methodology this uses and important concepts I want to make sure I talk about incompressible versus compressible that's another thing I want to talk about and then what's sort of key here is there is the vector field and there is the quote unquote like dye and a concept here that's crucial is the density of the dye okay um so that means the amount of fluid so this projection ties to here this applies to so the projection applies to only the I think the projection applies to only the dot the I guess it applies to the velocity okay I'm gonna all right okay sorry this so this is some concepts that I want to keep in mind as I go through this so Oh Simon wrote this is his favorite stream okay that's nice alright so let me just be clear about something although I might as well just start this coding challenge so let me get the references that I want I want to reference memos library I want to reference Joe Stan's paper and Mike Ash's blog post then I also want to reference a lily pad okay so all right Oh oh yeah I saw Simon I saw everyone I saw your video about with the balloons okay Thank You Simon alright alright we're gonna get started this is gonna be a long one and I'm not gonna rush hello YouTube live very very very nice okay all right here we go we drink some water if this goes very smoothly there's gonna be like a tremendous amount of irony here not smoothly the DVD thing went by the way I forgot to mention looks like looks like one third Wednesday 1030 a.m. Eastern is going to be my weekly time for live streaming every once in a while I might get a bonus time during the week but I'm actually going to attempt to try every single week there might be one or two weeks where I miss from now until the end of May no I'd say now until the end of April because mates may stuff changes but you know now for the foreseeable future every Wednesday 1030 and Eastern put it in your calendar complain to me on Twitter at pineapple boy 27 if if if that schedule doesn't work for you my twitter is actually at shipment okay here we go hello and welcome to you to a coding challenge a calm soothing although somewhat turbulent coding challenge called fluid simulation now I have something to admit to you I don't really understand how any of this stuff works I did make this at one point and so I'm hoping in this coding challenge to recreate exactly this which will be a basis on which hopefully a lot of other interesting ideas we'll come about I like this idea came into mind when I recently saw smarter every day's video on laminar flow you know I love laminar flow and all but team turbulence for life yeah all right so there's a wonderful three blue one Brown do I just reference the same weather YouTube channels every single time yes I do but there's also an excellent three blue one Brown video on turbulence which I would also recommend so I'm going to let me let me give you some background here so first of all there is a github issue thread which started by dear Daniel XD from 2016 laxman Boltzmann methods for fluid simulations so this is one method I posted some stuff here then some other stuff here oh this is a great reference I forgot which has this like really nice simulation of turbulence and JavaScript's then I would also recommend checking out but what I want to highlight here is that this people have what I want to highlight here are these three links so the seminal kind of canonical standard or the origins of doing like fluid dynamics in computer graphics in my research comes from this article by Joss dam realtime fluid dynamics for games I believe this was a SIGGRAPH paper 2003 somebody factchecked me on that and it's you know built on top of this idea of these navier's stokes equations which are these partial differential equations that describe fluid dynamics and there's actually a 1 million dollar challenge for proving that this can or cannot be solved in three dimensions anything I'm capable of doing or going to attempt to do in this video but this paper includes some of the formulas includes a lot of the code and you can see one thing that sort of key concept here is a fluid simulation can be done by thinking about fluid as kind of particles that live in a grid and you know obviously might be like an infinitely small grid in real life but we can we can make that discrete and think about the grid of pixels and how what this or density or the velocity of each of the fluid is that every one of these spots the grade that's ultimately what I'm gonna do and there's some nice C code and descriptions of some of these algorithms did I mention this oh yeah oh so no so this article I believe serves as the basis for memo Atkins a processing library called MSA fluid there's also an open frameworks library which is a C++ engine and you can see here the way that this ends up looking by sort of like distorting this vector fit off this is awesome oh I'm sure the YouTube compression is totally ruining this but it's beautiful check out that library I could start this video just by being like let's just use the library and I think that's probably what you should do stop right now and go and use this library to make something beautiful or interesting read the documentation you should also check out Gabriel Y mouths I hope I pronounced that correctly lilypad project which was actually I believe used in the three blue one Brown video on turbulence and has Gabriel rights here at the end a bunch of things about stamms approach and what lily Pratt does in a paper so there's this is a giant rabbit hole you could go down and I have spent some time but it's like poking around in this rabbit hole in the last week the article that I found that I kind of enjoyed the most in terms of style was Mike Ash's article called fluid simulation for dummies which is actually a port of a port of not a port but a version of Jaws stam's paper but actually turning it into 3d and how to render that 3d in parallel with paralyzing computing power is all here in his master's thesis that's another rabbit hole you could go down so what I would like to do is use this article and I try to make sure that I don't repurpose somebody else's content without permission even if it's sort of on the web in an opensource way what I try to do what I want to do I asked my cash for a permission on Twitter I think it's at my cash but I'll include a link in this video's description if I could go through this in a video and so what I'm gonna do is I'm gonna go through this in the video and mostly just kind of like copy paste this code it which is written I believe C++ or C something like that some objectoriented C flavor language and I'm going to copy paste them into processing which is a Java based programming environment and kind of like adjust the code to work in the way that I know and see if I can get the result and play with the result so I don't I'm not I don't feel obligated to understand or explain all of the maths involved throughout this throughout all this and I would definitely encourage you to read this or I would say stop and read this whole article before you continue watching this and then this is gonna be in three parts at a minimum so this first part I hope you just like get it working I just want to copy paste the code change the syntax around get it rendering and play with it just get it working number two is I want to kind of refactor the code that'll be in another video I'm actually gonna reflect her in a more with a kind of modern approach I'm not monitoring the wrong word I mean this was done in like over ten years ago but I want to use like objectoriented programming vector like the P vector class and processing I think there's some ways that I can redo the code to to make it a little bit more readable than this particular style that uses a lot of like an esoteric variable naming so that's number two and then number three I want to then apply this logic to my kind of my flow field example from the nature of code book so if I could take the fluid simulation turn it into a vector field where I could just toss particles in that fly around I think some visual opportunities will come of that so that's three parts just get the thing working that's what I'm about to attempt to do right now sure it will go wrong but I will try my best number to refactor the code to make it sort of fit with how I think about coding and processing at P 5gs today and then also try to do some more stuff with it visually and I would say one of the things is there's gonna be some performance issues I'm gonna keep things low resolution but you'll see a lot of the implementations of use shaders or WebGL and all sorts of fancy tricks that I'm not gonna get into but if you know about that stuff and can build on top of whatever I'm doing then fantastic okay everybody with me great I'm gonna take a little break pause for a second and I'm going to alright so I have written out here on the whiteboard in advance some of the key concepts that I want to make sure that I don't forget about I almost get confused about this incompressible versus compressible which ones which well I think there's a way to remember an incompressible fluid is a fluid that basically like if you like squeeze it it doesn't change its the it's the density is constant the density is constant that's what I meant to say all right so I'm about to get started coding but before I do that I've written in advance like a bunch of the concepts are involved in this implementation that I want to make sure that I don't forget to mention the first one that I think is really important is this idea of an incompressible fluid an incompressible fluid is a fluid that density must remain constant throughout water so for example if you have water in a balloon and you squeeze that balloon the water's got to like come out it's not compressible whereas air is actually compressible it's density can change so this apparently from my little research that I've done simplifies a lot of the stuff so this fluid simulation is is going to work only for this idea of an incompressible fluid I should also mention that the goal here is not necessarily to with scientific accuracy simulate like true fluid McKay but rather to create the illusion and feeling of that through like some like remote connection to that actual scientific accuracy but I'm sure whatever I do will be less accurate than what people have before based on how I know the way I make things all right but that's an important thing so the first thing that we need to consider is that the fluid is going to live inside of a box and I think the way the math is sort of tuned in these examples I believe is for that this box should really be a square and sometimes like a I don't know why like a power of two is always a nice thing so maybe I'll start with like 512 by 512 or mean 256 by 256 just to make it low resolution so you can think of this as a grid of pixels and there is going to be inside of this grid a velocity vector a vector V vector that points in a given direction so if the velocity vector in every spot in the grid is zero it's like completely still water if I put a velocity vector moving to the right it's like the water is that would be like laminar flow by the way I think because the last everything is smooth and perfect and all moving in exactly the same direction supposed to turbulence where everything's kind of going crazy so that's one thing that's going to exist in here so that is something I should say there is this idea of the velocity field or the vector field and that's gonna have X's and Y's in my caches blog post it's actually all done in 3d with X Y Z's I'm going to take out that third dimension while I'm doing it then but but you should add it back in and see what that what happens there now the other thing is there's going to be this idea of die oh I brought this over here already because I wanted to explain that there's this idea of die and we're going to talk about the density of the die which is in other words this vector field we wouldn't be able to see anything moving we wouldn't be able to sue under C the the flow through the fluid without like putting something in it so you can imagine sprinkling it will die in it and having it diffuse maybe add vex to shoes advic project all around the fluid so but that what I want to make clear is when we start talking about density in the code this code example and this my cache makes very specific it makes a very specific point about we're talking about the density of this dye which is like an extra thing we're adding just so we can visualize it we're also able to visualize it just as a vector field which I will do at some point but the dye is what's gonna give it more of this like smoky like quality by visualizing the amount of dye that sort of as it moves throughout the fluid so this is the basic idea so the first thing I need to do is get an array to store all of the X's and Y's of the vector field and the amount of dye for every single one of these spots and in the example it's done with like three separate arrays an array of X's and arrays wise and arrays of densities and it's kind of works like a cellar automata simulation where I need the previous state and the next state all the velocity of the previous and the next velocity all the density and the next density so I'm actually going to need to so this is why the code gets really confusing because I need X Y and density then I need what's what's in the code name that's x0 y0 and density zero I don't forget this might be called like S or something in the code but I need this sort of previous of all these so there's a whole bunch of arrays and this is what I want a later refactor and see if I can just use P vector or an object and stores a P vector and a density value in the previous all that stuff all right back over here I don't know how long this has been so far way too long let's go back to Mike Ash's page and I'm gonna start with this this is what I was talking about so this c++ structure i'm gonna take it into processing I'm gonna add setup I'm gonna add draw I'm gonna say size 250 actually you know what I'm gonna do I'm gonna create a variable called n this will appear in the code which is kind of like the the width and height of the square so will be 5 so n is going to be in this case what I say 256 and then actually in process if you use a variable for if you use a variable for the dimensions that you want to put in size you've actually got to put that in the settings function so I can say this so this should get me like a 256 by 256 window and then so I'm gonna save that and I'm gonna call this like fluid sim ash and stam fluid sim ass damn and then I'm gonna create a class and I'm gonna call this make a new tab I'm gonna say class fluid and in that class I want to have all this stuff all of these now the the thing that's different here in processing is this star what is that star what's that star mean that's actually because it's some C flavored language in the code and mic stands that is a pointer meaning it's pointing to an area on a memory address of the computer where all the density values will be stored but what I really want this to be is just an array so I'm gonna change all these to an array which is the same thing in Java this is now a pointer to an array you'll see in a second and then and by the way I'm gonna take out all the Z's I should mention so these variables this isn't a diffusion amount like which talks about which is like a variable to control how the velocity and that sort of the vectors and the dye diffuses throughout the fluid this is viscosity viscosity is like the thickness of the fluid so playing with that can change the behavior as well DT is the time step in all of my physics simulations I've always done and just have to time step up one but I think you need a smaller time step to be able to get the simulation to behave somewhat accurately so that that'll come up later and now I have density and I think this is previous density velocity X velocity Y previous velocity X in previous velocity Y alright so now this is creating it so I basically want to do exactly this so this would be in the constructor of the flu and I'm not making and basically an I already declared somewhere else and I think so I don't think I need sighs I'm gonna say cube size and these should all be this time so this is referring to the actual variables in the object itself so and I don't need Z and I don't need Z and now this is like sialic is like a memory allocation because you're allocating a certain amount of memory for all these fluid values but I just want an array that a size n times n so this is going to be this and it's it's n times n times n because his is in three dimensions so I know I could do like a Find and Replace but I this is like so crazy that I want to do this this is like very meditative for me okay and this receives DT diff three arguments when you create the fluid you create it with a just got a time step a diffusion and a viscosity so in here I'd be saying something like fluid fluid and in set up I would now say fluid equals a new fluid maybe like a time step of 0.1 and I'm just gonna make a density and discuss discuss 'ti of zero for right now and but those values would get filled in presumably okay we're getting there we're moving through the article here we go this is a this is described okay you need to be able to destroy the thing free all the memory I don't have to worry about that it will get cleaned up for me add density okay this makes sense now remember add density is not talking about is not referring to the fluid itself it's referring to the dye that's going into the fluid so this is a basica that I can add died I sort of feel like I want to rename that function to add died but I but I'm gonna just call it add density so we're gonna take this function I think this could be a function of that's part of the object what does it need we don't need a reference to the object itself we have that we need a location and an amount that makes sense so we need a location and an amount so that's like the amount of dye we're adding at this XY spot now here's the thing you're noticed something everywhere in the code there's this like IX function index equals IX well this is a twodimensional this is this is twodimensional but you notice all the arrays I made were onedimensional this is kind of a pretty typical thing to do so but I need a way of going from X comma Y to the single index that's a lookup into this grid so I could write a function you know I think it's done with like a macro or define or whatever in this but I'm gonna write a function I'm gonna name I'm gonna call it eye x and it gets an X and a Y and it would just return return x plus y times n so this is oh it needs to end needs to return an integer it's not void so this basically says for any given X Y give me the onedimensional index and this formula is the same thing that I use it all my image processing and pixel processing it's a way to get a 2d location in a one dimensional array okay so now I would be saying and we can go back to this code basically and we can do this but no Z and then we're basically going to say hey this dot what is it called VX oh we know that's velocity sorry this dot density at index add some amount so this is really simple this is like a really simple function just add some density to this spot this amount of density of this spot then we can also do this add velocity which is basically the same thing but just with an amount X in an amount Y so I think we could probably just copy this and we could say add ASSA t @xy with an amount X and an amount Y C I would prefer to use like P vectors for all this stuff but and then we get the index and we say V X V X plus amount X and V Y by the way this is good port expect this code is going to get a lot worse soon enough okay now all right ah look at this so here now we can take a moment here are the three main opera operations diffuse project Advent diffuse project Advent let's do that one at a time and so we can read this I mean that's useful to read my caches description put a drop of soy sauce soy sauce scoot is the way to think about die and you'll notice that doesn't stay still but it spreads out so this happens even if the water in the sauce are perfectly still called diffusion and so the die obviously diffuses that makes sense but the velocity also diffuses if some of it moves it's causing everything around it to move as well so that's a function this is really going to be the function that does then the solving of the Navy or Stokes equation I sort of I think kind of so let's go and actually write oh then there's this talk I'm gonna I'm gonna come back Oh see this is describing all the functions mmhmm I kind of want to do these one at a time so let's do defuse ah let's do defuse so these I'm gonna put a few and this is not going to be an object inside the class and I'll explain why in a second so the first thing that I'm gonna do is I'm just gonna try to port this so anytime there is the pointer I want this to be an array diff is a diffusion amount DT the number of iterations and I don't think I need n as an argument because I'm just using that as a global variable I also kind of personally would like to just keep iterations as a global variable I think that'll make things a little bit simpler where did I put that I'm actually going to put these in the fluid tab that's mostly where I'm working final iteration in iterations like we just put that as one let's leave that it's like 10 right now so the idea here is that this function knows how to diffuse any any arbitrary array of numbers X based on its previous values X 0 based on a diffusion amount and a time step but you'll notice that what it does is immediately calls another function called linear solve so solving a linear equation is like something like this I don't know 2x plus y minus 3z equals 10 right this is a linear equation we could have multiple linear equations and algorithms for solving those sort of set of solutions to this equation where are all the x and y's and C's that make this true is known as a process of linear solution there are different techniques I was reading the comments and Mike Ashley favor there's like this Gauss Seidel technique some people did his code using this I forget which technique this his code is particularly using but it's a way of basically solving those linear equations the the for fluid dynamics with in the space of this grid so that's kind of all I want to say about it but it's needed for every single for this diffusion algorithm and it's really just a thing that like passes all the values all around over and over and over again with lots of iterations sort of spread out and like a cellular automata to have the velocities or densities of neighbors be affect the other neighbors and so on and so forth so I'm now going to go and just grab the linear solve code from whoops ah what did I just know what I just hear I'm gonna grab this and you can sort of see what it's doing so I'm gonna grab this function I'm gonna bring it in here by the way this is kind of how I work like I kind of want to understand this more but I feel like I need to just like port the code and play around a little bit then maybe I can do some more research about what the equations actually are and how it's working but sometimes that's like kind of messing with the code getting your hands on the code concern has helped you understand the math later so I'm gonna so I'm gonna look at this I'm gonna take out static I'm gonna move this bracket over here I don't need iterations and n those are gonna be the same for everything these should be arrays and the kind of goofy thing here is I don't need em so I need I and J for x and y but I can take out m and so that that loses the bracket there and then I have to look at what's going on here oh and I so I don't need em I don't need em I don't need em I don't need this Z and then I also don't need to add these two components so let's see so the idea here is that I'm looking at and this I see I've done this before having like a crazy deja vu is my ax function incorrect people are noting I have to check to make sure I got that right but um what this is now doing is saying the new value of the particular cell is based on a function of itself and all of its neighbors and you can see that here it is equal to its old value plus some combination of its current values so this is kind of interesting to like sort of see how this is working and there's some parameters here like this a parameter and this C recipe parameter and so I got to go check and I got to come up to this with a set bounce thing in this the boundries function the second would but let me check the this X plus y times n huh this seems right to me yeah I think this is right I mean people are worried about you know this should this is what it should be but you know I think that's right okay so then I don't need these last two arguments so now we have the linear solve function and the diffuse function don't have any errors the value of the parameter B is not used that's strange that's interesting why is it not used my missing it's somewhere in here interestingly enough all right well I'm gonna oh because it's first set down right right it has to do with set boundaries okay okay so that's gonna come up and I'm not gonna worry about that right now okay I'm gonna come back to that all right so now we're going back to the paper and we're gonna look at the next function project okay so this project function is really tied to the idea of this incompressible fluid because if we move all the stuff around we have to make sure like something could go wrong here like we could have made it so that the density is the of everything is are not are the the amount of fluid in each box of the my casters explain this much better that I have the amount of fluid each box has to stay constant so the amount of fluid going in has to be exactly equal to the amount of fluid going out so this is kind of like a clean up stage to like put the set thing back into equilibrium so we're going to be doing this for all the different values of all the different velocities arrays and density right so let's take a look and add that project code so let me get the project function well you can see here we do project for this is actually what the algorithm is going to be it's diffusing for XY & z it's not for Z we won't do it's diffusing for velocity X velocity y it's projecting for the velocity advection we'll talk about then doing diffusion and advection for the density so let me go here and what am I trying to do I I should just follow the order of the article but it's fine I'm doing it in my own way I want to look forward to fuse here it is oh no I did y'all redo that project what's right here so let's grab this oh look at this craziness so let's grab the project function we're gonna put this one in here okay now we're gonna port this so we these become arrays I don't need the those are constants throughout I like to put my bracket over here I don't need static oh boy what did I just do that's so weird well let me paste this again what just I did something really weird there oh I didn't actually paste in project okay sorry about that paste in project these are arrays I don't need the Z these are also arrays and I don't need the iterations and and those are constants and then now I also don't need Kay Eileen I and Jegs I'm just doing two dimensions I don't need Kay I don't need these two and then this is I don't have set boundaries yet I'll add that linear solve is the same thing but without this and I think I could when I do set bounds I'll probably take out the end then I don't need K don't need K don't need Kay I don't need K I don't need Z and I don't you K I don't you K I guess probably porting Joe's dance which was 2d might have made more sense and I plus 1 J I'm s 1 j J plus 1 J minus 1 yes yes this all makes sense and then I don't need the Z here I think I lost a curly bracket which would go here and definitely screwed up something curly braket wise I think I haven't actually clearly record here okay this looks right up I don't need the I don't need the K's up here so take those out and missing left curly braket and I have an extra curly bracket here alright we're good we don't know what set bounds is but that's okay all right woowee now don't worry we're getting close this has been quite a while I've been doing this but I don't think it's been a half an hour cuz the camera isn't shut off so now advection the advic step is responsible for actually moving things around to that end it looks at each cell in turn in that cell it grabs the velocity follows that velocity back in time sees where it lands so this has to do with this sort of funny thing that that one of the ways that B is fluid simulation algorithms work is to actually not just try to a time step forward but to actually make the decisions based on looking at where it has come from before and so like actually like going back an extra step so this is where all of this sort of like saving the stuff before is really really crucial so let's grab this advection and I could kind of scroll back up let's look at what was expand so this is also important every cell is a set of velocities and these velocities make things move this is called advection as with diffusion and vection applies both to the dye and to the velocities itself so what's really the difference between diffusion and advection well diffusion is just this idea of spreading out that advection is actually the motion associated with the velocities they're obviously related and they both happen together but those are separate things so let's go grab the advection code Oh what seriously okay Wow so this I really gonna want to unpack when I refactor this to understand what's going on well just rabbit right now please it's crazy there bring it in here oh boy oh okay right everybody deep breath deep breath I'm gonna take out static move this to here I need where's this I need be this is an array this is the current density this is the previous density this is the current velocity oh this is the current velocity I don't need Z come on scroll over I I do need DT I mean this could be a constant also let's make deep tnuts I don't know that's part that's this dot DT it's part of the fluid so so that that can be like this dot DT yet oh but it's oh I should make that alright there's I gotta that that I can pass in fine I'll pass that in I'll figure so there's a lot of refactoring and thinking about how I want to do this but let's leave dt n so well what what could you are you kidding me so these are index in previous index values we don't need the Z we need a DT for X and a DT for y we don't need the Z we need this has to do with like I think the S is our density in this I'm not really sure when we look through the code but I'm gonna take out the you I don't need to the three and I don't need the Z home I don't need the K I don't need the K so all right so I don't either k part of the loop and I don't need this last thing and they don't need this Z and I need the ah the X and the eyes the Y's and the Jays and I don't need the Z's and the case and I need the esses and the t's don't you could use oh really and I don't need the K's and now I don't need the K and so what did I get rid of up here using this is what I mean like I really want to refactor this and try to understand what each of these variables are doing and rename them this isn't refactoring this is just getting it to work so I've got eyes and J's X's and Y's eyes and J's SS and T's and no K's and no sorry and no oh yeah nope sorry I just lot yeah this is important I need this okay okay okay and then I don't need this whole last section because I don't need the t's wait no no no no oh wait a second s T u s T where's you I don't need you you was the thing if I go back to my cache you was the third dimension for the s and the t's okay so what I'm actually getting rid of is this is this multiplication step so one less multiplication step yeah and this right oh wait hold on I have to stop I could think for a second I think I don't need this at all this is what I'm doing yeah this is much simpler oh you silly third dimension I don't need this at all line this up men don't need this at all pretty sure oh the camera went off it's been half an hour all right so I think I have refactored this to get rid of the third dimension well there's still a you here oh wait I messed up I messed up I can see this is wrong this should be parallel I might have to go back to the original code 0 Plus this Plus this s1 Plus this Plus this t1 and you zeros what I need so it's really except it's what is this not craziness I 1 IJ 1 I 0 0 0 1 1 0 no this is right 1 0 0 0 0 1 1 0 1 1 1 1 there we go ok this is what I 1 0 0 0 1 1 0 1 1 I'm pretty sure this is right what's the chance that we definitely have to doublecheck this doublecheck this and then I one less thing here do I have the right ok floor F it's just floor right because those are integers this seems to be some extra flooring that's unnecessary here because these are floats but I'm not sure I'm gonna leave it as is right these would then have to be converted I think there's some extra unnecessary steps here in how the numbers are being manipulated but I'm gonna just leave everything in and I will part two we're gonna get this to work just just fast forward like five or ten minutes towards the end okay all right I'm pretty sure this is now the add vector function willing to leave the third dimension okay here we go now I think I actually have everything but this set boundary so this set boundary is actually something like really nice and like compared to all that much more manageable to understand but basically we've got this kind of unrealistic situation here well it's not unrealistic but we're containing the fluid within a box and so we need some sort of mechanism for when what we do with the edge cells and how we deal with those velocity vectors or things moving and basically we want to add some kind of like bouncing and then we also need to deal with the corner cells even differently in a different way so we can read set bound whoops it's everywhere ah this is short for set bounds and it's a way to keep your fluid from leaking out of your box not that it could really leak writes my cache it's just a simulation in memory but if there's no walls right obviously not fluids not gonna leak out of your computer screen that's what that was a joke there and I just like my mind so much I couldn't even laughs haha but the velocity in the needs to be become mirrored when it's when it hits the wall so if we look at what this set and the reason why this is done in this like really weird way is the set balance function is written in a way that this B variable tells you like which which which wall in my act might at the right wall the left wall the top wall the bottom wall and I think that I could rewrite this with vectors in a way that it just kind of like knows and I don't need this like extra variable B that's passed through but once again I am going to I am going to port it so exactly as written so I'm gonna go back here we can see this is all over the place and I am going to keep this set bounds X is any one of these arrays we need to set the we need to do the same thing for all the arrays where there's velocity X velocity why or density the density of the dye and once again I can I can actually eliminate this is for the third dimension so I can completely take this out no no yes sirree please can you explain to me how this fluid simulation algorithm works so I'm going to take that out then I'm gonna take out Kay and you can see like this is saying if B equals 2 you're dealing with the X stuff so actually it's the Y because you can see it's looking at the top row and the bottom row sorry if so this is good and then this is if B is 1 I think I might have messed this up but I will I will double check I need to get rid of the third dimension kind of think maybe I should have started with just dance code I can only get rid of this this is my meditation let me do this right I the top right this is the lefty that makes sense but that one and one and two that makes sense okay I think we're good just oh but I have the K here which makes no sense oh boy this should be I and J yeah sorry these are IM j there's no K and this is haah yes no K is fine here okay is totally fine here we're just doing i for every single okay okay hold on just like this this has popped into my head I think I understand what's going on here and this is Jay fine this is absolutely fine actually right because what we need to do is for we just need to do all of we just need to account for all of these cells all of these cells all of these cells and all of these cells now we've got to now we got to do the corners separately and the corners just does this kind of average so these are the corners I care about zero zero zero and minus one then I want n minus one to these I don't these corners are not actual corners then I want n minus 1 n minus one I want whoops sorry n minus 1 n minus 1 oh and I I did I want and the idea is to average so this should become 0.5 because there's not three neighbors just two and we get rid of this last one this last one will hold on zero one zero zero zero zero zero do I include itself and then 0 n minus 1 is 1 n minus 1 0 and minus 2 I've lost my mind here which neighbors am I looking for so if I'm at 0 0 I assume the neighbors I want this one this one and itself is that right I'd have to look up what or is it this one this one and this one I think it's it's including itself so in that case it's 1 0 0 1 and 0 0 in this case it's 1 n minus 1 0 n minus 2 and then 0 n minus 1 that's the bottom then here it's n minus 2 0 n minus 1 1 and n minus 1 0 and in this case it is n minus 2 n minus 1 n minus 1 n minus 2 and one more n minus 1 would oh my god ah what did i do I should have Auto formatted can I undo that auto format yes so let's see here uh plus plus what's wrong here oh I still have a zero there still have a zero there still have a zero there this syntax is right it's awkwardly written but I'm gonna leave it like this okay I think we have set bounds now all right well I'm alright fine I don't think I need to pass in N and it's just a constant everywhere so let's simplify that and let's find the places where oh boy I'm missing a bracket I'm just taking the chat for a second I'd be like Ted viewers left all right it's also really hard to do this with like a really big font just so you know so let's go through this fluid is fine I had velocity diffusion linear solve this has to come back without the end project and your saw boundaries no n no and this is advic and this is pro semicolon that's all that's missing there this doesn't have the N and okay what's wrong here no this is wrong still my parentheses are wrong okay d @ I of J and J s times T times D here Plus this I need another this needs a semicolon no I'm adding all these things together plus let's do this line this up here wait why are there okay something is wrong here time out for a second give me a second everybody I'm looking up the code that I ported the other day just because yep I I just want to get it right I thought I was going to get it right without having to look it up but it's clearly not the case I'm just gonna look it up Oh oh my goodness I definitely won't want to for set boundaries I'm not including itself okay yeah yeah I got fixed that I'll fix that oh this is way I made this way way way crazier okay okay so a couple things people in the chat are mentioning I have no idea what's going on I kind of don't either maybe this isn't a video that's worth watching I'm not sure I mean at this point this is just something I'm invested in trying to do and I will come back to it but this I think is an example of why I'm refactoring and sort of thinking about code and variable naming is a good thing and there's nothing wrong with what was done before is you know this is probably perfectly appropriate in quite club styles from like over ten years ago but I think we could hopefully do better and I can come back and refactor this but I I realized that I've totally got this wrong and I have some code that I did the other day here this should just be s0 times like let's let me ask 0 times T zero times this is actually would be easier for me to put this in one line plus t1 times D zero so this is correct plus I think I might have this right plus o s1 I'm looking over here oh my goodness the oh my goodness I get it I get it I get it I get it this is together so this there's no parentheses here this is s 0 times the combination of T 0 times D 0 plus the combination of T 1 times D 0 plus s1 T 0 T 0 plus T 1 D 1 in other parentheses one less parenthesis maybe and what's wrong here do I not and there should be 0 0 0 1 1 0 1 1 those are all the spots I just want to like paste it from what I had before so many extra parentheses and then I get rid of this parentheses oh and I'm missing the plus okay there we go this is what I've been trying to do I want to add those two things together times s 0 and those two things together times s 1 ok then the other thing I messed up with the bounds is this totally should be 0.5 no I'm like losing my mind here there's two neighbors there is I'm looking at code that I ported the other day and if I'm looking at that I just want I just want 0 0 0 and minus 1 so I just want to average this is way way simpler I just want to average two of the neighbors and for all of these different spots and n minus 1 so this should be and this would be semicolons all around with parentheses here so let's make sure I'm averaging the correct indices so for I'm looking over here 1 0 0 0 I want 1 0 and 0 1 right 0 0 I want 1 0 and 0 1 0 n minus 1 I want 1 n minus 1 0 n minus 2 n minus 1 0 I want n minus 2 0 n 1 1 n minus 1 n minus 1 and minus 2 n minus 1 n minus 1 n minus 2 this is this is right so this is right now okay now let me K cannot be resolved to a variable I left a little K over here by accident I left some case here by accident all right no errors no errors no Harris this is by the way what I really like to avoid doing I don't like to code forever and ever and ever without testing so if this like actually works when I start to render it I will be completely and totally gobsmacked okay so now what I want to do I've created this new fluid I need a time step function so I need a function time step to step through every moment of time with the fluid going back to my caches paper there is a step function which is here which I'm going to grab of course I just wrote it out here but what I want is void step and I have all these as variables but let's let's change that to this dot let's change all of these to let's let's change space star to space oh no no no no bad idea bad idea undo that undo that I'll just do this manually because there's lots of space star where things are multiplied uh what I could what I would do is I would say this replace float space star I know you can't see this replace float space star with float bracket star no float bracket space there we go and I think it's fine I don't need the Z's and then I don't need the third one I don't need the Z I don't need and I don't need the N or the number of iterations I don't need the Z no Z no third I don't need n the way I wrote this I don't need Z I don't need n or for this one is don't need n or for and I'm gonna need Z I don't need n what's wrong here I don't need n in for so iterations is for okay so let's look at that the process here is what to fuse the velocities right to fuse the velocities based on the time step and viscosity the XS and the Y's the one in the two is controlling this set bounds function then project which is clean everything up to make sure it's the same amount of fluid everywhere the velocities then run advection add vector on the velocities x and y then clean all that up then diffuse the density and add vector density the density doesn't need the project step because the density doesn't remain consistent around so the dye that actually is moving around in this inconsistent so we should really be in we've really got this whole thing program now huh I should just start with the devil you started with memos library so if I say background zero and I say fluid step let's run this hey no errors oh happy day I mean give me a I'm gonna be shocked if I can actually render this but let's actually render it so first let's do a thing where where as I drag the mouse I'm gonna add dents I'm gonna add dye so I'm gonna add dye at mouse X Mouse Y some amount of dye okay oh and I need to say fluid density all right no errors that's good that function is called now let's try to render let's call render D for rendering the density so how am I going to do that oh you know what I should actually really do I'm gonna change this to 64 and then I'm going to create a variable called scale and make that four and then and then I'm gonna say size is n times time scale and time scale so I'm actually gonna like lower it and let's actually let's make the scale 10 so now we should have well if I comment this out I should have 640 by 640 window okay so now fluid render D I'm gonna go here and I'm gonna add a function in the fluid class I kind of want to take all these functions out and put them in a separate tab I'm gonna call this more fluid so just like the fluid class is here which has less stuff in it and I'm gonna say render D so this should be pretty easy in that I'm just gonna say int I equals 0 I is less than n I plus I plus plus so I'm going to loop through J then I'm gonna use J then X is going to be I times scale y is J times scale I'm going to draw a rectangle at X Y scale which is really a square scale scale by the way did you know that processing now has the function square in it I'm going to draw a square get rid of that that's gonna work I've never used this before this is a momentous occasion four hours into this video then I'm gonna say hey Phil 255 100 I just want to see like just gonna put arbitrary Phil great so I can see all of those squares are there I'm gonna say no stroke and then now what I want to do is the density is this dot density at the index I am Jay and I want to I'm gonna make that V alpha so D is d so the Alpha of that square I mean it could just be the brightness but let's let's just make it the brightness directly so it's black Oh ray out of bounds exception okay interesting ah I forgot so if I am adding fluid at Mouse X and Mouse why I have to divide that now by scale because I scaled up the screen so that has to be divided by scale there we go okay so you can see I'm adding the fluid great all right so that's something now there's I guess the water is completely still too noisy now how does my cash approached approach this ad density add velocity Oh so I need to just also add you know what I'm going to do I have an idea when I do that I'm also going to add velocity at that spot and add velocity expects what expects the x and y and the amount x and y okay so the x and y and now i'm going to do this let amount X equal Mouse X minus P Mouse X female sex is the previous Mouse possession so the velocity is going to kind of be in the direction that I'm dragging not let float I mean Java not JavaScript an amount why is mouse why P mouse X so let's add that amount oh why let's see what happens here oh okay I I don't mind that so much we got an array out of bounds exception so what went out of bounds one thing I can do here where's my index function x equals constrain X to 0 and minus 1 let's just put a constraint in here I don't know whether I have a bug in my code or this is actually necessary but let's do that oh there we go all right this has to be under an hour because the camera went off once but this feels like it's been two hours I think what I want to do is add something that always like yeah because look at this I'm gonna always like fade out that's something to like fade I'm at a function called fade D I should really render the velocity where I'm gonna say 4 into I equals I equals 0 I is less than this density I know length i plus plus density index I minus equal 1 and then density index I equals constrain density index I I actually know I could just do this equals constrain here float D equals density index I and then constrain D I want to set equal D minus 1 but stay but within 0 and 255 and then let me add a fluid render fade D I also want to render the velocity field so this is because if I add a lot I mean that's too much fade I just want it to like lose I just want to feel like the die to like Peter out right now I think the die is kind of like infinite I mean it just keeps it's additive so but this obviously I maybe I just wanted to peter out very slowly alright this is a nice little swirl effect interestingly enough I have the diffusion and the viscosity at 0 it was that the order of the values of the constructor DT diffusion viscosity that's kind of weird like what if I make it this whoa that made it like really thick that's crazy so I think there's something may be wrong in my code that it's like just oh yeah this is like thick look at it it's that is yeah look at the viscosity it's like thick so it stops and I think I want to add also I want to add I want to add more like let me add like a higher amount it's gonna constrain it but yeah look at that with a viscosity that's higher I kind of like it with that viscosity of zero though so it's like it kind of is much more turbulent by the way you could imagine if you had like separate RGB channels for what you're visualizing oh it's been an hour okay and then what about the diffusion rate ooh well it just like it goes away so fast so let's let's just I will worry about these later I'm curious about also like time step if I make that yeah oh that's pretty interesting to like really lower the time step it's just kind of happening much more slowly but I could also probably add more iterations I should make these here like what if I add 16 iterations and that's probably makes it more accurate it may be more slow but I don't think I need to I mean the other thing I could do is make this 128 and change the scale to 5 can it yeah so that's nicer you can still perform the frame rate is still fine so what I want to do is I actually want in now I'm gonna just use Perlin noise really quickly and constantly add fluid I mean there's so many things I could do like I kind of want to add I want to put like boundaries and things inside it and there's so many possibilities but I'm gonna add I'm just going to add density to the middle this is what I should be doing so what happens if I add just continuously add density all the time in draw and this has to be converted into an integer this is kind of silly what I'm doing but it's fine it's like I'm always adding oh and then let's also add I mean then I could this is sort of interesting I want to visualize the vector field should have done that let me actually really quickly do that so you can see that as well so let me add a render V function and what I'm gonna do there is take this exact same render D but instead render V I'm gonna get the x equals thing is called V this V why was it not called VX and V Y was it called VX capital V and then I want to say stroke 255 and then make a line between X Y X plus VX X plus V Y so I just want to draw a line that shows the vector a little boy ah so I don't if if it's 0 if V X does not equal 0 and V Y does not equal 0 right and yeah boy I should probably only draw it if it's oh and this is y plus V Y because there yes so these vector lines you can see them it really makes it run slow but you can see the vector lines there I think I should be I should really do something more like if the Maeng like check the magnitude of vectorc I guess I want to use pvector because it's really like if VX is is less than 0.1 and V Y is less than or equal to 0.1 like I just don't want to draw like the vectors if they're really tiny Oh the absolute value this is very silly what I'm doing it's weird how when I start shouldn't they all be zero I shouldn't see anything if if they're both oh I'm only drawing it if they're small if not if they're not both small there we go this is what I was trying to do so this is me drawing the vector field now this would probably be a little bit more apparent if I changed this back yeah so you can see that's there really I should probably also like draw them bigger that not I'm kind of going off the deep end here but I should probably multiply I should multiply this by scale right of course to multiply that by scale there we go so you can kind of see that's the vector field where I move my mouse around I don't know that that's as interesting visually as the dye so I'm going to go back to only rendering the dye and alright so now the dye is just sitting there in the middle but I can kind of drag around but what I want to do now is I'm going to take this and I'm gonna use Perlin noise I'm gonna say noise of some time map noise of some time which goes between 0 and 1/2 between negative 1 and 1 an amount Y is the same but I'm gonna look at like a different part of the noise space if you're not familiar with Perlin noise I would encourage you to check out my pearly noice videos and then I'm gonna say this also is going to be the same at this spot here so I'm gonna say int Center x equals this int Center y equals that then add some density at center X center Y we could actually make this like a random amount of density baby and then add the velocity according to Perlin noise I am going to create a variable called T which is kind of like the offset through the noise space and I'm gonna have T oh I should be using I changed my mind I'm going to use P vector and I'm gonna say angle equals noise of T times 2pi and then I'm going to say a P vector is a new P vet is P vector from angle to create a vector from angle that angle and then then the time will go up and this is V X V dot Y and let's try I don't know what it should be but let's try like making that vector a little bit stronger right now so let's see here there we go yeah this is what I was trying to do maybe it is a too strong yeah this is kind of the idea I'm not seeing I just wanted it to kind of like shoot it out randomly let's take out the fade let's let me try someone to tell me I swapped VX and V Y at lying 96 and 97 hold on good look at the chat render V of x and y Oh okay thank you so that that's an important fix i mean visually we're getting some results anyway i want to do is let me go back to making it let me do this and maybe what i want to do oh maybe what i actually want to do is swirl it around a bit more multiple times is that weird I just want it to do more stuff whoops why did it just do that oh no no no no no no come back to me no no no but I don't want to change oh okay yeah maybe I want to just it's silly to a density multiple times right oh I know what I could do well know what's going on here how can I get the behavior that I want could make it more viscous no timeout for a second apparently I did this but look what I did like what kind of I'm exhausted by the way it's 130 if they have to go soon what did I do Oh interesting okay oh I don't know that's not right all right one thing I could try I think you get the idea but one thing that I could try is I could try I could try kind of adding some density in like all in a little grid pattern so this might be sort of nice to do and then I could say plus plus I so this is just adding a lot more density and let me turn that back to zero and yeah that's kind of that's is this is more like what I wanted there we go okay that was to the velocity was too strong okay so here we go this is more what I was looking to try to do I've got sort of Perlin noise controlling this angle I'm just like dropping and died constantly be sort of interesting to like sprinkle die everywhere there's so much you could do with color to drop particles in but I think I'm done I can't do this anymore I'm very curious to see like to push the limits of scale and like to slow right wait.you so I don't know if the rendering is too slow or the math is too slow but um I'll keep it at this but this I think is a nice finished result okay so let's recap what I've done oh yes you could I could imagine just like twirling it around I wanted to have some type of visualization of turbulent fluid I think I mostly have it and I have ported all the code for my caches page I'm actually gonna release this code as is I don't I'm ooh this isn't super long I would really like to come back and I would like to come back and try I mean this try refactoring this to try to understand the pieces of it a bit more I would like to and then also I would like to create a particle simulation on top of this where I can drop in particles that sort of fly around based on the vector field that is more like the reference on the github thread which is where is that here so I'm kind of imagining something like this where I'm actually just going to draw particles moving around according to the vector field and see what that looks like then ultimately I think what I want to do is try maybe moving to use one of these libraries which has more sophisticated solver and and so this this I think this project by Gabriel Y mouth I would like to take a look at so I probably do some follow up videos I don't know this was helpful or interesting useful for me to try to do it took over an hour but this is the process I think but if anything this was useful to sort of see the process of trying to figure out somebody else's code written another language and poured it we could try porting this in JavaScript and see if it performs even with just like raw 2d canvas I'd be curious to see that so go ahead and do that thank you for watching I guess I shouldn't be disappointed because this works but I do feel a little bit like oh my god seriously this is what I just did it looks more like smoke that is correct team turbulence I don't know I think laminar flows where it's at team team laminar I switched I've gone back come on I'm on both teams every team laminar flow and turbulent flow for everyone let's all get along good bye alright seems to be slowing down over time which I can't exactly explain you look at the chat here unless there's viscosity it's not turbulent that's a good point yeah adding obstacles yes Simon I'm not going to be doing parts two and three now it's already been three hours which is really my limit yeah why is it never pointing to the right I mean oh well Perlin noise actually has a tendency to stick by the mean or by the which is 0.5 and 0.5 I guess in this case would be PI 180 degrees pointing this way so let me fix that so what I think would make more sense in mapping the angle is 2 pi times 2 so this we're going to get a lot more pointing around and get a lot more directions what happens if I increase the viscosity like is here's the issue now that the velocity is just like really weak do I need more iterations I have 16 that's pretty good like a really really tiny viscosity alright like I just don't understand why I get this behavior well I think there's probably a problem with the way that I'm doing the fade or not this does create kind of interesting patterns though I need way lower viscosity oh okay now we're talking yeah that's more turbulent oh I like this and put the fade back in it's kind of like what I had before but it's more turbulent right okay so let me let me make that fade like even less cuz it really shouldn't have it in there I just don't want it to like fill up all with white very quickly ah okay so let me come Matthew I don't know what's gonna happen with this video but let me come back let me try so does this feel more like turbulence okay yeah I'm gonna take out the fade forget that fade and maybe just don't add so much yeah let's try this for a second yeah this is more this is more turbulent okay we do thank you to some comments from many people in the chat but specifically K week Mon who pointed out that I do not have turbulence if the viscosity is zero so I now adjusted some things so I created a viscosity of and let me just zoom into this I created a viscosity of pretty low viscosity but it's a non zero viscosity I also sort of change the way I'm adding the density and remove that fade and you can see this has more even though it is this has more of the quality of turbulence and yes I challenge you now take this code and add its filling up now add rainbow colors so what if you keep a separate RGB channel so the things that I did just you see is like I'm gonna publish the code with this is I actually have a pretty low viscosity why did the time step get so big yeah and then I adjusted the other thing that I also did is I adjusted the range of the angle to wrap around twice so 2 pi times 2 because Perlin noise is gonna tend to give me values around 0.5 so it was really sticking around pi pi so this now is my final version let me fix up some stuff here and this is my slight more turbulent version team turbulence all the way HSV okay okay stop stop stop stop stop stop I should do another video of just doing interesting color stuff because who wants to watch get if you are at the end of this video hashtag team turbulence okay hashtag team turbulence on Twitter let's blow it up of course no one's gonna have made it to the end of this video but let's do this color mode oh no this is render V I won't render D color mode HSB one so on my range between 0 to 255 so let's do fill D 1 255 255 100 I think this is not what I want to do blue or maybe it is that's kind of interesting yeah there we go except there we go hue saturation brightness that's pretty interesting team turbulence all the way this is my turbulence on unfortunately this use 0 maps to I feel like this would be better with like D actually being the alpha and then sing some like 255 minus D Reynolds number yes I didn't talk about Reynolds number I have no energy left all right everyone oh you you should look King week on right you should calculate the Reynolds number will determine the behavior okay thank you okay everyone that was fun I got a got to do that data and API series so I have to put all these like algorithms that I want to implement aside and you got to get cracking on that thank you for being here try do that DVD logo challenge again I have water thank you should I be doing the DVD logo challenge again you come back later today or tomorrow I don't know why did 255 minus D I could have done it as the brightness hue saturation brightness that would be the same to be faster without the Alpha it's faster so they're gonna leave it like this okay make scale smaller okay I would love to make scale smaller but I just don't think it's gonna perform it's too slow the frame rates really slow what if I have to have the iterations I just go to four also at this point I should be doing it with pixels of course I'm zooming in to it so that sort of defeats the purpose think I need to add more dye if this is like I can play with this forever what if I do this oh I got so many new members let me thank everybody Thank You Allen Smith Thank You Rock Willard Thank You Allen Smith Thank You Rock Willer Thank You Giovanni Montanaro thank you those are the members those are they miss anybody okay make it 3d oh yeah no problem I'll make it 3d okay everybody thank you for watching I'm gonna put this back into a more performative State but I can add 16 iterations yeah this is good and much less die so I just want to put it in something which I release okay there we go huge thank you to my cash to Joe let me make sure I get all the credits correct also to Joss I think I said Joe Stan I apologize Joss damn for for all that okay yeah all right so I think I'm I'm I'm out of energy and time I kind of just like it kind of addicted to this I what I actually would love to do just gonna do one more thing I like the idea of making it just more like fullscreen yeah so this but it's still the same alright so oh you know what I need to do this is format yeah so what I need to do is make some thumbnails but actually it's better for my SIA if I just do this like this okay it's very lava lamp so here there that's a bunch of something else greenscreen thumbnails with making thumbnails and unnecessary K loop inset bounds alright hold on where's that function oh it's in this page no I think this is right is it oh wait a sec is that right yeah yeah yeah oh sorry I'm not you can't see the code anymore hold on a sec here I know the camera just turned off yes Matthieu this is probably not going to be possible but let me well I'm just checking something I wonder if I'm not doing the bounce correctly it's such a weird thing to is for the these otherwise it's equal to negative it bounces if it's too it bounces okay all right so I don't know if this is going to be possible but as we're editing this together the part where I'm doing the set bounds let me correct this and often that should make it more performant and also whoa it's really gonna do crazy and accurate things if it does that over and over again oh I'm surprised it worked all right let me come back to this okay because if it's equal to 2 why is that's not right it should just be yes 1 this is so weird should I just be reversing itself no I know but I have to fix this no guys almost 2 o'clock I have to fix this this is this is not right like what the boundaries should be doing the thing is I just don't the way this code is written makes no sense to me but what it's what it's doing is it's saying look at all the things along the top for when you pass in to I mean it really should be like if B equals to do this not the if statement in here because they could stop the loop this seems crazy right no I know I need to get rid of the outer loop so I know I need to get rid of the outer loop the question is is this right I know this is right because this is looking at all of the X values and in I thought it should just invert them but why is this negative I won why is it shouldn't this be just like negative of itself shouldn't it be this right why does it take negative from the previous yeah yeah right all right okay well I'm gonna change it I could be wrong yes Simon I'm gonna stop very soon I just want to fix this one last thing Simon is asking for his top soup do you need to go to bed no it's not that late yes exactly okay all right this is actually happening later but I'm inserting it in the point where I talk about set boundaries cuz this I this code is crate that set boundaries thing is actually much simpler than this code is making it seem so first of all this outer loop is not necessary I just want to look at basically all of the the top row this is up here is looking at for when y is zero all of the X's and when Y is n minus one all the X's so this is looking at the top and the bottom it should reverse the velocity if I'm passing in to this is like a really weird way to do it like I sort of feel like it would make more sense even just to say this and then only do that I'm gonna leave it as is and again I hope to come back and refactor this using P vector I think that will simplify this but this should just be reversing its actual velocity not done of its neighbor pretty sure and then this is the same thing but now I'm doing all of the X values along the left and all the Y values along the Y so this would be this this and this and this if B is 1 change it to 0 n minus 1 and 0 I don't know if this is right actually but let's try me to try it this way ok so this to me this makes more sense to me that this is basically just about this is like the bouncing ball code and like one of my very beginner tutorials like if you're on the edge and your stuff that's coming that way reverse it but reverse it in the X direction for the right and left edges and the y direction for the top and bottom edges and that's this bee is doing okay so now I'm going to keep going with the challenge and you'll eventually get to the end if you keep watching now let's run this and see what happens yeah let's see what happens we get to the edge mmm that looks like it's leaking off now so maybe it was supposed to be next to it so what's the difference between doing it this way ooh that's weird I don't know what's right ah so gear him I realize saying this is not right Dan because we want to set the exact opposite value of the row column right next to it because you want the velocity derivative zero out this function sets the boundary cells at the outer edges of the cube so they perfectly counteract their neighbors I think this is the opposite of its neighbor so is this right now I know that this is pretty sure this is right now that is right it is a closed box okay so hold on reshoots just curious like what why oh when you have some velocity towards the wall in the next to outer layer the wall gets a velocity it perfectly counters it okay so this is actually all right and 1 is the last layer this is to the left of it yeah this is to the right of it this is to this is down this is 1 above ok so is this also no this is right the corners are averaging ok ok so I need 2 but is there not let me just look at his code one more time this is because it's 3d got it this is because it's 3d got it got it got it got it got it got it got it got it got it got it got it got it ok ok ok ok ok all right strange edit point but I'm jumping in here from the future in the middle of this video to explain something about this set bound that I kind of botched while I was actually doing the challenge and I'm at the end now but I'm gonna fix it so one thing that's really important is just to see here is that one thing that's really important is for me to point out what is written in the article by my cash every velocity in the layer next to the outer layer is mirrored so when you have some velocity going towards the wall in the spot next to the wall the wall gets a velocity that perfectly counters it that's keeping it a closed box so that is the explanation for why here I'm saying hey if I'm at I comma 0 any given X all along the top row right if Y is 0 all the X is along the top take counteract the velocity from one row down but only if I've sent in this B equals 2 which is that weird thing and this what I think would be easier with P vector because I could do this all at once but the thing that I have in here have this like leftover extra because in 3d there's more so I actually could take this out and this is gonna make this now look correct so this set boundary function is actually much simpler it is just reversing the velocity is in the last in all the edge layers according to add columns edge columns or rows according to the next to the edge column or row and then for the corners it actually just does an average of the two neighbors and that keeps it this like walled box so that's not in the end like it's kind of gonna perform the same way I just had this like extra loops in there but this is like an important clarification so now continue with the challenge wherever I left off and but this will be the code that's actually there when you look at this later if you can make it to the end of this video see you soon okay okay week did you have a link to the article this is if you google my cache fluid simulation will come up my cache fluid simulation it's the first one my cache calm fluid simulation for dummies twitter.com slash I think it's my cache on Twitter let me just look yes this is the same my cache all this is credit to my cache team turbulence okay all right everyone this is now in theory the correct version I'm wondering will it fill up with fluid Allred I mean at some point it will right and once I add enough dye the dye never goes away but I do have turbulence and there we go team turbulence okay smarter every day this is for you know laminar flow here team turbulence I don't like the red I want the I don't I'm not really happy with the color just give me a second here am i fading it now you know why is it oh because red is no matter what it's red on both ends so I would have to do something like oh I know what I can do right then as it starts to fill up no shouldn't that if that didn't do anything okay we hold on there we go this is me getting different colors yes I'm afraid this live stream will never end alright now it's gonna end all right team turbulence all the way here's your lava lamp of the past this is like basically code from 2005 14 years ago that I have now poured it into processing and we have yeah we have we have it all right it's very pixelated there's another thumbnail formats yeah oh and I just hit escape okay goodbye everyone thank you for tuning in this week I don't know I I'm not opposed to not opposed to redoing that DVD not right now although it would be kind of funny because I'd be so punchy I'm not opposed to redoing the DVD logo challenge but think I'll see if not you can edit something together combine the two right I combined that you lose you're so into refactoring and you know what all right this live stream is over see you all next week next Wednesday same time same plate 1030 a.m. Eastern on the coding tray look I'm still here I have to hit the button stop the button to stop ok ok stop screaming think about now