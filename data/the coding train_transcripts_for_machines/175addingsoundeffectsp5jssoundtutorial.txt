hello and welcome to part five of my p5js sound tutorial series now in this particular video I'm going to look at adding sound effects to a P5 sketch we looked at playing like a a song in a P5 J sketch and starting and stopping it and and manipulating it but what happens if you have something like uh a snake game so this is a uh an example I made in a previous video where you can play a snake game meaning the whoops um you move about the screen as the snake and you try to gather up food and as you gather up food your snake becomes longer um and now so what would it mean to add sound effects to this particular sketch so I have a few ideas I made a list over here um the first thing I want to do is just add two sound effects so a sound effect for each time you eat the food and a sound effect for each time you have to start over when you run into yourself um I also want to add some background music and I want to look at seeing what happens could we manipulate the background music having it speed up or slow down based on like how far you're getting in the game and then also there's an issue that comes up with working with sound effects if you have a sound effect that you're triggering many times over and over again um so I want to look at that and maybe we'll add a sound for changing direction so I'm going to do all of that in this particular video now where am I going to get my sounds from so there's lots of places on the internet which you could find sounds um this is a particular sound effects package um I will link to this particular sound effects package it has a Creative Commons license it's available on GitHub I've already downloaded has wonderful sounds in it that were made um for uh this for the coding rainbow Channel specifically so um you can see here this nice page I can just test out what some of these sounds sound like for example this isting rainbow with me okay so um I already have all these sounds downloaded and so what I'm going to do is go to the Finder right here and this is my this is my p5js sketch I have a library folder and I have two JavaScript files and an index at HTML file what I want to do I think is to is make a folder in here whoops I'm in the wrong place I want to make a folder called sounds and then I'm actually just going to take all the sounds from that sound effects package um and copy them into here I'm not going to use all of them so now you can see it with my project I have my JavaScript files my HTML files and now also this folder of sounds and you can see um like if I'm going to start with one of these alerts you can see how they're named alert d04 MP3 so this is going to be really important because I'm going to need to reference the file name specifically when loading the sound so let's just make sure first I can do that so I'm using the the there's a variety of different sound formats you can use which are supported by different browsers and I'm not going to get into that in this video I'm just going to use MP3 files which will hopefully work in most scenarios so let's say I want to try this uh let's try alert number six so the first thing I want to do is uh go to my code and I want to create um let's make this the sound effect where you eat the food eat sound and I'm going to add the preload function I think what I might like to do in a separate video is show you how if you have a lot of sounds show you how to create a loading animation um right now the the this um it's just going to take a minute for not a minute but take a few seconds for the sketch to load and I'm going to say eat sound equals load sound and then now this is the name of the sound file but but I also need the path right if that was just in the root directory this would be enough but I think it said sounds and then alerts I think that's right let's go back and look uh sounds and then alert and it's with a capital A and with no s so this type of stuff is typically case sensitive and you've got to get the spelling exactly right so just to see if this works I'm going to uh go back to the sketch and I should be able to just say right here eat sound. playay so that that's working so in the console I have it as a global variable I can just play that sound so this is actually really easy stuff here I've loaded the sound all I need to do is now find the place in the code where I eat the food so that actually happens right here in draw there's a function the snake function checks to see if it's eaten the food and then it calls this pick location which picks a new location for the food and so I could just add here and say eat sound playay so now when I run this sketch oops oops I have to click in it to you can see there we go it's working all right so that's the basic idea here so now we need another sound effect let's let's add a second sound effect effect um and let's pick one uh let's uh for when you uh for when you die uh how about this one so I'm going to this is under voice so I'm going to uh uh say start over sound and I'm going to load that one as well and this one is in uh where was it sounds voice and then cartoon laugh and now I should be able to say okay well where in the code this function s.de that's what checks to see if the snake dies uh and here this is where this is where all the reset of the snake happens you can see I'm logging to the console so I can say here uh uh what did I say start over sound. playay so now I should be able to eat food and eventually I'm going to make myself so you can hear one the trick I'm doing to ah this is a very I'm not very good at playing this game uh okay so you can see that work so this is the basic idea all you need to do is load sound and call play at the opportune time um now actually right now what I'm going to do is I'm going to add another sound for change direction so let's go back and pick which sound we want to do let's use I want a shorter sound uh these are all pretty hello hello let's say we wanted to use this hello sound for every time I change direction so I want to just emphasize a point here so I'm going to um in the sketch I'm going to say hello and I'm going to say uh oops hello equals load sound and I forget this one is in voice hello1 um and I'm going to say there and so uh sound slvo now I should I should say that you know generally speaking I would probably try to avoid spaces in your sound file names it's all working just fine here but sometimes file pads on different machines and different servers spaces can confuse things but it's going to work just fine but I if I were you know I might rename some of these files just to like this to make it easier to work with but for right now it's working so I'm not going to worry about it so let's say what what I'm going to do now is anytime I press a key I'm going to say hello. playay so you know I could have a different sound for each direction there's all sorts of but I just want to like show you something that comes up a lot with sound effects so I'm GNA run this so you can see with the way this is working when I call play it always restarts the sound immediately but does and doesn't let it finish playing which might be what you want but if I wanted to make sure it's not it doesn't play the song The Sound until uh until it finishes playing if it always finishes playing the sound um I can say I could say if hello is is not playing so there's a function in the P5 J Library called is playing which returns true or false based on whether the sound is playing so if I say if it isn't already playing then play the sound oops I missed something here oops now what you can see is hello it's actually kind of a long sound Soo so I can hit the keyboard as many times as I want but it won't actually start the sound over again until it completely finishes and there's a lot of Silence there because the sound file itself has a nice long sort of Fade Out in it now I wanted to mention something that I'm pretty sure is the case and I'm going to look in the sound reference for a second um and I think uh what I want to look for is there's something time out back I was looking for what I found what I was looking for which is the play mode function so actually I didn't realize it let's go back to the example I want you to listen very carefully I'm going to press the key multiple times it's a very short sound so it's hard to hear but it's actually always finishing playing hello and layering the sound over itself multiple times this is actually what's known as the play mode uh sustain so sustain is the default play mode meaning if you trigger a sound multiple times it's going to layer over itself many times but if you didn't want that you could actually um you could actually change the play mode to restart and I'll you'll be able to hear the difference now I'm going to refresh this page so you can hear it doesn't every time I press the key it doesn't finish the previous sound which is perhaps not what I want here it's a little bit awkward H um and perhaps that's not the best sound so I'm going to take that out but I wanted to demonstrate that this comes up a lot you know in my flower Invaders code example there's a thing where you hit the space bar and you launch water so if you were hitting the space bar a lot you might want to think about how you layer that sound um okay so I'm going to comment out this hello. playay and let's let's look at what we have right now so we have the game here and a sound is played every time you eat a piece of food and then by the way I think I have a hack in here where I can just make it longer so now also when you go into yourself it laughs at you so I can click the mouse actually I want to make that the spacebar I just have a hack in here so that I for testing which just like increases so I'm going to just say if key equals spacebar I think that'll be easier for me to do the testing so um so I can just really quickly like make a long snake and hear that sound okay so now what I want to do now is add some background music so I have some nice there is a some music here so music music 01 MP3 so let's also load that uh VAR music and I'm going to say uh music equals Lo uh I'm going just copy this music equals load sound sounds music and then music1 and then what I want to do is say music. playay as soon as the game starts so now we've got our snake game which I'm going to now play I forgot that I was making a tutorial video because I'm just interested in oh I could watch it over here too okay so the point is now you see that I have background music playing and you could I could put a button here to toggle the background music but I want to try something which is just to see could I make the game faster with each piece of food you eat and then also have the music speed up so um so what I'm oh I forgot that the okay so I'm gonna mute this tab for a second I should add a play pause button but I'll I'll do that later okay so now what I want to do is um the now the speed of this game I I've done it in kind of a tricky way which is that I'm just actually control typically this is a bad idea the speed of this game is tied precisely to the frame rate because so nothing could happen faster in the animation because the whole frame rate is so I probably if I needed to have other animations and things would want to not mess with the frame rate but this will work just fine and it'll demonstrate the idea so thing I want to do is make that a variable so I'm going to make that a variable called frame rate I'm going to start it pretty slow I'm going to start it at three and I'm going to I'm GNA also put in draw the frame rate function uh uh and actually you know what I don't need to put it in draw I'll put it in uh I'll do this more properly I'll put it in setup and then I'm going to adjust the frame rate every time the food is eaten so I will call frame rate again in here and I'll also say something like frame rate Plus+ so it's going to go and just to be sure it's working I'm going to change this by like 10 frames per second each for each piece of food right now so it's slow and then you can see it's really fast so I don't want it to change that extreme so I'm just going to change it by two and then now that I need that see that that's working let's also say music. rate or was it what was it I forgot what the I forgot what the function is let's go look in the reference um so I want the uh P5 reference page for sound file and you can see that the function is uh rate sets the playback rate of a sound file will change the speed in the pitch values less than zero reverse the audio buffer so I'm assuming for example if I say rate of two it's going to play it twice as fast so what I think what I want to do is I want to say um uh music rate map the frame rate which has a range from three I started at three to like maybe it's going to go up to 20 I don't know uh to between one and three times as fast so and then I'm going to change the music rate to that music rate so let's see how that works right now so I'm going to go back to the game and oh I need to unmute the tab oh and by the way when I start over something I need to correct when I start over going crazy I can't mute it really easily I wish I could I you know what I can do is I can at least refresh the page so it's when I start over somewhere in here um I also need to say music. rate one so that that the music uh goes back to one and the other thing is that rate really picked up fast so I'm going to make the mapping much much more less extreme and probably I don't need to do this as a mapping maybe what I should just do is uh make a variable called music rate this might make more sense and have that equal to one and then forget about doing a mapping just set the music rate and then just increase it by like a little bit like 1% faster for each time a piece of food is eaten so let's play this again ready can you hear it getting faster I'm terrible at this game if anybody's actually just watch watching YouTube Make Me bobbing my head awkwardly in like playing this game I'm really impressed okay you get the idea that's that 01 was like very little so you know I should probably make it at least like 05 for anything should happen this really what my life has become rainbow snake game with music speeding up okay you guys get the idea okay so this is the end of this video I showed you how to load a bunch of sound effects how to put music in the game how to dance with the music how to make it speed up I think I I think I've got to everything on my list I don't uh I'm I feel like I need to like fade this out I don't know how to fade the Audio I need to like build that into the code but I'm just going to mute the tab and Say Goodbye and I we'll be making more sound uh the next set of sound tutorials I'm going to make are actually about sound synthesis so I won't be loading any files at all um and then I also want to make one at some point remind me if I haven't done this if it's not on the channel maybe one that shows if you have a ton of sounds how to have like a loading bar or something like that um as your program uh starts up okay thanks for watching and I'll see you soon