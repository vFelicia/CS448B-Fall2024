hello this is a video about a physics engine called matter jf I am going to teach you how to use battery is here's this problem I don't really know matter touches very well so what I'm actually going to show you is me trying to attempt to make a very simple example in matter that jf by reading the documentation and figuring it out as we go now it's not that I've never looked at this before I have I made some examples of it previously I haven't looked at it in a while but I certainly you know I can't I certainly have to spend more than like 45 you need to know about the amount of time let's just get started so matter like this is a physics engine what is it this engine if you really want to do you could watch a different video that I have that I'll link to in the description where I spend a very long time kind of talking about what a physics engine is I didn't do a very good job but anyway this video could be much better I could tell already so I'm using unmannered such as is a JavaScript physics engine you can see a lot of demos of what it can do right here just even on its home page it's an open source physics engine you can find it on github thank you to the creator and everybody has contributed to this engine it's terrific so you can find the source code documentation etc so most physics engines operate with this idea of having a world here's the world right here that world can have things in it like shapes and those are often called bodies and I think they're called bodies in matter 2jf and also you can have something that connects different bodies together and it matters gachi as those are called constraints so what i want to do is maybe just create a simple example where a couple squares fall from the top of the screen to the bottom and bounce off of each other and let's just see if we can get that to happen okay so what i have so far in my code is i'm using the piece I'm using p5.js as a library for drawing and animation I have a setup function where I make a canvas they have a draw function of loops over and over again where I set the background if I go and look at my code here it is so what's the way that we can kind of get started with matters that yes if I go to the home page let's actually look on github just for a second so on github I feel like him to read me let's see there was I saw a getting started page somewhere install usage you look at usage examples know a little early getting started that's what I'm looking for so I'm looking for this getting started wiki so one thing is we've got to make sure that we have the matter de s library you can see it up there referenced in our HTML page and I've done that so if I look at the if I go back to Adam here you can see I have an index.html file which is referencing P the p5 library and the matter not library and both of those are in this library folder matters SAS and p5.js so if you want to do exactly this example you've got to have both of those libraries the files for them reference in your index of HTML in addition to referencing my own sketch code okay now here following is a minimal minimal example using the built in renderer and runner to get you started so one of the things that matter has is it has a built in renderer meaning it will actually draw everything to a canvas for you you don't have to do it at all you can even set settings and style things but I'm that's an interesting way of working in a really quick way to just try things out but I'm going to try to build an example where I'm not going to use a built in renderer I'm using my own renderer p5 so I can really have total control over the design okay so first thing is module aliases so what's the deal with that let's copy that into our code you'll see this with a lot of libraries module modules module module aliases um so why do you have it well a lot of JavaScript libraries are named based meaning they have things you can use in them like an engine or a renderer or a world or a body and so but they're all namespaced under matter not render matter dot world because what if you what if there was a builtin variable in javascript in the browser already called world you don't have a conflict so you call it matter dot world but every time you want it reference world in your code you want not world management world so this is a little alias that I can just say the thing is matter dot world but I want to set world equal to matter that world if I could take it whenever I want so that's a quick thing we've got so far we've got something elegant and to be honest this one I don't want but you know I'm going to comment that out cuz I want to use it by accident okay let's go back here now engine so a physics engine is an engine we've got to say hey make the engine so let's do that so I'm going to put that in setup and I might want to have a global variable reference to that engine I'm gonna do that right after I create the canvas so so so I'm going to put that in setup we're making our engine this is pretty good so far wait you're watching a video where some of his copy pasting code from the browser into a text editor you realize that's what you're watching right now look I hope maybe it'll get better I'm gonna skip this renderer thing look at this okay so this is exciting this is showing some examples of how you can create bodies in the world so there is there are a bunch of functions we're seeing just three an example of one of them here rectangle so I'm just going to do one of them I'm just going to grab this and I'm going to make a variable called a box and I'm going to add this now to setup and I'm going to say box equals body stop rectangle now here's the thing I'm going to give myself a little more space here we could probably guess right this function is creating a rectangular body at pixel location 400 comma 200 probably with a width of 80 pixels and a height of 80 pixels but I let's say we wanted to confirm that that was the case how would we do this so one of the things we can look at is if I go to matter to suggest and I want to go to documentation and under documentation I kind of look at okay there's these are all the different and a sub categories where there are various functions and objects you can have access to and constraints is clearly where we're going to make things to like connect bounds is kind of interesting maybe that's to do with the boundaries of the world but bodies if I click on that bodies has a whole bunch of methods like circle Circle creates a circle from vertices we mean I could pass a list of vertices to get some sort of polygon this is great and if I look down in here and try to find rectangle we can see X Y width height options so what's interesting about this is there are some options see the properties section of the matter dot body module for more details on what you can pass via the options object huh let's keep looking this is exclusive detective work so by the way why am I just saying bodies dot rectangle remember it's actually really matter dot body Sai rectangle but satisfied so I said let's not worry about the options right now we could dig into that later okay so now I have a box this is very exciting ok so now what I'm going to do is we're we're we well let's keep going with this what I want is I mean I want a variable X that also keeps track of the world and you can see the world is a entity that's part of the engine so I'm going to create a five an engine which is the whole physics engine itself and inside that physics engine there's going to be a world that's full of bodies so I'm going to make a variable called world and I'm going to say world equals engine dot world which is maybe a little silly but you know I like to sort of organize things with a very organized way and then I want to make sure the engine run so I'm going to say engine dot run engine now a lot of physics engines will require you in draw or in your animation loop to explicitly say update update each moment in time are steps or each moment in time looks like matters fjs doesn't require to you to do that it just says you could just tell the engine to run it so it's going to be going and you would I would assume that there's some way of configuring you know how is it is it kind of like updating itself 30 frames per second 60 frames per second what is this measurement of time so you could probably dig it as accusation but documentation but the default running the engine is probably going to be good enough for us so what I want to do next is so now I'm stuck right because I I don't want the renderer to do anything automatically what I want to be able to do here is now what I've done is I set up engine if that making engine make the world put one box into it and now what I want you to do please is every time they draw I want to ask the physics engine oh please physics engine thing where is that box so what we need to look at so actually let's just do something here let's just say console dot log we could look in the documentation but one thing that might be nice it's just to say console dot log box so let's go back here hit refresh and look at this oh you know what so this is I've done something rather terrible it's so nice to p5 to give me this error message p5 and alka in the chat writes that the default formatter that she has the 60 frames per second so that's great to know p5 had problems creating the global function box possibly because your code is already using that name as a variable you might you may want to rename that variable something else so I've done something rather not so good because there actually is a function in p5 called box and I made my own variable called box this is why name spacing exists p5 works very much in the global namespace to keep things simple so I could just say box no mistakes p5 box but so I'm going to name this boxee box but box bucks one terrible name box ii was better so now lets console.log box 1 let's run this again and we can see here's the object so we can look and we can see look at all this stuff angle angle previous angular speed angle velocity bounds axes there's so much information here parent parts position well look at his positions definitely gonna be useful for us X is 400 y is 200 so let's make use of that let's try saying a rectangle box 1 X Box 1 dot Y now could I get the width and height from the box now I kinda have a sneaking suspicion that I'm not going to find any variable for width and height in here the probably is a variable that keeps track of its vertices somewhere okay oh there it is I look for a little while there vertices so this I could use which is actually give me the XY of all of its vertices but I imagine this is there's so many different ways I could do this I'm going to do this one way right now which I'm just going to I'm just going to do this it awful way which is I'm going to hard code into with them the height that I know about so now let's run this program again this magical program would hit refresh let's go really fast of the work well that's drum roll is pathetic so how come I don't see it let's oh I just said dot X dot Y remember what was in it oh it's so sad I was not being careful in thoughtful here it was actually called position position dot X so I need to look at box one position X dot one position not Y sad let lets console.log console.log box one dot position X oh I put it at four hundred few hundred I put it somewhere off the screen because I was using its default oh this is terrible let's uh let's put it out let's put it at 200 and put it higher up at like 100 boy I'm really a terrible programmer everybody still subscribe to the projeto I do have a snare drum roll oh hey oh thanks thank you my box okay Wow but I'm getting a really really good Alex in the chat is making an incredibly good point I forgot a key key piece of this because I got offtrack what step am I missing I need to make the engine the engines going to have the world I need to make the body then that body needs to go in the world right need to actually say hey that body is something that's going to experience the physics and if we go back to that getting started page I'm sure we'll see world dot add and then a bunch of things so this is a way that I can add something if I unpack this code here if I say world add so this is a generic function add and you know it's funny like I would almost like this to be this this is what I want to do which is to say add box one to the world but it looks like what's actually happening in matter is that I have a add function which is namespace under world where I give it both the world that I want to add to and the things that I want to add so I wouldn't be surprised if this is fairly you can give it an array but what can I just give it a single object let's try that so now let's run it again I forget that stupid from full hey there it is whoo so this is what I need if all I wanted to do is this was my project you using in matter just yet that was pretty simple to do with matter digest as a physics engine but if I need definitely a sad trombone sound effect if this was my project I would not want to go through all this figuring out the physics engine I could just have X Y and say y equals y plus whatever and then add gravity and that sort of thing but what I'm getting here now is first of all let me reorganize the code in a different way so first of all I want to do something that's going to make things easier for me to manage I'm going to create a new file I'm going to call it a box jf and I'm going to write and I think that should be okay because it's a capital box I'm going to create my own box and it's going to have a it's going to have a body in it so my box is going to get an X Y width and a height and when I make so I'm going to make my own object which is a wrapper for the matter jf object so now I'm going to go in here it's just a little bit unnecessary but I think will be nice I'm going to grab this code put it here so this rectangle is going to be the body associated with this box and then when I make that body I also want to remember to add it so I'm going to put this in the object and again there's a umpteen ways and it's not so great that I'm using a global variable here but there's unseen umpteen ways I could organize the code this is just one so I'm going to add the body to the world in the object and then I am going to write into that object a function called this show where I'm going down I'm going to say cos equals this body position I'm going to ask for the position now I also actually really need the angle this body angle because that thing might start to rotate as it bounces off of stuff and I'm guessing its body that angle but we'll find out soon enough and then I'm going to say push and pop and I'm going to use a translate now so I'm going to get a bit fancier I'm going to say translate to paused at X pause dot Y and then I am going to say rectangle pause zero zero with height now the funny thing is this width and height variable it's kind of available down from you down here but I don't love the way I did this I think I want to just put that in I'm going to add my own since the body doesn't keep track of its own width and height I'm going to add my own variable to keep track of that and let's just see without worrying about the angle right now let's now see I've made my own box object so now I can say box one equals a new box object that's my own 200 comma 150 comma 50 and then I can say box one dot show so this should be the same program I always like to do that when I know I miss yeah okay box is not too fun what did I forget I added a new JavaScript file I didn't represent an index of HTML so I'm going to do that right now I'm going to add it here I'm going to reference box AF and here we go hmm there we go look at that whoohoo okay so now that's working this is exciting now what do I've got let's do this let's make this an array boxes is an array let's take this let's say function mousepressed whenever I click the mouse let's say boxes dot push a new box at Mouse X Mouse Y and let's make them smaller 20 comma 20 and then let's in draw I'm going to always I'm almost getting I was so close to using a for each loop there you made some of you got so happy but today is not the day it'll come someday and then I'm going to say boxes index I show so what I'm doing now is I'm just I got that one object working I sort of packaged all the physics stuff into the object so I could just make a bunch of them and now Oh Mouse Y is not defined because I spelled it wrong now I can I click the mouse I got now can we really see if there if any physics is going on here besides just gravity uh so what do we need to do one thing I want to do that's really going to make this work is I want to add something at the bottom here that they'll bounce off of I want to add a ground so how do I add ground so I'm going to make a variable called ground and ultimately I could also kind of wrap my own object there but I'm going to be a little bit lazy about this and I'm going to say ground equals bodies dot body's rectangle and then what I want this now an interesting question is does matter jjs consider the center of the rectangle I bet you that's what it is or the top left I don't know let's get this done kind of a feeling that I want my rectangle to be in the middle and at the bottom and I wanted to be the full width and just like 10 pixels high because I want to have a body that sits at the bottom that things bounce off of but I don't want that body to move so what I want is I don't want a dynamic body these are box2d terms but in the same concept applies in in in matter is I want static static body and I noticed as we're looking at this getting started page this is where those options come in right if I create a rectangle at this location and I give it an extra option like is static equal true and so what I'm going to do I'm going to make my code a little bit more longwinded but I'm going to say options and what was it is static true so I'm going to make a little JavaScript object and I'm sure there are lots of other options I could add here options is static true and I'm having the ground be I'm going to add those options to the ground and then I need to say world what was it again dot add world ground without it I don't remember yeah that's it so I also want to add the ground to the world all right let's see oh look at that Oh short of it's doing something but it's a little bit weird right it's a little bit off and one thing I want to do just to make this a little bit more dynamic because I want to change this to Mouse drag just so I can add a bunch at once right you can see them all bouncing but it's not working right now first of all I didn't draw the ground this is the thing to remember right I could do this look at this I could say hey mix it ground in the middle of the window there it is I don't have to draw it I could now draw a line there if I want to do because it's all based on a my retinal I could draw a line in the wrong place it would be crazy but what's missing here these rectangles as they bounce off each other are going to rotate and so the nice thing is I have to assume now the question is I can use the rotate function based on that angle so I can rotate the rectangles based on the angle that I'm getting from the body now is that angle in degrees or radians I don't know let's find out does that doesn't look right does that look right to you does not look right to you so guess that it's giving it to me in degrees and let's convert it to Radian whoops that's not right either where's my sad trombone sound so let's let's let's figure this out ah I know what it is so the rectangle function in p5 draws the rectangle with its reference point the top left so I need to tell p5 no no no the zero zero is at the center of the rectangle rect mode Center so I need this is a really key thing that comes up on working with physics engine the way you're drawing stuff needs to match the way the physics engines thinks it exists and it's not just going to work automatically you've got to really make sure those things match and obviously I'm getting things wrong here and there okay so let me I think that's pretty good let me move the world back to the bottom and let me just draw something along the bottom just to let's make a line that goes from zero height to width height and I'm going to say stroke weight 4 and fill 255 and then what I want to do with the boxes also is be a bit more thoughtful about what they look like so I'm going to say stroke weight one stroke 255 and then Phil you know 127 or something ok so now we can see this looks better yes yeah I think you can see it up there okay so you really are getting kind of like stuck on each other and I have a feeling I remember well I said a bunch of things I want to fix here so number one is I don't seeing the floor I would really like to see the floor so I put filled here by accident set of stroke so let me put that in no cheese because it's white you can't actually see it so let me make that like 170 or something I this is silly what I'm doing now you can kind of see it there but actually you know what I I'm being so silly here this should really be I should really draw the floor exactly as I made it up here and so I'm going to be really really like lazy about this and I should make an object and do all the things that I did with the other thing and make this a rectangle just so it's actually in the right place oh and now it ah this yes so this should also be a rect mode a center there now you can see that floor is there and do I have to stroke wait there by accident I don't want anymore okay so you can see here and I actually let me just do no stroke okay sorry I'm so you can see there's the floor so the things are landing on the foot now one thing that's kind of going on here if you can see that kind of like getting stuck on each other almost immediately and they're also like kind of pushing up against each other so I have a feeling now this comes down to a sort of moment where what we now need to do is kind of tune the engine to perform the way that I might like it to perform so so I have a feeling that some of the properties that I can add like affecting its friction or its density or its restitution or things that I could tweak so let me look at how I might do that now I wonder let's look at that options again because maybe we can add those things in option so in the documentation it's set here see the property section of matter dot body module for Deepti done and what you can pass via the options object so let's go to matter body whoops no no matter I want matter dot body so that's right here body and then I want to look for options so what are my options to do up looks I'm looking for the more details off I kind of know what they are but I want to be able to see that there's all these things I could do that math that parts that positions that statics at velocities translate update well there's so many things I could do so there are these properties up the following properties is what I'm looking for the following properties are specified for objects created by matter by decorate and for objects passed to a the options argument so these are things I could adjust after the fact like what I'm looking for let's just look for friction for example a number that defines the friction of the body the value is always positive and in the range there are 1 a value of zero means the body may slide indefinitely a value of 1 means the body may come to a stop almost instantly after a force is applied so this is actually the kind of thing that I could I could probably do this in a number of ways number one is I could do something like this I could just say this body friction equals 1 so I could do it here I have a feeling that works can you tell if this is different I don't know now I could set it to zero let's just see yes you can definitely tell that that's different zero friction versus a friction of one that's kind of interesting to see so but I could also probably do this again and this might be a little bit nicer because I can do a bunch of options so I'm going to say options here and these don't have to be the same for every so what I want to do is do friction and I also want to do so I'm going to do 0.5 just somewhere in the middle I also want to do restitution so restitution has to do with the sort of bouncing acts like it's a thing this thing that's falling is it going to land and just sort of land there and stop or is it going to hit there and bounce way up because it's very elastic or spongy or bouncy so let's look up restitution it's going to ensure the documentation will explain it better than my botched little whatever thing that air friction a number that defines the restitution elasticity of the body valuable is positive during one a value zero means two collisions maybe perfectly inelastic and no bouncing a value point eight needs to body may bounce back with approximately eighty percent of its kinetic energy hey we got some physics stuff going on here so let's now let's give it a restitution of one and go back there you can see how bouncy they are so that's like too much so I want to what I want to do is I want to move the bottom just for the sake of argument too you know height 50 I want to be a little more thoughtful and say ground dot position X ground position dot Y and by the way it will be interesting exercise to like angle the ground so let's just do that and now let's do this and what I want to do there is a little bit of glitchyness there I want to make the restitution like point six and the friction like point three and I feel like this is what I want why are some going through I wonder if the facts I think there's a little bit of an issue here where when I drag the mouse I'm creating so many objects on top of themselves and so in this case just to like look at this in a slightly different way I think I want to go back to a mouse pressed just like a look at them one at a time why did that happen they're so bouncy so that must be doing something a little bit off here looks right though I like yeah I like enjoying my physics so I think I'm going to look at this some more and see if there are some other things I need to tune with this and then I am going to I'm going to come back I'm looking at the chat right now seeing some interesting comments I'm going to come back and in the next video I'm going to add a few things to this number one thing that I want to make sure to show you how to do is how to add some Mouse interaction so if I want to click on one of these and drag it and kind of toss it around and I'm also really wondering why those first ones what I'm wondering here is why the first ones seem to like fall through the ground like what is going on there okay so there's an issue where that you're noticing that sometimes the sometimes these squares are like falling through the bottom and my suspicion here is that I need to crown this very very skinny rectangle and and these boxes are actually moving quite quickly by the time they get to the bottom and perhaps the time step is such that it's positioned at one moment and the next moment kind of skipped over it so there's probably settings and matter that they asked that I could change in terms of its time step calculation but I want to look into that but right now here's a way I could fix this I could just make it sticker so just as like to make sure so I'm going to make the height of it 100 and then I'm doing a very silly thing where I have to type in this hardcoded value in two places to also draw it that high so now I've got a much fruit like the thicker ground so to speak I have a feeling that even if I drop it from way up high it's not going to be able to skip over it so now we're seeing that this physics engine that this example this demonstration is kind of working more like what you might imagine here's one thing I'd like to do just to make this have a little bit more variety just so you see it is I want to go into box AF and I'll actually let me just do this up here and I'm going to make when I create the new I'm going to make it with a random a random with between 10 and 40 and a random height between 10 and 40 so let's just see make sure this still works with different sized rectangles oh yeah 20 how the first two were like squares so you can see here that this works even with rectangles of varying size wonderful so here is a basic implementation of matter KS really simple there's a lot of things that could build on top of this I need to look at how I can drag things around with the map mount I need to look at well how could I make it an arbitrary polygon that's not just a rectangle what if I wanted to be a circle what are you could think of a lot of your own features so I'm going to do a couple more video tutorials and a coding challenge at some point to build a particular scenario so thanks for watching this matter a chance tutorial and I'll see you in some future ones you