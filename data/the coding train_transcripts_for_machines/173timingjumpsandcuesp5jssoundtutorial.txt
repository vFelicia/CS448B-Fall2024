hello welcome to part three of my p5 Jeff and sound tutorials in this video I'm going to show you how to jump to a particular point of time in a song how to know where you are in the song how to trigger a particular drawing to happen in a particular point in the song all sorts of possibilities dealing with time and a sound file so where I last left off was a simple example where I could play and pause a particular sound file and one of the things I want to do now is add a button I want to add a button here that's called jump where when I press that button I jump to a particular point in time in the video so let me go to code and in this in here I'm gonna show you a bunch of functions so the functions that I'm trying to demonstrate here are jump which allows you to jump to a particular point of time and I said in the video but it's a sound file to song duration which is telling you which is a function that will I don't know telling you I don't know what tells you anything but that function returns a value which is the length of a particular sound file in seconds so the key measurement by the way of time here is seconds so if it's a minute long you're gonna get 60 and you're getting floatingpoint numbers so it's if it's a minute and half a second long you're gonna get sixty point five so duration is a function that returns the value which is the total duration of a sound file in seconds and current time is a function that returns to the current time where the playback currently is and jump is a function that sets the particular time so if I were to say jump 0 that's like rewinding back to zero there may actually be a rewind function I'm not sure but you could always say jump zero so let's just look at a few of these functions the first thing I'll do is I'm gonna add a button I'll call it jump button and I'll say a jump button equals create button and I'm just gonna say jump and then what I'm gonna do is say jump button dot mousepressed and I'm gonna create a function called jump song you can come up with better names and then I'm gonna write a function called jump song I should mention by the way that everything I'm doing here with these callbacks kind of work because I just have one button and one song and you know I have using global variables to communicate across them at some point someone should remind me to make a video that shows what if I have like 10 different songs and ten different buttons can I reuse the same callback function you also might see this function written directly in there as an anonymous function and I think I've referred to that in another video somewhere but these are some issues that could be coming up in your head but I digress let me get back to the matter at hand which is right here I want to say var I'm gonna just say length equals song duration so what this is going to do is it's going to give me the total duration of the song in seconds and put it here in this variable called le n for length and then what I'm going to say is song jump length divided by 2 so in that sense I am just want to jump to the middle of the song and you know I could look at the mp3 file and figure out how long it is I just picked like you know I I could actually just say junk to jump to 20 seconds let's do that right now really quickly just to see so I'm gonna run this you should see a jump button first thing to play it and then I can jump that work listen closely yeah I'm always jumping to that point by clicking the jump button now I could by the way this might be interesting is to try this let's just jump to a random point in the song right random is going to give me a value between zero and the duration of the song so every time I press this button now let me play it and hold on let's look by the way at I'm gonna make a variable there T equals that random t4 time that random point in the song and I'm gonna jump to that the reason why I'm doing that is I want to just look at it see it in the console so now song is loaded I'm gonna play it so that's 28 seconds two minutes in I like this part okay whatever oh I think I'm knocking over things down I lost my own the music makes me lost in my own world pause okay so where are we so let me look back at my list over here I'm now talked about jump and duration ah so so okay so there is a function called current time so what if I want something to happen based on a moment of time in the song so current time is always going to give me that moment of time in the song so if I come over here and if I know I just run this I could say song current time I can look at this in the console we're at 5 seconds 7 seconds 8 seconds well I love this I love that part of 9 seconds so I could jump to 9 seconds lots of possibilities here but let's say I go back and I add the draw function and what do I want to do in the draw function what I want to say is something like if current if song got and we're gonna have a problem here but let's see let's see if that problem comes up if song current time is greater than 5 then background 255 0 255 so I suddenly want to see a lovely pinkish background as soon as I get past 5 seconds now I'm anticipating perhaps a problem because draw is going to trigger immediately and the song sound file might not be loaded yet and so this might say I can't deal with this because the sound file isn't load gift maybe Peapod yes we'll handle this gracefully behind the scenes I'm not sure let's find out Oh actually there's no problem because I'm not even playing it at the beginning so actually it handle to gracefully behind the scenes so I'm gonna hit play and count one one thousand two one thousand three one thousand so we can see that triggered something to happen at a particular point in the music now here's the thing I'm showing you that just as something that you could use current time as of as a way of knowing where you are in the music but actually there's a better way of doing that with this cueing function so you know it might be more like something that I might use current time for more likely would be something like this like let me actually just whoops let me actually just set the color according to the time in the music that's like a variable that's constantly changing and you can see now as you know as we get closer and closer to 255 seconds do you see the color changing nope this is working demand let's get the code while we're waiting song current time 0 255 that seems like that should work let's see where we are yeah I guess 25 just 25 seconds is it very much so just to make this work let me multiply that by 10 and we should see the color changing as the sons play yes yes yes it most definitely is I see a purplish hue coming in okay so highlight off you hopefully you skipped this last like five seconds be rambling because what I really want to show you here ups and I lost I lost what I'm working with here so what I really want to show you here is how to use the add cue function so psalm current time is a variable that gives you where you are currently in the particular piece of music but you can also do something called add cue so that what add cue does is I could say song got add cue and to add a cue I need three things I need well I actually only need two things but optionally I can have a third thing so let's let me start with two things I need the time and seconds where I want the thing to happen and then I need the that I need a function that gets called at that time in seconds so I'm gonna say function add cue five seconds I want to add like a heart or something but I'm just gonna I'm just going to call change but I'm gonna do something really not that interesting I'm gonna make a function call change background and I'm gonna call this function change background and what I'm gonna do is I'm going to make a random background so what I've done here is I've added a cue to that song at five seconds whenever that song is playing back in five seconds call this function change background whoops not ready to play it if I ever press the play button before it's loaded at the moment I got to five second time so you can see so I wonder actually if I jump by the way back to the beginning I'm gonna jump back to the beginning if it'll does it again so at five seconds I have to wait five seconds I got a random back on the jump back to the beginning of the song does that Q occur again at five seconds it does so that Q is permanently in there even if the song is looping and if you ever jump back to previously before that Q now let's let's say that what I want and pause the music let's say that what I want is actually at five seconds to change the background to blue well one of the nice things about the add Q function is it allows you to add a third argument and I'm gonna make a color the color blue and what it does is it takes where of that third argument is and passes it into the callback function so I can make that a variable called like Co L for color and do this so they said let me make this at two seconds just so it happens a little bit more quickly I'm gonna refresh this and I'm now gonna say play and a two seconds you should see a blue background and now I can add another cue with that same callback and four seconds with this color and I can add another cue with white at six seconds and if I run this again oops we've got blue turquoise sir light blue wait jump back to the beginning blue turquoise so anyway if you knew about certain like flourishes and the music where you want to burst the particles to come on the scene or you want to change the way if you're creating music visualizer we're at this point of time the music you want to completely change what it's doing this add cue function will allow you do a lot more than just change the background certainly and in addition to that the cues could be dynamic based on you reading the sound file I mean later I might actually look at beat detection so you could have something happen like with the beat but if you pre knew the sort of tempo and knew the moments of time of the beat in advance you could create all sorts of interesting things to happen in fact you could listen to a song and kind of play along with it on the keyboard and save time codes and then load that is like a JSON data file and have all those time codes trigger certain things to happen with a certain piece of planet there's lots of possibilities of here what you could do with sort of cueing and jumping along with a piece of music so I hope you enjoyed that and learned a little bit about time in a sound file and I'm not sure what I'm doing in the next video but there's gonna be a whole lot more stuff about sound in p5.js to come thanks for watching