good evening it's very late I'm very sleepy I know that I have some viewers from all around the world and I wonder maybe I have some new viewers places like Australia might be like the middle of the day now I've got this music playing hello I'm back this is a surprise extra live stream I did not use my train whistle even once this morning because I feel like I was overusing it but I need it I need to wake up that did not help I'm back so I don't know if anybody tuned in this morning I had kind of a bit of a disaster in a good way as I mentioned fit successes failure going going from one failure to another with great enthusiasm as maybe Winston Churchill said probably way more eloquently and I couldn't even remember who's is not good I'm very tired and all I have is water Kotick train brought to you by h2o it's hydrogen it's oxygen its water my it's great that I make so much money from this water sponsorship that I got just terrific ok now so I'm here to try to I have no idea what Opie and nerf means in the chat there Melvyn 2001 that's supposed to be some lingo that I'm not familiar with hello to everybody in the chat we are going to code coffee would be good you know I can't first of all I really should never be allowed to drink coffee ever as as many of you were probably quite aware I do drink coffee from time to time usually I try to have some light herbal tea while enjoying my live streams now today I had some this morning you know I'm I could go downstairs to the fourth floor I'm on the ninth floor this building oh I got this all I got left this has got to keep me hydrated for this Kotick challenge with a green wall fluorescent lights it's 75 degrees I cannot figure out how to get that thermostat to work however it will not earlier some of you might have seen earlier today somebody came in knocked on the door and said I was making way too much noise the fact that this building is pretty empty right now I feel somewhat confident that that won't happen but it still could happen all on point over whatever okay so what am I here to do I am here to do one coding challenge and one coding challenge only I probably spent a good hour and a half on this this morning and I actually had everything correct but there I was trying to sort out some web Mercator stuff with this API called map box and it just was not working and I had some very helpful messages from people on the Internet I should I should figure out how to thank them oh I got a alright let's see here I'm gonna have to just log into my Twitter account I think because I'm not prepared for this actually you know what I'm gonna I'm gonna come over here I mean I have them I'm logged in on this other computer and I'm gonna go to my notifications notifications you could tweet me I'm gonna get it right here it's 2017 I'm I'm with it I know what I'm doing on the Internet I'm a like youtuber this is me 43 on a Friday evening broadcasting web Mercator math projections my family is very very kind to not complain that I was like I couldn't it didn't work I'm not I'm gonna be home after dinner but I'm making home by kids bedtime but I've got to make this a web Mercator thing happens so thank you to my wonderful family for um not disowning me for being here but and thank you for you watching when it Freddie what are you doing here that's what I want to know really I mean okay anyway um so let's see here what was I looking for alright I was gonna thank some people so let me go to mentions mentions apparently is when somebody mentions me on the social media it's very exciting it makes it gives me like a little chemical reaction goes off in my brain okay Jasper Abril zat Jasper breo's on twitter twitter Jasper brillz sent me many helpful messages you can see you can see them all here and we had a little bit of an exchange which ended with me saying I came to a similar conclusion as your comment I decided I'm just going to redo this rhetorical and live at the size of 1024 so I'm getting way off topic here because I really should just start the tutorial but map box depending on the resolution of the map that you request and the way that the Italian algorithm works it seems that certain things can go a little wonky past past with certain resolutions and aspect ratios so Thank You Jasper Brielle's where who else do I need to thank ah I have no idea how to say this I had a lot of really helpful messages from let's see if I can twitter.com slash and you might progressives the screen so small over here here we go hy o ji x IP itu g yo g i didn't get it right hyo JJ no i JJ JJ there we go thank you now I'm gonna go to tweets and replies we can see here a lot of very helpful links this one in particular and also being puzzled uhhuh first of all GOG writes don't be mad ' parenthesis parenthesis what kind of expression is that oh and the camera went off I've got to press that button I'm like Jack in or John Locke every 30 minutes I gotta type in the code to get that camera going okay please don't be mad it's like a winky that's the emoji but at first I would never be mad anybody who's tweeting me about code and ideas and removing something do it well I did I cheated I did it the wrong way I faked it I didn't use the right algorithm it's all fun and games and enjoyable and nice and lovely we're sharing and caring and enjoying ourselves and typing code so that's I just II moved what does he move me and I think that prime means removed remove the zoom so you can read through this thread there's a lot of healthy information the documentation is handled differently in the zoom is handled differently so object so I never really got pinpointing an exact solution to the correct way to use map box for web Mercator projection if you're drawing on top of it in all cases of resolutions and shapes and sizes but you know what I realized the point of the tutorial that I was attempting to make was really not I mean map box there's a great wonderful JavaScript framework so I encourage you to use it and explore it well the point of what I was trying to show you is hey you can make projects that involve a map that involved data that involve your own creativity drawing a design and here's one way of putting those things together so I'm gonna do the challenge again and I'm going to just sort of limit myself to a simpler set of resolutions so that the the visualization comes out correctly and I will then act towards the end reference other kinds of projections or approaches that you might consider and things that you might look into in terms of map so that's my plan I'm gonna look at the yes so I will in the discus is our this live stream will be archived and yes I will link to I will link to those Twitter accounts in the channel but now somebody the chat is saying go to Luca go to Luca I will go see you later I am off to Luca I'm back from Luca I think Luca is something on Twitter really note of water I'm gonna get very dehydrated you know how hydrated mmm okay we're doing well we're fine we're fine okay who's Luca do I have so maybe I have more notifications I'm gonna look over here I I gotta get off my Twitter it's not it's no it's no fun to watch someone livestream shout out please look at this this is great I will definitely give you a shout out on Twitter Lucca mentioned me Schiffman Lucca and Harpreet dura roar watching I should just go to my own mentions I don't know how to do this I should log into my you if you want to shout out tweet the coding train because that's the account that I'm logged into here I got some already notification so Luca and well there's some nice French going on I'm gonna try to read this and translate it okay this is gonna be fun Saku major I say collegiate a boob weed ball nuit I think this means it's cool but I have corrected the bugs enough bugs for today goodnight did I get that right this is Mike there's only other language that I speak besides English unfortunately Paul Sookie song called de boo boo Dajjal de boo laughter boo look the coding tram lap Hassan leaved on Kalka and stone I assume QQ means Kalka maybe I can't I can't I can't translate this one oh I'm gonna have to use the translate for French again streaming already stream briefly streamed I don't know I don't know okay anyway back yes there we go so now I'm sure we'd have a lot of people tweeting me their shoutouts here Thank You Leo and Lou why I'm waiting for Luca and harp eat or Preet anyway okay I gotta do the coding challenge I gotta what time is it 742 no Portuguese sorry I should learn I would love to learn more languages a little bit of Greek I can do a little bit of Greek tiniest tiniest bit Yasu everybody from Greece nobody's watching this from Greece right now it's the middle of the night but if you RF got east oh I appreciate it very much Kanye is I say that right trying to say how are you anyway okay okay I'm gonna move off of this and I am now going to so getting both sets getting very warm in here about the leaf Mathias is watching from Greece that's amazing okay or at least fussy Lisa's someone from Greece watching okay so I got to get myself going here I'm gonna put on a little music this is the kitten song by lost oh wait oh oh but kitten song yes kids thank you very much rainbows and cupcakes notice that look what I get is the music very loud by the way like open by after that I'm doing the ridiculous see what is why my letter have caught but you know what's good about this I have this like Fitbit thing did you poop like dancing stuff I'm gonna get to 10,000 steps no problem today somebody tell me if this is a song or not delete delete I'm so in love with you delete delete I'm so in love with you delete delete cuz I say that in my head when I delete stuff but I don't know if it's something that came from my own head or if it's something that came from somewhere else does anybody know I have no idea I assume there will be infinite remixes of that song on the internet soon I'm not that popular unfortunately okay so let's see here I am going to put in function setup and I'm gonna put in function draw I am going to get some webpages open code is there I'm looking I got to move this up a little bit hopefully the oh I'm not I lost the slack chat here I wasn't onto Twitter oh my god way to so live chat is off topic music is a bit loud okay you know what I turned it down my monitors it's very quiet for me and apparently it's very loud okay alright Hillary made the delete song who made the oh never mind Oh Denise Denise oh that's a song Denise Denise I'm so in love with you and I just changed it in my head to delete delete ah okay I don't want to play it right now because I'm afraid less talk more code you come to the wrong place my friend I'm very sorry I don't want to I don't want to play it because I don't know weird that copyright or whatever so okay um here we go let's talk more code not really something I'm very good at to be perfectly honest with you oops let's see ctrl ctrl C and then close new terminal window CD desktop earthquake biz part 2 and server there we go and code and I don't I'm gonna I'm gonna do I dare I'm gonna be bold and take this out of here because I don't think I need it and this is good what do I have here yep okay and now I'm gonna go hit refresh whoops open up the console hit refresh I see nothing that's a good sign I've got a good font size here and so map projection spreadsheet format web Mercator map box API documentation okay so one thing I need to get is to the right place how did I do this before what I want to do is get to static map documentation okay this is where I want to be and then I'm gonna need to copy this and I need my access token also access token I'll be ready to do this challenge in one second create a new access token access tokens page create now I want to refresh this yes okay what's my password what's the chip that I remember what random pastor I typed in earlier today all right okay great we got a new token okay here we go so we are ready to do the coding challenge so I am going to welcome it's Friday evening and you are watching a person on the internet make a data visualization good luck to you I have a person on the Internet so I'm going to do a coding challenge where I take data from the usgs which stands for United States geographical service was it stands for by science is a wonderful thing isn't it US Geological Survey boy I got that Thole wrong and they provide a lot of data feeds about a lot of things but in particular earthquake data and I'm doing this to just show a sample project that you get a data feed with latitude and longitude width of an earth which is a sphere of an Earth of the Earth which is a sphere mapping that to two dimensions drawing your own stuff and also putting a world map behind it if you're so interested and I'm gonna I probably should just pre look at our image of a world map preloaded and not go through the rigmarole of map box but I'm determined so it's gonna happen okay I'm out of water I can probably go refill it I probably should I'm going to okay all right I am totally ek 89 asks is he redoing I am totally redoing it I am starting over from nothing okay here we go the earth is false says the architects 21 okay here we go let me press the button on the camera and so what I'm gonna do is I'm gonna do an introduction afterwards so I sort of explain the tutorial and so the first thing you know what I almost want to do is now let me do the map first okay I don't know what to put this on to start with but let's put this on here okay okay here we go all right I'm doing this coding challenge now so what I'm gonna do in this coding challenge is I'm going to grab a map of the world a figuratively grab I guess is figuratively that's underway let me start over hello welcome to this coding challenge I'm doing it I'm doing this coding challenge that sounded very forced it's fake oh boy I had to limit my son limiting myself to the amount of times I can stop or redo I'm already hung here we go hello welcome I'm doing this coding challenge I have to tell you something I did it before earlier didn't work out well but I think this is gonna go I'm starting fresh and I'm feeling confident and excited about it here we go so what am I gonna do in this coding challenge I'm gonna look at a lot of things number one is I'm gonna look at how you can get an image of a world map or are zoomed in map or zoomed out map of this world the planet Earth that we live in on something like that and display that in a Java Script canvas so look at that I'm gonna look at how you can read latitude and longitude values and translate those latitude longitude values to XY locations in that canvas and I'm and as a way of doing this I'm going to I just realize I'm like totally doing the introduction then I plan to do afterwards so I scratch off that use leaflet maybe that's what I should be doing ah great suggestion okay okay Luca I'm such a mess sucker I'm a sucker Luca I got to go to my mentions I hope this is I'm not gonna regret this I don't see I don't see a Luca there we go Luca there's Luca thank you there's your little shadow okay okay now here we go I'm sorry I was doing the introduction and I really just want to get into the coding challenge and I'm gonna mention all the pieces when I record the introduction later all right so let's start with this okay I'm starting this coding challenge now here we go so the first thing I'm gonna do there's a lot of pieces to this but the first thing I want to do is just see the map of the world on the screen on the canvas I wanna draw it and you know there's a lot of different ways you could do this you could find some JPEG to draw your own map you could scan them HAP so the question you have to answer for yourself by the way though one thing you have to remember is right the earth is a sphere so and I'm gonna do this visualization in a 2d space a flat twodimensional space so when you take the information that's wrapped around the sphere and peel it off into a two dimensional space you have to you apply some math and what that is typically referred to as a projection so map projections this is the Wikipedia page there are a lot of different map projections that have been used historically throughout the ages this is a people depiction of the I've no idea no see that's a cue many from 1482 there's one of a projection down here that looks a lot like what you would get I'm trying to find it here if you were to this is like a cylindrical projection that's kind of nice there's what I'm thinking of that looks kind of like if you were to unpeel an orange I can't find it hold on timeout we're gonna edit sorry Jonathan quorum who is works for the New York Times I feel like he once tweeted out something boy this is really gonna let's see designer Jonathan coram did something really great about map projections I'm never gonna be able to find it but you should look at all this wonderful material here on the Internet okay I never mind I'm just gonna use the Wikipedia page this is where I'm thinking next time I got to I got to this is what I'm looking for yeah this is what I was looking for so hold on I'm gonna I'm gonna come back to this okay okay there are a lot of different map projections this is one from 1482 this is not something related just to coding and computer graphics the idea of how do you represents fear achill information spherical imagery on a twodimensional service a surface there there are lots of route history I'm gonna scroll all the way down here there's one that's kind of I think a nice kit find it now illustration of what I'm talking about you could imagine if you had an orange and you peeled the orange and you flattened out the peel what would it look like it might look like this one over here Mercator Mercator projection is one of the kind of standard ones and you know this I this looks kind of like a little bit oh this is like the Mercator projection now you can see though that what happens is things that are close to the top or close to the bottom when you sort of stretch out the poles of the earth become really really large so Greenland over here is incredibly massive as compared to say Africa which is kind of close to the which is there right with the equator which is not at all accurate so I think there are a lot of comp questions about the sort of you know Western view essentially of a lot of these map projections and I think that's a really interesting topic today I'm getting way off track here but it's important to mention and really think about how you're presenting information and what you're highlighting and what's you know what's up versus down what's center versus and so there's a lot of design considerations there that I think are very important to mention but what I'm gonna use is something of a standard these days called web Mercator and web Mercator is used from what I understand by most of the online mapping tutorials are fine like Google Maps Open Street Map MapQuest does that even exist probably does don't obey all of you who love MapQuest out there I apologize I'm sorry it's a wonderful I'm gonna MapQuest that do you say that does anybody said anyway so this is going on way too long okay so what I got to do what I'm gonna do is I'm gonna grab a map image from map box and then I need to understand what projection it's using so that I can apply the math to convert my latitude longitude to an XY location in that pixel canvas okay so the map map box you could you can find out information at matte box comm you'll have to sign up for an account and get an API key and all that sort of stuff I'll include links in this video's description to where you can do that and I'm gonna use something called a static map so mat box has a lot of features that you can embed a map that's zoomable and you could put those little pins in it and do all sorts of stuff with it I just want to use it to get an image so the way that I can get an image for example is through a call an HTTP request to a particular URL so I'm gonna grab this URL and what I'm gonna do is I'm gonna go to my code and I'm gonna say I'm going to add a function preload and I'm going to say I'm gonna have a variable called map image and I'm gonna say map image equals load image and notice here that there's this piece of the code that says your access token so this won't work right now if I were to run it I need to get my API token which I'm gonna do right over here I already am on the page and it's right here I'm going to click copy so if you just go to this particular URL that's where you can your own access token if you can painstakingly copy behind if you want I'll probably regenerate it later and then it won't work but okay so I put that in and then what I want to do is I'm going to say create canvas now you'll notice there are a bunch of arguments in here this is in this path this is the latitude longitude of the centre that's the zoom level and then somewhere in here at 600 by 600 that's the pixel resolution that I'm getting so I'm going to now go and say create canvas 600 600 and then I'm just going to say image map image at 0 0 so if all goes according to plan when I go and run this code in the browser we see there it is whoa what kind of crazy angled that thing did I get oh my goodness so I wanted a flat map I might have to adjust the API call that I just made interesting to see that it does that what I wanted is oh I'm in the class I'm no Oh dark I think dark Veet so there's a lot of things like dark v 9 here isn't it so why is it angled oh you know what it is it's because there's a lot of arguments here there's latitude longitude we can look at the documentation zoom level and then this is like an angle I think so if I change this to 0 there we go I flattened it so I don't know what the default is is this somewhere I'm guessing like in like San Francisco or something could possibly be but what I want to do now is I want to see a world map so I'm gonna change the latitude and longitude I'm just going to change it to zero zero which is going to be at latitude right there and then it's not really the center of the world is it's a sphere like what's the center huh but or latitude longitude Center I'm gonna change the zoom level to like 4 and then I'm gonna hit refresh and we see ooh let me zoom out some more I'm actually to change the zoom level to 1 and we can see there we go so I've got the world map now I want to see a wider picture of the world map so I'm gonna change let's change this to 1024 by 512 I think the behave nicely for us up but if I do that I want to change create canvas to 1024 512 so let's refresh that whoops oh it's just super big now whoops nope sorry I got a zoom out here a little bit so there you go so now you can see I've got the world map with this dark theme and there it is in my p5.js canvas we're getting somewhere now if I were to do more of this and I would suggest if you're watching and you actually pull this code I would probably do something where I make sets of variables for width and height and zoom level and all that sort of thing but I'm just gonna leave this stuff kind of constant for right now I am going to though I am yeah so I'm gonna leave that stuff constant for right now so now that I have that what I need to do is figure out let's say I have a latitude longitude so let's say I have a latitude longitude that is the latitude of zero longitude is zero now it might be worth me refreshing your memory if latitude and longitude are familiar concepts to you but you've sort of forgotten what exactly they are and how they work so we're gonna need a little edit point here because this camera is off oh I forgot to turn these other lights on no no they're on nevermind have a little edit point here and while I'm taking a pause for an edit point I am going to press this button here just to keep everything rolling okay so peeled Orange projection yes okay so okay live slack chat please stay on topic it actually doesn't really matter but I like to look at it to see if there's if you have like other general programming stuff you're talking about actually no don't worry about it stay go off topic ignore me I'm annoying I've got all these rules all of a sudden okay here we go so let's say I were to try to draw as best as I could spear and I can kind of represent it with these lines and by the way what are these lines these lines are longitude so longitude are the lines I can think of them as like long because they go long up and down but there are the vertical lines and they're real going to map to our X location because we're gonna take this and kind of unfurl it so to speak on two into a flat rectangle so we want those longitude lines to end up like this so these are these the X values are longitude and then the Y values are latitude and you know this being perhaps like zero zero the Y values then being a latitude okay now there's another sort of key aspect of this what is the range of these values so they are described as angles essentially if you think of the angles of rotation in a way around the center of the earth and so if there's a full rotation of 360 degrees we can kind of go all the way this way to 180 degrees and then go all the way this way to negative hundred eighty degrees the thing is I'm gonna need to use radians as a measurement in my code and so that's the thing we're gonna have to sort of think about this is PI and this is negative PI and I have other videos that kind of go over the basics of radians and units of measurement that you could maybe watch and try to find if that's a new top concept for you now latitude on the other hand gone all the way around is just going halfway up and halfway down in a way so the range is between 90 and negative 90 and I probably got that wrong I think 90 is north and negative 90 is that by the way if you look up the lat lunch your latitude if you if you google like latitude longitude latitude of New York City you'll find the number will be something like 74 degrees west so 74 degrees this is actually 180 degrees west this is 180 degrees east this is 90 degrees north this is 90 degrees south so the negative numbers are what we need to use in the math but you'll often see them listed as north south west east which is something you might need to convert depending on what how your data is formatted okay so hopefully that clarifies that a little bit so I'm actually going to whoops I'm going to come back over here and I'm gonna do a couple things I'm gonna do I'm not absolutely called center latitude center longitude and then I'm just gonna have a variable called latitude a variable longitude I would like to pick a city somewhere in the world that's not the United States that maybe I know approximately where it is even though I've got the sort of bad American sense of geography so let's look for a city where where there a lot of trains oh it's not trains in Europe and in Asia and there's ever where there's trains that's a bad bad but let me let me look for let's look for Shanghai latitude/longitude so you're seeing here we've got thirty one point two three zero for North 124 seven three East so let's take this into our code and let's put that here I'm going to just comment it put this in comments here so the latitude is the north number and the longitude is the East number and it's not negative if it were West it would be negative and what I want to do now is draw is draw the location and convert it to its X&Y so what I need to do here and I don't need the draw function I need to figure out how do I convert those things ah guess what we're gonna just look up the formula it's gonna look kind of terrifying but I think I'm gonna write it for you in code and it will hopefully be uh simple so here we are in web Mercator and web Mercator is based on what the what we need to do is to calculate this X&Y we need to apply this formula so the reason why this number is 128 is web the standard of web Mercator is that it's it's giving you the XY for a Square where the top left is 0 0 and the bottom right is 256 256 so the centre is 128 128 I think actually nap box does tiles that are 512 so I think I actually need to change that number to 256 so that really depends on the kind of again the system you're using the zoom level is this value of how far zoomed in or zoomed out this lambda here is longitude and the letter of the Greek letter fee is a latitude so if I write this code and I'm just going to kind of do this a little bit I'm gonna write a function called I'm gonna write a separate function for X&Y I could wrap this into one function I'm gonna write a function called web Merc I'm just gonna call it Merc Merc X and it takes Merc X takes in a longitude value and now what I like to do sometimes with formulas like this is I'd like to break them into parts rather unnecessary but I think it'll make us less likely to make a mistake so I'm going to just do the first part I'm going to call it a and that is 128 divided by PI times 2 to the zoom level right so 180 divided by PI times 2 to the zoom level so what is the zoom level is right now is something that I've defined here as 1 so this is something that I could make into a variable I really should make it into a variable and I'm gonna say zoom equals 1 so again I should put that in here but I'm gonna leave that out right now ok so so now the zoom is taken care of great you know what I could do actually is well never I could give this Merc X an argument longitude and zoom level but I'll just use it as a global variable okay that's VAR a now I'm going to say var be the second part if I go back to the formula is just the longitude plus pi okay so longitude plus PI but guess what one thing I need to make sure I'm gonna have an issue although we'll get to it later whether its degrees or radians is important the formula is assuming longitudes going to come in in Radian so I have to make sure I remember that now I can just say return a times B right because it's this 128 divided by PI times 2 to the zoom level times the longitude plus PI ok great now let's write 1 for y Merc Y latitude and we can see here that the parts a little bit more complex one the part a is exactly the same let's make Part B just this tangent part of the equation so I'm gonna say Part B is a tangent of PI / 4 + fee which is the latitude divided by 2 latitude / okay that's B and C is law PI minus log of B so PI minus log of B now you might notice right here that this says Ln Ln means natural log so logs have a you know log what a logarithm is that Meritor of a separate video but if you see LM natural log base E which is a special wonderful number but in in most programming frameworks if you have the log function it's doing by default a natural log and you can obviously adjust that to a different base but so this this this map to it perfectly here log of B ok so now I need to say a times a times C right a times C because B is just for the purpose of this so a times C this is now giving me the Y location okay I think we're doing well here now what we could do is say um so one thing I'm gonna do which is kind of unnecessary but it helps a lot of people I know I'm gonna get messages about how I don't need to do this but this helps me think about it I actually would like to work from the center so I'm gonna translate with / height / if I do that whoops that moves the origin point from the top left to the center and I'm gonna go to my code I'm gonna refresh it and you're gonna see now the image is the origin is in the center so I'm going to change image mode to center so that now the image is drawn from the center so now I'm back the reason why I'm doing that it's a little bit weird but what I want to do is I want to draw everything the value that I'm gonna get from this math is relative to a center point so it's going to be a little easier for me to kind of figure that out this way so what I want to do first is I want to say var Center x equals Merc X of launch of longitude center longitude and center y equals Merc Y of of center latitude then I want to say x equals Merc X Merc X of that of the longitude this is the Beijing I mean sorry Shanghai longitude and then the Shanghai latitude and then what I want to do is where I'm going to position them on the screen is the difference between those two points so if CX CY is the center wherever that is relative to the center of the window is its location that center location so now I should be able to say let's make a nice little circle with some alpha and let's draw an ellipse at that X&Y twenty by twenty pixels let's not be afraid let's hit refresh okay okay so it's not there what's the problem I forgot about my units of measurement so this is definitely a problem here which is that these measurements are in degrees and the fact is the calculations are assuming radians so what I need to do is convert these things into Radian so I'm just gonna add a line of code here that says longitude equals radians longitude and I'm gonna say latitude equals radians latitude and and the reason why I'm gonna do this is I know that when I go get that earthquake data I'm gonna get values and degrees because I've looked at that data before okay so now I'm gonna hit refresh it's there but it's not in the right spot the reason it's not in the right spot is remember I said map batbox actually uses tiles 512 by 512 and so I'm gonna change these to 256 256 and I'm gonna hit refresh and there we go that looks right to me somebody tell me that's not where Shanghai is let's go to the other side and let's look at Vancouver Vancouver latitude and longitude and let's try that out I'm gonna grab this here and put this into my code and so now I need a latitude of forty nine point two eight to seven and they need a longitude not of one twenty three point one two oh seven positive because it's west I need to add the negative number there okay and here we go let's go back to our code hit refresh there somebody tell me that's not where Vancouver is I'm pretty sure I pinpointed it now that circle is kind of large really shouldn't I shouldn't do anything that might cause me to discover a mistake but I'm just gonna make that circle a little bit smaller hit refresh and I think that looks right deadon where Vancouver is right somebody from Canada tell me if I've got that wrong okay so we're doing well here so now I've actually done almost everything because what I have now is a framework for re for taking the latitude/longitude and converting it to an XY that I can draw so let's go get some data that has lots of latitude and longitude in it so the data that I'm going to use is from the US Geological Survey here is the page USGS science for a changing world let me tell you something science very important wonderful thing I'm all about the science I wish I knew more about science and what they have what USGS website has in addition to lots of things I'm on a page which I'll link to in this video's description is it'll give me a data feeds of earthquakes so I could get just significant earthquakes in the past hour I think just to get some data but not too much data let's get all earthquakes in the past day so I'm gonna copy paste this link address and I'm gonna go to my code and in preload I'm gonna say earthquakes I'm gonna make a variable called earthquakes and in the preload function let me move this whole I need more space to look at this code I'm gonna go here and I'm gonna say earthquakes equals load strings there and I'm now notice what it's actually loading is a CSV file so that file is actually a comma separated value file it's essentially a spreadsheet and I can look at it this is a different one but if I go to the I downloaded one already which is right here this is actually everything from the last month and you can see here it's a it's a grits it's a table it's a table which dark with time latitude longitude here's the time here's the latitude here's the longitude and here is then there's some other things magnitude is something that I definitely want to look at because we can use magnitude to decide how large to maybe draw something and what color to draw something but I'm going to leave most of those kind of interesting design decisions to you to do something more creative with or maybe you're gonna do map different kind of data but what I really want to focus on is just first getting those latitude and longitude so the way I can do this now is so there is a function in p5 called load table this is such a simple bit of data that actually think using load strings a little bit blur I'm gonna redo this challenge making a 3ds version of it in processing and use load table there just to show the difference that'll come sometime eventually so now what I'm gonna do here in setup is once I have the data I'm going to say for VAR I equals 0 I is less than earth quakes dot length so load strings will give you an array of strings each string being a line in that data file so all I need to do with each one of those is use call a function called split so I'm gonna save our data equals earth quakes index I dot split then I'm gonna write something kind of weird here so what I want to do is say what is the delimiter that I want to split everything up by well I want to split everything up by a comma but why didn't I just put a comma in quotes because normally in JavaScript you'd put a yellow string in quotes I use these forward slashes this is something known as a regular expression which is a sophisticated way to match a particular pattern of text and I'll link in this video's description to a whole set of tutorials on regular expressions but here we get simply the only pattern I want to match is a single comma so that's going to be easy so now if I do that I'm just gonna say console dot log data and let's take a look at what we get in the console I'm gonna kind of move this over here we can see I'm getting a whole bunch of a arrays so I get an array and I can see here the first element is the timestamp the second element is the I believe it's latitude first then longitude yeah it has to because that's negative 166 some other data about the earthquake the 2.2 is the magnitude on the Richter scale and the chap you'll pointing out split with the comma with with quotes as a string does work also but in case you end up wanting to do more elaborate splitting it's kind of useful to have the option of a regular expression okay so I am going to now I am going to what am I doing here so what do I want to do the latitude is the first is not the first it's if I go back to this it's this is element 0 element 1 element 2 so latitude is index 1 of that array latitude is data index 1 longitude is data index 2 and then guess what all I need to do is take this this exact same code once I get that latitude longitude convert it to X&Y draw a little circle and now we will see and I'm gonna take out this console.log don't think I need that and move over here and I'm hit refresh and there we go these are all the earthquakes that have happened in the last what was it's the last hour I think did I do let's go get the last now that we see this is working let's go grab let's go wrap all earthquakes from the past 30 days that's going to be a lot is that too ambitious of me so I'm going to I'm going to just paste this here and I'm gonna do this and I'm gonna comment out this line of code so I can now which is awkward to do here I'm gonna paste this end up saying I must have gotten rid of a quote or something yep got rid of the end there okay so so many ways I could make this code a little bit nicer but that should do now I'm gonna refresh there we go it's gonna take a little while there's a lot of data actually didn't take that long look at that now you can see all the earthquakes from the last month and you know things that I could do to this I could first of all I could think about zooming in on a certain part by changing the zoom level and the width and the height of the map and that sort of thing you want to be careful you know again the way that the way that Matt box works if you start playing around with the zoom I would if you want I would I would not make the width or height greater than 1024 and it actually seems to work really nicely if you keep that as a multiple of like 256 or but I don't think that should be required but you know play around with it I could you could change but also you could just think about animating it you could and one thing that I would like to do that I think is worth doing is just drawing these with the size based on magnitude so let's figure out let's look at how we would do that so right now where I'm drawing the size is just here 8 comma 8 so what is the actual size in the data it is latitude longitude depth magnitude so I'm just going to use the magnitude which is 1 2 3 index 4 so let's go back to the code and I'm going to say var M for magnitude or magnitude equals data index three and I'm gonna do something wildly not accurate but I'm just gonna get started with this just so we can see something I'm gonna say var diameter equals map the magnitude from a range from zero to ten to arrange from zero to two to sixty so I'm just gonna take that Richter scale magnitude and map it again lots of mathematical problems what I'm doing but just to get something on the screen that's got some difference I'm gonna put this D now into here and we can run this oh boy look at that we've got some what did I do wrong did I get the wrong oh I said three should be four I was using the wrong value okay so we can see we've got something but look at this there aren't really lots of earthquakes of such like large magnitudes happening all the time all over the place and the reason why this is there's a couple reasons why this is terribly inaccurate and we find my eraser two fundamental reasons number one is magnitude on the Richter scale for earthquakes is measured if I'm correct in a logarithmic scale meaning if I have a earthquake of magnitude five and I have a earthquake of magnitude six this earthquake is actually ten times as powerful as the earthquake of magnitude five tell me if I got that wrong I can come back and correct it so that's one thing so I need to think about drawing the other thing that's really quite important is here is when I take a circle and I give it a diet in it let's say it has a diameter of four which means it has a radius of two and then I have another circle that has a diameter twice the size of eight which means a radius of four the thing that I'm seeing visually is the area of it and the area is PI R squared so the area of this is four pi and the area of this is 16 PI so I'm actually drawing this is something that is four times as large as this but the radius is only twice so I need to account for that in visualizing stuff using circles that's kind of an important you know if I were just doing population for example I wouldn't Dramat population directly to diameter I would map it to the square odhh map it to the square root the square root of population to diameter something like that we're gonna get that right as we come over here okay so yeah great suggestion in the chat by the way from alka is an exercise that somebody could do is could think about like animating doing a time lapse so since I have since you have 30 days worth of this or actually having this update every five minutes with recent earthquakes and showing them in real time so lots of possibilities the things you could do here okay so let's go back and try to make this a bit more accurate number one is let's take the magnitude so let's try to think about this I need to unlock it wait hold on I just need to take a pause for a second I didn't switch the camera thank goodness cuz I need a pause anyway I forgot to switch the camera okay no worries everybody what did I I'm gonna have to I'm gonna have to pretend that I get that great suggestion again from Alka I want to think about before I do this yeah yeah before I do this let me think about how I need to do this actually for a second because I'm it's it's open guys 830 at night oh my god I'm seeing really good mole was done which is thanks good thankfully what I need to do is take the magnitude and it should be I should set it to the power of 10 which is such it makes it such a huge number right so if I want to get if like right I would say magnitude equals power magnitude to the tenth power so it's it's that much it's 10 times larger and then I would also then take a square root of it if I'm going and then this would become 0 and this would be like the square root of 10 times 10 and then do that between 0 and 60 is that right that doesn't seem right ohho I didn't say I didn't say 10th no no sorry square root of power 10 to the 10 of course cuz that's sort of like the maximum okay now I don't see anything because there's no probably no so let me let's pretend what's the Matt let's in that data I probably have just like I probably have like a maximum of like a you know of oh woops this makes no that I didn't do this correctly let me do this again power 10 to the 10 wait wait wait square root of power 10 to the 10 let's see if that's right no but yeah I did yeah okay so oh yeah so this looks right so this was a recent really big earthquake right didn't someone I saw in the news that there was a recent large earthquake over there so we can see that this is more accurate so one thing I can do I think I'm doing this correctly but okay so I'll fiddle with this anybody in the chat want to tell me that I did this wrong before I go so I'm gonna come back and we undo all this we make sure there are no emergency text messages on my phone I see none I see that Suraj uploaded a some sort of deep learning video you should all just go watch that right now let me go back to here so where where am i coming back into this tutorial I think this is where I left it right I left it here then I was over here then I came Alka I think I want to refer to that suggestion when I get to the end of the video so I hopefully I and talk about ideas that people could have and it's a great suggestion when I want to give so I will try to remember to do that so I'm gonna fake the walking back pressing a button and continuing the tutorial okay so if we come back over here now I can start to implement some of this math into the actual code itself so looking at the code the magnitude what I want to do with the magnitude really if if the matter five and the the Richter magnitude of six is ten times that what I can say is magnitude equals itself to the tenth power so this is kind of uh none reverse inverse logarithm logarithm yet inverse logarithm I'm going to actually set it to the power of ten now the other thing I want to do is pick the square root of it because ultimately I'm going to map that to the diameter of a particular ellipse so I also want to say magnitude equals the square root of itself so now this mapping instead of going from zero to ten meaning the met the sort of maximum on the Richter scale of ten I don't know if that's an actual maximum I should look up the Richter scale but what I want to do is get a new maximum so I'm going to say var mag max equals power the square root of ten to the tenth power so if ten is my maximum magnitude then I want to make that the maximum and then so the mapping now goes from here to here and let's take a look at that and we can see now almost everything has disappeared because most of the earthquakes but there was I believe recently I saw in the news a very large earthquake I don't know I should look this up where this was but I'm pretty sure I've got things accurate here we could we could look into the data and see what this is I could also try to make this a bit more everything a bit more visible one thing is I could say give me a stroke of color to put around the circles and I could also you know make this 180 for example to really sort of like emphasize so now we can see you can see lots and lots of tiny earthquakes up along here lots and lots of tiny earthquakes here and really some larger ones over and around here so I think we've done it this is now mapping earthquakes I did it wrong I totally did it wrong stop everything it's not thank you this is not correct it should actually reverse the logarithm it has to be 10 to the magnitudes power right I'm sorry about that y'all everybody screaming about having me watching this video I wonder if I should just go all the way back and redo this because watch it get him but maybe it's fine to have this wrong I just come back so in other words 10 to the 4 is 10 times 10 times 10 times 10 10 to the 5 is is 10 to the 4 times 10 so this is really how it works so I actually had it quite wrong there so let's take a look at that and that should you know it's really the same idea but it's gonna you know make it a bit more right this would actually was fine because both of these were 10 so I think the earthquakes are gonna get quite a bit smaller actually the small ones and you can see there we go so I got the similar effect apologies for that mathematical error and now I think you know those of you endure you can enjoy see the process about how I constantly make mistakes but I think I have it right here now and I could change the mapping I could change the color alka in the chat made a great suggestion of if you want an exercise here see if you can create a timelapse version of this so I actually use the timestamps and have a see the earthquakes all pop up over time over 30 days but how that all happened in 30 seconds you could also write it so that your refresh the the data query so if you look here on the webpage here on the on the webpage here know them on the wrong web page if you look here on what am I looking for uh the USGS website you can see that you can get every five minutes earthquakes updated from the past hour so this would be interesting to think about how you might animate them and refresh the data every five minutes so I hope that you code here will be linked I hope that you make something with this I uh or even if you just use this to create some other type of mapping project please share it with me share in the comments or share it at shipment on Twitter thanks for watching and another coding challenge okay so now I need to throw away the first line of data all right good point so big deal it works anyway cuz it just ignores it but let me let me fix that just to make I'll fix it in the code so I remember later yeah that's a very good point okay so what I want to do now is let me see if I can get this do this what's the need of Oh 1024 let me just do this so I'm gonna leave this I'm gonna do an intro with it on the screen like this although now we're missing the I guess the aspect ratio is off so let me do this okay so I'm going to do an intro like this okay because the world does not revolve around the United States of America contrary to what some people probably think okay so is this a good opening image I think it will be okay so I need to get a tissue and I need to think about some ridiculous stick to do here now I'm a I'm a person on the internet on a Friday evening almost like 830 at night playing with toy trains Rosie reneus I think that's I think I'm gonna leave that out okay I've got to do a quick intro then I'm gonna say goodbye and do I dare try to put the sound in I'm gonna do it it's the sound was loud somebody said let me turn it down freight train oh it's not playing sorry okay oh hello welcome no no I'm not gonna do the stupid hello thing failure I should just do a regular coding job no I got to do my my ridiculous thing okay one more time see I really need my sound system where I can just like do this in a much hello this is a train welcome it's pulling into the station and it brought with us a map of the world and what this map of the world is showing you is little dots everywhere an earthquake has occurred in the last 30 days and the dots are actually sized according to the magnitude that earthquake and that's exactly what I'm gonna build in this particular coding challenge so a little while ago I built this from scratch and it involves a lot of pieces so the point of this coding challenge is really to learn about the idea of mapping data in a world like the earth that's a sphere in a twodimensional space so you need to learn about projections latitude longitude how to convert latitude longitude to pixel XY space and how to do that based on what you're how to get a data source in how to then draw it and so that's what I'm doing the pieces here is I'm getting this image of the world map from an API called matte box Jes but certainly you could you know you have your own image you drew an image you designing them as you got it from somewhere else as long as you know how that image was made you can you can do the same kind of project that I'm doing in this particular video I'm also getting earthquake data from the USGS the United States the US Geological Survey they have lots of wonderful scientific data that you can experiment with and then I'm using p5.js to draw the image of the world and then draw all these circles now one thing I want to mention is towards the end of this video I work on something to try to scale the size of the circles according to the magnitude of the earthquake and I have a little bit of math backwards for probably about five minutes of the video someone in the chat points it out and then I correct it so if you're watching and you realize like oh those five words there that's what happens with buddy and I'm pretty sure I have the math right but if I have it wrong boy do I know that I'm gonna hear about it in the comments so I look forward to hearing your feedback your suggestions I hope you make something with this you share it with me at Schiffman on twitter and that you enjoy this ride on the Kotick train see you soon okay alright how did i do today everybody I came back this was a livestream about one hour I did a coding challenge it made sense it worked I don't think I had too many horrible errors in it I feel redeemed I feel like it's time for a lullaby awkward silence Oh for a second I thought I forgot to hit record to disk I was like oh my god I didn't record this whole thing to disk and now this by the way is the only lullaby we might do when I googled lullaby public domain I got this from freemusicarchive.org so while this plays I am going to see if there's any comments in the chat 10 out of 10 all right thank you everybody for the nice view how many people are watching right now I can't see that in my I guess if I go over here I can see it 494 I guess Friday night is not as popular of a time who is the guy who always writes in caps lock I have no idea but I know somebody who writes a lot in caps lock right now and I find it incredibly irritating maybe you know who I'm talking about any tips for being so enthusiastic and upbeat no I should give you some tips that was a rude answer I don't know just don't worry about things so much that's a terrible answer too you know I don't know that I walk through life like this but I do try to bring some energy and enthusiasm to the channel because people seem to respond to it and enjoy it oh right so a lot of people just left when I finish it okay that's nice to hear okay there should be a little a poll say from France who by the way has a wonderful YouTube channel I believe with a lot of stuff in French thank you for staying up so late to watch this that's crazy I can't believe you did that I'm so impressed requested a little dance which is I think I think maybe that I just need to have a softer dance I don't like that the soundboard thing is there so this will be good watch this that's what really work cuz I get cut off it again you should also turn this off right now okay I've got to go and how many viewers did I lose yes I'm sure someone will turn that into a gif I look forward to seeing that and I'll play all these videos and oh by the way I'm very excited to announce that next week I will be premiering a video with special guest Emily Jie and she made a matrix rain simulation it's fantastic so it's gonna be about a 45 minute coding challenge which is going to come and walk from beginning to end to make matrix rain and P 5 so I'm really excited for that to come out okay so thank you everyone thank you for this wonderful evening little surprise extra a coding challenge I haven't had any dinner I've barely checked my email all day I've actually just mostly been in this room I'm just like fear also that I'm gonna leave and like those whole buildings gonna be shut down McDuck I feel to get outside or alarms you to go set off but because I but I've never been on this floor so late so thanks everybody for watching I'm gonna turn this off and I look forward to hearing from you and seeing you at this point next Friday 1030 a.m. that's my plane yeah I got to figure out there was a little bit of an issue with sound and me being too loud so I've got to check in with some people to make sure that Friday morning time slot isn't gonna be a big problem but I will send out a tweet or something to my email list or whatever if I change the time for next week okay thanks everybody and see you soon bye bye