hello in this video I'm going to look at create capture in p5js and how the create capture function allows you to get a live image from your webcam so I want to talk briefly just about what the create capture function does technically behind the scenes um before I start typing into the code and seeing the results so let's come with me over here look I'm over here now hello so um as you know a P5 I don't know if you know this but if You' watched any other videos you do P5 has these functions setup and draw setup being the thing that runs at the beginning of a p5js sketch and the thing that you typically have in a P5 GS sketch is a function called create canvas this is not necessarily required which gets a width and a height and what does that function do it places a canvas in the browser window itself so the goal for this video by the end of this video is to say you know you're laptop which has a like a webcam at the top I want to see the image you know from that webcam I want to see that in the canvas so the way that you can connect to the default camera of your computer and anybody's computer happens to be loading your sketch in their browser is with the function create capture so the create capture function and then you pass it one argument video what the create capture function does is it creates a connection to like I think it's called in web language like user get media something like that but what what it does behind the scenes is it actually creates a separate Dom element Dom referring to document object model this being the document there being objects in the document the one thing we created is a canvas as you know in P5 you can also create things like a paragraph with create P you could create things like a slider with create slider you could create button with create button so you can make all these elements that live on the web page and create capture actually what it does is creates a video Dom element which contains the image from that camera so on the one hand this might be what you want you want to have a canvas and a video element separate from each other but in a sort of classic creative coding sense whatever whatever that means um you might just want to be doing some kind of Animation or abstract visual art thingamabob based on what's in that video so you don't actually want to see that Dom element you just want to paint it to the canvas and mess with it on the canvas so that's what I need to look at how to do with code um and and and and and we'll see in a second but I think it's important to point out that create capture is actually part of the P5 Dom library and actually creates a separate element on the page and so let's go look at that okay so here I am back over here and I've got a sketch I'm working just in Sublime Text today running a local server um and looking at the results in the Chrome browser if you don't know how to do that I made a separate video that I will link to that shows how to get that setup going but you can use any any web editor thing of your choice to do all of this so what I'm going to do is I'm going to say create capture and pass in the argument video so I'm adding that to my code I'm going to go over to the browser and I'm going to hit refresh and you can see now there it is the canvas is there and the capture is there now what is the resolution of this capture make it a little smaller you can see that this capture looks bigger than the canvas it's actually my made my canvas 320x 240 the capture the video is 640 x480 that only I guess happens to be whatever Default Resolution the browser the camera who knows making who's making that decision but that's what you're getting now if I wanted to change the size of this element it's a Dom element so I can use for example the P5 function size ah but how do I do that so what if I want to now manipulate what if I want to manipulate sorry I I lost my train of thought for a second what if I want to manipulate the the capture element itself I need to store a reference to it in a variable so what I'm going to do is add a variable to the top I'll call it video I will say video equals create capture I could have called it anything cam capture whatever and I can now also say video. size 320x 240 so now what I've done is I've created that connection it made that Dom element and I've sized it down and you can see here and you can see now I have on my web page I have the canvas and the video hooray so now we can start to do some more things I said what if I want to ultimately not see this separate image but actually paint into the canvas so I can do other stuff on top of it well one of the nice things about uh working in P5 is uh P5 has already set up the landscape of things for you so that this video Dom element can act just like any other image would act in P5 so for example in draw if I just say oh I didn't set up my settings correctly if I just say image my Sublime settings I'll do that later video I like to have two spaces for the indent you know it's very important to me my life feels very out of control if my indentation is working correctly the way that I like it I'll take a deep breath move on okay so if I say image video. z00 um um and I do that and now I hit refresh we can see there it is so I've got now I've got the actual video Dom element and I have the canvas where I'm drawing the video onto the canvas but you can see I can do things like now with the canvas I can add other functions like tint you know I could make it very uh let's see what happens if I get kind of pinkish we can see here oh you know what interesting ah so a little bug happened I'm going to fix this bug um and it's actually there's already a GitHub issue file so by the time you run this with your P5 in the future this won't happen to you I'm going to just fix it by um by enforcing the size here but what happened is uh when I added tint the pixels got manipulated and suddenly it went back to 640 x 480 even though shouldn't that shouldn't have happened so this video is going to have a historical error in it which will get fixed but I in my code I was able to fix it by just enforcing the size that I'm drawing the image so you can see that in the canvas I can do various things to manipulate the image itself and while I was altering the size I might as well see I could do something like ah let me make mouse X the width and now you can see I have this video that I can kind of like shrink and make myself kind of like skinny or wider or a little bit skinnier and you can see I'm not drawing the background so I'm getting these weird Trails so anything that you can do with images shapes I could add translate I could add rotate I could spin it I could shrink it I could flip it all of those types of things I can do with the video and if I it's nice to have this Dom element as a reference of what the original video looks like but if I didn't want to have that one thing I'll show you is I could add video. hiide so the hide function hides a particular Dom element and if I hit refresh you can now see that the only thing is the canvas and the video so that concludes what I originally set out as the goal which was to be able to capture video from the camera and draw it into the canvas however I must alert you to something that will trip you up I probably should have led with this and not finished with it notice how it didn't ask me for permission it didn't say like oh can I have access to your camera is that okay what you are doing if you took this sketch and uploaded it to your website potentially if somebody came to your website it could automatically turn on their camera you could take pictures of them and save that to your server so typically speaking what you're the user is going to see is like oh can I have access to the camera but some browsers in particular the Chrome browser will only actually let you do this if you are serving your website from what's known as https the S being secure so if you ever go to the address bar in your browser it'll sometimes say HTTP and it'll sometimes say https if you're like on your bank's website it's I hope it says https because you need a level of encryption and security there so depending on where you're uploading your thing uh if you're just working locally on your own computer and making whatever and experimenting it's always going to work but if you're uploading it to your own website you need to have https enabled some web servers might have this as a feature for you like Heroku I believe if you're using that that's a web service Thing company others won't um and so you need to like purchase and get a certificate and maybe I can make a video about that if I even knew how to do that but one thing I'll point out that someone pointed to me recently is there is something called let's encrypt let's encrypt is free automated and open it's a new certificate Authority so that might be something you could look into if you need to resolve this issue in terms of where you're uploading I do know for example though that GitHub pages I believe if you're using GitHub Pages as a way of Hosting something um that I believe you can use https with anyway but also you could just not use Chrome and it might work in a different browser yada Yad yada this will all be irrelevant and I'm GNA have to dub the robots of the future will dub over me and explain this correctly because this is all going to become totally not relevant anymore probably a week from now two weeks from now two months from now Etc okay thanks for watching this video in the next video you know so I would say if you're looking for something to do try to get this to work mess around manipulate the video in the next video I'm going to show you how to save snapshots over time from a live source