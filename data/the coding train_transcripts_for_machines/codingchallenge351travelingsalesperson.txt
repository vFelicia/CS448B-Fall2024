hello welcome to another coding challenge in this coding challenge I'm going to explore the traveling sales person algorithm it's a classical algorithm that you'll find from kind of this thing known as computer science uh I want to talk about what the algorithm is I want to build a quick JavaScript example to demonstrate how to kind of program the problem and then I'm going to do several followup videos to look at different solutions to this particular problem and for you the viewer I want you to think about what are some creative applications could you make some kind of interesting line drawing visual art with it could you create a musical system uh could you use it for some sort of uh data visualization scientific simulation creative project in your field of Interest so I hope that you'll watch these videos get the example code play with it and make an application with it and share that application with me which I might share then with other people but whatever that's not the point the point is let's talk about this algorithm so this is currently a processing sketch I'm going to program this in JavaScript which is checking every single possible solution to what so let me walk the traveling sales person so you know I think that um Pokémon go would in the future some many years from now when somebody's watching this video Pokemon go is the most irrelevant thing it'll be so annoying to watch this but um the problem is let's say you have a space and this could be a twodimensional or a threedimensional or an ndimensional space but we're going to work with a twodimensional space and the problem is usually framed as there are a bunch of cities so here are several City a map of a bunch of cities or perhaps there a map of a bunch of Pokémon that you want to catch but you're a salesperson and you want to go sell your you know cating rainbow stickers or tshirts or whatever in every city so you know I could go here and then I could go here and then I could go over here and then I could take the train here and I could fly here and I could go here and I could go here you could see that would be a path that hits every single City but it wouldn't be the shortest path and I could try to eyeball it and this might be an interesting application by the way idea what if you build a computer algorithmic system solving the optimal fastest solution and you have it compete with a person trying to draw that solution that could be an interesting interactive exhibit but you know we could try to say like oh maybe the optimal solution is something like uh this but you know that's just kind of a guess so we don't have to guess I could go back over here and this is a program that checked every single possible solution uh for and this is 12 points now you might think big deal how many possible ways are there to explore how many possible ways are there to connect 12 points well there's actually quite a few and it it it it and let's kind of explore that for a second so let's say there are only three points and the points are a b and c well let's look at all the possible ways a b c a c b b a c b c a I'm doing this in a specific order for a reason which will become relevant in a future video c a b CB a and if I did this correctly these are actually sorted in alphabetical order which is a kind of piece of this that's going to come up as I explore this further so you can see did I do this right there were three possibilities and there are there were three uh cities or three Pokemon there are one two three four five six um six possibilities so the way you can actually calculate how many possibilities is 3 * 2 * 1 which is also known as factorial and why is that because there are uh there are uh three possibilities for the first Le for the first letter and with each one of those there are two possibilities for the second and for each one of those there's one possibility for the third so actually if you are if there are 12 points there are 12 factorial possible ways of connecting all of those dots which if you pull up your calculator is a really really big number and when you go to 13 it's a really big number so actually like if I change this program right now to try to uh use like 20 points watch how slowly it's going to complete all the possibilities we are going to be here till the Dawn Till the time the sun envelops the Earth and we we won't be alive then I guess but you know you get the point this is going to take a really long time um and if I even just go let's just go from 12 to 13 just to make this point a little bit more explicit um you can see now come on computer um you can see that it's still checking all the possibilities but even just to get to 1% of the possibilities is taking quite a while and this is a program that's written in Java that's running relatively fast okay so um people in the chat are posting the answers to these factorial questions I'm glad because I don't have them I don't have those numbers in my head so now let's let's start to program how how do we think about this program in a visual simulation this idea in a visual simulation so I'm going to move out of processing you'll be able to get this Java based processing code also in this video's description but I'm going to quit processing here uh I'm going to don't save that and I'm going to work in the browser which admittedly JavaScript HTML 5 canvas is not the place where you're going to find your greatest power and speed from your computer but it's a place that we can kind of explore this idea and so what I have here is a simple JavaScript program it makes a canvas and it has a draw Loop so what I'm going to do is I'm going to create an array and I'm going to call that array cities but this could be anything please think more creatively what are the what are the things in your world that you need to find a pathway through and then what I'm going to do is I'm going to say uh let's just have three just to be simple about this I'm going to have three cities I'm going to say cities index cities index I equals create vector and I'm going to create a random vector and I'm going to do this as a separate line of code uh random width random height so a vector is just an object in p5js uh I mean it's you know the concept extends Beyond P5 GS but that stores an X and Y position it does more than that but that's what we're using it for and so I want to create a bunch of those and then I just want to see those points in the window so I'm going to do that same exact Loop but I'm going to say Here cities. length and I'm going to actually make that a variable like total cities so it's something we can vary equals three and uh then uh instead uh then what I want to do is say I want to draw a circle at cities index I uhx cities indexi doy we'll make it Circle 4x4 pixels we'll say Phil 255 so it's white and I just want a little bit more room to write my code and then uh I'm going to hit refresh here whoops hit refresh here and you can see there are three cities picked randomly refresh the page I get three random cities so and you can see here you know if I just now go and say total cities 20 now I have 20 but I want to work with a small number so I can sort of visually see that things are working okay um am I recording this yes excellent all right so um let's go back to three cities let's make these a little bit bigger so you can see them and let's also uh whoops let's make this a little bit bigger and and I can make the console a little bit smaller smaller okay so now what I want to do is start exploring possible orders well I have an order already actually the order that I have is in this City's array so I could sort of say this is an order and what I might actually do Beyond just draw those cities is draw a path between them so I'm going to say a begin shape end shape and instead of drawing a circle at each point I'm going to say vertex cities XY and I'm going to say a stroke 255 I'm going to say stroke weight two just to give it a little bit of thickness so it's a little easier to see and I'm also going to say no fill and so now I'm going to run this and we can see there we go now I just realized what I want to do is Shuffle the array so what I want to do is I want to try these are now I'm getting uh I'm getting random uh every time I refresh but what I want to do in draw in that draw Loop is I want to shuffle that array to try different random orders so how do I do that so I have a feeling if I go and look up the Milla documentation for the array object in JavaScript there might be a kind of function that's part of the array prototype whoa what's a prototype ah did I just say prototype in a video um but in other words when I say prototype prototype being the sort of like thing that is in charge of every array that's ever made ever in JavaScript and there are some functions that I've explored in other videos like remove or splice or push that allow you to manipulate that array I I'm wondering if there's one that's called Shuffle whether or not there is I'm going to write my own function so I'm going to write a function and I'm actually going to call it swap not Shuffle and you'll see what it's going to do in a second it needs an array and it needs two IND index things so something that's going to be very useful in just about every scenario that I explore the traveling salesperson is this idea of a Swap and this comes up all the time in different things you might want to program and do so in other words a swap is if I have an array that says a b c what if I want to pick two random elements like oh this this one and this one and I want to swap their position so now the array is CB and I might use this if I do this with a genetic algorithm as later as a mutation so the mutation of a path through all the cities is swapping two R cities randomly so let's look at how I might do that and uh I am going to say well so what you would think you might do is say a index I equals a index J and a index J equals a index I right this is the idea of a SW oops index I this is the idea of taking an array and swapping two elements right put the element number three at element zero and put element number zero at element three the problem is if I set a index J equal to a index I I just reset a index I to a equal J so I'm actually setting AAL a index J to itself so in order to perform a swap I need to say this actually I need to have some temporary variable which is holds a index I so I keep track of what a index I is and then later once I I replace a index I with j and then J can be equal to Temp so this is just a really simple uh a really simple algorithm for taking two elements of the array and swapping them and let's look at what happens now if what I do every time through draw at the end is I say swap cities and then oh I need two random IND indexes so I'm going to say uh I equals uh floor random uh uh cities. length and J is also a random value so I'm going to uh swap I and J and of course I you know I'm not guaranteeing that I don't pick the same one and swap an element with itself but big deal it's going to do this a bunch of times let's run this program again and you can see you know with three things there's not a lot of order possibilities but if I make this total cities 10 you can see now you can see how ele are being swapped and so it's doing this very fast but I'm exploring a whole lot of possibilities okay so now what can I do what I want to do just to kind of explore this in a Brute Force way is as I'm trying all these different possibilities I want to calculate what is the distance traveled through this particular order and if that distance is the best one I've gotten so far let's save it um so let's do that uh as the following so one thing I need to do I think it might be useful to write a function that calculates the distance uh between every point in an array so I'm going to write uh another function down here at the bottom and I'm going to call this function uh Cal distance and it's going to get uh a list of points all right so I'm getting a function it gets an array of points and the whole point of this function is now to return the total distance between all those points in the order that they are so I need some sort of sum that starts at zero I need a loop where I start at zero I go all the way through the length of that array and I say what so if this is my uh this is my order I want to know this distance plus this distance plus this distance plus this distance so I always want to know the the the distance between I and I + one and then this becomes I and this becomes I + one etc etc so if I come back here I'm going to say uh VAR D equals distance between points index i dox Points index i.y points uh index I + 1.x points index I + 1 dot y okay and then I'm going to add that sum plus equals D and then I'm just going to return the sum so by the way this is a function in P5 that calculates the distance for you between two two points so I'm giving it points index I X and Y points index I +1 x and y so that should be the now later I'm going to optimize this because this is actually going to be kind of a slow operation to calculate distance and there's a way later that I mean I could speed this up and when I'm trying to do this zillions and gazillions of times speeding it up could be a good thing okay um now what I'm going to do is I'm going to say uh I want to have a variable called record distance now uh so the first thing I want to do is whatever order this array is calculated in first I want to know calc distance of cities right calculate the distance for this array cities and then the record distance is that first distance so I'm going to try I'm going to get a random set of points I'm going to get a distance between those and that's my best so far then remember down here I did a swap so I shuffled it around so once I did a swap let's calculate that distance again uh of cities and then if that distance is less than the record distance then record distance equals that distance so this is me just checking all like randomly swapping things around this again is not going to be an efficient algorithm for solving the traveling sales for I'm building it this way just to show what the problem is and how kind of impossible it is to find that optimal solution uh with a with a certain number of points so what I want to do here is just say uh console whoops what I want to say is console.log uh record distance so we can kind of look at these values as I'm finding them so let's run this program now oops uh sketch. JS line 55 what mistake did I make points hm uh okay uh I get a list of points ah of course I meant to I I made this mistake on purpose and because I wanted to correct it later and then I forgot about it so what's the problem here remember I'm checking in the array element I and the next one i+ one so I can't go to the end of the array because if I go to the end of the array there's no i+ one there's no element after the end of the array I don't actually care because that's the end of my journey that's the end of my traveling to catch all my Pokémon or whatever is I'm doing so later somebody will dub this video over with whatever is the newest thing like um I don't uh never mind I don't know what the newest thing will be it won't be Pokemon it'll be B okay uh so I need to add a minus one here so I don't go to the last one okay uh now we can see uh I'm getting these nice uh so far uh I had a distance of 105 uh which was the record and at some point point it got a distance of 76 and then it got a distance of 19 pixels through all of those points that seems kind of insane to me that must I don't know if we're ever going to beat that record in a while so let's run this one more time uh and see like yeah so you can see that's optimizing now I'm not saving what that optimal uh what that optimal uh path is so that's the next step that I want to look at so I might need your help in the chat here I'm not really a JavaScript programmer that's a confession I have to make to you and I don't I feel like in the let's look actually so there must be a way I want what one thing I want to do is make a copy of an array I'm going to need to be able to do that because if I have a an array with an ordered list of vectors I want to be able to like save a version of that if it's a really good one and I could write my own function to copy an array and I'm kind of tempted to just do that to know that it works but let's let's take a minute in this video to and somebody in the chat will um oh did I forget return some oh thank you no wonder this is a big bug I just had by the way somebody in the chat just mentioned and I had another bug where I was returning D which makes no sense at all cuz I'm just returning the last distance which of course why that value didn't make any sense so return sum is correct so let's run this again to take a look at it there we go these values make much more sense right so you can see like it's you know thousands of pixels between all these points and you can see the the best one that I've gotten so far okay so I'm running that now let me go back to what I was doing is I'm going to go to U Milla uh uh developer doc array something like this I'm Googling that to get to here and what I want to look for is like what are all of the available functions things that I've used I've used push which is a function in Array that adds an element to an array reverse o I might need to use reverse later unshift there's so many things I might use but I'm looking for one I think slice might do this for me the slice method returns a shallow copy of a portion of an array into a new array object let's explore if this is what's going to work for me so I'm just going to go over here this is how I like to figure things out I'm going to go into the console here while this is running and I'm just going to make an array that's like 156 uh and I'm going to look at that array it's 156 now I want to say b equals a do slice what does that give me B is also 156 that's good that's what I need what if I say now B uh index uh 2 equals 7 157 and a is still 156 so this should work for me and I believe shallow means because I'm actually not putting numbers in there I'm actually going to put arrays in there sorry vectors in there that though those it won't copy the vectors it's just going to copy the array and that's exactly what I want because I want to keep that same list of vectors it's just the the arrays are pointing to the same Vector object but in a different position in the array so this is going to work uh po perfectly uh for me uh uh so so uh hopefully I got that explanation right and things are going to work people in the chat are giving me good advice about shallow copy I might have messed up that explanation I'll correct it as I continue to talk in this video yes you are watching a video of a person teaching about programming who really does not know what he's doing okay so um let's come back and let's say what I want to do is I'm G to say best ever and what I want to say here is uh best you know you know there was a show that I used to watch back when I watched television which I don't time for anymore which was called best week ever so this is best I guess that's from you know there's the whole Simpsons thing best anyway whatever never mind best City's path ever is cities to start and then every time I find a record oh no it's uh I want to actually say do slice I want a copy of it and then uh every time I I get a record I want to say uh best ever is cities slice so just to see if this is working what I want to do is I want to draw the path twice I want to draw the current cities and I want to draw the best ever and I'm going to make the best ever uh thicker and some uh pinkish purplish color and I'm going to make the current cities thinner and white so let's run this yeah this is working so I think it's I believe this is doing um uh what I wanted to do which is just randomly swapping things and every time and we can look here and see that oh I took the print line out but you can see the pink path is currently the best path that it's got now with 10 points I can see here like this is no good like over here this part is like terrible because look at them Crossing I could easily myself just design like go here I can't I can't do this like people who do the weather on television are like so good at this I could go here then I could go here then I could go there then anyway you could see how could easily design a more efficient path so this isn't going to get us that most efficient path that's what future videos that I'm going to go into the next steps are going to explore but let's just see that this program is working by just having Four Points because I think we can probably visually see that looks like the best path between those four points same there it looks like it's kind of finding it rather quickly right you can kind of imagine you know arguably is it going to be better I don't think so but you can see it's going to randomly kind of try every possibility with Just Four Points rather quickly we can even try five cities and you can see that it's kind of finding it so you know you know if I slow this down if I draw it more artistically if I allow the user to interact with it by adding points I mean that's sort of an interesting thing right um dare I I don't um you know these are might be some things that you can explore so I'm kind of finished with this first video demonstrating the traveling I don't know what the Bell does but it's a thing um uh uh with this um traveling salesperson problem in the next video what I'm going to do is show you how to not just randomly swap points to try a bunch of different possibilities but actually sort an array of numbers with every single possible premutation so we can actually just try every single possibility in order which I think has some kind of interesting creative applications to it as well so I'm going to do that in the next uh next video okay so thanks for watching this one and the the next video will follow up on this uh okay talk to you soon