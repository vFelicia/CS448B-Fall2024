hello welcome to a coding challenge in this coding challenge I'm going to take something I made in a previous coding challenge a flappy bird clone and add two features to it one is something I've just been wanting to do because I think I've sort of really poor job of developing an algorithm to pick the pipe locations and so I want to improve that algorithms talk about that in a second the other thing that I want to do is instead of I want to change the interaction instead of pressing the mouse I want to be able to clap and when I clap I want to be able to control the little flappy bird by clapping so let me first talk about the pipe thing so the way that I picked when I did this coding challenge first time what I did is I thought of the center of the window and then I picked I made up pipes randomly from zero to the middle with some random height and then one from the bottom from zero some random height from from the bottom to the middle in that sense it is impossible for me to have ever picked this as a set of pipes because the pipe can never go below the middle with the random algorithm that I'm using I think what would be better is to pick a random distance right what is the distance between that is going to be the empty space that you have to fly through and then I could also pick a random maybe center point for that distance or I could just kind of pick a random height I don't have to figure that out but well I'll figure that out as we do it but that would certainly that's the sort of core building block like how much space do you have and then following that where is that space so let's try to add this improvement and I'm watching the chat before you have anybody has any better suggestions Here I am back so let's look at this code oops I'm in the wrong place pipe so notice how top is random height divided by two bottom is random height divided by two so this is fine that can still ultimately be the two values that matter right what is this value top and what is this value bottom it's just more how do I arrive at those points so let's do it let's look at where I create the oh I this is where I in it so let me instead save our spacing equals random night so what's a good amount of spacing like if it's really easy like the lowest amount you should have is maybe 20 pixels let's just say then the most you should have is like half the actual window so this is the amount of spacing and I could say now just to like see if this works I could say it is height divided by top is height divided by two minus spacing divided by two and bottom is height divided by two plus spacing divided by two so let's just see if that works so to speak so I'm picking it about oh this is not working haha what did I get wrong here oh I forgot this is not the location of the bar like which would be the height plus the spacing it's the it's the actual length of it so that is also should be minus spacing there we go and this can be divided by two divided by two and so now you can see and I can put these back so now we're picking that random spacing and but that amount of spacing is always around the center so what I want now to be possible is that that that you know kind of like where the center of it is also random so on the one hand I could say I could say like var Center Y is any random point between zero and height and in which case I'm saying the top is Center Y minus spacing divided by two and the bottom is Center Y minus spacing by two but that's not going to work so I'm picking now an amount of space now I want to pick where that amount of space is so let's say I pick 30 pixels and then I pick it should be centered around you know pixel forty so what I want is to go from pixel forty 15 pixels up and my first rectangle as a height of what it has a height of 40 you know 30 divided by 2 right and then the bottom rectangle has what it has a height of the the difference between 40 right 40 plus the the actual sorry height of the whole window the center plus whatever that spacing is so if we have sort of figuring that if I come back here I should be saying something like the height is height minus center plus spacing / right so how does that that should give me now the the height of the top is from zero to wherever that Center is the spacing and then the bottom starts at the bottom going all the way up wherever that Center is but then shifting by that spacing so now what I'm going to do is actually make the spacing always 20 pixels and just have a random height we should see this work so we should see now that the amount of space should always be 20 pixels now it didn't work when the center point was actually picked too high so I don't know if I can force that to happen again but let's say I pick the center point at 15 pixels we have to fix this if I pick the center point at 15 pixels actually it is working so what if I pick the center point at 5 pixels yeah you can see or 1 pixel now it's sort of broken so one thing I have to do is I have to limit where I pick that center point based on how much spacing there is so maybe the center should be picked between spacing and height minus spacing so now we should see I should you know uh you know I could add a lot more pipes like where am I how often am i adding the pipes just a sort of test I add pipes if one goes off the screen and then the pipe moves at a certain speed I guess that's what's controlling it so let me just make the pipes move faster oh that doesn't help maybe if they move slower whatever I tell just how I make that ah I you know I could I should add pipes in a different way I could just add them every so often but um so but now I should be able to add a random spacing I'm pretty confident that it's working and we could we could make the game kind of hard oops and I'm gonna have a random amount of space okay so now we've improved this game by changing the way the pipes are built and they look design wise they don't look very good so it might make sense for me by the way just somebody in the chat had asked for me to make them a little wider why not right okay so now we could see they're a little bit wider and this is much too hard for me to play but obviously this is stuff that I can do make various design decisions about by just changing I'll make the spacing a little bit easier so let's make the game a little bit easier to play let me make sure it's like vaguely playable for me I not I should add a score and some sound effects and all that sort of stuff but right now let's what I really want to do in this video boy if we wait too long to get to this is what I want to do is what I want to do is change the interaction so I'm reading the chat would have changed the interaction so that when I clap this little flappy circle jumps okay so what do I need to do first I need to make sure that I've got a reference to p5 sound which I do now what I want to do is I want to create I'm going to create an object called mic and I want to say mic equals new p5 audio in so I want an audio in object now what I want to do is say var volume equals mic get level now I think what would be useful is to be able to visually also see what the current level is so one thing I'm going to do is I'm gonna at the end of draw here I'm going to draw a little bar so let me say fill green let me draw a rectangle let me first say why is map the volume which goes between zero and one to some value between height and sorry about between height and zero and then I'm going to draw a rectangle at the edge of the screen which is like with minus 50 we're at Y with the height with a width of 50 and a height of height minus y so I just want to add something really quickly and I have a syntax error line 63 somehow I got an extra bracket in there oh oh oh p5 audio in I'm importing I'm not importing sound so one thing you've got to make sure is that I'm using the p5 sound library which is hopefully there in the libraries folder it is okay so why am I not seeing my nice little rectangle let me make sure the volume is working oh I'm just getting 0 so how come I've oh I didn't say start ah always cannot forget cannot forget Mike dot start I've got to start listening and now I'm listening okay so we can see here I just wanted to have that there because I want to be able to visually see what happens when I clap so now what I need to do is make the bird jump when I clap and there's a lot of console logging going on so let me look at this that's fine have that there let me take out the console logging the volume and whoops okay so and I can there's some console logging in this pipe that I can take back out now okay so here we go let's make this really work everybody so the first step that I might do is for they got a look this is all I need when the key and I hit the spacebar bird goes up so on the one hand I could just say like hey if volume is greater than 0.2 bird up so let's run that and see what happens so already it's working the thing is first of all if I talk already it's working the thing is it's responding almost a little bit too well so hey there's a lot of sort of threshold appropriate threshold so I should make a slide let's make a slider here to calibrate this so I'm going to say a slider equals create slider between zero the range is between zero and one starting at point two and with a sink remount of 0.01 and so let's just make sure there's a slider here where's this create slider oh there it is so I can use this slider to adjust what will hopefully be a threshold then I want to draw that threshold so I want to take I want to save our threshold equals what do I want to say here I want to get the value of the slider and then I also want another Y value price I'm going to say ty4 threshold Y which is map that threshold between which goes between zero and one from height to zero and then what I want to do is I want to say a stroke let's make it red and I want to us a stroke weight just so we can really see it for then I want to draw a line at from with minus 50 at that threshold to the width at that threshold so I want to be able to see there's a line right and I want to be able to see that the Thresh I want to be able to like move that threshold so I have a sense of where that threshold is and let's in pipe where I'm drawing the pipe let's say no stroke and in bird where I'm drawing the bird also let's say no stroke so that stroke is only for the rectangle and I can also say here no stroke okay so we should see now that I'm able I want to like calibrate this threshold so that's one thing that I want to do so now what I'm saying is when bird when volume is not greater than 0.2 I'm saying when volume is greater than threshold so now let's run this again so now you can see whenever the volume goes above that threshold it actually it moves it up so I can make the threshold higher so now I have to be much louder those were some loud claps I hope I haven't hurt anybody's ears so but here's the thing I actually this is even though the having controlling this threshold is really useful this is not exactly what I want to do to determine if I'm clapping right whenever I talk or make a sound the volume gets louder a clap though is an instantaneous sound but even as slowly as on my clap it's actually loud louder than the threshold for quite a bit of time several frames of animation so that up force is applied many many many times what I actually want to do is have a double threshold I want a threshold for how loud a clap is but I'd only want to trigger the up force once and I don't want to trigger it again until it's become quiet and then loud again so what I actually need are two thresholds so I'm going to make slider top and slider hit bottom so I'm going to say slider top and I'm going to make another one slider bottom these are both sort of and I'm going to have the top threshold start at point three in the bottom four shoulde start at point one and this is a sorry this is slider top threshold top and I need threshold bottom bottom bottom slider bottom so if the volume is greater than the top threshold bird goes up and not clapping so what I want to also do is introduce a new variable clapping and clapping starts at false so I assume I'm not clapping so I only want to trigger the force if I'm not clapping and the sound has gotten above a certain threshold so if the volume gets above a certain threshold and I'm not clapping trigger that force and set clapping equal to true now if the volume ever gets below the bottom threshold now I can set clapping equal to false right so I can only trigger that force when I'm above the threshold so let's also let's also this is top Y and I want to do a bottom Y it this is threshold top a threshold bottom and let's make this one blue and bottom Y bottom Y so I should see now two thresholds so the Thresh the top threshold and the bottom threshold and I pick some arbitrary numbers let's see how they work so I think I need to move the top threshold down a little bit and let's move the bottom threshold down a little bit too so you can see there's like a lot of calibration involved here but but the ID idea is working and so I'm even going to make the top threshold lower and now we're going to see how I'm pretty terrible at this game I could also just do it with talking right so talk talk talk talk jump jump jump jump jump jump jump jump jump jump jump okay by the way I could just use the space but so also you know the strength of the force is quite important various other things are important so anyway I would love for people to take this code and you know hey you know come up with your own game think of a slightly different interaction besides clap play with the threshold values and and sort of see what you get I'm sure that you can improve on and improve of the design of the page where these sliders add labels to the sliders let's think people know what's going on I would love for you if you've watched this video and you take a look at the code that I'm going to publish with it if you make a version of this that's an improvement on what I've done I would love to hear about it so share it in the comments or share it on Twitter at Schiffman and I'll see you in a future video thanks for watching clapping bird