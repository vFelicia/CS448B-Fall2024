i muted i muted of course okay I'm back ah else always happens to me I'm not muted anymore hello welcome to the coding train it is me Dan on a Monday I think it's Monday at least uh but I had this very spicy lunch this is what I was talking about a second ago before I realized I was muted and it's my head is like a little bit in the clouds right now yes I everybody in the chat is saying no audio but as soon as shortly you're gonna catch up to me I have I have something to say I'm very worried about this livestream today so if you happen to tune in on Friday you might recall that the streams froze the computer would freeze I had to restart a bunch of times and so I tried do a few things on the computer for example I it's not this computer by the way so this laptop here is not the machine that is the problem the machine that is the problem is how can I show this to you this is gonna be very awkward let's try this yes sure okay the machine that is the problem is this one on the floor over there it is affectionately known as it doesn't have an affectionate name it's a it's a Mac Pro you know it looks like a little trash can it has it has served me well over the years but recently it started to overheat I believe so I did something which is called to reset I didn't know about this thank you to us Austin reset Mac SMC so I tried to do this also this microphone is in like a weird place what's going wrong today so I tried to I did this I also upgraded the machine to Mojave because why not white some stuff off the machine and as you can see I am live streaming from that machine and it has not crashed yet but I wish I had pressed the button start streaming just like five minutes earlier because if the Machine started beeping so it does this weird beeping I've never heard I wish I have recorded this but sounds like this I have never heard a Mac computer do this before it does it and then it just stops and then I thought maybe then it would freeze I don't know so if anybody has any idea what that could possibly be please let me know I did install some monitoring stuff and for example it does say the CPU is currently 148 degrees that's I believe in Fahrenheit and we so tell me like a GPU temperature somewhere here system I don't all something I think some people recommend some other things that might even be better tivity monitor so I don't know we're gonna go Patrick and the chat rightz won't help if it's overheating it's likely a hardware issue dust I was hoping that maybe it was like an issue with the fan but like somehow like he didn't know how to turn the fan on and off properly and upgrading wouldn't fix that in my fantasies so anyway I'm here I am going to do this live stream today up until the moment the computer crashes if it does not crash great if it does crash I might come back just to say that the machine crashed but then I think if it does crash I'm going to spend the rest of my time trying to find a different computer today so I'm sorry to go on and on about this I keep looking over to see if I'm still live let me check the slack Channel and yeah alright so welcome to the coding train what you are about to watch today is a person me do some coding tutorials and today's topic will be decentralized social networks like mastodons and making a bot for them I kind of try to use the sound board again it's been a while alright so I'm gonna jump right into this I've got to situate myself here first which is to go to this youtube channel called the coding train go to playlists created playlists I think I'm looking for session six five four there we go this is not what I'm looking for it this is what I'm looking for okay setting up a Twitter alright so what I am going to do today is does the new machine have to be a Mac no it doesn't have to be a Mac it has to be a machine that I can use that will do all the things that I need notably take inputs from multiple cameras from the laptop HDMI out audio inputs and it will stream and run open broadcast studio that's all though the machine needs to do and you know so far it's kind of working ask Louis Rossman about the Mac stuff says Jason yeah okay alright so I'm gonna jump right in I'm gonna open up a few URLs join massan's what I'm looking for here this is the order and then I need one more or what I want activity pub and I also would like a mastodon on github which is here okay okay yeah marker I need to make sure the whiteboard camera is working which it is and we shall begin Josh is writing probably not enough RAM for streaming maybe you're not referring to this book oh yeah I see this computer has this computer is let me just give you all the specs here it is a 2000 late 2013 Mac Pro the processor is a 3.5 gigahertz six core intel xeon xeon e5 has 16 gigabytes of some sort of ddr3 1866 1866 megahertz ram its graphics card as an AMD FirePro d 500 3072 megabytes and I even have I even have right over here I'm going to show you something remarkable I thought would fix all my problems we should use this today though I have this Blackmagic Design EGP you this is an external GPU unfortunately it only takes Thunderbolt 3 which is not a thing apparently I can use with that Mac Pro from late 2013 but I thought maybe if I use an external GPU it would solve a lot of my problems all right ok welcome everyone hello this is a first video in a new series about making a mastodon bot and you might be asking yourself okay why are you making what is Mastodon why are you making a mastodon bot and why should I care I'm not sure why you should care but I'm gonna try to answer those other questions and you yourself can decide so this playlist is essentially a replacement for session for Twitter API and BOTS with nodejs so I am I'm gonna not redo fifteen point one and fifteen point two if you have never used node before or don't know what NPM is you can go back and watch those two videos but I'm gonna start here basically with setting up setting up a Twitter setting up a mastadon and so what is Mastodon why are we here so the Twitter API which I use to create these set of tutorials recently changed quite a bit so it is much harder to sign up for a new account authorized for automation making a bot that posts an automatic way to Twitter they also change something about the API called the streaming API the way you could connect to Twitter and listen for certain events they change the API that is no longer available so while I encourage you to still experiment with Twitter as a platform if you so like if today is your first day wanting to like learn some stuff about node and social networking and making a new social networks and making a bot that post Mastodon is going to be a more pleasurable easygoing experience for you that's going to allow you to express your creativity in a much more immediate way and then there's another reason it has to do with this idea called decentralization so Twitter notice it's kind of an awful place to be for the most part I don't want to get too far down that discussion but is there is there another way is there another way that we can communicate with each other in a less centralized government owned by large corporations kind of way and one way to do that is with a concept called decentralization and mastodons is an opensource I don't know maybe I should go somewhere where it actually says what it is well you can really follow friends discover new ones publish anything you want link pictures text video all in a platform at his community owned and adfree no this is not like some sort of sponsored video I'm experimenting with this platform because it interests me and maybe it'll interest you it is an opensource project you can see it's on github here and the decentralization runs with a protocol called activity pub so let me try to give you an understanding of what I mean by all this stuff okay so what is Twitter ultimately did it just give me a second coughing fit here what is Twitter I don't know anyone should really answer that question but I will give you a little framework so Twitter is a company they run probably a lot of servers you can sign you can be sitting on your laptop or your you know phone that's a phone apparently and you can sign up for an account on Twitter you could give yourself a Twitter username like at Schiffman and then you could post messages like the heart emoji and you can read other messages that other people are sending into Twitter this is what you would refer to as a centralized platform the software that runs Twitter is on a particular server its proprietary the way Twitter is governed and how where what certain posts are allowed and aren't allowed are all run by the same company and all of your data all of the tweets you've ever posted all of your user information your password stuff all of that is stored on this centralized server the web in its origins if you go back and look at the history of the web didn't really start as this idea of a centralized platform the web didn't start with this idea of a centralized platform the idea was many different nodes all interconnected being able to share and publish with each other and so there is this is coming slowly entering the zeitgeist now this idea of decent last platforms probably if you're not familiar with that you're probably familiar with something called Bitcoin right which runs on something called blockchain which is a protocol for decentralized financial transactions which I'm not gonna make any videos about at least any time soon but mastodons is a D opensource decentralized social social network I'm not so much trouble saying that word do you like trains Mastodon Mastodon is an opensource decentralized social network and it probably resembles Twitter the most but there's some nuance to that so how is it different how does it work well number one is there is no single server for example I have actually set up my own server known as an instance and I'm not going to show you in this series how to set up your own mastodons in instance but if that's of interest I certainly can provide some resources to do that and I could do a video about setting one up my instance is at a particular domain Chuchu dot space this is my Mastodon instance so we'll call it choochoo there are other Mastodon instances for example Mastodon dot social there is also Lily let me erase some of this stuff here chew chew Mastodon dot social there are some other ones that I have seen for example there is visit social which is an instance for people interested in data visualization I presume there is another instance called bots in dot space which I'm going to use in this series to make a bot that runs on this bot in space so the idea here is I've set up this instance let's say you want to sign up for an account with this particular instance you would go show it to your psyche you would go there and you would sign up into my username I'm a client my like picture of my like laptop over here which is strangely it's a weird bizarre angle I am Schiffman at choochoo dot space so this is my local this is my local Mastodon instance when I want to sign on when I want to post something I post it I sign on through this server I post it through this server my account is with this server but there is this concept called Federation it sounds like something I'm Star Trek and it kind of is which Federation and I know I kind of getting close to writing off the top is a way for all of these instances to communicate with each other in a decentralized fashion so if I post something saying like hello I ate oatmeal for breakfast this morning this post that I make through here will get propagated throughout the entire network of mastodons instances so there is both when you're browsing Mastodon there's both this idea of a local time line as well as a federated or you can think of it as global time line and I'll show you this in a second I could browse and just look at all the posts I think they're called toots all the toots for people who are at this instance are all the toots from people all throughout the Federated universe of instances by the way the protocol that is used for all of this for that for all the communication to propagate throughout the network did I mention this already it's called activity pub so the software that runs a particular server is completely open source it took me a while to get it up and running but I have it up and running here so what I'm gonna do is I'm going to show you my account here I'm gonna show you bots in space which is an instance design for people who want to make BOTS I'm gonna sign up and create a bot on bots in space and interact with it here and then just show you how the global network of stuff works so the only prerequisites really for you going to the next video is to have node installed on your computer and you can go back and watch my two sort of intro to node for Twitter bots videos and the same concepts there will apply although I'm going to use different node packages what else do I want to say about this yeah okay coming back over here okay so so this is the github repository where is the open source Mastodon project is I encourage you to check that out this is some more information about activity pub which is the protocol for decentralized social networking lots of other services also use activity pub there being this idea of dee central the decentralized web is not limited to Mastodon one simple example of that and then here now you can see whoops here is my Mastodon instance you can see that if I go to choochoo dot space I am there it looks like I am on some kind of social network thing where I can say hey I looks hey I am live on YouTube right now and I can you to make a little train and a little I know you're just gonna have to watch me do this I have to pick my emojis very carefully and thoughtfully rainbows like clouds or anything no I don't know okay that'll be enough I'm gonna post that you can see there it is and it is there on the local timeline so this is the local timeline UK weep on there look ma I'm on the live stream now here's the thing because my instance is something I just set up and it's running off of a digital ocean server I it's like ten dollars a month it's like two gigabytes of RAM I just signed up for it digital ocean ocean is a hosting provider not a sponsor but could be a digital ocean area listening I'm not the signups are not open so to get an invite code to sign up on the choochoo space instance you can be if you're a member of the YouTube channel or a patron of the channel you can you can sign up there but I'm just you know I don't I don't want to mention it let me go back the machiya who will be watching this later I don't want to go on and on if I don't want to like mention the patron membership stuff during the that's important for the livestream context but because I might open it up later so let me just kind of Rhys a what I was saying before I'm afraid to go to the global time line but uh maybe I'll maybe I will let me just quickly peek ok it's not terrible okay go back was they saying you could see the I don't know I don't know where I was I'm just gonna do that whole little section again sorry for the live people who this will be annoying too okay so here we are and what I could do now is I guess first of all let me just show you a couple links which will all be in this video's description this is the github open source repository for the mastodons software that I'm running currently on my server over here I just I think I met this oh I'm so confused did I show help me out for a second in the chat did I show these earlier like I'm confused cuz I tried to do this video last week and then I got messed up did I already earlier today show the github repository and this page and I'm not repeating myself like when I was doing my intro that I went to the whiteboard does anybody remember let me know in the slack channel or we're here oh I made that digitalocean joke if I might have to make that again cuz they could be a sponsor for real yes one of the first things okay alright so I'm just gonna like come over here to my instance whoops no no you showed activity huh but not the repo okay great thank you so I'm not gonna show activity hub again so I'll just come over here okay Oh welcome new member or nico thinker and gee and please the first thing you should do is tell me how to pronounce your name and you can go and check the community tab and there's a link there with an invite code to join this Macedon instance instance if you're so interested okay thank you everybody for the comments all right okay so now we're over here this is the join mastodon org website you can find out a lot of information I would encourage you to click on this how it works what is Mastodon video which is on YouTube which will explain all that much better than I did get started you could find an instance that you might like to join this is the github open source repository with the software that's running now and now here is my instance the choochoo people are notifying me and saying hi and look k week Mon says look my I'm on the live stream okay excellent please use caution when posting now so this is what it looks like you can see it looks like some other social network service that you might sign up for the difference is I am actually running the software for it on my own server this server I happen to sign up through digitalocean which is a web hosting company that is not a sponsor it could be a sponsor hello did you lotion butt and you could set up your own and so what but here's what I'm gonna do it what you can look at other instances like bots in space this is the instance and you could sign up in the next video I'm actually gonna sign up for an account here so I can make a bot that post on it you can see here's some bots already that are posting things the cyber painting beard de Meyer in the North Pole inspired by Hubert Robert okay the sequel is here get ready for guards to define I don't know please have a tree picture this is a tree bot come on let's make a tree bot that's gonna be so nice so again these are things that you can do on other services but math on being open source it's a really friendly and easy place to get started with in terms of the API which I'm sure will drap idli change and who knows how quickly this video god of date but that's the current spot so if you want to sign up for an account before the next video I'm gonna do it in the next video I would recommend bots in space for a bot account and then you can also go I'm just gonna open a new incognito window actually you know what I don't have to this is one of the things that I like you can be logged in multiple mastodons accounts so if I go here get started I'm gonna you can see here are a whole bunch of servers so like for example I am a musician and I speak Deutsch then we can see here are some mastodon instances that i might want to sign up for so let's find one for the coding train besides choo choo dot space i am a game or developer shall we say developer I don't know I guess that's the closest I don't think I'm a developer and I speak English and we can see here are some here are some ones let's just cut that whole extra part here cuz I don't know what is going on [Laughter] okay thank you very much I mean so if you want to sign up for a mastodon account not on choo choo dot space or or bots in space a new one for yourself you can come you can go to join Mastodon org and you can go look here you can look for something like oh you're an artist yes and you speak English ova social there we go a social space for anyone in data visualization creative coding etc and now you can see this is visit social and you could sign up here now once again even if you sign up at a certain instance that's just your name and address and your local instance but through Federation through activity pub through decentralization you are still participating the broader world that is Macedon okay so what's gonna happen next in the next video I am going to sign up for a box in space account I'm going to show you how to get your API keys I'm gonna write a little note program that posts the toots to it automatically and and then I'm going to show you lots more what and things and how the API works and different ways to post images and replies and favorite things and all that kind of stuff okay so I hope you enjoyed this exploration of the open source project Mastodon and I look forward to hearing what you think in the comments Almer is writing his hair is darker than I remember is it my hair I got a haircut nobody noticed my haircut I went to a very nice barber shop over the weekend in Prospect Heights Brooklyn and I had a lovely experience with a lovely barber talked my ear off my ear is still on it was very nice ok any questions did that like for those of you who have never heard of Mastodon or decentralisation before today did you get something from that was that helpful interesting useful I can't believe this hasn't crashed yet I almost want it to crash because I want to just I feel like it's just on the edge of crashing all the time ok alright so let me let me get set up here for the next piece of this I have a lot more space I could work with here yeah so we're gonna go to Chu Chu dot space and box bots in dot space I think I can close these things out make that a little bit bigger make this a little bit bigger local time line there we go okay okay alright I think I am ready now to get started oh I need to have I turn and let's go to desktop make directory mr. Don but okay Oh another new member this is so nice of all of you under us year mati where are you from I wonder under das thank you for joining okay so so let me just for the live stream if you for anybody is watching right now if you go to choochoo dot space you're gonna see this message sign up on another server registrations are reserved for coding train YouTube members and patrons I'm doing this not because I want to have a closed thing I mean might make sense for this to be a member benefits I don't know most I'm doing this cuz I just set the instance up and again it's on a digital ocean server I just picked a droplet in picked a five dollar month I picked up $10 a month so give me a little bit more juice but I I just I'm not sure about the sustainability of this and what's gonna cost so at the moment you can you can certainly participate and communicate on mastodons through the fact that it's decentralized but you want to sign up with a personal account somewhere else or join the YouTube channel and then you'll get an invite code and maybe I'll open this up later as well as an look we got 22 users so far and then as well as unboxing space which is open it's currently an open one you'll notice that the main one mastodons dot social for example also is registration on the server currently closed due to high demand please sign up on macedon dot cloud instead so i don't know you know i think that i think it's it what I'd like about mastodons is that they're these you know instances these little subgroups within the larger universe so I affinity groups maybe in a way so I do like the idea of opening up to Chuchu dot space but also you might find one that's you know you may be coding train is not your sole purpose in life and you might find a different space that's well suited to you okay which is him to say that's joining the anyway no okay all right okay people are really sending me crazy stuff right now how did you do that all right this is really funny what's going on so far I don't mind no I don't mind this at all in fact I'd rather enjoy it but please use discretion don't try to don't ruin my video with nonsense okay all right so hi thank you Marius for your nice comment okay so I'm back here I'm gonna go here okay okay we're back for another mastodons video and in this video I'm going to sign up for a bots in dot space account space I feel like I need some space music hold on this is gonna be totally worth it five seconds okay how come I can't hear that oh boy now I can go hear that and crazy feedback hold on you need to do is I need to mute this okay there we go all right sorry everybody okay hello welcome to the second master time video in the first video I talked a bit about what Mastodon is or least my impressions of it the idea of decentralization and in this video the reason why I'm doing this is I want to find a platform to write crazy weird experimental avantgarde art bots and so I'm gonna use this platform sounds that this was gonna be this guy's I just seem better when I thought it played with music and later now but so the first thing I'm gonna want to do is sign up for an account here with bots in space and I'm going to say sign up with coding trained BOTS and I am going to use the email address Daniel at the coding train comm I'm going to use the password suggested password I don't think I should use this because then you will all see it I'm gonna use the password I love blueberries or heart heart Rainbow sure you'll all be able to guess my password really easily what is what do you what does this nonsense go away a message with confirmation link has been sent to your email address a hold on a second talk amongst yourselves I am now going to attempt to I didn't get an email is in my spam it's not in my spam well I did get some private messages from some nice people in my spam okay I came through so my confirmation came through and so you can edit this stuff out I guess verify email address ah my email address has been verified okay I got the email I verified my email address I should be able to log in now coding terrain bot if I could remember what my password is I'll log in oh no this is not the password oh no wait oh I have to use my email then you'll oh great thanks for showing all my emails here autofill whatever you hold on okay so I click the verify my email I have now put in my username and password I'm gonna click login and now welcome to Mastodon I'm gonna save this just why not this is my full handle at coding train bot at BOTS in space I'm not gonna skip through this little tutorial here but first thing I'm gonna do very important is I'm gonna go to edit profile and I'm just gonna go down here night I would want to put other stuff here and maybe I'll do that eventually but I want to go here and I want to click this is a bot account because one of the nice things about Mastodon it has a feature for you to indicate that a particular account is a bot which is you know a really nice thing to do in terms of transparency okay the other thing that I want to do is I want to go down under development so I may hit Save Changes we're down here in the bottom there's a little option under development I'm gonna want to click that and I want to create a new application so I'm gonna create a new application it is coding train example bot the website will just be the coding train comm I want to what do I want to be able to do so you have a lot of options in terms of what permissions you can give your pot like maybe the bot can only read certain things or only write certain things but I'm actually going to keep the global the the read sort of global write checked and the read global read checked so that everything and follow so this bot could basically do everything it can read all the posts it can write all as many posts at once and it can so I'm gonna hit submit and then I'm gonna click here and now now the thing is this is stuff that I really do not want to share with anybody so at some point I'm gonna regenerate this which I'm going to do right now I'm actually going to whoops just Here I am back I'm gonna regenerate that access token so you know I don't really mind if who's gonna be able to like type this quick enough and hack my bot but here I come back but this is not something you want to share okay yeah there we go okay so now uh we're Mio okay you're gonna see it again you saw it again whatever let me go back to do that again alright so what I'm going to do is I'm going to quickly just turn the screen off no that's me I'm gonna turn the screen off there we go I'm gonna regenerate that access token I'm gonna go back to I'm gonna copy this stuff somewhere secret I'm not gonna worry about that now I'm gonna go back to Mastodon then I'm gonna put the screen back there I am so that you can't hack my thought at this alright so what's next I want there's a lot of different ways you could write a mastodon pot I'm sure you could come up with some way that I can't even think of right now I'm going to use nodejs which is a JavaScript framework for executing JavaScript code and I am going to ex do all this from the command line so I you if you're gonna want to have node installed and you're going also do you really want to have some shell access to your computer to be able to do this and I'll link to different workflow videos about how to get that stuff set up if you don't have that already so what I'm going to do is I'm in a directory I'm on coding train desktop Mastodon bot the first thing I'm going to do is I'm just gonna type NPM in it what this does is it starts up my node project this is gonna create a package.json file which has all the configuration information for my node project I could just manually then make that file or copy it from another project but it's nice that this tool will step me through it so package named Mastodon bot sounds good this is version I don't know zeros at point zero point one there's option is example code for Mastodon bot on coding train entry point I'm gonna have a file called bot Jas I'm not gonna worry about testing right now I don't have a git repository but Mastodon education will be some keywords the author is me I guess our license will be MIT and this looks all looks good to me so now if I open this up in Visual Studio code we can see it has created a it has created a package.json file with all of that information in it that I just typed it pause for a second I feel like this is a little bit big I should I like that that's bigger and then now I can go to preferences and change this and go here yeah that's better okay okay okay the next thing that I want to do is create my JavaScript file that is going to run the bot so I'm just going to click new file and I'm gonna say Bob Shaye yes and just to test things out I'm going to say console dot log Mastodon bot starting dot the dot so this is where all of my code for the bot is going to go and the very first thing that I'm going to do is just test this code by executing it and the way that I do that is going back to terminal and by the way yes they're ups it's not the right commands how do I do that no yeah there we go and by the way yes there is actually a terminal directly in in visual code studio and I could actually just run it right here by saying like node bot yes and maybe I should do that this is so tiny though I don't know why I'm just not used to using this terminal yet so I'm gonna stick with my using a separate I turn and I'm gonna run node bot J yes and we can see all doing is console logging that Mastodon bot starting okay how am I going to connect to Macedon so in order to do this I'm going to use a node package that will communicate with the Macedon API directly so let's find that I'm sure let's look at notifications let's start much node mastodons API and let's see so what comes up Mastodon API NPM ago I've used this before in making a practice example so this one is going to work fine for me and so now the next thing that I need to do is I need to run NPM and stall because if I'm going to use this package to communicate with my bot I need to make sure I have it installed so this NPM install save Macedon API and yes I could use yarn which is another package manager for node but I'm still unlike an NPM person whenever there's the thing that people are using instead of yarn that's when I'll use yarn npm install' say the save by the way is a argument so that it automatically gets added to the package JSON file and there we go so if I go over here we can see if I look in packaged up JSON there is now also a dependency mastodons api so that is now a project dependency and the first thing that i want to do to be able to use this is an actually documentation here documentation people what let's actually just go over to examples and click on streaming and this is what I want oh no I don't oh my goodness all right never mind hold on I have my own examples I think it's just require you no longer have to you alpha okay did any breaking who's out getting the chat is telling me that you no longer have to use save so maybe it it adds it automatically whether or not used that save or not that's a nice little extra tip for today okay what I want to do now is require it and again I'm not using I'm in a sort of still I'm using require so I'm gonna say Const Mastodon equal let's just call it Const and maybe know let's I don't know Macedon equals require Mastodon API so I am now requiring it which meaning that's basically I'm importing it and then what I want to do is I want to connect and there's a lot of ways that you can connect live in your code because maybe you're making an app and you want people to be authenticated with different accounts I don't need to do any of that I just want to do this new constant and constant and equals new Mastodon and I'm gonna do this and I'm gonna need to put in my access token I'm gonna need I don't I'm not too worried about this and I need to put in my particular instance which is bots in space so this is the this is the since I am now going to run my bot through BOTS in space the API URL for making API queries is at BOTS in space BOTS and dot space slash API slash v1 now maybe someday there'll be a v2 of the api v3 but this should always work and now I just need to get that access token which I'm throwing caution to the wind by the time you watch this video the access token will have changed but just to show you I'm gonna go back to here I'm gonna go to settings that's fine I'm going to go to where am i development a coding training example bot I'm gonna grab the access token I'm gonna paste it here and then I think do you know I'm pretty sure I need also the client secret which is this thing and client a key which is this thing and then now I should be all set and connected so the next thing that I can do if I'm looking through this API oh yeah this is actually what I wanted to do yeah is I can't so now ah okay just pausing for a second as I'm seeing the chat typos and secret I see that Suraj is in the chat hello Suraj and Petros my son's middle name is Petros I wrote secret okay thank you I'm being told that I wrote secrets so that could be secret thank you very much all right so here's the thing we got to talk about something there are three there are three core ways to engage with the mastodon api sad to erase my beautifully decentralized diagram there are three ways to engage with the mastodon api and this is very similar to how twitter used to work from Twitter doesn't work this way anymore but luckily for us Mastodon does there is the get a get request is basically saying hey I would like to get a whole bunch of stuff like get me this list of user accounts get me this list of posts tooth statuses tweets whatever you want to call them search for every tooth that has the word mango in it that's what get is for there is also post I really should have written these in all capital letters post is for posting something to Mastodon like for example I want to post a new status or I want to follow or favorite or reblog something all of those are posts and then there is what is really the exciting thing the streaming API the streaming API is a way for you to essentially have almost like a socket connection like a an attached connection to to Macedon where you're just listening for events so every time somebody follows somebody you'll get an inventor every time somebody posts the status you'll get an event so this is what's really powerful in the way that you can kind of engage with the service in a in a realtime synchronous way and unfortunately this is a thing that Twitter recently removed from their API and there's other ways to do the same exact thing but it's a bit roundabout plus good luck getting your bot approved from Twitter or something that you can use there okay so this in this video to test the first idea out I just want to do a post so what I want to do is a post okay so coming back over here we can see this is what I have to do post with a some path now what is the path so now we need to look up mastodons api documentation and we should be able to on this page here look under posts and we can see i can this is a post for following something for blocking unblocking for muting but I want to pose the status hold on there we go sorry about that this is where it is I want to post a new status so remember what is my API URL it's this one so ultimately the endpoint that I want to go to is v1 statuses but I don't do it here the path I could put right here statuses then I need some parameters and I'm gonna put a call back which I will use my fancy es6 arrow syntax that I have covered in other videos I'll come back to that in a second so params let's make that a separate variable it's a JavaScript object so these pram this is super important what are the parameters well we go back to the API documentation and we can look here they are I could say this is the status the text that I want to pose in reply to well is it in reply to somebody a different an ID of a different status media IDs for images all sorts of stuff here language is it sensitive content there's also things but basically I'm just going to say status choochoo and there we go hi why did you format yourself like this what kind of crazy indentation is that this isn't right I'm gonna have to deal with that later okay so now and then in the callback what do I get I probably probably like error first callbacks I'm guessing error data I'm going to do this so let's just do say like if error console dot error error and then otherwise console dot log data okay so now here we go I have my code right I started the bot I connected there's all my secret information in credit card number and and secure numbers embedded in there somewhere here's my status that I want to post and there we go and hopefully nobody's already hacked my account and posted stuff so let's go look over here okay wait no I'm in the wrong account where I got to go to box in space and I got to go to my profile which is anything yet somewhere it'll show up here where's my profile this me that's local who knows okay let's run this code node bot dodge is okay we got an error Mastodon is not defined wise Mastodon not defined because I used a capital down here and I didn't use a capital up here so this Mastodon importing the whole library is now a function that I can call to connect so let's try this again ooh that seemed to have worked except it didn't console.log anything how do I tell if I mmmhmm that things seem to work hold on time out for a second I did path of status not statuses okay so so that didn't work alright so how am I going that didn't seem to work thank you Wilbur in the chat who just told me that I actually put the wrong path here yeah so if I go back to the API documentation you can see the path the endpoint is statuses plural so let's try this one more time statuses and now let me run this again ah look and we can see we've got all this metadata back because it was successful if I go back here if I go to boxing space look at that there we are choochoo okay we did it we successfully made our first Mastodon bot that is posting just from just from the node directly to Mastodon okay so there's a few things that I want to show you next I would like to show you number one is how to effectively hide your you can open source your bot but still hide your your client secret client code all that sort of stuff so I'm going to show you that and also we'll just look at some of the other parameters for some of the other parameters for posting I'm getting a lot of notifications that sound you're hearing is the Mossad notification where are we three how did it get to be 326 geez Louise oh no but I have to I I started at 230 authoritative okay I like this all right I got to do a couple things number like I'm sorry you all of you who like your four spaces of indentation I don't know where that happened how that got changed in my where did that get changed but I can't tolerate it where where are these things lips hold on satting is closer to the top okay fontsize ah there we go there we go it just went right past it okay you know user settings I know I want to use her everything okay how come that doesn't do I actually have to change something no no what why sit here Oh director like Reap I skipped it and uh you guys are behind me why why I can't I can't continue this setting is overridden based on the file contents when editor detection is on oops I want to turn that off then oh I see because that makes sense that you would have this editor editor detection hold on come on well it's the oddest round is it because it like detected for space and now if I take out all the floor space you can't detect it and it will go back to two spaces for ah how do I change this I know it cheats out to four from two to look at that for when you open the code file at the bottom right you have to change it Oh change view ah okay oh my god everything's okay now whoa well I was robbed that was really details really bad okay okay whoo whoo I'm sweating like a crazy all right all right everybody all right so here's there's a couple options okay dot so I've never actually used dot env env package before I what I always do is but so and then so I would make a dot env file and then I would get ignore it when I yeah okay so let me try doing that okay okay okay all right okay okay Oh a nicely let me recycle the camera okay I am back I'm going to do some I made a mastodon bot all it did so far was tweet tweet it to knit ah to tweet blog post who knows where all this stuff is all I know is that it said choo choo so I would like to show you some more things to make the bot a little bit better before we move on and hopefully start making some actual interesting examples of different kinds of BOTS you might want to try to make so the first thing that I want to do is actually I don't want to have all of this all of these secret keys and everything right here in my code because I'm gonna upload this as an example for other people to use I want to be able to hide that stuff away but still use it and there's actually a wonderful node package thank you to Alka for the suggestion called dot env so I'm gonna say npm install dot env we install this node package and what this allows me to do is create environment variables for a particular project and that way I can upload the code without the values of those environment variables but anybody who's using that code could set the own values set their own values of that those environment variables so what I'm going to need to do is create a new file I'm going to call it dot E and V so it's kind of like these you can see it right here it's like a hidden file dot and V it even has this crazy settings thing and then in this oh look there's all these extensions I could use probably to like format it and all sorts of fancy ways but I'm not going to be fancy what I'm going to do and I'm looking over here because thankfully alka gave me some suggestions I'm gonna say things like auth token equals client secret equals and I'm going to say client ID equals I think those are my three things so they're in code client key is this I'm gonna put this back in here client key okay because client key is what I meant do I need to does it need to be in quotes maybe somebody can tell me maybe it shouldn't be in quotes actually I'm gonna get the client secret I'm gonna go back to the env file and put that in here right now I'm using single quotes which may or may not be correct then I'm gonna go back to my code I'm going to get the access token and I'm gonna call it access token just to be consistent with my naming and now if I do this I can now go to my bot and I can also say constant iya en v equals require and then I want to require a dot E and B and then wait timeout for a second choir dot E and V dot config oh and I need to walk and fake okay no quotes okay a sample one yep yeah yeah okay I will do that without quotes okay okay okay actually just for consistency's sake maybe I'll make this capital letters I don't know then I'm gonna say then I need to call Ian V dot config which will load it the chat thankfully help me out that I do not want quotes here these are just the values and then I should be able to now down here so I should be able to say ah I should be able to say process en v dot client key so I should this well now is that right process env let me take a look I have the documentation over here yeah I think that's right so I should be able to grab those environment variables whoops just like this then the client secret then I should be able to grab this one and say access token who knows if I've made some mistakes but let's try running this now let's choo choo choo choo choo choo let's say choo choo twice and let's run this alright I think this might have worked and we can see oh this is the wrong page again choo choo choo choo ok we can see that work so the all of this stuff is now hidden inside my environment file and what I'm Goll so going to do now is I'm gonna make a I'm gonna make another file called dot env sample and then I'm gonna copy this into there whoops except I don't know how to use this computer thingy do that again lately go away I'm going to copy this into here and then I'm going to take out all this stuff I'm gonna make because eventually I'll put this on get I'm gonna make a file called dot get ignore and then I'm going to say dot E and V so basically what I've done is I'm saying hey this is my file dot env that's my file that I'm only ever going to have locally on my computer but when I publish this I'm gonna publish a sample one which has information basically about what you need to put in there and then I'm gonna make sure that the actual dot env file is not included if I ever check this into a git repository uploaded on github so to speak all right let's make sure this works still working we can go here and I've said ok somebody definitely hacked my bot which is great because I had my keys up on the screen well done whoever you are and I am going to take a break and regenerate my access keys so that nobody else can hack my BOTS keep them hidden in my environment file and then I am going to before something bad happens I'm gonna just close out of this window and I'm gonna come back and show you more about writing Mastodon BOTS and I'm going to I'm going to show you this fun thing called spoiler text and how to have the bots post to Mastodon periodically every so often okay so see you in the next video alright so I am going to now go to choo choo choo choo does space know no BOTS in space can never remember which thing I'm at I'm gonna go to settings developer development here we go I'm going to say goodbye to the screen everybody I'm now gonna regenerate my access token the client key and client secret I don't think change they're the same so well you all have those but you cannot have my access token which is all unfortunate actually you know what maybe I should delete this one I'm gonna delete this one let me see if I can delete I'm gonna delete it and start over sorry that you can't see what I'm doing because it's actually not so great for everybody to have the client secret and client ID cuz you could still write a bot and then like authorize with for the access token so I'm just gonna regenerate everything I'm gonna hit a submit and then I'm gonna get those now I have all three new things you can't see what I'm doing token that was the client key actually client key client secret sorry that I have to narrate this an access token save save clothes clothes bring that back and now let's just run this one more time great alright thank you I hope you all enjoyed your time hacking my bot alright one more time everybody [Laughter] delete it's all gone new application code extreme example bot coding strain calm submit here we go I got a new client key everybody new client key clanky now I got a new client secret it starts with f7 a new access token and now I'm gonna close both the dot env file and I also going to get out of that page um and I am going to bring this back up now I'm gonna make sure it works there we go go here now there we go alright now we should also do some stuff can I quickly hold on a sec most people put the require okay I will fix that Thank You Alka for a comment about where to put the require alright so now let me just do something real quick what was I on BOTS in space login what was it called coding trained bots email address Daniel at the coding train calm so I just want to add a like a header and stuff and I have it on this computer so sorry you can't see what I'm doing rainbow oh no I'm signing up ah login okay and edit profile somebody I'm getting like a lot spammed here oh no Sam is just favoring a lot of my statuses I'm going to at get an avatar here where can I find this here we go I like the semicolon alright okay I can play around with the well you know what that's the look at that crazy Sam I go hold on I'm just gonna just go change this there's a different semicolon I meant to use this is very important this is exactly what I need to be doing right now edit profile just told us it's very very important that I have the correct semicolon there we go that was not the correct semicolon character that is the correct semicolon character I thank you very much okay now okay okay let me get back to the chats here and here we go okay cycle the camera I've got about 45 minutes here so you can keep going alright I'm back again this is another video I'm just continuing making this mastodons bot and I got some good tips first of all I get kind of like a goofy thing here this dot env package for its I guess good practice or a convention to just put it the first thing and I can just call dot E and V dot config I don't need to save it in a variable I can do this just in one line of code so let me clean that up that's a little bit nicer now the other thing that I want to do is I want to make this bot post every so often and so a quick way that I can do that is with the set interval function so oh you know what I should also do look at this let me show you something so one thing that I often like to do so if I run this right now I'm actually just ran it you can see this is all of the information that I get back when I visit the response from Mastodon after I have to did awkward I'm gonna get I'm waiting self aware of what people are going to like post in the comments for my editing this is the response that I get after I post to Matt Mastodon so I get each toot has an ID it has a timestamp it has metadata about whether it's a reply to something yes its content you can see it's formatted with HTML so what I actually would like to do is not just console.log all of this JSON data to the to the console I would like to just pick and choose a few things to console log out as kind of debugging information and also something that I often like to do just to kind of like help me with this kind of stuff is use the built in node a file system package so I'm gonna require file system this is not a package I need to install it just comes with no to know whatever no you're using and I'm actually going to say right here I'm gonna say filesystem dot right file sync which is a synchronous file writing and then I'm gonna say I want to write this data actually the path is first and then the thing that I want to write which is probably json dot stringify i want to stringify the data and i want it to have space space tabs and then i need to write this file out so I could just say data JSON and then if I run this again we should see now all the sudden I have a new JSON file that appeared in my directory here and I can look at it and now if I want to kind of like figure out what's the data that I get back I have this as a reference so I can now and I could time stamp the name of the file and all sorts of things like that but I can now go and I can just comment this out and I can now I could be more thoughtful about this and I could say you know console dot log you know success ID and then I could put sorry I need to go back here and I could say it's data dot ID created at so I would go back here and I would say data ID plus data dot created at you know what you know about what's it called what's the thing called template literals working today it was working on Friday I had that spicy food for lunch and it really did something to me that what it's called template literals JavaScript yes actually this is a good book I really should just do a separate video on this entirely because it's such a wonderful feature of JavaScript now but I can actually you know how I'm always doing this console logging some text and then some variable stuff and I'm joining with the plus and concatenation you can use something called template literals which is a way of embedding expressions inside of a string and the way to do that is with instead of quotes with backticks so if I put a back tick at the start and the beginning I no longer need this plus I'm just gonna I'm gonna get rid of all this nonsense except you know idea I'm just gonna do ID and timestamp and so now this is a string and it has basically like I want ID this is what I want to literally see and hen what I want to see is the value of this and the way that I do that is with dollar sign curly bracket curly bracket so now anything inside of here is an expression so I could write 4 plus 7 and it would it would it would it would put 11 in the string and then I can say timestamp II I can make this like this and now we can run this again one more time no dot J yes and we can see this is what I get now ID and timestamp so this is what's going to I'm gonna see and maybe I'll be useful for me to also put the content there who knows what I want to login console dot log but I want to be more thoughtful about that not just spit out massive amounts of JSON data okay let's get to the good part now what I want to do is my first example of a bot is I want to make a random number bot so I am going to say I'm gonna use template literals again I'm going to say the meaning of life is and then I'm going to use an expression I'm gonna say math dot floor mat you know let me put this in a separate variable constant num equals math.floor math.random times 100 we'll see if we get 42 and then I'm gonna just put that here and now this I bought should now post the meaning of life is this random number so math dot random gives me a random number a floatingpoint number between zero and one I multiply that by a hundred so I get a number between zero and 100 I mean technically the highest number is ninety nine point ninety nine and a nine and then math dot floor takes off the decimal point so I now have a ran number between 0 and 99 I could add one if I want between 100 whatever that's not the point the point is now and you know what I really would like to see from the console what it posted so I'm also just gonna do this console log data dot what was it if I now I can go back to my data JSON and it's going to be where is the content content just data not content so I'm gonna say data dot content we're getting somewhere so let's run this one more time success the meaning of life is 95 okay to forget it we can go here we can double check and somehow I went away from there the meaning of life is 95 great okay now two more things I want to do make this bot exciting I am now going to use set interval so the idea here is this is all of my code to post to mastodons and again if this is new to you if you've if you've just been watching my p5.js videos this weird syntax this arrow syntax part of es6 javascript might be unfamiliar to you i will put a link to a video where i describe what arrow syntax is in this video's description okay so now what I want to do is all this stuff here is basically just a function called toot alright because what I want to do is this function will pick a random number create the status and post it what I want to do is I want to say now set interval and I want to do this toot every 5,000 milliseconds which would be every 5 seconds now this is a bit extreme this is problem this is not really appropriate bought a ticket to have a bot that posts every 5 seconds so you know probably a much more thoughtful way of doing this if you're gonna bought that posts an automated way maybe it's a word of the day or a haiku of the day maybe it's just once a day once an hour what's an hour might be really the maximum there but just to test it I'm gonna do it every five seconds birth like burping on a live stream and I guess I can take this moment to thank pa7 war welcome to as a new member I'm going to I'm going to run this every five seconds which is reasonable just for testing something interesting know about set interval is like what if I make this like every 50 seconds if I run this right now I'm gonna wait 50 seconds for it to do the first time so and that's not really such a great thing so I am going to actually also just call it once first and then do it every five seconds okay here we go meaning of life is well it really picked 99 that is awesome and it's 48 oh we're getting close to 42 we can see it's doing this every five seconds I'm gonna quit out of it and I'm gonna go back to here we can see there it is these are my posts that I did you can see 10 seconds ago 10 seconds ago now I mean this is really five seconds ago all right so here's the thing I want to show you there's so much more remember how I made this these parameters all I'm doing is saying this is the status that I want to post automatically from my node program well one of the things that I can actually do is I can go back to the documentation there are all these other things so media IDs is something I really want to show you in a future video it's a way I can include an image or other media with the with the post but one thing that I could do that's kind of fun is just this spoiler text thing so what spoiler text does it allows me to have sort of two aspects to the post the meaning of life is and then the status can just be none so I'm going to break this up into two parts and I need a comma here and I'm just going to show you what this looks like so I'm using these parameters different properties of the JavaScript object that's going to go here into my PO call and I'm going to now run this one more time and I'm gonna go back to my bot and I'm gonna look and you can see look at this the meaning of life but I now have this nice water button so spoiler alert if you click on this you'll see that it's 52 or that it's 23 and again I'm doing this too often so I'm going to absolutely quit this and then if I wanted to do now if I want to have my bot post once a day every 24 hours I can just go right back to my code and I can say get set interval should be 24 hours there's 60 minutes at 24 hours 60 minutes an hour 60 seconds an hour and 1000 milliseconds in a second so now here we go we now have a bot Mastodon bot that will post a numeric meeting of life once a day so in theory if I just left this running here and never closed my laptop or never did anything this would just run forever and once a day post the truth of the matter is gonna have to think about well once you've created your bot like where are you going where's that bot gonna live I mean you could have it live on your laptop or computer that's always plugged in and always connected to the Internet but more likely you're going to want to host it on a web server on some sort of server or maybe get a Raspberry Pi and plug it into the wall and have it always sitting there connect to the internet I will cover that in future videos in fact I have covered that for how to deploy a Twitter bot and ultimately it's exactly the same thing but just now the code has changed it's working with Mastodon okay so I'm gonna show you a bunch of other kinds of things you can do in BOTS most notably listen the streaming API whoops most notably listen using the streaming API so the streaming API is a way that I could connect and I could say anybody anybody ever mentions me I could reply to them so I gotta have a bot that participates in a conversation one thing you should really think about I'll talk about this again at the beginning of the next video I mentioned BOTS and acket etiquette but I if you really want to be thoughtful about making a bot that's not suddenly going to spam people so it's not gonna just pick random Mastodon users and start at mentioning them or start picking random posts and replying to them you really want your bot to engage when people opt in to engage so maybe you only want to post messages to people who have chosen to follow the bots are chosen to mention the bots already in in a particular post so I just can't say it's a post because I haven't gotten comfortable just when I got comfortable saying tweet I'm now the longer comfortable saying toot but I'll get there I'll get there eventually ok see you in the next video all right ok how are we doing everybody okay so I think I want to use the nice work David Hall look at all these people following along so nice should probably turn off so what how much time do I have here I want to let me make a list of stuff that I want to do like if I think about what my Twitter bot examples used to do sorry this is from my program if ages eCourse last year and week for Twitter so I guess it's useful to show it's definitely useful to show how to like reblog and reply I think that's what I'll go for next and then how to do an image okay I think that's makes sense so we need the streaming so I need to use the stream so I think what I want to do also is duplicate this so let me close all these files it's four o'clock I don't have a ton of time left but I would like to get a little further oh it's just ok where am I doing here let's make a folder called Mastodon let's put Mastodon bots in in there let me call it but one and then let me just duplicate it oh you know I I'll mention this ice Troy I forgot to put node modules in the get ignore now let me go here close this so now I have both of these this chain doesn't change this I can so I can get rid of all right this is fine not touch a yes I guess I'll leave the code as is let's spot one I'm such a doofus this one is 2 this one is 1 and here we go ok ok seems like I should have more space here ok okay so I think I'm ready for the next phase of this and Oh screaming API that's what I need to remember how I stream the stream user okay okay okay and I think actually is this yeah there we go perfect okay perfect okay sowhat's ah come on alright I'm ready I can do though I've got a half an hour here I can definitely do this next piece ah okay alright everybody here we go hello alright I'm still working with Mastodon and what I'm going to do in this video now is I'm going to take the sample Bock that I made and instead of just on a timer every 24 hours every 60 minutes I happen to post something I what I'm going to do is I'm going to use the streaming API the streaming API is a way for me to in real time listen for events and the particular kind of events that I'm going to listen for are what's known as user events so a user event and will see all the different kinds as any time that I might get a notification or somebody that I follow might post something or any time that I might real good anyway there's lots of things that come in user events and these are the good ones to use because if you're using your user event as a bot you're sort of making sure that your bot only engages with people who are opting in and this is pretty important you don't want your botches randomly spamming people and favoriting random things or replying to random people who haven't really asked to engage with your pot so you're gonna want to make sure that your bot follows the the code of conduct and the terms of service of box in space I'll show you where you can find that but typically a good way to think about is just like if somebody is at mentioning the bot then you're welcome to reply to them if somebody follows you then you're also welcome to engage with that person as the bias as the bot programmer okay so let's go over and look at the streaming API and let me actually go to bots in space about okay so before I before I start using the streaming API let me just point out to read the information page with the code of conduct and also the Terms of Service if you're choosing to host your bot on bot send dot space you're gonna want to make sure you follow the rules of the space okay now what I'm going to do is I'm going to start using the streaming API so the way that I do that and we can find it here remember this is the node package that I'm using mastodons API and is basically what I want to do I want to create a listener and whenever there is a message I want to take a look at and do stuff act upon that message so let's actually do it exactly this I'm gonna keep the error one in here as well I'm just gonna copy paste this into my code I'm gonna comment out this auto posting thing that I had before about the meaning of life I'm just gonna put this here and actually what I want to do now is I want to use my little trick instead of just console logging the message if you remember a little trick that I did in the previous video is I used write file so I want to write files out so I can look at what kind of messages I'm getting oops ah where have I gone and so let me uncomment this out and I do want to put like a timestamp also here so it would make sense for me to say like data and then actually the message probably has a timestamp built into it but I can also like JavaScript timestamp I think it's just like new date get time yeah so I can say a new date get time I think this is right so again you can put with template literals I can put a whole string to eval eval u8 in essence inside that area okay so let's see if this works I don't know what's gonna happen oh wait let me see am I in the right place no sorry I made a new folder so I'm gonna release these examples separately and I'm gonna run this bot and now okay so I don't know if it's working because I don't know if I've gotten any notification maybe somebody watching this live is gonna favorite something or @mention my bot that would be nice right and then something would come in for here I kind of think that maybe there was actually a mistake in the mastodons api's documentation because I have a memory when I tried doing this earlier that the event was not message but MSG short for message let's be sure about this oh oh wait no no okay so look at this somebody did somebody did so Mattia let's that is correct so you can you can edit out my room go from when I was sitting there waiting to edit to now oh I did get a message from somebody but I made some sort of mistake data is not defined okay because oh yes it's called the variable name is an MSG for message which is why I was thinking that I guess so it should be MSG here okay let's try this again and actually I'm just gonna take this out and I'm just gonna write console.log user event all right everybody are you watching are you giving me some user events here we go waiting for my user events user event let's get a bunch more okay I think that was enough user events thank you very much let's go back and we can see here that I have all of these data JSON files for all these events so I can kind of click through them and see what kind of events I'm hoping that the kind people of the internet are not spamming me with horribly thing horrible things and oh by the way if you want don't want your information appearing up here maybe don't but these are just people's Mastodon accounts so we can see this was a follow event it's an event of notification it's a type follow so let's do this right now let's respond to that so what we're gonna do hold on a sec pause blow my nose so the first kind of event we got here is a follow event so if the event is a notification of type follow we could act on that so let's do that let's say let's go back to our code and I'm gonna say right here I'm gonna not write these out anymore if if message dot what was it again a message dot event equals notification and I think there's going to be different kinds of notifications so I'm gonna say then if message dot data type follow then what I want to do is I want to get the username so let me get the user name and that would be where it would be right there and actually I want the account the username is useful but you always unmasked it on need both the username and the instance the address of the instance the host name so let me grab a count equals message data count and then the other thing that I pretty sure that I need is the ID maybe seven six seven zero that's the account ID this is the I don't know what this is the ID of the event I guess so I want that account ID so I'm gonna say constant ID equals message data ID oh that account I forgot about it can also message that data dot account that ID that account dot account and then dot account ID and then I want to send a message so how do I do that just with this nice and post so here's the thing maybe I want to make this quoteunquote to to function a bit more generic and I'm just going to give it a us I'm gonna pass in a status so I'm gonna get rid of the random number stuff which was from before and then I'm gonna just put there's a little confusing but I'm gonna take whatever I pass in and then and then here is and then I'm going to post that so now I have a function that I can basically say toot and I can say I mean used at data dot message da da da da to count right at this is me referencing the person that followed me you know thank you for the follow and I should be I'll just say choo choo welcome aboard that's a train themed welcome aboard ok so we could see it'll say welcome aboard now here's the thing hmm I really should also if I go back to the API this one I should probably say in reply that's the reply to this step I guess I don't need it's not read reply to a specific status so this is actually fine I think as long as I just mention then I'm done so so let me go alright I've lost my code let me go back I think I'm good so now I think that I have everything I want so I am let me just put the listened on error up here so I'm listening for a message if the message is a notification of a follow then I will talk back to the person there their account name and say welcome aboard and let's see how this goes I look forward to all of you now you can unfollow and follow if you already followed but let me run it first and here we go okay have a status status I have a mistake here I'm just gonna change this variable name to like txt or content let me make it content cuz I don't like having the same name everywhere it's confusing but there should be no semicolon after there okay here we go welcome aboard welcome aboard okay so you can see a bunch came in and now I can go back here and I can go to here and we can see look at this these are all the people who have now and if I click there we can see where it's it's showing me and going to these people's accounts yay so we now have a bot that responds to follows pause for a second oh right I'm such a doofus I'm almost like my nose is running allergies I think okay alka from the chat pointed out something here what did I do oh the whole point of me making this variable was so that I don't have to write this all out here I don't know why I did that so I can just do this this will make it much more readable and actually don't need the ID so I can take that out so this is all I need so we are done all right so this is follow now I'm going to show you something in the next video I think I'm going to take a break and in the next video I'm going to look for messages that app mention the bot and then I'm gonna have that bot act on those either reply to them or favor it or do something like that okay so that's what I'm gonna do next someone just mention okay all right I'm missing a semicolon there we go thank you okay okay what's this delete message favorite we're gonna how I get a minute I want to mention oh here we go type mention okay great okay okay every now we look over the chat it's a message about csharp versus C++ Python Java you think everybody's watching a completely different live stream it's not me on it okay okay I'm back again oh so many mastodons videos this now what I want to do is look at how I can deal with a mention a mention is when somebody else toots posts and mentions me the bots in their message post so and this will come in as a notification event type mentioned before I dealt with if I look at my code in the previous video I dealt with anything that is a follow so now I want to say else if message data type equals for a mention so I want to deal with a mention so what I'm going to do in this example is if somebody says please like or favorite or something like that I will like or favorite if someone says please boost or reblog I will boost slash reblog so I'm actually gonna spa I'm not gonna I'm not gonna toot back but I'm going to act on the message based on what the content is so the first thing that I would might want to do is I could use a regular expression so for example I could say regular expression one is and if you don't know about writing expressions I'd refer you to my session on regular expressions if if like or favorite or maybe the hearts emoji how do I get emoji hold on there's a way to do the emoji keyboard no how do I get it on that with the touch bar can I just get the touch bar no wow that's weird hold on emoji touch bar mac how do I like make it happen this is really good useful oh if I do something like this will it just pop up no because it's got to be like in email or something stupid Dutch bar okay Mac whoa gee keyboard command control spacebar that's what I was looking for no hey there we go okay there we go oh yeah all right all right can make this regular expression I can say like or favorite or like maybe if somebody uses a heart I don't know is this the regular heart this is the regular heart I think I think so now I basically want to look so what is the content so I need to look at this is the mention I want to look at the data data dot status dot content okay so I need to say content equals equals data status content and I want to say if regular expression test content so I'm pretty sure this is a function that if I have a regular expression if the regular expression is match somewhere within that string content this will return true so if that's the case I want to say m dot post m dot posts and then what so I need to go back and look at the API documentation because I want to favorite it so if I go back here and say look I'm favorite the the the pack to favorite is statuses the ID and favorite so I need to say post to and so this is what I was doing when I want to post something I would actually just say statuses slash and I want to make this a template literal once again I need to put the ID in here fav it okay so this is me if it matches favourite it and then I need to get the ID so the ID is under data status ID that's perfect data status ID and then there are any parameters that I need here so I can just go straight to the callback error data and I can make a little function here and I can say you know if error console log console error error else console.log favorited and presumably this is going to look a lot like this I would imagine favorited ID so let me just do data dot ID I'm guessing so just to like have a little more information in here favorited data dot and by the way this is message message dot data message data and this is favorited data ID okay so let's see here what's go what's wrong something is terribly wrong I have I'm out of whack in terms of my brackets and things so oh this also needs a end tick there we go and now a semicolon okay so apologies that this is hard to see here let me see if I can remove this over give myself a little bit more space so we can look at this code okay let me just make the font a little bit smaller there we go okay so what we're looking at here is if if it's a follow we're just going to say thanks for the follow if it's a mention we're gonna see did the mention use the word like favorite or heart if it did favorite it and then give me some information about whether it worked or not so probably I also should do something like say console dot log just in case them just so I can see what them the message has I'm gonna say console dot log a mention ID and then add content okay we are gonna run this whoo oh yeah what did I lose something weird happened here I also need this oh boy template literal come back we tried to reform out all this stuff oh so sad hold on we're gonna get this back there we go okay we're good again there we go here's our code we got it if you mentioned me check to see if you said like favorite or heart and if so I am going to favorite it all right here we go let's run this bot see if we have any errors okay it's starting all right better start mentioning me try mentioning me with with a heart with a like with saying favorite or not I will just wait whoa what's going on this is right ah something bad is happening so okay my console logging is crazy Oh what happened here did I put a breakpoint in by accident I did not mean to do that and what is going on okay hold on all right I got some weird errors here am I getting an error favourited undefined hold on stop everybody well well first let me see if this is working yes it doesn't look like it doesn't look like I am favoriting this so something definitely went wrong and what is this crazy console.log it's coming out here we've got to debug this without me with with some actual mention ID contents oh is that coming out mention id content then I'm getting favorited undefined and what is this insanity oh it's though something horrible happened Oh because when I got my when I oughta fold on this is ridiculously annoying this shouldn't ever be happening how is this oh because this is a no it's favored in the docks with the you yeah but why is this happening just run this one more time I'm waiting for somebody to mention me again my first second I thought I froze it's nice that the stream didn't freeze today alright mention okay your mention this mentioned me oh there was heart there try mentioning me with with like with just a word like line 38 at oh so favorites what's wrong it's I need to be with a you that's interesting okay I love kittens I didn't use a love favorite oh and I didn't use I for okay great so this one tried to I like turtles but it's not gonna work okay great okay alright okay so by the way weird awkward edit point because it didn't work and some weird stuff happened but I am now discovered through the thankful helpful people in the chat that I have a few errors here so number one is let's go back to the API for a second and we can see here that I didn't pay close attention it's actually spelled with a u here I D favorite so this seems kind of important that I spelled correctly so let me fix that here oh but that's not actually the important place the important place is here and then a couple other things I want to use a flag for I for for a case insensitivity in other words you can also the you should be optional here that doesn't really matter so u is optional so you can say like favor it I don't still not sure if this is the right kind of heart that normally but now this should fix that that I should now actually be favoriting things so we're gonna try this again I'm gonna go back to here and I'm gonna run this bot again and I'm gonna wait Oh lime 38 something's telling me what's wrong with line 38 no I want the ID of the thing of of this event oh I see oh look so this appears to be working okay so we can see oh oh why are my settings not being retained on this computer all right just give me a second here where is that thing where it doesn't uh yes here we go okay all right so okay I'm back a lot of people mentioned me let's go take a look at the actual timeline we and we could see that it is favoriting and we are getting an ID out you can see that this idea is different than this ID and some people are asking about that I will I will let me mention that in the chat in a second in a second but let me go here so you're my favorite mmm how come it didn't ah there we go I just had to refresh so we could see this got favored it because it has favorite in it this got favored because it has a heart this got favored because as the word like I'm looking for one that doesn't have oh this must have been from a while ago and it wasn't working but we can see here now please like please clap so please mention me without using like favorite or heart to make sure that also works I'm just gonna wait this Alette will edit this waiting part out it's 430 okay I'm back and we can see here that K week Mon wrote coding book train bought choochoo and if i refresh this page it was not favorited so it is working only now it should be only if and if I go back to the code only if this regular expression matches will I favorite alright and by the way we could really quickly now just also like there's probably a nicer way to do this but I'm just going to really quickly like copy paste this whole thing and I'm gonna say boost or reblog or or retweet even or let's get another emoji in here control option let's see if you use a a train emoji or if you use the train emoji then we will reblog so now if I fight quickly run this again I'll make this reg x2 if reg x2 and I don't need to I don't need to get the content or the ID anymore and I don't need this again I'm so now this is just and I probably it probably makes sense for me to actually put this up actually you know they could both happen so here now I this will boost anyone that says boost reblog retweet or the train and and Miller mentioning this is a mistake here so this data ID this is actually this is the ID of this the actual favorited action which everything every action has an ID so if I if somebody messages that mention has an ID which I captured up here so but this is the ID of the actual act of favoriting it so I don't know debugging wise I don't know what's more important to display I could display both of them but you'll see those are two different things and this should say reblogged and this should say favorited so let's now do this and here we go everybody you can now ask to be favorited or rebo all right a lot of mentions came in you can see some things are being favored at it and reblogged some things are just being reblogged let's go take a look at the timeline and let's look at this did you know mmhmm I don't oh yeah I love trains this got boosted coding trained bots that got boosted and this one reblog this I want the followers like it too and we got both a reblog and a like okay so this works we now have a bot that had that both that just checks for follows mentions and follows and mentions if somebody follows it toots back welcome aboard to that account and if somebody mentions and uses any of these keywords and either favorites or reblogs so the thing that I didn't do which I which I should add to this I guess I'll to know if it really makes sense to just keep doing more videos about this but yeah I'll do another video where I'll add this but you might want to try this as an exercise what how what about actually replying what about posting an actual reply back to the person so if the person asks what is the meaning of life then the bot replies with a random number or something like that okay so give that a try I'll add that but I'll do that in the next video okay goodbye all right I'm gonna go but I'm gonna just finish off this last little piece so let's see it really should go I'm just so amazed that this hasn't crashed I was really expecting the stream to crash especially cuz of the word beeping happened who knows who knows all right I'm kidding a lot of mentions alright let's let's just finish this off let's do this last one that's awesome okay thank you terney KH for this alright here we go hello welcome to video number seven thousand six hundred and twenty nine about mastodons Potts I have been on a journey a journey to come along the tracks of Mastodon and I have I started from nowhere and I have arrived to the point where I have a box it's called coding train bot and what this bot does if you follow the bots it says on the board and if you toot at the bot and use a certain keyword favorite or read toot boost whatever it is your particular post and I want to add one more thing to it so I want to be able to respond to a question so let's just say I'm gonna look for any post at me that ends with a question mark this is gonna be tricky because there's the HTML tags in it I'm just gonna look for a question mark I'll let you make this fancier so let's add one more check I'm going to constant reg x3 I'm just gonna look for a question mark so question mark is a meta character so I think I might have to do this back slash question mark or so I want to look for a question mark if reg x3 matches the content and by the way this is but this is by the way the how this is like the very basics of making a chatbot which is just doing like it basic pattern matching um you know now chat chat box systems use machine learning and try to category categorize what people are saying into intense and do all sort of text analysis but it is a core level you could just use regular expressions trying to match with somebody saying and respond accordingly and if you I do have a set of videos about rive script which is a pattern matching utility that you can use it any programming a number of programming languages but you can use it in JavaScript to build your own chat BOTS so this is you know interesting to think about what what what do you want your bot to actually do but in this case I'm just gonna use regular pressure I'm gonna look for a question mark so let me just actually make sure this works I'm gonna say I got a question and let me look at the content so I think I'm gonna not always console.log the content anymore I know that's working so I just want to now I want to just look at it console.log data what was it called did I put it in a variable content so I'm just gonna look at the content so I am now going to run this you know by the way if you're doing this on your own you're gonna want to have a second Mastodon account where you can then test it I am struck with a weird crazy person who does the sort of stuff on a live stream you apparently I just assume that though people out in the world watching well interact and hopefully be kind okay now let us run it again let's see if we can get some mentions with a question mark in them and see if oh there we go okay so I got a question okay ooh that's interesting oh I got a question oh that's not what somebody who said to me why with a brush mark okay so that seems to be working so I'm gonna assume that that's good thank you for that and now what I want to do is I want to say I want to I want to do i want to create sorry a reply so I'm gonna say a reply equals the meaning of life is and I'm going to use this this oh I have this from before by accident luckily is numb but and then I want to just send that reply but here's the thing a couple things one is I want to mention that person so I did that before when somebody followed me so I can do at and then the account which I should still have hmm I didn't actually save the account so if somebody mentions me where do I get the account data account accounts the same thing so I can actually go back message data account I actually I think I kind of like always want this so whether it is a follow or a mention to whoops so I'm going to put this out here so I have access to that account sorry that the font got smaller here hopefully can still read it so I want to first mention that account and then say that but but here's the thing you can mention but it's not going to actually understand it as a threaded reply unless I include in reply to ID so I actually also need to get the ID which I have here message data status ID so what I'm going to do is I'm going to over load this function with a second argument ID and I'm going to say in reply to we got a look at the documentation I don't remember what it is but if I look here oh it's actually under over here in reply to or reply to oh no I'm in the wrong place I'm totally in the wrong but I was in the right place before in reply there we go I'm looking for in reply to ID so I want to grab this and I want to put this here and then I want to put in the ID and I guess what I want to do is the thing is I'm gonna do it this this is a little goofy there's probably could use some fancy ternary operator or something but I'm just gonna say if ID exists then I'm going to add it cramsey in reply to ID equals ID so it's not gonna it's all it's big whether or not if I send into this function I'm always going to send in this function some content that I want to toot but if there's an ID I also want to add that in so now we should be good if somebody asks a question we are now replying with at that person oh and this should have an @ @ that person did I do that up here when I yes @ account so at account the meaning of life is and then the number okay here we go let's actually run this you can now ask me your questions and I will wait alright I'm back and a bunch of people are at least two I got two mentions so if I go back now and look at my bots account hopefully it's not too spammy are you for real and then we look at this we can see the meaning of life is 40 and this one has a question like this yes we can see the meaning of life is 65 and I'm just curious if somebody was looking for one that also has the so this one for example some fake Dan Schiffman this one was both favorited and boosted and replied too so this bot will actually do all of the things it is now about oh look at this I'm just gonna favor this manually by the way everyone should look at Alka anbal Lisa's room table it's wonderful I am will be releasing my ELISA Zhu coding challenge video very soon and here you go so this is it we have now finished this up we now have made a bot we've seen how a bot can post periodically with set interval something and you might come up with an idea of what you want to do we have now seen how a bot can favorite or boost things and reply to things so now it's time for you to be creative what kinds of replies what kinds of activity maybe you have a bot that makes up a poem I haven't shown you how to generate an image and post it so I will show you that I've got to make a video to show you how to do that but there's all sorts of wonderful possibilities of how you can make your automated bot use it on mastodons at BOTS in space okay so choo choo everybody see you in a future video I hope you enjoyed this series about making a mastadon bot more to come in the future I I'm sure goodbye alright come on come back yeah an undefined one would probably that probably would be fine a me IM semi made a good point i imagine an undefined and reply to ID would be allowed to mean there isn't one so i probably didn't need that extra step but i did do it alright so i this bot is i wonder if i should deploy this spot somewhere so that people who watch the videos can interact with it but it hit 42 where where where where where oh there we go so my desktop there we go there we go okay all right everyone this by the way if is my I am now on Mastodon at Schiffman at choochoo dot space again unfortunately right now I am leaving choochoo dot space closed for YouTube members or patrons and I would gladly open that up sorry open that up if if it makes sense to do that at some point alright anyone have any questions I want to ask I think I'm finished for today it's almost 5 o'clock you could deploy it on the same box choo choo dot space instances on exactly that's what I'll do we mentioned do that real quick right now I'm afraid to log into that instance ever alright anybody any anything else to say to do to wonder oh let me mention let me do something right now because I have so many videos now I'm gonna go here most recently this style transfer video posted let me go here and post the next one so I would love people to try out the style transfer thing and see if you're able to follow it so the second style transfer video part 2 let me just check this to make sure I'm going to post that one now so in a moment I'm releasing I don't have the YouTube premiere thing unlocked and Mike I really want to get that unlocked in my account because I think would be fun to interact live the first time a video post it even though it's like the second time it's just in a live stream but you know so I'm gonna set part to public and I'm gonna say actions public I understand that I can't undo and now we should see here just released on the channel pending nope come on YouTube Eitan asked will you explain how style transfer works in more technical terms if you are interested in that you should check out and let me let me show you where to find this I don't know why it's like taking a million years to set this video to public it's kind of ridiculous oh it was successful so now part two should well hold on let me just you know it'll appear eventually I'm gonna go to playlists on my channel and I'm going to go to this one and here so this is the full playlist right now of the machine learning videos using the spell platform and this is my introduction to the spell platform this is the style transfer video of how to train your model so I'll transfer model and this is the style transfer video how to actually run the style transfer model in the browser with ml 5 j s which runs on top of tetra fluro chess but um Eitan and the chat had asked about explaining style transfer in more detail I would refer you to so both of these you can see this is about 50 minutes these are edited out of the 1hour 26 minute livestream just to give people sort of streamlined versions of the videos they just want to follow the tutorials but if I go to the live stream and if I go to the description sorry this is like well this is working now never forget that this dot tshirt aisle we're factoring tshirts and things if I go to the description is what I'm looking for show more yes this at four minutes and 28 seconds this is where inning begins her presentation and in this presentation I can just put it quickly on like speed hold on speed two times so this is where she gives her presentation while she talks through the details behind what where style transfer comes from and how it technically works and how the training so all of the number one and two what does style transfer and how does it work you'll find here on numbers three and four have been edited into shorter videos okay so that's where you can find that information and please I'm really curious this is like high degree of difficulty stuff to like train a model to deploy training that my own to the cloud so they'd get the train model to run it in the browser if you're able to get it to work please share with me and let me know I know Twitter or mastered I guess I don't know where and if you're not able to get it to work let me know try to try to send a message post a comment we'll see if we can help you out to get it to work okay so that's it for today thank you everyone for watching I will be back up on Friday on Friday you will see if I go to youtube the coding train you will see that on Friday we will be doing another neural network machine learning training livestream this time at 11 a.m. Eastern I think that's when we set it for text generation so we're gonna use something called a long shortterm memory Network training it on the cloud with a you can train it on a corpus of text and then run the model to have that that model generate new text in the same vein as what it's been trained on so that will be something that I will show and guess now Bo Husein will be here on Friday to show how to do that all right thank you everybody I will leave you thanks for tuning in to today's special coding train about mastodons and all that stuff hopefully you found this useful and interesting stay tuned hopefully maybe even tomorrow mom the Lisa's you coding challenge will come out and as always thanks for your support thanks for watching I hope you're finding this enjoyable and interesting and useful and if not that's okay too I would understand I always on Friday ah you know what I need I need a second ukulele I just gotta buy another I can't bring it back and forth from home here home here so somebody recommend now that I know that I love the ukulele I don't know I bought like a cheapest one they had a Guitar Center so I'll take recommendations can I get like a coding train themed rainbow like ukulele maybe that's it all right was it a key MCU hack the bots that's great to hear good bye everybody yeah no green no green in the ukulele please