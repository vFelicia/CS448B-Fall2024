welcome to part two of Plinko coating challenge I actually just during the little break I just took between part one and part two I made a quick list with help from the chat here's the things that I'm going to do I'm going to increase the gravity of the world so that things don't look so sluggish as they're falling I got to make sure I delete any particles that leave the window although at some point I'm going to put boundaries so actually I might hold off on that because I was going to add boundaries around the whole world so that they can't leave the window because the idea is to fill up the buckets at the bottom but uh um then I uh and I want to add buckets at the bottom to fill those things up and then I actually might make this a part three let's see if we can add a little bit of sound with say as they hit the things as a little like ding ding sounds or whatever maybe I can record the Bell really quickly and use that sound okay uh so let me look over here and see what I can do so gravity is part of something so there conceptually there's a world and there's particles and there's Plinko gravity is not part of a Plinko or Peg or a particle it's part of the world so I can actually look here in the console and I can just type world to look and see what the properties of the world are there's bounds which is something I want to look at which has a maximum and a minimum X and Y whoops which is I clicked the wrong thing come on click again you can see those are Infinity because I haven't said any bounds and then there's gravity which has a scale I don't 100% know what that is I should look it up in the documentation but I have an X and A Y so one thing I can the Y is one right now I can actually just say world. gravityy equal 2 so let me double the Y so it points Point down a little bit more and you can see can you see that that's moving let's just make it more extreme just so you can really see let's make this 10 and you can see that gravity is so much stronger right now so that's kind of useful in terms of getting things to fall a bit more okay so changing the gravity to two I'm going to leave it for that right now the next thing on my list over here was add bounds and there is a thing in the world object in addition to gravity called bounds but I'm not going to use that that's more I think for where you're doing Collision detection instead what I'm going to do is just add some um objects myself so I'm going to yet again I'm going to just from particle. JS I'm going to do a save as and I'm going to call this a boundary boundary. JS I'm going to make an object that has a x a y and a width and a height it's going to be and this should be uh a boundary and it has it's it is something that's a static and instead of making a circle it's going to be a rectangle again I'm doing a lot of redundant code here but and then I'm going to keep track of the width and the height in separate variables and um I'm going to uh say boundary. prototype. show and this should be a rectangle with a width and a height so what I've done very quickly is show you how you can create a rectangular Body by using bodies. rectangle keeping tra a width and height instead of a radius otherwise everything else is the same ah I need need to add rotation at some point don't let me forget because these things are rotating as they're moving around okay so for this what I'm going to do just really quickly is I'm also going to make an array call it bounds and I'm going to at the end of setup just put one at the bottom VAR b equals a new boundary and so the rectangle is actually thought of based on its Center matter dos I'm going to say width divided by two it's going to be at uh height um and I'm actually going to like push it off so what I want is its location to be at height plus 50 because I want its uh width to be the entire width of the window and I want its height to be if it's plus 50 I want its height to be like 100 so it's actually not going to show up on the screen but and I'm oh boundar is not defined because of course I forgot to add it to my index. HTML so I have another JavaScript file come on boundary. JJs here we go and boundar is not defined in setup so what am I missing here um new boundary ah what did I probably boundary boundary boundary that looks right uh index.html I've got boundary. JS sketch b equals new boundary H let's try that again syntax error line number three boundary. JS sorry about that uh is static true ah there should not be a semicolon there creating an object in JavaScript you separate the properties with commas with only one property I don't even need the commas okay apologies for that and here we go so now what we should see is I got to wait a little while but when the ball falls to the bottom there you got you can see that it's there's now a boundary down there so that's perfect that's what I want um and I I I guess I'm not going to make this 800 because it's um kind of going off a little too low down so let's just make this uh 600 by 700 just to push it up a little bit okay that's pretty good okay another thing that I could do here is if you notice every other I don't know if this is really necessary but it does feel like there should be another particle right here another Peg right there so that is the odd row so in the odd row uh what if well what if I just did this would anybody really care yeah that's fine there's an extra one also for the even ones I could be more thoughtful about this but that's what I'm going to do right now Okay so we've got the stuff falling down and landing in the bottom okay I definitely need to do something I was wrong uh I do want to delete particles that fall off the edge because maybe they're not all going to end up in the bottom um so I should add something where I check if anything is way off screen to remove it to kind of keep things more efficient so let's add that next and what I need to do to do that is I need each particle is the only thing that's moving so I'm going to say particle. prototype uh Dot um offscreen equals a function and I'm just going to say um what makes it off screen if x return X is less than zero that's let's let's say x is less than 00 not X okay so first of all x equals this. body. position dox so that's actually the object's location it's the body's positions X right physics the physics engine matter.js is controlling everything y equals and you know what I kind of wanted to make a nice if statement that I just return a Boolean not an if statement a nice Boolean expression that returns true or false let's just make this simpler if x is less than 50 or X is greater than I'm just going to use a buffer of 50 y + 50 uh then return true uh else and I'm doing this in a radically inefficient way but I don't actually ever need to check the top so I can actually just say return if any of these is TR if any of these are true then it's off the screen so I can use an or return the result of all of these or Y is greater than height plus 50 I'm I'm like hearing the YouTube comments already don't use a long winded if statement where you could do it in one line of code but this is like kind of cryptic to watch to read but if an or statement if any of things in an or statement are true like false or false or false or false or false or true the whole thing is true right if I'm you know uh yeah okay so if one of these things are true the whole thing is going to return true so now what I need to do is in this Loop here where I'm dealing with all the particles if particles index i. is offscreen then I want to say particles index uh particles. sput I comma 1 so I just did this in a matter.js tutorial earlier I'll link to it where I kind of went through the pitfall here because I'm moving taking things out of the array while I'm iterating through it so really a a quick fix that I can do here is just um that I did in that video is I can just subtract one from I because the problem is if I'm removing the I element the other elements slide into it and then I add one I end up skipping over it so this is going to cause me not to skip anything and this should remove anything that's off the screen and of course I have an error particles index I is off screen is not a function uh why is it not a function particle oh I just called it off screen let's call it is off screen there we go so one thing I want to do just to be sure this is really working is let's not check let's not check the bottom um let's check uh let's check you know to see if they go over 100 pixels so we should see them remove now I did I forgot some something really important in addition to removing it from my array I need to tell matter.js that it's not part of the physics anymore so what I'm going to do F I'm having like a groundhog day Deja Vu thing uh where I'm removing it I also need to say partic uh I need to say uh um particles no no no no world world. remove World particles index ibody I think think that's it so I want to tell the matter.js world so I want to remove something from the matter.js world the world function is namespaced in the world object so world. remove from this world which is my world this particular particle's body so take this out of the physics world then delete it from the array then go back one so let's see if that works uh so one thing one way to check if this works by the way is now what I'm going to do is I'm not going to um I'm not going to remove it from my array but I'm going to remove it from the physics world so let's just take that out this is a good way of debugging to see if it works so let's see if after 100 the physics stopped so that that actually did work did I get I probably got like a weird why did it that's interesting how it stopped doing anything but I can see plainly that this is doing what I want it to do um I'm pretty sure this is right um anybody pretty anybody tell tell me if I've done something wrong but I think I've got this in the right order and I can go back to my particle object and change this to like height I don't actually need the height at all I only care if it goes because the the bottom is the bottom has a hard boundary so I'm actually just going to take that out I don't need that at all so I actually don't need to check I'm only going to check if it's off screen on the why oh something froze oh I crashed this particular let's just see if this comes back and it works again okay um so this should be doing fine I want to check here's actually a way that I can check so nothing's been removed so far I can say um particles. length there's six right now um particles. length seven particles. length seven come on leave the world people checking if it's working let me debug to see if this is really working and I I want to be thoughtful about this so because I I really want to make sure that I've done the code correctly and I think this will show you a good way to debug this is what I'm going to do is actually completely take out all the Plinko so now I have to have this oh look at that who that's oh no no I got to do this I okay now there's no Plinko okay so now that there's no Plinko and I'm also going to remove this boundary and then I I actually unfortunately now need to go back and add this y back in or Y is greater than height so the way that I'm going to know that this works is um uh put this back in the way that I'm going to know that this is actually working is by looking at the length of the array so particles. length is one it's never going to be more than one because by the time the next one comes one's been removed the question is world. bodies is what matter.js thinks is there is that also one it is so things are working right because if I took out my um if I took out this world. remove if I didn't remove it from the matter.js world I could look at particles. length and I'm going to continuously see one but now there's going to be three in the world's body so I need to make sure it's being removed from both places so now that now that I feel confident that that's working I can put my boundary back in at the bottom and I can put the uh Plinko back in here okay here we go now looking at my list what do I have left I've increased the gravity I'm removing particles I added a boundary at the bottom I need to add buckets so what I want to do is just add some little separators here and I probably want to align them right with that first um with that first uh row that probably is the way I'm supposed to do it although I'm sure there's a specific layout okay let's add those so how many those need to um let's add those okay so what I need to do those are also going to be boundaries so I'm going to use that boundaries array boundaries. push B and now I'm going to write a loop that's similar I only need to do it for one set of columns so let me say I equals um I equals z i is less than column I want to do all these columns uh and what I want to do is say the x is I * spacing right that's what it is is for um let's just see let's see what goes on let me try X is X is I * spacing the Y is the bottom so let me think of a height here I'm going to those buckets are going to have a height they're going to be rectangles that are going to have a height of like I don't know let's just try like 30 pixels and a width of like 10 pixels so the Y is going to be if I want it to be a boundary that sits um on top of the floor the Y is height minus h / 2 because I need a rectangle this is confusing but basically if this is the bottom this is my rectangle this is its height this is this is the canvas's height minus height divided two is this location here so once I do that then I can create a new boundary and I'm reusing a variable name which is probably a bad idea but I can create another new boundary which is at X comma y with comma height because I calculated all that already and I can also say boundaries. push B and the reason why I want to put it into an array is because I also want to say um I also want to display all them so for all the boundaries uh boundaries indexi doow now what does the bound show function have it shows a rectangle and let me I have let me say fill Z stroke Z let me get a different color here and uncaught reference error boundaries is not defined at setup boundaries boundaries boundar did I not make a boundaries array oh I called it bounds so that's nice because it's a little bit shorter of course now I have to change it everywhere so bounds. push bounds. push and then I need to Loop through that sound array okay there we go those are so tiny look at the tiny I really okay so those are going to be uh have to be um much taller I guess I wasn't really thinking uh and I don't know why let's they could be white I don't know why I was like I had to change their color so um in the uh uh where am I boundary um let me make the color white and uh here let me color white and then then uh what am I doing now on sketch where I create them let's make the height 100 my goodness why are you being so stingy okay does this so uh and then I could use one extra one right I could use one extra one here not cut that off of my laptops I could use an extra one I could use an extra one um so I already said columns plus one columns plus two wait why am I not getting oh cuz it's it's there but it's right off the screen no uh so let me just offset it a little bit uh 10 plus yeah uh I just see U minus 10 just to offset it yeah yeah it's there so I just I have to finesse the spacing and stuff a little bit um so I'm going to just leave it at that uh because there's one what I want is but it should be at the center right so X is I time spacing so X is zero um and the width is 10 so I should see five pixels on and five pixels off what if I change this to 20 what what am I doing wrong here oh I know what I'm doing wrong I have I'm not drawing it correctly no wonder so I don't know if that some of that thinking could be edited out I need to move this up again because it's too low for me um but uh I forgot a really really key thing if I go into the boundaries look at this I'm drawing the rectangles in the default way that P5 thinks of rectangles with 0 0 in the top left and that's why they're actually so short I'm just drawing them in the completely wrong place whereas matter.js thinks of rectangles with the registration point in the center so I need to have but I'm drawing match what matter.js things which I need to say w mode Center so here we go there we go so now it's right and you can see I that's what I expected it to do it had one sort of half off at the edge so you can see here are my uh Plinko things uh let me just do this oops no let me do this so um you can see it a little bit better uh okay let me make it a little bit um wider uh sketch. JS just to give us some more uh stuff to work with 700 comma 800 let's try that there we go so now let's take a look at this o i I did something weird oh the spacing never mind why did I change this I I didn't mean to do that let's go back to what it was okay so here we go uh Plinko so this ends the second part what I'm going to do is um what I'm going to do right now is take a short break and I'm going to come back and add a few sounds to this and during that short break I might also oh one thing I really got to fix is look at it always goes to the left up there and the whole point of this is if her to 50% of the time go to the left and 50% of the time go to the right right so I need to I'm going to add a few features to improve this in the next video you can think about maybe how you would do that yourself and look at this they're really they're all Landing basically in the same spot too so I need to work on adding a little bit of Randomness to allow for um for uh things to change okay so I'll see you in the next third part where I'm going to improve on this a little bit see you there