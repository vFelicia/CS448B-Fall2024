in this video you're going to be building the dev.2 web 3.0 Tab and you're going to be using infuro to connect this app to the ethereum blockchain we're going to be using solidity to write our smart contract that we'll be deploying to the blockchain you're going to be able to create and upload new posts which others will be able to read and also give a thumbs up on so this is your reminder to give a thumbs up to this video And subscribe to our channel so with that said let's just jump straight into a building all right so step number one will be just going into your preferred location to me that's that's what it's going to be and then just typing in MPX clever programmer without typos preferably because that's our custom built CLI tool now you just pop in your email address and name right there and then you want to go for solidity blog now once you selected that it's going to be the perfect time to smash that like button because it's going to take a little bit of time to set up your project now once this project once this goes through You're Gonna Know it because it will open up vs code for you so let's wait for that cool nice so this one is good just double check before we get started that you have all the node modules ready both in the app folder wrong tool and like outside there I know why I showed the other way around but you get the point and then once someone's as good or if you don't you just go ahead and npm install then and you're good to go so once that's done you just want to open up your terminal and then type in your Dev that'll start this local server which if you copy and pop it in your Chrome basically this is what you get and congratulations you have set up your app all right all right so step two is going to obviously creating the contrast so let's actually go ahead and create them so what I just did is press command J and these terminal window popped up and you can just create like a new one right there so what you can do is type in truffle and if you don't have the Truffle CLI installed no worries just go Google for truffle CLI install and it will pop up how to do it that's it go ahead click that guy and then here are the detailed thingies and how you do it all right so what you want to do is type in I'll just actually moving forward I'll just assume you have these things ready and whenever something new pops up I'll just explain how to install but I'll move forward like if you had it so pause it right now install and then we can go ahead so what you want to type in is truffle create tracked and then you want to create a blog Factory and you want to add the factory after it I'll explain it a little bit why and then just hit the up arrow and then change this to post now if you recognize it there's a new folder right there and two files with the exact same names that we just typed in so there is our Factory and there is our post these are like super basic stuff like super basic contracts but it's a contract so that's what we came for now what you want to do is I should first understand why it is the way it is and why did we just make these Factor so here's how we're gonna work we will have a factory that will basically produce all the our all the other posts so what does that mean we will only deploy this Factory contract and all the posts that we will later like when we build the app each of those posts will be a separate contract meaning each post will have its own 0x something nada address and so all the trades and all the details will be stored in the contract on the blockchain and this is just a super efficient way this is just a super efficient way to keep track of everything you want to keep track of so what's going to happen we'll deploy this guy and then in this one we'll have a create blog post function which we'll go ahead and create ours create a post for us and then create another post That was supposed to be a p and another post that's why it's called a factory does it make sense if not just rewind it real quick and obviously I'll explain again duh all right so that's the concept behind it let's go ahead and make it happen so initially what you want to do is I really like when it's like split view and I'm just gonna zoom in for you so you can see it better all right that should be good so what you want to do the very first is just make sure the solidity version is 0 8 16 in both files and then for now we're just gonna work in the post file for a little bit so what you want to do is we'll Define a couple variables in here obviously each post will have a and that's going to be an address in this case because we're happy is going to be a public address it's going to be called author and then we're going to have a string which is going to be public again it's going to be post title next up we're going to have a un256 without the nine it's going to be like count because you want to count how many people liked or both right then a tag basically it's going to be like a hashtag if you go to the repo link Down Below in the description scroll down there's a screenshot and you'll be able to see where the tag is that's what's going to be stored in there next up a timestamp actually there's going to be a Content too but I wanted to put in a timestamp time stamp just like that yeah whatever also don't worry about all these errors sometimes we're going to address them sometimes we're not it's because I have a bunch of extra extensions that are checking for like code cleanness and all that stuff which obviously freaks out because there's an empty Constructor for no apparent reason now the only thing I don't get is why doesn't it freak out here I don't know anyways so next up what's what we're going to do is create the construct structure so what we're going to do is we'll have a function that'll call this Constructor guy over here and so for that we've got to set this boy up we're gonna pass in a couple things so we're we'll pass in a string and just get used to it like sometimes when you're dealing with strings you got to type this memory thing in but not with addresses so that's just a weird solidity thing so we'll go with string memory and it will be a underscore title and this underscore is just so it indicates that it is a internal variable that is not going to be used outside this construct Constructor at all so it's only for internal use now next up we're going to have the address for the author and then we're going to have a tag and we're gonna have it for the timestamp and we're going to have it for the content now once we got all this notice how we like skipped on light count that's because we're just going to like hard code it in the next section because we're literally just catching whatever the factor is going to pass in this is going to be caught here and then we're gonna do stuff with it here so we just kept on it this is going to be recorded not a big deal actually I'll move it down there really not a big deal so what you want to do is for each thing so we got a post title like just set the corresponding item it like makes sense post title you want to the title thing author and then obviously light count is going to be zero and you'll know no likes no big deal so once we're good with that's basically how we're gonna uh if you want the contract to be known yeah whatever all right so before we set up the factory time for a coffee break with that done I'm gonna go ahead and start setting up our Factory now in the factory there is no need for any kind of Constructor we're not constructing anything in fact the factory is going to be the Constructor folder post you get the point completely ignore that that was some weird stuff by copilot sometimes it's weird sometimes useful but in this case it was weird so what you want to do is create a so what you want to do before creating anything is you've got to import the post so import pose.sol so that's good now that will basically import everything from here it's not like JavaScript where you have to like specifically One By One Import yeah just import the file you're good so you have access to everything now so we're going to create a new instance of this guy so the hence the capital post like that and this is going to be an array of posts that's how you're doing in solidity now this guy's going to be public and we're going to call it uploaded posts so far should be easy next up we're going to create two functions they're going to be function number one create blog post and then we're just going to leave it at that for now don't even worry about it we're going to fix action we can add public to it so it like goes away yeah perfect and then there's going to be a second function which is going to be function get uploaded posts bam and I think this is the easier one so before we do anything with the created blog post we're just gonna go ahead and return this you can try by yourself just pause it if you want to but if with that said I'm just gonna continue now so what you want to do is in solidity you gotta have this view keyword in here because you're returning something so it's like the read access and then you've got to Define what you're going to return it's returns because this post return or this function returns and so like third person whoa this is gonna return a post array from the memory all right so that's good we're going to return the post array all right now the only post Ray that we got is literally uploaded posts so we're just going to return that on Bob's your uncle now creating a post is a little more tricky so here there's going to be a couple of props that we're going to need to pass in it's going to be there's going to be a string again string memory whatever post type is going to be string memory I'm just gonna be tag there's gonna be timestamp like that and there's going to be content just so now here what you what we'll do is yeah exactly that so what's going to happen is we're going to create a new instance of post again this guy so here's gonna be the new instance let's just name it new post and it's going to be eight new it's going to be a new post we defined all this in a specific order so we're going to follow that in here all right so what's going to be is we're gonna have to send in post title we're gonna have to end in an address that's going to be the person who's the author which in this case is going to be we're going to say message yeah message that's sender which literally all that means is when you're using this app and then you click a button and your meta mask pops open yeah that address that like your metamask address or whoever is the user next up pass in tag person time stamp and passing content that's it so once you created that guy figure out what's going on here missing one thing oh might as well close yeah so it is horror for me it always requires these semicolons anyways and what you want to do is yeah now that we created this array technically or now we created this instance of the new post might as well push it in the uploaded poster and that's how we're gonna store it just like that so upload a post push new post very JavaScript D I don't think it needs any explanation so that's basically step one of the contract now what you want to do is come into extensions and type in remix because that makes it infinitely easy to test out all of the contracts that you have to write and whatnot this is the cop this is extension to get it's from remix project 27 yeah just look for it you'll find it once you installed it it doesn't need any kind of setup though once you know this is the icon that you that will pop up here so just look for that and before you do anything just like this is your solidity version you have to make sure that the compiler you're using and version of solidity you're writing in matches so before you do anything side compiler version right there and select point 16. so now that is done and actually you can confirm that it says that so now that it's done you want to click run and deploy and hit activate now what this is doing it's pulling up a previous instance of mine but I'm just going to go ahead and disconnect so this is how you will see it it might be completely empty or not but if it is we're gonna figure out what to put there so you want to open up a safari window and go to trufflesweet.com ganache and by the way you could use a you could use a test net link given by inferior or you could use it as a link given by infuria but this time you don't want to because that needs like additional setup and this is for a testing purposes only we're going to use inferior for the deployment you want to download this guy this will download a download file once you've installed it this is how it's going to look like actually let me restart it once you installed ganache this is how it's going to look like when you start it and you can literally hit quick start and it will pull up something like this you will not see my instance because it's my instance but there you go here's your everything gives you a bunch of eat now this link is coming from right here copy this guy put it in Click connect you're good and it should say something like network is local or a custom Network and we you won't see any of that stuff so I'm removing that this is how you will see it now what you want to do is Select like literally old block Factory file because that's where we're gonna be doing things so initially what you want to do is like the Blackberry hit compile wait for it to go through and I open this output thing up right here so you can see it so it has issues so there's issues with the concert so that means it's this file okay so maybe let's remove public let's see if that helps I'm just going to remove everything see if that fixed it and apparently it did so we're good there and once you hit compile it's going to create this artifacts folder now this is where the ABI goes you don't have to worry about it just yet we're going to be using it in the lid so once that's done just hit deploy now it deployed one instance of my block Factory I wish you want to just put in some dummy data as a title tag timestamp and content and yeah I know it's not timestamp but we also just made it a string and it's also only for testing purposes so it doesn't really matter hit transact and that should technically go through and so you will see a bunch of addresses and gas used and whatever don't even worry about it at all now what you want to need what you need to do now is call this get uploaded posts well this will do is literally just return to this why is that important because here we created an address we created a new post instance so what that does is it narrates an address to us rather than address for us where we will deploy that specific post that's what I was talking about when I had that stupid drawing so click that so click that and scroll down and here's your array that is your address that you want to copy now copy that address and paste it in here so what this will do is this is that you specify which address you want to deploy your post at so we got a compile post so let's do that real quick that's good and then select post and copy these exact things in here so you want to do title skip address for a little bit let's put in tag time and now content now for address you want to put in this address like basically your address which you can actually copy by coming here I think yeah it's the same address so just like double click that and then put that there so ganache helps with that too you can't just copy it from here and now you will do is it is don't press that nah what you want to do is press at this so specify this was specifically push or deploy this contract to that address that was generated for us let's do that and these two addresses shouldn't match so 0x07 E2 that's exactly what we started here and here is our address or here's our post so what you can do is I'm just going to clean the output again and click author and you should literally get back the like your address that you put it you just put it in there content light count it should be zero there you go that's all we did for now and this is your first function if you get back all this data that you put in here you can test out all of them if you get back the exact same data you're good to go you're good to continue if not there's likely some sort of mistake in either this or this file you definitely want to go through it and debug it before continuing all right now now moving forward I'm going to be speeding up a little bit and close this run deploy thingy for now also hide that and by the way our factor is essentially done that's literally all we have to do for the factory so I'm just going to close that too because we're not going to need it anymore now you want to save a couple more things up here in the post so I want to definitely create a struct a struct is you should think of a struct oh just so first of all you want to create a struct now a struct is basically just a thing of it as an array and here like it's going to be strongly typed so we're gonna add in an address it's going to have an address which is going to be create and we're going to have uint256 is like count and we're gonna have a bull which is gonna be is a light there's gonna be all kinds of type of stuff and we're gonna create a mapping which is basically just a double it's gonna be an address to Bull likes that's pretty much how this truck is going to be built up now next up we want to create a separate mapping which is going to be an address I'm going to map the address to a Bool again and it's going to be a public one as we'll call it did once you call it and pass in an address is going to basically tell you whether that address like the post or not pretty simple and one more is we're going to create a actually we should do this up here we're going to create an array out of these likers oh Shrugged I said you should think of it as an array you should think of it as an object instead it's an object okay shocked object is the array that was a mess up my mind so like hers you've written an array of objects and this is going to be a public thingy and just create a likers or actually we can just call it likes hooray now once that's good no one's as good you remember how we had to actually let me just pull it up again remember how you had to call every single detail one by one that's not really efficient so what we want to do is just create one function that will literally send back all the data so we're just going to call it function got post details and so create that post it's going to be a public View and it will returns it will return an address it will return a string from the memory every single time we'll create return another string from the memory wait what am I typing might as well explain it so address is going to be the author this string member basically you want to return all these in some sort of an order but in the return Clause you want to make sure that this order the data type order matches on how you want to return it so I'm just going to copy this down just so I have a reference and paste it here and so I can refer back to it so once again an address for the author a string for the title another string for tag basically four strings from the memory so we already got two three and four and you want to return a un265. now this looks a little weird so I'm just going to format it a little bit and so here we go now you want to now next up all we will do is literally just return and then go author post title tag timestamp content light count and you're basically good once again double you want to double check that author is addressed like the data structure here like all the data types the order of the data types here matches the data types of these variables and if that's true you're technically good with this specific with this function now I'm not going to test out one function every single time so I'm just going to create the new function which is going to be like post and that'll take in nothing and it will be a public post what the man it'll be a public one and we're just gonna do like a we're just gonna make like do like a guard Clause up here so we'll be will require that the did the mapping up here this guy and we're gonna pass in the message sender address so what we're going to do is did like and message dot sender equals false and if that if this is true meaning the person no so if this is true we just let the function to run but if this is false meaning they did like message sender is true meaning the personality right like that this is going to be the error though about right basically you all already liked this post that's it and just close that once again this required what does it do require means that it is guarding everything that comes after so we require that the person who tries to leave specific post didn't like it before this is our requirement if that's not set up yeah if that requirement and if that requirement is not mad we're going to pass back this exact error message if that's if that requirement checks out we're good to move forward so might as well immediately immediately just set that to true they can't like it ever again and we're going to increase the like count by one and we're going to put uh there's those likers addresses and then we also want to create an array out of all the addresses wait what the and you also want to keep track of everybody who liked the post so what you want to do is like ours addresses actually ah you want to keep track of all the addresses that like the post so you want to scroll up and create an array of addresses which we will call likers addresses likers addresses and we're good and so we come down here and then just push the message sender in there so we'll use in the front end don't worry about it for now it's basically it now let's go ahead and deploy all these contracts again so we don't have to redeploy the block Factory that's good to go however I'm going to remove that and all the history here so I'm just going to create like another post instance we're going to have title two tag two time two and content to hit transact and get back the result now if you look at it we already have two addresses here so you want to grab the second one because otherwise you're gonna deploy redeploy the first one which is obviously not good so paste that here and put the details there so go title two and go here copy this guy paste it tag two time to and content to hit add address and you should be good to go whoa so this happened because it didn't compile the post again so let's try that let's try doing that because that would be a good idea and I'm going to remove this deployment so this is your reminder before you deploy a new post you want to compile it so you saw this in real time going bad so we're gonna try it again the only thing that's gonna change is I'm going to rename title to title 23. call this guy again and now I'm gonna pick the third address paste it there and title 23 tag we need the address that's not even that address this is the address oh and also friendly reminder like don't ever hit command eh on remix because it does this weird stuff and then you have to just restart it so interesting things we're early this is blockchain technically you should still have that address okay so you gotta repaste everything title two three and then the address this address paste it tag to time 2 and content to hit add address and now there we go like now that I'm a bunch of more stuff here so we'll so now you got all the author content yada yada but now you have this get pose details so call let's call that wow so that and that's interesting so I think what happened is I have the wrong like I deployed it to the wrong address let's try this again we're gonna create a new Factory item title Four tag four time four and content four hit transact call it get the very last one paste it right here four and hit at address and we should be good now right get posted what the so now that we're done with all the functions we're based we're technically done oh so we're technically done with all the functions and basically all our contract is ready to go so now what we're going to do is we're just going to go ahead and test it out so before we even get into it let's hit connect there let's just move everything from all kinds of History because you have to recompile all your accounts and you have to redeploy them all so just remove everything all the one's not going to work not even the compilation so let's get right there so I'm going to click go back to the block Factory file and select that compile the guy let's see if that goes through okay that should be good we got oh here we got the metadata whatever so we can just close that actually I'm even going to turn on my Do Not Disturb mode okay so my factor is my new Factory is compiled which by the way it didn't really change but because it's like interacting with the post itself it does change so you definitely make sure you you recompile it so now go ahead deploy that guy and I'm just going to let's make it actually bigger so it like jumps together like that and what should we call it this is a title we're gonna have a tag again it doesn't really matter it's only for testing purposes so hit transact all the gas used perfect now let's call that so that's your address that you want to deploy the post at so now what you will do is go back to your like select the post in a compiler compile that just wait for it wait for it okay we're good this will show up once it's good to go and you can literally copy all this stuff so this is a reminder don't ever press command a in this Explorer thingy I don't know if I said that before but I always mess it up and what happens so yeah I'm just going to type everything in here like that I think it's still visible because I can see it and just hit add address down here like you'll probably see it actually let me just restart all right to post let's compile that guy okay title yeah lost that okay that's fine I got that on copy so we're gonna come in copy this address paste it protect put time content in there and before I mess it up copy this address put it right there and that'll be the address where we're going to deploy this fingers crossed is going to work bam hit add address and we should oh there you go we got it and if you remember last time we only had a couple things that we could call now we can like transact and do all kinds of stuff so the big difference here when you call it's like a get request for an API when you transact it's like a post request for an API so that's mainly what it is and that's how you like think about these things you're like all these basic stuff like still working get back the content whatever that doesn't really matter now what we came here for to get post details let's click that guy and look at that you literally get everything back in a strange object but you get it back so that's cool you can at least do something with it on the front end we'll get that through in later so now we're going to test out is literally the two functions that we just built so one of them was the get pose details with which we literally just tested out and the other one is the like pose so come here live post hit transact I'll clear that out so that should have probably gone through now let's go let's check on light count it should be one right and there you go now it says one if it doesn't rewind back figure out where any error is at once again I'll just show the entire so you can pause it and check it out so here's a slow scrolling that should be pretty much sufficient to find the error and pause the video take your time and if we get post details you see that fifth thingy that says one now before it says zero and if you ask me what that is it's literally the fifth thing that's being so what's the fifth thing that's being written author One post attitude tag timestamp yada that's a light count so that again works so it seems like we were able to like the post we were able to do all kinds of stuff with it with it now I guess it's time we connected our front end so I guess I'll see you there all right so with that let's go ahead and get started connecting our metamask so that is actually going to happen in our index.js file so we're gonna need here is a couple of things first off we're gonna have to import a bunch of things from Rainbow so we're gonna go ahead and import Ray in about Dash me yeah slash yeah slash rainbow kiss styles.css so there next up we're gonna go ahead and import get default wallet get default wallets and rainbow bow bow hit provider again from rainbow and by the way this already comes with the CLI tool so you don't have to install any of this then we're gonna go ahead and import chain config great configure a chain create client and lag me config config from wagme and then we're going to import two providers now one of them is B even fewer provider from wagme slash providers slash fira like that and then we're gonna import local gen RPC quieter like that I don't know if that's the yeah Jason RPC like that so this one is going to be important when we set up the local local contract connection so that's where it's gonna come in and I believe this says all we need for the metamask connection all right so what we're going to be doing now is right under actually we don't need to worry about this custom Styles we can just work above here so what I'm going to do is cause the chains and provider and we're going to destructure that and we're going to go configure chains let's close that so we don't have any error going on and we're going to configure chain dot Gurley like that and we're also going to configure chain.localhost so these are the ones that are going to be showing up like these are the chains this app is going to be compatible with so these aren't going to go into that array array and we're gonna go in and we're going to go ahead and go in and configure both so we're going to create a invert provider and here we're going to need an API key like that I'm just going to leave it a t for a little bit and we're going to set it up in one second now you also want to make sure that this has a priority of one meaning that no matter what inferior will take priority one if both the chains are available it's going to go with the early the girly chain meaning meaning we'll be using inferior mainly and if that's not sufficient for whatever we're trying to do then we're going to go on and use the other provider which we're going to be setting up in a little bit let's just take a look at what's happening here I think we don't need this object yeah and the other that we'll be creating is the Json RPC provider and that'll have a priority number two so it comes after inferior and we're gonna read an RPC it's gonna be a chain G p and this will be this same exact RPC server that gosh is giving to us paste that there and that should be pretty much set up so now our chains are configured so this application is going to be again compatible with the girly and the local local running chains and so these will be the providers for them you can by the way configure as many as you want yeah but there's no need for that for now all right so next up we're gonna do is create the connectors and that'll be just a get default wallet and we're going to pass in a couple things here we're just going to name it what is it DAV to blog app just like that and we're just gonna pass in the chains so this will be responsible like let's all come together in a second let's just finish it so next up we're going to create a wagme client and that'll be gonna have to configure it with create client we want to make sure that auto connect oops I'll connect is untrue we pass in all the connectors from here and we're going to pass in fighter which again comes from here all right so that that's pretty much all the prep code we're going to be using up here now it's time to come down here so we're going to be wrapping this whole entire application in two hooks so let's see what we've got we got lagme config and we're going to pass in client and the client will be the wagme client so this one that we just generated let's close that guy and next up we're gonna have a limbo kit provider and for that we're gonna pass in all the chains that we generated here so those so that should be pretty much almost good to go now copy that go all the way down wrap that first in there and then copy the wag Closing one and wrap that there and actually there's this Mt jsx fragment now we're not even needing it because these two wrap the entire app up so that should be so far so good now we're going to be doing next is there's a metamask the JS file there's guy we need to set this guy because the app itself if you refresh this happens there so now we set up all the back and for both connection now we actually have to set up the front end for it so this is what we see here and there is literally two things that we need to import here one of them is the Styles file so let's just go get that from here we can just paste it right there and the other one is going to be connect button which comes from the same rainbow kit and instead of this div we're just going to be rendering out this connect button that should technically be enough let's see what do we got yeah that's perfect I'm just going to hit that wow yeah it takes a little time when you initially open it up and before like prior your meta mask was connecting to ganache so just wait for it a little bit and you should be good or you can just go with the different Network unlock it and we should be good to go okay you know whatever switch Network that's completely fine so thanks we have all these networks here we gotta for that in a little bit that's interesting so there's a couple of weird things going on here let's address this one first which I don't really get why it's happening but okay so after refreshing okay it still shows all these up that should be interesting okay so right now when you select that it actually shows all these items that not really sure why it's happening but I have a hunch this has something to do with it so that API key is not valid so on what I'm gonna do is go go to inferior and once again you can use the link Down Below in the description so just use that and then come in here into blog app let's see manage key and girly that should be my key will be blurred out and you want to create a file called env.local so once you create that you just type in inferior API key just paste that key that you have and up here you want to come in and say process dot EnV that oops inferior API ah inferior API key like that so let's let's restart this app let's see if that helped well that didn't help just yet oh so let's see if that helped let's restart this app and it should probably solve it let's see okay I didn't ah okay so you see how we are exporting chains out of here and I'm just importing chain that'll be the issue let's see there you go now we have the two chains that we actually wanted to work with and because we're going to be using the local version of the contract for now we're going to be going with that it's a little faster than any kind of test nut so we're just gonna go with that all right let's see what we got next up so we got the not a mask wallet connection so good job if you made it this far and now we're gonna go ahead and do something else and now we're gonna go ahead and connect the the contract with our front end so I'll see you there all right it is time we actually go ahead and connect our contract with our front end so let's get started let's do that okay oh actually all right so what should we what we're gonna do is we are going to create a context file first of all so how does that even get started all right okay so to get started with the contacts you will need a new folder called context in the app folder and we apparently already have it all right so to get started with the context we're going to be doing is just go ahead and create a context folder inside your app folder inside there you're just going to go ahead and create a context.js file now once that is done you're going to import a couple of things first of all create context and use context because we're going to use it immediately right in here and actually while we're at it let's go ahead and import use State and use effect because we're going to be using these anyways so might as well just get started importing them and we're going to be creating the instances so in the utils folder inside of instances wow what is this red arrow anyways so we should technically already have we should already have the this file set up and we should already we already pasted this this address right here so yeah so it should be no worries about this one oh so you should already have access to this file and I believe we already put the address right here so that should be good to go so what we're going to be doing next is we're going to be importing the blog and the factor instance which we are exporting from right there so let's do blog instance and Factory instance up from there fuels contracts instant oh damn utils and instances all right so that should be good now and the other thing which we already installed with the LI is going to be web3 this is web3.js so we're going to be using that and now let's go ahead and create a app context right now so once we created that that should be good and we'll also need to be creating a provider so app proflider there's a lot of boilerplate code with the when it comes to contacts API so just get the pattern in and you should technically be able to remember it pretty easily afterwards or you can just go back to a previous what is happening here why is it being removed yeah there you go so if you have a context file from the past you can literally just copy these codes like the birthday code there's just pattern recognition once you once you do it like once or twice you will get it in all right and then we're going to be returning up context dot provider and we're going to be we're going to be passing in the children right here just for good measure I will create a test file which will be literally just test and I like to my contacts like this let's just immediately pass it in there and the other thing that we'll be doing is we're just like straight away create a hook with it so we don't have that much code to deal with later on so what we're going to be doing is use context and we're just going to pass in app context that should basically be the most bare bone context API file that we're going to be using later on and like whenever you in the future but this will change yeah obviously that will change okay so let's go into app.js and we're going to be importing app fighter just and that's the thing that we're going to wrap our app so we're going to use the app provider and wrap it around our app that's basically what's happening here so that what that means is everything that is in here we'll have access to any everything in our app provider if we set up everything correctly so to test that out what I usually like to do is go into my index file and in here just go ahead and import use app context from the context file and scroll down and scroll down where you see the router and where the component itself starts and so what you want to do is just deconstruct test from user of context and straight away console log it and if if you will see test next to a fire Emoji like that wish it showed up though okay we're gonna have an alarm in that case so just go ahead hit inspect oh it'll open up on my other screen all right there you go so if you go ahead hit console there you go next to the alarm it says test so that means our context is working and it's ready to go now there's a couple more things that I want to get done before we just wrap we wrap up and call the contacts today because I really do we really want to set it up properly so let's remove tests because we don't need it so there's a couple more things that I want to get before we move on from the context so as you can see I removed all the tasks related stuff from the context as well so what you want to do is go ahead and just create we're going to initialize all the web 3D related stuff before we even move on so we don't have to worry about that later so what we'll do is we'll create a contract instance and inside contracts in a sense that's going to be you state and the initial value is going to be null then we're going to create a const web3 instance same deal moving on and current wallet address same oops blog addresses because remember every single post has a separate address and we're going to create a post set post and this will store the post data so now that we're good here let's actually go ahead and Export hosts immediately and also while we're at it current wallet address as well okay so now that we exported these two we're gonna go ahead and actually change all kinds of rendering to this so we don't have these random stuff happening so what we're going to do is just get posts from use up context and then just change it and whenever we factual the posts that are deployed to using our Factory they're going to be automatically rendered out here so that's good actually I don't think we have to worry about the current address just yet but what we do need to worry about is we have to create the web3 instance so how do we do that we go and say let ethereum and initially it's just gonna be null reason why it's not is sometimes metamask takes a little longer than what it's supposed to to be injected into the website so for now like we just initialize it as a null and then what we're doing what we're going to do is if type of window is undefined we're just going to or the type of the window is not undefined meaning there is code already and it's working and we're going to go and be like hey ethereum should be this part of the window what is window you ask Windows is literally all the code that is when you like inspect yeah all this actually the actually it's the page source to be exact like all that stuff like all this code that you see here that's all the window now in there there's a variable called ethereum and that's being injected because you have metamask installed and every single website that you with with it and every single website that you visit with metamask in your browser is going to have that code even if it is book even if it's Instagram whatever it is as long as you have metamaster it's going to be injected into your website there's something to be aware of now this is cool we just saved it here and now what you want to do is create a use effect down here remove all this junk and create a guard Clause just like how we did it just hide just like how we did it in the contract itself so what we're going to say is if ethereum doesn't exist or if it's like a falsy value because null has a falsy value if you put it into a Boolean it's going to return false so if that's the case then just return it don't even bother and because it's a dependence you want to pass it into the dependency array however if it exists what you want to do is we're going to create a selfexecuting or selfexecuting I don't really know how it's what's the official name okay so it's called selfexecuting apparently if stackover's little says so hell yeah so yeah apparently it's called selfexecuting function basically what we're going to be doing is we're just going to give it a name just so it's easier to understand if someone else were to hack a code that was just called create web 3 client and open close params and put async because it's going to be an async function and use effect is always synchronous you cannot make it a use effect async just create the function here and right after open close parens what this does is you don't even have to call this function it will just execute itself we'll get it done and you could always get away with it like this you can replace that with a semicolon but it's not as easy to read and it's just like a good description for other developers so it's better for collaboration purposes the more you know so what you want to do is say cons to web3 is going to be a new three and you want to pass in ethereum and straight after that set the web3 instance to this guy however there is a time difference between State setting and the execution and state setting usually takes just a little bit longer so inside this function it is highly recommended that you only use the local variables and then later down the line like in other functions we're going to be using the state so what we're going to be doing is going to const accounts and await call web3 again this variable here and we're going to say if dot get account without typos preferably because that helps they say and now that we have the account we're going to go ahead and say Set current wallet address is going to be the first account because I don't know about you but personally I have a okay I only have two accounts but you get the point the first that is being connected and I could also connect this guy to this website so there you go now there's two connected and always the one that has a little check mark thingy always that's the one that's going to be showing up as the first so you want to get this address because that's the current address so that's why we do this and then moving on we're going to have contract and we're going to say oh wait and we're going to say Factory instance and we're just going to go ahead and pass in web3 that's it and set contract interest instance and where'd you go and since this is the only contract that we're going to be interacting with there's no need for anything else to be saved so with that done we should be pretty much ready to go and start publishing posts okay moving on to your next thing which is going to be creating posts so jeez all right so what you want to do is go ahead and just create a function all right so how do we get started I'm gonna go ahead obviously create a function so we're going to say we're going to call it create blog post this will be an async function and we need a couple things in here so we need Title we need tag and we need a text or content or whatever I'm just gonna go with text because it's the con content tax basically all right so now guard claws because everything in blockchain can fail we're early so I'm just going to guard ours if there is no current wallet address there is no point in the entire thing because we need to send that in remember in the factory here require the message sender the message sender only exists if here we have a current wallet address otherwise the fact the contract will fail and we don't even want to get there like we just want to save our save ourselves a lot of headache you don't want to debug on the blockchain because it's way harder than it should be so just save everything and Barge yourself all right moving on you also want to have a try catch claw or like a try catch thing for you so you want to catch the error and then console.error message that's it that's going to be a catch that's basically all we want to see there now in the tries where things are going to get tricky that's where the magic is going to happen so you're gonna say oh wait and we'll have a contract instance and we're gonna call methods from the contract instance and we're going to be calling the create blog post method now if you remember this is literally how we call this function so how does I put it here we'll make life so much easier so create blog post and when it comes to transacting something so basically you want to push something onto the blockchain you've got to pay gas fees let's just tax how that's just how it works that's how the blockchain taxes you so to do that all you want to do is say send afterwards and in there you want to pass in an object not an object is going to have a from value which will be the wallet address that will have your minimum open and you will have to pay those gas fees almost at taxes jeez now create blog post it also requires a couple of things so we need the title we need the tag we need to timestamp and we need content and we also need to pass in the message sender but no we actually don't need to send it in because it won't know it okay so we gotta pass in a couple of things so to make it work okay so as you can see it is requiring a couple things so we need to pass in these one two three four things here so what do we have access to straight out the box we have title we have tag and we have something that's going to be the timestamp and I'm going to be sending text so those are the things that we have access to immediately now we gotta pass in the current timestamp in a string format so how do we do that everybody is probably familiar with data map date dot now but this is going to be in date time strings so we're just going to call a two string on it so now it's string there we go and so we have everything ready to go technically it should already work let's let's actually test it out so Luna has this out from the context so we have addressed we have access to it elsewhere then index and there is a file called create post modal now here what you want to do is import use app context and inside of the you and you want to get the crypto blog post function it's like you want to destructure that function and you want to get that out from the context so we got this guy and this is actually a placeholder so we can just remove that line oh wait no okay all right so once you're in the modal file what you want to do is import the use app contacts if you need and then destructure create blog post out of it now you want this one to replace that there and you should technically be good to go right there so what that's going to do is where they have this handle submit function setup for your convenience and all you need to do is just all you need to do is destructure this file and then it's going to be called right there let's actually take it out I think so we're gonna do it I'm just going to own this inspector but put it on the other side and let's see the console so I have my metamask connected so that's cool and I'm going to hit create post I'm going to hit type in this is my first post first and hope you like this build so far actually if you do just press that like button right why not all right let's hit submit okay my meta mask is popping open that that's good that's a good sign can confirm it I'd confirm it and let's see what do we see on a mask it's a SAS correct interaction and it's supposed to be successful so we'll see it in a little bit if anything happened but right now this technically should have gone in and it should have gone ahead and created us a new post so might as well let's go ahead and render that out bad time to render out all the posts but it's time we're under out all the posts in it so because we already set up pose thingy I'm not even the right file this is the file because we already set up this post guy and we already exported it here and then in index we already imported and that's what we use here to render out all the posts should be good to go should be pretty we should be pretty good to go and um ready to fetch all the posts oh yeah isn't it all right and then mate let's go ahead and get started with the get post content function that's literally what we're gonna be doing now so call it caused guest post content like that oh okay all right might hope you're all right but as of right now we are ready to start rendering out all our posts and because we already set it up there's the state there's us exporting it I don't know why am I pointing at the screen only to see it don't see what I'm doing it whatever and here we already use that to render out the nothingness that's completely fine because now it's nothing but we're gonna get them back so let's revise real real quick what were these steps so once again what did we do we had to get an array of all the posts that we have for the posts that we created so stuff so basically there's a couple of steps that we have to make in order to get back each specific post one by one so what we got to do is I've got to call this function which is just going to return and array of addresses basically the post addresses and then each and every single address we get a Fetch and call the get post details function so let's actually do that basically these are the two steps that we're going to be doing all right so first of all we're going to be needing we're going to need to return all those blog addresses and put them right in here so how are you going to do that create a get post addresses function it's going to be async and we're going to pass in a contract and if we don't pass it in we're just going to go with the default contract instance that already exists nice so let's just put in a try catch just like that and then console dot error and then just pass in there and let's move on with getting stuff done here so what we're going to say is const addresses and we're going to call wait web no attract dot methods Dot and what was the name again it was get uploaded post so that's what we're going to be putting there and then we're just gonna put a call after because we gotta call it that's pretty much it and then we're just going to go ahead and set that to be the blog addresses so just for a good measure let's actually console log the blog addresses and let's see what do we change that's interesting it says zero there was some sorting um there was something going on oh obviously if you don't call the function like why would it even run so that makes sense I'm just gonna put the get upload actually we should put that right in here so get uploaded post post addresses like that in here and pass in the contract right there let's just do it like that like it's actually a colder real function so let's see what do we got if we do that all right okay there we go there's the pose that we just minted or uploaded or Factor It Whatever here's the post address that's the that's our address that we're going to be working with and moving on what we also want to do is create a specific post content getter fetcher function so what the how that's going to look like is we're going to say get post content we're going to say async and we gotta pass in and so we're gonna say get posts comment because we're gonna get all the post content immediately and we don't even need to pass in literally anything just leave it empty and there we go what we're gonna do though is create a separate use effect and every single time the blog addresses change we're going to be firing that get posts content off so that's pretty good that shoot fire it off so let's let's test that out we're just gonna cancel a object out yeah there you go it's got fired we're good to go all right so what are we gonna be actually doing here we're going to fetch every single post one by one so let's go ahead and say fetch to post or if I just post yeah and go away and it's going to be a promise promise all because there is going to be a bunch of promises in here so we're going to map through all the blog addresses all right so we're gonna grab one like each address one by one we're gonna be like post blog instance because we have access to the blog instance from here so what we're going to be doing we have the blog instance we're going to be passing in a web 3 instance and the address and we're going to create that that's going to be our post and then on the post we're going to return and return the actual like we're going to return the method call so it's going to be methods Dot and we're going to go to post.sol because I don't want to mess it up it's going to be get pose details paste that function and call that should be the thing that we return now let's see what do we got why is it not working maybe I need to close that brand and then maybe another one yeah that seems fine it looks way better now once we got the fetched posts because remember this is just gonna be a bunch of promises that are resolved it's going to be actually let me show you how it's going to look like they didn't even run ah there you go it's gonna be you in there and it's gonna be like weird looking now imagine this for actually let's create a second post so this is my second post second and yo let's just do it that way submit nice hit confirm and let's just refresh real quick let's see what the response is see there are like two U's and whatever what's going on it's not it's not going to be easy to interact with it like that so what I like to create at this point is I'm just going to say const formatted post one actually oh post I'm just gonna say fetched posts and for each individual post I will also get the index close that guy before we got all kinds of errors and actually we should do it like that so there is no need for the return keyword so index index and then one by one title actually let's see what do we got we got all ah try to copy this let's see if it works no that'll make our lives easier yeah let's put it yeah okay it gets the point across it's like yeah it's like Chrome's weird annotation but like it gets the point across each trade is going to be like that so I'm just gonna put extra stuff in here so this is basically the response that we are getting back so that's pretty cool so we already created a index and now what we're gonna do is we're gonna have the author first this is gonna be post.0 and we're gonna have a title which is going to be post one and then we're gonna have tag and then we're gonna have time thump it's going to be number three content number four and likes count or we can go likers likes woohoo likes is going to be number five so we're good there so we're good there I'm just going to delete this because it just clutters up the space and next up we're going to be doing is go ahead and say set post formatted post now the only issue so when we do this see the second post comes after my first post oh congratulations you literally just rendered all your posts if you to make a mistakes congrats on that I completely before I got that so I came here anyway second post comes after every single time that I'm going to create a new post it's going to come down here and that's not how any of the logs work so we can do also is just a real simple JavaScript trick and you just put in reverse and there you go this is this is more realistic and this is how it actually works and then now you see there's your tag there's your title I don't see the content for whatever reason but we'll figure out figure that one out in a second so that sounds I don't see the content just yet but that's gonna be something that we'll figure out and I think it's because I named this not the way I was supposed to so actually let's call it post text and there you go so yeah hope you enjoyed so far we're actually at the final stretch we just completed two tasks without noticing it so that's pretty good and now the only thing that we'll have to do is liking each individual post rendering that back out and we're ready to go all right Heidi last bit of this video get yourself a coffee because I won't get ready we're about to finish this bad boy up all right liking posts is what we're gonna be doing so yeah I guess let's just get started with that let's just check out a couple things uh post Sol so first of all we only send back like count no every single person who likes it so we want to send this guy back to you that means we'll have to redeploy this contract but that's fine easy easy and let's go what that means is add a comma dress array memory good it should be technically good because we want this one as well the reason why I just ran through that super fast I just added that the reason why we need it in the first place is every single person that liked the post has wallet address that is going to be stored in that array now when I have addressed it array so that we can check whether the person that is going to be actively using the app has like this specific post how do we check that how's that in and if that any of the user's current address exists in that array and we're just gonna turn this bad boy red something like that yes it's totally not how it's going to look like anyways so we're going to do that and one thing I'd like to always do is just get rid of all kinds of unnecessary console logging yeah there is one and then where's the other one there so there's no need for any of them like whatsoever and it also like keeps keeps my console cleaner so yeah so much nicer all right now what we're going to be doing though is we will have to go back to output and we'll have to actually look both of these from instances we're going to remove that guy and post this idea okay so let's build this contract let's see if everything passes and if it does we're good to go and we're good to deploy so let's see what we got everything is up to date is what it says I don't believe that because I literally just changed it I'll just remove this though just to be on the safe side and truffle compile actually that's that's legit I just realized the ABI doesn't really change unless you mess with the stuff you need to pass in or the name I believe the ABI actually shouldn't really be affected I'm a paranoid so I just prefer see but there's like changes in here so I'm not entirely sure how to new ABI is being generated or not but for good measure if you mess with the construct just update your API and there's no you won't have any kind of issues anyways let's deploy blog Factory to local and let's see what we get okay there's our contract address go to instances paste that bad boy and it should be empty all right what's good here okay so that was just like a leftover so let me just refresh it a couple times cool so it is a empty folder so that's good now in context we will actually get a an extra one more we'll get one more what we'll get one more trade here or like property or something and I'm just gonna call it likers almost like Lakers and let's actually just console like posts and that should be that should be just about enough to confirm that everything works okay so we get an empty post that's pretty good I also I want to make it like more dynamic so we know that we have this use effect that kicks the get post content whenever blog addresses change however there's nothing like it initially gets fetched but when I upload a new post it doesn't get kicked again so what I want to do is after after I'm done creating the new post here after the await I'll just put this guy in and that'll kick the Chain Reaction it's like once the oh once the new post address is being fetched and it's in the post addresses array this use effect will go ahead and kick this function and we'll have the new post come in immediately it's react is good okay all right so let's just double check what do we got here and I'm gonna go ahead and create a new post so this is my second first post hope it makes sense it's like 5 p.m binge on this tutorial for the entire day so I'm tired all right just leave it at that second first whatever smash that like button and subscribe have you done that I'll wait all right if you haven't done that like why come on submit confirm bam there you go okay let's see what do we got and like hers is an empty Ray so that's a good sign we got that guy back should be good there so we're good there and now what we want to do is when I hit this like button I want my metal mask pop open and Sentinel see how do we do that so in here we're just gonna say go ahead and say const like post and the one thing that we're gonna need this time is going to be a post index which we'll have access to it later like somewhere in the app we're gonna get to it in a second but that's going to be our input for this one and once again we just want to make sure we have the card Clause from here let's just put that there I want the wallet to to exist because again we are transacting and if the person decides to disconnect their wallet it's just gonna fail so let's not do that try catch nice console log a zoo console error error nice and it's literally a weight blog instance we're going to pass in web3 instance and the blog address says dot post index what this will do is it will grab out one address so we all know how this instance Builder that we have set up here is waiting for the for instance and the dress so that guy will need an address and so which address are we passing in the specific post that we are liking there's that now after that we're going to go ahead and say dot methods dot like post I believe let's just double check post as well and see yeah that's the function copy that guy come right back here and where was I oh right there add that function on top and because it is a it is a postfunctionality would be if it was a backend API but if because it's it would be like that so it's like the writing onto the contract all right so we need to send it not call it we don't read from the contract we write on that contract and so we just passed in from current wallet address so that should be pretty much good to go and now we're gonna do is say get post content because we need to refresh all the posts but remember the reason why we get all the post address is this here when we create a new one is because that's what changes but in this case the post addresses never don't change it's just one trait of the post itself changes and that's it so let's see if we need to do anything else yeah we should probably connect that like functionality to the button that would be a pretty good idea so let's come down here export that from there and let's go into post.js now in here there's going to be a couple of things that we're going to be doing so step one we're going to be importing use app contacts from there so that's helpful while we're at it let's go ahead and make sure we are exporting the current wallet address yes we do so that's cool because this is the time I don't know if you remember but I probably said it when we like initially initiated the context this is when we're going to be using current wall address this is when we're going to check it against the the likers right here so let's actually just do that real quick so what you want to do first and foremost is go and say call that wallet address and like post just grab those out from use app context and the initial value of this is not going to be false but it's going to be likers Dot includes and we're going to pass in current wallet address and once we once we hit the like button that should technically be connected to hey yeah so that's connected already to this icon which changes based on whether the post is like or not we have this handle click function right here and this guy what we want to do with that is I want to say wait because it's an async function and we'll say light post but we're going to pass in the index which we're getting right here so we have access to everything the only thing we got to do right now is just call the functions write the function that's it and while we're at it let's go ahead and update the set light thingy and we should be pretty much good to go let's see if that works so I'm going to tap that bad boy confirm there you go now this could have totally failed I don't know there's could it because remember I'm setting it here to true so that's refreshing let's see if it actually went through and it did so ladies and gentlemen that's that pretty much wraps up this dev.2 blog app that is using blockchain so one more thing I want to do and this is one thing it's just code cleaning and I'm not gonna let you go without that so yeah let's just get rid of that because nobody needs that so yeah that's pretty much it that's the blog app that wraps it up if you've gone this far congratulations you're doing great and I'll see you probably in the next one