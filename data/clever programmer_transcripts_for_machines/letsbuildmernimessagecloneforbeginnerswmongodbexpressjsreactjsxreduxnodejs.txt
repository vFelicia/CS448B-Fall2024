hey guys um i'm sorry the stream has dropped for some reason uh let's actually i think i'll start waiting for everybody to join right now we only have one peop one person and okay let's actually everybody start coming in and let's let no let everybody know that i am live back we are back and we are ready to continue for some reason my internet provider uh had some kind of outage for a couple of minutes but we are going to carry on where we left it off okay so yeah we got uh 50 people back live hello i thought it was says yo rishi hi how are you thanks i'm fine i was just a bit frustrated because my internet dropped okay okay uh yeah mohit kumar says hi nice okay uh we are coming back that's cool that's awesome and yeah uh we we are starting to get uh starting to get our people back we are already 70 people strong 75 that's nice that's awesome and yeah um we should be good in any minute okay uh let me know guys if you are uh here and if you guys are back we will wait just a little just a tiny bit while everybody is coming back and we can uh go forward yes positive vibes that's what we want so we are actually we were actually building the uh imessage clone with the mern stack uh and we say my name in your accent dude that was hard uh raza ra rafa rafaideen i think so we were at the moment where on the only thing we had left uh we we had left is making the app real time and the nice outro that i actually wanted to give you guys as a surprise but yeah okay i'm going to wait a bit more while uh while all the others are coming back and i think yeah and i will start in just a bit okay so let's actually dude how are you i'm cool please build a version control system dude that would be some huge stuff what about our names khalid ibrahim almost yeah we can totally do an instagram live sometime that uh i'm trying to speak out uh for names yeah uh okay uh so guys actually let's draw let let me know if you guys are uh ready to continue i already says it's 2 a.m okay i know how much efforts you guys put after yesterday's interview i know i completely messed up but i thought uh i taught a lot we will see when i send out the responses okay okay uh let's go and we will be start we will start coding in just a bit i just want everybody to come back we are already 86 people strong um hey we got shirangi back okay we are getting all the old people we we got and we are getting all the people back so that's nice uh ready to never okay uh please join button dude i am so eager to join what oh join button oh okay uh i think we can do that yeah okay let's go all right we we are getting everybody back that's nice we are already 92 people strong everybody let's go ahead and just let others know we got kelvin back in the house yo what is up my man how's it going we are going to start in just a couple of minutes i just want to uh get everyone back on this live uh so that we can continue and i think okay let's just sum it up where we left off so we were at this point where this application should have started working but then my internet dropped so what i will be doing is pretty much create a new chat and say the name is going to be uh epic cp community and i will add the are you using stream yes i am is this a new live ask asks clarity no it's actually the same one uh just my internet dropped and so i had to uh start it all over again raza says let's start bro it's 2 am here yeah i'm trying to wrap it up in 15 minutes there is probably not more than that left so what i will be doing is just add the welcome message and say welcome back guys and add a bit of a fire emoji and yeah nothing happens because it's not real time yet but i'm going to refresh and whoa we got two of these stuff going on uh so let's actually test this one okay so for some reason this doesn't work let's add the back effect and what we will be doing is going ahead and pretty much uh fix this bug now uh because it is actually having problems in the message.js file i will be going in there so message.js has some kind of issues going on and let's actually address those so message.js actually receives only four of the four uh pro four props and those are being the following so we are we are actually tr we actually changed a tiny bit of the uh structure that we were uh building we are 82 strong guys as you are coming in uh let's carry on we are continuing where we left off my internet dropped for a second so i had to restart earlier start the whole stream um so yeah let's actually continue and what i will be doing is pretty much just add a new uh new way how we uh handle all the dates and this is this would be it uh actually i'm gonna uh add the old one uh up above so we are actually why you implement channel uh and message deletion will you implement uh not today this is already a long build but we will definitely do a crowd functionality and all that stuff that will be a bit longer build uh yeah finish it in style yes i'll do okay so sunny built it uh sunny did a bit of a differently uh with some time ago stuff and all that we are not going to use that instead we are going to be parsing it as a an integer and we will be uh making this a date string now we also changed the way how we uh uh add the email as well so we will be saying oops we will be saying sender.email because we are passing in sender here right so we are actually testing uh we are actually testing against the sender.email the current user and that's how we will decide if it goes to the right and if it's going to be blue or if it is going to be uh uh if it is going to be on the left and it's going to be gray okay nice we are actually getting back we are almost at 100 people thank you so much for coming back guys i really appreciate everybody and let's actually uh check out how we will handle the photo questions because we are handling that differently as well because we are passing in this sender right guys and we are we will need to uh import that thing and we will also add the message which hasn't really changed so with that let's test let's test it out if it is working this way now this is still bugging out for some reason and now it says okay let's actually clean up the database uh and remove all the stuff that is not cool so we have two epic cp communities we only need one for now uh yeah david can i can i ask please respond uh actually drop it on um so right now guys that this is my instagram handle please go ahead and if you have questions regarding this but uh please drop it there i will be responding to everybody and but i just want to keep this live as short as possible because yeah so yeah let's actually speed up a tiny bit now uh we are going to go ahead and debug whatever is happening over here and what we know is that it is inside of message.js still and what i see is it has a problem the anonymous function sender.email is not not an object okay let's see what is not cool so user email sender.email actually should be good though let's check it let's check up on it with postman so we should be able to get the conversation list that's working good uh we don't have a get data however we have the conversation data and let's actually oh okay let's copy this one let's go into here get back a conversation which we definitely should have um i've used code mirror package develop js oh actually i can check that out good idea thanks uh let's see how we have things going on on the back end so collection update is deprecated use update one oh my god everything is getting deprecated let's okay let's refresh uh some okay wrong port so inside of here we should be getting this email so that should be good so sender uh let me actually check up what is the actual endpoint that we are passing in here so uh message yes because we are not sending back uh we are not passing in that prop uh from the chat.js file and we need to address that thing so what i will be doing is i have this snippet of code over here and oh my god uh so that's actually i'm just gonna go ahead and paste it here and i'm gonna go ahead and explain what is happening so what we had was a bit different from this one we are we are going to pass in yes exactly with we don't have a sender as a prof on a message think yeah that's that's exactly why what was happening uh exactly and and now i need to pass this kind of id the mongodb kind of id i need to pass that in uh and twice as the key and as the id as well and in the sender i am passing in the whole user uh thing we have somewhere here so i i i am passing everything inside of here i'm chucking it in in the sender also i'm sending in a message and all that stuff so we are destructuring everything and yeah there is there it is so with that said actually it should be now working let's test it out and welcome back guys there we go massive thanks everybody who is coming back and who is here i appreciate you guys and welcome so let's continue where we left off and what i think we should do now is test it with an other message oh and uh we are going to merge the videos no i think we will be adding like part one part two uh so we need to address the thing that it is not working perfectly so it's not showing my face not showing the date and not showing the last message so what we will be doing is go ahead and on the sidebar chat we need to add all this stuff and we need to uh address the situation over there now what i am doing is again changing a bit of uh sunny's code i'm literally gonna uh get rid of this time ago thing it we could make it work but not today uh you guys could see that how it is working we will be going with the utc string for now and what we will do is pretty much as we uh set up all the last message last photo last time and all that stuff uh we will literally go ahead and go with that thing now inside of here we want to go and add the last timestamp we want to check everything in here and add the last message there we go and inside of here we want to pass in the last photo that is pretty much going to do all the work for us will this will be uh will this be available for a later watch yes it will be everything is going to be available for watch later uh we will make a part 1 and part 2 videos out of it uh and yeah thank you so much for uh coming back here and being here we are 100 people strong that's awesome okay now uh what we will be doing is that should actu that should have actually fixed that issue here we go and yeah let's test this thing out um and what i will be and what i will be doing is just add another message in here like saying hey and send this message and because and for some reason it actually okay so it's actually a uh my my computer type of issue what i need to do is go to um chat.js and or actually it's called chat.css and go all the way down so let's go into chat.css and find the button guys if it's working for you uh if it's working for you don't you don't have to do this for some reason uh on my computer the display none is just simply not working so instead i will be doing this stuff uh so i am adding a head of zero a width of zero an outline transparent background transparent in the border of none which is literally the exact same thing as display none it's just i don't know what's happening here i need to uh debug that but that's just it is what it is right uh yeah so with that said uh it should be working and it should be reloading because as you guys can see uh somewhere here somewhere here there is the message which says uh send yeah the send message it still says either prevent default we shouldn't enable reloading i gotta uh i gotta look into that so i'm gonna type in hey uh like this and go ahead and refresh it and it should actually yeah it actually updated over here and here we go so it actually showed up nice so now the only thing uh we will do buy a new macbook dude i just bought this one uh i just need to set something up so so what do we what so the only thing now left to do is guys go to pusher.com and make this app real time let's actually do that in a couple of minutes we should be able to do that in like ten or uh five minutes so let's go there and say so we got pusher going on in here and we are just going to sign in uh yep here we go let's go to manage let's go to create app you name it however you wish i will call it imessage live and let's use us west should be good and we have react and we also have some node.js going on the back end and we will go ahead and create the app now with that done it actually throws a couple of code at me uh there is actually let's actually go with the back end first copy that piece of code go back to server.js go up to app.config and what we will do is pretty much just paste it in here change the war to const and yeah that will pretty much do the uh instance work for us now you also need to go in here where uh we said uh db connected and you need to set up the chain stream which is essentially a thing that we are going to be using to trigger the pusher so what we will do is say const chain uh let's actually i'm i'll be using the snippets of code that i have uh so what we will be doing is pretty much just say uh we will set up the change stream which is super easy so cons chain stream mongoose connection collection uh and the collection that we are actually uh watching is going to be the conversations and we just add the watch at the end and next up what we will do is say uh change stream whoo the on change uh we will fire off the function with the change that actually happened and if there is a if the change is ah change dog oh uh it's ending there are few very few people that's right that's right but only the hardcore people are here are here at the end oh yeah you relate yeah so the operation type when the operation type is insert uh we are going to do some stuff and we want to go ahead and trigger the pusher with the messages uh oh no the chats uh stream and we want to say the uh the event is going to be new chat and once one and if the as if uh something else which means uh we are updating uh in the database then we want to go ahead and uh create another channel with another uh with another event and we pass it in again and if like let's handle all the errors that could happen so if that didn't work let's just console log the error triggering pusher now with that done the back end is actually ready to be uh realtime and let's actually go back to our frontend part and go to the sidebar.js file where we will actually first set up all the back all the realtime stuff now if you're scrolling up here in a bit you're good bro i just checked hey frankie what is going on we got frankie in the house yo uh so what we will be doing is pretty much uh can you do a twitch of course um what we will be doing is pretty much just uh copy this part of the code and let's actually set that instance up let's go to the sidebar sidebar chat.js file which sidebar chat.js oops hold on inside the bar chat.js yeah there we go that's what we wanted and we want to go up here like out of the uh whole function let's add the instance say cons instead of var because never ever use we don't ever use var uh now that we have that thing set up we should be able to go ahead and do the other type of connection so what we will be doing is add the uh inside of the use effect we will add this stuff so we are literally going ahead and creating a channel which means that uh with pusher we are subscribing to the messages channel and whenever uh something happens so so a new message thing happens we want to go ahead and get the sidebar elements again okay so that will literally just uh pull in all the the last message stuff okay if you guys remember it this is just getting back the data which we will be okay it's not defined just yet let's go ahead and do that um we are going to go ahead uh we will be doing like pusher for um and we will say oh i haven't even installed this so what we guys want to do now is go to the front end terminal and type in npm i pusher dash js right because on the front end we install the pusher.js and on the backend we are installing pusher as it is so once it will load up uh it should be pretty fast i said fast okay uh okay i think i'm stupid because my brain doesn't want to understand what redox is that's actually not right uh you just want to go ahead and and learn learn whatever you can find on the internet about it and watch all the redux videos that sunny has already dropped and thank you so much shimongi for that nice awesome comment thank you so much okay uh right so now we should be able to uh import pusher with a capital p from uh pusher.js because right this is what we're importing nice and what we will be doing is let's actually test out if it okay so this is the part that we just made real time right so actually if i go in here and say yo that part should update there we go so that part actually updated we are making the app piece by piece real time right so the oops so the other part just uh didn't get uh didn't update because that's not real time just yet but what we will do uh please do a cms app with mer of course drop me on instagram and i will make a list out of it and actually plan these lives the way you guys want it and the way you guys will get the most value out of which keyboard do you use apple magic keyboard okay uh next up what i will be doing is going to uh chad.js i think that should be the next one that we make real time so what we will be doing in here is pretty much yeah let's go to chat.js and in here we will actually need to add two different types of stuff first what we definitely want to do and i just i actually found this part uh found this piece out before the live stream that i should be actually adding it otherwise it will be bugging out so this is pusher unsubscribe messages this is how you want to start the uh use effect fanboy that's right um okay so pusher and subscribe with this will actually when the chat components loads so whenever we are actually switching between chats it actually reloads itself so that user fact actually fires off again because chat id changes and that is a dependency of the new use effect so then we are actually unsubscribing from the messages and that the reason for that is that we want to we don't want to subscribe to it multiply so right if you guys actually remember how pusher works on the frontend side we subscribe to channels right and if we subscribe to channels like multiple times then it will go ahead and refresh all the all this stuff right so if i'm in one chat and i'm entering to another one and then send a message there it will refresh both of them and it's going to be like giggling around and it's just not going to be a good user experience so that whenever we are changing uh chats you want to go ahead and you want to go ahead and unsubscribe from the for sure that you are already subscribed to and then subscribe to a new one i hope this actually made sense it was pretty fast but yeah uh drop me questions if you guys need more explanation okay so what we will then do is pretty much just say um uh subscribe to the new one and that will actually okay that will actually go ahead and say of course we're subscribing to the same channel again exactly rerender stuff many many times we don't want to do that okay and we want to we want to just do whatever we did with the other one so now uh what i think should be happening is next up we need to make the sidebar so right so before that the the other one was the sidebar chat right so that's actually two different type of stuff one of them is going to watch out whenever a new chat is getting added and the other one is watching out for the new messages so that it actually updates the thumbnail and whatever that is in there now let's go ahead and jump into sidebar.js and this is going to be the last piece if you're not running into any bug and this is going to be the last step that we are covering today uh and here we go so that should actually do it notice that we are subscribing to chats now and not new chat and you guys might be asking why are weren't we unsubscribe here and cyborg.js file um that's part that's because we don't need to okay so you only want to unsubscribe to it when you're when you need to and the other thing the reason the other reason is that only the chat gets actually rerendered that many times when we are changing chats uh the sidebar stays consistent because react actually cleverly knows what part of the screen to rerender and okay now let's actually go ahead and test this thing out uh on in sidebar it's not actually existing let's go ahead and import that oh because i haven't created the uh i haven't actually added this part so let's do that and sidebar is loaded everything yeah remember me yeah i remember you okay let's actually add this thing here and change the word to const and you also want to go ahead and import item import pusher from pusher.js yeah with js okay let's see what we missed or haven't missed yeah chat.js let's go into chat.js and chat.js we haven't subscribed there either so we just want to go in and say pusher from pusher.js and we should be good to go in any minute so say const thanks think a bit uh we are saying const and we i think now now no now we should be good okay okay so i'm going into epic cp community and say you guys are awesome and add some fire because you guys are on fire and boom there we go it updated over here we updated it over here and we are go good okay uh please explain how to understand error messages that's actually uh a really good question as she won he says um honestly try to read it it's good okay this is one of the most demanded questions ever okay so how to understand error messages uh so you guys wanna actually understand what is actually right right right you want to read it through word by word it's going to be stupid but sometimes it actually makes sense but when it doesn't make sense you want to go ahead and google it up and then essentially when you google it up so much time you wanna you will essentially understand it by feeling okay and i am today still running into uh issues that i'm looking at like excuse me like what and then i still go ahead and google it up and that's the only way that i can find it and then literally go ahead and copy paste the whole thing into google and there is going to be a stack overflow article about it okay uh and now the only thing we need to test out is if the sidebar is actually real time so we will say youtube over here we will add a welcome message yo and some fire and a rocket nice and if we add it it should pop up immediately with the welcome message and guys we actually are done with today's build it was quite a long one but i think uh guys um uh thank you so much for joining and i think you guys uh have a work for years to develop uh imessage clever programmer took only three hours almost yeah there is a couple of stuff we need we could add into that but yeah uh so guys i hope you guys got value out of it we are 110 strong thank you so much for joining and guys i think today was an awesome build even though my internet dropped for like 10 minutes and thank you so much for everybody who joined and rejoined afterwards uh i really appreciate you guys and make sure that you uh guys are sticking around as we are dropping value on a daily basis so with that said this was it today thank you so much for joining this is david and i'll see you in the next video peace out guys hey me you