With timestamps:

00:00 - hey what's up guys so this is another
00:02 - web technology informational video
00:04 - tutorial series on how to build a REST
00:07 - API on PHP now let's go to the details
00:12 - of what is an API so basically an API
00:15 - stands for application program interface
00:20 - so application program interface and
00:23 - that's a very broad term so there's all
00:27 - kinds of API but we're specifically
00:30 - talking about web api here
00:32 - so there is an api in your smartphone or
00:36 - an even in your refrigerators and so
00:40 - this is a very generalized but
00:42 - essentially an api is a contract
00:46 - provided of or provided by one piece of
00:49 - software to another piece of software
00:52 - and it usually consists of structure
00:55 - structured request and then a structured
00:58 - response so one piece of software it
01:02 - says give me this kind of information or
01:04 - this information formatted in this way
01:07 - and I'll give you this data or this
01:10 - function or whatever that response may
01:13 - be so in order for us to better
01:16 - understand what an API is so let's have
01:21 - a look on the analogy that I provided
01:25 - here of what is an API so this is the
01:29 - analogy that we have here so we have
01:32 - customers sitting on the table so
01:35 - consider this customers as a client or
01:40 - web application and then the kitchen is
01:45 - the server or the service that that
01:48 - process certain requests
01:49 - well the waiter is like an API so it is
01:53 - formatted to take a certain order in a
01:57 - specific way and then bring back a
02:00 - certain meal and this would be the data
02:02 - or the response that you saw that you
02:05 - requested so an API is basically a
02:07 - messenger or a waiter between running
02:09 - software
02:11 - think of this as the connection between
02:13 - the client or the request requesting
02:17 - client and the server so this is the API
02:21 - at the center providing a way of
02:23 - communication between two software so
02:26 - now let's talk about rest okay so
02:29 - basically it is a representational state
02:32 - transfer and it is an architectural
02:35 - style for designing Network applications
02:38 - so it relies on stateless client-server
02:43 - protocol which is HTTP and you're quite
02:48 - familiar with HTTP right so it treats
02:53 - server objects as resources that can be
02:57 - created or destroyed and can be used by
03:02 - virtually any or virtually any
03:04 - programming languages so rest can be
03:08 - used by JavaScript PHP Python C sharp
03:15 - and other languages that are available
03:20 - today so HTTP has different methods or
03:26 - methods that are being used so we have
03:29 - this methods number one is to get so the
03:34 - purpose it the purpose of this is to
03:36 - retrieve data from a specified resource
03:41 - we also have post meaning we submit data
03:46 - to be processed to a specified resource
03:50 - and get imposed basically these are the
03:54 - two methods that are basically used on a
03:59 - form get in post and then we also have
04:03 - this put so the put method is an update
04:07 - to a specified resource and also we have
04:11 - the delete so delete a specified
04:14 - resource and then we also have this
04:16 - three other methods which has had
04:19 - options and patch but we're not going to
04:22 - go into
04:23 - details on on this tree so we will be
04:26 - familiarizing only the get post put and
04:29 - delete so now we're going to look at the
04:34 - some end points or example end points so
04:40 - this is the you are URI or URL where our
04:44 - API or service can be accessed by a
04:46 - client application so this is just an
04:49 - example on how the endpoint works so we
04:54 - have get so get and then the URL order
05:00 - you are URI that the API or service can
05:03 - be accessed so anyway we can always
05:06 - choose the record in setup by using API
05:09 - we can have always the option to use
05:12 - different directories a for example API
05:15 - access it depends on your preference we
05:20 - also have get and then specify the ID
05:24 - and then we also have post so as you can
05:29 - see post and get have can have different
05:33 - or have the same URI but we don't have
05:38 - to worry about that because we specify
05:40 - the post or the cat which is the method
05:43 - to use so it doesn't matter if they have
05:46 - different or do you have the same URI
05:50 - that were using then we have put and
05:53 - then this is the example
05:57 - URI specifying the ID and of course the
06:00 - delete the same thing we'd get put and
06:03 - delete they have the same URI being used
06:08 - but the different methods get put in
06:12 - delete now let's try to have a look on
06:17 - how to setup our PHP rest project so I'm
06:22 - going to show you how to properly
06:26 - arranged or configure your rest project
06:31 - so for the purpose of this video
06:34 - tutorial series I'm going to use one
06:36 - server so it is consisting of Apache PHP
06:41 - MySQL and MariaDB so it is a Windows web
06:46 - development environment and if you want
06:49 - to use swarm server you can go ahead and
06:51 - download one server and install it on
06:53 - your local development machine so
06:58 - actually you can also use other server
07:02 - that you want or you prefer so you can
07:05 - use lamp Sam or other versions of this
07:09 - server so we will also use video or PHP
07:15 - data objects so it is basically an
07:18 - extension that will provide as
07:21 - consistent interface for accessing
07:25 - databases in PHP it will be helpful for
07:28 - us to use PHP data objects okay and also
07:32 - I'm going to use for our code editor I'm
07:35 - going to use visual code or visual
07:37 - studio code as our primary code editor
07:40 - and it is open source and can be run
07:45 - every where you can download for Windows
07:50 - Mac OS and Linux so you can use that but
07:56 - anyway you can also use your preferred a
07:58 - DES tour you can use sublime you can
07:59 - also add on but yeah for the purpose of
08:03 - this video tutorial I'm going to use
08:04 - Visual Studio code so for the layout of
08:10 - our project
08:13 - PHP project so I have created the
08:19 - directory PHP rest that will be the name
08:23 - of our project and then you can it is
08:27 - created on the root directory of our
08:32 - server so PHP rest and under here we
08:35 - will just create few directory for our
08:39 - files so current includes and then we
08:45 - also have no not under includes
08:51 - delete this you need to delete this okay
08:59 - core so in core we will be creating few
09:04 - files I'll be creating the initialize
09:08 - that PHP so basically the purpose of
09:12 - this file is to initialize all other all
09:18 - our settings in our project and then of
09:20 - course in include we will create also
09:22 - another file which is config that PHP so
09:26 - config that page we will contain our
09:29 - database connection for our project and
09:34 - before we continue with our tutorial
09:37 - let's go ahead and try to see a real
09:41 - world example of REST API so as you can
09:45 - see we are in the github developer page
09:49 - and we can see here different options
09:54 - and different information on how to
09:59 - implement a certain API so basically we
10:03 - can see here the different methods also
10:06 - that we have talked from the previous
10:09 - video and we can see here the endpoint
10:13 - so this is basically the root endpoint
10:16 - of the API of github.com so we can issue
10:22 - get request to the root endpoint to get
10:25 - the all in point categories that the
10:28 - REST API version 3 supports so we can
10:31 - use squirrel HTTP slash slash API that
10:36 - github.com and here we can also see the
10:44 - HTTP redirects
10:47 - okay so we have status code 301 302 so
10:54 - basically we can implement this type of
10:58 - redirects into our own page where a
11:01 - state
11:02 - and also we talk about HTTP verse before
11:05 - our methods right so we have had you get
11:11 - and then post we have patch we have also
11:16 - put in delete ok and then we also have
11:22 - different options here like the
11:24 - pagination okay so if we have like
11:27 - thousands of records or yeah thousands
11:32 - of Records and then we don't want our
11:34 - user to be overwhelmed with information
11:36 - or overwhelmed with data so we might
11:39 - want to paginate the data in our
11:43 - database by using some sort of like a
11:47 - parameter so page like page two and then
11:51 - every page consists of 100 records so we
11:54 - can do that with our own PHP REST API so
11:57 - I'm just showing you here all the
12:00 - possibilities that we can add into our
12:04 - PHP REST API okay we also have this like
12:10 - link header so if we want that we can
12:15 - also implement that into our PHP REST
12:18 - API and then we can also have like
12:21 - limiting to our request every day to our
12:26 - API so here as you can see they have
12:31 - like five thousand requests per hour
12:33 - limit so yeah we can also do that if we
12:37 - want to limit the access to our API so
12:41 - now let's go back to our code editor and
12:44 - try to complete and start the project
12:51 - and and actually write some code to
12:56 - implement our own API in PHP so this is
13:01 - our base project page P rest and as you
13:06 - can see we have two more directories the
13:09 - core and includes the core has the
13:11 - initialize that PHP file and also
13:14 - includes
13:15 - has config dot PHP so in config dot PHP
13:19 - we're going to add the settings and
13:22 - we'll try to connect to our database so
13:26 - let's try to do that here so there are a
13:30 - couple of things that we need we're
13:33 - going to have or we're going to define
13:36 - the user this is for our database user
13:42 - and we also have to define the password
13:47 - for that ok and also you need to define
13:52 - first our database name so maybe we'll
13:58 - just try to claim it as PHP rest and we
14:03 - can try to end then this just to make it
14:07 - more readable ok and then here we're
14:15 - just going to define another variable DB
14:18 - and then you this will be the actual
14:21 - connection for our database and in here
14:26 - we need to add MySQL and then the host s
14:33 - you can say 127.0.0.1 and then the
14:43 - database name will be of course equal to
14:48 - are defined database name so that's DB
14:54 - underscore name and of course another
14:57 - one for our character set so char set
15:05 - equals utf-8 and we're going to supply
15:12 - also the user or DB user and of course
15:19 - our DB password okay so
15:26 - that's the connection for our database
15:30 - and then we're going to set some
15:33 - attributes here leave the attributes so
15:42 - DB set attribute attribute and then
15:56 - let's say video colin colin and then add
16:01 - a TDR emulate prepares we'll just set it
16:10 - to false and we can copy this set
16:15 - attribute and this will be my SQL attr
16:26 - use buffered query okay so this will be
16:34 - for setting up our database connection
16:37 - and this will make the database
16:43 - connection later on to be faster than a
16:46 - normal database connection so attr error
16:57 - mode will be video and the error mode is
17:10 - exception okay and then I think that's
17:17 - it for our database connection so we
17:21 - have set the database attributes we have
17:27 - set the connection and we can use this
17:30 - class or I mean this particular config
17:34 - file to actually connect our database
17:38 - and
17:39 - then we're just going to use this in all
17:44 - our files later on when you try to have
17:47 - like get all the data coming from our
17:51 - database and actually in our config that
17:55 - page maybe we can try to define some
18:02 - constant here so for example define
18:07 - that's this define and so for example
18:12 - app name we'll just say PHP REST API
18:24 - tutorial okay and then in our initialize
18:29 - that PHP we can have - or we can use
18:35 - this config that PHP file and try to
18:38 - connect our database so in here
18:42 - and initialize that PHP we'll just going
18:46 - to define some constant here so we're
18:56 - just going to check first a vs this is
19:05 - for our directory separator so D s so
19:11 - we're just checking if TDS or
19:14 - directories operator is defined so if it
19:17 - is defined so we're just going to do
19:19 - nothing or if it is not defined let's go
19:24 - into let's just go ahead and define it
19:27 - by saying D s and directory separator
19:38 - okay and then semicolon and then that's
19:44 - right let's try to define also site root
19:48 - for our project
19:50 - so the same thing we're going to check
19:54 - if the site route is defined if it is
20:00 - already defined and let's just say none
20:04 - and if it is not then to find it by just
20:11 - using site route or site underscore
20:15 - route here and then D s so D s and then
20:25 - the directory of our file or our project
20:31 - so in my case I'm using one and after
20:39 - that one another directory separator and
20:44 - then the triple W folder that will host
20:51 - our files and then another directory
20:55 - separator and the name of our project
21:00 - which is PHP rest okay so we have
21:06 - defined our site root and then we
21:11 - supplied the directory that our
21:17 - directory of our project so now let's
21:23 - just define the include path or our
21:27 - files so let's define and then I
21:34 - nc then path so it will just load all
21:40 - the necessary files in our include
21:45 - folders ok so i NC path and then we need
21:52 - to bring in the site root ok and then
21:56 - the directory separator and course
22:02 - the folder glutes okay so basically
22:08 - we're just saying here that we want to
22:11 - go or we want to define the include path
22:14 - as the side road which is 164 and then
22:20 - triple w and then HP rest and of course
22:26 - the includes directory which is we have
22:31 - created the config dot PHP file okay and
22:36 - of course we also need to do the same
22:38 - with our core directory okay so
22:43 - basically we're just defining here
22:47 - different directories in our project so
22:51 - it will make more sense later on when we
22:53 - try to include all this files or all the
22:57 - files and under this directories so core
23:02 - path and then it should be instead of
23:07 - using include it should be core okay so
23:14 - since we have this lines already we can
23:17 - just load the config file first so to do
23:25 - that we need to require once ok by using
23:33 - the constant ing path that we have
23:38 - defined above
23:39 - and then the in the directory separator
23:45 - and then the file or the actual file for
23:49 - our config which has config data HP ok
23:54 - and of course we can also include the
24:01 - core classes here so let us say required
24:09 - ones and then the core path
24:15 - which is our constant and then directory
24:19 - separator and of course say for example
24:23 - we have session or any other classes
24:29 - from our core directory so so for
24:32 - example we will create another one here
24:35 - say post post that PHP okay so in our
24:43 - initialize that paid page we will just
24:45 - say or path and then directories operate
24:50 - or and of course the post at PHP okay so
24:57 - after that we need to go to our post add
25:00 - PHP file and configure the actual
25:04 - content of our post so basically we're
25:09 - just going to create a class here
25:11 - so PHP and class post and in here we
25:20 - need to add the database stuff here so
25:25 - that will be private in the end a
25:29 - connection and we also have private and
25:33 - table which will be post okay and then
25:40 - of course we need to add also the post
25:42 - properties so that will be public I mean
25:48 - public category ID public vagary name
26:02 - public title of our post and body of a
26:10 - post and the author or authors were post
26:17 - and also the date that the post has been
26:22 - created so
26:24 - there you go and of course we need to
26:27 - initialize this class or particular
26:29 - class by using the construct or with the
26:37 - DB connection okay so that will be
26:41 - public function and then construct and
26:48 - of course we need to supply the database
26:51 - connection here and we need to set the
26:54 - connection or the attribute of this
26:58 - particular class connection to the
27:00 - database connection that we have
27:02 - supplied in our contra method or
27:06 - function okay so here we go
27:11 - and below this construct a construct
27:14 - method we need to have the function to
27:17 - actually read the record from our
27:22 - database so public function and read
27:26 - okay so this is for getting the posts
27:32 - from our database and in here we need to
27:37 - create the actual query of our read
27:41 - function so that will be a query and
27:44 - then the Select statement okay so we're
27:52 - just going to have this formatted so it
27:56 - is easy to read so select and then see
28:04 - that name is category name and B that I
28:14 - did this is for between category name or
28:18 - D category and of course the post so we
28:22 - that category ID the great idea here and
28:30 - post title
28:34 - Bo's body and of course the post also or
28:41 - author of our post and the date okay and
28:49 - in here we need to specify the table
28:53 - which are what table yeah this table
29:08 - which has we have initialized it into
29:14 - post and then the name which is P or the
29:22 - alias of our table is P and then left
29:30 - join categories so this will involve two
29:38 - tables the post and categories so alias
29:44 - of categories C and on P that category
29:51 - ID equals C that ID and then we need to
29:59 - have this ordered by ordered by P
30:09 - decorated created at it should be
30:13 - created ad descending to actually get
30:23 - the the latest post and we need to close
30:32 - this here okay and in here we need to
30:40 - prepare the statement we prepare the
30:46 - statement
30:47 - or repair statement okay
30:51 - and that's stmd and then using the
30:56 - connection that we have
30:57 - and of course repair method and the app
31:04 - shell query of our post and execute
31:10 - carry by calling stmd
31:14 - and then using the execute function okay
31:20 - and then we're just going to return the
31:25 - STM T for an hour or the statement okay
31:28 - so save this and then we also need to
31:34 - add another file or another directory
31:39 - here so no not there order directory for
31:47 - our API so in our API we need to have
31:51 - the lead that PHP file okay
31:56 - so let's open up our PHP tag in here and
32:01 - since it is a PHP REST API we're going
32:06 - to allow HTTP request here so we're
32:08 - going to add headers here so that will
32:12 - be header and then inside we need to
32:17 - define access control and then allow
32:23 - region and then colon and then of course
32:27 - the asterisk which means we're just
32:30 - allowing anyone without the problem with
32:33 - authentication or oath or something like
32:36 - that and then also we need to specify
32:39 - the content type here
32:42 - so that's content content and then type
32:47 - Colin so this will be the mime type is
32:51 - application slash JSON format okay so in
32:56 - here we need to include
32:58 - the initialize PHP file so that's our
33:05 - read that PHP file is inside the API key
33:08 - directory so we need to back or up one
33:12 - directory so that's period period and
33:15 - then slash and of course our initialize
33:20 - core and then initialize that PHP so
33:26 - what we're doing is that we're just
33:28 - calling the initialize that PHP file
33:30 - which contains all the constant that we
33:33 - have defined the directory separate or
33:35 - the site root the include path in the
33:38 - core path and of course it will load the
33:41 - config file so which is our database
33:45 - connection so we already have the DB
33:48 - connection here so we can just use it in
33:51 - our read that PHP file so this is
33:55 - initializing initialize seeing our API
34:00 - so as i've said this include the config
34:04 - of our database the connection and also
34:06 - all the files that we have initialized
34:09 - in our initialize dot PHP so say for
34:12 - example the post we require once the
34:17 - post dot PHP file which is the class
34:20 - post that includes all the necessary
34:23 - properties for this particular class so
34:27 - in here we need to instantiate the post
34:37 - class so that will be instance shaped
34:41 - post so will be post and then new post
34:46 - and then of course because we specify
34:49 - that our construct function takes in a
34:54 - DB connection so that will be post
34:58 - equals new post and then of course our
35:01 - DB connection so if you're wondering
35:03 - where is this DB connection or this DB
35:06 - variable it is in our config that PHP
35:10 - file
35:11 - as you can see here we have defined the
35:13 - DB or the deep database connection so
35:17 - next is to query the actual blog post so
35:22 - blog post theory so we're going to do
35:27 - that by using the post object and then
35:32 - by using the read function so the read
35:37 - function we have defined it in our post
35:42 - that PHP file which is our class post so
35:46 - read and then of course we're going to
35:49 - get the row count so that will be numb
35:54 - and then result and then raw count and
36:02 - we're going to check if num is greater
36:05 - than 0 so that will be posed post array
36:16 - or yeah RA and then we're just going to
36:20 - initialize it as an empty array so post
36:24 - our and then we're going to have this
36:29 - data equals array okay and then we're
36:35 - just going to add the else statement
36:38 - here and in here we're just going to
36:41 - iterate the row equals the result and
36:48 - then we're going to fetch the PDO
36:52 - associative array so fetch a sock and
36:59 - then curly braces and then we're just
37:04 - going to say here extra the row okay
37:10 - so here we're going to say post item
37:16 - equals array and then inside this
37:21 - particular array we're going to define
37:23 - the attributes that we
37:25 - to return for this particular post so ID
37:28 - and then the title of our post so tie it
37:33 - down okay and then body of a post also
37:43 - so each time entity called
37:47 - the value per post and then of course
37:52 - the author of the post okay offer and
38:01 - also the category ID
38:06 - okay so category ID and last one will be
38:15 - the category name so category underscore
38:19 - name and category underscore name and of
38:28 - course after that one we yeah we have
38:32 - instead of using the comma we use the
38:35 - semicolon so there you go
38:40 - so in here after the iteration or before
38:45 - the iteration closest you need to push
38:50 - data into our array so re push the array
38:58 - which is post array and then beta and of
39:04 - course we're going to push the post item
39:09 - and then after that one after the
39:12 - iteration of the records were just going
39:15 - to push blue data
39:22 - okay so or I mean we're trying to
39:25 - convert convert
39:34 - to JSON and then output so echo and then
39:43 - we're going to use the PHP function JSON
39:48 - underscore in code and our post array
39:54 - there you go and if the number or the
40:00 - number of count or the number of result
40:02 - is less than zero so we just need also
40:07 - to define a message here so that will be
40:11 - echo and then JSON encode encode and
40:20 - message is we just set this to no post
40:31 - fountain okay echo Jason and we need to
40:38 - add semicolon at the end of the line
40:43 - coach's son of course we need also to
40:47 - define that it should be inside the
40:49 - array okay so there you go and in this
40:57 - part right here we're going to create
40:59 - our database and other tables and of
41:02 - course the records that we're going to
41:05 - read from our API so let's go to our PHP
41:09 - myadmin and in here that's just create a
41:12 - new database well that will be PHP rest
41:16 - okay
41:17 - as you can remember that's the name of
41:19 - our database that we have defined in our
41:22 - config dot PHP file and also we're going
41:25 - to add here a table or a couple of table
41:29 - here so categories and there will be
41:34 - three columns or three attributes for
41:37 - this particular table so that will be ID
41:40 - and the length is
41:43 - then autoincrement and their there will
41:48 - be named and var car which has 255 is
41:54 - lent and created odd and this should be
41:59 - a date time or is a date time and yeah I
42:08 - think that's it and then saved so we
42:12 - have now a table categories and also we
42:15 - need to add a post table so that will be
42:20 - post and ID land is 11 Auto increment
42:27 - and of course we have the category ID so
42:33 - this will be int 11 and then we have
42:37 - title so varchar' 255 and the body also
42:45 - will be text then we add two more for
42:52 - our author or author of our post which
42:58 - will be bar chart 255 also and of course
43:02 - the 8 that I created add and this will
43:08 - be a daytime daytime there you go and
43:12 - then save so we now have 2 tables in our
43:17 - database
43:18 - so in categories we need to insert some
43:22 - values here so the first one will be
43:27 - technology and then ate it and then
43:33 - created ad will be the date today so
43:36 - that will be 31 and the R is 10 ok so
43:47 - the second one will be gaming and the
43:53 - day
43:53 - the same and our is Stan okay so go and
44:03 - let's just an add another categories of
44:08 - our post so on auto and then the date if
44:16 - you want I can place or I can add the
44:20 - database in the description you can just
44:23 - download it and import it in your PHP
44:27 - myadmin so it will save you a lot of
44:31 - time instead of making all this
44:34 - unnecessary part of creating the
44:38 - database okay so you always have the
44:43 - option to download the database coming
44:46 - from the description of this particular
44:48 - video so I took the liberty of just
44:52 - populating the post table here so you
44:57 - can go ahead and try to download the my
45:00 - SQL file in the description box below to
45:04 - save you some time of adding all this
45:07 - unnecessary or I mean adding all this
45:09 - record store database so let's go back
45:12 - to our code editor and let's try to
45:15 - check our project for the last time
45:17 - before we test it and our postman
45:21 - software so we have here the read dot
45:24 - PHP file and we have the headers and we
45:29 - initialize our API by using the
45:31 - initialize that PHP file and of course
45:34 - this initialize that PHP file include
45:37 - all the core files or core files of our
45:42 - project and then and here we have
45:45 - associated the post okay and passing in
45:50 - the database connection and of course in
45:54 - here we have iterated the records coming
45:59 - from our database and displaying it or
46:03 - converting it to JSON format so now
46:07 - let's try to
46:07 - test this on our postman software so
46:11 - let's go ahead and search for postman
46:15 - and by the way guys this is the software
46:18 - that we're going to use to test or PHP
46:22 - API and if you have like if you have
46:26 - work in the future that involves API you
46:29 - can use postman to configure your
46:32 - request so this is the postman a postman
46:39 - software that we're going to use this is
46:41 - good for testing an API so let's just
46:45 - try to navigate to our projects of local
46:50 - host PHP arrest and then I think we're
46:53 - using HP press and of course API and
47:00 - then our read that page B so PHP RS API
47:05 - and then read that page B and then make
47:08 - sure that it is the the method that
47:11 - we're using is get and then try to send
47:14 - it or PHP API so we have here the I
47:21 - think we have some error here so let's
47:24 - try to read it in our yeah so we have an
47:32 - error in our SQL syntax check the manual
47:35 - and I think we don't have space here so
47:42 - let's try to do that navigate or post
47:45 - that PHP on line 39 so post that PHP and
47:50 - 9:39 so where is it
47:54 - ordered by oh so I think we have
48:00 - misspelled or ordered by instead of
48:04 - using ordered it should be ordered by
48:07 - okay so save this and let's go back to
48:11 - postman and send our request so we have
48:17 - a new error column not found
48:20 - be created in order Kloss so that's easy
48:25 - because great that should be created at
48:30 - so there you go same and we have now the
48:36 - result of our PHP REST API reading and
48:42 - under data we can see all the records
48:46 - coming from our database so as you can
48:49 - see the result of our request is on JSON
48:55 - format ok so now that we have read that
48:59 - PHP to get all the information or to get
49:02 - all the records from our database so
49:06 - what we want next is to create another
49:09 - read for a single record from our
49:13 - database so so for example we want to
49:15 - specify a certain ID of a post and then
49:21 - we should be able to get all the
49:22 - information associated by that
49:25 - particular ID so let's go back to our
49:28 - code editor and in our post that PHP
49:32 - file so right below the public function
49:36 - read and make sure you're still under or
49:41 - inside the post class so in here I'm
49:46 - just going to add another function so
49:49 - public and then function read underscore
49:54 - single so this will be just getting a
49:59 - single post from our database so as for
50:02 - the query so we're just going to almost
50:06 - we're going to use almost the same query
50:08 - and then we're just going to change
50:12 - something here instead of using order by
50:16 - so we should remove this because we're
50:20 - only getting a single post so there's no
50:22 - point of ordering it by the ID or
50:26 - created add attribute and of course we
50:32 - want to get a scene
50:37 - pause so we need to specify that it
50:42 - should be a particular ID and of course
50:48 - we need to limit the return of this
50:51 - query into one because yes we only want
50:55 - to have a single pose to be returned and
51:00 - in here we need to prepare also the
51:04 - statement for this particular function
51:08 - so that's prepared statement and in our
51:16 - statement here below you need to get the
51:20 - actual data coming from our database so
51:22 - statement and then fetch and then video
51:31 - fetch fetch associative array so and
51:40 - then below here we need to set the
51:43 - properties of our post so this title
51:50 - will be our row and then of course the
51:55 - return title from our query and then
51:58 - we're going to copy this one two three
52:03 - four okay it should be for our body
52:09 - this one is our author okay and then we
52:16 - also have the category ID category
52:20 - underscore ID so copy and paste it here
52:23 - and then category name gory name okay so
52:36 - here we go and we need to bind a
52:41 - parameter for this particular statement
52:45 - here so we're
52:47 - post id equals so instead of executing
52:55 - it directly we need to bind a firearm so
53:01 - that's buying parameter and then we're
53:06 - just going to specify the first one and
53:11 - ID should be the post ID okay and of
53:17 - course this is finding the bottom right
53:20 - and the next one is executing the
53:25 - execute the query
53:28 - so that's STM T and then execute okay so
53:37 - stmd execute and then row is the MD
53:44 - fetch video fetch assault or associate
53:48 - or associative array so I think that's
53:51 - it for our public function read
53:55 - underscore single and under our API
53:58 - let's just create a new file here so
54:04 - that's new file and then read single
54:11 - that PHP what happened there so read
54:18 - single dot PHP and then we're just going
54:22 - to copy here there read that big
54:27 - file and we're just going to delete the
54:31 - content of this below only the header so
54:38 - we're just going to use the same headers
54:40 - access control and of course the content
54:42 - type then we initialize our file and
54:45 - then instantiate a post object and we
54:54 - need to assign the post ID
55:00 - so that's post and then ID equals we're
55:11 - just tracking if the get ID is set so
55:21 - return the get ID otherwise exit or die
55:34 - and then post read single so that's the
55:42 - function that we have defined in our
55:44 - read that PHP file and of course we want
55:48 - to create an array of our values so that
55:54 - will be post post just like what we have
55:59 - in our read that page P so array and
56:05 - then of course we need to specify also
56:08 - the ID okay
56:11 - so post ID we're just going to copy this
56:20 - six by ten of our post the body of our
56:26 - prose and of course the author of the
56:31 - post category ID okay and then category
56:40 - the our name so we're just going to copy
56:43 - this title for this so this one and also
56:50 - this one you know so this one and so
56:54 - with this one and we need to make make a
57:00 - JSON okay and print our and of course
57:08 - Jason in cold
57:13 - the post array so post array so I think
57:19 - that's it and we can use this in our
57:21 - post months off there so let's go ahead
57:23 - and let's try that so I'm just going to
57:27 - copy this and create a new request so
57:31 - this should be API and then read
57:35 - underscore single dot PHP and then
57:38 - specify the ID say for example I did
57:41 - three okay so we have an error so let's
57:47 - try two so we have an error here because
57:50 - we misspelled the fetch so post fetch
58:01 - okay so let's go back to postman and
58:05 - send category name ID you find property
58:12 - post single single category name ID okay
58:22 - save and again so that's it we now have
58:28 - the post three with all the information
58:32 - coming from our database so you try to
58:35 - go with another one ID too so we can get
58:39 - all the information associated with ID
58:43 - number two and in this video guys were
58:46 - you going to discuss how to create or
58:49 - implement a create record in store page
58:53 - previous API project so as a sort of
58:56 - review guys in the previous video we
58:58 - also have implemented the reading of
59:01 - single record coming from our database
59:04 - so we have laid out the function read
59:07 - underscore single and of course we
59:10 - created a file read single dot PHP and
59:14 - then we're querying the record by using
59:17 - its ID and of course returning all the
59:20 - data related to that particular ID and
59:24 - now let's continue working on with our
59:27 - post that PHP file and just below the
59:30 - read underscore single function we're
59:33 - going to create another function here so
59:35 - the name of this particular function
59:37 - will be public function and then create
59:45 - okay
59:47 - so in this particular function we're
59:52 - going to add some lines in order for us
59:56 - to create another or create a record by
60:01 - using our API project so for us to do
60:06 - that let's go ahead and build first our
60:10 - query so here we need to create our
60:14 - query okay and that will be query and
60:19 - force the actual query of our function
60:23 - which will be insert because we're
60:26 - trying to create a record into our
60:29 - database
60:30 - and of course we'll just concatenate our
60:34 - table name here so this and then the
60:40 - table of this particular class so I
60:46 - think it's yeah table okay that should
60:51 - be table and right after that is another
60:57 - string set title equals placeholder
61:04 - title okay and then body equals the
61:13 - placeholder of the body of a post okay
61:17 - another one for our author and the
61:22 - placeholder for our author and then of
61:26 - course the category ID so category ID
61:30 - and then the placeholder for our
61:35 - category ID
61:37 - Hey so and then we need to prepare our
61:41 - statement here below so prepare
61:44 - statement so that will be STM tea and
61:49 - using the connection that we have so
61:52 - that will be connection and then prepare
62:00 - and of course the query a and then we
62:09 - need to clean the data next because the
62:15 - information that will be saved into our
62:17 - database is coming from the user Earl
62:20 - input of the user or the requests coming
62:23 - from our user so that's why we need to
62:26 - clean the data clean data so for our
62:31 - title we need to set the title equals to
62:36 - HTML special special chars ok and then
62:42 - strip tags okay and then this that or
62:52 - this and then the attribute title a so
62:57 - this line it only means that we just
63:00 - want to remove all the unwanted problems
63:05 - with our data so so this will be for our
63:11 - body okay this will be for the author
63:16 - okay and of course this will be for our
63:20 - category beggary ID hey there you go
63:24 - so we just want to make sure that it
63:28 - will be the same also for this
63:30 - particular part so category underscore
63:33 - ID and yes we just need to make sure -
63:39 - and then this or to align this to make
63:42 - our code readable
63:46 - Hey and then right after that one we
63:49 - need to bind the parameter or the params
63:52 - for our like a placeholder for a title
63:57 - body author and category ID so this part
64:01 - right here will be binding of parameters
64:05 - okay so as TMP and then bind param
64:13 - specifying the placeholder over it of
64:16 - our title and then the actual value of
64:20 - our item so there you go and then we'll
64:23 - just copy this one for the other
64:26 - attributes as well for our category ID
64:31 - for our author and of course for our
64:35 - body or body of the post and of course
64:39 - we need to change also the placeholder
64:42 - for this this and so with this category
64:48 - ID okay
64:50 - so after that one we need to execute the
64:57 - query of course after binding all the
65:00 - forums cleaning the data so the last
65:02 - part will be executing or execute the
65:04 - query so all we have to do is call the
65:12 - STM T and then execute okay
65:16 - and then if the execution of this
65:21 - particular query is successful then all
65:23 - we have to do is return true okay
65:27 - otherwise we print an error here print
65:33 - error if something goes wrong so that
65:40 - will be print F a winter and then error
65:48 - will be % s
65:55 - okay and the error our statement or the
66:05 - query that we have and then return false
66:11 - something like that
66:12 - hey so basically guys we only prepared
66:16 - our public function or public function
66:20 - crate and this will be used for our
66:24 - files especially in our API so in under
66:28 - or API directory we need to create
66:32 - another file so that will be great so
66:37 - let's go ahead and create a new file and
66:41 - then new file and then we need to say
66:46 - here create that PHP so in our create
66:49 - that page we guys we just want to add
66:54 - some headers also the same with ours
66:58 - reading I mean the read that page P okay
67:01 - so we might as well copy all this all
67:06 - this color right here and then paste it
67:09 - here and then we just need to remove
67:15 - okay starting from here and then guys as
67:20 - I've said we need to add some other
67:22 - either either we need to add some other
67:25 - headers here so we have access control
67:29 - allow region and we have content type so
67:33 - another one header is access control
67:38 - access control and then allow methods
67:47 - okay so this is save or create query or
67:55 - we need to create a record to our
67:58 - database so this will be a post method
68:00 - meaning the request the request should
68:03 - have data for us to save int or data
68:08 - and then we also have to add another
68:12 - header here so this will be access and
68:19 - then control and then allow headers so
68:26 - basically we're just specifying here
68:28 - what are the header is that I needed so
68:30 - that will be this one
68:35 - we just need to duplicate this okay and
68:44 - content type also okay
68:50 - another thing is the access control
68:54 - alone methods okay
69:00 - and also the authorization okay so
69:06 - basically we're not going to touch
69:08 - authorization in this particular series
69:10 - but for the sake of this tutorial we're
69:12 - going to add authorized ation there so
69:15 - maybe in the future you want to
69:17 - implement an authorization for your PHP
69:21 - API and the last one will be the X
69:25 - requested to it okay so these are all
69:30 - the headers that are required or
69:32 - specified as the allowed headers and in
69:36 - this video guys we're going to continue
69:38 - working with our create that PHP file
69:42 - and at the end of this video we're going
69:45 - or we should be able to insert record
69:48 - into our database by using our PHP API
69:51 - so let's go ahead and try to modify our
69:56 - cade that PHP so last time we we just
69:59 - added the header you know of course the
70:02 - function in our post at PHP so we have
70:05 - here the great function and we should be
70:10 - able to use that in our create that PHP
70:14 - file so in here we have initialized our
70:17 - API by using our initialize that PHP
70:21 - so basically in initialize that PHP we
70:24 - connected our project into our database
70:28 - so the next step is to instantiate the
70:34 - post so we have we have that here so
70:37 - instantiate the post by using the post
70:40 - class and of course applying the
70:42 - database connection so after that we
70:45 - need to get the posted data okay so of
70:53 - course the data should be coming from a
70:55 - request okay so we need to decode that
70:59 - by using file get contents and of course
71:07 - specify that it is a PHP slash slash
71:12 - input okay and then by that we can get
71:17 - the actual data so post we're going to
71:22 - set the title by getting the data and of
71:28 - course the attribute title okay so copy
71:32 - and paste this for the other attributes
71:34 - as well so we have the body the author
71:39 - and then we also have the category ID so
71:45 - copy and paste okay
71:51 - okay so after that we can just create
71:56 - the post create post and then we can use
72:00 - the function that we have defined in our
72:03 - post that PHP which is the grade so in
72:07 - order for us to do that let's add the
72:10 - post and then call the function great so
72:16 - we're just checking if it is successful
72:18 - or meaning the function returning true
72:23 - okay so if the function return true then
72:28 - we're going to echo a message here or
72:30 - meaning display a message
72:33 - so JSON encode and this is going to be
72:40 - an array so specifying the message which
72:46 - will be post corrected okay and then of
72:52 - course if the return is not true then we
72:57 - will return I mean we will display
73:01 - another message okay already you can
73:09 - just copy and copy and paste this so the
73:13 - message will be post not created okay so
73:19 - let's try this in our postman software
73:22 - so first month and this will help us to
73:28 - develop API so if you're serious about
73:30 - working with the API so make sure to
73:33 - download and use postman software so in
73:37 - here we just need to add a another tab
73:42 - okay so instead of using the read
73:48 - underscore single then we're going to
73:50 - add or change this into create that PHP
73:53 - and of course it should be post because
73:57 - we're sending data into our API and for
74:01 - the headers let's just say content type
74:09 - so as you can see if we try to type in
74:13 - we can have the options and then we can
74:18 - see content it should be content type
74:23 - content type and it should be
74:27 - application slash JSON and of course in
74:31 - our body we can choose raw and then we
74:37 - can specify here the data that we want
74:40 - to pass into our API so we need title
74:45 - for that so basically we're just going
74:47 - to
74:47 - around our values the key in values with
74:51 - double goat so sample API post and then
74:58 - comma and then body sample body of an
75:09 - API goes from a request and then we have
75:17 - another one for our author so Brad
75:25 - Stevens and third or the fourth one will
75:30 - be the category ID a regular ID and then
75:37 - we can say like there are I think we
75:41 - have four categories right now so
75:45 - basically we can choose from one two
75:47 - three and four so we'll just say three
75:51 - and we can send this try and see if our
75:58 - API works so we have an error here we
76:04 - have an error in our SQL syntax so this
76:09 - is posted PHP on line 81 so this is
76:14 - probably the query so post that PHP and
76:19 - then we have the actual query here at
76:22 - the top so I think this one made the
76:27 - error so save that and let's try to test
76:33 - it by sending another request so now we
76:36 - have field created that doesn't have a
76:39 - default value that's because we need to
76:45 - edit the attribute of our post table so
76:52 - as you can see here we have the
76:54 - different attributes category ID title
76:56 - body and author and created that so
76:59 - let's go to structure
77:01 - and now you created at date time doesn't
77:06 - have a default value so we're going to
77:09 - change that and the default will be the
77:13 - current timestamp okay and then save and
77:18 - let's go back to our postman API I'm in
77:22 - postman software and send another
77:26 - request to test our API so send so
77:32 - sending request and we have the response
77:36 - which says message that depots has been
77:41 - created okay so in order for us to test
77:45 - that there are other ways for us to test
77:50 - this so we can just read all the records
77:54 - so send and there you go we have here
77:59 - the data that has been added recently so
78:04 - the ID is five and the sample the title
78:08 - is sample API post which we have
78:13 - specified here so sample API post and
78:16 - then we also have the body so sample
78:20 - body of an API post from a request
78:22 - okay the same and of course the author
78:25 - is Brad Stevens the category ID is three
78:34 - okay that's what we have specified also
78:37 - here and the category name is Otto so I
78:43 - think that concludes our create that PHP
78:48 - or create function or create feature and
78:51 - we have successfully added that into our
78:54 - API so the next step is to create or add
78:58 - the feature for updating the records and
79:02 - in this video guys we're going to
79:05 - discuss the update so basically we're
79:08 - just going to add the update function or
79:11 - feature into our page be restful api
79:15 - so we have here degrade function as you
79:18 - can see from our post that PHP file and
79:20 - then we're going to copy the whole
79:25 - function because the idea of create and
79:29 - update is almost the same so we're just
79:32 - going to copy all this included in this
79:36 - particular create function and then
79:38 - right below that we can paste the update
79:43 - so we're just going to name our function
79:47 - in to update okay so this is the update
79:52 - post function okay and of course the
80:00 - query will be a bit different because
80:01 - we're updating a record now so we'll
80:06 - just say update this table and set all
80:11 - the necessary attributes so for example
80:14 - the title the body the author you know
80:17 - of course the category ID and since
80:20 - we're updating a record we need to set
80:25 - the ID or like filter by ID because we
80:31 - don't want to update all the records so
80:34 - for now let's just say we're IB equals
80:40 - we can use the question mark or we can
80:44 - also use the placeholder : ID and of
80:50 - course we can also do the cleaning of
80:54 - data of the ID so setup category ID and
81:00 - also here we're just going to say ID and
81:04 - then indent this on line with the other
81:07 - attributes okay and then of course we
81:11 - need to bind the param parameter so
81:19 - we're using the IDS placeholder for our
81:23 - ID and the value will be this
81:27 - and then ID and then it should also
81:32 - execute the query and then return true
81:36 - if the query is successful otherwise
81:40 - print the error message and of course
81:44 - return false so in our project we need
81:48 - to create another create another file
81:54 - for our API so we have already create
81:57 - that PHP also the read underscore single
82:01 - dot PHP and then read that PHP so now we
82:04 - need to add another one
82:07 - for our update so that will be update
82:10 - that PHP and of course also a sort of
82:15 - basis from for this update dot PHP we
82:18 - can just copy all the lines of codes
82:24 - that we have added in our case that PHP
82:26 - and then paste it in or update at PHP
82:29 - because I as I've said the logic behind
82:33 - or the theory behind the create and
82:36 - update is almost the same okay so but
82:41 - instead of using post it should be good
82:45 - okay and then we also need to have the
82:50 - ID here so post title and then the ID
83:00 - because we're specifying the ID of the
83:04 - post or the record that we want to
83:07 - update and of course instead of using
83:11 - her aid we should call the method update
83:14 - and of course it should be post updated
83:19 - and post not updated ok so so I think
83:27 - that's all there is to it for this
83:28 - update that PHP file so let's try that
83:32 - in our postman software so we have here
83:36 - the create that PHP so we're going to
83:39 - use
83:40 - update that PHP and then specify the ID
83:47 - of the record that we want to update so
83:50 - ID and then Colin and then let's write
83:53 - let's try to see which post or record
83:59 - that we want to update so we have added
84:01 - this sample API post by using our create
84:05 - that PHP file right before or from the
84:08 - previous video so the ID of this is five
84:11 - so let's just use that so ID is five
84:19 - five and then let's just say updated
84:26 - updated API post sample body of an API
84:34 - sample body of an updated update API
84:41 - pose from a request so we have the same
84:47 - author category ID and also the ID that
84:54 - we're going to specify or update and of
84:57 - course because in our update dot PHP we
85:03 - specify that it should be a put method
85:06 - so of course we need to use that in our
85:11 - postman in order for us to properly
85:15 - update the data
85:18 - okay so send and let's try that and the
85:22 - record or the response says that the
85:26 - pose has been updated so let's try to
85:28 - read all the data so as you can see here
85:34 - we have updated the title and of course
85:38 - we have updated the body of our post so
85:43 - as you can see the update function are
85:46 - the update feature of our PHP rest or
85:49 - the PHP API that we are developing as
85:53 - working so the next step is to create
85:57 - another one or another feature we will
86:01 - be adding another feature in store page
86:03 - by REST API so basically we all have the
86:09 - reading of all the data reading of a
86:12 - single data or single record and then
86:15 - also we have creating a record and also
86:19 - the updates so the last one will be the
86:22 - delete of a certain record okay so
86:28 - basically the same idea we will be
86:31 - adding the function here for our delete
86:37 - so that will be delete or public
86:40 - function delete it should be an easy
86:44 - function right here so right below the
86:47 - update function we will have to add the
86:52 - delete function so that's public
86:58 - function and then delete okay and we
87:05 - just need to create the query here so
87:11 - that will be query and then of course we
87:15 - leaped from and then this table and of
87:24 - course we're ID we need to specify the
87:30 - ID of the record that we want to delete
87:34 - and then we need to say we are preparing
87:39 - the statement prepare statement so SD
87:44 - empty and using the connection prepare
87:55 - query and of course we need to clean
88:00 - clean the data so we can just copy the
88:10 - this particular line so clean data and
88:15 - yeah ID and of course we need to bind
88:19 - the parameter so SD empty and then vine
88:25 - parameter specify the ID and of course
88:32 - the actual value and we're going to
88:39 - execute the query the same thing here so
88:44 - just like that so basically we're just
88:48 - returning true if the statement has been
88:51 - successful otherwise we need to print
88:54 - the error and return false so public
88:58 - function delete and we have set up the
89:00 - query to delete the record from our
89:03 - database we have prepared statement and
89:07 - then we also have the mechanism to clean
89:10 - the data so as you can see and then this
89:13 - right this part right here is binding
89:16 - the ID parameter to our query and and
89:23 - this part is to execute the actual query
89:25 - and if there is an error so we should be
89:28 - printing or the error here and guys the
89:33 - next step is to create another file here
89:35 - under our API so new file and then this
89:40 - should be delete that PHP okay and in
89:46 - here we're going to add some logic and
89:49 - add some lines and and I think we could
89:52 - just copy what we have in our update dot
89:54 - PHP and as you can see here we have the
90:00 - code or lines of code for our update so
90:04 - let's go ahead and copy all this and
90:07 - paste it in or delete that page 55 so in
90:11 - here we're gonna change a couple of
90:13 - things
90:14 - so the for example the allow methods
90:18 - instead of using put it should be delete
90:20 - right there and of course initializing
90:24 - our API by using the initialize that PHP
90:26 - instantiate the post class by using this
90:30 - particular line and supplying the
90:32 - database connection that we have
90:34 - configured with our initialize that PHP
90:37 - and then of course we're getting the
90:38 - data that that has been posted by the
90:41 - user or by the request so as you can see
90:44 - we are getting the data by using the
90:49 - code and file get contents and PHP input
90:52 - so I think other information just like
90:55 - the category ID the author and the body
90:59 - and of course the title is not needed
91:01 - here because we're only concerned with
91:03 - the ID that has been passed by the user
91:08 - or the request itself so we're citing
91:12 - the attribute ID by getting the data ID
91:15 - just like that and as you can see we
91:18 - have created the delete function so
91:21 - we're just going to update our delete
91:23 - dot PHP instead of using update function
91:27 - because this is a feature for delete it
91:30 - should be of course the delete function
91:32 - there and change the message so instead
91:36 - of updated it should be post deleted
91:41 - okay and of course this one will be post
91:45 - not deleted so I think that's all for
91:48 - this file delete that page B so just say
91:51 - the post that page B and of course the
91:54 - delete that page B so we'll try real
91:56 - quick this particular feature with our
91:59 - postman API so let's go ahead and open
92:02 - up our postman software and try to check
92:06 - if our feature really works
92:10 - as I've said guys from my previous
92:12 - videos if you're working with an API and
92:18 - we're trying to get around or to be
92:22 - comfortable with an API be familiar with
92:26 - how API works so post months off there
92:29 - can really help you we
92:31 - of the activities that you want with an
92:34 - API so basically we have read that PHP
92:39 - you have read single we also have the
92:43 - update dot PHP so if you try to run or
92:49 - read that PHP we should be able to get
92:52 - all the records for coming from our
92:55 - database as you can see here and of
92:58 - course we're dealing with delete maybe
93:00 - we could just create a certain record
93:07 - for it now or maybe we'll just delete a
93:10 - certain post just like this one ID
93:12 - equals to 5 so we'll try that ID is 5 so
93:18 - we'll just copy this and then create a
93:21 - new tab here in our postman software
93:23 - make sure that the method is delete and
93:27 - of course the the file that we want is
93:30 - the belief that PHP and of course we're
93:34 - going to supply the IV of the record
93:39 - that we want to delete and as you can
93:41 - see we have the ID is 5 ok so we're just
93:46 - going to go grab that and set the ID
93:49 - goes to 5 just to check if we can really
93:54 - delete the post with the ID 5 so send so
94:02 - we have an error here let's try to
94:07 - trying to get property of a non object
94:13 - so line 17 over delete that PHP 9 17
94:19 - post ID and theta ID so also we're
94:29 - getting the idea from data ID and as you
94:32 - can see we're using PHP input so instead
94:35 - of supplying directly the ID here this
94:38 - should be declared in the body of the
94:42 - request so let's
94:45 - try that local host PHP yeah let's go to
94:53 - our body of our post and then raw okay
95:01 - so in here we're going to supply the ID
95:05 - instead of directly setting the ID
95:09 - equals here so this will be ID and then
95:15 - of course the value which is five okay
95:21 - so send a request so what happened as
95:29 - you can see we have here the message
95:31 - post deleted so we should not be able to
95:35 - or we won't be able to view or get the
95:40 - data that is that has the idea of five
95:43 - so try that so as you can see the record
95:48 - that has the idea of five is now gone
95:51 - okay so basically we're just deleting
95:57 - the record by supplying the parameter in
96:02 - our request body so I think that
96:07 - concludes our PHP REST API tutorial and
96:12 - ii c we have fully functions or we have
96:16 - now the full function of our PHP rest
96:20 - api so we have to create delete read
96:23 - single read that PHP and of course the
96:26 - update so if you want because as you can
96:29 - see there is also the category for our
96:32 - post so we have to cut the post and then
96:35 - the category of our post so we could
96:38 - also create another file for our
96:41 - category to be able to have the read
96:47 - update the read single and also the
96:50 - delete function for our categories but
96:52 - it I think it's a it is pretty easy
96:54 - because the category has only two or
96:57 - three
96:58 - attributes the ID and then the name and
97:01 - of course the created add attribute so
97:06 - you can if you want you can create it on
97:10 - your own you can start by creating the
97:14 - read that PHP update that PHP for this
97:20 - particular model category that PHP so I
97:24 - think for now I'll just guide you for
97:29 - the single or read that function for our
97:36 - category that PHP so we're going to
97:39 - create another class for this so I'm
97:43 - just going to copy right here and then
97:48 - here so where's our get their diary that
97:57 - PHP and instead of using the post it
98:01 - should be a category so this is for our
98:04 - category table so we have construct or
98:10 - the pigs and the DB connection and of
98:13 - course the read and we need to close the
98:15 - territory class right there okay and
98:20 - instead of using the post table we
98:23 - should be able to or we should use the
98:26 - category category table in our database
98:30 - and of course as I've said there are
98:32 - only three properties for our category
98:42 - so the ID the name and of course the
98:47 - create of that create that okay okay so
98:54 - I think this is Pythagoras instead of
98:59 - category categories there you go
99:02 - and create to that and then we have
99:06 - constructor with DB parameter or the do
99:09 - connection parameter
99:10 - and in here instead of having this join
99:15 - query we can just create or query all
99:20 - the attributes from our table name
99:24 - categories and we don't want or we don't
99:27 - need this particular part right here so
99:32 - select all from categories and then
99:35 - we're executing the query there you go
99:38 - and in here in our API we can just say
99:43 - read all categories that PHP and of
99:49 - course we can just copy the code that we
99:53 - have here in our post dot read dot PHP
99:59 - so that will be read all the categories
100:04 - and instead of using post here we should
100:10 - say category okay and then passing the
100:15 - DB connection and then reading or what
100:20 - is the method so I think we also use
100:23 - read write so read okay and then we have
100:33 - the ID the name and of course I think we
100:44 - only have great add in our table in our
100:48 - database and you can just move this
100:55 - crate out okay and Preta that it should
101:02 - be created that so basically we can just
101:05 - delete all others and we should be able
101:09 - to see our categories okay so category
101:15 - is no categories found if there is no
101:18 - record phone for our categories so let's
101:20 - do that and try that with our postman
101:24 - or post months off there okay
101:28 - and try to check if we have a functional
101:33 - read for our categories so here new tab
101:43 - it up there
101:46 - you can copy this and make sure it's
101:49 - another request API and we have the file
101:55 - read all underscore categories and then
102:00 - it should be get and then send so we
102:04 - have an error class category not found
102:08 - let's try that because we haven't
102:12 - initialized our class category in our
102:15 - initialized at PHP so let's do that with
102:20 - this line category that PHP and say that
102:25 - and go back to post once off there and
102:27 - send undefined variable crated add in
102:32 - all categories 26
102:35 - that's because huh 26 8 and I so it
102:48 - should be create all right okay and then
102:53 - send so there you go as you can see we
102:57 - can now read the categories from our
102:59 - database so guys it's your turn now to
103:04 - make the other functions like the read
103:07 - the update reading of a single one and
103:10 - of course deleting a single record from
103:12 - our database so guys that concludes our
103:15 - PHP rest api tutorial and I hope you
103:18 - enjoyed this series and if you are new
103:23 - here in our youtube channel and you want
103:24 - content about programming so I am
103:28 - inviting you to subscribe and press the
103:30 - notification bell so you will get
103:32 - updated whenever we have a new upload
103:34 - regarding programming

Cleaned transcript:

hey what's up guys so this is another web technology informational video tutorial series on how to build a REST API on PHP now let's go to the details of what is an API so basically an API stands for application program interface so application program interface and that's a very broad term so there's all kinds of API but we're specifically talking about web api here so there is an api in your smartphone or an even in your refrigerators and so this is a very generalized but essentially an api is a contract provided of or provided by one piece of software to another piece of software and it usually consists of structure structured request and then a structured response so one piece of software it says give me this kind of information or this information formatted in this way and I'll give you this data or this function or whatever that response may be so in order for us to better understand what an API is so let's have a look on the analogy that I provided here of what is an API so this is the analogy that we have here so we have customers sitting on the table so consider this customers as a client or web application and then the kitchen is the server or the service that that process certain requests well the waiter is like an API so it is formatted to take a certain order in a specific way and then bring back a certain meal and this would be the data or the response that you saw that you requested so an API is basically a messenger or a waiter between running software think of this as the connection between the client or the request requesting client and the server so this is the API at the center providing a way of communication between two software so now let's talk about rest okay so basically it is a representational state transfer and it is an architectural style for designing Network applications so it relies on stateless clientserver protocol which is HTTP and you're quite familiar with HTTP right so it treats server objects as resources that can be created or destroyed and can be used by virtually any or virtually any programming languages so rest can be used by JavaScript PHP Python C sharp and other languages that are available today so HTTP has different methods or methods that are being used so we have this methods number one is to get so the purpose it the purpose of this is to retrieve data from a specified resource we also have post meaning we submit data to be processed to a specified resource and get imposed basically these are the two methods that are basically used on a form get in post and then we also have this put so the put method is an update to a specified resource and also we have the delete so delete a specified resource and then we also have this three other methods which has had options and patch but we're not going to go into details on on this tree so we will be familiarizing only the get post put and delete so now we're going to look at the some end points or example end points so this is the you are URI or URL where our API or service can be accessed by a client application so this is just an example on how the endpoint works so we have get so get and then the URL order you are URI that the API or service can be accessed so anyway we can always choose the record in setup by using API we can have always the option to use different directories a for example API access it depends on your preference we also have get and then specify the ID and then we also have post so as you can see post and get have can have different or have the same URI but we don't have to worry about that because we specify the post or the cat which is the method to use so it doesn't matter if they have different or do you have the same URI that were using then we have put and then this is the example URI specifying the ID and of course the delete the same thing we'd get put and delete they have the same URI being used but the different methods get put in delete now let's try to have a look on how to setup our PHP rest project so I'm going to show you how to properly arranged or configure your rest project so for the purpose of this video tutorial series I'm going to use one server so it is consisting of Apache PHP MySQL and MariaDB so it is a Windows web development environment and if you want to use swarm server you can go ahead and download one server and install it on your local development machine so actually you can also use other server that you want or you prefer so you can use lamp Sam or other versions of this server so we will also use video or PHP data objects so it is basically an extension that will provide as consistent interface for accessing databases in PHP it will be helpful for us to use PHP data objects okay and also I'm going to use for our code editor I'm going to use visual code or visual studio code as our primary code editor and it is open source and can be run every where you can download for Windows Mac OS and Linux so you can use that but anyway you can also use your preferred a DES tour you can use sublime you can also add on but yeah for the purpose of this video tutorial I'm going to use Visual Studio code so for the layout of our project PHP project so I have created the directory PHP rest that will be the name of our project and then you can it is created on the root directory of our server so PHP rest and under here we will just create few directory for our files so current includes and then we also have no not under includes delete this you need to delete this okay core so in core we will be creating few files I'll be creating the initialize that PHP so basically the purpose of this file is to initialize all other all our settings in our project and then of course in include we will create also another file which is config that PHP so config that page we will contain our database connection for our project and before we continue with our tutorial let's go ahead and try to see a real world example of REST API so as you can see we are in the github developer page and we can see here different options and different information on how to implement a certain API so basically we can see here the different methods also that we have talked from the previous video and we can see here the endpoint so this is basically the root endpoint of the API of github.com so we can issue get request to the root endpoint to get the all in point categories that the REST API version 3 supports so we can use squirrel HTTP slash slash API that github.com and here we can also see the HTTP redirects okay so we have status code 301 302 so basically we can implement this type of redirects into our own page where a state and also we talk about HTTP verse before our methods right so we have had you get and then post we have patch we have also put in delete ok and then we also have different options here like the pagination okay so if we have like thousands of records or yeah thousands of Records and then we don't want our user to be overwhelmed with information or overwhelmed with data so we might want to paginate the data in our database by using some sort of like a parameter so page like page two and then every page consists of 100 records so we can do that with our own PHP REST API so I'm just showing you here all the possibilities that we can add into our PHP REST API okay we also have this like link header so if we want that we can also implement that into our PHP REST API and then we can also have like limiting to our request every day to our API so here as you can see they have like five thousand requests per hour limit so yeah we can also do that if we want to limit the access to our API so now let's go back to our code editor and try to complete and start the project and and actually write some code to implement our own API in PHP so this is our base project page P rest and as you can see we have two more directories the core and includes the core has the initialize that PHP file and also includes has config dot PHP so in config dot PHP we're going to add the settings and we'll try to connect to our database so let's try to do that here so there are a couple of things that we need we're going to have or we're going to define the user this is for our database user and we also have to define the password for that ok and also you need to define first our database name so maybe we'll just try to claim it as PHP rest and we can try to end then this just to make it more readable ok and then here we're just going to define another variable DB and then you this will be the actual connection for our database and in here we need to add MySQL and then the host s you can say 127.0.0.1 and then the database name will be of course equal to are defined database name so that's DB underscore name and of course another one for our character set so char set equals utf8 and we're going to supply also the user or DB user and of course our DB password okay so that's the connection for our database and then we're going to set some attributes here leave the attributes so DB set attribute attribute and then let's say video colin colin and then add a TDR emulate prepares we'll just set it to false and we can copy this set attribute and this will be my SQL attr use buffered query okay so this will be for setting up our database connection and this will make the database connection later on to be faster than a normal database connection so attr error mode will be video and the error mode is exception okay and then I think that's it for our database connection so we have set the database attributes we have set the connection and we can use this class or I mean this particular config file to actually connect our database and then we're just going to use this in all our files later on when you try to have like get all the data coming from our database and actually in our config that page maybe we can try to define some constant here so for example define that's this define and so for example app name we'll just say PHP REST API tutorial okay and then in our initialize that PHP we can have or we can use this config that PHP file and try to connect our database so in here and initialize that PHP we'll just going to define some constant here so we're just going to check first a vs this is for our directory separator so D s so we're just checking if TDS or directories operator is defined so if it is defined so we're just going to do nothing or if it is not defined let's go into let's just go ahead and define it by saying D s and directory separator okay and then semicolon and then that's right let's try to define also site root for our project so the same thing we're going to check if the site route is defined if it is already defined and let's just say none and if it is not then to find it by just using site route or site underscore route here and then D s so D s and then the directory of our file or our project so in my case I'm using one and after that one another directory separator and then the triple W folder that will host our files and then another directory separator and the name of our project which is PHP rest okay so we have defined our site root and then we supplied the directory that our directory of our project so now let's just define the include path or our files so let's define and then I nc then path so it will just load all the necessary files in our include folders ok so i NC path and then we need to bring in the site root ok and then the directory separator and course the folder glutes okay so basically we're just saying here that we want to go or we want to define the include path as the side road which is 164 and then triple w and then HP rest and of course the includes directory which is we have created the config dot PHP file okay and of course we also need to do the same with our core directory okay so basically we're just defining here different directories in our project so it will make more sense later on when we try to include all this files or all the files and under this directories so core path and then it should be instead of using include it should be core okay so since we have this lines already we can just load the config file first so to do that we need to require once ok by using the constant ing path that we have defined above and then the in the directory separator and then the file or the actual file for our config which has config data HP ok and of course we can also include the core classes here so let us say required ones and then the core path which is our constant and then directory separator and of course say for example we have session or any other classes from our core directory so so for example we will create another one here say post post that PHP okay so in our initialize that paid page we will just say or path and then directories operate or and of course the post at PHP okay so after that we need to go to our post add PHP file and configure the actual content of our post so basically we're just going to create a class here so PHP and class post and in here we need to add the database stuff here so that will be private in the end a connection and we also have private and table which will be post okay and then of course we need to add also the post properties so that will be public I mean public category ID public vagary name public title of our post and body of a post and the author or authors were post and also the date that the post has been created so there you go and of course we need to initialize this class or particular class by using the construct or with the DB connection okay so that will be public function and then construct and of course we need to supply the database connection here and we need to set the connection or the attribute of this particular class connection to the database connection that we have supplied in our contra method or function okay so here we go and below this construct a construct method we need to have the function to actually read the record from our database so public function and read okay so this is for getting the posts from our database and in here we need to create the actual query of our read function so that will be a query and then the Select statement okay so we're just going to have this formatted so it is easy to read so select and then see that name is category name and B that I did this is for between category name or D category and of course the post so we that category ID the great idea here and post title Bo's body and of course the post also or author of our post and the date okay and in here we need to specify the table which are what table yeah this table which has we have initialized it into post and then the name which is P or the alias of our table is P and then left join categories so this will involve two tables the post and categories so alias of categories C and on P that category ID equals C that ID and then we need to have this ordered by ordered by P decorated created at it should be created ad descending to actually get the the latest post and we need to close this here okay and in here we need to prepare the statement we prepare the statement or repair statement okay and that's stmd and then using the connection that we have and of course repair method and the app shell query of our post and execute carry by calling stmd and then using the execute function okay and then we're just going to return the STM T for an hour or the statement okay so save this and then we also need to add another file or another directory here so no not there order directory for our API so in our API we need to have the lead that PHP file okay so let's open up our PHP tag in here and since it is a PHP REST API we're going to allow HTTP request here so we're going to add headers here so that will be header and then inside we need to define access control and then allow region and then colon and then of course the asterisk which means we're just allowing anyone without the problem with authentication or oath or something like that and then also we need to specify the content type here so that's content content and then type Colin so this will be the mime type is application slash JSON format okay so in here we need to include the initialize PHP file so that's our read that PHP file is inside the API key directory so we need to back or up one directory so that's period period and then slash and of course our initialize core and then initialize that PHP so what we're doing is that we're just calling the initialize that PHP file which contains all the constant that we have defined the directory separate or the site root the include path in the core path and of course it will load the config file so which is our database connection so we already have the DB connection here so we can just use it in our read that PHP file so this is initializing initialize seeing our API so as i've said this include the config of our database the connection and also all the files that we have initialized in our initialize dot PHP so say for example the post we require once the post dot PHP file which is the class post that includes all the necessary properties for this particular class so in here we need to instantiate the post class so that will be instance shaped post so will be post and then new post and then of course because we specify that our construct function takes in a DB connection so that will be post equals new post and then of course our DB connection so if you're wondering where is this DB connection or this DB variable it is in our config that PHP file as you can see here we have defined the DB or the deep database connection so next is to query the actual blog post so blog post theory so we're going to do that by using the post object and then by using the read function so the read function we have defined it in our post that PHP file which is our class post so read and then of course we're going to get the row count so that will be numb and then result and then raw count and we're going to check if num is greater than 0 so that will be posed post array or yeah RA and then we're just going to initialize it as an empty array so post our and then we're going to have this data equals array okay and then we're just going to add the else statement here and in here we're just going to iterate the row equals the result and then we're going to fetch the PDO associative array so fetch a sock and then curly braces and then we're just going to say here extra the row okay so here we're going to say post item equals array and then inside this particular array we're going to define the attributes that we to return for this particular post so ID and then the title of our post so tie it down okay and then body of a post also so each time entity called the value per post and then of course the author of the post okay offer and also the category ID okay so category ID and last one will be the category name so category underscore name and category underscore name and of course after that one we yeah we have instead of using the comma we use the semicolon so there you go so in here after the iteration or before the iteration closest you need to push data into our array so re push the array which is post array and then beta and of course we're going to push the post item and then after that one after the iteration of the records were just going to push blue data okay so or I mean we're trying to convert convert to JSON and then output so echo and then we're going to use the PHP function JSON underscore in code and our post array there you go and if the number or the number of count or the number of result is less than zero so we just need also to define a message here so that will be echo and then JSON encode encode and message is we just set this to no post fountain okay echo Jason and we need to add semicolon at the end of the line coach's son of course we need also to define that it should be inside the array okay so there you go and in this part right here we're going to create our database and other tables and of course the records that we're going to read from our API so let's go to our PHP myadmin and in here that's just create a new database well that will be PHP rest okay as you can remember that's the name of our database that we have defined in our config dot PHP file and also we're going to add here a table or a couple of table here so categories and there will be three columns or three attributes for this particular table so that will be ID and the length is then autoincrement and their there will be named and var car which has 255 is lent and created odd and this should be a date time or is a date time and yeah I think that's it and then saved so we have now a table categories and also we need to add a post table so that will be post and ID land is 11 Auto increment and of course we have the category ID so this will be int 11 and then we have title so varchar' 255 and the body also will be text then we add two more for our author or author of our post which will be bar chart 255 also and of course the 8 that I created add and this will be a daytime daytime there you go and then save so we now have 2 tables in our database so in categories we need to insert some values here so the first one will be technology and then ate it and then created ad will be the date today so that will be 31 and the R is 10 ok so the second one will be gaming and the day the same and our is Stan okay so go and let's just an add another categories of our post so on auto and then the date if you want I can place or I can add the database in the description you can just download it and import it in your PHP myadmin so it will save you a lot of time instead of making all this unnecessary part of creating the database okay so you always have the option to download the database coming from the description of this particular video so I took the liberty of just populating the post table here so you can go ahead and try to download the my SQL file in the description box below to save you some time of adding all this unnecessary or I mean adding all this record store database so let's go back to our code editor and let's try to check our project for the last time before we test it and our postman software so we have here the read dot PHP file and we have the headers and we initialize our API by using the initialize that PHP file and of course this initialize that PHP file include all the core files or core files of our project and then and here we have associated the post okay and passing in the database connection and of course in here we have iterated the records coming from our database and displaying it or converting it to JSON format so now let's try to test this on our postman software so let's go ahead and search for postman and by the way guys this is the software that we're going to use to test or PHP API and if you have like if you have work in the future that involves API you can use postman to configure your request so this is the postman a postman software that we're going to use this is good for testing an API so let's just try to navigate to our projects of local host PHP arrest and then I think we're using HP press and of course API and then our read that page B so PHP RS API and then read that page B and then make sure that it is the the method that we're using is get and then try to send it or PHP API so we have here the I think we have some error here so let's try to read it in our yeah so we have an error in our SQL syntax check the manual and I think we don't have space here so let's try to do that navigate or post that PHP on line 39 so post that PHP and 939 so where is it ordered by oh so I think we have misspelled or ordered by instead of using ordered it should be ordered by okay so save this and let's go back to postman and send our request so we have a new error column not found be created in order Kloss so that's easy because great that should be created at so there you go same and we have now the result of our PHP REST API reading and under data we can see all the records coming from our database so as you can see the result of our request is on JSON format ok so now that we have read that PHP to get all the information or to get all the records from our database so what we want next is to create another read for a single record from our database so so for example we want to specify a certain ID of a post and then we should be able to get all the information associated by that particular ID so let's go back to our code editor and in our post that PHP file so right below the public function read and make sure you're still under or inside the post class so in here I'm just going to add another function so public and then function read underscore single so this will be just getting a single post from our database so as for the query so we're just going to almost we're going to use almost the same query and then we're just going to change something here instead of using order by so we should remove this because we're only getting a single post so there's no point of ordering it by the ID or created add attribute and of course we want to get a scene pause so we need to specify that it should be a particular ID and of course we need to limit the return of this query into one because yes we only want to have a single pose to be returned and in here we need to prepare also the statement for this particular function so that's prepared statement and in our statement here below you need to get the actual data coming from our database so statement and then fetch and then video fetch fetch associative array so and then below here we need to set the properties of our post so this title will be our row and then of course the return title from our query and then we're going to copy this one two three four okay it should be for our body this one is our author okay and then we also have the category ID category underscore ID so copy and paste it here and then category name gory name okay so here we go and we need to bind a parameter for this particular statement here so we're post id equals so instead of executing it directly we need to bind a firearm so that's buying parameter and then we're just going to specify the first one and ID should be the post ID okay and of course this is finding the bottom right and the next one is executing the execute the query so that's STM T and then execute okay so stmd execute and then row is the MD fetch video fetch assault or associate or associative array so I think that's it for our public function read underscore single and under our API let's just create a new file here so that's new file and then read single that PHP what happened there so read single dot PHP and then we're just going to copy here there read that big file and we're just going to delete the content of this below only the header so we're just going to use the same headers access control and of course the content type then we initialize our file and then instantiate a post object and we need to assign the post ID so that's post and then ID equals we're just tracking if the get ID is set so return the get ID otherwise exit or die and then post read single so that's the function that we have defined in our read that PHP file and of course we want to create an array of our values so that will be post post just like what we have in our read that page P so array and then of course we need to specify also the ID okay so post ID we're just going to copy this six by ten of our post the body of our prose and of course the author of the post category ID okay and then category the our name so we're just going to copy this title for this so this one and also this one you know so this one and so with this one and we need to make make a JSON okay and print our and of course Jason in cold the post array so post array so I think that's it and we can use this in our post months off there so let's go ahead and let's try that so I'm just going to copy this and create a new request so this should be API and then read underscore single dot PHP and then specify the ID say for example I did three okay so we have an error so let's try two so we have an error here because we misspelled the fetch so post fetch okay so let's go back to postman and send category name ID you find property post single single category name ID okay save and again so that's it we now have the post three with all the information coming from our database so you try to go with another one ID too so we can get all the information associated with ID number two and in this video guys were you going to discuss how to create or implement a create record in store page previous API project so as a sort of review guys in the previous video we also have implemented the reading of single record coming from our database so we have laid out the function read underscore single and of course we created a file read single dot PHP and then we're querying the record by using its ID and of course returning all the data related to that particular ID and now let's continue working on with our post that PHP file and just below the read underscore single function we're going to create another function here so the name of this particular function will be public function and then create okay so in this particular function we're going to add some lines in order for us to create another or create a record by using our API project so for us to do that let's go ahead and build first our query so here we need to create our query okay and that will be query and force the actual query of our function which will be insert because we're trying to create a record into our database and of course we'll just concatenate our table name here so this and then the table of this particular class so I think it's yeah table okay that should be table and right after that is another string set title equals placeholder title okay and then body equals the placeholder of the body of a post okay another one for our author and the placeholder for our author and then of course the category ID so category ID and then the placeholder for our category ID Hey so and then we need to prepare our statement here below so prepare statement so that will be STM tea and using the connection that we have so that will be connection and then prepare and of course the query a and then we need to clean the data next because the information that will be saved into our database is coming from the user Earl input of the user or the requests coming from our user so that's why we need to clean the data clean data so for our title we need to set the title equals to HTML special special chars ok and then strip tags okay and then this that or this and then the attribute title a so this line it only means that we just want to remove all the unwanted problems with our data so so this will be for our body okay this will be for the author okay and of course this will be for our category beggary ID hey there you go so we just want to make sure that it will be the same also for this particular part so category underscore ID and yes we just need to make sure and then this or to align this to make our code readable Hey and then right after that one we need to bind the parameter or the params for our like a placeholder for a title body author and category ID so this part right here will be binding of parameters okay so as TMP and then bind param specifying the placeholder over it of our title and then the actual value of our item so there you go and then we'll just copy this one for the other attributes as well for our category ID for our author and of course for our body or body of the post and of course we need to change also the placeholder for this this and so with this category ID okay so after that one we need to execute the query of course after binding all the forums cleaning the data so the last part will be executing or execute the query so all we have to do is call the STM T and then execute okay and then if the execution of this particular query is successful then all we have to do is return true okay otherwise we print an error here print error if something goes wrong so that will be print F a winter and then error will be % s okay and the error our statement or the query that we have and then return false something like that hey so basically guys we only prepared our public function or public function crate and this will be used for our files especially in our API so in under or API directory we need to create another file so that will be great so let's go ahead and create a new file and then new file and then we need to say here create that PHP so in our create that page we guys we just want to add some headers also the same with ours reading I mean the read that page P okay so we might as well copy all this all this color right here and then paste it here and then we just need to remove okay starting from here and then guys as I've said we need to add some other either either we need to add some other headers here so we have access control allow region and we have content type so another one header is access control access control and then allow methods okay so this is save or create query or we need to create a record to our database so this will be a post method meaning the request the request should have data for us to save int or data and then we also have to add another header here so this will be access and then control and then allow headers so basically we're just specifying here what are the header is that I needed so that will be this one we just need to duplicate this okay and content type also okay another thing is the access control alone methods okay and also the authorization okay so basically we're not going to touch authorization in this particular series but for the sake of this tutorial we're going to add authorized ation there so maybe in the future you want to implement an authorization for your PHP API and the last one will be the X requested to it okay so these are all the headers that are required or specified as the allowed headers and in this video guys we're going to continue working with our create that PHP file and at the end of this video we're going or we should be able to insert record into our database by using our PHP API so let's go ahead and try to modify our cade that PHP so last time we we just added the header you know of course the function in our post at PHP so we have here the great function and we should be able to use that in our create that PHP file so in here we have initialized our API by using our initialize that PHP so basically in initialize that PHP we connected our project into our database so the next step is to instantiate the post so we have we have that here so instantiate the post by using the post class and of course applying the database connection so after that we need to get the posted data okay so of course the data should be coming from a request okay so we need to decode that by using file get contents and of course specify that it is a PHP slash slash input okay and then by that we can get the actual data so post we're going to set the title by getting the data and of course the attribute title okay so copy and paste this for the other attributes as well so we have the body the author and then we also have the category ID so copy and paste okay okay so after that we can just create the post create post and then we can use the function that we have defined in our post that PHP which is the grade so in order for us to do that let's add the post and then call the function great so we're just checking if it is successful or meaning the function returning true okay so if the function return true then we're going to echo a message here or meaning display a message so JSON encode and this is going to be an array so specifying the message which will be post corrected okay and then of course if the return is not true then we will return I mean we will display another message okay already you can just copy and copy and paste this so the message will be post not created okay so let's try this in our postman software so first month and this will help us to develop API so if you're serious about working with the API so make sure to download and use postman software so in here we just need to add a another tab okay so instead of using the read underscore single then we're going to add or change this into create that PHP and of course it should be post because we're sending data into our API and for the headers let's just say content type so as you can see if we try to type in we can have the options and then we can see content it should be content type content type and it should be application slash JSON and of course in our body we can choose raw and then we can specify here the data that we want to pass into our API so we need title for that so basically we're just going to around our values the key in values with double goat so sample API post and then comma and then body sample body of an API goes from a request and then we have another one for our author so Brad Stevens and third or the fourth one will be the category ID a regular ID and then we can say like there are I think we have four categories right now so basically we can choose from one two three and four so we'll just say three and we can send this try and see if our API works so we have an error here we have an error in our SQL syntax so this is posted PHP on line 81 so this is probably the query so post that PHP and then we have the actual query here at the top so I think this one made the error so save that and let's try to test it by sending another request so now we have field created that doesn't have a default value that's because we need to edit the attribute of our post table so as you can see here we have the different attributes category ID title body and author and created that so let's go to structure and now you created at date time doesn't have a default value so we're going to change that and the default will be the current timestamp okay and then save and let's go back to our postman API I'm in postman software and send another request to test our API so send so sending request and we have the response which says message that depots has been created okay so in order for us to test that there are other ways for us to test this so we can just read all the records so send and there you go we have here the data that has been added recently so the ID is five and the sample the title is sample API post which we have specified here so sample API post and then we also have the body so sample body of an API post from a request okay the same and of course the author is Brad Stevens the category ID is three okay that's what we have specified also here and the category name is Otto so I think that concludes our create that PHP or create function or create feature and we have successfully added that into our API so the next step is to create or add the feature for updating the records and in this video guys we're going to discuss the update so basically we're just going to add the update function or feature into our page be restful api so we have here degrade function as you can see from our post that PHP file and then we're going to copy the whole function because the idea of create and update is almost the same so we're just going to copy all this included in this particular create function and then right below that we can paste the update so we're just going to name our function in to update okay so this is the update post function okay and of course the query will be a bit different because we're updating a record now so we'll just say update this table and set all the necessary attributes so for example the title the body the author you know of course the category ID and since we're updating a record we need to set the ID or like filter by ID because we don't want to update all the records so for now let's just say we're IB equals we can use the question mark or we can also use the placeholder ID and of course we can also do the cleaning of data of the ID so setup category ID and also here we're just going to say ID and then indent this on line with the other attributes okay and then of course we need to bind the param parameter so we're using the IDS placeholder for our ID and the value will be this and then ID and then it should also execute the query and then return true if the query is successful otherwise print the error message and of course return false so in our project we need to create another create another file for our API so we have already create that PHP also the read underscore single dot PHP and then read that PHP so now we need to add another one for our update so that will be update that PHP and of course also a sort of basis from for this update dot PHP we can just copy all the lines of codes that we have added in our case that PHP and then paste it in or update at PHP because I as I've said the logic behind or the theory behind the create and update is almost the same okay so but instead of using post it should be good okay and then we also need to have the ID here so post title and then the ID because we're specifying the ID of the post or the record that we want to update and of course instead of using her aid we should call the method update and of course it should be post updated and post not updated ok so so I think that's all there is to it for this update that PHP file so let's try that in our postman software so we have here the create that PHP so we're going to use update that PHP and then specify the ID of the record that we want to update so ID and then Colin and then let's write let's try to see which post or record that we want to update so we have added this sample API post by using our create that PHP file right before or from the previous video so the ID of this is five so let's just use that so ID is five five and then let's just say updated updated API post sample body of an API sample body of an updated update API pose from a request so we have the same author category ID and also the ID that we're going to specify or update and of course because in our update dot PHP we specify that it should be a put method so of course we need to use that in our postman in order for us to properly update the data okay so send and let's try that and the record or the response says that the pose has been updated so let's try to read all the data so as you can see here we have updated the title and of course we have updated the body of our post so as you can see the update function are the update feature of our PHP rest or the PHP API that we are developing as working so the next step is to create another one or another feature we will be adding another feature in store page by REST API so basically we all have the reading of all the data reading of a single data or single record and then also we have creating a record and also the updates so the last one will be the delete of a certain record okay so basically the same idea we will be adding the function here for our delete so that will be delete or public function delete it should be an easy function right here so right below the update function we will have to add the delete function so that's public function and then delete okay and we just need to create the query here so that will be query and then of course we leaped from and then this table and of course we're ID we need to specify the ID of the record that we want to delete and then we need to say we are preparing the statement prepare statement so SD empty and using the connection prepare query and of course we need to clean clean the data so we can just copy the this particular line so clean data and yeah ID and of course we need to bind the parameter so SD empty and then vine parameter specify the ID and of course the actual value and we're going to execute the query the same thing here so just like that so basically we're just returning true if the statement has been successful otherwise we need to print the error and return false so public function delete and we have set up the query to delete the record from our database we have prepared statement and then we also have the mechanism to clean the data so as you can see and then this right this part right here is binding the ID parameter to our query and and this part is to execute the actual query and if there is an error so we should be printing or the error here and guys the next step is to create another file here under our API so new file and then this should be delete that PHP okay and in here we're going to add some logic and add some lines and and I think we could just copy what we have in our update dot PHP and as you can see here we have the code or lines of code for our update so let's go ahead and copy all this and paste it in or delete that page 55 so in here we're gonna change a couple of things so the for example the allow methods instead of using put it should be delete right there and of course initializing our API by using the initialize that PHP instantiate the post class by using this particular line and supplying the database connection that we have configured with our initialize that PHP and then of course we're getting the data that that has been posted by the user or by the request so as you can see we are getting the data by using the code and file get contents and PHP input so I think other information just like the category ID the author and the body and of course the title is not needed here because we're only concerned with the ID that has been passed by the user or the request itself so we're citing the attribute ID by getting the data ID just like that and as you can see we have created the delete function so we're just going to update our delete dot PHP instead of using update function because this is a feature for delete it should be of course the delete function there and change the message so instead of updated it should be post deleted okay and of course this one will be post not deleted so I think that's all for this file delete that page B so just say the post that page B and of course the delete that page B so we'll try real quick this particular feature with our postman API so let's go ahead and open up our postman software and try to check if our feature really works as I've said guys from my previous videos if you're working with an API and we're trying to get around or to be comfortable with an API be familiar with how API works so post months off there can really help you we of the activities that you want with an API so basically we have read that PHP you have read single we also have the update dot PHP so if you try to run or read that PHP we should be able to get all the records for coming from our database as you can see here and of course we're dealing with delete maybe we could just create a certain record for it now or maybe we'll just delete a certain post just like this one ID equals to 5 so we'll try that ID is 5 so we'll just copy this and then create a new tab here in our postman software make sure that the method is delete and of course the the file that we want is the belief that PHP and of course we're going to supply the IV of the record that we want to delete and as you can see we have the ID is 5 ok so we're just going to go grab that and set the ID goes to 5 just to check if we can really delete the post with the ID 5 so send so we have an error here let's try to trying to get property of a non object so line 17 over delete that PHP 9 17 post ID and theta ID so also we're getting the idea from data ID and as you can see we're using PHP input so instead of supplying directly the ID here this should be declared in the body of the request so let's try that local host PHP yeah let's go to our body of our post and then raw okay so in here we're going to supply the ID instead of directly setting the ID equals here so this will be ID and then of course the value which is five okay so send a request so what happened as you can see we have here the message post deleted so we should not be able to or we won't be able to view or get the data that is that has the idea of five so try that so as you can see the record that has the idea of five is now gone okay so basically we're just deleting the record by supplying the parameter in our request body so I think that concludes our PHP REST API tutorial and ii c we have fully functions or we have now the full function of our PHP rest api so we have to create delete read single read that PHP and of course the update so if you want because as you can see there is also the category for our post so we have to cut the post and then the category of our post so we could also create another file for our category to be able to have the read update the read single and also the delete function for our categories but it I think it's a it is pretty easy because the category has only two or three attributes the ID and then the name and of course the created add attribute so you can if you want you can create it on your own you can start by creating the read that PHP update that PHP for this particular model category that PHP so I think for now I'll just guide you for the single or read that function for our category that PHP so we're going to create another class for this so I'm just going to copy right here and then here so where's our get their diary that PHP and instead of using the post it should be a category so this is for our category table so we have construct or the pigs and the DB connection and of course the read and we need to close the territory class right there okay and instead of using the post table we should be able to or we should use the category category table in our database and of course as I've said there are only three properties for our category so the ID the name and of course the create of that create that okay okay so I think this is Pythagoras instead of category categories there you go and create to that and then we have constructor with DB parameter or the do connection parameter and in here instead of having this join query we can just create or query all the attributes from our table name categories and we don't want or we don't need this particular part right here so select all from categories and then we're executing the query there you go and in here in our API we can just say read all categories that PHP and of course we can just copy the code that we have here in our post dot read dot PHP so that will be read all the categories and instead of using post here we should say category okay and then passing the DB connection and then reading or what is the method so I think we also use read write so read okay and then we have the ID the name and of course I think we only have great add in our table in our database and you can just move this crate out okay and Preta that it should be created that so basically we can just delete all others and we should be able to see our categories okay so category is no categories found if there is no record phone for our categories so let's do that and try that with our postman or post months off there okay and try to check if we have a functional read for our categories so here new tab it up there you can copy this and make sure it's another request API and we have the file read all underscore categories and then it should be get and then send so we have an error class category not found let's try that because we haven't initialized our class category in our initialized at PHP so let's do that with this line category that PHP and say that and go back to post once off there and send undefined variable crated add in all categories 26 that's because huh 26 8 and I so it should be create all right okay and then send so there you go as you can see we can now read the categories from our database so guys it's your turn now to make the other functions like the read the update reading of a single one and of course deleting a single record from our database so guys that concludes our PHP rest api tutorial and I hope you enjoyed this series and if you are new here in our youtube channel and you want content about programming so I am inviting you to subscribe and press the notification bell so you will get updated whenever we have a new upload regarding programming
