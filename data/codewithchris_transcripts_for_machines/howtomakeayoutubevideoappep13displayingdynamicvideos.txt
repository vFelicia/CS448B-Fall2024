hey coders what's up it's Chris here with episode 13 of how to make a YouTube video app in the previous lesson we had parsed the response of this data request that we made to retrieve all of the video items and off of that response we created all of these video objects and then we put it into an array called self dot video array now the next step is somehow for us to notify the view controller that the data is ready because remember we're doing this a synchronously in the background and if you don't know what that means check out the previous lesson so let's take a look at view controller dot Swift we can see here in the viewdidload method we are creating an instance of the video model and then we're calling the get feed videos method to kick off that request now somehow it's gotta get notified that the data is ready so it can access that video array retrieve that video data and then update the table view with it and the way we're going to do that is using the delegate pattern kind of like this table view right here you see self table view delegate equals self what we're doing here is setting the view controller as the delegate of the table view so when events happen so if events happen with the table view like the user tapping a cell the table view is going to notify the view controller so we're gonna use that same exact pattern to let the video model notify the view controller that the data is ready let's go back to the video model dot Swift and I'll show you how we can do that first we have to create a custom protocol so up here above the class declaration of the video model we're gonna write protocol video model delegate and we're going to open up a set of curly braces and inside we're going to declare a method called data ready okay so just the round brackets like that we're just writing the method signature and we're not implementing it here inside the video model class we're going to declare a delegate property that is of the type video model delegate like that and it's going to be optional because it could be nil now the next step is to assign the view controller to that delegate property we're going to go back to view controller Swift and in the viewdidload you see how we're creating the video model here inside the viewdidload and then we're assigning it into a constant called model that is also declared in the viewdidload method now that's not going to be good because when the view did load method has finished executing we're going to lose that constant and we're also going to lose that object so what we need to do is declare this video model object and instantiate it outside of this method so that it can survive even after the viewdidload method has finished and it can finish downloading those videos and then notify the view controller the way we're going to do that is just to clear it up here so we're going to write far model is a type of video model equals new video model object we can even use let because this isn't going to change so make that a constant so in here instead of declaring this constant and declaring a new video model object we're going to say self dot model dot delegate you can see it's a type of video model delegate write equals self so we're assigning the view controller ask the delegate Xcode isn't going to like that though because it's saying that the view controller doesn't conform to the video model delegate protocol and let's change it so that it does in the view controller class declaration up here we can write video model delegate and this tells Xcode that view controller conforms to that protocol if we go back to video model dot Swift in order to conform to that protocol we must implement the data ready method let's go to view controller Swift and let's do that right here but before we do that let's declare a new section let's call it video model delegate methods and then here we're going to implement that data ready method and right below that let's create another section and call that table view delegate methods okay in the data ready method we're going to access the video object that have been downloaded and then tell the tableview to reload now how do we access those video objects well if we go back to video model swift we assign those video objects the self dot video array so we can access it through that so let's say self thought videos and that is an array we created up here that is equal to self thought model dot video array and now those downloaded video objects have been assigned to the self taught videos property and the table view is going to read the data from that array we just have to tell it to reload by writing self thought table view dot reload data and that's gonna cause the table view to go through these delegate methods again ask for the count and reload each cell and then each cell we're going to grab the video it's asking for set the video title actually some of this has got to change because here let's see we're grabbing the label for the cell and then we're constructing the video thumbnail URL we actually have that as a property now in the previous lesson we had added this video thumbnail URL and instead of constructing it like this we can actually just say that video thumbnail URL string equals videos index path dot Rho dot video thumbnail URL okay and that should be it oh one more thing back in the video model dot Swift let's take a look at what has happened so we declared this delegate property and the view controller has assigned itself as the delegate so when the videos have finished downloading and we have set those objects to self that video array here we have to notify the delegate that the data is ready so first let's check if delegate is not equal to nil delegate dot data ready so only if somebody is assigned to delegate are we going to call that method let's say selfthought delegate like that okay so now we should be able to run it it's going to download the data and then it's going to notify the view controller and the view controller should update the table view in the front all right there we go let's click into one of these cells and it should still behave as it did before yep so we can see the thumbnail we can see the title in the description although the description is quite a bit longer than this text label has room for right now so as a extra feature you should probably make this a scroll view so that you can actually scroll the description but for this demo I think that is fine where we are I just wanted to introduce you guys to the YouTube data API and there's lots more to explore with that YouTube data API we've only kind of scratched the surface by hitting it to grab the playlist videos right now it's only showing five videos and I think that's the default number of results that it returns but I did remember seeing in the documentation that you can specify you know as part of the request you can specify another parameter called Max results and you can set the value of that key to something like 50 or 10 or whatever you want to return so by default I think it's just returning five but the cool thing is that your app now is reaching out hitting the YouTube data API dynamically loading the video playlist and so whenever I upload new videos to my YouTube channel this is going to get updated by itself versus the simple version we did a couple lessons ago which has hardcoded data and those videos are always going to be those videos I hope you guys have enjoyed creating this app with me if you could do me a favor please share the video share the playlist give it a thumbs up and subscribe to the channel I'd really appreciate it and I'll see you guys next time talk to you later bye