hey guys can everyone hear me can you guys see my screen I just type in the chat just wanna make sure that everyone can see me see my screen and they can hear what I'm saying before we get started I've got the agenda on the screen right now so you should be able to see that all right then let's get started okay so just a brief recap for you guys who are just joining this episode in the last livestream which was last Wednesday we started a new series called how to make an app from scratch and this is where I'm gonna take a nap idea that I have created live from scratch no preplanning and anything like that so that you guys can see step by step the whole entire app process and then we're gonna launch it into the app store together now we're on Episode two and I'm gonna do a quick just a very brief recap on what we did in the last lesson but before that I totally forgot welcome to the code with Chris livestream Adrian is manning the chat so make sure you guys don't spam the chat cuz he's gonna be moderating it type all your questions in one message don't break it up so that he can easily manage all of the messages and the questions for the end of the livestream we also have recording on this livestream so it's gonna be available to watch after the fact in case you miss any bit of it and if you're watching this live stream the replay of it you guys can check the description will have little timestamps and you can click on those to jump to different points of the live stream so you don't have to watch but you guys who are here watching live I appreciate you guys so very much okay so and you guys will get your questions answered too so that's the benefit of attending this live you guys we can do some interaction I can get to know you guys and you guys can get to know me as well okay cool so let me do that quick recap in the last lesson I wrote last lesson the last livestream I revealed what my app idea was which was to create a Pomodoro timer and Pomodoro is just a technique to stay productive where you set timers for your work sessions and your break sessions but the twist on this app idea is to add a social aspect to it so you can have friends and you can encourage each other and challenge each other to complete more Pomodoro's in palma doors are just 25minute chunks of work time so in the last lesson we also took a look at the app store to see what kind of other Pomodoro timers there were and there are a ton but we didn't find any that had social features integrated into it and we also came up with some features and requirements as you can see on the screen right now so we took all of those features and requirements and we broke it up into like a core feature set kind of our minimal Viable Product that we're gonna get launched right away and this is going to at least for me get me motivated to do more and we can also get feedback and incorporate that into subsequent incremental updates because for me if I really large project and you know I want to make it completely perfect and have all these features before I launch it chances are life is gonna occur you know something's gonna happen with my kid hey you know other priorities are gonna come up and that project is not going to get finished so I would my priority is to get the useful version of this app it has to be at least useful right or else no one's going to use it a bare minimum useful version of this app into the App Store so that people can start using it and giving me feedback on it now I think that aside from the social features that is going to differentiate this Pomodoro timer from the rest of them out there we also probably need to differentiate our you know what's gonna make our version better is through the user experience in the UI so that's going to have a lot to do with it so things like how things animate how easy it is to use because I did mention in the previous livestream that I downloaded a couple to try there were some I couldn't even figure out how to use it and we're talking about timer right so it has to be very an intuitive to use so in this livestream what I'm going to do is I'm gonna I have some ideas about how the app is gonna look at least this v1 and we're gonna start with wire framing it out and if you're not sure what that means it's basically like a sketch I actually did this on a piece of paper first so I took a pencil I took a piece of paper and I started just doodling and plotting out my ideas getting them onto paper in a rough form and in today's live stream I'm going to use a graphics app and then we are going to kind of clean it up and make it look like proper wireframes that you would submit to a client or something like that well not that proper because there's going to be a lot more detail that goes into a document like that if your client is gonna pay you a ton of money but for our purposes as long as we know you know where our main elements are gonna be laid out like we're where the timer is gonna be running where the start and stop buttons are and stuff like that that gives me enough confidence to move on another thing that I mentioned in the last live stream was that one of the challenges that I foresee is how to have the timer run in the background I know it's possible because hey other Pomodoro apps are out there in the App Store right but I just technically didn't know how to do it I didn't know I didn't do it before so from since the last livestream I went away and did some research I did some tests and I figured it out and it's not what you think at least it's not how I thought it would be done so I'm gonna show you guys how to do that too so we're gonna do a little demo and I'm gonna show you how to run timers in the background all right so we're gonna get started with the wireframe portions now oh I'm glad to see that there are so many people here welcome you guys again if you're just joining this will be recorded so you're gonna be able to watch the livestream afterwards all right so let's get started with the wireframe so I'm gonna use I'm gonna do this in sketch if you're not sure what this is it's just the graphics app that we're we're people it's like the most popular one where people are building they're designing their app graphic assets here another one that's free this one's not free another one that's free is called figma which is actually very similar so I would go ahead and check that out now I would use figma just to show you guys and I said I would but the fact is I haven't done this yet and I'm just not as confident in figma as I am and sketch even though they are pretty similar and so I don't want to waste your guy's time while I'm doing this live and so I'm going to use the program I'm a little familiar a little more familiar with but just for you guys who have are just starting to get into designing app graphics for your app I would definitely check out figma first before you go and pay for something like sketch back then when I bought a license for Sketch figma wasn't out yet and you can see here I'm actually using a I think I'm like two versions behind from the latest version of sketch because they change the interface in the latest version so it actually I hear that it's a little bit different but it's not like all that different so I haven't upgraded yet alright so first of all we're going to do is we're gonna create an artboard which is just like an aframe of your of your iPhone so we can choose from a couple of different ones here I'm gonna work with the iPhone I guess it'll be iPhone se right now so you kind of want to work with the iPhone size that is most common alright so you want to make sure definitely that your app looks perfect with that and then depending on if the screen size is larger or smaller you can you can design a different set if it's gonna be all that different but you do want to be working on kind of the most common size and just to remind you guys this is basically a timer and v1 here let me just bring up the features I should do that so that we kind of know what we're actually wireframing out here so to do a quick recap in v1 we have three timers all right we have a 25minute timer that's the work timer where we have a five minute break timer so after every 25 minutes you're gonna take a five minute break we also have a longer break timer so I think it's every four pompadours that you finish you got to take a longer break and this is actually like fifteen to thirty minutes long according to Wikipedia X I wasn't sure about this so according to Wikipedia a short break is like three to five minutes and the longer break is fifteen to thirty minutes in the one I didn't make it customizable and I'm I'm starting to think about whether or not I should make it customizable but I'm not gonna think about that right now I'm just gonna set it to 25 minutes like this might be a deal breaker for some people who follow the Pomodoro Technique if the timer isn't customizable and they're used to using like a fifteen minute break or a 30 minute break like this app this v1 will be too inflexible for them to use so I might consider actually you know putting this timer feature into v1 but I'm gonna see what sort of time like what sort of timeline this ends up being because I do want to get this out the door hopefully like in a week to a week and a half and you know if this is gonna be more work like a week more work I probably just launched it anyways because the thing with these apps is that these days I feel like there are so many apps out there there's so many new apps coming out every day that your app isn't very discoverable so if you really do want your app to be successful you need to have a marketing plan you can't just like launch your app and expect Oh everyone's going to download it and try to use it it's almost like even if I publish this app into the App Store no one is going to know about it unless I you know have some sort of marketing push or I build up an audience beforehand with a landing page or something like that and build up that anticipation for it I mean you guys will know so thank you guys will download it right hopefully but that's why I'm not not as concerned if even if we publish this v1 with these kind of like fixed timers we can release this ability to customize the durations of the timer so we can release this as an update you know fairly soon after all right so in v1 we basically have three timers the ability to start them pause and resume and to stop the timer all right that's it so this interface is actually pretty simple now the idea that I had was I want it to be a very clean and distractionfree because that's the whole point of getting work done right so I don't want to like busy the interface with a whole bunch of text and all that stuff and so my idea basically revolves around a circle so the oval first all right I'm gonna put a circle here and I want it to look kind of like the apple rings sorry Apple watch rings I don't know if you have an Apple watch but it tries to get you to do exercise and it gets you to try to fill these rings and you see them in the commercials and the keynotes all the time so I wanna kind of make a ring like that that maybe glows a little bit we'll see how we treat it design wise but basically want to have a ring like that so it's kind of like a progress ring right and then I'm gonna have the timer in the middle the time oh I should actually you you San Francisco see me out of that I don't have that installed on this machine actually so I'll just use Helvetica doesn't really matter these aren't the design composites the design composites you actually want them to look you know how they're going to look the actual app but this one is just going to be a wireframe so the whole idea of this one is that you can see how things are going to be positioned where where things are gonna be positioned so that when you actually build them out you see them so it's gonna be something like that and then there's going to be a start and a stop but here's the thing so how do we switch from this work timer which is the twenty five minutes to the the long break and the short break so my idea was actually to have a couple more rings and you would just swipe around so like you would see basically this ring here and we can name this like this would be the long break and maybe that would be a different color right and then we'd have this one here like on this side and we would have this as like oops so I want to make sure that they're the same distance so let's say like 50 50 and 50 so this would be say the short break and this oval would be the time and if you were to let's say switch timers you would basically swipe your finger left or right to get the other rings so it would kind of look like this like you would swipe the rings across and then this would kind of click into the place and then this would change to like five minutes or something like that whatever that timer ends up being I just lose a ring all right so we would basically swipe it this way and you would get the the long break and if you kind of swipe it back to the middle you have the 25 minute timer and then once you start the timer the these two edges these two rings are going to go away so I'm going to show that in a different art board so this is kind of let's name this art board like the initial initial State let's just call it initial and I'm gonna use my icons eight subscription here I'm just gonna start look for a play button I don't even want text on it I'm just gonna have like a play button here and that's going to be kind of like to start that timer and then what I'm gonna do is I'm gonna duplicate this whole art board and this one's gonna be called timer running so when the timer is running this is gonna change into a pause button okay and there's also going to be a stop button but the thing is I don't want to put them close together because it's gonna be really annoying if you accidentally stop your timer when you didn't mean to stop your timer right so it's gonna be far enough apart like that you know this would be running so let's say this runs down to like it's running like that and these two rings would actually be hidden at that point so your timer would only be like this when the timer is running I might actually end up moving these buttons a little lower to be honest so if we could have let's say if we could have all this stuff actually centered like well let's move this out of the way first let's try to Center this stuff in the middle of the screen seems a little low because the screens are actually pretty long like the new iPhone 10 max or 10s max which is what I have is actually a pretty it's a pretty long screen and these buttons we should actually put it closer to the bottom edge of the screen because if you imagine yourself holding the phone right your thumb can't reach very high like your thumb unless you have a really really long thumb but most thumbs just kind of reach the bottom maybe 25% or whatever a user experience expert would be able to tell you the exact percentage or average but a good idea would be to put the buttons closer to the bottom of the screen so if you are using your phone with one hand you can hit this Start button so let's put these guys back down here as well let's just move these guys now I'm not going like pixel perfect here these are just gonna be our wireframes but for our excuse me for our design composites we wanna we want to take a little more care on those to make sure that you know they're an accurate guide for the developer who's developing it now let me see just to remind myself I did write this up I did kind of draw this out on a sheet of paper first oh I forgot one element yeah so I wanted to have a when you're selecting which timer you're gonna use initially up here I wanted a label so this would be called Pomodoro or something you know we need to label the timers so this would be you know Pomodoro why don't we insert another state here so this would be the timer running state this would be selecting a timer let's change this that would be like a short short break so in a short break right these circles would move let's say they swipe this ring it clicks into place here and the ring might even be a different color so this would be that right there all right so it wasn't quite in the middle this is probably not in the middle in sketch if you hold down the what is this the alt button you can kind of get some and then you can move your mouse and you can see where the distances are that's really really useful to do all right so now we have our timer running state do I still want the label there maybe maybe not maybe we'll just dim it out or something like that because like I said I want it to be sort of distraction free as clean as possible I just making just doublechecking what I have in my sketches in my doodles all right so when the timer stops like let's say it's run out this is going to change it's going to be just one button and it's gonna be a restart button and then these rings are gonna come back so I do another thing here we'll call this like timer end so this is going to be like zero maybe zero zero zero zero and then let's come here I can't say it is so good guys so worth the money at least to me because I also use it for a little bit now these icons might not end up being the ones I use but for now it's it's completely fine you know when the timer runs out this label is going to come back oops and then the rings are also going to come back oops no on this one but on this one this wasn't a short break this was a Pomodoro okay and I thought about not everyone would want kind of a destruction free interface so for example here when the timer is running this should be hidden when the timer is running some people might like background of some sort and some people might like quotes one of you guys Iona you've mentioned that having motivational quotes would be awesome so I think that's a great idea right for some people will have the option to turn off or on so we can have kind of like little motivational quotes appear as the timer is running also backgrounds right having some sort of moving background or maybe like a tomato vine that grows as the timer runs would be really cool so these are the sorts of things that could be premium addons and they could be like inapp purchases so it's not crucial to have I don't want anyone to have to like buy it too to use it to make good use of it out of it but the the purchase would mostly be for customization for or personalization so I think that's a good model on how to use inapp purchases okay and we also have settings right well this v1 won't have settings so this would be our v1 right but I was thinking about a little farther down the line if we were to integrate the ability to customize the timers and stuff like that we want people to be able to get to a settings screen right so one way to do that is I could just put like a gear icon up here right guys just put it in the upper right corner or left corner and they would tap that little button and they would like flip over and they'd see options like it maybe a table view or another way that I'm thinking about doing it instead is for you to be able to just use your thumb and slide up and this whole screen would kind of slide up to reveal a settings screen and then you can pull it back down you can pull the timer screen back down so it's almost as if like the the setting screen is behind this timer screen but then I thought a little farther ahead and I was like where would I keep the friends list and all that stuff because we haven't exactly Arn doubt which features are gonna make the cut and into which phases of the project I decided not to go that far and let my mind think that far ahead because I one of my flaws I feel like if I analyze something too much and I think too much it end up ends up paralyzing me and I end up not getting anything done or just wasting a lot of time and time is is kind of short right now and as I'm sure it is for you as well so that's why I didn't have as much time to dig into other people's Pomodoro timers as I wanted to and I wanted to like read their reviews and see what people liked and didn't like about them I didn't have time to get into that life is busy but you know we're still gonna get this done that's why we're gonna go bitesized you know so let me just save this file I'm gonna put it on the desktop and just call it like palm timer wireframes v1 so it's literally just gonna be as simple as that I think we're you know just because it looks simple doesn't mean it's not gonna be good right it really depends what what the like what goal you're trying to achieve for the person so for me when I when I download these apps and I want to use a poem to or a timer I want to use a Pomodoro timer I don't want all of to get through all of these menus just to get the timer I want to know exactly how to start and stop my timer right so for me the number one rule needs to be like usability and user experience the second rule would be how does it feel is it smooth animations I really like animation so I'm going to try and incorporate that so even though it's like simple there are subtle animations you can add to it to make it feel like a high quality product and so that's kind of what I'm gonna be going for yeah so that that is where I'm gonna leave the wireframes now next I'm gonna show you guys how I achieved the background timer so just to give you guys a little bit of background on a background on how I initially thought about running this timer so in case you guys haven't used the timer class yet when you run a timer and starts counting down if you switch apps that timer is gonna stop running it doesn't continue running in the background there are certain things that you can do in the background that Apple lets you're Abdul you have you have to request not request but you have to turn these capabilities on so for example your app could fetch some data in the background so that when the user launches it it has fresh data your app in the background can continue to receive location updates so you see apps like Google Maps for example they still send you notifications about upcoming turns and stuff because it's still tracking your location even though the apps in the background however that so so thinking along that line that's how I first thought about doing this background timer the fact that I wanted to continue running even if you switch apps I was thinking oh how do I keep a timer running in the background but upon googling a lot and and finding some Stack Overflow posts people then clued me in and I didn't have to ask any questions because this was pretty common use case right people were saying that you shouldn't have to run a timer in the background right instead what you do is you let's say we have this countdown timer for 25 minutes instead what you do is you take note of basically one as the 25 minutes over so let's say it's 1 o clock right now so the timer should go off at 125 so you take note of that time and then when the app goes into the background you save that time and then when the app comes back into the foreground you pull that time back up from storage and you check the current time o if it's past then you know the timer's going past but if it's still let's say 112 or 113 or 115 you know it's not quite 125 yet then you know to resume your timer with 10 minutes left so you're not actually running any timers in the background you're just keeping track of a timestamp right and I thought wow that's completely true right that's brilliant so that's basically what I stood out in my demo and it works beautifully so I'm gonna show you guys how to do that right now and we have half an hour left so I might move a little quick so I have Xcode open here let me just check that I have this on the screen so nothing is blocking okay cool so I'm gonna start with a single view app and I'm just gonna call this a timer demo 3 because I did run a couple of tests right here yeah that's funny because I actually I actually got a lot of questions on YouTube like how does your simulator run so fast how does your Xcode launch so fast the truth is is that it doesn't you know everyone has to go through these wait times but Adrienne in postproduction edits edits it so that what an internal error occurred editing functionality may be limited let me try and restart Xcode perfect time xcode to not work right in front of a live stream all right Thank You Xcode for pulling through so I'm going to add a label and I'm just going to Center this label in the screen and then I'm going to add a button and this isn't I'm not building the app right now it's more like I want to show you guys how to solve that problem of keeping a timer in the background this is gonna be quick and dirty I'm gonna warn you so if there are certain things that I'm doing that you're like why you know why is he doing that this is kind of questionable it is because it is questionable I'm gonna do things quick and dirty and not follow best practices because then it would make it harder to follow for you and B it would just take a lot more time so I'm just going to try and go fast with this so I've got the label in the button here I'm going to connect it as a iboutlet property and call them label and button so this is not what you would want to call your labels and buttons and actually I'm going to also connect a IB action handler so that you can so that we can do something when the button is tapped okay so let's go back into the view controller here all right so now we're going to set up our properties what we're gonna need is Renee did timer so this is going to be the timer that ticks every second and it's gonna kind of decrement that time when the app is active we're also going to need an end date so when the user whoops it's going to be a date when the user starts the timer we set the end date and that's basically the date which the date time which the timer should expire and then we're also going to keep track of another variable and this one is going to called I'm going to call it seconds left and this is going to be a time interval which is just it's expressed in seconds it's like a number of seconds and excuse me now I'm gonna set that to a hundred to begin with for this demo alright and we're gonna create a couple of different functions here first so let's create this here I've got timer functions I'm gonna put this under user interaction so for timer functions maybe create a couple here timer start and you have timer pause and you have timer loops time our end and I'm also gonna have timer fired or timer tick so each second is going to be a timer tick alright so the first thing we're gonna want to do here is when the button sorry Wendy yeah when the button is tapped we have a couple of different scenarios right so a is like timer is timer hasn't been run and the way we can detect that is we can just see if this timer variable is nil right if it has never been set if we've never assigned a timer object to this property here then that means the timer is like brandnew and hasn't started so in that case we would start the timer right so we can say if timer is nil then the timer hasn't been run in this case we would say we would create a timer so timer equals timer scheduled timer and we're going to use this one right here where we can set a time interval for each tick the target is self and the selector is going to be the function you want to fire whenever that interval occurs so every second we want which function I'm gonna run and that's this one here called timer tick so we're just gonna put that right there user info is gonna be nil and repeats is going to be true so we want this to keep repeating now this selector is going to complain because this this hashtag selector this is an objectivec thing and this timer tick function is a Swift function so if you want to make this available to those objectivec runtimes you have to add this and even if you didn't know that that's fine you all you have to do is click that error and there's gonna be like a little that button and when you click it's gonna tell you what's wrong when you click it it's actually just gonna add this Objective C tag in front of that function to expose this particular function to this hash tag selector all right so create timer and run it we're gonna also want to set an end date right so our end date property it's just going to be equal to the current date and time if you create a new date object it's just it's going to be automatically initialized to the current date and time so we're gonna do that and we're gonna add a time interval to it and we're gonna add seconds left so it's going to add a hundred seconds to the current date and time and set that as the time when the timer will run out and we also want to update the label so this I'm going to create a separate function I'll call it update label and let's create that function right here so we have a property for the label we're going to set the text property to a string we're going to convert the time interval to a string so that's seconds left and we're also going to wrap that inside a round statement because as you're gonna see when we're working with the date and we're subtracting other dates and other intervals we're gonna have decimal places and I just want to show the number of seconds so I'm just going to round it here alright so just to recap when the user taps on that button and there's no timer it's gonna schedule a timer right to take every second and then we're gonna set an end date and we're going to update the label all right so inside here inside the timer tick so this happens every second all right decrement the seconds left so seconds left equals 1 and we're also going to update the label or maybe the UI we only have a label to update anyways oh that reminds me okay check if timer has expired so if the number of seconds is less than or equal to zero then pretty much the timer has expired so we're gonna call the timer end method which we haven't implemented yet it's still empty like that okay so this is what happens every second it's just gonna minus one from the seconds left and it's gonna update the label so we see in the UI and it's gonna check if the timer has expired so so far I think this is pretty intuitive right there's one thing I forgot to do which is update the text of the label and this would be button dot set title I'm going to call this pause because we just started it right so I'm just gonna run the app now so I can show you what this sort of basic thing looks like okay well that's launching and that's booting up I'm going to configure something else so in the viewdidload I want to configure initial initial state of the label and button so I'm just gonna say label well I just call it update label and for the button I'm gonna set the asset title to start all right and so I'm just gonna write it again now it's just gonna be really quick so we have a hundred seconds we have start when I hit start that's gonna start ticking down but here check this out if I send the app into the background and then I bring it back into the foreground you are gonna see that the timer actually doesn't run so let's do it at here it's probably at 80 for now so a lot a couple of seconds pass and then if you launch it it's still at C 84 so time basically the timer stops and we don't want that to happen and also nothing happens when we press pause right now because we haven't implemented that so let's quickly implement that so when the timer pauses what's gonna happen well when the timer pause we're gonna kill the timer so first we need to stop the timer calling the invalidate method on it and then we are going to we're not yeah we're just going to stop the timer reset the end date because the end date was set if the timer like when the timer is running right but if you pause the timer then that's going to change the end date and so we have to just set that to nil okay so update deep button text and then we're just going to set the button text whoops set title to continue all right so this would be the timer pause now when the button is tapped how do we check for that state where the the timer is currently paused well we would do it this way else if the timer is not equal to nil right because there is a timer object we've merely stopped it and the end date is nil right there's no end date because we've we've we've set it to nil when the the user hit pause right so in this case that means it's currently paused sorry I need to wrap my head around it currently paused and else if the timer is not nil and the end date is also not nil then this is currently running so what do we want to happen if it's currently running and you hit the button right we want to pause it right so you would call timer pause here and if it's currently paused and the user just tapped the button then what would you want to do you want to restart the timer yeah this coat right here when I put the timer hasn't been run this chunk of code for creating the timer and setting the end date and updating the label and updating the button text I'm actually going to move that into the timer start function that's what that's what I created that for so all of that code is in here so when the user hits the button here we just call timer start alright so if the timer hasn't been run yet we want to call a timer start which is going to start the timer set the end date update the label update the button if the timer is currently paused we also want to do the same thing so that's why you know we're gonna be able to merge these two clauses and then if it's currently running in the user taps on the button then we want to pause it alright so I hope I haven't confused you guys so I'm gonna take this and I'm gonna merge it with this if if statement all I'm gonna do is use an or clause and put it into these brackets here so timer hasn't been run or timer is currently paused either case is the same to us because we're gonna need to set a new end a date based on the seconds that are left when the user hits start so let me let me show you guys this let me run it right now and show you that we have pausing working so all of this is just starting the timer and pausing it and stopping it we haven't actually gone to the part yet where we send it to the background and still have the timer running we're gonna get to that in just a second alright so I'm gonna hit pause and it's stopped at 89 and then when you hit continue based on the 87 or 80 what ever seconds were left it sets a new end date okay so that's what happened so we have pausing and continuing and starting working now so what happens when the timer and let's do that let's kill the timer by doing timer not invalidate and that's reset the timer reset the end date update the button text so we are going to assign nil to our timer property and data is going to be nil and the button text is going to be restart all right so I'm going to set the seconds to 10 so that we can actually take a look at this all right so we've got ten seconds I'm gonna start running it right now six five four three two all right so it stops and then we hit restart is it gonna do anything if we hit that yeah so if we hit restart right now it's gonna come into this if clause it's gonna see that timer is nil and it's gonna do timers start so you can hit restart oh hey we didn't we didn't reset the number of seconds that's the problem here so why don't we basically set hardcode the number of seconds like obviously for our real app we wouldn't do this because right now I'm just like resetting it to ten or a hundred and we would actually be using constants as well so we wouldn't be just hard coding numbers in here but for the purpose of this demo that is fine to me alright so now let's implement the part where the timer goes into the background and it's still running because right now if I show it to you as I demonstrated it before if I send the timer to the background it stops running right so we want it to continue to run and so the technique that we're going to use is there are two functions which we're going to make use of one is that the system detects when your app moves to the background and you have a chance to actually perform some operations so at that point in time when our app is going to move to the background we're gonna check what state the timer is in if the timer is currently running like it is now we are going to take the end date and we're going to save it into local user defaults so it's just local storage on the device and then when the app comes back into the foreground again we can detect that and then we will check local storage for that end time and we're going to compare it with the current date and time if it's already past then we're not going to do anything but if it hasn't yet then we are going to initialize the timer and start the timer with the number of seconds left between the current date and time and the end date that was saved so if you didn't get that don't worry because we're gonna write it out now and it's probably gonna make a lot more sense so call these at lifecycle methods so I'm just gonna be overriding the view will disappear and the view will appear in here so the interesting thing to note is that sending your app into the background and bring it back to the foreground doesn't actually trigger these two view controller methods however if you have a multi screen to app and you're switching between like one view to another view then it will fire these two however we are still gonna put the code here for this demo because I just want I don't want to create a whole bunch of different classes and create a singleton for it but I'm just gonna put all the code here and then inside the app delegate which is actually where those two methods are because if you check in the app delegate you'll find methods like application will resign active that means your your app is gonna stop becoming the active foreground app and it's going to the background right and then this is like when it did enter the background so there are these different points in time where you can add some code here this is will enter the foreground and did become active all right so these are the methods we're gonna take advantage of to do that saving of the end date and then restoring of the end date but I'm from here from the app delegate I'm going to be triggering the view will disappear and the view will appear but this is not ultimately how we're gonna do it but for this demo this is what I'm gonna do so we're going to first get a reference to the standard user defaults actually before we do that we need to check if timer is running right so if the timer is not nil and the end date is not nil then that means that that means that the timer is running so we're gonna save the end date we're gonna go defaults dot set value and we're gonna put in the end date and we're gonna call the key end a date now in a real app we would not just use strings like that because they're easily you can create typos as you can see we're gonna type this string a couple of times so you do want to use a constant so when I actually show you guys me building the actual app you'll see me doing that but I'm starting to run out of time so timer is running so save the end date and here check if there's and end date saved so if let date equals actually I need to get a reference to the user defaults first if defaults equals user defaults the standard defaults thought value for key and date and we're gonna try and cast this as a date so if that is not nil then there's a date so here we're going to check if if the current date is oops the current date is past that date then timer has expired but if not then we are going to get the difference get the seconds left and we're gonna do that by saying date will let actually not left but seconds left is equal to date time interval since and passing the current date and this is going to give us the difference between the end date and the current date and time when I say date I also mean date time so the end date and time the difference in seconds to the current date and time so that's then we're going to set that to seconds left and then what we're going to do is just call timer start timer start and then we are also going to clear the end date from the defaults so if defaults thoughts set value I'm gonna set it to nil for key and date so you see we wrote this key three times and I could have made a typo in any of those so we will use constants alright so I think I think that might be it I'm just so if the timer is not nil and there is an end date I mean it's currently running so we should stop it and we should save the end date and then when it comes back we're checking if there is an end date if the current date is greater than the end date timer has expired else we get the difference and we start the timer and then we basically reset what's in the storage all right so that's good now the thing to check is like if we put some breakpoints here I'm gonna run my app and I'm gonna send it into the background and you guys will see okay so viewwillappear does get called when the app initially launches but let's say I'm running the timer now and I send it into the background you can see that it doesn't trigger any of these breakpoints which kind of defeats the purpose right if I bring it back it doesn't it hasn't been running in the background because we didn't have you know we don't have this code in place so what does get triggered however is inside the app delegate here so let's see which one we want to take advantage of sent when the application is about to move from active to inactive pause ongoing disabled timers and invalidate graphics such as okay did enter background use this method to release shared resources and validate timers and store enough application state information to restore your application to its current state in case it is terminated later all right so that's this is where we're going to do it so here we're going to now this not what we're gonna do in our real app but I'm gonna level this Hawk force view will this appear to be called from in our view controller so we are going to get a reference to that root view controller and we are going to call begin appearance transition tell us a child view controller its appearance is about to change and so this kind of allows us to trigger that so is appearing is sorry is false because it's disappearing I an animated is false and then we also have to match that with a sorry not begin but this one the closing one would be end of parents transition alright so this now when it enters the background it's going to call this code and this is going to trigger the view will disappear which is going to run our code here and I'll tell you in a second in the in the real app how I'll be doing it instead of this way call this part of the transition from background to active state restart any tasks that were paused so this is where we're going to do it here again we are going to hack force view will appear to be called in our view controller window root view controller begin appearance transition look at this time it's true because it is appearing and then the clothes the other pair of this is end the parents transition alright now it's time to run it and I can show you how this works because now it will be triggering view will disappear and disappear in view will appear so let me put some breakpoints here let me start the timer here so it the end date and time is set to 100 seconds from now I'm gonna send this the background at 90 and let's say sorry for the lawnmower someone's running a lot more alright view will disappear so this is triggered right it's gonna detect that there is a timer and there is an end date it's gonna stop the timer and then it's gonna set the end date into the defaults like that and then we can wait like a couple of seconds all right and then you can see that wheel view will appear as called and then it's gonna check the date inside the local storage it's gonna see that it hasn't passed yet and now it's going to calculate the number of seconds left so we can take a look at that seconds left is 50 because we as it's been paused it's still been going right so timers start and it's gonna resume let me remove this these breakpoints oh you know what I did inside the timer start method I hardcode the number of seconds to 100 we need to remove this line so this line let's do it we're just going to reset the number of seconds when the timer ends all right so let's run it and I'll show you this is how you do the timer in the background all right so like 95 and then we're gonna send it into the background we'll wait a couple of seconds I'm gonna bring it back and you can see that it's like 86 now so that's how that works now like I said well it is 2 o'clock now but I'm gonna keep going if you guys can stay you guys are welcome to stay I just want to finish explaining how kind of like some of the shortcuts that we took in this demo just to show you guys how this works versus when we are building the real app how we're going to be keeping track of that time so the cost the concept is the same you know keeping the timestamp in the back I keep looking down here I'm sorry but the camera is up here we are going to be keeping the date in the localstorage when the app goes to the background same thing but in this demo just for speed and for understandability eyes put all the code inside this view controller right that's not what we want to do so when we're building this out for real I'm going to have a singleton like Pomodoro timer class and that is going to be keeping track of the timers and the end dates and stuff like that now Singleton's get a bad rap right so you want to make sure that you are like you're justified in using it and the way that I justify and using it for this app is because we're not just going to be having this view controller here be the only view in this app right there's a settings screen when we do that social stuff there's gonna be like social screens and stuff like that but your timer should still be running right if you said it the set of Pomodoro for like 25 minutes and then you go to a different screen the timer shouldn't stop or I should continue running and so that's why I can't put the timer in any specific view controller like that and the other reason why is because inside the app delegate this is where sorry those methods are for detecting the application going to the background and coming into the foreground and stuff like that and so I don't want to do like this sort of hack here where I'm forcing the view controller to to like think that it is view will disappear view will appear that it is transitioning and but if I have my timer stuff inside a singleton class then it will also be accessible from here so that's my thinking right now that's I haven't actually done it yet but so far that's kind of my line of thought if you guys want this source code I will make it available but like I said don't follow any of the practices I did here it's more for you examining kind of like the timer keeping track of timers in the background all right so don't take this like oh this is what I should do because Chris is doing it in here that's yeah no okay so that's all I wanted to show you guys this video I'm gonna take one minute to talk about going forward kind of like what my next steps are and then I'm gonna take a look at what questions you have you have you guys have so I said I wanted to submit this app by the end of the month which is like a week away so I don't think that is feasible anymore I'm gonna give myself like another half week but we're not gonna have another live stream till next Wednesday right and I also want the this process of creating this v1 of the Pomodoro app to be a video series which I can send people to to watch right so my plan is basically to do the actual coding of and applying the graphic assets to the Pomodoro app inside like structured videos where you know I do an introduction and then I do the code and I do a conclusion type of thing and I'm gonna put that into a video playlist and then I'm also gonna mention if you guys want to see kind of the behind the scenes and the thought and like the making of almost you know how like in a DVD bluray sometimes they have behind the scenes or making of that's kind of like not the core feature presentation but if you want to know more so I'm gonna have this these live streams is that that because we're not actually building that up here right we're talking about ideation and why are framing the thought process behind what like how this app came to be so I'm gonna leave the actual production of the app like coding it in inside structured videos which won't be a live stream and then when we get to submitting this app I will do a live stream yet so between now and next Wednesday I'm going to try to actually build this app out I'm gonna produce a set of videos for it which I'm gonna launch to you guys I'm not sure if I'm gonna launch it like Netflix styles so that you can binge it and it's not gonna be long anyways I think it's gonna be like maybe four or five videos long or whether I should space out because that way that way I have more content each week right and I know for you guys you probably want it all that once I'll see where I get with that in the next week and a half I do want to launch in the next week and a half so not in the next live stream but probably the one after that we will press submit together I'll show you guys I'll walk you guys through creating the iTunes Connect app description and the screenshots and all that stuff and then we're gonna hit submit together I'm going to launch this baby but as for the actual videos for coding it up so that's gonna be released from now anytime from now to a week and a half later yeah so those won't be live streams so those would be like concise videos and for anyone who wants to see the making of or behind the scenes they can watch these live streams the replays of them alright so now on to questions for you guys questions from you guys let me take a look Oh Igor thanks thanks for letting me know that the volume is too low I will I will probably put my mic down here next time so that it's more more in the direct line of where I'm talking okay let me move let me move up here if you guys have questions now maybe you can maybe you retype them or next time I might have Adrian put the questions in a separate list or something like that so I am NOT scrolling to the chat see Steve figma is unlimited for like individuals so if you're building apps for yourself it's perfect I think most of these questions are being answered anyways so if you have a question that hasn't been answered maybe type it in and for those for those of you who have to leave now thank you so much for watching thank you for joining the live stream and I'll see you guys next week but in the meantime keep your eyes peeled for the actual development videos from now until Wednesday so make sure you're subscribed to the channel if you don't want to miss those videos so just in case some some of you guys have to leave thanks for joining and I'll see you guys next time if you have chance to stay then go ahead okay not too many questions this time because I guess I was just like typing and and showing you guys how to do stuff but alright so thank ya thank you so much again for joining doesn't look like there are any questions left unanswered I really appreciate you guys and I can't wait to submit more apps and build more apps with you guys alright I'll catch you guys next time bye for now