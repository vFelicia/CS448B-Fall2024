in this video i'll show you how to create a sandbox test user in app store connect and then we're going to use that test user to test our inapp purchase implementation on an actual device hi i'm chris and welcome to code with chris the place to be if you want to learn how to code and to build apps this is lesson six of the revenue cats video series so if you missed the previous episodes i highly recommend that you check those out in the playlist right over there here's where we are in our seven step process all right let's get started all right so there was a slight modification that i did from our last lesson and what i did was in the view will appear of the main view controller where we check if the user has pro entitlements and then we showed you know the tours and we removed the uh the pay wall button um that code was in here before so all i did was move that out into its own method called show tours and the reason i did this was so that we can trigger this method when the user actually makes a purchase and dismisses the view controller if you remember in the pro view controller when the purchase button is tapped and the user purchases that package before we only had this line here to dismiss the pro view controller and i was counting on the view will appear to trigger but that doesn't actually fire and so what i did was a quick and dirty way to fire this show tours method when a purchase happens and that is just to use notification center so i'm sending a notification called turn pro whenever the package is purchased and the user becomes pro and in the view controller up here i'm listening for that notification and when it detects that that notification is fired it's going to call show tours so that's how we can ensure that right after the purchasing that this code will run in addition to whenever the user relaunches the app this will fire and then it will also run the show tours code alright so now let's take a look at how to test all of this out so go to your app store connect portal and log in and then go to users and access on the left hand side you're going to see a bottom section called sandbox testers so go ahead and click that and this is where you can create a test apple id you're going to have to use an actual email address because you're able to log into the apple website with this account even though it's a test user it functions as a real apple id alright so go ahead and do that but remember which email address you used and what password you used as well now the next thing we're going to do is to launch our application on our actual device so plug in your actual device and then go ahead and launch the application all right so i've got it showing here so i'm going to hit the join pro tours button and we're going to see our inapp purchases here and i would suggest to test the one month button first and the reason for that um i'll get to in a second but let's go ahead and tap on this button so you can see that it pops up something kind of like the purchase confirmation screen that you would usually see except that notice it says environment sandbox and that's how you know that this is a test purchase there isn't going to be any money actually processed and also notice that it says plan automatically renews for 1349 and this is in my local currency even though if you remember in app store connect when we configured these inapp purchases it was 9.99 usd so that's why you don't want to put the actual price in the product name because if you did that it would say enter your password to subscribe to proaccess monthly 9.99 and then it would say plan automatically renews in my local currency and so it's really confusing and that's why we made special care not to put any pricing information or duration information into the product name and instead we dynamically uh generated this button string pro access one year you know 79.99 in my local currency all right so here if you're doing this for the first time you're going to see an account and password text box and this is where you're going to enter your sandbox tester email and your sandbox tester password because i've done this before it's already logged in my sandbox tester and so all i have to do here is enter in my password so let's go ahead and do that and test this purchase all right i'm going to hit continue and then if there are any errors you can see in the debug information there alright so confirm subscription and click ok here and then you're all set and you can see it dismissed it and in the main view controller it received that notification and so it removed the button and it also you know changed the labels to reflect pro mode all right and now we're going to go over to the revenue cat side and if you go under you know your in your app here and you go over to overview and make sure you toggle this button to view sandbox data you can actually see active subscriptions here and you can actually see uh you know the the users that we have just purchased this product a few seconds ago and it expires in four minutes and it's counted as a renewal because i've used this sandbox tester before a little earlier to test this out so you can see this first initial purchase right was not a renewal but when you're testing inapp purchases all of the time frames are shortened so this is a onemonth subscription but it is actually going to only last five minutes and in five minutes time that one month will have expired and it will renew and it's gonna do this a maximum of five times so that's why i recommended testing one month first so that the maximum duration you're going to have to wait is half an hour whereas if you tested one year one year equates to one hour then you're gonna have to wait six hours because it's gonna run you five times so you can see back in here that every five minutes it was it was purchasing right until until the fifth time where it stopped and that's where the subscription ended because this is a test uh a test subscription so it only renews five times um after that point uh when i launched the app it detected that i didn't have pro entitlements anymore so that's how you can test all the scenarios of your application unfortunately there isn't really a way to cancel the subscription of a test user you can see it in your settings of your phone so let me show you that so if you go to your settings and adren you're gonna have to blur some stuff out things you hit that and you go to itunes and app store and you can see my apple id is up there but if you scroll all the way to the bottom you'll see that there is a sandbox account section with my sandbox account email now take special note that you will not be able to see this section uh the sandbox section unless you have um made that purchase and logged in with your test user at least once because i was looking for this section before and it didn't exist and it wasn't until i made a purchase i logged in as my test user and i made that first purchase that then i see this section here and from what i've been reading in ios 14 if your device is already running that uh you're going to be able to actually cancel this test subscription in your sandbox account for me i'm still currently on ios 13 so i am not able to do that but it will renew and expire in a matter of minutes too so while my subscription is live and let's say we just reboot the app on our device here oops not the simulator but my actual device you can see that when the app launches it's already detected that i have the pro entitlement and so it's showing me the tours right away and not the pro button but if we wait long enough if we wait 30 minutes when it reaches the maximum amount of renewals and essentially the subscription ends you're going to be able to launch the app and you're going to see that this user won't have the pro entitlement anymore and they'll see the pro button again and then you can go through that test purchase flow once again so that's how easy it is to test your revenue cat inapp subscription integration on an actual device in this revenue cat series you've seen how to configure your inapp purchases in app store connect how to organize your products offers and entitlements on the revenue cad side you've also learned how to integrate that revenue sdk into your xcode project so that you can easily display your inapp purchases process purchases from the user and to check their level of access and now you know how to test your implementation as well now there's a lot more that revenuecad can do including experimenting with offers and diving deep into analytics and stats and much much more if you want me to explore the platform further make sure you get your free revenuecat account at cwc.to revcat6 while i don't get compensated for signups it does let the team over at revan ucat know that you guys want to see more inapp purchase content and so they may support and sponsor future videos on app monetization and further deep diving on their platform now i want to turn over to you go to revenuecat.com take a look around and then come back and let me know which features you'd like me to explore further and do a tutorial on just let me know by leaving a quick comment below lastly if you like this video and you want to see more don't forget to give this video a thumbs up and subscribe to the channel so you don't miss the next upcoming app series alright thanks for watching and i'll see you in the next lesson