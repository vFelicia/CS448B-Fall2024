hello welcome to lesson six of the Firebase tutorial video series in the previous lesson we were looking at how this database stores its data and the data that we created here was just uh some sample data to illustrate um how data is stored so I'm just going to go ahead and delete these nodes so that it doesn't because it's not going to be working with our messaging app all right now the database is clear and we're going to jump back into xcode and open up our messaging app here and where we're going to implement that code is actually in in terms of saving data is in the compose view controller uh in the add Post in fact you can see that we put a little todo here post the data to Firebase and what we're going to want to do is go into the document M ation I would advise that you keep this handy um as you're you're building your Firebase app because uh the guides contain a lot of helpful information sometimes as you're just getting started the syntax is hard to remember uh just click get started guide and scroll here to realtime database under iOS you can click on here read and write data so it tells us that the first thing we have to do here is create a reference to uh the database and this is going to pull from the config file which we've added this Google service info.plist so up here let's first import Firebase database like that and then what we're going to do is VAR uh reference and this is going to be a fi or fire base database reference and I'm going to make it an optional type because I'm not going to declare it right here we're going to initialize it in here in the viewed load so it's ref I'm going to now assign something into it before this just creating the property called ref so ref equals database. database. reference let's go back here and that's what we just did here so now we're ready to use uh we're ready to use the database through this ref property okay so let's talk about how we can write our data here so in order to write data we need to know where we want to write that data and how we do that is we call this child method we specify the node node or the branch we want to travel down so for example um I wish I didn't delete all the data just yet so let's just say if we had that customers's node and then we had another node like customer one and the value was I think it was we had name Harry like that and I wanted to write another key value pair under customer one uh I would have to go customers right child customers and then child customer one to get to this point and then I would set a new key value pair down there so you can see some of that going on here you can see thatt child and then it goes users right and then down another Branch or another node below that is uh Child user. ID and finally they would use the set value to set that key value pair and you can use the this child chaining for as many levels deep as you want it to go but for we're just going to have one level called posts so for example if I had you know posts like that oh I don't think I can add it like that but in here in viewed load if I want to add the post I would say ref. child and I would create the path posts like that uh and because there is no posts node right here uh it's just going to create it and then underneath posts we would want to create a key value pair so what we're going to do because I don't really care about what the the key is or the name is we're going to use this child by Auto ID it's going to automatically create an ID for our post and then finally I can use set value and I'm just going to set a hardcoded string right now so you can see what that looks like uh so let me run this now and when we click on the add post button it's going to uh set this data okay it's going to go down the path posts and it's going to create a new ID and then the value for that ID is going to be hello Firebase so before we're going to write this data into the database there's actually one thing that we have to do and that is to go into our database rules because by default uh we need to be authenticated before we can read or write but actually we can change this so that right now for demonstration purposes um anybody can do so um before I change that let me go here in the documentation under authentication uh let's say manage users was it here no it is under database get started I think oh security rules right here get started okay so here is by default uh what the rules for the database are um you need to be authenticated to read or write in order to change it to public all you have to do is specify true for read and true for write so let's do that for our database right here and again you get here by clicking database and then rules here and let's change this true and true now let's publish this and it tells you that you've defined it as anybody can read or write so that's what we're going to want for our app here let's launch it and this data here it's sample data this is not from our database we hardcoded this data to demonstrate that the table view works when we finally retrieve the data from our database we can get rid of these messages okay so let's click on compose and when I click on this add post button uh we're going to see it pop here into our database hopefully okay so did you see that I clicked the button and instantly it created a posts node and there's our Auto ID and here is uh the value for that and because the Auto ID is just random if I do it again right it's going to create another post like that so what we're going to do here is just delete this customers node because that was just sample data and we are going to go back into our app right now and instead of hello Firebase we're going to set it to uh the text view. text and this time let's run it again now we can add some text into it and post it to Firebase so let's say hello from YouTube click add post and here you can see that data reflected in our database in the next lesson you're going to learn how to retrieve this data and how we're going to display it in our table view thanks for watching and I'll see you in the next lesson bye for now