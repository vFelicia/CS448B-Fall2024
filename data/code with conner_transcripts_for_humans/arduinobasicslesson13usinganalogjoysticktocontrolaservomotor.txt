With timestamps:

00:01 - [Music]
00:11 - hello future engineer welcome back to
00:14 - the Arduino basics tutorial series my
00:16 - name is Adam and this is lesson number
00:18 - 13 where we're gonna learn to use an
00:20 - analog joystick to control a servo motor
00:23 - to start us off we're gonna look at our
00:25 - wiring diagram you'll need an analog
00:27 - joystick you'll need your servo motor
00:29 - your Arduino and a breadboard so we'll
00:32 - start off with the servo motor wiring
00:33 - with the servo motor it's the same
00:35 - wiring as it was in the previous lessons
00:37 - we bring one wire into pin number three
00:40 - which is a pwm pin or a pulse width
00:42 - modulation pin on our Arduino we bring
00:45 - our voltage wire to voltage and our
00:47 - ground wire to grant that's it for the
00:49 - servo let's take some time and look at
00:51 - the joystick our joystick has five pins
00:54 - on it
00:54 - it has a ground a +5 volt of VXR
00:58 - and a v ry and a switch SW so we're
01:02 - gonna take our ground up to our ground
01:04 - row on our breadboard our five volt to
01:06 - our five volt row on our breadboard our
01:08 - VXR and vry we're gonna bring into our
01:11 - analog inputs on our Arduino so I put V
01:15 - rx 2 a0 and I put V ry 2 a1 so you can
01:21 - see this here that's the orange and the
01:23 - green coming out of ER axon v ry down
01:26 - into a 0 and a 1 respective the last is
01:29 - this SW and the way it works is our
01:31 - joystick can move in the X direction the
01:33 - Y direction and you can push the button
01:35 - down when you push the button down it
01:37 - activates the switch pin so I'm bringing
01:40 - that into the digital pin 2 on my
01:42 - Arduino and that's going to give me
01:43 - control over that button press and then
01:46 - also control over the axes the X and the
01:48 - y movement of the joystick so that's the
01:50 - wiring it's pretty straightforward to
01:52 - get it all wired up hopefully you don't
01:54 - run into any difficulties there if you
01:56 - do you can drop a comment in the video
01:58 - and we'll try to help you out I also
01:59 - have a picture of the wiring diagram in
02:01 - the description of the video now we'll
02:03 - head over to the code and we'll look at
02:04 - what we can do to program this setup so
02:07 - here we are in our code interface I've
02:08 - got a new file called lesson 13 and I'm
02:11 - ready to get started with my
02:12 - in this video we're gonna do in kind of
02:14 - three sections we're gonna start by
02:16 - writing the code necessary to read and
02:18 - print out the x and y values from our
02:22 - joystick once we are successfully doing
02:24 - that we're gonna look at the range of
02:25 - values and see if they need to be
02:26 - converted for our servo motor well look
02:29 - at the conversion and then get the servo
02:30 - motor being written and then as the
02:32 - final step we'll bring in the button and
02:35 - incorporate that into how our code is
02:37 - going to function so you'll see the code
02:39 - is gonna shift throughout the video
02:40 - we're not just going to progressively
02:41 - build one code set we're gonna start
02:44 - with one set of code modify it and then
02:46 - modify it again so let's drop in the
02:48 - code we need at the top of our file
02:50 - before we get into the setup function to
02:52 - initialize our pins and bring in our
02:54 - libraries here's what we've got
02:56 - we're gonna include our servo dot H
02:58 - library like we have in previous lessons
03:00 - so that we can access our servo motor
03:02 - we're gonna declare the pin for our
03:04 - servo which we're using pin three and
03:06 - our object which we're still calling
03:07 - servo one same code as we've seen in
03:09 - previous lessons for our joystick we're
03:12 - gonna set up three pins our SW pin for
03:15 - our switch which is pin two our X pin
03:18 - which is a zero and our Y pin which is a
03:20 - one you'll notice I added this keyword
03:23 - Const I really just added this because I
03:25 - wanted to show it to you a Const is
03:28 - representative of a constant variable
03:30 - which is a variable that we have fixed
03:32 - its value for so we're not going to be
03:35 - modifying the value of that variable in
03:37 - the code and it just kind of protects it
03:38 - because we're not going to be suddenly
03:40 - just switch in which pin we're plugged
03:41 - in to so we want to just make sure that
03:43 - we can't accidentally modify that value
03:46 - in our code that's why we've declared
03:48 - these as constant it's not a requirement
03:50 - it's just a protection thing now we're
03:52 - gonna move into our setup function and
03:54 - in here we're gonna set up our pins set
03:56 - up our serial monitor and set up our
03:57 - servo so our switch pin is declared as
04:01 - an input with a pin mode call this is a
04:04 - little different we're doing a digital
04:05 - right to the switch pin of hi now this
04:08 - is special to the joystick this is
04:10 - essentially enabling the button on the
04:12 - joystick we have to send that signal out
04:14 - to enable the button this button runs as
04:17 - a passive hi which means when it's not
04:19 - being pressed it's gonna read as a high
04:21 - input on the digital pin and once it's
04:23 - pressed down it's gonna read as a low
04:26 - and it's important that we know that
04:27 - because it will affect our statements
04:29 - later on I set up my serial monitor and
04:31 - I attach my servo to the servo pin so
04:34 - this is everything that we need to do in
04:36 - our setup function the first step of
04:38 - what we're gonna do for our code is we
04:41 - are just going to display the values
04:43 - that are coming out of our joystick so
04:46 - inside of our loop function we're just
04:49 - going to put a series of print
04:50 - statements that are gonna include analog
04:53 - reads from the joystick so that we can
04:55 - get a sense of what values our joystick
04:57 - is giving us so let's look at the print
05:00 - statements that we've got we have a
05:01 - print of the words x-axis : in a space
05:04 - then a print of an analog read on the x
05:07 - pin so this will read the joysticks X
05:10 - pin and then print the value that it
05:13 - receives then a print of a backslash n
05:15 - in quotation marks this is a character
05:18 - or a special character that we can put
05:20 - in there that causes it to jump to a
05:22 - newline print y-axis and then print the
05:25 - analog read on the y pin and then print
05:28 - a double line jump so that's all set up
05:30 - for us to see what's gonna happen I put
05:32 - a delay of 100 milliseconds in at the
05:33 - bottom and we'll have a look at how this
05:35 - is actually gonna work once we plug it
05:37 - in all right so push this code out so
05:39 - let's have a look at the serial monitor
05:41 - here so you can see it's printing on my
05:43 - values now it's printing out right
05:44 - around 502 503 for the X and the y and
05:47 - that indicates the center this joystick
05:49 - doesn't use a 0-0 Center it uses a range
05:52 - from 0 to 1024 so the middle is gonna
05:55 - hover around that 500 value depending on
05:58 - your joystick so if I move this in one
06:00 - direction I see my y-axis goes up to
06:03 - 1024 10:23 and if I go down the other
06:06 - direction my Y moves to 0 if I go left
06:08 - and right my X goes up to 1023 my X goes
06:12 - down to 0 and I can kind of hover this
06:15 - to in different positions it doesn't
06:17 - have to just be the X or the Y that's
06:19 - moving I can move them both the same
06:22 - time right it's an analog joystick it
06:24 - can go in a circle and I can move the
06:26 - values all around it's giving us a sense
06:28 - of the range of values of what this
06:30 - joystick can do this joystick is gonna
06:33 - do a range of values from 0 to 1024 so
06:36 - now that we know the range of values
06:38 - that are joist
06:39 - sends into our Arduino we need to
06:41 - convert those values because our servo
06:44 - motor has degree values from zero to a
06:47 - hundred and E we've done this once
06:48 - before but let's go over it again we
06:50 - need to take a value from zero to 1024
06:53 - and we need to convert it to a different
06:54 - number range so in this case zero to 180
06:57 - so let's look at the math involved in
06:59 - doing that so I'm gonna start here in my
07:01 - print statement of my analog read for
07:04 - the X pit so this analog read statement
07:07 - returns a value from zero to 1024 so the
07:10 - first thing we need to do is divide it
07:12 - by 1024 we need to be careful because
07:16 - the way it works in a programming
07:18 - language is if I just put divide 1024
07:20 - it's going to divide two integers and
07:22 - it's going to want to give me my answer
07:23 - as an integer which means no decimal
07:25 - values and what ends up happening there
07:27 - is if you do get a decimal it just
07:29 - ignores everything after the decimal
07:30 - point so if I take a number that's less
07:33 - than 1024 divided by 1024 I'm
07:36 - guaranteeing my answers between 0 and 1
07:38 - which means it's going to give me 0
07:40 - every time if I do it as an integer
07:42 - division so I'm gonna put a dot 0 on the
07:45 - 1024 and this forces the programming
07:47 - language or C in this case to maintain
07:50 - the decimal values of the division the
07:52 - division by 1024 brings me down to a
07:55 - number range from 0 to 1 now I need to
07:57 - multiply it back up to the desired
07:59 - number range which in this case is a
08:01 - hundred and 80 if I run the code right
08:03 - now what I'm gonna get is a decimal
08:05 - value from 0 to 180 let's run this code
08:09 - and let's have a look
08:10 - so I've pushed this out to my board if I
08:12 - pull out my monitor I'm gonna see that
08:14 - that X pin is now reading a value around
08:17 - 88 and if I move left and right I'm
08:20 - gonna see that X pin go up to 180 down
08:24 - to 0 now it's reading as a decimal so
08:26 - 179 point 8 2 right in the range 1975 26
08:33 - etc so I just want to turn that into an
08:35 - integer value instead of it being a
08:38 - double or a decimal so to do that
08:41 - all I have to do is add in one statement
08:43 - I have to add this int in brackets and
08:46 - then wrap an extra pair of brackets
08:48 - around my calculation so what does this
08:52 - do well this
08:52 - has a special name it's called casting
08:54 - and what it does is it says take a
08:57 - variable or a value of one type in this
09:00 - case double which is a type that
09:02 - includes decimals and cast it to an
09:05 - integer which in the case of going from
09:07 - something that's more precise like a
09:08 - decimal to something that's less precise
09:10 - like an integer it's just going to
09:12 - ignore everything after the decimal and
09:13 - store the whole portion of the dot of
09:16 - the number as an integer so this should
09:19 - give us a nice clean number from 0 to
09:21 - 179 give or take which is totally fine
09:23 - for the movement on our servomotor this
09:25 - should be good for our X I'm just gonna
09:27 - copy that and paste it for my Y and
09:30 - replace that with a y and let's push
09:33 - this out and let's have a look at what
09:34 - our values are now so opening up the
09:36 - serial monitor here 88 up to 179 down to
09:42 - 0 on the X down to zero up to 179 so now
09:47 - we have values that are inside that zero
09:50 - to 180 range from our X and from our Y
09:53 - so now we're ready to incorporate the
09:56 - servomotor into our code to bring the
09:59 - Scerbo into our code there's really not
10:00 - a lot to do after all of our serial
10:02 - prints I'm gonna write my value to my
10:05 - servo now I only have one servo in the
10:07 - circuit so I'm only gonna worry about
10:08 - doing my x value for right now so all
10:14 - i've included is a servo 1 dot right and
10:17 - then the exact same calculation that we
10:20 - used in the print line read in the X pin
10:22 - from the joystick divided by 1024 point
10:25 - 0 times I 180 and cast it as an integer
10:27 - and we're gonna write that to the servo
10:29 - so that is going to allow that to work
10:32 - the only thing with the servo motor is
10:34 - we want to have a shorter delay so that
10:36 - as we're moving the joystick the servo
10:39 - is moving essentially at the same time
10:41 - so we'll put a delay of 5 milliseconds
10:44 - in it'll make our serial monitor maybe
10:46 - not as clean to read because it'll be
10:48 - scrolling so quickly but it'll make the
10:50 - actual movement of the motor work better
10:52 - so I've pushed this out to my board and
10:55 - I'll show you a little bit about how it
10:57 - works right now so I've got my joystick
11:00 - here and I've got my servo motor here
11:01 - and as I move my joystick you can see my
11:04 - servo motor
11:05 - moves along with the joystick movement
11:08 - so it'll go down all the way back all
11:11 - the way the other direction and it rests
11:12 - in the middle when I'm not using the
11:14 - joystick so we're now controlling the
11:17 - motor with the joystick success so the
11:20 - only extra thing we want to do is you
11:22 - want to incorporate the push down button
11:23 - on the joystick which we haven't done
11:26 - yet so what I want to do for the button
11:28 - is this I want when my program first
11:32 - starts for it to run exactly like we
11:35 - just saw with the print statements out
11:36 - to the serial and the joystick
11:38 - controlling the motor when it pushed
11:41 - down the button I want it to effectively
11:43 - turn off the joystick so it's going to
11:45 - state that the joystick is off and
11:47 - moving the joystick is not gonna affect
11:50 - the motor at all until the button gets
11:52 - pushed down again which then acts to
11:54 - turn the joystick back on and it resumes
11:56 - normal functionality that's what I want
11:59 - to do so we're gonna have to add a few
12:00 - things but the most important thing we
12:02 - have to add is an if statement we need
12:05 - to take all of this code that we've
12:07 - already written and we need to wrap it
12:09 - inside of an if statement that
12:11 - essentially says the button is not
12:12 - currently being pressed down so it's
12:16 - going to look something like this so the
12:21 - if statement says digital read on the
12:23 - switch pin so reading the value of the
12:25 - switch pin if it's high high remember
12:28 - means that the button is not being
12:29 - pressed because this is a passive high
12:31 - button then I added one extra set of
12:34 - print statements prints the state and
12:36 - says that the joystick is on and then I
12:39 - left all the remaining print and write
12:41 - statements the same and then I closed
12:43 - the a statement bracket here so this
12:46 - allowed me to set this up also just a
12:49 - formatting tip if you highlight a large
12:51 - group of text and press the tab key or
12:54 - the shift tab combination you can indent
12:56 - or unand enter that block of text all at
12:59 - one time this is what my if statements
13:01 - gonna look like for when the button is
13:02 - not currently being pressed now I need
13:05 - to add my else statement
13:09 - so remember an else statement only
13:12 - happens when the if isn't true so the
13:14 - only time we're going to end up in this
13:16 - block of code is if somebody pushes the
13:19 - button when they push the button it's
13:21 - going to trigger us to come into this
13:22 - block of code one of the things that we
13:24 - often forget when we're looking at
13:26 - button pushes is how quickly this code
13:29 - actually runs if we don't put a delay in
13:32 - here then what happens is when somebody
13:34 - pushes the button they think they're
13:36 - pushing in very quickly when in reality
13:37 - they might be holding the button down
13:39 - for 500 milliseconds we needed to lay to
13:42 - essentially make sure that we're not
13:43 - getting a false positive reading on our
13:45 - button so I'm gonna put a one-second
13:47 - delay at the top of this now I'm gonna
13:51 - bring in a bunch of print statements
13:53 - just to print essentially that the
13:54 - joystick is off and here are the
13:56 - instructions for how to turn it back on
13:58 - we have a print for the state the
14:00 - joystick is off we jump to a new line we
14:03 - print out that if you press down on the
14:05 - joystick you can turn it back on and we
14:07 - jump line now here's the thing if I let
14:10 - this code end remember persons not
14:12 - holding this button damn they've pressed
14:14 - it and they've let it go so the button
14:16 - state is already back to high at this
14:18 - point in the code so if I let this code
14:21 - exit it's gonna come back into my loop
14:23 - and it's gonna start using the joystick
14:25 - again so I kinda need to trap people
14:28 - here in this else statement until
14:30 - they've pressed the button for the
14:32 - second time to then trigger the loop
14:35 - function to rerun so I'm gonna do this
14:37 - using an infinite loop it's gonna look
14:39 - like this it says while true so this
14:43 - loop can never end unless I give it a
14:46 - reason to end otherwise what's inside
14:49 - these squiggly brackets will run forever
14:50 - so inside I'm gonna put another if
14:53 - statement to check if the button has
14:55 - been pressed so I put an if the digital
15:00 - read on the switch pin is low remember
15:02 - low means they just press the button so
15:04 - the button gets pressed we're gonna
15:06 - break out of the loop which restarts the
15:08 - call to the main loop function so we use
15:10 - a break function which kicks us out of
15:12 - our while loop I then will also add in a
15:15 - one-second delay before the joystick
15:18 - actually starts working again this is so
15:21 - that we avoid the fact that
15:22 - people accidentally hold the button down
15:24 - longer than they realize not even
15:26 - accidentally it just happens what we
15:28 - think is a very quick button push
15:29 - actually will be several hundred
15:31 - milliseconds so we want to avoid that so
15:33 - this gives a one-second delay before the
15:35 - joystick kicks into action again
15:37 - this delay v is actually supposed to be
15:39 - up in the if-statement where our
15:41 - joystick is running properly so we're
15:43 - gonna cut it and move it up there so we
15:46 - added that delay v right after we wrote
15:48 - our servo up in our if statement so this
15:50 - should work in that when our button gets
15:52 - pressed down it should turn it off and
15:54 - it should stick in this infinite loop
15:56 - waiting for me to push the button again
15:57 - when I push it again it should break out
16:00 - come back up to our main code and as
16:02 - long as I haven't pressed the button
16:04 - it's gonna do all the execution that
16:06 - we've already seen until I press the
16:08 - button again and then it's gonna turn
16:10 - off so we'll push this out we'll have a
16:12 - look at it
16:12 - and then we'll go on to our extension so
16:14 - our codes been pushed out let's have a
16:16 - look at the serial monitor we see that
16:18 - it's all running it's all running out
16:19 - we've missed a line print there see it
16:21 - says joystick is on x-axis right away
16:23 - let's fix that before we keep going so
16:26 - up here in our if statement we have this
16:28 - joystick is on we're gonna add a new
16:30 - line after that remember we do that with
16:32 - a backslash and in quotation marks so
16:34 - I'll reap us out and we'll look one more
16:36 - time all right we're back in hey look at
16:38 - that we've got the line now so let's
16:40 - push down on our joystick and see what
16:41 - happens the joystick is off press tab on
16:46 - the joystick to turn it back on notice
16:47 - it's not looping if I turn my joystick
16:49 - my motor is not turning let's push down
16:53 - again and there it goes it's back on and
16:57 - it's working so now we've effectively
17:01 - turned the button on the joystick into
17:02 - an on and an off switch
17:03 - push down it's off there we go
17:06 - great job hopefully the bass lesson made
17:09 - sense as we move on to the extension for
17:12 - this one we're gonna keep it pretty
17:12 - simple the most important thing here was
17:14 - the math statements that we use so what
17:16 - I'd like for you to do is add in a nice
17:18 - multi-line comment before or after so a
17:20 - nice little multi-line comment before or
17:23 - after that statement and just explain
17:25 - what is actually happening there and why
17:27 - that statement works the way that it
17:29 - does okay let's do that for the math
17:31 - just so we understand how to take a
17:32 - number from one range and move it into a
17:35 - number from another
17:36 - that's really important when we're
17:37 - translating inputs to outputs so let's
17:40 - take that on for the extension and then
17:42 - we'll look at a challenge
17:43 - hopefully the extension went well and
17:45 - you got a good description there and you
17:46 - understand that math that we did for a
17:49 - challenge what I'd like for you to do is
17:50 - add a second servo motor into your
17:53 - circuit and then have the y axis of your
17:56 - joystick control the second servo motor
17:59 - what's really cool here is if you get it
18:01 - working you could actually melt the two
18:04 - servo motors together
18:05 - so mail one servo on top of the wings of
18:09 - the other servo using zip ties and you
18:12 - can create essentially a turret where
18:14 - you can use x and y movement to tilt it
18:16 - from side to side and up and down which
18:19 - is a really neat little thing you could
18:21 - then maybe attach a laser pointer onto
18:23 - it later on and all of a sudden you've
18:24 - got a little laser turret that you could
18:26 - move around so we'll put that out there
18:28 - as a challenge for you hopefully it goes
18:30 - well thank you for sticking with us for
18:32 - 13 lessons see you back here in Lesson
18:34 - number 14 and again thank you so much
18:36 - for watching if you enjoy what we're
18:38 - doing like the video subscribe to our
18:39 - Channel
18:40 - we'll see you next time have a great day
18:43 - [Music]

Cleaned transcript:

hello future engineer welcome back to the Arduino basics tutorial series my name is Adam and this is lesson number 13 where we're gonna learn to use an analog joystick to control a servo motor to start us off we're gonna look at our wiring diagram you'll need an analog joystick you'll need your servo motor your Arduino and a breadboard so we'll start off with the servo motor wiring with the servo motor it's the same wiring as it was in the previous lessons we bring one wire into pin number three which is a pwm pin or a pulse width modulation pin on our Arduino we bring our voltage wire to voltage and our ground wire to grant that's it for the servo let's take some time and look at the joystick our joystick has five pins on it it has a ground a +5 volt of VXR and a v ry and a switch SW so we're gonna take our ground up to our ground row on our breadboard our five volt to our five volt row on our breadboard our VXR and vry we're gonna bring into our analog inputs on our Arduino so I put V rx 2 a0 and I put V ry 2 a1 so you can see this here that's the orange and the green coming out of ER axon v ry down into a 0 and a 1 respective the last is this SW and the way it works is our joystick can move in the X direction the Y direction and you can push the button down when you push the button down it activates the switch pin so I'm bringing that into the digital pin 2 on my Arduino and that's going to give me control over that button press and then also control over the axes the X and the y movement of the joystick so that's the wiring it's pretty straightforward to get it all wired up hopefully you don't run into any difficulties there if you do you can drop a comment in the video and we'll try to help you out I also have a picture of the wiring diagram in the description of the video now we'll head over to the code and we'll look at what we can do to program this setup so here we are in our code interface I've got a new file called lesson 13 and I'm ready to get started with my in this video we're gonna do in kind of three sections we're gonna start by writing the code necessary to read and print out the x and y values from our joystick once we are successfully doing that we're gonna look at the range of values and see if they need to be converted for our servo motor well look at the conversion and then get the servo motor being written and then as the final step we'll bring in the button and incorporate that into how our code is going to function so you'll see the code is gonna shift throughout the video we're not just going to progressively build one code set we're gonna start with one set of code modify it and then modify it again so let's drop in the code we need at the top of our file before we get into the setup function to initialize our pins and bring in our libraries here's what we've got we're gonna include our servo dot H library like we have in previous lessons so that we can access our servo motor we're gonna declare the pin for our servo which we're using pin three and our object which we're still calling servo one same code as we've seen in previous lessons for our joystick we're gonna set up three pins our SW pin for our switch which is pin two our X pin which is a zero and our Y pin which is a one you'll notice I added this keyword Const I really just added this because I wanted to show it to you a Const is representative of a constant variable which is a variable that we have fixed its value for so we're not going to be modifying the value of that variable in the code and it just kind of protects it because we're not going to be suddenly just switch in which pin we're plugged in to so we want to just make sure that we can't accidentally modify that value in our code that's why we've declared these as constant it's not a requirement it's just a protection thing now we're gonna move into our setup function and in here we're gonna set up our pins set up our serial monitor and set up our servo so our switch pin is declared as an input with a pin mode call this is a little different we're doing a digital right to the switch pin of hi now this is special to the joystick this is essentially enabling the button on the joystick we have to send that signal out to enable the button this button runs as a passive hi which means when it's not being pressed it's gonna read as a high input on the digital pin and once it's pressed down it's gonna read as a low and it's important that we know that because it will affect our statements later on I set up my serial monitor and I attach my servo to the servo pin so this is everything that we need to do in our setup function the first step of what we're gonna do for our code is we are just going to display the values that are coming out of our joystick so inside of our loop function we're just going to put a series of print statements that are gonna include analog reads from the joystick so that we can get a sense of what values our joystick is giving us so let's look at the print statements that we've got we have a print of the words xaxis in a space then a print of an analog read on the x pin so this will read the joysticks X pin and then print the value that it receives then a print of a backslash n in quotation marks this is a character or a special character that we can put in there that causes it to jump to a newline print yaxis and then print the analog read on the y pin and then print a double line jump so that's all set up for us to see what's gonna happen I put a delay of 100 milliseconds in at the bottom and we'll have a look at how this is actually gonna work once we plug it in all right so push this code out so let's have a look at the serial monitor here so you can see it's printing on my values now it's printing out right around 502 503 for the X and the y and that indicates the center this joystick doesn't use a 00 Center it uses a range from 0 to 1024 so the middle is gonna hover around that 500 value depending on your joystick so if I move this in one direction I see my yaxis goes up to 1024 1023 and if I go down the other direction my Y moves to 0 if I go left and right my X goes up to 1023 my X goes down to 0 and I can kind of hover this to in different positions it doesn't have to just be the X or the Y that's moving I can move them both the same time right it's an analog joystick it can go in a circle and I can move the values all around it's giving us a sense of the range of values of what this joystick can do this joystick is gonna do a range of values from 0 to 1024 so now that we know the range of values that are joist sends into our Arduino we need to convert those values because our servo motor has degree values from zero to a hundred and E we've done this once before but let's go over it again we need to take a value from zero to 1024 and we need to convert it to a different number range so in this case zero to 180 so let's look at the math involved in doing that so I'm gonna start here in my print statement of my analog read for the X pit so this analog read statement returns a value from zero to 1024 so the first thing we need to do is divide it by 1024 we need to be careful because the way it works in a programming language is if I just put divide 1024 it's going to divide two integers and it's going to want to give me my answer as an integer which means no decimal values and what ends up happening there is if you do get a decimal it just ignores everything after the decimal point so if I take a number that's less than 1024 divided by 1024 I'm guaranteeing my answers between 0 and 1 which means it's going to give me 0 every time if I do it as an integer division so I'm gonna put a dot 0 on the 1024 and this forces the programming language or C in this case to maintain the decimal values of the division the division by 1024 brings me down to a number range from 0 to 1 now I need to multiply it back up to the desired number range which in this case is a hundred and 80 if I run the code right now what I'm gonna get is a decimal value from 0 to 180 let's run this code and let's have a look so I've pushed this out to my board if I pull out my monitor I'm gonna see that that X pin is now reading a value around 88 and if I move left and right I'm gonna see that X pin go up to 180 down to 0 now it's reading as a decimal so 179 point 8 2 right in the range 1975 26 etc so I just want to turn that into an integer value instead of it being a double or a decimal so to do that all I have to do is add in one statement I have to add this int in brackets and then wrap an extra pair of brackets around my calculation so what does this do well this has a special name it's called casting and what it does is it says take a variable or a value of one type in this case double which is a type that includes decimals and cast it to an integer which in the case of going from something that's more precise like a decimal to something that's less precise like an integer it's just going to ignore everything after the decimal and store the whole portion of the dot of the number as an integer so this should give us a nice clean number from 0 to 179 give or take which is totally fine for the movement on our servomotor this should be good for our X I'm just gonna copy that and paste it for my Y and replace that with a y and let's push this out and let's have a look at what our values are now so opening up the serial monitor here 88 up to 179 down to 0 on the X down to zero up to 179 so now we have values that are inside that zero to 180 range from our X and from our Y so now we're ready to incorporate the servomotor into our code to bring the Scerbo into our code there's really not a lot to do after all of our serial prints I'm gonna write my value to my servo now I only have one servo in the circuit so I'm only gonna worry about doing my x value for right now so all i've included is a servo 1 dot right and then the exact same calculation that we used in the print line read in the X pin from the joystick divided by 1024 point 0 times I 180 and cast it as an integer and we're gonna write that to the servo so that is going to allow that to work the only thing with the servo motor is we want to have a shorter delay so that as we're moving the joystick the servo is moving essentially at the same time so we'll put a delay of 5 milliseconds in it'll make our serial monitor maybe not as clean to read because it'll be scrolling so quickly but it'll make the actual movement of the motor work better so I've pushed this out to my board and I'll show you a little bit about how it works right now so I've got my joystick here and I've got my servo motor here and as I move my joystick you can see my servo motor moves along with the joystick movement so it'll go down all the way back all the way the other direction and it rests in the middle when I'm not using the joystick so we're now controlling the motor with the joystick success so the only extra thing we want to do is you want to incorporate the push down button on the joystick which we haven't done yet so what I want to do for the button is this I want when my program first starts for it to run exactly like we just saw with the print statements out to the serial and the joystick controlling the motor when it pushed down the button I want it to effectively turn off the joystick so it's going to state that the joystick is off and moving the joystick is not gonna affect the motor at all until the button gets pushed down again which then acts to turn the joystick back on and it resumes normal functionality that's what I want to do so we're gonna have to add a few things but the most important thing we have to add is an if statement we need to take all of this code that we've already written and we need to wrap it inside of an if statement that essentially says the button is not currently being pressed down so it's going to look something like this so the if statement says digital read on the switch pin so reading the value of the switch pin if it's high high remember means that the button is not being pressed because this is a passive high button then I added one extra set of print statements prints the state and says that the joystick is on and then I left all the remaining print and write statements the same and then I closed the a statement bracket here so this allowed me to set this up also just a formatting tip if you highlight a large group of text and press the tab key or the shift tab combination you can indent or unand enter that block of text all at one time this is what my if statements gonna look like for when the button is not currently being pressed now I need to add my else statement so remember an else statement only happens when the if isn't true so the only time we're going to end up in this block of code is if somebody pushes the button when they push the button it's going to trigger us to come into this block of code one of the things that we often forget when we're looking at button pushes is how quickly this code actually runs if we don't put a delay in here then what happens is when somebody pushes the button they think they're pushing in very quickly when in reality they might be holding the button down for 500 milliseconds we needed to lay to essentially make sure that we're not getting a false positive reading on our button so I'm gonna put a onesecond delay at the top of this now I'm gonna bring in a bunch of print statements just to print essentially that the joystick is off and here are the instructions for how to turn it back on we have a print for the state the joystick is off we jump to a new line we print out that if you press down on the joystick you can turn it back on and we jump line now here's the thing if I let this code end remember persons not holding this button damn they've pressed it and they've let it go so the button state is already back to high at this point in the code so if I let this code exit it's gonna come back into my loop and it's gonna start using the joystick again so I kinda need to trap people here in this else statement until they've pressed the button for the second time to then trigger the loop function to rerun so I'm gonna do this using an infinite loop it's gonna look like this it says while true so this loop can never end unless I give it a reason to end otherwise what's inside these squiggly brackets will run forever so inside I'm gonna put another if statement to check if the button has been pressed so I put an if the digital read on the switch pin is low remember low means they just press the button so the button gets pressed we're gonna break out of the loop which restarts the call to the main loop function so we use a break function which kicks us out of our while loop I then will also add in a onesecond delay before the joystick actually starts working again this is so that we avoid the fact that people accidentally hold the button down longer than they realize not even accidentally it just happens what we think is a very quick button push actually will be several hundred milliseconds so we want to avoid that so this gives a onesecond delay before the joystick kicks into action again this delay v is actually supposed to be up in the ifstatement where our joystick is running properly so we're gonna cut it and move it up there so we added that delay v right after we wrote our servo up in our if statement so this should work in that when our button gets pressed down it should turn it off and it should stick in this infinite loop waiting for me to push the button again when I push it again it should break out come back up to our main code and as long as I haven't pressed the button it's gonna do all the execution that we've already seen until I press the button again and then it's gonna turn off so we'll push this out we'll have a look at it and then we'll go on to our extension so our codes been pushed out let's have a look at the serial monitor we see that it's all running it's all running out we've missed a line print there see it says joystick is on xaxis right away let's fix that before we keep going so up here in our if statement we have this joystick is on we're gonna add a new line after that remember we do that with a backslash and in quotation marks so I'll reap us out and we'll look one more time all right we're back in hey look at that we've got the line now so let's push down on our joystick and see what happens the joystick is off press tab on the joystick to turn it back on notice it's not looping if I turn my joystick my motor is not turning let's push down again and there it goes it's back on and it's working so now we've effectively turned the button on the joystick into an on and an off switch push down it's off there we go great job hopefully the bass lesson made sense as we move on to the extension for this one we're gonna keep it pretty simple the most important thing here was the math statements that we use so what I'd like for you to do is add in a nice multiline comment before or after so a nice little multiline comment before or after that statement and just explain what is actually happening there and why that statement works the way that it does okay let's do that for the math just so we understand how to take a number from one range and move it into a number from another that's really important when we're translating inputs to outputs so let's take that on for the extension and then we'll look at a challenge hopefully the extension went well and you got a good description there and you understand that math that we did for a challenge what I'd like for you to do is add a second servo motor into your circuit and then have the y axis of your joystick control the second servo motor what's really cool here is if you get it working you could actually melt the two servo motors together so mail one servo on top of the wings of the other servo using zip ties and you can create essentially a turret where you can use x and y movement to tilt it from side to side and up and down which is a really neat little thing you could then maybe attach a laser pointer onto it later on and all of a sudden you've got a little laser turret that you could move around so we'll put that out there as a challenge for you hopefully it goes well thank you for sticking with us for 13 lessons see you back here in Lesson number 14 and again thank you so much for watching if you enjoy what we're doing like the video subscribe to our Channel we'll see you next time have a great day
