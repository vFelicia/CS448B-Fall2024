With timestamps:

00:00 - hey in this video I'm gonna show you how
00:01 - to build your own custom login page
00:03 - powered with a firebase authentication
00:05 - back-end now we're going to do both a
00:07 - sign up workflow and a login workflow so
00:10 - that your users can both create an
00:12 - account and login with it along the way
00:15 - I'm also going to show you how to
00:16 - capture some additional fields such as
00:18 - first name and last name and we're going
00:20 - to do some form validation so that we
00:23 - can make sure that the user enters a
00:24 - strong password and that the email they
00:26 - entered is correctly formatted so if
00:28 - that all sounds good to you then stay
00:30 - tuned hey guys my name is Christian and
00:37 - welcome to code with Chris where we
00:39 - teach people how to code and how to
00:40 - build apps now in order to get this
00:42 - login page done we're going to go
00:43 - through the following steps or first
00:45 - going to start our Xcode project and
00:47 - build the user interface and then we're
00:49 - going to sign up for our firebase
00:50 - back-end then we're going to incorporate
00:52 - the firebase SDK into our Xcode project
00:55 - and we're gonna set up firebase
00:57 - authentication and then finally we're
00:59 - gonna hook up that user interface we've
01:00 - built to the firebase authentication
01:03 - back-end so that the user can then
01:05 - create their account and log in now if
01:07 - you're a beginner and this is one of the
01:09 - very first videos you're watching I
01:10 - highly recommend that you get the basics
01:12 - first by watching my beginners playlist
01:14 - I have a couple of them and I'll list
01:16 - them on the screen right now now just
01:18 - before we get started there's one more
01:20 - thing that I want you to do and that is
01:21 - to give this video a big thumbs up and
01:23 - to hit subscribe if you haven't already
01:24 - because that really helps support the
01:27 - channel and helps encourage me to keep
01:28 - going alright with that said let's dive
01:30 - in so we're going to start by creating a
01:33 - brand new Xcode project so go ahead and
01:35 - start a new single view application
01:38 - under iOS and we're going to call this
01:41 - well whatever you want I'm gonna call
01:43 - this custom login demo and the important
01:50 - thing here is to set your language the
01:53 - Swift and we're not using Swift UI so
01:55 - don't check that and the rest of it are
01:57 - also unchecked now if you haven't set
02:00 - this up before for your organization
02:02 - name and identifiers you can follow what
02:05 - I've got here except substituting
02:06 - obviously your own name or your company
02:08 - name and together with your product name
02:11 - you're going to have
02:11 - this bundle identifier here and we're
02:14 - gonna then go ahead save it wherever you
02:16 - want I'm going to save this on my
02:17 - desktop now for the first thing we're
02:20 - going to do is to organize our files a
02:22 - little bit and to also create some of
02:24 - the classes we're going to need so in
02:26 - the demo in the beginning of this video
02:28 - you saw that we had a sign up button and
02:31 - a login button for our first screen and
02:34 - clicking those buttons will lead to two
02:36 - different forms a signup form and a
02:38 - login form and once the user has signed
02:41 - up or logged in we also bring them to
02:44 - the home screen so what we've got here
02:46 - we've got a viewcontroller.swift this
02:49 - one is going to be that first screen
02:51 - where we have the sign up button and
02:53 - login button we're going to create a
02:55 - couple of more view controllers to
02:57 - represent the signup form in the login
02:59 - form and then that home screen that they
03:02 - see once they've logged in so go ahead
03:04 - click new file and we're gonna choose
03:07 - cocoa touch class because these are
03:08 - going to be subclasses of
03:10 - uiviewcontroller just like how this view
03:13 - controller that comes with a default
03:14 - project is as well I'm going to call
03:17 - this the sign up view controller that's
03:19 - going to control our signup form and
03:23 - then I'm going to create another one and
03:27 - I'm going to call this the login view
03:31 - controller and then I'm going to create
03:35 - a third subclass of uiviewcontroller
03:39 - called the home view controller and this
03:41 - one's going to be the one that they see
03:43 - after they sign up or login alright so
03:47 - now let's organize it a little bit by
03:50 - creating a new group we're gonna call
03:52 - this a few controllers and we can put in
03:56 - that guy put in these as well okay so we
04:01 - have that and let's set up some of our
04:07 - user interface in the main dot
04:09 - storyboard so this is the one that's
04:12 - going to be showing our sign up button
04:15 - and login button and having that moving
04:18 - background and that's just a stylistic
04:19 - element so we're not going to start with
04:21 - that we can always add that video
04:23 - background or static background at the
04:25 - end so what we're going to do as a first
04:27 - step is actually embed this root view
04:30 - controller in a navigation controller
04:31 - and this is going to allow us to click
04:34 - on a button and go to another view
04:36 - controller which is what we want when
04:38 - the user taps on the signup button or
04:39 - the login button so go ahead and select
04:42 - this guy hit this button here and embed
04:45 - in navigation controller that's going to
04:48 - give you a navigation controller like
04:50 - that and this one indicates that this is
04:52 - the root view controller the first thing
04:55 - I'm going to do is highlight our
04:57 - navigation controller and right here I'm
05:01 - going to get rid of shows navigation bar
05:04 - and that's going to hide the navigation
05:06 - bar in all of its child view controllers
05:08 - so we don't see that bar at the top next
05:13 - I'm going to open up the object library
05:14 - you can press command shift L or you
05:16 - could click this plus button up here to
05:18 - add new elements to the storyboard I'm
05:22 - going to choose view controller this is
05:24 - going to be our signup one let's do it
05:27 - again
05:27 - and this is going to be our login form
05:31 - and then I'm going to add another one
05:34 - here this is going to be our home screen
05:36 - so now let's go ahead and set these
05:38 - custom types to the view controller
05:42 - classes that we've created on this side
05:46 - so let's highlight this one first and
05:48 - set the custom class for this guy as
05:51 - home view controller I just want to say
05:53 - one more thing if this is all confusing
05:56 - to you and you don't really know what
05:58 - I'm talking about
05:59 - I highly urge you to go through my
06:01 - beginner series at first because that's
06:04 - really going to set you up and give you
06:06 - all of the necessary skills and
06:07 - terminology to be able to follow this
06:09 - tutorial so again you can find that in
06:11 - the description or in the beginning of
06:13 - the video I link to it on the screen as
06:15 - well
06:16 - okay now let's set the custom class for
06:18 - this guy right here this is going to be
06:20 - our sign up view controller this is
06:24 - going to be our login view controller
06:26 - and now let's add some buttons to this
06:31 - first view controller here all right so
06:34 - there's going to be a sign-up button and
06:36 - a login button and
06:37 - both going to be grouped on top of each
06:39 - other and near the bottom of the screen
06:40 - so this would be a perfect chance to
06:42 - actually use the vertical stack view
06:46 - alright so I'm gonna add a stack view
06:48 - here I'm gonna put some constraints on
06:51 - the stack II so it sticks to the bottom
06:53 - of the screen so with the stack view
06:55 - highlighted click on adding constraints
06:56 - and I'm just going to add the left right
06:59 - and bottom and I set these all to 40 all
07:04 - right and then we're gonna put some
07:05 - buttons in here too to be exact so let's
07:07 - open up the object library again to add
07:11 - a button in there it's out a second
07:14 - button this time I'm going to drag it
07:16 - into the document outline if you don't
07:19 - see this there's a button little little
07:21 - down here okay so clicking the stack
07:26 - view here let's set the spacing to 20
07:29 - and we're also going to change the
07:32 - height of these buttons just so they're
07:34 - a little more tappa Bowl
07:35 - I'm gonna actually set an explicit
07:38 - height for this guy to 40 so that's
07:42 - going to be the first button and then
07:44 - I'm going to add a constraint to make
07:46 - the second button to be equal Heights to
07:48 - the first button so an easy way to do
07:50 - that is to click this button hold down
07:53 - control drag a line to the first button
07:55 - let go and just choose equal Heights and
08:00 - now both buttons will be equal Heights
08:02 - so again this first one I'm going to
08:04 - change the text here this is going to be
08:06 - signed up and this bottom one is going
08:09 - to be log in okay cool now let's add the
08:17 - form for signing up and again we're
08:20 - going to use a vertical stack view so
08:23 - let's add that to the screen but this
08:24 - time I'm going to align it to the top so
08:27 - add constraints left right in top and I
08:31 - am going to do 40 as well so that we can
08:35 - have some consistency here and let's add
08:38 - some text fields now there are going to
08:40 - be four text fields even though in
08:43 - firebase authentication you really only
08:46 - need email and password if you're
08:48 - working with password authentication
08:50 - we're also going to have first name and
08:52 - last name and just to demonstrate how
08:54 - you can save additional information for
08:57 - the user on the firestore side of things
09:00 - so I'll show you how to link up those
09:02 - two pieces of information to a single
09:04 - user so let's add four text fields here
09:07 - that's number one
09:10 - that's here just that's fact number two
09:14 - just number three and there's number
09:18 - four and I'm also gonna add a button in
09:23 - that stack view at the bottom and this
09:26 - is going to be a button they tap on
09:27 - after they fill in all of the fields and
09:30 - I'm also going to add a label underneath
09:32 - the button for any error messages that
09:35 - we need to display in case there's
09:37 - something a reason they can't sign up or
09:39 - something like that for this label I'm
09:41 - gonna Center align it I'm going to
09:43 - change the color to red and then for
09:48 - this button I'm gonna change the label
09:52 - to sign up and then for the stack view
09:54 - I'm going to change the spacing to 20
09:57 - and just to maintain consistency with
10:00 - what we've done for the button Heights
10:02 - back here I'm gonna do the same thing
10:07 - here so for this signup button I'm going
10:10 - to set it to have a height of 40 and
10:15 - then I'm going to make all of these text
10:18 - fields conform to the same height as the
10:21 - signup button so since there are so many
10:24 - different text fields you could do the
10:26 - click and drag method but also another
10:28 - easier way is just highlight them all
10:30 - like that and just then click add new
10:34 - constraints and say that they all have
10:36 - equal Heights so that's gonna add four
10:39 - constraints and just make everything
10:41 - equal all right so that's error label we
10:45 - can say that that it's an error and I'm
10:49 - actually going to change the Alpha to
10:51 - zero at first you know what I'm gonna
10:55 - leave it as full opacity right now so
10:58 - that you can actually see it and then
10:59 - programmatically we will set it to be
11:01 - invisible
11:02 - before the user even sees the form but
11:05 - to make it invisible now just makes it
11:07 - kind of hard for people to realize that
11:09 - there's a label here when they're
11:10 - looking at the project so that's one tip
11:12 - for you if you're working on on a team
11:14 - that's something that you want to keep
11:16 - in mind now for the text fields you can
11:19 - actually set some placeholder text so I
11:21 - definitely want to do that that's going
11:26 - to set some text in there without having
11:28 - to put labels beside the text field so
11:31 - it's a nice way to tell people what
11:32 - you're expecting them to type in these
11:35 - elements password now for the password
11:38 - text field
11:39 - if you check secure text entry it's
11:41 - going to kind of mask out what the user
11:44 - is typing but for this demo I definitely
11:48 - want to show you the password that I'm
11:49 - signing out with so that when I log in
11:52 - you can see that I'm using the same
11:53 - password and then after the fact that we
11:56 - can enable secure text entry to mask the
11:58 - password at the very end so that's the
12:01 - signup form let's do the login form as
12:03 - well again we're going to use vertical
12:06 - stack view let's just drag it into there
12:08 - and I'm gonna align it to the top again
12:10 - so left right top right 40 40 and 40 and
12:17 - this form is actually a little simpler
12:20 - less text fields so let's put that in
12:24 - there put another one in there and then
12:29 - we're going to put a button I'm going to
12:35 - put a label for the error if there is
12:37 - any now one thing you want to make sure
12:39 - is when you close the stack view that
12:41 - all of the elements are actually inside
12:43 - the stack view so you want to try and do
12:45 - the same thing for the signup form as
12:47 - well all right so for the label I'm
12:50 - going to Center a line I'm going to make
12:53 - the color red I say error for the button
12:58 - I'm going to say a login and then just
13:03 - like before I'm going to set the button
13:05 - height to 40
13:09 - and then I'm gonna highlight all three
13:12 - elements and say that all of them need
13:14 - to have equal Heights and for this stack
13:18 - view let's change the spacing to 20 so
13:21 - there's some space alright so the next
13:26 - thing we want to do well actually one
13:29 - more thing before we go to the next step
13:31 - and that is just to add a label on the
13:34 - home screen just so there's something to
13:36 - see to indicate that they've made it and
13:39 - so that we can prove our demo works
13:41 - let's horizontally and vertically Center
13:44 - that in the container and I'm just gonna
13:45 - change that text to welcome and let's
13:51 - just choose a bolder font so it stands
13:54 - out a little bit alright you know
14:00 - actually before we hook up these
14:01 - elements let's let's create some
14:03 - connections so from the sign up button
14:06 - if we want to go to the sign up view
14:09 - controller we can very easily just
14:11 - create a segue because we've we have
14:15 - this navigation controller here it's
14:18 - going to handle that transition so in
14:20 - this storyboard right now we just have
14:22 - to make sure that we create a connection
14:24 - from the button tab to say that we want
14:27 - to go to that view controller so for
14:29 - this signup button or you could even do
14:31 - it in a document outline right here
14:33 - under the regular view controller this
14:35 - is our route home view controller so
14:38 - hold down control click on this guy and
14:40 - just drag your way to the sign up view
14:42 - controller and out pops this little
14:45 - dialog you want to choose show and
14:47 - that's going to create this segue here
14:50 - to transition there so now when you tap
14:52 - on the signup button it's going to bring
14:54 - you there let's do the same thing for
14:56 - the login button click control hold down
14:59 - control I mean and drag it to the login
15:00 - view controller now choose show and
15:03 - that's going to create a connection just
15:05 - like that we're not going to do it for
15:08 - the home view controller because we're
15:11 - going to do it programmatically so that
15:13 - when the user signs up successfully or
15:16 - logs in successfully programmatically we
15:19 - are going to change the root view
15:20 - controller to be the home view
15:22 - controller
15:22 - and that's how we're gonna transition to
15:25 - there the next thing I want to do is
15:28 - expose these elements these text fields
15:31 - and the error label and the sign up
15:33 - button expose it to the code so that we
15:36 - can reference these elements that we can
15:38 - style them and then we can also handle
15:40 - button taps and we can validate the form
15:42 - and all those sorts of things so we're
15:44 - going to go up here and go into editor
15:46 - and assistant if you're using Xcode 10
15:49 - there's going to be a button here saying
15:51 - assistant editor so that's also a way to
15:54 - do it but next go 11 they seem to not
15:58 - have that button there so you can click
16:00 - on editor or an assistant from the menu
16:02 - and then you can choose right here I
16:05 - would choose the login or sorry the sign
16:08 - up view controller on the right hand
16:10 - side you should be seeing sign up view
16:14 - controller if not for this bread crumb
16:17 - okay so if automatic doesn't work let's
16:21 - just double check let's just choose try
16:24 - to click something else here I think it
16:29 - can be a little bit buggy oh I know I
16:33 - know what what we forgot to do sorry
16:35 - about that let's just go back to editor
16:37 - only there's one thing that I forgot to
16:39 - do and that is that I forgot to say that
16:43 - what we're configuring here is actually
16:47 - a hmm
16:52 - no the custom closet is a sign of
16:55 - viewcontroller little bit confused let's
17:01 - try that again
17:03 - that might be a little bit of a bug or
17:07 - something like that
17:40 - well you know what I'm going to do I'm
17:42 - going to close Xcode and let's try to
17:46 - reopen our project and now let's see if
17:54 - it works a little better because we are
17:58 - working with a beta here so we might be
18:02 - experiencing some bugs so let's choose
18:03 - editor and assistant again and we're
18:06 - going to go into the main dot storyboard
18:08 - looks like I've lost my assistant let's
18:10 - just do that and now when I go to sign
18:18 - up view controller
18:25 - there we go so that's what I would try
18:35 - so in restarting Xcode I was able to see
18:40 - sign up viewcontroller.swift now under
18:42 - automatic so I might have been doing
18:44 - something wrong or it might have just
18:46 - been a bug in Xcode I'm not sure but in
18:48 - any case we're good now because what we
18:52 - wanted to do was to hook up these
18:55 - elements and expose them to sign up view
18:57 - controller so on the left hand side I'm
18:59 - looking at my elements in the sign up
19:01 - view controller UI and then in here on
19:04 - the right hand side I'm looking at my
19:05 - sign up view controller class so here
19:08 - I'm going to hook up all of these
19:09 - elements so this is going to be a little
19:11 - bit tedious first name text field last
19:22 - name text field now if you make it typo
19:25 - here or an error
19:26 - don't just erase it if you erase it you
19:29 - also have to correct the connection so
19:32 - you have to right-click your element and
19:34 - kill the kill this connection and then
19:37 - you can try to reconnect it again if you
19:41 - don't do that it's still going to be
19:42 - connected to the old property which
19:44 - actually doesn't exist because you
19:46 - changed the name of it so this will be
19:50 - email text field this will be password
19:53 - text field okay this is going to be our
20:00 - signup button and this is going to be
20:05 - our error label alright so now we have
20:10 - references to all of those elements in
20:12 - the signup form but we also need to
20:15 - handle the signup button tap so down
20:18 - here where we're going to write our
20:19 - methods
20:20 - let's connect an IB action method so the
20:24 - connection type this time is going to be
20:26 - action and this one is going to be sign
20:28 - up tapped alright and let's do the same
20:34 - thing for our login form so clicking an
20:36 - element in the login form the right-hand
20:39 - side should
20:39 - change to login view controller about
20:40 - Swift let's took some of these elements
20:43 - up so this first one is going to be
20:46 - first name text field this one's going
20:53 - to be last name text field and if you
21:00 - are a beginner sometimes you might
21:01 - actually connect it let me just show you
21:06 - again so if you're connecting a text
21:08 - field instead of specifying it on a new
21:11 - line you might have accidentally
21:12 - connected it to the same property in
21:14 - that case you have two elements
21:16 - connected to that and that would be not
21:19 - a good thing to have so just just wanted
21:22 - to point that out to you in case you
21:23 - accidentally do that as well and the way
21:25 - you can see in case is if you
21:28 - right-click these elements they should
21:30 - only be connected to one property there
21:32 - okay so let's do that with a button as
21:34 - well login button and then this is the
21:39 - error label alright just like in the
21:47 - signup form we want to handle the button
21:48 - tap of the login button so down here
21:51 - where we declared methods let's drag in
21:54 - a login button holding ctrl let's make
21:57 - sure a connection is action and then
21:59 - let's say login tapped so in here we put
22:02 - the code to run when the login button is
22:05 - tapped now let's do some form styling
22:08 - while we're here so let me just go back
22:11 - to the single editor now when I had
22:21 - created this demo the completed version
22:23 - before shooting this recording I had
22:26 - actually moved all of the styling code
22:28 - into a utilities file which I'm just
22:32 - going to add to this project because the
22:34 - focus of this recording in this video is
22:36 - to show firebase authentication and how
22:39 - to build a custom login form for it so I
22:41 - don't want to spend a lot of time
22:43 - talking about styling these elements so
22:45 - all I'm going to do is I'm going to take
22:47 - that file with all of my styling methods
22:50 - I'll gloss over it for you and then I'll
22:52 - show you them
22:53 - in action and I'll make it available for
22:54 - you to download as well so you can use
22:56 - the same ones so here we're looking at
22:59 - the completed version of my demo project
23:02 - and like I told you I have this
23:03 - utilities file it's actually a class and
23:06 - it's got a bunch of static methods so
23:08 - that we can call those type methods on
23:12 - the utilities class without actually
23:14 - having to create a utilities object and
23:17 - then I have methods like style text
23:19 - field where you pass in a text field and
23:20 - it just styles it according to what you
23:23 - saw in the demo so this one's gonna be
23:24 - like a single line text field this one's
23:27 - gonna be a filled button this one's four
23:28 - buttons right and this one's gonna be a
23:30 - hollow button and then I have another
23:31 - one here for actually form validation
23:33 - which we will get to later on in this
23:36 - recording now ideally I think what you
23:40 - want to do if you're going to be
23:41 - expecting to work with more forms and
23:43 - you have more validation that you want
23:46 - to do on forms you would separate this
23:48 - out but I just put it all into this
23:50 - utilities file as a demo but you should
23:54 - probably put this in its own like form
23:56 - utilities classes so that you can you
23:59 - know just move that to a different
24:01 - project if you only want the form
24:02 - utilities and these ones would be the
24:05 - styling ones and I think from app to app
24:07 - styling is a very app specific thing but
24:10 - in the case of this demo I've been
24:14 - talking too much okay so all I'm gonna
24:16 - do is show in finder here and I'm going
24:20 - to drag this file into our project and I
24:24 - want copy items if needed and I want to
24:27 - make sure that it's added to this target
24:28 - now same thing as in this project I'm
24:31 - gonna create a new group called helpers
24:38 - I'm just going to move this down here
24:40 - and move my utilities file into there
24:42 - and in the sign up view controller let's
24:46 - go back to single editor only and in the
24:51 - viewdidload I'm gonna create a method
24:53 - set up elements
24:59 - and this is going to be a new function
25:06 - and here we're going to hide that error
25:09 - label remember I told you error label
25:15 - it's not o type this wrong of 0 I can't
25:22 - put it and furthermore we're going to
25:26 - style our text field so we've got first
25:28 - name last name email password and the
25:30 - signup button as well so I'm gonna say
25:34 - utilities dot style text field and we're
25:41 - gonna pass in first name text field now
25:45 - Xcode is not helping me out here with
25:47 - the autocomplete
25:49 - so there's definitely alright and so now
25:56 - it recognizes that build succeeded use
25:59 - of Unruh okay it still doesn't so
26:04 - alright so style text field and I just
26:07 - pass in the text field but right now I
26:11 - spelled this wrong I think my
26:18 - autocomplete is broken I think Xcode is
26:20 - a little bit broken now let me just try
26:23 - to restart Xcode again might be just the
26:29 - beta being a beta
26:36 - all right so now it recognizes it so if
26:39 - that ever happens to you restart Xcode
26:42 - that usually solves a lot of problem
26:44 - which is kind of bad for oops
26:48 - I pressed page though which is kind of
26:50 - bad for Xcode right such a bad rap on
26:54 - the quality of the software all right so
27:01 - I'm just styling the text field and then
27:04 - we have the button as well filled button
27:08 - I'm going to pass in the signup button
27:11 - so as I say these are style the elements
27:18 - hide the error label so let's do that
27:26 - also with the login form the set up
27:31 - elements now hide the error label all
27:48 - the elements this time we don't have as
27:51 - many to do utilities thought the style
27:54 - text field first name text field until
27:58 - ities thought style text field loss in
28:02 - text field and utilities thought style
28:06 - filled button now I decided as we were
28:11 - typing this that I don't think we need
28:13 - line breaks on all of these because it's
28:17 - pretty clear what that does and that's
28:20 - fine now in the view controller and do
28:23 - the same thing because in this view
28:27 - controller we have two buttons the
28:29 - signup button and the login button
28:32 - [Applause]
28:40 - so ah we don't actually have IB outlets
28:43 - for this guy so why don't we go back to
28:47 - the main storyboard we didn't hook up
28:51 - those elements to reference them these
28:53 - two because all we did was we hooked
28:55 - them up to segues that would go to those
28:58 - view controllers but we didn't actually
28:59 - expose them to view controller at Swift
29:01 - so let's go into editor and assistant on
29:05 - the right hand side you should be
29:07 - looking at the view controller class and
29:10 - let's this is the signup button and this
29:18 - is the login button alright so now let's
29:22 - go back to a single editor and let's go
29:25 - to view controller and then we can call
29:30 - sign a button and for the login one I'm
29:35 - gonna do a holo style button so let's
29:39 - try this out
29:40 - now I think we're ready to run our
29:42 - project and just see how it looks so
29:44 - right here I've got this emulator
29:47 - running and these buttons looked a
29:50 - little squished to me based on the
29:52 - radius that I've specified so I'm
29:55 - actually gonna change those from 40 to
29:57 - 50 so that's my first thing that I
29:59 - notice click on sign up so here are the
30:02 - text fields and there's the signup
30:05 - button the second thing I notice is that
30:07 - we can't go back so that's something
30:11 - that we're gonna have to add a little
30:12 - later let me just run this project again
30:15 - click on login yeah so same deal here
30:19 - and squashed button and can't go back so
30:22 - why don't we just fix up some of these
30:24 - issues there's some of the easier ones
30:28 - oh I'm looking at the wrong one alright
30:35 - so the sign up button is the one with
30:38 - the height constraint so I'm gonna
30:40 - change this from 40 to 50 right and
30:44 - automatically the login button also
30:47 - follows suit because we have a
30:49 - strain to make them all equal heights
30:50 - same thing is going to happen for this
30:53 - signup form all I need to do is change
30:55 - the height of the signup button from 40
30:59 - to 50 and that's automatically going to
31:02 - adjust the rest of the text fields same
31:05 - thing here
31:05 - this Login button constraint height of
31:09 - 40 let's change that to 50 and now let's
31:12 - run our project it should look a lot
31:14 - better alright so those that's what I
31:19 - expect signup alright cool so I can say
31:23 - that our UI is ready now we're going to
31:27 - actually work on the firebase side of
31:29 - things so don't close your Xcode project
31:31 - just yet instead go to your browser
31:34 - visit firebase google comm if you're
31:37 - already signed in you've got a firebase
31:38 - account you're gonna see go to console
31:40 - in the upper right hand corner if not
31:42 - you'll be asked to either sign in with
31:44 - your Google account or create a new one
31:46 - so I'm just gonna click on go to console
31:49 - and I'm gonna see all of my firebase
31:52 - back-end instances we're gonna need to
31:55 - create a new one for this demo app so
31:58 - let's create a brand new firebase
32:00 - project by creating a project it's going
32:02 - to give us access to the authentication
32:06 - store the firestore database we have
32:10 - stuff like cloud functions and bunch of
32:11 - other things that we can use for our app
32:14 - now you're going to see maybe if you've
32:16 - worked with it a lot you're gonna see
32:18 - that there's a is a project limit but
32:20 - this is easily liftable you just have to
32:23 - justify the reason I got this lifted for
32:25 - my other account I just said I needed to
32:27 - create more demos so that was fine I'm
32:29 - sure if you get to a point where you're
32:32 - exhausted the free tier and your app is
32:34 - doing really well and you need you know
32:36 - more projects that they're not going to
32:38 - hesitate so I'm gonna call this the
32:41 - custom login demo and you're going to
32:47 - want to probably read this stuff in a
32:51 - little more detail for me for this demo
32:53 - I'm just going to accept everything but
32:57 - if if you're creating this F for
33:00 - production and
33:01 - certain restrictions and rules where you
33:03 - live and where this app is going to be
33:04 - sold then you're going to want to pay
33:06 - attention to how they work with the data
33:08 - here
33:08 - all right so project is ready let's hit
33:12 - continue and you can see here we have a
33:16 - authentication database storage this is
33:19 - file storage hosting for websites and
33:22 - stuff like that
33:23 - cloud functions and ml kit machine
33:26 - learning this is still in beta if I
33:29 - remember correctly so I haven't looked
33:32 - into this indefinitely but I usually
33:35 - don't like to dabble in beta stuff but
33:41 - swift UI is an exception because I just
33:44 - wanted to play with it anyway so we're
33:46 - getting off track so we've created our
33:48 - firebase backend for our custom login
33:52 - demo now what we have to do is add the
33:55 - firebase libraries to our Xcode project
33:57 - so that I can communicate with this
33:59 - firebase backend so I've actually shown
34:01 - you guys how to do this in my previous
34:04 - tutorials and also in some of my courses
34:06 - if this is not new to you feel free to
34:09 - skip ahead but if you've never done this
34:11 - before then continue watching because
34:12 - I'll show you how to do it step by step
34:15 - most of the viewers to my channel are
34:17 - actually brand new so I'm gonna want to
34:20 - make this the most comprehensive
34:21 - tutorial that I can so right here what
34:25 - we're going to do is click I oh s to get
34:27 - started it's going to launch a wizard
34:29 - for us to integrate and add those
34:31 - firebase libraries to our Xcode project
34:33 - so let's go ahead and click that the
34:36 - first piece of information we need is
34:37 - the bundle ID and you can get that here
34:39 - in your Xcode project just taking that
34:43 - and this has to match what you're
34:46 - putting here or else it's not gonna work
34:48 - so let's register our app for this
34:51 - firebase back-end and then it's going to
34:54 - generate this configuration file for us
34:56 - to add to Xcode and this file contains
34:59 - all of the the endpoint data and a
35:03 - configuration data for our project to
35:05 - hit this firebase backend I'm just going
35:07 - to save it in my desktop for now and
35:09 - then wherever you save it you want to
35:13 - drag it in
35:14 - to Xcode that file that you just
35:16 - downloaded when you drag it it's going
35:18 - to show you this dialog I want you to
35:21 - make sure you have this enabled and add
35:25 - two targets is also enabled this is
35:28 - going to copy it from wherever you save
35:30 - that file and make a copy of it inside
35:32 - your project folder so click on finish
35:35 - now you can delete it from wherever you
35:37 - saved it for me it was the desktop
35:39 - because it's already referencing the
35:42 - version it copied into the project ok
35:46 - let's click Next and then now we're
35:49 - going to use something called cocoa pods
35:50 - to download and install those firebase
35:53 - libraries into our Xcode project again
35:56 - this is something that I've showed a lot
35:57 - of in my previous tutorials feel free to
36:00 - skip ahead if you've done this before if
36:02 - you haven't then you want to make sure
36:03 - you've got cocoa pods installed on your
36:05 - system first you might have done that
36:07 - before in a previous tutorial or
36:08 - previous project if you have then you're
36:10 - good to go
36:11 - if you haven't got cocoa pods installed
36:13 - I've actually have a video showing you
36:15 - how to install it on your system and it
36:17 - basically helps you manage all your
36:19 - third-party libraries for your project
36:21 - so go ahead and click in that corner for
36:24 - the video on how to install cocoa pods
36:26 - if you're already ready to go then let's
36:30 - continue with these instructions here so
36:32 - first of all we want to open up terminal
36:34 - and we want to navigate to the folder of
36:39 - our project so I saved mine on the
36:41 - desktop and I called it a custom login
36:45 - demo alright so this is my project
36:48 - folder right here and then I'm going to
36:50 - type in pod in it so what that's going
36:52 - to do is it's going to create a pod file
36:55 - in your project folder and here it is
36:57 - you're going to want to now open up that
37:00 - pod file in your text editor so for me
37:02 - I'm using sublime text and underneath
37:05 - here you're going to be putting all of
37:07 - the third-party libraries that you're
37:09 - going to use right here in the
37:13 - instructions it says to include the
37:15 - firebase Analytics pod so click this
37:17 - button to copy that and then paste it in
37:20 - there but I know from experience if you
37:23 - want to use firebase authentication you
37:25 - also have to use that pod as well
37:27 - and it doesn't list that here because it
37:30 - doesn't know which parts of the firebase
37:32 - back end you're going to use if we take
37:35 - a look at the documentation so in this
37:37 - separate tab I'll show you how to
37:38 - navigate to the documentation click on
37:40 - Doc's click on get started for iOS and
37:44 - then on the left hand side you should
37:45 - see authentication click that and then
37:48 - go under iOS and go under password
37:52 - authentication so password
37:54 - authentication is logging in with email
37:56 - password which is what I'm showing you
37:58 - how to do today so here it tells you to
38:02 - add this pod right so we're just gonna
38:04 - do that now click the copy and that's
38:07 - going to save us a step from having to
38:10 - add it later
38:10 - let's save the text file and then go
38:13 - back to terminal and now here let me
38:16 - just go back to the instructions so we
38:17 - can have that as well and now we type
38:20 - pod install and that's going to go out
38:23 - and attach all the libraries that we
38:24 - need and it's going to install it and
38:27 - add it to our project however this
38:30 - project doesn't actually contain the
38:32 - pods anymore let's close this project
38:34 - what happened here is that it's
38:38 - downloaded all the third-party libraries
38:40 - here and it's created a new workspace
38:42 - file for you which includes your
38:45 - original project plus all the
38:47 - third-party libraries so now from this
38:50 - point on you want to open up the XC
38:52 - workspace file let me open that guy up
38:55 - you're gonna see that you have your
38:57 - project and you have your pods your paws
38:59 - are going to contain the firebase
39:01 - libraries at this point
39:03 - so press command B to build your project
39:05 - just to make sure it still runs and
39:08 - while that's happening let's click on
39:10 - next and now it's telling us to add some
39:12 - initialization code and this code goes
39:15 - in the app delegate right when your app
39:18 - is launched it's going to try to connect
39:22 - to the firebase backend so the two lines
39:25 - of code you have to add is import
39:27 - firebase to tell Xcode that you want to
39:29 - use the firebase classes in this file
39:30 - and then you'll want to call the
39:32 - configure method of firebase app so in
39:36 - our project the build has succeeded
39:37 - nothing's broken
39:39 - that should be the same case for you as
39:41 - well inside the custom log in demo
39:44 - project or whatever you call yours let's
39:46 - open up the app delegate and at the top
39:51 - import firebase and then in the
39:56 - application did finish launching with
39:58 - options see that's the same method here
40:01 - we're gonna want to add this line so
40:03 - let's just copy that and we're gonna
40:05 - want to paste it right here before the
40:07 - return statement because nothing's going
40:09 - to be running after that now let's press
40:12 - command R and run this project as soon
40:15 - as it is run it's going to ping the
40:18 - firebase backend and try to make a
40:21 - connection so we see our user interface
40:24 - in here the debug area you're gonna see
40:27 - a bunch of debug information some of it
40:30 - might look concerning but don't be
40:32 - alarmed back here let's click Next and
40:35 - it's going to check if your app has
40:38 - communicated with the firebase servers
40:40 - just to verify that your installation
40:43 - has been done properly now sometimes
40:46 - this takes a minute sometimes this takes
40:47 - two sometimes what I do is I just stop
40:51 - the project and I run it again just to
40:53 - make sure it pings the servers and there
40:57 - we go we've gotten that let's continue
40:59 - to the console now okay so now we are
41:03 - back in the console now we've actually
41:05 - established a you know we've we've added
41:09 - the firebase libraries to our Xcode
41:11 - project and we are ready to work with
41:14 - authentication and the firestore
41:16 - database first let's enable email and
41:18 - password sign-in in the authentication
41:21 - part so we haven't set up any sign-in
41:23 - methods click on setup sign-in method
41:26 - everything is abled right now click on
41:29 - this edit button and enable email and
41:32 - password authentication click Save and
41:35 - then click on users and you're going to
41:37 - see nothing here if you click add user
41:39 - you'll see that you can add an email and
41:42 - a password for a user so I'm just going
41:43 - to add a test account test at T com
41:48 - and I'm just going to type whatever for
41:50 - the password I think
41:52 - I'll add some symbols and letters and
41:55 - numbers and capitals so here you go
41:58 - that's the identifier as in the email
42:01 - that we typed in if you try to create
42:03 - another user with the same identifier or
42:05 - same email it's going to fail this user
42:08 - ID isn't the password it's an internal
42:10 - ID generated by the system and this is
42:14 - what we are going to connect any
42:18 - information we store in the database
42:20 - about the user we're going to link it
42:22 - back to this particular user through the
42:24 - user ID because in this authentication
42:27 - store you are only storing the usernames
42:29 - sorry
42:30 - not user names but emails you're only
42:32 - storing the emails and passwords in this
42:33 - authentication story and in the database
42:36 - side where we can store additional
42:39 - information and we can link it with the
42:40 - UID let's create our firestore database
42:43 - so click on create database under fire
42:46 - store I'm going to start in test mode
42:49 - just now that we are just trying to test
42:54 - things this is going to allow anyone
42:56 - with the database reference to read or
42:58 - write to the database which is not good
43:00 - before we go into production we should
43:03 - make sure that we lock it down and only
43:06 - allow authenticated users to access that
43:09 - so I'm going to start in test mode this
43:12 - is choosing the location where your far
43:14 - store data will be stored it it sounds
43:18 - very um very alarming it says you cannot
43:22 - change this later
43:23 - so you can learn more about it but what
43:26 - I would suggest is just if this app is
43:29 - going to be used in a very specific
43:30 - location choose a data center that's
43:32 - closest to that location but other than
43:35 - that I don't think there is a you know
43:38 - at least not that I'm aware of a big
43:41 - difference between what you're choosing
43:43 - right so I would choose just by default
43:45 - choose a location that is close to where
43:47 - you are and click done if you know
43:51 - otherwise let me know in the comment
43:53 - section below
43:58 - all right so now we have our fire store
44:00 - database it works in a series of
44:03 - collections and each collection has
44:05 - documents now I'm not going to dive
44:07 - really deep into fire store in this
44:09 - lesson in this video because this is our
44:12 - firebase authentication series there's a
44:14 - separate series for fire store which
44:16 - I'll get deeper into for now because I
44:18 - want to store the first name and last
44:20 - name of the user I'm gonna start a new
44:22 - collection I'm gonna call this users
44:24 - yeah there we go
44:26 - that's exactly our use case right there
44:28 - it would contain a unique document for
44:31 - each user so let's create that
44:32 - collection right here it's telling me to
44:37 - add a first document and you know this
44:41 - might be a good exercise for you just to
44:42 - play around with so let's click an
44:44 - auto-generated ID you know it'd be
44:46 - something like it depends how you want
44:50 - to structure it right so you can just do
44:51 - first name like that let me save it and
45:01 - you can see what that looks like about
45:04 - when we sign up a user essentially what
45:06 - we're going to do is we're going to
45:08 - create a brand new user in the
45:09 - authentication store back here and then
45:13 - we're gonna take that user UID and we
45:16 - are going to create a document for that
45:18 - UID here with the first name and last
45:21 - name this would be the UID instead of
45:24 - this auto-generated ID so this is just
45:26 - the test document for fun so now that we
45:29 - have the authentication store set up we
45:30 - have our firestore database setup and
45:33 - we've put in the firebase libraries into
45:36 - our Xcode project and establish that
45:38 - communication now it's time finally to
45:41 - hook up our forms to create that user in
45:45 - the authentication store to create that
45:47 - entry in the database and also to allow
45:50 - the user to log in so let's go back here
45:54 - into our Xcode project let's stop the
45:56 - project and do that so the first thing I
45:59 - want to work on is the signup form let
46:03 - me just close to this pond here open
46:06 - these view controllers I want to work on
46:07 - the signup form
46:10 - when the sign-up button is tapped what
46:13 - we want to do is validate the fields and
46:17 - then create the user and then transition
46:26 - to the home screen all right so first
46:30 - things first I'm just going to get rid
46:33 - of this and I'm going to create a new
46:37 - method to validate the fields and this
46:43 - is going to return an optional string so
46:47 - here's the idea
46:48 - of this method check the fields and
46:54 - validate that the data is correct if
47:00 - everything is correct
47:05 - this method returns nil otherwise it
47:09 - returns the error message as a string
47:14 - and then we can just take that error
47:16 - message and put it into our error label
47:17 - and show it all right so I'm gonna
47:20 - return nil at the bottom indicating that
47:23 - everything is fine and then I'm gonna do
47:26 - a series of checks before this statement
47:29 - which would return the error message if
47:32 - the fields were not correct so for
47:35 - example check that all fields are filled
47:40 - in right that could be my first check
47:43 - let's create some space here so I can do
47:46 - that check what we're going to do is
47:48 - just remove all white spaces and new
47:50 - lines from the text field and check if
47:53 - that text field is empty if it is empty
47:55 - then we will return the error message
47:59 - please fill in all the fields so let's
48:01 - say if first name text field dot text
48:06 - I'm going to use optional chaining
48:08 - because that could be nil they could
48:09 - have not filled it in I'm gonna call a
48:11 - method called trimming characters and
48:13 - passing the character character set
48:15 - white spaces and new lines so that's
48:18 - going to take away all of the white
48:20 - spaces and new lines from that text
48:22 - and I'm just gonna check is this equal
48:25 - to empty you know if it is then I am
48:29 - going to want to return you please fill
48:32 - in all fields and so that could be my
48:36 - first sort of validation but I don't
48:39 - just want to check the first name text
48:42 - field right I want to check all of the
48:43 - other ones so we've got we've got last
48:49 - name text field dot txt trimming white
48:54 - characters and new lines so same thing
48:58 - here and then I'm going to also check
49:02 - the email and do that and finally and
49:15 - check the password text field
49:22 - [Applause]
49:24 - all right so if any of those fields are
49:27 - empty I am going to return please fill
49:29 - in all fields next I'm going to check
49:32 - you know if it passes that then it's
49:34 - going to continue down in the method I
49:36 - want to check if the password is secure
49:39 - and this I actually have this method in
49:42 - the utilities if you scroll all the way
49:44 - down is password valid and you pass in a
49:49 - password and then it's going to check it
49:53 - against a certain pattern called a
49:55 - regular expression and it's going to
49:57 - then determine if the password that's
49:59 - passed in meets the criteria as dictated
50:03 - by this regular expression it's going to
50:05 - pass back a boolean
50:06 - there's going to pass back true if it
50:08 - matched if it's fulfills the
50:10 - requirements of the regular expression
50:12 - and it can pass false if it doesn't and
50:14 - it if it passes back false then I'm
50:16 - going to tell the user with an error
50:18 - message please please make sure you have
50:21 - eight characters a special character and
50:24 - as well as a number so I think that's
50:27 - what this regular expression is
50:29 - dictating now if you're unfamiliar with
50:31 - regular expressions it's basically sort
50:34 - of pattern
50:36 - you can specify a pattern such as
50:38 - something that looks like this and in
50:42 - this pattern you can express things like
50:45 - it has to contain at least 8 characters
50:46 - you know a special character a number a
50:50 - capital letter or whatever there are
50:52 - different symbols for what's allowed and
50:56 - how many times you want to allow it and
50:58 - it's you know I for me personally I have
51:03 - a lot of trouble remembering the regular
51:05 - expression syntax because I don't use it
51:06 - often enough so there are online tools
51:09 - out there to help you with this sort of
51:12 - thing that can generate regular
51:13 - expressions for you based on parameters
51:16 - that you want to indicate so if that's
51:19 - you that's something that you can use
51:21 - for this particular function I actually
51:24 - just looked it up so I looked up I
51:26 - actually have the blog post here safe to
51:30 - show you guys so this blog post I found
51:33 - was done in Swift 3 and it's 2 years ago
51:35 - but it's still completely valid and what
51:38 - I liked about this blog post was that it
51:39 - gave different examples of sort of
51:42 - password requirements and then what the
51:45 - regular expression would look like for
51:47 - that requirement and it breaks down the
51:50 - regular expression into exactly what
51:52 - each part means so I'll link to this
51:54 - I'll leave the link to this blog post in
51:57 - the description and I would highly
52:00 - recommend that you go and check it out
52:02 - especially if you have to do more
52:04 - password validation in the future just
52:05 - to make sure that your passwords are
52:08 - secure enough so that's where I got this
52:11 - and that's what I'm using here same
52:14 - thing goes for email format alright
52:16 - there are regular expressions to make
52:18 - sure that the email they enter is in the
52:20 - proper format now I don't have that
52:22 - check right here but that's just a
52:25 - matter of finding the right regular
52:27 - expression to use and then checking the
52:29 - email text field against that so here
52:33 - I'm going to just demonstrate how you
52:34 - would do it for the password so I say
52:38 - you know let
52:40 - clean password equal to password text
52:43 - field dot text and I'm going to force
52:47 - unwrap it because I I know there is a
52:49 - piece of text in there because if there
52:52 - wasn't it would have it would have
52:54 - failed this check here so at this point
52:57 - I know there is a piece of text in there
52:59 - I'm gonna trim white lines and white
53:03 - spaces and new lines so I'm gonna pass
53:05 - this cleaned password into utilities
53:08 - thought is password valid and that's
53:12 - going to return a boolean to me right so
53:15 - if the boolean is false then password
53:23 - isn't secure enough return please make
53:29 - sure your password is at least 8
53:33 - characters contains a special character
53:38 - and a number all right so that's what I
53:45 - got here so far if you create another
53:48 - another method to check email format
53:52 - with a regular expression then you can
53:54 - again add that check here you know or
53:57 - we're here
53:58 - so back in sign up tapped now I can do
54:02 - this I can say let error equals validate
54:06 - fields and then in here I'm gonna check
54:09 - if error is not equal to nil that means
54:15 - there was an error right there was an
54:21 - there there's something the fields show
54:29 - error message now I could very easily
54:31 - just say error label dot text is equal
54:36 - to the error I got for some rapid
54:39 - because it's an optional but and then
54:42 - also make sure that alpha is one so it's
54:45 - visible but I'm actually gonna put this
54:47 - outside in a different method so that I
54:50 - can use it in different
54:51 - says so show error message string and
54:59 - I'm going to move this code in here
55:04 - alright so this would be the message and
55:08 - then here I would simply call show error
55:13 - and pass in the error message all right
55:17 - so that's the case where there is an
55:20 - error with the fields but else there is
55:23 - no error and all the fields are fine
55:25 - then what we want to do is create the
55:26 - user right and transition to the home
55:31 - screen so how do we create the user in
55:33 - the authentication store let's take a
55:35 - look at the documentation create a
55:37 - password based account import firebase
55:41 - firebase app configure so we already did
55:44 - this right it's telling us to do it in
55:45 - app delegate and we've already done that
55:47 - so let's move on and this is the method
55:50 - that we want create user write with
55:52 - passing email and password the thing to
55:55 - know with the firebase documentation is
55:57 - that some of what they have here is
56:00 - outdated um the best way to do this is
56:03 - actually just to take a look at you know
56:06 - sometimes they change the parameters and
56:07 - how they're named but these classes are
56:10 - more or less the same so I would start
56:12 - with auth dot you know getting the auth
56:14 - object off oh actually we can't Xcode
56:21 - doesn't recognize the class in this in
56:25 - the signup view controller because we
56:26 - have an imported firebase authentic is
56:36 - it get the auth object and then we are
56:41 - going to create user with email and
56:43 - password with this completion handler so
56:49 - this callback is basically the code that
56:51 - gets run after the user gets created and
56:54 - we need to implement this completion
56:57 - handler because we need to know if the
56:58 - user was successfully created or not so
57:01 - let's double click this to open up this
57:03 - closure
57:04 - there's two parameters one is the result
57:06 - which is optional and one is an error
57:08 - which is also optional so let me just
57:11 - give these parameters some names result
57:13 - in error I'm just going to call that er
57:17 - are how here we're gonna check for
57:23 - errors so if let e are our error it is
57:28 - error you know if there are no errors
57:33 - then this parameter should be nil but
57:35 - the fact that it comes in here that's
57:37 - what I'm checking to see if it's nil or
57:38 - not if it comes in here that means that
57:40 - there was an error so I'm going to call
57:50 - my show error method and I'm going to
57:52 - pass in you know error creating user and
57:59 - then otherwise if there was no error
58:03 - then I am going to here user was created
58:09 - successfully now store the first name
58:14 - and last name before we do that one
58:16 - thing I want to mention is all right you
58:19 - know use self here be more explicit
58:21 - about what we're calling all right so we
58:27 - can we can do a test like that if the
58:30 - error is not equal to nil then we do
58:33 - that one thing I want to mention to you
58:34 - is that this error actually has a
58:38 - localized description property that
58:43 - contains a string describing the error I
58:45 - don't know if you want to show that to
58:47 - the user you're gonna you're just gonna
58:48 - have to make that decision about how
58:51 - explicit you want the user to know about
58:54 - what the problem is so here user was
58:58 - create a successfully now store the
59:00 - first name and last name so storing a
59:02 - new document in the user's collection is
59:04 - actually very simple not going to go
59:07 - through too much about you know how or
59:10 - why it's done because I want to save
59:12 - that for the firebase tutorial this is
59:13 - going to be focused on authentication so
59:16 - [Applause]
59:19 - basically before we can use the fire
59:24 - store classes we have to import firebase
59:30 - up here so now we can use the fire store
59:34 - classes after importing that and I'm
59:38 - still not getting autocomplete so let me
59:44 - just type it out and see if I can build
59:50 - this successfully so upon further
59:53 - investigation I realized that I had made
59:56 - a pretty silly mistake the reason we
59:58 - couldn't get fire store classes to be
60:01 - recognized was because we hadn't added
60:04 - the fire store pods that we needed
60:06 - initially now this was an oversight on
60:08 - my part we just taking a look at the pod
60:12 - file now initially we only had that
60:15 - right so we only had the pots to work
60:18 - with firebase authentication but what we
60:20 - also needed were these two pods right
60:23 - here so the way I realized this was in
60:25 - going to the documentation under the
60:28 - fire store section and get started
60:30 - because we were in the authentication
60:32 - section before under fire store it tells
60:35 - you that if you look under iOS it tells
60:39 - you that you need these two pods now how
60:41 - do I remember that in this project we
60:43 - were going to use fire store we could
60:45 - have added all four of these pods in the
60:47 - beginning and then just install the pods
60:50 - and that would have been that but
60:52 - because we didn't install these two I
60:53 - had to add it after the fact and the way
60:56 - you can do that is you can just go back
60:58 - to your project folder open up your pod
60:59 - file again I had the two missing pods
61:02 - underneath save the file and then go
61:05 - back to terminal and type in go back to
61:08 - your project directory and type in pod
61:10 - install and it's going to then grab the
61:14 - missing libraries or the new pods that
61:16 - you added and it's going to put it into
61:19 - your project at that point a safe thing
61:21 - to do would just be to close your
61:24 - project reopen the workspace file and
61:26 - just press command B and rebuild the
61:29 - project just to see if everything
61:31 - is running now the state that we had
61:33 - left this in it wouldn't have built
61:37 - because this method hadn't been fully
61:41 - filled out yet because we had to pass in
61:43 - an email in a password as strings so I
61:45 - just put in two empty
61:47 - dummy strings for now just so we can
61:50 - build and compile so I've got it
61:53 - successfully compiling and at the top
61:56 - you need import firebase to recognize
62:00 - the firestore five classes and then down
62:03 - here now we can say let DB equals fire
62:08 - store
62:08 - dot fire store and this is going to
62:10 - return to us the fire store object where
62:13 - we can call all our methods to add the
62:16 - data to the database this constant
62:19 - called DB is just going to keep a
62:22 - reference to that firebase or a fire
62:24 - store object now if we look back at this
62:27 - fire store documentation if you scroll
62:29 - down a little bit let's just walk
62:31 - through some of the starting steps
62:33 - import firebase and firebase app dot
62:36 - configure we did this in the app
62:38 - delegate already this part I just showed
62:41 - you and this is where you're going to
62:43 - get an reference to the fire store
62:46 - object and you want to keep track of it
62:49 - in some sort of variable or constant and
62:52 - this doesn't have to be done in the app
62:53 - delegate dot Swift you can do this where
62:56 - you need it and then for adding data
62:58 - it's pretty straightforward so if you
62:59 - take a look at this you use that fire
63:02 - store reference and then you specify the
63:05 - collection that you want to add a
63:06 - document to in our case it also would be
63:08 - users and then you call the add document
63:11 - method and you pass in a dictionary
63:14 - containing all of the key value pairs
63:17 - that you want to add to that collection
63:19 - so in this document in the sample
63:22 - document they have first last and born
63:25 - we're gonna have first name last name
63:26 - and the UID so that's going to be the
63:29 - app extra user data that we want to
63:32 - compliment the email and password in the
63:35 - authentication store and then this part
63:38 - would be handling any sort of error from
63:41 - trying to add
63:42 - data to the database so let's try this
63:45 - out right here so we've got a reference
63:49 - to our fire store object we would type
63:52 - in DB collection and we would specify
63:55 - users because that's our collection name
64:00 - as well right users and we would add a
64:09 - document so there are two different
64:12 - types one is if I guess you didn't care
64:14 - what the result would be you just want
64:16 - to add a document this one has a
64:19 - completion handler where you can
64:20 - actually check if there was an error or
64:22 - not so that's probably the one you want
64:25 - to use most of the time for the data
64:27 - we're going to pass in just our
64:31 - dictionary so I'm going to specify the
64:33 - key value pairs here so that's just
64:35 - being consistent with what we had here
64:39 - first name all over case like that here
64:43 - I'm gonna put in the yeah I realized we
64:50 - didn't we didn't have a reference to the
64:55 - first name and last name so actually at
64:58 - the very top probably at this point once
65:04 - we've validated all of the fields and
65:06 - checked that they were all okay at this
65:10 - point before creating the user we
65:12 - probably want create cleaned versions of
65:18 - the of the data and what I mean by this
65:22 - is that we strip out all white spaces
65:26 - and new lines from the text fields so
65:32 - text I'm gonna force and wrap that
65:35 - because I know at this point after we've
65:38 - validated the fields there definitely is
65:40 - text in those properties
65:42 - [Applause]
65:44 - so white space and new lines so I'm
65:46 - going to do this for all four fields
65:55 - just so you're not saving data with
65:59 - white spaces and new lines in your
66:03 - database all right and now instead of
66:19 - these empty strings we can pass in email
66:23 - and password so this is from these two
66:28 - right here and then in here we can pass
66:32 - in the first name now a comma separates
66:36 - the next key value pair in the
66:37 - dictionary the last name colon that and
66:43 - we also have the UID so the way we get
66:47 - the UID
66:48 - is actually from this result right here
66:52 - after the create user method is done
66:56 - creating that user in the authentication
66:58 - store it passes back the result any
67:00 - errors come in here and the result comes
67:03 - in here and the user UID that was
67:06 - created for that new entry will be
67:08 - returned here and result so we can get
67:13 - result let's force and wrap that and get
67:19 - the user dot UID
67:23 - all right so for completion let's open
67:26 - up this Handler and the error is an
67:28 - optional okay so if error is not equal
67:38 - no that means there was an error so
67:42 - error message so we'll a self-taught
67:44 - show error message will say
67:53 - user data I couldn't you're gonna have
67:56 - to think of something that's more
67:57 - accurately descriptive of this error
68:00 - because the problem is at this point the
68:03 - user has actually been created in the
68:05 - system so they will be able to log in
68:07 - with an email and password it's just
68:08 - that their first name and last name
68:10 - couldn't be saved on the database side
68:13 - so if this fails I don't know if you'll
68:15 - actually want to show the user an error
68:19 - or if you would just want to capture the
68:23 - first name and last name again or maybe
68:24 - just silently try this again at a later
68:27 - time so there's different ways you can
68:29 - handle this part at least for now
68:33 - I'm just gonna say error to saving user
68:37 - data if there was no error then we don't
68:42 - have to handle that case then
68:43 - everything's fine
68:45 - and you know whether or not the first
68:48 - name and last name could be saved at the
68:51 - end of the day the user account was
68:53 - still created right here user was
68:59 - created successfully in here and so we
69:02 - still want to transition to the home
69:04 - screen at this point alright so in order
69:08 - to transition to the home screen I'm
69:10 - going to do this in a different method
69:13 - let's call this transition to home and
69:17 - I'm going to create this method down
69:19 - here
69:21 - [Applause]
69:26 - so before I fill that in okay let's see
69:30 - yourself here before I fill that in
69:32 - let's just double-check what we've got
69:36 - so we're trying to create the user and
69:38 - then checking for errors and then if
69:40 - there's an error creating the user we
69:42 - show the error if there's no error
69:43 - creating the user then we're gonna try
69:45 - to save the first name and last name by
69:48 - getting a reference to our firestore
69:50 - database adding the data here and then
69:55 - when that returns we check if that was
69:58 - successful or not if it's not successful
70:00 - then we show this air and and then
70:04 - that's it and then we transition to the
70:06 - home screen so I think it that's good
70:09 - for the sign up side alright so let's
70:12 - just talk about transitioning to the
70:13 - home so the way we're going to do that I
70:15 - mentioned before was that we're going to
70:19 - programmatically change the root view
70:22 - controller from whatever it is to the
70:28 - this one this welcome one so in order to
70:32 - do that we need to actually give this
70:34 - guy a storyboard ID and then we're gonna
70:36 - create a new instance of the sky and
70:38 - just swap out the root view controller
70:41 - so I'm gonna call this guy home VC and
70:46 - rather than specify home VC in multiple
70:50 - places we can create a constants file
70:52 - which is a good thing to do because when
70:57 - you build a larger project you're gonna
70:59 - have more and more constants and more
71:02 - and more hard-coded strings so you kind
71:03 - of want to all just keep it in this
71:05 - place and having a constants file with
71:10 - all your hard coded strings in there
71:11 - just reduces the possibility of typos so
71:15 - let's add a swift file here and then
71:19 - call this constants and actually just
71:25 - create a constants
71:28 - structure and inside you can specify
71:33 - another structure let's call this
71:37 - containing all the strings for our
71:38 - storyboard and then inside this
71:41 - storyboard structure we're going to
71:42 - create a property and we're going to use
71:44 - let we're going to call it maybe home
71:47 - view controller and we're going to put
71:51 - the hard-coded string home VC so we
71:53 - never write home VC anywhere else in the
71:56 - project aside from here and we'll
71:58 - reference it with this name right here
72:02 - and so that's going to reduce the
72:04 - possibility of typos because we're not
72:05 - constantly typing this hard-coded string
72:08 - everywhere what I'm also going to do is
72:10 - put the static keyword in front of this
72:12 - so that we can access this without
72:15 - having to create instances of the
72:17 - structure so let me show you how this
72:18 - works we go to sign up view controller
72:22 - let's say I want to storyboard dot
72:27 - instantiate view controller and you pass
72:30 - in an identifier in here I pass in
72:34 - basically a constant
72:36 - storyboard oops storyboard home view
72:41 - controller and that's that home VC
72:43 - string I was talking about so because
72:47 - this returns a view controller we have
72:49 - to cast this as a this one is a can view
72:55 - controller type now let's just assign
72:57 - this to a constant and the view
73:01 - controller so we've got a reference to
73:05 - our home view controller here and then
73:07 - to swap out the root view controller we
73:09 - can access the view window and we can
73:15 - grab the root view controller property
73:17 - and assign home view controller to it
73:21 - and then we have to call a method called
73:26 - make key invisible and it's going to
73:30 - then show this as the Ruby controller
73:33 - instead so why don't we just press
73:37 - command B and we're going to be able to
73:40 - test this out now
73:44 - so if they're able to sign up for a new
73:47 - account they're going to be transitioned
73:48 - to the home screen all right so let's
73:50 - run this project right now and test it
73:52 - out and let's actually also go to our
73:55 - authentication store we've got one user
73:58 - right now so let's click sign up let's
74:03 - use a different name let's make it
74:12 - different just so we can see and it has
74:17 - to be 8 characters long tester one two
74:21 - three four with a special character so
74:25 - we'll use star let's go sign up so you
74:29 - can see here we've transitioned to the
74:30 - home screen so that means everything
74:33 - worked on our back-end hopefully so
74:36 - let's reload and we see Tom at T comm
74:39 - and this is the user UID it starts with
74:42 - f8 V zero okay you can go back to the
74:47 - database and there should be a different
74:49 - document so you can see here that it's
74:53 - Tom Jones with f8 V zero as the UID so
74:57 - everything's good this is a success what
75:01 - we want to do now is implement the login
75:03 - screen because that's something that we
75:05 - didn't actually do so going back to the
75:09 - login screen when log in is tapped we
75:14 - want to do some of the similar things
75:17 - right validate the text fields in this
75:21 - case it would just be making sure that
75:23 - all the fields are filled in before
75:25 - logging in and then signing in the user
75:32 - and so let's just get rid of this so
75:39 - we're going to you know I'm gonna skip
75:44 - this I'm gonna skip this part because
75:46 - it's basically the same thing as the
75:47 - sine of view controller and this video
75:49 - is getting pretty long already so I'm
75:51 - just going to do the sign-in part
75:55 - yeah so in fact I'm just going to do
75:58 - that right here and then we are going to
76:01 - take a look at the documentation and
76:04 - I'll show you how to actually sign in a
76:07 - user let's go back to I Oh s password
76:11 - authentication and Here sign in the user
76:18 - with email and password all you have to
76:20 - do is to use this sign-in method and you
76:23 - pass in the email and password and you
76:25 - get back the user and if there was an
76:27 - error or not and that's it so you know
76:32 - you can use a lot of the same principles
76:34 - as I showed you in signup you know I'm
76:38 - not gonna break things up into methods
76:41 - like this I'm just going to code it up
76:43 - right here just save so save us some
76:46 - time okay so we're gonna want to import
76:50 - firebase auth at the top and then we're
76:54 - going to type auth we're going to get
76:57 - the auth object and then we're going to
76:58 - sign in with email and password so make
77:03 - sure you've got the right one here in
77:06 - terms of the email and password so I'm
77:17 - gonna let email equals email text field
77:22 - we have that right oh I don't know why I
77:26 - called them first name and last name
77:28 - text field sorry when you guys were
77:31 - watching me type that out you must have
77:33 - been saying no Chris that's wrong okay
77:37 - so email text field and password text
77:39 - field but now I gotta have to fix it in
77:41 - the store board so let's go back and fix
77:45 - it because I've just changed the
77:47 - property names all right so my mind must
77:52 - have been somewhere else so I'm
77:54 - right-clicking this guy I'm breaking the
77:56 - connection new referencing outlet that's
77:59 - gonna be my email text field and this
78:02 - one I'm gonna break that connection
78:05 - new referencing outlet that's going to
78:08 - be
78:08 - ha vortex field so there I've fixed the
78:11 - connections we're gonna go back to the
78:13 - login view controller now so email text
78:19 - field dot text dot trimming characters
78:22 - white spaces and new lines let password
78:27 - equals password text field dot txt
78:30 - trimming characters white spaces and new
78:34 - lines so you definitely do want to do
78:36 - this you know create your own validate
78:39 - text fields method just like I showed
78:41 - you and sign up view controller because
78:44 - these two lines I'm assuming that this
78:46 - is not nil is I'm forced unwrapping it
78:48 - so up here you need to check if there's
78:51 - any errors right and if there are then
78:54 - you want to show the error message and
78:56 - and not run this code down here this is
78:59 - assuming that all the fields are valid
79:01 - so assuming that all the fields are
79:03 - valid we are going to try to sign in
79:06 - with the email and password and let's
79:09 - open up this closure you can see there's
79:11 - that result parameter and there's an
79:14 - error parameter just like we had before
79:16 - so if error is not equal nil then
79:21 - couldn't sign in and here you'd want to
79:25 - show the error message so you know error
79:27 - label dot text and this time I'm going
79:30 - to assign it to the localized
79:34 - description you might not want to do
79:36 - that depending on what to say so you can
79:38 - try out different scenarios like try
79:39 - typing in a bad password or no password
79:42 - or whatever and see what sort of text
79:46 - gets shown in here stuff thought error
79:52 - label dot alpha is equal to 1 so that's
79:55 - showing the error else if there is no
80:00 - error that means that the user has
80:02 - signed in successfully and in that case
80:04 - we just want to transition to the home
80:06 - screen in which case it's it's just
80:10 - simply this code right here so I'm gonna
80:12 - just cut and paste that right there
80:15 - right so we will be able to log in now
80:18 - the only problem is that I forget what
80:21 - I swear oh I remember what password we
80:23 - did so we can try this out so this is
80:27 - wrong now setup elements for styling it
80:30 - that would be email that would be
80:33 - password and let's run the application
80:37 - all right I've got some more errors so
80:39 - let's check it out
80:43 - okay so this is in the login view
80:45 - controller when you're referencing
80:47 - things inside of a closure use the self
80:52 - keyword right there to be more explicit
80:56 - about what you're referencing all right
81:03 - so now build succeeded simulator let's
81:07 - try and log in now and the last part of
81:09 - this is just to add that movie in the
81:11 - background so I'll show you how to do
81:13 - that oh we don't have placeholder text
81:15 - here so this this should be email this
81:17 - should be password what I had tom
81:22 - t-dot-com and I had tester one two three
81:26 - four star I believe yeah so that worked
81:30 - and we see this let's try it bad pass
81:34 - her and just to see what happens I'm
81:38 - just gonna type in any garbage yeah that
81:43 - is true all right you got me password
81:48 - isn't valid or user does not exist we
81:51 - can fix this by making it multi-line so
81:58 - we probably want to do that with both of
81:59 - those labels clicking the label and then
82:03 - changing number of lines to zero so
82:07 - click that label change some of our
82:08 - lines to zero and that's going to make a
82:11 - multi-line and let's add some
82:14 - placeholder text while we're here so for
82:16 - this login field this is going to be
82:19 - email and this is going to be password
82:25 - all right so we're nearly done here I
82:28 - just want to show you how to add the
82:30 - video in the background
82:33 - so in our navigator here I am going to
82:36 - add a new group for the media and this
82:39 - is just a random video I downloaded from
82:42 - a stock photography site and I'm gonna
82:47 - drag it into Xcode make sure that add
82:50 - two targets is checked I don't know why
82:53 - this is unchecked and make sure that
82:55 - that is checked so that you're actually
82:57 - adding it to the this target and then
83:02 - copy items if needed is great because
83:03 - it's gonna make a copy of it in your
83:05 - project folder I'm just going to reorder
83:08 - this folder down here oops I've actually
83:10 - put it in here don't want that alright
83:15 - so here's the video that I've got it's
83:17 - from video blocks as you can see it I
83:19 - didn't pay for this video it's just for
83:20 - demo purposes and you can see that it it
83:24 - works at a normal pace but in the demo I
83:27 - actually slowed it down and you'll also
83:29 - notice that this video isn't formatted I
83:33 - mean height and width wise it's not
83:35 - formatted for an iPhone screen or a
83:37 - smartphone screen right so ideally you'd
83:39 - want to find a video that's more well
83:41 - suited for the aspect ratio of a phone
83:44 - but for me I just I just took this video
83:47 - I enlarged it and then I shifted the
83:50 - frame so that I could make it work
83:53 - I don't know if you actually want to do
83:54 - that or not but I'll show you how I did
83:56 - it which I don't think I would do that
83:59 - for for a real app you know maybe I
84:04 - would I mean maybe I would it would it
84:07 - depend so anyways in working with the
84:12 - video player classes we have to use AV
84:15 - kit that's the framework that contains
84:16 - all of that stuff so let's go ahead and
84:18 - import AV kit and then in here let's
84:23 - declare our player
84:27 - sorry video player and this is going to
84:30 - be a type of AV player okay and then I
84:35 - make this optional because we're gonna
84:36 - initialize this or create the object and
84:39 - initialize it later so then there's also
84:42 - something else called the video player
84:45 - layer
84:46 - so this is going to be a V player layer
84:50 - and this is actually as you can see here
84:53 - manages the players visual output this
84:55 - is actually what the user sees and this
84:59 - is what we're going to be displaying in
85:01 - the background so here's how it works
85:03 - the AV player item is going to be the
85:06 - media and we're going to create that AV
85:09 - player item and point it to our mp4 file
85:12 - that we just added and then we're going
85:14 - to use the AV player item to initialize
85:17 - the AV player and then from the AV
85:20 - player we are going to create an AV
85:22 - player layer and then that's the one
85:24 - that's actually going to get displayed
85:26 - so this property that I'm declaring here
85:29 - is an AV player layer we don't need to
85:32 - declare a property for the player item
85:34 - we're just going to create that where we
85:36 - need it we're going to override view
85:39 - will appear and we're going to show the
85:44 - video player here set up video in the
85:47 - background and we're going to set up the
85:51 - video okay so then we can declare that
85:55 - function down here and the reason why
86:01 - I'm doing it in view will appear rather
86:03 - than viewdidload because just in my
86:05 - experience if you're working with
86:07 - something that's going to get displayed
86:09 - visually sometimes in viewdidload the
86:12 - view actually hasn't appeared yet hasn't
86:15 - been you know it's loaded into memory
86:17 - but it hasn't shown up and when you're
86:18 - trying to put things on the view when it
86:21 - hasn't shown up yet you run into
86:22 - problems especially with maps and stuff
86:25 - like let's say in viewdidload you try to
86:27 - display a map and then you try to go to
86:29 - a specific region or something like that
86:31 - that's not going to work at this point
86:33 - so when you're doing things like playing
86:35 - videos or playing sounds or trying to
86:37 - transition the map to somewhere doing it
86:41 - in via will appear or view did appear
86:43 - usually as a safer bet you could you try
86:47 - and viewdidload first and it doesn't
86:48 - work yet then you can try interview with
86:49 - a peer review did appear for these setup
86:52 - elements it's fun to do in viewdidload
86:54 - because here you're actually changing
86:56 - properties of that object
87:00 - and so that will persist even through
87:02 - when the view will appear in view did
87:04 - appear but when you are trying to change
87:09 - like in the map example when you're
87:12 - trying to zoom the map into a different
87:13 - level but the map actually hasn't been
87:15 - displayed yet then that could be a
87:17 - problem so that's just that's just a
87:21 - habit of mine to do stuff like that in
87:23 - here okay so we are going to create the
87:27 - video player item create the player
87:32 - create the layer and then we're going to
87:36 - adjust the size and frame and then we're
87:41 - going to display it and play it we're
87:44 - going to add it okay so let AM equals AV
87:56 - player item and this is going to expect
88:00 - well this is what I'm trying to give it
88:02 - a URL where I've been in order to get a
88:05 - URL to that specific mp4 we have to do a
88:09 - couple of things okay bundle alright so
88:20 - what happens I don't know if I've
88:23 - explained it in this particular tutorial
88:24 - but all of your assets your sound files
88:27 - and stuff like that get bundled together
88:29 - with your app in what's called an app
88:32 - bundle and that app bundle gets put into
88:35 - the app store or downloaded to people's
88:37 - phones that essentially contains
88:40 - everything your app needs to run so we
88:43 - need to get the path to that particular
88:46 - mp4 inside of the bundle the thing is
88:50 - you don't know that path right now easy
88:54 - way to get that is just to use some
88:56 - existing classes and methods that we
89:01 - have to get that so path for resource of
89:06 - type that's what we want so the resource
89:09 - name you specify here and that would be
89:13 - login BG and the type is mp4 you don't
89:16 - need to specify the period now this
89:19 - returns an optional string in case I
89:22 - can't find that resource that you're
89:24 - specifying here it's going to return nil
89:26 - so let let bundle ha
89:32 - equal that and here we're going to just
89:35 - write a guard statement just to ensure
89:38 - that that's not nil that it has found
89:41 - that guard bundle path not equal nil
89:43 - else return there's nothing we can do if
89:46 - I can't find that in before there's no
89:48 - point in continuing so we just write
89:50 - that to assert that we've actually have
89:55 - a path to that resource so now let you
89:58 - our l equals we're going to create a URL
90:00 - object from that path file URL with the
90:04 - path bundle path and I'm gonna force and
90:09 - wrap it because we already have this
90:10 - guard statement indicating that it
90:12 - should be something should be a real
90:15 - actual string and then we're gonna pass
90:17 - in that URL object in here to create the
90:19 - player item alright all of that just to
90:22 - create the player item now we're going
90:24 - to be able to create the player so a
90:26 - video player is equal to AV player and
90:32 - we are going to pass in the player item
90:35 - that we just created and then we are
90:38 - going to now do the player layer and
90:42 - create a new player layer object and
90:45 - we're going to pass in the video player
90:51 - all right so this is I'm gonna force
90:54 - unwrap it alright so now we're gonna
90:59 - adjust the size and frame so this I did
91:01 - through a series of just testing it out
91:04 - running it and adjusting it so I mean
91:07 - I'm not gonna do that here I'm just
91:08 - gonna copy the code that I used in my
91:11 - completed project because I don't want
91:15 - to do that testing all for a Kent but
91:18 - I'll explain to you what this code
91:24 - what this code does and how it came to
91:26 - that conclusion so for the player layer
91:31 - I'm adjusting the frame while I'm
91:33 - creating a new frame for it and I am
91:38 - blowing up the width four times but I'm
91:41 - keeping the same height and then I'm
91:44 - positioning it I'm moving it left by one
91:49 - point five times the width and I'm
91:51 - keeping the Y at zero so that's you know
91:56 - what I'm gonna show you how it looks
91:58 - like I'm gonna comment out this line
92:00 - without me changing the frame at all so
92:03 - you can see what it looks like and then
92:04 - I'll show you what this adjustment to
92:07 - the frame makes it look like this line
92:10 - of code is inserting that player layer
92:14 - into this view controllers view in its
92:19 - core animation layer as you can see here
92:22 - the layer used for rendering and I'm
92:24 - inserting that player layer here at
92:26 - position zero so that's going to that's
92:30 - going to display it as you can see as
92:32 - you will see so and then the next the
92:35 - last thing to do is just to call video
92:38 - player play immediately and you can
92:41 - specify a write which I did zero point
92:44 - three to slow it down so let's run the
92:49 - app right now and you can see what it
92:50 - looks without that adjustment to the
92:54 - frame
93:01 - all right so maybe it couldn't find
93:04 - login BG's so I don't see that here so
93:08 - let's step through the code let's put a
93:11 - breakpoint right there and let's rerun
93:15 - the app and let's debug this so there we
93:19 - go
93:20 - or step through and actually it was able
93:24 - to oh I know what's wrong
93:29 - we even though so we commented this out
93:34 - we actually do need to set the frame but
93:37 - I'm gonna set it to like a normal frame
93:39 - so I'm gonna set it to the same I'm just
93:44 - gonna set it to zero zero so position
93:47 - zero zero at the top left corner and the
93:51 - width is just going to be you know one
93:53 - times the width of the view and one
93:56 - times the height of the view itself so I
94:01 - I made a mistake when I described this
94:04 - earlier this is not four times the width
94:06 - of the video itself this is four times
94:09 - the width of the size of the screen
94:12 - right so I already explained that in a
94:17 - second so let me just show you what that
94:19 - looks like here all right so I can
94:22 - remove my breakpoint and just continue
94:23 - running cuz so that's what that looks
94:26 - like right there then you can see it is
94:30 - playing at a slower rate because I
94:32 - specified 0.3 now let's adjust the frame
94:36 - so let's comment that out and comment
94:43 - this in so I'm moving it to the left
94:47 - one and a half times the width of that
94:50 - iPhone screen and for the width of the
94:55 - player layer I am saying that it should
94:58 - be four times that width and it should
95:02 - be you know the same height so when I
95:05 - run it with this frame
95:10 - then you can see that it's actually
95:12 - blowing it up a lot now I think one
95:17 - question in my head now that I'm looking
95:19 - at this again is that you know why isn't
95:22 - this really stretched out because I am
95:24 - stretching the width without stretching
95:26 - the height and I think that you know if
95:29 - I let's say if I do half and that's why
95:32 - I said you're gonna have to play around
95:33 - with this and that's why I also don't
95:36 - think it's a very good solution I think
95:37 - it's better if you actually find a video
95:39 - that's suited for this sort of aspect
95:40 - ratio then you're gonna get something
95:42 - like that and I just had to do all of
95:48 - this because of the sample video that I
95:50 - got so anyways I'm gonna wrap this video
95:54 - up because it's gone a long time but I
95:56 - hope you guys have learned a lot from it
95:59 - one more quick thing I want to mention
96:01 - and that is that you can download the
96:03 - source code for this project there's a
96:04 - link in the description below the video
96:06 - now when you click through that link and
96:08 - go to that page the only thing I ask for
96:10 - in return is your email address and no
96:13 - that's not the spammer to sell you
96:14 - anything I email you guys when I release
96:17 - a new video so you guys can always keep
96:20 - up to date with all of my latest
96:21 - tutorial releases and that's the only
96:24 - thing I ask for in exchange for the
96:26 - source code for this project which I've
96:28 - worked really hard on so I hope you feel
96:30 - that's worth it you can unsubscribe at
96:31 - any time now if you like this tutorial
96:34 - and you want to see more I am going to
96:36 - produce more for our based
96:37 - authentication videos so if you don't
96:39 - want to miss it make sure you're
96:40 - subscribed and hit that Bell icon so
96:42 - that you get notified when the next one
96:44 - comes out and don't forget to give this
96:46 - video a big thumbs up because it really
96:47 - helps the video it really helps my
96:49 - channel overall and it I get really
96:52 - pumped up to see a whole ton of likes so
96:54 - thank you so much for your support thank
96:56 - you for watching I hope you guys learned
96:57 - a lot I hope you had fun and I will see
97:00 - you guys next time

Cleaned transcript:

hey in this video I'm gonna show you how to build your own custom login page powered with a firebase authentication backend now we're going to do both a sign up workflow and a login workflow so that your users can both create an account and login with it along the way I'm also going to show you how to capture some additional fields such as first name and last name and we're going to do some form validation so that we can make sure that the user enters a strong password and that the email they entered is correctly formatted so if that all sounds good to you then stay tuned hey guys my name is Christian and welcome to code with Chris where we teach people how to code and how to build apps now in order to get this login page done we're going to go through the following steps or first going to start our Xcode project and build the user interface and then we're going to sign up for our firebase backend then we're going to incorporate the firebase SDK into our Xcode project and we're gonna set up firebase authentication and then finally we're gonna hook up that user interface we've built to the firebase authentication backend so that the user can then create their account and log in now if you're a beginner and this is one of the very first videos you're watching I highly recommend that you get the basics first by watching my beginners playlist I have a couple of them and I'll list them on the screen right now now just before we get started there's one more thing that I want you to do and that is to give this video a big thumbs up and to hit subscribe if you haven't already because that really helps support the channel and helps encourage me to keep going alright with that said let's dive in so we're going to start by creating a brand new Xcode project so go ahead and start a new single view application under iOS and we're going to call this well whatever you want I'm gonna call this custom login demo and the important thing here is to set your language the Swift and we're not using Swift UI so don't check that and the rest of it are also unchecked now if you haven't set this up before for your organization name and identifiers you can follow what I've got here except substituting obviously your own name or your company name and together with your product name you're going to have this bundle identifier here and we're gonna then go ahead save it wherever you want I'm going to save this on my desktop now for the first thing we're going to do is to organize our files a little bit and to also create some of the classes we're going to need so in the demo in the beginning of this video you saw that we had a sign up button and a login button for our first screen and clicking those buttons will lead to two different forms a signup form and a login form and once the user has signed up or logged in we also bring them to the home screen so what we've got here we've got a viewcontroller.swift this one is going to be that first screen where we have the sign up button and login button we're going to create a couple of more view controllers to represent the signup form in the login form and then that home screen that they see once they've logged in so go ahead click new file and we're gonna choose cocoa touch class because these are going to be subclasses of uiviewcontroller just like how this view controller that comes with a default project is as well I'm going to call this the sign up view controller that's going to control our signup form and then I'm going to create another one and I'm going to call this the login view controller and then I'm going to create a third subclass of uiviewcontroller called the home view controller and this one's going to be the one that they see after they sign up or login alright so now let's organize it a little bit by creating a new group we're gonna call this a few controllers and we can put in that guy put in these as well okay so we have that and let's set up some of our user interface in the main dot storyboard so this is the one that's going to be showing our sign up button and login button and having that moving background and that's just a stylistic element so we're not going to start with that we can always add that video background or static background at the end so what we're going to do as a first step is actually embed this root view controller in a navigation controller and this is going to allow us to click on a button and go to another view controller which is what we want when the user taps on the signup button or the login button so go ahead and select this guy hit this button here and embed in navigation controller that's going to give you a navigation controller like that and this one indicates that this is the root view controller the first thing I'm going to do is highlight our navigation controller and right here I'm going to get rid of shows navigation bar and that's going to hide the navigation bar in all of its child view controllers so we don't see that bar at the top next I'm going to open up the object library you can press command shift L or you could click this plus button up here to add new elements to the storyboard I'm going to choose view controller this is going to be our signup one let's do it again and this is going to be our login form and then I'm going to add another one here this is going to be our home screen so now let's go ahead and set these custom types to the view controller classes that we've created on this side so let's highlight this one first and set the custom class for this guy as home view controller I just want to say one more thing if this is all confusing to you and you don't really know what I'm talking about I highly urge you to go through my beginner series at first because that's really going to set you up and give you all of the necessary skills and terminology to be able to follow this tutorial so again you can find that in the description or in the beginning of the video I link to it on the screen as well okay now let's set the custom class for this guy right here this is going to be our sign up view controller this is going to be our login view controller and now let's add some buttons to this first view controller here all right so there's going to be a signup button and a login button and both going to be grouped on top of each other and near the bottom of the screen so this would be a perfect chance to actually use the vertical stack view alright so I'm gonna add a stack view here I'm gonna put some constraints on the stack II so it sticks to the bottom of the screen so with the stack view highlighted click on adding constraints and I'm just going to add the left right and bottom and I set these all to 40 all right and then we're gonna put some buttons in here too to be exact so let's open up the object library again to add a button in there it's out a second button this time I'm going to drag it into the document outline if you don't see this there's a button little little down here okay so clicking the stack view here let's set the spacing to 20 and we're also going to change the height of these buttons just so they're a little more tappa Bowl I'm gonna actually set an explicit height for this guy to 40 so that's going to be the first button and then I'm going to add a constraint to make the second button to be equal Heights to the first button so an easy way to do that is to click this button hold down control drag a line to the first button let go and just choose equal Heights and now both buttons will be equal Heights so again this first one I'm going to change the text here this is going to be signed up and this bottom one is going to be log in okay cool now let's add the form for signing up and again we're going to use a vertical stack view so let's add that to the screen but this time I'm going to align it to the top so add constraints left right in top and I am going to do 40 as well so that we can have some consistency here and let's add some text fields now there are going to be four text fields even though in firebase authentication you really only need email and password if you're working with password authentication we're also going to have first name and last name and just to demonstrate how you can save additional information for the user on the firestore side of things so I'll show you how to link up those two pieces of information to a single user so let's add four text fields here that's number one that's here just that's fact number two just number three and there's number four and I'm also gonna add a button in that stack view at the bottom and this is going to be a button they tap on after they fill in all of the fields and I'm also going to add a label underneath the button for any error messages that we need to display in case there's something a reason they can't sign up or something like that for this label I'm gonna Center align it I'm going to change the color to red and then for this button I'm gonna change the label to sign up and then for the stack view I'm going to change the spacing to 20 and just to maintain consistency with what we've done for the button Heights back here I'm gonna do the same thing here so for this signup button I'm going to set it to have a height of 40 and then I'm going to make all of these text fields conform to the same height as the signup button so since there are so many different text fields you could do the click and drag method but also another easier way is just highlight them all like that and just then click add new constraints and say that they all have equal Heights so that's gonna add four constraints and just make everything equal all right so that's error label we can say that that it's an error and I'm actually going to change the Alpha to zero at first you know what I'm gonna leave it as full opacity right now so that you can actually see it and then programmatically we will set it to be invisible before the user even sees the form but to make it invisible now just makes it kind of hard for people to realize that there's a label here when they're looking at the project so that's one tip for you if you're working on on a team that's something that you want to keep in mind now for the text fields you can actually set some placeholder text so I definitely want to do that that's going to set some text in there without having to put labels beside the text field so it's a nice way to tell people what you're expecting them to type in these elements password now for the password text field if you check secure text entry it's going to kind of mask out what the user is typing but for this demo I definitely want to show you the password that I'm signing out with so that when I log in you can see that I'm using the same password and then after the fact that we can enable secure text entry to mask the password at the very end so that's the signup form let's do the login form as well again we're going to use vertical stack view let's just drag it into there and I'm gonna align it to the top again so left right top right 40 40 and 40 and this form is actually a little simpler less text fields so let's put that in there put another one in there and then we're going to put a button I'm going to put a label for the error if there is any now one thing you want to make sure is when you close the stack view that all of the elements are actually inside the stack view so you want to try and do the same thing for the signup form as well all right so for the label I'm going to Center a line I'm going to make the color red I say error for the button I'm going to say a login and then just like before I'm going to set the button height to 40 and then I'm gonna highlight all three elements and say that all of them need to have equal Heights and for this stack view let's change the spacing to 20 so there's some space alright so the next thing we want to do well actually one more thing before we go to the next step and that is just to add a label on the home screen just so there's something to see to indicate that they've made it and so that we can prove our demo works let's horizontally and vertically Center that in the container and I'm just gonna change that text to welcome and let's just choose a bolder font so it stands out a little bit alright you know actually before we hook up these elements let's let's create some connections so from the sign up button if we want to go to the sign up view controller we can very easily just create a segue because we've we have this navigation controller here it's going to handle that transition so in this storyboard right now we just have to make sure that we create a connection from the button tab to say that we want to go to that view controller so for this signup button or you could even do it in a document outline right here under the regular view controller this is our route home view controller so hold down control click on this guy and just drag your way to the sign up view controller and out pops this little dialog you want to choose show and that's going to create this segue here to transition there so now when you tap on the signup button it's going to bring you there let's do the same thing for the login button click control hold down control I mean and drag it to the login view controller now choose show and that's going to create a connection just like that we're not going to do it for the home view controller because we're going to do it programmatically so that when the user signs up successfully or logs in successfully programmatically we are going to change the root view controller to be the home view controller and that's how we're gonna transition to there the next thing I want to do is expose these elements these text fields and the error label and the sign up button expose it to the code so that we can reference these elements that we can style them and then we can also handle button taps and we can validate the form and all those sorts of things so we're going to go up here and go into editor and assistant if you're using Xcode 10 there's going to be a button here saying assistant editor so that's also a way to do it but next go 11 they seem to not have that button there so you can click on editor or an assistant from the menu and then you can choose right here I would choose the login or sorry the sign up view controller on the right hand side you should be seeing sign up view controller if not for this bread crumb okay so if automatic doesn't work let's just double check let's just choose try to click something else here I think it can be a little bit buggy oh I know I know what what we forgot to do sorry about that let's just go back to editor only there's one thing that I forgot to do and that is that I forgot to say that what we're configuring here is actually a hmm no the custom closet is a sign of viewcontroller little bit confused let's try that again that might be a little bit of a bug or something like that well you know what I'm going to do I'm going to close Xcode and let's try to reopen our project and now let's see if it works a little better because we are working with a beta here so we might be experiencing some bugs so let's choose editor and assistant again and we're going to go into the main dot storyboard looks like I've lost my assistant let's just do that and now when I go to sign up view controller there we go so that's what I would try so in restarting Xcode I was able to see sign up viewcontroller.swift now under automatic so I might have been doing something wrong or it might have just been a bug in Xcode I'm not sure but in any case we're good now because what we wanted to do was to hook up these elements and expose them to sign up view controller so on the left hand side I'm looking at my elements in the sign up view controller UI and then in here on the right hand side I'm looking at my sign up view controller class so here I'm going to hook up all of these elements so this is going to be a little bit tedious first name text field last name text field now if you make it typo here or an error don't just erase it if you erase it you also have to correct the connection so you have to rightclick your element and kill the kill this connection and then you can try to reconnect it again if you don't do that it's still going to be connected to the old property which actually doesn't exist because you changed the name of it so this will be email text field this will be password text field okay this is going to be our signup button and this is going to be our error label alright so now we have references to all of those elements in the signup form but we also need to handle the signup button tap so down here where we're going to write our methods let's connect an IB action method so the connection type this time is going to be action and this one is going to be sign up tapped alright and let's do the same thing for our login form so clicking an element in the login form the righthand side should change to login view controller about Swift let's took some of these elements up so this first one is going to be first name text field this one's going to be last name text field and if you are a beginner sometimes you might actually connect it let me just show you again so if you're connecting a text field instead of specifying it on a new line you might have accidentally connected it to the same property in that case you have two elements connected to that and that would be not a good thing to have so just just wanted to point that out to you in case you accidentally do that as well and the way you can see in case is if you rightclick these elements they should only be connected to one property there okay so let's do that with a button as well login button and then this is the error label alright just like in the signup form we want to handle the button tap of the login button so down here where we declared methods let's drag in a login button holding ctrl let's make sure a connection is action and then let's say login tapped so in here we put the code to run when the login button is tapped now let's do some form styling while we're here so let me just go back to the single editor now when I had created this demo the completed version before shooting this recording I had actually moved all of the styling code into a utilities file which I'm just going to add to this project because the focus of this recording in this video is to show firebase authentication and how to build a custom login form for it so I don't want to spend a lot of time talking about styling these elements so all I'm going to do is I'm going to take that file with all of my styling methods I'll gloss over it for you and then I'll show you them in action and I'll make it available for you to download as well so you can use the same ones so here we're looking at the completed version of my demo project and like I told you I have this utilities file it's actually a class and it's got a bunch of static methods so that we can call those type methods on the utilities class without actually having to create a utilities object and then I have methods like style text field where you pass in a text field and it just styles it according to what you saw in the demo so this one's gonna be like a single line text field this one's gonna be a filled button this one's four buttons right and this one's gonna be a hollow button and then I have another one here for actually form validation which we will get to later on in this recording now ideally I think what you want to do if you're going to be expecting to work with more forms and you have more validation that you want to do on forms you would separate this out but I just put it all into this utilities file as a demo but you should probably put this in its own like form utilities classes so that you can you know just move that to a different project if you only want the form utilities and these ones would be the styling ones and I think from app to app styling is a very app specific thing but in the case of this demo I've been talking too much okay so all I'm gonna do is show in finder here and I'm going to drag this file into our project and I want copy items if needed and I want to make sure that it's added to this target now same thing as in this project I'm gonna create a new group called helpers I'm just going to move this down here and move my utilities file into there and in the sign up view controller let's go back to single editor only and in the viewdidload I'm gonna create a method set up elements and this is going to be a new function and here we're going to hide that error label remember I told you error label it's not o type this wrong of 0 I can't put it and furthermore we're going to style our text field so we've got first name last name email password and the signup button as well so I'm gonna say utilities dot style text field and we're gonna pass in first name text field now Xcode is not helping me out here with the autocomplete so there's definitely alright and so now it recognizes that build succeeded use of Unruh okay it still doesn't so alright so style text field and I just pass in the text field but right now I spelled this wrong I think my autocomplete is broken I think Xcode is a little bit broken now let me just try to restart Xcode again might be just the beta being a beta all right so now it recognizes it so if that ever happens to you restart Xcode that usually solves a lot of problem which is kind of bad for oops I pressed page though which is kind of bad for Xcode right such a bad rap on the quality of the software all right so I'm just styling the text field and then we have the button as well filled button I'm going to pass in the signup button so as I say these are style the elements hide the error label so let's do that also with the login form the set up elements now hide the error label all the elements this time we don't have as many to do utilities thought the style text field first name text field until ities thought style text field loss in text field and utilities thought style filled button now I decided as we were typing this that I don't think we need line breaks on all of these because it's pretty clear what that does and that's fine now in the view controller and do the same thing because in this view controller we have two buttons the signup button and the login button so ah we don't actually have IB outlets for this guy so why don't we go back to the main storyboard we didn't hook up those elements to reference them these two because all we did was we hooked them up to segues that would go to those view controllers but we didn't actually expose them to view controller at Swift so let's go into editor and assistant on the right hand side you should be looking at the view controller class and let's this is the signup button and this is the login button alright so now let's go back to a single editor and let's go to view controller and then we can call sign a button and for the login one I'm gonna do a holo style button so let's try this out now I think we're ready to run our project and just see how it looks so right here I've got this emulator running and these buttons looked a little squished to me based on the radius that I've specified so I'm actually gonna change those from 40 to 50 so that's my first thing that I notice click on sign up so here are the text fields and there's the signup button the second thing I notice is that we can't go back so that's something that we're gonna have to add a little later let me just run this project again click on login yeah so same deal here and squashed button and can't go back so why don't we just fix up some of these issues there's some of the easier ones oh I'm looking at the wrong one alright so the sign up button is the one with the height constraint so I'm gonna change this from 40 to 50 right and automatically the login button also follows suit because we have a strain to make them all equal heights same thing is going to happen for this signup form all I need to do is change the height of the signup button from 40 to 50 and that's automatically going to adjust the rest of the text fields same thing here this Login button constraint height of 40 let's change that to 50 and now let's run our project it should look a lot better alright so those that's what I expect signup alright cool so I can say that our UI is ready now we're going to actually work on the firebase side of things so don't close your Xcode project just yet instead go to your browser visit firebase google comm if you're already signed in you've got a firebase account you're gonna see go to console in the upper right hand corner if not you'll be asked to either sign in with your Google account or create a new one so I'm just gonna click on go to console and I'm gonna see all of my firebase backend instances we're gonna need to create a new one for this demo app so let's create a brand new firebase project by creating a project it's going to give us access to the authentication store the firestore database we have stuff like cloud functions and bunch of other things that we can use for our app now you're going to see maybe if you've worked with it a lot you're gonna see that there's a is a project limit but this is easily liftable you just have to justify the reason I got this lifted for my other account I just said I needed to create more demos so that was fine I'm sure if you get to a point where you're exhausted the free tier and your app is doing really well and you need you know more projects that they're not going to hesitate so I'm gonna call this the custom login demo and you're going to want to probably read this stuff in a little more detail for me for this demo I'm just going to accept everything but if if you're creating this F for production and certain restrictions and rules where you live and where this app is going to be sold then you're going to want to pay attention to how they work with the data here all right so project is ready let's hit continue and you can see here we have a authentication database storage this is file storage hosting for websites and stuff like that cloud functions and ml kit machine learning this is still in beta if I remember correctly so I haven't looked into this indefinitely but I usually don't like to dabble in beta stuff but swift UI is an exception because I just wanted to play with it anyway so we're getting off track so we've created our firebase backend for our custom login demo now what we have to do is add the firebase libraries to our Xcode project so that I can communicate with this firebase backend so I've actually shown you guys how to do this in my previous tutorials and also in some of my courses if this is not new to you feel free to skip ahead but if you've never done this before then continue watching because I'll show you how to do it step by step most of the viewers to my channel are actually brand new so I'm gonna want to make this the most comprehensive tutorial that I can so right here what we're going to do is click I oh s to get started it's going to launch a wizard for us to integrate and add those firebase libraries to our Xcode project so let's go ahead and click that the first piece of information we need is the bundle ID and you can get that here in your Xcode project just taking that and this has to match what you're putting here or else it's not gonna work so let's register our app for this firebase backend and then it's going to generate this configuration file for us to add to Xcode and this file contains all of the the endpoint data and a configuration data for our project to hit this firebase backend I'm just going to save it in my desktop for now and then wherever you save it you want to drag it in to Xcode that file that you just downloaded when you drag it it's going to show you this dialog I want you to make sure you have this enabled and add two targets is also enabled this is going to copy it from wherever you save that file and make a copy of it inside your project folder so click on finish now you can delete it from wherever you saved it for me it was the desktop because it's already referencing the version it copied into the project ok let's click Next and then now we're going to use something called cocoa pods to download and install those firebase libraries into our Xcode project again this is something that I've showed a lot of in my previous tutorials feel free to skip ahead if you've done this before if you haven't then you want to make sure you've got cocoa pods installed on your system first you might have done that before in a previous tutorial or previous project if you have then you're good to go if you haven't got cocoa pods installed I've actually have a video showing you how to install it on your system and it basically helps you manage all your thirdparty libraries for your project so go ahead and click in that corner for the video on how to install cocoa pods if you're already ready to go then let's continue with these instructions here so first of all we want to open up terminal and we want to navigate to the folder of our project so I saved mine on the desktop and I called it a custom login demo alright so this is my project folder right here and then I'm going to type in pod in it so what that's going to do is it's going to create a pod file in your project folder and here it is you're going to want to now open up that pod file in your text editor so for me I'm using sublime text and underneath here you're going to be putting all of the thirdparty libraries that you're going to use right here in the instructions it says to include the firebase Analytics pod so click this button to copy that and then paste it in there but I know from experience if you want to use firebase authentication you also have to use that pod as well and it doesn't list that here because it doesn't know which parts of the firebase back end you're going to use if we take a look at the documentation so in this separate tab I'll show you how to navigate to the documentation click on Doc's click on get started for iOS and then on the left hand side you should see authentication click that and then go under iOS and go under password authentication so password authentication is logging in with email password which is what I'm showing you how to do today so here it tells you to add this pod right so we're just gonna do that now click the copy and that's going to save us a step from having to add it later let's save the text file and then go back to terminal and now here let me just go back to the instructions so we can have that as well and now we type pod install and that's going to go out and attach all the libraries that we need and it's going to install it and add it to our project however this project doesn't actually contain the pods anymore let's close this project what happened here is that it's downloaded all the thirdparty libraries here and it's created a new workspace file for you which includes your original project plus all the thirdparty libraries so now from this point on you want to open up the XC workspace file let me open that guy up you're gonna see that you have your project and you have your pods your paws are going to contain the firebase libraries at this point so press command B to build your project just to make sure it still runs and while that's happening let's click on next and now it's telling us to add some initialization code and this code goes in the app delegate right when your app is launched it's going to try to connect to the firebase backend so the two lines of code you have to add is import firebase to tell Xcode that you want to use the firebase classes in this file and then you'll want to call the configure method of firebase app so in our project the build has succeeded nothing's broken that should be the same case for you as well inside the custom log in demo project or whatever you call yours let's open up the app delegate and at the top import firebase and then in the application did finish launching with options see that's the same method here we're gonna want to add this line so let's just copy that and we're gonna want to paste it right here before the return statement because nothing's going to be running after that now let's press command R and run this project as soon as it is run it's going to ping the firebase backend and try to make a connection so we see our user interface in here the debug area you're gonna see a bunch of debug information some of it might look concerning but don't be alarmed back here let's click Next and it's going to check if your app has communicated with the firebase servers just to verify that your installation has been done properly now sometimes this takes a minute sometimes this takes two sometimes what I do is I just stop the project and I run it again just to make sure it pings the servers and there we go we've gotten that let's continue to the console now okay so now we are back in the console now we've actually established a you know we've we've added the firebase libraries to our Xcode project and we are ready to work with authentication and the firestore database first let's enable email and password signin in the authentication part so we haven't set up any signin methods click on setup signin method everything is abled right now click on this edit button and enable email and password authentication click Save and then click on users and you're going to see nothing here if you click add user you'll see that you can add an email and a password for a user so I'm just going to add a test account test at T com and I'm just going to type whatever for the password I think I'll add some symbols and letters and numbers and capitals so here you go that's the identifier as in the email that we typed in if you try to create another user with the same identifier or same email it's going to fail this user ID isn't the password it's an internal ID generated by the system and this is what we are going to connect any information we store in the database about the user we're going to link it back to this particular user through the user ID because in this authentication store you are only storing the usernames sorry not user names but emails you're only storing the emails and passwords in this authentication story and in the database side where we can store additional information and we can link it with the UID let's create our firestore database so click on create database under fire store I'm going to start in test mode just now that we are just trying to test things this is going to allow anyone with the database reference to read or write to the database which is not good before we go into production we should make sure that we lock it down and only allow authenticated users to access that so I'm going to start in test mode this is choosing the location where your far store data will be stored it it sounds very um very alarming it says you cannot change this later so you can learn more about it but what I would suggest is just if this app is going to be used in a very specific location choose a data center that's closest to that location but other than that I don't think there is a you know at least not that I'm aware of a big difference between what you're choosing right so I would choose just by default choose a location that is close to where you are and click done if you know otherwise let me know in the comment section below all right so now we have our fire store database it works in a series of collections and each collection has documents now I'm not going to dive really deep into fire store in this lesson in this video because this is our firebase authentication series there's a separate series for fire store which I'll get deeper into for now because I want to store the first name and last name of the user I'm gonna start a new collection I'm gonna call this users yeah there we go that's exactly our use case right there it would contain a unique document for each user so let's create that collection right here it's telling me to add a first document and you know this might be a good exercise for you just to play around with so let's click an autogenerated ID you know it'd be something like it depends how you want to structure it right so you can just do first name like that let me save it and you can see what that looks like about when we sign up a user essentially what we're going to do is we're going to create a brand new user in the authentication store back here and then we're gonna take that user UID and we are going to create a document for that UID here with the first name and last name this would be the UID instead of this autogenerated ID so this is just the test document for fun so now that we have the authentication store set up we have our firestore database setup and we've put in the firebase libraries into our Xcode project and establish that communication now it's time finally to hook up our forms to create that user in the authentication store to create that entry in the database and also to allow the user to log in so let's go back here into our Xcode project let's stop the project and do that so the first thing I want to work on is the signup form let me just close to this pond here open these view controllers I want to work on the signup form when the signup button is tapped what we want to do is validate the fields and then create the user and then transition to the home screen all right so first things first I'm just going to get rid of this and I'm going to create a new method to validate the fields and this is going to return an optional string so here's the idea of this method check the fields and validate that the data is correct if everything is correct this method returns nil otherwise it returns the error message as a string and then we can just take that error message and put it into our error label and show it all right so I'm gonna return nil at the bottom indicating that everything is fine and then I'm gonna do a series of checks before this statement which would return the error message if the fields were not correct so for example check that all fields are filled in right that could be my first check let's create some space here so I can do that check what we're going to do is just remove all white spaces and new lines from the text field and check if that text field is empty if it is empty then we will return the error message please fill in all the fields so let's say if first name text field dot text I'm going to use optional chaining because that could be nil they could have not filled it in I'm gonna call a method called trimming characters and passing the character character set white spaces and new lines so that's going to take away all of the white spaces and new lines from that text and I'm just gonna check is this equal to empty you know if it is then I am going to want to return you please fill in all fields and so that could be my first sort of validation but I don't just want to check the first name text field right I want to check all of the other ones so we've got we've got last name text field dot txt trimming white characters and new lines so same thing here and then I'm going to also check the email and do that and finally and check the password text field all right so if any of those fields are empty I am going to return please fill in all fields next I'm going to check you know if it passes that then it's going to continue down in the method I want to check if the password is secure and this I actually have this method in the utilities if you scroll all the way down is password valid and you pass in a password and then it's going to check it against a certain pattern called a regular expression and it's going to then determine if the password that's passed in meets the criteria as dictated by this regular expression it's going to pass back a boolean there's going to pass back true if it matched if it's fulfills the requirements of the regular expression and it can pass false if it doesn't and it if it passes back false then I'm going to tell the user with an error message please please make sure you have eight characters a special character and as well as a number so I think that's what this regular expression is dictating now if you're unfamiliar with regular expressions it's basically sort of pattern you can specify a pattern such as something that looks like this and in this pattern you can express things like it has to contain at least 8 characters you know a special character a number a capital letter or whatever there are different symbols for what's allowed and how many times you want to allow it and it's you know I for me personally I have a lot of trouble remembering the regular expression syntax because I don't use it often enough so there are online tools out there to help you with this sort of thing that can generate regular expressions for you based on parameters that you want to indicate so if that's you that's something that you can use for this particular function I actually just looked it up so I looked up I actually have the blog post here safe to show you guys so this blog post I found was done in Swift 3 and it's 2 years ago but it's still completely valid and what I liked about this blog post was that it gave different examples of sort of password requirements and then what the regular expression would look like for that requirement and it breaks down the regular expression into exactly what each part means so I'll link to this I'll leave the link to this blog post in the description and I would highly recommend that you go and check it out especially if you have to do more password validation in the future just to make sure that your passwords are secure enough so that's where I got this and that's what I'm using here same thing goes for email format alright there are regular expressions to make sure that the email they enter is in the proper format now I don't have that check right here but that's just a matter of finding the right regular expression to use and then checking the email text field against that so here I'm going to just demonstrate how you would do it for the password so I say you know let clean password equal to password text field dot text and I'm going to force unwrap it because I I know there is a piece of text in there because if there wasn't it would have it would have failed this check here so at this point I know there is a piece of text in there I'm gonna trim white lines and white spaces and new lines so I'm gonna pass this cleaned password into utilities thought is password valid and that's going to return a boolean to me right so if the boolean is false then password isn't secure enough return please make sure your password is at least 8 characters contains a special character and a number all right so that's what I got here so far if you create another another method to check email format with a regular expression then you can again add that check here you know or we're here so back in sign up tapped now I can do this I can say let error equals validate fields and then in here I'm gonna check if error is not equal to nil that means there was an error right there was an there there's something the fields show error message now I could very easily just say error label dot text is equal to the error I got for some rapid because it's an optional but and then also make sure that alpha is one so it's visible but I'm actually gonna put this outside in a different method so that I can use it in different says so show error message string and I'm going to move this code in here alright so this would be the message and then here I would simply call show error and pass in the error message all right so that's the case where there is an error with the fields but else there is no error and all the fields are fine then what we want to do is create the user right and transition to the home screen so how do we create the user in the authentication store let's take a look at the documentation create a password based account import firebase firebase app configure so we already did this right it's telling us to do it in app delegate and we've already done that so let's move on and this is the method that we want create user write with passing email and password the thing to know with the firebase documentation is that some of what they have here is outdated um the best way to do this is actually just to take a look at you know sometimes they change the parameters and how they're named but these classes are more or less the same so I would start with auth dot you know getting the auth object off oh actually we can't Xcode doesn't recognize the class in this in the signup view controller because we have an imported firebase authentic is it get the auth object and then we are going to create user with email and password with this completion handler so this callback is basically the code that gets run after the user gets created and we need to implement this completion handler because we need to know if the user was successfully created or not so let's double click this to open up this closure there's two parameters one is the result which is optional and one is an error which is also optional so let me just give these parameters some names result in error I'm just going to call that er are how here we're gonna check for errors so if let e are our error it is error you know if there are no errors then this parameter should be nil but the fact that it comes in here that's what I'm checking to see if it's nil or not if it comes in here that means that there was an error so I'm going to call my show error method and I'm going to pass in you know error creating user and then otherwise if there was no error then I am going to here user was created successfully now store the first name and last name before we do that one thing I want to mention is all right you know use self here be more explicit about what we're calling all right so we can we can do a test like that if the error is not equal to nil then we do that one thing I want to mention to you is that this error actually has a localized description property that contains a string describing the error I don't know if you want to show that to the user you're gonna you're just gonna have to make that decision about how explicit you want the user to know about what the problem is so here user was create a successfully now store the first name and last name so storing a new document in the user's collection is actually very simple not going to go through too much about you know how or why it's done because I want to save that for the firebase tutorial this is going to be focused on authentication so basically before we can use the fire store classes we have to import firebase up here so now we can use the fire store classes after importing that and I'm still not getting autocomplete so let me just type it out and see if I can build this successfully so upon further investigation I realized that I had made a pretty silly mistake the reason we couldn't get fire store classes to be recognized was because we hadn't added the fire store pods that we needed initially now this was an oversight on my part we just taking a look at the pod file now initially we only had that right so we only had the pots to work with firebase authentication but what we also needed were these two pods right here so the way I realized this was in going to the documentation under the fire store section and get started because we were in the authentication section before under fire store it tells you that if you look under iOS it tells you that you need these two pods now how do I remember that in this project we were going to use fire store we could have added all four of these pods in the beginning and then just install the pods and that would have been that but because we didn't install these two I had to add it after the fact and the way you can do that is you can just go back to your project folder open up your pod file again I had the two missing pods underneath save the file and then go back to terminal and type in go back to your project directory and type in pod install and it's going to then grab the missing libraries or the new pods that you added and it's going to put it into your project at that point a safe thing to do would just be to close your project reopen the workspace file and just press command B and rebuild the project just to see if everything is running now the state that we had left this in it wouldn't have built because this method hadn't been fully filled out yet because we had to pass in an email in a password as strings so I just put in two empty dummy strings for now just so we can build and compile so I've got it successfully compiling and at the top you need import firebase to recognize the firestore five classes and then down here now we can say let DB equals fire store dot fire store and this is going to return to us the fire store object where we can call all our methods to add the data to the database this constant called DB is just going to keep a reference to that firebase or a fire store object now if we look back at this fire store documentation if you scroll down a little bit let's just walk through some of the starting steps import firebase and firebase app dot configure we did this in the app delegate already this part I just showed you and this is where you're going to get an reference to the fire store object and you want to keep track of it in some sort of variable or constant and this doesn't have to be done in the app delegate dot Swift you can do this where you need it and then for adding data it's pretty straightforward so if you take a look at this you use that fire store reference and then you specify the collection that you want to add a document to in our case it also would be users and then you call the add document method and you pass in a dictionary containing all of the key value pairs that you want to add to that collection so in this document in the sample document they have first last and born we're gonna have first name last name and the UID so that's going to be the app extra user data that we want to compliment the email and password in the authentication store and then this part would be handling any sort of error from trying to add data to the database so let's try this out right here so we've got a reference to our fire store object we would type in DB collection and we would specify users because that's our collection name as well right users and we would add a document so there are two different types one is if I guess you didn't care what the result would be you just want to add a document this one has a completion handler where you can actually check if there was an error or not so that's probably the one you want to use most of the time for the data we're going to pass in just our dictionary so I'm going to specify the key value pairs here so that's just being consistent with what we had here first name all over case like that here I'm gonna put in the yeah I realized we didn't we didn't have a reference to the first name and last name so actually at the very top probably at this point once we've validated all of the fields and checked that they were all okay at this point before creating the user we probably want create cleaned versions of the of the data and what I mean by this is that we strip out all white spaces and new lines from the text fields so text I'm gonna force and wrap that because I know at this point after we've validated the fields there definitely is text in those properties so white space and new lines so I'm going to do this for all four fields just so you're not saving data with white spaces and new lines in your database all right and now instead of these empty strings we can pass in email and password so this is from these two right here and then in here we can pass in the first name now a comma separates the next key value pair in the dictionary the last name colon that and we also have the UID so the way we get the UID is actually from this result right here after the create user method is done creating that user in the authentication store it passes back the result any errors come in here and the result comes in here and the user UID that was created for that new entry will be returned here and result so we can get result let's force and wrap that and get the user dot UID all right so for completion let's open up this Handler and the error is an optional okay so if error is not equal no that means there was an error so error message so we'll a selftaught show error message will say user data I couldn't you're gonna have to think of something that's more accurately descriptive of this error because the problem is at this point the user has actually been created in the system so they will be able to log in with an email and password it's just that their first name and last name couldn't be saved on the database side so if this fails I don't know if you'll actually want to show the user an error or if you would just want to capture the first name and last name again or maybe just silently try this again at a later time so there's different ways you can handle this part at least for now I'm just gonna say error to saving user data if there was no error then we don't have to handle that case then everything's fine and you know whether or not the first name and last name could be saved at the end of the day the user account was still created right here user was created successfully in here and so we still want to transition to the home screen at this point alright so in order to transition to the home screen I'm going to do this in a different method let's call this transition to home and I'm going to create this method down here so before I fill that in okay let's see yourself here before I fill that in let's just doublecheck what we've got so we're trying to create the user and then checking for errors and then if there's an error creating the user we show the error if there's no error creating the user then we're gonna try to save the first name and last name by getting a reference to our firestore database adding the data here and then when that returns we check if that was successful or not if it's not successful then we show this air and and then that's it and then we transition to the home screen so I think it that's good for the sign up side alright so let's just talk about transitioning to the home so the way we're going to do that I mentioned before was that we're going to programmatically change the root view controller from whatever it is to the this one this welcome one so in order to do that we need to actually give this guy a storyboard ID and then we're gonna create a new instance of the sky and just swap out the root view controller so I'm gonna call this guy home VC and rather than specify home VC in multiple places we can create a constants file which is a good thing to do because when you build a larger project you're gonna have more and more constants and more and more hardcoded strings so you kind of want to all just keep it in this place and having a constants file with all your hard coded strings in there just reduces the possibility of typos so let's add a swift file here and then call this constants and actually just create a constants structure and inside you can specify another structure let's call this containing all the strings for our storyboard and then inside this storyboard structure we're going to create a property and we're going to use let we're going to call it maybe home view controller and we're going to put the hardcoded string home VC so we never write home VC anywhere else in the project aside from here and we'll reference it with this name right here and so that's going to reduce the possibility of typos because we're not constantly typing this hardcoded string everywhere what I'm also going to do is put the static keyword in front of this so that we can access this without having to create instances of the structure so let me show you how this works we go to sign up view controller let's say I want to storyboard dot instantiate view controller and you pass in an identifier in here I pass in basically a constant storyboard oops storyboard home view controller and that's that home VC string I was talking about so because this returns a view controller we have to cast this as a this one is a can view controller type now let's just assign this to a constant and the view controller so we've got a reference to our home view controller here and then to swap out the root view controller we can access the view window and we can grab the root view controller property and assign home view controller to it and then we have to call a method called make key invisible and it's going to then show this as the Ruby controller instead so why don't we just press command B and we're going to be able to test this out now so if they're able to sign up for a new account they're going to be transitioned to the home screen all right so let's run this project right now and test it out and let's actually also go to our authentication store we've got one user right now so let's click sign up let's use a different name let's make it different just so we can see and it has to be 8 characters long tester one two three four with a special character so we'll use star let's go sign up so you can see here we've transitioned to the home screen so that means everything worked on our backend hopefully so let's reload and we see Tom at T comm and this is the user UID it starts with f8 V zero okay you can go back to the database and there should be a different document so you can see here that it's Tom Jones with f8 V zero as the UID so everything's good this is a success what we want to do now is implement the login screen because that's something that we didn't actually do so going back to the login screen when log in is tapped we want to do some of the similar things right validate the text fields in this case it would just be making sure that all the fields are filled in before logging in and then signing in the user and so let's just get rid of this so we're going to you know I'm gonna skip this I'm gonna skip this part because it's basically the same thing as the sine of view controller and this video is getting pretty long already so I'm just going to do the signin part yeah so in fact I'm just going to do that right here and then we are going to take a look at the documentation and I'll show you how to actually sign in a user let's go back to I Oh s password authentication and Here sign in the user with email and password all you have to do is to use this signin method and you pass in the email and password and you get back the user and if there was an error or not and that's it so you know you can use a lot of the same principles as I showed you in signup you know I'm not gonna break things up into methods like this I'm just going to code it up right here just save so save us some time okay so we're gonna want to import firebase auth at the top and then we're going to type auth we're going to get the auth object and then we're going to sign in with email and password so make sure you've got the right one here in terms of the email and password so I'm gonna let email equals email text field we have that right oh I don't know why I called them first name and last name text field sorry when you guys were watching me type that out you must have been saying no Chris that's wrong okay so email text field and password text field but now I gotta have to fix it in the store board so let's go back and fix it because I've just changed the property names all right so my mind must have been somewhere else so I'm rightclicking this guy I'm breaking the connection new referencing outlet that's gonna be my email text field and this one I'm gonna break that connection new referencing outlet that's going to be ha vortex field so there I've fixed the connections we're gonna go back to the login view controller now so email text field dot text dot trimming characters white spaces and new lines let password equals password text field dot txt trimming characters white spaces and new lines so you definitely do want to do this you know create your own validate text fields method just like I showed you and sign up view controller because these two lines I'm assuming that this is not nil is I'm forced unwrapping it so up here you need to check if there's any errors right and if there are then you want to show the error message and and not run this code down here this is assuming that all the fields are valid so assuming that all the fields are valid we are going to try to sign in with the email and password and let's open up this closure you can see there's that result parameter and there's an error parameter just like we had before so if error is not equal nil then couldn't sign in and here you'd want to show the error message so you know error label dot text and this time I'm going to assign it to the localized description you might not want to do that depending on what to say so you can try out different scenarios like try typing in a bad password or no password or whatever and see what sort of text gets shown in here stuff thought error label dot alpha is equal to 1 so that's showing the error else if there is no error that means that the user has signed in successfully and in that case we just want to transition to the home screen in which case it's it's just simply this code right here so I'm gonna just cut and paste that right there right so we will be able to log in now the only problem is that I forget what I swear oh I remember what password we did so we can try this out so this is wrong now setup elements for styling it that would be email that would be password and let's run the application all right I've got some more errors so let's check it out okay so this is in the login view controller when you're referencing things inside of a closure use the self keyword right there to be more explicit about what you're referencing all right so now build succeeded simulator let's try and log in now and the last part of this is just to add that movie in the background so I'll show you how to do that oh we don't have placeholder text here so this this should be email this should be password what I had tom tdotcom and I had tester one two three four star I believe yeah so that worked and we see this let's try it bad pass her and just to see what happens I'm just gonna type in any garbage yeah that is true all right you got me password isn't valid or user does not exist we can fix this by making it multiline so we probably want to do that with both of those labels clicking the label and then changing number of lines to zero so click that label change some of our lines to zero and that's going to make a multiline and let's add some placeholder text while we're here so for this login field this is going to be email and this is going to be password all right so we're nearly done here I just want to show you how to add the video in the background so in our navigator here I am going to add a new group for the media and this is just a random video I downloaded from a stock photography site and I'm gonna drag it into Xcode make sure that add two targets is checked I don't know why this is unchecked and make sure that that is checked so that you're actually adding it to the this target and then copy items if needed is great because it's gonna make a copy of it in your project folder I'm just going to reorder this folder down here oops I've actually put it in here don't want that alright so here's the video that I've got it's from video blocks as you can see it I didn't pay for this video it's just for demo purposes and you can see that it it works at a normal pace but in the demo I actually slowed it down and you'll also notice that this video isn't formatted I mean height and width wise it's not formatted for an iPhone screen or a smartphone screen right so ideally you'd want to find a video that's more well suited for the aspect ratio of a phone but for me I just I just took this video I enlarged it and then I shifted the frame so that I could make it work I don't know if you actually want to do that or not but I'll show you how I did it which I don't think I would do that for for a real app you know maybe I would I mean maybe I would it would it depend so anyways in working with the video player classes we have to use AV kit that's the framework that contains all of that stuff so let's go ahead and import AV kit and then in here let's declare our player sorry video player and this is going to be a type of AV player okay and then I make this optional because we're gonna initialize this or create the object and initialize it later so then there's also something else called the video player layer so this is going to be a V player layer and this is actually as you can see here manages the players visual output this is actually what the user sees and this is what we're going to be displaying in the background so here's how it works the AV player item is going to be the media and we're going to create that AV player item and point it to our mp4 file that we just added and then we're going to use the AV player item to initialize the AV player and then from the AV player we are going to create an AV player layer and then that's the one that's actually going to get displayed so this property that I'm declaring here is an AV player layer we don't need to declare a property for the player item we're just going to create that where we need it we're going to override view will appear and we're going to show the video player here set up video in the background and we're going to set up the video okay so then we can declare that function down here and the reason why I'm doing it in view will appear rather than viewdidload because just in my experience if you're working with something that's going to get displayed visually sometimes in viewdidload the view actually hasn't appeared yet hasn't been you know it's loaded into memory but it hasn't shown up and when you're trying to put things on the view when it hasn't shown up yet you run into problems especially with maps and stuff like let's say in viewdidload you try to display a map and then you try to go to a specific region or something like that that's not going to work at this point so when you're doing things like playing videos or playing sounds or trying to transition the map to somewhere doing it in via will appear or view did appear usually as a safer bet you could you try and viewdidload first and it doesn't work yet then you can try interview with a peer review did appear for these setup elements it's fun to do in viewdidload because here you're actually changing properties of that object and so that will persist even through when the view will appear in view did appear but when you are trying to change like in the map example when you're trying to zoom the map into a different level but the map actually hasn't been displayed yet then that could be a problem so that's just that's just a habit of mine to do stuff like that in here okay so we are going to create the video player item create the player create the layer and then we're going to adjust the size and frame and then we're going to display it and play it we're going to add it okay so let AM equals AV player item and this is going to expect well this is what I'm trying to give it a URL where I've been in order to get a URL to that specific mp4 we have to do a couple of things okay bundle alright so what happens I don't know if I've explained it in this particular tutorial but all of your assets your sound files and stuff like that get bundled together with your app in what's called an app bundle and that app bundle gets put into the app store or downloaded to people's phones that essentially contains everything your app needs to run so we need to get the path to that particular mp4 inside of the bundle the thing is you don't know that path right now easy way to get that is just to use some existing classes and methods that we have to get that so path for resource of type that's what we want so the resource name you specify here and that would be login BG and the type is mp4 you don't need to specify the period now this returns an optional string in case I can't find that resource that you're specifying here it's going to return nil so let let bundle ha equal that and here we're going to just write a guard statement just to ensure that that's not nil that it has found that guard bundle path not equal nil else return there's nothing we can do if I can't find that in before there's no point in continuing so we just write that to assert that we've actually have a path to that resource so now let you our l equals we're going to create a URL object from that path file URL with the path bundle path and I'm gonna force and wrap it because we already have this guard statement indicating that it should be something should be a real actual string and then we're gonna pass in that URL object in here to create the player item alright all of that just to create the player item now we're going to be able to create the player so a video player is equal to AV player and we are going to pass in the player item that we just created and then we are going to now do the player layer and create a new player layer object and we're going to pass in the video player all right so this is I'm gonna force unwrap it alright so now we're gonna adjust the size and frame so this I did through a series of just testing it out running it and adjusting it so I mean I'm not gonna do that here I'm just gonna copy the code that I used in my completed project because I don't want to do that testing all for a Kent but I'll explain to you what this code what this code does and how it came to that conclusion so for the player layer I'm adjusting the frame while I'm creating a new frame for it and I am blowing up the width four times but I'm keeping the same height and then I'm positioning it I'm moving it left by one point five times the width and I'm keeping the Y at zero so that's you know what I'm gonna show you how it looks like I'm gonna comment out this line without me changing the frame at all so you can see what it looks like and then I'll show you what this adjustment to the frame makes it look like this line of code is inserting that player layer into this view controllers view in its core animation layer as you can see here the layer used for rendering and I'm inserting that player layer here at position zero so that's going to that's going to display it as you can see as you will see so and then the next the last thing to do is just to call video player play immediately and you can specify a write which I did zero point three to slow it down so let's run the app right now and you can see what it looks without that adjustment to the frame all right so maybe it couldn't find login BG's so I don't see that here so let's step through the code let's put a breakpoint right there and let's rerun the app and let's debug this so there we go or step through and actually it was able to oh I know what's wrong we even though so we commented this out we actually do need to set the frame but I'm gonna set it to like a normal frame so I'm gonna set it to the same I'm just gonna set it to zero zero so position zero zero at the top left corner and the width is just going to be you know one times the width of the view and one times the height of the view itself so I I made a mistake when I described this earlier this is not four times the width of the video itself this is four times the width of the size of the screen right so I already explained that in a second so let me just show you what that looks like here all right so I can remove my breakpoint and just continue running cuz so that's what that looks like right there then you can see it is playing at a slower rate because I specified 0.3 now let's adjust the frame so let's comment that out and comment this in so I'm moving it to the left one and a half times the width of that iPhone screen and for the width of the player layer I am saying that it should be four times that width and it should be you know the same height so when I run it with this frame then you can see that it's actually blowing it up a lot now I think one question in my head now that I'm looking at this again is that you know why isn't this really stretched out because I am stretching the width without stretching the height and I think that you know if I let's say if I do half and that's why I said you're gonna have to play around with this and that's why I also don't think it's a very good solution I think it's better if you actually find a video that's suited for this sort of aspect ratio then you're gonna get something like that and I just had to do all of this because of the sample video that I got so anyways I'm gonna wrap this video up because it's gone a long time but I hope you guys have learned a lot from it one more quick thing I want to mention and that is that you can download the source code for this project there's a link in the description below the video now when you click through that link and go to that page the only thing I ask for in return is your email address and no that's not the spammer to sell you anything I email you guys when I release a new video so you guys can always keep up to date with all of my latest tutorial releases and that's the only thing I ask for in exchange for the source code for this project which I've worked really hard on so I hope you feel that's worth it you can unsubscribe at any time now if you like this tutorial and you want to see more I am going to produce more for our based authentication videos so if you don't want to miss it make sure you're subscribed and hit that Bell icon so that you get notified when the next one comes out and don't forget to give this video a big thumbs up because it really helps the video it really helps my channel overall and it I get really pumped up to see a whole ton of likes so thank you so much for your support thank you for watching I hope you guys learned a lot I hope you had fun and I will see you guys next time
