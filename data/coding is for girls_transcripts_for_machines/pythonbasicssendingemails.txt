hello everyone I'm Ola and this is scouting is for girls if you are here and you haven't watched my video about reading CSV files in Python you need to stop and watch their video first because we are using python script we wrote last time as a base to the project we are building today and today we will take all email generated in previous video and actually send them to the people I'm so excited about this video and I hope you are excited too one of the most horrible things I sometimes see is when people send the same email to tens of people and they add every single email in a recipients this way I know email address is off everyone you send this email to and this is bad because email address is a personal data and you shouldn't share it with anyone without the consent of the person it's pretty much like giving names and phones of all your family and friends to anyone this is so bad one of the ways to prevent it is use PCC field in your email so you don't see email addresses of all the people who got the email however there is nothing better than personalized email that contains your name your personal data something that feels like written especially for you this is so much better and much more personal however it is very hard if you have hundreds of emails to send but worry not because today you will see how to do that in my previous video we'll learn how to load the data and generate personalized emails time to send them but first we need to talk about emails and something called SMTP simple mail transfer protocol we already talked about how internet works and that amongst others it uses HTTP protocol when you type something in your browser it uses HTTP to communicate with other computers out there connected through the internet but when it comes to emails we use different standard different protocol SMTP this is the format you need to use if you want to send email through the internet so other computers other mail servers will know oh yeah this packet of data is actually an email and should be treated as such thankfully we don't really need to go into too much details of the protocol because python of course comes with a standard model that helps us create emails so all we need to do is import SMTP Lee model and use it let's open the file with the script from last video and save it under new name for example send emails.py now we will take quick look at python documentation for SMTP leap module link as always will be in a description box below what we need is something that connects to our email via SMTP and send emails there so we will need this SMTP to connect and then thoracic function called send mail we will use using this tool will connect us with the mail server we are using and then we'll send all the messages we want to send to all the recipients now about mail server this is something that is running all the time waiting for emails to come or emails to send we could set up that and configure that locally on our computers but that will over complicate this video and it will be super long so instead of that I'll just use email and especially for this video I decided to create a Gmail account coding is for girls at gmail.com I will send all the emails to this mail server so what we want is our python script to generate the content which is already done and push it to Gmail mail server to send this email on our behalf so the first thing we need to give our script is the email address from which we will be sending the emails so in our scenario coding is for girls at gmail.com and the password to the account now you should never ever share your password with anyone don't save it in a file and post somewhere in Internet don't leave it somewhere lying around on the computer that other people use this is your secret password and only you should know that and what I'm doing right now is only because I wanted to keep this video simple and I didn't want to have it like 30 minutes long so please please don't do that at home and if you really want to try it out just make sure to create a separate email account you don't actually use so something that even if it's hacked it's perfectly okay so what I'll do now is take my credentials the email and my password and put it into settings file okay I will create a separate file on desktop that contains my newly created email and password I will call the file settings.pi I will store email and password in constants sender in email equals coding is for girls at gmail.com and send their password equals and here I'm typing my secret password but you will not see that I am saving the file and go back to the send emails.pi file we will import these two values at the beginning of the file like this from settings import sender email sender password now we need to connect the Gmail SMTP server we will do that using SMTP leap Library so we need to import it first so at the beginning of the file we type import SMTP lib now let's scroll down to the place where we are about to start processing data from the CSV file just before the for Loop we need to start a connection and we do that like this SMTP we will store the connection in variable smftp equals SMTP lib dot SMTP and as a parameter will give smtp.gmail.com the argument here smtp.gmail.com is specific to the email server I'm using so Gmail I am sending everything from my gmail address so I'm using that but if you use different one just try to browse what value you should use for example if you use Yahoo you could browse for SMTP server address Yahoo here it is I found it smtp.mail.yak.com okay let's go back we already know how to connect to Gmail SMTP server now we need to log in with our email and password if we take a look at python documentation we will find a method login we need to give a username so the email and password so in our file we will type SMTP Dot Login sender email sender password okay so it's time to send email right let's go to python documentation once again and look for something that will help us with that and here it is send mail method it expects us to give a sender email address first then recipient address and the message let try that in the file we will replace all the Sprints with sendik email we will do that like this SMTP so our connection to email server dot send mail now we will open parenthesis sender email this is the one we will be sending emails from so in my case coding is for girls at gmail.com then email this is the email of the recipient and finally our email message we generated above cool now the last thing let's close the connection with Gmail server here after the for Loop we will do SMTP quit let's save and try if it works and one more thing I made sure that all email addresses in applications.csv are my emails when I test my python script and I don't know if it works or not I don't want to spam all the people out there okay let's type python free send emails.pi oh no there is an error SMTP auf extension not supported by server this is bad we did something very very stupid we pretty much took our email address and password and send it in the plain text for the internet without encrypting that that means that any person who is looking at Pockets that are sent from our computer just learn about our email and password this is not good to prevent it we will use TLS transport layer security let's open python documentation once again and see how to do that there is a method called start TLS it says all SMTP commands that follow will be encrypted you should then call echner again oh what is eclo let's take a look this is something we should call to identify ourselves when connecting to SMTP server okay so that means we need to call eclow first then we need to start transport layer security with start TLS and then do eclip again ah and since I sent my password without encryption through the internet already I also changed my password immediately let's save the file and try it now Python 3 send emails at pi this time script finished without error but let's check if I received any emails at all so I'll open my Gmail account to which I was sending all the emails and the one I changed password to a moment ago and here they are all the emails we send Evo will open the emails we'll see that every message is customized for each person from the spreadsheet that is great this is amazing we just sent emails generated Based on data from spreadsheet and this way we can pretty much send tons of emails like this in a one go but there is still one thing that is not perfect yet not sure if you noticed that but all the emails don't have any subject yet let's fix that we'll open the send emails file and inside the if where we generate email content we will also decide what the subject should be if the person is accepted we will store in variable subject Workshop application accepted and for rejected people we will have subject equals Workshop application not this time but how to add subject to the message we're sending well it is quite easy it turns out that all you need to do is concatenate the message with subject and you do that as follows subject colon then here we will add our subject then empty line and then the message we want to send let's do that email message equals subject colon now we will have placeholder slash n which is newlines dot format subject message it will replace message with email message inside send mail click save and try it in console Python 3 send emails to the pi the script finished so let's check if send emails had the subject this time and yes they do this is amazing and I hope you are super excited and you just can't wait to use the knowledge I shared with you to create something useful however there are some warnings for you do not share your email and password don't save it in a file don't share it with others don't leave it on computer laying around if you happen to send your email and password without using transport layer security make sure to change password immediately and one more thing if you use twofactor authentication the script we just created won't work there are other ways how to do that you need to generate some special key and so on but this is topic for a separate video and last but not least do not spam people we all hate useless messages and all the ads we are getting and receiving them is super super annoying so please please don't do that remember send emails only to people who agree to receive emails from you without their consent you shouldn't do that okay that's it for today let me know in the comments what kind of project you would like to write on create which will use sending emails I'm really interested in all your ideas and what you want to build and if you want to learn how to program with me make sure to subscribe to this Channel and stay tuned have a lovely day and see you thank you