hello everyone and welcome to the 12th video in our Survival game series done by Braes I am the CEO of brais and today we are going to take a look at something a lot of you have requested enemy AI so scripting enemies this is a very difficult subject and it's also difficult for me to explain um it can be very cryptic and and um there can be a lot of different aspects to it that you have to customize to whatever kind of game you're making but I think I have come up with something that works pretty well and uh something that is pretty somewhat easy to explain and understand for you guys um I have decided to split it up into two parts though the part that this video is going to be uh showing is the simple AI scripting this is the script with we going to be making and um I've uh written it out beforehand just to make sure that I don't make any errors but this is what we're going to be making today and I'm going to explain everything and I definitely do not um expect you to understand everything in this script it is hard then we have the AI script this is a lot more advanced um no not a lot more advanced but it takes care of stuff like physic interaction and um also some um logic with the um Enemy being attacked he will get more angry and uh therefore Chase uh you the player more persistent so um there are some pretty cool aspects to this though I won't include it in this tutorial because I think it's too early for you guys to um to learn yet um so um but I will include it in the assets pack though which you can go ahead and download from our website so let's go ahead and make a new window here so I can quickly show you where you can get them because people have asked me over and over so if you go ahead and open up your browser and type in bra.com you'll get to our website and the second Banner here the unity tutorials just click that and you can just download the assets here it will be in a raw file and I will include both of these even though I will only show you this one all right so let's get started that was a long intro okay so as always I've to opened up unity and uh today we are going to take a look at this guy before we get into that I want to make one quick adjustment to our player um because our player currently he's a little short compared to a human being so I want to make him longer and instead of just scaling him in the Y um I want to uh scale the different parts separately else we are going to scale everything that is pounded to it which means weapons armor and things will start looking weird so um if you're still using this default um do as I tell you're here so first of all in the character controller the collider here I'm going to change the height from two to three that's a little more realistic so you can see it's now taller and uh if we go ahead and open up the player and go on the graphics let's make sure that we can see this change in the graphics also so we can go ahead and scale the graphics up to something like 0.75 and now you can see that the colliders and the collider and the graphics match up and at last I want to move the main camera up there we go so if we go into the game view you can see our character is now a lot looking a lot better and I can see I've made a little error in the positioning of this camera you're going to have to play around with this um looks like I have to drag it down yeah that looks better okay so um for now our enemy is really short um this won't matter in um in what we're doing here but of course you can just go ahead and scale him up all right so let's create the script the enemy script so uh for now it's going to be in a separate script from the enemy logic and uh I just want to go ahead and rename the enemy logic so click it and you will thereby open it automatically in the project and um you can go ahead and right click rename and just click the name and I'm going to call this um Health enemy health because that is not all the logic okay so again click the player click add component new script and we're going to call this H uh AI simple create an ad double click it to open it up in mono develop this video might be split up into separate uh even more parts um I'll see if that is necessary depends on how long this is going to take I really want to do go in depth with this because I think most of the tutorials out there just give you a noncomplete script and doesn't even explain propably properly um how it functions no offense to anyone there are good tutorials too all right so uh let's start by by making a variable and this variable is going to be called distance and you can just go ahead and make a semicolon right after know what I'll make it capitalized so and this is because the type is something we are going to declare later so U let's make another one this is going to be the target what we are going to be chasing in this case the play and this is going to be a transform then we are going to create another variable and we're going to call this look at distance so look at distance and it's going to be I would say equals 15.0 seems like a good number now you know what let's make this even bigger let's make it 25.0 um I did some testing earlier and that turned out to be pretty good of a value a new Val varable attacks range and this is going to be equal to 15.0 and yet another one call this move speed and this is going to be 5.0 and last one this is going to be damping and this is going to be equal to six poo all right so um quite a few variables I know trust me um I'll just explain what the individual indidual variables are going to do for us as we come along so I just wanted to write everything out so you can see what we're going to use now let's create the update function I went ahead and deleted it but um we can always just make it again so function update then the two semicolons and the bracket Keys okay so now now we're going to type distance equals V vector vector vector 3. distance open a semic Cod no uh a parentheses and um I think I made that mistake before too I'm sorry about that Target dot position comma transform Dot position okay so basically what we're doing here is we are making the distance a line we're making uh we're making it so the variable distance is what's called a vector 3 and a vector 3 is a line in 3D space and if you have ever had some more advanced mathematics you have used it there too so um basically vectors you use for line calculation in a 3D space and so we want to draw the line between the target position the one we're chasing after and our position and so we can measure the distance from us uh or sorry from the um the enemy to what it's chasing in this case s all right so um I've made some spaces and uh let's go ahead and type if distance is smaller than look at distance brackets renderer do material do color equals color do yellow right so what we're doing here is we're simply saying that we're simply making a um a vector so we are measuring the distance between the enemy and us and we are seeing if this distance is smaller than the variable look at distance if it is we want the enemy to shift its color to Yellow all right so let's continue now we'll write if oh sorry I missed something no um before we close off the if statement completely um we'll write one more thing in here we'll call a function we'll call the function look at so what we're doing now with this is if statement we changing its material to see what state it it's in this is just a help for us so we can see whether or not it's just looking at us frightened by us or it's chasing us or it's completely um ignoring us so if the distance is smaller than the look at distance it won't be ignoring us we want the enemy to start looking at us it has now detected that we are nearby and we want it to notice us so it will rotate to us so look let's go ahead and make the function that will make that happen so you can see how we are calling a function let's make that function function look at and this is of course outside of the update brackets open and close parentheses open and close brackets and inside those brackets we want to make this we want to type V rotation equals querian and Quan is uh quite a frightening word it's not as complicated as it sounds it's basically rotation not not all the time but um for this it's basically rotation do look rotation target. minus transform Doos close the parenthesis and end up with a semicolon so this is going to be creating a new variable called rotation which is going to store the Quan DOL rotation target. position minus transform do position I know this sounds quite a lot and I won't be explaining this too much as it's a little too hard to understand for some at this point and that's all right I sure didn't understand this when I was um when I had watched only 11 videos assuming that I'm the only person you watch on YouTube but anyway um so that will store a rotation and now we want to type transform. rotation equals Quan do slope transform. rotation rotation comma rotate the variable we have just no rotation again the variable we just created comma time dot Delta time space times damping the variable we created earlier called damping all right so let me try to explain this line to you we want our current rotation and by r i mean the uh enemies so transform. rotation because this script is attached to the enemy that will be the enemy's rotation is now equal to quion do slope Quan do slope will slowly turn when we apply the damping so this means that we want to shift from the transform do rotation our rotation or the current rotation of the enemy I should say to pointing towards us and it should do this in the tempo of time the Delta time times damping damping is a value made by us and it will basically smooth out the um smooth the animation or the uh movement the rotation of the enemy and time. Delta time that's just going to make sure that no matter how many frames you're running at um the rotation is always going to be the same so this basically rotates the enemy towards us as smoothened as you would like it to be based on the rotation we got right before with this line okay so now let's go back into the function update and let's type if distance is greater than that should be capitalized is greater than Lo at distance so now the enemy is a longer distance from us than the look at distance that means that we want him want him to ignore us so the renderer oh typ out the renderer material do color should now be be equal to the color green all right so now we have two instances either the enemy is within the range no sorry um the enemy's Target is within the range that we have set and then it will be looking at it or it's not within the range and it will be ignoring with the color green I'll just space out this a little more and let's create yes another if statement so now we're going to be typing if the distance is smaller than attack range again the variable we created earlier then we want something to happen and again I've stored this in a function and I've called it attack all right so close it out with the semicolon and we also want it to change color of course so let's go ahead and write just above that renderer do material do color you can almost guess it by now equals color color dot red now he's aggressive now he wanted kill us so um let's end up by um making the attack function all right so type function attack the parenthesis the two brackets and inside them we're going to type transform do translate open parenthesis Vector 3 again the line forward this time we just using the vector 3 as a direction times move speed times Delta time and remember time. Delta time is only there to make sure that frame rates doesn't affect anything all right so um what we are we have Happening Here is now we have our transform. translate Vector 3. forward time move speed time Delta time this means that the current transform is going to um is going to be affected by these so we want the enemy to move forward Vector 3. forward by the move speed that we have set and not be affected by frame rate let's go ahead and see if we have any errors I can see we have oh so I forgot to close out out close it off with a parenthesis so I'll just make that right before the semicolon and we have more errors okay so I found out what was making our errors and um if we go ahead and head back to the script I forgot to delete out the prma strict so that should fix most of most of it but we have one left and that's because I typed render not render R so now that that is fixed fixed let's go ahead and go back into unity and try out our game oh of course we have to assign the uh Target variable so we are going to drag our player into the target variable slot under the AI simple scripts let's also go ahead and move away the enemy let move him over there now we have some space space to go on so as you can see first of all um it changes the Shader so that he now looks green and uh when we get closer he'll shift to a yellow color and when we get and and now he's looking at us and when we get even closer he'll turn red and he will start chasing us so this is the most basic AI you could just make a simple if statement if you're a little impatient that when the distance is um lower than um hit a a hit variable that could be like about three then he should call out a damaging function on the player or just destroy the player but um we'll definitely be covering that in future tutorials let me just go ahead and quickly demonstrate the diff difference between this script and the more advanced in the more advanced stuff like this is fixed um so if I can just run a little faster oh see he can't fly that's that's one thing for sure and also um he can't go through walls you can see him here clipping through walls and if I was fast enough to actually um run past him I would also be able to show you him going directly through any kind of wall or ter which also means that he can be lost inside the terrain and uh you definitely do not want that to happen in a in a future game that you're going to put out um it's one thing I didn't want to code in the uh kill pill game we made um I was a little lazy there but okay so I just want to tweak the variables um so I'm going to TW the look at distance to 25 the attack range to 15 and then move speed is maybe a little dramatic but we'll start with this and then go ahead and try to play it again and there he noticed me that's a pretty good distance and there he goes to attack me yeah that was AI scripting I hope you enjoyed it and um I'll see you in the next video oh