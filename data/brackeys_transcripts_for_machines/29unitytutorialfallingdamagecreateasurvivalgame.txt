hello and welcome to video number 29 in our survival game series done by practice I am the CEO of Black Keys and in this video we're going to be taking a look at applying fault damage to our player so whenever our fault our player falls from a certain height it will apply damage to the player stat script depending on how high okay cool so we're going to be needing a script we applied in tutorial number 20 this one called the FPS Walker enhanced which is something I got from the internet and then made some improvements and changes to to allow for stuff like crouching so if you don't have this applied please go ahead and watch tutorial number 20 to learn more about that and of course this new updated version will also be included in the assets pack which you can get from our website and if you don't know how to import it then we have a bonus video showing just been awesome anyway let's get started so as always I've opened up unity and you notice that our player is pretty far from the ground and if we just select him we can see over here in the righthand side in this inspector that our FPS Walker enhanced is indeed on the player and in here we have a lot of settings the ones we're going to be focusing on the de falling damage so here we have the falling damage threshold and that's what adjust how high the player has to fall above the ground for it to register at all but if we hit play now we will notice that our player doesn't die though inside of our console it will tell us how far we fell from in unity units so we have to somehow apply this to our player stats while also giving some control over how much falling damage he needs to receive and also I would like to just make this simple ability to enable and disable falling damage at all okay great so let's first of all adjust the falling damage threshold to something we like I don't know if 10 is the perfect amount we'll we'll quickly figure that out so let's see here there it registers that's maybe that was 13 units and there are also registers that might be a bit too high now actually I like that a lot but again this is depending this is completely dependent on the game you're making some please test this out and don't just go with the value I'll I went with here great so we'll get him high up in the air here and then open up the FPS Walker enhanced script here we go so that is quite a few things going on here but most of this you can just ignore we're going to scroll down just a bit to read says if falling and this is basically where we call the fouling damage alert function and I just quickly want to rename that because now it's no longer an alert so we'll call this apply falling damage instead so delete the alert part and Adly apply and then go all the way down to the button of the script and do the same apply falling damage now we can just go ahead and make the descript actually damage the player that's the most crucial part so under the function apply falling damage will make a new line right before the debug deadlock and here we're just going to send a message using game object that sent message to the players that script to call the function apply damage because if we open up our players stats v2 we can see that we have a function here called apply damage which has an input which is the damage amount and that we'll just call the that we'll just subtract the health and then check whether or not we're dead and so that's just all we need to do so now we can just type game object with the small G that's send message open our parentheses apply damage and I've made it with a mm and I know that's a typo but I just decided to stick with it because I made several of those it's a bad habit of mine but please do change it in your script if you want to so apply damage and it's just here um so apply damage comma and then we're going to type full distance close it up and then a semicolon and now when we go back into unity and hit play we take a look at our health in the right hand corner and indeed we lose health when falling but we are falling from a really high distance and not dying and this is really unrealistic and also we still don't have the ability to turn on and off fold damage at all so let's go ahead and make those two adjustments so slide all the way up to the top and let's make some new variables right above the falling damage threshold let's type var enable falling damage equals true so that's going to be true now all the falling damage is going to be enabled by default let's also make another variable and I'm just going to make this right under called var falling damage multiplier and what this is going to do is it's going to determine how much we want to multiply the falling damage and then subtract from health so if this is equal to one we're just going to subtract the amount of units we fill but if it's equal to two we're going to we are going to subtract double it and if it's equal to 0.5 1/2 and so on ok so now that we have made those two variables let's go down to here where we are calling the function on the if folding remember if you can't find something in the script you can just go ahead and try a press ctrl F or command if your command if if you're on a Mac and then you can just type in what you're looking for so I'm looking for apply damage apply falling damage and that will highlight it in the script and you can just press ENTER until you find whatever you want so that's just a handy thing to to always remember but inside of this if statement we are trying to figure figure out if we fell and we want to just add a parameter so we want to check for something more than just that and we do this by using these two ad and signs so two of them will make it check for this and whatever we type nine and that's going to be enable falling damage sequel to true so we both need to fall and we also have neat we also need to have falling damage enabled now we can scroll down again to read such game object that sent message apply damage following this or fall distance and then we can type x and then the falling damage multiplier let's see if we get any errors it looks fine these can just be ignored and now inside of the inspector panel you can see some new variables showing the enable falling damage which we can take on and off and the falling damage multiplier so let's see if this working if it is we should be dying now and we did and now we can hit respawn and we are back in the game so that's basically it for this tutorial guys I hope you enjoyed it and this was just a rather short one but well I'll just quickly make a few changes and keep the camera running because I think I shouldn't make anything while the camera is not so if you just want to see me do some fire animation or just animating the light here just a few tricks then just stay for a couple of minutes but this is really the ending of the video so thank you for watching and I'll see you in the next one okay so those of you who stayed will just be animating the light here under the campfire because it's annoying me a little bit that it's not flickering even though the fire is so let's just move down our player again to get him back on solid ground and now we can go to a campfire and we can see I dragged in the default flame prefab here which comes with the standard asset and under that we have allowed light source one now we can go ahead and bring up the unity animation so window animation or control six should bring it up here just brought it up on my other screen I will just go ahead and dark it down here and now we can go ahead and adjust the light properties for this game object but we'll first hit the record so hit that red button and let's save this on the animations call this slow light flicker a light flickers flow actually light flicker slow hit save and we'll just remember to set this to loop and now we can just go ahead and quickly make an animation for this this could of course also be done through scripting though I just wanted to show you a very basic animation now and how you can set it to loop without that much work so at first I wanted to be glowing it's at full amount so I'll just quickly add a key or a curve actually we will go with curve and now you can go forward to let's say one change it to 0.9 maybe a bit less oops we're animating the enabled here that's really not what I wanted so we'll just delete that again I wanted to animate the intensity there we have it so here at curve go forward to about one go down to like 0.7 and we can see it's just a very tiny amount so it creates a little bit of detail to a game now let's go to something like 140 and then change it to 0.8 again like that you can swim out of it we can maybe try playing this and that just gives some very subtle light flickering and we could of course expand on this to make some fast changes too so the intensity down to say zero point six here don't know if that's too much and then have it rise to 0.85 and then go forward some more and go back to 0.8 so it will loop correctly and let's see if this is looking out great the drop is a little big for me there at 0.6 so let's to 0.7 instead hit play and I think that looks really great so that was basically it for the small animation there let's just have a quick look at it in game remember to check play automatically so let's just maximize the screen and that's really awesome just a little bit of light flickering and this will probably be more visible once it gets nighttime yes it is and that looks really great okay so the next thing I wanted to do was just to quickly take our crosshair here and drag him under the player so drag him under I'll play it there and that was basically it for that let's also see ro add the position variables here there we go just so we have the crosshair oriented towards our player and then I also want to let's see if there any more changes that actually looks pretty good we could go ahead and disable the audio zone but I think that's pretty moody I'm speaking with an audio guy at the moment who might be interested in making some cool music for the game so that would be really really awesome but we'll see but yeah that's basically it for this video guys thank you for sticking around and I'll see you in the next one