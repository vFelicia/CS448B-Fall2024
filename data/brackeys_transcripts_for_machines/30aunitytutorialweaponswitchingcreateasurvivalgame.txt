hello everyone and welcome to video number 30 in our Survival game series down by Braes I'm the CEO of Braes and in this video we're going to take a look at a much much better method for doing weapon switching than the one we had before so we are basically going to create a whole new script which is going to take care of stuff like uh being able to switch weapons using the scroll reel and uh also the different numbers on the keyboard and so we can have more than just two weapons that will toggle on and off uh so that's really exciting uh and let me just quickly show you uh this drawing I made uh just to show the basic functionality of the script we're going to be making uh so it's basically split up into two parts the right hand side inside of the square here and the left hand side and over here we're going to be changing uh a variable and this is just going to be changing a number and we're going to do that depending on the scroll reel and the uh button or the number buttons and over in the left hand side we are going to uh enable and disable different weapons depending on that variable okay so let's go through this uh rather quickly um the variable everything is depending on is the current weapon and that's going to range from zero to the max weapons so the maximum uh number of weapons we want to carry uh so if we set the max weapons to two we're going to be able to car Carry Three weapons because the current weapon will go from zero to one and to two and we're going to be able to add onto that or subtract from that uh using the scroll wheel up and down input or we are going to be using the input. get key down 1 = 0 2 = 1 3 = 2 and so on if this is not clear to you yet it hopefully will be uh it's a little bit confusing uh confusing with all the numbers and so okay so once we have this current weapon uh variable under our control uh we will send it over to another function called select weapon and this will basically find the children of our me object so find all of the different weapons parented to that uh object and then it's going to assign numbers to each weapon so um the first one is going to be zero the next one's going to be one and so on then it's going to search through and disable all the weapons that doesn't have a number that matches the current weapon once it finds the weapon with a number number that matches the current weapon then it's going to enable it then it's going to check if the uh weapon uh is actually a weapon or if it's just uh fists and so if it's just a fists weapon so you don't want the uh the animation to play a swing animation but instead instead wanted to play a punch or this could also uh be the case for different kinds of weapons if you want dagers to have some sorts of animations and swords to have others uh then you can check here whether or not it's a sword whether or not it's a dager and if it is it's going to enable the weapon on meaning that we're going to play Swing animations and if it's not a weapon we going to disable the weapon on and so it will play Punch animations and you can have the pr same principle going with different kinds of weapons but to keep this simple we'll just have the weapon or not weapon okay so as always I've opened up unity and you can see we have our arms set up here as always and under the player you can find them under our main camera and there we have the arms 05 and if we just go through the rig or the amateure we will find the uh empty game object holding all of our weapons so under our arm Armature go to master inner arm right and again you you don't need this complete rig you can of course get it from our website for free uh but you can also just have any kind of empty game object and parent weapons to that uh but in our case we have it inside of this rig since we wanted to follow the animation of our arms okay so under the hand right the hold right and then the me we have our different weapons so this is where we want to create the new script so go to add component and then call and then new script and let's call this weapon switching 02 um and whoops I've already done that I'm just going to do test after that but in the assets pack it will be called zero2 and the language is going to be JavaScript now hit the create an ad button and we can double click it to open it up in mono develop here we go okay so we are going to rename the function start to function awake and we're going to use that later so for now we can just keep that uh but I will space out the bracket keys I just like it this way uh I think it it keeps it more organized okay so let's first declare some variables and two you know we are going to be needing are the current weapon and the number of weapons so let's type VAR current weapon equals zero by default then a new one VAR and let's call this Max weapons and it's going to be equal to two by default and remember whenever this is two the maximum number of weapons we're going to be carry uh be able to carry is going to be three because we count this zero okay great uh we are also going to need one last variable though and this is going to be the animator and that's because we want to access our animated controller if you have one uh we have for this series and uh we want to be able to set the uh controller uh tell the controller that we have a weapon equipped or that we don't and so uh we want the animator so type y the animator of type animator with a capital there we go actually let's make that one decapitalized great so now in the function update we want to create the part where we changed the current weapon so inside the function update we'll write if input. get axis oops get axis and then open parentheses Mouse scroll reel like that remember the capital letters it's very important close parenthesis is less than one or zero sorry is less than zero then we want something to happen what we want to happen is we want to say if current weapon + 1 is less than or equal to Max weapons now like that then we want something to happen again so there and that is current weapon Plus+ so the current weapon should be one more than it already is we could also say plus equals 1 if the current weapon + one is is less than or equal to Max weapon we want uh to add one to the current weapon if not so else we want the current weapon to be zero current weapon equals zero and then a semicolon and under here we will type uh whoops let me just make sure I get this right so under the L statement we want to type select weapon current weapon and the select weapon is the name of our uh function where we will actually select the weapon and disable all the others and we want to send with it the current weapon variable so uh all of this is not something I'm going to go into too much detail about because it's really hard to explain but basically we're just making sure that when we bump up the scroll wheel it will uh add one and when we bump it down it will subtract one and uh it's going to do this as long as as it's inside the max weapons range uh and so so under this if statement we want to type else if input. get axis Mouse scroll reel is bigger than zero so if we are scrolling the other way we want to do something else and here we want to check if current weapon minus one so we really just reversing the process is bigger than or equal to zero open up the bracket Keys current weapon minus minus semic Cod so that if the uh if we don't get the uh if the mouse scroll wheel is less than zero we want to add on to it and if if it's uh if it's more than zero we want to subtract from it um so we are so if the current weapon minus one is less than or or is more than or equal to zero we want to subtract else so here we're just making sure that it won't go below zero else the C weapon equals Max weapons so it will Loop that way so whenever we get below zero it will jump up to the maximum amount and so we can just keep on scrolling through and a semicolon okay so uh if this was confusing you uh it's completely understandable uh it was confusing me when I just started out making this type of logic uh but I just thought that we should put this in our game uh because it's really really a much much better uh way to do things uh so after the L statement statement we type select weapon again we calling the function current weapon there okay so uh that's it for the scroll real part of things now we're going to make sure that it will Loop correctly and soell so after the else if you're going to type if current weapon is equal to Max weapons + one in the parenthesis and inside of the bracket keys we're going to type current weapon equals zero so if the current weapon is one bigger than Max weapons it should be zero so if it exceeds the max weapons amount we'll Loop it back to zero and we can keep on scrolling if it and then we're going to type in another if statement so if current weapon is equal to minus one and then the bracket keys then we're going to type current weapon equals Max weapons so if it gets below zero it will loop back to the max weapons amount uh okay so that's all we're going to do for looping and so on now we should actually be able to uh play this and have it work except we just need to add the function uh but for now will just have no logic inside it just to test if things are working so go down type function and we're going to type um let's call this select weapon so select weapon and we are taking some input and let's just call this input index that's just a standard uh name for the uh for an input number and it's going to to be a type integer and now we can just close off the bracket Keys uh not typing in any logic yet so save that let's head into unity and see if we get any errors it looks like we are error free and we have some new variables here so uh if we hit play now and scroll up the variable will start Chang changing and if we scroll down it will change the other way so we can scroll and it will Loop just like we wanted to and you can of course uh reverse the mouse scroll Wheel by just changing this sign so if we change this to bigger than and this to smaller than then we have reversed the scrolling effect so if we hit play now and I scroll the other way oops selected the wrong object here I play now and scroll the other way now when I scroll up it goes to two so it's adds on and when I scroll down it subtracts okay great so now let's go back in here and let's create the function uh that will allow us to just press buttons in order to press uh to change weapons so make some more space in the update function and let's type if and this is really much more simple uh let's type if input. getet key down and then open up parentheses key code. alpha 1 and the alpha 1 is basically just the numbers that are not on the keypad uh on the keypad on your keyboard so just the basic numbers on top of all of the letters and we want the alpha 1 and not the alpha zero because that's just standard for Shooters uh so remember that uh okay so let's close the those off and open up some bracket Keys whoops I'm making a lot of tyos but I can't see the keyboard because of the huge microphone shuft in my face so uh sorry about that but we'll continue on so if we press the one key we want the current weapon to be equal to zero and we want the select weapon to be called with the current weapon variable else we will only change the number and not call the function to actually change the weapons and uh remember you have to create as many of these if statements as the maximum number of weapons you want so if you want three weapons uh to be the max you'll have to uh change these if statements uh so create uh if statements for that number so if input. get key down get key down there key code do alpha 2 close it off then we want the current weapon equal to be equal to one and we again want to uh call the select weapon with the current weapon also and now you can just go ahead and duplicate this down below adjust it to so it fits this should be Alpha 3 and this should be two and now we should be good to go so let's go inside of unity and see if this is working so I hit play and when I hit the uh when I hit the two key it changes to one when I hit the three key it changes to two and when I hit one it changes back to zero and I can again still adjust this using the scroll reel which is what I'm doing now and so you can really get some nice results and uh have the player use the method he wants okay awesome so now we want to actually call the uh weapon switching uh stuff but uh I can see that this is turning out to be quite a long video so I'm going to cut it up uh off here and uh we'll take care of that in the next video so uh I hope hope you guys enjoyed it I know this was quite difficult stuff uh but I'm sure you will understand as we go forward so thanks for watching and I'll see you in the next video