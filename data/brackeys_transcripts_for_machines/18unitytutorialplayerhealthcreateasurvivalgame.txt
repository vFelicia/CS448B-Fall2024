hello everyone and welcome to the 18th video in our survival game series done by practice I am the CEO of Brack ease and in this video we're going to take a look at applying damage to our play through the enemy so allowing our enemy to actually attack all play and also making him disappear from the scene so actually killing him we won't be adding stuff like a menu that pops up and loved effects or anything like that will just make the code so that we can check with a nut here stat and so that we can apply damage to him so let's go ahead and open up unity I've already done this and you can see that everything is exactly like we left it the last time and first of all I just want to drag this door logic script under our scripts folder because we aren't going to be using that in this tutorial and then I want to find my enemy so select him and hover the mouse over the scene view and press F to focus in on him and I want to just drag him over so that we can test some stuff out with him without having to run from one point of the map to the other so I'm okay cool first of all I want to make some changes to the advanced AI script if you're using the AI simple script you would have to watch our tutorial number 15 to actually get an idea of how to do the advanced AI because it was in that tutorial we we implemented the attacking and so you could either go ahead and watch that or just download the scripts from our wits website but for now I want to remove the AI simple because we are not going to be using that either so doubleclick the advanced AI to open it up in monodevelop and what I want to do here is I want to make some a variable containing the damage and this I have already done and you can call it whatever you want and you can apply whatever parameter you want I'm just going to go with something like let's say 40 and say and if we scroll down under the function attack you can see that we have made a debug block saying that we should insert an attack here and we can go ahead and keep this but change it to the enemy attacked or the enemy the enemy has attacked and so whenever the enemy attacks us if we hit play we will get a message in the console saying that the enemy has attacked that's just to remind us and keep a good lookout for what's happening in the scene you could go ahead and delete it it's completely optional now right under this I'm going to type or actually write over it because says that it has already attacked so we'll make the attacking right above now let's write target that's the name of our target variable whatever the enemy is chasing that send message open parenthesis then we want to type the name of the function that we are going to be calling on the player that will make him actually lose damage so this can again be whatever you want I'm going to type damaged play and close this up or actually just make a comma and now we'll have to include the damaged variables to type the damaged comma and now let's do one last thing we are going to type send message options that don't require receiver and close everything up alright so what we're doing here is we are referencing the target variable which we've made up here and the target variable which will change depending on what our enemy is chasing so what the enemy is chasing that sent message and this means that we will send a message to the player in this case that we wants to want to damage him with the damage this is the amount we want to damage him and the send message options that don't require receiver simply means that if the target is equal to null if we aren't chasing it's not going to return an error but you can include this you also couldn't I'm going to go ahead and delete it I just wanted to explain that that's a pretty handy feature now that's it for changing the advanced AI script so we can go ahead and close out of that and this script that we are going to be making on the player is for now going to be much like the one that is sits on our enemy the enemy health so if we go into the enemy health doubleclick it to open it up in monodevelop we can have a look at how this works so again we have a function called apply damage this is what we in our advanced e is called damage play we could also call it apply damage then we say that actually this just may name it the same so let's call this one apply damage instead of damage player now you can see that we are applying damage with the the damage variable and we are going to say that health the damage so health equal damage and if health health gets low enough our enemy is going to die so one thing I'm going to do to optimize the script and I didn't do this in the previous tutorials because this was easier for me to explain but I'm just going to go ahead and take this if health is equal to or less than zero then we should call the dead function I'm just going to go ahead and delete that copy it and delete it and delete the whole function update and then paste it right beneath the health equals the damage because then we can inside of the apply damage function check if our enemy is going to die and this is just a little bit less tact a little less taxing on the computer because we are not checking if the health is less than zero every frame we're just checking it when it actually loses health so go ahead and save that now we can copy this functionality all of this code and paste it into a new script which we which we're going to do now but first I want to go into the advanced AI because I have noticed that the damage variable was built with a large T with a capital T so we'll change that and go up and change the variable itself also it's good to be consistent with those kinds of things because then if it would would like the enemies to battle each other this would still work just as well all right so copy all of this code and go back into unity select our player hit the add component script language is going to be JavaScript and we could call this anything I'm just going to call this play play logic or play your stats I'm going to call it play your stats because I want the script to contain more than just the health in the future I would like it to also contain how variables that define how long he gets can sprint and you know stuff like that so let's hit the create a net now doubleclick it to open it up in monodevelop and here we go so you can go ahead and select all of this and replace it with what we just copied so paste this in and here we have a functioning script already so this should actually work so if we go ahead and save this and go back into unity we can see that we can change the health of our player I'm going to set this to let's just do a hundred for now and then we can change it when we know it's working so we have the player stats on our player which is going to take care of our players health and make sure that he can die on the player we have the advanced AI which will send out the damage which is now set to 40 so that's it let's go ahead and test it out so hit play and get nearer nearer to the enemy one two and three and there we go our player was deleted we have lost the game so it seems to be working we can check in the console view how many times was that how many times the enemy attacked before we died one two three times and then it returns an error saying that there are no audio listeners in the scene and that's because our audio listener was attached to the player in the final game we are not going to delete our we'll play you whenever we die all right we are going to do something else instead we're going to pause the game and allow our the one playing to actually replay or go to the main menu so I will have some GUI pop up for now I'll just go into the player stats and I'll make it so that we don't destroy the game object but instead we're going to use a deeper clock so delete the destroy game object pod and type debug lock and then play your dart and ended up with a semicolon and that's pretty much it for the video guys remember that you can always select the player and change the health of him so we're going to change it to I would say 200 and you can also go into the enemy and change the damage of the enemies and you can do that for each individual one so if I go ahead and duplicate this enemy and drag him over there I would recommend that you first make them a prefab by dragging them down but we're going to do that in another tutorial but if i duplicate him and change this variable you can say that the variable of the other enemy states the same so that you can have enemies that are more powerful than others now I hope you enjoyed the video and I'll see you in the next one