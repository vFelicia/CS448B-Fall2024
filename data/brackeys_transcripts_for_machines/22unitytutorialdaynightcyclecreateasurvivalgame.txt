hello everyone and welcome to day and night cycles in our unity survival game series done by Brad keys I am the CEO of Brad keys and this is video number 22 in which we are going to cover again making the skyboxes blend implementing a day/night cycle in that the light will change both the direction and the intensity and we will have both a moon and a Sun orbit across the sky so that's going to be really really awesome so in this video we are not going to create the script ourselves and we're not going to create the different assets either but I will help you understand on first of all how to implement these things and make it really nice and also giving you're giving it your own touch and also helping you understand how some of these techniques actually work so again this is a beginners tutorial so I won't go too much in depth but that's what game making is about if I had to type out every single script I used for different projects I would never ever get anything done because sometimes you just have to reuse things cool so as always I've opened up unity and let me just give you a quick demo of what we are going to be making so I fired up a scene here and when I start out it's nighttime and I have set up the speed a bit and you can see the moon there going down and light starts to come on and now we should see the Sun rising there so the light gets really red and as the Sun gets higher up we will see the light being more and more intense and as it starts going down again it shifts back to the reddish tint and now the intensity should start going away and the moon rises in the other side of the map and so this will just loop into infinity and we can change the point of day with this slider in the left hand corner for testing purposes we are going to leave it here for quite a while so it's really nice to have both so we can quickly see what time of the day it is not only by looking up and also so that we can change out the environment and feel and different models in different lighting so cool let's hit stop playing and now this DNC I'll just keep the scene there if that's something we need to crossreference but this is just what I used for the day/night cycle preview here we are going to go ahead and just take the advanced di the respawn menu and the player stats all V 2 version 2 and just drag them under the scripts folder because we're not going to be needing that and then we're going to take the stay and night cycles folder which I have just made and we can just go ahead and delete that and actually let's just go ahead and delete this scene also and now we can open up our usual main scene and we are back so when you will notice that here there is a test folder lying here and this is just because I'm testing out some mechanics with some arms in which we are going to implement later and once we have them in place we will also start taking a look at stuff like picking up weapons and so but that's in the future for now let's go ahead and see how you can implement this day/night cycle all right so if we go to the desktop here the the things you'll need will be included in our survival assets pack which you can again download from our website and we have a bonus video if you don't know how to extract them and use them so once you have extracted Streck to them you should see them here and if we doubleclick there will be a unity package file arm called day/night cycle and you can just go ahead and simply take this drag it into unity into the project pane release and then hit import and this won't do anything to your project other than input 1 folder code day/night cycle there we have it so it won't mess anything up don't worry and that won't be placed files all over it that will just be enough new folder in the assets called day/night cycle now we can go ahead and implement the most important part of this day/night cycle with which is the prefab called time of day or Tod so if we open up our hard folder and and four things will appear with a material folder which you don't need to change this just contains the different sky boxes and some properties that will allow them to blend this contains a shader which will help with just that so this will help transition fade and blend these sky boxes together and since shading is completely new I won't explain exactly how this works then we have the time of day script which you are of course fully allowed to change just play around with it and make it how you want to be and then we have the actual prefab and for now the image here is just the moon but it also has a Sun in it and so on this is just because I made the moon a child object of the Sun but you'll see how everything works in just a minute so if we first of all go ahead and drag this into our hierarchy you can see that the lighting on the maize starch changing and we could go ahead and disable the directional light we have completely though this would make everything but the lamp here completely dark at nighttime and I still want to allow some lighting there so I'm just going to go ahead and change the intensities of something like 0.05 maybe even less than that we'll just go with this for now and one very neat feature that unity announced in there in that unite keynote speech is that the directional light shadows realtime shadows will be free very soon so we can start having some realtime shadows but until then let's again move on with the tutorial so under here if we click our time of day prefab we can see we have the time of day script and this script will do many things for us if we just go ahead and hit play as is you can see that our skybox is really looking weird so right now it should be night but we just have these clouds and yeah this is not what we want so what you want to do is you want to select our play then go down to a main camera and delete the skybox component because everything will be handed through our time of day script and so we could also go ahead and boost the lighting of this make it a little more realistic sky kind of color so I would go with something like that and now when we help play you can see that this looks a lot lot smoother and it fits the time of day better so again select the time of day prefab and if we hit play you can see that the slider here slowly goes up and will eventually reach one and then it will start living this slide it too will follow it upwards and then at a certain point which is 0.5 it will start to decrease again the hour is what is the hour of the day so this will go up to 25 at 400 and then it will loop back back to zero we have the Sun which is just the directional light that actually emits the light down on the scene this is just a light game object then we have the speed so if we change this to like ten you can see everything changing really fast or if we change it to something more realistic like I don't know 2000 you can see it going really slowly so I recommend that you choose a number when we are done testing out at about I don't know 600 would be good because then it won't change all the time but again you won't get stuck in just the dark fall and you don't you don't know what to do because it's dark and you're scared and very kidding but yeah 600 is pretty much a good amount all right and below the speed we have all kinds of different color settings and I think they're pretty selfexplanatory the farc is like the mist the morning so we have different kind of four colors we have the night to ask morning midday then we have the ambient light and all of these are just tint properties so these will just determine the the color of it and the feeling then we have the ambient light which is the light that is going to be spread all over the scene and instead of having this directional light as at just a low intensity we could go ahead and disable that and you then just boost denied ambient light though I think having a directional light it improves the experience and so we have the night tins with dusk tins and so on then we have the two skybox materials on which we have in there and then we have this Sun night and the Sun day just the whole feeling of these two so all of these probabilities will be set at a pretty good property already when you just import it maybe except for the speed that is something you'll have to play around with you're on you're under our time of day prefab we have the Sun and if we just go into our scene view and hit F actually there we have it so that's our Sun so if we go ahead and boost the speed a bit to something like 50 we should be able to see it start rotating let's see if we can get it to rotate for some reason it's not updating maybe yeah there we go so you can see the actual rotating off the object and if we zoom out even more you can see that the moon goes around as well so there we have the moon so that's how it works and remember when it's pointing this way the light is emitting from up here so that that's it so this will always be projecting light right at the moon okay cool and by parenting this moon to the directional light we'll just make sure that it's always in sync with the Sun which is made by the skyboxes and the flare and the moon itself it's not that exciting so if I just start that and zoom in on the moon it's just a small sphere with a mesh renderer where I have made a material that is set to selfilluminated diffuse and a basic texture to wrap around it so that's how everything is pieced together now let's take a look at the time of day script so doubleclick it to open it up in monodevelop and inside of here we have a lot of variables but we have already went over the these everything is handled in the function on GUI because we are basing this on a slider the one in the left hand corner I've added a couple of things to make this work better and one of them is that if the slider is less than or equal than or equal to one set it to zero and so this will just repeat so every property like time of day our slider two and so on is based off this slider value and and therefore you can control everything with just that slider so let's just quickly go with the most important parts of this code so we have the GUI slider here and you can go ahead and resize into it whatever you want with that then we have the hour and time of day which are set using this slider and the slider to then we have the Sun that rotates then we have some then we have the movement on this of the slider using the speed variable and making sure that it doesn't change depending on the frame rate then we have the color looping so that the Sun will change its colors then we have then we set some more values for the slightly two then we have the Sun intensity that will change depending on the slider too and all of these variables these numbers here you can go in and just change them and play around with them so if you think that the Sun is too bright at as although just a daytime you can go under and find the Sun intensity and then maybe say let's time it with 1.4 or 3 instead so that it won't be just as powerful then we have the if time of day is less than four then it is night so the time of day is used to determine what what time is it it is inside of the code here and so if it's night we can have we have the skybox being the skybox material one and we set these guy bugs to float blend and then the so they will fade together we tended adjust the ambient light adjust the fog color and so on and we do this depending on these different if statements so a cool thing that you could do with this is you could go in and make a GUI element called our GUI for example and just have it sit in a corner and display what our it is so that the player knows just what time of data is you could also just have him orient using the position of the moon and or the Sun so if you want to go ahead and adjust the different tint value so the different tinting of off stuff like ambient light I suggest you go ahead and change the speed to something like 100 here and then you wait for the time of day actually it might be an even better idea to just set it really high so it almost wasn't won't change and you can set the time you want to adjust using the slider so I'm going to set it to night and now I can just go ahead and adjust and see how it changes so it could take for example the night ambient and play around with that and when I have something I think works remember that when you're in play mode and then and then cancel out all of these change changes will go back to normal so you might want at egg and right down the slide a values here so the our RGB that is pretty much it for today's video guys I hope you enjoyed it and I'll see you in the next one