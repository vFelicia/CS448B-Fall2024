this video is brought to you by Aron meta I'm really sorry if I butchered your name thank you so much for donating if you want to support breis yourself you can go to patreon.com Brees thanks for tuning in at braies hello everyone and welcome to this video on creating a tower defense game in unity today we are going to be doing some explosions we are going to be editing our missile by adding a texture to it we are going to be creating a cool particle effect when it hits something and also we'll be editing the bullet script uh to allow for damaging enemies in a radius instead of just hitting the target so a really exciting video today and let's just jump right into it so you can see that I'm here in unity and what I want to begin with is finding uh our input ports folder and then our missile launcher if you haven't watched the previous video where we imported the missile launcher I definitely recommend that you go ahead and do that now or you could just use your own model for a missile of course but this missile here that you can see I have in the scene um is of that missile launcher model so you will have to import that at least cool so uh we basically want to set this up with a new material it currently has the default one so let's right click under the missile launcher materials folder to create a new one and let's call this one missile let's then drag it on top of the model and let's uh select our missile launcher texture and drag that into the albo channel let's bump up the metallic and bring down the smoothness to make it fit with the rest of our scene and basically I want to use this as our Graphics object but not as our root object and the reason why is that if we current select it and make sure we are set to Pivot and local up here you can see that our blue arrow meaning our forward axis which is our Z positive Z points upwards and not forward when it comes in relation to our missile so basically we want to rotate our missile so that it it points in the same direction as our Z so that when we chase a Target it will look the correct way and the Really the easiest way to do this is just rename this to something like Graphics create an empty object that we reset the transform on and let's uh call this one missile missile there we go let's take our Graphics object drag it on the missile let's reset the Transformer on that and let's just drag it up here so we can see what's going on and you will notice it has disappeared but really it's just really really tiny so we'll just select our Graphics here and set the scale to 100 by 100 by 100 and that will bring it right back and then what we can do is we can actually just rotate it on uh 90Â° around the Y AIS and now when we select our missile you can see that the zaxis and our missile points in the same direction so now we can hit an uh hit add component and then add the bullet component let's select the speed of something like 30 I want to give the impression that this missile actually has some mass and therefore moves a bit slower towards the Target and we'll also get this cool like meat seeding uh meat seeding seeking heat seeking missile effect um that that looks kind of impressive and then as the impact effect we'll create one ourselves in a second but let's just use the bullet impact effect uh for now so now we can take this missile drag it down under the prefabs folder to make it a prefab let's remove remve it from the scene and then let's select our missile launcher and drag our missile under the bullet prefab to replace the bullet with the missile there we go so now we should be able to actually test this out and I'm just going to do that really quickly by placing the turret down there and you can see I just paused it here it's just launched the missile if we take a look at the missile in the scene it's definitely not pointing towards our enemy and why is that because it's pointing in the right direction here as we can see that is because we actually haven't added this functionality yet so if we go ahead and take a look at our missile and then the bullet script and double click that to open it up in Visual Studio we currently don't do any uh rotation on the object at all so let's go ahead and do this and it's really easy we want to do this in the update Loop because we do want to do it every frame and we want to do it right beneath the line where we move the actual missile that means transform translate what we want to put here is just transform. look at so it will look at whatever Target and of course we will just use our Target variable that is the transform up here that we set using um or that we set from the actual missile launcher so the missile launcher points towards something and it fires the bullet in our case a missile and it says your target is this enemy and it will fly towards that and now Point towards that and if you hear some noise in the background that is just my cat's being uh naughty but um I will try and continue here um so the next thing that we want to do uh let's just see this working actually let's just see this in effect here so you can see that our missile now correctly chases our enemy so that's cool the next thing that we want to do is damage the player or the uh enemies in a radius so if we go in here under our bullet script again you can see that currently if we get within um or if we hit the target here we call a function called Hit Target and all that does is instantiate some kind of effect and then uh destroy the target game object and destroy the bullet all I want to do is I want to go up here and add a new variable and this is going to be a public float with a range or radius I think I'm going to call this the explosion radius and I'm going to default this to zero and this way down here we can simply add in an if statement that that says if explosion radius is greater than zero well then we want something extraordinary to happen then we want to damage uh people in a radius people our enemies and uh if not then we can just go ahead and hit this single Target and I think the way that we do this is instead of just destroying the target object or we'll still be doing that but let's wrap that in a function because we might do uh several things I definitely want to have some particles whenever our enemies die because right now it's just um our hit particle and not any kind of death effect and that looks kind of empty and I also want some way of keeping track of the health of our enemies uh so that is to come but for now we'll just have a a void damage here and it's going to damage a transform and we'll just call that enemy and then we can simply put this Destroyer statement down here so instead of destroying the target up here we're going to destroy enemy. game object here and then what we can do is we can say if explosion radius is greater than zero then we want to damage several enemies and we'll uh actually want to explode and we'll add that function in in a second if not then we want to damage uh the the Target only the target there we go and no ma matter what we want to destroy ourselves at the end so that should actually be it and now we can create the actual explode function here so we'll have a void explode and the way that we're going to do this is we are going to use physics dot um I believe it is overlap sphere and this is just going to shoot out a sphere and check for all of the colliders that is hit by that sphere that overlaps with that sphere or inside of that sphere and it's going to do that from a position and in a radius so our radius here is our explosion radius and we can use this to get an array which is basically just a list of items a fixed uh a list of items with a fixed uh range fixed range fixed length um so we can get an array of all of the colliders that are in that sphere so collider array and we'll call this one our uh colliders or something like hit objects or something like that and the reason why I'm not calling this enemies is because we might also have hit some objects that aren't our enemies and what you can really do here we don't want position there we want transform. position transform up position is that you can add a layer mask to uh filter out anything but enemies that are on a particular layer maybe called the enemy layer or something like that or we could just use the fact that all of our enemies if we go under our prefabs here and select our enemy all of our enemies are tagged as enemies so now we Loop through uh this list here so for each collider uh collider in colliders here for each thing that we have hid we want to see if that collider if the collider that we've hid do tag is equal to enemy so if it the the thing that we hit here is taged as an enemy then we can go ahead and damage it so then we can call damage on collider do transform there we go so now we will uh shoot out a sphere as an explosion we'll see what it hits we'll Loop through all of the things that it hit and check if they are indeed an enemy and if they are we will damage them which basically now just means destroy them cool so that is basically all the logic that we are going to need so now if we hit play here and it's not going to be visible with the first enemy of course only the second one when we have multiple enemies in here so I'm just going to wait a second here and actually I just uh reminded myself that we haven't changed uh the range of our missile launcher so we have to select our missile launcher actually we have to select our missile and we have to add an explosion radius and you will notice that currently we don't have any way of viewing this radius so as we did with our turret when we added a range I suggest that we go down here and go void on draw gizmos selected and we add in gizmos do draw wire sphere from our current position transform. position in explosion radius and that we make this um red or something so gizmos color equals color. red there we go so that will just make it very clear to the user when setting things in the inspector here how big a radius the uh missile actually will explode in and this is quite a big radius we might have to bring it down to something like seven or uh let's just do eight that might hit something like at least two or three enemies um so let's apply that let's go and hit play and now we should see that if we wait for the first one here to pass by and put a turret for this second wave here we should see that they both explode because they were in that radius and none of the environment or anything that gets removed and uh the one that was down here didn't get hit so you can see that this always hits uh two and sometimes if you're lucky hits three enemies which think is is quite good for balance but you can of course mess around with this especially when we get the actual damage parameters in there that we can tweak cool so now let's add an awesome effect so now is for the particle play time that should be a whole whole thing we should have like a jingle that goes particle play time okay maybe for the next video so let's go and hit create particle system and let's re said actually I don't want to begin with a whole fresh particle system let's use our bullet impact effect as a base here so let's duplicate the prefab call this one the explosion effect uh maybe we should do missile explosion effect to be more clear about what this is let's drag it in uh and now we can see that this is kind of boring let's first of all Loop this while we're playing around with it and set the duration to something like three so that looks pretty good there and my is joining in again say hi hi so I'll just put him down so um what we can then go is we can go under shape here and maybe just bring up the size of this radius a bit because we are do want our explosion to be kind of large and dramatic and then we can go under emission and definitely bump this up I think we should go to something like 30 and my idea with this is that we add a bunch of debris that goes flying and that falls on the um on the ground and then we add a separate particle system that is kind of our fire spikes thing which is also Cubes but that actually has a negative gravity so they go flying in the air I think that's going to look fairly cool so let's just have this be at something like 30 and uh the start size and all that actually is pretty good but I definitely want to bump up the speed so let's go between 10 and maybe 15 and maybe between five and 15 but I definitely want them to go flying I actually think that this this looks pretty good and then I want to go down on the renderer and I want to disable uh receive shadows and cast Shadows I don't think there's any reason for them to actually do that um not when we have this many in the scene especially because we're going to be adding a cool light in a moment that you will see what uh what does and um yeah I kind of like that so let's use that as a base to work off of and uh let's now duplicate this and we can maybe we can take the second one and drag it under as a child and this is going to be our Flames or Sparks or something it's just going to look a bit difference so let's create a new material for this create U material and this is going to be our missile explosion um Sparks Flames flames uh so let's go under our Flames object under the renderer and let's drag our new material under that and we can now go in and edit this uh the color of this here so did that actually apply I don't think that applied correctly let's go down here okay so it's actually selected as the material here but I think our nested prefabs is messing with us there we go so now it looks correctly so we'll Nest those in a second um so I really like the look of that but we'll definitely have to adjust the color a bit here so I want to have something kind of red orange really really bright something like that I I think that looks really cool and then what we will do is we will have A1 gravity modifier so it goes flying up into the air and we will add definitely some size to these we'll have them be between to 5 and 0.5 to make them a lot bigger we'll set the start lifetime between um random between two constants between let's do uh 0.5 and one and let's definitely also add some speed to these so the start Speed is going to between uh be between 10 and 25 and I really like the the way that uh this is going uh let's actually do 15 and 25 and let's also set the emission up to 50 I want that to be a lot of flames and let's also bring up the size of these so let's bring up uh those up to 25 and 0.5 and we can maybe even make these a tiny bit bigger um but I I think we'll try this out and see how it goes that really gives this aggressive field to the explosion uh so we can drag those on that now and we can try and hit apply to this prefab here so if we hit simulate that looks cool and then we can remove the looping and we can remove the looping on the other one as well hit apply again and now uh remove that from the scene we can go back into our bullet script here and we just want to make sure that the effect that we instantiate has something like 5 seconds and not only 2 seconds because this effect might last last a little bit longer uh just in case you have a different effect than I do I think that the uh B there was just a bit too small uh so that's awesome and I believe that we have to select our missile now and hit or drag our missile explosion effect under the impact effect slot for that to be applied so now we can hit play and this will look cool but maybe a tiny bit uh empty here so I think the explosion itself is uh freaking cool but I definitely think uh that that we need some kind of flashing light in there just some kind of flash effect to make it feel like an explosion missile and also if we go under uh the missile explosion effect and select our Flames I want to go down and disable Collision there's really no reason to check for Collision when they're just flying up into the air anyways um so all of the other stuff seems fine now now let's drag this under our hierarchy and let's just add a quick Point light to this so let's go uh right click and then light Point light and I want the range of this to be something like I don't know 20 or 25 and the color to be a bit more orange here really orange actually and I want the intensity to be high something like three or four U maybe even four actually uh because this is a whole explosion thingy and I want to drag it up a bit there we go in relation to our Flames here and we can just see what that looks like I think that looks really cool and let's also add some hard Shadows to these um so that's not going to require too much rendering time but it does definitely add something to the scene especially have if you have more enemies in here and now we have basically two options either we could go in and create an animation that is going to quickly fade this out or we could create a script that does the same thing maybe that just disables it after a single frame or something I think we should just go ahead and create an animation that gives us a lot of control and it's really really easy so let's have this be light and let's go under animation here hit create and this is just going to be our explosion light animation and let's create a whole new folder for this so go new folder animation and let's go and save it under that and you can see now that it's created the light controller that controls what animation we are playing and explosion light which is our animation itself and on our light it has created an animator component that is the one that takes care of playing whatever the controller tells it um and actually going through the uh explosion animation so now we have this timeline here and I just want to add in um a tiny change in intensity so let's go forward something like I don't know like uh 0 uh 05 here and let's bring the intensity all the way down I don't think there's any reason to go more technical with this and you can see just how quick of an effect that is and that is basically all I want to do however I want to select our explosion light and disable Loop time so it won't just stand there in Loop and look like a muscle flash it will just disappear once it's gone through a single time and we can also see on the the light here that uh if we double click that to open it up in the animator this is orange which means that it's the default animation State and so it will be played right when the object gets spawned in so now we can hit apply on the missile launcher explosion effect remove it from the scene and we should be able to hit uh play and see this in action so I think that gives a really really cool effect I think we added the range which is great so we have the functionality in place we have a cool looking particle and we even have a light in there so that is basically all I wanted to do uh for this video you can of course tweak this in any way that you want to and uh yeah thanks for watching I hope you enjoyed it and without further Ado I will see you in the next one thank you so much to all the awesome patreon supporters who donated in August and a special thanks to Aon meta Robert Ro scal Hound vix and P and Andrew k I