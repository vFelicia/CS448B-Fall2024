thanks for tuning in at braies hello everyone and welcome to video number 23 in the how to make a 2d platformer course at this point we have a lot of subsystems working in our game but we still need to Define when the player loses so we kind of need to introduce this idea of a game over state so that's what we are going to do in this video also if you have any questions go to farm. bre.com so let's open up Unity as you can see I've pretty much left the project as is I've simply uh uh organized it that bit uh I took some uh scripts and plac them in the scripts folder and uh some stuff under the animation folder as well I also notice that we have two additive materials this one is for the muscle flash so I'll call this additive muscle Flash and then we have this additive uh generic particle one so I'll call this additive particle and drag that into into the materials folder as well um so I think that's pretty much all we need to do we might also go ahead and make an audio folder where we can drag in the respond countdown I don't think we are going to be needing a folder for uh physics materials all right so let's just save that you will also notice that uh I have updated my version of unity to Unity 5.3 this introduces a bunch of cool features one of the most exciting on is having uh multiple scenes um or grouping scenes together so you can see multiple scenes in the hierarchy here and load scenes easily and manage scenes at runtime so that's a super cool feature and that allows you to do a lot of streaming assets and uh stuff like that but that's not something we're going to cover in this video so basically what I want to do is uh give our player a certain amount of lives because right now when we die if I play the game here and jump down the player simply respawns and that's just fine however I want to kind of uh introduce a a bigger penalty for uh dying and therefore I think we should have maybe two or three lives and uh when we don't have any more lives we need to kind of start over and begin uh back at Wave 1 so in order to do this I think we should jump into our GM object here and begin coding this idea of player lives so let's open this up in visual studio and you can see that uh we have this uh set up so that we have a instance of our game master and uh that's of course a static one so we can access it through the type and then we have a bunch of uh public variables nonstatic variables that sit on that instance so that we can easily uh integrate cre it with the unity inspector but this idea of player lives is something that I want to sync uh across and and make very easy to access and therefore I'm going to make it static so I'm going to make a public static integer and uh actually let's make a private one and then let's make an accessor so we'll have a private static int and uh this is going to be a player um I really want to think this through now uh so yeah so this is going to be remaining lives and it's going to start at uh some variable I think we're just going to start it off at three and then we're going to have a public static integer and we'll capitalize this and call it remaining l lives and this is simply going to be a property so if we want to get the variable remaining lives here uh we will simply uh say get return underscore remaining lives this way we can only change the lives remaining inside of the uh GM uh type or class but uh we can get it uh by simply referring to the uh variable type so that's pretty awesome uh then what we can do is uh every time we uh call this uh Kill player method you can see that we currently just destroy the player object and then we uh start this respawn player uh Co routine on the instance of the game master object and uh before we do this we can simply decrement the amount of player lives so we can say player lives or remaining lives it was uh here minus equals one or you can just say minus minus that's up to you I like to write it this way and uh then we can check if underscore remaining lives and uh we want to check if this is less than or equal to zero well then we don't want to respawn the player then we want to end the game so uh this here is going to be an lse statement so we'll just pop that up there and make a tab and here we're going to call some kind of endgame method and I think we are going to make this uh local so we can set up some references uh I don't know whether or not this will be an i numerator um I think we'll just start out by making it a normal uh method and then later we can always add the functionality so uh for now it's going to be a public word and this is going to be end game there we go and here we can simply call gm. ingame like that and it should be fairly easy and in here we'll simply uh make a debug.log statement saying that um uh simply saying game over all right so let's try this out uh and see if it works so I'm going to hit play here you can see that it loads in here and I'm going to jump down three times that was the first one this is going to be the second one and the third time here it says game over and notice that we don't hear the respawn sound and all that so we have this custom uh case that we can fill out with uh some uis some sound effects all that so that's great I also kind of want to have a counter here for how many lives that we are currently at we could make this using some Heights and that would be pretty cool but for now let's just do some text we can always change this later there's no reason to spend time on an unnecessary detail at this point because I think you know how to do most of this so uh let's uh do this under the UI overlay maybe and uh uh we can make a an empty in here that will just expand onto the entire screen and we call this um player info just in case that we want to have more than one thing in here and for now we'll just create a simple text object that will uh anchor to the left hand corner up here at some point we might put it on the player himself down here that might be better actually I almost like that better actually actually let's do that I've thought things through now uh so then we need some hearts if that needs to be cool let's do it up here let's save ourselves the hassle uh of course you can just stick it onto the um uh the player info that is attached to the player object and all that there are plenty of tutorials on doing these Health amounts and and that kind of stuff it's basically just the Sprite that you slice um I won't go into it now so here simply say uh lives and uh a colon and then the amount of lives and we'll just start that off at three and uh the font here is should be Lut steps just as all of the others and I've noticed that some of the fonts sometimes look a bit blurry especially when uh scaled up so in order to compensate for this we can go into the computer pack uh find the Lut steps and change this from uh smooth to hinted raster and the font size to 32 that should get rid of that blurriness you can see how much sharper it looks now uh and uh that looks fairly decent uh but we probably want to move it a bit away from the corner so it's not St up there and I think I want to calze all of these because I like the font uh with capital letters that looks better uh we can maybe also bump up the font size to something like 20 and uh make the color a bit more cool so um we could do a black one with a white outline or maybe the inverse so we'll create create a shadow here instead of an outline and uh just give that a little bit I actually like that a lot so I think we'll just uh stick with that for now and we can always change it later uh we could also color this uh red because it is our lives nope that looks ugly okay uh so this is going to be our text for now and I think we'll just create a simple script here that will um retrieve the info about uh our amount of lives uh to here and uh this is of course not the most ideal way you could uh create some kind of um uh what should we say action or event that triggers whenever am a certain or the lives change and then subscribe this to the event and all that uh but instead we're just going to create a symbol script uh because it's not going to have that much of an overhead so let's just go in here and uh go under new script and uh let's type lives counter UI let's do that and let's also call this the lives counter uh if it wants to update lives counter there we go and let's double click this to open it up in Mano develop we'll just reload everything here or in Visual Studio I should say and uh first off we want to be uh using unityengine.ui and uh we want to create a um let's do a serialized field and make this a private text object and we'll simply call this uh the um lives text um and we want to require that component here require component type of and then we'll call it a text here and at the beginning we simply want to um let's not make this a serialized field that's instead just get it through the start method here or even better the awake method delete that comment there we'll simply set lives text equal to get component uh text cool and uh then in the update method uh we can simply uh find the remaining lives here so we can simply say that game master do remaining lives that is the amount of lives and we can simply say that we want lives text to be equal to that as a string but it will automatically convert it to a string if we do this and then remember to put in lives here and a colon and a space it does convert well then we just do two string and now it should be happy okay it's because we want to do text there all right so of course we could do some checking if the variable has changed and all that but really it's not necessary this is not an expensive call of any sorts so uh we'll just have that sit there and uh if we hit play now and jump down we can see that changes to two immediately so that's perfect cool so now that we have that working uh we can actually Implement some Logic for what happens uh when the game is over and uh again I want to go under our UI overlay and create an uh empty object here because I kind of just want to uh display a uh game over screen uh with a quit button or a restart button and uh so we'll make a uh empty object call this the game over screen or whatever you want to do here uh again we want to fill the screen with this and by the way to do this I'm holding down alt and then clicking and uh then let's make another UI um component here object this should be a panel and we want the texture here to be the wi texture and uh you can go into the game here and see that if we make this uh black and then with a certain opacity something like that looks pretty cool that's fine so that's just going to make sure uh to uh that our UI stands out from the background and uh we just going to call this background and then on top of this we can make another UI uh element and this is going to be a text object and uh it's going to look very much the same to you here so we'll scale this up we actually want this to be centered I think I believe but we'll see and uh we'll change the font type to little put steps we'll bump up the font size we'll also Center this there and there that looks pretty cool uh we want to change this to game over with capital letters uh we want to change the color to a red and I think I want a shadow here that is white completely White and with an offset of th three and minus three something like that and kind of an old school arcadey look uh which I think is pretty cool in here and uh then we can rename this to game over text let's make a few buttons here so we're going to have a UI button and uh we definitely want to size this up there's no reason for it to be so small something like uh that looks fine and again I don't want this uh soft button look I don't think or do I actually we might keep that but I definitely want it to be uh kind of dark maybe even black and then with a bit of opacity it looks pretty cool and uh then the text object should again be Lily put steps a much bigger font size and that's just a an a temporary error um uh if you want to get rid of that you normally can just disable and enable the object there you go uh I don't know why it does that but it's doing been doing it for a long time uh and let's just make uh the text of that button white here and we can call this the quit and we are also going to have a retry button we're going to say retry here and that's really all you have to do I mean this looks kind of okay I definitely think you should spend more time than me on this um maybe I want these to be kind of a gray here and then not transparent I might actually like that better but I don't know we could try adding a Red Shadow let's just try this out just for fun so let's make that red completely nontransparent three and3 h that's not bad we could uh do a bit more here so five and five that's actually kind of fun I might stick with that I don't know uh we can try changing these from UI Sprite to just the uh White texture here um to make it Square yeah that's much better and I actually kind of like the look of this now so we'll change this from the retry button to the this to the uh quit button and that should be all and let's just see how that looks in game you can also see that the mouse over here still works but you can of course customize that uh if you want it to be um more clear uh it could be pretty cool with a scaling effect of some sorts here um now that I've seen this in the game I kind of want to scale the game over uh up even further so let's just give it a t add more there and I think uh that will be good so definitely exper um experiment with this more than I have here um but I kind of want to move on with the video so uh what we could do now here and what I think we should do is have some kind of game over screen manager some kind of object that sits here and uh make sure that everything uh works as it should and uh there are a bunch of ways to do this frankly um but I think we should just add a component and kind of get coding with this um so we'll call this the game over manager game over screen um we call this the wave UI so we'll actually call this the game over UI I think just to stick to our convention and we'll just double click that again reload all and that's fine so uh this is going to be uh using Unity engine. UI and uh we're going to have a bunch of stuff in here first off um actually we might not have that much stuff in here we might not even need a UI reference or need to include the UI namespace um actually the first things that we want to create are some methods that we can call using our buttons that will uh either restart the game or uh quit the game so we'll make a public void here called uh quit and I don't think it needs to take in any arguments which is simply going to call application uh do quit I believe yep and uh it's also going to throw a debug.log just uh because it won't quit our application while uh we're in the editor here uh saying uh application quit something like that and uh yeah so that looks good and then we'll make another public vo and this is going to be the uh retry and uh I think we're simply going to restart the level here so application do load level application. loaded uh level that's not a method nope that's a field good this is good uh looks like this is obsolete okay so this is a feature in the new uh Unity I believe and uh I think this will work but it will tell us that uh there's a newer way to do it yeah so here Unity engine. application. load level in this obsolete use scene manager. load scene instead okay so let's try this out so I haven't actually done this yet so scene manager like this maybe we need to in include something scene manager. load scene so let's just uh load up the document ation here and we'll figure this out together so go to the scripting reference and hopefully this is already uh documented here and let's search for a scene manager here and uh we'll see that we can load a scene all right so name of the scene to load uh scene build index index of the scene uh so we can use either one of those and uh we have to specify a mode uh which is looks like allows you to specify whether or not to load the scene actively uh so um that will basically allows us to load scenes onto other scenes or whether or not the scene that you want to load will will uh replace another scene um but we just want to okay so it's under Unity engine. scene management so uh if we just do scene management okay you actually have to load that in so using Unity engine do scen management right it's right there so now we can say scen manager. load scene and uh we actually don't need to uh specify uh the mode it looks like and uh then we can simply say scene manager. loaded scene no that's not something we can do uh get active scenes get active scene here I think that's uh what we need to do so uh scene manager scene manager. get active scene and that's probably a method something like that should hopefully work or not uh from see scene to uh string that returns a scene get scene at get the scene at index in the blah blah blah get seen by name get seen by Pro by path um okay so I'll just quickly research how to do this and I'll come back in a second all right so that was really really easy all we need to do is uh simply do a DOT here and we have access to both the build index or the name so whatever you want to do here I'm just going to load by the build index because a an integer is a very uh small data type so that's going to be just fine and now when we save this uh it's going to restart the game here we don't need a debug.log statement because I I think this will be pretty clear uh that it's happening so uh we can now see that this uh warning will disappear and we can clear this out here remove all this all right uh and uh now all we need to do is link this up uh to our buttons so we can go under the game over here find the retry button and uh add an onclick event and uh we're going to drag in the game over uh object here go and do game over UI and find the one called retry and under the quit button we'll do exactly the same so add an event game over object game over UI class and find the quid uh method this time so now if we try this out and hit play and we can TW try uh quitting first and the quit currently restarts did I miss this up looks like it so this is actually the quit button and this is the retry button and therefore we need to switch these two so game over UI quit and game over UI retry so let's try try that again that's kind of important that those aren't switched in the final game so let's try quitting you can see it says application quit and if we rryy it uh restarts the game there so that's perfect uh so now that we have all of that uh available for us uh we kind of need some uh some kind of uh transition uh for this uh game over object and I think that we might just uh fade it in um but we should definitely make some kind of uh animation for this and uh in order to do that uh let's add a component here let's make this a um canvas renderer nope remove that a canvas group is what I'm looking for where we can control the alpha of all objects simultaneously and uh do all kinds of stuff just to have that there and uh then we can uh add an animation here so we'll hit create on this and first it will create the animation that we want to have and this is going to be the uh faade game over fade in or something like that that's going to be fine save that and it's automatically going to create a uh game over uh mechanim animator uh so now we can actually do this uh animation right here so uh the first thing that uh we want to do we might try simply fading this in um but actually what I would really like to do is fading in the background and having the other elements kind of pop up U pop in from the sides so I think we should uh try that instead uh so let's just pop out from this mode and create a canvas group here so we can control the alpha and don't need to mess around with the color in case we change that later uh and don't want it to glitch with the animation here so um now we can uh go into animation mode again and uh we can simply uh change the alpha here so it's going to uh start off at zero and then go to uh one so we'll just make this zero here and simply switch these two and I don't know how long we want this animation to be but we'll see in a second so that should fade it in over a period of a second and a second seems just fine actually uh then we have the game over text we of course want to change the position of this uh so um we can start by simply um quickly moving this back and forth here uh so that's going to be our end position it's going to be there and uh down here we simply want to move this out of the frame so this way it goes like this and uh that's going to be just fine we want to do the same with our two button butons so um we can simply um whoops we can take these two and just quickly wiggle them there and uh the X position of both of them I believe should be zero there we go and uh that's going to be our end position so we can drag that over there oops yeah that looks about right what is this this is the um canvas group Alpha I think that's just fine there and uh then here we can take the position of the two and just drag them down by holding shift you can uh drag uh on only one axis at the time so there you can see how that looks I think that looks pretty cool actually so let's just make sure that uh when we are at this point those look like that and this one is at Alpha zero so now we can go under the curves here select all of this focus on it and we can right click and go to flat so that will smooth out the mo uh the motion here and I think we now have a pretty cool fade in animation uh so now we can uh go under our game over uh animator and we can see uh kind of what triggers this and uh I think that we'll just have this triggered uh using the inter Point meaning as soon as we enable this object so we can simply disable it and uh then as soon as we want the game to be over we enable it through code uh and a very very simple way to do this is if we go into our game master object in here we'll uh keep a public uh or a reference to this I'm going to make this a serialized field make it private I know I haven't done this uh with these variables but uh this is better and uh we'll make this a you can either do a uh game over UI or a transform I'm just going to make this a transform and uh we are going to call this the game over UI uh wonder why and uh then when we call the end game method here call the game over debug.log statement all we need to say is game over ui. set active that is a method for game objects game object here do set active and we want to put in true here so I think that should pretty much do it uh all we need to do now is make sure to drag that in uh on the slot here so you can see that says None we drag in the game over object and uh apply this and I think we should try this out so let's hit play Let's jump down a few times you can see our lives are decrement every time here and now when we reach zero it should pop up with the game over screen oh and you can see that it Loops here all right so that looks really dumb uh so let's quickly uh stop it from looping and uh all we need to do is simply select the game over fade in and uh remove the loop time here that will means that will it will only play once let's do this again if you want to test this a bunch of times of of course recommend that you decrease the amount of lives so you don't have to wait uh every time uh but I believe that it should be working now uh so it goes to zero the game over screen comes and you can see that as soon as the enemies don't have a Target uh and we've disappeared over here in the hierarchy uh well then they simply stop chasing uh so it looks like like the game has frozen but it has not and therefore we can still do a bunch of animations and stuff uh if that's what you want it to do so that's super cool a lot of people uh when they make a go game over screen they simply make it pop up and then they freeze time in the game and that's fine for maybe a pause screen uh but with the game over you often want to play some cool sounds have some cool animations and that gets ruined if you pass time uh so I believe this uh the best way to do and you can see that we can now quit it and it says application. quit or retry and we are back in the game at its beginning state so that's basically all I wanted to cover in this video I also think it was pretty long but it's important to have a uh game over state for any game or the game won't be challenging so um I felt this was a really important uh video and I am already looking forward to the next one so I'll see you guys in the next video a