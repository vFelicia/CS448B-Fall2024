thanks for tuning in at brakus hello and welcome to video number 21 in the how to make a 2d platformer course in this video we're gonna take a look at doing a lot of UI work and also implementing the wave spawner that I'm going to talk about in a sec so kind of a wave countdown timer and a wave incoming text and stuff like that so basically it's been a while since I've updated this 2d platformer course and there are two good reasons for that and the first one is that I've started this how to make a multiplayer FPS course also in unity using unit which I definitely suggest you check out I'm very proud of this series and you guys have given me great feedback so far so that's on the screen right now and it's also of course in csharp and then I've also made this making a wave spawner tutorial which is also on the screen and it was kind of meant as a continuation of the 2d platformer course but since making a wave spawn is something you have to do for a lot of games I kind of created it created this own separate tutorial so other people would find it interesting too but that's definitely something that you will want to check out before you are doing this tutorial or you will have a very hard time following along because we're going to be using the script created in that video and then adding UI on top of that so if we start up unity now you can see here that on the GM object there is now a wave spawner script and we have these different properties where we can add waves give the names and add the enemy prefab account and a spawn rate and all that we have some spawn points and we have this time between waves that we can tweak so basically if I just put the to do list on the screen here you can see that there are quite a few things that we have to do so let's just get started first of all I want to fix a UI bug that's been happening on my system at least where if we press play and wait for some enemies to spawn here the HP bar isn't showing and if it is it's showing where we and if we drag one of these prefabs into the scene here while not playing you can see that there's no issue when looking close but when we then scroll out it simply just disappears and I found that this bug is kind of weird but I found an easy fix which is simply going under the health bar here and then in putting a white source image so just like a two by two wide texture and that will act as basically not having a sprite and that will kind of get rid of the error so if we just open Photoshop or any photo editing application of your choice you can also just search search google for wide image and then we'll just quickly create one here so photo shovels is loading up and possibly I go and create a new workspace here simply two by two and we'll just call this white text and we're simply going to be using the default white background here so we can go ahead and say that and I don't think that's any reason to save this as a Photoshop file so just save it as a JPEG and simply navigate to your project folder here on the assets and the sprites there so simply white text JPEG and the quality is not gonna matter here and we can now close down Photoshop wait for unity to import it here looks like it's already done that and now simply here select the white text and now you can see that when we scroll out the problem has disappeared and this is a good idea to do for all of your aliens and future empty textures if you just want this box and we can go ahead and do the same for the players so if we just find the player status indicator we can I search for white X and hit apply on that to good so that was fixing a bug so we can now cross that off the list then we have to play some spawn points because the new wave spawner system here have this has this spawn point system where we add points to an array and you can see that I've added three points so far so what we'll do here is we will need to make sure that enemies spawn with outside our field of view and it would be interesting if they would just always spoil spawn at some point that we can see and then come and chase us so what we can do in order to achieve this effect very easily assembly find our camera and take the spawn points which are currently under on the GM object and simply drag them under our camera and the main cam let's just drag them on the camera which should be fine and hit apply on the GM I'll click there so we don't lose the prefab connection and then we can just place them somewhere outside of the camera here so I'm gonna place them kind of like this so they'll pretty much always appear to come from above but that's fine for me for now at least so that we'll just make sure that they don't spawn on the screen here so that's fine and and of course when they are parented to the camera when the player moves so the camera moves the spawn points are gonna move with it so if we just want to check that out in effect here so we'll wait three seconds and the spawn and they will come into the camera view here so you can see just what that looks like cool so that was already two points next up we're going to be kind of first creating the wave UI then we are going to do some animations and then we're going to create a script that will play these animations depending on the wave state so let's start by creating the UI here so let's rightclick go under UI and that's create an empty canvas and let's name this UI overlay I want some kind of game UI overlay that will store all of the stuff that don't move with any particular object but it's just kind of put onto the screen so that's what this is going to be for and therefore I want this to be set to screen space overlay I want it to be pixel perfect and thus orders order to be fairly high but because not many objects are going to overlay this UI so let's just set the sword old order to one or two depending on what you want to do so and the rest of the settings here are going to be just fine now we can right click on this go under UI and then create a text object and you can see that I've imported this computer pack and this contains different fonts that I often use and I've shown this in other tutorials but if we go to window and then assets door if I can find it here asset stores there and load this up then you can search for computer computer fund and you can see that there's this free computer font pack and this has a bunch of different fonts that you can see are very pixelated or fairly cool so we're going to be using a fund from there you can of course go to any place and get your own fonts a good places for example dafont.com and once you've loaded that in we can simply select it here and I'm going to be using the Lilliput steps here I think that has a very cool look to it especially if you use only capital letters so that's good and make this white and let's change the text here to waive so we're gonna have wave and then a big red number and then incoming so I'm gonna change the controls here and scale this up Center the text and bump up the font size quite a bit so I want this to be very big and scary like so or something like 40 is going to be fairly great I think and let's just change this to wave text so we know what it is and then we can add a component because we're now in the game you can see that this white text it's not too clear especially if we view it when there's something passing by and therefore we can add a small shadow here just to give it a bit of contrast and that might not make the biggest difference but I think it looks a lot better when you you have that contrast to the text and then we can duplicate this and we can drag the duplicate down and we can make this a scary big number so let's just input five here change the font size to something like 90 and of course we're going to have to expand this and make this red yeah that looks that looks very great and then we can save the take the wave text here and just move it closer to the actual font something like that and we can rename this to wave count text or wave number text and we can duplicate the wave text here rename this to wave incoming text drag this down and input wave or incoming here cool so you can see what that looks like and I think that gives a pretty great effect what we want to do is of course move this up so it doesn't overlay our player something like this I think we could move it up even further yeah that looks pretty fun might want to change the wave and incoming text here to have a bit smaller font something like that is better I think and we can also move it closer yeah I think that looks very great that makes the the wave number and the actual wave number really pop so that's pretty cool and let's just create an empty object to kind of host these objects to to be act as a parent for these objects and in order to do this that's just drag it up here and scale it to fit the elements and then let's drag these under that object you can see that they are all automatically centered their anchor points are centered on that object and now we can simply go ahead and anchor this to the top so when our canvas scales you can see that that will follow and apparently these aren't what they are they just aren't updating so you can see here that if we were to take our game view and scale it down you can see the elements will follow cool I think that's kind of the best that we are gonna get this easily at least maybe move it up a bit to account for smaller screen sizes so that's going to be fine for now and we can go ahead and call this something like wave incoming and then we're going to create a nother text element and we can simply duplicate one of these move it outside the wave incoming and let's just send to that and this is going to actually let's not duplicate this let's duplicate the actual number move it out and let's disable waving coming and let's rename this to wave countdown text and let's make this white and I think that's pretty much all we have to do with you so let's just change the number there to three so we can see what we're doing and you can see now that we have this countdown that goes three two one zero that fades out and the wave incoming text fades in so I think that's going to look super cool for now let's just disable both objects and will enable them through the animator awesome so now that we have that done we can focus back onto our actual game here and let's see what we have to do so now we need to create some animations so actually we're going to focus back here and let's go ahead and create a new animation so if you haven't docked this yet you can go to window and then animation and make sure you go under animation and not animator we've talked about that before and this looks a bit different now than it did before it'd definitely be better and let's just take create and let's name this animation the wave countdown animation and let's just save that and I think that looks fairly great actually what I want to do yeah okay I changed my mind so let's remove that let's remove the two animations here we're just gonna make a small change instead of having this UI overlay and then the animators sit on that I think we're gonna handle all of our wave UI separately from other UI over the elements that we might want to have so let's create another empty object here and let's just scale that to fit the entire screen so I've angered it to fit the screen but I also scaled it at the same time by holding down alt and then clicking here and then we can drag under this object we can drag the wave countdown text and the wave incoming object and let's just rename this to wave UI Cole so we have this parent object and now we can create the animator make this the wave countdown animation and we're just gonna start with that and then you can see we have this wave UI controller or animator so animation controller it is cool so now we simply need to edit some properties here so if we just disable the animation here basically what we want to doing want to be doing is we want to be editing the wave countdown text and we want to be scaling this and changing the opacity so we can go out and at a canvas group and this will allow us to easily change the Alpha on this object so the wave countdown text is going to if we hit record first of all enable and then we're going to change the scale first off we are going to start with a scale of 1.5 1.5 1.5 z actually doesn't matter but I like scaling uniformly and an alpha of 0 and you can see that it's automatically created because I went over to this point on the timeline it's automatically created keyframes for the other values of 1 1 1 and alpha 1 and now we can simply swap these keyframes so the canvas and the scale the game object we want to enable immediately we can simply swap these so put that down there and put this over here and now with almost no work actually let's just right click and select flat put almost no work we've created this cool fadein animation so that's all we needed to do there then we can create a separate animation that will fade in the wave incoming text and favor fade out this wave countdown text so let's create a new clip and let's call this wave incoming yep that's good and that's it's there everything is fine and what this will do is it will go ahead and fade out the wave countdown text so it will start out by being enabled and having an alpha of 1 so we can just change this to create a keyframe there and then change it back to 1 and then after half a minute or half a second we're going to change the Alpha down to zero and then we are going to disable this object so now we've created the fade out for that object and we can focus on the waving coming object and I want to exit the record mode here add a canvas group to this also and into recording again and we want to enable this object at this point and we also want to change the Alpha to zero and the scale to one point five actually let's not do anything for the scale on this object so let's just disable the entire scale component there and oops it didn't for some reason there we go and let's select the canvas group for waving coming and we can just drag this over to make it fade in instead so you can see the effect that that has and we need to zoom out here let's make it have quite a Faden then we can make a copy of those keyframes simply ctrlc ctrlv drag this over make a copy of the Alpha cero keyframe and drag that over again and then we can right click on all of this and hit flat so now we have when we play the text fades out the wave countdown text fades out and the wave incoming text fades in instead and I want to give a bit more time to the wave incoming tag here so let's just drag that out and drag that out oops and maybe make it stay with a full opacity for a bit longer here so you can see what that looks like and I think that's much better so that was all we needed to do for the animation because the actual text of the object is something that we're going to be changing through a script so now that we have that in place we can go ahead and add a relationship between these in the animators that make sense so let's just find the wave UI animation controller here go on to the animator and we can have a look at this so basically the default animation is going to be the wave countdown because right when we start out the game we're going to have some kind of countdown and so that's fine this is going to be the default state and if it isn't if it is an orange you can simply rightclick and hit the set US layer default state and that means that we are going to have an automatic transition from the entry point to the wave countdown state so that's fine and now we want to create a transition from this two wave incoming and we want to add a criteria to this so therefore we can add a parameter so let's add one here and ideally we would be using triggers for this but I experienced quite a few problems when using triggers so instead we're going to be using polls and that's going to work just fine triggers is a new invention in the Unity animation system and I've been using polls for a long time and creating a fully working games with this so don't worry it's not a bad solution is it's just a different one and in here we are simply going to call this the wave incoming and we are going to make another one for wave countdown and all we need to do here is simply select the transition add as a condition that wave incoming is true you can see that it did that automatically so that's perfect and then we want to disable exit time and we want to set the we want it to have a fixed duration but a duration of zero so that should make it transition correctly and we can maybe just set that to zero and then disable house exit time just that this makes sense to look at and then we make a transition that goes the other way where the condition is that wave countdown equals two and that we do the same here so we want to set that zero disable has X at time and set a duration of zero so that was we'll just make these transitions atomic meaning that we don't have any fade in or fade out time because we've created the actual fade in and fade outs and all that all the transitions in the animations themselves so we don't want unity to have any control over that so that's all we need to do and now we can actually go into the game and this won't be paired with anything whoops we have to turn on looping on both wave countdown and the wave incoming animations so now we can hit play and you can see that fades in and imagine that this is changing then we can hit wave incoming and you can see it transitions over there and we disable that and we go back to whoops for some reason that went back automatically which is definitely not something that we want so wave countdown to true I don't remember setting that so this is weird let's just try and hit play on that again so oops we want to disable these from the start so hit play there and then waving coming and that works fine good and then we've calmed down and that's gonna be disabled good so things are working but these are going to be shifting and we're going to be doing that through a script so these weird things won't happen won't happen but you get the idea hopefully so let's save that and I'm just gonna clear the console here and we can go ahead and create a script that will manage this so you can see that now we've reached the final point which is doing the actual programming