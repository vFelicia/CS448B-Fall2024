hello Anna welcome to video number 27 Part B in our survival games series done by practice and the C of Brac E's and in this video we're going to continue with learning mechanism and getting our arms to work inside of our game this is Part B so you can just go ahead and click the screen to if you haven't watched part a you're probably going to need that in order to follow along with this tutorial okay so let's open up unity as always and we can see we have our arms under our player main camera arms and we have the arms controller so let's go under the assets under the arms folder and then doubleclick the arms controller this will bring up our animator window and let's just use the Alt key and the left mouse button to drag over to where we have set things up we could also just go ahead and select all of this and maybe bring it down a bit that's much better okay so now let's make the hitting and the punching and the swinging of the sword whenever we want to kill an enemy so to do this we start out by dragging in a new animation I'm just going to make a new state since I can't really drag in from the project pane right now so let's just right click on some empty space hit create state empty now select it rename this to hit 1 the speed is 1 change the foot I K to none so uncheck that so go to motion and let's select a motion under the assets and this one is going to be punch right and let's see what which comes from it comes from there under arms arms 5 FBX that's exactly where we wanted now let's make some transitions for this so let's go down here and let's make a transition from the idle so right click on the idle it made transition and click on the hid one this transition needs to do to check for something but let's first make sure it blends correctly so uncheck the atomic go to the end of the idle animation hit play that actually wasn't too bad but we can try treating in a bit so soomin using old all navigation is done in old now we can maybe try squeezing this in so there isn't so much blending that's a little better so we get more the harsh and quick punch I like that a lot so let's keep that the condition is something we want to change though so let's go ahead and make a new parameter so hit plus let's make this a boolean and let's call this hit zero one so let's go under the conditions select the hit one and make it true so if our hit one becomes true this will blend over to the hit 1 animation but we have several animation we both have one for the right arm and the left left arm and so I think we should get the hit two in here also so it creating a great state empty let's call this hit two let's uncheck the foot ok go into motion assets find the punch left from the arms 5 FBX double click that and now we have it in there so now we can go ahead and right click on the idle hit make transition and then click on the hit 2 and here we can have the speed p1 and we can never have the punch left and so we can select our transition go and you can go under the atomic and uncheck that and now let's take care of the blending so if we zoom in some in some more maybe bring down this a bit let's see how this looks that was maybe a bit too quick so like that that was actually too slow so like that better and that looks awesome so now that we are happy with that let's change the condition so go down to the parameters and let's make one more so hit play or hit plus I should say rename it to hit to a type boolean and let's then change the condition to hit 2 and to be equal to true and so now we will play the hit 1 when the hit 1 parameter is set to true and we will play the hit when the hit 2 parameter is set to true this will allow us to when we make the script to randomize what arm is going to hit something we could either randomize it or we could just make a change so it would be right left right left and intervals you can do whatever you want you can also make a series of numbers or boolean events it will cycle through so it will be right right left right right left left and then loop but that's all up to you we're going to take a look at that in the future so for now let's just get the setup right so when we hit play now and click Li the hit 1 it plays and then it just stops we need this to blend back and also I noticed one more thing we have some clipping going on in the right hand corner if we just play this one more time so let's just go ahead and adjust that and I'll show you this in a previous video so select our main camera go to the clipping planes and maybe bring those in even more so something like 0.01 let's see if it's working now if we could get this plane there it's still clipping so we might need to change up the scale and move them a bit since the clipping plane is already really really low so I can see it it looks like our right hand is a little bit much to the left so let's just move that a tiny bit see how it looks it still clips through so we can maybe bring them down just a bit and we can also scale them up or down depending on the result we want now they are a little more centered in the scene I actually want to bring them even more over to the righthand side even though this looks weird so we might just want to rotate them a bit like that that looks better now that was maybe a little too much so we can bring it back here this is really just about tweaking it until you get the results you want so let's just see if we can get the hit animation to play again oops I can see I have renamed the hit too so I'll just name that back again that was non purpose so hit play and check the hip one and now we can see Dustin clip through so that's perfect that's exactly what we want so now we can go ahead and make the backwards transitions for the hit animations so let's select the hit one hit make transition and then click on the idle now you can click the transition and go under conditions and this time we actually want to leave it at the exit time this is because we want the hit animation to go back to the idle animation whenever it stops playing and this is done using the exit time so let's uncheck the atomic let's zoom in here and see if this works right so when this hits that's maybe a little bit too much blending so just bring that in a bit and I really like that so now whenever I whenever we hit something it will automatically go back when it's the exit time is done one thing you will notice is whenever you adjust this transition the exit time changes and the other way around so that's a really handy thing to know okay so let's do the same with the hit too so right click mate transition click on the idle click on the transition so we can make changes go into the exit time zoom in here and uncheck atomic hit play and we want to bring that down a little bit more like that and hit play and I like that let's just have another look it jumps a little bit so let's see if we can take care of that might be a little bit too smooth down that's perfect okay so the exit time is 0.82 great so now we're that we are happy with that we can go ahead and sit test it in game so hit play check the hit one and it will automatically loop because the it's still set to true so we hit it goes back to the idle it recognizes that the hit one is still true and so it placed me hit one again and so loops but if we check the hit two and uncheck the hit one it will start playing the hit to animation and everything works and then the script we are going to have it so that it only becomes true for a very short amount of time so if I just quickly double tap this you can see that it works and the same with the hit okay awesome now let's do the same with the swing animations so if our idle with weapon is true meaning that we have our weapon on we want to not play the hit or the punch animations but the swing animations so that makes them new let's make some new States and I'm going to do this rather quickly since I've already showed shown you the process so create state MC select the state rename this to swing one make the speed one uncheck food I Keiko and emotion go on the assets then go to the swing swing swing there we have it that one swing one and let's make some actually let's import the other swing animation too so create state MC rename this swing to uncheck foot okay motion assets and let's find the swing to that one let's import that so there we have it and now we can make some transitions so from the idle with weapon we want to rightclick make transition to the swing one select the transition go under the hit one because we can use the same variables since mega nimble make sure that we have our weapon on and and so it won't play these hit animations over here so we can actually reuse these which makes it much much easier so if hit one is equal to true it will blend like this and let's see how that is that doesn't look too bad let's see that one more time pretty good let's just bring in the blending a bit and I really like that that's my phone going off sorry I'm just gonna have to pause this for a quick second okay sorry about that that was really unprofessional but let's just pretend it never happens so moving on so we selected our transition here and we unchecked atomic and now let's go and make sure it blends correctly so that looks fine and then condition should be hit is true let's do the same with our swing too so item with weapon to swing to select the transition turn off atomic make the condition hit to is equal to true and let's just adjust the blending here so not that one but that one and bring in that one and there we go and let's see if this is good that looks great and now let's adjust the backward transition so let's make them so right click make transition idle with weapon atomic exit time and let's see if it's feeling good so might be a bit too much that doesn't look too bad maybe give it a little more I was too much let's just leave it there and try with that and let's do it the same with the swing too so they're actually the swing one let's make that even smaller now think about it that looks better now select the swing to transition bring it in the fading just a bit the condition should be exit time and now check/uncheck atomic let's hit play and that looks smooth let's just watch that one more time and I'm pretty satisfied with that so now let's try and run the game and play around with these boolean parameters to see if they match up so check the weapon asan and we can see oops we have an error here in the blending and that is because we need to select our player on main camera and the arms and then uncheck the apply root motion remember whenever you something fades weird or doesn't show up that it's playing we just need to check on check the apply root motion it's a bug inside of unity making them ok so now we have our weapon on we hit the hit 1 and a place and something is not entirely right with the weight loops I don't really like that and in the hit we have some clipping and a little jumping so in the swing one let's just adjust it to have a little more of a fade curve and the same in this swing and that's also go under the arms in the scene view and maybe bring them follow it a bit let's see what works because we have quite a lot of clipping going on still so that looks fine ingame and maybe we can bring them up also it might be too much this is really just about playing around so on let's see if we had play now and we have the weapon asan playing they are too far from the camera so let's stop playing bring them back a bit that was a little too much hit play I like that and now let's hit the hit one and that looks great so we have some nice blending there and you hit two you still have some clipping problems to wait on there and then the uncheck the weapon is on and hit the hit one you can see that working now we have some more clipping issues and the same with the hit too but the animation are working so now you just really need to move them around scale them around and rotate them until you're clipping issues disappear and remember you can also always adjust the clipping planes actually I know what's bothering us here the the main camera is what is drawing or everything except our arms I remember in the last tutorial we made it so that we have a separate camera called draw always with which would draw only our arms here and we didn't adjust the clipping planes on that so that's why we are having so many clipping issues so you can just go ahead and bump that down to syrup on 03 and let's see this working hopefully so now let's hit something there we go that looks awesome hit the other way it looks good turn off the weapon hit something that looks perfect and hit something and now everything is working perfectly together so hope you enjoyed this tutorial I know it was a lot of fiddling around but also there were some cool tips and tricks and yeah hope you enjoyed it and I'll see you in the next video