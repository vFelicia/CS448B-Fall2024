hello everyone and welcome to video number 31 Part B in our survival games series in this one we are going to dig straight into the coding of the weapon functionality where we left off in the last video so if you don't know what I'm talking about go ahead and click the link in the description to watch video number 31 part a this is again part b cool so as always I've opened our B unit C and you can see that we left off with an error so if we just open up the weapon script in monodevelop there we go and the error is caused by a missing parenthesis in the if statement with the distance here so let's just close that up save it and if we head out we should see the error disappearing if we had clear it doesn't see if I save this properly ah d if distance oops wrong if statement it's in the physics that raycast there we go so hit the parenthesis there and the errors disappear awesome so for now we have taken care of the damaging the raycast shooting the delay and we have just used the animator down here and now we are going to take care of the animation and this is a little tricky since we want it to be somewhat random which hand our character uses to hit the target with but we still want to have some control over it since a random value tends to send out the same in a cascade of sometimes three to four to even five times in a row so that we will have the right hand punching a bunch of times before the left hand starts going and that's really unnatural so what we're going to be doing is we are going to be using the hit one streak and the hit streak and set a limit to how many times one hand could hit before the other ones come in action so in the function attack damage will make a new chapter before the yield wait for a second statement and in here we'll type if random dot value is less than or equal to 0.5 and use two of these and symbols and hit zero streak is less than or equal to two like that then we want something to happen so let's open up the bracket keys and in here we want to type the animator dot set bull and this is for boolean as I explained in the last video this will allow us to change your property inside of the animated window so that we can have the animations play and we're going to type hit 1 and it's going to be true so we want to hit something and the cool thing about this is that it will automatically stop playing whenever it has finished the animation because that something we set up inside of the controller okay cool so below this we want the hit zero streak to be plus equals one so we want to increase it by one every time we hit and we want the hit to streak to be equal to zero because now we have just hit with our right hand and so our left hand streak goes back to zero if these requirements aren't made myths we want to do something else so type LS and then open up the bracket keys and inside of those we type if hit two streak is less than or equal to two and the brackets there then we want the animator dot set bowl with the variable hit zero two to be true meaning that if we have a value of less of less than 0.5 or or our hit streak has been has been reached its maximum its maximum number we want to go down here and we want to find out if our hit two streak has hit it head has hit its limit and if it hasn't we want to play the hip to go animation and then we want the hit one streak to be equal to zero and the hit two streak to be equal plus equals one so and if these requirements aren't met open up the bracket so else bracket keys then we want the animator that set Bowl this is a lot of boring coding yet one to be true and we want of course to hit one streak you guessed it to be plus equals one because now we are hitting with our right hand again and we want the heroes the hit to streak to be equal to 0 because the streak has ended and that should pretty much be it let's go ahead and finally try this out and we can see we have several errors which is quite impressive and if we go ahead and select the play go on the main camp our arms arm amateur Master in arm right arm right hand right hold right Melia net fists we can see that our weapon script is attached and now we can go ahead and adjust just these values just to how we want them so the distance that set that to the distance here that should be private I think could easily make that private let's go ahead and hit play and something is not working let's see the game freezes I'll just quickly go ahead and pause the video and then be back in a sec okay so we can see down here that it says we have an unassigned reference exception the variable of the animated weapon has not been assigned so what we simply need to do is we need to go to the animated variable here and we need to select our arms 5 this is because we want to access the animator in order to play animations now we can hit play again and it should be working and whenever we hit something you can see that it plays a random animation and if the streak gets up to 2 it will shift to the other hand this makes the hitting feel random but it's still inside of control range so that's really awesome and we can see the distance changing just right and we can therefore we can easily adjust the max distance by using a pole like this we can go up and say hey we want to hit at this distance we can click it I mean can observe that the distance now is 0.98 and therefore we might want to change the max distance of the hitting to something like zero one point three just to go a little overboard I will leave it at 1.5 it's really up to you the damage delay is something you can also go adjust I'll just show you a quick and easy way to adjust this and that's done by going into our weapon script here and then whenever we want to adjust this we can just make a debug log statement right after the wait for seconds saying hit and therefore we can observe just when the debug log statement appears so that we can make it time there that's actually pretty close the debug that log statement is a little delayed and therefore we can go ahead and bump dial down the damage delay just a tad let's just try 0.4 and there we have it I think that's pretty well synchronized and now we can go ahead and delete that again so that's a great way to a great and simple way to sync up the damage delay with the animations you can of course go ahead and attach other weapons I'm definitely going to make a video in the near future showing you how to set up weapons for the inventory system and we are going to be using them and the animations should work just fine with them too so that's pretty much it for this video guys I'll just finish up by making some of these unnecessary variables private so private the hit one streak private the hit two streak and private the distance you really don't need those so thanks for watching I hope you enjoyed the video and I'll see you in the next video