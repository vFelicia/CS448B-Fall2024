thanks for tuning in at braies hello everyone and welcome to video number 21 in make a game a cool series on making a video game in unity so today's video is really really awesome what we're going to be doing is we're going to be importing uh some really cool looking graphics for our enemy and hopefully we get to set it all up uh if not I might split it up into a couple of videos we'll have to see um but this is super awesome whoops go away iCloud star and this is super awesome because it will of course make our game look better and I'll try and teach these techniques uh in a way so you should be able to import any model uh that you find or make yourself or whatever um so I really try uh to keep these um explanations uh General uh so you can apply them to to other models but um cool so of course if you have have any questions just hit head over to fis.com uh I'm there to answer your questions and uh then of course I want to mention that the model we are going to be using today was made by a cool uh guy named Seine iben and I will have a link to either a Facebook page or something of his he also provides other cool uh models and uh stuffff which you should definitely check out uh but another thing is that the model that we're going to be using can be found at uh at bra.com if we hit Ono projects and uh we look for the me a game course here uh I really need to redesign this page it's it's not really pretty but here you can download the scripts and assets and I will make sure to update that so the model we're going to be using is included so that's enough talking for now let's open up the mega game assets pack that you've done downloaded and also let's open up our project as we left it last time remember we ported it over to Unity 5 so it should look somewhat like this and uh at the moment when we hit play uh you can see that we can oops play here cool we can roll over and we have this Cube we have a dying mechanic when we hit it uh and uh we can also whoops for some reason it did it twice there we might fix that at some point and uh we can also just jump on top it and it will explode um however there is currently a bug with the particle system uh and I will show you what that uh what's that what that is all about um a bit later so now let's import the model so navigate to Mega game assets pack I'm just going to remove this here cool and uh then go under models and in here you see Mario enemy and uh we open that up and you can see there are three blender files first one the enemy. blend is the actual model that we're going to be using so that's kind of our starting point the other ones here enemy die and enemy walk also includes the enemy plus a couple of animations and it's very normal to do this where you have uh basically the enemy three times but with a single animation on each uh it's it's a very normal way of kind of um of handling these models that have animations so you'll see that quite a lot but it's really easy because in unity we can simply take the model from the enemy and the Rick from the enemy and then take the animation the die animation and walk animation from these two files and uh kind of link them to the enemy model so you'll see how we are going to be doing that and then we also have a body diffuse Mater or Texture here and then I diffuse texture so if we open this up let say it's pretty simple image uh that maps with the UVS cool and here you can kind of see what the enemy will uh look like uh but I don't want to spoil it fully it's of course from Mario where where else would we get a typical enemy so in here we are going to go under models we're going to make a folder here called Mario enemy or maybe just enemy I'm just going to call it enemy so double click that and of course you don't have to use the one I'm using uh it's it's of course going to be a bit easier if you can follow along the exact same way that I do it um but you can find any um nice decent looking model on the on the interwebs or use blender to create your own there a bunch of tutorials on the uh on YouTube on using blender too anyways so let's just select all of this and drag it into our newly created enemy folder and unity is going to load it all in and it might take a bit of time because it's uh importing these blender files but um actually that was fairly decent uh on the speed there and uh when you import it just like this uh you might see that uh the enemy gets it uh its material applied right away or you might see what I just saw that I will have to do it manually uh so that's kind of a 50 50/50 chance I did this practice once and it and it for some reason linked up there um cool so what we're going to do here is we're going to take our enemy and bring it into the scene and you can see that it's way too big so let's just scale it down but instead of scaling it in here I want to use the scale factor here uh I just think that makes it a bit easier to work with and I'm going to set it to 0.2 uh other than that we we can pretty much leave any everything else as is looks good so let's it apply on that that's a lot better and we can do the same thing with these two so 0.2 not that it's going to make a difference because the model here is not something that we're going to be using just nice to keep it clean then select all of them go under rig and just make sure it's set to generic and create from this model and then we can set the root node uh to amateure and basically the root node is the top bone of your skeleton hierarchy uh so if you have modeled before you know what I'm talking about if not just select this then hit apply and uh it's just going to repport everything cool then we can go under animations and this is where you'll see also if we expand these you can see that under our enemy we have only the default take which we are not going to be using so we can select our enemy and disable import animations then we can select the enemy die and see that we have a default take which we're not going be using so we can remove that and then we have the enemy die so we can apply that just to tidy things up a bit and then on the enemy walk we can again remove the default take and just leave the enemy walk we also want to make sure that the enemy walk uh Loops as we play through it you can see it does so down here but we also want to have it do so in game and to make sure it does that uh simply enable Loop time and that's going to make sure it Loops so if for some reason your animation doesn't Loop simply find it by selecting the model going under the animations Tab and enabling Loop time if uh your model kind of jumps between looping and all that you can try and uh play around with uh baking in some of the root transforms uh and uh messing around with these settings uh it's going to work fine for the model that we're using here so um but yeah just so you know that's where you should play around with things cool so here you can see our shiny guy and uh let's add some uh materials to him so if we open up our enemy and go on the materials folder you can see he has a body material and an eye material and then what we do uh actually I know why they weren't automatically assigned now uh it's because this was named body diffuse and this was named I diffused if that has just had just been body and this I they would have automatically been assigned so you can of course rename them before importing but it's really as easy as selecting um actually I'm going to do that up here so selecting our body uh finding the material here and simply dragging the body diffuse into the be Channel and we're going to do s the same thing with the eyes so we're going to select eyes open up the uh material and then just drag the ey diffuse on the Albedo so now you can see he already looks a lot nicer that when then we can maybe select him and rotate him a bit so he faces the light that's a lot better and uh then we can select uh his two materials here so let's select the body uh let's make that brighter here something like that looks pretty good and maybe bump down the smoothness a bit something like that so our specular isn't as harsh uh then we can select the ey and here I really want to get that uh concentrated uh specula so I'm going to really bump up the smoothness quite a bit so we can get that really glossy eye feel I think that looks really really awesome uh with the light reflect cting there cool and I'm also going to bump up the albo uh color just a bit not too much there so now we have an awesome looking enemy and we can actually get him animated fairly quickly because we already have some nice looking animations we have a die animation looks like that I can just expand on this a bit see there and uh here we have the walk animation that's pretty much everything we're going to be needing for this fairly simple symol enemy so what we can do now is we can Implement him into our uh Cube so let's first select the enemy and uh let's drag him let's see here uh so we can find our enemy Center open up the enemy you can see we have a graphics object here uh so what I want to do is simply just um replace the graphics object with our new gra uh Graphics here so drag him under there rename him to Graphics take the other Graphics object and simply uh copy this component then remove it then we can uh just entirely disable uh and it's going to or remove this Cube I'm just going to wait wait a second then I'll show you how to solve that what it just said there uh but then select our Graphics here and then go up here and select uh paste component as new so now we have our box collider there then we can reset the transform by right clicking and uh we can also rotate them 90° you can type in 90 up here on the Y and uh what we want to do here is we want to drag him down so he's standing on okay now it's time to delete this Cube so we can uh simply select it and hit delete go continue and this is where a lot of people get lost because now this a't is isn't uh blue anymore because we've lost our prefab connection so how does do we um remove objects with while still kind of maintaining or um keeping uh ourselves linked to the preat well it's actually still linked but it's just not a connection anymore what that means is that if we want this to appear and work as a prefab again all we have to do is select the root here enemy Center and hit apply and everything goes back to Blue so that's something you will have to remember whenever you are um removing objects from a preab so now let's just drag him down here until he stands on the ground firmly there and uh then we can adjust the position of the Box collider using uh the center and size values here and uh one thing that you will notice is if you hold down Alt uh you can find tune the values a lot more than if you don't so that's nice if you really want to get precise with uh things so just kind of get it right that's going to be just fine for now cool we could of course be using a mes collider but I think that would just be overdoing things especially because this guy is going to be moving so that wouldn't wouldn't make too much sense uh we could then use multiple sphere colliders maybe to kind of brick him out uh but I really don't see the need uh I think a a box collider will juice just fine and it will definitely be a lot a lot less CPU intensive cool so now that we have that in place uh let's go ahead and adjust our killbox and hit box so let's just bring up our hit hit box here uh something like there looks pretty good let's just drag it out a bit drag it out here something like that so if we jump on that from any angle it's going to be really good he's going to die and then our killbox simply want to move that up a bit and uh scale it up a bit too something like that is going to be our kill box so now when we select everything here we can see kind of our Collis structure and I think that looks fairly great um there's a chance that we might hit the edge here without hitting uh either the um kill box or the hit box so maybe we'll just bring up the killbox a bit to kind of get rid of that edge case scenario we could be using more colliders uh to make it even more precise uh but I think we've kind of ruined that chance now uh then maybe a bit more on on the hitbox here just block that out and yeah I think in in practice this is going to be working just fine cool so now that we have that in place uh we can go ahead and hit play now and things should be working he's just not animating yet and uh we can die game over and uh we should also be able to kill him indeed we can one thing you will notice and this is was what I was talking about before with the particles is if we hit him while he's away from the center oops I'm so bad at this game um I will attempt to hit him while he's not in the center there the part particles will always spawn at the center point and the reason why is if we look at the enemy Center this is where our enemy script sits and if we double click on the enemy scripts to open it up in mono develop we'll see see that uh we are currently instantiating the death particles at this transform. position and with this rotation uh so that means that they will always spawn right here even though our enemy object has moved over here so that's kind of a problem that we are going to solve uh whilst animating this guy so let's uh start out by kind of creating the animation structure uh we're going to create an animator controller so if you remember we've done this before with the Enemy Center that's what controls him going back and forth now we're going to be doing this with a the move and die animations um actually one thing I want to tweak before we get into that is I just want to kind of rotate him whenever he uh he is going the in the other direction and that's easily done by simply trig the animation that we made for the enemy Center here so if we go under the enemy Center animator I've talked my animator panel down here so I can see it in the scene and game view whilst animating um we can see that we have this enemy move uh animation and uh if we select our enemy Center and go under animation we should we should be able to see it here in action and all I want to do here is simply go under add property make sure you navigate gate under enemy then transform and add the rotation property and uh what we can do with this let's just collapse the position there what we can do with this is that we can make sure that we have a key frame right here then move forward right until we hit the 4 second Mark uh then add a key then go right past it and add another key key and uh this is where uh we'll rotate him so we'll rotate him 180° on the Y oops what's going on oh we are animating the enemy Center we want to of course have the enemy selected Here and Now rotate 180° so we should see him kind of go forward whoa he's acting all kinds of crazy uh so let's go under the curves here uh let's uh oops let's select our rotation let's select the entire curve hit F to focus on it then right click go on flat to make sure that it doesn't do all these spinny things on its own now we can see what is going on and uh indeed it's acting weird it's going fine here it's going forward then it's rotating and then it starts slowly rotating in the other direction and uh that of course makes sense uh because we have a rotation key frame over here too so what we want to do with this is we want to duplicate this Frame here and just paste it over right up until this point so there he will turn again uh what you can do is of course extend this uh so that he uh Waits with rotating uh until he kind of moves uh to the right again but I think this is going to be looking just fine for our purposes can see what that does here rotate and I kind of like that this is a pretty aggressive effect we might just dim it down just a tad but I kind of like how um how how it just cuts off there and uh again if you can always mess around with the curves if you would like there to be some kind kind of smoothing uh but I like the flat mode for this quite a bit so now when we go in and play we should see him follow this pattern indeed we do cool so now that uh he's always facing the correct uh way direction we are going to make sure that he also animates so what we're going to do here is we're going to go into the project we go going to go under models enemy right click create animator controller and we are going to call this enemy controller uh or do we already have an enemy controller no this is the en enemy Center uh cool so enemy controller and then we'll uh go on the graphics object and you'll see it already has a an animator attached by default we can drag in the controller then we can open it up in our animator simply select it and click on the animator and you can see that you have it selected down here then what we want to do in here is we want to uh drag in some animation so we'll just dog it up here we can then expand our enemy die drag that in uh in there we'll also drag in our enemy walk and uh yeah that's the two states that we are going to be using we want to set the walk as the default uh the layer default state so you can see that it goes from our entry point into the enemy walk animation and then we only want to transition to the enemy die if something happens and we'll do this using a new part of the unity mechan uh system which is a trigger before we used bulls and then we uh kind of set them to true and then Qui quickly to false again or whatever but now we have a trigger component uh that simply allows us to trigger the animation without having to keep track of any values so that's super cool so what we can do here is simply call this trigger for die and then we can make a transition from the enemy walk to die and then select that and as the condition make sure we have the condition die uh then we'll make sure to disable has exit time or it's going to wait for the end of the animation and then maybe shrink down the um fade time just a bit so now when we go into G the game and maybe bring the animator down here we'll be able to observe what our enemy does here so he'll walk back and forth and when we click die he'll fall so that's super cool uh we also of course need to uh need him to stop animating but we'll do that through a script awesome so now that we have that in place um we are actually ready to kind of implement all of this uh inside of ja uh in in JavaScript um one thing that we will need to do is we will need to go under our enemy Center um controller here and make sure that it has a kind of non animating state to transition to so so that it will uh stop moving once the uh character Falls and uh we'll again do this using a trigger and we'll just call that stop uh we'll then create an empty State here simply called um idle or stopped stopped is fine and uh then we can simply make a transition from enemy move one to stopped uh when stop the the stop triggers is uh is um set and uh then also you want to select the stopped uh State and make sure that right def false is set to false because right now if we hit play here and then stop him oops we also have to make sure that uh has exit time is set to false so right now if we just stop him oh actually that worked just fine surprising I expected him to jump right back oh he does he he jumps right to the center so we just want to select stopped here and disabled right the fals and now he will stop uh his uh walk animation or uh stop moving and just stay put where he um he was when the stop trigger was C cool so let's move on now now we can go into our enemy script and kind of edited uh to uh fit our new animation setup so let's double click the enemy here to open it up in mono develop and we want to make a couple of variables the first one is going to be to our enemy animator and it's going to be of type animator the second one is going to be the center animator that's also going to be a type animator and um I want this Sentry animator to be a private variable because we'll just fill that in ourselves then we're going to make in the F start function actually let's do a wake a wake is is generally used for making references to components and game objects then in here we can set Center anim equal to uh and then transform. get get component and we're going to get the animator component so that should be working I'm I'm too used to CP uh this might not be the correct way of doing things but if I remember correctly this should work then we are not going to destroy the game object anymore when we jump on his head and we don't want these uh particles to spawn uh at the transform position but in that at the uh enemy anim do transform.position and the same here so enemy an. transform. rotation uh then what we can also do is we can uh set the enemy anim do set trigger and uh the trigger name is die so the enemy will die there and uh then we can say centry anim do set trigger and then it was stop I believe there we go so that should actually do what we wanted to and hopefully we'll get no errors no we don't I actually remembered how to do this uh implicit downcast from component to uh animator yes I am aware that this is a downcast but um actually not sure how to kind of if we want to make this explicit in JavaScript I believe that we just write as animator yeah now it's an explicit downcast so basically what we're doing is we're saying that we want this get component uh to turn into an animator and we're doing that by using an S animator uh add on that's that's called casting Okay cool so now we should be able to select our enemy Center and then drag our enemy anim on here the graphics object there and uh it should gather its own animator itself so now when we hit play and uh we can see him walking here back and forth and when we jump on his head he dies but he does so kind of weirdly um so let's see if we can fix this so what has rotated here so that's still facing the correct way I believe and the enemy here that's rotated for some reason why does that rotate no it no it hasn't so what's going on uh let's see this for some reason has no influence on the graphics object even though it's ped to that that's super weird so let's just try that again jump on his head if if I'm able to oh my God this is embarrassing that worked okay so this is curious to me there you can see another bar we'll have to fix um but that's not really what I wanted to happen here maybe didn't have time to save the script okay so now it's working so we'll just assume oh now I know what was happening there of course okay so when he was very quickly rotating over here that's when he died and then of course the entire graphic was just flipped yeah so that's not really a huge amount of things we can do about that I mean we could reset the position but I don't really think that's something we want to do no that's just stupid let let's not worry about that and if if we encounter it a lot of times we'll fix it I I'm sure we'll find a way cool so uh the last thing is I want want to just gather some re uh references to these kill boxes because I think we should disable them um once the enemy dies um so in order for us to do that we'll also need to disable the Box collider uh so very easily easy way to do this is simply uh copying this box collider then removing the component then we are going to add an empty object call this box collider drag that under the enemy object reset its transform uh then simply go up here and paste the component as new and we can simply drag this down or uh I'm sorry reset the Y position here the center there and then drag it up a bit something like that and uh then what we can do is create another MC object and we'll just call this colliders drag that onto the enemy drag the Box hit and kill uh box colliders under there hit continue go up here hit apply and uh now we can head into the script create a variable that we are going to call variable colliders uh yeah colliders of type transform and uh then down here we will simply either destroy them or simply disable them I think we'll just destroy the object I don't see any reason why we would keep it so simply destroy the liers do game object something like that uh and then in here we'll make sure that we make a reference to our colliders object there and now when we hit play we should be able to jump on the guy's head and he falls down and then now we are unable to collide with him so that was basically everything for making an enemy let me just see how long that video was who okay so I think it's just barely uh short enough to keep it in one video so I hope you enjoyed it I really wanted to show every step of the way when making a character like this it's it's really a lot of tweaking and trying to get him work with the mechanics and all that and I I really didn't want to cut away on on any of the figuring out of stuff uh because I think it's very really important that you get to see that part of the process too so um thanks for watching I hope you enjoyed it and I'll see you in the next video