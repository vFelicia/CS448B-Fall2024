thanks for tuning in at brakus hello and welcome to video number 13 and make a game a cool series on making a video game in unity this is just a really cool tip on making a music manager that will store all of your music and the cool thing about this is that we can control it control where it lives in the scene so that the music won't start over every time you play a new scene this is just a quick video because I've been so busy with making tenhour games it's a cool event that I'm going to launch hopefully in the next couple of Victor of weeks if you want some information about it go to facebook.com slash break ease I've written just a quick teaser there and I hope to see many of you participate in the event cool so let's get started with today's video so as always I've opened our unity and let's just go ahead and write into it so we can see right now we have the DM objects and this object has a game master script that sets up everything we need and the relaxed music component on it what we're going to do instead is we're going to create a music manager empty game object with the audio source and make that spawn in so let's rightclick on the audio source hit copy component and then just remove it then let's go to game object create empty or press control shift n then let's rename this to underscore mm for music manager or you can just do underscore music if you want now we can go ahead and Center out the position so right click on the transform and hit reset position and so it will be in the center of the scene that's just nice for these kind of objects then we can go ahead and right click on the transform again and hit paste component as new and it will paste the audio source with all of the right values then we can go ahead and add a tack I've already created a tag called mm you can of course call it whatever you want by going under add tag expanding the size and then just typing it in as an element then again selecting the object and selecting the tag great now we can go ahead and make the center prefab by dragging it on to the project pane now we can delete the object from our scene because we're going to spawn it in through code so let's find our TM object and this is just an empty object with the gamemaster script we can double click this to open it up in monodevelop and let me just zoom in on the text here today I will remember to sue min because many times I've forgotten it and you guys got a little angry there huh this time I will make sure to do it but as always monodevelop is sparking outs so I'll just have to quickly end the task here and restart it it happens so here let's try this again right so now I'll zoom in great so the functionality we are going to be making is actually quite simple all we need to do is first off create a variable that's going to store our music prefab so let's just do var um music prefab of type transform then in the function start we are going to spawn this in but we don't want to spawn it in every time we load the scene because we want this to live throughout scenes we don't want it to destroy when loading a new scene and so if we both don't destroy it when loading the scene and create a new one we are going to just going to stack up the music prefabs and therefore we're going to check if there's a music prefab in the scene we do this by saying if game object dot find game object with tag and make sure that its game object in singular or you're going to get a hole away and then in here you simply input a string in our case it's mmm and close it off there and then open up the brackets so right now we're saying that if we can find a game object called mm but we want to say if we can find a game object called mm so then we just put a exclamation mark right in front of the code and it will say if we cannot find a game object with the tag mm then we're going to do something here and the thing we're going to do is we're going to instantiate our music prefab at just the same position as this object and with 0 comma 0 comma 0 rotation so that's a shortcut for that called catonian dot o qua return yin dud identity that will just make it spawn with that no rotation at all so just close that off and the parentheses but we want to do something more because right now we're just spawning in their object we also want to tell unity that this object shouldn't be destroyed when a new scene is loaded so let's first off make a reference to this make this into a variable so we can change it so we do this by adding var in front of the instantiate function and then we could call it men M manager equals instantiate blah blah blah so now we're simply saying that we want to instantiate something and when we refer to this instance of the object it will be called a manager so what we can do down here is we can then tell unity to do different stuff with that object but we before we do that let's just save this and see how it works in unity right now so when we hit play first off we have to of course drag in the music prefab so let's just find it under our assets here drag in the music there then we can hit apply to the prefab here let's hit play so as soon as we play the music starts playing and we can see that a music clone has spawned into a scene whenever instantiating something unity renames it with a clone after I don't really like that so we can go ahead and change the name of it while making sure that it won't continue on to other scenes so right now if we continue playing here and if we jump down game over we can see that it will instantiate a new one so the music will just restart and then could get really annoying because then you will hear the same parts of the music all the time so instead let's first off do em manager that name just to clean up the name a bit equals music prefab dot name so instead we're just setting this instance of the object to the name of the prefab and then after that we can use what's called don't destroy unload oops am i timing is wrong it don't destroy onload I'm pretty sure that's how and then we open up yeah for some reason unity didn't suggest it but that's how it it's typed and then don't destroy a new load and then you simply input a target and then we just do M manager so now it spawns the object calls it a manager make sure that its name is the same as the prefab and then it makes sure that it won't get destroyed so now when we hit play the music object is created and when we jump down game over the music will just keep on playing and so we can advance in our game without the music repeating that was basically it for this video I know it was a short one but I just wanted to get this out of the way I have a lot of exciting stuff coming so stay tuned thanks for watching and I'll see you in the next video