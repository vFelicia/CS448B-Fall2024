hello everyone and welcome to video number 27 in our Survival game series done by breis I am the CEO of breis and in this video we are going to dig into mechanim uh so mechanim was launched with unity 4 and it's basically the animation system of unity so uh mechm is is really powerful and you can do a lot of things with this but make sure you have your Unity updated or else you won't be able to do these things so uh we are going to look at a pretty basic uh mechanism setup and uh and here we have the a picture I just quickly threw together uh which explains uh kind of the setup we are going to use uh this is not the exact blend tree we're going to be using but it's just uh to show you you how you could uh set things together so on our player we have our main camera and under our main camera we have our arms on them we have the animated component storing a controller and that's really what we're going to focus on in this video if you want to know how to set up these arms and import them correctly uh watch tutorial number 25 I believe uh where we do just that that's two videos ago um but basically the controller the mechanim controller is what allows us to add animation and blend between them depending on variables which we can then declare in a script and that's a really long sentence uh and you might not understand this yet but I will expl explain a lot of things so uh don't worry about that okay so this is basically how a uh me controller could look and uh it stores different animations in here we have three different animation we have standing we have jump and we have punch so uh if we just zoom in on this we might be able to yeah so we have the standing we have the jump and we have the punch and from the different animations to the other we have Transitions and these transitions uh do several things there information about how we want to blend between animations uh so how they should physically uh move between and and how long of a fading time that should have and and so on uh but they also store information about when to um to transition so for example if we would determine whether or not we are running uh we would do this depending on a speed variable or if if we want to determine whether or not we're jumping we would do it using a Boolean which is a true or false okay so let's now actually dig into unity and uh apply this so here we have our arms and if we go under our uh and find them in our project pane there we can see we have the animations set up so they are working just fine and now we want to apply them in game and last video we uh or the last video where we made animation we covered uh how to add the controller so this is how our controller looks so far and this is just basically one single state which is the idle using the idle motion or the idle animation clip and it's playing with a speed of one and the reason why this is Orange is because because it's the default clip it's going to play so if we right cck click on it and hit the uh make set as default we can make this the default clip so uh so that's really useful and that's usual the idle animation you want to be set as default uh next up we have this and this is just included in any uh controller in mechm uh by default this is called the Nate and this allows us to just blend into uh animation no matter what state we're in so normally you have uh you make transitions from states to States but this will allow us to blend into uh an animation from any state meaning that if we would for example want to include an animation uh where we die so if our player dies we want to be able to do that whether or not he's running or hitting something or idling whatever we want to be able to go to the dying and so so we would have an animation set from the any State uh it's really important though that you remember to make an if uh on the transition so that it won't just die all the time okay but that's not what we are going to focus on now I'm getting ahead of myself so uh let's just really focus on this so let's add in some more animation clips and uh the next one I want to make is uh the WEA the idle animation so we could go under our arms and then select our anim clip and just drag it in so let's do that so under our arms expand that and then have the idle with uh weapon uh select select it and then just drag it in and here we see it so let's just move these over here so we can have a good view so basically uh we want to uh play the idol by default but if we then equip the weapon we want this to be playing so let's just turn off the fot I okay and let's make a transition and you do this by right clicking from where you want to transition hitting make transition and then clicking to where you want to transition and uh let's now H click on this transition uh and so you can see we have quite a few things going on this up here is not what something we want to focus on so we can just ignore that we want to turn turn off the at here then we want to set a condition so the condition uh is the if statement basic basically so this was will allow us to have a mechan him check whether or not something is true before actually um transitioning so let's make a new one so let's make a plus well actually let's just change this one by default you have the uh condition called exit time and this allows you to just transition back whenever the animation is done playing so if you want to just transition back when you have played it once for example in an attack animation you can use the exit time but uh before we can make a condition we want to add a parameter and a parameter is basically a variable so hit the uh plus Down Under the parameters and then uh select the Boolean we want to uh call this weapon is on and uh or we could call it equipped let's just leave it at on so we don't have to type all that much and now we can click back back on the transition go under conditions change it to weapon is on and then true so if we put on our weapon it will transition to the idle with weapon and this is a timeline so here you can scrub through your animation and you will see it changing in your preview so if we just expand on this just a bit we can see it playing here whenever we change the slider and so we can go in and zoom in here and use alt to navigate around and then we can go to this point where the idle with weapon starts and we can see that it's fading down here so let's just hit play and see if this is is fitting I want that to be just a bit quicker the closing of the hands so what we can do is we can zoom it in even more so now we can really see the transition and then we can take the end of the transition and just close that in or you could take the start and close that in but we are just going to go with the end here so bring in the end a bit there we go and if you want uh this idle with weapons to start right at the transition you can just drag it all the way to the right and it will snap back now let's hit play and the fingers close closes really fast so hit play and that looks great so that's how it will blend and uh when we're satisfied with that I am now uh we can go ahead and make the transition back again to the idle so hit on idle with with weapon then hit make transition and go back to the idol uh and so now under the conditions we want weapon is on to be false and if we zoom in we can adjust the transitioning here so let's hit play and that's really too slow again so let's just drag this in that's a bit too fast this is really a matter of preference that's really great so uh you could have an animation uh that will actually pick up or switch the animation here uh so so we could have him pick it up from the back or uh from the ground but for now we're going to go with the simplest so just have it um open and close and then the uh weapon will later just spawn in on his hand but that's something we're going to cover again the inventory system is on its way okay great so next uh next up let's create uh just a state for running uh so under the parameters here we can have the uh speed variable uh and for now let's just set it to something like three so under here the parameters hit the plus sign make this a float change this to speed and let's just have that at default at uh zero actually let's just start out by having this a Boolean so we can quickly test it out so make that a Boolean instead call it speed and uh now we can just uh or is running let's call it that so is running uh and now we can just have a state with the running uh so now we can just quickly test it out and then later in the script we will have it be a a float so that we can uh determine the speed inside of meing them if you didn't get that that's all right uh but let's drag in the Run animation onto mechm and hit the foot K turn that off and uh the Run animation is basically something we want to be able to shift to uh from both the idle and the idle with with weapon uh we don't want it in the any state because we don't want to switch to run while uh while hitting uh something um you could do do that some uh games do that but I don't want this game to do that uh so now let's hit the idle hit the make transition and then click on on run now select the transition and the condition should be changed to is running and that should be true and now let's go down to where it fades zoom in on this try toit play and that actually looks pretty good yeah I'm satisfied with that um we could make it just a bit slower yeah I like that uh and now let's make the transition back again so run make Transition then idle and let's again set the condition to is running equals false and let's zoom in on the transitioning play and that looks great already I think sweet now let's do the same with idle with weapon so make transition and then click on run the condition should be is running equals true let's have a look at how it behaves so hit play that's pretty great a little bit of sudden movement maybe we could have this extended just a bit that's really great that was maybe a bit too much that's perfect and now let's make the transition back again and uh and that set this to is running equals false and let's see if this works that looks great yeah okay so um you might think that this would work though we have one problem with the setup we have now and that is if we take a look at our transitioning back from the run so the two back transitions here to the idle and to the idle with with weapon they have the exact same conditions and so this would make run confused whether or not it should transition to the idle or the idle with weapon if it's no longer running so on this we want to add another condition so from the run to the idle select the transition hit plus and then say weapon is on equals false so we want to transition back to the idle if the running is false and the weapon is on is false then select the other transition from the run to the idle with weapon add another condition weapon is on should be true so if it's not running but it has the uh weapon equipped it should transition back to the Idol with with weapon let's see if this is working so we could drag down our animator to our project pane maybe drag it up a bit so this is how it looks let's select the game and hit play remember that whenever we don't see something animating down here all we have to do is Select our arms and then hit the apply root Mo motion you really just have to turn this on and off it's a bug with unity and something I haven't found out how to solve yet but let's hit the play now and we can see it animating we can see the little progress bar down here and now you can go down to the mechanim window and we can hit the weapon is on and now it changes and it Loops perfectly now we could change to is running so we see the arms running if we then unequipped our weapon while we're running so change the weapon is on to false and then turn off the is running it goes back to the idle animation and so we can play around with these things to see how they transition back and forth and this looks overall really fluent and uh it's a great setup so far uh so that's it for this part of this video um I am sorry I have to split it up but else I would go uh just ramble along for too long I think uh but in the next one we're going to set up hitting uh so we are going to get in our animation Clips uh with the uh swing animations and the punch animations and that's going to be really awesome after that we'll take look at inventory systems weapon switching and so on and so forth I hope you enjoyed the video guys and I'll see you in the next one