thanks for tuning in at brakus hello everyone and welcome to this video on making a multiplayer FPS in unity today we are going to have a look at importing a cool gun model into the game and we'll also have a look at setting up a proper camera to a render the camera or its render the weapon so we can control stuff like field of view for the weapon only and also prevent clipping through other objects so that's going to be quite exciting and the model that we are going to be using today is from sameen i've been a good friend of mine links to her mind description and you can see here that I've downloaded the multiplayer FPS assets those are downloadable through brackish comm or you could just download the entire Brown project of github against all the links are in the description so if you want more of this these kinds of assets you should definitely check out some mean he does client work for very cheap and he's just great to work with let's get started so I'm going to open up this multiplayer FPS assets folder which you get in a sip file if you download it and under weapons we now have a scifi automatic and here we have an FBX file which is the model itself and we also have some textures oh I should also mention that the reason why I don't have the intro screen and all that fancy stuff in the FaceCam is because I'm quite in a hurry but it will be back in the next video so let's just take this scifi automatic and drag it into our unity project just the entire folder and we'll wait for it to import the different images some of these textures are quite high resolution and they're all handpainted so that's very nice then let's go ahead and make a new folder here and let's just call this one actually want to make one called models now and we can just drag the scifi automatic into that folder we could maybe also make a subfolder called weapons but not unless we have more than one weapon so for now this will be fine then what we will do is we will take our player prefab and drag it into the scene so we have something to use as a reference and I just noticed that the collider here seems to be a bit off compared to our graphic I actually don't know why that is so maybe we should take our player model and just move him back bit there just to Center them a bit on the collider itself good so maybe it's decliner that's offset no that should be centered that is centered yeah so that just looks a bit better good so if we go into our camera we currently have our gun here instead of just having our gun directly under the camera I want to create an MT which we are going to call the weapon holder object and this will just allow us to do some transformation for all of the different weapons so we can just move this and all the other weapons will move with it and let's just keep the gun here for a second then let's go under our models scifi automatic and drag in the gun and let's drag it under the weapon holder and we can see that this is currently gigantic and that's because we have a pre applied scale here if we reset that it quickly shrinks down to be very very tiny and let's now drag the weapon hold it over to kind of where we want all of our weapons to be somewhere like here and then we want all of them to be rotated about negative 90 on the X to come for plant a blenders weird rotation and then we can select our model and we can bump up the scale factor to something like 10 and hit apply we can also disable animations no rig and all of the other stuff should be just fine and I think this is a pretty good scale to work with it might be a bit too large compared to the model but that depends on kind of the look you are going for if you're going for kind of a comedic look that I am here with these funnylooking robot thingies trying to shoot each other well then a large gun could be kind of fun so I'm just going to keep this for now at least great so I think that this gun is almost in position we can go ahead and drag the weapon hold it down a bit something like that and we don't want this to be colliding with our models so we can maybe drag this out you will of course also have to kind of make it look good in terms of when viewed from the camera but I'm going to show you a trick in a moment that will allow us to kind of zoom in on the gun here without actually changing its position in world space because we want this to kind of not collide with our graphics themselves and we can also go ahead and maybe move this even more even further back to kind of avoid that good so now that we have that set up something like that yeah we can go ahead and delete our temporary gun it's not something that we're going to be needing and we can also add some materials to our Starfire automatic so you can see that that it already has three materials applied it's only one mesh with three materials and let's just begin with the main one if we go and just lock the inspector here we can go under the textures and we can select them and actually view their full names down here so let's find the one that says Maine albedo transparency that's going to go up here under albedo and let's make that completely white to go with it then we have a scifi automatic Maine metallic smoothness that goes under the metallic slide and then we finally we have a normal map which goes there and then we hit fixed now and that should give us a cool base to work with and then we can go collapse that and go under the magazine and that's this one so again albedo transparency and make that completely white then we have the metallic Ness drag that under there and finally the normal map which we will hit fix now on and then finally we have our grip which goes Obito transparency white we have the metallic Ness and finally we have the normal map good apply and now we can actually view our model textures and materialized and I think this looks really really awesome so greatlooking model there and if there's something you want to change like the color you can of course change all of these in Photoshop if you want or you can simply temp that tint them a bit so if you want it like a a red a colored gun you could just do that in here and it's actually going to look just fine so you could also do kind of a purple or maybe a kind of blue color which I actually kind of dig I mean this light blue here actually looks somewhat badass so I'm just going to go with that for now and that we can always change it later so yeah let's go with that so that just shows you just how customizable these weapons are because they are set up probably properly in every kind of way and yeah so let's now hit apply on this player model it looks like we lost our prefab connection Oh No unlock that and then hit apply cool and everything should be set up right only a few things aren't because right now if we were to delete this player and go and hit play we would see land host that first of all this gun model I mean it's a bit far off this is not how you hold a gun it would be much closer to the eye to feel natural also if we look down it clips through the ground also if we go over here it will clip through the ground and that's not something we can prevent when viewed from other players I mean here in the scene view we cannot prevent it from going through the ground unless we want to like limit how far down we can view which is maybe something we want to do but one thing is for sure and that is we don't want it to happen on this screen so in order to do this what we actually do is we create a separate camera that is in charge of only drawing the gun so if we got a camera here and we right click and then go camera to create a new one we can then call this the weapon camera and we need to configure this in a few ways the first is we need to remember to go to a player under player setup and add a 7th slot here for disabling the weapon cameras let's just drag that in and that is something we want to disable if we're not the local player or we are going to have multiple weapons drawn over the screen and it's going to look super weird the next part is setting the clear flags to depth only this way we don't get stuff like sky boxes or with solid colors or anything like that we want the projection projection to stay at perspective even though you can change that I actually know that would up ok and then the depth should be 1 and this is because we want it to be drawn on top of the other camera so if the other camera has a depth of 0 we want a depth of 1 or above so the value here is completely arbitrary it just needs to be greater than the default camera then the rendering path is going to be fine occlusion culling all that we don't need to change any of these settings only we need to change the culling mask and this is again what layers will be drawn for this camera and currently we want to set this to nothing and then through script we want to set our weapon if we are the local player to a layer of let's say weapon and then we want to add that to be drawn in here so let's go ahead and add in a layer let's add the layer weapon there and I'm not assigning this to any object I'm not assigning it to the weapon camera or the weapon holder or the weapon itself I'm instead going to assign this through script so we can make sure that it's only the local client that will have this layer assign so in here under the culling mask we are going to go down and select weapon and this way this camera is only in charge of drawing the weapon then we can delete the flare layer the cuy layer and the audio listener and you'll apply on that then we can select our default camera and this is where we want to turn our third laser so we want to turn off the WebP and we don't want it to be drawn here or else it's going to be drawn two times and on top of itself and that's going to lose superweird and be stupid so let's not do that let's just hit apply on that and again if we go at it and play now and nothing is going to have changed and we're still clipping through because we're not actually changing the layer of our weapon so in order to do that let's go in and find our player shoot script let's double click that and we're just going to make a fairly temporary solution for this because in the future I really want to have some kind of way of doing a weapon switching or at least a better way of setting up a weapon pairing it with some graphics and then moving on I mean right now graphics is something we do under the player and the weapon here the name and the damage is completely separate from that I would much rather have this unified idea of a weapon where we have graphics we have stats and the name and all of those different kinds of stuff and then we just call a method that says equip weapon and it will load all of that in but that's in the future especially when doing networking that kind of stuff can be tedious so that's not for this video hopefully for a future one let me know if that's something that you're really wrong I want to see that stuff is coding intensive so yeah the name here we are going to now rename that to scifi automatic we should really come up with a better name also if you have a good name leave it in the comments we could do something like this shredder or blaster can annoy something and the damage is 40 and the range is 100 that's fine and this is an automatic weapon and therefore we want to in the future add the option to do automatic shooting but I don't think that's something that we can be covering in this video it's not too difficult but we also want some shooting graphics and in the video where we add those we are probably going to make it automatic okay so we have the scripting in Visual Studio and all I want to do here is maybe first off change this to a private player weapon on and let's see realize that and also making now allow another serialize field and this is going to be a private and then it's going to store a reference and we want that reference is the layer under the transform or the game object I actually believe it's on the game object whoops not game manager game object and this is going to be a reference to the weapon weapon graphics so we are simply going to do weapon GFX and then in the start method we simply say weapon GFX dot our layer equals our layer mask dot name to layer and the name that we want here is something that we will probably also specify up here so a private constant string and this is not going to be the player tag this is instead going to actually I kind of want to make this available so we'll do a in sterilize field instead and this is going to be a private string and it's going to say weapon layer name and we are going to fold that to weapon easy as that and then we want to take that and put it in here that's going to take in the string return an index that is paired with the layer and that will set that in here it should really be that easy and because we're only calling this this start method on the local client because we are remembering to disable this through script if not you can see up here under the player setup we have the player shoot right here so we are disabling that so therefore it will only be called on a local client and therefore only the local weapon will be set to that layer and everything works out so now on the weapon graphics we want to add reference there so let's just drag this in go in the camera weapon holder sci fi automatic find up player drag that in their weapon layer name weapon and apply boom cool let's do that let's hit save let's just try this on the local client first LAN host so now you can see no clipping yay celebrate and we can still view it in the scene here of course in a moment you can see it's the clips there that's not something that we can prevent right now and we can see that if we move over to the box here there is no clipping on the screen so our technique is actually working and that's awesome another thing that you will notice here is without changing the position of the gun here or without limiting our field of view we can limit the field of view of the camera that draws our gun and this way we can zoom in on this gun make it feel like it's actually closer onto the robot without limiting how much we can see of our surrounding so if we're going to play a 1 camera then weapon camera we can drag in the field of view here and now it looks much more like an actual FPS where we have our hands on the grip and the gun is much closer to the eye so this looks much much better if you ask me and again we haven't changed the position of a camera at all or how much we are able to see actually what we can do is we can go in I'm just going to change the clipping planes here to something like point 1 just to be sure if we can go in and select the other camera and we can actually make the field of view much larger here so if you wanted the ability for the player to see much more you could actually do that and I'm going to bump this up to 70 because I like games with a bit higher field of view so you can just see how much control this actually gives us and yeah so let's start stop playing drag in the player here and just recreate those changes because we made them while we were in play mode so let's set the field of view here to something like 30 the near clipping plane 2.1 and apply on that and the cameras field of view 270 and let's hit apply on that too so now that we have those things there let's fly delete the player let's build this out to a separate client just so we know that this works on the network and not just in on the local instance here which is also the host so let's build this here wait for the lighting to regenerate in unity there we go let's hit play here goal and host and you can see that 30 might have been a bit too much actually and what I also want to do is I probably want to move this over a bit more to the left but this is something we can tip back on the local client what we want to see is whether or not it shows up when we join with another client here and indeed it does so we can see the weapon there we can see it here you can see it updating and you can see that it looks just fine when we aim around and also observe just how shiny these weapons actually are I mean they look really really great so that was basically all for what we want to do today actually it's quite a short and to the point tutorial if I must say so too much myself and also again I just want to tweak these settings a bit so the weapon holder let's just drag it over a bit and on the weapon camera just try that 40 instead let's see if that works as well planned host yeah and just ignore that camera that's because I didn't want to disable or remove the other player here and that's not something that's supposed to happen so there we go you can see here that this actually looks much better and of course you can tweak that how anyway you want next up is probably adding some particles when we shoot maybe a line renderer from where we shoot and maybe even some bullet impacts also I really want to fix this bug where we can really jump on top of objects without it bucking out so that's definitely also a priority and again this back here only happens because we're giving one player control of multiple players which we really really shouldn't so as soon as we delete that the bug is fixed and everything is working so that was basically it for today's video I hope you enjoyed it and I'll see you in the next one