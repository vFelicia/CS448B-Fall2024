this video is brought to you by our own Metta thank you so much for donating if you want to support breakage yourself you can go to patreon.com/scishow geez thanks for tuning in at brac ease hello and welcome to this video including at our defense game in unity today we'll be making a game over screen so whenever we run out of lives we'll have this cool UI that animates onto the screen and displays the amount of waves we were able to survive through along with a retry button and a menu button and we haven't yet created a main menu but it's definitely on the roadmap so we'll just go ahead and add this button now and then we can link it up to the menu at a later point also if you think that I sound a bit weird that is because I'm currently sick it's nothing serious but it is definitely annoying so and it might have an effect on my voice and also um I will have to push the livestream from this month livestream on to the beginning of next month because of this and yeah so I will be livestreaming hopefully if everything goes well on November the second which is a Wednesday so you can reserve that date if you want to join in on it and yeah that was pretty much all I needed to say so let's just jump right into it so as you can see I'm here in unity and what I want to start with is um kind of sketching out the UI so let's start by going to our overlay canvas because this is going to be overlaid on top of the screen and creating an entirely new object let's just make this an empty object in fact and let's stretch this to fit the entire screen and this one is going to be our game over UI then we can right click on that go to UI and select arm panel and again we want to stretch this to the entire screen we want to remove the source image to make this completely square and get rid of the roundings and then we can find some cool background color here so I want to make this pretty Dyke and I wanted to try out kind of a purple looking color without making this too girly I think that could actually be pretty cool so something like this just to kind of dim everything down and then we can op the Alpha on this so let's actually adjust the color again now that we've done that and I think something like this is fairly decent as a backdrop what I recommend whenever doing this kind of game over menus and stuff is going into Photoshop and just going crazy if you know how to do 2d design to make a cool looking game over screen but if that's not something that you want to spend time on if your thing that's too difficult you can just do this inside of unity as I'm doing here so this is going to be our background and then we have a ul mi UI element which is going to be a text object and this is just going to say game over at the on top of the screen here so that's just actually let's just anchor everything to the center but let's then move this up and kind of size it up here and let's change this to Center and Center and let's make this a font size of thumb something like 100 we're going to make this say game over and of course we need to scale this out in order for this to be displayed on the screen and this is maybe just a tad too big so that's cool 85 or something it's also changed the font to Roboto black and change the color here to some completely white color I actually kind of like the look of this but I think we don't even need it to be on this heavy on the font I think something like a real bottle medium is actually going to be great and then we'll put whatever text we decide to show here like really in the center and make it really bold to emphasize it so this looks pretty good and then what we can do is maybe just add some kind of shadow to this so let's add a shadow and we can maybe make this 2 by minus 2 and you could just make this black or we could go completely crazy and make it red but I think that we are again going to do that to our center element here so this is fine and we can call this our game over text or you could just call it something like title then we can duplicate this and actually let's just make this fit the screen it just looks better that way let's duplicate this and move it down and one thing that I wanted to do is right now if we maximize the game view you can node you will see that the text doesn't stretch in order to easily make it stretch together with our game view we can go into our overlaid canvas we can find the canvas scaler and change this to scale with screen size and if we then bump this over to scale with the height we actually get a pretty nice looking effect here especially for the icons down here which before just kind of disappeared in the UI but now that they stretch with it things are looking pretty good so that's let's just keep that so our second gameovertext here is not going to say game over this is going to be a number and this is going to be the amount of rounds we have survived so let's just now set this to like a huge number 125 for example let's make the font size even bigger let's do 120 and let's change the font here to Roboto black let's just try that and we can always change it later and we need to give this plenty of space and this is going to be our rounds and then we actually let's wrap this entire thing into an empty object so let's create an empty object here do something like this stretch it out there let's call this our rounds survived and under that we are going to have our rounds and let's duplicate that and this is going to be our text that kind of explains what this is and that is just going to say something it's going to be a lot smaller something like 20 and it's just going to say rounds survived or waves or whatever you want to call this I'm just going to save rounds and we can stretch this down put that somewhere round on there just where you think it looks nice the one is always kind of annoying when lining up elements so let's just put it 25 here and you can see that that is indeed centered and yeah I think that looks pretty good whatever what I want to do is kind of change the font here something more alight I think Roboto light or even Roboto thin looks really good here especially if we remove the shadow that looks pretty good and we can maybe make this a font size of size of 25 instead that's fine let's take the rounds here and let's make this shadow completely apparent so with the alpha of 255 and then let's make that some reddish color that looks pretty good we can try maybe making it more purple this gives a pretty fun look I think we should definitely have something like this in here and it's definitely gonna need some tweaking but I actually kind of like the look of this it's a bit girly but we can survive that we are men so all right now of course there can be girls out there as well I didn't mean to offend apologize so um let's now drag this up a bit um and in order to do that it's just go like that and go like this to Center it there we go we don't need to spend any more time on that whatsoever so drag down the game over and then we can make a few buttons so let's rightclick on the game over here go to you I and then button and we can drag this down and we can scale it up a lot I want these buttons to be really big and okay maybe not that big you can make it just tiny bit something like this it's always hard for me to just let it go and let you guys do this on yo so we're going to call this one the retry and let's first off change the text here so retry with capital letters let's change this to something like I don't know Roboto medium perhaps we can also bump up the font size quite a bit actually it's fun to kind of sometimes make this font size super big just see what happens we can just try out this look actually they don't like that we can also maybe even get rid of the image and just have the retry as text but I actually kind of like the image in there so again just play around with this on your own so I'm going to bump this down to something like 40 I think that's a pretty good size and we can change the font color here to kind of the background color just call it pick this color over here and I actually think that looks pretty nice and um we could even add a shadow to this as well but I don't think it's needed really we can also get rid of the UI sprite to make it totally square but I even like that it's round a bit I don't know actually let's make it square I think that's even better so this is going to be a retry button and we can just Center this kana there we go and then duplicate it and move this one over something like that and you can of course be more precise by typing in the unit's up here and this is going to be our menu button so we're going to go menu there and we're going to change the text here to menu awesome so actually think this menu looks kind of decent and def is definitely usable in our game so what we can do now is actually implement this so as soon as I'm done moving around some of these elements there we go what we'll do is create a script on the GAMEOVER itself so let's go in here and create a game over script that sits on the game over object and we'll public this with stuff in just a moment but the first thing that we really want to do is enable and disable this object as the game continues so we'll start with it being disabled so we'll just disable it right now and then as soon as the game ends we'll just have our game master because this is the one that instigates will have him just enable that object and then on the object here on the object itself will have the GAMEOVER script here then taking care of finding the correct amount of rounds and if you want to do other stuff such as linking up the buttons or you can do crazy animations all of that we'll have a look at but we'll have all of that happen just when the game object is enabled so on this way our game over script doesn't have to communicate to our game master script and everything is a lot more simple so let's find our game manager script here open that up in visual studio and have a look at what is going on so it's opening up on my secondary monitor and I'll just drag it over here so this is our game manager as it looks right now so the first thing is of course we need a reference to our UI element so let's create a public game object and this is going to be a our game over you I and all we then do is whenever we end the game we can remove the debug deadlock statement here we simply go game over you I whoops not game over game over UI dot said active and we set that to true so we simply enable it and that's all we need to do inside of our end game it's really really simple so if we then jump into unity find out game manager and drag our game over UI object into that and then hit play you will notice that when we die and of course we have to wait until we die here again ignore these errors they don't matter so what we can do is actually just start out with a amount of lives a zero meaning that on the first frame we play the game will just die so let's just try that so we'll hit play and we should say see that the game of my menu screen just pops up so that's awesome so now that we know that this is working let's actually just implement a quick way for us to test this without having it pop up in the very beginning of the game to do that let's set our start lives back to one let's put an if statement in here saying if input dot get keyed out and the key we want to look for is the e key for an end and then we simply do a end game so this is just a quick temporary shortcut for allowing us to quickly end the game so now let's go back hit play and hit here and you can see that insert game oh or that pops up our game over screen and into the game the game is still running in the background and actually kind of like the fact that the enemies keep moving and the timer keeps going and all of the turrets keep shooting but what I really don't like is the fact that we can still move around the camera I think all of the players controls should definitely be just disabled once this game over screen pops up so I want to do this let's expose this variable right here because if all of the other scripts can actually just connect to the game manager to find out if the game has ended it's very easily easy to implement on those scripts a some kind of functionality that just which is them off as soon as that happens so let's turn this into a public static bowl and let's also rename this to a game is over something like that again quick renaming with control RR uh yeah so now we can use this inside of our where is it our main camera and camera controller so in here and on inside the update method we'll just write a if game over or game manager dot game is over so in case the game is over we want to disable this component so this dot enabled equals false and you don't even need to write this here but it's just it makes things more explicit and then we simply return out of this update loop so now when we play and we add the game so let me press P you can see that we can no longer move around camera so one thing we have to be careful with when doing it this way is that right now inside of our game manager the game is over variable is static and static variables carry on from one scene to another that means that if we were to now reset the game our game is over would be false the first time and then we end the game and we restart the scene and then game is over it would be equal to true so we need to set it back to false this here only sets it to false at the very start of the game not when we restart the scene so we just need to remove this create a start method which is called every time we load a new scene and then we just set game is over equal to false in there so at the beginning of each scene the game is not over just a quick little fix there and something that can be really annoying to deal with if you don't know this about static variables but now you do so that's awesome so now that we fixed this um what do we want to do well we definitely want to have our route survived here change depending on well the amount of rounds that the player has survived in order to do this we need to keep track of that so let's go into a game master and add that into a player stats we'll just go in here we'll make a public integer and this is going to be the rounds and in the start method again we'll just set rounds equal to zero again we don't do this here because then when restarting our rounds won't be reset so we said that inside of the start method then what we can do is find our wave spawner where we take care of spawning the different waves and when we spawn a new way if you can see we increase the wave index which is a private variable and we'll just go ahead and an increase the rounds as well so we can just go play your stats dot rounds and it's not appearing for some reason public in rounds oh we need to make this static of course public static int so player stats that round plus plus so we'll just increase it there and now we should see that happening so we can't actually see the round sent here because it's static but we actually it should increase and one way of course that we can check this out is just by making our rounds survived actually update so let's now create some functionality inside of our game over what we need here is first off a reference to the text object so let's do it unity engine you I included up here let's use that namespace let's do a public text variable and this is going to store our rounds text and we just close that off then when this object is enabled whenever the game is done so void on enable its called whenever the object is enabled it's pretty much the same as start except it's called every time a game object gets enabled and not only in the beginning of the game and then we can go in here would say rounds text dot text equals player stats dot and then we can go rounds and we of course need to convert this to a string so we'll do it a dot to string right afterwards awesome so believe that is all we needed to do so now in our game over we should see a round sticks appear and we'll simply drag in our rounds there remember to do the round subject not the text object which is the round survives and this is the actual rounds whatever just be careful with your naming not totally clear here so let's now do a plate and we'll wait a second here so now it's spawned one enemy let's wait for our for it to spawn one more and that should put us on a total of two rounds survived and if you now hit E you can see that says game over two rounds survive and of course right now you can help but survive at least a few rounds one thing you could do is keep track of what enemies are associated with what round and whether or not you've actually killed those enemies but I think that would be overly complicated at the moment if you don't do a thing you should be able to survive about three rounds that's all right so um you can see here how many rounds we've survived and we are now able to press the different buttons however nothing happens when we press these buttons and again go away icloud so let's actually sick those up to the script so not to do this we'll make two public methods inside of our script we'll make one cold retry and we'll make another one called menu inside of you our retry method we'll go and just reload the level so in order to reload the level we'll be using up here go to the engine dot scene management we need to include this whenever you want to do anything with scenes including loading a new level which is mostly what you use it for let me go scene manager dot load C and this text in either a building decks and the build index I will show you what means so if we go up here to file build settings you can see here that we have all to include all of the different scenes that we want to have in our builds so in our case we need to dragon the main scene and each scene is associated with an index which is here so our main scene currently sits at zero I don't know if you could add multiple scenes you cannot but if we were to create a new scene or just duplicate the main scene here and add it in there you can see that we can change the order of these in order to change the build index for now we only have one scene in here one thing you can also load it but so if in case here we wanted to load on main scene we would just go zero or we could go main scene we can also use the name and see here as long as it's totally accurate you can use the name but in case we change the name of the main scene this is not a good way to do it and if we add more scenes that are before this one well then the build index is going to change as well so instead we get the currently active scene and use the build index of that to load the scene so in order to get the currently active scene we go scene manager dot get active scene and then we need to use the build index or name of that seed in our case we'll just use the build index and we'll close that off so that is going to restart the currently loaded scene and this is a very generic piece of code because you can use it anywhere no matter the scene to restart the level awesome and then in the menu here on what we'll do is just put in a debug block saying go to menu there we go and we'll definitely change this at a later point of course so now we should be able to go in and test this out and one thing that I just wanted to do is select the retry add menu I just change the highlight color just to make it a bit more visible when highlighting the buttons so now when we hit play we wait for around here we hit E the game is over we can hit menu and it should say oh of course one thing that we also need to do is actually hook this up so if we go on to retry under an on click event we need to hit plus we need to drag in our game over object go onto the game over script go to try and the same thing with our menu add an onclick event drag in our game over go out the game over and select the menu function awesome and the last thing concerning the UI here is I want to disable navigation because we are using a mouse so now we can hit play and wait for round hit e you can see it pops up you can see we have nice highlighting if we add menu it says go to menu and if we hit retry it restarts the level one small issue here is you can see there's a problem with the lining when I really restart the level this is just a very similar unity specific thing and that is with the new lighting system whenever it reloads the scene sometimes it doesn't have time to calculate the lining and so it just starts the seed without any lining in it in order to disable this we simply remove Auto from down here and hit build and this will build all the light settings and save it and now when we hit play and do the exact same thing here so just hit retry you can see the lighting is ok that also means that if you want to change the lighting in your scene you're going to need to put it back to auto while figuring things out disable it and hit build so that's kind of annoying but it is an easy fix to an easy problem alright so that was pretty much all the core functionality that I wanted to show you how to create in this video however I still want to spice things up a bit with some animation so let's just very quickly create that so let's find our game object and enable this and what I want to do is animate each up each element separately in order to get a cool looking animation if we just have it all fade in it looks very generic so what we'll do is just go to our game over here and create a new animation go under the animation folder and let's save this as well just game over you will also do something more specific but this is going to be fine let me find our background here we add a new component and this is going to be the canvas group this allows us to simply change the Alpha without messing around with the color then we go forward let's say to a 30 um milliseconds wait what half a second and then we set the Alpha to zero and then we simply flip these keyframes so there we go so that it starts off at zero and then slowly animates em then we find our game over text here and I want this to kind of come down and at the same time fade in so again we'll add a component here called the canvas group we'll set the Alpha to and let's do that this and another point so let's do it here set the Alpha to zero and we'll also move this up a bit and again we can flip these around so this is going to start here and it's going to end over here so let's see how this looks so it slowly fades in and the game over pops up I think it's a bit too slow so we'll just have a go ahead moving everything over a bit actually like that a lot so we'll just stay with that and then the next thing is of course our round survived so this is where I will put in a canvas group again and I want this to kind of scale from being really large and then zoom in and at the same time we want it to fade it so again the canvas group here will set the Alpha to zero and we'll set the scale to something like 1.2 on all the different axes and then again we flip this so flip it around and kind of move it over it's nice to get the different animations overlaying a little bit or else it will seem really robotic and not really cool so let's hit play and I really like the look at that and then the last thing that I want to do is just kind of have our buttons pop up so we'll take our retry button here and we'll set the scale to 0.9 and paw nine even point eight it's going to look pretty good I think point eight and we'll also add a canvas group to this and set the Alpha of course to the you guessed it zero and we'll have this animate on as well there we go and let's do the same thing with our menu so I get add a canvas group the Alpha to zero set the scale to point eight and point eight and move things over and we'll just line it up with the button and then offset it something like that even or set offset it even more and hit play so I think this gives a really cool kind of organic looking animation and I definitely think I think it looks really nice so the last thing that I want to do is just select all these different keyframes go under curves right click and select our flat for all of them well I want to do this for them so that's just select all of them again let's try this out hit flat there we go so it if to focus it on this and we'll just see what that looks ok so now they're all flat so that will just kind of smooth out the animation so let's try that one more time yeah awesome that's really great so let's now actually have this play whenever the game over object starts and it should do that right away but right now it's looping so let's go onto our animation here find our game over animation not the controller let's just set loop time on to what disabled so it won't loop at all this way when we go ahead and play the game hit play here and wait and hit e you can see that it slowly pops up it looks super cool and if we now go into a game master and just clean up our game manager and clean up our temporary testing code here hit save now the game should be working just the way we wanted it to so I'm just going to have the game play in the background here while we do the outro and you can see that all of our elements are actually coming together and this is now not a very challenging game but it is a game it has an end state it doesn't have necessarily a win scenario but because there is a score this the player has something to strive towards he has multiple options both it which turrets he chooses and where he places them and yeah we have enemies that vary in difficulty or at least they morph more more and more of them spawn and there you can see the game over screed as well so the game is turning out really fun and we definitely have to do some tricks but all of the core functionality is really there so let me know what you want to see next and without further ado thanks for watching and I will see you in the next video and also I really apologize for this sounding sick and everything I know it's really annoying to listen to but I thought it was better than putting out a video so yeah thanks for watching and bye thank you so much to all of the awesome people who donated in September and especially thanks to our own Metta Robert Roach James Calhoun Kim Rose koukos Bao I'm damned Wong and Dickson P thank you so much for donating you guys are awesome if you want to support practice yourself you can go to patreon.com/crashcourse