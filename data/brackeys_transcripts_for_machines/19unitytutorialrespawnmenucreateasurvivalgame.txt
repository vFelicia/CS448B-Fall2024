hello and welcome to the 19th video in our survival game series done by brackets I am the CEO of Brad keys and in this video we are going to be taking a look and making the respawn menu which is going to appear every time our player dies that means that we are going to be scripting a lot of GUI or GUI and we're going to be taking a look at making some buttons and we're also going to be taking a look at making it so that our camera will still work so we can still see the scene once all players dead but the player won't be able to move or look around so as always I've opened up unity and let's go ahead and get started so from the last tutorial we have the player stats line here and we are just going to open that up in monodevelop because we're going to use it very soon so doubleclick it to open it up now let's go ahead and select the player and hit the add component button and then go under a new script and let's call this respawn respawn menu and it's going to be a type JavaScript hit the create an ad and then double click it to open it up in monodevelop now let's go ahead and write out the script so first we want to create some variables the first one we're going to create is going to be called viral look around oops look around 0 1 and it's going to be a type mouse look because it's going to star just that the next one is going to be called viral look around 0 2 and it's also going to store a mouse look so these two are for saving in or starring the scripts which we will disable to make our play unable to look around the scene so if we go into unity and hit play he'll play and look around you can see that on our player is the script of csharp type called mouths look and if I disable this the the movement of the camera in the horizontal line is disabled so now I can only move up and down and that is disabled under the main camera where we to have the mouse script so if we disable that also you can see that now I can't look to the left and to the right so that's it for the scripts that we're going to disable to allow our player or to not allow our play to look around the scene we're going to create some more variables there the next one is going to be called char controller and it's going to store our character controller no I'm sorry charm motor and it's going to store our character motor because we want to change the speed of the play to cero so that he can't move next one is going to be called our sprint script and it's going to be a type sprint and Crouch and this is only needed if you have implemented the spending Crouch script like I am like I have because else this will interfere with us changing the speed and so we have to disable that script also so now let's go to the function start and just make some space for the brackets and let's store some information so type look around 0 1 equals game object there's a small letter in the beginning dot get component and this get component works just like get game object find in that it will find a compound for you it will find something for you and in this case we want to find the mouse look and ended up with a parenthesis the next one is going to be called look around 0 2 and it's going to be equal to and this time the component is not on the game object the script is attached to now this script is attached to the player and we want to find a component that is attached to the main camera which is a child of the player so you could go into scripting that find the child and then go on to find the component I'm just going to write game objects dot find and this time it's game object with capitals and then parentheses and type main camera make sure to get it all right that get component and then mouse look so we are first finding the the game object and then later finding the component that we want next up I'm going to type chart motor equals game objects that get component and then character controller okay to motor time awesome and next up we're going to type sprint script and game objects start get components you know the drill sprint and Crouch cool so now that we got that out of the way let's make sure that our main camera is named main camera with no spaces it is not so let's go ahead and rename it to main camera in one word now let's go back into the script and let's start creating some logic that actually let's start creating the menu so now I'll make some space for the function update too though we are not going to use it right now so create a new function called on GUI and open and close the brackets there and all GUI elements has to be created and drawn inside of the on GUI function so now let's type if player is dead because we only want this menu to be drawn when the players that actually let's wait up with this and just so we can be able to test it right now without the player being dead and then that's at the if statement little later so let's start out by making a button so type GUI dot button open parentheses rect open for parentheses screen dot width times 0.5 and this is because we want it to be in the center of the screen comma 200 because we want it to be 200 pixels down from the top comma 100 because we want it to be 100 long comma 40 because we want it to be 40 pixels tall and this would work if we didn't factor in that again when you are playing around with GUI elements the orientation point or the pivot point or the center point whatever you want to call it it's also called an anchor point it's not in the center of the GUI so let me just quickly show you what I mean so we want to draw a green box this is the green box that we want to draw this could be a button this could be pretty much anything so we want to draw this button and we want it to be in the center of the screen then all logic would points that we had to do something like this if I could just get back my tools so that we would have to tell the computer that it should take half the screen width and half the screen height but that's just not the case because that is if the center point was actually in the century now if it we tell it to do this the GUI is going to do something like if we say that this is the center this right here if we just say that's the century for now then the GUI would be drawn over here and that's really not what we want we want it to be there that's because our GUI pivot point comes from the lower left lower lefthand of the of the GUI so down here is our pivot point and therefore everything is oriented through this point which also means that if we want it to be in the center of the screen we have to factor in half the width and half the height in order to get up here and then over here so in the center hope this made sense to you if not you can just go ahead and copy the number so type in here so the screen dot with x 0.5 and then we're going to minus it with its length so minus 1 minus 15 that is and then 200 minus 20 because half of 40 is 20 awesome now let's go ahead and make some text from the button so type a close the parentheses and make a comma and then type respawn and then close up both the parentheses it's actually just one now let's go ahead and see if this works so hit play and I can see we have an error so it the expected insert semicolon at end yes we need a semi code so hit play and you can see the respawn button being drawn now let's go ahead and make it so that something one will happen whenever you press this button this is done by making it into an if statement so at the beginning of this GUI dot button we're going to type it and then open up a parenthesis and then the end we are going to close this and then we are going to type the bracket key so if we get the GUI dot button and then all the properties for it then we are going to want to respawn our play and this is done in a separate function just to keep things organized and also so we can do stuff like yielding and so on so we could just go ahead and create this function so function respawn player and open up the bracket keys and inside of these we're going to type debug deadlock because we're not going to make the actual respawning in this video and then type respawn player and close it up alright so on that's going to test this so hit play and hit the respawn and we can see a debugger debug that log appearing in our console window saying that the player should respawn cool so let's make another so say if and then we can just copy the GUI dot button actually let's just copy the whole thing so let's take this and just hit ctrlc and ctrlv and now we have the respawn button so let's go ahead and change some things here so instead of respawn player we want this to be a debug lock and then return to menu so this button will allow us to return to the menu so we'll just call this menu and we're going to make it so that it's a bit further down so the same in the screen that with though we want it to be let's say 240 down and let's have a look there you go so we have the respawn and we have the menu and if we click respawn we get the respawn player and if we click menu we get the return to menu so this is working really nice now let's go ahead and make the variable that our that is going to allow us to check whether or not the player is dead so let's go up here and make some new lines and type static var and then call this player is dead and it's going to be equal to false by default now we can go down to the on UI function and type if player is 10 so that this will only be drawn if the player is dead and then make sure that the bracket keys holds it all in then this is a handy feature we can select all of this code inside of it and we can hit tab and this will automatically bring everything one layer up sweet know that now that we have that in place we are going to type an if statement in the function update also called if player is dead its equal to true oh we have to do that down here also so is equal to true then we want something to happen so if the player is dead then we want to disable the look at round at once oh look at round that enabled equals false look around to that enabled is also going to be equal to false the sprint script dot enabled is also going to be equal to false and the charm motor died movement dot max forward speed is going to equal be equal to zero so here we are setting the max speed to zero okay so we could go ahead and test this though we wouldn't get anything out of it because right now our players that is always equal to false and this is where I'll play your stat scripts come into play so here we're going to make it so that when the function dead is called and the debug led law deadlock says play your diet we are going to make it so that it will change this variable so it will access the respawn menu scripts from the players that's great saying that this players that should be equal to true so this is done by simply saying respawn menu that player is dead equal to true that's really not more turret so let's go ahead and see if this works so when we first hit play and select our player you can see down here that all of the different variables storing our components are working when we get nearer our enemy and we start to lose health once we get down to zero you can see our D line starts getting drawn we cannot look around and we cannot move either actually we can move or hmm okay so go ahead and hold on for a second I will just see if I can get this fixed alright so I'm back and I found out a way to fix this that is even easier than before so in unpacking the respawn menu script and in the line that says car motor that movement that max forward speed equals to zero we can just go ahead and delete that and instead type charm motor that enabled equals fault so just disable it completely and this way we don't even have to disable the sprint script we can just go ahead and delete out that but it might return an error whenever we pressed and press down the there press down some keys so I'm just gonna go ahead and leave it there just in case alright so let's go ahead and see if it works now so hit the play button and run away to our enemy and we can see him attacking and there we go we have died we cannot move and we cannot look around and when we hit the respawn and see the respawn player when we hit the menu you should see ya return to menu okay so that's pretty much it for this tutorial guys I hope you enjoyed it and I'll see you in the next one you