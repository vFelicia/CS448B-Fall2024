With timestamps:

00:00 - Hello, free code camp viewers. This is sagar
bansal, Once again, I'm back with a new course,
00:04 - which is called license to pen test the beginners
edition. Now, if you are in the industry,
00:09 - you might already be aware that license to
pentest is one of my premium live programs,
00:14 - but this may settle with something amazing.
We took the live classes, we took all of the
00:20 - recordings and we compiled a list of the best
recordings which were made for beginners.
00:25 - And that's how the beginner edition was born.
Now in the whole course, you will find students
00:31 - asking various questions, but I think we did
not cut that out in editing because see those
00:36 - questions were kind of important. They were
very interesting and it's, it's very interesting
00:40 - to see how I have answered those questions.
And a lot of you guys will have the same doubts,
00:45 - so I will let the recordings as it is without
any editing.
00:50 - And let's get started with this course. Just
make sure that you checked the description,
00:54 - because if there is any update for the course,
I will put that in the description. And don't
00:58 - forget, this course has its custom labs, the
labs, which my team created when we were giving
01:03 - the classes, all of those labs, you can download
them from the description. So just check that
01:08 - right now before proceeding. So let's get
started. I will not take more than a minute
01:13 - to introduce myself. I am one of the 47 board
members of EC council advisory board for ethical
01:18 - hacking IMEA. I am the youngest CCISO as well
as LPD master credential holder, I have altered
01:26 - more than 25 reowned programs, including CISSP
masterclass, CCSP, masterclass, CISON, , and
01:31 - so on. This course is intended for people
who want to get into the industry. People
01:36 - who already have seen the YouTube, they have
gone through every video.
01:40 - They can find on YouTube, but that's not helping
them to get through the industry. Those videos.
01:43 - They are good. No doubt they are good, but
at the end, they don't teach you how industry
01:49 - really works. So this course is intended to
teach you those concepts, which are missing
01:54 - on YouTube. And again, since this is a premium
program, you will notice the quality difference
01:58 - within the first lecture itself. So I hope
you are super pumped up just like me, but
02:02 - here's the problem. My lawyer says that we
need to give a legal disclaimer because this
02:06 - course has some really cool shit. Here's the
disclaimer, free code camp, Sagar Bsansal,
02:12 - Sagar Bansal group of companies, our partners
and affiliates, YouTube it's partners and
02:17 - affiliates are not responsible for any of
the actions you take after completing this
02:22 - course or watching this video. Any numbers
claimed within this video are for reference
02:26 - purposes, only any trademarks use in this
video, are the intellectual property of their
02:29 - respective owners, all the students appearing
in this video through camera or voice have
02:35 - provided their consent to the author, which
is basically me and the video contains professional
02:40 - penetration testing, knowledge and everything
has been done in a control simulated and woman.
02:44 - So again, I will stress this point. Everything
we do is in a simulated environment. You want
02:49 - to get the same environment. Cool. Just go
and check the description. I will put the
02:52 - links there. You can download every single
machine we use from there. Let's get started.
03:00 - Uh, so there is a pen tester machine, which
Kali Linux. The thing is that this Kali Linux
03:06 - has got the virtual box. Um, you know, what
do you say that, uh, the Kali Linux has got
03:11 - virtual box add ons installed. So you can
drag and drop things from your host operating
03:16 - system to this. You can copy and paste things.
So that's why I'm sharing this gear. If you
03:20 - got your own, that's fine. Um, there is a
beta server. So our website is hackerinthehouse.com
03:26 - for this course, basically we just made it
whole website for that and uh, there's a subdomain
03:32 - Beta.hackernthehouse.com. That's our first
target. Then we got something called media.hackerinthehouse.com.
03:38 - That's our second target. Uh, we got more
targets like HR.hackerinthehouse.com. There
03:44 - are some internal user machines, uh, like
a windows machine, which you are going to
03:48 - hack.
03:49 - So there is a whole entire, you know, enterprise
level architecture. Right? Um, any doubts
03:55 - on that, that point? Like if you don't understand
what a subdomain is or something, I guess
03:59 - you won't understand that. Yeah. Yeah. So
let me quickly open a paint and explain you
04:07 - how this, this works. For example, this is
our company. Okay. Now in this company, there
04:14 - are of course, a lot of, um, you know, there
will be a lot of, what do you say? There'll
04:19 - be a lot of, uh, departments or actually sections.
We call them zones. Okay. So let's say this
04:25 - is zone one. This is zone two. This is zone
three. Let's keep it that two zone three.
04:29 - We will add more zones later in the course
as well. So these zones where exactly these
04:35 - are, this is DMZ. Yeah. There you go. There's
DMZ. So this is internal. Okay. So this is
04:49 - your internal zone. And let's say, this is
management.
05:05 - Alright. Alright. So we got a company which
has been divided into multiple zones and that's
05:18 - how any enterprise system works. Okay. So
you, are a hacker who is, let's say, uh, right
05:25 - over here. Let's say this is your computer.
And I don't know why things are working quite
05:30 - good, but anyways, um, yeah, so let's say
you got an IP address or whatever. Let's say
05:36 - 10.2.1 Dot then, whatever IP you got, that
is your personal IP in, in your computer.
05:44 - That is your IP address. Now let's say this
company has got some IP address. Let's say
05:49 - there is some IP address. Uh, we don't know
what that IP is, so they will give you a VPN
05:55 - connection. Normally that is you pen test.
They always give you a VPN connection so that
06:00 - you can be in their network zones. Okay. That
is, that is one of the ways they will give
06:04 - you a VPN using this.
06:07 - You will get an IP address, let's say 10.0.10.9.
Again, let's say you will get this address.
06:17 - And the, this DMZ has that same address. Okay.
The same range, let's say 10,.0.10.0/ 24.
06:25 - So any kind of IP in that specific unit. So
that is what they're going to give you so
06:30 - that your machine is, is going to get into
the same zone. That is how it works. You need
06:35 - to be in the same IP address zone to even
communicate with the machine. If you're not
06:40 - in the same zone, you cannot communicate.
Is that making sense?
06:42 - Ya making sense There are two kinds of IPs
there is a public IP and a private IP. So
06:49 - when you say an IP, like, I'm sorry, when
you say an IP like 192, or if an IP is like
06:57 - 172 or an IP is like 10, okay. These are private
IPS. These are not connected to internet.
07:03 - They, they, they do not. You know, there is
no matter if they're connected or not connected.
07:08 - These are private. So normally what happens,
what happens when you connect to the internet?
07:12 - There is internet, there is a router. And
then with that router, there are a lot of
07:16 - computers connected in between. There can
be switches, hubs, etc,etc. But there is internet.
07:22 - There is a router with that. router machines
are connected that router has a public IP.
07:27 - Only the router has a public IP, and that
router will give a private IP to all the machines.
07:33 - So you want a wifi, wifi hotspot in your home
or whatever, that, that hotspot, that wifi
07:39 - that has a public IP, and that is going to
assign every one of your computer phones,
07:45 - whatever it is connected to that a private
ID. Okay. Now that is how it works. So if
07:49 - I show you, this is the command from NFI,
just say, IP can say, you can see that I have
07:58 - a router, which has a wifi address, which
is a IP address, internal IP of 1921680.1.
08:05 - That is routers internal IP. And this, this
router is giving my computer and IP address
08:12 - of 1921680.112. And similarly, my phone is
having the IP address of 1921680.230 something.
08:22 - That is, that is how it works. So this is
the range 1921680. something.
08:25 - Okay. That is the range. This is the last
octave, which is the IP address, specific
08:32 - IP for this. And this complete is the IP of
the computer. That is how IP is work and the
08:39 - public IP. If I go ahead and go on Google,
and let's say, what is my IP now this 45.125.602.15.
08:51 - This is my public IP. This IP is not for my
computer. This for my router, that router
08:56 - is having the IP. Every device connected with
that router will have the same IP, okay. That
09:01 - is how public and private works. So this in
this diagram, when you say a DMZ and he said,
09:09 - this DMZ, normally a DMZ is a demilitarized
zone at DMZ is the area where a company will
09:15 - put those application servers, websites, which
are on a public IP as well as on a private
09:22 - IP.
09:23 - So you, got a website as a company, you've
got a website, you need a web server. You
09:27 - will put that web server in a DMZ area. That
DMZ area is publicly connectable that DMZ
09:33 - area is the only area that will have IP addresses,
which are public Is that making sense? Are
09:38 - we getting it? So if we can just go ahead
and say, yep. If I just go ahead and say sagarbansal.com,
09:47 - this IP address 10424121220. This, this specific
IP address is a public IP. This IP address
09:54 - is the IP of my server, which is running sagarbansal.com.
And that is in the DMZ area and all the other
10:02 - computers we have in our company. So, you
know, for staff and all they are, of course,
10:07 - in a internal area, restricted area, but just
not publicly available, there, there will
10:12 - be some other servers or some firewalls, at
least some firewalls, which will be blocking
10:17 - public access.
10:18 - So, you know, people cannot connect with those
computers normally directly, okay. But in
10:23 - a DMZ, anyone can go ahead and connect with
the machine because this is public IP. And
10:28 - everyone knows this IP, you know, just by
doing a thing, you can find it and everyone
10:32 - can connect with it because that's the purpose.
I mean, if, if no one can connect with a website,
10:37 - what's the purpose of a website. That's why
that's publicly routable. So normally what
10:42 - we do is let's say there's a machine in the
management area, or let's make it simple.
10:48 - Let's say there is a machine here in internal
area. So, and there's a server web server,
10:53 - then this DMZ, and let's say, we want to attack
this machine in the internal. We cannot directly
10:58 - do it because our IP ranges are different.
So what we can do, we can have this DMZ machine
11:06 - and be in that range. Then use that range
as a pivot, we call that a pivot, okay. Use
11:12 - that machine as a pivot and then hack into
the internal network. So that is how we hack
11:18 - a server. We use it's IP, address, route the
network from that to another machine. So we
11:23 - need, we can do multiple ranges by doing that.
Um, any doubts there? I know that was a little
11:29 - confusing, that pivot stuff, but when we will
do practical you come to light, but still
11:33 - any doubt in the concept.
11:36 - Okay, that's fine. That's that's clear so
far. So good. Right? So that is how any enterprise
11:46 - network works. That's how we, that's how we
pen test. Now let's talk about the project
11:50 - itself. You got these machines. Um, we are
assuming that this beta.hackerinthehouse is
11:59 - in the DMZ area. This is a, this is a web
server. Okay. This media.hackerinthehouse
12:04 - is in a production zone. So there's a DMZ
zone. There is a production zone. There is
12:09 - an internal zone. There is a management, there
are four zones. So this isn't the, this isn't
12:14 - the, what do you say beta.hackerinthehouse?
This one isn't the DMZ. And this was, uh,
12:20 - this one is in the production zone. Now let
me show you my configurations here.
12:29 - So you can see, I got some more machines,
ignored them. Uh, there's a pen test. The
12:35 - machine, there is a beta machine. This beta
machine is in the DMZ. And then there is a
12:40 - media machine. This media machine is in the
production, uh, production zone. Now what
12:44 - these zones are, if we go to preferences and
network. Yep. There's the network. You can
12:52 - see, we have created three zones and I like
to give them the name as a range. So range
12:57 - 100, 148, 155 is the three ranges at the moment.
Um, if I open them, you can see the IP address
13:06 - in this range are 10.0.100.0/24, which means
any IP will start from 10.0.100. Okay. Similarly
13:14 - in the second range, 10,.0.148 Similarly in
third range, 10.0.115. That is how the IPs
13:21 - are going to start. Um, am sorry sagar, can
you just backtrack that just one more time
13:27 - for me please? Right. If I go to file preferences
and then network, we have created three networks
13:34 - three subnets, basically. Uh, the first one
is range 100 If I open that, you can see that
13:40 - the name which I have given range 100. Uh,
the networks, Id is 10.0.100.0/24, which basically
13:47 - means any machine in this zone will have the
IP address of 10.0.100./ you know, something.
13:55 - So just to give you an example, let me power
this machine on. And then you can see
14:00 - if I power this machine on.
14:03 - Um, just one quick question. So are, are,
are all these ranges, um, accessible for all
14:10 - the virtual machines or
14:13 - any machine, which is in that specific range
is going to be, you know, in that network.
14:18 - Oh, and what I meant is the virtual box has
all those ranges No you need to create them.
14:27 - Got it. I think what he's saying finally is
you can give it an adapter that belongs to
14:32 - any of the them, Yes. So that is flexible.
Right? Got it.
14:38 - I have made this machine. This is machine
numbers 001 and you can see the IP address
14:43 - there. Um, the IP address in the fourth line,
it is 10.0.100.10 right? That is the IP because
14:50 - this machine is in that range in the range
of hundreds. Also, this machine is having
14:55 - two network cards. The second one is 10.0.148.111
which is also in the range of 148. If I show
15:04 - you this machine, media machine,
15:11 - [inaudible]
15:15 - almost done. This machine is in the range
of 48, 148. Plus this is having a third sub
15:30 - net, which is one, uh, 115 I think we got
a mistake here. It needs to be 155. Anyways.
15:38 - I'll fix it. I'll fix it later, but 115 Okay.
So here you go. These are two machines and
15:47 - you can see, so 10.0.100,10.0.148. And 10.0.115
These are the three subnets we got and this,
15:59 - this whole, uh, this whole enterprise at the
moment now how to create them, you go to file.
16:05 - You go to preferences. You go to network and
you click on this plus button and it'll make
16:12 - a Nat network Double click here you can give
it any name. So let me give range115 which
16:18 - I think I forgot to create.
16:21 - And here you can give CIDR. I just like to
change this to whenever I want. So 10.0. something,
16:29 - um, let's say 115, don't do a slash 24. Um,
that is going to be actually a error and you
16:35 - can enable the DSTP. That's really fine. This
will help to get automatic IPS. That's not
16:41 - going to hurt. You can just keep that support.
IPv6. Really? Doesn't matter. If you want
16:47 - to have IPv6 testing, you can hit that. I
want to just you at this level, um, just go
16:52 - ahead and click on. Okay. And now you got
another range. 115. Okay. And how to I assign
16:58 - this? Let me turn off the machine. First of
all, having a whistling noise. Everybody else
17:07 - had it.
17:08 - Yeah. I forgot what's wrong then. That's not
what it is that you can hear it. I mean, I
17:18 - still don't understand it. I don't think it's
from you. It's from over here. Okay, cool.
17:24 - Right. So if I go to settings of this machine
and if I go to network, then you can see we
17:29 - have in Nat network adapter and in nat netwrok
you can choose all these different ranges
17:34 - which we have created again. Is that making
sense now? Yes. Yes it does. So here we got
17:41 - this 115 All right, cool. So now this machine
is in 148 and 115. This machine is in 100
17:51 - and 148. So that is how, uh, the, the enterprise
is going on at the moment. Right? So our pen
17:57 - tester machine that is in the bridge adapter,
which basically means it's connected to your
18:05 - router, not the company's network, it's in
your network, your router plus adapter two
18:11 - is on range, 100 now why range, 100
18:14 - We assume that range 100 is a public range.
It is a DMZ area. Okay? Uh, that is what we
18:21 - are assuming over second case. Let us assume
range a hundred is a VPN connection. So the
18:26 - company has given you a VPN connection. You
are also in the same range of that DMZ area.
18:31 - Okay? That is what you have to do. You, you
need to be in, in the range of at least first
18:35 - machine, which you were gonna have, other
ranges. They don't matter. You can always
18:39 - pivot so you can use the range of the machine
itself. You can pivot, but the first needs
18:44 - to be in the same range. So that's why you
need an adapter. We are only having 100. There
18:49 - is no other adapter here. You only have 100,
but we will be able to hack into 148, 115,155,
18:54 - all of them. But at the moment we are only
in 100. So two adapters, one is built withit,
19:00 - which is directly connected to my wifi to
get me internet. Another one is a Nat network
19:05 - and range 100. Again, that, that is how the
architecture is going to look like. That is
19:10 - how it works. Um, any questions there?
19:14 - [inaudible]
19:15 - Nope. All right. Let's get started. Then you
can always, you know, follow up later with
19:22 - the recording. Of course there is no point
to follow up right now because that doesn't
19:26 - make any sense.
19:31 - So we are going to practice today on the First
machine, which is 001 beta server, beta server
19:37 - is a website, and we going to be going to
try to hack it and practice. So this is the
19:43 - Kali Linux there are two accounts on each
machine. Yes. Sagar we haven't, um, I think
19:50 - you instructed me not to have these installed
so we didn't install it. We just downloaded
19:54 - them. Right. I'm just saying that you should
be doing that after the lecture, because a
20:00 - lot of time and that's going to be a lot of
time with everyone. Isn't it?
20:03 - Okay.
20:04 - Got it. Makes sense. I'll be giving the recording.
Of course. Okay. Makes sense. And if there
20:10 - is some doubt, we can always discuss tomorrow
in tommorrow class or after the class I'm
20:14 - free. I mean, I'm really free. You guys can
call me, No , makes sense, man. Makes sense.
20:18 - Continue please. So there are two accounts.
The first, the, the non-root account is Kali
20:23 - Kali, the root account as a root and licensed
to pen test as the password. So password is
20:29 - licensed to pentest account is root I'm just
logging in as Kali. All right. And that doesn't
20:34 - work. So, yep. There you go. So that is Kali
and you go full screen. You don't need the
20:43 - browser. Yep. So this is our Kali Linux And
I'm going to show you the IP address here.
20:50 - Oops. I have config and that doesn't work
because we are not root. So I'll make a root
21:03 - license to pen test config. Excuse me,
21:16 - [inaudible]
21:20 - how what's going on. Why I've config is not
working
21:27 - Yeah, now, it works. Okay. So you can see,
we got an IP address. 192.1680.109, which
21:36 - is coming from my router. This has nothing
to do with the hacker in the house company.
21:41 - This is my local IP. We also have another
IP which is 10.0.100.9 which is the IP address.
21:47 - That is same in the same range of the DMZ
area. The DMZ machine, the beta.hackerinthehouse
21:54 - machine is also in the same network. So that
is how this is working at the moment. Now
22:00 - let us get started. hacking it first step
is always footprinting information gathering,
22:06 - blah, blah, blah. Everyone knows that there
are two kinds of, uh, you know, we call that
22:12 - reconnaissance. By the way, there are two
kind of reconnaissance. There is a passive,
22:16 - and there's active what happens in passive
is that you directly do not interact with
22:20 - the target. So, you know, just to give you
an example very quick, and I'll not take a
22:23 - lot of time here. Um, just as an example,
you may go ahead and, um, you know, you may
22:30 - go ahead and go on something like built with,
22:34 - okay. And you may go ahead and go over there
and maybe you can just go ahead and put a
22:41 - IP, address a URL and go ahead and try to
find something when you are doing that. So
22:47 - for example, hacker in the house.com. Now,
when you do that, you are interacting with
22:55 - the target, okay. Built which is a tool, but
you are interacting with the target. You use
22:59 - the tool, you used it to interact with the
target. This is an active reconnaissance part.
23:05 - You are actively interacting with the target,
but if you just go on Google and you know
23:13 - that Google is a search engine, it has scrolled
the things itself. And now here you go ahead
23:17 - and try hackerinthehouse and whatever you
get here. So we got to see these, by the way,
23:23 - whenever you get here, this is passive information.
You did not interact with the target itself,
23:27 - but if you are using a tool you're talking
to the target, you're scanning it.
23:32 - You're asking it questions. That is direct
interaction that is active reconnaissance.
23:36 - If you are using a search engine, a database,
whatever that already has the information,
23:41 - you're just trying to retrieve that information
publicly available information is the passive
23:45 - reconnaissance. Let us assume we will ignore
the passive information part here and this
23:51 - whole topic, because normally when you're
working professionally with companies, they
23:57 - will provide you a scope of work. You know,
you will get a scope of work that scope of
24:01 - work, a work statement that will have a lot
of information about the tasks. Those tasks
24:05 - are what you have to do, and you normally
don't need to do passive information gathering
24:10 - Uh, but if you are interested, I got a video
on that. I'll send you how to do passive information,
24:14 - but let's be creative. Let's start with active
part, which is actually the main thing which
24:20 - we are going to do. So let us assume our mission
is to hack a website, a website, or a web
24:29 - server, which is beta.hackerInthehouse. That's
our mission. How do we do that? Very first
24:33 - thing always get the technology profile of
the target. So we've got beta. Let me become
24:43 - pseudo.
24:44 - Yeah, well let's, let's go ahead and say beta.hackerinthehouse.com.
That's the website. That is our target. First
24:55 - thing always get the technology profile and
there's a very cool tool called whatweb you
25:01 - use. Once you get the technology profile of
the website. Again, it will come up with all
25:06 - the information. Here you go. The information
you have here is it is running a apache web
25:12 - server. It is running. It is having a HTML5.
It is running ubuntu Linux Apache version
25:18 - is this IP address is this, it is having jquery
with the version of this. It is running WordPress
25:24 - with this version is running PHP with this
version. Um, I don't see any other information
25:30 - there. Yup. PHP 5.5 0.9. That's all. This
is the technology profile of the website.
25:36 - And just by this, you know, that it is, there
are two options.
25:39 - There is WordPress and PHP, which an Apache,
which can be your target three options. You've
25:45 - got WordPress, we've got PHP, you've got Apache
easiest. One let's say is what this, why this
25:51 - comes with experience. But WordPress, if anyone
of, you know, what is wordpress btw, my website
26:00 - is WordPress , right? So what is WordPress
is a content management system, CMS, okay.
26:08 - WordPress is used to create websites to create,
to manage content. Basically it's a platform
26:13 - which we use to manage the, the, you know,
uh, websites or any kind of data. It's a CMS.
26:20 - And there are two kinds of, uh, websites or
web apps. There are always a CMS websites,
26:26 - or there are custom coded websites. And there
is a 70% chance that your target will be a
26:33 - CMS, popular CMS are WordPress ,Joomla or
Drupal open CMS. These are, these are some
26:39 - popular ones.
26:40 - Every, every one of those CMS has a tool specific
tool dedicated to them. Wordpress has a tool
26:47 - called WAPscan Joomla has a tool called joomscan
can Drupal has a tool called drupscan. Okay.
26:52 - Every tool has got a scanning tool. Every,
every CMS has got a scanning tool in case
26:58 - this is a custom coded website. You got other
tools like Actionetics, okay? Or you got nesses,
27:05 - you got aqualus. So there are, you know, very
expensive tools. Um, but they are general
27:10 - tools, which you can use on any kind of thing.
You can use them on CMS, or you can use them
27:14 - on custom coded sites, but for CMS, you got
specific tools as well. One of them is WAP
27:19 - scan, which is for WordPress or a PHP. You
follow the normal network pentesting or a
27:27 - normal process. Uh, what is that process?
You have a version number.
27:30 - So you got a version number go on google research
about this version. Try to find a vulnerability.
27:36 - If you find it when vulnerability in your
research, then find a exploit. If you find
27:40 - an exploit, try it. If that exploit works.
Congratulations. If that exploit doesn't work,
27:46 - try to find another one do the research again.
If you don't find anything in your report
27:51 - mentioned that I did this, I did that. I did
this. Your system is secure. It can not be,
27:58 - hacked just mentioned it. You know, that's,
that's what a report is. A report is it doesn't
28:02 - means that you have to hack it and report
is you just have to do a pen test and tell
28:06 - us that it is safe or not. And if it is safe,
then mentioned it,it is safe, but show your
28:10 - due diligence show that you have done the
work show.
28:13 - That proper screenshots that you have tried,
this, that this, and still, this is not hackable.
28:19 - That's why I'm saying it is safe. You have
to justify that, uh, for the moment let's
28:24 - ignore this and this Apache and PHP, because
their process is little different. We are
28:29 - right now focusing on hacking CMS. Okay? So
the whole class is all about hacking a CMS.
28:35 - Now, when you have, this is the, uh, this
is the information gathering phase. We got
28:39 - the information. This is running this, this,
this, oops, let me cancel that. Yep. We got
28:46 - the information. This is running WordPress.
This is running a ubuntu PHP Apache. Now let's
28:52 - select that. We are going to test the CMS.
We are going to test the WordPress. What next?
28:57 - Go on. google find a tools. So you can go
and Google and find a tool. And I mean, it's
29:01 - very simple.
29:02 - You need to learn how to Google, because even
if you talk about the LPT exam, or if you
29:06 - talk about the real life, you need to learn
how to use Google. So just say how to test
29:10 - WordPress or how to pen test WordPress. That's
a better, that's a better, uh, option, right?
29:23 - How to pentest WordPress? You've got a lot
of videos. You can watch any of them. Uh,
29:27 - but they will, of course mentioned that WAP
scan tool is there in this, in this post.
29:33 - I'm quite sure you, here you go. The frist
tool is WAP scan. They have given you all
29:37 - the syntax and you can follow this. Now I'm
going to show you how to do that. So let's
29:41 - clear the screen let's use WAP scan-help and
always before using, before using anything,
29:49 - make sure you learn how to use help WAP scan-h.
And this is the help menu. So they use it,
29:57 - always read the usage, which says.
29:59 - Would be scan space options. Now, what are
the options? The first option is URL. Then
30:04 - just come down very down. There are some options
to brute force and here throttling. So you
30:10 - are not, you are not because on a real internet
server, there will be firewalls which will
30:14 - block you. So you may want to throttle the
speed of your attack or any kind of scan or
30:20 - detection mode. If there is a firewall or
something or Passover or whatever, you can,
30:23 - you can handle that. The main thing I want
to show you is an enumerate. So -e, that is
30:27 - what I'm finding enumerate. So you can enumerate
a lot of information. Enumerate means you
30:32 - will ask some questions or you will try to
gather some data from the target. Now, what
30:37 - kind of data we can gather? We can find vulnerable
plugins or all plugins.
30:42 - Now, what is plugin? Plugin is the softwares
which we install on WordPress. Wordpress is
30:47 - like your windows. You got windows 10. That
is like your WordPress. Now you install a
30:52 - lot of software on that to make it usable.
That is the plugin. That is how WordPress
30:57 - works for websites. So popular plugins, vulnerable
themes that you can give teams to it to style
31:03 - it. Then all themes, all right, popular teams
some other things like configuration backups,
31:08 - etc user IDs. So you can find a user's real
usernames. That is what you can find and media
31:15 - files. That is what you can find. These are
all the things you can find. Okay. So let's
31:19 - go ahead and, and do it. Let's go ahead and
say, we will find -e and vulnerable themes
31:25 - and when vulnerable l plugins, okay vulnerable
plugins vulnerable themes VP VT, let's go
31:31 - ahead and clear the screen WP scan --URL because
it was written here, beta.hackerinthehouse.com
31:38 - I make correct that -e. Now what we are going
to enumerate vulnerable themes. And vulnerable
31:52 - plugins WP, WT presenter, let's wait for the
magic to happen.
31:59 - And it's going to start giving us a lot of
information. It has finished. Let's go ahead
32:05 - and start from the scratch Information. Number
1, interesting finding this website is running
32:12 - this, this, this, we actually already know
that this is running apache & PHP due to wordweb,
32:16 - but it is giving you the information. Information
number 2, direct access found, which is XML
32:23 - RPC. Now XML RPC is an interface which can
be used to talk to the website, you know,
32:31 - using command line. Again, that is, that is
a interface or using web queries. So you don't
32:37 - need to go ahead and log into the website,
give your password, blah, blah, blah, and
32:42 - then go to the dashboard and click there and
click there and write the code. You don't
32:46 - have to do that. You can just use XML, RPC
interface to directly communicate with the
32:51 - website over the command line or whatever.
32:55 - Now, th th this is going to this is going
to help to brute force the website. You can
33:00 - bruteforce, or this is going to help you to
give commands to the website, but you need
33:04 - the proper password. Of course, it's one of
the important things. If there is XML, RPC
33:08 - its going to help you. It's not a vulnerability,
but it's going to help you. Read me. File
33:13 - is present. So read me, we'll have different
information like diversion information, etc,
33:18 - but it will automatically give them version
information. So we don't really need that.
33:22 - It's also saying that upload directory has
listing enabled, which is quite not good.
33:28 - If I open this open link, you can see we got,
all the uploads. So you can basically check
33:35 - the upload file here. 2020, let's say 03.
We don't have anything.02.
33:40 - We don't have any things 01. Yep. We got some
images there. If I open this, we got a photograph.
33:47 - There uploads directory is open. So website
data can be easily seen from the upload directory.
33:51 - And this is not very good practice. This is
a vulnerability. We call it a information
33:57 - disclosure. In case, in case this, this was
a sensitive data, and I will say, this is
34:03 - a sensitive data, because you know, you, you
may be uploading some private data here and
34:07 - that is available. So you have to see what
kind of data is there. If you find some sensitive
34:13 - data, you will say this vulnerability is high,
you will, you will give it a risk rating of
34:17 - high. Okay. It is risk rating of high and
saying sensitive data disclosure. That is
34:22 - your vulnerability title. The risk rating
is high .In this case, this is not high.
34:28 - You can see there is just two locals , two
local files. I don't, I don't see anything
34:33 - else here. There are two local files in 2019
as well. I just see some images by the way,
34:38 - like there is nothing else. These are simple
images, right? So this is not sensitive data
34:43 - for me. So here I can keep it into low or
medium. Okay. I can say directory listing
34:50 - enabled, or I can say information disclosure,
okay. This is what I can give the title. Not
34:55 - sensitive information, but the saying information
disclosure, because this is not that not that
35:00 - sensitive. And you can, you can give it a
risk rating of low or medium. So depends what
35:04 - kind of data you get, but low or medium in
case you get some sensitive data like files,
35:09 - you know, which for example, many, many people
will sell paid courses, okay.
35:14 - Paid videos or paid files, PDFs, etc, books.
They will keep them in the uploads folder
35:22 - of the WordPress. And that folder is public.
So as a hacker, I can just go ahead, open
35:27 - the upload folder, download the content from
there and never pay them anything. I don't
35:32 - have to purchase it because I can open that
up and get from the folder. So at that point,
35:36 - because it is harming the business, it becomes
sensitive data. And then it is in the critical
35:42 - or high. And that is how you adjust the risk
rating of this. Any doubts there?
35:47 - No, it makes sense. Alright. Did you download
my video? Which one? Did you go to my website
35:56 - and download my videos? No, I tried downloading
that actually. Oh, you did? Okay. Let me know.
36:06 - Let me know what you get out of it. Oh yeah,
yeah. Oh gosh. All right. Next thing directory
36:13 - to this thing, we got a vulnerability there.
Another one, a WAP Cron, reilly? I mean, this
36:20 - WAP cron what exactly it is. Basically it's
a Cron job. So you can actually read this,
36:28 - these or they say you can read these issues
and I'm quite not sure what this is, because
36:32 - see, every, every website will have a different
finding and you cannot remember all of them.
36:38 - You just need to go ahead and read the references
to know what exactly this is. And I think
36:42 - this is a cron job, something so possibly
you can read it and you can find what it is,
36:46 - but this is not a vulnerability.
36:48 - This is just information, because if it is
a vulnerability, it will be a minus sign here
36:52 - in the red color. This is a plus. This is
just a information. So you can read about
36:56 - it. It may be something you can use later.
Wordpress version 5.1.4, you got one thing
37:03 - there. And this is according to this website,
this is the latest release of this. So this
37:08 - is a safe version. If, if this was vulnerable,
it will show here itself that this is, this
37:14 - version vulnerable. You can attack it. Here
is a possible exploit on the internet, but
37:18 - it is not. Theme is Hestia version is this
again? If the theme was vulnerable, it will
37:23 - show you here. It will tell you that this
is vulnerable You should go ahead and do something
37:30 - else. And similar thing for everything. It
37:34 - Found some URLs there. That's fine. It may
find some plugins. It will tell you that the
37:38 - plugin is vulnerale Now that that is what
we got. We did not got any vulnerable. You
37:44 - know, we did not get any one vulnerale plugin,
no plugin found. We did not got ay vulnerable
37:48 - theme, not theme found. Basically this website
is safe. Okay. This website is safe. That
37:52 - is the conclusion still. We are going to hack
it. I will show you how to do that. But the
37:58 - conclusion that is website is safe, just to
show you Another website. And I'm not sure
38:05 - if I can scan my website, but let me try to
do that. I have some plugins which are not
38:11 - updated from last two days. So let me just
check that. I'm not sure that we can scan
38:21 - my website, but
38:23 - Huh.
38:24 - Okay. Let's wait. And this is the difference.
This is a real website on the real internet.
38:29 - It's taking a lot of time. That was a virtual
machine that began like in one second, right?
38:34 - This is a real website it's taking time and
it will take time. See, it's taking
38:56 - So much long to find the vulnerable themes
and plugins. No plugins found vulnerability.
39:01 - That's fine. But anyways, let's see.
39:08 - Almost done. There you go. So in my website
also, it is completely safe and I was not
39:18 - expecting this, but I think I fixed it yesterday.
There were two plugins which are outdated,
39:23 - so that's fine. Maybe they are not vulnerable.
They are just outdated. You can see, in my
39:28 - case, you can see, there are some other things.
There is no XML, RPC. Yeah. You cannot see
39:33 - there is extending XML, RPC finding further,
you might see that there is an interesting
39:40 - entry, which says CloudFlare, what is CloudFlare?
Cloudflare is a CDN, eh, you know, a content
39:46 - delivery network. It helps you to speed up
the website. It's a service which helps you
39:50 - to increase the speed. There is, there are
must use plugins. So the most popular plugins,
39:57 - but that kind of thing, there are plugins,
which I'm using. There is the team called
40:01 - ocean WP in, in the previous one, there was
a team called Hastia.
40:04 - In my case, it is the ocean and nothing else.
It cannot find anything else. That's maybe
40:10 - because of my firewall or something, Atleast,
I'm using a lot of plugins, like 50, 60 of
40:15 - them, but it cannot identify them. Due to
firewalls or some reason. But the bottom line
40:23 - is if there is a vulnerability, there is a
great chance. It will show you here. I mean,
40:28 - not every website will have a firewall. Like
at least I would say 50% of the websites don't
40:32 - have a firewall, a bigger, Wordpress websites
because people don't even know how to use
40:38 - a firewall. Okay. They don't know. Even in
the enterprise networks, if they do have a
40:43 - firewall, they will not be well configured.
And I have seen that every time. And that's
40:49 - what we are testing. I mean, if it is well
configured, that's fine.
40:51 - It is, it is safe. It has not been configured.
That's what we need to test. So that's the
40:56 - result. Now, coming back to the previous scan
now coming back to the previous scan, which
41:03 - is this one. So in this case, we found that
there is no vulnerable plugin, there is vulnerable
41:09 - theme, which basically means the website is
safe. Okay. That's one of the point of views.
41:14 - The last thing before leaving a website or
a target is brute force. Today, we are talking
41:21 - all about bruteforce, by the way, We're talking
about how to brute force a CMS. That is the
41:25 - whole lecture. We have a CMS, we will brute
force. What is brute forcing anyone
41:34 - crack using any possible combination of letters,
words or characters. All right. And what is
41:41 - a dictionary?Same thing, except this time
you only use the dictionary words, publication
41:47 - case, Right
41:48 - So what do you think is, is a better option
in case of a website? Should we be using bruteforcing
41:53 - or a dictionary? You're definitely a brute
force. Sorry, go ahead. Okay. Do you want
42:01 - to say something Bravo? Oh yeah. I was, I
was thinking it was dictionary. A better one.
42:13 - Yeah. Bruteforcing It take longer, but brute
force are have more options. Right. Okay.
42:19 - All right. So let me explain that. Let me
explain that, how this works. Udefinitely
42:27 - brute forcing has got hundred percent chance
basically because in bruteforcing you're trying
42:31 - every single password, zero one, two, three,
four, five, six, seven, eight, nine, then
42:34 - a to Z, then combinations, letter characters.
You're trying, literally you're trying every
42:39 - single password in this world. The problem
is time in a pentest. You had like how much
42:46 - like the, the maximum length of pen tests,
which I have done in my life was two months.
42:50 - I guess, 60 days you cannot group force a
website with a password of 20 characters.
42:56 - That's, that's what enterprises are going
to use like 12, 12, 20, 15. Those are things
43:01 - long passwords. You cannot brute force those
passwords with a, within a 20, within a two
43:07 - months time, it can take two years. And in
two years, someone will change it. You know,
43:11 - there is a policy of changing the password
every 15 days. So when you, when you have
43:17 - an offline cracking, so there are two kinds
of cracking. You got you got a hash or something.
43:22 - And you're trying to crack that offline. You
know, you got, you got a password which is
43:25 - encrypted, and then you are trying to crack
it offline. You use brute force, then you're
43:29 - doing it over the web. You always try to think
about the time limits. Okay. And it is practically
43:36 - impossible to break a 15 character password
in a, within a year, actually.
43:42 - Okay. That is what you have to think. And
you will, of course get blocked. So someone
43:45 - will block you because you're trying millions
of requests. Someone will notice you. That
43:50 - is the time when we use a dictionary because
in a dictionary we are using low amount of
43:56 - words. Of course, brute force has a hundred
percent success that will, of course break
44:00 - the password. That's not a doubt regardless
of the time. But when we say there is a time
44:06 - we have to manage the risk, there is a risk
that we will not find the password in the
44:11 - dictionary. And there is a risk that someone
will change the password due to the time limit
44:16 - in the Brute force. First Dictornary, we will
not use the password brute force. Someone
44:21 - will change the password. Those are the two
things you have to evaluate. Which one do
44:25 - you care about in, in, in the LPD exam or
in a normal three, four days or a week pen
44:33 - test of course, brute forcing is not at all.
44:35 - An option. LPD is like six hours. You are
only 6 hours to have this machine at this
44:39 - kind of machine. Of course you cannot go ahead
and do brute forcing. So we go to the dictionary.
44:45 - Does that make sense now? Yep. It makes perfect
sense. Right? So the, the, you know, the what
44:52 - do you say if we go ahead and search WP-,
the syntax is quite similar. You can find
45:00 - out a brute force and the syntax. The one
which I see right now is password username.
45:05 - So you can give a password attack lists, or
you can give a password list and you can give
45:11 - a user's list. Okay? So that's P for single
password on a left, that's U for a single
45:16 - user in more or less, that is how it works.
You can do a brute force. So there, there
45:21 - are the options here, maximum passwords, blah,
blah, blah. There must be an option for brute
45:26 - forcing as well. So you can do that. That's
another, that's another day work Today. Let's
45:31 - talk about how to do a dictionary attack.
We've got -b that's you two options. Remember
45:35 - them? That's U thats it. The problem is we
don't know the username. We don't know the
45:41 - password. Let's go ahead and try to find the
username. And username is very easy. Dash
45:45 - -u and enumerate the username, and it is very
successful. It will come up with a user name.
45:55 - Here you go, users, identify. There are two
users. First as admin. Second is developer.
45:58 - Let me show this on another terminal on my
website. I'm quite sure it will find it there
46:03 - as well. So that's it. Let me scan the url,
sagarbansal. Let me do one thing instead of
46:13 - try on another website of mine. I think this
is not that secure. Let's say that a Am trying
46:25 - my another website over here. I it seem not
updated. Do you wanna update ?thats updated?
46:35 - Okay.
46:36 - And we got an, error, we got error why. Permission
denied. Oh, we are not root. I do hope everyone
46:43 - knew how to become root, right? Yeah. It was
a sudo[inaudible] I usually type it sudo.
46:56 - So yeah. So when you type sudo, SU, which
is pseudo switch user, it will default by
47:02 - default switch. You to the root, but for example,
if you want to switch to another user like
47:07 - Paul, then you will use sudo su-paul So if
you specify username, would you do that? If
47:12 - you don't, it will be by default. Okay. Got
it.
47:19 - Okay. Very quickly. WP scan that, URL. My,
run.com, disclaimer, I don't own this website.
47:32 - I'm the CISO of the company so I can do whatever
I want. It's a security risk. You need to
47:38 - give that disclaimer, tomorrow. What happens.
Okay. All right. So keep that in background,
47:47 - but let's say we got the usernames admin developer
now does being creative here. Of course, developers
47:53 - are the people who do the mistake. Isn't it?
Developers are the people who will always
47:57 - use weak password. They will do mistakes in
coding. So if you can, of course, private,
48:03 - both of them, just for the example, just telling
you as a practical life scenario. And if you
48:07 - have time, you can try both of them. But if
you have only one to choose, you will always
48:12 - try to go with developer. Now admin account
is of course going to have more privileges,
48:17 - but there is a greater chance that you will
get some access in developer.
48:20 - And once you have access, you can then maybe
ask your client in real life. You can ask
48:25 - your client that listen, we had only two days,
you were able to get access to developer.
48:29 - You gave us two more days. We can try to get
access to admin as well. You get some liverages
48:34 - there, right? If you try directly on a hard
target, maybe you will not get anything. Client
48:38 - will think you don't know anything. You're
not good. Your reputation gets damaged. So
48:43 - when you're doing a practical pen test professional
test, always try to first target the weak
48:48 - targets. And as a admin and developer, I will
always choose a developer. So let's go ahead
48:53 - and choose developer as a username. We need
passwords, where are the passwords. Paul,
48:57 - you want to say something? There are the passwords.
49:02 - I'm sorry. What's the question you say? What
are the passwords? The where are the passwords.
49:08 - Which passwords will they try? Where is the
list. Oh, password. Oh, I see. Shadow nobody.
49:15 - So see that's P no, no, no. I'm asking about
a password list because we need a password
49:24 - code. Just like our code, right? So one of
them is dark cord. One of them is Rockfield
49:30 - or TXT. There are popular lists on internet.
The problem with those lists is if I show
49:36 - you a locate rockfield, you got a list there.
That is the list. So let me copy this list.
49:47 - I'm copying this to form a Kali username,
desktop. I just copied that there. Let me
49:58 - open it. Yup. Here is the list. Let me extract
that. Oh, alright. So I'm just going to extract
50:12 - it. Tar-Xf a rock to own Kali desktop and
what it is.
50:23 - And it says it's affiliated errors skipping
that better. Okay. That's right. Okay. permissions
50:33 - problem. Yep. Let's try it manually. And just
drag and drop. There you go. We got the word
50:42 - list. Let me quickly move to that same folder.
Kali desktop, basic question. Tar -xf that
50:49 - command does what exactly to extract X in
extract F I forgot what is F so you can check
50:56 - this index. I was just trying to extract that
file. I did not add it for some reason. Not
51:00 - sure why extract and it's like zipping, right?
Yeah. So I just did it manually right now.
51:05 - I just, I just opened the zip here and I just
got it. Got it. Okay.
51:11 - Okay. We got this file.TXT. Let's see what
WC, R O Rocky, that xd that's entered. The
51:19 - problem is this in these kind of word lists,
there are how many? 14,344,992 pass it. 14
51:26 - million passwords to write 14 million passwords.
Let's say there is a throttle on the website.
51:33 - You can only try a pass. Like you can only
try five passwords, and then you have to wait
51:38 - for five minutes. Let's let that kind of thing
is there. It's going to date years. It's going
51:41 - to take again years. So that's again, the
problem you need to come up with a great word
51:46 - list. Now these are good word lists. Of course
you can use them, but when it's a professional
51:52 - test, and if there is a throttle, you always
want to use a custom word list. Okay? No doubt.
51:58 - You can try it, but it's all about risk management.
52:00 - You need to check your risk for a pen testing
purpose. Do you have that much time to do
52:05 - it or not? Normally you will have that much
time. You can use rockthing. So Rocky is a,
52:10 - is a good list. The, the benefit of rock tool,
is they have, you know, they have put the
52:15 - passwords in order. So the most common password
is on the top. The least common password is
52:21 - on the bottom. So you are always trying best
passwords first. And then you're moving to
52:25 - lower, low complexity and low success passwords.
So high success chances are in this starting.
52:31 - That's why rocky can be great deal. I'm not
going to use Roku because I'm quite sure that
52:36 - will never work because I have designed the
machine at the end. I know that is not gonna
52:40 - work. So it will waste our time.
52:42 - But I'm just going to show you how to create
a custom list, maybe in a LPT exam or in real
52:49 - life, whatever you will get the list. So your
client may tell you that we want you to try
52:56 - to brute force the password. This is a list
of passwords. You can try this. This can be
53:01 - your, this can be your scope of work. Yeah.
in LPT exam, they can tell you that use this
53:06 - list or that list. You can use the list. If
you do not get success, then try rocku. You
53:11 - Roku is your last attempt. You never do brute
force in the LPT exam. But if you are having
53:18 - like if you're failing with the list, which
they are providing as the client, if you are
53:23 - feeling that with that, try with rocku as
your last attempt and you will do it.
53:28 - You are you know, you start the brute first
and you keep it aside and do another other
53:32 - work. You don't just, you know, sit on that
and wait for it. You just do other work it
53:37 - until it is brute first. So just to show you
how to create a custom list, anyone how to
53:44 - create custom lists, start a text file. Okay.
I'll come on that. Give me a minute. So here,
53:53 - by the way, in mytutorial, we got a username.
It was either is my capital T. My tutorialrack,
53:58 - I get the username. That is how you can get
usernames on a WordPress by the -u. So that's
54:02 - the userspace. You enumerates users now. Yeah.
What you're saying again? Sorry. Uif I were
54:08 - to create a custom list, I would create a
basic text file and I will try to recon and
54:13 - figure out what the target might possibly
use.
54:17 - So I can have a high probability of cracking
it. Right. That's absolutely great. You just
54:23 - get the next while and you try to recon the
words, you know, related words, and then get
54:28 - them over there. Now tell me you got like
two hours, only two hours to crack a website.
54:35 - What is your best shot to get those, those
recon thing done? How can you do that? Recon?
54:40 - Oh, social media. That's a big one. I think
if I know whats great, but let's say you don't
54:46 - know anything about company. There is no social
media profile. Could you try and build like
54:54 - a web scraper to kind of go through employees
for the company, see their social media accounts
55:02 - and then try and get a password that way.
Yeah. I mean, all of these are valid option,
55:06 - but I'm just saying, let us assume this is
a beta website, right?
55:10 - This is a beta website. This is not public.
Let's say the company is not even started.
55:15 - That is just a project, a test project. You
have to do it. Then what? Top known default
55:24 - passwords. Yeah. I mean, they top known are
in the Roku. You, so we will use that as the
55:29 - last resource. But before that, there is one
thing that you can do. Let me tell you that
55:33 - you can go on live website and you can take,
I mean, this is a beta website, but this is
55:37 - a website. You can go on that website and
take the words from that website itself.
55:43 - I mean, instead of going on Google and trying
to find, because Google will only get data
55:48 - when it is publicly available for everyone,
but you got a website that is private to you,
55:53 - or you can go on their website and find the
word. So basically use words that the company
56:00 - uses on the website. Yep. I mean, just to
just, you know, you can just because we are
56:06 - targeting a developer account, just say, you
go to these are password in house.com. We've
56:10 - got a website here. Right? We got works, hacker
house license. We got, we got different, different
56:16 - words. You know, some complex words there,
they got different words, their phone number,
56:21 - you know, you have a phone number there, address,
maybe you got address there. You can use all
56:26 - of these words, isn't it.
56:27 - You make a good point. They, one of my one
of our clients uses our wifi password is the
56:38 - part of it is the building number. Yeah. A
lot of people we'll use phone numbers. A lot
56:42 - of people use this kind of stuff. So that's
your first shot because I'm just saying you
56:47 - use this because how many words will be there
on the website? Let's say we have a, we say
56:52 - that we will use at 12 to 20 characters stuff.
How many words will be there? They'll be like
56:57 - 10 words, 12 words, 20 words, a hundred words,
a hundred passwords. How much time will it
57:01 - take to test them? That's the first shot you
should be taking, right? That's your first
57:09 - shot.
57:10 - Is that making sense? Yup. Right now you can
do that. The problem is if you manually go
57:16 - ahead and test all the pages of the websites,
that's going to take a lot of time. There
57:20 - is something called cewl, okay. CEWL, which
you can use, you can say, say -help? And these
57:28 - are all the options. And I say, well, we'll
do the work for you. You can give minimum
57:32 - length and maximum length of words. You can
tell it how much depth you want to go despite
57:38 - her. So it will basically go to two levels.
For example, beta.hackerInthehouse.com. That's
57:44 - the first level beta.hackerInthehouse.com
slash uploads. That's the second level. So
57:49 - anything on that file or that page, that is
how levels work. If there was level three,
57:56 - then beta.Hackerinthehouse.Com/uploads/2020.
So those lashes different, different, multiple
58:01 - nested pages, they are getting levels.
58:04 - So default is level two here. Let's just go
ahead and use it. Just to show you clear the
58:09 - screen. CEWL-M, let's, let's keep the default
depth level as to only minimum minimum words.
58:18 - Let's say 12 maximum. Maximum words, let's
say 20 the length which we think the password
58:22 - can be, of course, no company will use less
than 12. There's a rare case. Someone will
58:27 - use more than 20. That's why 1220 is my best
shot personally. Then just give the URL, beta.hackerInthehouse.com
58:35 - center. Here you go. You add these words.
How many words are these it starting here?
58:43 - It's ending here. Yeah. This one line. You
can, you can always try this list. Maybe you
58:47 - will need a password. You see this kind of
words. They can be password, these kind of
58:51 - words. They can be passwords. So just go ahead
and try it. Try that. That's that's one of
58:55 - the best shots you can do. I'll just go ahead
and create a file. Okay. I just created a
59:08 - file there. Let's save it. Okay.
59:14 - Now we just got 35 passwords. How much time
it will take to, you know, try these passwords
59:19 - 35 passwords. Won't take a lot of time. We
can always try that. That's one of the ways
59:23 - I'm showing you, you know, you create a customer
list with the website words and you try. It
59:27 - may work. It may not work really depends,
but that's one of the ways in the exam. Always
59:32 - try this once. If you're a great team person,
just try this before this as well, you know,
59:37 - even before this, you try default passwords,
admin, admin, Capital A admin, capital admin,
59:43 - you know, first letter uppercase admin password,
user password, just try 2-3 default combinations.
59:50 - If they don't work, try a custom list of password
from thew ebsite. If that doesn't work try
59:55 - dock docu, that is the, that is the level
you want to try it, right?
60:01 - Quick question. So when you typed in the CEWL
and then you go -M -1220, and then you put
60:10 - the URL. So it automatically searches that
website and extracts words. Yes. Okay. Got
60:19 - it So we've got a word list. Let's go ahead
and attack a WAP scan --url beta.hackerInthehouse.com,
60:30 - then let's use -U, and let's -U let's use
developer dash capital P password list. Let's
60:39 - just give it a password list. Let's press
enter now we are brute forcing it with the
60:44 - words which we found on the website.
60:47 - Here you go. Where words, all words, try it.
You see performing password attack on XML,
60:54 - RPC. We are reading that XML RPC. That's what
I said. It's very fast again one user trying
61:00 - developer. And this was the last password
we tried. 35 out of 35. We did not put any
61:06 - password, no valid password found in such
a case. You should go ahead and switch back
61:10 - to something like Roku, despiet all words.
Right. That, that is how it normally works.
61:15 - I've been under good passwords. We can try
it Roku again. That's going to take a lot
61:19 - of time. Is that making sense?
61:22 - Yes.
61:24 - Right. So what I can just do here, I can go
ahead and try it to rocku. I can keep that
61:30 - pushing. And of course, that's going to take
forever. This can take a lot of time if I
61:36 - show you.
61:37 - I have one question. I don't know if it's
out of scope but just, I know some people
61:43 - use no words and even if we're using we run
CEWL we pull out words there. I know people,
61:51 - you know, you have special characters and
numbers. Is there any kind of software that
61:57 - kind of automates, maybe adding numbers to
the end?
62:02 - Yes, I am about to come it now. That's called
transmutation. Okay. That's called transmutation.
62:07 - We improve the list. That's one of the ways.
So let us say, we keep this rocku.TXT running
62:14 - on a separate terminal. We just need to keep
it running there. Let's let's go ahead and
62:18 - hit that running there on a separate terminal.
We open another terminal. Then we can work
62:22 - on improving our list. So if it is a test,
which is all about, you know, if it is a test,
62:27 - which is all about brute forcing, we have
to try everything and then we can transmute
62:33 - now transmute, what transmute is, let's say
they're in a password sagar right now you
62:38 - can write sagar or you can write s@g@ or you
can, you can write sagar@123 right? Or you
62:47 - can, you can write capital list, different,
different versions of the same password. Isn't
62:53 - it. That's what you're asking.
62:54 - Yeah. That's what I'm asking. Yeah.
62:57 - Right. This is called transmutation. There
are different
63:00 - Kinds of transmutations. This kind of thing.
When you use the words like a becomes @ or
63:07 - you capitalized things, this kind of word.
This is called leet mutation. Okay. leet.
63:13 - Mutation LeeT is called leetd mutation. There
are different others as well. There are, there
63:17 - are substitutions additions. In addition,
you are adding passwords like one, two, three,
63:22 - you, add @ now, there are multiple tools for
that. One of them is cueds. So CUED that can
63:30 - improve a list. One is Chain enable Chain
enable is the most famous tool in the whole
63:34 - history of pen testing chain enable, can do
it. There is a Python script called transmute.py.
63:40 - Okay. Transmute.Py. That is my personal favorite
because it's like a one liner, a one page
63:46 - python script py script. You can keep it anywhere.
It doesn't take a lot of times. It's like
63:51 - instant and it gives me great results. So
you can use transmitter how to get it. You
63:58 - can Google again. Firefox,
64:01 - I'm sorry. There you go. We can search for
transmuters.py Just to mention one thing guys
64:15 - in the LPT exam, you do not have internet
access. So you, I'm sorry. You can use internet
64:23 - in your local machine, but not in the machine,
which they are going to give you. They will
64:28 - give you a virtual machine. A Windows sorry
A Kali Linux machine that is the virtual machine.
64:32 - You cannot use internet on that machine. You
can use it in your machine to research, but
64:37 - let's say you download this in your machine.
You cannot transfer that file because that
64:41 - machine is not having an internet. Is that,
is that making sense? Yeah, it makes sense.
64:50 - Yes. You see a simple but effective word list,
on it and it works. Yep. And there is a file
64:59 - transmutter.py, which is a very effective
file. I can just go ahead and download the
65:02 - zip here. I'm just, you know, this is, this
is now going out of scope of the LPT exam,
65:08 - but this is like practical stuff. You should
be, you should be learning this. That's a
65:12 - good stuff. Oh, cancel. There you go. Let's
drag it out on next door.
65:23 - You got it, what's going on? I'm trying to,
Oh, okay. Now I get it. Yeah. This is what
65:36 - you need. So we got transmuter.py file. Now
we can go ahead and improve our list.
65:45 - This is still Still going on a brute force
over there. I'm just, I'm just stopping it.
65:50 - We have already tried like 5,000 passwords.
You can, you can keep it running in a professional
65:55 - test. Of course, in the LPD. If you're not
getting any results within first 20 minutes
66:00 - or 30 minutes of a brute force it's not, it's
not going to work. It just doesn't understand.
66:05 - It's not gona work in the exam. If you're
not getting anything in 30 minutes, it's not
66:08 - working because they are not fools. They also
understand this is a six hours. You have to
66:13 - act three machines and six hours. One machine
is like two hours. You cannot keep a brute
66:17 - force running. So if you're not getting any
password within 30 minutes in the exam, don't
66:21 - do it. Just stop it. Just to show you, how
does transmutation work? I'll become root.
66:33 - Does like Paul do this? I just, that from
kali desktop. There you go. Clear the screen.
66:46 - Now we've got a list of passwords, right?
Password-XD and transmute. How does transmute
66:52 - works? Just to show you drop transmute-h,
to help you can specify a word, single word,
66:59 - or you can give it a whole list. So that is
the using transmute options usage in the file.
67:05 - Otherwise you can give single word. Then there
are different mutations, right? Typical transmissions
67:12 - typically it will make from itself append.
It will, you know, it will add some things
67:17 - and it can insert some things. It can add
characters, numbers, it can add symbols. It
67:22 - can add lower case alphabet. It can add uppercase
alphabets. It can create common lead mutations.
67:29 - It can create leet mutation. This is apart
from the scope of LPD. LPT does not, you know,
67:35 - once you to actually go ahead and transmute
lists, they will give you the list in the
67:39 - exam.
67:40 - You will get the list to bruteforce, or you
will at least get the option to use Rocku.
67:45 - You don't have to do it, but just for the
common reference let's use -L, which is common
67:50 - leet mutation, transmutation-l So transmute-L
input file. That is what we're going to do.
67:58 - In the screen transmute-l input file input
file is passed, right? If I press enter I'll
68:05 - press Ctrl+C just to it's a long list. You
can see it just made so many complex passwords
68:10 - out of the list, which we were using. Right.
Nice.
68:16 - Yes, I see it. It looks good. All right. So
I can just output the output which are getting,
68:23 - I can just save it by, you know, angular bracket
and I can give new passwords. Oh, I just say
68:28 - new, you know, I just press enter and they
just got a new file, which is new. And you
68:33 - see how fast it was. That's why I liked this
transmuter script. And now we can say word
68:39 - count, sorry. I just opened it. And now you
can see first password is hackerInthehouse.com,
68:44 - but then there are transmuted version of this.
Okay. There are so many versions, then different
68:49 - words, different versions. So that's the,
that's the improved list. And you can have
68:54 - first, go ahead, try this list. Let me try
this for you. You guys new, right? That new
68:58 - list as new press enter. Let's hope this will
work. I know this work.
69:06 - I created the machine, but anyways, and it's
brute forcing now, and of course, this is
69:14 - like a hundred thousand passwords, which is
way less than Rocky which is 14 million passwords,
69:19 - 14 million versus a hundred thousand way more
difference. Right? And these are quality passwords.
69:24 - And you can see this one works valid combination
found. Username is developer. Password is
69:28 - -. It looks very complex, but at the end,
it is hacker in the house, leet mutated, and
69:35 - the word is even on the website. Right. Cool.
That makes sense. Makes sense. Yeah. Right.
69:42 - And I'm going to take this username and we
are going to make notes, you know, because
69:48 - you will need to reuse it. Right. Of course,
you've got the password, but what now you
69:51 - will, of course need us. So let's create a
file. I always use that. I don't know why
69:57 - just create files, but anyways, let's say
notes, I faced it there. I just like, note
70:03 - the move. Not necessarily things. This is
something we don't need. There's something
70:08 - we all need or in the house.com Word, press.
Right? Yep. That seems fine. Right? We just,
70:29 - we just got the username and password there.
Let's save it. And now anytime we are in another
70:34 - tool or wherever we are, we can always do
catch notes.
70:38 - Okay.
70:39 - And this will give us the username and password
because we just saved it right now. We just
70:43 - got the validation username password . And
now we can further exploited the, we can dive
70:48 - into Metasploit and use multiple things. We
can go to the website itself. Well, try to
70:53 - attack it from there. From inside, there are
multiple ways we can do it. One of them is
71:00 - like hackerInthehouse.com, we can go on the
website. Okay. We can go on the website. We
71:11 - can just go to login and it doesn't work.
We can go to -WAP login and it didn't work.
71:19 - We can go to /WAP dash login can. Hopefully
that will work. Yeah. Here we go. It works.
71:31 - Here we can, we can use that username and
password, which we got. Okay. Developer
71:51 - Based here. Then we got hackerInthehouse Username.
I know the lecture is getting too long. Everyone
72:03 - needs to go home. So I'm good. It okay, cool.
No, that's fine. So you see we can log in
72:11 - right .Now tomorrow and tomorrow's class.
Let's go ahead and further exploited, you
72:15 - know, privilege, escalation, blah, blah, blah,
different kind of things. Let's do it. The
72:19 - username is developer development part by
the way, but it does work. Right. Um sounds
72:26 - good. Yeah. So today what you learned was
how to brute force in CMS. Okay. And further
72:34 - how to create custom lists, which is out of
the scope of, LPT just, you still learned
72:39 - it, but how do you use word lists to bruet
force? A CMS. So how to do a dictionary attack
72:43 - on a CMS? That's what you learn. All right.
So,
72:47 - Oh, Sagar.
72:49 - Yep. Oh no, no. After you go ahead.
72:54 - So are we going to cover like directory busters?
Cause I know you were trying to different
73:02 - type of logins. Okay.
73:03 - Yep. Oh, I just deleted that. I just deleted
notes. So my question was you know, we went
73:12 - through quite a few commands here, there in,
in preparation for the exam and in preparation
73:18 - for tomorrow. Should we go back to these videos
and kind of notate all the different commands?
73:24 - Oh, of course. What they all do or what is
your recommendation within the next 24 hours?
73:29 - All right. So what I suggest is you download
the lecture, I will upload it and I'll give
73:34 - you the access. You will download the lecture
and watch it and follow it, actually do it.
73:41 - You know, you've got these machines, you've
got the beta machine, you've got the license
73:44 - to pentest, the hacker machine, go ahead and
do it. Just try to get the password yourself.
73:49 - Okay. I'm not too familiar with with what
is that called again?
73:55 - The hypervisor virtual box. And that was very
popular in the event that I get stuck, I'm
73:59 - sure I can just Google things right. In order
to see how things otherwise if you know if
74:06 - you are doing there right now, which I don't
assume you are doing, but in case you are
74:09 - doing that right now, this is day for me.
Right. I'm in India right now. So you can
74:13 - always, okay. Okay. Sounds good. I'm willing
to stay on if you want while I am available
74:21 - then. Okay. Okay, cool. Yeah. I'm willing
to stay on just to have my VMs loaded and
74:26 - everything. I don't, I don't like to take
it for grant. It sound real simple, but you
74:31 - know I think I'd rather just have my VMs all
set up and make sure that it's set up properly.
74:38 - So what you just have to do by the way, you
know, you just have to click on this tools
74:42 - here. Can you see this tool here? And once
you click on import, you just click there
74:47 - and you can open the files and I have given
you the file. So LPT yep. You got these files
74:52 - just open them and everything is loaded. Just
like an import. That's what you have to do.
74:58 - Go. Okay. That sounds simple before doing
any of the import, make sure you create the
75:02 - network first, because then it will mismatch
what is preferences network. We've got these
75:08 - networks, so create 100 148, 155, 115. Create
all of those four. Got it. So let's create
75:17 - the network. Okay. Sorry. We're done then.
I don't want to hold anybody up. I can, I
75:22 - can stay with you while I can kind of just
run through that real quick. If you don't
75:25 - mind. I'm sure I can be on for a while. Okay.
Sweet. Alright. Okay. So just bear with me
75:34 - sagar since this you don't, you're not in
a rush. Yeah, sure. Let me do that. Alright.
75:43 - Oh man.
75:44 - Zoom is so respectful. It doesn't let you
share unless somebody stops here. Yeah. I
75:52 - mean, if I'm hearing something you're gonna
share, right. It's teams you just share and
75:58 - you just put somebody off. That's correct.
You can do that with, with Microsoft. Uokay,
76:04 - cool. So,uI got my windows. Can you see my
screen? Right. Okay. So I'm going to go to
76:10 - file preferences. Yep. I'm going to go to
my networks and now I need to create those
76:15 - different networks plus and the plus sign.
This is, I gave it a name. Let's give it a
76:24 - range. Let's keep everyone on the same thing.
Great one 100, First of all, what was the
76:31 - IP address? I didn't notate that. So just
change that to, 10.0.100 know, Ctrl+z, ctrl+z
76:36 - that. Yeah. Just change that to 200. That's
the standard. Got it, got it. Got it. Okay.
76:43 - It supports the ACP port for that click. Okay.
To create another one. So is this range? 200.
76:53 - Okay. And what was the IP address for this
one? And fall. I see the pattern now it's
77:02 - clicking. All right, then we'll do it again.three.
Got it.
77:07 - Range 3115. I'm sorry. Range. One, one point.
What did you say? 115, one, one five. Oh,
77:18 - sorry. I missed that part. Okay. And this,
this is 115. Yeah. We can do that as well.
77:28 - So we've got four inches. Okay. So heavy range.
So that's got it.
77:36 - Okay.
77:37 - 115. Okay. Okay. All right. And now I'm going
to import my machine, go to my folder, my
78:00 - downloads. And you can start with this one
and that's gonna take a lot of time. Oh yeah.
78:13 - Okay. Let me, let me do it . Yeah. Okay. Click
on next and then import share this machine
78:22 - to anyone, right, right, right. Okay. And
that's it.
78:27 - Yeah. I don't need to do any other customizations.
No it will be automatically assigned. I have
78:33 - already fixed everything in the machine itself.
You don't need do anything.
78:37 - Perfect. This is what you were talking about,
right? Rafael. Just kind of having that out
78:41 - of the box for see yeah, yeah. Yeah.
78:48 - So if I was to walk into a penetration test
right now,
78:51 - Well, everything be configured after putting
the network Ranges.
78:58 - I mean, that company will of course have network
ranges. Isn't it?
79:03 - No I'm referring to in the exam scenario,
you know how you just said everything else
79:09 - is configured. Everything else is configured.
79:13 - Yes. I mean, the exam is just like a real
test. There are 30 days. So you have 30 days
79:21 - in 30 days, you have to do the pentest. You
have to do it three times. So there are nine
79:26 - machines. You have nine machines. You have
to hack five of them. Within 30 days, you
79:32 - can use three days to do pen tests, 27 to
make your report.
79:35 - Oh, okay.
79:37 - It's a big exam. Oh, OSCP people think, Oh,
OSCP is the best example is if it's like 24
79:44 - hour exam, it's not even teaching you those
things. Practical things which you actually
79:48 - use in LPT is much wider exam this is much
better.
79:53 - I thought we just had 18 hours full stop then.
No, we had 30 days. 30 days.
79:58 - No, you have 30 days. And every day you can
use six hours. I mean, you get six hours,
80:03 - six hours six hours. That is 18. You got three
days to do pentest and going 27 days to do
80:08 - the report.
80:09 - Hey, sagar, let me rephrase my question. So
you know how we just created the VM, right?
80:17 - We we said the network ranges, and then we
configured the IP addresses that we need.
80:23 - The yeah. So my question to you is you just
stated that after we do set the network ranges
80:32 - and we import the the VMs, everything else
has been configured by you to operate accordingly.
80:40 - My question is,
80:42 - In this case, it is configured by me.
80:45 - Yes. So I'm asking, are you going to go over
additional configuration steps that we may
80:53 - require? In exam? Yeah. Or would those be
all you said? That will be preconfigured by
81:01 - EC Council great. Okay. Thank you. Yep. All
you, you are not important in terms of machine.
81:09 - What happened? Oh, I was going to wait for
you real quick. Because you say that one takes
81:11 - a while. I want to, it take like three, four
minutes normally. Oh, okay. Okay. And yet
81:17 - I wanted to ask you a question again. It all
seems simple, but I don't take anything for
81:22 - granted. So let me just make sure I'm clear
here. This is a VM or this is an environment.
81:26 - This is for each one. Each one is a VM. Yep.
Got it. Got it. Okay. Alright. Okay. It's
81:35 - pretty much just turn it on. And then once
I turned it on, I click on here at the of
81:41 - start. Is there and then the right corner.
Oh, there. Okay. Start. And then it turned
81:50 - on. Oh, I guess I'm waiting for it. Okay.
So once you start, it just pops up. Okay.
82:00 - There's no RDP needed or anything. It's just
pretty much connect like that. Cool. Okay.
82:06 - How did we get one? Right? I guess I'm good.
Yep. So the Kali Linux which I have given
82:23 - you, the hacker machine that is running the
virtual box addon those ad-ons will allow
82:29 - you to copy paste files between your host
machine and the virtual machine. You can go
82:35 - full screen or do drivers. Everything has
been pre-installed so that's, that's fine.
82:42 - Okay.
82:43 - Yeah. As I said, four minutes, you are also
using SSD, right? Yeah. State drive. Oh gosh.
82:48 - Yeah. It's four minutes. I got some students
who were using hardisk. I was like, guys,
82:53 - this is going to take forever. Yeah. I know
this guy named Victor. He did the same thing.
82:59 - I couldn't believe it, but I agree that I'll
get after that he's standing right here. So
83:07 - that's what I was, bring it up, his name.
So just going back to the test, I know we're
83:15 - not gonna really have the internet access
to download things when they're looking for
83:19 - Mmm. A kind of software for transmutation.
Are we going to have? Okay. So that is what
83:29 - I was saying from last five minutes, that
transmutation is out of the scope of LPT.
83:33 - They do not expect you to trust .
83:37 - Wow. So they're all, they pretty much expect
you to do is use a word list and, and crack
83:41 - it. Or they will give you a word list actually.
Oh, because you have to plug it in, you know,
83:45 - you just have to plug it in. Okay. Well I
hope the rest of the test is that simple.
83:53 - It's not that simple. You know, like I said,
I don't take anything for granted, so yeah.
83:58 - I got you. Okay. Sorry. I , you can, you can
close those messages from there. I'm, Not
84:09 - the Cross sign the message, you know? And
then this last time now the other sign that,
84:13 - Oh, damn, there were two options. Right? The,
the cross has really closed it. The second
84:19 - one was permanently remove the messages, my
fault.
84:25 - I think you gave it the, so what I do now,
just log in, right? You log into one. Oh,
84:32 - okay. The Pentester machine. Yep. Just open
that. It was what did you say using, Password?
84:38 - What was the root username is root with the
password as licensed to pentest, license to
84:46 - pentest and test like pen tense. Are you writing
that ? Yeah. I was writing this. I was writing
84:54 - here. Here. Sorry. You can see. Oh, sorry.
I'm giving you the user name for that machine.
85:01 - The pentested machine. Okay. This is right
here. Why do you need the password for this
85:07 - machine? Right, right. I'm sorry. I'm tripping.
I'm tripping you right you right. My fault.
85:12 - Pentesting machine is what I want. Let me
turn that on. But we are going to have the
85:18 - beta machine, not the media because you are
not in the same network. Media machine is
85:22 - in the internal production zone. You are in
the DMZ zone right now. Okay. Oh. Can you
85:29 - just close the VM click on close VM. So go
to settings. Okay. Close it and go to settings.
85:40 - Okay. So you're going to change the network
adapter, go to the network because my wifi
85:46 - was different. Your wifi is different. So
here in the business, make sure this is your
85:50 - wifi, right?
85:52 - I mean, it has automatically done it after
the edit. So this is your wifi Can you take
86:00 - the adapter tool as well? Sure. Come check
my, no no what I'm saying? Oh, well, right.
86:08 - So this is correct. That's correct. Yeah.
That's correct. So you are in the adapter
86:12 - tool. This is the range 100 you're in that
range. And the beta machine is in that range.
86:17 - Not the media machine. Media machine is in
a different range. Got it. Got it. It is in
86:21 - this range of I guess you didn't put on the,
on the other ones. Right? So you only need
86:28 - one range, which is a hundred because you've
got idea on their machines. Got it. And then
86:33 - I could start the machine. Okay. Yeah. No,
it should work. Cool. Okay. You guys following
86:41 - along over there, it might be beneficial for
you.
86:44 - And they are going to call you. I know that.
86:53 - Cool. Got my Kali. All right. Sounds simple
enough about what's been avoiding virtual
87:04 - box. Alright. Let me read this this time.
If you want auto capture keyboard and turn
87:11 - on. Yeah, I like that, right? No, not that
one. The second icon. All right. No, the second
87:20 - Icon not be crossed the second icon. That
that message will cancel somewhere. I have
87:28 - too many mines. This one? Yes. This one. Don't
show this message again. Got it. So you can
87:37 - press Ctrl+F to go full screen control will
be always right when you are using virtual
87:41 - box commands, Right Cntrl right. Control.
What do you mean by that? So there are two
87:48 - controls. There is a left control and there
is a right control on your keyboard. Okay.
87:52 - When you're using virtual box commands and
shortcuts like control F to go full screen,
87:56 - you use the right control, the right control.
And you can always click on switch is the
88:03 - saying that you want a full screen. And if
you want to come out again, the right control
88:09 - and F and F got it. And if are, if you want
to use control in the VM, you use the left
88:15 - control. Right? Got it. And by the way, if
you click in a VM, your mouse will be logged
88:21 - into that VM. If you want to bring your mouse
to the host just press control. Oh, okay.
88:31 - Okay. So license to pen test. Yes. That's
the root
88:35 - LICENSETOPENTEST. Hold on one second. This
right. L I C E N S E . Okay. To pen test.
88:56 - Cause I couldn't do spell mistakes. I know,
I know. It's probably me. Hold on. L I C E
89:11 - N S E D T O P E N T E S T. I don't want to
give you do one thing. Can you write Kali
89:24 - Kali? That is the non root user. Yeah. Okay.
Kali is what it is.
89:44 - I was taking some time for start Yeah. Close
that browser. Yeah,
89:49 - Yeah,
89:50 - Yeah. There you go. Oh, Roku is already extracted.
You can delete that. If you want to do it
89:56 - yourself. I do. Okay. As just a copy of my
business.
89:59 - Let me see inside. I just sent it. Right.
Isn't that logo cool. By the way, it's our,
90:04 - our personal, yeah, I like it, man. I like
it. I like that picture too, man. You gotta,
90:12 - you gotta tell me who your photographer is,
which picture there's a picture you had, you
90:17 - were showing I think on your desktop. Oh yeah,
yeah, yeah, yeah. Thats my another course
90:23 - for CISO kind of people, you know lot of experience,
just like easiest is a CSSP. So to grow further,
90:31 - maybe see CISO. Nice. Nice. Okay. Can you
log into root using, using terminal now? Yeah,
90:40 - let's do it. Yeah. I forget one click. You
want to go too sudo-su. So you become root
90:54 - now this, but without sudo, you know, of course,
without sudo permissions exited the site exit.
91:00 - Okay. Now just type su root. So when you type
sudo su, that will ask you the user, the password
91:09 - of your account, because you are using your
sudo powers when you directly type switch
91:13 - user to root. Now does asking me the password
of the root user, so just type license to
91:23 - pentest.
91:24 - Okay.
91:25 - Okay. I believe the password is something
else then try Kali, Kali, instead of licensed
91:36 - with a D, no, no, yeah. Sorry. Are you using
license D yeah, I did a D I think, I didn't
91:44 - saw that. Yeah, it is license without d, yeah.
So I, I did'nt notice that you're using with
91:54 - a D. Okay, cool. We're good. I just quickly
just try one thing. Just try to ping the machine
92:02 - in the DMZ area. The beta.hackerinthehouse.com.
What was the IP? Beta.Hackerinthehouse.Com
92:07 - Sorry. You're right. I already configured
the host I haven't run and done it. Okay.
92:15 - Oh, okay. Yeah. It's not running. I think
as it it's me. No media, oh media is running.
92:22 - Okay. It's not reachable. Okay. Run it. Then
let's run it. Let's run it paid in the house.
92:30 - Let me start. Oh, also guys, just adjust the
amount of Ram according to your system. So
92:43 - like, Oh yeah. Sorry. Yeah. 16, gb. So not
16, but maybe someone is using like eight
92:53 - gb or four gb. Just adjust the Ram always
before launching any kind of machine you want
92:58 - to close. First of all, you
92:59 - Might want to try it again after the machine
starts.
93:02 - Okay. CTRL+C Yeah. That's when I typed in
the wrong side, I know you're on full screen
93:10 - basically you can just say clear. Sorry. I
didn't see that part. I think machine is on,
93:20 - can you check that? The beta.? Yep. Yeah,
here it is. It's on.
93:25 - Oh, okay. I think you are using two desktop
to do, to, you know, to, it stops.
93:30 - Yeah. Yeah. I brought up one of them. Yeah.
You can see this one, right? Yeah. Just ping
93:34 - it Alright. Let's see. Pentester Yeah.
93:38 - There you go. It's really convenient. So you
can, you can work with it further and you
93:47 - can try to do whatever we did today. Sweet.
Alright. All cool. Then. Any doubts? Anyone?
93:52 - Nah, we're good, man. Thank you very much.
That was very clear. Concise,
93:59 - Alright? So basically the Metasploit framework
is one of the most popular frameworks in the
94:06 - whole pen testing field. There are three main
frameworks. Basically. We have the core impact.
94:12 - We have the canvas. And metasploit so these
are the three most common frameworks in, in
94:18 - industry, which we use, of course if the project
is like, you know, very expensive, a big project,
94:25 - you may want to go with core impact. That
is a much better tool. If it is a normal organizational
94:31 - day to day activity, then Metasploit is kind
of fine. Now Metasploit comes with three flavors.
94:38 - So actually now it's coming with two flavors
earlier. There were three, it was it pro version,
94:42 - a community version and a framework version.
Now community is no longer existing, so they
94:47 - discontinued it. So we just have Metasploit
pro and Metasploit framework. What's the difference,
94:53 - Metasploit pro has got a much more exploits,
much more features, and it has got a graphical
94:59 - user interface, `framework has a command line
interface.
95:02 - So that's the whole big difference. You got
a command line versus a graphical. That's
95:07 - where the difference comes up. Let me just
go ahead and become root very quickly. There
95:14 - you go. How to stop me display you just type
MSF console. That's one of the ways to start
95:22 - Metasploit in the framework talking of course,
pro version, you cannot buy the pro version
95:27 - as a individual. You need to be a company
and import licenses needed. So but you can
95:34 - always try to sign up for the trial version,
they got like 15 days trial and int the LPT
95:39 - exam, basically you will get Metasploit. So,
you know, unlike OSCP and the offensive security
95:45 - believes that you need to do everything manually,
which is like exploit development work. We
95:51 - are not expert developers. We are professional
pentesters in professional pen testing, we
95:56 - never develop our own exploits. It's very
rare that you will make your own exploits.
96:00 - You will always use, you know, industry specific
already made exploits, which are accredited.
96:06 - So I think we, we got us, we got tWo CSSP
here. I Paul CSSP. Yes. It's Easy to CSP,
96:12 - right?
96:13 - Correct. Yeah. So, so you guys understand
the accreditation and certification process,
96:17 - Is'nt it? Right? Right. So for rafal, basically
say, when you are doing any kind of change
96:24 - in the company, you need to do, you need to
go through a proper change management process.
96:29 - Okay. When you're doing a pen test, of course
you are making changes. You know, you can
96:33 - crash their systems. You can do a lot of work.
Maybe you run a exploit from public. You know,
96:38 - you just go on internet, you find the exploit,
you run it. Maybe it will make some changes
96:42 - to their system. So you cannot use such kind
of things in professional environment until
96:47 - it has been, you know, going through a process
where there is a proper change management,
96:52 - proper testing, a lot of different stuff that
is called the accreditation certification
96:56 - process, where, you know, you get proper authority
to run that.
96:59 - So that's why we don't use public exploits.
We use professional frameworks. A Metasploit
97:04 - is one of them. We use these exploits and
the, you know, exploits from these networks.
97:09 - That's the whole reason behind using it. LPT
exam is very, very professional. They believe
97:14 - that you are in the real life going to use
it. So they will give you the Metasploit framework.
97:19 - You will have access to it. And this is going
to be like 80% of your, your, your tool that
97:23 - you will be using for the whole exam is so
Metasploit is something you need to learn
97:29 - very deeply. Now, if I go ahead and let me
just open a new terminal. And so if I go ahead
97:41 - to a directory, I hope you know how to navigate.
So use user is one of the root is one of the
97:47 - folders user folder in that there is a folder
called share and in that there is a folder
97:53 - called Metasploit. Okay. Do we have Metasploit
Metasploit framework, Metasploit framework.
97:59 - So there's a folder user in which there is
a folder share. There is a folder, Metasploit.
98:04 - In Metasploit there's a folder called modules.
I can see these are the modules this is what
98:11 - Metasploit is basically made of. These are
the main modules you're in auxillaries is
98:15 - you got encoders, evasion, exploit norms.
Payloads,Posts. Let's discuss them very quickly,
98:21 - like 15 minutes. What exactly does this all
mean now?
98:26 - Yeah.
98:27 - I would like to start with exploit and payload
because that's the easiest one I can. And
98:31 - I always like to give this gun analogy. So
think about you, you have a gun, right? You
98:35 - have a gun. You're wanna shoot someone then
what do you need? You need a bullet. Isn't
98:42 - it,
98:44 - Guys. You got a gun. You need a bullet to
shoot someone that's correct. Correct. Now
98:50 - that bullet is your payload and that gun is
your exploit. Okay. So the thing which is
98:55 - actually going to hurt, I mean, you know,
the, the malicious code, which is actually
98:59 - going to run on a system that is a payload,
the, you know, the, the thing that you will
99:06 - use to send that exploit to the system, or
to exploit a vulnerability, to take advantage
99:11 - of a vulnerability, a loophole in the system,
the process that that thing is exploit. So
99:17 - you use exploit to deliver a payload or to
run a payload. Okay. That is how exploits
99:24 - and payloads work.
99:26 - That makes sense. Yup. Alright
99:29 - Then after that you got auxiliaries. Auxillaries
are the most important part after exploiting
99:35 - payload, because Auxillaries are supporting
elements. They will support your exploits
99:40 - and payloads. How, for example, if I show
you an auxiliary. There you go. For example,
99:44 - you got a scanner here, a scanner module in
auxiliary, you got fuzzers. Okay. You got,
99:49 - you got dos attacking stuff. You've got cloud,
you've got analyzing stuff. You've got, for
99:56 - example, spoofing stuff here. Okay. If I,
if I even show you in scanners and I do LS,
100:00 - you can see you've got different kinds of
scanner. So FTP scanner, you know, DNS scanner
100:05 - SDB scanner, there are different kinds of
scanners. So what exactly, this is the supporting
100:10 - elements first, you know maybe you will need
these scanners to find version numbers or,
100:15 - or do a lot of information gathering. That's
my auxiliaries will help you out. That's where
100:21 - auxillaries help you out. Right.
100:24 - No, not really. It's not coming out crystal
clear in my head, but I think I understand
100:35 - what you mean. It supports , so supporting
stuff basically
100:37 - Basically, so, okay. Let me give you an example.
Have you ever all of, you know, what is n
100:40 - map
100:41 - N-Map yeah, it's a scanner.
100:45 - Yes. Alright. So what we do with n app is
we scan ports and services. Right? Right.
100:51 - Now you can use n map within Metasploit. So
there is a module for n map, but there are
100:57 - other kinds of scanners as well in Metasploit
in auxillaries modules. So you have PCP scanning
101:02 - module. You have SIM scanning module, you
have UDP scanning module. So all of those
101:06 - modules are there in Metasploit. Now you might
say that, why do we need that? I mean, n map
101:11 - is the best tool. Everyone knows, and Metasploit
the best tool. Why do you need a scanner?
101:15 - And what you think about it when you are attacking
a target using Metasploit framework and, and
101:21 - you need to use a lot of information. So you
need to collect a lot of information. Where
101:26 - you keep all of that information. You will
keep all of that information in the Metasploit.
101:30 - So you can create a database here that will
collect all the information for you. And then
101:35 - you can use that further. You can use that
information in your payloads and exploits
101:38 - are you getting it. So it's reusing same information
again and again, it's, you know, organizing
101:45 - your information.
101:46 - Yeah. It isn't making sense. Yeah. Yeah, yeah.
Now
101:48 - What exactly is post post is the post exploitation
tools. So normally people don't talk about
101:54 - posts, but it's very, very important. One
of the most important things a post comes
101:58 - you know, on, on the basis of different, different
operating systems and the environments. So
102:02 - one example is Android is there are Ios is
there DSD, Cisco fireworks? Jupiter, Linux
102:08 - multi is basically it's, you know, it's, it's
multiple operating systems that will work
102:12 - on, multiple things, OSX, Mac, Mac, OSX and
those windows. If I go with something like
102:18 - windows,
102:20 - Then you can see, we got post exploitation
tools, which are again, divided into categories
102:26 - like capture. So you can capture some things.
Now, for example, you want to capture key
102:30 - logging. You know, you knowt, you're not have
a key logger there. You have, you have a system
102:34 - now you want to install a key logger. You
can use a captor post exploitation tool. So
102:39 - CD capture LS, you can see you are a Key logger
recorder and you got to log out key logger.
102:46 - So you got two key logger modules there, and
you can, you can read them to understand what's
102:51 - the difference. So that, that is a postexploitation
tool. You got, you got some reconnaissance.
102:57 - What do you say? Post exploitation? You've
got wireless postexploitation toll. You've
103:00 - got managing stuff, gathering information,
escalating the usage. So a lot of people,
103:05 - they struggle a lot with escalating this,
the privileges. So you see right now we were
103:09 - using Kali Linux, right? Sorry, Kali user.
That is a non-root user. We cannot run a lot
103:14 - of commands, but we may want to escalate ourselves
to root user. So how do you do that? You use
103:20 - escalate, post exploitation tools. You can
escalate your users. You can try to escalate
103:25 - yourself. That is the escalation.
103:30 - Any doubts, is that clear enough? Or shall
I give you more examples? Right? Then after
103:36 - that we have encoders and evasions. Envasions
was a new module, which was recently added
103:42 - encoders is the old module. Almost do the
pretty much the same job basically. Encoder
103:47 - will change the coding. Okay. This will encode
your code. What exactly does that mean? Basically?
103:52 - you know, it can basically change the code.
For example, it can change the language. It
103:56 - can change the patterns of the code. How does
this helps to bypass firewalls, to bypass
104:02 - antiviruses ideas, IVs, you know IPS, all
of those securities stuff. They, they look
104:08 - at patterns. There are two kinds of you know,
there are two kinds of security devices. One
104:15 - is pattern based signature based. One is realistic
space, which is behavior based.
104:19 - So signature versus behavior now signature
is can easily be evaded by, by encoders. You
104:25 - can just encode yourself and you're good to
go. Encoder also helped to, you know, do a
104:29 - lot of web attacks. Sometimes you need to,
you know, encode your, your virus, your malware,
104:33 - you need to encode that into different languages,
right? Basically four different, different
104:39 - kinds of encodings. Sometimes it is required.
So encoder help over here, evasion similar
104:46 - version. Did they just improve the encoders
and bring a division which was antivirus division.
104:51 - So you will find like windows defender. Let
me just show you, see the evasion. It is only
104:56 - available for windows right now. If you just
do LS, you can see the windows. They will
105:01 - add it. They will improve it. So for example,
windows defender, you can, you can evade windows,
105:05 - defender, easily using this.
105:07 - A lot of people, they don't have paid antiviruses.
So that's weird. It's very helpful. That was
105:13 - encoders evasions. We are left with one, which
is notes. Notes basically is no operation.
105:19 - Notes are used when you are making things
like buffer overflow. You know, when you are
105:22 - writing your own exploits, so Metasploit framework,
it has got its own language. You can code
105:28 - it, ruby is the language. Basically it has
got its own formats. You can code in Ruby
105:34 - in Metasploit format and make your own exploits.
And that's where you might need to use notes.
105:38 - Or, you know, basically notes, notes means
you are telling the CPU that do not do anything,
105:44 - just stay quiet. Stay Ideal don't do anything.
Being the ideal state. That's in no operation.
105:49 - We practically don't use it. You know, exploit
developers will use it. Pentesters rarely
105:55 - will, will use. I've never used an open in
my whole career. So it's kind of, you don't
106:00 - use that maybe in a buffer overflow you might
want to do it, but normally you won't do it.
106:05 - That's notes.
106:06 - So, so you basically, you want to be quiet
not to do any phase so that you don't get
106:10 - detected. ? Is that purpose?
106:11 - No. So do you know what a buffer overflow?
106:12 - Sorry. Do I know what, ? Buffer Overflow?
Yeah, yeah, yeah.? So do you know how it works?
106:15 - Okay. Can you tell me? Yeah, sure. So in the
buffer overflow attack, basically I try to
106:27 - get into the bucket of another run, an application
to manipulate it, to steal data or to control
106:35 - it. Right. I mean, pretty much how it works.
106:38 - Yeah. I mean, that's the theoretical part,
but you know, the practical what's going on
106:41 - behind the scenes. Oh, no gosh. Okay. Let
me explain that. So it will make much more
106:46 - sense. For example, this is your program.
Let's just say, this is your bucket. Okay.
106:54 - So this is the core capacity, and this is
the core capacity, which it can handle the
106:58 - capacity for any program, memory allocation.
If you think about it is the memory part.
107:02 - There is a, there's a, this is the capacity.
This is mine. Now you send so much data to
107:08 - this input. You send so much data that it
overflows, okay? Let's say it overflows. Now
107:13 - when it overflows this, this, this thing,
you know, this is overflowing. This is the
107:18 - overflow area here in a buffer overflow am
just giving a high level overview. You can
107:24 - ask it to have a jump instructions.
107:26 - So JMP, you can say assembly language. You
can say that, jump to somewhere. Now you can
107:33 - tell it where to jump when you are, when you're
overflowing the data, you send a payload as
107:38 - well. You send a malicious code. Let's say
we have a code here. So let's say this is
107:42 - our code. Or let's say, Hey, here it is. Okay.
So this is your malicious code. You tell him
107:49 - that, listen, I want you to jump to the this
code. Okay? So basically this is the program
107:57 - it's already executed. You overflow it, you
control this byte. This is called the ESP.
108:03 - So you, you control this ESP byte. You put
a jump instruction there that jump instruction
108:09 - jumps the program to your malicious code.
That's how overflow works. Okay. But the problem
108:15 - here is if you're using a jump instruction
you need to jump to exact address.
108:20 - So for example, zero X, zero six A B, okay.
Let's say that is the memory address. Memory
108:26 - has got addresses. You have to jump exactly
this address. And it's very hard. It's almost
108:31 - impossible to jump to the same exact address.
So here we use notes. We just say, we just
108:38 - say that instead of jumping to this address,
you jump anywhere before it. So you say that
108:44 - you jump anywhere. Let's say it will jump
here. Okay. Let's say this is the point where
108:47 - it jumps your, your program. Now here you
add notes, these are notes no operations and
108:53 - CPU will not do anything. So here's, CPU is
not doing anything, here's CPU is not doing
108:57 - anything else. Here's CPU is not doing anything
here, it is not doing anything. So you added
109:01 - notes and finally it will hit it, right? You
you're sending your jump instruction before
109:07 - the address and then adding notes.
109:09 - So it doesn't do anything. And eventually
it will hit the program and your code will
109:14 - execute That is how notes works. That is our
buffer overflow. Is that makes sense. Yeah.
109:19 - Right. But again, you don't have to do this,.
Anyhow, I have never made any buffer overflow
109:26 - or any kind of custom code for any program.
You never do that because of the affilation
109:33 - management process. That's one of the reasons
people think that OSCP is a good certification.
109:37 - They teach you how to code, but what's the
reality. Are you actually going to do that?
109:40 - No, you're not going to do that.
109:44 - Alright. So that was the nopes. Let me just
quickly show you the payloads. There is a
109:49 - difference between payloads. So payloads comes
into two flavors. A third one is stages. You
109:53 - can ignore that. That is something else. I'll
talk about. That payloads are singles versus
109:59 - stagers. Okay? What's the difference between
singles versus Stagers. So think about it
110:05 - in this way. You are sending your payload.
You're sending your bullet, right? Will you
110:10 - send it in one shot or will you send it in
parts? So part by part that's the whole difference
110:15 - between single versus stagers singles are
one shot. You send the whole payload, let's
110:21 - say the five megabytes of file. You send that
file within one shot. That is a singles. You
110:27 - make it into you know, small, small pieces.
You send it one megabyte first, then two megabytes
110:32 - after that. So small pieces, that is a stager.
110:35 - Now, really, it doesn't matter what you use.
Sometimes stagers will not work. Sometimes
110:40 - in some cases you know stagers will, will
die. So you get a session. It will work. You
110:46 - will get the access, but then access will
automatically die within a second. That normally
110:51 - happens when you using a stager. So you have
to use a single there, okay? Understand this
110:56 - thing in your exam, in any kind of test you
are doing. If your session is dying, it's
111:01 - 99% chance that you're using a stager and
you need to use a single there because the
111:05 - connection is not able to handle multiple
files. You need to send it in one shot. Yeah.
111:11 - In some cases, you, if the explode is not
even working, you know, exploit is working,
111:15 - but you're not getting a session you may want
to go to stagers So maybe session is not able
111:20 - to handle one file of that size size matters.
Maybe session is not able to handle one file
111:25 - of a big size. Then you won't do stager, but
in case you, you are getting a session, it
111:30 - is dying. Then go to a single. It is not able
to handle multiple files. Making sense. Yep.
111:36 - Yep.
111:37 - Oh, sorry. I just wanted to confirm. So you're
just saying if the file is too large, you
111:45 - stagers if the connection is dying, you
111:48 - Singles. Right? Okay. Thank you. Stages is
nothing. Stages is basically you can say an
111:56 - extra part with stages we'll use, as you know,
it will make stages out of it. And then it
112:01 - will send in stages. It's like both of these
are connected. Just, just think that is why
112:06 - I said all of this, there is only single.
There are only two. And I will show you that,
112:11 - you know, in practical as well in the few
minutes that why there are only two.
112:17 - So overall I don't really focus on stages.
They'll just say, What?Sorry? Do not focus
112:23 - on the third one stages.
112:25 - Okay. Let me show you that. Give me one second.
112:37 - Right? There you go.
112:45 - Okay. So here, let me show you thhe stages
versus stages. And then stages. Okay. Can
112:57 - you see there is so first of all, this is
the pattern. Understand the patterns. There
113:01 - is windows slash 64 slash something slash
something, underscore something, okay, this
113:08 - is the pattern. So windows are, let's take
this example. Windows is the platform operating
113:16 - system. X86,X64 that will be your architecture
of the CPU. So if your processor is 86, a
113:23 - 32 bit or 64, that is the architecture. Then
this is the name of the Payload. There are
113:29 - multiple payloads. There is PowerShell payloads.
There are shell payload. There are meterpreter
113:33 - payloads. I will talk about that. This is
the payload type, then bind versus reverse.
113:40 - So there are two main things bind versus reverse,
in a bind connection. You trying to connect
113:46 - to the target. In a reverse Connection. Target
is trying to connect to you, okay?
113:51 - Bind, you will connect with them. So you,
you know, you attack that. It will open a
113:57 - port on that system and you can connect with
that port. Anytime in the reverse, you will
114:01 - open a port on your system that target will
connect to you. Now it, when you are doing
114:06 - a reverse, it may bypass a lot of firewalls
because on a system, it is possible that they
114:11 - are not allowing anyone else to connect with
them, but they are able to connect to everyone.
114:16 - So in the reverse, it may bypass a lot of
firewalls that is bind versus reverse. Then
114:21 - it is big protocol. Are you going to use PCP?
Are they going to use HTTP? Are you going
114:26 - to use UVP? That is, that is the protocol.
Okay. That is the pattern. Now, when you see
114:31 - here, for example, shell, and then can you
see this slash here versus can you see PowerShell
114:40 - underscore here?
114:41 - Yeah. So PowerShell underscore bind shell
slash bind. What does slash versus underscore
114:48 - means? This underscore is single. You see
power shell PowerShell under score, bind,
114:54 - underscore PCP. It's one word. It does a single
stager. When you say shell slash bind under
115:02 - Courtsey underscore whatever. This is a stager.
This is a stager. It is staged. This slash
115:09 - is a stage. Underscore is a single. So there
are only two kinds of payloads. You can see.
115:14 - There is nothing else. It is either slash
or it is somewhere, either, either underscore.
115:19 - There are only two kinds of things.
115:22 - When you go to, when you go ahead and go to
stages, I'm trying to, Oh, okay. Modules.
115:36 - Payloads
115:38 - Stages stages. I'm talking about stages now,
again, not stagers, which I send you that
115:43 - stages. You can see stages are for different
platforms. If I go to windows, now you can
115:47 - see, these are just stages. These are like
supporting elements that, that, that the stages
115:54 - use to, to go there. You know, these will
divide the stager out into stages. That's
115:58 - what it is.
116:00 - Okay.
116:02 - And now let's talk about exploits. Exploits
are a platform dependent. So there will be,
116:07 - again, you will find, for example, Android
, Firefox Linux of different things. Let's
116:12 - talk about again, windows, very, very simple
in windows. You can see them. They are coming
116:17 - on to be services or protocols. That's what
they're coming up at the end. You can see,
116:22 - you can, you can exploit antiviruses. You
can exploits firewalls. You can exploit FTP
116:26 - service, email service, my SQL proxy SMB service.
So just to show you SMB here, SMB is very,
116:35 - very popular thing. SMB, you can see there
are some exploits like ms. 06040 and zero
116:41 - eight, zero six seven net API. What exactly
this is this was a exploit, which works in
116:49 - windows. XP windows XP is exploitable due
to this specific exploit, the, the net API
116:55 - issue for that, they made exploit.
116:57 - Then there is eternal blue. Everyone knows
about eternal blue because this was the exploit,
117:03 - which, which was used in one of the wanna
cry attack the wanna cry ransomware. It was
117:07 - used using eternal blue. This was developed
by NSA, the national security agency. They
117:12 - developed it. They kept it for themselves
for years exploited everyone whenever they
117:16 - wanted to exploit any windows, they use eternal
blue. It was one of the most powerful tools
117:21 - in history, but it got leaked. Everyone used
it. And now it' is a metsploit. Eternal blue
117:26 - has got other options. Eternal Blue windows
eight version PSEs. This one works on windows
117:31 - 10 as well. I used it. I understand you can
hack it very, very popular. So these are exploits.
117:37 - They are used to take advantage of vlunerability.
These are exploits. And with that, I hope
117:43 - it's extremely clear now how Medisplay works.
Yup.
117:48 - Okay. Yeah. I mean, I don't even need this
domino. So to start MediSploit you just type
118:01 - MSF console and that's how you started. Let's
go ahead and do a little practical on hacking
118:08 - the WordPress site, which we, which we study
to crack the password, right? So very, very
118:12 - easy. You can find, you know, exploit in multiple
versions. There are, there are authenticated
118:18 - exploits and non authenticated exploits. When
you say authenticated, it means you need a
118:23 - password and username. When you say I'm not
authenticated, you don't need anything. You
118:28 - just, you're going to take advantage of any
kind of vulnerability. That's, that's what
118:31 - it does. Now, let me open the notes so that
we can have the password. Now, if you go ahead
118:38 - and if you try to find an exploit for the
WordPress, how will you do it? You can just
118:45 - say search in metasploit, of course you can
search, and then you can tell it, like, I
118:51 - want to search exploits so type colon, whatever
exploit I want to search a exploit and then
118:58 - tell it, what do you want to search?
119:00 - I mean, a keyword. So I'll say WordPress,
okay. I just say, WordPress, there you go.
119:06 - This is the list of WordPress exploit. I can
go up and you can, see, they will give you
119:11 - the matching modules. And because we only
search exploit, they are only giving us exploit
119:15 - here. So this is the ID number for your reference.
This is the name. So this is, this is the
119:20 - path, basically, this is how, this is what
you need to do select this exploit. Okay.
119:24 - This is the exploit. This has been disclosure
date. This is the date when it was disclosed
119:28 - in the public after that, it is the rank Metasploit
give you the rank. So excellent is the best
119:34 - after that as the, is the good after that
is the normal, sorry. Excellent, great. Average,
119:40 - normal. That is how it works. Okay. Ranks
argument there. Then you have check. Now what
119:48 - is check, check will allow you to check if
the exploit is working or not on a target.
119:54 - So, you know, it's just going to tell you
that if the target is one variable to this
119:58 - exploit or not.
119:59 - Before exploiting it. Of course you're not
sending any payload. You're just, you're just,
120:03 - you know, firing a dummy bullet. It's not
a real payload. It's just a dummy bullet and
120:09 - you are actually not firing even a bullet.
You're just testing the gun on a person on
120:13 - your system, that there is a system you think
it is vulnerable You test a exploit by using
120:19 - check, and it is very important that you check
things before you actually fired them. Then
120:25 - there is a description which you can use to
easily understand what the exploit is. So
120:29 - I have just zoomed in. You can zoom out. So
this is the description that you can use to,
120:34 - you know check what the, what the exploit
is all about. Now we have the admin username
120:41 - and password. So this exploit will work very
fine. WAP admin, shell upload shell is another
120:48 - name for payload.
120:49 - We want to upload a shell. We want to upload
a payload. And this is the, this is the exploit
120:55 - here. You copy. You can say clear and you
say, use, so use this exploit. And now you
121:03 - are using that exploit because the module
has changed to exploit. This is the module
121:08 - name, and you can always type info, okay?
Info will give you the information about how
121:13 - to use it, what it is all about, etc, etc.
So some information about the author and all
121:19 - of that available targets, what is the target
wordpress website check supported, yes, you
121:25 - can check before using any payload, then basic
options. These are the options you want to
121:31 - configure in this required options out of
this, this, this, this, and this. So password
121:36 - is required. It's an authenticated upload.
A proxies is not required. R-Host is required.
121:41 - R-Host is target host your target, basically
in this case, that has a website, which is
121:46 - beta.hacker.inthehouse.com R- port NSSL. R-Port
is the remote port. So the port on which you
121:53 - want to attack now, everyone knows. I think
every one of you knows that HTTP work on port
122:00 - 80 and HTTPS work on port 443. Are you available
aware of it? Yes. Yep. Yep. So if the website
122:08 - was working with a SSL, we will change this
port to 443, and we'll change the SSL to prove
122:14 - in our case, even in the exam, I believe.
I'm not sure on that. Because it's been long,
122:20 - I have taken the exam. So, you know, in a
simulated environment, of course, it's a non
122:25 - SSL version. Doesn't matter as you just have
to keep it on port 80 and false, if it does
122:29 - SSL, keep it true port 443, that's the only
difference target url. Right? What is the
122:33 - target url anyone knows about that? And I
explain the URL of your targets of your, I
122:41 - know, but that is R-host. Oh, okay. Okay.
Let me, let me show that. So for example,
122:50 - I hope you can see this screen on the lower
side, right?
122:54 - I mean, you can see what I just type. Right?
Right. Right. So for example this is our target,
123:00 - right? Beta.Hackerinthehouse.Com So here,
when you said target is a domain which is
123:08 - basically in the root directory, this is a
root domain. You just type a forward slash,
123:13 - but there are possibilities where companies
will, will install websites or will have data
123:20 - in folders. So there can be a folder in this,
this domain beta.hackerinthehouse.com slash
123:26 - secret website. Okay. So when you go to that
slash secret website, it opens a new website
123:33 - that is also a possibility, or there can be
something like, you know employees. So there
123:39 - can be a specific portal for employees and
let's say it is made in WordPress. So when
123:44 - you get to know that there is a sub directory,
which is having a website, then this is your
123:49 - target URL.
123:50 - So in this, if this is the URL, which you
are trying to attack here, the target URL
123:54 - will be slash employees. In our case, we don't
have any sub-directory. The website is installed
124:00 - on this domain itself. So our target, url
is only a slash makes sense. Yup. I User name.
124:10 - Of course, if you have a password, you will
have a user name we host it's basically for
124:14 - the, you know, apache web server stuff, you
will probably never use it. It's just kind
124:19 - of a custom. If you know, if you are working
in a company and it's an internal test and
124:25 - your things are not working, you can ask them
that are using a specific V host. It's a virtual
124:29 - host. They will give you the information.
It's like white box testing work in the exam
124:34 - or in, in, in normal professional testing,
you will, of course never be changing a vhost,
124:37 - but you can always ask your client or your
company if they're using every vhost, separate
124:43 - vhost.
124:44 - Okay. I hope it's quite clear now, just to
give you the description this module, generate
124:48 - a plugin that WordPress has plugins, WordPress
users plugins. Plugins are just like apps
124:55 - in your phone. You install apps in WordPress,
install, plugins. This plug, this module will
125:00 - generate a plugin back the payload into it.
So it will make it plug in and have the virus
125:05 - code into that and upload it to the server,
running wordpress providing valid admin credentials.
125:11 - If you use it, if you give it the valid credentials,
it will make a payload for you. It will upload
125:16 - that payload to the website for you, and then
execute it and give you the access. That's
125:22 - what this module is going to do. So let's
use it. How do you use it? You need to set
125:28 - these options, which we just saw. We need
to set a password, username and R-host you
125:33 - set a password. What is the password you can
copy from there?
125:37 - No,
125:38 - There you go. Set username set R-host.
125:53 - It just beta.hackerinthehouse.com. You can
always do show options. To check what you
126:04 - have set and what is, what is not set. So
password, it set, R-host is set R-port is
126:08 - okay, R-port okay. User name is set. Right?
And I think I just did something there. Alright.
126:14 - So that is how you set things. And once you
are all set, once you're satisfied with the,
126:21 - you know, tuning your exploit, we just tune
that basically you can always type exploit
126:27 - and you can press enter wait for it to complete.
You can clearly see right here sending stage
126:32 - and you see it was a stager and it has sent
in stages. Okay. Metalsploit meterpreter session,
126:39 - one open. What is meterpreter? Meterpreter
is the type of a payload. So there are multiple
126:44 - payloads. There is a meterpreter. There is
PowerShell.
126:46 - There is shell there is generic shell, multiple
types Meterpreter was developed by the same
126:52 - company. Metasploit rapid seven company. The
name of the company is rapid seven. So they
126:58 - develop meterpreter. It's one of the most
powerful payload in the history ever created
127:02 - because it gives you a lot of options. You
can do a lot of stuff with meterpreter. You
127:06 - can take screenshots, you can record voice.
You can upload files, download files. You
127:11 - can run commands. You can take, even sometimes
you can even take a graphical interface using
127:15 - RDP or something. You can crack passwords.
It's a very, very powerful payload. It gives
127:21 - you additional options. Now that you have
a meterpreter shell, right over here, you
127:25 - can start using it. I mean, you can, you can
use any kind of comment. I can just say help
127:31 - and specific meterpreter will give me specific
commands. So, this is a WordPress website,
127:37 - which is running on PHP. Now. I hope you guys
understand what is PHP, right? PHP is the
127:42 - language which wordpress use. Right? Right.
Yep. So this is only one PHP. Now PHP meterpreter
127:50 - is regarded as the weakest meterpreter that
has got the lowest amount of features. If
127:55 - it was a windows meterpreter, it will get
the maximum features. You can use a lot of
127:59 - things, but here also you can see, you can
run these commands. Okay? So you can PHP,
128:09 - sorry.
128:11 - Wordpress always runs on PHP. So when you're
doing information gathering also you can,
128:18 - you can actually go ahead and check that.
Let me show you how to check that, by the
128:22 - way, I'm going to say background and I'll
show you what, what that means. I'll tell
128:27 - you. Okay. So you can type sessions. You can
type sessions and you press enter and it will
128:34 - tell you, what are these sessions you have
available? You can see the type of the payload
128:39 - is meterpreter PHP, which is running on linux.
Okay. That is how you know it is PHP. The
128:45 - user, the user, which you just had is www
data. It's one of the users, it's basically,
128:51 - you know, the user of web server. This is
the host name. This is the IP address of you.
128:56 - It's my IP port is 4444. This is the IP of
that machine, which we have on this port.
129:02 - We are connecting to that machine. And yeah,
that's pretty much it. I mean, that's how
129:07 - you view your sessions. That's how you can
know that it is a PHP, by the way, it's like
129:12 - experience thing, but still you can check
it if I want to go back to this session. So,
129:17 - you know, I can have multiple sessions at
the same time. That's why it's a framework.
129:20 - I can manage a lot of things to get. If I
want to go back to the session, I will interact
129:25 - with this. I can just type sessions-i interact
and session numbers. So one is the number
129:31 - you can check the id over here, right? I'm
just saying session one. Now, presenter, you're
129:35 - back in session one. And I can always background
it when I don't need it. I want to go back
129:39 - metasploit. I can just say background and
press enter and I'll be back over here. And
129:44 - then now why do we want to go background?
Maybe you want to exploit something else,
129:48 - or maybe you want to use a scanner, an auxiliary,
or maybe you want to use a post exploitation
129:52 - tool. That's why you need to background things.
That that's how it works. So I can again say
129:57 - sessions, -i one. And I'm back into metadata.
Now let me say help.
130:07 - You can see what you can run. You can execute
a command. You can get the UID, which is the
130:12 - user. You can kill a process. You can, you
know, do a lot of stuff here. You can check
130:16 - the processes. You can get a shell, command
shell. So what that means, if I say shell,
130:24 - I just got a shell over here. It may give
you another, that's fine. It's a shell I can.
130:31 - Type if-config. And you can see the IP addresses
10110. My IP is 10109. This is ten. I am right
130:41 - now. I'm controlling the terminal of that
machine. Okay. That is a shell. If it was
130:46 - a windows that will give me a command prompt.
So right now I will have a command prompt
130:50 - instead of a terminal. This is the terminal.
I can have a command prompt if the target
130:54 - is you know, a windows interesting thing here
is this machine is running two network cards,
131:02 - right?
131:03 - Because we said that we know that, but as
a pen tester you can see, this is the IP range,
131:08 - okay? This is the DMZ range, right? We are
in the same range. We also have 10,.0.100
131:13 - IP. There is one more range 10.0.148, right?
That is another range. And there must be machines
131:20 - in that range, but we cannot go in that range.
We cannot even ping if I try to ping. So if
131:27 - I try to say ping 10.0.148.1 Which should
be of course, one is the router. So if I try
131:38 - to ping there and I don't know, why am I getting
the signal? 46, 46? Yeah. 148. Still. It is
131:48 - giving me, yeah, it's not working out. Right.
That's fine. So 148. We are not in that same
131:53 - range. You see, we are not getting any signal,
right?
131:55 - So, but this machine again. So if I give,
give from here, if I tried to say ping, because
132:02 - I'm going to right now controlling that terminal.
If I say 10.0.148.1 you can see, we are getting
132:16 - replies and I can terminate it, so this machine
can ping, but we cannot ping. But that's where
132:23 - pivoting comes in. You know, we can use this
machine at a pivot. We can use it as our gateway
132:27 - internet gateway. We can route our traffic
from this machine to that network. That is
132:33 - a pivoting stuff. We will come on that, but
later right now is not the time for pivoting.
132:38 - Right now it's time for exploitation and you
know, all that stuff and you can come out
132:43 - of meterpreter by the, if you want to close
the connection, you can say exit. And by that
132:48 - you will exit the connection. Connection is
closed. Now you should privacy sessions. You
132:53 - will not have anything. That's how sessions
work. And I'm quite sure with that Metasploit
133:00 - ends. I mean, approximately there, there is
one more module, which I want to show you.
133:07 - That module is multi handler. So if you say
use exploit multi handler. Now, what is a
133:18 - handler info? Listeners
133:20 - Sorry. Yes. To listen to service, right? So
a handler is the part of this framework, which
133:30 - listens for a connection. Okay. When you say
it's a reverse connection, right? Any kind
133:34 - of connection. So that target is trying to
connect to you, but there needs to be someone
133:39 - which will listen to that target, right? That
is trying to connect to a port that port needs
133:43 - to be open. And there needs to be someone
who is listening that is where we are using
133:48 - multi handler. And you can just say, show
options here. Right. You need to, first of
134:04 - all, collect the payload as well. So let me
select a payload.
134:08 - Yes.
134:10 - Oh, sorry. So you need to select a payload
for a multi handler and you can say use payload
134:18 - and then you can tell it, which kind of payload
do you want to listen to? Let's say we want
134:23 - to listen to a PHP based meterpreter. Just
the one in which we will just use few minutes
134:27 - ago, but we are doing it now manually again.
So let's say PHP. Okay. I don't see that.
134:37 - Does anyone knows what's wrong? Why I cannot
get a PHP?
134:46 - Well, any ideas I'm trying to get a PHP payload
here. Not able to select it. Use payload PHP.
134:54 - Oh, now I can do that. I think there was a
space. So use payload. PHP. Let's see. Oh
135:02 - no. Sorry. Can I just set it? Set payload
Yeah. I need to set it. That's that's the
135:08 - problem. So we will set a payload and it will
set a payload PHP. I just press double tab
135:14 - to see what are the availabilities. So let's
say I choose a payload, which is meterpreter.
135:20 - And let's say we choose a stager. So stager
version, meterpreter reverse TCP this one.
135:27 - So I can just copy this. Sorry. Did I ask
you what you say? You said you did double
135:33 - tap. Yeah. So you can always press press the
tab key. You got a tab key, right? Yes. You
135:38 - can always press that tab key two times to
see the availability's.
135:43 - Okay. All alright. And you can press that
once to auto-complete. So one is autocomplete
135:51 - two is check availabilities. There you go.
I just set that payload. Let's clear the screen
135:59 - and now let's see the options and you can
see we've got some options. There are two
136:04 - options in this payload option is L-port and
L host. So what is the listening host, which
136:11 - is your IP who will be listening? What does
the L-port, which is your port on which port
136:17 - you want to listen? Okay. And L-port really
doesn't matters. I suggest, okay. I do suggest
136:22 - always to keep L-port to be 123, anyone knows
what's the reason for using 123, that's an
136:32 - NTP server. Isn't it? Yup. Network time protocol.
136:39 - . So normally what happens in enterprises,
the best practice is to have a local time
136:46 - server. So the best practice is to have a
time server machine itself in enterprise network,
136:52 - but people don't follow best practices. You
see, they will always in their firewall. They
136:57 - will always keep the 123 port open and they
will use publicly available type servers.
137:02 - So that's the problem. 90% of the enterprises
I have ever pentested audited, whatever. They
137:08 - never have their own time servers. They will
just use public time servers, just like Google
137:12 - server or Microsoft service. That's what they
use. You do that port one, two, three is open
137:17 - in the firewall. That's most of the cases
you will find it. That's why we use time server
137:22 - port. Some people use port 80, port 80 because
everyone allows to connect to internet, but
137:30 - that sometimes can be suspicious.
137:32 - So I just, you know, like to use either time
server if it is possible, whenever it is possible,
137:38 - use time server 123 we just said L-host a
L-port. What is L-host? Now you may want to
137:46 - give it a specific interface. So I may want
to tell it that let's see, I got two IP addresses.
137:52 - Listen on this IP address, but the best practice
here, the best way to do it is you've always
137:57 - said L host to 0.0.0.0. This is a wild card.
You're you're telling, accept everything,
138:06 - you know, and anyone who's trying to connect
on any IP, any interface onboard one, two,
138:11 - three, just accepted. Because at the end,
it is multi handler, right, we are expecting
138:14 - a connection on that port. That's why we are
running a multi handler. So we just keep L-host
138:19 - 0.0.0.0. It doesn't matter. It's like a wildcard.
Anything comes, accept it.
138:25 - That's how you do it. Well, this will be your
listener. You're listening to a connection
138:30 - and you can always say run and it will start
running. So You said L-host is all zeros.
138:36 - It doesn't matter. It's a wild card. It's
a wild card. So any, any connection which
138:42 - is coming to you, it will just listen. They
will listen. I got it. Yeah. Now we are listening
138:47 - on port one, two, three. It doesn't matter
who is connecting on which IP they want to
138:51 - connect. So, you know, if we have multiple
network cards, multiple IPS, then it is important
138:57 - to give it, but 0.0.0.0 Works fine because
now we are saying any IP will work as long
139:00 - as it hits. Okay. Now, as long as someone
hits, but the problem is this is a listeners
139:07 - Someone needs to send you a connection and
who's going to send you a connection for that.
139:12 - You need, you need an exploit. That's what
an exploit does. An exploit will exploit the
139:16 - vulnerability, send a payload, execute that
payload, and then even open this handler and,
139:21 - you know, get the connection. But let's say
there will be some cases when you need to
139:24 - do it manually. There may be some cases where
there is no exploit. You have to do it manually.
139:30 - So just to give you a practical example, there
let's say there was no exploit here. Let's
139:35 - say there was no exploit on, you know, on,
on what you were doing. Let's say there is
139:40 - no exploit about WordPress admin shell upload.
Okay. Let's say it's a, it's another CMS.
139:46 - And there is an exploit on, on uploading a
shell. How will you do it? You will do it
139:49 - manually. How to do that. You open the website,
you opened the website and beta.hackerinthehouse.com/listening.
140:01 - And you go, what is the password? The password,
there is the password we can log in there.
140:17 - And now we need to find a way to, you know,
to paste a code here. So we need to give a
140:22 - code on this website. So we need to find a
way, multiple ways are there. You know, you
140:28 - can see there is something called post, or
maybe I'll just go to post let's click on,
140:33 - add new and here I can, you know, give it
a title and an article. Basically. It's like
140:37 - writing article and I can paste some code
here. Right? That's one of the ways there
140:41 - is pages. I can create a new page in this
website and I can paste the code there. There
140:45 - are plugins. I can make plugin so multiple
ways, right? So that is what you can do. But
140:52 - the question is which code, where is the code,
which code relocate that will make this website
140:57 - connect to you. That code is a payload and
you can create payloads. When you use an exploit.
141:04 - When you select the payload in metasploit,
it will do all of the work for you. But again,
141:08 - manual is important because maybe there is
an exploit for that. So you need to do it
141:12 - manually. So that's why you need to create
a payload yourself manually. How do you do
141:17 - that? Open another metasploit framework sorry
open another terminal don't open metasploit
141:22 - framework become root.
141:25 - I'll just go to desktop. There you go. Now
I am on desktop. In Metasploit framework,
141:39 - MSF console that we were using was a console
that is used to, you know, use the framework.
141:45 - There are other modules as well. One of them
is MSF, venom, MSF, venom.
141:49 - Okay.
141:50 - And msf. Venom is the interface which we use
to create payloads. Okay. Let's say -p and
141:58 - here we can create a payload. So we will create
a payload which we just used in this thing.
142:04 - I'll just Cntrl+C just say show options. And
here, this is the payload which we are using.
142:13 - So I'll just copy this and it'll say clear
screen i will paste it here, this is the payload.
142:22 - What we also need is in that payload, you
can enhance it. You can again go. You can
142:28 - see, we have two options. L-Host L-port. So
we need to give them here. We'll say Lport
142:34 - equals one, two, three L-host.
142:38 - Okay.
142:39 - Equals. Now this is the tricky part on this
listener. We are giving listen to any connection.
142:46 - We can say zero, zero, zero, zero. Problem
is over here. Here. We cannot say zero zero,
142:53 - zero, zero. This is the, this is the code.
This will be on the target that target needs
142:59 - our IP address because that target needs to
connect to us. Is that making sense? Right
143:04 - here will be your IP. That is not zero zero,
zero, zero. Yes, because that target needs
143:13 - to know where it has to connect, to check
the IP address. You can easily use if config.
143:19 - I know my IP address on 0.0.100.9 That is
my IP, right? That's pretty much it. You just
143:27 - give it the, the payload name options in that
payload. And now you can tell it a format,
143:33 - which kind of format do you want to use? I
can say dash F for format and there are multiple
143:40 - formats. And now I'm going to do a wrong format.
I will just say PHP, actually the format you
143:46 - want to use the raw raw. I'm just using PHP
just to show you the adder. Okay. And I will
143:52 - output, or let me just do it as it is. I'll
just press enter here. It will give me error,
143:58 - okay. Now wait for the error
144:00 - There you go. Invalid format, PHP doesn't
exist. And these are the formats. So you can
144:09 - create a batch. See, you know, all the different
things. Java perl is there, PowerShell, Python,
144:16 - raw Ruby. These are basically the languages
or the scripts, which you will be making,
144:22 - right? So that is what you have to select.
And here in our case, we want to use a raw
144:29 - What is raw? You know, we don't want to code
it into a language. We don't want to have
144:33 - a Python file because of course, A website
cannot run python right? If a website is not
144:39 - going to run a Python file, it will run a
raw code. We just need that code as it is
144:43 - in our, in our screen. That is what the raw
format is. If I show you what happens when
144:48 - I use raw format, if I just say, I want to
use that raw format, if I press enter there,
144:54 - it will put the whole code on my screen.
145:00 - Now, here you go. So now this is raw cord,
and you can see this will automatically take
145:07 - the format using the payload. It is a PHP.
So the raw code, which I'm getting is in PHB.
145:14 - There's a PHP code. And now I can copy this
and make a file. Or this is basically the
145:19 - code. So I can just copy it here. And I can
go to the website and I can paste it here
145:27 - for, let's say a paste it I maybe I need to
paste. I can like paste it as HTML text here.
145:33 - I can just paste it there. And I can say publish,
right? And that is one of the ways of course,
145:42 - this will not work for WordPress. For many
other CMS, it will work and I will show you
145:47 - why it doesn't work. If you open this link,
you can see WordPress will automatically remove
145:54 - that code due to a security feature. It will
remove the PHP code from there. And if, even
146:00 - if I run that handler, even if I run the handler,
you will not get any connection. I'm running
146:04 - the handler. If I reload this page,
146:09 - You can see, I don't get anything because
WordPress has a security feature that it will
146:13 - remove any kind of PHP script. That's the
problem. But there will be a lot of CMS. There
146:19 - will be a lot of CMS, different, different,
even custom codes files. They will always
146:25 - render the page as it is, you know, at the
end of the code, as it is. That's the problem.
146:30 - That is one of the exploatation, which I can
do the same thing with pages. I know it will
146:34 - not work. One of the things I can do is themes.
You can go to themes, you can go to editor
146:39 - theme editor. Now themes are important because
in themes you have, Oh, sorry. I just pressed
146:46 - back in theme. You can have multiple files.
For example, here in the right side of my
146:54 - screen, I hope you can see that there are
files you know, header.php or different kind
147:00 - of files. One of them is four, zero, four,
very, very common file. Four, zero, four.
147:04 - You can find that and it will be there somewhere.
That's what I'm trying to find. 404. it seems
147:13 - like there is no 404.
147:24 - Do you guys see any 404 there?
147:36 - Yep. That's what I'm going to do now. 2015
should 2015 is not there. Okay. 2016, 2019.
147:43 - Yeah. Let's see. Four, zero four. Is that
right? Yeah. Yeah, this one, four zero four
147:50 - template. Unfortunately four is like a common
one. I mean, you can also use the header file
147:55 - footer file. In this website, I have designed
the website. It is not using the header and
148:00 - footer of the theme. So that's why I'm not
using footer. Normally, no one designs, custom
148:05 - footer so that they can not do it. This is
the, this is the PHP code for four, zero four.
148:10 - Instead of this, I will put my code for four,
zero four, and this is safe. Right. And you
148:18 - see file, edit it successfully. Now your code
is also on the website. You got your code
148:25 - deliver? What's the problem execution. How
do you execute that code? That's another challenge.
148:30 - You need to execute that court in this case,
I may just go ahead and I'm on Google. I mean,
148:36 - I, of course that that is the normal step.
You will do. Just go on Google and search
148:41 - how to open four, zero, four
148:44 - Page on WordPress. Because just to show you,
because if I open normally 404 like this is
148:57 - the thing and I just type anything in, I press
enter it will not be WordPress 404. This is
149:01 - coming from the server. Okay. In this case,
it, this coming from the web server, not from
149:06 - the wordpress that's the problem. I need WordPress
404. I can see 404 template, how to customize,
149:12 - how to open up , how to fix. No one tells
you how to open it. I do remember something
149:20 - like if I just try for 404 , will it work?
And it doesn't work, no idea how to do it.
149:29 - Four, zero four. Let me go in and quickly
check out the 404, I have some notes on my
149:33 - phone. Let me quickly check that. I always,
always create some notes, you know, on your
149:41 - cloud or whatever, whenever you're, you're
doing such kind of tests, because future,
149:45 - it will help just like it is helping right
now. I'm just going to open a file and see
149:49 - that's true. I'm looking at my end as well.
Yep. There you go. U
149:59 - Index.PHP. Question a question, Mark. Error404
index.PHP. First of all, let's try that one
150:14 - You know, we don't want to apply things, which
you know, that works in the index.php question.
150:21 - Mark error = 404. I mean, that's what my note
says. At least let's see XYZ. There you go.
150:32 - Page cannot be found and you can see there
is something, I don't know. It's like a but
150:38 - I'm quite sure it did not work. I mean, if
it would have worked, we would be, it did
150:44 - not work. That's the, that the end note um
why didn't work, I'm quite not sure this is
150:49 - the error page, but maybe what I can try here
is the note which I have is 13, 2015. Okay.
150:57 - Maybe I can just go ahead and change the themes.
So I'm just going to go in as I'm going to
151:02 - change the theme, and maybe I can try with
that option. So themes, I'm going to change
151:07 - it. How will I change it? I will go ahead
and say 2015, add new I'm going to search
151:15 - for anything. And this, this specific web
server is not connected to internet. Of course,
151:21 - it's a virtual machine. So what we can do
is we can upload a theme for that. We need
151:25 - to download it. So I'll say 2015. Oh, I just
remember one thing. Okay. And this is the
151:36 - silliest thing you will, you guys will ever
remember. We edited which theme again, if
151:40 - anyone remember
151:41 - Guys, which theme did we edited? 2019, what?
Which theme we are using at the moment in
151:49 - the website, it has to change. The theme was
2019 because our code is in the 2019. Not
151:55 - in the 2015, isn't it? Yeah, let's try it
now. Okay. Error 404. There you go. We had
152:05 - it. Why we had it. It's not loading. It's
not loading because it's connecting to my
152:08 - system. You can see it is the meterpreter.
Right? Got it. Listening to open. Connection
152:16 - is coming, blah, blah. That's how you hack
it. I can just say exit. Okay. And now that
152:22 - page will load because I connect, remove the
connection. You can see it loaded. This is,
152:26 - this is the part which is in that PHP to show
that, you know, it's in meterpreter In meterpreter
152:32 - shell, you will always have this part. If
you are getting this part, either connection
152:37 - has been died or it did not work.
152:40 - So that's how pretty much you, you do you
know your physical exploit, the machine, you
152:44 - put a code there, you executed any how you
executed them and you get it. One of the options
152:51 - was plgins. So I can create a plugin here.
I mean, I can create a manual plugin. I can
152:58 - upload that plugin. And that should work because
if you see in that, that exploit of the WordPress,
153:05 - that, that exploit which we used earlier that
was creating a plugin description, say it
153:10 - was creating a plugin how to do that. I'm
quite not sure you can go on Google and you
153:14 - can just, you know, search how to hack a website
by creating a plugin and how to hack a WordPress
153:23 - by creating a plugin. There you go. And you
need to learn how to Google. You know, that's
153:30 - like 90% of the time. That's your best friend.
You, you always need to Google. Here you go.
153:35 - Exploit this plugin. I don't know what it
is. Cause you inject your payload inside a
153:42 - legitimate plugin. Can have it run. Yes, you
can do that. Otherwise you can create a plug
153:48 - in yourself. It's like plugin is just a zip
file. You know, it's a zip file with, with
153:53 - two PHP files, index dot PHP and all. And
that's a plug in it.
153:59 - Making sense, like, let me even show you what
is a plugin? Let's say file upload plugin.
154:10 - File upload wordpress manager download this
is, this is one of the plugins I can go on
154:18 - Google and download it manually here. And
I can just say save and where it got downloaded.
154:27 - It is still working. So you can see a plugin
is basically a zip file. Right? I can .zip
154:36 - and let it load. Let's open it.
154:41 - Yeah.
154:42 - And if you open it, you can see in this, there
are basically, it will depend, but basically
154:48 - there are file right there. There is a PHP
file in the name of that plugin. And then
154:51 - there is, there are additional files when
we are creating a plugin for hacking a WordPress,
154:56 - we just create one PHP file that has that
code and we make a zip and we upload. But
155:03 - to do that, there's a specific format. I have
done that in the past and I have always used
155:07 - Google to do that. So you can always find,
you know,uuploading a shell, to WordPress
155:14 - using plugin or something like that and making
WordPress plugin or shell for shell upload.
155:21 - You see, there is a video on that. You can
always go and, and by the way, in LPT exam
155:27 - and in professional pentest in real life,
no one is going to stop you.
155:31 - You can play videos. You can go on Google,
YouTube. You can go ahead and play that in
155:35 - the exam time as well. You can do that. No
one is gonna stop. You can go on Google. You
155:38 - can go on YouTube, watch videos. I did it
when I was giving my exam. I, I went and I
155:44 - don't know how to use open vas. So I have
always used Nessus. And this is a professional
155:50 - tool for scanning. I use nessus in my real
life. The problem was in the exam. They did
155:55 - not give me a nessus. It was a, it was an
open vas. I don't know how to use it. I went
155:59 - to Google. I went to YouTube. Hacker-Sploit
video. I saw that 14 minutes, video views
156:04 - open vas. And I used it. No one's taught me
that you can do whatever you want. No one
156:08 - is going to stop you again.
156:09 - You can sit here and you will see how to make
a heading 2015. I think I did my research
156:22 - from here itself and you know how to hack
a word press. They are using footer footer
156:27 - file. Maybe you can still read that, right?
Yep. They're not giving them about plugin,
156:34 - but that video will tell you how to make a
plugin case you need. Another way will be
156:39 - one more way will be a file manager, plugin,
you download it, you upload it. And it's a
156:45 - file manager. Of course you can upload files
after doing that. Right? If I tried to show
156:49 - you a little file, add new upload. There you
go. Let's set up that plugin, which we downloaded
157:00 - here installed and out maximum size. And the
PHP, our file is bigger than that. So maybe
157:08 - there is a restriction on the website.
157:10 - You cannot install maximum plugins. You know,
you cannot manually install anything on this
157:14 - website. So that is possibility. They will
block you, to install things. Maybe your access
157:18 - will not be there. A PHP environment will
not be there, but in case you were able to
157:21 - install it, it's a file manager. Then you
can just upload whatever you want. It's a
157:26 - file manager. Uthere is one more possibility
which you should check whenever you get initial
157:31 - access. You know, I got the password. What
I should do is I should always go and, you
157:36 - know, check the available themes available
plugins. Maybe there is a possibility maybe
157:42 - there will be a theme. So, you know, when
I go to appearance themes, there will be a
157:47 - theme like 2016 is there and I don't have
any possibility. I go on Google and I say
157:57 - 2016. Wordpress vulnerability
158:01 - I can see if there's a vulnerability in that
theme as well. Maybe there is a vulnerability
158:06 - in that theme, you see WordPress theme directory
shall upload. This seems like there's a plugin.
158:11 - There's a plugin called this theme directory
plugin, which has vulnerability to upload
158:15 - a shell. So there is a possibility you will
find the plugin or a theme, which is pre-installed
158:22 - and that has a vulnerability And then you
can exploit that very, very easily. So maybe
158:27 - let's say this is WAP forms. Like I go on
google and search about this thing. And I
158:32 - get to know that, Oh, there is a there's vulnerability
to upload a file, or there is vulnerability
158:37 - to take any kind of different kind of access
using this plugin. And it is already installed
158:41 - on the system. So I can take advantage of
this. This is your post exploitation. You
158:44 - are doing post exploitation after getting
initial access, which is the password and
158:49 - username. Is that making sense?
158:51 - I mean, if let's say if, if you know our case,
if I go to users and I say, all users, if
158:59 - I say developer, you can see but all of the
developer here, I think you can see that here,
159:05 - you see both of them are admin users. Admin
is also, admin, developer is also admin. That
159:09 - is just a username. But the role that writes
the privileges we have out of admin in case
159:14 - our rights were not of an admin, we've got
an author or we were just a user authenticate
159:21 - user. We cannot, we cannot upload anything.
We cannot install new files. We cannot do
159:25 - anything in that case. We want to see what
is there in the system and can we attack it
159:30 - or not? Make sense?
159:34 - Right. That's how, that's how it, it does
works. Right. So we just attacked the WordPress
159:40 - site. And I think it's quite clear now I will
give you a practical explanation on how to,
159:48 - how to do work. Like if you have a vulnerable
plugin and how to further exploit I'll do
159:52 - that later. Not right now, it's not the right
time because we don't have enough knowledge
159:57 - at the moment because you guys don't have
that, like burp suite is needed. So I'll show
160:03 - that that's pretty much it. I mean, that's
how you create a shell. That's how you use
160:08 - Metasploit. I think I'm quite done with risk
class. You know, I, I know it's still early,
160:14 - but there is nothing else to cover for me.
Like if you guys have any questions, I will
160:18 - be happy to get them.
160:20 - Yeah. So my question was just so we know in
Metasploit they have thousands of modules
160:26 - that are available. What would you,
160:30 - Know,
160:31 - What's the best place to start to know which
one you should be using.
160:35 - Can you give me a situation, like example?
160:40 - Yeah, just say your hack, you're trying to
hack into the hacker in the house, a web server.
160:49 - How would you know which module you're going
to employed for that?
160:55 - You mean as you're asking about exploit?
160:59 - Mmm.
161:00 - No more about the payloads.
161:03 - Okay. So payload, as I said, they are only
two types singles versus stages right now
161:13 - in those singles versus stagers, there are
only selected types, which you have to use.
161:18 - First preference is always Meterpreter. After
that your preference should be shell. Okay.
161:24 - Meterpreter. If that doesn't work. So shell,
these are the only, only two you should be
161:29 - getting available even in the real life. Yeah.
These are the only two which you will be using.
161:35 - Okay. how about all those other modules? Like
PHP?
161:39 - Oh, you mean the architect. Okay. You mean,
this is some type, so, okay. Let's say I am
161:47 - testing a target, which is a windows machine.
Of course. I know that is a windows, right.
161:51 - But let's say it's a website. I can go ahead
and, you know, I need to gather some information,
161:57 - basically. I need, you know, if, if I am on
this website, right. And we all did that,
162:03 - what web and got the technology profile that
clearly says that it's a PHP. So if I just
162:09 - go ahead and say what web and I said, beta.Hacker
in the house, it will clearly tell you that
162:20 - it's a PhP.
162:22 - Okay.
162:23 - You see it's, it's running. It's a PHP. 5.5.9
162:30 - Could you actually jump into the metasploit
and just open up that modules folder?
162:36 - There you go. Oh, okay. And the folder.
162:41 - Oh no. If we go back to multi handler and
just like search PHP
162:53 - Search, I payload. I think that's what you
want to search. Right? PHP. There you go.
162:56 - 21 different payload.
162:58 - Yeah. So my, so my kind of question is how
would you know, I'm like, I want to use PHP
163:06 - bind perl over a PHP, find perl IPv6 or bind.
I, I find underscore PHP.
163:14 - Okay. Okay. Let's take it step by step. First
of all, PHP, you want to sort out of it, meterpreter
163:20 - is your first choice. Shell is your second
choice, right? That is something you already
163:24 - understand that you will use a stage versus
single. That is also very much clear til this
163:30 - point, I think. Yeah. Then it is all about
bind versus reverse majority of time. You
163:36 - want to get a reverse connection because it
is seeing that people will not allow a connection
163:42 - coming in, but they will allow a connection
going out in all the systems in all in this
163:48 - world. If you have a company, you will not
want anyone to connect to you, but you will
163:52 - want to connect to internet. Isn't that right?
Yeah. That's why you always try to use reverse
163:58 - first. If that fails binders is your option.
Okay. You just have preferences, just take
164:04 - simple logic and get the preference.
164:05 - Binding is your second option. If reverse
is failing, there is a possibility where reverse
164:11 - will fail. Reverse will normally fail. My
mean, if someone, you know, firewall is blocking,
164:16 - it's very, very, very, very rare chance that
a firewall will block a reverse versus file,
164:21 - but a reverse may fail when you're using proxy
or pivoting, when you're doing pivoting or
164:26 - proxies, it reverse, normally will fail. And
that wasn't the situation where you will have
164:30 - to use bind. If we were suspending user bind,
if it is not feeling that's good. So it's
164:35 - like, if you're using Meterpreter is the first,
you know, first priority reverse is the first
164:39 - priority. Then it is about PCP or, you know,
or HTTP there, there are multiple in PHP.
164:45 - Of course we don't have a lot of them, but
if it is, let me show you what windows will
164:49 - make more sense.
164:52 - There you go.
164:58 - I'm there are too much, right? And, and this
one, you can see, you got a HTTP, actually,
165:08 - HTTPS, TCP. These are just protocols. So maybe
that website is having a, you know, HTTP protocol
165:16 - open. So you can connect over the port 80
or port 440. If that, it really depends on
165:22 - the firewall of theirs, or they may have TCP
traffic coming in and coming out, they may
165:27 - be blocking UDP traffic. So in that case,
you may not be able to use it. Uthat that's
165:32 - basically the protocol. You just have to test
and try. But TCP is the most reliable because
165:37 - everyone knows that TCP is the most reliable.
UDP is the fastest, okay. Tcps, deniable,
165:43 - UDP is the fastest, but we, we want rei;ability.
We don't want our, you know, exploit to work.
165:50 - They get the access and then suddenly just
loses the connection. We don't want to lose
165:55 - any connection. That's why we use TCP as the
best option. If TCP doesn't work as HTTP is
166:00 - or HTTPs is your, is your best option. That's,
that's basically the priority order. And it
166:05 - just comes with the experience. You now, you
know, it, you got the experience now, you
166:09 - know that TCP is the best option. Yeah. That
makes sense. Yep. Any other questions?
166:15 - Guys?
166:16 - No, that's not good. When you're creating
your payloads, always save them. Okay. You
166:27 - don't want to lose your payloads for a specific
test. So always save them and to save a payload,
166:34 - this, this angular bracket and give it a location.
So I always like to save them like on desktop,
166:39 - you can create a folder if you want for the
project, but I can just say you know shell
166:45 - dot PHP and that's how it works. And that
will make a PHP file which will contain my
166:52 - payload and always save them because it comes
handy very, very handy to reuse them as it's
166:58 - a good practice. If one is working on one
system, most probably it will work on all
167:03 - the systems, you know, because they are identical.
And now you can always for example, a lot
167:09 - of people say that, how do I know? What is
the IP and port? This, this payload is using
167:14 - very simple you just go ahead and check the
code. So you're going just say, just go ahead
167:21 - and check the code here. And then you will
see IP addresses this or port is this. So
167:30 - there are two variables and you can always
change this. You know, you don't need to generate
167:33 - it again. And again, you can just take the
payload as it is, just change the IP here
167:37 - and port here. So that's a quick tip.
167:41 - Well, with that the sorry!, I'm sorry, I'm
going to say, I noticed you taken a payload
167:50 - You didn't code it. Right? I did. This will
be, this will be a good stage if you were
167:55 - dealing with inspires to encode it. Okay.
Right. So let me show that in case I want
168:07 - to deal with antiviruses. I can always use
encoders. It's very easy. You can just say
168:13 - msf-venom so you can encode them after making
the code or you can, but then you will use
168:18 - another tool. Metasploit cannot do that. I'm
quite sure it cannot do that. Otherwise you
168:23 - can just say PHP Meterpreter I'm just giving
an example here. PHP Meterpreter. Reverse.
168:34 - TCP right. L-Host, let's say a 10.0.100.9,
L-host 123 -f role. So I'm going to show you
168:50 - side by side. This is the first terminal split
this terminal. Can I split this terminal or
168:57 - terminal or horizontally? Yep. So this is
the first code without encoding. And then
169:03 - I can actually take this as it is and I can
paste it here.
169:15 - And I can hear by it before giving the format,
I can say -e encoder. And then I can tell
169:20 - the encoder name. You can of course, go on
Google and find the encoders. Otherwise you
169:24 - can say MSF venom - list space encoders. It'll
give you the encoders. Metasploit . The best
169:33 - one out there. Yes, but I don't know how to
spell it. That's why I'm taking it. Oh, and
169:43 - it is. I think something like that. There
you go. These are the payloads. Let's say
169:50 - sikatakanai. Is that one? Yeah. Here it is.
Why is the best one? Do you know the reason.
169:58 - No idea. Okay. It is best because it is a
polymorphic encoder. There is a difference
170:04 - between a polymorphic versus a non polymorphic.
What is it? So just to show you, if I paste
170:12 - it here and I will show you what the difference
and I would just press enter now and I'll
170:18 - tell you, what's the difference side by side.
Okay. Now, can you see this, this code versus
170:26 - this code? The first one is PHP. The second
one, you cannot tell what it is, isn't it?
170:34 - Yeah. You can never tell it's a PHP payload
because it's encoded now why other encoders,
170:42 - you know, are not that good as shikata ga
nai, why shikata ga nai is a polymorphic?
170:46 - And it is the best, because if you use any
other encoders, which is not a polymorphic
170:52 - that will use an algorithm, you know, that
will, for example, a alphanumeric encoder
170:56 - but it will do, it will change your letters,
to numbers. Okay. Like PHP, it becomes something
171:03 - like three, four, three. Okay. But everyone
knows that it is changing P to three. That,
171:08 - that is a fixed algorithm in a polymorphic.
There is, there is a randomization. It, every
171:13 - time you create a code, it will be different.
If I try to do this again, this score will
171:19 - be exactly different. It will be absolutely
different. If, if I tried to do it again,
171:25 - I will just do it in the upper hand side.
There you go, though. We cannot read it. So
171:35 - maybe we not, we will not be able to have
the difference, but let's see still. Let's
171:38 - see. There you go. Yep. You can clearly see
the difference question Mark. Question Mark.
171:44 - Question Mark. Something like that. And here,
question Mark. Z question, Mark, can you see
171:48 - the code is completely different?
171:53 - Of course we cannot read it, but pattern you
can see pattern is not even the same, right?
171:58 - So that's the polymorphic. It's always changing
the code whenever it is encode polymorphic.
172:05 - And that's why shikata ga nai the best, because
there is no pattern in shikata ga nai.
172:12 - And do you know why it's running a 32 bit
architecture as opposed to like an X 64,
172:21 - Shikata ga nai 32 architecture. For for the
x64 we have some payload encoders one of them
172:28 - is xor. So I think they don't have a list
here. Let me check. Nope. They don't have
172:34 - a list here. You can actually check the list
of using this MSF venom-h. Let's see the l.
172:43 - We want to list, list the things. So list
this one space type and type is and called
172:52 - encode etc etc. So have list -L right? So
MSF, venom that's L and then iencoders
173:02 - One, two, three. There you go. So these are
the 86 32 bits and these are probably, yeah,
173:14 - these are independent. They, they don't really
care. And these are 64. These are only two
173:21 - which are x,actually four, which are X 64
earlier. There were two, they might have added
173:26 - it. I don't remember when this has been added,
but you can either sort it again. The other
173:32 - form of xor. So what is xor, I think you guys
have attended a seminar or a class on Gates,
173:39 - you know, electricity, Gates, Xor, and exor,
those companies. UXor is basically the, you
173:45 - know, bites and zero, to one one, to zero.
That kind of thing. So this, these are the
173:50 - only four encoders available in 64 bit environments
And these are the 86 bit environments 32 bit.
173:57 - So you just have to choose accordingly.
174:03 - So we got three machines today. First is the
pen testing machine. The second is the beta
174:08 - server. And the third machine is windows xp
machine. Just to sum up with the IP addresses,
174:17 - you can see our beta server has two IP addresses.
One is in the range of hundred and one is
174:23 - in the range of 148, right? So dual network
cards and windows XP is also in the range
174:28 - of 148. And our pen testing machine is in
the range of hundred. So I hope that's much
174:34 - more clear. Pentester is in hundred windows
XP. Is in 148. We are in different ranges,
174:40 - but this machine is in both of the ranges.
So this is the common platform using which
174:45 - we will route ourselves to the next network.
Umhat makes sense. Yep. All right, let's go
174:52 - full screen. Let's login. Okay.
175:12 - There you go. We'll open metasploit very quickly.
We will hack the first machine we have everything
175:21 - set up. That's let's become root Okay. Give
me one second.
175:36 - Okay.
175:38 - Oh, it works. So we are in the range, a hundred
let's very, very quickly attack the hacker
175:48 - beta beta server. Right? So beta.hackerinthehouse.com
I hope it's working. It's working well,i just
175:58 - open msf console and let metasploit load here.
This is the password and username for the
176:07 - website. There you go. Let's clear this screen
views exploit webapp. Nope. I don't know.
176:23 - Let's let's search it. Search admin_shell.
If I'm wrong, there you go. Is it! And we
176:38 - have covered all of this in the last lecture.
I'm quite sure, right?
176:44 - Mmm Yes.
176:47 - Yeah.
176:48 - Yep. So options There you go set.
176:55 - That's where a password is this
177:03 - Copy paste, enter user name developer set
R-host , beta.hackerinthehouse.com,
177:13 - Let's clear the screen. I think everything
is all set.
177:19 - Yep.
177:20 - Run the exploit. There you go. And we got
our shell open. So this one which we have
177:33 - got is our first meterpreter shell. And I'm
going to background it Cntrl+z enter to a
177:38 - control+z that to background, or you can type
background there.
177:44 - Okay. Now let's see sessions.
177:48 - So you can see, we have one session here,
which is session number one coming from WW
177:55 - data from this host. And this is a Meterpreter
shell PHP based, running on Linux. And here,
178:06 - this is my IP address. Okay. Dot nine is me.
I am connecting from port four, four, four,
178:13 - four. Basically. I'm listening on four, four,
four, four on this IP, which is the server
178:19 - on this port. So it's a random port over there.
Now that's the whole scenario, but let's go
178:24 - ahead and interact with the session. So I'll
say clear sessions, dash I for interact. And
178:32 - I will interact with session number one.
178:35 - And if I say shell here,
178:38 - I get the terminal of that web server. Right?
So that webserver now i can control it. If
178:43 - I do, I if-config,
178:48 - I can see by doing an IF config, we can very
well, see there are two network cards. This
178:55 - is the first card using which we are hacking
it, but this is another network card. And
179:01 - if there is another network card, of course
there is a whole network. There, there will
179:04 - be other machines. And that's very normal
just to give you a practical insights. Normally
179:10 - let's, let's see you have the smart TV. Okay.
There was a smart TV, which was having a,
179:16 - you know, all kinds of networks or all TVs
and, and, you know, similar, similar devices
179:22 - basically, but connected with a networks.
So your smart lights, smart bulbs, smart TVs,
179:27 - all of these smart devices were connected
with one network in your company and you have
179:32 - one of them. And you found out that they also
are connected with another network range.
179:37 - So you pivot using that TV to another range
and then attack those devices. That's one
179:42 - of the examples of routing. So, you know,
you just need to find multiple network cards.
179:47 - As soon as you get multiple Metro cards, you
start attacking them. That's, that's basically
179:51 - the, the thing now here. I do, it says fine.
Let me close it.
180:00 - So let's say we know that there is another
network card right. Now. Let me just copy
180:04 - this very quickly. This range copy. And let's
get out of this. I'll just say exit here and
180:11 - do not exit the meterpreter I just exited
the shell, but never exit meterpreter. If
180:16 - you do that connection will die. So all this
background it background the session, let's
180:21 - clear the screen, and now we will use a post
exploitation tool, which will be a string
180:27 - sweep, because we want to know how many other
machines are there in that network. That second
180:33 - NetworkCard, how many machines are there in
that network? That's what we want to know.
180:36 - So I can just say search ping sweep. And there
is a post exploitation tool, post multi gather
180:46 - from ping sweep, right? That's the, that's
the tool. Go ahead and check it. So you post
180:52 - multi
180:53 - Gather ping sweep. There you go. Let's see
the options. So show options.
181:08 - And I can see we have R-hosts and session.
Why does it need sessions? Because this will
181:15 - automatically take this session and automatically
route us. So, you know, we don't have to set
181:20 - a route. It will automatically help us using
that machine to that network. So if btw, if
181:26 - I just tried to show you, then you have,
181:28 - There you go,
181:30 - Right. If I tried to ping 
a machine, now, this is the IP address of
181:39 - that machine. Let's say I try to ping one,
right? . One. This should be the router. You
181:45 - all know that, right? This should be the route.
Dot one is always the router Right, right.
181:50 - If I tried to ping it, it should work. I mean,
if I was in the network, but you can see,
181:54 - I am not in the network. And just say, it's
time to live exceeded. It's not going to work
182:00 - because I'm on the network. Okay. That's that's,
that's the thing. However, this module can
182:07 - ping it. So this module will use this session,
which we have just have that we have caught,
182:12 - that session will be used to set it out. And
this module will do us do that work for us.
182:17 - And this will automatically thing. All the
devices R-hosts.
182:20 - We can set R-host here and for R-host am going
to set the whole range. So I will remove this
182:26 - .slash 24, because it say 24 network. We'll
just give it the whole name. You want to search
182:32 - the whole range. You can actually give it
like this as well. So dot.zero two dot let's
182:38 - say a hundred. So it will take all the IPs
dot zero to dot 24. I hope that's very, very
182:49 - normal. Everyone knows about how IP addresses
works. Even if you have any doubt, anytime,
182:54 - just let me know set sessions. Sorry session
and session number. You just have to give
183:01 - a session. Number of our session. Number is
one. There you go. Let's go ahead and Run
183:07 - it. Now, can you see, we are getting hosts
here and we cannot ping these hosts, but this
183:14 - module is pinging the host right now. What
it is doing is as just going there, ping the
183:19 - host, checking if it is getting a reply, if
it is getting a reply, is it showing us on
183:23 - this screen? That's what it is right now doing.
183:27 - Mmm. Yeah, it does. But what could we have
just think the sub-net while the meterpreter
183:35 - session. I mean, while we have an meterpreter
session going while we're inside that meterpreter
183:42 - session, there's no command that we can use
to ping
183:45 - Directly from that machine. Right? So what
you're trying to say is we have a Meterpreter
183:50 - session. We can open a shell and then ping
it from that machine. Right? Exactly. You
183:56 - can do that. It's not a problem. That's one
of the approaches. But think about it. How
184:01 - will you use a tool? Let's say you want to
scan for ports. How will you do that? Using
184:05 - that machine? You will have to install something
in that machine, right? And in pentesting,
184:11 - normally you're not allowed to, you know,
change things and install things on their
184:15 - machines. They got companies. You cannot just
install tools on their machines. Makes sense.
184:20 - Makes sense. And think about it in this way.
Now we know it's a Linux right now. Just think
184:25 - about it. It was a router, or it was a smart
TV. How will you install n map or something
184:30 - on a smart TV,
184:33 - Right? There are ways sagar ways, but you're
right. I see what you're saying. I hear you.
184:39 - Right? Right. I mean, so yeah, still let's
say you can install an app or something, but
184:43 - then the thing about bigger things, you know,
you need more memory, you need more power,
184:48 - you need more processing. All of that is not
available on those machines. You cannot do
184:55 - that because your scope will not allow it.
So anyways, we found these machines it was
185:01 - basically pinging from one, two, three, four.
It was continuously pinging for us. And now
185:06 - we do have all these machines and we know
that the default is windows XP machine. I
185:11 - just show you there. Right. So let's go behind
it. .111 Is basically the same machine from
185:18 - which we are getting the session. So it's
that same machine. Can you hear me? Yes, sir.
185:25 - Alright. I just had some problems there. Alright.
So let's, let's go ahead for this machine.84.
185:33 - I just copied this selection and we will clear
the screen now. I mean, this module can do
185:40 - that, right. This model cannot rout, but what
if I want to do something manually? What if
185:45 - I want to run an exploit exploits, don't have
this option that we can give them sessions
185:50 - and, and these exploits can run automatically.
We need to set a manual route. How do you
185:56 - do that? There are two ways you can do that.
Either inside meterpreter, or you can do that
186:01 - outside of the meterpreter. Okay. It's basically
the same thing. It's going to set up the same
186:05 - route, but how do you do that? I'm just showing
for example right now I can just say run,
186:12 - sorry. I can just say add route add. So I'm
trying to add a rout. And now here, and let's
186:20 - actually check the sytax.
186:21 - I don't remember the, syntax too much. There
you go. Route out. Add or remove. You can
186:26 - remove as well, then sub-net then net mask.
And then the, basically the you know, it's
186:32 - basically going to be the channel or the ID
or the session ID, basically. That's what
186:36 - it is. So that all work. So route add this
is our sub-net dot zero and you go and net
186:45 - mask two, five, five dot two, five, five,
two, five, five.zero. And you can take it
186:49 - by going into the machine itself and typing
IF-config. And such a number session is one
186:56 - press enter. Route has been added. Let's try
to print it. So print route sorry route print.
187:07 - And here you go. Now this is your routing
table. So you are routing all of your network
187:14 - from this machine, okay? From session one,
basically to this sub-net on this netmask.
187:22 - So this session one is now your gateway, right?
You're you're routing everything in that machine.
187:26 - That's what you're doing here. Session is,
is, is what you're trying to do. And you're
187:30 - trying to reach this. Sub-Net on this net
mask by this session. That's what you're doing.
187:35 - That's how you add it out. You never add the
IP address of the machine in which you are
187:40 - as well. You always are the destination, the
sub net. Very, you want to reach which, which
187:46 - you're not. I that's, that's the destination
subnet. That's what you add here. And once
187:52 - you have added it, I mean, it's going to be
quite simple. Now you can basically run any
187:56 - exploit. You can run any scanner. It will
always go through this route. So it's quite
188:01 - simple. Now, if I try to show you, if you
just go ahead and say and If run a scanner,
188:09 - let's say let's search for a scanner. So search
scanner.
188:17 - And we got a lot of them. Okay, let's go ahead
and check. So we got like SMTP scanners, blah,
188:23 - blah, blah, different kind of scanners, SMB
scanners. I'm trying to find a PCP scanner.
188:30 - Basically. There you go. Port scanner, app,
scanner, FTP, SIN scanner, PCP scanner, Xmax
188:37 - scanner. So all these scans we're doing n
map, they're already here, X, max, TCP, and
188:42 - act. Let's go with TCP, which is the most
reliable in routing. So I have tried sin scanner
188:49 - earlier sin scanner, normally we'll give you
problems and here's the thing you need to
188:57 - understand. See? Why do we use sin scanner?
Anyone, I mean sin versus TCP. What's why
189:03 - do we use them?
189:05 - Well, Sin is half open. You usually use it
for dos attacks. And it's, but it's more detectable.
189:12 - Why is it undetectable? Well, sin scan is
more detectable because it leaves open connection,
189:19 - half open connections versus TCP scan, which
completes that three way handshake. I'm giving
189:28 - you a CAS response. I know.
189:30 - Yeah. I think it's wrong. Okay. Let me explain
that. Please send us less and less detectable.
189:39 - Yep. Yep. And let me explain why, and then
wait, I'm not tripping. Okay. No worries.
189:47 - So that said, this is our target and this
is me. Okay. So in the first shot, we always
190:00 - send a sin there. Okay. And let's say, this
is our sin. This will reply back with, and
190:08 - I know how hard it is. I'm not having my pen
today. Sin act and we will reply with act
190:14 - and the connection will be established. Okay.
That's how the TCP handshake works. Now, this
190:22 - is what happens in a full TCP connect scan.
That is a TCP scan in that sin scanner. Basically,
190:29 - we saw that, how do we know that the port
is open or the close? So this is how we know
190:34 - how report is open or closed.
190:36 - Then we are sending the first stage and you're
sending this sin right when we're sending
190:43 - sin. And we get a response such as a reset,
or we don't get a response. That probably
190:50 - means that the port is closed. If we get a
sin act, that means the port is open. Okay.
190:56 - If we got a reset, if we get to you know,
RST, or we don't get a response at all, that
191:02 - means the port is closed, or there is a firewall,
something like that. The port is basically
191:06 - not open. That's the response. If they're
getting us a sin act, it means the port is
191:11 - open. Now we came up with this concept that,
you know, what happens if we just keep on
191:16 - sending sin, okay. We just, we just send sin
on port number one. Then we send sin on port
191:21 - number two, port number three, port number
four. Now let's say port number two and three
191:25 - replies bits in act port number one, doesn't
reply, port number four. Doesn't replies.
191:30 - It simply means that yeah, port number two
and three is open four and one is not open.
191:35 - That's basically the, the automatic response
that we know that, right? So why do we even
191:40 - need to send this act? Why shall we send us
act? There is no reason of sending this act.
191:45 - This is, this helps us in two things first.
191:49 - Yep. So first we are saving bandwidth. You
know, that maybe there is a network, which
191:56 - is not that, not that heavy, you know, it
can be a sensitive link. They're saving bandwidth
192:01 - there. That's the first thing. Second, is
that any firewall, any ideas, any IPS, they
192:08 - will only know that you are scanning something.
Then this app is sent, okay, until the connection
192:14 - is established a firewall or IDs IPS, it will
not be logged. Basically the connection is
192:20 - never logged. If it is not completed, that's
the, that's the thing where if you're not
192:25 - even completing the connection, it will not
be logged in, in any firewall. It will not
192:29 - be logged in any backend server. It will not
be logged anywhere. And no one can just read
192:34 - the logs and tell so that that's the whole
purpose of a sin scan that it will not be
192:39 - logged.
192:40 - And no one can tell that you are doing something
fishy. However, with latest technologies,
192:45 - anyone, if you talk about SIEM solutions Sor
solutions, they have started to monitor the
192:51 - sin package as well. So when they see that,
all right, sin packets are coming continuously,
192:56 - sin packets are coming from someone. They
will understand that that it support scan
193:00 - and they will block you. So it's quite useless
these days. I mean, seven PCP doesn't really
193:06 - matter. Both are quite same. The advantage
of SIM SIM in these days is it will save bandwidth
193:12 - on a low, you know, low profile network. If
the network is not capable of handling a lot
193:16 - of traffic sin as the best option there it's
not too much reliable by the way. I mean,
193:21 - if in a, you know, I mean, it's, it's, there,
there can be some firewalls. There can be
193:27 - some systems which may block the sin act.
193:31 - You know, even if, even if it is open, they
may block it. So it's not too much reliable.
193:35 - Packets may go left in, in the middle. So
it's not too much reliable, but it's a good
193:41 - one to give it a shot. So that's what we tried
to do. It's a good shot basically to save
193:46 - bandwidth. That's the only, only trick it
used to be undetectable these days, advanced
193:51 - technologies. It's not detectable, but it's
a good shot. That's the whole thing. But in
193:56 - our case, when we are doing port forwarding,
and if we're port forwarding, we, you know,
194:02 - sorry for routing. We are normally always
using the Meterpreter. Now with Meterpreter,
194:07 - you need to understand a big E okay. There
is a big E what is this big E it's encryption
194:13 - meterpreter sessions are encrypted. They cannot
be decrypted. They cannot be seen by firewalls.
194:19 - Firewalls don't know what's going on for them.
It's just a encrypted connection. They don't
194:23 - know if a port scan is running. They don't
know what's going on. So they don't know if
194:27 - you're sending a payload. So it's quite undetectable
when you are doing a port scan in pivoting
194:33 - and routing, it's quite unpredictable there.
So then it doesn't matter. As you can always
194:38 - go ahead and use a PCB scan. It's more reliable.
And in port forwarding and routing, you are
194:43 - always looking for reliable is always try
things which are reliable because sessions,
194:47 - they will die. They die very, very easily.
And the reason you always try to get the reliable
194:54 - things, let me clear this screen. We will
use an auxiliary, which is a scanner, which
194:59 - is into, or I forgot, which is into port scan.
Yup, yup. TCP. That's what we're going to
195:06 - use.
195:07 - Sin scanner, again, it's not too reliable.
That's why we're not using it. It may A session
195:11 - may die show options. So that makes sense,
right? I know it's now clear why sin is better
195:19 - and why they're not using it still. Right?
It does. Thank you said R-hosts, come on,
195:27 - here you go. So if we are going to set R-host,
then we will set only one specific IP because
195:34 - we are targeting it. And now here there is
something more than you can note you can always
195:40 - select the ports. And I never recommend, you
know, searching for, there are some 65,600.
195:47 - I never remember that number or let's Google
it, but whatever the ports are 600,000 never
195:54 - you know, scan all the ports in one shot,
always go in you know, sections. So maybe
196:00 - first a hundred ports, then first 200, a hundred
to 200, then 200 to 300.
196:06 - So go slowly, just don't push it like 10,000
port in one shot. It's gonna break the connection.
196:11 - You will lose the route. So you just say it
set ports. And let's say, we keep it a hundred
196:17 - to 500. So just give it small, small ranges,
divided it into project. It's a project. Now
196:22 - we are dividing it in small things. That's
first thing we just said, R-hosts. We said,
196:28 - ports here now threats. So people will go
with five threads, 10 threads. What thread
196:34 - means, how many ports it will scan at the
same time. So maybe it will send tens sin
196:40 - package one, two, three, four, five, six,
seven, eight, nine, 10. You know, all those
196:43 - ports. It sends a send sin package to all
of them in one shot. And then from 10 to 20,
196:48 - then from 20 to 30, again, I never recommend
this.
196:52 - I mean, until, until you know that the network
is stable, a company has already told you
196:58 - that your network is stable. And, and this
is kind of like if it is a gray box test where
197:03 - you can call them and tell them that, Hey,
I need you to restart this machine, blah,
197:08 - blah, blah, things take your risk. I never
recommend going more than one because it really
197:13 - doesn't take that much time. So this go with
one thread, it'll take like extra five minutes,
197:18 - but it's worth it. A timeout thousand is fine.
A timeout is basically when it will stop this
197:24 - scan. If it is not getting into this month
delay, you can add a delay. If the network
197:29 - is sensitive, as I said, concurrency, it's
basically again, how many ports to check.
197:36 - So basically, you know, thread versus versus
a thread versus concurrency, basically it's
197:45 - quite same.
197:46 - Here it is. Port here. It is host the same
concept. Basically it is machines. It is ports.
197:50 - So the same thing. Ten is, is fine. You can
keep it on one actually. So one is the most
197:56 - reliable. I'm just going with 10 because I
know my machine is stable. My network is stable.
198:00 - You can kind of go with least, just always
go with least show options. If I do that again,
198:06 - you can see concurrencies, 10 at a 001 to
500 ports. We are going to scan. And this
198:12 - is the IP thread is one. Timeout is thousands.
Let's run it. And there you go. We started
198:20 - getting ports. So we just got three open ports
and you see it doesn't make really much too
198:25 - much time because we are at the end. We are
in the internal network and interna; networks
198:30 - are always fast, right?
198:34 - That's fine. So at 135 is open 135 is open.
139 is open 445 is open, which are basically
198:39 - the SMB ports. Let's still go further. You
know, just to show you, if you go ahead and
198:45 - set the ports this time from 500-1000, so
this is what you will normally do. Maybe you
198:54 - can just keep it in, you know, a thousand
thousand ranges. So 1000-, 2000 and 2000 to
199:00 - 3000, you can do it in that range normally.
So I'm quite sure we will not get any result
199:07 - here. You can see no result found, there are
only these three ports open on this machine.
199:12 - And I know that because I know it's a windows
XP and I have made this machine normally in
199:17 - a test, you will go from zero to 65,000, whatever
you will do all of them because there can
199:23 - be services.
199:24 - There can be services running on, you know,
non-common ports. They can be servers running
199:29 - on port 5,000. Maybe someone has configured
that there can be web server running on port
199:34 - 20,000, something like that. So it's, it's
even possible companies. They do this kind
199:40 - of work, their internal portals. They're always
on random ports. So it's a good, you know,
199:45 - a good way to always scan all the ports. Okay.
Just always scan all the ports right now.
199:50 - We are just leaving it with thousand ports
because we know that there is no other open
199:54 - port but you know, you got 135 and 139, 445
right now. What next, anyone scanning part
200:04 - is done? What's the next step in the methodology?
200:07 - Vulnerability Nope, it's a Integration, right?
We going to integrate. So we just know that,
200:16 - yeah, we got a port B, we have scanned it.
But what, we also know that 445 is SMB. I
200:21 - mean, that's common sense, but what can we
get using the port 445? What can we get using
200:27 - this SMB? We'll start enumeration. And I have
seen people. They try to do it manually. I
200:32 - mean, if you are using a framework, you're
doing a professional test. Why will you do
200:36 - it manually? Even when there are tools for
you, you have paid for the framework to that.
200:41 - So let's go ahead and search for a scanner.
So I will just say search SMB. That's what
200:48 - I'm trying to find. There you go. And we got
a lot of them. Let me increase the size. And
200:58 - now you can see, these are exploits.
201:00 - These are auxiliaries, and we are always interested
in auxiliaries. This is my SQL. Nope, here
201:06 - SMB is starting. So now you can, you can scan
from multiple things. You can scan for one,
201:13 - vulnerabilities here. These are all vulnerabilities
SMB. So MS09, blah, blah, blah. But what I'm
201:19 - trying to find is an enumeration tool. So
just see if there is some SMB you know something
201:24 - like that. SMB, SMB, enumeration, those kind
of things you will find. And I can see there
201:30 - is SMB one SMB SMB genome SMB one shares.
So it is starting. The list is starting right
201:38 - over here, List starting right away. And we
got some cool ones, right? So the first thing
201:46 - which I want to detect is I I'm we know that
there is SMB on port 445, but which version
201:52 - we have not even done version detection, right?
Because it's not n map. It's TCP scanner of
201:57 - metasploit which is not n map. And that was
the best tool, but we are not using n map.
202:01 - So for Version detection, I'm going to use
this one. So I need to know if it is version
202:06 - one or it is. Version two. After that, we
can go ahead and try something like, you know,
202:11 - users you know shares, you know, domain, those
kinds of things. Let's let's start it. Let
202:17 - me just go ahead and quickly use this SMTP
one obligue.
202:23 - Yeah.
202:27 - So use SMTP one scanner show options. Okay,
here we go. Now I'm set R-hosts. It was 10.0.148.84.
202:45 - If I'm not from that was a run.
202:50 - Yeah. That was the IP. I gotta scroll back
up. Yeah. 148., 84. That is correct. Right.
202:59 - Let's run it. And it completed. And you can
see this host support SMB. We want that's
203:07 - cool. It is supporting SMTP one because it's
window activity. We know that it's going to
203:13 - support, but still we get to know that they're
supporting it now what? Now we can go ahead
203:17 - and maybe search for SMTP twsmto yeah. And
you can go ahead and search SMBP too. So just
203:25 - testing, the next version, basically show
options and just clear the screen and run
203:33 - it you can see this time. It doesn't give
me any output. You see it just saying scan
203:39 - completed? It's not giving me any output.
Now that's very common with auxiliaries. They
203:44 - will not give you the output if it was not
successful. Okay. That's, that's one thing
203:47 - to note. If you're not getting anything it's
not successful or your auxiliary was not in
203:52 - a properly set up, you're not tune, it got
completed.
203:56 - It's running, but either it is not tune or
it is not successful, but you always check
204:00 - the options once. You know, and when you check
the options, you can see, yes, it is properly
204:08 - tuned. It means it's not there. SMTP 2 is
not there. Now why SMTP,2 is not there in
204:13 - windows XP. I think it was not even created
at that time. So it came with windows seven.
204:18 - I think when windows seven was released, they
came up with SMTP tool and we went, there
204:23 - was no SMTP two. So that's why we don't have
it, which is normal. Well, now you got it
204:29 - right now. You got that. We have SMTP one.
What? Next? Let's try SMTP enumeration. So
204:35 - how do you do that? Again, a search SMB. Here
you go. We got enumeration users, domains.
204:45 - Let's go with users. That should be fine.
Let's go with users. So use yes, FME users.
204:58 - So options. There you go. We need R-host.
We need SMB password user. These are not needed
205:05 - required are not. You can give it, if you
want in a white hack box test, a white box
205:10 - test study, we are doing a black box. Really
doesn't matter. We just need R-hosts. So set
205:16 - R-Hosts better than that. Command here. There
you go. We have the, R-host. Let's go ahead
205:28 - and run it.
205:31 - Okay.
205:32 - Doesn't see any output again. Does it mean
there is no user? No, there must be user,
205:37 - but it's not, you know, it might be secure
enough that it's not giving us which users
205:44 - it is getting that point. Yeah. Okay. Let's
see if we have any other SMB tools. So search
205:54 - SMB again. I'm just going to go ahead and
do it. Let's see what we have here, SMB.
206:04 - Yes. SMB one, the two and shares. Maybe we
will go with this. Semi version. Okay. What
206:17 - will this, this is version detection again.
I mean the same thing, which we did manually.
206:22 - Maybe this may give us more than information.
Let's try it. It doesn't really hurt. I SMB
206:28 - version is there SMB login? So let's try these
three. After that, we'll see what we can do.
206:33 - But I mean, once we know that there is SMB
1, we can always try to find, you know, exploits.
206:40 - And everyone knows that eternal blue is going
to affect SMB 1 as well as, as SMB 2 so eternal
206:48 - blue is the one which we should be using.
It's quite common sense if you are in pen
206:53 - testing. So I'm just using it. So options
set R-host and run it. This is SMB version.
207:05 - And if you go, we got the version hosted running
windows, XP SP3 language.
207:10 - Language is English. The, the name is the
name of the machine basically, is this work
207:18 - group is hackerinthehouse? Signature optional.
That's fine. So we got, we got a lot of information
207:24 - here. It's windows, XP, special pack 3, or
the service factory and language is English.
207:29 - Why is it giving us language? And why do we
need, there will be some exploits where you
207:34 - have to specify the language as well. There
are some exploits I have seen them in past.
207:39 - You have to give the service pack version,
then you even have to give the language pack.
207:44 - And normally it is, you know, with the case
of servers, there is a web server, maybe windows
207:50 - server, 2008, windows server, 2013. Those
kinds of things you need manage packs. Normally
207:56 - that's, that's a good thing. You can get different
here. Okay. Windows XPS, special factory.
208:00 - What do we do? We go ahead and search windows
XP. So let's say a type exploit . I wanted
208:09 - to search the exploit and let's say XP. Okay.
Press enter. Oh, there are hell lot of exploits.
208:19 - And these are not for XP. These are, mix,
but they have XP in there. You know, they
208:25 - are like XP there in common. So that's the
problem. That's why they're getting it. Okay.
208:33 - Uthe first one you can very well see here,
Microsoft server service related,upart stack
208:41 - corruption. This is a very, very common one.
And guys just remember this. It was specifically
208:47 - made for windows XP and earlier I think it
even works in windows seven, not too sure,
208:52 - but still this zero eight, zero six seven
net API. Remember this, maybe take a note,
209:00 - you know, MS08 67 net API, very common. Everyone
uses it whenever they find a web server, which
209:07 - is like all the web server is going to affect
them.
209:11 - So I'm just going to use it. We can use eternal
blue, by the way, you know, that was recently
209:16 - released. You can always use eternal blue
that's of course, definitely going to hack
209:20 - it, but let's try another exploit. I just
randomly brought it. Now I'm just trying it.
209:25 - So you can just say, use this and it'll say
info because I don't know how, what to do
209:31 - or how it works. So these are all the targets
you see, windows 2003 then you can actually
209:38 - hack windows server here, XP all of those.
Are there XP windows 2000, is there a XP special
209:45 - pack two? See now language is coming there.
So if it is not English, maybe you will have
209:50 - a problem in our case. Yes, it is English.
And I think this one is basically our target
209:57 - English special factory.
Anyways, let's try this. Let's try this special
210:03 - pack one. Is there yeah, windows server basically.
So I'm just gonna try it. We have check option
210:10 - so you can check the exploit before running
R- hosts. You can specify r host here. R port
210:16 - is there SMB pipe browser really doesn't matter
as you can, you can try between both the options
210:22 - they have given you the options. So that's
cool. Let's try it set r host
210:32 - And 10.0.148.84 said yeah, r port 1445 is
correct. I mean, we don't need to change it
210:41 - in case SMB was running somewhere else. Custom
port. We can change it. Five let's keep it
210:48 - as it is. Let's just go ahead and check it.
So I'm going to say check and target is not
210:53 - exploitable. Can you see target is not exploitable.
It just comes up. It just tells me what I
210:58 - can try here before leaving is we can right
now on zero automatic targeting. I can just
211:03 - go ahead and tell it that. Listen, this has
been windows XP, special factory with English.
211:09 - Target is six. So I can just tell it that.
Go ahead and drive at six or maybe this one.
211:14 - I don't know. What is this always on NIX.
Maybe some version, but let's try it. So six
211:20 - and seven went to go ahead and tell it the
target
211:26 - Six,
211:28 - No options very quickly. And now you can see,
we have specified the target. Let's check
211:34 - it. Oh, it is not exploitable. That's fine.
I set the target a seven.
211:40 - No, let's check it.
211:42 - How does not exploitable. That is not going
to work. I mean, even if I tried to run it,
211:48 - it's not going to work. And if I run it, it
will break the SMB. That's why I'm not doing
211:51 - it. That's why I'm using tech, but it's not
getting it tells you and believe me or not,
211:58 - this normally works. Okay. It normally works.
Every windows XP. I have tried it in the past.
212:03 - It always works. The one which I have set
up, it contains some security features. Maybe
212:08 - due to that, it's not, you know, I have done
some updates on that. Some security updates,
212:13 - maybe due to that this vulnerability has been
fixed. And normally in, in, in pen testing,
212:17 - if you find something like windows server,
2003 or windows server, 2000 or windows XP,
212:22 - rare case, even if you find that user's exploited
MSU08, MS08 ,067, I think net API. Basically
212:31 - you can always search that by using search
net API. And you will find all of the net
212:37 - API APIs, hero six, seven is the one and it
always works. Umust try that I'm just going
212:46 - to try on more? Uhery randomly. I just going
to try one more, which is this one
212:56 - I know it's not going to work, but still just
want to try it. Maybe use this show options
213:02 - very, very quickly. We have set R-host 10.0.10.0..
Okay, let's leave it. It's not going to work
213:12 - because it's only for windows zero special,pack
zero to one. We are running on special pack
213:17 - 3 It do not work thats why am leaving. It
doesn't matter. I just clean the screen. What
213:24 - happens there? So you got to know that is
SMBP one, of course you can go on Google and
213:29 - find how big SMTP 1. But I think everyone
knows about eternal blue and SMTP one V two,
213:35 - all of them are vulnerable. So I'm just not
going to try it or not.
213:42 - There you go. These are Eternal, blue variants,
different variants. One of them, which I will
213:50 - try if I was, you know, doing a pen test,
is this one SMTP sorry. SMB, MS17010. Just
213:57 - note it down as well. It's one of the most
popular ones. So zero one zero, most common.
214:05 - I would rather try it if I was doing it very
normal or sorry, this is the auxilary. This
214:12 - is the exploit. So in the same MSA, one seven
zero one zero Eternal blue. So I would rather
214:17 - do it. It's not going to work. I know on this
machine, but I'm just doing it so options.
214:22 - I can see why it's not going to work. It's
not windows seven or server 2008 RP Mmm. XP
214:30 - was before windows seven. Really doesn't hurt.
You can, you can check it.
214:33 - I know it's not going to work. That's why
I'm not doing it, but you can always check
214:38 - it. If it was a pen test, we were doing a
real pen test. You can always check. But thing
214:42 - to remember here is this one is for windows
seven and server 2008. There are more, there
214:49 - are more there is this one. If I move my screen
up, there is this one eternal blue windows
214:59 - eight. This one was for windows eight. Then
there is this one, M S one seven for a PSEXEC.
215:07 - This one, even this one was even able to hack
windows 10 one, which we use right now. This
215:14 - can hack windows 10. In many cases. It's not
going to hack in most of the cases. In many
215:19 - cases, this one can hack windows 10. So really
it doesn't hurt.
215:22 - You can use it. It's a very, very, you know,
big combination. They are using eternal romance,
215:28 - syenergy champion. These are all folks of
the same exploit. They just made one eternal
215:34 - blue and then improved it, improved it, improved
it. The final one was PSEX uh you can always
215:41 - try to go with this one and that's what I'm
going to do now. So clear the screen. And
215:46 - of course you can, you can try it with windows
10. It may work. There is a good chance. It
215:51 - will work show options. Okay. It's completely
messed up. Let me decrease the screen size
216:00 - right now. These are the options. What we
need to set is required is this is already
216:12 - said, this has already said, this is not required.
The has already said, this is not set. We
216:17 - need r hosts. That's fine. This is already
set. Not required. This is already set. Not
216:22 - required, not required not required, right?
So we only need to set r-host, basically set
216:27 - r hosts and which r hosts, we are going to
set 10.0.148.84.
216:35 - That school, we just set it. You can always
tune it. So, you know, you can always do it.
216:42 - Maybe you can just go ahead and port number,
there are pipes, so you can always change
216:48 - the pipes and you can download a list of pipes
from Google. You know, you can just go ahead
216:53 - and search Google, SMB pipes, and list, and
you will get them for windows 10 and old.
216:59 - Now let's go ahead and check it. Sorry. I'm
not familiar with the pipes. What does that
217:06 - mean? I'm so SMB basically, is it server message.
Block Its is the protocol and it uses pipes.
217:13 - It's like technology to communicate, okay,
here's this pipe. So this exploit requires
217:19 - you to have the exact pipe on which you want
to attack the communication. You know, you
217:23 - can just say there's like the, the phone number
basically on what you're trying to call them.
217:28 - Okay. Got it. Yeah. So you can get a list
of them from Google. Metasploit always has
217:33 - a list. If I check it, can you see target
is vulnerable and that's always, you want
217:39 - to hear, right. So it's vulnerable. When I
go ahead and say exploit and understand one
217:47 - thing right now, it won't, we got the Meterpreter.
It works. In many cases, it will not work.
217:53 - It will either crash your server. It will
crash. The whole machine itself is you are
217:58 - trying to hack machine will get crashed. It
may sometimes even, you know, crash your meterpreter
218:04 - the earlier one, which you have the only connection
you have with crashed that, just restarted,
218:09 - you know, just, just get, just have that first
machine again, set a route, try the exploit
218:14 - again, you have to do it multiple times. It
always works for me. It has always worked.
218:21 - Really doesn't hurt, you know, just let's
try it again and again again and again. And
218:24 - it will eventually work and that's basically
it. So I made a meterpreter session to open.
218:29 - Now you can clearly see, we are getting the
session from.one, one, two on this port. Okay.
218:38 - Sorry. What it is.one, one, two.zero.
218:45 - I don't understand. How is this one, nine
two, one six eight. It has like, I'm kind
218:50 - of confused there actually. It's mainly meterpreter
doing some mistake, lets check in sessions.
218:58 - That will be much clear sessions. I don't
know. It's the same one, one, two. One, one
219:05 - thing, you know, one, one good thing here
to understand is that's fine. Even if it is
219:10 - saying one, one, two, basically it is routed.
So I think one zero nine as that's the bridge,
219:15 - right? The bridge IP maybe. Yeah, maybe, but
here, this is, this is what you always want
219:20 - to check the last one in the bracket. So in
the bracket earlier one, the first one is
219:25 - our beta machine IP. The second one is our
windows xp ip might be, that is what you want
219:29 - to take. This that's how it works. And you
can see, you are getting the connection from
219:34 - NP authority, which is basically the highest
level of user from this machine windows XP
219:40 - it's, it's a windows shell. So you can just
go ahead and say sessions dash i two. I want
219:49 - to interact with session number two and oops.
Yeah. clear doesn't work in meterpreter many
219:57 - are using multiple. Let's try to see if we
can do a lot of things here. Okay. We can
220:07 - the normal stuff. What I want to show you
is basically migrate and all. So where is
220:14 - my migrate?
220:18 - Okay. Okay.
220:25 - Now you can find that yourself. I'm just going
to show you how it works directly. Basically
220:31 - for example, if you try to go ahead and let
me just do one thing very quickly. There you
220:38 - go. So basically if I go ahead and say, PS,
it will show me the list of all the processes
220:44 - that are running on that machine. And you
can see there are these processes running.
220:50 - Okay. Now normally what we would like to do
is if you try to see, we will have a process
220:58 - running for us as well, which will be I don't
know where that process might be in which
221:06 - name we are using. It depends on the exploit,
but we will be in one of these process. Okay.
221:11 - We are one of these processes here and we
normally want to change from our port to any
221:18 - other port. Okay. Now, any of the process,
because maybe someone will close the process,
221:23 - maybe someone will, maybe the process may
crash. What we want to do is this is like
221:28 - maintaining the access. We want to change
our process. Number to, some other process.
221:33 - And, and you always want to go ahead and see
which process is running with the highest
221:37 - authority, okay. With your users. So I can
see these, these all are running as high,
221:44 - high end user. When login is the login service,
it's great process. I can just go ahead and
221:51 - choose it.
221:52 - What need here is the PID number. So PID number
is 644. So what I can do is migrate 644 and
222:02 - i can see. So we migrated successfully. Now
you can see migrating from 296 to 644. Can
222:11 - you see here 2y96, this was the process we
were using. Okay. This was a randomly created
222:17 - by our exploit. And now we are running in,
in this process. So until a user completely
222:23 - shut down the machine, the restart the system,
they basically cannot remove us from the system
222:29 - because we are running as they've been logging
process. It's basically, I think it is the
222:34 - person responsible for logging users and logging
out users. That kind of thing. Or you can,
222:39 - you can go ahead and maybe migrate to this
process virtual box until someone closes the
222:44 - virtual box completely. They cannot log us
out. Or you can maybe just go ahead and am
222:49 - I migrate one of the processes?
222:50 - Like IASS really depends on Google search,
but processes are choose the best process
222:56 - and migrate. That's the, that's the thing.
Now we are, I've been logging. That's that's
223:01 - one thing. You can, you can do some good work
like screenshot. Oh, so they just, it just
223:08 - saved on our kali folder. You can go into
your home and you're got a screenshot here.
223:15 - You can see the screen, your screensaver is
running out at the moment. So you can always
223:20 - do a lot of stuff with windows meterpreter,
windows one is the most, you know, windows
223:24 - one is the most powerful one. You can do a
lot of stuff with windows. Uthere is something
223:30 - called get system. Okay. Let me just background
very quickly. There is something called get
223:36 - system, oops, sessions. There's something
called get system. Okay. Uwhat gets system
223:46 - will do is privileged escalation.
223:48 - So think about it. You are like a non root
user or a lower level user. You were like
223:54 - given the access of a employee you want to
go up because you may want to learn some commands
224:00 - and you want to install something. You may
want to do something special. You cannot do
224:04 - that. Get system were try to do that for you.
And here you can see got system. We are technique
224:10 - one. So it has got like three techniques.
I think three or four techniques. It will
224:13 - try to privilege escalate. You automatically.
It's like an automatic installation will work
224:18 - in. Most of the cases will work. In some cases,
it will not work there. You can do manual
224:24 - escalation. And we were talking about manual
escalations in another class right now. Just
224:29 - understand get system is your best shot. Whenever
you have a system and you need to escalate
224:34 - yourself on this, try to do get system.
224:36 - So if I do get through I think that's the
command. Yep. Now you can see, these are my
224:42 - privileges. Okay. I can do all of these things.
What these means, always Google it. So, you
224:49 - know, what does this privileges do? What does
this privilege do? A lock memory. What does
224:54 - this privilege to, I'm just telling you, like,
normally you may want to go into some folders.
224:58 - You may want to search the machine. You may
want to go into some folders, may want to
225:03 - run a program. You cannot do that because
you will not have the privileges. You will
225:07 - have limited privileges and then you want
to escalate. So always try and get system.
225:12 - It will try to escalate you and it will work.
It is a very good one. It normally works.
225:17 - I get system. If it doesn't work, there are
manual ways. I will, I will show you that
225:21 - the next other class. Maybe not next, but
yeah, I will show you. It's a good one to
225:27 - remember get system. One more persistence.
So, yep. Sorry persistence. Doesn't works.
225:32 - Okay. And even those what's the spelling of
persistent, I think that's correct. Right?
225:44 - PERSISTANCE.
225:45 - Yes, he PE R S I S T E N C E. That's what
I typed. Yup. Okay. let's see why persistence
225:57 - in working for not working metasploit. I mean,
that's basically what you always do. Just
226:05 - go on Google and try to search persistance
not working. And guys, I'm just telling you,
226:11 - if you are considering LPT exam or something,
similar, learn to Google. Okay. You need to
226:16 - learn to Google every singlesecond. Whenever
you have a problem, whenever you're want to
226:21 - find some, always run Google screenshot, you
run persistence. Oh, okay. Run persistence.
226:27 - I see
226:28 - And this did not even persistence. I'm destroying
your I'll do it myself. I'm basically in persistence.
226:41 - It's a script. I just remember. There is also
a post exploitation module, by the way, if
226:45 - you search for that here, I will. Just say
background. So background clear the screen
226:54 - search fork persistence. We've got a lot of
them. We got a lot of them. Okay. I do think
227:04 - this is the one. So we only have two ports
here, right? Three ports and windows as this
227:09 - one as a manager. And it's a persistence.
Maybe this one is the one that you can use.
227:14 - I'm not too sure. You can run this script.
So run persistence in the meterpreter and
227:19 - you just type run persistence and then the
command line. That's how you can do it. Use
227:25 - this show options.
227:30 - The name call no this is not the one. This
is not the one. Anyways. You can always run
227:34 - this script using it. I'm just showing you
using this blog, how this works. Okay. So,
227:43 - and this one, basically what persistence will
do is it will create a reverse shell, which
227:49 - will automatically you know, start then someone
restart the system. For example, if right
227:55 - now someone restart the system, I will lose
this shell. This, the shell will be gone.
227:59 - There will be no connection. Coming back to
me, it's a reverese shell, but I will not
228:03 - get anything. If something is restarted, because
meterpreter always works in the memory, it's
228:08 - basically going to your Ram, your memory.
It's not stored in the hard-disk. It's going
228:13 - to memory with persistence, we store it. We
store the meterpreter on, on, on, on the hard-disk
228:20 - so that whenever the system is restarted automatically,
that triggers and we get a reverse shell.
228:27 - You can do that with this. So I can see port
P -p port. They're using HTTPS ports. You
228:33 - know, as I said, not too much exploits, they
are non professional hackers. We use one,
228:39 - two, three, normally four, four, four, three
can be blocked that by -R is the IP address
228:46 - of yours. So this will be your IP address
on which you want to get the connection back.
228:52 - And that I think is the interval. So every
30 seconds, it will send you the connection.
228:58 - If you're not getting anything, it will just
send you the connection. Every 30 seconds
229:02 - and dash L. And this is the location where
you want to store that script. -X, I'm not
229:08 - too sure. Maybe it is to execute this script.
Every second, you can check the options, right?
229:13 - So you can just say, run persistence dash
help, and it'll tell you all the options.
229:18 - -L, I'm not sure what it's going to do, but
this is the, this is the structure. And if
229:21 - you even copied this line, as it is, does
change the location like i am don't, don't
229:24 - do it in C, C is very common. Do it in like
a temp, temp folder and interval set it yourself,
229:33 - port you can change r you can change, but
that will make it,uyou know, that will just,ugive
229:38 - you persistence. Every, every time system
is restarted. You will get the, you will get
229:43 - the persistence done. You'll get the shell.
If I just try that, I'm not sure how this
229:49 - will work. Ups run for persistence. It's just,
there you go. No, run persistence dash dash
230:01 - help.
230:02 - It doesn't make sense. Okay. Persistent. I
dash h will it work? Yeah, here you go. You
230:16 - got the option. So -h is automatic. It will
just take the machine ID automatically. -l
230:23 - Was the location - X was the automatically
start the when system boots. So every restart,
230:31 - just start this that's the persistence right.
Automatically starts when user logs in. So
230:36 - you can always give these options right. In
an interval, as I said and interval and port
230:42 - and the remote IP. Right? So that is how persistent
work. You can always set this up. Yeah, here
230:48 - it is. So you can try it using exploit windows,
local persistence. That that is that it's
230:52 - a local exploit. You can always run it. It's
going to be out of scope. I'm just telling
230:58 - you if you're consulting something like LPT
exam, it's going to be out of scope.
231:02 - You are not supposed to set a persistence,
but in professional testing and real life
231:07 - testing, if you are doing a test, of course,
it's not going to be one day work. It will
231:12 - continue with, you know, multiple days. It
can, it can go two months. I have done tests,
231:17 - which are like three months to test. In those
tests, of course you need a lot of persistence
231:21 - and you try to establish persistence at that
time. That's pretty much it. I think the concept
231:27 - is quite clear. Right? How do you set up a
route guys?
231:35 - Yep.
231:36 - The concept is quite clear, right? Yep. So
if I just do routring, okay. Can anyone tell
231:41 - me how to remove this route? I mean, you guys
know how to set it. Of course. You also know
231:45 - how to remove it. What's the command remove
right? Route remove then
231:59 - sub-net netmask gateway. That same thing.
Okay. So ten.zero.148.0252252225 dot two,
232:05 - two five, two, two, five.zero session number.
Let's enter route remote. Okay. And route
232:17 - not found it right?
232:22 - Oh, yep.
232:24 - Yeah. I would remove, if you try to print
a route, you don't have anything, right. That's
232:34 - not how it works, but you can also set route
in one more fashion, just telling you one
232:39 - more quick way in case this doesn't work in
your exam or anywhere this sometime doesn't
232:44 - work. You can use the auto routing feature.
So for auto routing, you need to go into the
232:49 - session. So session number one, the original
session here. If you are in this session,
232:56 - if you have a meterpreter, you can use auto
route, so run auto route
233:04 - And then dash S and just give the sub-net.
You just give me something one nine, two,
233:10 - Oh, sorry, ten.zero.one 48 dot 84. It will
do all the work for you. It'll select this
233:16 - session for you. It will select the sub-net
for net mask for you. You don't have to do
233:21 - anything. You can see finally adding route
this with this sub-net via the session. So
233:27 - automatically does all the works for you.
Very, very good thing to do. The, the only
233:32 - problem is it says scripts are depreciated.
So it's going all, you know, they are not
233:38 - updating it. Maybe they will update it someday.
Right now, they are not updating it. That's
233:43 - the only problem, but it's, working till you
know, in these days it's working, try it whenever
233:48 - you get a chance auto route is a good one.
Otherwise you can always set a manual route
233:53 - as I show you right at anyone. If you try
to print a route , you can see it's the same
233:58 - route, which we did manually. It has done
it automatically.
234:02 - Right. That makes sense. Yup.
234:04 - All right. I think it's quite clear how to
route and how to do all this work. I hope
234:12 - you guys are much more clear and you can,
you can practice that. Any doubts?
234:20 - I do have a quick question though. Can I share
my screen with you? Yep. Okay. So, Oh, so
234:26 - I was doing a little bit of practice I'm with,
I've only gone through, like I said, half
234:31 - of of, of the first video. Let me see, can
I see my Oh, no. You're sharing so I can share,
234:40 - let me stop it. Okay. Yup. Okay. Let me see
that screen real quick. Okay. So I, I started
234:50 - doing some this goes back to day one. Where?
Can you see it now? No. Oh, I'm sorry. I thought
235:02 - I click on share my fault. Please. Forgive
me. All right. So,uso yeah, so day one, just
235:09 - kind of do a quick recap. You at, what was
that right here?
235:15 - Hey, send that, send those notes to me once
you attend it
235:20 - So far. So you had showed us how to do WAP
scan, WordPress scan. And so I went ahead
235:29 - and curious started looking at courses. Uone
thing that kind of struck my,umy attention
235:32 - I started with not doing here seriously, there
was about a key. Oh gosh, I'm sorry. I had
235:46 - it all ready. Like I said, don't have it as
ready as I thought I did. Alright. So one
235:52 - of the things on the scan. Oh Lord mercy.
Sorry guys. I thought I had this on hand.
235:58 - Oh, that's very, I think fairly, I think that's
a screenshot. Hold on. Maybe I'm just, just
236:03 - feeling, Oh, here it is right there. So you
can see that right there. So I was curious,
236:09 - you know, it had an exclamation point, it
says, m
236:13 - Oh, okay. So yeah, so that's a website and
it just gives you the register link there.
236:19 - Right? So you can always go ahead and register
on this link and provide your API key. And
236:24 - with that, it will actually do better vulnerability
scanning. So right now, what it is using is
236:30 - it's using a database. It just downloads a
database of vulnerabilities and uses that
236:34 - locally. But using this, it will use a, you
know, online check. So that's, that's the
236:40 - thing, but at the end the free version, not
worth it. I mean, it's just 50 requests. Fifties
236:47 - is very, very less, okay. 50 requests are
already less. If you are doing a professional
236:54 - test, it's definitely worth it.
236:57 - Yep. Got it. So let me just, okay, so, so
the way it works now, what you're saying,
237:04 - the way it works now with WAP scan, it pulls
the database and then scans it.
237:09 - Yeah. So when you start the WAP scan for the
first time, or normally it will, you know
237:15 - with, with time, it will ask you to update
the database. So whenever a significant changes
237:21 - made, it asks you to update the database.
So it downloads a file from the server.
237:26 - Right?
237:27 - Right. The problem with that is it's not real
time. So WAP scan the database is not real
237:32 - time. Every time you are doing a scan, you
have to update it manually. So there is an
237:38 - option WAP scan that update, something like
that. You can check in the help menu. Got
237:43 - it. So you always have to update it manually
before doing this kind of scan.
237:46 - Yep. Got it. So basically what I'm saying
is you can buy a service that will automatically
237:52 - update it for you, for you.
237:54 - So if you buy the service, it will basically
do the scanning and it will take the results
237:59 - and it will send the results to this website.
This website will process them on the cloud.
238:04 - It will find the vulnerability on the cloud
and send the data back to you in WAP scan,
238:10 - and then it will show you the results.
238:12 - Oh, okay. So it's like all those scans, like
on a regular daily. Yeah. Okay. Okay. So that's
238:19 - a new vulnerabilities. It's like keeping tabs,
keeping a tab on your target.
238:23 - No, I think no, no, no, no, no. I think it's
not good. It's basically the same thing. You
238:29 - got a local database, they got a remote database
on the cloud. That's the only thing they can.
238:34 - Okay.
238:35 - I mean, you're not processing things on your
machine. You're processing things on their
238:41 - machine. That's the only thing, that's it?
Okay. So it's a paid service. So it's much
238:45 - more detail it's they got new vulnerabilities.
So every second they update vulnerabilities
238:51 - that's quite different, you know? So if there
is a vulnerabilities found like 10 minutes
238:55 - ago, it will not be in WAP standard. Maybe
it will be in that website.
238:59 - Got it. Okay. All right. I'm back on the bus.
Thank you. Alright. Appreciate it.
239:06 - But I like to do it in manual. You know WAP
scan will give you the results, right? It
239:11 - will send the same result to this website
and you can much better where you can take
239:16 - the results and Google it. You can, you can
take the plugin name and Google the name and
239:20 - that's much better way to do it using a service
automatic. You know, if I have to use automatic
239:26 - in my company, why would I even hire you?
Right.
239:29 - Exactly. Right, right. No true.
239:32 - Being a business owner. I can buy the tool.
I can buy the service. I can run it. Then
239:36 - what's your need? That's the need of a professional
tester. You have to do it manually.
239:43 - True. True. Okay. Yeah. Yeah. That one was
just wanna recoganize by. So I was, I was
239:47 - curious to know what your thoughts were. Let's
go ahead and quickly up on our terminal and
239:55 - you know, do the usual stuff, get the shelf
as the fall. And then we'll talk about.
240:00 - You know, advanced pivoting which is port
forwarding and all of that over pivoting
240:05 - So console. But before that, let's pick a
root. First, you go your root kali is the
240:21 - password and MSF console.
240:27 - Yeah. Let me just push this thing down here.
Maybe.
240:32 - Yeah, that would help. So So
240:38 - Let me go WPA,. And we should actually start
with persistence on this anyhow, and we have
240:55 - to do every copy. Copy. Copy, copy.
241:04 - Alright, so use this show options set. R hosts
username, which is developer.
241:14 - And by the way, you can use the console as
a terminal. Very, very normal. So, you know,
241:23 - for example, if I have those notes on my desktop,
I can just create a tab
241:30 - Desktop slash norms
241:35 - And it will work just like a normal terminal.
It'll execute that command and I can, whatever
241:39 - I want, basically, it's just like, it works
as a normal terminal as well.
241:44 - So that's a handy thing.
241:49 - I don't think we need anything else. Let's
clear the screen and run it. There you go.
241:59 - We have the Meterpreter and let's go to shell.
So now we are in this shell. Let us suppose
242:07 - our target scope says that hack the beta machine
and then have the, and a second machine, which
242:15 - is a media server. And let's say we are told
that the IP 10.0.148.217. Then first thing
242:25 - will be to of course, try to ping it. So thing
10, zero.one 48 dot two, one seven. And we
242:31 - are ping it from the machine which we had
because that's, that's going to have a dual
242:36 - card and after we are getting the ping, that
makes sense.
242:41 - Yeah. did you need to do the route out again
or is that no. So of course you will need
242:51 - to do that. What I did right now was I just
did a ping from the machine itself. So I am
242:57 - in the shell If you see that shell means I'm
getting that machine. Right. Gotcha. Yeah.
243:04 - So I was not using my machine to send this.
I was using that machine to send it and we
243:10 - will add the route now. That makes sense.
Yeah, that makes sense. Alright, so run auto
243:19 - route. Oops, but I don't know the route. And
then ten.zero.one 40 eight.zero/24 enter.
243:32 - And that gives them that, that answered right.
Added the route. You can see the last second
243:42 - line let's background. The session they'll
go. That is the shortcut. By the way, you
243:45 - can type a background itself. If you want
to do that clear route print.
243:53 - There you go. Now we have that route again.
So now once we have the route, we should be
243:59 - able to do whatever we want. We know our target
is two, one seven, what to do first thing,
244:05 - first scan reports. Right? So use auxiliary,
scanner port scanner, TCP. Enter set r host
244:20 - 192.. Sorry. 10, zero.one 48 dot two, one
seven. Yeah, I two one seven. Right? I think
244:33 - we don't need anything else. Let's run it
here. Here you go port 80 is open? Which means
244:38 - it's a web server. Of course they named the,
just media dot hacker in the house. So of
244:43 - course it's webserver, but let's wait for
it. Let's see if anything else comes up and
244:51 - I'm just telling you, there's nothing else.
That's just the one port, a port 80. And that's
244:55 - what we're going to, I try, but you can, you
can actually be it if you want.
244:59 - I'm going to leave that. Okay. You guys can
read it if you want. Right. That makes sense.
245:06 - I mean, I just know there is only one for
why to waste, but if it was a test, of course
245:14 - you have to do it, are you getting that point?
Yeah. So let's say now one, suppose we know
245:21 - what is, I mean, there is something on port
80. What we can do is maybe we can try to
245:27 - search for something apache scanner or something
like that. I mean, virgin scanner for Apache,
245:31 - we are not sure, but let's try that. So search
and we don't know which service it is. Maybe
245:42 - banner grabbing. Do we have something called
banner grabbing banner? Okay. No search results
245:49 - because spelling is wrong. Of course banner.
There you go. So we have a, do we have a banner
245:57 - grabbing here? No, I don't see that. So we
have IMF version scanner, not SMTP version
246:07 - scanner. We don't have a banner grabber. I
mean, FTP. We have one I don't see any other
246:12 - banner grabber it there. Okay. When you're
stuck with that, maybe what you can do is
246:20 - go on Google and search and thanks. You need
to learn this. I mean, whenever you are stuck,
246:26 - you have to go on Google and search. Okay.
So how to do version detection in Metasploit
246:37 - Okay.
246:39 - SMTP version detection. Here you go. That's
what I was looking for. Even you can, you
246:47 - know, service identification. So there is,
there is a post there, maybe all of these
246:50 - helps it's helped a lot. And this is something
you should learn how to, how to go ahead and
246:56 - do that. So, yeah. Okay. They're only talking
about two services SMTP may be and rapid seven
247:03 - is the best website, best website because
they are the creator of the metasploit. SMTP
247:07 - Version detection. There is a module it's
using is auxiliary SMTP SMTP version.
247:14 - Okay.
247:15 - Well it seems it there you go. Clear the screen
and I will actually take the visit itself
247:24 - from here. So use this copy. Okay. Paste Why
this tab open. Close it. There you go. Now
247:37 - we are in that show options. So r host, which
is required port is. Okay. SSL, of course,
247:45 - you know, if it is on four, four, three, you
will make it true. If it is on port 80 make
247:49 - it false thread, that's fine. You can keep
it one. So what we need is r-host. That's
247:54 - the only thing. So set r host. Here you go.
Run it. Now let's see what comes with some
248:00 - information
248:01 - Until it is, until it is working. What we
can do is we can try to go on this. Oh yeah.
248:08 - We cannot go on this website because only
Metasploit is the part which, you know, only
248:15 - metasploit is the framework with just having
that route added. Okay. Your system is not
248:20 - having route. That makes sense. I mean, you
cannot open this. If you try to do that, it
248:25 - will not work. Let me show you, it will, it
will basically not work because you don't
248:30 - have any, any kind of connectivity between
your computer and that computer. It's just,
248:35 - Metasploit, has a connectivity you could in
session. Is that making sense?
248:40 - Yeah, it does. All right, but we have a solution
for that which is a SOC server. We can open
248:50 - a Soc server for that or, or port forwarding
two options. This is not working for some
248:57 - reason maybe, and this is very, very normal.
I mean, on, on routed things, it's, it's always
249:04 - the case. The really fine. We can post this
and we can try to use other methods. I mean,
249:12 - that's why we have other methods. So one of
them is using a SOC server and one of them
249:16 - is using the port forwarding. Port forwarding
is the easy one. Soc server is, I mean, port
249:24 - forwarding is basically more reliable Soc
over, does not that reliable. I'll tell you
249:29 - both of them first. Let's can you quickly
just describe what a SOC server is? Okay.
249:35 - Have you ever heard about proxies?
249:37 - Just like proxies, right. So what we can do
here is so proxies are different, different
249:42 - protocols, different, different pilots. PCP
is there UDP is there HTTP is there SOC is
249:47 - there, these are different, different types
of protocols. What a soc server will do is
249:53 - this Metasploit console, because this has
the access to that range. Now with, with that
249:57 - route, this will become a proxy for our whole
system. And we can set up that we can set
250:03 - up that proxy and due to that, we will be
able to use Firefox n - map, whatever you
250:10 - want. Everything will work because every traffic
will go through Metasploit as a proxy Metasploit
250:15 - is sending that to beta server as a route,
a pivot, and then beta server is sending it
250:20 - to the final destination. So it's going through
Metasploit as one more intermediate pivot
250:26 - and getting that point. Yeah. So that is,
that is what you can do in SOC server. That's
250:32 - easy. That's easy enough. Before that I, you
know, let's, let's go ahead and try port forwarding.
250:37 - That's a kind of issue. No. Who do port forwarding.
You need to go into the session of the meterpreter.
250:44 - So sessions one.
250:47 - There you go. And now you can just type port
forward. Write port FWD. They, they just keep
250:56 - it low profile. Now here you have three options.
-l Oops -p -r. Okay. Now what does r r is,
251:08 - the remote host? So ten.zero.one 48 dot two
one seven. That's your dash R dash p and L
251:21 - are the ports, which you want to forward.
So -P is the port on that machine, which you
251:26 - want to forward, which will be port 80 and
dash L is the local port where you want to
251:33 - forward. This can be anything, but normally
we will keep it same. So port 80. So therefore
251:39 - it becomes my port 80, I guess that's what
we are doing. And before I go to right out
251:44 - here, add it, add, press enter. Now we have
a local PCP relay on this machines port, 80
251:54 - coming to our port. And if with that, we try
to, you know, open our local address one,
252:04 - two, seven.zero.zero one,
252:07 - Which
252:08 - Was not working earlier, but now it should
work because we just added a port forward.
252:15 - Yeah,
252:17 - I was just login. Okay. you got any ideas?
Why it may not be working? Okay. What I want
252:32 - to try here still, what I want to try here
is just try to, you know, Oh, did our session
252:42 - died, I that's, that's what I'm thinking because
cshell is not working as well. Okay. Shell
252:48 - is not working as well, and it should work
added running shell timeout ablation. Can
252:56 - you see that's possibly our, our session is
not working properly. What I'm going to do
253:02 - is I'm going to close the session, first of
all, and remove the port forward. And it really
253:12 - doesn't matter. You can, you know, keep that
running, but it's a good habit to remove it
253:17 - and I will exit the session and let me open
that session again. So the exploit which we
253:24 - were using.
253:26 - Okay.
253:27 - Where is the exploit? There you go. And let's
get this session again. Session two. Okay.
253:42 - Now just does, you can see, you see the port
is not responding at all right. Now. Let's
253:47 - go ahead and add a port forward So one to
seven zero zero one, which is our local IP
253:51 - doesn't work. That's really fine. We can just
say now port forward and I can bring this
253:59 - command here. Yes. Enter. And let's try to
do it now. And you can see this work. So it
254:07 - has hacker in the house media. You can see
that title there. It's loading now though,
254:12 - it's taking a lot of time, but it is going
to work.
254:18 - And that makes sense, right? There you go.
Now loading up. Yeah. No, it's, it's not loading
254:28 - properly anyways, but it is still loading.
Okay. That's, that's one of the things and
254:34 - why it does it you know, this problem is very
common. It doesn't loads things won't load
254:38 - because that somebody's expecting a domain
name. Again. Normally they are not expecting
254:43 - you to be running it on a, on a IP address.
They are expecting, you will be running it
254:48 - on a domain name. That's what they're expecting.
And you can just, you know, go in your host
254:55 - file and add this thing in your host file.
So you can just go there. And you can just
255:02 - say nano, edit, sorry. Nano Exe. Host's okay.
That was host as not post. There you go. And
255:21 - for example I have this IP, this is wrong.
Let's keep it one to seven.zero.0.one. Let's
255:31 - close our control X by enter. And now possibly
this will work in a much better media .hacker
255:43 - in the house. And there you go. Now this is
loading. Absolutely fine. Perfectly right.
255:48 - Can you see that? Yep. So we got a cool login
panel, a click click bucket application. There,
256:02 - you updated the host file. You said I just
added the host file with the entry. So normally
256:08 - what happens is, you know, if you have a company
and you are having an internal website for
256:13 - the company, you will not keep that on, on,
you know, IP addresses. You will rather keep
256:18 - that on a domain names, right? Internal domain
names, which only company users can open.
256:23 - So that, that, that web server or the website,
it was not working on. Uwhat do you say it
256:29 - was not working properly on the IP address
because it was not expecting the IP address.
256:34 - So we just added our local IP to media or
hacker.com because our local IP is being port
256:41 - forwarded to that machine, right. That machine's
IP. So at the end, our local IP, and that
256:48 - machine's local IP for port 80. It doesn't
make any sense. It's the same thing because
256:54 - of the port forward, right.
256:55 - Port 80 on this, this IP, our local people,
data on this IP is equal to port 80 of that
257:04 - target. Is that making sense now? Yeah. All
right. And we have access to our local, so
257:10 - we just add the local here, and then we just
added this entry here. Right. So now, if we
257:16 - are going to this IP, our browser is taking
us. So if we're going to this URL, our browser
257:23 - is taking us to this IP on port 80. Okay?
Okay. So now we have the website. I mean,
257:34 - that's the first way. So that was the first
way, which I wanted to show you. And now you
257:37 - can, you can use it very, normally everything
will work as the admin is there. You can use
257:41 - it very normally. That's how it normally works.
Since you have the port forwarded, you can
257:48 - possibly go and run something like n map or
something like that. So I'm just going to
257:54 - quickly show you and, n-map then one to seven.zero.zero.one.
And I think that is the IP.
258:10 - Here you go. Port 80 is open. And of course
it is open because we only forwarded one port.
258:16 - And I normally, you would actually like to
go ahead and specify the port as well, to
258:21 - avoid confusions, only add the port, which
you have you know open and maybe just try
258:26 - something like SV Virgin detection or dash
eight to aggressively scan it. So let's hope
258:32 - we get the version of this Apache. So now
we are using n map. We are scanning the machine
258:42 - in the range. I mean, the machine, which is
in a range in which we are even not there.
258:46 - So it's like over a pivot. We are scanning
it over a PCP scanning. So we have the Apache
258:52 - httpd two, one, four eight seven. You can
possibly go ahead and try to find some exploit
258:58 - on this. I know there is no exploit on this
understanding it serach exploit.
259:06 - I know from my experience, I know a 2.4 0.7
is a very secure version is a very stable
259:12 - version. You can go in and try to find it
here. But you will not get anything, 2.4 0.7.
259:18 - There is nothing like 2.4699999999999998 in
this list. So you will not get anything there.
259:24 - Okay. But in a pen test, and if you were not
aware of this version, maybe you will go ahead
259:29 - and do a research using some tool like searchsploit
and, and to see if there is any vulnerability
259:33 - or something like that. I will come on this
part as well in another in the next class,
259:39 - basically how to find exploits, how to, you
know, search for them, how to exploit services
259:44 - or service exploitation. We will do that in
the next class. Today we are basically talking
259:48 - about port forwording and all that kind of
stuff. Okay. I do hope you are now pretty
259:56 - clear how port forwarding works and you won't
even have to add a route to do port forward
260:03 - because you are doing that from the meterpreter,
not outside the meterpreter. Okay.
260:10 - Okay. That is making sense. Yeah. Yeah, no,
it makes perfect sense. Port forward. Add
260:17 - your local port. It can be anything I can
just add, you know, dash one, two, three dash
260:22 - 88, dash four, four four, four. And dash p
is the port, which you want to forward. Dash
260:28 - r is the host on which you want to forward.
So port 80 of that machine becomes my port
260:35 - 80, anything I wanted, I can do that. And
then I can just access that port using one,
260:41 - two seven zero, zero one, right. What comes
to mind is FTP, right? You can put forward
260:49 - FTP over here and in, in this dash L it's
your choice. You can keep it 80. You can keep
260:56 - it for 21. Just, you know, you need to remember
which port you have forward it on which, right.
261:02 - Right. So if we go ahead, let me just remove
this very quickly. Make copy. I mean, that
261:16 - was this method third.
261:19 - Now I'm just going to, I mean, that's the
best method, by the way, it's, it's, it's
261:22 - kind of the much more you know, suitable method,
but it takes time. This, this takes a lot
261:29 - of time, just think about it. You've got like
20 ports. You, you will have to open your,
261:33 - you will have to forward all of those 20 ports,
and then you can work on the machine. This
261:37 - takes a lot of time and it's not suitable
for, you know, very, very quick. Maybe it
261:43 - was like a quick test. You were, you were
trying to do, you are trying to do something.
261:47 - It came to your mind. Then SOC server is one
of the options and soc. And what is kind of
261:52 - you know, it's kind of a, it's kind of a good
concept to understand. So what you can do
261:58 - is you can, you can do soc server by let's
search, whatever. So I'll background the session
262:04 - clear this screen and soc server SOC
262:08 - Soc soc, by the way. Sorry. That's that's
so s I've heard on the spelling. I think it
262:18 - is SOC. Okay. Soc, there you go. You can open
a soc server. I mean, you can open HTTP server
262:27 - as well, a TCP server as well. But I think
soc is the most reliable in terms of the protocols.
262:34 - There is soc five and four eight Now I have
personally tried both of them and soc five
262:39 - doesn't work for me. Okay. It never worked
for me for that reason, port 84 a for a protocol
262:45 - is as much better. I think this is more reliable
that doesn't work for some reason that doesn't
262:51 - work. Let's use it, show options. Now, when
you have to do is you have to just set the
262:57 - server port and a server, a host. Okay. So
several hosts let's keep that, you know, zero,
263:04 - zero, zero, zero doesn't doesn't really matters.
Server port let's change that. So set SRE
263:12 - port. Okay. And thats how we port. And then
we can just say something like,usix, six,
263:20 - six, six, and randomly, I'm just giving Even
SRV host. You can change it if you want. So
263:26 - let me redo that. Uhr let's, let's keep it
as there you go. We are now running a server
263:34 - Sod server starting it. So let's wait for
it
263:38 - Starting and starting. So I think what's going
on. It's taking a lot of time.
263:47 - No,
263:48 - Yeah. It's still working. Okay. And on command
now it's giving me those things. Anyways.
264:00 - I think it has started. What you can do is
you see, this is job. You can actually just
264:04 - say job. Maybe jobs dash. I know you can,
you can basically say job and it will show
264:15 - you every job running. So jobs, zeros running
there, you can just say job dash i zero it
264:22 - will show you what is, what is it running?
So it's soc server running seven port 0007
264:28 - server port is 6666. So now we have a proxy
running, which is running on 0000 on port
264:37 - 66, 66. Okay. That's the proxy. But I mean,
so now, whatever our Metasploit have access
264:44 - to, we also have access to the same thing.
That making sense. I mean, the, the connections,
264:51 - which metal sploit has access to, we will
have access to if we, you know, connect to
264:57 - this, this as a proxy, but our Metasploit
doesn't have any connections because we have
265:01 - not set the route as well. This is this, this
is not a port forward. This is just giving
265:06 - the connection of the MediSploit to us. So
we need to give Metasploit the connection
265:10 - first. So I'm going to add it out here. Sessions.
one. No, that doesn't exist to yep. And then
265:21 - run auto route dash S 10, zero.one 40 eight.zero/
24.
265:34 - Oh, what does it say? Okay. I added two times
full stop. Yeah, there you go. Now it's working.
265:47 - You can background it. And now whatever our
metasploit has access to, we have access because
265:54 - of this we're running. So we can just take
this,
265:59 - Then go to our Firefox. And now if I refresh
the page, by the way, it will not work. Yeah.
266:05 - It is not going to work. You can see if I
go ahead and open my preferences and I set
266:12 - up a proxy here in my Firefox. So manual proxy,
and we are going to set SOC proxy, right?
266:22 - So soc proxy hosts the zero, zero, zero, or
this six, six, six, six. This is a sock for
266:30 - proxy. Okay. I'm trying to do that. Not working.
Oh yeah. It's just all soc proxy. So every
266:38 - other thing is blank. We are not using HTTP
We are not using SSL FTP soc proxy zero zero,
266:45 - zero, zero on four, six, six, six, six. Let's
try it. It should work. And now we can directly
266:51 - use that IP address. So we don't need to use
one to seven, whatever we can use that IP
266:56 - directly because Metasploit has got access
to that IP. You do the route and we have got
267:01 - access to that IP due to the port due to the
SOC server, which is running on metasploit
267:05 - . So,uten.zero.one 48 dot two, one seven.
If I press enter, you can see website works
267:15 - absolutely fine. That makes sense.
267:21 - We just added a proxy there. We just added
a proxy. Yep. I soc proxy, which is, which
267:28 - is connecting to two metasploit and it is
working over there. Now the beauty of this
267:32 - is you can use any tool. I mean, see, we added
a proxy, right? So we can actually, we can
267:39 - use any tool to be configured with this proxy,
but how do you do that? Like, is it possible
267:45 - to use any tool with the proxy? It's kind
of I mean, just think about it. Like any tool
267:52 - with the proxy is like there should be an
option in firefox. There is an option to configure
267:57 - the proxy, but it's not mandatory that every
Googler will have it. So for that, there is
268:02 - something called proxy chain. You can go ahead
and set up a proxy chain, nano proxy chain
268:07 - exy, proxy, chain dot config. That enter go
to the end very end. And you will see proxies
268:18 - here, SOC for proxy, port and six, six, six,
six. I'll just change it. And even if this
268:24 - entry is not there, you can add it yourself,
SOPs for space your address.
268:30 - And it is always a good practice when you
are starting your server, by the way, it's
268:40 - a good practice when you're starting the server,
make the port 127.0000 instead of having all
268:46 - the ports, what all the domains mean using
to any interface it's like, it's not specifying
268:55 - any hosts and interface. It's always a good
practice to keep it your local host. I'm just
269:01 - going to try it. Not sure it will work with
00. Let's try it, save it. Since we have the
269:08 - proxy chain. Now we can even ping that machine.
We can do whatever we want. So what we have
269:12 - to do is proxy chains by proxy chains, space,
whatever you want to use, let's say you want
269:19 - to ping ping space and the IP ten.zero.one,
four, nine, four hours. The IP 10.0.148.217
269:27 - I enter. Okay. It doesn't work. So I was expecting
it work. Okay. Let's let's, let's wait for
269:36 - that. Let's wait for that. Uis something else
gonna work is w get connecting to that connection,
269:45 - but refused. Okay. Connection refused. UI
don't understand why connection refused when
269:50 - they connect to the server. Maybe our proxy
is not working.
269:58 - Yeah. Adjust the payload to a bind payload
instead of a reverse and some other things.
270:03 - I mean, there is a lot of things we can manage,
but,ul port, let's say nine to three, four,
270:12 - roughly just L host. Uyou can give an l host,
let's try to run it. We will see. Okay. It
270:21 - says, following you have to give it it's the
same. You cannot. So set L host and let me
270:26 - give my IPS, you know, not,uwhat is my IP?
I have config, there we go. My IP is, there
270:31 - are seven, right? So set L host 10 dots, zero
dot hundred dotr seven. I mean, I cannot give
270:36 - my,uyeah, I mean that, that's the only ip
I have. Right. I cannot give my real IP. So
270:42 - I'm using IPV six. This is IPV six. I cannot
use IpV six because that does not in the DMZ
270:48 - rate itself.
270:49 - I cannot use my local address because that's
only local. So I only am left with this IP,
270:53 - which is the DMZ one. Let's try this. If that
works, uploading the payload, executing, it
270:59 - may not give me a reverse. Shell I have a
very bad feeling? There, there you go. No
271:04 - session was created, right? You don't get
any shell. Why? Because off the, you know,
271:09 - because of the double pivoting stuff here
you know, you're pivoting to a hundred machine
271:14 - and then you are pivoting to the one 48 network.
So your machine, your machine can communicate
271:20 - with one 48 because you have you were routing
your traffic, but one 48 cannot communicate
271:31 - to you. Are you getting that point?
271:32 - Yup. Yup. That's a problem on the back way,
right? I'm sorry. I mean, in a illustration,
271:37 - it will be going through the front way, but
the destination wouldn't be able, they cannot
271:42 - send traffic back to us because they can not
route their traffic through beta server, right?
271:48 - That is a half way. Middle man. They are their
only middlemen for us. They are not middlemen
271:52 - for the media server. Let's say with clip
Bucket 4.0 exploit, right? When you see this
271:55 - one, you will find that this is the manual
of all those three vulnerabilities. This one
271:59 - is manual way right. So when you see this
manual way, you can easily see if you start
272:03 - reading this. I mean, this is a text file.
If you start reading this, you will find,
272:08 - for example, let me just take the same, same
exploit. I mean, you can use other ones, but
272:14 - an authenticated arbitrary file upload the
same one. So it says here a malicious act
272:19 - can do that proof of concept. Let's see. Unauthenticated
file upload proof of concept. This is the
272:28 - proof of concept. It is a curl curl command.
So you can send this signal to do the website.
272:50 - Let me copy this.
272:53 - Yes.
272:54 - Okay. Copy. Let me go and open something like
leaf pad paste it here. So it does in our,
273:04 - it needs to be in one line. That's why I understood.
Okay. HTTP host. Let me add the IP of that
273:10 - server. So media dot hacker in the house,
I'm putting the address directly because we
273:16 - are using a proxy server. Remember they're
using a proxy server. So we can communicate
273:21 - with the website directly. Now, here, name
any name dot PHP. You can put anything. I'll
273:23 - just leave it as it is forever. F Dash F is,
I dont know what it is. Just leave it. A file
273:28 - is equal to P file or PHP. So p file dot PHP,
you can of course put your own file PHP file.
273:34 - Right? So let me try with a file and I'm going
to make a very quick a file. I'll just move
273:38 - to the next spot and I'll just make it filed
a dot PHP, a dot PHP. I just put this as a
273:43 - file. That's normally just for the proof of
concept. So now we have a dot PHP. Now what
273:48 - I can do here is I can change this file. A
dot PHP to eight dot PHP, because that's the
273:56 - name of my file. Right? I can take this line
copy and I can come here. I can paste it and
274:03 - present that. Will it work or not? What do
you guys think might, might work 80%. It will
274:10 - not work.
274:11 - Try to see why.
274:12 - Yeah,
274:13 - No idea. Okay. Because you are not mentioning
any proxy here. How does curl curl is a command,
274:21 - right? It is a software. How does curl connect
to this website? I mean, you have a proxy
274:28 - running, but you're going to use proxy chains
as the making sense. Because curl doesn't
274:32 - have any option. Yeah. So you gotta, you gotta
mention proxy chains here. So proxy chains
274:37 - press enter. Now it is connecting through
the chain, right? So let's see. There you
274:39 - go. You can see success, right? Success. Yes.
File name. It gives you the file name as well.
274:41 - Extension PHP file directory, where it has
uploaded. It has uploaded in this directory,
274:45 - right? That's giving the data.
274:46 - Copy. Let's read it a little bit more. Let's
read the exploiy which we got here. So for
274:52 - the more vulnerability is also authenticated
with basic privileges, blah, blah, blah. No,
274:57 - we don't have any information. Let's read
it again. If we have something here. Okay.
275:03 - Unauthenticated file upload. A malicious file
can be uploaded into the web server by unauthenticated
275:08 - attacker. It is possible for an attacker to
upload the script, to issue operations, authenticated.
275:16 - Something doesn't make any sense. Let's try
that. Okay. Let's try that. Where did we uploaded
275:22 - it? If you see that URL again, the POC proof
of concept, which we just use, we use this
275:27 - one, right? So we uploaded it in cost actions,
read PHP, something. Right? We uploaded it
275:32 - there. So first of all, I will open this,
this folder, right? No, we used this one.
275:37 - Yeah. First of all, I will open this one.
So I think this is the PHP file, which was
275:48 - vulnerable. This is the folder where the PHP
file is. Right. So I will open the slash actions.
275:58 - I'm going to open a slash actions, right?
So that file that vulnerable file isn in slash
276:05 - actions. And this this line says that it is
in this folder. So this is a folder. But because
276:11 - that PHP file was'nt in slash actions. So
we have put that as well. Now here, let's
276:17 - see if this works, let's see again, it's taking
time, but you can see, we got the file and
276:23 - we got three, four files because we uploaded
them using Metasploit. So three files are
276:25 - using at this point, we did three trials and
one is the one is the one which I just did
276:30 - right now.
276:31 - If I see the file name, which I got is this
one, one, five, eight, five, right? All of
276:35 - them are one, five, eight, five, zero seven
CD. So zero seven CD. This one, the last one,
276:40 - right? This is the last one. Oh, you can even
see the time. And so 15, if I open this, you
276:46 - can easily see, this will say, this is a file
because that's what I have written. You see,
276:53 - this is a file. So we have done it now. Normally
what you can try, if you are not getting a
277:03 - connection, you can use a PHP shell. So there
is a very common and a very cool one, which
277:14 - is C 99, C99, PHP, shell. Very common, a very
famous one. Okay. C 99, right? Download you
277:20 - go. This works. Open, come on. This is the
PHP. I will extract it to desktop.
277:27 - Okay. How to extract to desktop anyways, I'll
just drag it. I'll just drag it here. I will
277:37 - change the file name to a.php because that
is in my command. I will delete this change
277:48 - the file name, but rename a.php. And I can
run this command again, right? The last, command,
277:55 - which I just did here, I can run this command
again. It's going to take time. It's a heavy
277:58 - shell. It's kind of a big shell. So it's gonna
take time. I did it. And now we can go there.
278:03 - Refresh the page. Oh, sorry. Let's go back.
Yep. So refresh the page.
278:07 - Okay. I mean, we, we, we upload it, right?
It says success. Yep. Success. It's taking
278:11 - time. And I don't see that. Oh, I think this
is the one 641 KB. And of course this is the
278:15 - one. And let's verify, you can see eight F
five, seven, eight, five, seven. There's the
278:18 - one that's open. It may work. It may not work
again telling you, but let's see. It's a very
278:26 - famous shell. It's heer you go. It's a complete
dashboard. Now you can easily do whatever
278:29 - you want. You can run commands. You can, you
know, directly run commands in that machine
278:31 - and you can upload things. You can make a
new file, make a new directory. It's very
278:34 - powerful. And there is one more, there is
there's one more, which is even powerful than
278:38 - this one, which is called weevly. Okay. We
weevly is WEEVELY. It's called a weaponized
278:43 - show. It's very dangerous. We believe you
can encrypt, you can password protected. So
278:47 - no one knows what it is. This is the gift
code.
278:49 - So you have to make sure you have a proxy
chain that, I mean, you have to make sure
278:56 - you're able to connect to the, to that website
for you to be able to do all this. So you
279:01 - use the C the C nine, nine shell. Is that
correct?
279:02 - Correct. Correct. Correct. the only reason
I'm using it, web shell, I mean, not a meterpreter
279:05 - session or something. The only reason I'm
using a webshell is because I'm not able to
279:09 - get reverse connection. Then again, there
are possibilities. I don't know why I'm not
279:12 - able to get it. Maybe because I might lack
expertise in that topic. I'm not the best
279:15 - person to do everything in my team. So there
is a possibility, but I can still, I can still
279:20 - do whatever I want. It's it's a complete shell.
Okay. So let's say a hacker has already done
279:26 - this. So from a pen test perspective, how
would we detect this is basically compromised.
279:35 - Okay. This is easy. This is easy. So this
kind of shell C 99, it's code, is a very famous,
279:41 - right? The PHP code is very famous. Everyone
knows it. What you can do is you can use a
279:46 - antivirus or a DLP or something like that.
279:47 - I might, you know, go ahead and use antivirus
software, something from McAfee or something
279:52 - from, you know, check. Good, good reputed
companies, a bit defender is one of them.
279:56 - So you can scan the server or the storage.
You can scan the storage of, of that, right?
280:01 - Or you can use a web application firewall,
for example, and WordPress, they have something
280:04 - called word fence. WORD FENCE, not word fence
has a scanning tool. So you click on scan.
280:09 - It will start a scan. It will tell you that,
listen, this is a malware file. This is a
280:16 - you know, this is a modified, sometimes hackers
are so intelligent, they will take the code
280:22 - and they will not upload it as an individual
file. I mean, I have access to the file now,
280:29 - right? So I can possibly, I can just, I can
move back there. You see, I have all of these
280:32 - files right now, this admin, dot PHP. It's
a default file. I can edit this file. I can
280:46 - create. I can edit it. And I can paste the
same shell in that file as well. So, you know,
280:52 - not, not removing the content of this file,
but also putting content of my that's one
280:57 - possibility. And normally you will use something
like weevly. So weevly is encrypt shell. You
281:04 - will use this kind of thing to evade those
antiviruses. Weevly is very hard to detect
281:07 - you. You'll get people. It's very hard to
reflect.
281:09 - The only possibility is you're not trying,
trying to check the logs. What happened when
281:13 - happened? Why do we have this file? Should
we have this file here? I mean, I know that,
281:15 - okay, there are 20 files tomorrow. If there
are 21 files, why is one file more? Did we
281:24 - created it? Or what, why is that? Right? So
all those things, now you can see the owner
281:30 - of this file is a root. So possibly we can
not edit it, but this folder, the owner is
281:36 - www data so we can edit it. So those kinds
of things you have to remember. So that's
281:43 - how basically you can hack it. I mean, again,
you can always run the commands from here,
281:47 - right? So they can always run the commands
and upload whatever you want to upload. So
281:50 - that's one of the, one of the things, if you're
not getting a connection back, these kinds
281:57 - of things are what you have to use.
282:00 - One more quick thing. I mean, if this was
a real, real hacking scenario, if I was not
282:05 - a pen tester and I don't care about your security
one of the creative ways to do it was I can
282:11 - one of the curative ways is I can hack the
beta machine using this machine. I mean, I,
282:24 - I'm not, I'm not running commands here. Right?
I can run whatever, come on. I want, I will
282:34 - hack beta machine, this machine, and I will
do it myself. So media machine pivots through
282:39 - BETA to me, okay. Through Beta media machine
pivot to the DMZ 1,000 rate. So now I am pivoting
282:46 - through beta two, one 48 range, this machine
pivoting through beta 200 range communication
282:49 - established easily. We can communicate. Now
I can upload a shell and then I can have full
282:57 - access to that machine as well. So one of
those ways, if it was a real hacking scenario,
283:01 - I won't care about your security. I will just
break it in that making sense.
283:14 - Yep, yep. Using this machine, I can have beta
and then get access to. Right. that's basically
283:25 - it, I mean, that's the quick quick thing.
And honestly, I have uploaded this C99 on
283:32 - this machine. First time in my life. I have
just, this, this lecture is quite new now.
283:40 - Also I also got to know that, yeah, there
is a metasploit module for this one and I,
283:47 - and I did'nt know that earlier. So maybe I
will play with the metasploit module and I
283:52 - will ask them to, you know, help and get a
reverse connection somehow if we can get that
283:56 - direct;ly from metasploit, we will try that.
But I, but I guess it's quite clear, right?
284:03 - If you want, if you don't have the complete
resources, you can always, always, always
284:09 - do this kind of stuff and you can always,
you know, do this kind of thing. Right? Right.
284:20 - I start with the web application pen testing.
Now, you know, you guys need experience in
284:25 - web apps the most, because if you guys go
to a job right now, as a fresher, no company
284:29 - will give you a job. If you don't know how
to do webapp test. And that's kind of the,
284:34 - that is the primary skillset they will be
looking for. They may not care about network,
284:41 - pen testing that much, you know, those services
ports. They may not care about that as the
284:52 - priority, they will keep the WebApps okay.
That's the that's going to be. Maybe they
285:01 - will ask you to do an interview or a challenge.
And that challenge, our interview will contain
285:10 - webapps about that's kind of sure. Okay.
285:12 - When you talk about web apps, there is a very
good guide or ask testing guide. And the latest
285:16 - version is four 5th is in development. But
fourth is the latest version. Just open the
285:21 - first name or ask testing guide, at least
for now, this PDF is very small. Okay. It's
285:30 - 224 pages. This is something I need you to
read again. There's something I want you to
285:36 - read. They have perfect examples here again.
They will give you every kind of example.
285:39 - It's the testing guide its going to teach
you proabably everything in web apps or app,
285:44 - basically application. They can be, they can
be web apps. They can be software. It's going
285:48 - to teach you every single thing you need to
learn. And once you do it, you will have so
285:52 - much confidence. Then you can get going any
interview on crack. It's going to be very
285:55 - easy for you. Oh. As testing guide definitely
definitely recommended material after our
285:58 - class. You know, maybe even after we finished
the whole program, then you can get your hands
286:03 - dirty on this one. Very, very important. You
need to do it. Okay.
286:08 - Second thing, if you searched for a web hacking
masterclass it's one of my courses on YouTube.
286:13 - It's roughly, it's roughly two and a half
two and a half hour. Okay. you can definitely,
286:20 - you know, you should go ahead and do this
one. It has, it's contains a lot of tests.
286:28 - It's contains a lot of basics. First of all,
you, you should be doing this one and you
286:36 - should be doing this one within this week.
Okay. That's going to be one of your challenges.
286:48 - You have to do it. That's not like after the
program, but it's like, you have to do it
286:54 - completely as it is just like I'm doing it.
It's not going to take a lot of time. Like
287:04 - maybe one, one full day. It will take so divide,
whatever, you know, however, you can divide
287:12 - it. There are different different tests and
this one that you have to learn, okay.
287:15 - So web hacking masterclass for this week or
testing guide after you finish the program,
287:21 - just make a note of that. There are automated
scanners every day. There is a lot of stuff
287:25 - in this one and that's something I need you
to do. With that, I think with that that was
287:33 - probably what I wanted to share. After that
let's come on the topic. I will still explain
287:37 - you some of the concepts of web hacking and
today's class or possibly in the next slide
287:41 - as well. But again, that is the, that is the
main focus area. Web hacking master class
287:45 - on YouTube and web testing guide. That is
what you are supposed to do. Now. Let's, let's
287:55 - start. What I can explain you is with my own
application. So my team has created a vulnerable
288:04 - application for you people, and you can go
on my website here and it will show you SDBA.
288:15 - So you can open that SDBA that this is the
SDBA download. You can enter your email here.
288:19 - Okay.
288:20 - It's close of content. So don't use it for
the commercial purposes this is for personal,
288:26 - personal use. Once you add your email, it
will start the download. There you go. Download
288:35 - now. And the release one is the latest one.
Okay. I, once you download that, you need
288:42 - one more software, which is called Zemp, but
when you can use any web server Zemp is the
288:48 - easiest one. So for windows am telling for
Mac, it can be a different software. Zemp
288:52 - is cross platform, by the way, it will work.
So you can just say Zemp, open it, go to,
288:59 - okay, let me close it. Go to more downloads.
Don't download the latest version and go to
289:09 - more downloads here and download 7.2. So PHP
version 7.2 is the one which I recommend,
289:19 - of course you can, you can download any of
these. They should work. But 7.2 is the tested
289:25 - version.
289:26 - So it is something which we have been using.
So this first version 7.2, again, Linux has
289:30 - one. Mac has one. So it is the Mac. Just use
whatever downloaded and installed it as in
289:38 - next, next, next setup. So I know you can
install it yourself. I'm not sure that, you
289:51 - know, open it next, next, next, and install.
That's what it is now coming to the point,
290:01 - the SDBA, which you download it. You have
to open that, so, okay. Let's see. Downloads,
290:08 - downloads, SDBA release. Here you go. This
is our SDBA. You can copy this and go to your
290:17 - C drive, open zemp, go to SD docs and then
paste it here.
290:23 - So basically by doing that, you uploaded your
web server files to sorry, you uploaded your
290:27 - website files to the web server. This is a
web server, now your machine is a web server.
290:32 - You uploaded all the files in that. Once you
upload it, it's time to start the web server.
290:40 - So you have to start these services. Okay?
You have to open the ports. You have to open
291:07 - the port 80 and my SQL port. I don't know
what that is. Three, three, eight, six. I
291:11 - think so to do that the Zemp control, you
can run it at admin. Once you run it as admin,
291:16 - you can see their can be crosses here, just
click on them. And it will either ask you
291:20 - to uninstall or install. Okay? If there is
a cross here it will install this. Otherwise
291:24 - it will become a tick here, a green tick.
291:28 - It is a red cross. You have to click on that
cross. Once it is done, you can just start
291:34 - the service so I can stop it like that. And
I can start it like, okay, that's how it works.
291:42 - So this is the port of my SQL, and this is
the port of Apache. Okay. Apache is running
291:46 - on 80 and four, four, three 84, HTTP version,
four 43 for HTTPS version. And my SQL is running
291:53 - on this port. So once you do it, you are good
to go. And you know, you, you upload the files,
292:03 - right? You uploaded the files you have start
the server services, you're running website
292:08 - right now. The problem is database. You don't
a database for website where it will store
292:16 - the information where it will come, you know,
saved information to have that open your browser
292:20 - and go to local host LOCAL H O S T.
292:25 - Okay. Local host slash PHP. My admin. Yeah,
of course, guys, the video is recorded, right?
292:32 - So once you, once you start doing it, you
can of course follow it from the video, this
292:36 - open the video. And again, don't be confused
right now, right now. Just try to understand
292:40 - the concept. Download Zemp installs zemp open
a server, you know, make a server open the
292:46 - port 84, four, three my sql by control panel.
You just start, copy the files of the website
292:53 - in the zemp and then create a database, link
the database to the website. Boom. You did
293:00 - it. That's what you have to do right now.
This is the panel where you can create a database.
293:07 - So new and new, you can give any name. I can
just say SDBA okay. And let's click on. Create
293:12 - database has been created now let's again,
go to the zemp and we will link this database
293:18 - to our application.
293:19 - So sd docs, SDBA. Yeah, it includes. And then
config. Okay. That's the file that has the
293:24 - configurations. And let me edit it. So this
is the file here. This line configuration
293:26 - equals my SQL connect here. Local host. Yeah.
Let the local server, root is the username.
293:30 - This zemp is running on root user password
is blank. Okay. That's fine. It is blank because
293:36 - by default it is blank in Zemp. Then database
name is SDBA. Now, if you give another name
293:41 - here, you can keep any name. Doesn't matter.
You just have to change that name in this
293:47 - case over here. But since we are using SDBA
in the file, as well as the database name
293:54 - is also SDBA, we don't need to change anything.
That's how it works. It should be fine. So
293:59 - I will be showing you how that works. That
is how connection works You don't have to
294:05 - do anything if the name is same, because in
the file, I have mentioned SDBA by default.
294:09 - Now, once you're done, you just have to go
to local host slash SDBA slash set up dot
294:12 - PHp. I, we have created an automatic script.
You don't have to do anything, press enter.
294:18 - It will set up the website for you. Here you
go. The website is ready and you can test
294:27 - this. Now it's like a review kind of website.
The model that has, you know, people can come
294:34 - here, leave their reviews and it will get
stored here. So the first review has been
294:40 - added by me sagar bansal. So, and I just written,
the review as this is an awesome application
294:46 - and the country was India. That's basically
how it normally works. Okay. There is a login
294:50 - panel here. People can go here and login.
And I mean, by, by default, the username is
294:52 - sagar. Password is bansal So you log in there,
okay.
294:56 - You log in and you can see it says welcome
back. And then you can log out. Let's move
295:02 - out. Does it matters? That, that is how you
do it, then contact pages there. Okay. You
295:09 - can go to the contact page and you can submit
a form, upload a file. That's that's what
295:15 - of contact pages in the home. Again, there
is the review tab. You can, you can change
295:18 - this thing. To 100, you know, there are entries,
there is a search form here. You can just
295:24 - say to, and when you press nothing is found
you plus one, one entry is found. And so you
295:29 - can, you can search things here. Next previous
buttons and rater us rate us form. You can
295:36 - rate us, okay, you can, you can leave a review
there. So again, this as a test review and
295:54 - maybe country, let's say India submit, and
you can see it.
295:57 - That's another entry. And that's how it's
going to work again. If I had to delete this
296:06 - entry, I can just say, delete. If I want to
delete all the entries, I can click on this
296:15 - reset button. It will delete all the entries.
No records were found. Okay. That's how it
296:17 - works. Now, if I, if I add a new one, submit,
you can see from entry when it starts adding
296:23 - again, again, that's a, that's how it works.
That's how the application works. Any doubts
296:26 - in how application is working, the website
is working and any doubts on that?
296:31 - Yeah. Yeah. I mean, I don't expect you to
understand the steps right now, but I think
296:35 - the concept needs to be clear that what I
have done is I have downloaded a server, installed
296:38 - the server. Now my windows is running a web
server that is running a website right now.
296:42 - And I am hosting a website. So website files
were downloaded from my website, right? The
296:47 - SDBA is, is a website. And this website is
working in this way, right? Right. So when
296:51 - you are testing your website. There are a
lot of things you can do. There is a very
296:54 - common list or OWASP sm them or OWASP, happen.
296:57 - These are top 10 vulnerabilities. You can
test in a website. Of course, there are more
297:02 - tests. All of them are given in the testing
guide, which I was showing you all this testing
297:07 - guide. But these are our top 10 tests from,
I mean, I have explained most of these tests
297:12 - in web hacking masterclass, the first one,
the most easiest one is the login login panel.
297:16 - If you click on login, you will see, you want
to use your name field, and you've got a password.
297:21 - You enter anything randomly, let's say bansal
bansal, which is not a valid user. What happened
297:26 - to click on login? Nothing happened, right?
You, you don't log on. Right? We can see we
297:28 - don't log. Now. Maybe you brute force it maybe,
or maybe you can test for SQL injection here.
297:37 - SQL injection is talking to the database.
If I try to add this colon here, if I tried
297:42 - to log in it doesn't do anything. If I try
to add a double.
297:46 - Colon here. If I try to log in it still doesn't
do anything. This is the first test you can
297:51 - do, you know, just add a colon. Okay. Sorry.
I was saying colon add they add a single inverted,
297:57 - a single inverted comma just add them and
they use the name and password and just test
298:00 - them. Okay. That's something you can do. So
if I just randomly add something like this,
298:05 - if I try to log in, nothing is happening because
we have disabled, the error reporting. You're
298:11 - not getting errors in reality, it is producing
some errors, but you cannot see that because
298:17 - in a secure environment, you will possibly
never see that. But let me, let me tell you
298:22 - what's going behind the scenes. Okay? when
you are doing anything in the, in the form,
298:28 - what is going behind the scenes? Let me open
the files. If I go to SD docs.
298:33 - Okay. Login page, right? This is the login
page. Let's open it right now. Here. How this
298:38 - form is working. Just bear, bear with me with
this single line here. This is the line I
298:44 - want you to see, okay. SQL query with the
descending to be database. So website is sending
298:49 - something to the database. What it is sending?
Select start. Start means everything from
298:53 - login here. Log in as the table name. Okay.
There is a database. There's a table called
298:58 - login. So select everything from the logging
table where the condition username equals
299:02 - something and password equals again, something.
Okay, this is something. And then N D quit.
299:04 - That's how it is working. Making sense. Now
how the, how the website is performing the
299:09 - test. It is just checking that, see select
everything from the login table. Their username
299:16 - is something. Password is something. If there
is a perfect match, if, if there is a match,
299:21 - right, if you're able to see a match, give
me the result, whatever the result is, let's
299:24 - show me the result. Is it making sense to
you? Yes. All right. And if we go to the database,
299:30 - actually, you know, if we really go to the
database so we can just say Zemp, my SQL.
299:36 - Okay. Then I'm just trying to see where is
my SQL installed. Okay. And do we have my
299:45 - SQL here? Yup. We have my SQL over here. Okay,
cool. Let me open, commad prompt . If I just
299:54 - say my SQL.
299:55 - Right? So to explain the concept, if I log
into my SQL as a, as authenticated user which
300:01 - can be done by my SQL dash dash, you, which
is user user is root dash P, which is password,
300:06 - press enter. Password is blank. Just press
enter again. Okay. I was expecting it will
300:11 - clear the screen possibly. It doesn't work
like that. Okay. Anyways if we go there now,
300:20 - if we, if we see show databases, okay. Show
data bases, you can see, these are all the
300:25 - databases in my, my SQL server. Okay. Right
now I'm just trying to show you as a server
300:34 - administrator. I'm the company right now.
There is a database called SDBA. If we go
300:40 - to that database. So use SDBA okay. If I want
to go in that database, I'm using this database
300:50 - now showtables.
300:51 - If we see the tables, we have two tables,
login and reviews. If we talk about login
300:55 - table. So select start from login. If I press
enter, this is the whole table in this whole
300:58 - table. There is only one entry, which is user
ID is one. User name is sagar password is
301:01 - bansal, but there is only one Id missing.
It let's suppose there are multiple users.
301:04 - Doesn't really matters. It will give you the
whole table. But when website is testing one
301:08 - single user, it is, it is testing the command.
So let's start from login where user name
301:13 - equals something and password equals something.
Okay. If username equals sagar, sorry. Uyep.
301:17 - Okay. If username equals sagar and password
equals Bansal, it gives me this. Yeah. If
301:22 - I entered a wrong result here, if password
qual bansal123, it does not give me anything.
301:28 - Can you see one row in a sec and empty row?
If my username and password is correct, it
301:37 - will give me the, it will, it will return
me the entry. It will give me the row. If
301:45 - my username and password is wrong, it will
not give me anything. Is this making sense
301:50 - now? So that is how the database is working
in the backend. Okay? The website is working
301:56 - in that way. So if the website is sending
this query, select start from login, where
302:04 - username equals something and password equals
something. Now this something is given by
302:09 - the user website is using the query, but this
some thing is what we control. So this sagar
302:16 - and bansal, this is what we control by the
website form, whatever you entered on this,
302:20 - it takes that input. It puts that in this
query and it runs that query. If the query
302:25 - gives you a row here, if it is correct, then
it logs you in. If it does not correct, then
302:40 - it doesn't log you in. That is how login and
logout works on most of the websites. Is it
302:46 - making sense?
302:47 - Right? Because you can control this, this
thing, right? This sagar, and this Bansal,
302:50 - if you can control the input, can you not
try to do something malicious here? Can you
302:58 - try to add a, add a single quote here? I mean,
if you are the one who is controlling everything
303:02 - between these two quotes, can you say sagar
and then a single quote? You can. So if you
303:09 - do this, what suddenly happens, this single
quote, which was supposed to be closed at
303:15 - this single quote. Now it is closing here,
which you just added. Is it making sense for
303:18 - the website? Username is ending over here
and suddenly you are in the control. You,
303:21 - you can type anything here or one equals one.
You can type anything here, okay? And maybe
303:28 - space as well. You can type anything here
because you are controlling it. So you basically
303:37 - type with this, this sentence, you give this
as input, but for the website, the username
303:42 - was supposed to be this one. But now it is
this one because of the quote, right?
303:48 - Because of, because this quote and this quote
was supposed to be, whatever you entered in
303:56 - between was supposed to be a value. But since
you had in this quote here, this, this user
304:04 - name becomes this much. And you type this
extra material, all right. This is the extra
304:10 - material, which was not supposed to be here.
I, as it's making sense, it was supposed to
304:12 - be this much, whatever you went through, supposed
to be in this, and then further, it was supposed
304:17 - to be, and password equals. But now, because
you closed the quote and you added some extra
304:21 - material, this, this, this part is extra.
This was not supposed to be, but you did it.
304:28 - Is this making any sense?
304:30 - Yeah. Actually, if you can, you can go over.
Yeah. To me, it's not making sense, actually.
304:37 - Okay. So if you can go over this again, that
will be great.
304:40 - Right? Give me one second. Okay. Okay. So,
okay. So this is the query. This is the database
304:46 - query, which the website is using to check
if a user name and password is correct or
304:51 - not. Okay? This is what this website is sending
this, this query to the database. It is asking
304:56 - select star from Login. Username equals something
and password equals something. Now this something
305:02 - is what you have entered as username and password.
You enter something here, user name, ABC password
305:10 - one, two, three. It will send that here. Select
star from something from login and username
305:25 - equals ABC password. Equal one, two, three.
Is it making sense you now?
305:32 - Yes. Right? So this is how website is checking.
That is a, is a user actually correct or not.
305:40 - If there is the entry of that user in the
database or not. So if I entered a wrong username,
305:50 - you can see here. If I entered a wrong password
or username, doesn't matter the wrong password.
305:54 - Can you see what it returns? Data will says
empty set. There is nothing like that. There
306:02 - is no user with sagar and password bansal123.
There is no user in my database. Okay. That's
306:08 - what it is saying. Right? Right. If there
is a valid user, if you enter the right password
306:17 - and username, right? This is the right one.
What it returns. It returns the row. It says
306:24 - one row in this set, it says that yes, in
my database, there's one user like that making
306:31 - sense now, because we are giving this username
and password.
306:35 - What if we control it? You know, it is supposed
to be username equals something, a password
306:40 - equals something. But what if we control it?
We control it by, you know, let's say we control
306:46 - it by saying select star from Login. Where
username equal sagar and password equals this.
306:51 - Right. And then maybe we can just say, we
can just say, okay, we can just say here or
306:58 - one equals one. Okay. What does it do? It
is basically saying select star from login
307:04 - where username equals sagar and password equals
bansal code one equal one. Just check. Either,
307:10 - either check if sagar and password exists
or if one is equal to one, is this true? One
307:16 - equal one? Is this true? Is this a universal
truth?
307:18 - Why it cause one? Yeah. That's a universal
truth. Right? So we are just telling the database
307:24 - that, Hey, can you check if one is equal to
one, if it is then let me in, if one is equal
307:38 - to one, then just give me access. Let me log
in. That's what we are trying to get it. But
307:46 - just saying check. If the username it called
sagar, check his password is bansal one, two,
307:50 - three. If that's correct, that's fine. If
that's wrong, then you know, just the check.
307:58 - This thing one is you got one, one, is it
called one? Then just let me log in. Okay.
308:03 - That's what we're trying to say to the website.
308:05 - Right? The problem here is you see, when something
in any single quote, you see the single two
308:09 - single quotes here. When you give something
in these quotes, this is taken as an input
308:13 - text. Okay? Let's take another text. Now here.
Username equals sagar and password equals
308:17 - Bansal one, two, three, or one equals one
that is taken as a password. Not as a command.
308:21 - You need to make it as a command instead of
a password to make a command. We need to close
308:27 - this bracket. The single quote. This is closing
here. We need to close it over here. So that
308:30 - bansal is, this. This password is closed here,
like this one. And then we get our command
308:31 - running there, or one equals one. That's that's
what we want. That's why we put the quotation
308:37 - Mark here. Okay. Now you can see select star
from login where user equals sagar other password
308:43 - equals bansal one, two, three, or one equals
one. Is this making sense now?
308:49 - Yes. It's making sense. But my question is,
so do we maintain our quote at the end?
308:56 - Yes. That's a very good question. Because
here there is an additional quote, which doesn't
309:03 - make sense. I mean, where is it opening then?
Right? Right. This is opening and closing
309:09 - what to do. There are multiple options. This,
this, this semi-colon when you see the semi
309:15 - colon, this is end of the command. This is
used at the end of the command. So maybe,
309:21 - maybe we can just add a semi colon here. This
will basically end the command over here.
309:29 - And this will be ignored. This will be the
first command. So this becomes our first command.
309:35 - And then this becomes our second command.
And also to ignore the second command completely.
309:39 - We add a hash sign. Now this has sign comments.
This, this is a comment, not a command. This
309:47 - becomes a comment, which is, you know, just
completely ignore this. That is what it is
309:54 - now. So we end the command here, be comment
it out. You know, this is our first command
310:06 - and whatever is after this, ignore that. That's
what we are telling to the database. Making
310:10 - sense now.
310:11 - So basically if you, if you try to see, this
is what we have entered in the form, right?
310:13 - From here to here, this is what we enter in
this form here in this password. We give this
310:19 - thing, right? If you give this thing, the
code will pick up this, but because you have
310:25 - added a single quote here, it will end this
here and this will be taken as a new command.
310:30 - This will be checked and then further, this
will end the command here and it will comment
310:34 - everything making sense. So in this case,
will it work? Who knows the second command?
310:38 - Sorry, the second command. No, it will. It
will not execute the second command because
310:44 - we have commented out it just, the hash is
coming. Ignore everything. After the comment
310:50 - we have commented it. It will not check it.
It will not even run. This will work because
310:57 - it is ending over here. Not here. Fine. So
what happens if we tried this? I don't know
311:05 - if it will work in the first place, but this
is what we have to give as input. So let's
311:12 - copy. And I will give this as an input. Okay.
Sorry. It was supposed to be in the password
311:17 - username. I think I can give anything. Doesn't
tell any matters. I'll just say bansal. So
311:23 - let's try to say login and you can say, I
successfully logged in. Can you see there?
311:28 - Right. I successfully logged in no problem
at all. And that's, that's how you bypass
311:31 - a whole login page by SQL injection. And basically
we were talking to the database. You are controlling
311:38 - the database. That's what we were doing now.
Interesting question. Can you do it? You know,
311:42 - let's, let's, let's not use one. First of
all, let's use something else. And also, can
311:46 - you do it with the username field instead
of the password field? Who can do that with
311:52 - the username? Let's let's let's give you guys
a try. So this is the field, which you are
311:59 - controlling. You enter anything here. Let's
us sagar. Now, how will you control this field?
312:03 - How will you ignore this part and, and establish
your command here. Let's control this field
312:08 - and try to bypass it. Okay. What shall I type
that? Me? So the semi-colon right by doing
312:13 - that, we closed this here and we got the control
here with ourselves now. Yeah.
312:17 - But don't you think you need to give it a
condition like select star from Login where
312:22 - username equals sagar or one to one, right,
right. Or one equal to one. Okay. And then
312:29 - don't you think this part is a problem? So
you have to close it. No, but I have to close.
312:35 - Okay. But still this is a second command.
This is the first command now, but this is
312:39 - the second command. What to do with it? Put
a hash that's the comment right now, this
312:47 - whole thing becomes a comment. This is ignored.
So if you take this part, okay. If you take
312:51 - this part from here to here, right?
312:54 - If you take, this part, it will press here
and password doesn't really matter. As it
313:00 - is commented out, I can press anything there.
If I tried to login, you can see you guys
313:05 - successfully logged inr. Right? Right. Now
you may be thinking then, but saga, I can
313:10 - use the same thing and I can log into any
account then. Right? It doesn't, it doesn't
313:14 - work like that. Where does the vulnerability,
where is the weakness? Did you guys manage
313:19 - to find the weakness? Hmm. Do you think there's
a weakness in the code is because it's a easy
313:26 - to manipulate the sql command. The, the database
command itself, this whole command itself
313:31 - is a weakness. Basically the website, the
secure website will never allow you to give
313:35 - the input and control the database. Okay?
What they should be doing is they should be
313:39 - checking. They should be checking for special
correctors. They should be checking that a
313:43 - user is not adding colon. As your user is
not adding the the pound sign. The hashSign.
313:49 - The username is not adding a single quote.
They should be checking for this. Character.
313:52 - They should be blocking them. Right?
313:53 - That's the first way that is called blacklisting.
You blacklist these characters or second way.
313:57 - They should be white listing some directory.
They should say that, listen, you can only
314:01 - use numbers. You can only use alphabets. And
maybe you can use hash at the rate. You know,
314:11 - the exclamation at the red dollar, you can
use some specific symbols. You cannot use
314:17 - these symbols, right? I mean, you just whitelist
and don't blacklist simply by white list.
314:23 - Just say that, see, this is what you can use.
Don't say, this is what you cannot use. That
314:31 - says, this is what you can use. Because sometimes
when we say, when we do blacklisting, when
314:37 - we say that, okay, this, this, this, you cannot
use this, this, this, the problem is we sometimes
314:42 - forget somethings, okay? We forget that, okay,
this can be done in that way. Also it can
314:48 - be done that way.
314:49 - Also, they sometimes forget to blacklist everything.
That's the reason, the best way is white list.
314:54 - White list, the characters, which are secure
these characters, this, the single quote,
314:58 - this colon, these, this hash sign, these are
not secure. And that is one of the reasons
315:06 - when you are making a password on some websites,
you will find that they will not allow you
315:15 - to use these as usernames and passwords. Making
sense. Yeah. How do you do that? Tell me you
315:21 - can just you don't have to do it. The developer
can basically add a line of code where they
315:25 - will check. If user name contains exclamation,
Mark, it will block it. It will just say that
315:31 - your username cannot have exclamation Mark.
Okay. That is what a website developer will
315:35 - do. It's not our job, but our job is to understand
the problem and tell him that, Hey, listen,
315:45 - this is the problem in this code.
315:49 - I can send anything to the database. I can
send whatever I want to be database. I can
315:54 - control the whole database. That's the whole
problem. Okay? We have to stop that. We have
316:00 - to stop the problem we have to solve the problem.
And the problem is coming because you are
316:03 - allowing this kind of characters. If you block
these kinds of characters, or if you whitelist
316:08 - only selected selected characters like this
one, this one, this one numbers. If you white
316:12 - list only specific things, it usually cannot
control the database. Right? That is what
316:17 - you have to tell. You have to come up with
the solution, not the implementation, making
316:22 - sense now. Yeah. Right now, let me give you
a very quick challenge kind of thing. Let
316:32 - us say, instead of single quote, let's say
the code, the code of the website contains
316:43 - this. Okay. It is very, very possible. Sometimes
the code of the website contains this kind
316:51 - of thing. You can see it is working. This
code's working very fine. And this is very
316:59 - normal. Okay. Let's say this is the code.
How will you bypass it?
317:04 - We were not be different from I see right
now, if you add a single quote, any, we have,
317:09 - let's say you add a single quote here. Is
it helping? Is it helping in any, any sense?
317:14 - Is it doing anything essentially? Can you
see? I mean, this court is double. This is
317:23 - double. So whatever you enter here is taken
as your password in the text, it is taken
317:30 - as text. What you want to do is you want to
close this quote so that you are in the control.
317:38 - So instead of adding a single quote, you have
to add a doube quote in this time, and then
317:44 - you can write whatever you want, making sense.
Now you need to add the same thing with the
317:51 - website is using. And there is no option to
find that it's you have to guess it. If single
317:55 - is not working, single quote is not working.
Maybe you will use double quotes.
317:57 - Okay. That makes sense. Right? So basically
that was the whole point. Sometimes developers
318:00 - use double quotes and those cases always test
for double quotes as well. Okay. Now what
318:03 - I was trying to do earlier, you know, when
I was trying to say that, always tried to
318:06 - use single quotes and double quotes and try
to break it. So for example, this is, this
318:10 - is what the code is. If I was, if I tried
to add a single quote here, suddenly this
318:15 - quote becomes inconsistent. There is no reason
to have three quotes. It will throw an error.
318:18 - Normally it will throw an error, in our case,
it is not throwing an error. If I just give
318:25 - a single quote here and single quote here,
it is not putting another because we have
318:33 - disabled that. Okay. We have disabled the
error reporting and as well, it's not throwing
318:41 - an error, but normally on some websites, I
will throw an error when you add a single
318:49 - quote and, and something like that, if their
website is not secure they are not white listing
318:55 - or blacklisting.
318:56 - You had a single quote, it will trow an error
because there is no sense of having three
318:59 - quote in the quote. There is no sense of adding
that and it will throw error here. That's
319:04 - basically the concept of bypassing login panels
or bypassing security with SQL injection.
319:06 - Again, you can use the same thing on the homepage
here. Can you see, there's a, let's see if
319:09 - I tried to open this here. So can you see
this URL, this, your listing ID equals one.
319:16 - What else? I can control this ids, but you
know, it's not my log in panels. It's basically
319:23 - it is about controlling the website, what
it is doing in the backend. Maybe it just
319:28 - check in select start from some table where
our ID equals one. There our ID posts two
319:33 - what happens if I, if I, if I try to save
it our Id equals zero.
319:35 - Okay. You see we, we don't get, okay. We don't
get any, any response. Right? We don't get
319:40 - anything. What happens if I say, sorry, what
happens if I say our ID equals Singapore?
319:45 - Okay. You can see we've got an error, could
not execute. Select star from reviews where
319:51 - ID equals colon see. I told you, this kind
of command is what it is using in the backend.
319:56 - The website is using this command select star
from reviews. They will get the table name,
320:00 - their ID equals something. Now what happens
if you start controlling this, right? What
320:04 - happens if you control this?
320:05 - Okay. Can you control this? I guess yeah,
you can try. You can try. So there are multiple
320:12 - commands you can use. For example, I can say
union, U N I ION, right? I can say union,
320:19 - let me show it in the, in the in this one
first in command prompt, it will be easy for
320:29 - you to understand, and then we can take it
to the real level. Okay. For example, if I
320:36 - do select, start from review where ID equals
one. Okay. Select unrecognized command as
320:40 - the, Oh, okay. We are not in my sql. I think
I logged out. Yeah. There you go now if I
320:49 - say so let's start from reviews. Database
selected
320:52 - Now, if I say so let's star from reviews.
Can see. There is, there is the full table.
320:59 - Now here. Command is using select star from
reviews, where ID equals one. That is what
321:03 - the website is using. Where ID equals one.
This is what the website is using. But what
321:09 - if I can modify this? I can say maybe union.
U N I O N union one, two, three, four. Okay.
321:17 - One, two, three, four. It doesn't work. No.
Okay. I wasn't expecting that. Okay. Okay.
321:23 - Select one, two, three, four. Yep. So see
what union does it combines? The output of
321:28 - two commands here? I have run two commands
here. So let's start from reviews. Where ID
321:34 - equals one. That is the command, which website
is running. I just added a union select one,
321:43 - two, three, four. Now select one, two, three,
four is another command. If we run it individually,
321:48 - select one, two, three, four. If you run it
directly, you will see the output is this
322:00 - table, right? This is the table.
322:02 - Is this making sense? This is the table, which,
which comes after running selects one, two,
322:11 - three, four. But if you just do union, it
means combined both of them. And this is the
322:22 - combined table. Is this making sense? This
was the default table. Select start from review,
322:28 - where ID equals one. This was the table, which
comes to at one, two, three, four. We combined
322:34 - both of them. So star start from reviews,
where ID equals one union selects 1,2,3,4.
322:39 - We get a combined table. Right? What if I
run another command? Select one, two, three,
322:45 - four, instead of three. If I add something
like @@ version, @@ version gives you the
322:51 - version number you can see in the third column,
instead of three, we are getting the version
322:58 - number, right? If I use the same command here,
if I take this union, this line, if I take
323:05 - this, if I go on the website, okay.
323:09 - If, if, if I add that here, you can see select
whatever. So our ID equals one. This is what
323:17 - the website will put union select one, two,
three, instead of three, I'm giving @@ version
323:22 - and then forward and then colon And if I press
enter here, you can see, we suddenly get one
323:28 - more entry, which says one is ignored. I think
one is not showing here. But if you, if you
323:33 - try to see on, on this thing, I don't find
one, but I see two here. I see four here.
323:39 - And in third column, you can clearly see the
version number. Is this making sense? Right?
323:45 - So I'm calling the database. Yup, yup, yup.
Using the word union. You combine the, they
323:48 - have a new field, a new command, basically
a new command. So whatever you enter, the
323:53 - check said true.
323:54 - I mean I can enter. Sorry, what true, what,
323:55 - What I'm saying is that using the union command,
you're able to like manipulate the data or
324:00 - add something to it.
324:01 - The whole problem is the union is not adding
commands. Union is not adding commands. Whole
324:03 - problem is you cannot command. There is another,
another operator for that. We call these operators,
324:05 - okay. Union operator. It does not adding the
command. It is combining the output. Of new
324:08 - command ? There's not running the two commands.
It is adding the, it is combining the output
324:13 - of such command. The first command was this
output of second command was this. So it just
324:18 - combined the output and make a new table.
But that is what union does. Okay. It's not
324:23 - running the command, it is combing the command
output. Okay. You can use some other operator
324:29 - which will simply run, which will run the
second command. You can use some other operator,
324:33 - but you don't have to learn this language.
That's the whole point. That is what I'm trying
324:38 - to stress Now, you don't have to learn what
is union.
324:42 - You don't have to learn the whole language
itself. You really don't need to learn this.
324:48 - You can use automated tools. There are tools
to do it. You don't have to run these commands.
324:52 - You don't need that. What you just need is
you need to understand how the concept works.
324:58 - And if there is a possibility to manipulate
something, if you think that, okay, this is
325:07 - a website, right? This is a website in the
browser, in the URL. I see that there is an
325:14 - ID parameter. This is a parameter, which is
containing a value. One. If you see this kind
325:17 - of thing or possibly this command is going
to the database. There is some command being
325:19 - run in the background. There is something
going on in the background. Maybe I can modify
325:24 - it. I can manipulate the database. And then
you just use a tool which can do it for you.
325:30 - You don't have to try any tests. You just
have to use a tool. That tool there are multiples.
325:35 - My favorite one is SQL map. Okay. Let's open
the kali linux and run it.
325:38 - So, so what you're saying is that you didn't
have to learn , you don't have to know SQL.
325:42 - Yes.
325:43 - The tool can automatically run SQL commands
for you. It will ask previous questions, the
325:46 - last few questions in English language, you
answered them in. Yes or no. It will make
325:50 - commands and it will run them for you. But
why I showed it to explain you the concept
325:54 - in the deeper level. Now, you know what is
going on behind the scenes, how tool is working,
325:57 - who is also going to try these commands, this
random commands. Is it making sense now?
326:02 - Huh.
326:03 - Yeah. Yeah. Let's go in kali linux. It will
do everything for us automatically. We don't
326:07 - have to do anything. Yep. Very well. It's
quite slow today. Let's log in.
326:12 - Okay. let's open Firefox. Alright. Now in
Firefox, let us a assume. This is a real website.
326:19 - So there will be IP address or the domain
name, right? So I will check my IP. So my
326:25 - IP address is one nine two one six eight zero.one,
one two. If we go there and this works, my
326:37 - website is in the folder of SDBA. Okay. You
can see this is my website. Is it making sense
326:52 - to you guys? What I'm doing right now? I'm
just, I'm just opening this website in my
326:56 - kali Linux. Right? Guys, I can just take this
URL, right? I can just take this URL and I
327:01 - can open my terminal and I can use the tool.
Okay. The tool name is SQL map. So SQL map
327:09 - that's URL. And you just give it the URL of
the, of the page where you want to attack.
327:14 - I give this URL and I press enter and it will
start attacking it automatically. It will
327:20 - start asking you questions that you have not
declared. Cookie server wants to set it own.
327:25 - Do you want to use those or do you want to
use your own? Now we have no idea what the
327:32 - cookie is. Really? We have no idea. Let's
just go with, yes. This go with their own.
327:38 - Okay. That's why I just said yes. Here you
can see.
327:41 - Am just saying
327:42 - Backend database is my SQL. Do you want to
skip the payloads specific to other databases?
327:46 - Now it is detecting that the, my SQL database
seems to the database seems to be my SQL.
327:49 - Okay. Which is correct. We are using my SQL
list. If you go ahead and check your Zemp
327:57 - panel, we started my SQL service. Some in
some cases, some companies will use Oracle
328:03 - or some companies will use postsql or some
companies will use no SQL. There are multiple
328:10 - versions of databases. In those cases, you
can use other tests. In this case, I will
328:15 - skip the test for other databases because
we know it is my sql Yes. Here four remaining
328:21 - tests. Do you want to include all the tests
for my sql? Yes. Include all the test. It
328:26 - is now testing. Now you can see these things
where having order by the it is using different,
328:31 - different codes.
328:32 - It is using different, different things. Okay?
Yeah. This line is interesting. Get parameter.
328:37 - Our ID is my SQL, this, this, this error based
where this close injectable, it found a payload,
328:44 - which is working. It found a payload. Our
ID appears to be injectable. Okay. It has
328:48 - found payloads. Yeah. Get our ID. Parameter
is vulnerable. There is a vulnerability. This,
328:55 - this our ID. If you see in the browser, you
can clearly see this our ID here. This our
329:02 - ID is vulnerable, right? That is what we were
exploiting ID. This is one vulnerable Do you
329:06 - want to keep testing others. No. Why will
we keep testing others? If we have vulnerability?
329:15 - No. So no.
329:18 - All right. It just finishes. It suddenly closes
what happened. It closed because it found
329:24 - some attacks. Okay. There are two. No, there
are multiple options. You can use this one.
329:33 - Okay. Now what you can use and boolean ways
type where, or having closed, you can use
329:43 - where you can use having something like that.
And this will be your, this will be your attack.
329:54 - Parameter ID equals one and select something
from something count concat blah, blah, blah.
330:00 - You don't have to learn this SQL. This is
the SQL query. It is going to use. You can
330:05 - copy the same query. You can go to your browser.
You can paste the same query. It will give
330:10 - you some information. Okay. Is this making
sense to now it's building the query for you.
330:15 - You don't have to make the query yourself
basically made that query for us. Now, what
330:20 - we just need to do is, I mean, it will, it
will automatically make queries.
330:23 - This is another query which we can use. And
so this is automatically making them for us,
330:30 - but we don't even need to. We don't even need
to, you know a care what it is making, what
330:35 - we need to do is we need to extract that information.
I can just say that, that DVB, that that's
330:41 - DBS. If I present it will give me the databases
and I can just specify there. It will give
330:47 - me all the databases on that website. It has
run some query. This was the query it run.
330:59 - Okay. This was the query it has used. And
it has given me the databases. Now I can use
331:10 - a database SDBA. Maybe I can use that. I can
just say dash So small dash DBS for database
331:16 - finding that's capital D to use a database
I'm using database SDBA And I want to find
331:25 - tables that as tables, this tool will automatically
make some queries and it will automatically
331:34 - bring tables. This was the query it has used.
These are the tables we have got. You can
331:46 - copy this and paste it in the browser. You
will get the same exact, hutput, okay. This
331:56 - is what it has done for us automatically.
You can see there are two tables. We can select
332:06 - the table of login. So I will just say capital
T like level, table of login. Okay. And just
332:12 - select T there. And now I can just say that
that's columns.
332:15 - It will now make another query for us. It
will give us the columns. You can see, we
332:19 - have three columns ID, username, and password.
Now we can dump it, right? This was the final
332:26 - query we can use. We can dump this. We can
dump it by saying column names. So that's
332:35 - column. I want username. So user name and
I want a password. So password, I want username
332:43 - and password. And then show me what's there
in those entries. Give me the output. Now
332:50 - it is going to dump that here. You can see
dump. Username is sagar password is bansal.
333:07 - Can you see Danielle? How you dump things?
This is the final query, which it has used
333:18 - in the browser. This is what it does. Use
union. Okay. Ready? You were using union.
333:25 - Yes. It has used union. The union, all select
something here. And we don't even understand
333:30 - what it is, but it has done it itself. We
have the output. That's what it is. Is it
333:36 - making sense? This is making sense. Everyone?
Yes. It's making sense. Right? So let's have
333:42 - the challenge, u,ur task. This is your query.
Let's say DBS is SDBA.
333:46 - Okay. So, okay. Sorry. Give me one second.
Give me one second guys. What's the problem.
333:51 - Oh, okay. I got the problem. Sorry.
333:53 - Alright. So these are the two tables, right?
I just showed you how to extract username
333:57 - and password. Now a few people show me how
to see the reviews in this website. How to
334:05 - see the reviews. What are there in the reviews?
How busy are, can you guys show me? I'm just
334:12 - trying but.WE have to go over once again to
use this, the two, two select what reviews.
334:19 - Okay. Then you have to select a database.
It is dashed capital D. Then you have to select
334:23 - a table. It is -T. When you have to select
the coloumn it is -C. Okay. The first letter
334:33 - of capital and one single dash. When you want
to extract something, it is dash dash. And
334:36 - the thing that you want to extract tables,
dash dash columns, dash dash DBS. Is it making
334:51 - sense now? Can you, can you tell me what I
have to type here? Dash dash tables and then
335:08 - what dash review review. Yep. So if I type
review, review or reviews, reviews. Okay.
335:16 - Sorry. Yeah. Reviews. Reviews. You can. Okay.
What happened? Yeah. Sorry. Don't you. Think
335:19 - we already have the tables. These are the
tables. So don't you think we have to find
335:24 - columns.
335:25 - If we have to find columns, we have to select
this and how to select it. Control, sorry.
335:29 - Capital one,see P. There to select it, right?
They will. This is a table, which we are selecting
335:35 - the table. Now 
in this. We have to find columns. So dash
335:45 - dash columns. So database is SDBA tables is
reviews. Now give me the columns. That is
335:50 - what you see by dash dash columns. You see,
now this is how we get columns. These are
335:58 - the columns. Now tell me how to select the
column of a review and country. How do I select
336:03 - that review and country? How to select that
column? So you have to do dash SDBA dash G
336:09 - reviews, dash dash. Then use dash dash for
country. Okay. Are you using that? That's
336:14 - reviews here.
336:15 - It is simply the name, right? So simply just
type country here. Right? Coma. I also need
336:19 - review. So review after dump press enter,
and you can see, there is only one entry,
336:25 - country is, India review. Is this a by the
way? Yeah. I mean, that is how you do it.
336:33 - There is one more quick option, which you
should know that is OS shell. If you use a
336:38 - option called OS Shell, it doesn't matter.
Just remove everything. Just type OS Shell
336:46 - dash dash dash shell. If this command works,
it does, it does everything you need. You
336:52 - can just, you know, you can just press enter
just press enter here, press enter there.
336:58 - If this command works for you, it will be
great. Here. You can see OS Shell is working.
337:07 - You got a shell. What is the os shell? It
is basically hacking the system without running
337:15 - any command. It's just, just handle it.
337:18 - Os shell is complete shell. You can type any
command. You can control that machine. Now,
337:26 - if I say If config or IP configured, it's
a windows. If I say ip config , you can see,
337:34 - I am controlling that machine. What is this
IP? This is machines, IP windows, machines.
337:38 - I can just say dir you can see these are all
the files. Okay. So Zemp folder as SDBA , SDBA
337:46 - as Sagar folder index, I can see these files.
I'm controlling that server. Now I can make
337:52 - a new folder. Then. Okay. Again, there is
no folder like can here. Can you see? No,
337:59 - I can test that and now I can do it again.
You can see there is a new folder. Ken we
338:06 - just created that? Right. If I just go ahead
and show, you will see seen my C drive C in
338:14 - C. Uokay. So if you see it in the SP docs
SD docs,
338:17 - You will see a new folder here, which says,
ken, can you see Ken? Right. Okay. Yeah. Ken,
338:21 - th that is how we basically, we have, they're
controlling that machine. Now we're controlling
338:28 - my windows 10 machine because of this SQL
injection vulnerability. We got a os shell,
338:36 - well, of course you cannot get os shell by
manually type in the commands, impossible.
338:47 - But with SQL map, it has the ability to give
you the shell. Is this making sense? So by
339:01 - using SQL vulnerability, you just got it,
complete access to this system, right? So
339:07 - now what I want to show you today is kind
of, you know, just like you have auxiliaries
339:15 - and metasploit today, we will be talking about
things formatting, you know, so we have apps
339:19 - have web apps are not only limited to the
source code or, or the HTML files, which we
339:25 - see.
339:26 - There are so many other things like directly,
you know, that attribute first thing is, is
339:30 - one of the important things to understand,
because normally it will happen. You know,
339:37 - there will be a company, they have a website
hacker in the house.com. Now for employees,
339:43 - they have a secret location. [inaudible] Dot
com slash secret. You know, those kinds of
339:48 - things they normally happen. They, they normally
keep you know, nonpublic data there. Sometimes
339:52 - you will find the retreats will have uploads,
upload, listing open. So [inaudible] dot com
339:57 - slash uploads. Now you've got everything in
that thing. So they're actually listing is,
340:00 - is kind of a important thing to understand.
And you know, it's, it's one of the best things.
340:06 - If you can, if you can find you will get a
lot of data there. So if we become Suunto
340:15 - S no, actually let's open a bar, let's open
their best. Their Buster is the software you
340:20 - can use. That's the recommended one. There
are others as well. I will show you others.
340:24 - You can press their Bester and here you go.
Right? So I was saying that this is the dermis
340:35 - true console. It requires an IP address with
a port now, or, or the URL with the port,
340:39 - same thing. So let us try HTTP. Let's say
we can dot hacker in the house.com. And we
340:45 - know that the port is 81. Wait, it is running.
Okay. Now you can go ahead and increase the
340:52 - number of threats. If you want to go faster,
I will not recommend it until required. You
341:04 - know, in, in most of the cases, networks are
sensitive, they are firewalls. They will block
341:12 - you. You really don't want that. Not lifts.
So this thing matters a lot. You know, you
341:18 - can do a pure brute force in pure brute force.
It will go to [inaudible] dot com slash a
341:24 - slash B slash C. So it will go to a, you know,
a land.
341:31 - If I even select that, now I can select character
lists. I can select minimum and maximum land.
341:38 - It will come up with every single possibility,
which is the most effective one, but it will
341:43 - take a lot of time. That's the whole problem.
Now it's on you. If you do have that much
341:48 - time or not, of course, in a normal pen test,
which is like, you know, one day, two days,
341:55 - three days, you don't have that much time.
Okay. As well as in the LPD exam, six hours,
342:00 - you definitely don't have that much time.
So you would want to do a list based book.
342:05 - First in that list, you will already have
common places like slash login slash admin.
342:12 - Those words you will have in that list, where
are those lists? They are already there in
342:17 - the, their Bester folder. You can click on
browse. You can go to user.
342:21 - So always go to the slash the slash the boot,
and then user uses the folder where you have
342:24 - a lot of stuff share is default where you
have shared stuff of all the applications.
342:28 - Now, here, you can find their Buster. So all
of these are apps you seek up is there are
342:33 - a lot of apps out there. You can find her
booster in this list. That's what I'm trying
342:37 - to do. There you go there, Buster. Okay. You
can double wait and you will have bird list.
342:41 - So these are, there were lists. There are
alpha alpha user enumeration. So this list
342:45 - contains a lot of users or sorry, Apache user
and admiration, these lists, and then a lot
342:51 - of users. Similarly, you will have word lists
directory lists, Darlene. What we are looking
342:55 - for direct list three is the latest one. There
are some, you know, small and medium lists.
343:01 - Let's go with, let's go with the small one.
Okay. Small list let's click on and let's
343:09 - go with the lower case, small list. It really,
normally it doesn't matter if you are going
343:18 - with this small, you know, lower case or a
Perkins, but some config, you know, some websites,
343:24 - they, they, they be smart. They become smart.
And they use uppercase directory in, in some
343:27 - cases, normally it is always lower case, but
for a hidden directory, they can go with the
343:34 - uppercase. So maybe you want to use these
ones. Maybe it's a big one, medium or small.
343:38 - I would recommend go with small every time.
Maybe try medium. If you don't get anything
343:42 - significant, I'm just going to use lowercase
small. Okay. Select list. Now here you can
343:47 - be recursive. Recursive means. So for example,
you find a part like slash uploads. Now, do
343:53 - you want to further go ahead and find other
things in that?
343:58 - So slash uploads slash something, do you want
to find that as well? So that is what a recursive
344:04 - means. You can be the person there, brute
force files. You can, you know, you can, you
344:09 - can search for files. PHP is what we are researching
at the moment. You can, you can just go ahead
344:14 - and add other extensions and it will, it will
start with 14 files as well. You can, yep.
344:22 - You can always start with slash so you're
if you're starting with slash that means happened
344:29 - in the l.com/it will start from that domain.
If you want to start from a specific sub domain,
344:36 - you can, you can put that year, but I just,
I just like to put that in the URL itself,
344:47 - you can just put that at the URL here itself,
and it will really just keep it default. Let's
344:55 - go ahead and we can start.
344:56 - And here you can see that starting getting
a lot of stuff. What to do. You can always
345:06 - click on this preview on your is the one which
you should be looking at. And now suddenly
345:09 - you have the information you can see very
clearly all of these files out there. So this
345:14 - has even site, there is a file index dot PHP.
Then there are folders, icons, WP content,
345:20 - WP includes. These are the folders in that
website. Soon after it will come up with many,
345:25 - many such folders response court is something
you need to understand. These are response
345:29 - codes here. Now, what are these? This two
zero zero means. Okay. Okay. Zero response
345:32 - code means, okay, you go to this URL. It will
work. You know, it will work in one shot.
345:34 - That is the Tuesday, the zero response score.
Three zero one is redirection. So you go to
345:42 - this page, it will redirect you to somewhere
else.
345:45 - You hope to index dot PHP. It will redirect
you some better. That is the redirection.
345:50 - Four zero three is forbidden. You cannot open
this website. If you try to open icons, it
346:01 - will, it will give you a forbidden error.
Again, two zero, zero is okay. Three zero,
346:11 - zero one is redirect four, zero three is four,
four, zero four is not fun. And of course,
346:19 - if it is not found, it will not give you in
this list, right? There is no point of having
346:29 - it here in this list. If it is not fine, because
we're just trying to find the existing stuff.
346:35 - One more thing. There is, there is one more,
which is called five zero, zero errors. So,
346:38 - you know, five zero one five zero two five
zero three. All of them, our server failure
346:44 - now server is failing. Okay? Server is having
problems. The web servers are not able to
346:52 - handle your request.
346:53 - It is crashing. So all of those errors are
500 cities. You see 500, maybe you are going
347:00 - too fast. Maybe are overloading. The system
really depends. What is going on. Maybe there
347:05 - is a broken application. The code on the website
is broken. Really depends how the, how the
347:14 - server is, you know, facing those problems.
But anyhow, if you get $500, there is a problem.
347:23 - Okay. To wonder, okay. Three, zero, one, redirect,
fortunately forbidden. Let's go ahead and
347:28 - verify these kind of stuff. If we open Firefox.
And if we go to, we talked about how can we
347:34 - be house pro proxy? That's remembered references,
proxy removal. There you go. Let's leave that.
347:40 - This is the website. If I tried to go to icons,
ICU, NS, you can see, it says, not found I
347:50 - C O N S but here it is saying four zero three
which we should be quite, you know forbidden
347:58 - actually four, zero, three is forbidden.
348:01 - It is giving a non founder that I'm not sure
why. Maybe the web server is not configurable
348:08 - to give the right error, Mark. It is forbidden.
It exists. I mean, it exists. That's why it
348:12 - is in the list, right? There is a reason that
is on the list. That's that's the whole point.
348:25 - Maybe you can try one thing. Maybe you can
try with the IP address. Okay. Maybe you can
348:29 - track with the IP address instead of the website.
So ten.zero dot hundred dot 10. If I'm not
348:33 - wrong, that's the IP. Yeah. And slash iTunes.
Yeah. It's still not working, but if it isn't
348:39 - the list, of course it exists. It's maybe
it's just forbidden. That's that's the whole
348:41 - point WP content, right? So maybe WP content
will work.
348:45 - So WP dash.
348:46 - Yes. You can see it works. I mean, it's not
giving any other it's a blank page. So of
348:53 - course there is, there is a blank page on,
on that, because it's a folder and there are
348:58 - other folders. So this index dot PHP is the
blank page upload folders there. Right? You
349:06 - can go to upload folder slash uploads.
349:09 - You can see, we have low tier. And then further,
if you see there are all these folders and
349:15 - this log file. So that's the whole point.
You can basically know what is there on the
349:22 - website. And you can, you can try to find
the whole structure of the website. If I just
349:27 - go to 2019, I have all these folders, but
there Buster has already done that for me.
349:34 - You can see all of them are, are, are already
here, right? If I go to this one, zero seven,
349:37 - if I open zero seven, here, you can see now
it doesn't give me anything. Why it doesn't
349:42 - give me anything in zero seven. Because if
you see the names, you see, these are all
349:49 - JPG files. First of all, we are not brute
forcing deputy. We are only group forcing
349:56 - PHP files. That's the reason it is not giving
me anything here.
350:00 - Second reason is these names are absolutely
uncommon, right? These names, I don't know
350:05 - if these names you will ever get them in,
in any list. That's why you're not able to
350:10 - group four steps at the end. What we are doing
is we are just reinforcing the directories.
350:14 - That's that's the whole, that's the whole
concept we are using right now to get all
350:19 - of these, all of these stuff you see. Now
we can even Brooke, first plugins here, right?
350:28 - And you can see the blueprint light. We get
to know about that. And we can see there are
350:33 - all these, this is the read me file. Maybe
I can just go in this direction, this location,
350:39 - open this, and I'll find something interesting.
So that's what I'm trying to explain at the
350:44 - moment, right? That, that is making sense
now how to do a brute forcing of directories.
350:49 - Okay.
350:50 - Yeah. It makes sense. Yeah. Right. So I click
on this. I mean, there are other structures
350:55 - you can, you know, you can just go here list,
view results. It will quickly give you all
350:58 - the locations. They can run their results
against the same thing. It will give you some,
351:02 - if there is some error, it may show you over
here. Probably you can just ignore that visa
351:07 - related to these are possibly related to the
website. Kind of you're getting all them.
351:11 - What I'm trying to show you is if I stop the
scan.
351:14 - Okay.
351:15 - Okay. Yeah. Here, you can see, we have pause
and have stop. If I stop the scan, you still
351:19 - have these results, so you can follow up.
But there is another tool which is very similar
351:25 - to this one. Okay. There's another tool, which
is kind of quick, you know, quick, easy, and
351:31 - fast.
351:32 - Okay. Yep.
351:33 - So there is one more tool which can be used,
which is their B instead of their Bester,
351:39 - there is their been under visa, graphical
a is a, is a command line. So you can say
351:47 - Derby dash edge. That's the shelf. Okay. yeah,
you can see it is actually giving users here.
351:52 - It is. There'll be SGDP as RSVPs and host.
That's the only thing you need with Turkey.
352:00 - Okay. It's that simple. So Derby STBV
352:05 - And then we taught dot hacker in the house
and it will just start automatically and you
352:15 - can see, it will come up with all the directories,
all the warnings, whatever it can find. Okay.
352:23 - I'm just going to press control C at the moment.
Let's analyze. Okay. It automatically entered
352:31 - here. It's not that efficient as their Buster,
but it is always recommended to try at least
352:37 - two pools of the same nature before, you know,
before getting to a conclusion. Okay. Always
352:39 - try to have the same nature. This will give
you some more information. If I'm not wrong,
352:44 - you can see. So it scanned here and found
this at a code was three zero one redirection
352:50 - service status, 4 million. So this was another
URL. It is forbidden. Then it found these
352:55 - directories, which are working again four,
zero, five. I'm not too sure what this one
353:02 - is.
353:03 - Little five. You can Google, but it is XML,
RPC interface that I can tell you, basically,
353:10 - XML, RPC. I think I have already covered it
is a communication interface for a lot of
353:16 - apps. So it's that interface. You just need
to check these plus, okay. This is three zero
353:22 - two three zero two. I think it is kind of
a D direction. Three, zero, two is also a
353:27 - redirection if I'm not wrong. Okay. Internal
redirection three, zero, two, again, here,
353:31 - then this plus this plus is 200, which is
okay. Yeah. And then do we have a warning?
353:35 - Okay. This directory is, listable no need
to scan it. Right. So as soon as you see a
353:39 - warning, of course, WP includes, wow, you
guys.
353:40 - You got one, just open it again. There's a
warning for WAP admins. Lastly, it says you
353:45 - got another warning here. You got another
warning here. So this is, this is something
353:49 - which you should be, which you should be considering
when you're finding all of this stuff. WAP
353:53 - content slash upgrade. They should not be
listable. Maybe let's, let's try to open that.
353:57 - Let's see what is there? Yup. Here you go
upgrade is empty, but yeah, maybe it could
354:02 - be used if it was already a website, making
sense.
354:06 - How do you use Derby intercept now? That is
how you check for directories. Okay. That's
354:12 - that's one of the extra things you should
be checking apart from the web application
354:18 - vulnerabilities. One more is, you know, when
you are testing only the web applications
354:22 - that is a limited scope, those web applications,
that's one attack surface, but think about
354:27 - it. That web application is running on a web
server. Of course, there is a web server.
354:34 - You can also go ahead and test that web server
for common things. For that you do have a
354:39 - very cool Nikto . You can do that dash help.
It's quite a vast tool. Okay. nikto dash host
354:44 - is what you want to use. Okay? And that should
give you a lot of, lot of information. You
354:50 - don't even need to check other things. If
you have little dash Nikto2 dash host, if
354:52 - you need to force the SSL, by the way, on
a specific port and it is giving error, you
354:54 - know, like if it is giving you an error of
SSL certificate, not valid, etc, etc, maybe
355:01 - just use dash dash SSL.
355:02 - That was kind of something important sometimes.
But at the end dash host should be, should
355:08 - be fine. That that should give you the, all
the information. If we go ahead and search,
355:17 - Nikto dash host and HTTP, beta dot hacker
in the house.com. Now it will start scanning
355:22 - this web server for us and we'll come up with
a lot of information. Let's see.
355:27 - Okay. It's working. I tell them, I want to
show a few things, all of these plus okay.
355:35 - I just, by mistake this all of these plus
are possible, you know, information here.
355:38 - One thing is very important to understand.
No CGI directory is found. What is the CGI?
355:43 - The CGI is a interface which Apache servers
use normally Apache servers. There was a very
355:50 - common vulnerabilities called shell shock
shell shock was there. And then there, there
355:53 - are two basic common vulnerabilities in web
servers, shell shock and Heartbleed Heartbleed
355:57 - is the SSL vulnerability. Shell shock is a
CGI vulnerability It is the vulnerability
356:03 - which can be exploited through CGI is the
most easiest one. So if you get CGI directory,
356:12 - you should go ahead and use Metasploit and
search for the shell shock scanner. And go
356:22 - ahead and test it.
356:23 - Okay. Shell shock, scanner very important.
You should, you should definitely try that.
356:31 - If you find a CGI director, it's definitely
going to help you. Here we got some information.
356:39 - Okay. WordPress script reveals installed version.
So think about it. If this was not a WordPress
356:44 - right before it was a custom app, maybe this
can give you the version of that custom app
356:50 - Then licensed found, licensed, find a license
file. Maybe that is important. Maybe that's
356:55 - why it is a listing here. It can be important.
A WordPress installation was found on this
357:03 - directory slash right, so it can tell you
the apps as well. Maybe it is a Drupal WordPress
357:13 - domain. I can come up with that technology
profile. Okay. A cookie doesn't really matter.
357:23 - Upload a directory listing is open. So it
is giving you that a WordPress directory listing
357:29 - as a browsable. So it is giving you that again,
WordPress login found it can find login pages
357:35 - for you, right?
357:36 - That's pretty much it found it. And this one,
sometimes it will come up and it will tell
357:41 - you that, okay, we found this, this, this
HTTP metric, can you see this line webserver
357:47 - returned a valid response with the junk recoganize?
In this case, this web server is safe because
357:54 - it is giving you a response on every SDBA
matter. That's why it's not giving you any
358:00 - information. In some cases you will find some
HTTP matters, like,, put or delete or, or
358:06 - even trace. These are the three actually HTTP
methods, which can be dangerous. Put means
358:13 - you can upload something on the web server.
You can upload something without any credentials
358:17 - possibility. If you can upload, of course
you will upload a webserver delete means you
358:23 - can delete something from the web server.
So that, that can be dangerous. In some cases,
358:30 - trace means you can possibly trace the whole
web server.
358:34 - You can trace the requests. You can trace
the directory listings. There is a, there
358:41 - is a chance you can even place the passwords
of the Linux user or the web server user.
358:47 - You can, you can go ahead and re reverse it
and find the passwords. I don't really think
358:51 - that any, you know, LPT exam is going to be
that complex at any stage. But put is a method,
358:55 - which you should be considering put is a common
method. A lot of people by mistake enable
359:03 - that, and you should be checking off the port
if we try some other website, not sure if
359:09 - it will give any response, but if we try something
like that, sorry, it is HTTPS. Now let's see.
359:13 - Also side by side, let me open a few more
new tab. Let's possibly open HTTPS. And then
359:17 - something like you know, the real website
hacker in the house. Sorry. I forgot the commadn.
359:20 - Nikto nikto dash host. There you go. Now starting.
So we have two scanners running a, this one
359:22 - is there and then this one is there.
359:24 - Yup.
359:25 - So I have one question. So how are you using
the tools and using HTTP and HTTPS? Is there
359:32 - ever going to be a time where you use FTP
to run that command?
359:38 - So FTP can be used, but you know, the problem
is this tool is a web server audit tool. Okay.
359:47 - It's not a file server audit tools. So FTP
for FTP, you need to use any, any other tool.
359:53 - And I'm going to show you how to, you know,
n map has scripts for that. Do you know how
360:01 - to use n app scripting engine? Yes. Right.
You can use that n map scripting engine and
360:07 - use the FTP auditing scripts and then, then
do it. Okay. All right. Thank you, All right.
360:12 - Possibly the best shot will be okay. Let me,
let me, first of all, cover this one here.
360:18 - You can see on my website, on my real website,
it says all CGI directories found, which I
360:23 - don't understand what it is saying, but maybe
they saying it has found some CGI directory.
360:27 - And I know my web server is not vulnerable
to shell migrate.
360:31 - So even it is finding that it's a good, good
thing. It is finding. Maybe you can try, but
360:39 - it does not give you anything. Error limit
reached 24, the host giving up last try. Right.
360:44 - Okay. What is this? This is the firewall.
Now I am using it a web application firewall,
360:53 - which will block the server or human or anyone
who tries more than 20 requests in one minute.
360:58 - So in one minute, this has tried more than
20 requests. My website has blocked it and
361:01 - scan has ended already. Okay. And in those
cases you may want to fine tune. You may want
361:07 - to you know, you may want to put this thing
as let's see in the health. Hello. You may
361:12 - want to total it so, Hmm. Let's see. Maybe
there is something, no one says, okay, no
361:16 - its is important by the way, you want to disable
the SSL timeout for the request before 10
361:21 - seconds. No, that's not the one for use which
host.
361:24 - Okay.
361:25 - Okay. Yeah, because then the target host allowed
ID a list, all available plugins right off
361:30 - the file, disable plugins or prepare roles
port scan tuning.
361:33 - Hmm. Scan tuning, maybe this is the version
of this is the option you want to fix. So
361:37 - this time out, after 10 seconds, my website
blocks you for five minutes. It does timing
361:40 - out after 10 seconds, of course, this will
close the scan. If you want to go with website,
361:45 - maybe you can increase this to five minutes,
10 seconds. Then it will keep on working of
361:52 - course, after getting blocked again and again,
but it will initially work. Maybe you can
361:57 - do the scan tuning. You will have to check
on the Google or YouTube or, or maybe the
362:02 - manual file how this one works. So if we see
Tuning, yes, this is the tuning.
362:06 - Oh yeah, you can, you can even try for these
things. It can try it for file. Upload sql
362:11 - injections. Okay. You can, you can try that
as well. That's something interesting, but
362:14 - what I'm trying to see here was, you know,
how to limit, so I'm, I'm just trying to find
362:22 - the limiting throttling basically. I don't
see any throttling here. You can possibly
362:26 - Google that. You can possibly see how to throttle
the, the thing you should be looking at is
362:30 - throttle. So that's something CGI bin. See,
this was, I was talking about I'm just telling
362:35 - you, you know, if you have the CGI interface,
maybe you can, you can use these, these these
362:43 - two options, either CGI bin or CGI app. And
that is an interface that can give you a lot
362:58 - of information. And Metasploit, you have a
lot of tools for CGI.
363:09 - If you find CGI, you can find all lot of stuff
there, user enumeration as possible. And then
363:16 - after that, there, there is a lot of stuff
like, you know, as I said, a Shellshock vulnerability
363:31 - is there it can be fatal. You can get full
system access if you find CGI listed there.
363:38 - So that's one of the things, if I see this
scan, it's still it also got a limited out
363:46 - after 20 requests because you know, it's the
same server, both of the websites, all on
363:53 - the same server, that same stuff. And it just
got time out. Okay. That's one thing right
363:58 - now I was talking about, I forgot what I was
talking about. Yeah. I think I was talking
364:04 - about n map before this.
364:07 - Okay,
364:08 - Paul, I don't remember. I kind of went out,
but I don't remember. Possibly we can talk
364:16 - up that thing later if needed. Okay. No problem.
Let's talk about n map then for a moment.
364:21 - Okay. So if we say locate now, maybe it isn't
user share. So CV, every time you want to
364:27 - access the tools for that, it normally is
in the user share. Yep. You can see. Now if
364:37 - you do LS, you can see these are the n map
modules and all of OS database is there, payload
364:50 - is there, protocols, blah, blah, blah. What
we are interested in this scripts, CD scripts.
364:57 - These are the scripts. Okay. For every thing
you want to scan, there is a script. If you
365:04 - see if you talk about FTP, if want to a test
and FTP server, you got subscripts. So FTP
365:08 - founds, FTP, brute force, FTP, something,
I don't know, pro FTP backdoor, pro FTP pro
365:13 - FTP was a, was a software,
365:15 - The version of FTP. And that had an backdoor.
You can test that vulnerability with this
365:20 - FTP system, maybe the system start something
like that. We VSFTP backdoor , yes FTP is
365:24 - a very popular one. I am using vsftp. There
was a specific version, which was, which was
365:30 - vulnerable. So that can help over there. Okay.
alone CV2010, 4221. You can go and Google
365:36 - read what the CVE is, but it must be a significant
one to be in this list. If it is in this list,
365:44 - it was a significant vulnerability. With a
mass scale vulnerability. You can most possibility
365:48 - try that, that one with this as well. If you
talk about a web servers. So let's see if
365:54 - we have some Apache. Yeah. HTTP you got HTTP
scripts here, right? HTTP malware host, HTTP
365:59 - open proxy not sure, but you got a lot of
scripts. You can, you can try all of them.
366:03 - SDBA, SQL injection, actually stored. XSS
you've got a lot of scanning scripts here.
366:06 - You can, you can, you can search for, for
these scripts if needed what I recommend.
366:10 - Yeah. This is what I was saying at that time.
What I recommend in case you feel stuck, okay.
366:15 - Let us say you are in the exam. You have finished
two machines. Now you've got the third machine
366:21 - to crack. I mean, you just need to grab two
machines in one challenge. If you do that,
366:28 - you will easily pass because at the end, in
three challenges, two machines, you cracked
366:36 - six machines. You need only five to pass.
But let us say you have time, right? Let's
366:42 - say you crack two machines in one hour or
two hours. You still got four hours. Of course,
366:46 - just try as hard as you can on the third machine.
And that is normally very hard. The third
366:54 - one is always hard. But LPT exams gives you
professional tools in OSCP. You cannot use
366:59 - automated scanners in LPT. You can use automated
scanners. Okay. the one which is covered in
367:04 - the course in the LPT course is the is the
fork of nessus neseus professional one they
367:10 - will not give you that it's a paid product.
They cannot give you
367:14 - But there's a fork of that, which is called
openvas open vas. I'm not sure if openvast
367:23 - installed in this, no open is not installed,
but you can, you can use openvas. And if I
367:27 - show you and it's very easy, I mean, I literally,
I did not know how to use openvas. I know
367:32 - how to use nessus, but openvas kind of, what's
kind of a cheap setup. The graphical interface
367:37 - was very bad and I just went to YouTube. I
just went to, you know, I just saw hackersone
367:42 - video. Like one, our video i's openvas so
how to use openvas
367:46 - And I'm not sure if they will give you openvas
this time. I mean, at my time it was there
367:52 - who knows if they will, they may change it.
Right? So you, you might be ready for scanning
367:58 - and, and you know going on Google and YouTube
and trying to see, maybe they will give you
368:03 - something like a Vega, right? They guys have
apps, scanner. Maybe they will give you something,
368:08 - you know, who knows something like acuanetix,
okay. Or acuanetx, whatever you want to call
368:12 - it. Or maybe they can give you something like
an arachni scanner. Okay. Now Arachni scanner
368:17 - Vega. Both of them are covered in that web
hacking master class, which I showed you.
368:22 - Open masterclass here, you can, you can see
this. What does 22 minutes? You can see this
368:29 - 22 minutes video. It will be quite, quite
good. Okay. You can understand how to use
368:33 - it. I'm not saying you do it right now. I
mean, you can just do it in the exam itself.
368:38 - You will have time.
368:40 - It's not, it's never about the time that you
always have time. It's all about to know what
368:49 - to do. You can, this is installing, 50% is
installing now from here after 10 minutes
368:54 - its, starting how, we use, so here it is starting
to use it. You can, you can maybe just use
368:59 - that. It can be helpful for detecting SQL
injections for detecting, you know, fileclone.
369:05 - Possibly. This can help you a lot. I wasted
a lot of time. Maybe you can, you can just
369:12 - not waste a lot of time. Just run the scanner.
But remember, this will take easily one hour
369:19 - more than one hour to scan something, it's
a very, very slow, nessus. This is slow. It
369:27 - can take more than one or two scan a target.
If you have like three hours left, then try
369:32 - this, okay. And keep it running and still
start working on something else. So that is
369:36 - a suggestion. Open Vas is a very powerful
tool. They will give it to you. I'm quite
369:41 - sure they will give it to you nessus something
they cannot give. So this is what they will
369:49 - give. So that,
369:50 - So, so you're saying we can either get openvas.
We can get the other ones. How I guess we
369:59 - have to know about names to search for it.
We can't just do like a search query to see
370:11 - what scanners we have. Could we?
370:15 - No, no. So that you can just click here and
you can just see what scans do you have. Right?
370:27 - Right. Well, I guess, okay. So, because I'm
not familiar with those names you just mentioned.
370:31 - So you mentioned openvas. What was the other
one? Vega.
370:34 - There's Vega. Arachni let me try to spell
it or at least arachni scanner sagarbansal.
370:40 - So if you tried that, here you go. I do have
a video. Okay. So I do have a video eight
370:51 - minutes video. How to automate your work by
using an arachni scanner. You can possibly
370:56 - try that video if you need. Right. Got it.
In the exam. If we tried to watch my videos,
371:01 - maybe they will. They will question that.
Hey, why are you using a trainers video? Possibly
371:07 - don't don't open my videos in the exam. That
will be a problem for you. Okay. But youtube
371:14 - is kind of big, right? Every second person
is going to give you that. No doubt. That
371:19 - was a arachni. That was Vega. That was open
vas Vegas VGA, right? Yes, yes, yes. VGA.
371:27 - Sorry, what was the third name? Did you mention
a third name? Acunetix. acunetix. Got it.
371:33 - Cool. Cool. Let's do one. It's kind of a good
product. They give you a free trial. It's
371:39 - kind of a good vulnerability scanner, not
sure that they will give you my best guess
371:42 - is that you will get a openvas and possibly
Vega. So both of them, my best guess is that
371:46 - because most of them are open source Vega
is open source and open vas is, open source.
371:55 - Okay. Yeah. It's a best short, but as I said,
guys, if you see this, if you see this video
372:05 - and if we see if we have time stamps, I'm
not sure if I have made the timestamps. Yeah.
372:12 - I haven't made it. But if you see, you will,
you will find some topics like this one, here
372:19 - you go.
372:20 - Do you see automate this using Vegas, scanner
whatever you did in this part, you can automate
372:25 - that with Vegas, scanner. That's why I was
teaching in this, this part. So there are,
372:32 - there are other, other stuff. So then there
is another video here automate this using
372:38 - arachni scanner. I have taught all these scanner,
how to use them. I thought, you know, most
372:47 - of these things, and and vulnerabilities in
kind of detail. So this video is something
372:55 - which is kind of a, it must try if, if you
have that much time, so of course you should
373:04 - be watching this, then you can see this one
demo of automated SQL injection. This is,
373:09 - this is coming from the SQL map, which we
covered yesterday. So that is, that is what
373:13 - it is then what is brute force attack, how
to do that, that is also covered there. And
373:18 - you know, what to try to limit to the brute
force in the exam as, as much as possible,
373:24 - you know, like webpage, if you have a list
then sure. Without list try limit yourself,
373:29 - six hours is not a big time to make a custom
list. Right.
373:32 - Right, right, right. Yeah. And there, there
are some popular web shells possibly see this,
373:35 - this, this, this, this go over with the whole
video. So it will cover a lot of stuff, which
373:38 - you should maybe knowing for the exam. Okay.
Alright. Is there anything else that we need
373:43 - to cover possibly? I mean, n map servers or
webapps, do you guys think, is there anything
373:47 - else and let's, let's talk about the HTTP
methods, corrupt ones I'm still, you know,
373:51 - interested to show that it can be useful if
you find a method. I haven't find any method.
373:59 - I think in, in my machines, I mean, I have
not included the methods. Vulnerabilties in
374:04 - these machines, which I have but it's, it
will be good to have one. So it could way,
374:13 - as you know, if I want to do a less, I can,
despite the output and I can grab the output
374:17 - and then I can search whatever I want to search.
So I want to search something like methods,
374:21 - There you go there are only methods. Scripts
HTTP methods. Okay. Let's try this script.
374:25 - Copy. I will just do n map then HTTP okay.
Ubeta dot hacker in the House dot com dash
374:32 - dash script equals this press enter. What
does it is unable to split net mask for target
374:36 - expression.
374:37 - Any spelling mistakes there. Oh, okay. Not
too sure what that means. Let's try with the
374:43 - IP.
374:44 - Yeah, it will. But it should. I want with
this as well. Possibly, because this is a
374:50 - custom set up. Maybe we have done some mistake
while making it. So now here you can see the
374:57 - support and methods are get, has had posts
and options. If you find put delete or trace,
375:04 - that's your best shot, put, you can upload
it very easily. You can upload a website it
375:09 - shell. It's your shot. Just go ahead and take
it. One of the tools for put will be one of
375:16 - the tools will be I forgot the web may be
No,uw let's see how, what tools we have.
375:20 - Okay. Okay. Okay. Okay. Maybe that is not
installed webAD It is a tool that you can
375:28 - use or burp suite is one of them you can use
berp suite easily can bypass. UI will do that.
375:39 - If you are interested, you can just go on
Google, very easy. You know, we just have
375:45 - to intercept the request and put your, your
shell code in that request. That's how it
375:50 - works. Uyou can easily do that. It's not a
big thing. I, I'm not sure if you will find
375:55 - or these methods, but it's a good shot if
you find them. Okay. I have missed a few machines
376:02 - in the exam. One machine I have missed it
completely. I'm not sure. Uwhat's, what's
376:06 - there. Maybe there's a, there's a method HTTP
method thing. So that's something I would
376:11 - recommend you to doing. Okay. Uany questions
on that?
376:13 - So if I'm hearing you correctly with the put
method, we simply run burp suite. We captured
376:16 - we run the proxy, capture it and then change
376:19 - The request. So at the end of the request,
you can put the data, your shell code. Oh,
376:25 - got it. It's kind of easy. If you want a practical
demonstration of that. You can, again, you
376:31 - can go on the YouTube. No, I'm just showing
you where to find it. I have a video on that
376:36 - as well. Okay. You can watch this one offensive
hacking. Yeah. Okay. Offensive hacking master
376:40 - class. There you go. This one, this is a,
okay. This is an ad. I am quite sure this
376:45 - is a four or five or six hours video again
its kind of a big video, but just go to the
376:50 - end. The only last, the only last thing that
gets a bumper ad, we cannot skip it. I'm almost
376:57 - done.
376:58 - I'm making money here. All right. Okay. This
is the this is the shell code Where is that?
377:04 - Okay. Possibly here. Yeah. This is the one.
This is the one here in the end. Yeah. And,
377:10 - and last two or three seconds. Maybe you see
here, I was opening this burp suite. And so
377:19 - it's like last five minutes stuff. You can,
you can see that here you can send this, this
377:22 - request to repeater, right? Click. And here
you can put your code. This is the place where
377:28 - you put your code. So it's very easy. It's
like five minutes where just maybe if you
377:34 - are interested as well, and this one, this
will help you a lot. If you, if you cover
377:42 - this whole stuff, it's a pre OSCP and LPT
core stuff. Okay. It's kind of OSCP, but LPT
377:45 - stuff. It's a good one to have.
377:46 - If you have time, like six hours, maybe 30
minutes daily. That should, that should make,
377:49 - that should make a lot of, it's not, it's
not required again. I'm saying it's not required,
377:54 - but it's, it's quite, it's quite good. Okay.
Okay. Now at the at least just watch this
377:59 - last 10 minutes, which is the put operation.
Yeah. If you're not going to watch the whole
378:04 - thing, just watch the last one. Yeah. I mean,
this one contains stuff like buffer overflow,
378:06 - which is out of the scope of LPT. I mean,
you, you don't do buffer overflow in real
378:10 - life. Possibly never in pentest. So that is
kind of out of scope of LPT. That is the OSCP
378:15 - stuff. This is how you develop it. So you
don't need, you don't need that. This the
378:18 - goal. Right. You don't need that. Just ignore
that part. Maybe just last 10 minutes as well.
378:23 - Okay. Okay. Alright. So with that today we
have covered how to brute force the directories,
378:30 - how to test the web server, using a Nickto
and possibly n map using scripts. That's what
378:35 - I wanted to show you possibly just, you know,
what, what is the task you have to do? Just
378:40 - watch basically, you know, just watch that
2.5 hours, video, web hacking masterclass.
378:44 - Also watch that last 10 minutes part how to
exploit put operation. And if you have time,
378:50 - then watch how to use open vas. Okay. That
is kind of what you have to do. Okay. Right.
378:54 - And that should be more than enough for you
to do, you know, crack. 50% of the exam, believe
379:00 - me, 50% because it's, it's a lot of web based
exam. Right. with that I'll end the class.
379:08 - If you guys have any doubts, please feel free
to ask right now. Did you, I'm sorry, go ahead,
379:12 - Paul. Oh, no. After you my bad. Oh, do you
say 50% is like directory busting or, and
379:16 - servers, web apps. Web servers.
379:18 - So like yesterday we cover an SQL injection
and if I upload and all of those stuff, you
379:22 - will mix and match concept from here and there.
All right. Sounds good. Thank you. I mean,
379:25 - I'm just trying to give you the importance
of all of this, right. It's kind of important.
379:27 - Yeah. Yeah. The rest 50% is kind of, you know,
how to do network, pen testing services, how
379:33 - to exploit services, run exploits out to you
know possibly how to do it's privilege, escalations,
379:38 - all those kind of stuff. Is there often after
all of those and that's what we're trying
379:43 - to do. Right.
379:44 - So today we're gonna learn about network penetration
testing though. We have already done a lot
379:48 - of it. And you know, when we were hacking
this windows XP we, we almost did it, right.
379:55 - We know how that works. It's basically the
same methodology. You find ports, you find
379:59 - the services, you, you know, try to see if
it service is vulnerable. Then you see if
380:04 - the, if there is an exploit for that service,
if an exploit, just try that just try to hack
380:09 - it. That's that's how the limited scope is
that's how pen-testing normally works here
380:12 - we do have a server Vicky dot hacker in the
house.com. It started, yeah, that's a modified
380:18 - version of another Lennox machine. So someone
else created it and we just modified that
380:22 - because.
380:23 - Because now that person is not continuing
the project. So it's going to take some time.
380:26 - But I have done as see, this machine has got
two IP ranges. It's let me show you, so here
380:34 - it is, this machine has portal. It has got
ten.zero.one 40 eight.one zero six and ten.zero.one,
380:39 - one five one zero six. So this machine has
got these two IPS. Let's test it on this IP
380:43 - 148. I mean, of course you guys can route
through DMZ machine, you know, beta machine.
380:47 - You can have this IP 10.100 routed to 148
and then test it this. Well, I will just avoid
380:54 - all of that. You know, you guys know until
now you are already good at that. You can
380:58 - do it yourself. I'm directly assigning myself
a range of 148. So you guys can, you know,
381:02 - go here in settings and network and here the
adapter to just leave it as it is, it is,
381:08 - it is fixed on hundred.
381:12 - At that for one is something you can change.
I've just changed it from which to nat network
381:19 - 148. So I'm just assigning myself directly
a range of 148 you know, just to avoid that
381:24 - routing. And it will save a lot of time. I
hope that makes sense. Right? Right. So we're,
381:30 - we're basically pretend that we've already
pivoted So I'm until now everyone, everyone
381:34 - can do that. I think. Right? So this one seven
four target is one 40 eight.one zero six,
381:38 - but let's get in the action then. Uthere you
go. Let's try to see our IP address. It will
381:44 - make you more clear. I have config. You can
see that this is the adapter one. We have
381:48 - not touched it, but thereafter two, we have
changed ourselves to 148. So we are now in
381:50 - one 145, right, right, right. Now,uthere are
multiple things you can start with.
381:53 - I always like to do a ping sweep, right? So
ping sweep is something you should be, you
381:59 - should be trying and there are, again, multiple
tools you can use. You can use metalsploit
382:04 - uyou can use,uyou know, ping scanning tools,ufrom,
from different vendors or solar vend and all
382:07 - of that. Or you can use n map and then n map
is I, you know, I'd say small tool to handy,
382:15 - tool even big, you know, even big companies
like tenable. So if you think about tenable,
382:20 - they got their scanner, which is Nessus, and
that's at a big scanner, one of the fast scanners.
382:27 - So what they do is in the backend, they use
the n map databases. They use the n map service
382:32 - n map databases, the port scanning database,
the OS detection database, all of that is
382:38 - running through ata. And that is the only
reason.
382:41 - And map is a free tool because it's a free
tool because these companies are paying for
382:45 - that data. These companies are paying for
those databases, which n map has. So, n map
382:48 - is quite a powerful tool. If these companies
were not paying n map will be at Pity at the
382:51 - end, it's a free one. It's, it's something
you should be using. It's one of the most
382:55 - powerful tools. That's why, when I want to
start with something, I will use n map. Now
383:00 - LPT methodology, the license the license penetration
tester methodology says that you should always
383:09 - start with a ping sweep. Then take those IPS,
which are alive. Then do a port scan. Then
383:15 - take those ports, which are there, do a service
scan version scan, and finally start, you
383:20 - know, gradually, you, you don't, you just
let me show you something. This is what most
383:28 - of the people will do n map the whole range.
383:33 - Okay? The whole range. And here they will
type something like dash a and maybe something
383:41 - like script equals default. You know, they
are pushing the network. They are completely
383:48 - pushing the Whole netwrok or you're scanning
each and every port, each and every machine
383:53 - on aggressive mode with scripts. This is gonna
kill the network. Think about it as, as a
383:59 - company, when you are doing it offline, you
know, with these virtual machines, that's
384:02 - fine. That will work. But when you're testing
a real website or real company, real infrastructure,
384:06 - they got network, which is limited. They got
like, they might have a, you know, a hundred
384:10 - Mbps connection. They might have a, let's
say one GBPs connection. That's something
384:14 - normal. I mean, I have normally seen one.
1Gbps a fiber optic cable. That's the maximum
384:18 - I have seen in companies are normally. So
with that one GB line, they got like a hundred
384:23 - people working in their traffic is coming
and out.
384:26 - And even if you are pivoting, this will basically
kill everything. If you are pivoting and then
384:33 - doing this kind of work, this is going to
kill the old, the old stuff. That's why the
384:40 - recommendation is you always do a ping sweep
first. So to do a ping sweep, you can always
384:45 - type the range, which was, let's say more
148./24, and then just type SP okay. We are
384:50 - going to scan in the ping. Sweep mode. Okay.
P is that ping sweep you do a ping sweep and
384:56 - it will come up with the IP's, which are alive.
Now, here, you can see.one is working .2,
385:00 - who is working the three's working. And these
are probably the virtual hosts in our case,
385:05 - these are not ping machines. 108 is there
and one, zero six is there right now. We know
385:12 - that these hosts are up.
385:13 - And for the example, I'm going to ignore these.
I mean, this is the router of course, for
385:20 - the example, I'm going to ignore these ones
because it's not that these are not real.
385:23 - I mean, I have created the network, so I know
these are, these are the two which will focus
385:27 - on, okay, let's say that in our scan, we found
only these two. So now you know that you only
385:34 - have two hosts to scan. Now you can just go
ahead and scan only these two. So I'll just
385:39 - remove this and I'll just say eight and possibly
I can just add another one, 10, zero.one 48,
385:44 - dot one zero six here. And instead of SP,
now this time I can do a support scan and
385:51 - I can scan the ports in multiple versions.
Again, you can do TCP scan sin scan UDP scan.
385:56 - A lot of options are there, right?
385:59 - If you don't know about that, maybe you can,
you can watch my ch masterclass or something,
386:04 - or you can go and Google it quickly. Or maybe
my CISSP master class on YouTube. I have explained
386:10 - all of that very easily ports and different
different protocols, but you need to understand
386:14 - one thing when you're doing pivoting normally
sin scans will break. And I think I have already
386:18 - explained this in when we were learning that
windows XP sin scan will normally not work
386:22 - in pivoting. That is the point. You might
want to do a TCP scan to do a TCP scan. And
386:27 - Metasploit you have auxiliary scanners, a
fork scan slash TCP and, and, n map it is
386:31 - ST scan, TCP S T. That is what you do. And
then if you want to do a sin scan in metalspoloit,
386:41 - it is auxiliaries ports. Auxillaries sacnner
port scanner, sin scan in this one, it is
386:47 - S S so you can do it with SS.
386:49 - And what I recommend is, you know, just, just
try a just try with a sin scan, if that works,
386:55 - that's fine. But TCP scan is going to be much
more reliable in terms of that. Uhere, we
386:59 - got a report. None of the ports are open on
this machine. You see, all thousand ports
387:04 - are closed in this. They got this one, but
this is the mistake which most of the people
387:11 - do. This is the mistake which most of the
pentesters will do. And the mistake is these
387:20 - people are only scanning whole thousand ports.
These are only top thousand ports. These are
387:28 - not the whole network. Okay. You want to make
sure you also put a flag here. Dash P dash,
387:35 - -p- means scan all the port. Now, if I press
enter, it's possibly gonna take more time.
387:43 - But here you can see this time it's scanning
65,535 ports.
387:51 - Okay. Instead of thousands, this will give
you a much more reliable results. Now this
388:04 - will give maybe this saying everything is
closed. Maybe there is a firewall, maybe something,
388:12 - but that's fine. But at the end of this saying
that, yeah, it has scan all the port and in
388:25 - this case also it has, scan possibly all port.
Right. Making sense. Yeah. Right. So that's
388:30 - what you do. That was the st possibly just
always try SS as well to see if you get something
388:34 - again, nothing is found on this machine. And
I think port 2280 111 443. And this one, and
388:38 - yes, that's exactly the same. So sin scan
is not giving us any additional information
388:42 - possibly also do a UDP scan. So UDP is another
protocol on which connections work here you
388:47 - can see on UDP. It is very you.
388:50 - It is very, very surprising. You see, we got
a port on that machine, DH CPC, which is open
388:56 - port filter. So there can be a firewall, or
it can be open. And there is 68 port number
389:03 - UDP. So you get one more port there. And this
machine they're not easy to exist, but it
389:11 - is possible that the port is open. It's not
sure it is possible. In the meantime, what
389:17 - I'm going to show you is. So for example,
this is something we will be interested in.
389:20 - Now, when you know that these are the ports
open, you will not be scanning all 65,000
389:25 - ports. Again, this now, from now, from this
point of time, whenever you do a scan, you
389:31 - do only these ports, 2281, one one one three
nine four four three. And this one, that's
389:36 - what you do. Okay. You only scan these ports.
389:39 - Let's keep this scan running until then. Let
me show you something which I like to maintain.
389:44 - So let's see, there are a few reports, for
example, this was a pen testing project, which
389:49 - I was doing. It's quite old project. I just
edited this today. So 34 minutes ago, this
389:55 - is what I was doing by the way, when we were
late for the class, I was removing these IPS.
390:01 - So this was a project for the client. It was
quite a big project. We had 44 IP's, okay.
390:07 - 44 IP's different network. These colors are
the ranges. So you see a common commodity
390:10 - say dot something and then 74, then something
and zero eight and you know, something dot
390:16 - 95. So these were different, different ranges.
We were scanning. We had the last report.
390:21 - It was quite, you know, a white box test.
390:24 - I would say we had access to the last reports
and last reports. We found, you know, they
390:32 - found these vulnerabilities in the new reports,
which we were making. We found these vulnerabilities.
390:36 - So, you know last time, for example, in the
last month test in on this IP, there was a
390:40 - high vulnerability this time they fixed that,
or maybe they didn't, but we found two vulnerabilties
390:45 - one was low, one was medium. And the last
tester says it was a high. So not sure how
390:51 - he got it. Okay. For example, similarly here,
there was only one high now, we say there
390:56 - were four medium, vulnerabilties and some
low vulnerability. So when I removed the number,
391:00 - it was the number four here as well. Maybe
it was too low or three lowe or whatever,
391:06 - something, something low whenever it is here.
391:10 - So that is something you might want to do
when you're doing a real life test, a white
391:15 - box test create a sheet, you know, keep everything
organized, just to compare the results what's
391:18 - going on. And why would this be a high vulnerability
last report? And we are saying there's a low
391:22 - and medium, maybe, okay. This says that maybe
using that low vulnerability and medium vulnerabilties,
391:27 - someone can make a new vulnerability which
can be high. Okay. Combining of them. Right.
391:30 - getting, getting getting a combination. So
maybe think about those ideas. When you, when
391:31 - you have such such sheets, of course, it is
possible that they have reduced the level,
391:34 - or maybe they have been the risk assessment
and some other way it's always possible. But
391:38 - when you're doing a real life test, always
think about this kind of things. One more
391:45 - thing I'm gonna share is when you're doing
some tests, when you're doing a scan though,
391:52 - you know, the n map, sorry, when you are doing
this, this, this thing, the same thing when
392:02 - you're doing it in Metasploit, metasploit
keeps records of everything. You know, when
392:09 - you are, when you're scanning, your port might
as well make a database for you, but when
392:25 - you're doing it with n map, possibly just
make a target database. The target database
392:28 - is it's a good practice when, and, you know,
in report writing, it will come handy. So
392:34 - here if we take the IP one zero six, so the
target database works like this. You say IP's
392:40 - or let me just type here. Ten.Zero.One, one
40 eight.one zero six.
392:45 - Okay. That's the IP. We can format that later.
Let's say if ports found ports open, Oh, sorry
392:52 - for that. Okay. ports open and here. And you
can, you know, start typing the ports which
392:56 - you have got. So just for an example, 22 and
80, that's what I'm going to type 20 and 80.
393:03 - And on this side, you can possibly say services
found, right? So then you can write services.
393:09 - Then here, you can say vulnerability found,
alright. And then on the side you can say
393:16 - exploits from, and possibly, you know, you
can even have links there. You can do whatever
393:22 - you want to do analysis but what was the result?
Right. And finally, risk score. A risk score
393:30 - is, you know is going to be depending upon
multiple factors, for example ease of exploitation,
393:36 - how easy it was to explore it for you.
393:39 - And then you know confidentiality, how much
confidentiality was exploited. So what are
393:42 - you able to get full access? Where are you
able to see whatever you wanted? 10, if you're
393:47 - able to partially see it five. So on the scale
of one to five, or preferably try to build
393:53 - on scale of zero to eight, that's what we
use in ISO. So zero to eight, then integrity.
393:57 - And then on the availability, that's what
you possibly want. And finally, on the basis
394:03 - of these explanation, and NCIA, you can check
a table, maybe table six in the next year,
394:10 - six ISO, 27,005. And you can assign this,
this score here, or maybe you can take NIST,
394:15 - RMF risk management framework. You can check
these values in that as I need a score here
394:22 - on the basis of the risk score, you can assign
a vulnerability level.
394:28 - So is it a low level? Is it a medium level?
Is it high? So just always keep this kind
394:36 - of target database when you are working on
a real project. Okay. We're not doing that
394:39 - here because it really doesn't matter as we
are. We are already recording the video. First
394:43 - of all, when you're that that's a pro tip,
always record your pen tests, whatever you
394:51 - do, just record it. Even if you don't want
to make the databases, you know, you're recording
394:57 - it. You can just view the recordings and come
up with the things. But when you're making
395:02 - it on the spot, it gives you visibility. Now
I know, okay, port 20 is open in this machine,
395:08 - maybe other, other data here, when you will
fill the sheet, you will have a lot of data.
395:13 - And that will be kind of, you know, very helpful
at the later stage.
395:18 - Making sense. Yeah. Yeah. That makes sense.
All right, so one was make a target database.
395:21 - Now here let's cancel the scan. It's not going
anywhere. I just manually cancel that. Let's
395:28 - just focus on this for the moment that let's
say, this is our target. I mean, this, this
395:35 - one, let's just ignore this at all. It's a
UDP on the one port and you cannot possibly
395:45 - do anything on DHCP CPC. This is like a port
which you use for IP addresses. Possibly.
396:02 - Let's ignore that. Let's say that our target
is one zero six in the moment. And that is
396:16 - basically the IP of you know, of this machine.
If you see. Yep. One zero six here. That is
396:34 - the machine. So that's good. We have the machine
now.
396:39 - So what do you do? You know, when you have
that, you just start a scan on that, but this
396:47 - time you don't scan all the ports, you scan
only the ports, which you found 22. Okay.
396:57 - What'd I just did. Give me one second. There
you go. All right. So 22 80 111 139 443 32768.
397:03 - What I want to do is I want to run this thing
in aggressive mode. Normally you would, you
397:08 - would go with a version detection scan. Okay.
But here, I know that we have limited number,
397:12 - of ports only selected ports. And of course,
services are already here. You know, as a
397:18 - such, as there should be, be their, their
versions. We can get it, but let's run it
397:27 - in the aggressive mode. So dash I will add
dash V to know what is going on.
397:32 - You know, it will give more information. Now
you can see now it is giving more information
397:36 - discovering open port. So this is what this
does, right? Sin scan by default is taken
397:42 - the sin scan. Maybe if you give a STP, we'll
take the TCP scan by default the mistake,
397:45 - the SS notice it does not showing you what
is going on. Okay. Operating system try and
397:49 - are just trying to find the OS. And now NEC,
this is the n map scripting engine. So it
397:54 - does also running some scripts, some default
scripts because our -a option. Okay. That's
398:00 - that's the benefit of using dash a dash is
quite an intensive. Again, it may break a
398:06 - lot of networks. You may not want to do it.
You may want to do it for by port. Okay? So
398:14 - only scan port 80 and then work on it. Then
only scan port 139, and then we're going in.
398:22 - So that's something you may want to do. We
are just running it. We are not carrying out
398:27 - the network. That's fine. Let's keep it running
till them till then. I also want to tell you
398:35 - one thing, possibly, you know, when you, when
you have these, when you are making this database
398:43 - and his here is the part, normally you work
individually, right? You've got a team. When
398:52 - you are in a team, of course you specify the
work. So in a project management software,
399:01 - maybe your company will use Microsoft project,
Microsoft project, ms. Project, or your company
399:10 - will use JIRA. So JIRA is a popular one. These
are possibly the two, two project management
399:17 - softwares companies use. There are multiple
others as well, open project management, etc,
399:21 - etc. They will give you, you know, they will
give you work. They will assign you work.
399:28 - And normally they will do it on the port.
Once this discovery is done, they will, they
399:32 - will start assigning ports. So port 80, who's
going to work on port 80 or port 22. Who's
399:37 - going to work on port 22 and that's possibly
what you will be doing in future. Okay. Normally
399:42 - you divide the work in teams.
399:45 - So would you be dividing? So everybody's doing
the same kind of scans and attacks on those
399:51 - ports or what could be running on it. So for
example, you know we might not be dividing
399:58 - it at this time. I was just giving an example,
but think about it. Like, for example, this
400:04 - scan has done. Let me tell you this scan right
now, here it is done. Now we know that, okay,
400:09 - what are the processes? What are the services?
And doesn't, I'm trying to find SSH, right?
400:12 - SSH version this. Now maybe I will divide
that work. And I will tell someone that, listen
400:18 - on port 22 do all the tests now, which tests,
it really depends. You know, there, there
400:24 - can be a lot of tests and you can find them
in the LPT methodology and, and you know depends
400:29 - on the methodology again, but LPT methodology
has the tests.
400:32 - If you check here, LPT master report templates,
these are the methodologies. So, you know,
400:37 - for example, there is this one internal network
pen test, a firewall prevention let's see
400:41 - web application. So for example, you find
port 80, right? And we also found 80. Let's
400:46 - see here, we find port 80, which is running
apache. It, we know it's website, or a web
400:51 - server, at least. So we are going to maybe
they're are going to tell someone that, listen,
400:56 - go ahead and do all these scan, all the tests
given on this page. And let me show you one
401:04 - thing. This is a 106 pages book, okay? These
are all the tests you see, these are all the
401:10 - tests, fingerprint the application, you know,
maybe just perform website spidering . And
401:17 - there are, there are different, different
tests that you can do perform banner grabbing
401:24 - to identify the web server.
401:25 - We just did that. We know that it is apache
and the version as well. We just did that.
401:38 - But possibly these are the templates and you
normally, you don't do all the tests. You
401:44 - have to look at the objective of the pen,
test, why the pen test is being done and what
401:54 - are we trying to do? And on the basis of that
objective, you, you select some tests, you
402:02 - know, you've talked to management, whatever
your client, you sell, you talk to them. And
402:06 - this normally is done beforehand before testing,
and then you finalize the scope and then you
402:12 - start testing and that's what you have to
divide. Right? You have to divide the work
402:19 - into multiple people. That's normally in big
teams. That's what you do make sense now.
402:26 - Yeah. Yeah. That makes a lot of sense. Yeah.
Right. Thank you. Did we just close that?
402:31 - Oh yeah, here it is. Now in this case we have
got these, these things, right? They got,
402:36 - they got the versions and you can see, it
has run some scripts for us HTTP methods.
402:41 - It does run some scripts now just to, you
know, go out of the topic in case we found
402:49 - something like put delete, okay. Put and delete
are too dangerous options. Trace is also a
402:53 - dangerous option because trace allows you
to do, you know, tracing, reverse tracing.
402:56 - Maybe you can, you can open the password file,
or maybe you can find the location of some
402:59 - things traces kind of risky option. It is
giving you that here you can Google it, how
403:06 - to exploit traced, very easy. Get In, in terms
of, if you have the put option here in SDB
403:11 - methods, you can upload a file arbitrary file
upload. Vulnerabiltiy comes in in the hand,
403:14 - when you have put option, when you have delete
option, you can delete files in server
403:22 - So maybe I will just go ahead and delete a
configuration file, or maybe I'll just go
403:27 - ahead and take some, some important file,
which may give me some access. Most possibly
403:32 - I can delete the firewall you know, all the
files of that firewall. So delete is a dangerous
403:37 - option. Put is a dangerous option trace is
kind of risky option, or you, you know, it's
403:40 - information disclosure kind of thing. So confidentiality
is violated with trace. Uso it is running
403:45 - the script and that is giving you these, these
things, just telling you this red hat, Linux,
403:50 - okay. These are the version of services, which
are running here. Uthis, this version was
403:55 - not found. This version was not found again.
Okay. We found this version. We found this
403:59 - version was not so, n map cannot do a lot
of things. Of course, that's, that's the limitation
404:04 - of n map.
404:05 - You know, not everything will have a banner,
but this is basically doing banner grabbing
404:10 - in those cases. Again, we have to rely on
other tools and, and you know, what's more,
404:13 - what's more better than using Metasploit,
you know, that's the professional framework
404:17 - we will be using every time. So let's go ahead
and say metasploit before that service, postgreSQL
404:20 - start, I'm starting a database service here.
Okay? Because I want to show you something.
404:26 - UPostgreSQL is a database in Kali Linux. You
can use my SQL if you want, but postgreSQL
404:31 - is by default install and MSF DB.
404:33 - INIT a I'm telling meta sploit to possibly
just create a database or initialize a database,
404:37 - whatever it wants to do. It says database
already appears to be configured. That's good.
404:41 - If it was not, it will configure it automatically.
Now let's start it. MSF console. Now we have
404:46 - just connecting a database. So everything
we do get stored in metaspoilt you know, everything
404:52 - we do is, is, is going to be a part of it.
Now here, if you say workspace, you can see,
405:00 - we got some workspaces. I created this one
while doing pen tests, or maybe another class,
405:05 - a default is the one which you are in default
is a temporary database. It will go away.
405:10 - What I suggest is you create a database here,
workspace dash a to add that need to be delete,
405:15 - or possibly just try the help menu.
405:16 - If you got confused here, we can say license
to pentest. I just added a database. If I
405:20 - say a workspace, now we are in this database.
If I, if I want to change it, I can just say
405:29 - workspace space, hacker in the house workspace
space, before I can change it like that. Right
405:32 - now, we are in the license to pen test. Let's
create this screen. If I do host, you can
405:37 - see, and Metasploit has got a full database.
It can create a target database for us. IP
405:43 - address, Mac address, name operating system,
operating system version, operating system,
405:47 - possibly special pack or service pack, purpose
info connects. It's going to do everything
405:53 - for us. If I do ports NO, services. Yep. If
I do services, it's going to do IP address
405:58 - port, not sure where it is, but name, state
info. Right? A lot of things it can do for
406:03 - you, right? It's going to maintain a whole
database for you when you start doing some
406:06 - things. You can, of course run n-amp in metsploit.
406:07 - So I can just say a DB underscore n map to,
you know, to use n map, but to store everything
406:10 - in a database of Metsploit DB underscore nmap
very quickly, I will do that scan. So dash
406:12 - ss ten.zero.one 40 eight.one zero six. Right?
I hope that's the IP if I'm not wrong guys.
406:17 - Yeah. Right. So I'm just going to scan all
the ports in it. Just to show you it's this
406:21 - not the methodology, but I'm just showing
you, you can, you can do it. And then let's
406:27 - say dash eight. So right now they started
a scan with all the ports on SS so sin scanning
406:34 - on that IP, using aggressive mode, it will
take some time, but it will give us a lot
406:38 - of information. Let me just cancel that and
add dash V as well so that we know what is
406:44 - going on behind the scenes. Okay. There you
go. So it does a lot of scans RT scan, maybe
406:48 - other TCP scan or something, and then it starts
a sin scan. It found these ports, and now
406:49 - it is going to start the service can on these
ports, which have found, so let's let, let
406:53 - us do it. Standing six services, a service
can be done. Opening systems can start. It
406:57 - will start the opening system using the NSE
that has the n-map scripting engine, let it
407:02 - do whatever it is doing right now.
407:03 - And it's not going to take like more than
two minutes. So that's something fine. That's
407:07 - the benefit of using the database. Now, everything
is finding will get stored in the database
407:11 - and you can explore that database. You can
make XML file, HTML, files, PDFs. You know,
407:14 - you can export that to other you know, you
can export that to other scanners like Nessus
407:18 - or next post, right? You can, you can scan
all of these things, whatever you do, we can
407:26 - send it to other scanners, automated scanners
automated pen testing tools like saint. So
407:32 - you can, you can use this data and those tools.
I'm just telling you in the professional life
407:38 - possibly in the LPT exam, you're not going
to go that deep. What you will be supposed
407:47 - to do is you can use n map directly or in
the metasploit. It's your choice, but you
407:53 - need to know how our scanning works. What's
the whole purpose of doing it. And that's
407:58 - what LPT exams demands. So let's keep it running
and possibly we don't need it now anymore.
408:09 - Let's, let's keep it though, as a safe option,
let's compare the results. All right. How
408:16 - long is it going to take 227 and finished
out?
408:20 - Okay. Two, 217 seconds lost then. So yeah,
maybe one more minute. There you go. Everything
408:26 - got complete. We can clear this screen. We
don't need it. Now. Let's test hosts. We got
408:31 - this steps. Okay. Let's let's do it again.
Maybe a little bit smaller hosts. You can
408:36 - see it's giving us the IP is giving us the
Mac address. It's giving us.
408:41 - There is a Linux, not exact version, but service
pack possibly version is this. Purpose. It's
408:47 - a server. You can add these things so you
can add the name. If you get to know, you
408:58 - can add some comments, you can add some info
and you can do that with a dash ad. So here's
409:11 - the c-a and then you can add whatever you
want to add. You can write manualy let's check
409:16 - services, so services, you can see this machine
has got this, this, this port open. Okay.
409:20 - This was protocol. Okay. PCP protocol name
is this. This is the version. Okay. That's
409:23 - what it is coming up with the versions, making
sense. Now that's what, that's what you were
409:28 - supposed to make manually. Metasploit can
do it for you, right? And that's the, that's
409:32 - the, one of the core reasons we use a framework
or a tool, which can, which can handle all
409:41 - of this.
409:42 - That's the main reason to use. Metasploit
one of the main reasons, because then you're
409:47 - doing a big test. You know, it's one, two
IP, doesn't matter when you're handling like
409:52 - 40 IPS, which I was doing in that day, right.
That report, which I was just showing you
409:57 - two minutes ago when we use 40 IP's, it becomes
a lot of work. It's going to take one day
410:01 - in each IP. So 40 days project, it's like
a one month work. You cannot handle everything
410:07 - manually. That's why you need all of this.
So anyways,ulet's try to see, we don't have
410:12 - the version of this service. Okay. SMB, of
course we know that 139, 137 and 445 till
410:14 - now. I hope you know, that is SMB port. We
have done it too many times now. So one 37,
410:17 - one 39 SMB let's run SMB scanner. So,uyou
know, search SMB.
410:20 - We have a lot of stuff there. And SMB as SMB
SMB and, I'm interested in SMB version, maybe,
410:24 - you know, I need the version of that port.
So it will be an auxiliaries. Of course there
410:29 - are the auxillaries, scanners, SMB enormous.
And we version, yep. This is the one. So possibly
410:33 - let's try that. Copy here. Use this enter
show options, set r host. Now a good thing
410:37 - is I can just press double tab and it will
show me all the r hosts in my target scope
410:44 - in my database. I can just press double tab.
It is auto completing everything. Okay. It
410:49 - is auto completing. I can just double tap.
It is showing me that they want to read for
410:55 - the whole range or do they want to do it for
the selected host? Let's do it for a selected
411:06 - host. That will be one zero six. So that's
the benefit. You know, it's going to take
411:10 - everything automatically. I don't have any
other information. I will just run it.
411:14 - Now here, it got completed. Host could not
be identified, but we got to know that version
411:22 - is this right? That's something interesting.
We got to know that. The, the services running
411:33 - desk services, we, you can see it automatically
updates. The, you see, it automatically updates
411:36 - whatever you do. So now you have that in your
records. That's one of the beauty for, for
411:42 - using this kind of thing. Similarly, you can
do same thing with RPC wine and this service,
411:47 - we don't even know what service it is. You
can completely ignore that. Maybe it's a proprietary
411:53 - service, whatever, but RPC wine, you can find
the version similar way. Just like I found
412:00 - the SMP version similar. You can find it now
coming to the testing part. Okay. Coming to
412:05 - the testing part. What is the next step? Let's
suppose just ignore this for a moment, but
412:13 - let's suppose we got all the versions.
412:16 - What's the next step guys. I'm asking you.
So we scanned enumeration. We found that exploit
412:26 - it, find a exploit for it. Vulnerability before.
Yeah. Before finding an exploit, we need the
412:36 - vulnerability. First of all, right? Because
maybe there is a vulnerability and there is
412:43 - no exploit for it. But if there is an exploit,
there is a vulnerabilty So it's vice versa.
412:53 - It's not true. So first of all, vulnerability,
how do you do that? Again? Multiple options
412:59 - you can, of course you can just, you know
start searching off about these things in
413:05 - Metasploit itself, you can start doing that
here itself. I don't see anything good here.
413:09 - Maybe you can use this one in a users. It
will give you users on this SSH sports. But
413:17 - at this time, you know, this is the stage.
When you have all of this, this is the stage
413:24 - where you may want to divide the work, because
it's going to take a lot of time.
413:31 - You've got a SSH, service, now you have to
do a lot of tests. We are just rushing it.
413:39 - We are doing it very quickly, you know, just
to end the lecture, but in real life, you
413:47 - may have to do a lot of tests. Maybe right
now, we are focused on getting access in a
413:52 - real test. You don't care about access. When
you care about this vulnerability this enemy
413:57 - user, if you are able to get a user name that
is a vulnerability that is affecting the confidentiality,
414:06 - you are able to find usernames, which is,
which is not a good thing. You're compromising
414:10 - the confidentiality. So maybe you will exploit
this service. Okay? You will run this exploit
414:14 - possible. Similarly, Apache, you got this
one let's copy as clear, right? And similarly,
414:17 - okay. There's a lot of stuff. Possibly all
of this stuff is coming because you know,
414:22 - the version number is somewhere common here.
414:27 - So two is here. So that's where it's coming.
Maybe I can just do apache. Now these are
414:34 - the Apache exploits. Possibly I can just go
ahead and you know, it takes time. Okay. It
414:40 - can take easy. It can take three to four days
in a normal work. If you are doing a pen test,
414:49 - which has got a lot of, you know vulnerabilities,
ia lot of ports, a lot of services running.
414:59 - It can easily take two to four days to complete
one or two IPS. Okay. That's the real life
415:13 - experience in our cases because we know LPT
exam is six hours. And we know that, you know,
415:20 - we are doing only one machine, I mean three
machines in six hours. So roughly you get
415:28 - two hours on one machine. It's not going to
be that hard. You will easily be able to find
415:37 - vulnerability
415:38 - It's not going to be that hard. What they
want to check is the methodology, what we
415:46 - use and how you do it. So once you found the
services, it's possibly easy for you to go
415:51 - ahead and Google these versions. Just maybe
you can just Google these versions. I can
415:54 - just go on Google and I can post them to try
to find the Versions. There you see vulnerabilities
415:59 - and you will see this version is having some
vulnerabilities, possibly 3.2. Okay. And then
416:04 - you can see, we have some, some things here,
a 7.5 is the score. You can read about it
416:08 - again. It's gonna take time. Right? so that's,
that's something you, you may want to do.
416:13 - What I am interested in is the Samba, because
I know this is vulnerable. Okay. because I,
416:19 - I am the one who has created the whole infrastructure.
416:22 - So I just want to show you very quickly. For
example, if I search for this again, we've
416:30 - got a lot of options. Okay. Once you do some
research, you know, once you go on Google
416:34 - and you search about it and you do some research
you will, you will get to know that this,
416:42 - this specific version it was quite vulnerable.
Okay. For example, 9.3 here you know, execution
416:49 - code overflow. So you can overflow, eh, something
over there. There are again, a 10 out of 10,
416:58 - there's a execution code, overflow DOS denial
of service. So when you do some research,
417:01 - you will get to know, okay, when you do some
research. You will get to know that this thing
417:07 - here SAMBA trans through open overflow. This
is a vulnerability, which is affecting this
417:11 - specific version SAMBA. But once you do some
research, you will get to know that this,
417:21 - the Samba trans open this affects any SAMBA,
Version, which is I think, which is less than
417:29 - 2.7. And in our case, it is 2.2. So this is
possibly going to affect it. Once you know
417:36 - that we already know it's a Linux, so we will
use this possibly you can use it in this way.
417:48 - Okay. Sorry. Copy.
417:49 - And it's all about research. That's going
to take time. So let's say we know that there
417:55 - is a vulnerability overflow is there. We found
the exploit similar way. Okay. Let's press
418:02 - enter. I will share the screen. And I can
hear by do show options. When I have to set,
418:09 - as r host said, r hosts and one zero six port
is 139. You can change it to four 45 or one
418:21 - 37, depending upon your target and just run
it. And you will see, it will not work again
418:26 - telling you it will not work because you see
here meterpreter session, one open, but then
418:31 - meterpreter session. One closed reason died.
Your shell is dying again. And again, this
418:39 - can be due to two reasons. Either you're pivoting
is not working fine. In our case, we are not
418:44 - even doing pivoting. Right? We are directly,
we are assuming they're doing pivoting, but
418:48 - right now they're directly connected. So it
is not the problem. And the problem is with
418:52 - the exploit. Okay?
418:53 - Okay.
418:54 - Why? Because if you do show options. Yeah.
It's not showing, yeah. This is using meterpreter,
418:59 - reverse TCP. And this meterpreter is a stager,
right? What is this stager again? In a stager,
419:08 - it will send a small payload, maybe 300 bytes,
400 bytes, whatever. Let's see if we can see
419:14 - that here. Sending yeah. Sending stage. This
was the size of stage. Okay. It sends the
419:21 - stager. Okay. The first stage, that is a payload.
That is a code. What that code will do is
419:26 - that code will fetch the remaining code. That
code is going to fetch the remaining code.
419:31 - That is what we are sending. We are not sending
the actual code. They're sending a small piece
419:36 - of code that fetches the remaining code. And
then it executes. That's where we are. We
419:42 - are sending in a state, but this sometimes
involves having a lot of session dies. That's
419:52 - the problem. We can change it to a non stage.
We can change it to a single, okay. Single
420:00 - set payload. It's an, linux/86 double tab
to see all available payloads. These are all
420:04 - stagers. We need a single, this is a single,
but I don't know what this will do. So I'm
420:09 - not using it. Shell is a very common one.
Meterpreter and shell are the two very common
420:18 - ones in shell. These are again stagers, but
this here is a single so reverse. TCP is the
420:22 - one which I prefer. I will just use this one.
So shell reverse TCP. Okay. That's what I
420:26 - want to use. Let's run it this time.
420:28 - And you can see this time. It says command
shell session three open, and it doesn't die.
420:33 - Now we have it, but this is not meterpreter.
You cannot do pivoting. You cannot do porting.
420:38 - Literally. You cannot do anything specific,
which Meterpreter brings you right now. You
420:42 - have a shell, right? When you type shell meterpreter,
that's what you have. You can type IP config.
420:46 - Okay. That even breaks it. I cannot trust
that. Okay. IP IF config, right? That doesn't
420:52 - work. Maybe you named that you named dash
a yeah. That works. So it telling us we are
420:58 - in the Linux. This is the host name or possibly,
this is the version of the Linux. This is
421:07 - the time and date. And, and I'd say 32 bit
architecture. Okay. Something is unknown.
421:17 - That's, that's possibly, it is telling you,
but you cannot do a lot of things. You don't,
421:25 - maybe you don't have privileges. You are not,
you know, root user. So you cannot run high
421:32 - config. It's, it's kind of a limited shell.
That's what you can do. And in this case,
421:38 - you can do one thing. You can try to background
it. Control Z. Okay. why enter? Background
421:43 - it You can try to search for two . Meterpreter
metER PRETER two. Meterpreter. And it doesn't
421:48 - work. Okay. So 2 underscore meterpreter. Now
you search STAICH. [inaudible]
421:54 - Yup. You can try this you know, you can try
this post exploitation tool. It's a post exploitation
422:01 - tool sessions. I have session number three,
running, which is a shell. Possibly. I can
422:04 - run this post explotation and I can upgrade
myself. It's very difficult, but sometimes
422:10 - it will work, set session two, three that's
basically what I need. I can just run it.
422:15 - Okay. Sometimes it will work. So it's worth
a try. I mean, that's the whole point. It's
422:20 - worth a try here. You can see it. It just
failed right. It opened it, it opened it,
422:24 - but at the end, again, it failed forcibly
because this, this machine does not accept
422:29 - stage payloads. Okay. Stagers. It doesn't
accept due to that. And it doesn't work. And
422:33 - some cases it will work and it will work very
nicely. So it's a good handy tool shell to
422:38 - meterpreter and it's post exploitation tool.
422:39 - Always do it whenever needed by the way. But,
you know, at the end we made it, I mean, we
422:44 - got the access. The reason why we are not
able to maybe run meterpreter or run any command
422:48 - is, are, are, you know, privileges are kind
of limited. So we may have to, you know do
422:53 - privilege escalation. That is something we
will cover in the next class. But what I'm
422:58 - trying to show you is forcibly. We can run
post exploitation. We can can do it. Then
423:02 - we may have to do you know we may have to
do privileged escalation. So who am I here?
423:07 - You can see, I am root. Okay. That's kind
of interesting. I'm root, but still I'm not
423:14 - able to run the services which is quite amazing.
Why is that not working? If config no PSSWD
423:21 - can I change the password? Oh, that's good.
I can change the password. Let's say bansal@123.
423:27 - There you go. That's fine. So now I just want
to, you know, you can btw , you can connect
423:33 - with SSH or whatever you want. I will directly
try that here. I will directly try that. We
423:40 - just changed the password. Right? So root
bansal@123. Oh, there you go. You can just
423:45 - log in and now you can do whatever you want
from the shell. So yes, I can do whatever
423:52 - I want from here. This is the, the command
it's working properly fine. So you can now
423:56 - connect with SSH maybe. Right. SSH and I'm
sorry, you can possibly connect with SSH,
423:59 - because we know that there is assistance running.
So that's possibly right. Making sense. What
424:01 - we just there, what are we trying to do creatively?
Right. Uso the whole point here, which I wanted
424:08 - to show you was services.
424:09 - Yep. The whole point I wanted to show you,
what was that? You know, I knew that, , this
424:13 - version is vulnerable. And that's why I just
did it now in this machine, there is this
424:18 - version, okay. This version opensl. This is
also vulnerable Right? And, and there is no
424:22 - exploit in the Metasploit. There is no exploit
about it in the metasploit. You have to do
424:28 - it manually. That's what this, this, this
whole thing is all about. If I show you more
424:36 - a I think this is the part, which is vulnerable
let's see. So in metasploit you won't find
424:42 - an exploit. But if I go out of metasploit
if I do something like search sploit here,
424:47 - nothing found, okay. Nothing found, okay.
SSL.
424:50 - Oh, sorry. While I was using search it'll
search. So I search spolit another tool, here
424:57 - you go. No result Yep. Here you can see. So
more or less, a less than 2.8 0.7. We have
425:02 - 2.8 0.4. Right? So all of these three will
work and these are basically, you know, a
425:09 - version, maybe zero version one or version
two. So I think they did a mistake in typing.
425:16 - This must be version one. This must be version
two. So you can use this exploit. Okay. It
425:23 - isn't your kali Linux. You can just, you know,
copy this. You can just copy this one. This
425:29 - part, last part here. Control C. You can just
save search spoilt. Let me just first go to
425:35 - desktop search exploited dash M middle, it
is m middle and paste that last number press
425:39 - enter. And here you will see, it will make
that exploit come on your desktop.
425:44 - Now, this is the exploit. You can open it
with something like leafpad. And normally
425:50 - you will find, you know, this is a C file,
right? C language written code. You will,
425:55 - of course have to compile it, make a, make
an exploit out of it, which is software. There's
426:01 - a code. You have to make it an executable
file. So that's something you may have to
426:04 - do. Of course, sometimes good author. So this
one is a good author. You know, he has added
426:09 - everything version is this, you have to have
this package You can run this command to install
426:13 - that package, compile it with GCC. This is
a compiler. This is the full command. You
426:18 - can use this command. You can do it. Yep.
That's, that's basically it as right. Or you
426:23 - can then run the, run the file once you get
it, though, I think, I mean, this is something
426:29 - I can leave on you as a homework, I have done
it.
426:32 - I will send you the video that you can refer
to do it. There's something i can leave as
426:38 - a homework for you. But the whole point was
sometimes you don't have exploits in metasploit
426:47 - and tried. You will not find any exploit for
this specific version in metasploit. Then
426:54 - you have to use these public exploits. In
Professional tests. You may do not. You may
426:58 - not want to do it. Okay. Maybe this code is
not accredited, right? I don't know who has
427:03 - written this code. I don't know who is this
person who is this person of whatever the
427:08 - author is. And I don't even see the author
name now. Okay. I don't know who made this
427:13 - and who he was. What was his environment when
he was making this? So in those cases, you
427:21 - may want to, you know, stay away from it,
this kind of thing, but completely possible.
427:27 - Really. You know, if the scope allows, if
the management says that, okay, we are okay
427:34 - with it. You can run it. We have the backup
of the system. Then you can, you can run these
427:40 - kinds of things and you can try to, you know,
run this command and then, then finally compile
427:47 - it and do it. I will send you a video, how
to do that. I'm not a problem. Or maybe you
427:54 - guys can try it first. It's very easy. Just
try it first. And if you still face a problem,
427:59 - I will even help you out. Or maybe in the
next class, we can do it live. If you guys
428:05 - want, however you guys prefer. So that's,
that's something you, you need to learn the
428:11 - public exploits. These are the public exploits.
What we use in metasploit are the commercial
428:15 - exploits. Okay. That's the different public
versus commercial. Any, any note, any doubt
428:20 - there? No, not sounds good. Right? So I will
be sending access to this machine, this Vicky
428:29 - hacker in the house.com. I will sending this,
this machine to you guys at least, first of
428:34 - all, try the metasploit version and then try
to do the, you know, the nonsploit version.
428:40 - The public has tried to do that. If you are
able to do it well, very good. If you're not
428:48 - able to do it, we will see what we can do.
Right?
428:53 - Make sense? Any questions? Sense? Any questions?
None at the moment. So privillege escalation
428:57 - again, it's all about you have the machine,
you got some initial access. Maybe you got
429:00 - a user access. Now you want to become root,
right? Or you want to become anti-authority
429:04 - in case of windows, the admin access. How
do you get that? So that is what privilege
429:10 - escalation is all about. And again, that is
a specialized field because privilege
429:13 - Escalation is not limited to network pen testing.
It can be done anywhere. It can be done in
429:18 - IOT, IOT devices. It can be done in Android,
it can be done in Java languages, Python,
429:23 - interpreters, and then iOS. And, and then,
you know, routers firewalls. It can be done
429:26 - basically every single layer. Can you hack
a motherboard like software, actual have a,
429:31 - physical software, like motherboard CPU. Yes,
that is called hardware hacking, there is
429:35 - a whole big industry in hardware hacking.
You can even have cars. You can have planes.
429:41 - You're going to, whatever car hacking is a,
car hacking is another field. And if you remember
429:48 - Tesla, Tesla, every year, Tesla gives you
a big bounty plus the car that you have. So
429:56 - a supercar, you can win a super car if you
have their car. So car hacking is a big thing
430:01 - in your hand.
430:02 - Sorry, can you hack that car? I know. I don't
know car hacking. So as I said, you know,
430:09 - pen testing is, is, is just like an ocean
that you cannot bring the whole ocean. You
430:14 - cannot be everything. You need to select a
very specific niche and then come out and
430:18 - be an expert in that niche. That's the only
thing you need to do for me. It's mostly does
430:28 - a risk assessment. So even I, I'm not a, I'm
not, maybe I'm not the best person to do the
430:36 - pen testing, but I'm the best person to take
that pen testing result and then assign the
430:41 - risk values and tell the company what they
have to do now, you know, that management
430:49 - level stuff. So maybe I consider myself the
best person in the risk management, in pen
430:54 - testing and management apprentice. How do
you manage this? How do you manage the budgets,
430:59 - finance?
431:00 - How do you manage people? How do you distribute
work? How do you take control of all of that?
431:06 - You know, project management. That's one of
my core competencies and I even have my executive
431:11 - education, project management. That's one
of the reasons I did that because I just want
431:18 - to be best in, in one single field. If tomorrow,
if tomorrow there is a, there's a multibillion
431:26 - company, they want to do a pen test. They
will not call me because I'm the best person
431:31 - to, you know, to, to exploit the system. They
will call me because I can manage the people
431:36 - who are best in and doing their stuff. Right.
So that is what you need. You just need to
431:43 - be best in one specific field privilege. Escalation
is one of them. You can, you can be a privileged
431:50 - escalator, one of the best. But as I said,
it's a highly specialized field.
431:52 - Yup. But go on, on your website, pen testing,
you said like in it, you know, like we have
431:58 - pen testing. So, so say example good on network
pen test. You wanna become network pen tester.
432:02 - So you say, if you don't know how to, website
pentesting that the company, they're not gonna
432:07 - teach you for the job that most likely does.
He said, no. I said that pen testing is a
432:13 - basic field, which companies will be looking
for. I'm not saying you have to be an expert
432:18 - to get a job, but the basic level of the pen
testing is quite necessary. If you want a
432:22 - job in, in pen testing general testing. So
even if you want to be a good network pen
432:29 - tester, you still need to learn the basics
of the pen testing because sometimes you will
432:33 - find port 80 is open port 443 is open in network,
but not, then that is a big port, right?
432:41 - So you have to relate to development. That's
been there. That's the one point. But again,
432:48 - if you become very good in, in weapon testing,
there is a whole big field, right? Companies
432:54 - will, will invite you in private programs.
There are bug bounty programs. You can give
433:01 - a bounty on there. You can be a source code
review expert. That pen testing is again,
433:12 - very big field. You can, you can do a bug
bounties. You can do black hat testings. You
433:21 - can do. You know, you can do security testings.
You can do functionality, testings. You can
433:31 - do a lot of stuff in weapon testing. So it's,
it's kind of a very big field again. So at
433:40 - the end, you just need to bring down to one
specific niche, one specific niche, which
433:47 - you want to be an expert and just be an expert
in that specific thing.
433:52 - And companies will be calling you and inviting
you as an expert. And that's what happened.
433:58 - I'm not sure. Like I feel like or I would
network testing that was on the reason is
434:05 - because you have not seen on the fields. I
mean, in the course itself, we have not focused
434:13 - on everything, right? We did not focus on
hardware hacking. We did not focus on bio
434:19 - hacking. We haven't focused on social engineering
because this course is not meant to teach
434:23 - you everything. It's, it's meant to give you
that foundation, which you need to be the
434:29 - person you want to be. You are actually getting
the foundation. Now, you know those things,
434:37 - which no one else knows. Right? So 90% of
the people, that one was confused. You go
434:43 - to any, you go to any senior pen tester in
any big company, they will not know the clear
434:49 - purpose, what they are trying to do.
434:51 - They are there to do their job. Nothing else.
They don't know what they want to be. They
434:57 - don't have any big goals. They're their maximum
goal is a hundred thousand dollars salary.
435:01 - Oh, let's say $200,000 salary. That's the
maximum, right? They don't think about that.
435:07 - How will you buy it? Okay. That's the simple
question. How will you buy a private jet in
435:12 - that $200,000 salary? That debt is going to
cost you $50 million? How will you get $15,000?
435:17 - How will never become a millionaire? If you
go ahead and run behind that salary. That's
435:21 - more thing, right? You need to build your
own business someday. That is the, that is
435:23 - the only way you can, you can achieve those
numbers. And I mean, I have done that. I have
435:28 - been a millionaire, right? I have done that.
And that's why I am eligible to tell you.
435:32 - So at the end, you, you need a business. Of
course starting a business is not a game.
435:36 - You, you never want to start a business in,
you know, in, in your starting phase, you
435:42 - always want to do work. You want to be getting
trained by some other companies use their
435:49 - money, resources, sorry, but I don't like
actually business. You cannot just say that
435:54 - I don't like business. You have to do that.
This is the necessity. And you can hire business
436:00 - experts. You cannot have business experts
who are going to run your business and you
436:04 - can be good at your field. You can just be
a best pen tester, and there can be other
436:09 - business experts. You can just go ahead and
hire some Harvard, , Harvard MBA or something
436:14 - like that. You can just, you know, find people
at the end it's delegation. You can find people
436:18 - and get things done that you can, you can
maybe come to me, right?
436:21 - And I can help you up to settle your own business.
But at the end that that's like four or five
436:26 - years after things right now, the goal should
be, get a job. Maybe it's a junior job, whatever.
436:34 - Get a job. Anyhow, get a job, learn how to
do, how to work in the industry for maybe
436:40 - one year or maximum two years, two years is
the maximum. After that, maybe just quit the
436:44 - job or start doing freelancing. So working
on pen tests for companies, right, just to
436:48 - start working, anyhow, maybe money will be
less, but you will get experience and reputation,
436:57 - right? Your, your goal should be at that time,
making your reputation. Once you get the reputation,
437:08 - you start taking big clients, you start taking
joint programs, you start getting into government
437:12 - work. And once you have that reputation, you
open up a business. You open up company, you
437:16 - open, you hire 10 people.
437:17 - You are 20 people. You are a team. That's
how you scale your business. And not that
437:20 - that's what you have to do. So again, you
mentioned, you know, of course, or risk assessment
437:24 - is kind of a completely different topic. I
will be happy to send you lectures on that.
437:28 - So I have two different courses on this management.
One is the, the nest, risk management framework,
437:33 - which is used in government, which is open
source. One is ISO. So ISO 27,005, which is
437:37 - a proprietary paid framework. I cannot show
you the paid one because it's, again, they
437:41 - will, they will Sue me in the court. So I
only do that in the live, but I can send you
437:47 - the nist one. So NIST, RMF, I'll send you
the recordings. It's very easy. It's not that
437:51 - hard to do this management. The difference
at the end is, you know, basically it's maths.
437:56 - So you have to do maths. That's one of the,
that's one of the problems critical thinking
438:00 - about, so I'll send you, I'll send you. Thank
you. Thank you. Right. All right. So let's
438:04 - come into the class, then play with escalations.
As I said, it's completely specialized field.
438:08 - You don't have to learn it, but basically
everything, you know, you need to learn basics
438:12 - of everything,. That's the whole point. You
just need to know what it is. For example,
438:16 - if you need to get an idea for any time idea.
So if you search for help and I'm just showing
438:23 - you some resources where you can follow, because
there is no specific methodology for risk
438:28 - management, sorry for privileged escalations.
If you go to bot milk privilege, escalation,ulinux
438:31 - privilege, escalation, you can follow this
online guidance. It's kind of a good guide
438:34 - and there is windows privilege, escalation
here. So you can just, you know, go ahead
438:40 - and.
438:41 - And then find things, that it is one of the
good ones. And then they tell you, you can
438:48 - do an enumeration. So it's basically the same
cycle. You do enumeration, you find the weaknesses
438:53 - and then you find an exploit and then you
exploit it, right? It's the same cycle. The
439:02 - differences, you will enumerate a lot of stuff.
You will see what is already running on this
439:05 - system from inside. They'll know you are doing
it from outside, right? Port scanner, service
439:09 - scanners. Now you are already inside the machine.
So you can run the commands like cat hc issue,
439:15 - cat hc release. So you can now try to open
the files in the system itself. That's the
439:19 - whole point, right? And then you can maybe
find applications and services. What is running
439:23 - in the machine? You can maybe use PS box,
right? These are different, different commands.
439:27 - Now you are in the machine, you have the access,
you are in the machine. So now you start finding
439:35 - these, these different, different you know
commands , you start running these commands.
439:39 - You can, you can check has been, I have config,
basically running. I have configured. You
439:46 - don't need to put as many there, but they
just put it that you can run. If config to
439:51 - check the IPS from inside of the machine now.
Right? All of those stuff you do enumeration.
439:56 - You find what is running on the machine. What
kind of directories are there? What kind of
440:01 - is there any device, exploit, device connected
to machine. You do all of that. Then you try
440:07 - to find exploits right on the basis of those
things. It's basically the same stuff, whatever
440:13 - you do. But now you are trying to find the
privilege, escalation exploits, which are
440:17 - basically same thing.
440:18 - They are also exploits, but they help you
to increase the privilege, right? And that's,
440:25 - that's one of the, that's basically the smaller,
am sorry what was this foot line, sorry, is
440:33 - it for after hacking or privilege escalation.
So for example, you got a user account hacker
440:40 - in the house user. Now you want to become
a root without password. How do you escalate
440:48 - your, your, your privilleges right now recommended,ustuff,
which I can teach you here. I mean, what you
440:54 - should do if you want to be in the industry,
the recommended way, which I can show you
440:58 - is,uOs boxes OS boxes.org. That's the website.
Osboxes dot org. Go there and download as
441:02 - many as operating systems. You can just download
the operating systems and try to have those
441:08 - operating systems. Every system is different.
That's why I cannot basically teach privilege.
441:12 - Escalation on every system, you go here, virtual
box images, right?
441:16 - Virtual box images. Vmware is also there.
And then they give you a lot of operating
441:21 - system. They will not give you a windows because
of course, that's a paid software.windows
441:25 - is not open source thing. They cannot give
you the windows, but they give you Linux and
441:29 - windows. You can arrange yourself. I don't
know how, but you can arrange yourself from
441:33 - Microsoft itself. You can download windows.
So you just start downloading these opening
441:37 - systems. They are prebuilt free install. You
just download and set up and how to set up.
441:43 - It's quite different than what I give you.
So let me just set up one of them so I can
441:48 - just send you. And I said, yup, we need you
pen testing. What's
441:52 - The most hack. Did you hack like a example,
did you have most of the time windows 10
441:58 - It's basically ubuntu and cent OS as not only,
they are always using Linux. Windows is very
442:05 - rarely found in and most of the companies,
because again, it's a paid software. How many
442:11 - licenses will the company buy for employees?
It's always windows. It's most of the times
442:18 - that windows, Mac iOS has always also found,
but still it has windows in most, most employees'
442:24 - computers, but servers are always either ubuntu
or cent OS So, for example, if, if you go
442:28 - and maybe open ubuntu here, and then you say,
download VirtualBox image, it will give you
442:34 - the versions, different, different versions
of ubuntu, but just try out, randomly take
442:39 - any of them and try to follow this guide.
This guide tried to see. So if we see, for
442:46 - example, you see all of these out there, the
easiest one of course will be the most outdated
442:52 - one. This one.
442:53 - So I have downloaded this one. I mean, I think
I have all of these, but let's, let's start
442:58 - with this one. They can just download from
here. And let's say, I want to set it up in
443:04 - virtual box. You click on new and then you
give it a name. I just gave it a name. It
443:09 - doesn't matter what you put. You just have
to give it a name and then you have the choose
443:15 - it it is Linux and it is right. So I'll say
32 bits because I have downloaded a 32 bit
443:21 - version next, give it a ram. Let me just increase
the Ram or something else. So let's say, let's
443:28 - say 2448. 2GB RAM So two, zero, four, eight
should be fine next. And then you can say,
443:34 - do you want to create a hard disc or not No,
we downloaded the hard disc from this website.
443:40 - So I will say, add, use an existing harddisk.
Okay. And then you can find the harddisk so
443:47 - add, and you can find the harddisk. And I
can basically go in my ISO files or media
443:52 - files, whatever, and then you can open a harddisk.
So ubuntu 12, that is what I'm going to open
443:57 - up and just say, choose create. And now your
machine is created That is what you have to
444:06 - do. Basically as i start this machine. It
should work.
444:12 - And by the way, be forgot to add a network
adapter, sorry. We forgot to add a network,
444:25 - You know, last time I had the issue with the
machine, like it doesn't show up the IP address,
444:34 - Sorry, man. Oh it was some misconfiguration
with, with your virtual box.
444:40 - I find like I've downloaded another machine.
I think I sent you a picture. Yeah. That machine
444:46 - is that happened exactly. Same issue. Like
if you download the new new machine on,
444:52 - On the virtual box, like it doesn't show the
machines which you download from internet
444:59 - will not work with my setup. So these ranges
like in these like these, you know, one dot
445:06 - ten dot hundreds range 148. They will not
work with these ranges automatically because
445:11 - I, I have created these machines, myself,
to take those ranges. Now I'm creating a range.
445:17 - Another one for just that machine also needs
to be configured to pick, to pick that range.
445:22 - Right? So normally you would, you would want
to keep them on bridge nat. In this case,
445:28 - I will put it on that bridge dot, nat as the
default, when you, you may want to put it
445:33 - on, let's add this machine. I'm just going
to show you a rough demos of how privileged
445:38 - escalation may look like,
445:39 - Starting up
445:40 - And let's start kali linux. And I will put
my adapter on that. So i wll add this is adapter
445:46 - on that.
445:47 - Okay. So start.
445:48 - So ubuntu is opening here. So a password is
normally always, always osboxes.org in their
445:53 - website. You can find it on the page itself
osboxes.org. It's a very nice website. I mean,
446:00 - it's say it's a free project. None of that
would use a name. Username is also osboxes.
446:05 - A password is also osboxes. Let me try to
increase the resolution. It's going to suck
446:10 - them. So how do I increase the resolution
system settings, resolution and resolution.
446:20 - Okay. Let me increase it to 1080p. Do you
see any 1080p1920? Wait. No. All right. Let's
446:27 - let's just take this one then apply. Yeah.
It's cool. Keep this configuration it's big
446:33 - enough. I think we can read everything here.
Right? So this is out of this one ubuntu right?
446:48 - And then you have terminal in the menu. So
I'm just going to open, terminal.
446:58 - There is the terminal and I'm trying to increase
the size, but I cannot do. And that's fine.
447:06 - And does it really happen? Right? You can
read it right. Okay, cool. So let's check.
447:12 - Ip if config, you can see my IP address is
10.0.2.15, which is the default nat. Right?
447:18 - Whenever you add a range, it always pick 10.0.2.
That is the default. Okay. let's go ahead
447:25 - and say root licensed to pen test. And by
the way, you can, you can put it in any range
447:30 - if you want. I mean, I can literally, I can
just go there a network and I can change this
447:39 - to nat network. And I can actually go ahead
and put anything here. Range hundred. I can
447:50 - put a hundred. It will work because the ranges
which we have chosen are DHCP enable, and
447:56 - this machine is also gets enable os boxes.
All the machines are enable. So if I do the
448:00 - exit line, the exit line -r to release the
ip address and then again, DST client to get
448:05 - the IP address. Okay. Not permitted. We are
not root. Of course. So Sudo su root, uh OS
448:11 - boxes. In real pen test ,Do you get the IP
address? You may get the IP address. It sometimes
448:15 - happens, they will give you IP, or they will
give you a URL. You can just ping the url
448:17 - to get the IP. So at the end, yes, you get
the DNC client, that DHC client.
448:20 - Okay, come on. It's taking time. I don't know
if it's even working. So now, if we check
448:27 - the IP, you can see my IP is ten dot. It did
not change. And I was expecting it will change,
448:35 - but I'm not sure why let's leave. DHC client
is universal command for most of the Linux
448:41 - distribution. So Kali Linux is basically based
on Debian. Debian and ubuntu share very similar
448:45 - architecture, whatever you run in debian is
the same in ubuntu, right? So at the end,
448:49 - both of the Linux systems are working similar.
There is something called red hat, Linux,
448:54 - which is a different architecture. It will
probably not work in red hat and red hat.
449:02 - Linux, examples are cent os, cent os is, is
the operating system, which is in the category
449:09 - of red hat. And then there, it will not work,
but ubuntu and debian are same family. And
449:20 - in that family, Kali Linux is based on Debian.
So it will work osboxes.Org. Excellent. And
449:35 - now we should have something.
449:41 - There you go, terminal , and let's check IP
now, and this should be 10.100, Right. As
449:47 - I said, we changed the range. So this will
basically pick up any IP you assigned it.
449:55 - It's basically taking the IP's of HCP server
ten.zero dot hundred, dot eight, right? That's
450:00 - the IP we have. In Kali also, I think I have
a hundred IP. I think I have, If config. You
450:08 - can see, I have access to a hundred IP. No,
I don't. Okay. Yeah. This one. So I have access
450:12 - to a hundred IP, 10 dot zero dot 109. If I
try to ping that machine. So paying 10.0.100.8,
450:17 - you can see, I am getting replies, which means
I can communicate with that machine right
450:20 - now, for example, you are being privileged
escalation, right? So for example, you are
450:25 - trying to do privilege escalation and think
about this terminal in your kali linux.
450:29 - So in your kali linux, you hack the machine,
you get the terminal, right? So things are,
450:34 - this terminal is in your kali linux right
now. And you're trying to do the escalation
450:39 - and, and we are not root user. We are os boxes
user here. Right? First thing I always liked
450:45 - to do is you name dash a, you name dash a
when you do you name dash a. It tells you
450:51 - what operating system with what release you
are using. So here you can see a this i, whatever
450:56 - that name was, and you can Google it. It will
tell you it is 12.04 version. So this is the
451:02 - code name of ubuntu that is the operating
system. So here, this is the Kernel version.
451:06 - And one of the ways to be privileged, escalation
is technical version. So now I have this information,
451:12 - right? I will take this information, go on
Google and try to find if this version is
451:18 - exploitable or not.
451:19 - Is this vulnerable or not? That is one of
the ways. Then I can maybe also do something
451:24 - called a DP, KJ, TC kg , dash L. So DPkg -l
so DPkg is the package manager dash L basically
451:29 - lists everything that is installed on kali.
So now these are the software's. These are
451:32 - the packages that are installed on this kali
linux. So these are all the softwares that
451:38 - are installed. Okay. So maybe I can now just
take these versions right here, these versions,
451:47 - these softwares, and try to see if they are
vulnerable or not. So these are different,
451:54 - different things you have to do. And again,
this guide has explained most of that, all
451:59 - of these commands, you have to try, you have
to get all of this information, then do your
452:10 - research, and then do the escalation. And
that is the reason it is a .
452:15 - Very, very specific niche. Specialized skillset
is not an easy task is a very difficult task,
452:19 - but that, that is the reality that is what
you have to do. You can do name dash r. It
452:26 - will just show you the kernel itself. You
name dash a. It gives you the full information,
452:30 - the same thing. I'm just going to give you
an example, how, who hack by a kernel version?
452:35 - So let's say you name dash r. I have the kernel
version here, 3.13.0-12, right? Maybe I will
452:44 - go in my kali linux and I will tried to find
it exploit for this. I can maybe say it search
452:49 - sploit. Or you can do it in metasploit? But
searchsplit is a good tool, searchsploit.
452:53 - And I can just say, Linux kernel, sorry, spelling
wrong. And now you can see there are so many
452:59 - Linux kernel exploits sign.
453:01 - So you can see every kernel has got some kind
of exploit there, but I have a specific version.
453:07 - So I will maybe just say Linux kernel, which
one? We have 3.13. So let's say 3.13. We still
453:13 - have a lot. So what is the full version 3.1.0
dash 32. So 3.1.0 - 30. Not that that dash
453:20 - 32 that does'nt matters that this specific
release but this is the, is the main version.
453:28 - Now we got to two different exploits here,
right? So similarly, now this one is a C exploit.
453:39 - This is written in C. This is a text file.
Text file. Normally contains how to use the
453:48 - exploit, how to make your own expert C is
the one which is already made. So I will basically,
453:57 - for example, I will copy this exploit. So
copy, and I will basically copy this on my
454:01 - desktop. So maybe I'll just go to the desktop
and I have folder called exploit there. There
454:06 - are some things there. Let me just remove
them very quickly.
454:10 - So this is folder is empty now. So I will
just search search sploit - m and I will paste
454:16 - that link, which we copy and press enter.
And it will now copy that exploit in my kali
454:20 - linux. Now, if I do LS in this folder, we
have this exploit. Now this is the exploit.
454:25 - Let's read it. So more, three more. This is
one of the commands you can use to read the
454:28 - files. First few lines here. We read it. And
I would say exploit, title something, something,
454:35 - something, it works. It works on ubuntu 12.4,
14, 14.10,15 a lot more. Right? So it is going
454:42 - to one. So now kernel, sorry. Kernel plus
operating system should match. Yeah. So here
454:46 - operating system is matching. This is the
opening system is already match. Now how to
454:49 - use it. Do they have something I don't see.
So these are all commands, right?
454:54 - They all commented out. So this is a user.
They are given an example. You check you name
454:58 - dash a, you check it like that. You get the
version, right. Then you say GCC the file
455:01 - dash o the output file. So input file, output
file, right? And then once you check your
455:02 - ID, you will see it is the username. But once
you run this expert dot slash, run the exploit,
455:10 - it will do something. And finally you will
have the hash sign. So this hash sign means
455:23 - your root. When you check the id again, it
will show you root. So they have given the
455:30 - full example there. So basically I need to
run GCC. GCC is the compiler, the whole problem
455:36 - with Linux exploits. This is the biggest problem.
You have to transfer the exploit to the machine
455:40 - which you want to hack. This is not a remote
exploit. This is a local exploit right?
455:46 - This is a privilege. Escalation exploit. This
is a Local exploit local exploit needs to
455:51 - run on the target machine itself. So we need
to transfer this exploit in that machine and
455:59 - then run it. Okay. So I will just say a quick
here cube, easiest way to transfer the exploit
456:03 - is to set up a web server in your machine
and you download then the exploit in that
456:06 - target machine. Now how to set up a server,
easiest way Python. You just say python dash
456:09 - n, python dash n and then simple HTTP server,
simple HTTP server simple HTTP is capital,
456:13 - and then server S is, capital simple HTTP
server and then give it a port. I will give
456:19 - port 80 and press enter. Now it will start
a python server on port 80 of your machine.
456:24 - Once someone go to your IP address, it will
open a folder which will contain all the files.
456:28 - So I have started a server in this location,
but if I open my IP, you will see. So if I
456:35 - open my IP, I go to Firefox. You can see what
happens. So for example, ten.zero dot a hundred
456:43 - dot nine, which is my IP. You see, if I open
my IP address, it will show you a directory
456:52 - listing. And here's the content of the folder,
right? That does. That is what I do now. Assume
456:57 - that I am in the terminal of my machine, which
I had, this is that terminal. I can now download
457:02 - that exploit because of course it does now
hosted on internet. So I can download that
457:09 - exploit for that. You need some, some way,
right? You cannot just run Firefox because
457:12 - mostly you will have a terminal Access. So
you need to download things. From terminals
457:18 - two famous commands are wget and curl both
are same, both works very well.
457:23 - Both are installed. And windows, you will
mostly find wget is installed, Sorry curl
457:26 - is installed and, and in linux you will find
them, wget is also installed. So it doesn't
457:32 - matter. Whatever is installed in, whichever
machine, you know, Wget HTTP and the IP address.
457:39 - So ten.zero dot a, let's say a hundred dot
nine, which is my IP address, right. And then
457:45 - slash, and then the file name. So I can then
again, a C so I can actually just say, right
457:53 - click copy location. And then I can just paste
it here. And this is the full location. So
457:58 - basically slash file name, right? So three
seven two nine three seven two nine dash three
458:04 - seven two nine two dot c. Right? I can do
that. I will not do it right now because we
458:09 - may not have permission to do this kind of,
okay. Sometimes you cannot turn the wget and
458:19 - you can save files when you have restricted
user.
458:22 - So always, always, always go ahead. And first
of all, go to temp for them. Cd slash temp.
458:26 - Okay. Because temp folders always writable
you can write whatever you want in go to temp
458:31 - folder and then download. I just pasted that
command. You can say, you can see save file
458:40 - has been saved. If I do LS, you can very well,
see, I have downloaded that file, right? That
458:45 - has the file in the corner. Now, once you
have the file, you need to compile it to compile
458:51 - it. You need a GCC. So as you see here, so
I can just close it and you will see in our
459:00 - Python server, there was a get request coming
from this machine dot eight machine, right?
459:05 - The last request, which came, which is a vulnerable
machine and download it, I'll just cancel
459:09 - it. I don't need it. If I do more on the file,
we can see, we need to run a GCC.
459:16 - But the problem is GCC is a software and it
is not installed on the machine. There can
459:32 - be very easy case. GCC is not installed on
your target machine. You cannot, you cannot
459:37 - do anything. Basically. You, you literally
cannot do anything in that case. The only
459:42 - option you can use in that case. So for example,
GCC is not installed here. What you can do
459:51 - is you can make a virtual machine, and this
is the practical thing that you will do. You
459:58 - will make a virtual machine with the same
operating system, with the same kernel version,
460:03 - same operating system, same kernel version.
You install GCC in that you compile the exploit
460:08 - in that. Then you transfer that compiled exploit,
right? That, that file, which you compile
460:15 - after this command, that file, which you get
you transfer that file them. But so, because
460:21 - compilation is done in this same environment,
you compile it manually into a simulated environment,
460:26 - which is the same version of the operating
system, same kernel version, which is kind
460:31 - of a big challenge to find that same thing.
And again, it's very expensive stuff. So your
460:36 - client's budget needs to be kind of expensive.
In that cases, it will take easily one day
460:41 - for the whole day to make all of that. So
one day extra buget. So that, that is something
460:47 - that you may have to do, but let's, let's
try to see if we have GCC in this machine.
460:53 - So I would just say GCC, I would press enter
and you can see GCC error no input file dound
461:07 - basically we have GCC. That's why it's giving
the error that no input file was found So
461:12 - we said GCC, and then we just give it to the
file name, which is three dot. Something we
461:21 - didn't say dasd o output. We need the compiled
output file.
461:25 - We need it. Just give it a name. I will just
say exploit. I will just make a file. Whose
461:35 - name is exploit, press enter it has been compiled,
now you can see if I do LS again, you can
461:39 - see we have a new file. Now which is exploit,
right? This is the new file And this is the
461:42 - exploit This is the real exploit, which you
have to run. And now this is in the green,
461:46 - green color, but you always should check LS
dash lh. And ls is the list dash lh human
461:49 - readable, always check here it should have
X. Okay. So for example read write? And then
461:55 - this one is X execute the right execute. You
should always have execute permissions. Otherwise
461:58 - you will not be able to run it in this case.
We have it by default in case you don't have
462:04 - to do ch mod.
462:06 - So ich mod CH MOD +X, which is execute. You.
Just add the executable permission on the
462:12 - file. Once you do that, you will have the
executable permissions. So if I, if I tried
462:19 - now again, you can see we still have the same
permissions, but if it was not there. So just
462:25 - to show you, if I remove the executable permissions
by doing minus X, if I remove them, and then
462:33 - if I show you, you can see now we don't have
any executable permissions here. It does only
462:38 - read, write, read, write, read, write. So
we need executable permissions. That means
462:42 - you cannot run it just say plus X again. Sometimes
it will automatically come with the exploit
462:47 - compiling sometime it will not consult. Always
check that first in this case. Now we again
462:50 - have it. So now we can run it again, we are
not root user, I'm going to run it To run
462:54 - it simply just dot slash exploit and then
press enter.
462:59 - And you could see we are root this hash sign,
this, this hash sign here. If you're don't
463:09 - believe you can just say who I am or who am
I sorry? Who am I? You are root. That is how
463:17 - you do privilege. Escalations. That is one
way to do privilege escalations in one operating
463:23 - system with one specific kernel version. That
is very small thing, which I just taught here,
463:28 - but it's a specialized field. It's very big
field. Again. It's all about finding the exploits,
463:35 - the same methodology, right? You cannot say,
I am. I'm going to learn pen testing. You
463:39 - need to be specific. What you want to learn
privilege escalation is the same field. It's
463:44 - a very big ocean. You cannot bring it completely.
You need to be specific what you are going
463:50 - to do in privilege esclation. Is that making
sense? Any doubt? Any comments?
463:54 - Oh, it's fine for me, but check the steps
again.
463:56 - Of course you need to review the video and
you have to do this.
463:58 - Yeah. For me does make sense. Yeah. It makes
sense when they say you need to compile. So
464:04 - what did we do in the compile? Right. Okay.
So we don't compile it? And I mean, is it
464:12 - not supposed to show something like kind of
essential or something?
464:14 - Okay. Yeah, it really doesn't matter. It will
not show the extension in some cases it may,
464:18 - but normally it will not show the extension.
It really doesn't matter if it is having extension
464:24 - or not. And in case of windows. Of course.
I mean, in Linux, it doesn't matter in case
464:29 - of windows, you would want to have the exe
extension, right? The EXE in Linux, it was
464:38 - just a dot slash tar and windows, you may
want to have the EXE extension and then run
464:46 - it. And then it's your choice. I mean, I'm
just going to exit it, exit that PX ID. I
464:53 - just exited the root shell. I am back as user.
Okay. So if I,udo that GBCC command again,
464:59 - here, I can just put DB. So exploit don't
DBB DB is the format we use in Debian, and
465:06 - ubuntu I can put it in. Now you will have
a file called exploit.DBB. You can see exploit.dbb,
465:13 - right? So it's really actually your choice
if
465:28 - you want to put extension or not at the end
of year, running it as a, as a script, the
465:34 - terminals os not required. Right.
465:36 - All right. Yeah. That makes sense. Well, the
original file, what extension is in you file
465:40 - what's was the extension for that dot c.
465:42 - The original was a dot C. So it's written
in C language C language
465:46 - Okay. Okay. Now that's just that's okay,
465:47 - Right? That was the source code of the, of
the, or of the actual file. Right? So whatever
465:53 - software you use it, it has been written in
some language. So the source code of that
465:58 - thing,
465:59 - Right? And the good thing is C Python, Java,
Ruby, these big languages, you know, the famous
466:09 - languages. They are cross platform languages,
so they can work on Linux. They can work on
466:15 - mac, they can work on windows. That is why
we have to compile them in the same environment
466:25 - that we want to run it. So I can take the
C code and I can compile this code in windows
466:35 - machine And it will, it will compile it, but
it will not give me anything because this
466:41 - exploit is not made for windows, but I can
compile it in windows as well. I can compile
466:46 - anything okay. Ubuntu is different,Kali Linux
is different. Operating system is different.
466:48 - It is Debian. Kali. Linux is Debian, but I
can still compile it in Kali linux as well.
466:54 - So let me show you.
466:55 - Okay. So, so that means, that means if you
need to run that the windows. So you need
467:00 - to compile it to dots, to have dots, c extension.
467:04 - I mean, it's not required again. If you're
going to run it from command prompt from terminal,
467:11 - extension is not required.
467:12 - Yeah. But like I have the mastery of Python,
but what I'm saying for you to run it, I know
467:19 - there are like, if you, for you to run a Python
script, you can only Python script. But I
467:26 - mean, only window you, I think you need to
compile it. So for that, for that, for that,
467:31 - for that program to run, let's say you create
a program with Python. I think you need to
467:33 - compile it for it to run on the window. If
I take am I think that's how it works.
467:38 - Ya that was the compiling stuff that does
what you're doing compiling.
467:40 - Yeah. Okay.
467:41 - So if I try to do a here, you can see, I try
to compile that same script. It should have
467:46 - worked. The only reason it is not working
is there is some problem in the function.
467:51 - It can be because my GCC is new. And the GCC,
which this, this source code has been written
467:56 - is old one. Right. So maybe I can downgrade
my GCC to the old previous version of this
468:03 - PC. GCC is a software by the way to compile,
right? So GCC is a compiler. I can download
468:12 - the older version of GCC and then run this,
this same script and I can compile it in kali
468:15 - linux as well. So at the end, you can compile
it, whatever operating system you want, but
468:18 - it will not work if the operating system and
kernel do not match for what it was made for.
468:23 - Right. Making sense.
468:24 - Yeah. Yeah, it does. So does this only affect
I mean what's it called C language .I think
468:30 - in Pikeville when you compile it, you can't
run it in any, any platform. I mean, any platform
468:35 - you don't need to look at the con the Cornell
I mean, you can run on any.
468:39 - You have to run python on any version of window.
468:42 - So in case of window, but that is still windows,
right? Operating system is windows. It is
468:48 - just different version,
468:49 - Right? Yeah. That's not what I mean, like,
like windows seven, windows 10. I think it
468:54 - can. If you compile with Python you can run
it on windows seven, windows 10. That's what
469:00 - I'm saying. So is it just, is it because this
is just a Unix or Linux system as well? We
469:06 - have to choose the kernel that this will run
469:09 - So I can still compile that in kali linux
and then run it in a window. It will run,
469:17 - but it will not work
469:19 - All right.
469:20 - The exploit will not work.
469:21 - All right. Yeah. I get that
469:23 - Because i will even show you, because if we
read the exploit code, let me show you by
469:28 - reading it. If you read it, the exploit code.
Okay. What is the three, right? Yeah. If we
469:37 - read this code. Okay. Just scroll down and
see the code here somewhere.
469:42 - Mmm.
469:43 - I don't know where it might be. I mean, it's
a might be somewhere you have to see, but
469:52 - it will, it will tell you that this code is
actually taking the version number, where
469:57 - it is being compiled and then putting different
variables. If I am compiling it and it will
470:01 - make a different product. If I'm compiling
it in ubuntu 16, it will make a different
470:05 - exploit. So these kinds of codes, they are
always made for different, different versions,
470:08 - right? So whatever version you compile, it
will make exploit for that version only. And
470:20 - the tested version are only these 12, 14,
14, and then this one, these four are the
470:29 - tested ones. So that's the whole point you
can of course try it. So that's why I showed
470:35 - you that OSboxes right now, go on os boxes
and, you know, just, just try to try to attack
470:42 - multiple Linux kernel versions because kernel
is kind of the first thing you always try
470:49 - to do.
470:50 - I mean, if you can get it if you can get the
escalation through kernel, that's the best
470:51 - thing you can get because that's the easiest
one to find programs. And then finding expeloits
470:54 - for programs is kind of a big mess. So a kernel
versions exploits are very easy and they are
471:01 - recommended once. If you can get them, that's
the best thing you can happen to you? One
471:08 - more thing I want to show. Okay. One more
thing i want to show. So I want to show windows
471:14 - as windows one as well, let me just close
this up. I mean, similar way, you can find
471:21 - for windows as well. How does escalate? But
I want to show the automatic way as well.
471:26 - So for that, let me power on the windows,
I guess. Sorry, virtual box. There you go.
471:29 - I'm gonna power on my windows. Whereas windows,
hereis the windows
471:32 - And there are multiple ways you can do this
automatically through metal spoilt. So that
471:35 - this kind of a thing, you should try it. So
let me change my network adapter. I want to
471:41 - be in the range of 148 so 148 Nat network,
148. And let me refresh my IPS DHC client.
471:45 - That's r oops, r host capital. Here we go
DHC client. Clear IF config. Alright, there
471:50 - you go. So we got 148 IP. Okay. Let's see.
And windows is powered on let's log in. What's
471:56 - the password, anyone licensed pen testing?
471:57 - Hmm. So this is a non root user, right? This
is, this is not anti-authority. This is, this
472:03 - just hacker in the house. This is just the
admin user. It's not a anti authority. Anti
472:10 - authority is the top user in windows systems.
Ulet's make a payload, let's make a payload
472:16 - and let's hack it very quickly. So I'm going
to say MSF,uMSF. I mean, I can actually do
472:23 - it using that. UI can do it using that eternal
blue exploit, which we have, or I can create
472:27 - my own. So let me actually create my own MSF
venom. MSF venom is used to create your exploits,
472:32 - thats the payload, and then you can give payloads.
So I don't know the payload, so I will search
472:39 - for it. - L is the list list payloads. Uhhere
you go. I am just finding payloads. Hmm. Let's
472:44 - see.
472:45 - It's taking time. And he goes, these are all
windows those payloads we have. So I will
472:47 - go with a payload which is x86 because our
target is x86, a windows and meterpreter a
472:51 - reverse TCP. Reverse TCP. Yep. That is the
one I want to choose you. Go copy clear. So
472:56 - now I will say MSF venom dash p the payload
and then dash dash list. And then dash options
473:02 - . So this this MSF venom is the part of metasploit
framework. It's another tool just like MSF
473:04 - console is the one of them. So it is also
a part. It is used to create payloads and
473:08 - just creating one. Here are the options of
that specific payload I can say l host right.
473:15 - So yeah, that's good. Um host is going to
be my IP and l port i can choose whatever.
473:21 - So that's fine. Let's do that. So I'm going
to just say clear again, the thing they come
473:22 - on, I don't need this options. I just need
L host equals now my IP, what is my IP? So
473:27 - let's see. So I can just find my IP. If config
my IP is 10 dot 11. Yeah. So that is the 11.
473:31 - So I'll just paste it here and L port. I want
to open a port, which will be, het's say seven,
473:36 - six, seven, six, randomly . Just did for right.
And umo we can save it. So format format will
473:42 - be exe and they can save it on my exploits
folder. So the default that we created on
473:50 - desktop, sorry, desktop. And then exploit.
And then the name of the file will be exploit
473:54 - dot EXE. So that is how I'm goining to create
this exploit. Umsing MSF venom.
473:58 - There you go. We created a file. So if they
go to CD exploit, what the hell? Okay. we
474:04 - are not on the desktop Right. And that was
the problem. Okay. Let's let's do one thing.
474:08 - Let's let's manually go there. So here we
have this exe file. This is a virus file,here
474:12 - is the payload in social engineering. You
know, you normally create your payloads and
474:19 - then you send them, I can just copy this and
I can just paste it here. And my Oh, I think
474:26 - I can do that. Okay. Okay. I thought it was
possible directly. Can I do that?
474:31 - Hmm. Okay. I cannot do that, but again, I
can, I can set up a I can set up a Python
474:37 - server here and, and import it using that.
So I'll just quickly set up a Python server
474:40 - CD. The desktop exploits, clear the screen.
And then I can basically set up a Python,
474:44 - python server dash M modules simple HTTP server
simple HTTP. Server e was missing on port
474:47 - 80 i want to run a server So i just started?
My IP was if I'm connected on my IP, I remember
474:53 - that. And now in this machine, I'm going to
download that file. That infected file I'm
474:59 - using internet Explorer because that's the
only thing we have to go.
475:02 - Okay. No HTTP, ten.zero.148.11. Then you go,
we have the exe file. Let me download that
475:07 - and let's save it on desktop saved. There
you go. That old sound heard after long time.
475:11 - Now this is the, this is the exe. And so we
downloaded that now, because if I open this
475:16 - thing, if I open this file as a user, it will
send a connection back to my machine on port.
475:23 - What was the port guys is anyone remember?
It was six seven, six, seven, guys. Anyone
475:28 - remembers? Yeah. Six, seven, six, seven, six,
seven, six, seven, six. So I need a listener.
475:32 - I need to start a listener here. I can listen
to that connection. Multiple ways I can do
475:36 - Netcat I can use metaspoilt. Like, I mean,
there's not a split, so MSF, venom, sorry,
475:40 - MSF console. I'm just opening msf console
there. And I will listen. I'm on seven, six,
475:44 - seven, six, four. So I'll say use exploit
multi handler, multi handler clear this screen
475:48 - show options and set. Yeah. I mean, it doesn't
show anything because we need to send the
475:52 - payload as well. Set payload windows meterpreter.
475:55 - Come on. Met. meterpreter reverse TCP, here
we go clear the options. Show options again.
476:00 - Okay. Now set l hosts
476:01 - Okay.
476:02 - And my l host am going to put zero zero, zero,
zero. It can listen on any, any interface.
476:08 - I really don't. Yup. Set. Um l port will be
seven, six, seven, six. That is the port where
476:13 - we are going to receive the connection. And
now clear the screen, run it. Now we are running
476:19 - a handler. We are listening for any connection
that comes on seven, six, seven 6. If I double
476:25 - click here, if I run this, if I run the software,
nothing happens. But over here we get a meterpreter
476:32 - session. Right? So we basically brought a
session, not if I, if I do shell the, we have
476:39 - the session. But if I try to do Sys info system
info.
476:41 - Oh, a lot of information there, right? Yep.
You can see it been Microsoft windows XP,
476:44 - right? So you can just see that,ulet's just
do help. And these are all the options. The
476:49 - first option for privileged escalation is
always get system get system. How do you get
476:56 - the system will automatically do privillege
esclation for you? This is not available in
477:00 - all the meta in all the payloads. If you are
hacking the machine using meterpreter also
477:05 - only in case of windows, you have get option,
get system option. Yeah. Get ribs. Is that
477:10 - working? Yeah. So for example, get ribs. We'll
show you what privileges do you have in, in
477:14 - my case, I have all these privileges and sometimes
they are not enough. You will find very small
477:19 - little privileges and those cases you may
want to go in and, and find other,uyou know,
477:23 - you may, go and try ahead and try to escalate
to esclate your privileges, okay.
477:28 - One thing I want to check is net user. So
net, user, yeah. You can see, these are all
477:36 - the users, which are available on my machine
and I am logged in as hackerinthehouse.com
477:39 - by the way. But there are other users as well.
Right. I can escalate. I can escalate right.
477:45 - And the authority is not given there, but
that is the highest one. So to do escalate,
477:51 - I will actually go ahead and say, get system,
press enter it will try to get the privilege
477:54 - escalation. And here,it automatically says.
You actually got it. We actually got it. Okay.
477:57 - But sometimes it will fail. Okay. That is
something you should always try. It may get
478:01 - it. But in most cases it will fail 40% chance.
It will get that's the one thing you always
478:07 - want to try, but this thing will not work
on every, every single operating system.
478:10 - I believe currently it is only supported on
windows in meterpreter, shell. I think I closed
478:15 - this session. Now I will run the I will run
that. I will run this again. I'm running this
478:25 - again, session and I will get the, get the
session back again here. Okay. So we've got
478:33 - this session two now again. Okay. In some
cases you would want to use a local privilege,
478:37 - escalation post exploitation. There is a post
exploitation here. If I background the session
478:41 - background, and if we search for search for
suggester. Okay. So there is an exploit suggestor
478:47 - it's a privilege, escalation exploit in metasploit.
Okay. This is what I was trying. I can use
478:50 - this, use this, and I can just show options.
This will require you this session number.
478:56 - Okay. So I'll just say a set session and session.
Number two is the current one and show descriptions.
479:01 - Do you want to, if you find some exploit,
do you want their descriptions and additional
479:06 - information? Do you want that? No You can
make it true if you want, let's keep it false.
479:12 - Doesn't matter. Let's exploit. Now here, it
will collect a lot of information. It will
479:17 - do everything. It will collect the currently
installed programs, service, patches, currently
479:21 - kernel version. It will take a lot of information
automatically, and then it will try to generate
479:26 - a report and then maybe suggest some things.
This is again, because it is automatic. It
479:30 - will not be a hundred percent correct. It
will. It will miss a lot of things. It will
479:35 - take a lot of things extra here. In this case,
you can see 29 exploits have been found so
479:40 - we can escalate using these 29 different exploits.
Okay. But at the end, if we see 29 exploits
479:47 - I've been trying, sorry, checking different
29 exploits based on the information it got,
479:53 - it collected the information.
479:54 - It made a list of tasks. It tried 29, different
tasks 29 exploits And then these are potentially
479:58 - possible. So this can not be validated. This
is vulnerable. This is vulnerable. So you
480:02 - can use this one, right? Trap popup menu.
Very, very common. Okay. In windows, windows,
480:06 - server, windows, XPS, all of the windows.
One. This is very common vulnerability, trap
480:10 - menu open. So randomly, it's just showing
that there is this one, a client copy. This
480:14 - is also very common one. You can take any
of these really doesn't matter. I'll just
480:18 - randomly just take this one. Yeah. I'm randomly
doing it. I have no idea of this at the moment.
480:22 - It will work or not. And this is the first
time I'm teaching on this machine. By the
480:26 - way, on XP. I have, I have shown it on windows
10, earlier of other batches. So use this
480:31 - show options. Again, it will require a session
number because it's a local exploit privilege,
480:34 - escalation as well. So session number set.
So set session true lets us exploit it.
480:37 - Once you do exploit, you will see you get
another shell. Okay? You see meterpreter shell
480:42 - session three open why three, because you
were able to escalate. Now you are anti authority.
480:46 - If you see here a process has been created,
injecting the code, whatever it did exploit,
480:53 - finished waiting for hopefully privileged
payloads. So maybe this is privileged. That's
481:00 - what it is. Trying to tell you. So this does
not exist, actually my process, okay. I am
481:07 - running here as a mocker.exe. So that, that
trap popup that has launched this, this process,
481:18 - which is a not mocker.exe. This is my process.
If I, if I close this process, my shell will
481:30 - die. I am running as anti authority at the
moment. If I close this shell will die and
481:42 - I can prove that I can go here, I can go ahead.
And maybe just not sure if I can cut it from
481:57 - here, but let me try.
481:59 - Notepad. So where is notepad I can go here,
right? Click end process. Maybe I will not
482:06 - be able to. Okay. I ended it. Let's go back
and let's see if we have the Shell or not
482:11 - and you can see meterpreter shell session
three closed, why it was closed because I
482:15 - ended up process, which was running as anti-authority.
So I had anti-authority access. That is why
482:20 - this was a running at, notepad the first shell,
which I have the session two, which I have
482:27 - that does running at exploit dot exe at the
moment. If I close that as well, it will,
482:42 - it will close my normal shell as well. If
I just say exploit already exe if I end this,
482:54 - you will be able to see one more shell will
die, shell
483:08 - Two has also, die Right. So that one was running
as a hacker in the house user, the second
483:14 - one, which I escalated, which was running
as notepad, which was running with anti authority
483:19 - privileges. Now that's making sense. Is that
clear now? Yeah. Right. So with that, I hope
483:23 - you enjoyed privilege. Escalations. It's quite
important. So the part which we covered today
483:29 - is the base and that is at least I expect,
you know, as a hacker, as a pen tester, at
483:39 - least you should know that much, if not more
than atleast that much, maybe, you know, just
483:43 - go on botmill that website, just go ahead
and read these, these commands atleast. Just
483:47 - try to see what you can do with these commands.
Right. This what was that website got milk.
484:06 - So it's a very famous one, got milk. Just
like got milk and then just say privilege,
484:25 - escalation. And that will be the first, the
first lane. Right. Got milk privilege. Escalation.
484:38 - Yep.
484:39 - All right. Any doubts? Anyone, if you don't
have, I mean, if you don't have any doubts,
484:49 - then what I am expecting now is that since
we are at the end of the sessions, what I
485:08 - expect is we should do a report writing session
tomorrow. And the next week we should do a
485:16 - real life test where I can maybe invite some
485:44 - of my client. They will give you a project
and you will have
486:05 - to work on that. On that, that fields. That
will be cool. That would be cool. Right. Maybe
486:20 - have a small project. I mean, I don't expect
them to give you
487:06 - a $10,000 worth of project, maybe one machine
or two machines, a real machines, where you
487:19 - can possibly try to hack them
487:43 - you have to sign a lot of paperwork, but let's
do that next week. We can, we can hopefully
488:05 - get it if not next week then after that next
week, I mean, I just need to talk to
489:41 - my clients and get you a project, but we will
definitely do
490:38 - a live project tomorrow. Let's let's plan
the, the report. I think
491:38 - that
492:29 - is very, very easy work report writing. And
I can
493:22 - then explain that right.

Cleaned transcript:

Hello, free code camp viewers. This is sagar bansal, Once again, I'm back with a new course, which is called license to pen test the beginners edition. Now, if you are in the industry, you might already be aware that license to pentest is one of my premium live programs, but this may settle with something amazing. We took the live classes, we took all of the recordings and we compiled a list of the best recordings which were made for beginners. And that's how the beginner edition was born. Now in the whole course, you will find students asking various questions, but I think we did not cut that out in editing because see those questions were kind of important. They were very interesting and it's, it's very interesting to see how I have answered those questions. And a lot of you guys will have the same doubts, so I will let the recordings as it is without any editing. And let's get started with this course. Just make sure that you checked the description, because if there is any update for the course, I will put that in the description. And don't forget, this course has its custom labs, the labs, which my team created when we were giving the classes, all of those labs, you can download them from the description. So just check that right now before proceeding. So let's get started. I will not take more than a minute to introduce myself. I am one of the 47 board members of EC council advisory board for ethical hacking IMEA. I am the youngest CCISO as well as LPD master credential holder, I have altered more than 25 reowned programs, including CISSP masterclass, CCSP, masterclass, CISON, , and so on. This course is intended for people who want to get into the industry. People who already have seen the YouTube, they have gone through every video. They can find on YouTube, but that's not helping them to get through the industry. Those videos. They are good. No doubt they are good, but at the end, they don't teach you how industry really works. So this course is intended to teach you those concepts, which are missing on YouTube. And again, since this is a premium program, you will notice the quality difference within the first lecture itself. So I hope you are super pumped up just like me, but here's the problem. My lawyer says that we need to give a legal disclaimer because this course has some really cool shit. Here's the disclaimer, free code camp, Sagar Bsansal, Sagar Bansal group of companies, our partners and affiliates, YouTube it's partners and affiliates are not responsible for any of the actions you take after completing this course or watching this video. Any numbers claimed within this video are for reference purposes, only any trademarks use in this video, are the intellectual property of their respective owners, all the students appearing in this video through camera or voice have provided their consent to the author, which is basically me and the video contains professional penetration testing, knowledge and everything has been done in a control simulated and woman. So again, I will stress this point. Everything we do is in a simulated environment. You want to get the same environment. Cool. Just go and check the description. I will put the links there. You can download every single machine we use from there. Let's get started. Uh, so there is a pen tester machine, which Kali Linux. The thing is that this Kali Linux has got the virtual box. Um, you know, what do you say that, uh, the Kali Linux has got virtual box add ons installed. So you can drag and drop things from your host operating system to this. You can copy and paste things. So that's why I'm sharing this gear. If you got your own, that's fine. Um, there is a beta server. So our website is hackerinthehouse.com for this course, basically we just made it whole website for that and uh, there's a subdomain Beta.hackernthehouse.com. That's our first target. Then we got something called media.hackerinthehouse.com. That's our second target. Uh, we got more targets like HR.hackerinthehouse.com. There are some internal user machines, uh, like a windows machine, which you are going to hack. So there is a whole entire, you know, enterprise level architecture. Right? Um, any doubts on that, that point? Like if you don't understand what a subdomain is or something, I guess you won't understand that. Yeah. Yeah. So let me quickly open a paint and explain you how this, this works. For example, this is our company. Okay. Now in this company, there are of course, a lot of, um, you know, there will be a lot of, what do you say? There'll be a lot of, uh, departments or actually sections. We call them zones. Okay. So let's say this is zone one. This is zone two. This is zone three. Let's keep it that two zone three. We will add more zones later in the course as well. So these zones where exactly these are, this is DMZ. Yeah. There you go. There's DMZ. So this is internal. Okay. So this is your internal zone. And let's say, this is management. Alright. Alright. So we got a company which has been divided into multiple zones and that's how any enterprise system works. Okay. So you, are a hacker who is, let's say, uh, right over here. Let's say this is your computer. And I don't know why things are working quite good, but anyways, um, yeah, so let's say you got an IP address or whatever. Let's say 10.2.1 Dot then, whatever IP you got, that is your personal IP in, in your computer. That is your IP address. Now let's say this company has got some IP address. Let's say there is some IP address. Uh, we don't know what that IP is, so they will give you a VPN connection. Normally that is you pen test. They always give you a VPN connection so that you can be in their network zones. Okay. That is, that is one of the ways they will give you a VPN using this. You will get an IP address, let's say 10.0.10.9. Again, let's say you will get this address. And the, this DMZ has that same address. Okay. The same range, let's say 10,.0.10.0/ 24. So any kind of IP in that specific unit. So that is what they're going to give you so that your machine is, is going to get into the same zone. That is how it works. You need to be in the same IP address zone to even communicate with the machine. If you're not in the same zone, you cannot communicate. Is that making sense? Ya making sense There are two kinds of IPs there is a public IP and a private IP. So when you say an IP, like, I'm sorry, when you say an IP like 192, or if an IP is like 172 or an IP is like 10, okay. These are private IPS. These are not connected to internet. They, they, they do not. You know, there is no matter if they're connected or not connected. These are private. So normally what happens, what happens when you connect to the internet? There is internet, there is a router. And then with that router, there are a lot of computers connected in between. There can be switches, hubs, etc,etc. But there is internet. There is a router with that. router machines are connected that router has a public IP. Only the router has a public IP, and that router will give a private IP to all the machines. So you want a wifi, wifi hotspot in your home or whatever, that, that hotspot, that wifi that has a public IP, and that is going to assign every one of your computer phones, whatever it is connected to that a private ID. Okay. Now that is how it works. So if I show you, this is the command from NFI, just say, IP can say, you can see that I have a router, which has a wifi address, which is a IP address, internal IP of 1921680.1. That is routers internal IP. And this, this router is giving my computer and IP address of 1921680.112. And similarly, my phone is having the IP address of 1921680.230 something. That is, that is how it works. So this is the range 1921680. something. Okay. That is the range. This is the last octave, which is the IP address, specific IP for this. And this complete is the IP of the computer. That is how IP is work and the public IP. If I go ahead and go on Google, and let's say, what is my IP now this 45.125.602.15. This is my public IP. This IP is not for my computer. This for my router, that router is having the IP. Every device connected with that router will have the same IP, okay. That is how public and private works. So this in this diagram, when you say a DMZ and he said, this DMZ, normally a DMZ is a demilitarized zone at DMZ is the area where a company will put those application servers, websites, which are on a public IP as well as on a private IP. So you, got a website as a company, you've got a website, you need a web server. You will put that web server in a DMZ area. That DMZ area is publicly connectable that DMZ area is the only area that will have IP addresses, which are public Is that making sense? Are we getting it? So if we can just go ahead and say, yep. If I just go ahead and say sagarbansal.com, this IP address 10424121220. This, this specific IP address is a public IP. This IP address is the IP of my server, which is running sagarbansal.com. And that is in the DMZ area and all the other computers we have in our company. So, you know, for staff and all they are, of course, in a internal area, restricted area, but just not publicly available, there, there will be some other servers or some firewalls, at least some firewalls, which will be blocking public access. So, you know, people cannot connect with those computers normally directly, okay. But in a DMZ, anyone can go ahead and connect with the machine because this is public IP. And everyone knows this IP, you know, just by doing a thing, you can find it and everyone can connect with it because that's the purpose. I mean, if, if no one can connect with a website, what's the purpose of a website. That's why that's publicly routable. So normally what we do is let's say there's a machine in the management area, or let's make it simple. Let's say there is a machine here in internal area. So, and there's a server web server, then this DMZ, and let's say, we want to attack this machine in the internal. We cannot directly do it because our IP ranges are different. So what we can do, we can have this DMZ machine and be in that range. Then use that range as a pivot, we call that a pivot, okay. Use that machine as a pivot and then hack into the internal network. So that is how we hack a server. We use it's IP, address, route the network from that to another machine. So we need, we can do multiple ranges by doing that. Um, any doubts there? I know that was a little confusing, that pivot stuff, but when we will do practical you come to light, but still any doubt in the concept. Okay, that's fine. That's that's clear so far. So good. Right? So that is how any enterprise network works. That's how we, that's how we pen test. Now let's talk about the project itself. You got these machines. Um, we are assuming that this beta.hackerinthehouse is in the DMZ area. This is a, this is a web server. Okay. This media.hackerinthehouse is in a production zone. So there's a DMZ zone. There is a production zone. There is an internal zone. There is a management, there are four zones. So this isn't the, this isn't the, what do you say beta.hackerinthehouse? This one isn't the DMZ. And this was, uh, this one is in the production zone. Now let me show you my configurations here. So you can see, I got some more machines, ignored them. Uh, there's a pen test. The machine, there is a beta machine. This beta machine is in the DMZ. And then there is a media machine. This media machine is in the production, uh, production zone. Now what these zones are, if we go to preferences and network. Yep. There's the network. You can see, we have created three zones and I like to give them the name as a range. So range 100, 148, 155 is the three ranges at the moment. Um, if I open them, you can see the IP address in this range are 10.0.100.0/24, which means any IP will start from 10.0.100. Okay. Similarly in the second range, 10,.0.148 Similarly in third range, 10.0.115. That is how the IPs are going to start. Um, am sorry sagar, can you just backtrack that just one more time for me please? Right. If I go to file preferences and then network, we have created three networks three subnets, basically. Uh, the first one is range 100 If I open that, you can see that the name which I have given range 100. Uh, the networks, Id is 10.0.100.0/24, which basically means any machine in this zone will have the IP address of 10.0.100./ you know, something. So just to give you an example, let me power this machine on. And then you can see if I power this machine on. Um, just one quick question. So are, are, are all these ranges, um, accessible for all the virtual machines or any machine, which is in that specific range is going to be, you know, in that network. Oh, and what I meant is the virtual box has all those ranges No you need to create them. Got it. I think what he's saying finally is you can give it an adapter that belongs to any of the them, Yes. So that is flexible. Right? Got it. I have made this machine. This is machine numbers 001 and you can see the IP address there. Um, the IP address in the fourth line, it is 10.0.100.10 right? That is the IP because this machine is in that range in the range of hundreds. Also, this machine is having two network cards. The second one is 10.0.148.111 which is also in the range of 148. If I show you this machine, media machine, [inaudible] almost done. This machine is in the range of 48, 148. Plus this is having a third sub net, which is one, uh, 115 I think we got a mistake here. It needs to be 155. Anyways. I'll fix it. I'll fix it later, but 115 Okay. So here you go. These are two machines and you can see, so 10.0.100,10.0.148. And 10.0.115 These are the three subnets we got and this, this whole, uh, this whole enterprise at the moment now how to create them, you go to file. You go to preferences. You go to network and you click on this plus button and it'll make a Nat network Double click here you can give it any name. So let me give range115 which I think I forgot to create. And here you can give CIDR. I just like to change this to whenever I want. So 10.0. something, um, let's say 115, don't do a slash 24. Um, that is going to be actually a error and you can enable the DSTP. That's really fine. This will help to get automatic IPS. That's not going to hurt. You can just keep that support. IPv6. Really? Doesn't matter. If you want to have IPv6 testing, you can hit that. I want to just you at this level, um, just go ahead and click on. Okay. And now you got another range. 115. Okay. And how to I assign this? Let me turn off the machine. First of all, having a whistling noise. Everybody else had it. Yeah. I forgot what's wrong then. That's not what it is that you can hear it. I mean, I still don't understand it. I don't think it's from you. It's from over here. Okay, cool. Right. So if I go to settings of this machine and if I go to network, then you can see we have in Nat network adapter and in nat netwrok you can choose all these different ranges which we have created again. Is that making sense now? Yes. Yes it does. So here we got this 115 All right, cool. So now this machine is in 148 and 115. This machine is in 100 and 148. So that is how, uh, the, the enterprise is going on at the moment. Right? So our pen tester machine that is in the bridge adapter, which basically means it's connected to your router, not the company's network, it's in your network, your router plus adapter two is on range, 100 now why range, 100 We assume that range 100 is a public range. It is a DMZ area. Okay? Uh, that is what we are assuming over second case. Let us assume range a hundred is a VPN connection. So the company has given you a VPN connection. You are also in the same range of that DMZ area. Okay? That is what you have to do. You, you need to be in, in the range of at least first machine, which you were gonna have, other ranges. They don't matter. You can always pivot so you can use the range of the machine itself. You can pivot, but the first needs to be in the same range. So that's why you need an adapter. We are only having 100. There is no other adapter here. You only have 100, but we will be able to hack into 148, 115,155, all of them. But at the moment we are only in 100. So two adapters, one is built withit, which is directly connected to my wifi to get me internet. Another one is a Nat network and range 100. Again, that, that is how the architecture is going to look like. That is how it works. Um, any questions there? [inaudible] Nope. All right. Let's get started. Then you can always, you know, follow up later with the recording. Of course there is no point to follow up right now because that doesn't make any sense. So we are going to practice today on the First machine, which is 001 beta server, beta server is a website, and we going to be going to try to hack it and practice. So this is the Kali Linux there are two accounts on each machine. Yes. Sagar we haven't, um, I think you instructed me not to have these installed so we didn't install it. We just downloaded them. Right. I'm just saying that you should be doing that after the lecture, because a lot of time and that's going to be a lot of time with everyone. Isn't it? Okay. Got it. Makes sense. I'll be giving the recording. Of course. Okay. Makes sense. And if there is some doubt, we can always discuss tomorrow in tommorrow class or after the class I'm free. I mean, I'm really free. You guys can call me, No , makes sense, man. Makes sense. Continue please. So there are two accounts. The first, the, the nonroot account is Kali Kali, the root account as a root and licensed to pen test as the password. So password is licensed to pentest account is root I'm just logging in as Kali. All right. And that doesn't work. So, yep. There you go. So that is Kali and you go full screen. You don't need the browser. Yep. So this is our Kali Linux And I'm going to show you the IP address here. Oops. I have config and that doesn't work because we are not root. So I'll make a root license to pen test config. Excuse me, [inaudible] how what's going on. Why I've config is not working Yeah, now, it works. Okay. So you can see, we got an IP address. 192.1680.109, which is coming from my router. This has nothing to do with the hacker in the house company. This is my local IP. We also have another IP which is 10.0.100.9 which is the IP address. That is same in the same range of the DMZ area. The DMZ machine, the beta.hackerinthehouse machine is also in the same network. So that is how this is working at the moment. Now let us get started. hacking it first step is always footprinting information gathering, blah, blah, blah. Everyone knows that there are two kinds of, uh, you know, we call that reconnaissance. By the way, there are two kind of reconnaissance. There is a passive, and there's active what happens in passive is that you directly do not interact with the target. So, you know, just to give you an example very quick, and I'll not take a lot of time here. Um, just as an example, you may go ahead and, um, you know, you may go ahead and go on something like built with, okay. And you may go ahead and go over there and maybe you can just go ahead and put a IP, address a URL and go ahead and try to find something when you are doing that. So for example, hacker in the house.com. Now, when you do that, you are interacting with the target, okay. Built which is a tool, but you are interacting with the target. You use the tool, you used it to interact with the target. This is an active reconnaissance part. You are actively interacting with the target, but if you just go on Google and you know that Google is a search engine, it has scrolled the things itself. And now here you go ahead and try hackerinthehouse and whatever you get here. So we got to see these, by the way, whenever you get here, this is passive information. You did not interact with the target itself, but if you are using a tool you're talking to the target, you're scanning it. You're asking it questions. That is direct interaction that is active reconnaissance. If you are using a search engine, a database, whatever that already has the information, you're just trying to retrieve that information publicly available information is the passive reconnaissance. Let us assume we will ignore the passive information part here and this whole topic, because normally when you're working professionally with companies, they will provide you a scope of work. You know, you will get a scope of work that scope of work, a work statement that will have a lot of information about the tasks. Those tasks are what you have to do, and you normally don't need to do passive information gathering Uh, but if you are interested, I got a video on that. I'll send you how to do passive information, but let's be creative. Let's start with active part, which is actually the main thing which we are going to do. So let us assume our mission is to hack a website, a website, or a web server, which is beta.hackerInthehouse. That's our mission. How do we do that? Very first thing always get the technology profile of the target. So we've got beta. Let me become pseudo. Yeah, well let's, let's go ahead and say beta.hackerinthehouse.com. That's the website. That is our target. First thing always get the technology profile and there's a very cool tool called whatweb you use. Once you get the technology profile of the website. Again, it will come up with all the information. Here you go. The information you have here is it is running a apache web server. It is running. It is having a HTML5. It is running ubuntu Linux Apache version is this IP address is this, it is having jquery with the version of this. It is running WordPress with this version is running PHP with this version. Um, I don't see any other information there. Yup. PHP 5.5 0.9. That's all. This is the technology profile of the website. And just by this, you know, that it is, there are two options. There is WordPress and PHP, which an Apache, which can be your target three options. You've got WordPress, we've got PHP, you've got Apache easiest. One let's say is what this, why this comes with experience. But WordPress, if anyone of, you know, what is wordpress btw, my website is WordPress , right? So what is WordPress is a content management system, CMS, okay. WordPress is used to create websites to create, to manage content. Basically it's a platform which we use to manage the, the, you know, uh, websites or any kind of data. It's a CMS. And there are two kinds of, uh, websites or web apps. There are always a CMS websites, or there are custom coded websites. And there is a 70% chance that your target will be a CMS, popular CMS are WordPress ,Joomla or Drupal open CMS. These are, these are some popular ones. Every, every one of those CMS has a tool specific tool dedicated to them. Wordpress has a tool called WAPscan Joomla has a tool called joomscan can Drupal has a tool called drupscan. Okay. Every tool has got a scanning tool. Every, every CMS has got a scanning tool in case this is a custom coded website. You got other tools like Actionetics, okay? Or you got nesses, you got aqualus. So there are, you know, very expensive tools. Um, but they are general tools, which you can use on any kind of thing. You can use them on CMS, or you can use them on custom coded sites, but for CMS, you got specific tools as well. One of them is WAP scan, which is for WordPress or a PHP. You follow the normal network pentesting or a normal process. Uh, what is that process? You have a version number. So you got a version number go on google research about this version. Try to find a vulnerability. If you find it when vulnerability in your research, then find a exploit. If you find an exploit, try it. If that exploit works. Congratulations. If that exploit doesn't work, try to find another one do the research again. If you don't find anything in your report mentioned that I did this, I did that. I did this. Your system is secure. It can not be, hacked just mentioned it. You know, that's, that's what a report is. A report is it doesn't means that you have to hack it and report is you just have to do a pen test and tell us that it is safe or not. And if it is safe, then mentioned it,it is safe, but show your due diligence show that you have done the work show. That proper screenshots that you have tried, this, that this, and still, this is not hackable. That's why I'm saying it is safe. You have to justify that, uh, for the moment let's ignore this and this Apache and PHP, because their process is little different. We are right now focusing on hacking CMS. Okay? So the whole class is all about hacking a CMS. Now, when you have, this is the, uh, this is the information gathering phase. We got the information. This is running this, this, this, oops, let me cancel that. Yep. We got the information. This is running WordPress. This is running a ubuntu PHP Apache. Now let's select that. We are going to test the CMS. We are going to test the WordPress. What next? Go on. google find a tools. So you can go and Google and find a tool. And I mean, it's very simple. You need to learn how to Google, because even if you talk about the LPT exam, or if you talk about the real life, you need to learn how to use Google. So just say how to test WordPress or how to pen test WordPress. That's a better, that's a better, uh, option, right? How to pentest WordPress? You've got a lot of videos. You can watch any of them. Uh, but they will, of course mentioned that WAP scan tool is there in this, in this post. I'm quite sure you, here you go. The frist tool is WAP scan. They have given you all the syntax and you can follow this. Now I'm going to show you how to do that. So let's clear the screen let's use WAP scanhelp and always before using, before using anything, make sure you learn how to use help WAP scanh. And this is the help menu. So they use it, always read the usage, which says. Would be scan space options. Now, what are the options? The first option is URL. Then just come down very down. There are some options to brute force and here throttling. So you are not, you are not because on a real internet server, there will be firewalls which will block you. So you may want to throttle the speed of your attack or any kind of scan or detection mode. If there is a firewall or something or Passover or whatever, you can, you can handle that. The main thing I want to show you is an enumerate. So e, that is what I'm finding enumerate. So you can enumerate a lot of information. Enumerate means you will ask some questions or you will try to gather some data from the target. Now, what kind of data we can gather? We can find vulnerable plugins or all plugins. Now, what is plugin? Plugin is the softwares which we install on WordPress. Wordpress is like your windows. You got windows 10. That is like your WordPress. Now you install a lot of software on that to make it usable. That is the plugin. That is how WordPress works for websites. So popular plugins, vulnerable themes that you can give teams to it to style it. Then all themes, all right, popular teams some other things like configuration backups, etc user IDs. So you can find a user's real usernames. That is what you can find and media files. That is what you can find. These are all the things you can find. Okay. So let's go ahead and, and do it. Let's go ahead and say, we will find e and vulnerable themes and when vulnerable l plugins, okay vulnerable plugins vulnerable themes VP VT, let's go ahead and clear the screen WP scan URL because it was written here, beta.hackerinthehouse.com I make correct that e. Now what we are going to enumerate vulnerable themes. And vulnerable plugins WP, WT presenter, let's wait for the magic to happen. And it's going to start giving us a lot of information. It has finished. Let's go ahead and start from the scratch Information. Number 1, interesting finding this website is running this, this, this, we actually already know that this is running apache & PHP due to wordweb, but it is giving you the information. Information number 2, direct access found, which is XML RPC. Now XML RPC is an interface which can be used to talk to the website, you know, using command line. Again, that is, that is a interface or using web queries. So you don't need to go ahead and log into the website, give your password, blah, blah, blah, and then go to the dashboard and click there and click there and write the code. You don't have to do that. You can just use XML, RPC interface to directly communicate with the website over the command line or whatever. Now, th th this is going to this is going to help to brute force the website. You can bruteforce, or this is going to help you to give commands to the website, but you need the proper password. Of course, it's one of the important things. If there is XML, RPC its going to help you. It's not a vulnerability, but it's going to help you. Read me. File is present. So read me, we'll have different information like diversion information, etc, but it will automatically give them version information. So we don't really need that. It's also saying that upload directory has listing enabled, which is quite not good. If I open this open link, you can see we got, all the uploads. So you can basically check the upload file here. 2020, let's say 03. We don't have anything.02. We don't have any things 01. Yep. We got some images there. If I open this, we got a photograph. There uploads directory is open. So website data can be easily seen from the upload directory. And this is not very good practice. This is a vulnerability. We call it a information disclosure. In case, in case this, this was a sensitive data, and I will say, this is a sensitive data, because you know, you, you may be uploading some private data here and that is available. So you have to see what kind of data is there. If you find some sensitive data, you will say this vulnerability is high, you will, you will give it a risk rating of high. Okay. It is risk rating of high and saying sensitive data disclosure. That is your vulnerability title. The risk rating is high .In this case, this is not high. You can see there is just two locals , two local files. I don't, I don't see anything else here. There are two local files in 2019 as well. I just see some images by the way, like there is nothing else. These are simple images, right? So this is not sensitive data for me. So here I can keep it into low or medium. Okay. I can say directory listing enabled, or I can say information disclosure, okay. This is what I can give the title. Not sensitive information, but the saying information disclosure, because this is not that not that sensitive. And you can, you can give it a risk rating of low or medium. So depends what kind of data you get, but low or medium in case you get some sensitive data like files, you know, which for example, many, many people will sell paid courses, okay. Paid videos or paid files, PDFs, etc, books. They will keep them in the uploads folder of the WordPress. And that folder is public. So as a hacker, I can just go ahead, open the upload folder, download the content from there and never pay them anything. I don't have to purchase it because I can open that up and get from the folder. So at that point, because it is harming the business, it becomes sensitive data. And then it is in the critical or high. And that is how you adjust the risk rating of this. Any doubts there? No, it makes sense. Alright. Did you download my video? Which one? Did you go to my website and download my videos? No, I tried downloading that actually. Oh, you did? Okay. Let me know. Let me know what you get out of it. Oh yeah, yeah. Oh gosh. All right. Next thing directory to this thing, we got a vulnerability there. Another one, a WAP Cron, reilly? I mean, this WAP cron what exactly it is. Basically it's a Cron job. So you can actually read this, these or they say you can read these issues and I'm quite not sure what this is, because see, every, every website will have a different finding and you cannot remember all of them. You just need to go ahead and read the references to know what exactly this is. And I think this is a cron job, something so possibly you can read it and you can find what it is, but this is not a vulnerability. This is just information, because if it is a vulnerability, it will be a minus sign here in the red color. This is a plus. This is just a information. So you can read about it. It may be something you can use later. Wordpress version 5.1.4, you got one thing there. And this is according to this website, this is the latest release of this. So this is a safe version. If, if this was vulnerable, it will show here itself that this is, this version vulnerable. You can attack it. Here is a possible exploit on the internet, but it is not. Theme is Hestia version is this again? If the theme was vulnerable, it will show you here. It will tell you that this is vulnerable You should go ahead and do something else. And similar thing for everything. It Found some URLs there. That's fine. It may find some plugins. It will tell you that the plugin is vulnerale Now that that is what we got. We did not got any vulnerable. You know, we did not get any one vulnerale plugin, no plugin found. We did not got ay vulnerable theme, not theme found. Basically this website is safe. Okay. This website is safe. That is the conclusion still. We are going to hack it. I will show you how to do that. But the conclusion that is website is safe, just to show you Another website. And I'm not sure if I can scan my website, but let me try to do that. I have some plugins which are not updated from last two days. So let me just check that. I'm not sure that we can scan my website, but Huh. Okay. Let's wait. And this is the difference. This is a real website on the real internet. It's taking a lot of time. That was a virtual machine that began like in one second, right? This is a real website it's taking time and it will take time. See, it's taking So much long to find the vulnerable themes and plugins. No plugins found vulnerability. That's fine. But anyways, let's see. Almost done. There you go. So in my website also, it is completely safe and I was not expecting this, but I think I fixed it yesterday. There were two plugins which are outdated, so that's fine. Maybe they are not vulnerable. They are just outdated. You can see, in my case, you can see, there are some other things. There is no XML, RPC. Yeah. You cannot see there is extending XML, RPC finding further, you might see that there is an interesting entry, which says CloudFlare, what is CloudFlare? Cloudflare is a CDN, eh, you know, a content delivery network. It helps you to speed up the website. It's a service which helps you to increase the speed. There is, there are must use plugins. So the most popular plugins, but that kind of thing, there are plugins, which I'm using. There is the team called ocean WP in, in the previous one, there was a team called Hastia. In my case, it is the ocean and nothing else. It cannot find anything else. That's maybe because of my firewall or something, Atleast, I'm using a lot of plugins, like 50, 60 of them, but it cannot identify them. Due to firewalls or some reason. But the bottom line is if there is a vulnerability, there is a great chance. It will show you here. I mean, not every website will have a firewall. Like at least I would say 50% of the websites don't have a firewall, a bigger, Wordpress websites because people don't even know how to use a firewall. Okay. They don't know. Even in the enterprise networks, if they do have a firewall, they will not be well configured. And I have seen that every time. And that's what we are testing. I mean, if it is well configured, that's fine. It is, it is safe. It has not been configured. That's what we need to test. So that's the result. Now, coming back to the previous scan now coming back to the previous scan, which is this one. So in this case, we found that there is no vulnerable plugin, there is vulnerable theme, which basically means the website is safe. Okay. That's one of the point of views. The last thing before leaving a website or a target is brute force. Today, we are talking all about bruteforce, by the way, We're talking about how to brute force a CMS. That is the whole lecture. We have a CMS, we will brute force. What is brute forcing anyone crack using any possible combination of letters, words or characters. All right. And what is a dictionary?Same thing, except this time you only use the dictionary words, publication case, Right So what do you think is, is a better option in case of a website? Should we be using bruteforcing or a dictionary? You're definitely a brute force. Sorry, go ahead. Okay. Do you want to say something Bravo? Oh yeah. I was, I was thinking it was dictionary. A better one. Yeah. Bruteforcing It take longer, but brute force are have more options. Right. Okay. All right. So let me explain that. Let me explain that, how this works. Udefinitely brute forcing has got hundred percent chance basically because in bruteforcing you're trying every single password, zero one, two, three, four, five, six, seven, eight, nine, then a to Z, then combinations, letter characters. You're trying, literally you're trying every single password in this world. The problem is time in a pentest. You had like how much like the, the maximum length of pen tests, which I have done in my life was two months. I guess, 60 days you cannot group force a website with a password of 20 characters. That's, that's what enterprises are going to use like 12, 12, 20, 15. Those are things long passwords. You cannot brute force those passwords with a, within a 20, within a two months time, it can take two years. And in two years, someone will change it. You know, there is a policy of changing the password every 15 days. So when you, when you have an offline cracking, so there are two kinds of cracking. You got you got a hash or something. And you're trying to crack that offline. You know, you got, you got a password which is encrypted, and then you are trying to crack it offline. You use brute force, then you're doing it over the web. You always try to think about the time limits. Okay. And it is practically impossible to break a 15 character password in a, within a year, actually. Okay. That is what you have to think. And you will, of course get blocked. So someone will block you because you're trying millions of requests. Someone will notice you. That is the time when we use a dictionary because in a dictionary we are using low amount of words. Of course, brute force has a hundred percent success that will, of course break the password. That's not a doubt regardless of the time. But when we say there is a time we have to manage the risk, there is a risk that we will not find the password in the dictionary. And there is a risk that someone will change the password due to the time limit in the Brute force. First Dictornary, we will not use the password brute force. Someone will change the password. Those are the two things you have to evaluate. Which one do you care about in, in, in the LPD exam or in a normal three, four days or a week pen test of course, brute forcing is not at all. An option. LPD is like six hours. You are only 6 hours to have this machine at this kind of machine. Of course you cannot go ahead and do brute forcing. So we go to the dictionary. Does that make sense now? Yep. It makes perfect sense. Right? So the, the, you know, the what do you say if we go ahead and search WP, the syntax is quite similar. You can find out a brute force and the syntax. The one which I see right now is password username. So you can give a password attack lists, or you can give a password list and you can give a user's list. Okay? So that's P for single password on a left, that's U for a single user in more or less, that is how it works. You can do a brute force. So there, there are the options here, maximum passwords, blah, blah, blah. There must be an option for brute forcing as well. So you can do that. That's another, that's another day work Today. Let's talk about how to do a dictionary attack. We've got b that's you two options. Remember them? That's U thats it. The problem is we don't know the username. We don't know the password. Let's go ahead and try to find the username. And username is very easy. Dash u and enumerate the username, and it is very successful. It will come up with a user name. Here you go, users, identify. There are two users. First as admin. Second is developer. Let me show this on another terminal on my website. I'm quite sure it will find it there as well. So that's it. Let me scan the url, sagarbansal. Let me do one thing instead of try on another website of mine. I think this is not that secure. Let's say that a Am trying my another website over here. I it seem not updated. Do you wanna update ?thats updated? Okay. And we got an, error, we got error why. Permission denied. Oh, we are not root. I do hope everyone knew how to become root, right? Yeah. It was a sudo[inaudible] I usually type it sudo. So yeah. So when you type sudo, SU, which is pseudo switch user, it will default by default switch. You to the root, but for example, if you want to switch to another user like Paul, then you will use sudo supaul So if you specify username, would you do that? If you don't, it will be by default. Okay. Got it. Okay. Very quickly. WP scan that, URL. My, run.com, disclaimer, I don't own this website. I'm the CISO of the company so I can do whatever I want. It's a security risk. You need to give that disclaimer, tomorrow. What happens. Okay. All right. So keep that in background, but let's say we got the usernames admin developer now does being creative here. Of course, developers are the people who do the mistake. Isn't it? Developers are the people who will always use weak password. They will do mistakes in coding. So if you can, of course, private, both of them, just for the example, just telling you as a practical life scenario. And if you have time, you can try both of them. But if you have only one to choose, you will always try to go with developer. Now admin account is of course going to have more privileges, but there is a greater chance that you will get some access in developer. And once you have access, you can then maybe ask your client in real life. You can ask your client that listen, we had only two days, you were able to get access to developer. You gave us two more days. We can try to get access to admin as well. You get some liverages there, right? If you try directly on a hard target, maybe you will not get anything. Client will think you don't know anything. You're not good. Your reputation gets damaged. So when you're doing a practical pen test professional test, always try to first target the weak targets. And as a admin and developer, I will always choose a developer. So let's go ahead and choose developer as a username. We need passwords, where are the passwords. Paul, you want to say something? There are the passwords. I'm sorry. What's the question you say? What are the passwords? The where are the passwords. Which passwords will they try? Where is the list. Oh, password. Oh, I see. Shadow nobody. So see that's P no, no, no. I'm asking about a password list because we need a password code. Just like our code, right? So one of them is dark cord. One of them is Rockfield or TXT. There are popular lists on internet. The problem with those lists is if I show you a locate rockfield, you got a list there. That is the list. So let me copy this list. I'm copying this to form a Kali username, desktop. I just copied that there. Let me open it. Yup. Here is the list. Let me extract that. Oh, alright. So I'm just going to extract it. TarXf a rock to own Kali desktop and what it is. And it says it's affiliated errors skipping that better. Okay. That's right. Okay. permissions problem. Yep. Let's try it manually. And just drag and drop. There you go. We got the word list. Let me quickly move to that same folder. Kali desktop, basic question. Tar xf that command does what exactly to extract X in extract F I forgot what is F so you can check this index. I was just trying to extract that file. I did not add it for some reason. Not sure why extract and it's like zipping, right? Yeah. So I just did it manually right now. I just, I just opened the zip here and I just got it. Got it. Okay. Okay. We got this file.TXT. Let's see what WC, R O Rocky, that xd that's entered. The problem is this in these kind of word lists, there are how many? 14,344,992 pass it. 14 million passwords to write 14 million passwords. Let's say there is a throttle on the website. You can only try a pass. Like you can only try five passwords, and then you have to wait for five minutes. Let's let that kind of thing is there. It's going to date years. It's going to take again years. So that's again, the problem you need to come up with a great word list. Now these are good word lists. Of course you can use them, but when it's a professional test, and if there is a throttle, you always want to use a custom word list. Okay? No doubt. You can try it, but it's all about risk management. You need to check your risk for a pen testing purpose. Do you have that much time to do it or not? Normally you will have that much time. You can use rockthing. So Rocky is a, is a good list. The, the benefit of rock tool, is they have, you know, they have put the passwords in order. So the most common password is on the top. The least common password is on the bottom. So you are always trying best passwords first. And then you're moving to lower, low complexity and low success passwords. So high success chances are in this starting. That's why rocky can be great deal. I'm not going to use Roku because I'm quite sure that will never work because I have designed the machine at the end. I know that is not gonna work. So it will waste our time. But I'm just going to show you how to create a custom list, maybe in a LPT exam or in real life, whatever you will get the list. So your client may tell you that we want you to try to brute force the password. This is a list of passwords. You can try this. This can be your, this can be your scope of work. Yeah. in LPT exam, they can tell you that use this list or that list. You can use the list. If you do not get success, then try rocku. You Roku is your last attempt. You never do brute force in the LPT exam. But if you are having like if you're failing with the list, which they are providing as the client, if you are feeling that with that, try with rocku as your last attempt and you will do it. You are you know, you start the brute first and you keep it aside and do another other work. You don't just, you know, sit on that and wait for it. You just do other work it until it is brute first. So just to show you how to create a custom list, anyone how to create custom lists, start a text file. Okay. I'll come on that. Give me a minute. So here, by the way, in mytutorial, we got a username. It was either is my capital T. My tutorialrack, I get the username. That is how you can get usernames on a WordPress by the u. So that's the userspace. You enumerates users now. Yeah. What you're saying again? Sorry. Uif I were to create a custom list, I would create a basic text file and I will try to recon and figure out what the target might possibly use. So I can have a high probability of cracking it. Right. That's absolutely great. You just get the next while and you try to recon the words, you know, related words, and then get them over there. Now tell me you got like two hours, only two hours to crack a website. What is your best shot to get those, those recon thing done? How can you do that? Recon? Oh, social media. That's a big one. I think if I know whats great, but let's say you don't know anything about company. There is no social media profile. Could you try and build like a web scraper to kind of go through employees for the company, see their social media accounts and then try and get a password that way. Yeah. I mean, all of these are valid option, but I'm just saying, let us assume this is a beta website, right? This is a beta website. This is not public. Let's say the company is not even started. That is just a project, a test project. You have to do it. Then what? Top known default passwords. Yeah. I mean, they top known are in the Roku. You, so we will use that as the last resource. But before that, there is one thing that you can do. Let me tell you that you can go on live website and you can take, I mean, this is a beta website, but this is a website. You can go on that website and take the words from that website itself. I mean, instead of going on Google and trying to find, because Google will only get data when it is publicly available for everyone, but you got a website that is private to you, or you can go on their website and find the word. So basically use words that the company uses on the website. Yep. I mean, just to just, you know, you can just because we are targeting a developer account, just say, you go to these are password in house.com. We've got a website here. Right? We got works, hacker house license. We got, we got different, different words. You know, some complex words there, they got different words, their phone number, you know, you have a phone number there, address, maybe you got address there. You can use all of these words, isn't it. You make a good point. They, one of my one of our clients uses our wifi password is the part of it is the building number. Yeah. A lot of people we'll use phone numbers. A lot of people use this kind of stuff. So that's your first shot because I'm just saying you use this because how many words will be there on the website? Let's say we have a, we say that we will use at 12 to 20 characters stuff. How many words will be there? They'll be like 10 words, 12 words, 20 words, a hundred words, a hundred passwords. How much time will it take to test them? That's the first shot you should be taking, right? That's your first shot. Is that making sense? Yup. Right now you can do that. The problem is if you manually go ahead and test all the pages of the websites, that's going to take a lot of time. There is something called cewl, okay. CEWL, which you can use, you can say, say help? And these are all the options. And I say, well, we'll do the work for you. You can give minimum length and maximum length of words. You can tell it how much depth you want to go despite her. So it will basically go to two levels. For example, beta.hackerInthehouse.com. That's the first level beta.hackerInthehouse.com slash uploads. That's the second level. So anything on that file or that page, that is how levels work. If there was level three, then beta.Hackerinthehouse.Com/uploads/2020. So those lashes different, different, multiple nested pages, they are getting levels. So default is level two here. Let's just go ahead and use it. Just to show you clear the screen. CEWLM, let's, let's keep the default depth level as to only minimum minimum words. Let's say 12 maximum. Maximum words, let's say 20 the length which we think the password can be, of course, no company will use less than 12. There's a rare case. Someone will use more than 20. That's why 1220 is my best shot personally. Then just give the URL, beta.hackerInthehouse.com center. Here you go. You add these words. How many words are these it starting here? It's ending here. Yeah. This one line. You can, you can always try this list. Maybe you will need a password. You see this kind of words. They can be password, these kind of words. They can be passwords. So just go ahead and try it. Try that. That's that's one of the best shots you can do. I'll just go ahead and create a file. Okay. I just created a file there. Let's save it. Okay. Now we just got 35 passwords. How much time it will take to, you know, try these passwords 35 passwords. Won't take a lot of time. We can always try that. That's one of the ways I'm showing you, you know, you create a customer list with the website words and you try. It may work. It may not work really depends, but that's one of the ways in the exam. Always try this once. If you're a great team person, just try this before this as well, you know, even before this, you try default passwords, admin, admin, Capital A admin, capital admin, you know, first letter uppercase admin password, user password, just try 23 default combinations. If they don't work, try a custom list of password from thew ebsite. If that doesn't work try dock docu, that is the, that is the level you want to try it, right? Quick question. So when you typed in the CEWL and then you go M 1220, and then you put the URL. So it automatically searches that website and extracts words. Yes. Okay. Got it So we've got a word list. Let's go ahead and attack a WAP scan url beta.hackerInthehouse.com, then let's use U, and let's U let's use developer dash capital P password list. Let's just give it a password list. Let's press enter now we are brute forcing it with the words which we found on the website. Here you go. Where words, all words, try it. You see performing password attack on XML, RPC. We are reading that XML RPC. That's what I said. It's very fast again one user trying developer. And this was the last password we tried. 35 out of 35. We did not put any password, no valid password found in such a case. You should go ahead and switch back to something like Roku, despiet all words. Right. That, that is how it normally works. I've been under good passwords. We can try it Roku again. That's going to take a lot of time. Is that making sense? Yes. Right. So what I can just do here, I can go ahead and try it to rocku. I can keep that pushing. And of course, that's going to take forever. This can take a lot of time if I show you. I have one question. I don't know if it's out of scope but just, I know some people use no words and even if we're using we run CEWL we pull out words there. I know people, you know, you have special characters and numbers. Is there any kind of software that kind of automates, maybe adding numbers to the end? Yes, I am about to come it now. That's called transmutation. Okay. That's called transmutation. We improve the list. That's one of the ways. So let us say, we keep this rocku.TXT running on a separate terminal. We just need to keep it running there. Let's let's go ahead and hit that running there on a separate terminal. We open another terminal. Then we can work on improving our list. So if it is a test, which is all about, you know, if it is a test, which is all about brute forcing, we have to try everything and then we can transmute now transmute, what transmute is, let's say they're in a password sagar right now you can write sagar or you can write s@g@ or you can, you can write sagar@123 right? Or you can, you can write capital list, different, different versions of the same password. Isn't it. That's what you're asking. Yeah. That's what I'm asking. Yeah. Right. This is called transmutation. There are different Kinds of transmutations. This kind of thing. When you use the words like a becomes @ or you capitalized things, this kind of word. This is called leet mutation. Okay. leet. Mutation LeeT is called leetd mutation. There are different others as well. There are, there are substitutions additions. In addition, you are adding passwords like one, two, three, you, add @ now, there are multiple tools for that. One of them is cueds. So CUED that can improve a list. One is Chain enable Chain enable is the most famous tool in the whole history of pen testing chain enable, can do it. There is a Python script called transmute.py. Okay. Transmute.Py. That is my personal favorite because it's like a one liner, a one page python script py script. You can keep it anywhere. It doesn't take a lot of times. It's like instant and it gives me great results. So you can use transmitter how to get it. You can Google again. Firefox, I'm sorry. There you go. We can search for transmuters.py Just to mention one thing guys in the LPT exam, you do not have internet access. So you, I'm sorry. You can use internet in your local machine, but not in the machine, which they are going to give you. They will give you a virtual machine. A Windows sorry A Kali Linux machine that is the virtual machine. You cannot use internet on that machine. You can use it in your machine to research, but let's say you download this in your machine. You cannot transfer that file because that machine is not having an internet. Is that, is that making sense? Yeah, it makes sense. Yes. You see a simple but effective word list, on it and it works. Yep. And there is a file transmutter.py, which is a very effective file. I can just go ahead and download the zip here. I'm just, you know, this is, this is now going out of scope of the LPT exam, but this is like practical stuff. You should be, you should be learning this. That's a good stuff. Oh, cancel. There you go. Let's drag it out on next door. You got it, what's going on? I'm trying to, Oh, okay. Now I get it. Yeah. This is what you need. So we got transmuter.py file. Now we can go ahead and improve our list. This is still Still going on a brute force over there. I'm just, I'm just stopping it. We have already tried like 5,000 passwords. You can, you can keep it running in a professional test. Of course, in the LPD. If you're not getting any results within first 20 minutes or 30 minutes of a brute force it's not, it's not going to work. It just doesn't understand. It's not gona work in the exam. If you're not getting anything in 30 minutes, it's not working because they are not fools. They also understand this is a six hours. You have to act three machines and six hours. One machine is like two hours. You cannot keep a brute force running. So if you're not getting any password within 30 minutes in the exam, don't do it. Just stop it. Just to show you, how does transmutation work? I'll become root. Does like Paul do this? I just, that from kali desktop. There you go. Clear the screen. Now we've got a list of passwords, right? PasswordXD and transmute. How does transmute works? Just to show you drop transmuteh, to help you can specify a word, single word, or you can give it a whole list. So that is the using transmute options usage in the file. Otherwise you can give single word. Then there are different mutations, right? Typical transmissions typically it will make from itself append. It will, you know, it will add some things and it can insert some things. It can add characters, numbers, it can add symbols. It can add lower case alphabet. It can add uppercase alphabets. It can create common lead mutations. It can create leet mutation. This is apart from the scope of LPD. LPT does not, you know, once you to actually go ahead and transmute lists, they will give you the list in the exam. You will get the list to bruteforce, or you will at least get the option to use Rocku. You don't have to do it, but just for the common reference let's use L, which is common leet mutation, transmutationl So transmuteL input file. That is what we're going to do. In the screen transmutel input file input file is passed, right? If I press enter I'll press Ctrl+C just to it's a long list. You can see it just made so many complex passwords out of the list, which we were using. Right. Nice. Yes, I see it. It looks good. All right. So I can just output the output which are getting, I can just save it by, you know, angular bracket and I can give new passwords. Oh, I just say new, you know, I just press enter and they just got a new file, which is new. And you see how fast it was. That's why I liked this transmuter script. And now we can say word count, sorry. I just opened it. And now you can see first password is hackerInthehouse.com, but then there are transmuted version of this. Okay. There are so many versions, then different words, different versions. So that's the, that's the improved list. And you can have first, go ahead, try this list. Let me try this for you. You guys new, right? That new list as new press enter. Let's hope this will work. I know this work. I created the machine, but anyways, and it's brute forcing now, and of course, this is like a hundred thousand passwords, which is way less than Rocky which is 14 million passwords, 14 million versus a hundred thousand way more difference. Right? And these are quality passwords. And you can see this one works valid combination found. Username is developer. Password is . It looks very complex, but at the end, it is hacker in the house, leet mutated, and the word is even on the website. Right. Cool. That makes sense. Makes sense. Yeah. Right. And I'm going to take this username and we are going to make notes, you know, because you will need to reuse it. Right. Of course, you've got the password, but what now you will, of course need us. So let's create a file. I always use that. I don't know why just create files, but anyways, let's say notes, I faced it there. I just like, note the move. Not necessarily things. This is something we don't need. There's something we all need or in the house.com Word, press. Right? Yep. That seems fine. Right? We just, we just got the username and password there. Let's save it. And now anytime we are in another tool or wherever we are, we can always do catch notes. Okay. And this will give us the username and password because we just saved it right now. We just got the validation username password . And now we can further exploited the, we can dive into Metasploit and use multiple things. We can go to the website itself. Well, try to attack it from there. From inside, there are multiple ways we can do it. One of them is like hackerInthehouse.com, we can go on the website. Okay. We can go on the website. We can just go to login and it doesn't work. We can go to WAP login and it didn't work. We can go to /WAP dash login can. Hopefully that will work. Yeah. Here we go. It works. Here we can, we can use that username and password, which we got. Okay. Developer Based here. Then we got hackerInthehouse Username. I know the lecture is getting too long. Everyone needs to go home. So I'm good. It okay, cool. No, that's fine. So you see we can log in right .Now tomorrow and tomorrow's class. Let's go ahead and further exploited, you know, privilege, escalation, blah, blah, blah, different kind of things. Let's do it. The username is developer development part by the way, but it does work. Right. Um sounds good. Yeah. So today what you learned was how to brute force in CMS. Okay. And further how to create custom lists, which is out of the scope of, LPT just, you still learned it, but how do you use word lists to bruet force? A CMS. So how to do a dictionary attack on a CMS? That's what you learn. All right. So, Oh, Sagar. Yep. Oh no, no. After you go ahead. So are we going to cover like directory busters? Cause I know you were trying to different type of logins. Okay. Yep. Oh, I just deleted that. I just deleted notes. So my question was you know, we went through quite a few commands here, there in, in preparation for the exam and in preparation for tomorrow. Should we go back to these videos and kind of notate all the different commands? Oh, of course. What they all do or what is your recommendation within the next 24 hours? All right. So what I suggest is you download the lecture, I will upload it and I'll give you the access. You will download the lecture and watch it and follow it, actually do it. You know, you've got these machines, you've got the beta machine, you've got the license to pentest, the hacker machine, go ahead and do it. Just try to get the password yourself. Okay. I'm not too familiar with with what is that called again? The hypervisor virtual box. And that was very popular in the event that I get stuck, I'm sure I can just Google things right. In order to see how things otherwise if you know if you are doing there right now, which I don't assume you are doing, but in case you are doing that right now, this is day for me. Right. I'm in India right now. So you can always, okay. Okay. Sounds good. I'm willing to stay on if you want while I am available then. Okay. Okay, cool. Yeah. I'm willing to stay on just to have my VMs loaded and everything. I don't, I don't like to take it for grant. It sound real simple, but you know I think I'd rather just have my VMs all set up and make sure that it's set up properly. So what you just have to do by the way, you know, you just have to click on this tools here. Can you see this tool here? And once you click on import, you just click there and you can open the files and I have given you the file. So LPT yep. You got these files just open them and everything is loaded. Just like an import. That's what you have to do. Go. Okay. That sounds simple before doing any of the import, make sure you create the network first, because then it will mismatch what is preferences network. We've got these networks, so create 100 148, 155, 115. Create all of those four. Got it. So let's create the network. Okay. Sorry. We're done then. I don't want to hold anybody up. I can, I can stay with you while I can kind of just run through that real quick. If you don't mind. I'm sure I can be on for a while. Okay. Sweet. Alright. Okay. So just bear with me sagar since this you don't, you're not in a rush. Yeah, sure. Let me do that. Alright. Oh man. Zoom is so respectful. It doesn't let you share unless somebody stops here. Yeah. I mean, if I'm hearing something you're gonna share, right. It's teams you just share and you just put somebody off. That's correct. You can do that with, with Microsoft. Uokay, cool. So,uI got my windows. Can you see my screen? Right. Okay. So I'm going to go to file preferences. Yep. I'm going to go to my networks and now I need to create those different networks plus and the plus sign. This is, I gave it a name. Let's give it a range. Let's keep everyone on the same thing. Great one 100, First of all, what was the IP address? I didn't notate that. So just change that to, 10.0.100 know, Ctrl+z, ctrl+z that. Yeah. Just change that to 200. That's the standard. Got it, got it. Got it. Okay. It supports the ACP port for that click. Okay. To create another one. So is this range? 200. Okay. And what was the IP address for this one? And fall. I see the pattern now it's clicking. All right, then we'll do it again.three. Got it. Range 3115. I'm sorry. Range. One, one point. What did you say? 115, one, one five. Oh, sorry. I missed that part. Okay. And this, this is 115. Yeah. We can do that as well. So we've got four inches. Okay. So heavy range. So that's got it. Okay. 115. Okay. Okay. All right. And now I'm going to import my machine, go to my folder, my downloads. And you can start with this one and that's gonna take a lot of time. Oh yeah. Okay. Let me, let me do it . Yeah. Okay. Click on next and then import share this machine to anyone, right, right, right. Okay. And that's it. Yeah. I don't need to do any other customizations. No it will be automatically assigned. I have already fixed everything in the machine itself. You don't need do anything. Perfect. This is what you were talking about, right? Rafael. Just kind of having that out of the box for see yeah, yeah. Yeah. So if I was to walk into a penetration test right now, Well, everything be configured after putting the network Ranges. I mean, that company will of course have network ranges. Isn't it? No I'm referring to in the exam scenario, you know how you just said everything else is configured. Everything else is configured. Yes. I mean, the exam is just like a real test. There are 30 days. So you have 30 days in 30 days, you have to do the pentest. You have to do it three times. So there are nine machines. You have nine machines. You have to hack five of them. Within 30 days, you can use three days to do pen tests, 27 to make your report. Oh, okay. It's a big exam. Oh, OSCP people think, Oh, OSCP is the best example is if it's like 24 hour exam, it's not even teaching you those things. Practical things which you actually use in LPT is much wider exam this is much better. I thought we just had 18 hours full stop then. No, we had 30 days. 30 days. No, you have 30 days. And every day you can use six hours. I mean, you get six hours, six hours six hours. That is 18. You got three days to do pentest and going 27 days to do the report. Hey, sagar, let me rephrase my question. So you know how we just created the VM, right? We we said the network ranges, and then we configured the IP addresses that we need. The yeah. So my question to you is you just stated that after we do set the network ranges and we import the the VMs, everything else has been configured by you to operate accordingly. My question is, In this case, it is configured by me. Yes. So I'm asking, are you going to go over additional configuration steps that we may require? In exam? Yeah. Or would those be all you said? That will be preconfigured by EC Council great. Okay. Thank you. Yep. All you, you are not important in terms of machine. What happened? Oh, I was going to wait for you real quick. Because you say that one takes a while. I want to, it take like three, four minutes normally. Oh, okay. Okay. And yet I wanted to ask you a question again. It all seems simple, but I don't take anything for granted. So let me just make sure I'm clear here. This is a VM or this is an environment. This is for each one. Each one is a VM. Yep. Got it. Got it. Okay. Alright. Okay. It's pretty much just turn it on. And then once I turned it on, I click on here at the of start. Is there and then the right corner. Oh, there. Okay. Start. And then it turned on. Oh, I guess I'm waiting for it. Okay. So once you start, it just pops up. Okay. There's no RDP needed or anything. It's just pretty much connect like that. Cool. Okay. How did we get one? Right? I guess I'm good. Yep. So the Kali Linux which I have given you, the hacker machine that is running the virtual box addon those adons will allow you to copy paste files between your host machine and the virtual machine. You can go full screen or do drivers. Everything has been preinstalled so that's, that's fine. Okay. Yeah. As I said, four minutes, you are also using SSD, right? Yeah. State drive. Oh gosh. Yeah. It's four minutes. I got some students who were using hardisk. I was like, guys, this is going to take forever. Yeah. I know this guy named Victor. He did the same thing. I couldn't believe it, but I agree that I'll get after that he's standing right here. So that's what I was, bring it up, his name. So just going back to the test, I know we're not gonna really have the internet access to download things when they're looking for Mmm. A kind of software for transmutation. Are we going to have? Okay. So that is what I was saying from last five minutes, that transmutation is out of the scope of LPT. They do not expect you to trust . Wow. So they're all, they pretty much expect you to do is use a word list and, and crack it. Or they will give you a word list actually. Oh, because you have to plug it in, you know, you just have to plug it in. Okay. Well I hope the rest of the test is that simple. It's not that simple. You know, like I said, I don't take anything for granted, so yeah. I got you. Okay. Sorry. I , you can, you can close those messages from there. I'm, Not the Cross sign the message, you know? And then this last time now the other sign that, Oh, damn, there were two options. Right? The, the cross has really closed it. The second one was permanently remove the messages, my fault. I think you gave it the, so what I do now, just log in, right? You log into one. Oh, okay. The Pentester machine. Yep. Just open that. It was what did you say using, Password? What was the root username is root with the password as licensed to pentest, license to pentest and test like pen tense. Are you writing that ? Yeah. I was writing this. I was writing here. Here. Sorry. You can see. Oh, sorry. I'm giving you the user name for that machine. The pentested machine. Okay. This is right here. Why do you need the password for this machine? Right, right. I'm sorry. I'm tripping. I'm tripping you right you right. My fault. Pentesting machine is what I want. Let me turn that on. But we are going to have the beta machine, not the media because you are not in the same network. Media machine is in the internal production zone. You are in the DMZ zone right now. Okay. Oh. Can you just close the VM click on close VM. So go to settings. Okay. Close it and go to settings. Okay. So you're going to change the network adapter, go to the network because my wifi was different. Your wifi is different. So here in the business, make sure this is your wifi, right? I mean, it has automatically done it after the edit. So this is your wifi Can you take the adapter tool as well? Sure. Come check my, no no what I'm saying? Oh, well, right. So this is correct. That's correct. Yeah. That's correct. So you are in the adapter tool. This is the range 100 you're in that range. And the beta machine is in that range. Not the media machine. Media machine is in a different range. Got it. Got it. It is in this range of I guess you didn't put on the, on the other ones. Right? So you only need one range, which is a hundred because you've got idea on their machines. Got it. And then I could start the machine. Okay. Yeah. No, it should work. Cool. Okay. You guys following along over there, it might be beneficial for you. And they are going to call you. I know that. Cool. Got my Kali. All right. Sounds simple enough about what's been avoiding virtual box. Alright. Let me read this this time. If you want auto capture keyboard and turn on. Yeah, I like that, right? No, not that one. The second icon. All right. No, the second Icon not be crossed the second icon. That that message will cancel somewhere. I have too many mines. This one? Yes. This one. Don't show this message again. Got it. So you can press Ctrl+F to go full screen control will be always right when you are using virtual box commands, Right Cntrl right. Control. What do you mean by that? So there are two controls. There is a left control and there is a right control on your keyboard. Okay. When you're using virtual box commands and shortcuts like control F to go full screen, you use the right control, the right control. And you can always click on switch is the saying that you want a full screen. And if you want to come out again, the right control and F and F got it. And if are, if you want to use control in the VM, you use the left control. Right? Got it. And by the way, if you click in a VM, your mouse will be logged into that VM. If you want to bring your mouse to the host just press control. Oh, okay. Okay. So license to pen test. Yes. That's the root LICENSETOPENTEST. Hold on one second. This right. L I C E N S E . Okay. To pen test. Cause I couldn't do spell mistakes. I know, I know. It's probably me. Hold on. L I C E N S E D T O P E N T E S T. I don't want to give you do one thing. Can you write Kali Kali? That is the non root user. Yeah. Okay. Kali is what it is. I was taking some time for start Yeah. Close that browser. Yeah, Yeah, Yeah. There you go. Oh, Roku is already extracted. You can delete that. If you want to do it yourself. I do. Okay. As just a copy of my business. Let me see inside. I just sent it. Right. Isn't that logo cool. By the way, it's our, our personal, yeah, I like it, man. I like it. I like that picture too, man. You gotta, you gotta tell me who your photographer is, which picture there's a picture you had, you were showing I think on your desktop. Oh yeah, yeah, yeah, yeah. Thats my another course for CISO kind of people, you know lot of experience, just like easiest is a CSSP. So to grow further, maybe see CISO. Nice. Nice. Okay. Can you log into root using, using terminal now? Yeah, let's do it. Yeah. I forget one click. You want to go too sudosu. So you become root now this, but without sudo, you know, of course, without sudo permissions exited the site exit. Okay. Now just type su root. So when you type sudo su, that will ask you the user, the password of your account, because you are using your sudo powers when you directly type switch user to root. Now does asking me the password of the root user, so just type license to pentest. Okay. Okay. I believe the password is something else then try Kali, Kali, instead of licensed with a D, no, no, yeah. Sorry. Are you using license D yeah, I did a D I think, I didn't saw that. Yeah, it is license without d, yeah. So I, I did'nt notice that you're using with a D. Okay, cool. We're good. I just quickly just try one thing. Just try to ping the machine in the DMZ area. The beta.hackerinthehouse.com. What was the IP? Beta.Hackerinthehouse.Com Sorry. You're right. I already configured the host I haven't run and done it. Okay. Oh, okay. Yeah. It's not running. I think as it it's me. No media, oh media is running. Okay. It's not reachable. Okay. Run it. Then let's run it. Let's run it paid in the house. Let me start. Oh, also guys, just adjust the amount of Ram according to your system. So like, Oh yeah. Sorry. Yeah. 16, gb. So not 16, but maybe someone is using like eight gb or four gb. Just adjust the Ram always before launching any kind of machine you want to close. First of all, you Might want to try it again after the machine starts. Okay. CTRL+C Yeah. That's when I typed in the wrong side, I know you're on full screen basically you can just say clear. Sorry. I didn't see that part. I think machine is on, can you check that? The beta.? Yep. Yeah, here it is. It's on. Oh, okay. I think you are using two desktop to do, to, you know, to, it stops. Yeah. Yeah. I brought up one of them. Yeah. You can see this one, right? Yeah. Just ping it Alright. Let's see. Pentester Yeah. There you go. It's really convenient. So you can, you can work with it further and you can try to do whatever we did today. Sweet. Alright. All cool. Then. Any doubts? Anyone? Nah, we're good, man. Thank you very much. That was very clear. Concise, Alright? So basically the Metasploit framework is one of the most popular frameworks in the whole pen testing field. There are three main frameworks. Basically. We have the core impact. We have the canvas. And metasploit so these are the three most common frameworks in, in industry, which we use, of course if the project is like, you know, very expensive, a big project, you may want to go with core impact. That is a much better tool. If it is a normal organizational day to day activity, then Metasploit is kind of fine. Now Metasploit comes with three flavors. So actually now it's coming with two flavors earlier. There were three, it was it pro version, a community version and a framework version. Now community is no longer existing, so they discontinued it. So we just have Metasploit pro and Metasploit framework. What's the difference, Metasploit pro has got a much more exploits, much more features, and it has got a graphical user interface, `framework has a command line interface. So that's the whole big difference. You got a command line versus a graphical. That's where the difference comes up. Let me just go ahead and become root very quickly. There you go. How to stop me display you just type MSF console. That's one of the ways to start Metasploit in the framework talking of course, pro version, you cannot buy the pro version as a individual. You need to be a company and import licenses needed. So but you can always try to sign up for the trial version, they got like 15 days trial and int the LPT exam, basically you will get Metasploit. So, you know, unlike OSCP and the offensive security believes that you need to do everything manually, which is like exploit development work. We are not expert developers. We are professional pentesters in professional pen testing, we never develop our own exploits. It's very rare that you will make your own exploits. You will always use, you know, industry specific already made exploits, which are accredited. So I think we, we got us, we got tWo CSSP here. I Paul CSSP. Yes. It's Easy to CSP, right? Correct. Yeah. So, so you guys understand the accreditation and certification process, Is'nt it? Right? Right. So for rafal, basically say, when you are doing any kind of change in the company, you need to do, you need to go through a proper change management process. Okay. When you're doing a pen test, of course you are making changes. You know, you can crash their systems. You can do a lot of work. Maybe you run a exploit from public. You know, you just go on internet, you find the exploit, you run it. Maybe it will make some changes to their system. So you cannot use such kind of things in professional environment until it has been, you know, going through a process where there is a proper change management, proper testing, a lot of different stuff that is called the accreditation certification process, where, you know, you get proper authority to run that. So that's why we don't use public exploits. We use professional frameworks. A Metasploit is one of them. We use these exploits and the, you know, exploits from these networks. That's the whole reason behind using it. LPT exam is very, very professional. They believe that you are in the real life going to use it. So they will give you the Metasploit framework. You will have access to it. And this is going to be like 80% of your, your, your tool that you will be using for the whole exam is so Metasploit is something you need to learn very deeply. Now, if I go ahead and let me just open a new terminal. And so if I go ahead to a directory, I hope you know how to navigate. So use user is one of the root is one of the folders user folder in that there is a folder called share and in that there is a folder called Metasploit. Okay. Do we have Metasploit Metasploit framework, Metasploit framework. So there's a folder user in which there is a folder share. There is a folder, Metasploit. In Metasploit there's a folder called modules. I can see these are the modules this is what Metasploit is basically made of. These are the main modules you're in auxillaries is you got encoders, evasion, exploit norms. Payloads,Posts. Let's discuss them very quickly, like 15 minutes. What exactly does this all mean now? Yeah. I would like to start with exploit and payload because that's the easiest one I can. And I always like to give this gun analogy. So think about you, you have a gun, right? You have a gun. You're wanna shoot someone then what do you need? You need a bullet. Isn't it, Guys. You got a gun. You need a bullet to shoot someone that's correct. Correct. Now that bullet is your payload and that gun is your exploit. Okay. So the thing which is actually going to hurt, I mean, you know, the, the malicious code, which is actually going to run on a system that is a payload, the, you know, the, the thing that you will use to send that exploit to the system, or to exploit a vulnerability, to take advantage of a vulnerability, a loophole in the system, the process that that thing is exploit. So you use exploit to deliver a payload or to run a payload. Okay. That is how exploits and payloads work. That makes sense. Yup. Alright Then after that you got auxiliaries. Auxillaries are the most important part after exploiting payload, because Auxillaries are supporting elements. They will support your exploits and payloads. How, for example, if I show you an auxiliary. There you go. For example, you got a scanner here, a scanner module in auxiliary, you got fuzzers. Okay. You got, you got dos attacking stuff. You've got cloud, you've got analyzing stuff. You've got, for example, spoofing stuff here. Okay. If I, if I even show you in scanners and I do LS, you can see you've got different kinds of scanner. So FTP scanner, you know, DNS scanner SDB scanner, there are different kinds of scanners. So what exactly, this is the supporting elements first, you know maybe you will need these scanners to find version numbers or, or do a lot of information gathering. That's my auxiliaries will help you out. That's where auxillaries help you out. Right. No, not really. It's not coming out crystal clear in my head, but I think I understand what you mean. It supports , so supporting stuff basically Basically, so, okay. Let me give you an example. Have you ever all of, you know, what is n map NMap yeah, it's a scanner. Yes. Alright. So what we do with n app is we scan ports and services. Right? Right. Now you can use n map within Metasploit. So there is a module for n map, but there are other kinds of scanners as well in Metasploit in auxillaries modules. So you have PCP scanning module. You have SIM scanning module, you have UDP scanning module. So all of those modules are there in Metasploit. Now you might say that, why do we need that? I mean, n map is the best tool. Everyone knows, and Metasploit the best tool. Why do you need a scanner? And what you think about it when you are attacking a target using Metasploit framework and, and you need to use a lot of information. So you need to collect a lot of information. Where you keep all of that information. You will keep all of that information in the Metasploit. So you can create a database here that will collect all the information for you. And then you can use that further. You can use that information in your payloads and exploits are you getting it. So it's reusing same information again and again, it's, you know, organizing your information. Yeah. It isn't making sense. Yeah. Yeah, yeah. Now What exactly is post post is the post exploitation tools. So normally people don't talk about posts, but it's very, very important. One of the most important things a post comes you know, on, on the basis of different, different operating systems and the environments. So one example is Android is there are Ios is there DSD, Cisco fireworks? Jupiter, Linux multi is basically it's, you know, it's, it's multiple operating systems that will work on, multiple things, OSX, Mac, Mac, OSX and those windows. If I go with something like windows, Then you can see, we got post exploitation tools, which are again, divided into categories like capture. So you can capture some things. Now, for example, you want to capture key logging. You know, you knowt, you're not have a key logger there. You have, you have a system now you want to install a key logger. You can use a captor post exploitation tool. So CD capture LS, you can see you are a Key logger recorder and you got to log out key logger. So you got two key logger modules there, and you can, you can read them to understand what's the difference. So that, that is a postexploitation tool. You got, you got some reconnaissance. What do you say? Post exploitation? You've got wireless postexploitation toll. You've got managing stuff, gathering information, escalating the usage. So a lot of people, they struggle a lot with escalating this, the privileges. So you see right now we were using Kali Linux, right? Sorry, Kali user. That is a nonroot user. We cannot run a lot of commands, but we may want to escalate ourselves to root user. So how do you do that? You use escalate, post exploitation tools. You can escalate your users. You can try to escalate yourself. That is the escalation. Any doubts, is that clear enough? Or shall I give you more examples? Right? Then after that we have encoders and evasions. Envasions was a new module, which was recently added encoders is the old module. Almost do the pretty much the same job basically. Encoder will change the coding. Okay. This will encode your code. What exactly does that mean? Basically? you know, it can basically change the code. For example, it can change the language. It can change the patterns of the code. How does this helps to bypass firewalls, to bypass antiviruses ideas, IVs, you know IPS, all of those securities stuff. They, they look at patterns. There are two kinds of you know, there are two kinds of security devices. One is pattern based signature based. One is realistic space, which is behavior based. So signature versus behavior now signature is can easily be evaded by, by encoders. You can just encode yourself and you're good to go. Encoder also helped to, you know, do a lot of web attacks. Sometimes you need to, you know, encode your, your virus, your malware, you need to encode that into different languages, right? Basically four different, different kinds of encodings. Sometimes it is required. So encoder help over here, evasion similar version. Did they just improve the encoders and bring a division which was antivirus division. So you will find like windows defender. Let me just show you, see the evasion. It is only available for windows right now. If you just do LS, you can see the windows. They will add it. They will improve it. So for example, windows defender, you can, you can evade windows, defender, easily using this. A lot of people, they don't have paid antiviruses. So that's weird. It's very helpful. That was encoders evasions. We are left with one, which is notes. Notes basically is no operation. Notes are used when you are making things like buffer overflow. You know, when you are writing your own exploits, so Metasploit framework, it has got its own language. You can code it, ruby is the language. Basically it has got its own formats. You can code in Ruby in Metasploit format and make your own exploits. And that's where you might need to use notes. Or, you know, basically notes, notes means you are telling the CPU that do not do anything, just stay quiet. Stay Ideal don't do anything. Being the ideal state. That's in no operation. We practically don't use it. You know, exploit developers will use it. Pentesters rarely will, will use. I've never used an open in my whole career. So it's kind of, you don't use that maybe in a buffer overflow you might want to do it, but normally you won't do it. That's notes. So, so you basically, you want to be quiet not to do any phase so that you don't get detected. ? Is that purpose? No. So do you know what a buffer overflow? Sorry. Do I know what, ? Buffer Overflow? Yeah, yeah, yeah.? So do you know how it works? Okay. Can you tell me? Yeah, sure. So in the buffer overflow attack, basically I try to get into the bucket of another run, an application to manipulate it, to steal data or to control it. Right. I mean, pretty much how it works. Yeah. I mean, that's the theoretical part, but you know, the practical what's going on behind the scenes. Oh, no gosh. Okay. Let me explain that. So it will make much more sense. For example, this is your program. Let's just say, this is your bucket. Okay. So this is the core capacity, and this is the core capacity, which it can handle the capacity for any program, memory allocation. If you think about it is the memory part. There is a, there's a, this is the capacity. This is mine. Now you send so much data to this input. You send so much data that it overflows, okay? Let's say it overflows. Now when it overflows this, this, this thing, you know, this is overflowing. This is the overflow area here in a buffer overflow am just giving a high level overview. You can ask it to have a jump instructions. So JMP, you can say assembly language. You can say that, jump to somewhere. Now you can tell it where to jump when you are, when you're overflowing the data, you send a payload as well. You send a malicious code. Let's say we have a code here. So let's say this is our code. Or let's say, Hey, here it is. Okay. So this is your malicious code. You tell him that, listen, I want you to jump to the this code. Okay? So basically this is the program it's already executed. You overflow it, you control this byte. This is called the ESP. So you, you control this ESP byte. You put a jump instruction there that jump instruction jumps the program to your malicious code. That's how overflow works. Okay. But the problem here is if you're using a jump instruction you need to jump to exact address. So for example, zero X, zero six A B, okay. Let's say that is the memory address. Memory has got addresses. You have to jump exactly this address. And it's very hard. It's almost impossible to jump to the same exact address. So here we use notes. We just say, we just say that instead of jumping to this address, you jump anywhere before it. So you say that you jump anywhere. Let's say it will jump here. Okay. Let's say this is the point where it jumps your, your program. Now here you add notes, these are notes no operations and CPU will not do anything. So here's, CPU is not doing anything, here's CPU is not doing anything else. Here's CPU is not doing anything here, it is not doing anything. So you added notes and finally it will hit it, right? You you're sending your jump instruction before the address and then adding notes. So it doesn't do anything. And eventually it will hit the program and your code will execute That is how notes works. That is our buffer overflow. Is that makes sense. Yeah. Right. But again, you don't have to do this,. Anyhow, I have never made any buffer overflow or any kind of custom code for any program. You never do that because of the affilation management process. That's one of the reasons people think that OSCP is a good certification. They teach you how to code, but what's the reality. Are you actually going to do that? No, you're not going to do that. Alright. So that was the nopes. Let me just quickly show you the payloads. There is a difference between payloads. So payloads comes into two flavors. A third one is stages. You can ignore that. That is something else. I'll talk about. That payloads are singles versus stagers. Okay? What's the difference between singles versus Stagers. So think about it in this way. You are sending your payload. You're sending your bullet, right? Will you send it in one shot or will you send it in parts? So part by part that's the whole difference between single versus stagers singles are one shot. You send the whole payload, let's say the five megabytes of file. You send that file within one shot. That is a singles. You make it into you know, small, small pieces. You send it one megabyte first, then two megabytes after that. So small pieces, that is a stager. Now, really, it doesn't matter what you use. Sometimes stagers will not work. Sometimes in some cases you know stagers will, will die. So you get a session. It will work. You will get the access, but then access will automatically die within a second. That normally happens when you using a stager. So you have to use a single there, okay? Understand this thing in your exam, in any kind of test you are doing. If your session is dying, it's 99% chance that you're using a stager and you need to use a single there because the connection is not able to handle multiple files. You need to send it in one shot. Yeah. In some cases, you, if the explode is not even working, you know, exploit is working, but you're not getting a session you may want to go to stagers So maybe session is not able to handle one file of that size size matters. Maybe session is not able to handle one file of a big size. Then you won't do stager, but in case you, you are getting a session, it is dying. Then go to a single. It is not able to handle multiple files. Making sense. Yep. Yep. Oh, sorry. I just wanted to confirm. So you're just saying if the file is too large, you stagers if the connection is dying, you Singles. Right? Okay. Thank you. Stages is nothing. Stages is basically you can say an extra part with stages we'll use, as you know, it will make stages out of it. And then it will send in stages. It's like both of these are connected. Just, just think that is why I said all of this, there is only single. There are only two. And I will show you that, you know, in practical as well in the few minutes that why there are only two. So overall I don't really focus on stages. They'll just say, What?Sorry? Do not focus on the third one stages. Okay. Let me show you that. Give me one second. Right? There you go. Okay. So here, let me show you thhe stages versus stages. And then stages. Okay. Can you see there is so first of all, this is the pattern. Understand the patterns. There is windows slash 64 slash something slash something, underscore something, okay, this is the pattern. So windows are, let's take this example. Windows is the platform operating system. X86,X64 that will be your architecture of the CPU. So if your processor is 86, a 32 bit or 64, that is the architecture. Then this is the name of the Payload. There are multiple payloads. There is PowerShell payloads. There are shell payload. There are meterpreter payloads. I will talk about that. This is the payload type, then bind versus reverse. So there are two main things bind versus reverse, in a bind connection. You trying to connect to the target. In a reverse Connection. Target is trying to connect to you, okay? Bind, you will connect with them. So you, you know, you attack that. It will open a port on that system and you can connect with that port. Anytime in the reverse, you will open a port on your system that target will connect to you. Now it, when you are doing a reverse, it may bypass a lot of firewalls because on a system, it is possible that they are not allowing anyone else to connect with them, but they are able to connect to everyone. So in the reverse, it may bypass a lot of firewalls that is bind versus reverse. Then it is big protocol. Are you going to use PCP? Are they going to use HTTP? Are you going to use UVP? That is, that is the protocol. Okay. That is the pattern. Now, when you see here, for example, shell, and then can you see this slash here versus can you see PowerShell underscore here? Yeah. So PowerShell underscore bind shell slash bind. What does slash versus underscore means? This underscore is single. You see power shell PowerShell under score, bind, underscore PCP. It's one word. It does a single stager. When you say shell slash bind under Courtsey underscore whatever. This is a stager. This is a stager. It is staged. This slash is a stage. Underscore is a single. So there are only two kinds of payloads. You can see. There is nothing else. It is either slash or it is somewhere, either, either underscore. There are only two kinds of things. When you go to, when you go ahead and go to stages, I'm trying to, Oh, okay. Modules. Payloads Stages stages. I'm talking about stages now, again, not stagers, which I send you that stages. You can see stages are for different platforms. If I go to windows, now you can see, these are just stages. These are like supporting elements that, that, that the stages use to, to go there. You know, these will divide the stager out into stages. That's what it is. Okay. And now let's talk about exploits. Exploits are a platform dependent. So there will be, again, you will find, for example, Android , Firefox Linux of different things. Let's talk about again, windows, very, very simple in windows. You can see them. They are coming on to be services or protocols. That's what they're coming up at the end. You can see, you can, you can exploit antiviruses. You can exploits firewalls. You can exploit FTP service, email service, my SQL proxy SMB service. So just to show you SMB here, SMB is very, very popular thing. SMB, you can see there are some exploits like ms. 06040 and zero eight, zero six seven net API. What exactly this is this was a exploit, which works in windows. XP windows XP is exploitable due to this specific exploit, the, the net API issue for that, they made exploit. Then there is eternal blue. Everyone knows about eternal blue because this was the exploit, which, which was used in one of the wanna cry attack the wanna cry ransomware. It was used using eternal blue. This was developed by NSA, the national security agency. They developed it. They kept it for themselves for years exploited everyone whenever they wanted to exploit any windows, they use eternal blue. It was one of the most powerful tools in history, but it got leaked. Everyone used it. And now it' is a metsploit. Eternal blue has got other options. Eternal Blue windows eight version PSEs. This one works on windows 10 as well. I used it. I understand you can hack it very, very popular. So these are exploits. They are used to take advantage of vlunerability. These are exploits. And with that, I hope it's extremely clear now how Medisplay works. Yup. Okay. Yeah. I mean, I don't even need this domino. So to start MediSploit you just type MSF console and that's how you started. Let's go ahead and do a little practical on hacking the WordPress site, which we, which we study to crack the password, right? So very, very easy. You can find, you know, exploit in multiple versions. There are, there are authenticated exploits and non authenticated exploits. When you say authenticated, it means you need a password and username. When you say I'm not authenticated, you don't need anything. You just, you're going to take advantage of any kind of vulnerability. That's, that's what it does. Now, let me open the notes so that we can have the password. Now, if you go ahead and if you try to find an exploit for the WordPress, how will you do it? You can just say search in metasploit, of course you can search, and then you can tell it, like, I want to search exploits so type colon, whatever exploit I want to search a exploit and then tell it, what do you want to search? I mean, a keyword. So I'll say WordPress, okay. I just say, WordPress, there you go. This is the list of WordPress exploit. I can go up and you can, see, they will give you the matching modules. And because we only search exploit, they are only giving us exploit here. So this is the ID number for your reference. This is the name. So this is, this is the path, basically, this is how, this is what you need to do select this exploit. Okay. This is the exploit. This has been disclosure date. This is the date when it was disclosed in the public after that, it is the rank Metasploit give you the rank. So excellent is the best after that as the, is the good after that is the normal, sorry. Excellent, great. Average, normal. That is how it works. Okay. Ranks argument there. Then you have check. Now what is check, check will allow you to check if the exploit is working or not on a target. So, you know, it's just going to tell you that if the target is one variable to this exploit or not. Before exploiting it. Of course you're not sending any payload. You're just, you're just, you know, firing a dummy bullet. It's not a real payload. It's just a dummy bullet and you are actually not firing even a bullet. You're just testing the gun on a person on your system, that there is a system you think it is vulnerable You test a exploit by using check, and it is very important that you check things before you actually fired them. Then there is a description which you can use to easily understand what the exploit is. So I have just zoomed in. You can zoom out. So this is the description that you can use to, you know check what the, what the exploit is all about. Now we have the admin username and password. So this exploit will work very fine. WAP admin, shell upload shell is another name for payload. We want to upload a shell. We want to upload a payload. And this is the, this is the exploit here. You copy. You can say clear and you say, use, so use this exploit. And now you are using that exploit because the module has changed to exploit. This is the module name, and you can always type info, okay? Info will give you the information about how to use it, what it is all about, etc, etc. So some information about the author and all of that available targets, what is the target wordpress website check supported, yes, you can check before using any payload, then basic options. These are the options you want to configure in this required options out of this, this, this, this, and this. So password is required. It's an authenticated upload. A proxies is not required. RHost is required. RHost is target host your target, basically in this case, that has a website, which is beta.hacker.inthehouse.com R port NSSL. RPort is the remote port. So the port on which you want to attack now, everyone knows. I think every one of you knows that HTTP work on port 80 and HTTPS work on port 443. Are you available aware of it? Yes. Yep. Yep. So if the website was working with a SSL, we will change this port to 443, and we'll change the SSL to prove in our case, even in the exam, I believe. I'm not sure on that. Because it's been long, I have taken the exam. So, you know, in a simulated environment, of course, it's a non SSL version. Doesn't matter as you just have to keep it on port 80 and false, if it does SSL, keep it true port 443, that's the only difference target url. Right? What is the target url anyone knows about that? And I explain the URL of your targets of your, I know, but that is Rhost. Oh, okay. Okay. Let me, let me show that. So for example, I hope you can see this screen on the lower side, right? I mean, you can see what I just type. Right? Right. Right. So for example this is our target, right? Beta.Hackerinthehouse.Com So here, when you said target is a domain which is basically in the root directory, this is a root domain. You just type a forward slash, but there are possibilities where companies will, will install websites or will have data in folders. So there can be a folder in this, this domain beta.hackerinthehouse.com slash secret website. Okay. So when you go to that slash secret website, it opens a new website that is also a possibility, or there can be something like, you know employees. So there can be a specific portal for employees and let's say it is made in WordPress. So when you get to know that there is a sub directory, which is having a website, then this is your target URL. So in this, if this is the URL, which you are trying to attack here, the target URL will be slash employees. In our case, we don't have any subdirectory. The website is installed on this domain itself. So our target, url is only a slash makes sense. Yup. I User name. Of course, if you have a password, you will have a user name we host it's basically for the, you know, apache web server stuff, you will probably never use it. It's just kind of a custom. If you know, if you are working in a company and it's an internal test and your things are not working, you can ask them that are using a specific V host. It's a virtual host. They will give you the information. It's like white box testing work in the exam or in, in, in normal professional testing, you will, of course never be changing a vhost, but you can always ask your client or your company if they're using every vhost, separate vhost. Okay. I hope it's quite clear now, just to give you the description this module, generate a plugin that WordPress has plugins, WordPress users plugins. Plugins are just like apps in your phone. You install apps in WordPress, install, plugins. This plug, this module will generate a plugin back the payload into it. So it will make it plug in and have the virus code into that and upload it to the server, running wordpress providing valid admin credentials. If you use it, if you give it the valid credentials, it will make a payload for you. It will upload that payload to the website for you, and then execute it and give you the access. That's what this module is going to do. So let's use it. How do you use it? You need to set these options, which we just saw. We need to set a password, username and Rhost you set a password. What is the password you can copy from there? No, There you go. Set username set Rhost. It just beta.hackerinthehouse.com. You can always do show options. To check what you have set and what is, what is not set. So password, it set, Rhost is set Rport is okay, Rport okay. User name is set. Right? And I think I just did something there. Alright. So that is how you set things. And once you are all set, once you're satisfied with the, you know, tuning your exploit, we just tune that basically you can always type exploit and you can press enter wait for it to complete. You can clearly see right here sending stage and you see it was a stager and it has sent in stages. Okay. Metalsploit meterpreter session, one open. What is meterpreter? Meterpreter is the type of a payload. So there are multiple payloads. There is a meterpreter. There is PowerShell. There is shell there is generic shell, multiple types Meterpreter was developed by the same company. Metasploit rapid seven company. The name of the company is rapid seven. So they develop meterpreter. It's one of the most powerful payload in the history ever created because it gives you a lot of options. You can do a lot of stuff with meterpreter. You can take screenshots, you can record voice. You can upload files, download files. You can run commands. You can take, even sometimes you can even take a graphical interface using RDP or something. You can crack passwords. It's a very, very powerful payload. It gives you additional options. Now that you have a meterpreter shell, right over here, you can start using it. I mean, you can, you can use any kind of comment. I can just say help and specific meterpreter will give me specific commands. So, this is a WordPress website, which is running on PHP. Now. I hope you guys understand what is PHP, right? PHP is the language which wordpress use. Right? Right. Yep. So this is only one PHP. Now PHP meterpreter is regarded as the weakest meterpreter that has got the lowest amount of features. If it was a windows meterpreter, it will get the maximum features. You can use a lot of things, but here also you can see, you can run these commands. Okay? So you can PHP, sorry. Wordpress always runs on PHP. So when you're doing information gathering also you can, you can actually go ahead and check that. Let me show you how to check that, by the way, I'm going to say background and I'll show you what, what that means. I'll tell you. Okay. So you can type sessions. You can type sessions and you press enter and it will tell you, what are these sessions you have available? You can see the type of the payload is meterpreter PHP, which is running on linux. Okay. That is how you know it is PHP. The user, the user, which you just had is www data. It's one of the users, it's basically, you know, the user of web server. This is the host name. This is the IP address of you. It's my IP port is 4444. This is the IP of that machine, which we have on this port. We are connecting to that machine. And yeah, that's pretty much it. I mean, that's how you view your sessions. That's how you can know that it is a PHP, by the way, it's like experience thing, but still you can check it if I want to go back to this session. So, you know, I can have multiple sessions at the same time. That's why it's a framework. I can manage a lot of things to get. If I want to go back to the session, I will interact with this. I can just type sessionsi interact and session numbers. So one is the number you can check the id over here, right? I'm just saying session one. Now, presenter, you're back in session one. And I can always background it when I don't need it. I want to go back metasploit. I can just say background and press enter and I'll be back over here. And then now why do we want to go background? Maybe you want to exploit something else, or maybe you want to use a scanner, an auxiliary, or maybe you want to use a post exploitation tool. That's why you need to background things. That that's how it works. So I can again say sessions, i one. And I'm back into metadata. Now let me say help. You can see what you can run. You can execute a command. You can get the UID, which is the user. You can kill a process. You can, you know, do a lot of stuff here. You can check the processes. You can get a shell, command shell. So what that means, if I say shell, I just got a shell over here. It may give you another, that's fine. It's a shell I can. Type ifconfig. And you can see the IP addresses 10110. My IP is 10109. This is ten. I am right now. I'm controlling the terminal of that machine. Okay. That is a shell. If it was a windows that will give me a command prompt. So right now I will have a command prompt instead of a terminal. This is the terminal. I can have a command prompt if the target is you know, a windows interesting thing here is this machine is running two network cards, right? Because we said that we know that, but as a pen tester you can see, this is the IP range, okay? This is the DMZ range, right? We are in the same range. We also have 10,.0.100 IP. There is one more range 10.0.148, right? That is another range. And there must be machines in that range, but we cannot go in that range. We cannot even ping if I try to ping. So if I try to say ping 10.0.148.1 Which should be of course, one is the router. So if I try to ping there and I don't know, why am I getting the signal? 46, 46? Yeah. 148. Still. It is giving me, yeah, it's not working out. Right. That's fine. So 148. We are not in that same range. You see, we are not getting any signal, right? So, but this machine again. So if I give, give from here, if I tried to say ping, because I'm going to right now controlling that terminal. If I say 10.0.148.1 you can see, we are getting replies and I can terminate it, so this machine can ping, but we cannot ping. But that's where pivoting comes in. You know, we can use this machine at a pivot. We can use it as our gateway internet gateway. We can route our traffic from this machine to that network. That is a pivoting stuff. We will come on that, but later right now is not the time for pivoting. Right now it's time for exploitation and you know, all that stuff and you can come out of meterpreter by the, if you want to close the connection, you can say exit. And by that you will exit the connection. Connection is closed. Now you should privacy sessions. You will not have anything. That's how sessions work. And I'm quite sure with that Metasploit ends. I mean, approximately there, there is one more module, which I want to show you. That module is multi handler. So if you say use exploit multi handler. Now, what is a handler info? Listeners Sorry. Yes. To listen to service, right? So a handler is the part of this framework, which listens for a connection. Okay. When you say it's a reverse connection, right? Any kind of connection. So that target is trying to connect to you, but there needs to be someone which will listen to that target, right? That is trying to connect to a port that port needs to be open. And there needs to be someone who is listening that is where we are using multi handler. And you can just say, show options here. Right. You need to, first of all, collect the payload as well. So let me select a payload. Yes. Oh, sorry. So you need to select a payload for a multi handler and you can say use payload and then you can tell it, which kind of payload do you want to listen to? Let's say we want to listen to a PHP based meterpreter. Just the one in which we will just use few minutes ago, but we are doing it now manually again. So let's say PHP. Okay. I don't see that. Does anyone knows what's wrong? Why I cannot get a PHP? Well, any ideas I'm trying to get a PHP payload here. Not able to select it. Use payload PHP. Oh, now I can do that. I think there was a space. So use payload. PHP. Let's see. Oh no. Sorry. Can I just set it? Set payload Yeah. I need to set it. That's that's the problem. So we will set a payload and it will set a payload PHP. I just press double tab to see what are the availabilities. So let's say I choose a payload, which is meterpreter. And let's say we choose a stager. So stager version, meterpreter reverse TCP this one. So I can just copy this. Sorry. Did I ask you what you say? You said you did double tap. Yeah. So you can always press press the tab key. You got a tab key, right? Yes. You can always press that tab key two times to see the availability's. Okay. All alright. And you can press that once to autocomplete. So one is autocomplete two is check availabilities. There you go. I just set that payload. Let's clear the screen and now let's see the options and you can see we've got some options. There are two options in this payload option is Lport and L host. So what is the listening host, which is your IP who will be listening? What does the Lport, which is your port on which port you want to listen? Okay. And Lport really doesn't matters. I suggest, okay. I do suggest always to keep Lport to be 123, anyone knows what's the reason for using 123, that's an NTP server. Isn't it? Yup. Network time protocol. . So normally what happens in enterprises, the best practice is to have a local time server. So the best practice is to have a time server machine itself in enterprise network, but people don't follow best practices. You see, they will always in their firewall. They will always keep the 123 port open and they will use publicly available type servers. So that's the problem. 90% of the enterprises I have ever pentested audited, whatever. They never have their own time servers. They will just use public time servers, just like Google server or Microsoft service. That's what they use. You do that port one, two, three is open in the firewall. That's most of the cases you will find it. That's why we use time server port. Some people use port 80, port 80 because everyone allows to connect to internet, but that sometimes can be suspicious. So I just, you know, like to use either time server if it is possible, whenever it is possible, use time server 123 we just said Lhost a Lport. What is Lhost? Now you may want to give it a specific interface. So I may want to tell it that let's see, I got two IP addresses. Listen on this IP address, but the best practice here, the best way to do it is you've always said L host to 0.0.0.0. This is a wild card. You're you're telling, accept everything, you know, and anyone who's trying to connect on any IP, any interface onboard one, two, three, just accepted. Because at the end, it is multi handler, right, we are expecting a connection on that port. That's why we are running a multi handler. So we just keep Lhost 0.0.0.0. It doesn't matter. It's like a wildcard. Anything comes, accept it. That's how you do it. Well, this will be your listener. You're listening to a connection and you can always say run and it will start running. So You said Lhost is all zeros. It doesn't matter. It's a wild card. It's a wild card. So any, any connection which is coming to you, it will just listen. They will listen. I got it. Yeah. Now we are listening on port one, two, three. It doesn't matter who is connecting on which IP they want to connect. So, you know, if we have multiple network cards, multiple IPS, then it is important to give it, but 0.0.0.0 Works fine because now we are saying any IP will work as long as it hits. Okay. Now, as long as someone hits, but the problem is this is a listeners Someone needs to send you a connection and who's going to send you a connection for that. You need, you need an exploit. That's what an exploit does. An exploit will exploit the vulnerability, send a payload, execute that payload, and then even open this handler and, you know, get the connection. But let's say there will be some cases when you need to do it manually. There may be some cases where there is no exploit. You have to do it manually. So just to give you a practical example, there let's say there was no exploit here. Let's say there was no exploit on, you know, on, on what you were doing. Let's say there is no exploit about WordPress admin shell upload. Okay. Let's say it's a, it's another CMS. And there is an exploit on, on uploading a shell. How will you do it? You will do it manually. How to do that. You open the website, you opened the website and beta.hackerinthehouse.com/listening. And you go, what is the password? The password, there is the password we can log in there. And now we need to find a way to, you know, to paste a code here. So we need to give a code on this website. So we need to find a way, multiple ways are there. You know, you can see there is something called post, or maybe I'll just go to post let's click on, add new and here I can, you know, give it a title and an article. Basically. It's like writing article and I can paste some code here. Right? That's one of the ways there is pages. I can create a new page in this website and I can paste the code there. There are plugins. I can make plugin so multiple ways, right? So that is what you can do. But the question is which code, where is the code, which code relocate that will make this website connect to you. That code is a payload and you can create payloads. When you use an exploit. When you select the payload in metasploit, it will do all of the work for you. But again, manual is important because maybe there is an exploit for that. So you need to do it manually. So that's why you need to create a payload yourself manually. How do you do that? Open another metasploit framework sorry open another terminal don't open metasploit framework become root. I'll just go to desktop. There you go. Now I am on desktop. In Metasploit framework, MSF console that we were using was a console that is used to, you know, use the framework. There are other modules as well. One of them is MSF, venom, MSF, venom. Okay. And msf. Venom is the interface which we use to create payloads. Okay. Let's say p and here we can create a payload. So we will create a payload which we just used in this thing. I'll just Cntrl+C just say show options. And here, this is the payload which we are using. So I'll just copy this and it'll say clear screen i will paste it here, this is the payload. What we also need is in that payload, you can enhance it. You can again go. You can see, we have two options. LHost Lport. So we need to give them here. We'll say Lport equals one, two, three Lhost. Okay. Equals. Now this is the tricky part on this listener. We are giving listen to any connection. We can say zero, zero, zero, zero. Problem is over here. Here. We cannot say zero zero, zero, zero. This is the, this is the code. This will be on the target that target needs our IP address because that target needs to connect to us. Is that making sense? Right here will be your IP. That is not zero zero, zero, zero. Yes, because that target needs to know where it has to connect, to check the IP address. You can easily use if config. I know my IP address on 0.0.100.9 That is my IP, right? That's pretty much it. You just give it the, the payload name options in that payload. And now you can tell it a format, which kind of format do you want to use? I can say dash F for format and there are multiple formats. And now I'm going to do a wrong format. I will just say PHP, actually the format you want to use the raw raw. I'm just using PHP just to show you the adder. Okay. And I will output, or let me just do it as it is. I'll just press enter here. It will give me error, okay. Now wait for the error There you go. Invalid format, PHP doesn't exist. And these are the formats. So you can create a batch. See, you know, all the different things. Java perl is there, PowerShell, Python, raw Ruby. These are basically the languages or the scripts, which you will be making, right? So that is what you have to select. And here in our case, we want to use a raw What is raw? You know, we don't want to code it into a language. We don't want to have a Python file because of course, A website cannot run python right? If a website is not going to run a Python file, it will run a raw code. We just need that code as it is in our, in our screen. That is what the raw format is. If I show you what happens when I use raw format, if I just say, I want to use that raw format, if I press enter there, it will put the whole code on my screen. Now, here you go. So now this is raw cord, and you can see this will automatically take the format using the payload. It is a PHP. So the raw code, which I'm getting is in PHB. There's a PHP code. And now I can copy this and make a file. Or this is basically the code. So I can just copy it here. And I can go to the website and I can paste it here for, let's say a paste it I maybe I need to paste. I can like paste it as HTML text here. I can just paste it there. And I can say publish, right? And that is one of the ways of course, this will not work for WordPress. For many other CMS, it will work and I will show you why it doesn't work. If you open this link, you can see WordPress will automatically remove that code due to a security feature. It will remove the PHP code from there. And if, even if I run that handler, even if I run the handler, you will not get any connection. I'm running the handler. If I reload this page, You can see, I don't get anything because WordPress has a security feature that it will remove any kind of PHP script. That's the problem. But there will be a lot of CMS. There will be a lot of CMS, different, different, even custom codes files. They will always render the page as it is, you know, at the end of the code, as it is. That's the problem. That is one of the exploatation, which I can do the same thing with pages. I know it will not work. One of the things I can do is themes. You can go to themes, you can go to editor theme editor. Now themes are important because in themes you have, Oh, sorry. I just pressed back in theme. You can have multiple files. For example, here in the right side of my screen, I hope you can see that there are files you know, header.php or different kind of files. One of them is four, zero, four, very, very common file. Four, zero, four. You can find that and it will be there somewhere. That's what I'm trying to find. 404. it seems like there is no 404. Do you guys see any 404 there? Yep. That's what I'm going to do now. 2015 should 2015 is not there. Okay. 2016, 2019. Yeah. Let's see. Four, zero four. Is that right? Yeah. Yeah, this one, four zero four template. Unfortunately four is like a common one. I mean, you can also use the header file footer file. In this website, I have designed the website. It is not using the header and footer of the theme. So that's why I'm not using footer. Normally, no one designs, custom footer so that they can not do it. This is the, this is the PHP code for four, zero four. Instead of this, I will put my code for four, zero four, and this is safe. Right. And you see file, edit it successfully. Now your code is also on the website. You got your code deliver? What's the problem execution. How do you execute that code? That's another challenge. You need to execute that court in this case, I may just go ahead and I'm on Google. I mean, I, of course that that is the normal step. You will do. Just go on Google and search how to open four, zero, four Page on WordPress. Because just to show you, because if I open normally 404 like this is the thing and I just type anything in, I press enter it will not be WordPress 404. This is coming from the server. Okay. In this case, it, this coming from the web server, not from the wordpress that's the problem. I need WordPress 404. I can see 404 template, how to customize, how to open up , how to fix. No one tells you how to open it. I do remember something like if I just try for 404 , will it work? And it doesn't work, no idea how to do it. Four, zero four. Let me go in and quickly check out the 404, I have some notes on my phone. Let me quickly check that. I always, always create some notes, you know, on your cloud or whatever, whenever you're, you're doing such kind of tests, because future, it will help just like it is helping right now. I'm just going to open a file and see that's true. I'm looking at my end as well. Yep. There you go. U Index.PHP. Question a question, Mark. Error404 index.PHP. First of all, let's try that one You know, we don't want to apply things, which you know, that works in the index.php question. Mark error = 404. I mean, that's what my note says. At least let's see XYZ. There you go. Page cannot be found and you can see there is something, I don't know. It's like a but I'm quite sure it did not work. I mean, if it would have worked, we would be, it did not work. That's the, that the end note um why didn't work, I'm quite not sure this is the error page, but maybe what I can try here is the note which I have is 13, 2015. Okay. Maybe I can just go ahead and change the themes. So I'm just going to go in as I'm going to change the theme, and maybe I can try with that option. So themes, I'm going to change it. How will I change it? I will go ahead and say 2015, add new I'm going to search for anything. And this, this specific web server is not connected to internet. Of course, it's a virtual machine. So what we can do is we can upload a theme for that. We need to download it. So I'll say 2015. Oh, I just remember one thing. Okay. And this is the silliest thing you will, you guys will ever remember. We edited which theme again, if anyone remember Guys, which theme did we edited? 2019, what? Which theme we are using at the moment in the website, it has to change. The theme was 2019 because our code is in the 2019. Not in the 2015, isn't it? Yeah, let's try it now. Okay. Error 404. There you go. We had it. Why we had it. It's not loading. It's not loading because it's connecting to my system. You can see it is the meterpreter. Right? Got it. Listening to open. Connection is coming, blah, blah. That's how you hack it. I can just say exit. Okay. And now that page will load because I connect, remove the connection. You can see it loaded. This is, this is the part which is in that PHP to show that, you know, it's in meterpreter In meterpreter shell, you will always have this part. If you are getting this part, either connection has been died or it did not work. So that's how pretty much you, you do you know your physical exploit, the machine, you put a code there, you executed any how you executed them and you get it. One of the options was plgins. So I can create a plugin here. I mean, I can create a manual plugin. I can upload that plugin. And that should work because if you see in that, that exploit of the WordPress, that, that exploit which we used earlier that was creating a plugin description, say it was creating a plugin how to do that. I'm quite not sure you can go on Google and you can just, you know, search how to hack a website by creating a plugin and how to hack a WordPress by creating a plugin. There you go. And you need to learn how to Google. You know, that's like 90% of the time. That's your best friend. You, you always need to Google. Here you go. Exploit this plugin. I don't know what it is. Cause you inject your payload inside a legitimate plugin. Can have it run. Yes, you can do that. Otherwise you can create a plug in yourself. It's like plugin is just a zip file. You know, it's a zip file with, with two PHP files, index dot PHP and all. And that's a plug in it. Making sense, like, let me even show you what is a plugin? Let's say file upload plugin. File upload wordpress manager download this is, this is one of the plugins I can go on Google and download it manually here. And I can just say save and where it got downloaded. It is still working. So you can see a plugin is basically a zip file. Right? I can .zip and let it load. Let's open it. Yeah. And if you open it, you can see in this, there are basically, it will depend, but basically there are file right there. There is a PHP file in the name of that plugin. And then there is, there are additional files when we are creating a plugin for hacking a WordPress, we just create one PHP file that has that code and we make a zip and we upload. But to do that, there's a specific format. I have done that in the past and I have always used Google to do that. So you can always find, you know,uuploading a shell, to WordPress using plugin or something like that and making WordPress plugin or shell for shell upload. You see, there is a video on that. You can always go and, and by the way, in LPT exam and in professional pentest in real life, no one is going to stop you. You can play videos. You can go on Google, YouTube. You can go ahead and play that in the exam time as well. You can do that. No one is gonna stop. You can go on Google. You can go on YouTube, watch videos. I did it when I was giving my exam. I, I went and I don't know how to use open vas. So I have always used Nessus. And this is a professional tool for scanning. I use nessus in my real life. The problem was in the exam. They did not give me a nessus. It was a, it was an open vas. I don't know how to use it. I went to Google. I went to YouTube. HackerSploit video. I saw that 14 minutes, video views open vas. And I used it. No one's taught me that you can do whatever you want. No one is going to stop you again. You can sit here and you will see how to make a heading 2015. I think I did my research from here itself and you know how to hack a word press. They are using footer footer file. Maybe you can still read that, right? Yep. They're not giving them about plugin, but that video will tell you how to make a plugin case you need. Another way will be one more way will be a file manager, plugin, you download it, you upload it. And it's a file manager. Of course you can upload files after doing that. Right? If I tried to show you a little file, add new upload. There you go. Let's set up that plugin, which we downloaded here installed and out maximum size. And the PHP, our file is bigger than that. So maybe there is a restriction on the website. You cannot install maximum plugins. You know, you cannot manually install anything on this website. So that is possibility. They will block you, to install things. Maybe your access will not be there. A PHP environment will not be there, but in case you were able to install it, it's a file manager. Then you can just upload whatever you want. It's a file manager. Uthere is one more possibility which you should check whenever you get initial access. You know, I got the password. What I should do is I should always go and, you know, check the available themes available plugins. Maybe there is a possibility maybe there will be a theme. So, you know, when I go to appearance themes, there will be a theme like 2016 is there and I don't have any possibility. I go on Google and I say 2016. Wordpress vulnerability I can see if there's a vulnerability in that theme as well. Maybe there is a vulnerability in that theme, you see WordPress theme directory shall upload. This seems like there's a plugin. There's a plugin called this theme directory plugin, which has vulnerability to upload a shell. So there is a possibility you will find the plugin or a theme, which is preinstalled and that has a vulnerability And then you can exploit that very, very easily. So maybe let's say this is WAP forms. Like I go on google and search about this thing. And I get to know that, Oh, there is a there's vulnerability to upload a file, or there is vulnerability to take any kind of different kind of access using this plugin. And it is already installed on the system. So I can take advantage of this. This is your post exploitation. You are doing post exploitation after getting initial access, which is the password and username. Is that making sense? I mean, if let's say if, if you know our case, if I go to users and I say, all users, if I say developer, you can see but all of the developer here, I think you can see that here, you see both of them are admin users. Admin is also, admin, developer is also admin. That is just a username. But the role that writes the privileges we have out of admin in case our rights were not of an admin, we've got an author or we were just a user authenticate user. We cannot, we cannot upload anything. We cannot install new files. We cannot do anything in that case. We want to see what is there in the system and can we attack it or not? Make sense? Right. That's how, that's how it, it does works. Right. So we just attacked the WordPress site. And I think it's quite clear now I will give you a practical explanation on how to, how to do work. Like if you have a vulnerable plugin and how to further exploit I'll do that later. Not right now, it's not the right time because we don't have enough knowledge at the moment because you guys don't have that, like burp suite is needed. So I'll show that that's pretty much it. I mean, that's how you create a shell. That's how you use Metasploit. I think I'm quite done with risk class. You know, I, I know it's still early, but there is nothing else to cover for me. Like if you guys have any questions, I will be happy to get them. Yeah. So my question was just so we know in Metasploit they have thousands of modules that are available. What would you, Know, What's the best place to start to know which one you should be using. Can you give me a situation, like example? Yeah, just say your hack, you're trying to hack into the hacker in the house, a web server. How would you know which module you're going to employed for that? You mean as you're asking about exploit? Mmm. No more about the payloads. Okay. So payload, as I said, they are only two types singles versus stages right now in those singles versus stagers, there are only selected types, which you have to use. First preference is always Meterpreter. After that your preference should be shell. Okay. Meterpreter. If that doesn't work. So shell, these are the only, only two you should be getting available even in the real life. Yeah. These are the only two which you will be using. Okay. how about all those other modules? Like PHP? Oh, you mean the architect. Okay. You mean, this is some type, so, okay. Let's say I am testing a target, which is a windows machine. Of course. I know that is a windows, right. But let's say it's a website. I can go ahead and, you know, I need to gather some information, basically. I need, you know, if, if I am on this website, right. And we all did that, what web and got the technology profile that clearly says that it's a PHP. So if I just go ahead and say what web and I said, beta.Hacker in the house, it will clearly tell you that it's a PhP. Okay. You see it's, it's running. It's a PHP. 5.5.9 Could you actually jump into the metasploit and just open up that modules folder? There you go. Oh, okay. And the folder. Oh no. If we go back to multi handler and just like search PHP Search, I payload. I think that's what you want to search. Right? PHP. There you go. 21 different payload. Yeah. So my, so my kind of question is how would you know, I'm like, I want to use PHP bind perl over a PHP, find perl IPv6 or bind. I, I find underscore PHP. Okay. Okay. Let's take it step by step. First of all, PHP, you want to sort out of it, meterpreter is your first choice. Shell is your second choice, right? That is something you already understand that you will use a stage versus single. That is also very much clear til this point, I think. Yeah. Then it is all about bind versus reverse majority of time. You want to get a reverse connection because it is seeing that people will not allow a connection coming in, but they will allow a connection going out in all the systems in all in this world. If you have a company, you will not want anyone to connect to you, but you will want to connect to internet. Isn't that right? Yeah. That's why you always try to use reverse first. If that fails binders is your option. Okay. You just have preferences, just take simple logic and get the preference. Binding is your second option. If reverse is failing, there is a possibility where reverse will fail. Reverse will normally fail. My mean, if someone, you know, firewall is blocking, it's very, very, very, very rare chance that a firewall will block a reverse versus file, but a reverse may fail when you're using proxy or pivoting, when you're doing pivoting or proxies, it reverse, normally will fail. And that wasn't the situation where you will have to use bind. If we were suspending user bind, if it is not feeling that's good. So it's like, if you're using Meterpreter is the first, you know, first priority reverse is the first priority. Then it is about PCP or, you know, or HTTP there, there are multiple in PHP. Of course we don't have a lot of them, but if it is, let me show you what windows will make more sense. There you go. I'm there are too much, right? And, and this one, you can see, you got a HTTP, actually, HTTPS, TCP. These are just protocols. So maybe that website is having a, you know, HTTP protocol open. So you can connect over the port 80 or port 440. If that, it really depends on the firewall of theirs, or they may have TCP traffic coming in and coming out, they may be blocking UDP traffic. So in that case, you may not be able to use it. Uthat that's basically the protocol. You just have to test and try. But TCP is the most reliable because everyone knows that TCP is the most reliable. UDP is the fastest, okay. Tcps, deniable, UDP is the fastest, but we, we want rei;ability. We don't want our, you know, exploit to work. They get the access and then suddenly just loses the connection. We don't want to lose any connection. That's why we use TCP as the best option. If TCP doesn't work as HTTP is or HTTPs is your, is your best option. That's, that's basically the priority order. And it just comes with the experience. You now, you know, it, you got the experience now, you know that TCP is the best option. Yeah. That makes sense. Yep. Any other questions? Guys? No, that's not good. When you're creating your payloads, always save them. Okay. You don't want to lose your payloads for a specific test. So always save them and to save a payload, this, this angular bracket and give it a location. So I always like to save them like on desktop, you can create a folder if you want for the project, but I can just say you know shell dot PHP and that's how it works. And that will make a PHP file which will contain my payload and always save them because it comes handy very, very handy to reuse them as it's a good practice. If one is working on one system, most probably it will work on all the systems, you know, because they are identical. And now you can always for example, a lot of people say that, how do I know? What is the IP and port? This, this payload is using very simple you just go ahead and check the code. So you're going just say, just go ahead and check the code here. And then you will see IP addresses this or port is this. So there are two variables and you can always change this. You know, you don't need to generate it again. And again, you can just take the payload as it is, just change the IP here and port here. So that's a quick tip. Well, with that the sorry!, I'm sorry, I'm going to say, I noticed you taken a payload You didn't code it. Right? I did. This will be, this will be a good stage if you were dealing with inspires to encode it. Okay. Right. So let me show that in case I want to deal with antiviruses. I can always use encoders. It's very easy. You can just say msfvenom so you can encode them after making the code or you can, but then you will use another tool. Metasploit cannot do that. I'm quite sure it cannot do that. Otherwise you can just say PHP Meterpreter I'm just giving an example here. PHP Meterpreter. Reverse. TCP right. LHost, let's say a 10.0.100.9, Lhost 123 f role. So I'm going to show you side by side. This is the first terminal split this terminal. Can I split this terminal or terminal or horizontally? Yep. So this is the first code without encoding. And then I can actually take this as it is and I can paste it here. And I can hear by it before giving the format, I can say e encoder. And then I can tell the encoder name. You can of course, go on Google and find the encoders. Otherwise you can say MSF venom list space encoders. It'll give you the encoders. Metasploit . The best one out there. Yes, but I don't know how to spell it. That's why I'm taking it. Oh, and it is. I think something like that. There you go. These are the payloads. Let's say sikatakanai. Is that one? Yeah. Here it is. Why is the best one? Do you know the reason. No idea. Okay. It is best because it is a polymorphic encoder. There is a difference between a polymorphic versus a non polymorphic. What is it? So just to show you, if I paste it here and I will show you what the difference and I would just press enter now and I'll tell you, what's the difference side by side. Okay. Now, can you see this, this code versus this code? The first one is PHP. The second one, you cannot tell what it is, isn't it? Yeah. You can never tell it's a PHP payload because it's encoded now why other encoders, you know, are not that good as shikata ga nai, why shikata ga nai is a polymorphic? And it is the best, because if you use any other encoders, which is not a polymorphic that will use an algorithm, you know, that will, for example, a alphanumeric encoder but it will do, it will change your letters, to numbers. Okay. Like PHP, it becomes something like three, four, three. Okay. But everyone knows that it is changing P to three. That, that is a fixed algorithm in a polymorphic. There is, there is a randomization. It, every time you create a code, it will be different. If I try to do this again, this score will be exactly different. It will be absolutely different. If, if I tried to do it again, I will just do it in the upper hand side. There you go, though. We cannot read it. So maybe we not, we will not be able to have the difference, but let's see still. Let's see. There you go. Yep. You can clearly see the difference question Mark. Question Mark. Question Mark. Something like that. And here, question Mark. Z question, Mark, can you see the code is completely different? Of course we cannot read it, but pattern you can see pattern is not even the same, right? So that's the polymorphic. It's always changing the code whenever it is encode polymorphic. And that's why shikata ga nai the best, because there is no pattern in shikata ga nai. And do you know why it's running a 32 bit architecture as opposed to like an X 64, Shikata ga nai 32 architecture. For for the x64 we have some payload encoders one of them is xor. So I think they don't have a list here. Let me check. Nope. They don't have a list here. You can actually check the list of using this MSF venomh. Let's see the l. We want to list, list the things. So list this one space type and type is and called encode etc etc. So have list L right? So MSF, venom that's L and then iencoders One, two, three. There you go. So these are the 86 32 bits and these are probably, yeah, these are independent. They, they don't really care. And these are 64. These are only two which are x,actually four, which are X 64 earlier. There were two, they might have added it. I don't remember when this has been added, but you can either sort it again. The other form of xor. So what is xor, I think you guys have attended a seminar or a class on Gates, you know, electricity, Gates, Xor, and exor, those companies. UXor is basically the, you know, bites and zero, to one one, to zero. That kind of thing. So this, these are the only four encoders available in 64 bit environments And these are the 86 bit environments 32 bit. So you just have to choose accordingly. So we got three machines today. First is the pen testing machine. The second is the beta server. And the third machine is windows xp machine. Just to sum up with the IP addresses, you can see our beta server has two IP addresses. One is in the range of hundred and one is in the range of 148, right? So dual network cards and windows XP is also in the range of 148. And our pen testing machine is in the range of hundred. So I hope that's much more clear. Pentester is in hundred windows XP. Is in 148. We are in different ranges, but this machine is in both of the ranges. So this is the common platform using which we will route ourselves to the next network. Umhat makes sense. Yep. All right, let's go full screen. Let's login. Okay. There you go. We'll open metasploit very quickly. We will hack the first machine we have everything set up. That's let's become root Okay. Give me one second. Okay. Oh, it works. So we are in the range, a hundred let's very, very quickly attack the hacker beta beta server. Right? So beta.hackerinthehouse.com I hope it's working. It's working well,i just open msf console and let metasploit load here. This is the password and username for the website. There you go. Let's clear this screen views exploit webapp. Nope. I don't know. Let's let's search it. Search admin_shell. If I'm wrong, there you go. Is it! And we have covered all of this in the last lecture. I'm quite sure, right? Mmm Yes. Yeah. Yep. So options There you go set. That's where a password is this Copy paste, enter user name developer set Rhost , beta.hackerinthehouse.com, Let's clear the screen. I think everything is all set. Yep. Run the exploit. There you go. And we got our shell open. So this one which we have got is our first meterpreter shell. And I'm going to background it Cntrl+z enter to a control+z that to background, or you can type background there. Okay. Now let's see sessions. So you can see, we have one session here, which is session number one coming from WW data from this host. And this is a Meterpreter shell PHP based, running on Linux. And here, this is my IP address. Okay. Dot nine is me. I am connecting from port four, four, four, four. Basically. I'm listening on four, four, four, four on this IP, which is the server on this port. So it's a random port over there. Now that's the whole scenario, but let's go ahead and interact with the session. So I'll say clear sessions, dash I for interact. And I will interact with session number one. And if I say shell here, I get the terminal of that web server. Right? So that webserver now i can control it. If I do, I ifconfig, I can see by doing an IF config, we can very well, see there are two network cards. This is the first card using which we are hacking it, but this is another network card. And if there is another network card, of course there is a whole network. There, there will be other machines. And that's very normal just to give you a practical insights. Normally let's, let's see you have the smart TV. Okay. There was a smart TV, which was having a, you know, all kinds of networks or all TVs and, and, you know, similar, similar devices basically, but connected with a networks. So your smart lights, smart bulbs, smart TVs, all of these smart devices were connected with one network in your company and you have one of them. And you found out that they also are connected with another network range. So you pivot using that TV to another range and then attack those devices. That's one of the examples of routing. So, you know, you just need to find multiple network cards. As soon as you get multiple Metro cards, you start attacking them. That's, that's basically the, the thing now here. I do, it says fine. Let me close it. So let's say we know that there is another network card right. Now. Let me just copy this very quickly. This range copy. And let's get out of this. I'll just say exit here and do not exit the meterpreter I just exited the shell, but never exit meterpreter. If you do that connection will die. So all this background it background the session, let's clear the screen, and now we will use a post exploitation tool, which will be a string sweep, because we want to know how many other machines are there in that network. That second NetworkCard, how many machines are there in that network? That's what we want to know. So I can just say search ping sweep. And there is a post exploitation tool, post multi gather from ping sweep, right? That's the, that's the tool. Go ahead and check it. So you post multi Gather ping sweep. There you go. Let's see the options. So show options. And I can see we have Rhosts and session. Why does it need sessions? Because this will automatically take this session and automatically route us. So, you know, we don't have to set a route. It will automatically help us using that machine to that network. So if btw, if I just tried to show you, then you have, There you go, Right. If I tried to ping a machine, now, this is the IP address of that machine. Let's say I try to ping one, right? . One. This should be the router. You all know that, right? This should be the route. Dot one is always the router Right, right. If I tried to ping it, it should work. I mean, if I was in the network, but you can see, I am not in the network. And just say, it's time to live exceeded. It's not going to work because I'm on the network. Okay. That's that's, that's the thing. However, this module can ping it. So this module will use this session, which we have just have that we have caught, that session will be used to set it out. And this module will do us do that work for us. And this will automatically thing. All the devices Rhosts. We can set Rhost here and for Rhost am going to set the whole range. So I will remove this .slash 24, because it say 24 network. We'll just give it the whole name. You want to search the whole range. You can actually give it like this as well. So dot.zero two dot let's say a hundred. So it will take all the IPs dot zero to dot 24. I hope that's very, very normal. Everyone knows about how IP addresses works. Even if you have any doubt, anytime, just let me know set sessions. Sorry session and session number. You just have to give a session. Number of our session. Number is one. There you go. Let's go ahead and Run it. Now, can you see, we are getting hosts here and we cannot ping these hosts, but this module is pinging the host right now. What it is doing is as just going there, ping the host, checking if it is getting a reply, if it is getting a reply, is it showing us on this screen? That's what it is right now doing. Mmm. Yeah, it does. But what could we have just think the subnet while the meterpreter session. I mean, while we have an meterpreter session going while we're inside that meterpreter session, there's no command that we can use to ping Directly from that machine. Right? So what you're trying to say is we have a Meterpreter session. We can open a shell and then ping it from that machine. Right? Exactly. You can do that. It's not a problem. That's one of the approaches. But think about it. How will you use a tool? Let's say you want to scan for ports. How will you do that? Using that machine? You will have to install something in that machine, right? And in pentesting, normally you're not allowed to, you know, change things and install things on their machines. They got companies. You cannot just install tools on their machines. Makes sense. Makes sense. And think about it in this way. Now we know it's a Linux right now. Just think about it. It was a router, or it was a smart TV. How will you install n map or something on a smart TV, Right? There are ways sagar ways, but you're right. I see what you're saying. I hear you. Right? Right. I mean, so yeah, still let's say you can install an app or something, but then the thing about bigger things, you know, you need more memory, you need more power, you need more processing. All of that is not available on those machines. You cannot do that because your scope will not allow it. So anyways, we found these machines it was basically pinging from one, two, three, four. It was continuously pinging for us. And now we do have all these machines and we know that the default is windows XP machine. I just show you there. Right. So let's go behind it. .111 Is basically the same machine from which we are getting the session. So it's that same machine. Can you hear me? Yes, sir. Alright. I just had some problems there. Alright. So let's, let's go ahead for this machine.84. I just copied this selection and we will clear the screen now. I mean, this module can do that, right. This model cannot rout, but what if I want to do something manually? What if I want to run an exploit exploits, don't have this option that we can give them sessions and, and these exploits can run automatically. We need to set a manual route. How do you do that? There are two ways you can do that. Either inside meterpreter, or you can do that outside of the meterpreter. Okay. It's basically the same thing. It's going to set up the same route, but how do you do that? I'm just showing for example right now I can just say run, sorry. I can just say add route add. So I'm trying to add a rout. And now here, and let's actually check the sytax. I don't remember the, syntax too much. There you go. Route out. Add or remove. You can remove as well, then subnet then net mask. And then the, basically the you know, it's basically going to be the channel or the ID or the session ID, basically. That's what it is. So that all work. So route add this is our subnet dot zero and you go and net mask two, five, five dot two, five, five, two, five, five.zero. And you can take it by going into the machine itself and typing IFconfig. And such a number session is one press enter. Route has been added. Let's try to print it. So print route sorry route print. And here you go. Now this is your routing table. So you are routing all of your network from this machine, okay? From session one, basically to this subnet on this netmask. So this session one is now your gateway, right? You're you're routing everything in that machine. That's what you're doing here. Session is, is, is what you're trying to do. And you're trying to reach this. SubNet on this net mask by this session. That's what you're doing. That's how you add it out. You never add the IP address of the machine in which you are as well. You always are the destination, the sub net. Very, you want to reach which, which you're not. I that's, that's the destination subnet. That's what you add here. And once you have added it, I mean, it's going to be quite simple. Now you can basically run any exploit. You can run any scanner. It will always go through this route. So it's quite simple. Now, if I try to show you, if you just go ahead and say and If run a scanner, let's say let's search for a scanner. So search scanner. And we got a lot of them. Okay, let's go ahead and check. So we got like SMTP scanners, blah, blah, blah, different kind of scanners, SMB scanners. I'm trying to find a PCP scanner. Basically. There you go. Port scanner, app, scanner, FTP, SIN scanner, PCP scanner, Xmax scanner. So all these scans we're doing n map, they're already here, X, max, TCP, and act. Let's go with TCP, which is the most reliable in routing. So I have tried sin scanner earlier sin scanner, normally we'll give you problems and here's the thing you need to understand. See? Why do we use sin scanner? Anyone, I mean sin versus TCP. What's why do we use them? Well, Sin is half open. You usually use it for dos attacks. And it's, but it's more detectable. Why is it undetectable? Well, sin scan is more detectable because it leaves open connection, half open connections versus TCP scan, which completes that three way handshake. I'm giving you a CAS response. I know. Yeah. I think it's wrong. Okay. Let me explain that. Please send us less and less detectable. Yep. Yep. And let me explain why, and then wait, I'm not tripping. Okay. No worries. So that said, this is our target and this is me. Okay. So in the first shot, we always send a sin there. Okay. And let's say, this is our sin. This will reply back with, and I know how hard it is. I'm not having my pen today. Sin act and we will reply with act and the connection will be established. Okay. That's how the TCP handshake works. Now, this is what happens in a full TCP connect scan. That is a TCP scan in that sin scanner. Basically, we saw that, how do we know that the port is open or the close? So this is how we know how report is open or closed. Then we are sending the first stage and you're sending this sin right when we're sending sin. And we get a response such as a reset, or we don't get a response. That probably means that the port is closed. If we get a sin act, that means the port is open. Okay. If we got a reset, if we get to you know, RST, or we don't get a response at all, that means the port is closed, or there is a firewall, something like that. The port is basically not open. That's the response. If they're getting us a sin act, it means the port is open. Now we came up with this concept that, you know, what happens if we just keep on sending sin, okay. We just, we just send sin on port number one. Then we send sin on port number two, port number three, port number four. Now let's say port number two and three replies bits in act port number one, doesn't reply, port number four. Doesn't replies. It simply means that yeah, port number two and three is open four and one is not open. That's basically the, the automatic response that we know that, right? So why do we even need to send this act? Why shall we send us act? There is no reason of sending this act. This is, this helps us in two things first. Yep. So first we are saving bandwidth. You know, that maybe there is a network, which is not that, not that heavy, you know, it can be a sensitive link. They're saving bandwidth there. That's the first thing. Second, is that any firewall, any ideas, any IPS, they will only know that you are scanning something. Then this app is sent, okay, until the connection is established a firewall or IDs IPS, it will not be logged. Basically the connection is never logged. If it is not completed, that's the, that's the thing where if you're not even completing the connection, it will not be logged in, in any firewall. It will not be logged in any backend server. It will not be logged anywhere. And no one can just read the logs and tell so that that's the whole purpose of a sin scan that it will not be logged. And no one can tell that you are doing something fishy. However, with latest technologies, anyone, if you talk about SIEM solutions Sor solutions, they have started to monitor the sin package as well. So when they see that, all right, sin packets are coming continuously, sin packets are coming from someone. They will understand that that it support scan and they will block you. So it's quite useless these days. I mean, seven PCP doesn't really matter. Both are quite same. The advantage of SIM SIM in these days is it will save bandwidth on a low, you know, low profile network. If the network is not capable of handling a lot of traffic sin as the best option there it's not too much reliable by the way. I mean, if in a, you know, I mean, it's, it's, there, there can be some firewalls. There can be some systems which may block the sin act. You know, even if, even if it is open, they may block it. So it's not too much reliable. Packets may go left in, in the middle. So it's not too much reliable, but it's a good one to give it a shot. So that's what we tried to do. It's a good shot basically to save bandwidth. That's the only, only trick it used to be undetectable these days, advanced technologies. It's not detectable, but it's a good shot. That's the whole thing. But in our case, when we are doing port forwarding, and if we're port forwarding, we, you know, sorry for routing. We are normally always using the Meterpreter. Now with Meterpreter, you need to understand a big E okay. There is a big E what is this big E it's encryption meterpreter sessions are encrypted. They cannot be decrypted. They cannot be seen by firewalls. Firewalls don't know what's going on for them. It's just a encrypted connection. They don't know if a port scan is running. They don't know what's going on. So they don't know if you're sending a payload. So it's quite undetectable when you are doing a port scan in pivoting and routing, it's quite unpredictable there. So then it doesn't matter. As you can always go ahead and use a PCB scan. It's more reliable. And in port forwarding and routing, you are always looking for reliable is always try things which are reliable because sessions, they will die. They die very, very easily. And the reason you always try to get the reliable things, let me clear this screen. We will use an auxiliary, which is a scanner, which is into, or I forgot, which is into port scan. Yup, yup. TCP. That's what we're going to use. Sin scanner, again, it's not too reliable. That's why we're not using it. It may A session may die show options. So that makes sense, right? I know it's now clear why sin is better and why they're not using it still. Right? It does. Thank you said Rhosts, come on, here you go. So if we are going to set Rhost, then we will set only one specific IP because we are targeting it. And now here there is something more than you can note you can always select the ports. And I never recommend, you know, searching for, there are some 65,600. I never remember that number or let's Google it, but whatever the ports are 600,000 never you know, scan all the ports in one shot, always go in you know, sections. So maybe first a hundred ports, then first 200, a hundred to 200, then 200 to 300. So go slowly, just don't push it like 10,000 port in one shot. It's gonna break the connection. You will lose the route. So you just say it set ports. And let's say, we keep it a hundred to 500. So just give it small, small ranges, divided it into project. It's a project. Now we are dividing it in small things. That's first thing we just said, Rhosts. We said, ports here now threats. So people will go with five threads, 10 threads. What thread means, how many ports it will scan at the same time. So maybe it will send tens sin package one, two, three, four, five, six, seven, eight, nine, 10. You know, all those ports. It sends a send sin package to all of them in one shot. And then from 10 to 20, then from 20 to 30, again, I never recommend this. I mean, until, until you know that the network is stable, a company has already told you that your network is stable. And, and this is kind of like if it is a gray box test where you can call them and tell them that, Hey, I need you to restart this machine, blah, blah, blah, things take your risk. I never recommend going more than one because it really doesn't take that much time. So this go with one thread, it'll take like extra five minutes, but it's worth it. A timeout thousand is fine. A timeout is basically when it will stop this scan. If it is not getting into this month delay, you can add a delay. If the network is sensitive, as I said, concurrency, it's basically again, how many ports to check. So basically, you know, thread versus versus a thread versus concurrency, basically it's quite same. Here it is. Port here. It is host the same concept. Basically it is machines. It is ports. So the same thing. Ten is, is fine. You can keep it on one actually. So one is the most reliable. I'm just going with 10 because I know my machine is stable. My network is stable. You can kind of go with least, just always go with least show options. If I do that again, you can see concurrencies, 10 at a 001 to 500 ports. We are going to scan. And this is the IP thread is one. Timeout is thousands. Let's run it. And there you go. We started getting ports. So we just got three open ports and you see it doesn't make really much too much time because we are at the end. We are in the internal network and interna; networks are always fast, right? That's fine. So at 135 is open 135 is open. 139 is open 445 is open, which are basically the SMB ports. Let's still go further. You know, just to show you, if you go ahead and set the ports this time from 5001000, so this is what you will normally do. Maybe you can just keep it in, you know, a thousand thousand ranges. So 1000, 2000 and 2000 to 3000, you can do it in that range normally. So I'm quite sure we will not get any result here. You can see no result found, there are only these three ports open on this machine. And I know that because I know it's a windows XP and I have made this machine normally in a test, you will go from zero to 65,000, whatever you will do all of them because there can be services. There can be services running on, you know, noncommon ports. They can be servers running on port 5,000. Maybe someone has configured that there can be web server running on port 20,000, something like that. So it's, it's even possible companies. They do this kind of work, their internal portals. They're always on random ports. So it's a good, you know, a good way to always scan all the ports. Okay. Just always scan all the ports right now. We are just leaving it with thousand ports because we know that there is no other open port but you know, you got 135 and 139, 445 right now. What next, anyone scanning part is done? What's the next step in the methodology? Vulnerability Nope, it's a Integration, right? We going to integrate. So we just know that, yeah, we got a port B, we have scanned it. But what, we also know that 445 is SMB. I mean, that's common sense, but what can we get using the port 445? What can we get using this SMB? We'll start enumeration. And I have seen people. They try to do it manually. I mean, if you are using a framework, you're doing a professional test. Why will you do it manually? Even when there are tools for you, you have paid for the framework to that. So let's go ahead and search for a scanner. So I will just say search SMB. That's what I'm trying to find. There you go. And we got a lot of them. Let me increase the size. And now you can see, these are exploits. These are auxiliaries, and we are always interested in auxiliaries. This is my SQL. Nope, here SMB is starting. So now you can, you can scan from multiple things. You can scan for one, vulnerabilities here. These are all vulnerabilities SMB. So MS09, blah, blah, blah. But what I'm trying to find is an enumeration tool. So just see if there is some SMB you know something like that. SMB, SMB, enumeration, those kind of things you will find. And I can see there is SMB one SMB SMB genome SMB one shares. So it is starting. The list is starting right over here, List starting right away. And we got some cool ones, right? So the first thing which I want to detect is I I'm we know that there is SMB on port 445, but which version we have not even done version detection, right? Because it's not n map. It's TCP scanner of metasploit which is not n map. And that was the best tool, but we are not using n map. So for Version detection, I'm going to use this one. So I need to know if it is version one or it is. Version two. After that, we can go ahead and try something like, you know, users you know shares, you know, domain, those kinds of things. Let's let's start it. Let me just go ahead and quickly use this SMTP one obligue. Yeah. So use SMTP one scanner show options. Okay, here we go. Now I'm set Rhosts. It was 10.0.148.84. If I'm not from that was a run. Yeah. That was the IP. I gotta scroll back up. Yeah. 148., 84. That is correct. Right. Let's run it. And it completed. And you can see this host support SMB. We want that's cool. It is supporting SMTP one because it's window activity. We know that it's going to support, but still we get to know that they're supporting it now what? Now we can go ahead and maybe search for SMTP twsmto yeah. And you can go ahead and search SMBP too. So just testing, the next version, basically show options and just clear the screen and run it you can see this time. It doesn't give me any output. You see it just saying scan completed? It's not giving me any output. Now that's very common with auxiliaries. They will not give you the output if it was not successful. Okay. That's, that's one thing to note. If you're not getting anything it's not successful or your auxiliary was not in a properly set up, you're not tune, it got completed. It's running, but either it is not tune or it is not successful, but you always check the options once. You know, and when you check the options, you can see, yes, it is properly tuned. It means it's not there. SMTP 2 is not there. Now why SMTP,2 is not there in windows XP. I think it was not even created at that time. So it came with windows seven. I think when windows seven was released, they came up with SMTP tool and we went, there was no SMTP two. So that's why we don't have it, which is normal. Well, now you got it right now. You got that. We have SMTP one. What? Next? Let's try SMTP enumeration. So how do you do that? Again, a search SMB. Here you go. We got enumeration users, domains. Let's go with users. That should be fine. Let's go with users. So use yes, FME users. So options. There you go. We need Rhost. We need SMB password user. These are not needed required are not. You can give it, if you want in a white hack box test, a white box test study, we are doing a black box. Really doesn't matter. We just need Rhosts. So set RHosts better than that. Command here. There you go. We have the, Rhost. Let's go ahead and run it. Okay. Doesn't see any output again. Does it mean there is no user? No, there must be user, but it's not, you know, it might be secure enough that it's not giving us which users it is getting that point. Yeah. Okay. Let's see if we have any other SMB tools. So search SMB again. I'm just going to go ahead and do it. Let's see what we have here, SMB. Yes. SMB one, the two and shares. Maybe we will go with this. Semi version. Okay. What will this, this is version detection again. I mean the same thing, which we did manually. Maybe this may give us more than information. Let's try it. It doesn't really hurt. I SMB version is there SMB login? So let's try these three. After that, we'll see what we can do. But I mean, once we know that there is SMB 1, we can always try to find, you know, exploits. And everyone knows that eternal blue is going to affect SMB 1 as well as, as SMB 2 so eternal blue is the one which we should be using. It's quite common sense if you are in pen testing. So I'm just using it. So options set Rhost and run it. This is SMB version. And if you go, we got the version hosted running windows, XP SP3 language. Language is English. The, the name is the name of the machine basically, is this work group is hackerinthehouse? Signature optional. That's fine. So we got, we got a lot of information here. It's windows, XP, special pack 3, or the service factory and language is English. Why is it giving us language? And why do we need, there will be some exploits where you have to specify the language as well. There are some exploits I have seen them in past. You have to give the service pack version, then you even have to give the language pack. And normally it is, you know, with the case of servers, there is a web server, maybe windows server, 2008, windows server, 2013. Those kinds of things you need manage packs. Normally that's, that's a good thing. You can get different here. Okay. Windows XPS, special factory. What do we do? We go ahead and search windows XP. So let's say a type exploit . I wanted to search the exploit and let's say XP. Okay. Press enter. Oh, there are hell lot of exploits. And these are not for XP. These are, mix, but they have XP in there. You know, they are like XP there in common. So that's the problem. That's why they're getting it. Okay. Uthe first one you can very well see here, Microsoft server service related,upart stack corruption. This is a very, very common one. And guys just remember this. It was specifically made for windows XP and earlier I think it even works in windows seven, not too sure, but still this zero eight, zero six seven net API. Remember this, maybe take a note, you know, MS08 67 net API, very common. Everyone uses it whenever they find a web server, which is like all the web server is going to affect them. So I'm just going to use it. We can use eternal blue, by the way, you know, that was recently released. You can always use eternal blue that's of course, definitely going to hack it, but let's try another exploit. I just randomly brought it. Now I'm just trying it. So you can just say, use this and it'll say info because I don't know how, what to do or how it works. So these are all the targets you see, windows 2003 then you can actually hack windows server here, XP all of those. Are there XP windows 2000, is there a XP special pack two? See now language is coming there. So if it is not English, maybe you will have a problem in our case. Yes, it is English. And I think this one is basically our target English special factory. Anyways, let's try this. Let's try this special pack one. Is there yeah, windows server basically. So I'm just gonna try it. We have check option so you can check the exploit before running R hosts. You can specify r host here. R port is there SMB pipe browser really doesn't matter as you can, you can try between both the options they have given you the options. So that's cool. Let's try it set r host And 10.0.148.84 said yeah, r port 1445 is correct. I mean, we don't need to change it in case SMB was running somewhere else. Custom port. We can change it. Five let's keep it as it is. Let's just go ahead and check it. So I'm going to say check and target is not exploitable. Can you see target is not exploitable. It just comes up. It just tells me what I can try here before leaving is we can right now on zero automatic targeting. I can just go ahead and tell it that. Listen, this has been windows XP, special factory with English. Target is six. So I can just tell it that. Go ahead and drive at six or maybe this one. I don't know. What is this always on NIX. Maybe some version, but let's try it. So six and seven went to go ahead and tell it the target Six, No options very quickly. And now you can see, we have specified the target. Let's check it. Oh, it is not exploitable. That's fine. I set the target a seven. No, let's check it. How does not exploitable. That is not going to work. I mean, even if I tried to run it, it's not going to work. And if I run it, it will break the SMB. That's why I'm not doing it. That's why I'm using tech, but it's not getting it tells you and believe me or not, this normally works. Okay. It normally works. Every windows XP. I have tried it in the past. It always works. The one which I have set up, it contains some security features. Maybe due to that, it's not, you know, I have done some updates on that. Some security updates, maybe due to that this vulnerability has been fixed. And normally in, in, in pen testing, if you find something like windows server, 2003 or windows server, 2000 or windows XP, rare case, even if you find that user's exploited MSU08, MS08 ,067, I think net API. Basically you can always search that by using search net API. And you will find all of the net API APIs, hero six, seven is the one and it always works. Umust try that I'm just going to try on more? Uhery randomly. I just going to try one more, which is this one I know it's not going to work, but still just want to try it. Maybe use this show options very, very quickly. We have set Rhost 10.0.10.0.. Okay, let's leave it. It's not going to work because it's only for windows zero special,pack zero to one. We are running on special pack 3 It do not work thats why am leaving. It doesn't matter. I just clean the screen. What happens there? So you got to know that is SMBP one, of course you can go on Google and find how big SMTP 1. But I think everyone knows about eternal blue and SMTP one V two, all of them are vulnerable. So I'm just not going to try it or not. There you go. These are Eternal, blue variants, different variants. One of them, which I will try if I was, you know, doing a pen test, is this one SMTP sorry. SMB, MS17010. Just note it down as well. It's one of the most popular ones. So zero one zero, most common. I would rather try it if I was doing it very normal or sorry, this is the auxilary. This is the exploit. So in the same MSA, one seven zero one zero Eternal blue. So I would rather do it. It's not going to work. I know on this machine, but I'm just doing it so options. I can see why it's not going to work. It's not windows seven or server 2008 RP Mmm. XP was before windows seven. Really doesn't hurt. You can, you can check it. I know it's not going to work. That's why I'm not doing it, but you can always check it. If it was a pen test, we were doing a real pen test. You can always check. But thing to remember here is this one is for windows seven and server 2008. There are more, there are more there is this one. If I move my screen up, there is this one eternal blue windows eight. This one was for windows eight. Then there is this one, M S one seven for a PSEXEC. This one, even this one was even able to hack windows 10 one, which we use right now. This can hack windows 10. In many cases. It's not going to hack in most of the cases. In many cases, this one can hack windows 10. So really it doesn't hurt. You can use it. It's a very, very, you know, big combination. They are using eternal romance, syenergy champion. These are all folks of the same exploit. They just made one eternal blue and then improved it, improved it, improved it. The final one was PSEX uh you can always try to go with this one and that's what I'm going to do now. So clear the screen. And of course you can, you can try it with windows 10. It may work. There is a good chance. It will work show options. Okay. It's completely messed up. Let me decrease the screen size right now. These are the options. What we need to set is required is this is already said, this has already said, this is not required. The has already said, this is not set. We need r hosts. That's fine. This is already set. Not required. This is already set. Not required, not required not required, right? So we only need to set rhost, basically set r hosts and which r hosts, we are going to set 10.0.148.84. That school, we just set it. You can always tune it. So, you know, you can always do it. Maybe you can just go ahead and port number, there are pipes, so you can always change the pipes and you can download a list of pipes from Google. You know, you can just go ahead and search Google, SMB pipes, and list, and you will get them for windows 10 and old. Now let's go ahead and check it. Sorry. I'm not familiar with the pipes. What does that mean? I'm so SMB basically, is it server message. Block Its is the protocol and it uses pipes. It's like technology to communicate, okay, here's this pipe. So this exploit requires you to have the exact pipe on which you want to attack the communication. You know, you can just say there's like the, the phone number basically on what you're trying to call them. Okay. Got it. Yeah. So you can get a list of them from Google. Metasploit always has a list. If I check it, can you see target is vulnerable and that's always, you want to hear, right. So it's vulnerable. When I go ahead and say exploit and understand one thing right now, it won't, we got the Meterpreter. It works. In many cases, it will not work. It will either crash your server. It will crash. The whole machine itself is you are trying to hack machine will get crashed. It may sometimes even, you know, crash your meterpreter the earlier one, which you have the only connection you have with crashed that, just restarted, you know, just, just get, just have that first machine again, set a route, try the exploit again, you have to do it multiple times. It always works for me. It has always worked. Really doesn't hurt, you know, just let's try it again and again again and again. And it will eventually work and that's basically it. So I made a meterpreter session to open. Now you can clearly see, we are getting the session from.one, one, two on this port. Okay. Sorry. What it is.one, one, two.zero. I don't understand. How is this one, nine two, one six eight. It has like, I'm kind of confused there actually. It's mainly meterpreter doing some mistake, lets check in sessions. That will be much clear sessions. I don't know. It's the same one, one, two. One, one thing, you know, one, one good thing here to understand is that's fine. Even if it is saying one, one, two, basically it is routed. So I think one zero nine as that's the bridge, right? The bridge IP maybe. Yeah, maybe, but here, this is, this is what you always want to check the last one in the bracket. So in the bracket earlier one, the first one is our beta machine IP. The second one is our windows xp ip might be, that is what you want to take. This that's how it works. And you can see, you are getting the connection from NP authority, which is basically the highest level of user from this machine windows XP it's, it's a windows shell. So you can just go ahead and say sessions dash i two. I want to interact with session number two and oops. Yeah. clear doesn't work in meterpreter many are using multiple. Let's try to see if we can do a lot of things here. Okay. We can the normal stuff. What I want to show you is basically migrate and all. So where is my migrate? Okay. Okay. Now you can find that yourself. I'm just going to show you how it works directly. Basically for example, if you try to go ahead and let me just do one thing very quickly. There you go. So basically if I go ahead and say, PS, it will show me the list of all the processes that are running on that machine. And you can see there are these processes running. Okay. Now normally what we would like to do is if you try to see, we will have a process running for us as well, which will be I don't know where that process might be in which name we are using. It depends on the exploit, but we will be in one of these process. Okay. We are one of these processes here and we normally want to change from our port to any other port. Okay. Now, any of the process, because maybe someone will close the process, maybe someone will, maybe the process may crash. What we want to do is this is like maintaining the access. We want to change our process. Number to, some other process. And, and you always want to go ahead and see which process is running with the highest authority, okay. With your users. So I can see these, these all are running as high, high end user. When login is the login service, it's great process. I can just go ahead and choose it. What need here is the PID number. So PID number is 644. So what I can do is migrate 644 and i can see. So we migrated successfully. Now you can see migrating from 296 to 644. Can you see here 2y96, this was the process we were using. Okay. This was a randomly created by our exploit. And now we are running in, in this process. So until a user completely shut down the machine, the restart the system, they basically cannot remove us from the system because we are running as they've been logging process. It's basically, I think it is the person responsible for logging users and logging out users. That kind of thing. Or you can, you can go ahead and maybe migrate to this process virtual box until someone closes the virtual box completely. They cannot log us out. Or you can maybe just go ahead and am I migrate one of the processes? Like IASS really depends on Google search, but processes are choose the best process and migrate. That's the, that's the thing. Now we are, I've been logging. That's that's one thing. You can, you can do some good work like screenshot. Oh, so they just, it just saved on our kali folder. You can go into your home and you're got a screenshot here. You can see the screen, your screensaver is running out at the moment. So you can always do a lot of stuff with windows meterpreter, windows one is the most, you know, windows one is the most powerful one. You can do a lot of stuff with windows. Uthere is something called get system. Okay. Let me just background very quickly. There is something called get system, oops, sessions. There's something called get system. Okay. Uwhat gets system will do is privileged escalation. So think about it. You are like a non root user or a lower level user. You were like given the access of a employee you want to go up because you may want to learn some commands and you want to install something. You may want to do something special. You cannot do that. Get system were try to do that for you. And here you can see got system. We are technique one. So it has got like three techniques. I think three or four techniques. It will try to privilege escalate. You automatically. It's like an automatic installation will work in. Most of the cases will work. In some cases, it will not work there. You can do manual escalation. And we were talking about manual escalations in another class right now. Just understand get system is your best shot. Whenever you have a system and you need to escalate yourself on this, try to do get system. So if I do get through I think that's the command. Yep. Now you can see, these are my privileges. Okay. I can do all of these things. What these means, always Google it. So, you know, what does this privileges do? What does this privilege do? A lock memory. What does this privilege to, I'm just telling you, like, normally you may want to go into some folders. You may want to search the machine. You may want to go into some folders, may want to run a program. You cannot do that because you will not have the privileges. You will have limited privileges and then you want to escalate. So always try and get system. It will try to escalate you and it will work. It is a very good one. It normally works. I get system. If it doesn't work, there are manual ways. I will, I will show you that the next other class. Maybe not next, but yeah, I will show you. It's a good one to remember get system. One more persistence. So, yep. Sorry persistence. Doesn't works. Okay. And even those what's the spelling of persistent, I think that's correct. Right? PERSISTANCE. Yes, he PE R S I S T E N C E. That's what I typed. Yup. Okay. let's see why persistence in working for not working metasploit. I mean, that's basically what you always do. Just go on Google and try to search persistance not working. And guys, I'm just telling you, if you are considering LPT exam or something, similar, learn to Google. Okay. You need to learn to Google every singlesecond. Whenever you have a problem, whenever you're want to find some, always run Google screenshot, you run persistence. Oh, okay. Run persistence. I see And this did not even persistence. I'm destroying your I'll do it myself. I'm basically in persistence. It's a script. I just remember. There is also a post exploitation module, by the way, if you search for that here, I will. Just say background. So background clear the screen search fork persistence. We've got a lot of them. We got a lot of them. Okay. I do think this is the one. So we only have two ports here, right? Three ports and windows as this one as a manager. And it's a persistence. Maybe this one is the one that you can use. I'm not too sure. You can run this script. So run persistence in the meterpreter and you just type run persistence and then the command line. That's how you can do it. Use this show options. The name call no this is not the one. This is not the one. Anyways. You can always run this script using it. I'm just showing you using this blog, how this works. Okay. So, and this one, basically what persistence will do is it will create a reverse shell, which will automatically you know, start then someone restart the system. For example, if right now someone restart the system, I will lose this shell. This, the shell will be gone. There will be no connection. Coming back to me, it's a reverese shell, but I will not get anything. If something is restarted, because meterpreter always works in the memory, it's basically going to your Ram, your memory. It's not stored in the harddisk. It's going to memory with persistence, we store it. We store the meterpreter on, on, on, on the harddisk so that whenever the system is restarted automatically, that triggers and we get a reverse shell. You can do that with this. So I can see port P p port. They're using HTTPS ports. You know, as I said, not too much exploits, they are non professional hackers. We use one, two, three, normally four, four, four, three can be blocked that by R is the IP address of yours. So this will be your IP address on which you want to get the connection back. And that I think is the interval. So every 30 seconds, it will send you the connection. If you're not getting anything, it will just send you the connection. Every 30 seconds and dash L. And this is the location where you want to store that script. X, I'm not too sure. Maybe it is to execute this script. Every second, you can check the options, right? So you can just say, run persistence dash help, and it'll tell you all the options. L, I'm not sure what it's going to do, but this is the, this is the structure. And if you even copied this line, as it is, does change the location like i am don't, don't do it in C, C is very common. Do it in like a temp, temp folder and interval set it yourself, port you can change r you can change, but that will make it,uyou know, that will just,ugive you persistence. Every, every time system is restarted. You will get the, you will get the persistence done. You'll get the shell. If I just try that, I'm not sure how this will work. Ups run for persistence. It's just, there you go. No, run persistence dash dash help. It doesn't make sense. Okay. Persistent. I dash h will it work? Yeah, here you go. You got the option. So h is automatic. It will just take the machine ID automatically. l Was the location X was the automatically start the when system boots. So every restart, just start this that's the persistence right. Automatically starts when user logs in. So you can always give these options right. In an interval, as I said and interval and port and the remote IP. Right? So that is how persistent work. You can always set this up. Yeah, here it is. So you can try it using exploit windows, local persistence. That that is that it's a local exploit. You can always run it. It's going to be out of scope. I'm just telling you if you're consulting something like LPT exam, it's going to be out of scope. You are not supposed to set a persistence, but in professional testing and real life testing, if you are doing a test, of course, it's not going to be one day work. It will continue with, you know, multiple days. It can, it can go two months. I have done tests, which are like three months to test. In those tests, of course you need a lot of persistence and you try to establish persistence at that time. That's pretty much it. I think the concept is quite clear. Right? How do you set up a route guys? Yep. The concept is quite clear, right? Yep. So if I just do routring, okay. Can anyone tell me how to remove this route? I mean, you guys know how to set it. Of course. You also know how to remove it. What's the command remove right? Route remove then subnet netmask gateway. That same thing. Okay. So ten.zero.148.0252252225 dot two, two five, two, two, five.zero session number. Let's enter route remote. Okay. And route not found it right? Oh, yep. Yeah. I would remove, if you try to print a route, you don't have anything, right. That's not how it works, but you can also set route in one more fashion, just telling you one more quick way in case this doesn't work in your exam or anywhere this sometime doesn't work. You can use the auto routing feature. So for auto routing, you need to go into the session. So session number one, the original session here. If you are in this session, if you have a meterpreter, you can use auto route, so run auto route And then dash S and just give the subnet. You just give me something one nine, two, Oh, sorry, ten.zero.one 48 dot 84. It will do all the work for you. It'll select this session for you. It will select the subnet for net mask for you. You don't have to do anything. You can see finally adding route this with this subnet via the session. So automatically does all the works for you. Very, very good thing to do. The, the only problem is it says scripts are depreciated. So it's going all, you know, they are not updating it. Maybe they will update it someday. Right now, they are not updating it. That's the only problem, but it's, working till you know, in these days it's working, try it whenever you get a chance auto route is a good one. Otherwise you can always set a manual route as I show you right at anyone. If you try to print a route , you can see it's the same route, which we did manually. It has done it automatically. Right. That makes sense. Yup. All right. I think it's quite clear how to route and how to do all this work. I hope you guys are much more clear and you can, you can practice that. Any doubts? I do have a quick question though. Can I share my screen with you? Yep. Okay. So, Oh, so I was doing a little bit of practice I'm with, I've only gone through, like I said, half of of, of the first video. Let me see, can I see my Oh, no. You're sharing so I can share, let me stop it. Okay. Yup. Okay. Let me see that screen real quick. Okay. So I, I started doing some this goes back to day one. Where? Can you see it now? No. Oh, I'm sorry. I thought I click on share my fault. Please. Forgive me. All right. So,uso yeah, so day one, just kind of do a quick recap. You at, what was that right here? Hey, send that, send those notes to me once you attend it So far. So you had showed us how to do WAP scan, WordPress scan. And so I went ahead and curious started looking at courses. Uone thing that kind of struck my,umy attention I started with not doing here seriously, there was about a key. Oh gosh, I'm sorry. I had it all ready. Like I said, don't have it as ready as I thought I did. Alright. So one of the things on the scan. Oh Lord mercy. Sorry guys. I thought I had this on hand. Oh, that's very, I think fairly, I think that's a screenshot. Hold on. Maybe I'm just, just feeling, Oh, here it is right there. So you can see that right there. So I was curious, you know, it had an exclamation point, it says, m Oh, okay. So yeah, so that's a website and it just gives you the register link there. Right? So you can always go ahead and register on this link and provide your API key. And with that, it will actually do better vulnerability scanning. So right now, what it is using is it's using a database. It just downloads a database of vulnerabilities and uses that locally. But using this, it will use a, you know, online check. So that's, that's the thing, but at the end the free version, not worth it. I mean, it's just 50 requests. Fifties is very, very less, okay. 50 requests are already less. If you are doing a professional test, it's definitely worth it. Yep. Got it. So let me just, okay, so, so the way it works now, what you're saying, the way it works now with WAP scan, it pulls the database and then scans it. Yeah. So when you start the WAP scan for the first time, or normally it will, you know with, with time, it will ask you to update the database. So whenever a significant changes made, it asks you to update the database. So it downloads a file from the server. Right? Right. The problem with that is it's not real time. So WAP scan the database is not real time. Every time you are doing a scan, you have to update it manually. So there is an option WAP scan that update, something like that. You can check in the help menu. Got it. So you always have to update it manually before doing this kind of scan. Yep. Got it. So basically what I'm saying is you can buy a service that will automatically update it for you, for you. So if you buy the service, it will basically do the scanning and it will take the results and it will send the results to this website. This website will process them on the cloud. It will find the vulnerability on the cloud and send the data back to you in WAP scan, and then it will show you the results. Oh, okay. So it's like all those scans, like on a regular daily. Yeah. Okay. Okay. So that's a new vulnerabilities. It's like keeping tabs, keeping a tab on your target. No, I think no, no, no, no, no. I think it's not good. It's basically the same thing. You got a local database, they got a remote database on the cloud. That's the only thing they can. Okay. I mean, you're not processing things on your machine. You're processing things on their machine. That's the only thing, that's it? Okay. So it's a paid service. So it's much more detail it's they got new vulnerabilities. So every second they update vulnerabilities that's quite different, you know? So if there is a vulnerabilities found like 10 minutes ago, it will not be in WAP standard. Maybe it will be in that website. Got it. Okay. All right. I'm back on the bus. Thank you. Alright. Appreciate it. But I like to do it in manual. You know WAP scan will give you the results, right? It will send the same result to this website and you can much better where you can take the results and Google it. You can, you can take the plugin name and Google the name and that's much better way to do it using a service automatic. You know, if I have to use automatic in my company, why would I even hire you? Right. Exactly. Right, right. No true. Being a business owner. I can buy the tool. I can buy the service. I can run it. Then what's your need? That's the need of a professional tester. You have to do it manually. True. True. Okay. Yeah. Yeah. That one was just wanna recoganize by. So I was, I was curious to know what your thoughts were. Let's go ahead and quickly up on our terminal and you know, do the usual stuff, get the shelf as the fall. And then we'll talk about. You know, advanced pivoting which is port forwarding and all of that over pivoting So console. But before that, let's pick a root. First, you go your root kali is the password and MSF console. Yeah. Let me just push this thing down here. Maybe. Yeah, that would help. So So Let me go WPA,. And we should actually start with persistence on this anyhow, and we have to do every copy. Copy. Copy, copy. Alright, so use this show options set. R hosts username, which is developer. And by the way, you can use the console as a terminal. Very, very normal. So, you know, for example, if I have those notes on my desktop, I can just create a tab Desktop slash norms And it will work just like a normal terminal. It'll execute that command and I can, whatever I want, basically, it's just like, it works as a normal terminal as well. So that's a handy thing. I don't think we need anything else. Let's clear the screen and run it. There you go. We have the Meterpreter and let's go to shell. So now we are in this shell. Let us suppose our target scope says that hack the beta machine and then have the, and a second machine, which is a media server. And let's say we are told that the IP 10.0.148.217. Then first thing will be to of course, try to ping it. So thing 10, zero.one 48 dot two, one seven. And we are ping it from the machine which we had because that's, that's going to have a dual card and after we are getting the ping, that makes sense. Yeah. did you need to do the route out again or is that no. So of course you will need to do that. What I did right now was I just did a ping from the machine itself. So I am in the shell If you see that shell means I'm getting that machine. Right. Gotcha. Yeah. So I was not using my machine to send this. I was using that machine to send it and we will add the route now. That makes sense. Yeah, that makes sense. Alright, so run auto route. Oops, but I don't know the route. And then ten.zero.one 40 eight.zero/24 enter. And that gives them that, that answered right. Added the route. You can see the last second line let's background. The session they'll go. That is the shortcut. By the way, you can type a background itself. If you want to do that clear route print. There you go. Now we have that route again. So now once we have the route, we should be able to do whatever we want. We know our target is two, one seven, what to do first thing, first scan reports. Right? So use auxiliary, scanner port scanner, TCP. Enter set r host 192.. Sorry. 10, zero.one 48 dot two, one seven. Yeah, I two one seven. Right? I think we don't need anything else. Let's run it here. Here you go port 80 is open? Which means it's a web server. Of course they named the, just media dot hacker in the house. So of course it's webserver, but let's wait for it. Let's see if anything else comes up and I'm just telling you, there's nothing else. That's just the one port, a port 80. And that's what we're going to, I try, but you can, you can actually be it if you want. I'm going to leave that. Okay. You guys can read it if you want. Right. That makes sense. I mean, I just know there is only one for why to waste, but if it was a test, of course you have to do it, are you getting that point? Yeah. So let's say now one, suppose we know what is, I mean, there is something on port 80. What we can do is maybe we can try to search for something apache scanner or something like that. I mean, virgin scanner for Apache, we are not sure, but let's try that. So search and we don't know which service it is. Maybe banner grabbing. Do we have something called banner grabbing banner? Okay. No search results because spelling is wrong. Of course banner. There you go. So we have a, do we have a banner grabbing here? No, I don't see that. So we have IMF version scanner, not SMTP version scanner. We don't have a banner grabber. I mean, FTP. We have one I don't see any other banner grabber it there. Okay. When you're stuck with that, maybe what you can do is go on Google and search and thanks. You need to learn this. I mean, whenever you are stuck, you have to go on Google and search. Okay. So how to do version detection in Metasploit Okay. SMTP version detection. Here you go. That's what I was looking for. Even you can, you know, service identification. So there is, there is a post there, maybe all of these helps it's helped a lot. And this is something you should learn how to, how to go ahead and do that. So, yeah. Okay. They're only talking about two services SMTP may be and rapid seven is the best website, best website because they are the creator of the metasploit. SMTP Version detection. There is a module it's using is auxiliary SMTP SMTP version. Okay. Well it seems it there you go. Clear the screen and I will actually take the visit itself from here. So use this copy. Okay. Paste Why this tab open. Close it. There you go. Now we are in that show options. So r host, which is required port is. Okay. SSL, of course, you know, if it is on four, four, three, you will make it true. If it is on port 80 make it false thread, that's fine. You can keep it one. So what we need is rhost. That's the only thing. So set r host. Here you go. Run it. Now let's see what comes with some information Until it is, until it is working. What we can do is we can try to go on this. Oh yeah. We cannot go on this website because only Metasploit is the part which, you know, only metasploit is the framework with just having that route added. Okay. Your system is not having route. That makes sense. I mean, you cannot open this. If you try to do that, it will not work. Let me show you, it will, it will basically not work because you don't have any, any kind of connectivity between your computer and that computer. It's just, Metasploit, has a connectivity you could in session. Is that making sense? Yeah, it does. All right, but we have a solution for that which is a SOC server. We can open a Soc server for that or, or port forwarding two options. This is not working for some reason maybe, and this is very, very normal. I mean, on, on routed things, it's, it's always the case. The really fine. We can post this and we can try to use other methods. I mean, that's why we have other methods. So one of them is using a SOC server and one of them is using the port forwarding. Port forwarding is the easy one. Soc server is, I mean, port forwarding is basically more reliable Soc over, does not that reliable. I'll tell you both of them first. Let's can you quickly just describe what a SOC server is? Okay. Have you ever heard about proxies? Just like proxies, right. So what we can do here is so proxies are different, different protocols, different, different pilots. PCP is there UDP is there HTTP is there SOC is there, these are different, different types of protocols. What a soc server will do is this Metasploit console, because this has the access to that range. Now with, with that route, this will become a proxy for our whole system. And we can set up that we can set up that proxy and due to that, we will be able to use Firefox n map, whatever you want. Everything will work because every traffic will go through Metasploit as a proxy Metasploit is sending that to beta server as a route, a pivot, and then beta server is sending it to the final destination. So it's going through Metasploit as one more intermediate pivot and getting that point. Yeah. So that is, that is what you can do in SOC server. That's easy. That's easy enough. Before that I, you know, let's, let's go ahead and try port forwarding. That's a kind of issue. No. Who do port forwarding. You need to go into the session of the meterpreter. So sessions one. There you go. And now you can just type port forward. Write port FWD. They, they just keep it low profile. Now here you have three options. l Oops p r. Okay. Now what does r r is, the remote host? So ten.zero.one 48 dot two one seven. That's your dash R dash p and L are the ports, which you want to forward. So P is the port on that machine, which you want to forward, which will be port 80 and dash L is the local port where you want to forward. This can be anything, but normally we will keep it same. So port 80. So therefore it becomes my port 80, I guess that's what we are doing. And before I go to right out here, add it, add, press enter. Now we have a local PCP relay on this machines port, 80 coming to our port. And if with that, we try to, you know, open our local address one, two, seven.zero.zero one, Which Was not working earlier, but now it should work because we just added a port forward. Yeah, I was just login. Okay. you got any ideas? Why it may not be working? Okay. What I want to try here still, what I want to try here is just try to, you know, Oh, did our session died, I that's, that's what I'm thinking because cshell is not working as well. Okay. Shell is not working as well, and it should work added running shell timeout ablation. Can you see that's possibly our, our session is not working properly. What I'm going to do is I'm going to close the session, first of all, and remove the port forward. And it really doesn't matter. You can, you know, keep that running, but it's a good habit to remove it and I will exit the session and let me open that session again. So the exploit which we were using. Okay. Where is the exploit? There you go. And let's get this session again. Session two. Okay. Now just does, you can see, you see the port is not responding at all right. Now. Let's go ahead and add a port forward So one to seven zero zero one, which is our local IP doesn't work. That's really fine. We can just say now port forward and I can bring this command here. Yes. Enter. And let's try to do it now. And you can see this work. So it has hacker in the house media. You can see that title there. It's loading now though, it's taking a lot of time, but it is going to work. And that makes sense, right? There you go. Now loading up. Yeah. No, it's, it's not loading properly anyways, but it is still loading. Okay. That's, that's one of the things and why it does it you know, this problem is very common. It doesn't loads things won't load because that somebody's expecting a domain name. Again. Normally they are not expecting you to be running it on a, on a IP address. They are expecting, you will be running it on a domain name. That's what they're expecting. And you can just, you know, go in your host file and add this thing in your host file. So you can just go there. And you can just say nano, edit, sorry. Nano Exe. Host's okay. That was host as not post. There you go. And for example I have this IP, this is wrong. Let's keep it one to seven.zero.0.one. Let's close our control X by enter. And now possibly this will work in a much better media .hacker in the house. And there you go. Now this is loading. Absolutely fine. Perfectly right. Can you see that? Yep. So we got a cool login panel, a click click bucket application. There, you updated the host file. You said I just added the host file with the entry. So normally what happens is, you know, if you have a company and you are having an internal website for the company, you will not keep that on, on, you know, IP addresses. You will rather keep that on a domain names, right? Internal domain names, which only company users can open. So that, that, that web server or the website, it was not working on. Uwhat do you say it was not working properly on the IP address because it was not expecting the IP address. So we just added our local IP to media or hacker.com because our local IP is being port forwarded to that machine, right. That machine's IP. So at the end, our local IP, and that machine's local IP for port 80. It doesn't make any sense. It's the same thing because of the port forward, right. Port 80 on this, this IP, our local people, data on this IP is equal to port 80 of that target. Is that making sense now? Yeah. All right. And we have access to our local, so we just add the local here, and then we just added this entry here. Right. So now, if we are going to this IP, our browser is taking us. So if we're going to this URL, our browser is taking us to this IP on port 80. Okay? Okay. So now we have the website. I mean, that's the first way. So that was the first way, which I wanted to show you. And now you can, you can use it very, normally everything will work as the admin is there. You can use it very normally. That's how it normally works. Since you have the port forwarded, you can possibly go and run something like n map or something like that. So I'm just going to quickly show you and, nmap then one to seven.zero.zero.one. And I think that is the IP. Here you go. Port 80 is open. And of course it is open because we only forwarded one port. And I normally, you would actually like to go ahead and specify the port as well, to avoid confusions, only add the port, which you have you know open and maybe just try something like SV Virgin detection or dash eight to aggressively scan it. So let's hope we get the version of this Apache. So now we are using n map. We are scanning the machine in the range. I mean, the machine, which is in a range in which we are even not there. So it's like over a pivot. We are scanning it over a PCP scanning. So we have the Apache httpd two, one, four eight seven. You can possibly go ahead and try to find some exploit on this. I know there is no exploit on this understanding it serach exploit. I know from my experience, I know a 2.4 0.7 is a very secure version is a very stable version. You can go in and try to find it here. But you will not get anything, 2.4 0.7. There is nothing like 2.4699999999999998 in this list. So you will not get anything there. Okay. But in a pen test, and if you were not aware of this version, maybe you will go ahead and do a research using some tool like searchsploit and, and to see if there is any vulnerability or something like that. I will come on this part as well in another in the next class, basically how to find exploits, how to, you know, search for them, how to exploit services or service exploitation. We will do that in the next class. Today we are basically talking about port forwording and all that kind of stuff. Okay. I do hope you are now pretty clear how port forwarding works and you won't even have to add a route to do port forward because you are doing that from the meterpreter, not outside the meterpreter. Okay. Okay. That is making sense. Yeah. Yeah, no, it makes perfect sense. Port forward. Add your local port. It can be anything I can just add, you know, dash one, two, three dash 88, dash four, four four, four. And dash p is the port, which you want to forward. Dash r is the host on which you want to forward. So port 80 of that machine becomes my port 80, anything I wanted, I can do that. And then I can just access that port using one, two seven zero, zero one, right. What comes to mind is FTP, right? You can put forward FTP over here and in, in this dash L it's your choice. You can keep it 80. You can keep it for 21. Just, you know, you need to remember which port you have forward it on which, right. Right. So if we go ahead, let me just remove this very quickly. Make copy. I mean, that was this method third. Now I'm just going to, I mean, that's the best method, by the way, it's, it's, it's kind of the much more you know, suitable method, but it takes time. This, this takes a lot of time, just think about it. You've got like 20 ports. You, you will have to open your, you will have to forward all of those 20 ports, and then you can work on the machine. This takes a lot of time and it's not suitable for, you know, very, very quick. Maybe it was like a quick test. You were, you were trying to do, you are trying to do something. It came to your mind. Then SOC server is one of the options and soc. And what is kind of you know, it's kind of a, it's kind of a good concept to understand. So what you can do is you can, you can do soc server by let's search, whatever. So I'll background the session clear this screen and soc server SOC Soc soc, by the way. Sorry. That's that's so s I've heard on the spelling. I think it is SOC. Okay. Soc, there you go. You can open a soc server. I mean, you can open HTTP server as well, a TCP server as well. But I think soc is the most reliable in terms of the protocols. There is soc five and four eight Now I have personally tried both of them and soc five doesn't work for me. Okay. It never worked for me for that reason, port 84 a for a protocol is as much better. I think this is more reliable that doesn't work for some reason that doesn't work. Let's use it, show options. Now, when you have to do is you have to just set the server port and a server, a host. Okay. So several hosts let's keep that, you know, zero, zero, zero, zero doesn't doesn't really matters. Server port let's change that. So set SRE port. Okay. And thats how we port. And then we can just say something like,usix, six, six, six, and randomly, I'm just giving Even SRV host. You can change it if you want. So let me redo that. Uhr let's, let's keep it as there you go. We are now running a server Sod server starting it. So let's wait for it Starting and starting. So I think what's going on. It's taking a lot of time. No, Yeah. It's still working. Okay. And on command now it's giving me those things. Anyways. I think it has started. What you can do is you see, this is job. You can actually just say job. Maybe jobs dash. I know you can, you can basically say job and it will show you every job running. So jobs, zeros running there, you can just say job dash i zero it will show you what is, what is it running? So it's soc server running seven port 0007 server port is 6666. So now we have a proxy running, which is running on 0000 on port 66, 66. Okay. That's the proxy. But I mean, so now, whatever our Metasploit have access to, we also have access to the same thing. That making sense. I mean, the, the connections, which metal sploit has access to, we will have access to if we, you know, connect to this, this as a proxy, but our Metasploit doesn't have any connections because we have not set the route as well. This is this, this is not a port forward. This is just giving the connection of the MediSploit to us. So we need to give Metasploit the connection first. So I'm going to add it out here. Sessions. one. No, that doesn't exist to yep. And then run auto route dash S 10, zero.one 40 eight.zero/ 24. Oh, what does it say? Okay. I added two times full stop. Yeah, there you go. Now it's working. You can background it. And now whatever our metasploit has access to, we have access because of this we're running. So we can just take this, Then go to our Firefox. And now if I refresh the page, by the way, it will not work. Yeah. It is not going to work. You can see if I go ahead and open my preferences and I set up a proxy here in my Firefox. So manual proxy, and we are going to set SOC proxy, right? So soc proxy hosts the zero, zero, zero, or this six, six, six, six. This is a sock for proxy. Okay. I'm trying to do that. Not working. Oh yeah. It's just all soc proxy. So every other thing is blank. We are not using HTTP We are not using SSL FTP soc proxy zero zero, zero, zero on four, six, six, six, six. Let's try it. It should work. And now we can directly use that IP address. So we don't need to use one to seven, whatever we can use that IP directly because Metasploit has got access to that IP. You do the route and we have got access to that IP due to the port due to the SOC server, which is running on metasploit . So,uten.zero.one 48 dot two, one seven. If I press enter, you can see website works absolutely fine. That makes sense. We just added a proxy there. We just added a proxy. Yep. I soc proxy, which is, which is connecting to two metasploit and it is working over there. Now the beauty of this is you can use any tool. I mean, see, we added a proxy, right? So we can actually, we can use any tool to be configured with this proxy, but how do you do that? Like, is it possible to use any tool with the proxy? It's kind of I mean, just think about it. Like any tool with the proxy is like there should be an option in firefox. There is an option to configure the proxy, but it's not mandatory that every Googler will have it. So for that, there is something called proxy chain. You can go ahead and set up a proxy chain, nano proxy chain exy, proxy, chain dot config. That enter go to the end very end. And you will see proxies here, SOC for proxy, port and six, six, six, six. I'll just change it. And even if this entry is not there, you can add it yourself, SOPs for space your address. And it is always a good practice when you are starting your server, by the way, it's a good practice when you're starting the server, make the port 127.0000 instead of having all the ports, what all the domains mean using to any interface it's like, it's not specifying any hosts and interface. It's always a good practice to keep it your local host. I'm just going to try it. Not sure it will work with 00. Let's try it, save it. Since we have the proxy chain. Now we can even ping that machine. We can do whatever we want. So what we have to do is proxy chains by proxy chains, space, whatever you want to use, let's say you want to ping ping space and the IP ten.zero.one, four, nine, four hours. The IP 10.0.148.217 I enter. Okay. It doesn't work. So I was expecting it work. Okay. Let's let's, let's wait for that. Let's wait for that. Uis something else gonna work is w get connecting to that connection, but refused. Okay. Connection refused. UI don't understand why connection refused when they connect to the server. Maybe our proxy is not working. Yeah. Adjust the payload to a bind payload instead of a reverse and some other things. I mean, there is a lot of things we can manage, but,ul port, let's say nine to three, four, roughly just L host. Uyou can give an l host, let's try to run it. We will see. Okay. It says, following you have to give it it's the same. You cannot. So set L host and let me give my IPS, you know, not,uwhat is my IP? I have config, there we go. My IP is, there are seven, right? So set L host 10 dots, zero dot hundred dotr seven. I mean, I cannot give my,uyeah, I mean that, that's the only ip I have. Right. I cannot give my real IP. So I'm using IPV six. This is IPV six. I cannot use IpV six because that does not in the DMZ rate itself. I cannot use my local address because that's only local. So I only am left with this IP, which is the DMZ one. Let's try this. If that works, uploading the payload, executing, it may not give me a reverse. Shell I have a very bad feeling? There, there you go. No session was created, right? You don't get any shell. Why? Because off the, you know, because of the double pivoting stuff here you know, you're pivoting to a hundred machine and then you are pivoting to the one 48 network. So your machine, your machine can communicate with one 48 because you have you were routing your traffic, but one 48 cannot communicate to you. Are you getting that point? Yup. Yup. That's a problem on the back way, right? I'm sorry. I mean, in a illustration, it will be going through the front way, but the destination wouldn't be able, they cannot send traffic back to us because they can not route their traffic through beta server, right? That is a half way. Middle man. They are their only middlemen for us. They are not middlemen for the media server. Let's say with clip Bucket 4.0 exploit, right? When you see this one, you will find that this is the manual of all those three vulnerabilities. This one is manual way right. So when you see this manual way, you can easily see if you start reading this. I mean, this is a text file. If you start reading this, you will find, for example, let me just take the same, same exploit. I mean, you can use other ones, but an authenticated arbitrary file upload the same one. So it says here a malicious act can do that proof of concept. Let's see. Unauthenticated file upload proof of concept. This is the proof of concept. It is a curl curl command. So you can send this signal to do the website. Let me copy this. Yes. Okay. Copy. Let me go and open something like leaf pad paste it here. So it does in our, it needs to be in one line. That's why I understood. Okay. HTTP host. Let me add the IP of that server. So media dot hacker in the house, I'm putting the address directly because we are using a proxy server. Remember they're using a proxy server. So we can communicate with the website directly. Now, here, name any name dot PHP. You can put anything. I'll just leave it as it is forever. F Dash F is, I dont know what it is. Just leave it. A file is equal to P file or PHP. So p file dot PHP, you can of course put your own file PHP file. Right? So let me try with a file and I'm going to make a very quick a file. I'll just move to the next spot and I'll just make it filed a dot PHP, a dot PHP. I just put this as a file. That's normally just for the proof of concept. So now we have a dot PHP. Now what I can do here is I can change this file. A dot PHP to eight dot PHP, because that's the name of my file. Right? I can take this line copy and I can come here. I can paste it and present that. Will it work or not? What do you guys think might, might work 80%. It will not work. Try to see why. Yeah, No idea. Okay. Because you are not mentioning any proxy here. How does curl curl is a command, right? It is a software. How does curl connect to this website? I mean, you have a proxy running, but you're going to use proxy chains as the making sense. Because curl doesn't have any option. Yeah. So you gotta, you gotta mention proxy chains here. So proxy chains press enter. Now it is connecting through the chain, right? So let's see. There you go. You can see success, right? Success. Yes. File name. It gives you the file name as well. Extension PHP file directory, where it has uploaded. It has uploaded in this directory, right? That's giving the data. Copy. Let's read it a little bit more. Let's read the exploiy which we got here. So for the more vulnerability is also authenticated with basic privileges, blah, blah, blah. No, we don't have any information. Let's read it again. If we have something here. Okay. Unauthenticated file upload. A malicious file can be uploaded into the web server by unauthenticated attacker. It is possible for an attacker to upload the script, to issue operations, authenticated. Something doesn't make any sense. Let's try that. Okay. Let's try that. Where did we uploaded it? If you see that URL again, the POC proof of concept, which we just use, we use this one, right? So we uploaded it in cost actions, read PHP, something. Right? We uploaded it there. So first of all, I will open this, this folder, right? No, we used this one. Yeah. First of all, I will open this one. So I think this is the PHP file, which was vulnerable. This is the folder where the PHP file is. Right. So I will open the slash actions. I'm going to open a slash actions, right? So that file that vulnerable file isn in slash actions. And this this line says that it is in this folder. So this is a folder. But because that PHP file was'nt in slash actions. So we have put that as well. Now here, let's see if this works, let's see again, it's taking time, but you can see, we got the file and we got three, four files because we uploaded them using Metasploit. So three files are using at this point, we did three trials and one is the one is the one which I just did right now. If I see the file name, which I got is this one, one, five, eight, five, right? All of them are one, five, eight, five, zero seven CD. So zero seven CD. This one, the last one, right? This is the last one. Oh, you can even see the time. And so 15, if I open this, you can easily see, this will say, this is a file because that's what I have written. You see, this is a file. So we have done it now. Normally what you can try, if you are not getting a connection, you can use a PHP shell. So there is a very common and a very cool one, which is C 99, C99, PHP, shell. Very common, a very famous one. Okay. C 99, right? Download you go. This works. Open, come on. This is the PHP. I will extract it to desktop. Okay. How to extract to desktop anyways, I'll just drag it. I'll just drag it here. I will change the file name to a.php because that is in my command. I will delete this change the file name, but rename a.php. And I can run this command again, right? The last, command, which I just did here, I can run this command again. It's going to take time. It's a heavy shell. It's kind of a big shell. So it's gonna take time. I did it. And now we can go there. Refresh the page. Oh, sorry. Let's go back. Yep. So refresh the page. Okay. I mean, we, we, we upload it, right? It says success. Yep. Success. It's taking time. And I don't see that. Oh, I think this is the one 641 KB. And of course this is the one. And let's verify, you can see eight F five, seven, eight, five, seven. There's the one that's open. It may work. It may not work again telling you, but let's see. It's a very famous shell. It's heer you go. It's a complete dashboard. Now you can easily do whatever you want. You can run commands. You can, you know, directly run commands in that machine and you can upload things. You can make a new file, make a new directory. It's very powerful. And there is one more, there is there's one more, which is even powerful than this one, which is called weevly. Okay. We weevly is WEEVELY. It's called a weaponized show. It's very dangerous. We believe you can encrypt, you can password protected. So no one knows what it is. This is the gift code. So you have to make sure you have a proxy chain that, I mean, you have to make sure you're able to connect to the, to that website for you to be able to do all this. So you use the C the C nine, nine shell. Is that correct? Correct. Correct. Correct. the only reason I'm using it, web shell, I mean, not a meterpreter session or something. The only reason I'm using a webshell is because I'm not able to get reverse connection. Then again, there are possibilities. I don't know why I'm not able to get it. Maybe because I might lack expertise in that topic. I'm not the best person to do everything in my team. So there is a possibility, but I can still, I can still do whatever I want. It's it's a complete shell. Okay. So let's say a hacker has already done this. So from a pen test perspective, how would we detect this is basically compromised. Okay. This is easy. This is easy. So this kind of shell C 99, it's code, is a very famous, right? The PHP code is very famous. Everyone knows it. What you can do is you can use a antivirus or a DLP or something like that. I might, you know, go ahead and use antivirus software, something from McAfee or something from, you know, check. Good, good reputed companies, a bit defender is one of them. So you can scan the server or the storage. You can scan the storage of, of that, right? Or you can use a web application firewall, for example, and WordPress, they have something called word fence. WORD FENCE, not word fence has a scanning tool. So you click on scan. It will start a scan. It will tell you that, listen, this is a malware file. This is a you know, this is a modified, sometimes hackers are so intelligent, they will take the code and they will not upload it as an individual file. I mean, I have access to the file now, right? So I can possibly, I can just, I can move back there. You see, I have all of these files right now, this admin, dot PHP. It's a default file. I can edit this file. I can create. I can edit it. And I can paste the same shell in that file as well. So, you know, not, not removing the content of this file, but also putting content of my that's one possibility. And normally you will use something like weevly. So weevly is encrypt shell. You will use this kind of thing to evade those antiviruses. Weevly is very hard to detect you. You'll get people. It's very hard to reflect. The only possibility is you're not trying, trying to check the logs. What happened when happened? Why do we have this file? Should we have this file here? I mean, I know that, okay, there are 20 files tomorrow. If there are 21 files, why is one file more? Did we created it? Or what, why is that? Right? So all those things, now you can see the owner of this file is a root. So possibly we can not edit it, but this folder, the owner is www data so we can edit it. So those kinds of things you have to remember. So that's how basically you can hack it. I mean, again, you can always run the commands from here, right? So they can always run the commands and upload whatever you want to upload. So that's one of the, one of the things, if you're not getting a connection back, these kinds of things are what you have to use. One more quick thing. I mean, if this was a real, real hacking scenario, if I was not a pen tester and I don't care about your security one of the creative ways to do it was I can one of the curative ways is I can hack the beta machine using this machine. I mean, I, I'm not, I'm not running commands here. Right? I can run whatever, come on. I want, I will hack beta machine, this machine, and I will do it myself. So media machine pivots through BETA to me, okay. Through Beta media machine pivot to the DMZ 1,000 rate. So now I am pivoting through beta two, one 48 range, this machine pivoting through beta 200 range communication established easily. We can communicate. Now I can upload a shell and then I can have full access to that machine as well. So one of those ways, if it was a real hacking scenario, I won't care about your security. I will just break it in that making sense. Yep, yep. Using this machine, I can have beta and then get access to. Right. that's basically it, I mean, that's the quick quick thing. And honestly, I have uploaded this C99 on this machine. First time in my life. I have just, this, this lecture is quite new now. Also I also got to know that, yeah, there is a metasploit module for this one and I, and I did'nt know that earlier. So maybe I will play with the metasploit module and I will ask them to, you know, help and get a reverse connection somehow if we can get that direct;ly from metasploit, we will try that. But I, but I guess it's quite clear, right? If you want, if you don't have the complete resources, you can always, always, always do this kind of stuff and you can always, you know, do this kind of thing. Right? Right. I start with the web application pen testing. Now, you know, you guys need experience in web apps the most, because if you guys go to a job right now, as a fresher, no company will give you a job. If you don't know how to do webapp test. And that's kind of the, that is the primary skillset they will be looking for. They may not care about network, pen testing that much, you know, those services ports. They may not care about that as the priority, they will keep the WebApps okay. That's the that's going to be. Maybe they will ask you to do an interview or a challenge. And that challenge, our interview will contain webapps about that's kind of sure. Okay. When you talk about web apps, there is a very good guide or ask testing guide. And the latest version is four 5th is in development. But fourth is the latest version. Just open the first name or ask testing guide, at least for now, this PDF is very small. Okay. It's 224 pages. This is something I need you to read again. There's something I want you to read. They have perfect examples here again. They will give you every kind of example. It's the testing guide its going to teach you proabably everything in web apps or app, basically application. They can be, they can be web apps. They can be software. It's going to teach you every single thing you need to learn. And once you do it, you will have so much confidence. Then you can get going any interview on crack. It's going to be very easy for you. Oh. As testing guide definitely definitely recommended material after our class. You know, maybe even after we finished the whole program, then you can get your hands dirty on this one. Very, very important. You need to do it. Okay. Second thing, if you searched for a web hacking masterclass it's one of my courses on YouTube. It's roughly, it's roughly two and a half two and a half hour. Okay. you can definitely, you know, you should go ahead and do this one. It has, it's contains a lot of tests. It's contains a lot of basics. First of all, you, you should be doing this one and you should be doing this one within this week. Okay. That's going to be one of your challenges. You have to do it. That's not like after the program, but it's like, you have to do it completely as it is just like I'm doing it. It's not going to take a lot of time. Like maybe one, one full day. It will take so divide, whatever, you know, however, you can divide it. There are different different tests and this one that you have to learn, okay. So web hacking masterclass for this week or testing guide after you finish the program, just make a note of that. There are automated scanners every day. There is a lot of stuff in this one and that's something I need you to do. With that, I think with that that was probably what I wanted to share. After that let's come on the topic. I will still explain you some of the concepts of web hacking and today's class or possibly in the next slide as well. But again, that is the, that is the main focus area. Web hacking master class on YouTube and web testing guide. That is what you are supposed to do. Now. Let's, let's start. What I can explain you is with my own application. So my team has created a vulnerable application for you people, and you can go on my website here and it will show you SDBA. So you can open that SDBA that this is the SDBA download. You can enter your email here. Okay. It's close of content. So don't use it for the commercial purposes this is for personal, personal use. Once you add your email, it will start the download. There you go. Download now. And the release one is the latest one. Okay. I, once you download that, you need one more software, which is called Zemp, but when you can use any web server Zemp is the easiest one. So for windows am telling for Mac, it can be a different software. Zemp is cross platform, by the way, it will work. So you can just say Zemp, open it, go to, okay, let me close it. Go to more downloads. Don't download the latest version and go to more downloads here and download 7.2. So PHP version 7.2 is the one which I recommend, of course you can, you can download any of these. They should work. But 7.2 is the tested version. So it is something which we have been using. So this first version 7.2, again, Linux has one. Mac has one. So it is the Mac. Just use whatever downloaded and installed it as in next, next, next setup. So I know you can install it yourself. I'm not sure that, you know, open it next, next, next, and install. That's what it is now coming to the point, the SDBA, which you download it. You have to open that, so, okay. Let's see. Downloads, downloads, SDBA release. Here you go. This is our SDBA. You can copy this and go to your C drive, open zemp, go to SD docs and then paste it here. So basically by doing that, you uploaded your web server files to sorry, you uploaded your website files to the web server. This is a web server, now your machine is a web server. You uploaded all the files in that. Once you upload it, it's time to start the web server. So you have to start these services. Okay? You have to open the ports. You have to open the port 80 and my SQL port. I don't know what that is. Three, three, eight, six. I think so to do that the Zemp control, you can run it at admin. Once you run it as admin, you can see their can be crosses here, just click on them. And it will either ask you to uninstall or install. Okay? If there is a cross here it will install this. Otherwise it will become a tick here, a green tick. It is a red cross. You have to click on that cross. Once it is done, you can just start the service so I can stop it like that. And I can start it like, okay, that's how it works. So this is the port of my SQL, and this is the port of Apache. Okay. Apache is running on 80 and four, four, three 84, HTTP version, four 43 for HTTPS version. And my SQL is running on this port. So once you do it, you are good to go. And you know, you, you upload the files, right? You uploaded the files you have start the server services, you're running website right now. The problem is database. You don't a database for website where it will store the information where it will come, you know, saved information to have that open your browser and go to local host LOCAL H O S T. Okay. Local host slash PHP. My admin. Yeah, of course, guys, the video is recorded, right? So once you, once you start doing it, you can of course follow it from the video, this open the video. And again, don't be confused right now, right now. Just try to understand the concept. Download Zemp installs zemp open a server, you know, make a server open the port 84, four, three my sql by control panel. You just start, copy the files of the website in the zemp and then create a database, link the database to the website. Boom. You did it. That's what you have to do right now. This is the panel where you can create a database. So new and new, you can give any name. I can just say SDBA okay. And let's click on. Create database has been created now let's again, go to the zemp and we will link this database to our application. So sd docs, SDBA. Yeah, it includes. And then config. Okay. That's the file that has the configurations. And let me edit it. So this is the file here. This line configuration equals my SQL connect here. Local host. Yeah. Let the local server, root is the username. This zemp is running on root user password is blank. Okay. That's fine. It is blank because by default it is blank in Zemp. Then database name is SDBA. Now, if you give another name here, you can keep any name. Doesn't matter. You just have to change that name in this case over here. But since we are using SDBA in the file, as well as the database name is also SDBA, we don't need to change anything. That's how it works. It should be fine. So I will be showing you how that works. That is how connection works You don't have to do anything if the name is same, because in the file, I have mentioned SDBA by default. Now, once you're done, you just have to go to local host slash SDBA slash set up dot PHp. I, we have created an automatic script. You don't have to do anything, press enter. It will set up the website for you. Here you go. The website is ready and you can test this. Now it's like a review kind of website. The model that has, you know, people can come here, leave their reviews and it will get stored here. So the first review has been added by me sagar bansal. So, and I just written, the review as this is an awesome application and the country was India. That's basically how it normally works. Okay. There is a login panel here. People can go here and login. And I mean, by, by default, the username is sagar. Password is bansal So you log in there, okay. You log in and you can see it says welcome back. And then you can log out. Let's move out. Does it matters? That, that is how you do it, then contact pages there. Okay. You can go to the contact page and you can submit a form, upload a file. That's that's what of contact pages in the home. Again, there is the review tab. You can, you can change this thing. To 100, you know, there are entries, there is a search form here. You can just say to, and when you press nothing is found you plus one, one entry is found. And so you can, you can search things here. Next previous buttons and rater us rate us form. You can rate us, okay, you can, you can leave a review there. So again, this as a test review and maybe country, let's say India submit, and you can see it. That's another entry. And that's how it's going to work again. If I had to delete this entry, I can just say, delete. If I want to delete all the entries, I can click on this reset button. It will delete all the entries. No records were found. Okay. That's how it works. Now, if I, if I add a new one, submit, you can see from entry when it starts adding again, again, that's a, that's how it works. That's how the application works. Any doubts in how application is working, the website is working and any doubts on that? Yeah. Yeah. I mean, I don't expect you to understand the steps right now, but I think the concept needs to be clear that what I have done is I have downloaded a server, installed the server. Now my windows is running a web server that is running a website right now. And I am hosting a website. So website files were downloaded from my website, right? The SDBA is, is a website. And this website is working in this way, right? Right. So when you are testing your website. There are a lot of things you can do. There is a very common list or OWASP sm them or OWASP, happen. These are top 10 vulnerabilities. You can test in a website. Of course, there are more tests. All of them are given in the testing guide, which I was showing you all this testing guide. But these are our top 10 tests from, I mean, I have explained most of these tests in web hacking masterclass, the first one, the most easiest one is the login login panel. If you click on login, you will see, you want to use your name field, and you've got a password. You enter anything randomly, let's say bansal bansal, which is not a valid user. What happened to click on login? Nothing happened, right? You, you don't log on. Right? We can see we don't log. Now. Maybe you brute force it maybe, or maybe you can test for SQL injection here. SQL injection is talking to the database. If I try to add this colon here, if I tried to log in it doesn't do anything. If I try to add a double. Colon here. If I try to log in it still doesn't do anything. This is the first test you can do, you know, just add a colon. Okay. Sorry. I was saying colon add they add a single inverted, a single inverted comma just add them and they use the name and password and just test them. Okay. That's something you can do. So if I just randomly add something like this, if I try to log in, nothing is happening because we have disabled, the error reporting. You're not getting errors in reality, it is producing some errors, but you cannot see that because in a secure environment, you will possibly never see that. But let me, let me tell you what's going behind the scenes. Okay? when you are doing anything in the, in the form, what is going behind the scenes? Let me open the files. If I go to SD docs. Okay. Login page, right? This is the login page. Let's open it right now. Here. How this form is working. Just bear, bear with me with this single line here. This is the line I want you to see, okay. SQL query with the descending to be database. So website is sending something to the database. What it is sending? Select start. Start means everything from login here. Log in as the table name. Okay. There is a database. There's a table called login. So select everything from the logging table where the condition username equals something and password equals again, something. Okay, this is something. And then N D quit. That's how it is working. Making sense. Now how the, how the website is performing the test. It is just checking that, see select everything from the login table. Their username is something. Password is something. If there is a perfect match, if, if there is a match, right, if you're able to see a match, give me the result, whatever the result is, let's show me the result. Is it making sense to you? Yes. All right. And if we go to the database, actually, you know, if we really go to the database so we can just say Zemp, my SQL. Okay. Then I'm just trying to see where is my SQL installed. Okay. And do we have my SQL here? Yup. We have my SQL over here. Okay, cool. Let me open, commad prompt . If I just say my SQL. Right? So to explain the concept, if I log into my SQL as a, as authenticated user which can be done by my SQL dash dash, you, which is user user is root dash P, which is password, press enter. Password is blank. Just press enter again. Okay. I was expecting it will clear the screen possibly. It doesn't work like that. Okay. Anyways if we go there now, if we, if we see show databases, okay. Show data bases, you can see, these are all the databases in my, my SQL server. Okay. Right now I'm just trying to show you as a server administrator. I'm the company right now. There is a database called SDBA. If we go to that database. So use SDBA okay. If I want to go in that database, I'm using this database now showtables. If we see the tables, we have two tables, login and reviews. If we talk about login table. So select start from login. If I press enter, this is the whole table in this whole table. There is only one entry, which is user ID is one. User name is sagar password is bansal, but there is only one Id missing. It let's suppose there are multiple users. Doesn't really matters. It will give you the whole table. But when website is testing one single user, it is, it is testing the command. So let's start from login where user name equals something and password equals something. Okay. If username equals sagar, sorry. Uyep. Okay. If username equals sagar and password equals Bansal, it gives me this. Yeah. If I entered a wrong result here, if password qual bansal123, it does not give me anything. Can you see one row in a sec and empty row? If my username and password is correct, it will give me the, it will, it will return me the entry. It will give me the row. If my username and password is wrong, it will not give me anything. Is this making sense now? So that is how the database is working in the backend. Okay? The website is working in that way. So if the website is sending this query, select start from login, where username equals something and password equals something. Now this something is given by the user website is using the query, but this some thing is what we control. So this sagar and bansal, this is what we control by the website form, whatever you entered on this, it takes that input. It puts that in this query and it runs that query. If the query gives you a row here, if it is correct, then it logs you in. If it does not correct, then it doesn't log you in. That is how login and logout works on most of the websites. Is it making sense? Right? Because you can control this, this thing, right? This sagar, and this Bansal, if you can control the input, can you not try to do something malicious here? Can you try to add a, add a single quote here? I mean, if you are the one who is controlling everything between these two quotes, can you say sagar and then a single quote? You can. So if you do this, what suddenly happens, this single quote, which was supposed to be closed at this single quote. Now it is closing here, which you just added. Is it making sense for the website? Username is ending over here and suddenly you are in the control. You, you can type anything here or one equals one. You can type anything here, okay? And maybe space as well. You can type anything here because you are controlling it. So you basically type with this, this sentence, you give this as input, but for the website, the username was supposed to be this one. But now it is this one because of the quote, right? Because of, because this quote and this quote was supposed to be, whatever you entered in between was supposed to be a value. But since you had in this quote here, this, this user name becomes this much. And you type this extra material, all right. This is the extra material, which was not supposed to be here. I, as it's making sense, it was supposed to be this much, whatever you went through, supposed to be in this, and then further, it was supposed to be, and password equals. But now, because you closed the quote and you added some extra material, this, this, this part is extra. This was not supposed to be, but you did it. Is this making any sense? Yeah. Actually, if you can, you can go over. Yeah. To me, it's not making sense, actually. Okay. So if you can go over this again, that will be great. Right? Give me one second. Okay. Okay. So, okay. So this is the query. This is the database query, which the website is using to check if a user name and password is correct or not. Okay? This is what this website is sending this, this query to the database. It is asking select star from Login. Username equals something and password equals something. Now this something is what you have entered as username and password. You enter something here, user name, ABC password one, two, three. It will send that here. Select star from something from login and username equals ABC password. Equal one, two, three. Is it making sense you now? Yes. Right? So this is how website is checking. That is a, is a user actually correct or not. If there is the entry of that user in the database or not. So if I entered a wrong username, you can see here. If I entered a wrong password or username, doesn't matter the wrong password. Can you see what it returns? Data will says empty set. There is nothing like that. There is no user with sagar and password bansal123. There is no user in my database. Okay. That's what it is saying. Right? Right. If there is a valid user, if you enter the right password and username, right? This is the right one. What it returns. It returns the row. It says one row in this set, it says that yes, in my database, there's one user like that making sense now, because we are giving this username and password. What if we control it? You know, it is supposed to be username equals something, a password equals something. But what if we control it? We control it by, you know, let's say we control it by saying select star from Login. Where username equal sagar and password equals this. Right. And then maybe we can just say, we can just say, okay, we can just say here or one equals one. Okay. What does it do? It is basically saying select star from login where username equals sagar and password equals bansal code one equal one. Just check. Either, either check if sagar and password exists or if one is equal to one, is this true? One equal one? Is this true? Is this a universal truth? Why it cause one? Yeah. That's a universal truth. Right? So we are just telling the database that, Hey, can you check if one is equal to one, if it is then let me in, if one is equal to one, then just give me access. Let me log in. That's what we are trying to get it. But just saying check. If the username it called sagar, check his password is bansal one, two, three. If that's correct, that's fine. If that's wrong, then you know, just the check. This thing one is you got one, one, is it called one? Then just let me log in. Okay. That's what we're trying to say to the website. Right? The problem here is you see, when something in any single quote, you see the single two single quotes here. When you give something in these quotes, this is taken as an input text. Okay? Let's take another text. Now here. Username equals sagar and password equals Bansal one, two, three, or one equals one that is taken as a password. Not as a command. You need to make it as a command instead of a password to make a command. We need to close this bracket. The single quote. This is closing here. We need to close it over here. So that bansal is, this. This password is closed here, like this one. And then we get our command running there, or one equals one. That's that's what we want. That's why we put the quotation Mark here. Okay. Now you can see select star from login where user equals sagar other password equals bansal one, two, three, or one equals one. Is this making sense now? Yes. It's making sense. But my question is, so do we maintain our quote at the end? Yes. That's a very good question. Because here there is an additional quote, which doesn't make sense. I mean, where is it opening then? Right? Right. This is opening and closing what to do. There are multiple options. This, this, this semicolon when you see the semi colon, this is end of the command. This is used at the end of the command. So maybe, maybe we can just add a semi colon here. This will basically end the command over here. And this will be ignored. This will be the first command. So this becomes our first command. And then this becomes our second command. And also to ignore the second command completely. We add a hash sign. Now this has sign comments. This, this is a comment, not a command. This becomes a comment, which is, you know, just completely ignore this. That is what it is now. So we end the command here, be comment it out. You know, this is our first command and whatever is after this, ignore that. That's what we are telling to the database. Making sense now. So basically if you, if you try to see, this is what we have entered in the form, right? From here to here, this is what we enter in this form here in this password. We give this thing, right? If you give this thing, the code will pick up this, but because you have added a single quote here, it will end this here and this will be taken as a new command. This will be checked and then further, this will end the command here and it will comment everything making sense. So in this case, will it work? Who knows the second command? Sorry, the second command. No, it will. It will not execute the second command because we have commented out it just, the hash is coming. Ignore everything. After the comment we have commented it. It will not check it. It will not even run. This will work because it is ending over here. Not here. Fine. So what happens if we tried this? I don't know if it will work in the first place, but this is what we have to give as input. So let's copy. And I will give this as an input. Okay. Sorry. It was supposed to be in the password username. I think I can give anything. Doesn't tell any matters. I'll just say bansal. So let's try to say login and you can say, I successfully logged in. Can you see there? Right. I successfully logged in no problem at all. And that's, that's how you bypass a whole login page by SQL injection. And basically we were talking to the database. You are controlling the database. That's what we were doing now. Interesting question. Can you do it? You know, let's, let's, let's not use one. First of all, let's use something else. And also, can you do it with the username field instead of the password field? Who can do that with the username? Let's let's let's give you guys a try. So this is the field, which you are controlling. You enter anything here. Let's us sagar. Now, how will you control this field? How will you ignore this part and, and establish your command here. Let's control this field and try to bypass it. Okay. What shall I type that? Me? So the semicolon right by doing that, we closed this here and we got the control here with ourselves now. Yeah. But don't you think you need to give it a condition like select star from Login where username equals sagar or one to one, right, right. Or one equal to one. Okay. And then don't you think this part is a problem? So you have to close it. No, but I have to close. Okay. But still this is a second command. This is the first command now, but this is the second command. What to do with it? Put a hash that's the comment right now, this whole thing becomes a comment. This is ignored. So if you take this part, okay. If you take this part from here to here, right? If you take, this part, it will press here and password doesn't really matter. As it is commented out, I can press anything there. If I tried to login, you can see you guys successfully logged inr. Right? Right. Now you may be thinking then, but saga, I can use the same thing and I can log into any account then. Right? It doesn't, it doesn't work like that. Where does the vulnerability, where is the weakness? Did you guys manage to find the weakness? Hmm. Do you think there's a weakness in the code is because it's a easy to manipulate the sql command. The, the database command itself, this whole command itself is a weakness. Basically the website, the secure website will never allow you to give the input and control the database. Okay? What they should be doing is they should be checking. They should be checking for special correctors. They should be checking that a user is not adding colon. As your user is not adding the the pound sign. The hashSign. The username is not adding a single quote. They should be checking for this. Character. They should be blocking them. Right? That's the first way that is called blacklisting. You blacklist these characters or second way. They should be white listing some directory. They should say that, listen, you can only use numbers. You can only use alphabets. And maybe you can use hash at the rate. You know, the exclamation at the red dollar, you can use some specific symbols. You cannot use these symbols, right? I mean, you just whitelist and don't blacklist simply by white list. Just say that, see, this is what you can use. Don't say, this is what you cannot use. That says, this is what you can use. Because sometimes when we say, when we do blacklisting, when we say that, okay, this, this, this, you cannot use this, this, this, the problem is we sometimes forget somethings, okay? We forget that, okay, this can be done in that way. Also it can be done that way. Also, they sometimes forget to blacklist everything. That's the reason, the best way is white list. White list, the characters, which are secure these characters, this, the single quote, this colon, these, this hash sign, these are not secure. And that is one of the reasons when you are making a password on some websites, you will find that they will not allow you to use these as usernames and passwords. Making sense. Yeah. How do you do that? Tell me you can just you don't have to do it. The developer can basically add a line of code where they will check. If user name contains exclamation, Mark, it will block it. It will just say that your username cannot have exclamation Mark. Okay. That is what a website developer will do. It's not our job, but our job is to understand the problem and tell him that, Hey, listen, this is the problem in this code. I can send anything to the database. I can send whatever I want to be database. I can control the whole database. That's the whole problem. Okay? We have to stop that. We have to stop the problem we have to solve the problem. And the problem is coming because you are allowing this kind of characters. If you block these kinds of characters, or if you whitelist only selected selected characters like this one, this one, this one numbers. If you white list only specific things, it usually cannot control the database. Right? That is what you have to tell. You have to come up with the solution, not the implementation, making sense now. Yeah. Right now, let me give you a very quick challenge kind of thing. Let us say, instead of single quote, let's say the code, the code of the website contains this. Okay. It is very, very possible. Sometimes the code of the website contains this kind of thing. You can see it is working. This code's working very fine. And this is very normal. Okay. Let's say this is the code. How will you bypass it? We were not be different from I see right now, if you add a single quote, any, we have, let's say you add a single quote here. Is it helping? Is it helping in any, any sense? Is it doing anything essentially? Can you see? I mean, this court is double. This is double. So whatever you enter here is taken as your password in the text, it is taken as text. What you want to do is you want to close this quote so that you are in the control. So instead of adding a single quote, you have to add a doube quote in this time, and then you can write whatever you want, making sense. Now you need to add the same thing with the website is using. And there is no option to find that it's you have to guess it. If single is not working, single quote is not working. Maybe you will use double quotes. Okay. That makes sense. Right? So basically that was the whole point. Sometimes developers use double quotes and those cases always test for double quotes as well. Okay. Now what I was trying to do earlier, you know, when I was trying to say that, always tried to use single quotes and double quotes and try to break it. So for example, this is, this is what the code is. If I was, if I tried to add a single quote here, suddenly this quote becomes inconsistent. There is no reason to have three quotes. It will throw an error. Normally it will throw an error, in our case, it is not throwing an error. If I just give a single quote here and single quote here, it is not putting another because we have disabled that. Okay. We have disabled the error reporting and as well, it's not throwing an error, but normally on some websites, I will throw an error when you add a single quote and, and something like that, if their website is not secure they are not white listing or blacklisting. You had a single quote, it will trow an error because there is no sense of having three quote in the quote. There is no sense of adding that and it will throw error here. That's basically the concept of bypassing login panels or bypassing security with SQL injection. Again, you can use the same thing on the homepage here. Can you see, there's a, let's see if I tried to open this here. So can you see this URL, this, your listing ID equals one. What else? I can control this ids, but you know, it's not my log in panels. It's basically it is about controlling the website, what it is doing in the backend. Maybe it just check in select start from some table where our ID equals one. There our ID posts two what happens if I, if I, if I try to save it our Id equals zero. Okay. You see we, we don't get, okay. We don't get any, any response. Right? We don't get anything. What happens if I say, sorry, what happens if I say our ID equals Singapore? Okay. You can see we've got an error, could not execute. Select star from reviews where ID equals colon see. I told you, this kind of command is what it is using in the backend. The website is using this command select star from reviews. They will get the table name, their ID equals something. Now what happens if you start controlling this, right? What happens if you control this? Okay. Can you control this? I guess yeah, you can try. You can try. So there are multiple commands you can use. For example, I can say union, U N I ION, right? I can say union, let me show it in the, in the in this one first in command prompt, it will be easy for you to understand, and then we can take it to the real level. Okay. For example, if I do select, start from review where ID equals one. Okay. Select unrecognized command as the, Oh, okay. We are not in my sql. I think I logged out. Yeah. There you go now if I say so let's start from reviews. Database selected Now, if I say so let's star from reviews. Can see. There is, there is the full table. Now here. Command is using select star from reviews, where ID equals one. That is what the website is using. Where ID equals one. This is what the website is using. But what if I can modify this? I can say maybe union. U N I O N union one, two, three, four. Okay. One, two, three, four. It doesn't work. No. Okay. I wasn't expecting that. Okay. Okay. Select one, two, three, four. Yep. So see what union does it combines? The output of two commands here? I have run two commands here. So let's start from reviews. Where ID equals one. That is the command, which website is running. I just added a union select one, two, three, four. Now select one, two, three, four is another command. If we run it individually, select one, two, three, four. If you run it directly, you will see the output is this table, right? This is the table. Is this making sense? This is the table, which, which comes after running selects one, two, three, four. But if you just do union, it means combined both of them. And this is the combined table. Is this making sense? This was the default table. Select start from review, where ID equals one. This was the table, which comes to at one, two, three, four. We combined both of them. So star start from reviews, where ID equals one union selects 1,2,3,4. We get a combined table. Right? What if I run another command? Select one, two, three, four, instead of three. If I add something like @@ version, @@ version gives you the version number you can see in the third column, instead of three, we are getting the version number, right? If I use the same command here, if I take this union, this line, if I take this, if I go on the website, okay. If, if, if I add that here, you can see select whatever. So our ID equals one. This is what the website will put union select one, two, three, instead of three, I'm giving @@ version and then forward and then colon And if I press enter here, you can see, we suddenly get one more entry, which says one is ignored. I think one is not showing here. But if you, if you try to see on, on this thing, I don't find one, but I see two here. I see four here. And in third column, you can clearly see the version number. Is this making sense? Right? So I'm calling the database. Yup, yup, yup. Using the word union. You combine the, they have a new field, a new command, basically a new command. So whatever you enter, the check said true. I mean I can enter. Sorry, what true, what, What I'm saying is that using the union command, you're able to like manipulate the data or add something to it. The whole problem is the union is not adding commands. Union is not adding commands. Whole problem is you cannot command. There is another, another operator for that. We call these operators, okay. Union operator. It does not adding the command. It is combining the output. Of new command ? There's not running the two commands. It is adding the, it is combining the output of such command. The first command was this output of second command was this. So it just combined the output and make a new table. But that is what union does. Okay. It's not running the command, it is combing the command output. Okay. You can use some other operator which will simply run, which will run the second command. You can use some other operator, but you don't have to learn this language. That's the whole point. That is what I'm trying to stress Now, you don't have to learn what is union. You don't have to learn the whole language itself. You really don't need to learn this. You can use automated tools. There are tools to do it. You don't have to run these commands. You don't need that. What you just need is you need to understand how the concept works. And if there is a possibility to manipulate something, if you think that, okay, this is a website, right? This is a website in the browser, in the URL. I see that there is an ID parameter. This is a parameter, which is containing a value. One. If you see this kind of thing or possibly this command is going to the database. There is some command being run in the background. There is something going on in the background. Maybe I can modify it. I can manipulate the database. And then you just use a tool which can do it for you. You don't have to try any tests. You just have to use a tool. That tool there are multiples. My favorite one is SQL map. Okay. Let's open the kali linux and run it. So, so what you're saying is that you didn't have to learn , you don't have to know SQL. Yes. The tool can automatically run SQL commands for you. It will ask previous questions, the last few questions in English language, you answered them in. Yes or no. It will make commands and it will run them for you. But why I showed it to explain you the concept in the deeper level. Now, you know what is going on behind the scenes, how tool is working, who is also going to try these commands, this random commands. Is it making sense now? Huh. Yeah. Yeah. Let's go in kali linux. It will do everything for us automatically. We don't have to do anything. Yep. Very well. It's quite slow today. Let's log in. Okay. let's open Firefox. Alright. Now in Firefox, let us a assume. This is a real website. So there will be IP address or the domain name, right? So I will check my IP. So my IP address is one nine two one six eight zero.one, one two. If we go there and this works, my website is in the folder of SDBA. Okay. You can see this is my website. Is it making sense to you guys? What I'm doing right now? I'm just, I'm just opening this website in my kali Linux. Right? Guys, I can just take this URL, right? I can just take this URL and I can open my terminal and I can use the tool. Okay. The tool name is SQL map. So SQL map that's URL. And you just give it the URL of the, of the page where you want to attack. I give this URL and I press enter and it will start attacking it automatically. It will start asking you questions that you have not declared. Cookie server wants to set it own. Do you want to use those or do you want to use your own? Now we have no idea what the cookie is. Really? We have no idea. Let's just go with, yes. This go with their own. Okay. That's why I just said yes. Here you can see. Am just saying Backend database is my SQL. Do you want to skip the payloads specific to other databases? Now it is detecting that the, my SQL database seems to the database seems to be my SQL. Okay. Which is correct. We are using my SQL list. If you go ahead and check your Zemp panel, we started my SQL service. Some in some cases, some companies will use Oracle or some companies will use postsql or some companies will use no SQL. There are multiple versions of databases. In those cases, you can use other tests. In this case, I will skip the test for other databases because we know it is my sql Yes. Here four remaining tests. Do you want to include all the tests for my sql? Yes. Include all the test. It is now testing. Now you can see these things where having order by the it is using different, different codes. It is using different, different things. Okay? Yeah. This line is interesting. Get parameter. Our ID is my SQL, this, this, this error based where this close injectable, it found a payload, which is working. It found a payload. Our ID appears to be injectable. Okay. It has found payloads. Yeah. Get our ID. Parameter is vulnerable. There is a vulnerability. This, this our ID. If you see in the browser, you can clearly see this our ID here. This our ID is vulnerable, right? That is what we were exploiting ID. This is one vulnerable Do you want to keep testing others. No. Why will we keep testing others? If we have vulnerability? No. So no. All right. It just finishes. It suddenly closes what happened. It closed because it found some attacks. Okay. There are two. No, there are multiple options. You can use this one. Okay. Now what you can use and boolean ways type where, or having closed, you can use where you can use having something like that. And this will be your, this will be your attack. Parameter ID equals one and select something from something count concat blah, blah, blah. You don't have to learn this SQL. This is the SQL query. It is going to use. You can copy the same query. You can go to your browser. You can paste the same query. It will give you some information. Okay. Is this making sense to now it's building the query for you. You don't have to make the query yourself basically made that query for us. Now, what we just need to do is, I mean, it will, it will automatically make queries. This is another query which we can use. And so this is automatically making them for us, but we don't even need to. We don't even need to, you know a care what it is making, what we need to do is we need to extract that information. I can just say that, that DVB, that that's DBS. If I present it will give me the databases and I can just specify there. It will give me all the databases on that website. It has run some query. This was the query it run. Okay. This was the query it has used. And it has given me the databases. Now I can use a database SDBA. Maybe I can use that. I can just say dash So small dash DBS for database finding that's capital D to use a database I'm using database SDBA And I want to find tables that as tables, this tool will automatically make some queries and it will automatically bring tables. This was the query it has used. These are the tables we have got. You can copy this and paste it in the browser. You will get the same exact, hutput, okay. This is what it has done for us automatically. You can see there are two tables. We can select the table of login. So I will just say capital T like level, table of login. Okay. And just select T there. And now I can just say that that's columns. It will now make another query for us. It will give us the columns. You can see, we have three columns ID, username, and password. Now we can dump it, right? This was the final query we can use. We can dump this. We can dump it by saying column names. So that's column. I want username. So user name and I want a password. So password, I want username and password. And then show me what's there in those entries. Give me the output. Now it is going to dump that here. You can see dump. Username is sagar password is bansal. Can you see Danielle? How you dump things? This is the final query, which it has used in the browser. This is what it does. Use union. Okay. Ready? You were using union. Yes. It has used union. The union, all select something here. And we don't even understand what it is, but it has done it itself. We have the output. That's what it is. Is it making sense? This is making sense. Everyone? Yes. It's making sense. Right? So let's have the challenge, u,ur task. This is your query. Let's say DBS is SDBA. Okay. So, okay. Sorry. Give me one second. Give me one second guys. What's the problem. Oh, okay. I got the problem. Sorry. Alright. So these are the two tables, right? I just showed you how to extract username and password. Now a few people show me how to see the reviews in this website. How to see the reviews. What are there in the reviews? How busy are, can you guys show me? I'm just trying but.WE have to go over once again to use this, the two, two select what reviews. Okay. Then you have to select a database. It is dashed capital D. Then you have to select a table. It is T. When you have to select the coloumn it is C. Okay. The first letter of capital and one single dash. When you want to extract something, it is dash dash. And the thing that you want to extract tables, dash dash columns, dash dash DBS. Is it making sense now? Can you, can you tell me what I have to type here? Dash dash tables and then what dash review review. Yep. So if I type review, review or reviews, reviews. Okay. Sorry. Yeah. Reviews. Reviews. You can. Okay. What happened? Yeah. Sorry. Don't you. Think we already have the tables. These are the tables. So don't you think we have to find columns. If we have to find columns, we have to select this and how to select it. Control, sorry. Capital one,see P. There to select it, right? They will. This is a table, which we are selecting the table. Now in this. We have to find columns. So dash dash columns. So database is SDBA tables is reviews. Now give me the columns. That is what you see by dash dash columns. You see, now this is how we get columns. These are the columns. Now tell me how to select the column of a review and country. How do I select that review and country? How to select that column? So you have to do dash SDBA dash G reviews, dash dash. Then use dash dash for country. Okay. Are you using that? That's reviews here. It is simply the name, right? So simply just type country here. Right? Coma. I also need review. So review after dump press enter, and you can see, there is only one entry, country is, India review. Is this a by the way? Yeah. I mean, that is how you do it. There is one more quick option, which you should know that is OS shell. If you use a option called OS Shell, it doesn't matter. Just remove everything. Just type OS Shell dash dash dash shell. If this command works, it does, it does everything you need. You can just, you know, you can just press enter just press enter here, press enter there. If this command works for you, it will be great. Here. You can see OS Shell is working. You got a shell. What is the os shell? It is basically hacking the system without running any command. It's just, just handle it. Os shell is complete shell. You can type any command. You can control that machine. Now, if I say If config or IP configured, it's a windows. If I say ip config , you can see, I am controlling that machine. What is this IP? This is machines, IP windows, machines. I can just say dir you can see these are all the files. Okay. So Zemp folder as SDBA , SDBA as Sagar folder index, I can see these files. I'm controlling that server. Now I can make a new folder. Then. Okay. Again, there is no folder like can here. Can you see? No, I can test that and now I can do it again. You can see there is a new folder. Ken we just created that? Right. If I just go ahead and show, you will see seen my C drive C in C. Uokay. So if you see it in the SP docs SD docs, You will see a new folder here, which says, ken, can you see Ken? Right. Okay. Yeah. Ken, th that is how we basically, we have, they're controlling that machine. Now we're controlling my windows 10 machine because of this SQL injection vulnerability. We got a os shell, well, of course you cannot get os shell by manually type in the commands, impossible. But with SQL map, it has the ability to give you the shell. Is this making sense? So by using SQL vulnerability, you just got it, complete access to this system, right? So now what I want to show you today is kind of, you know, just like you have auxiliaries and metasploit today, we will be talking about things formatting, you know, so we have apps have web apps are not only limited to the source code or, or the HTML files, which we see. There are so many other things like directly, you know, that attribute first thing is, is one of the important things to understand, because normally it will happen. You know, there will be a company, they have a website hacker in the house.com. Now for employees, they have a secret location. [inaudible] Dot com slash secret. You know, those kinds of things they normally happen. They, they normally keep you know, nonpublic data there. Sometimes you will find the retreats will have uploads, upload, listing open. So [inaudible] dot com slash uploads. Now you've got everything in that thing. So they're actually listing is, is kind of a important thing to understand. And you know, it's, it's one of the best things. If you can, if you can find you will get a lot of data there. So if we become Suunto S no, actually let's open a bar, let's open their best. Their Buster is the software you can use. That's the recommended one. There are others as well. I will show you others. You can press their Bester and here you go. Right? So I was saying that this is the dermis true console. It requires an IP address with a port now, or, or the URL with the port, same thing. So let us try HTTP. Let's say we can dot hacker in the house.com. And we know that the port is 81. Wait, it is running. Okay. Now you can go ahead and increase the number of threats. If you want to go faster, I will not recommend it until required. You know, in, in most of the cases, networks are sensitive, they are firewalls. They will block you. You really don't want that. Not lifts. So this thing matters a lot. You know, you can do a pure brute force in pure brute force. It will go to [inaudible] dot com slash a slash B slash C. So it will go to a, you know, a land. If I even select that, now I can select character lists. I can select minimum and maximum land. It will come up with every single possibility, which is the most effective one, but it will take a lot of time. That's the whole problem. Now it's on you. If you do have that much time or not, of course, in a normal pen test, which is like, you know, one day, two days, three days, you don't have that much time. Okay. As well as in the LPD exam, six hours, you definitely don't have that much time. So you would want to do a list based book. First in that list, you will already have common places like slash login slash admin. Those words you will have in that list, where are those lists? They are already there in the, their Bester folder. You can click on browse. You can go to user. So always go to the slash the slash the boot, and then user uses the folder where you have a lot of stuff share is default where you have shared stuff of all the applications. Now, here, you can find their Buster. So all of these are apps you seek up is there are a lot of apps out there. You can find her booster in this list. That's what I'm trying to do. There you go there, Buster. Okay. You can double wait and you will have bird list. So these are, there were lists. There are alpha alpha user enumeration. So this list contains a lot of users or sorry, Apache user and admiration, these lists, and then a lot of users. Similarly, you will have word lists directory lists, Darlene. What we are looking for direct list three is the latest one. There are some, you know, small and medium lists. Let's go with, let's go with the small one. Okay. Small list let's click on and let's go with the lower case, small list. It really, normally it doesn't matter if you are going with this small, you know, lower case or a Perkins, but some config, you know, some websites, they, they, they be smart. They become smart. And they use uppercase directory in, in some cases, normally it is always lower case, but for a hidden directory, they can go with the uppercase. So maybe you want to use these ones. Maybe it's a big one, medium or small. I would recommend go with small every time. Maybe try medium. If you don't get anything significant, I'm just going to use lowercase small. Okay. Select list. Now here you can be recursive. Recursive means. So for example, you find a part like slash uploads. Now, do you want to further go ahead and find other things in that? So slash uploads slash something, do you want to find that as well? So that is what a recursive means. You can be the person there, brute force files. You can, you know, you can, you can search for files. PHP is what we are researching at the moment. You can, you can just go ahead and add other extensions and it will, it will start with 14 files as well. You can, yep. You can always start with slash so you're if you're starting with slash that means happened in the l.com/it will start from that domain. If you want to start from a specific sub domain, you can, you can put that year, but I just, I just like to put that in the URL itself, you can just put that at the URL here itself, and it will really just keep it default. Let's go ahead and we can start. And here you can see that starting getting a lot of stuff. What to do. You can always click on this preview on your is the one which you should be looking at. And now suddenly you have the information you can see very clearly all of these files out there. So this has even site, there is a file index dot PHP. Then there are folders, icons, WP content, WP includes. These are the folders in that website. Soon after it will come up with many, many such folders response court is something you need to understand. These are response codes here. Now, what are these? This two zero zero means. Okay. Okay. Zero response code means, okay, you go to this URL. It will work. You know, it will work in one shot. That is the Tuesday, the zero response score. Three zero one is redirection. So you go to this page, it will redirect you to somewhere else. You hope to index dot PHP. It will redirect you some better. That is the redirection. Four zero three is forbidden. You cannot open this website. If you try to open icons, it will, it will give you a forbidden error. Again, two zero, zero is okay. Three zero, zero one is redirect four, zero three is four, four, zero four is not fun. And of course, if it is not found, it will not give you in this list, right? There is no point of having it here in this list. If it is not fine, because we're just trying to find the existing stuff. One more thing. There is, there is one more, which is called five zero, zero errors. So, you know, five zero one five zero two five zero three. All of them, our server failure now server is failing. Okay? Server is having problems. The web servers are not able to handle your request. It is crashing. So all of those errors are 500 cities. You see 500, maybe you are going too fast. Maybe are overloading. The system really depends. What is going on. Maybe there is a broken application. The code on the website is broken. Really depends how the, how the server is, you know, facing those problems. But anyhow, if you get $500, there is a problem. Okay. To wonder, okay. Three, zero, one, redirect, fortunately forbidden. Let's go ahead and verify these kind of stuff. If we open Firefox. And if we go to, we talked about how can we be house pro proxy? That's remembered references, proxy removal. There you go. Let's leave that. This is the website. If I tried to go to icons, ICU, NS, you can see, it says, not found I C O N S but here it is saying four zero three which we should be quite, you know forbidden actually four, zero, three is forbidden. It is giving a non founder that I'm not sure why. Maybe the web server is not configurable to give the right error, Mark. It is forbidden. It exists. I mean, it exists. That's why it is in the list, right? There is a reason that is on the list. That's that's the whole point. Maybe you can try one thing. Maybe you can try with the IP address. Okay. Maybe you can track with the IP address instead of the website. So ten.zero dot hundred dot 10. If I'm not wrong, that's the IP. Yeah. And slash iTunes. Yeah. It's still not working, but if it isn't the list, of course it exists. It's maybe it's just forbidden. That's that's the whole point WP content, right? So maybe WP content will work. So WP dash. Yes. You can see it works. I mean, it's not giving any other it's a blank page. So of course there is, there is a blank page on, on that, because it's a folder and there are other folders. So this index dot PHP is the blank page upload folders there. Right? You can go to upload folder slash uploads. You can see, we have low tier. And then further, if you see there are all these folders and this log file. So that's the whole point. You can basically know what is there on the website. And you can, you can try to find the whole structure of the website. If I just go to 2019, I have all these folders, but there Buster has already done that for me. You can see all of them are, are, are already here, right? If I go to this one, zero seven, if I open zero seven, here, you can see now it doesn't give me anything. Why it doesn't give me anything in zero seven. Because if you see the names, you see, these are all JPG files. First of all, we are not brute forcing deputy. We are only group forcing PHP files. That's the reason it is not giving me anything here. Second reason is these names are absolutely uncommon, right? These names, I don't know if these names you will ever get them in, in any list. That's why you're not able to group four steps at the end. What we are doing is we are just reinforcing the directories. That's that's the whole, that's the whole concept we are using right now to get all of these, all of these stuff you see. Now we can even Brooke, first plugins here, right? And you can see the blueprint light. We get to know about that. And we can see there are all these, this is the read me file. Maybe I can just go in this direction, this location, open this, and I'll find something interesting. So that's what I'm trying to explain at the moment, right? That, that is making sense now how to do a brute forcing of directories. Okay. Yeah. It makes sense. Yeah. Right. So I click on this. I mean, there are other structures you can, you know, you can just go here list, view results. It will quickly give you all the locations. They can run their results against the same thing. It will give you some, if there is some error, it may show you over here. Probably you can just ignore that visa related to these are possibly related to the website. Kind of you're getting all them. What I'm trying to show you is if I stop the scan. Okay. Okay. Yeah. Here, you can see, we have pause and have stop. If I stop the scan, you still have these results, so you can follow up. But there is another tool which is very similar to this one. Okay. There's another tool, which is kind of quick, you know, quick, easy, and fast. Okay. Yep. So there is one more tool which can be used, which is their B instead of their Bester, there is their been under visa, graphical a is a, is a command line. So you can say Derby dash edge. That's the shelf. Okay. yeah, you can see it is actually giving users here. It is. There'll be SGDP as RSVPs and host. That's the only thing you need with Turkey. Okay. It's that simple. So Derby STBV And then we taught dot hacker in the house and it will just start automatically and you can see, it will come up with all the directories, all the warnings, whatever it can find. Okay. I'm just going to press control C at the moment. Let's analyze. Okay. It automatically entered here. It's not that efficient as their Buster, but it is always recommended to try at least two pools of the same nature before, you know, before getting to a conclusion. Okay. Always try to have the same nature. This will give you some more information. If I'm not wrong, you can see. So it scanned here and found this at a code was three zero one redirection service status, 4 million. So this was another URL. It is forbidden. Then it found these directories, which are working again four, zero, five. I'm not too sure what this one is. Little five. You can Google, but it is XML, RPC interface that I can tell you, basically, XML, RPC. I think I have already covered it is a communication interface for a lot of apps. So it's that interface. You just need to check these plus, okay. This is three zero two three zero two. I think it is kind of a D direction. Three, zero, two is also a redirection if I'm not wrong. Okay. Internal redirection three, zero, two, again, here, then this plus this plus is 200, which is okay. Yeah. And then do we have a warning? Okay. This directory is, listable no need to scan it. Right. So as soon as you see a warning, of course, WP includes, wow, you guys. You got one, just open it again. There's a warning for WAP admins. Lastly, it says you got another warning here. You got another warning here. So this is, this is something which you should be, which you should be considering when you're finding all of this stuff. WAP content slash upgrade. They should not be listable. Maybe let's, let's try to open that. Let's see what is there? Yup. Here you go upgrade is empty, but yeah, maybe it could be used if it was already a website, making sense. How do you use Derby intercept now? That is how you check for directories. Okay. That's that's one of the extra things you should be checking apart from the web application vulnerabilities. One more is, you know, when you are testing only the web applications that is a limited scope, those web applications, that's one attack surface, but think about it. That web application is running on a web server. Of course, there is a web server. You can also go ahead and test that web server for common things. For that you do have a very cool Nikto . You can do that dash help. It's quite a vast tool. Okay. nikto dash host is what you want to use. Okay? And that should give you a lot of, lot of information. You don't even need to check other things. If you have little dash Nikto2 dash host, if you need to force the SSL, by the way, on a specific port and it is giving error, you know, like if it is giving you an error of SSL certificate, not valid, etc, etc, maybe just use dash dash SSL. That was kind of something important sometimes. But at the end dash host should be, should be fine. That that should give you the, all the information. If we go ahead and search, Nikto dash host and HTTP, beta dot hacker in the house.com. Now it will start scanning this web server for us and we'll come up with a lot of information. Let's see. Okay. It's working. I tell them, I want to show a few things, all of these plus okay. I just, by mistake this all of these plus are possible, you know, information here. One thing is very important to understand. No CGI directory is found. What is the CGI? The CGI is a interface which Apache servers use normally Apache servers. There was a very common vulnerabilities called shell shock shell shock was there. And then there, there are two basic common vulnerabilities in web servers, shell shock and Heartbleed Heartbleed is the SSL vulnerability. Shell shock is a CGI vulnerability It is the vulnerability which can be exploited through CGI is the most easiest one. So if you get CGI directory, you should go ahead and use Metasploit and search for the shell shock scanner. And go ahead and test it. Okay. Shell shock, scanner very important. You should, you should definitely try that. If you find a CGI director, it's definitely going to help you. Here we got some information. Okay. WordPress script reveals installed version. So think about it. If this was not a WordPress right before it was a custom app, maybe this can give you the version of that custom app Then licensed found, licensed, find a license file. Maybe that is important. Maybe that's why it is a listing here. It can be important. A WordPress installation was found on this directory slash right, so it can tell you the apps as well. Maybe it is a Drupal WordPress domain. I can come up with that technology profile. Okay. A cookie doesn't really matter. Upload a directory listing is open. So it is giving you that a WordPress directory listing as a browsable. So it is giving you that again, WordPress login found it can find login pages for you, right? That's pretty much it found it. And this one, sometimes it will come up and it will tell you that, okay, we found this, this, this HTTP metric, can you see this line webserver returned a valid response with the junk recoganize? In this case, this web server is safe because it is giving you a response on every SDBA matter. That's why it's not giving you any information. In some cases you will find some HTTP matters, like,, put or delete or, or even trace. These are the three actually HTTP methods, which can be dangerous. Put means you can upload something on the web server. You can upload something without any credentials possibility. If you can upload, of course you will upload a webserver delete means you can delete something from the web server. So that, that can be dangerous. In some cases, trace means you can possibly trace the whole web server. You can trace the requests. You can trace the directory listings. There is a, there is a chance you can even place the passwords of the Linux user or the web server user. You can, you can go ahead and re reverse it and find the passwords. I don't really think that any, you know, LPT exam is going to be that complex at any stage. But put is a method, which you should be considering put is a common method. A lot of people by mistake enable that, and you should be checking off the port if we try some other website, not sure if it will give any response, but if we try something like that, sorry, it is HTTPS. Now let's see. Also side by side, let me open a few more new tab. Let's possibly open HTTPS. And then something like you know, the real website hacker in the house. Sorry. I forgot the commadn. Nikto nikto dash host. There you go. Now starting. So we have two scanners running a, this one is there and then this one is there. Yup. So I have one question. So how are you using the tools and using HTTP and HTTPS? Is there ever going to be a time where you use FTP to run that command? So FTP can be used, but you know, the problem is this tool is a web server audit tool. Okay. It's not a file server audit tools. So FTP for FTP, you need to use any, any other tool. And I'm going to show you how to, you know, n map has scripts for that. Do you know how to use n app scripting engine? Yes. Right. You can use that n map scripting engine and use the FTP auditing scripts and then, then do it. Okay. All right. Thank you, All right. Possibly the best shot will be okay. Let me, let me, first of all, cover this one here. You can see on my website, on my real website, it says all CGI directories found, which I don't understand what it is saying, but maybe they saying it has found some CGI directory. And I know my web server is not vulnerable to shell migrate. So even it is finding that it's a good, good thing. It is finding. Maybe you can try, but it does not give you anything. Error limit reached 24, the host giving up last try. Right. Okay. What is this? This is the firewall. Now I am using it a web application firewall, which will block the server or human or anyone who tries more than 20 requests in one minute. So in one minute, this has tried more than 20 requests. My website has blocked it and scan has ended already. Okay. And in those cases you may want to fine tune. You may want to you know, you may want to put this thing as let's see in the health. Hello. You may want to total it so, Hmm. Let's see. Maybe there is something, no one says, okay, no its is important by the way, you want to disable the SSL timeout for the request before 10 seconds. No, that's not the one for use which host. Okay. Okay. Yeah, because then the target host allowed ID a list, all available plugins right off the file, disable plugins or prepare roles port scan tuning. Hmm. Scan tuning, maybe this is the version of this is the option you want to fix. So this time out, after 10 seconds, my website blocks you for five minutes. It does timing out after 10 seconds, of course, this will close the scan. If you want to go with website, maybe you can increase this to five minutes, 10 seconds. Then it will keep on working of course, after getting blocked again and again, but it will initially work. Maybe you can do the scan tuning. You will have to check on the Google or YouTube or, or maybe the manual file how this one works. So if we see Tuning, yes, this is the tuning. Oh yeah, you can, you can even try for these things. It can try it for file. Upload sql injections. Okay. You can, you can try that as well. That's something interesting, but what I'm trying to see here was, you know, how to limit, so I'm, I'm just trying to find the limiting throttling basically. I don't see any throttling here. You can possibly Google that. You can possibly see how to throttle the, the thing you should be looking at is throttle. So that's something CGI bin. See, this was, I was talking about I'm just telling you, you know, if you have the CGI interface, maybe you can, you can use these, these these two options, either CGI bin or CGI app. And that is an interface that can give you a lot of information. And Metasploit, you have a lot of tools for CGI. If you find CGI, you can find all lot of stuff there, user enumeration as possible. And then after that, there, there is a lot of stuff like, you know, as I said, a Shellshock vulnerability is there it can be fatal. You can get full system access if you find CGI listed there. So that's one of the things, if I see this scan, it's still it also got a limited out after 20 requests because you know, it's the same server, both of the websites, all on the same server, that same stuff. And it just got time out. Okay. That's one thing right now I was talking about, I forgot what I was talking about. Yeah. I think I was talking about n map before this. Okay, Paul, I don't remember. I kind of went out, but I don't remember. Possibly we can talk up that thing later if needed. Okay. No problem. Let's talk about n map then for a moment. Okay. So if we say locate now, maybe it isn't user share. So CV, every time you want to access the tools for that, it normally is in the user share. Yep. You can see. Now if you do LS, you can see these are the n map modules and all of OS database is there, payload is there, protocols, blah, blah, blah. What we are interested in this scripts, CD scripts. These are the scripts. Okay. For every thing you want to scan, there is a script. If you see if you talk about FTP, if want to a test and FTP server, you got subscripts. So FTP founds, FTP, brute force, FTP, something, I don't know, pro FTP backdoor, pro FTP pro FTP was a, was a software, The version of FTP. And that had an backdoor. You can test that vulnerability with this FTP system, maybe the system start something like that. We VSFTP backdoor , yes FTP is a very popular one. I am using vsftp. There was a specific version, which was, which was vulnerable. So that can help over there. Okay. alone CV2010, 4221. You can go and Google read what the CVE is, but it must be a significant one to be in this list. If it is in this list, it was a significant vulnerability. With a mass scale vulnerability. You can most possibility try that, that one with this as well. If you talk about a web servers. So let's see if we have some Apache. Yeah. HTTP you got HTTP scripts here, right? HTTP malware host, HTTP open proxy not sure, but you got a lot of scripts. You can, you can try all of them. SDBA, SQL injection, actually stored. XSS you've got a lot of scanning scripts here. You can, you can, you can search for, for these scripts if needed what I recommend. Yeah. This is what I was saying at that time. What I recommend in case you feel stuck, okay. Let us say you are in the exam. You have finished two machines. Now you've got the third machine to crack. I mean, you just need to grab two machines in one challenge. If you do that, you will easily pass because at the end, in three challenges, two machines, you cracked six machines. You need only five to pass. But let us say you have time, right? Let's say you crack two machines in one hour or two hours. You still got four hours. Of course, just try as hard as you can on the third machine. And that is normally very hard. The third one is always hard. But LPT exams gives you professional tools in OSCP. You cannot use automated scanners in LPT. You can use automated scanners. Okay. the one which is covered in the course in the LPT course is the is the fork of nessus neseus professional one they will not give you that it's a paid product. They cannot give you But there's a fork of that, which is called openvas open vas. I'm not sure if openvast installed in this, no open is not installed, but you can, you can use openvas. And if I show you and it's very easy, I mean, I literally, I did not know how to use openvas. I know how to use nessus, but openvas kind of, what's kind of a cheap setup. The graphical interface was very bad and I just went to YouTube. I just went to, you know, I just saw hackersone video. Like one, our video i's openvas so how to use openvas And I'm not sure if they will give you openvas this time. I mean, at my time it was there who knows if they will, they may change it. Right? So you, you might be ready for scanning and, and you know going on Google and YouTube and trying to see, maybe they will give you something like a Vega, right? They guys have apps, scanner. Maybe they will give you something, you know, who knows something like acuanetix, okay. Or acuanetx, whatever you want to call it. Or maybe they can give you something like an arachni scanner. Okay. Now Arachni scanner Vega. Both of them are covered in that web hacking master class, which I showed you. Open masterclass here, you can, you can see this. What does 22 minutes? You can see this 22 minutes video. It will be quite, quite good. Okay. You can understand how to use it. I'm not saying you do it right now. I mean, you can just do it in the exam itself. You will have time. It's not, it's never about the time that you always have time. It's all about to know what to do. You can, this is installing, 50% is installing now from here after 10 minutes its, starting how, we use, so here it is starting to use it. You can, you can maybe just use that. It can be helpful for detecting SQL injections for detecting, you know, fileclone. Possibly. This can help you a lot. I wasted a lot of time. Maybe you can, you can just not waste a lot of time. Just run the scanner. But remember, this will take easily one hour more than one hour to scan something, it's a very, very slow, nessus. This is slow. It can take more than one or two scan a target. If you have like three hours left, then try this, okay. And keep it running and still start working on something else. So that is a suggestion. Open Vas is a very powerful tool. They will give it to you. I'm quite sure they will give it to you nessus something they cannot give. So this is what they will give. So that, So, so you're saying we can either get openvas. We can get the other ones. How I guess we have to know about names to search for it. We can't just do like a search query to see what scanners we have. Could we? No, no. So that you can just click here and you can just see what scans do you have. Right? Right. Well, I guess, okay. So, because I'm not familiar with those names you just mentioned. So you mentioned openvas. What was the other one? Vega. There's Vega. Arachni let me try to spell it or at least arachni scanner sagarbansal. So if you tried that, here you go. I do have a video. Okay. So I do have a video eight minutes video. How to automate your work by using an arachni scanner. You can possibly try that video if you need. Right. Got it. In the exam. If we tried to watch my videos, maybe they will. They will question that. Hey, why are you using a trainers video? Possibly don't don't open my videos in the exam. That will be a problem for you. Okay. But youtube is kind of big, right? Every second person is going to give you that. No doubt. That was a arachni. That was Vega. That was open vas Vegas VGA, right? Yes, yes, yes. VGA. Sorry, what was the third name? Did you mention a third name? Acunetix. acunetix. Got it. Cool. Cool. Let's do one. It's kind of a good product. They give you a free trial. It's kind of a good vulnerability scanner, not sure that they will give you my best guess is that you will get a openvas and possibly Vega. So both of them, my best guess is that because most of them are open source Vega is open source and open vas is, open source. Okay. Yeah. It's a best short, but as I said, guys, if you see this, if you see this video and if we see if we have time stamps, I'm not sure if I have made the timestamps. Yeah. I haven't made it. But if you see, you will, you will find some topics like this one, here you go. Do you see automate this using Vegas, scanner whatever you did in this part, you can automate that with Vegas, scanner. That's why I was teaching in this, this part. So there are, there are other, other stuff. So then there is another video here automate this using arachni scanner. I have taught all these scanner, how to use them. I thought, you know, most of these things, and and vulnerabilities in kind of detail. So this video is something which is kind of a, it must try if, if you have that much time, so of course you should be watching this, then you can see this one demo of automated SQL injection. This is, this is coming from the SQL map, which we covered yesterday. So that is, that is what it is then what is brute force attack, how to do that, that is also covered there. And you know, what to try to limit to the brute force in the exam as, as much as possible, you know, like webpage, if you have a list then sure. Without list try limit yourself, six hours is not a big time to make a custom list. Right. Right, right, right. Yeah. And there, there are some popular web shells possibly see this, this, this, this, this go over with the whole video. So it will cover a lot of stuff, which you should maybe knowing for the exam. Okay. Alright. Is there anything else that we need to cover possibly? I mean, n map servers or webapps, do you guys think, is there anything else and let's, let's talk about the HTTP methods, corrupt ones I'm still, you know, interested to show that it can be useful if you find a method. I haven't find any method. I think in, in my machines, I mean, I have not included the methods. Vulnerabilties in these machines, which I have but it's, it will be good to have one. So it could way, as you know, if I want to do a less, I can, despite the output and I can grab the output and then I can search whatever I want to search. So I want to search something like methods, There you go there are only methods. Scripts HTTP methods. Okay. Let's try this script. Copy. I will just do n map then HTTP okay. Ubeta dot hacker in the House dot com dash dash script equals this press enter. What does it is unable to split net mask for target expression. Any spelling mistakes there. Oh, okay. Not too sure what that means. Let's try with the IP. Yeah, it will. But it should. I want with this as well. Possibly, because this is a custom set up. Maybe we have done some mistake while making it. So now here you can see the support and methods are get, has had posts and options. If you find put delete or trace, that's your best shot, put, you can upload it very easily. You can upload a website it shell. It's your shot. Just go ahead and take it. One of the tools for put will be one of the tools will be I forgot the web may be No,uw let's see how, what tools we have. Okay. Okay. Okay. Okay. Maybe that is not installed webAD It is a tool that you can use or burp suite is one of them you can use berp suite easily can bypass. UI will do that. If you are interested, you can just go on Google, very easy. You know, we just have to intercept the request and put your, your shell code in that request. That's how it works. Uyou can easily do that. It's not a big thing. I, I'm not sure if you will find or these methods, but it's a good shot if you find them. Okay. I have missed a few machines in the exam. One machine I have missed it completely. I'm not sure. Uwhat's, what's there. Maybe there's a, there's a method HTTP method thing. So that's something I would recommend you to doing. Okay. Uany questions on that? So if I'm hearing you correctly with the put method, we simply run burp suite. We captured we run the proxy, capture it and then change The request. So at the end of the request, you can put the data, your shell code. Oh, got it. It's kind of easy. If you want a practical demonstration of that. You can, again, you can go on the YouTube. No, I'm just showing you where to find it. I have a video on that as well. Okay. You can watch this one offensive hacking. Yeah. Okay. Offensive hacking master class. There you go. This one, this is a, okay. This is an ad. I am quite sure this is a four or five or six hours video again its kind of a big video, but just go to the end. The only last, the only last thing that gets a bumper ad, we cannot skip it. I'm almost done. I'm making money here. All right. Okay. This is the this is the shell code Where is that? Okay. Possibly here. Yeah. This is the one. This is the one here in the end. Yeah. And, and last two or three seconds. Maybe you see here, I was opening this burp suite. And so it's like last five minutes stuff. You can, you can see that here you can send this, this request to repeater, right? Click. And here you can put your code. This is the place where you put your code. So it's very easy. It's like five minutes where just maybe if you are interested as well, and this one, this will help you a lot. If you, if you cover this whole stuff, it's a pre OSCP and LPT core stuff. Okay. It's kind of OSCP, but LPT stuff. It's a good one to have. If you have time, like six hours, maybe 30 minutes daily. That should, that should make, that should make a lot of, it's not, it's not required again. I'm saying it's not required, but it's, it's quite, it's quite good. Okay. Okay. Now at the at least just watch this last 10 minutes, which is the put operation. Yeah. If you're not going to watch the whole thing, just watch the last one. Yeah. I mean, this one contains stuff like buffer overflow, which is out of the scope of LPT. I mean, you, you don't do buffer overflow in real life. Possibly never in pentest. So that is kind of out of scope of LPT. That is the OSCP stuff. This is how you develop it. So you don't need, you don't need that. This the goal. Right. You don't need that. Just ignore that part. Maybe just last 10 minutes as well. Okay. Okay. Alright. So with that today we have covered how to brute force the directories, how to test the web server, using a Nickto and possibly n map using scripts. That's what I wanted to show you possibly just, you know, what, what is the task you have to do? Just watch basically, you know, just watch that 2.5 hours, video, web hacking masterclass. Also watch that last 10 minutes part how to exploit put operation. And if you have time, then watch how to use open vas. Okay. That is kind of what you have to do. Okay. Right. And that should be more than enough for you to do, you know, crack. 50% of the exam, believe me, 50% because it's, it's a lot of web based exam. Right. with that I'll end the class. If you guys have any doubts, please feel free to ask right now. Did you, I'm sorry, go ahead, Paul. Oh, no. After you my bad. Oh, do you say 50% is like directory busting or, and servers, web apps. Web servers. So like yesterday we cover an SQL injection and if I upload and all of those stuff, you will mix and match concept from here and there. All right. Sounds good. Thank you. I mean, I'm just trying to give you the importance of all of this, right. It's kind of important. Yeah. Yeah. The rest 50% is kind of, you know, how to do network, pen testing services, how to exploit services, run exploits out to you know possibly how to do it's privilege, escalations, all those kind of stuff. Is there often after all of those and that's what we're trying to do. Right. So today we're gonna learn about network penetration testing though. We have already done a lot of it. And you know, when we were hacking this windows XP we, we almost did it, right. We know how that works. It's basically the same methodology. You find ports, you find the services, you, you know, try to see if it service is vulnerable. Then you see if the, if there is an exploit for that service, if an exploit, just try that just try to hack it. That's that's how the limited scope is that's how pentesting normally works here we do have a server Vicky dot hacker in the house.com. It started, yeah, that's a modified version of another Lennox machine. So someone else created it and we just modified that because. Because now that person is not continuing the project. So it's going to take some time. But I have done as see, this machine has got two IP ranges. It's let me show you, so here it is, this machine has portal. It has got ten.zero.one 40 eight.one zero six and ten.zero.one, one five one zero six. So this machine has got these two IPS. Let's test it on this IP 148. I mean, of course you guys can route through DMZ machine, you know, beta machine. You can have this IP 10.100 routed to 148 and then test it this. Well, I will just avoid all of that. You know, you guys know until now you are already good at that. You can do it yourself. I'm directly assigning myself a range of 148. So you guys can, you know, go here in settings and network and here the adapter to just leave it as it is, it is, it is fixed on hundred. At that for one is something you can change. I've just changed it from which to nat network 148. So I'm just assigning myself directly a range of 148 you know, just to avoid that routing. And it will save a lot of time. I hope that makes sense. Right? Right. So we're, we're basically pretend that we've already pivoted So I'm until now everyone, everyone can do that. I think. Right? So this one seven four target is one 40 eight.one zero six, but let's get in the action then. Uthere you go. Let's try to see our IP address. It will make you more clear. I have config. You can see that this is the adapter one. We have not touched it, but thereafter two, we have changed ourselves to 148. So we are now in one 145, right, right, right. Now,uthere are multiple things you can start with. I always like to do a ping sweep, right? So ping sweep is something you should be, you should be trying and there are, again, multiple tools you can use. You can use metalsploit uyou can use,uyou know, ping scanning tools,ufrom, from different vendors or solar vend and all of that. Or you can use n map and then n map is I, you know, I'd say small tool to handy, tool even big, you know, even big companies like tenable. So if you think about tenable, they got their scanner, which is Nessus, and that's at a big scanner, one of the fast scanners. So what they do is in the backend, they use the n map databases. They use the n map service n map databases, the port scanning database, the OS detection database, all of that is running through ata. And that is the only reason. And map is a free tool because it's a free tool because these companies are paying for that data. These companies are paying for those databases, which n map has. So, n map is quite a powerful tool. If these companies were not paying n map will be at Pity at the end, it's a free one. It's, it's something you should be using. It's one of the most powerful tools. That's why, when I want to start with something, I will use n map. Now LPT methodology, the license the license penetration tester methodology says that you should always start with a ping sweep. Then take those IPS, which are alive. Then do a port scan. Then take those ports, which are there, do a service scan version scan, and finally start, you know, gradually, you, you don't, you just let me show you something. This is what most of the people will do n map the whole range. Okay? The whole range. And here they will type something like dash a and maybe something like script equals default. You know, they are pushing the network. They are completely pushing the Whole netwrok or you're scanning each and every port, each and every machine on aggressive mode with scripts. This is gonna kill the network. Think about it as, as a company, when you are doing it offline, you know, with these virtual machines, that's fine. That will work. But when you're testing a real website or real company, real infrastructure, they got network, which is limited. They got like, they might have a, you know, a hundred Mbps connection. They might have a, let's say one GBPs connection. That's something normal. I mean, I have normally seen one. 1Gbps a fiber optic cable. That's the maximum I have seen in companies are normally. So with that one GB line, they got like a hundred people working in their traffic is coming and out. And even if you are pivoting, this will basically kill everything. If you are pivoting and then doing this kind of work, this is going to kill the old, the old stuff. That's why the recommendation is you always do a ping sweep first. So to do a ping sweep, you can always type the range, which was, let's say more 148./24, and then just type SP okay. We are going to scan in the ping. Sweep mode. Okay. P is that ping sweep you do a ping sweep and it will come up with the IP's, which are alive. Now, here, you can see.one is working .2, who is working the three's working. And these are probably the virtual hosts in our case, these are not ping machines. 108 is there and one, zero six is there right now. We know that these hosts are up. And for the example, I'm going to ignore these. I mean, this is the router of course, for the example, I'm going to ignore these ones because it's not that these are not real. I mean, I have created the network, so I know these are, these are the two which will focus on, okay, let's say that in our scan, we found only these two. So now you know that you only have two hosts to scan. Now you can just go ahead and scan only these two. So I'll just remove this and I'll just say eight and possibly I can just add another one, 10, zero.one 48, dot one zero six here. And instead of SP, now this time I can do a support scan and I can scan the ports in multiple versions. Again, you can do TCP scan sin scan UDP scan. A lot of options are there, right? If you don't know about that, maybe you can, you can watch my ch masterclass or something, or you can go and Google it quickly. Or maybe my CISSP master class on YouTube. I have explained all of that very easily ports and different different protocols, but you need to understand one thing when you're doing pivoting normally sin scans will break. And I think I have already explained this in when we were learning that windows XP sin scan will normally not work in pivoting. That is the point. You might want to do a TCP scan to do a TCP scan. And Metasploit you have auxiliary scanners, a fork scan slash TCP and, and, n map it is ST scan, TCP S T. That is what you do. And then if you want to do a sin scan in metalspoloit, it is auxiliaries ports. Auxillaries sacnner port scanner, sin scan in this one, it is S S so you can do it with SS. And what I recommend is, you know, just, just try a just try with a sin scan, if that works, that's fine. But TCP scan is going to be much more reliable in terms of that. Uhere, we got a report. None of the ports are open on this machine. You see, all thousand ports are closed in this. They got this one, but this is the mistake which most of the people do. This is the mistake which most of the pentesters will do. And the mistake is these people are only scanning whole thousand ports. These are only top thousand ports. These are not the whole network. Okay. You want to make sure you also put a flag here. Dash P dash, p means scan all the port. Now, if I press enter, it's possibly gonna take more time. But here you can see this time it's scanning 65,535 ports. Okay. Instead of thousands, this will give you a much more reliable results. Now this will give maybe this saying everything is closed. Maybe there is a firewall, maybe something, but that's fine. But at the end of this saying that, yeah, it has scan all the port and in this case also it has, scan possibly all port. Right. Making sense. Yeah. Right. So that's what you do. That was the st possibly just always try SS as well to see if you get something again, nothing is found on this machine. And I think port 2280 111 443. And this one, and yes, that's exactly the same. So sin scan is not giving us any additional information possibly also do a UDP scan. So UDP is another protocol on which connections work here you can see on UDP. It is very you. It is very, very surprising. You see, we got a port on that machine, DH CPC, which is open port filter. So there can be a firewall, or it can be open. And there is 68 port number UDP. So you get one more port there. And this machine they're not easy to exist, but it is possible that the port is open. It's not sure it is possible. In the meantime, what I'm going to show you is. So for example, this is something we will be interested in. Now, when you know that these are the ports open, you will not be scanning all 65,000 ports. Again, this now, from now, from this point of time, whenever you do a scan, you do only these ports, 2281, one one one three nine four four three. And this one, that's what you do. Okay. You only scan these ports. Let's keep this scan running until then. Let me show you something which I like to maintain. So let's see, there are a few reports, for example, this was a pen testing project, which I was doing. It's quite old project. I just edited this today. So 34 minutes ago, this is what I was doing by the way, when we were late for the class, I was removing these IPS. So this was a project for the client. It was quite a big project. We had 44 IP's, okay. 44 IP's different network. These colors are the ranges. So you see a common commodity say dot something and then 74, then something and zero eight and you know, something dot 95. So these were different, different ranges. We were scanning. We had the last report. It was quite, you know, a white box test. I would say we had access to the last reports and last reports. We found, you know, they found these vulnerabilities in the new reports, which we were making. We found these vulnerabilities. So, you know last time, for example, in the last month test in on this IP, there was a high vulnerability this time they fixed that, or maybe they didn't, but we found two vulnerabilties one was low, one was medium. And the last tester says it was a high. So not sure how he got it. Okay. For example, similarly here, there was only one high now, we say there were four medium, vulnerabilties and some low vulnerability. So when I removed the number, it was the number four here as well. Maybe it was too low or three lowe or whatever, something, something low whenever it is here. So that is something you might want to do when you're doing a real life test, a white box test create a sheet, you know, keep everything organized, just to compare the results what's going on. And why would this be a high vulnerability last report? And we are saying there's a low and medium, maybe, okay. This says that maybe using that low vulnerability and medium vulnerabilties, someone can make a new vulnerability which can be high. Okay. Combining of them. Right. getting, getting getting a combination. So maybe think about those ideas. When you, when you have such such sheets, of course, it is possible that they have reduced the level, or maybe they have been the risk assessment and some other way it's always possible. But when you're doing a real life test, always think about this kind of things. One more thing I'm gonna share is when you're doing some tests, when you're doing a scan though, you know, the n map, sorry, when you are doing this, this, this thing, the same thing when you're doing it in Metasploit, metasploit keeps records of everything. You know, when you are, when you're scanning, your port might as well make a database for you, but when you're doing it with n map, possibly just make a target database. The target database is it's a good practice when, and, you know, in report writing, it will come handy. So here if we take the IP one zero six, so the target database works like this. You say IP's or let me just type here. Ten.Zero.One, one 40 eight.one zero six. Okay. That's the IP. We can format that later. Let's say if ports found ports open, Oh, sorry for that. Okay. ports open and here. And you can, you know, start typing the ports which you have got. So just for an example, 22 and 80, that's what I'm going to type 20 and 80. And on this side, you can possibly say services found, right? So then you can write services. Then here, you can say vulnerability found, alright. And then on the side you can say exploits from, and possibly, you know, you can even have links there. You can do whatever you want to do analysis but what was the result? Right. And finally, risk score. A risk score is, you know is going to be depending upon multiple factors, for example ease of exploitation, how easy it was to explore it for you. And then you know confidentiality, how much confidentiality was exploited. So what are you able to get full access? Where are you able to see whatever you wanted? 10, if you're able to partially see it five. So on the scale of one to five, or preferably try to build on scale of zero to eight, that's what we use in ISO. So zero to eight, then integrity. And then on the availability, that's what you possibly want. And finally, on the basis of these explanation, and NCIA, you can check a table, maybe table six in the next year, six ISO, 27,005. And you can assign this, this score here, or maybe you can take NIST, RMF risk management framework. You can check these values in that as I need a score here on the basis of the risk score, you can assign a vulnerability level. So is it a low level? Is it a medium level? Is it high? So just always keep this kind of target database when you are working on a real project. Okay. We're not doing that here because it really doesn't matter as we are. We are already recording the video. First of all, when you're that that's a pro tip, always record your pen tests, whatever you do, just record it. Even if you don't want to make the databases, you know, you're recording it. You can just view the recordings and come up with the things. But when you're making it on the spot, it gives you visibility. Now I know, okay, port 20 is open in this machine, maybe other, other data here, when you will fill the sheet, you will have a lot of data. And that will be kind of, you know, very helpful at the later stage. Making sense. Yeah. Yeah. That makes sense. All right, so one was make a target database. Now here let's cancel the scan. It's not going anywhere. I just manually cancel that. Let's just focus on this for the moment that let's say, this is our target. I mean, this, this one, let's just ignore this at all. It's a UDP on the one port and you cannot possibly do anything on DHCP CPC. This is like a port which you use for IP addresses. Possibly. Let's ignore that. Let's say that our target is one zero six in the moment. And that is basically the IP of you know, of this machine. If you see. Yep. One zero six here. That is the machine. So that's good. We have the machine now. So what do you do? You know, when you have that, you just start a scan on that, but this time you don't scan all the ports, you scan only the ports, which you found 22. Okay. What'd I just did. Give me one second. There you go. All right. So 22 80 111 139 443 32768. What I want to do is I want to run this thing in aggressive mode. Normally you would, you would go with a version detection scan. Okay. But here, I know that we have limited number, of ports only selected ports. And of course, services are already here. You know, as a such, as there should be, be their, their versions. We can get it, but let's run it in the aggressive mode. So dash I will add dash V to know what is going on. You know, it will give more information. Now you can see now it is giving more information discovering open port. So this is what this does, right? Sin scan by default is taken the sin scan. Maybe if you give a STP, we'll take the TCP scan by default the mistake, the SS notice it does not showing you what is going on. Okay. Operating system try and are just trying to find the OS. And now NEC, this is the n map scripting engine. So it does also running some scripts, some default scripts because our a option. Okay. That's that's the benefit of using dash a dash is quite an intensive. Again, it may break a lot of networks. You may not want to do it. You may want to do it for by port. Okay? So only scan port 80 and then work on it. Then only scan port 139, and then we're going in. So that's something you may want to do. We are just running it. We are not carrying out the network. That's fine. Let's keep it running till them till then. I also want to tell you one thing, possibly, you know, when you, when you have these, when you are making this database and his here is the part, normally you work individually, right? You've got a team. When you are in a team, of course you specify the work. So in a project management software, maybe your company will use Microsoft project, Microsoft project, ms. Project, or your company will use JIRA. So JIRA is a popular one. These are possibly the two, two project management softwares companies use. There are multiple others as well, open project management, etc, etc. They will give you, you know, they will give you work. They will assign you work. And normally they will do it on the port. Once this discovery is done, they will, they will start assigning ports. So port 80, who's going to work on port 80 or port 22. Who's going to work on port 22 and that's possibly what you will be doing in future. Okay. Normally you divide the work in teams. So would you be dividing? So everybody's doing the same kind of scans and attacks on those ports or what could be running on it. So for example, you know we might not be dividing it at this time. I was just giving an example, but think about it. Like, for example, this scan has done. Let me tell you this scan right now, here it is done. Now we know that, okay, what are the processes? What are the services? And doesn't, I'm trying to find SSH, right? SSH version this. Now maybe I will divide that work. And I will tell someone that, listen on port 22 do all the tests now, which tests, it really depends. You know, there, there can be a lot of tests and you can find them in the LPT methodology and, and you know depends on the methodology again, but LPT methodology has the tests. If you check here, LPT master report templates, these are the methodologies. So, you know, for example, there is this one internal network pen test, a firewall prevention let's see web application. So for example, you find port 80, right? And we also found 80. Let's see here, we find port 80, which is running apache. It, we know it's website, or a web server, at least. So we are going to maybe they're are going to tell someone that, listen, go ahead and do all these scan, all the tests given on this page. And let me show you one thing. This is a 106 pages book, okay? These are all the tests you see, these are all the tests, fingerprint the application, you know, maybe just perform website spidering . And there are, there are different, different tests that you can do perform banner grabbing to identify the web server. We just did that. We know that it is apache and the version as well. We just did that. But possibly these are the templates and you normally, you don't do all the tests. You have to look at the objective of the pen, test, why the pen test is being done and what are we trying to do? And on the basis of that objective, you, you select some tests, you know, you've talked to management, whatever your client, you sell, you talk to them. And this normally is done beforehand before testing, and then you finalize the scope and then you start testing and that's what you have to divide. Right? You have to divide the work into multiple people. That's normally in big teams. That's what you do make sense now. Yeah. Yeah. That makes a lot of sense. Yeah. Right. Thank you. Did we just close that? Oh yeah, here it is. Now in this case we have got these, these things, right? They got, they got the versions and you can see, it has run some scripts for us HTTP methods. It does run some scripts now just to, you know, go out of the topic in case we found something like put delete, okay. Put and delete are too dangerous options. Trace is also a dangerous option because trace allows you to do, you know, tracing, reverse tracing. Maybe you can, you can open the password file, or maybe you can find the location of some things traces kind of risky option. It is giving you that here you can Google it, how to exploit traced, very easy. Get In, in terms of, if you have the put option here in SDB methods, you can upload a file arbitrary file upload. Vulnerabiltiy comes in in the hand, when you have put option, when you have delete option, you can delete files in server So maybe I will just go ahead and delete a configuration file, or maybe I'll just go ahead and take some, some important file, which may give me some access. Most possibly I can delete the firewall you know, all the files of that firewall. So delete is a dangerous option. Put is a dangerous option trace is kind of risky option, or you, you know, it's information disclosure kind of thing. So confidentiality is violated with trace. Uso it is running the script and that is giving you these, these things, just telling you this red hat, Linux, okay. These are the version of services, which are running here. Uthis, this version was not found. This version was not found again. Okay. We found this version. We found this version was not so, n map cannot do a lot of things. Of course, that's, that's the limitation of n map. You know, not everything will have a banner, but this is basically doing banner grabbing in those cases. Again, we have to rely on other tools and, and you know, what's more, what's more better than using Metasploit, you know, that's the professional framework we will be using every time. So let's go ahead and say metasploit before that service, postgreSQL start, I'm starting a database service here. Okay? Because I want to show you something. UPostgreSQL is a database in Kali Linux. You can use my SQL if you want, but postgreSQL is by default install and MSF DB. INIT a I'm telling meta sploit to possibly just create a database or initialize a database, whatever it wants to do. It says database already appears to be configured. That's good. If it was not, it will configure it automatically. Now let's start it. MSF console. Now we have just connecting a database. So everything we do get stored in metaspoilt you know, everything we do is, is, is going to be a part of it. Now here, if you say workspace, you can see, we got some workspaces. I created this one while doing pen tests, or maybe another class, a default is the one which you are in default is a temporary database. It will go away. What I suggest is you create a database here, workspace dash a to add that need to be delete, or possibly just try the help menu. If you got confused here, we can say license to pentest. I just added a database. If I say a workspace, now we are in this database. If I, if I want to change it, I can just say workspace space, hacker in the house workspace space, before I can change it like that. Right now, we are in the license to pen test. Let's create this screen. If I do host, you can see, and Metasploit has got a full database. It can create a target database for us. IP address, Mac address, name operating system, operating system version, operating system, possibly special pack or service pack, purpose info connects. It's going to do everything for us. If I do ports NO, services. Yep. If I do services, it's going to do IP address port, not sure where it is, but name, state info. Right? A lot of things it can do for you, right? It's going to maintain a whole database for you when you start doing some things. You can, of course run namp in metsploit. So I can just say a DB underscore n map to, you know, to use n map, but to store everything in a database of Metsploit DB underscore nmap very quickly, I will do that scan. So dash ss ten.zero.one 40 eight.one zero six. Right? I hope that's the IP if I'm not wrong guys. Yeah. Right. So I'm just going to scan all the ports in it. Just to show you it's this not the methodology, but I'm just showing you, you can, you can do it. And then let's say dash eight. So right now they started a scan with all the ports on SS so sin scanning on that IP, using aggressive mode, it will take some time, but it will give us a lot of information. Let me just cancel that and add dash V as well so that we know what is going on behind the scenes. Okay. There you go. So it does a lot of scans RT scan, maybe other TCP scan or something, and then it starts a sin scan. It found these ports, and now it is going to start the service can on these ports, which have found, so let's let, let us do it. Standing six services, a service can be done. Opening systems can start. It will start the opening system using the NSE that has the nmap scripting engine, let it do whatever it is doing right now. And it's not going to take like more than two minutes. So that's something fine. That's the benefit of using the database. Now, everything is finding will get stored in the database and you can explore that database. You can make XML file, HTML, files, PDFs. You know, you can export that to other you know, you can export that to other scanners like Nessus or next post, right? You can, you can scan all of these things, whatever you do, we can send it to other scanners, automated scanners automated pen testing tools like saint. So you can, you can use this data and those tools. I'm just telling you in the professional life possibly in the LPT exam, you're not going to go that deep. What you will be supposed to do is you can use n map directly or in the metasploit. It's your choice, but you need to know how our scanning works. What's the whole purpose of doing it. And that's what LPT exams demands. So let's keep it running and possibly we don't need it now anymore. Let's, let's keep it though, as a safe option, let's compare the results. All right. How long is it going to take 227 and finished out? Okay. Two, 217 seconds lost then. So yeah, maybe one more minute. There you go. Everything got complete. We can clear this screen. We don't need it. Now. Let's test hosts. We got this steps. Okay. Let's let's do it again. Maybe a little bit smaller hosts. You can see it's giving us the IP is giving us the Mac address. It's giving us. There is a Linux, not exact version, but service pack possibly version is this. Purpose. It's a server. You can add these things so you can add the name. If you get to know, you can add some comments, you can add some info and you can do that with a dash ad. So here's the ca and then you can add whatever you want to add. You can write manualy let's check services, so services, you can see this machine has got this, this, this port open. Okay. This was protocol. Okay. PCP protocol name is this. This is the version. Okay. That's what it is coming up with the versions, making sense. Now that's what, that's what you were supposed to make manually. Metasploit can do it for you, right? And that's the, that's the, one of the core reasons we use a framework or a tool, which can, which can handle all of this. That's the main reason to use. Metasploit one of the main reasons, because then you're doing a big test. You know, it's one, two IP, doesn't matter when you're handling like 40 IPS, which I was doing in that day, right. That report, which I was just showing you two minutes ago when we use 40 IP's, it becomes a lot of work. It's going to take one day in each IP. So 40 days project, it's like a one month work. You cannot handle everything manually. That's why you need all of this. So anyways,ulet's try to see, we don't have the version of this service. Okay. SMB, of course we know that 139, 137 and 445 till now. I hope you know, that is SMB port. We have done it too many times now. So one 37, one 39 SMB let's run SMB scanner. So,uyou know, search SMB. We have a lot of stuff there. And SMB as SMB SMB and, I'm interested in SMB version, maybe, you know, I need the version of that port. So it will be an auxiliaries. Of course there are the auxillaries, scanners, SMB enormous. And we version, yep. This is the one. So possibly let's try that. Copy here. Use this enter show options, set r host. Now a good thing is I can just press double tab and it will show me all the r hosts in my target scope in my database. I can just press double tab. It is auto completing everything. Okay. It is auto completing. I can just double tap. It is showing me that they want to read for the whole range or do they want to do it for the selected host? Let's do it for a selected host. That will be one zero six. So that's the benefit. You know, it's going to take everything automatically. I don't have any other information. I will just run it. Now here, it got completed. Host could not be identified, but we got to know that version is this right? That's something interesting. We got to know that. The, the services running desk services, we, you can see it automatically updates. The, you see, it automatically updates whatever you do. So now you have that in your records. That's one of the beauty for, for using this kind of thing. Similarly, you can do same thing with RPC wine and this service, we don't even know what service it is. You can completely ignore that. Maybe it's a proprietary service, whatever, but RPC wine, you can find the version similar way. Just like I found the SMP version similar. You can find it now coming to the testing part. Okay. Coming to the testing part. What is the next step? Let's suppose just ignore this for a moment, but let's suppose we got all the versions. What's the next step guys. I'm asking you. So we scanned enumeration. We found that exploit it, find a exploit for it. Vulnerability before. Yeah. Before finding an exploit, we need the vulnerability. First of all, right? Because maybe there is a vulnerability and there is no exploit for it. But if there is an exploit, there is a vulnerabilty So it's vice versa. It's not true. So first of all, vulnerability, how do you do that? Again? Multiple options you can, of course you can just, you know start searching off about these things in Metasploit itself, you can start doing that here itself. I don't see anything good here. Maybe you can use this one in a users. It will give you users on this SSH sports. But at this time, you know, this is the stage. When you have all of this, this is the stage where you may want to divide the work, because it's going to take a lot of time. You've got a SSH, service, now you have to do a lot of tests. We are just rushing it. We are doing it very quickly, you know, just to end the lecture, but in real life, you may have to do a lot of tests. Maybe right now, we are focused on getting access in a real test. You don't care about access. When you care about this vulnerability this enemy user, if you are able to get a user name that is a vulnerability that is affecting the confidentiality, you are able to find usernames, which is, which is not a good thing. You're compromising the confidentiality. So maybe you will exploit this service. Okay? You will run this exploit possible. Similarly, Apache, you got this one let's copy as clear, right? And similarly, okay. There's a lot of stuff. Possibly all of this stuff is coming because you know, the version number is somewhere common here. So two is here. So that's where it's coming. Maybe I can just do apache. Now these are the Apache exploits. Possibly I can just go ahead and you know, it takes time. Okay. It can take easy. It can take three to four days in a normal work. If you are doing a pen test, which has got a lot of, you know vulnerabilities, ia lot of ports, a lot of services running. It can easily take two to four days to complete one or two IPS. Okay. That's the real life experience in our cases because we know LPT exam is six hours. And we know that, you know, we are doing only one machine, I mean three machines in six hours. So roughly you get two hours on one machine. It's not going to be that hard. You will easily be able to find vulnerability It's not going to be that hard. What they want to check is the methodology, what we use and how you do it. So once you found the services, it's possibly easy for you to go ahead and Google these versions. Just maybe you can just Google these versions. I can just go on Google and I can post them to try to find the Versions. There you see vulnerabilities and you will see this version is having some vulnerabilities, possibly 3.2. Okay. And then you can see, we have some, some things here, a 7.5 is the score. You can read about it again. It's gonna take time. Right? so that's, that's something you, you may want to do. What I am interested in is the Samba, because I know this is vulnerable. Okay. because I, I am the one who has created the whole infrastructure. So I just want to show you very quickly. For example, if I search for this again, we've got a lot of options. Okay. Once you do some research, you know, once you go on Google and you search about it and you do some research you will, you will get to know that this, this specific version it was quite vulnerable. Okay. For example, 9.3 here you know, execution code overflow. So you can overflow, eh, something over there. There are again, a 10 out of 10, there's a execution code, overflow DOS denial of service. So when you do some research, you will get to know, okay, when you do some research. You will get to know that this thing here SAMBA trans through open overflow. This is a vulnerability, which is affecting this specific version SAMBA. But once you do some research, you will get to know that this, the Samba trans open this affects any SAMBA, Version, which is I think, which is less than 2.7. And in our case, it is 2.2. So this is possibly going to affect it. Once you know that we already know it's a Linux, so we will use this possibly you can use it in this way. Okay. Sorry. Copy. And it's all about research. That's going to take time. So let's say we know that there is a vulnerability overflow is there. We found the exploit similar way. Okay. Let's press enter. I will share the screen. And I can hear by do show options. When I have to set, as r host said, r hosts and one zero six port is 139. You can change it to four 45 or one 37, depending upon your target and just run it. And you will see, it will not work again telling you it will not work because you see here meterpreter session, one open, but then meterpreter session. One closed reason died. Your shell is dying again. And again, this can be due to two reasons. Either you're pivoting is not working fine. In our case, we are not even doing pivoting. Right? We are directly, we are assuming they're doing pivoting, but right now they're directly connected. So it is not the problem. And the problem is with the exploit. Okay? Okay. Why? Because if you do show options. Yeah. It's not showing, yeah. This is using meterpreter, reverse TCP. And this meterpreter is a stager, right? What is this stager again? In a stager, it will send a small payload, maybe 300 bytes, 400 bytes, whatever. Let's see if we can see that here. Sending yeah. Sending stage. This was the size of stage. Okay. It sends the stager. Okay. The first stage, that is a payload. That is a code. What that code will do is that code will fetch the remaining code. That code is going to fetch the remaining code. That is what we are sending. We are not sending the actual code. They're sending a small piece of code that fetches the remaining code. And then it executes. That's where we are. We are sending in a state, but this sometimes involves having a lot of session dies. That's the problem. We can change it to a non stage. We can change it to a single, okay. Single set payload. It's an, linux/86 double tab to see all available payloads. These are all stagers. We need a single, this is a single, but I don't know what this will do. So I'm not using it. Shell is a very common one. Meterpreter and shell are the two very common ones in shell. These are again stagers, but this here is a single so reverse. TCP is the one which I prefer. I will just use this one. So shell reverse TCP. Okay. That's what I want to use. Let's run it this time. And you can see this time. It says command shell session three open, and it doesn't die. Now we have it, but this is not meterpreter. You cannot do pivoting. You cannot do porting. Literally. You cannot do anything specific, which Meterpreter brings you right now. You have a shell, right? When you type shell meterpreter, that's what you have. You can type IP config. Okay. That even breaks it. I cannot trust that. Okay. IP IF config, right? That doesn't work. Maybe you named that you named dash a yeah. That works. So it telling us we are in the Linux. This is the host name or possibly, this is the version of the Linux. This is the time and date. And, and I'd say 32 bit architecture. Okay. Something is unknown. That's, that's possibly, it is telling you, but you cannot do a lot of things. You don't, maybe you don't have privileges. You are not, you know, root user. So you cannot run high config. It's, it's kind of a limited shell. That's what you can do. And in this case, you can do one thing. You can try to background it. Control Z. Okay. why enter? Background it You can try to search for two . Meterpreter metER PRETER two. Meterpreter. And it doesn't work. Okay. So 2 underscore meterpreter. Now you search STAICH. [inaudible] Yup. You can try this you know, you can try this post exploitation tool. It's a post exploitation tool sessions. I have session number three, running, which is a shell. Possibly. I can run this post explotation and I can upgrade myself. It's very difficult, but sometimes it will work, set session two, three that's basically what I need. I can just run it. Okay. Sometimes it will work. So it's worth a try. I mean, that's the whole point. It's worth a try here. You can see it. It just failed right. It opened it, it opened it, but at the end, again, it failed forcibly because this, this machine does not accept stage payloads. Okay. Stagers. It doesn't accept due to that. And it doesn't work. And some cases it will work and it will work very nicely. So it's a good handy tool shell to meterpreter and it's post exploitation tool. Always do it whenever needed by the way. But, you know, at the end we made it, I mean, we got the access. The reason why we are not able to maybe run meterpreter or run any command is, are, are, you know, privileges are kind of limited. So we may have to, you know do privilege escalation. That is something we will cover in the next class. But what I'm trying to show you is forcibly. We can run post exploitation. We can can do it. Then we may have to do you know we may have to do privileged escalation. So who am I here? You can see, I am root. Okay. That's kind of interesting. I'm root, but still I'm not able to run the services which is quite amazing. Why is that not working? If config no PSSWD can I change the password? Oh, that's good. I can change the password. Let's say bansal@123. There you go. That's fine. So now I just want to, you know, you can btw , you can connect with SSH or whatever you want. I will directly try that here. I will directly try that. We just changed the password. Right? So root bansal@123. Oh, there you go. You can just log in and now you can do whatever you want from the shell. So yes, I can do whatever I want from here. This is the, the command it's working properly fine. So you can now connect with SSH maybe. Right. SSH and I'm sorry, you can possibly connect with SSH, because we know that there is assistance running. So that's possibly right. Making sense. What we just there, what are we trying to do creatively? Right. Uso the whole point here, which I wanted to show you was services. Yep. The whole point I wanted to show you, what was that? You know, I knew that, , this version is vulnerable. And that's why I just did it now in this machine, there is this version, okay. This version opensl. This is also vulnerable Right? And, and there is no exploit in the Metasploit. There is no exploit about it in the metasploit. You have to do it manually. That's what this, this, this whole thing is all about. If I show you more a I think this is the part, which is vulnerable let's see. So in metasploit you won't find an exploit. But if I go out of metasploit if I do something like search sploit here, nothing found, okay. Nothing found, okay. SSL. Oh, sorry. While I was using search it'll search. So I search spolit another tool, here you go. No result Yep. Here you can see. So more or less, a less than 2.8 0.7. We have 2.8 0.4. Right? So all of these three will work and these are basically, you know, a version, maybe zero version one or version two. So I think they did a mistake in typing. This must be version one. This must be version two. So you can use this exploit. Okay. It isn't your kali Linux. You can just, you know, copy this. You can just copy this one. This part, last part here. Control C. You can just save search spoilt. Let me just first go to desktop search exploited dash M middle, it is m middle and paste that last number press enter. And here you will see, it will make that exploit come on your desktop. Now, this is the exploit. You can open it with something like leafpad. And normally you will find, you know, this is a C file, right? C language written code. You will, of course have to compile it, make a, make an exploit out of it, which is software. There's a code. You have to make it an executable file. So that's something you may have to do. Of course, sometimes good author. So this one is a good author. You know, he has added everything version is this, you have to have this package You can run this command to install that package, compile it with GCC. This is a compiler. This is the full command. You can use this command. You can do it. Yep. That's, that's basically it as right. Or you can then run the, run the file once you get it, though, I think, I mean, this is something I can leave on you as a homework, I have done it. I will send you the video that you can refer to do it. There's something i can leave as a homework for you. But the whole point was sometimes you don't have exploits in metasploit and tried. You will not find any exploit for this specific version in metasploit. Then you have to use these public exploits. In Professional tests. You may do not. You may not want to do it. Okay. Maybe this code is not accredited, right? I don't know who has written this code. I don't know who is this person who is this person of whatever the author is. And I don't even see the author name now. Okay. I don't know who made this and who he was. What was his environment when he was making this? So in those cases, you may want to, you know, stay away from it, this kind of thing, but completely possible. Really. You know, if the scope allows, if the management says that, okay, we are okay with it. You can run it. We have the backup of the system. Then you can, you can run these kinds of things and you can try to, you know, run this command and then, then finally compile it and do it. I will send you a video, how to do that. I'm not a problem. Or maybe you guys can try it first. It's very easy. Just try it first. And if you still face a problem, I will even help you out. Or maybe in the next class, we can do it live. If you guys want, however you guys prefer. So that's, that's something you, you need to learn the public exploits. These are the public exploits. What we use in metasploit are the commercial exploits. Okay. That's the different public versus commercial. Any, any note, any doubt there? No, not sounds good. Right? So I will be sending access to this machine, this Vicky hacker in the house.com. I will sending this, this machine to you guys at least, first of all, try the metasploit version and then try to do the, you know, the nonsploit version. The public has tried to do that. If you are able to do it well, very good. If you're not able to do it, we will see what we can do. Right? Make sense? Any questions? Sense? Any questions? None at the moment. So privillege escalation again, it's all about you have the machine, you got some initial access. Maybe you got a user access. Now you want to become root, right? Or you want to become antiauthority in case of windows, the admin access. How do you get that? So that is what privilege escalation is all about. And again, that is a specialized field because privilege Escalation is not limited to network pen testing. It can be done anywhere. It can be done in IOT, IOT devices. It can be done in Android, it can be done in Java languages, Python, interpreters, and then iOS. And, and then, you know, routers firewalls. It can be done basically every single layer. Can you hack a motherboard like software, actual have a, physical software, like motherboard CPU. Yes, that is called hardware hacking, there is a whole big industry in hardware hacking. You can even have cars. You can have planes. You're going to, whatever car hacking is a, car hacking is another field. And if you remember Tesla, Tesla, every year, Tesla gives you a big bounty plus the car that you have. So a supercar, you can win a super car if you have their car. So car hacking is a big thing in your hand. Sorry, can you hack that car? I know. I don't know car hacking. So as I said, you know, pen testing is, is, is just like an ocean that you cannot bring the whole ocean. You cannot be everything. You need to select a very specific niche and then come out and be an expert in that niche. That's the only thing you need to do for me. It's mostly does a risk assessment. So even I, I'm not a, I'm not, maybe I'm not the best person to do the pen testing, but I'm the best person to take that pen testing result and then assign the risk values and tell the company what they have to do now, you know, that management level stuff. So maybe I consider myself the best person in the risk management, in pen testing and management apprentice. How do you manage this? How do you manage the budgets, finance? How do you manage people? How do you distribute work? How do you take control of all of that? You know, project management. That's one of my core competencies and I even have my executive education, project management. That's one of the reasons I did that because I just want to be best in, in one single field. If tomorrow, if tomorrow there is a, there's a multibillion company, they want to do a pen test. They will not call me because I'm the best person to, you know, to, to exploit the system. They will call me because I can manage the people who are best in and doing their stuff. Right. So that is what you need. You just need to be best in one specific field privilege. Escalation is one of them. You can, you can be a privileged escalator, one of the best. But as I said, it's a highly specialized field. Yup. But go on, on your website, pen testing, you said like in it, you know, like we have pen testing. So, so say example good on network pen test. You wanna become network pen tester. So you say, if you don't know how to, website pentesting that the company, they're not gonna teach you for the job that most likely does. He said, no. I said that pen testing is a basic field, which companies will be looking for. I'm not saying you have to be an expert to get a job, but the basic level of the pen testing is quite necessary. If you want a job in, in pen testing general testing. So even if you want to be a good network pen tester, you still need to learn the basics of the pen testing because sometimes you will find port 80 is open port 443 is open in network, but not, then that is a big port, right? So you have to relate to development. That's been there. That's the one point. But again, if you become very good in, in weapon testing, there is a whole big field, right? Companies will, will invite you in private programs. There are bug bounty programs. You can give a bounty on there. You can be a source code review expert. That pen testing is again, very big field. You can, you can do a bug bounties. You can do black hat testings. You can do. You know, you can do security testings. You can do functionality, testings. You can do a lot of stuff in weapon testing. So it's, it's kind of a very big field again. So at the end, you just need to bring down to one specific niche, one specific niche, which you want to be an expert and just be an expert in that specific thing. And companies will be calling you and inviting you as an expert. And that's what happened. I'm not sure. Like I feel like or I would network testing that was on the reason is because you have not seen on the fields. I mean, in the course itself, we have not focused on everything, right? We did not focus on hardware hacking. We did not focus on bio hacking. We haven't focused on social engineering because this course is not meant to teach you everything. It's, it's meant to give you that foundation, which you need to be the person you want to be. You are actually getting the foundation. Now, you know those things, which no one else knows. Right? So 90% of the people, that one was confused. You go to any, you go to any senior pen tester in any big company, they will not know the clear purpose, what they are trying to do. They are there to do their job. Nothing else. They don't know what they want to be. They don't have any big goals. They're their maximum goal is a hundred thousand dollars salary. Oh, let's say $200,000 salary. That's the maximum, right? They don't think about that. How will you buy it? Okay. That's the simple question. How will you buy a private jet in that $200,000 salary? That debt is going to cost you $50 million? How will you get $15,000? How will never become a millionaire? If you go ahead and run behind that salary. That's more thing, right? You need to build your own business someday. That is the, that is the only way you can, you can achieve those numbers. And I mean, I have done that. I have been a millionaire, right? I have done that. And that's why I am eligible to tell you. So at the end, you, you need a business. Of course starting a business is not a game. You, you never want to start a business in, you know, in, in your starting phase, you always want to do work. You want to be getting trained by some other companies use their money, resources, sorry, but I don't like actually business. You cannot just say that I don't like business. You have to do that. This is the necessity. And you can hire business experts. You cannot have business experts who are going to run your business and you can be good at your field. You can just be a best pen tester, and there can be other business experts. You can just go ahead and hire some Harvard, , Harvard MBA or something like that. You can just, you know, find people at the end it's delegation. You can find people and get things done that you can, you can maybe come to me, right? And I can help you up to settle your own business. But at the end that that's like four or five years after things right now, the goal should be, get a job. Maybe it's a junior job, whatever. Get a job. Anyhow, get a job, learn how to do, how to work in the industry for maybe one year or maximum two years, two years is the maximum. After that, maybe just quit the job or start doing freelancing. So working on pen tests for companies, right, just to start working, anyhow, maybe money will be less, but you will get experience and reputation, right? Your, your goal should be at that time, making your reputation. Once you get the reputation, you start taking big clients, you start taking joint programs, you start getting into government work. And once you have that reputation, you open up a business. You open up company, you open, you hire 10 people. You are 20 people. You are a team. That's how you scale your business. And not that that's what you have to do. So again, you mentioned, you know, of course, or risk assessment is kind of a completely different topic. I will be happy to send you lectures on that. So I have two different courses on this management. One is the, the nest, risk management framework, which is used in government, which is open source. One is ISO. So ISO 27,005, which is a proprietary paid framework. I cannot show you the paid one because it's, again, they will, they will Sue me in the court. So I only do that in the live, but I can send you the nist one. So NIST, RMF, I'll send you the recordings. It's very easy. It's not that hard to do this management. The difference at the end is, you know, basically it's maths. So you have to do maths. That's one of the, that's one of the problems critical thinking about, so I'll send you, I'll send you. Thank you. Thank you. Right. All right. So let's come into the class, then play with escalations. As I said, it's completely specialized field. You don't have to learn it, but basically everything, you know, you need to learn basics of everything,. That's the whole point. You just need to know what it is. For example, if you need to get an idea for any time idea. So if you search for help and I'm just showing you some resources where you can follow, because there is no specific methodology for risk management, sorry for privileged escalations. If you go to bot milk privilege, escalation,ulinux privilege, escalation, you can follow this online guidance. It's kind of a good guide and there is windows privilege, escalation here. So you can just, you know, go ahead and. And then find things, that it is one of the good ones. And then they tell you, you can do an enumeration. So it's basically the same cycle. You do enumeration, you find the weaknesses and then you find an exploit and then you exploit it, right? It's the same cycle. The differences, you will enumerate a lot of stuff. You will see what is already running on this system from inside. They'll know you are doing it from outside, right? Port scanner, service scanners. Now you are already inside the machine. So you can run the commands like cat hc issue, cat hc release. So you can now try to open the files in the system itself. That's the whole point, right? And then you can maybe find applications and services. What is running in the machine? You can maybe use PS box, right? These are different, different commands. Now you are in the machine, you have the access, you are in the machine. So now you start finding these, these different, different you know commands , you start running these commands. You can, you can check has been, I have config, basically running. I have configured. You don't need to put as many there, but they just put it that you can run. If config to check the IPS from inside of the machine now. Right? All of those stuff you do enumeration. You find what is running on the machine. What kind of directories are there? What kind of is there any device, exploit, device connected to machine. You do all of that. Then you try to find exploits right on the basis of those things. It's basically the same stuff, whatever you do. But now you are trying to find the privilege, escalation exploits, which are basically same thing. They are also exploits, but they help you to increase the privilege, right? And that's, that's one of the, that's basically the smaller, am sorry what was this foot line, sorry, is it for after hacking or privilege escalation. So for example, you got a user account hacker in the house user. Now you want to become a root without password. How do you escalate your, your, your privilleges right now recommended,ustuff, which I can teach you here. I mean, what you should do if you want to be in the industry, the recommended way, which I can show you is,uOs boxes OS boxes.org. That's the website. Osboxes dot org. Go there and download as many as operating systems. You can just download the operating systems and try to have those operating systems. Every system is different. That's why I cannot basically teach privilege. Escalation on every system, you go here, virtual box images, right? Virtual box images. Vmware is also there. And then they give you a lot of operating system. They will not give you a windows because of course, that's a paid software.windows is not open source thing. They cannot give you the windows, but they give you Linux and windows. You can arrange yourself. I don't know how, but you can arrange yourself from Microsoft itself. You can download windows. So you just start downloading these opening systems. They are prebuilt free install. You just download and set up and how to set up. It's quite different than what I give you. So let me just set up one of them so I can just send you. And I said, yup, we need you pen testing. What's The most hack. Did you hack like a example, did you have most of the time windows 10 It's basically ubuntu and cent OS as not only, they are always using Linux. Windows is very rarely found in and most of the companies, because again, it's a paid software. How many licenses will the company buy for employees? It's always windows. It's most of the times that windows, Mac iOS has always also found, but still it has windows in most, most employees' computers, but servers are always either ubuntu or cent OS So, for example, if, if you go and maybe open ubuntu here, and then you say, download VirtualBox image, it will give you the versions, different, different versions of ubuntu, but just try out, randomly take any of them and try to follow this guide. This guide tried to see. So if we see, for example, you see all of these out there, the easiest one of course will be the most outdated one. This one. So I have downloaded this one. I mean, I think I have all of these, but let's, let's start with this one. They can just download from here. And let's say, I want to set it up in virtual box. You click on new and then you give it a name. I just gave it a name. It doesn't matter what you put. You just have to give it a name and then you have the choose it it is Linux and it is right. So I'll say 32 bits because I have downloaded a 32 bit version next, give it a ram. Let me just increase the Ram or something else. So let's say, let's say 2448. 2GB RAM So two, zero, four, eight should be fine next. And then you can say, do you want to create a hard disc or not No, we downloaded the hard disc from this website. So I will say, add, use an existing harddisk. Okay. And then you can find the harddisk so add, and you can find the harddisk. And I can basically go in my ISO files or media files, whatever, and then you can open a harddisk. So ubuntu 12, that is what I'm going to open up and just say, choose create. And now your machine is created That is what you have to do. Basically as i start this machine. It should work. And by the way, be forgot to add a network adapter, sorry. We forgot to add a network, You know, last time I had the issue with the machine, like it doesn't show up the IP address, Sorry, man. Oh it was some misconfiguration with, with your virtual box. I find like I've downloaded another machine. I think I sent you a picture. Yeah. That machine is that happened exactly. Same issue. Like if you download the new new machine on, On the virtual box, like it doesn't show the machines which you download from internet will not work with my setup. So these ranges like in these like these, you know, one dot ten dot hundreds range 148. They will not work with these ranges automatically because I, I have created these machines, myself, to take those ranges. Now I'm creating a range. Another one for just that machine also needs to be configured to pick, to pick that range. Right? So normally you would, you would want to keep them on bridge nat. In this case, I will put it on that bridge dot, nat as the default, when you, you may want to put it on, let's add this machine. I'm just going to show you a rough demos of how privileged escalation may look like, Starting up And let's start kali linux. And I will put my adapter on that. So i wll add this is adapter on that. Okay. So start. So ubuntu is opening here. So a password is normally always, always osboxes.org in their website. You can find it on the page itself osboxes.org. It's a very nice website. I mean, it's say it's a free project. None of that would use a name. Username is also osboxes. A password is also osboxes. Let me try to increase the resolution. It's going to suck them. So how do I increase the resolution system settings, resolution and resolution. Okay. Let me increase it to 1080p. Do you see any 1080p1920? Wait. No. All right. Let's let's just take this one then apply. Yeah. It's cool. Keep this configuration it's big enough. I think we can read everything here. Right? So this is out of this one ubuntu right? And then you have terminal in the menu. So I'm just going to open, terminal. There is the terminal and I'm trying to increase the size, but I cannot do. And that's fine. And does it really happen? Right? You can read it right. Okay, cool. So let's check. Ip if config, you can see my IP address is 10.0.2.15, which is the default nat. Right? Whenever you add a range, it always pick 10.0.2. That is the default. Okay. let's go ahead and say root licensed to pen test. And by the way, you can, you can put it in any range if you want. I mean, I can literally, I can just go there a network and I can change this to nat network. And I can actually go ahead and put anything here. Range hundred. I can put a hundred. It will work because the ranges which we have chosen are DHCP enable, and this machine is also gets enable os boxes. All the machines are enable. So if I do the exit line, the exit line r to release the ip address and then again, DST client to get the IP address. Okay. Not permitted. We are not root. Of course. So Sudo su root, uh OS boxes. In real pen test ,Do you get the IP address? You may get the IP address. It sometimes happens, they will give you IP, or they will give you a URL. You can just ping the url to get the IP. So at the end, yes, you get the DNC client, that DHC client. Okay, come on. It's taking time. I don't know if it's even working. So now, if we check the IP, you can see my IP is ten dot. It did not change. And I was expecting it will change, but I'm not sure why let's leave. DHC client is universal command for most of the Linux distribution. So Kali Linux is basically based on Debian. Debian and ubuntu share very similar architecture, whatever you run in debian is the same in ubuntu, right? So at the end, both of the Linux systems are working similar. There is something called red hat, Linux, which is a different architecture. It will probably not work in red hat and red hat. Linux, examples are cent os, cent os is, is the operating system, which is in the category of red hat. And then there, it will not work, but ubuntu and debian are same family. And in that family, Kali Linux is based on Debian. So it will work osboxes.Org. Excellent. And now we should have something. There you go, terminal , and let's check IP now, and this should be 10.100, Right. As I said, we changed the range. So this will basically pick up any IP you assigned it. It's basically taking the IP's of HCP server ten.zero dot hundred, dot eight, right? That's the IP we have. In Kali also, I think I have a hundred IP. I think I have, If config. You can see, I have access to a hundred IP. No, I don't. Okay. Yeah. This one. So I have access to a hundred IP, 10 dot zero dot 109. If I try to ping that machine. So paying 10.0.100.8, you can see, I am getting replies, which means I can communicate with that machine right now, for example, you are being privileged escalation, right? So for example, you are trying to do privilege escalation and think about this terminal in your kali linux. So in your kali linux, you hack the machine, you get the terminal, right? So things are, this terminal is in your kali linux right now. And you're trying to do the escalation and, and we are not root user. We are os boxes user here. Right? First thing I always liked to do is you name dash a, you name dash a when you do you name dash a. It tells you what operating system with what release you are using. So here you can see a this i, whatever that name was, and you can Google it. It will tell you it is 12.04 version. So this is the code name of ubuntu that is the operating system. So here, this is the Kernel version. And one of the ways to be privileged, escalation is technical version. So now I have this information, right? I will take this information, go on Google and try to find if this version is exploitable or not. Is this vulnerable or not? That is one of the ways. Then I can maybe also do something called a DP, KJ, TC kg , dash L. So DPkg l so DPkg is the package manager dash L basically lists everything that is installed on kali. So now these are the software's. These are the packages that are installed on this kali linux. So these are all the softwares that are installed. Okay. So maybe I can now just take these versions right here, these versions, these softwares, and try to see if they are vulnerable or not. So these are different, different things you have to do. And again, this guide has explained most of that, all of these commands, you have to try, you have to get all of this information, then do your research, and then do the escalation. And that is the reason it is a . Very, very specific niche. Specialized skillset is not an easy task is a very difficult task, but that, that is the reality that is what you have to do. You can do name dash r. It will just show you the kernel itself. You name dash a. It gives you the full information, the same thing. I'm just going to give you an example, how, who hack by a kernel version? So let's say you name dash r. I have the kernel version here, 3.13.012, right? Maybe I will go in my kali linux and I will tried to find it exploit for this. I can maybe say it search sploit. Or you can do it in metasploit? But searchsplit is a good tool, searchsploit. And I can just say, Linux kernel, sorry, spelling wrong. And now you can see there are so many Linux kernel exploits sign. So you can see every kernel has got some kind of exploit there, but I have a specific version. So I will maybe just say Linux kernel, which one? We have 3.13. So let's say 3.13. We still have a lot. So what is the full version 3.1.0 dash 32. So 3.1.0 30. Not that that dash 32 that does'nt matters that this specific release but this is the, is the main version. Now we got to two different exploits here, right? So similarly, now this one is a C exploit. This is written in C. This is a text file. Text file. Normally contains how to use the exploit, how to make your own expert C is the one which is already made. So I will basically, for example, I will copy this exploit. So copy, and I will basically copy this on my desktop. So maybe I'll just go to the desktop and I have folder called exploit there. There are some things there. Let me just remove them very quickly. So this is folder is empty now. So I will just search search sploit m and I will paste that link, which we copy and press enter. And it will now copy that exploit in my kali linux. Now, if I do LS in this folder, we have this exploit. Now this is the exploit. Let's read it. So more, three more. This is one of the commands you can use to read the files. First few lines here. We read it. And I would say exploit, title something, something, something, it works. It works on ubuntu 12.4, 14, 14.10,15 a lot more. Right? So it is going to one. So now kernel, sorry. Kernel plus operating system should match. Yeah. So here operating system is matching. This is the opening system is already match. Now how to use it. Do they have something I don't see. So these are all commands, right? They all commented out. So this is a user. They are given an example. You check you name dash a, you check it like that. You get the version, right. Then you say GCC the file dash o the output file. So input file, output file, right? And then once you check your ID, you will see it is the username. But once you run this expert dot slash, run the exploit, it will do something. And finally you will have the hash sign. So this hash sign means your root. When you check the id again, it will show you root. So they have given the full example there. So basically I need to run GCC. GCC is the compiler, the whole problem with Linux exploits. This is the biggest problem. You have to transfer the exploit to the machine which you want to hack. This is not a remote exploit. This is a local exploit right? This is a privilege. Escalation exploit. This is a Local exploit local exploit needs to run on the target machine itself. So we need to transfer this exploit in that machine and then run it. Okay. So I will just say a quick here cube, easiest way to transfer the exploit is to set up a web server in your machine and you download then the exploit in that target machine. Now how to set up a server, easiest way Python. You just say python dash n, python dash n and then simple HTTP server, simple HTTP server simple HTTP is capital, and then server S is, capital simple HTTP server and then give it a port. I will give port 80 and press enter. Now it will start a python server on port 80 of your machine. Once someone go to your IP address, it will open a folder which will contain all the files. So I have started a server in this location, but if I open my IP, you will see. So if I open my IP, I go to Firefox. You can see what happens. So for example, ten.zero dot a hundred dot nine, which is my IP. You see, if I open my IP address, it will show you a directory listing. And here's the content of the folder, right? That does. That is what I do now. Assume that I am in the terminal of my machine, which I had, this is that terminal. I can now download that exploit because of course it does now hosted on internet. So I can download that exploit for that. You need some, some way, right? You cannot just run Firefox because mostly you will have a terminal Access. So you need to download things. From terminals two famous commands are wget and curl both are same, both works very well. Both are installed. And windows, you will mostly find wget is installed, Sorry curl is installed and, and in linux you will find them, wget is also installed. So it doesn't matter. Whatever is installed in, whichever machine, you know, Wget HTTP and the IP address. So ten.zero dot a, let's say a hundred dot nine, which is my IP address, right. And then slash, and then the file name. So I can then again, a C so I can actually just say, right click copy location. And then I can just paste it here. And this is the full location. So basically slash file name, right? So three seven two nine three seven two nine dash three seven two nine two dot c. Right? I can do that. I will not do it right now because we may not have permission to do this kind of, okay. Sometimes you cannot turn the wget and you can save files when you have restricted user. So always, always, always go ahead. And first of all, go to temp for them. Cd slash temp. Okay. Because temp folders always writable you can write whatever you want in go to temp folder and then download. I just pasted that command. You can say, you can see save file has been saved. If I do LS, you can very well, see, I have downloaded that file, right? That has the file in the corner. Now, once you have the file, you need to compile it to compile it. You need a GCC. So as you see here, so I can just close it and you will see in our Python server, there was a get request coming from this machine dot eight machine, right? The last request, which came, which is a vulnerable machine and download it, I'll just cancel it. I don't need it. If I do more on the file, we can see, we need to run a GCC. But the problem is GCC is a software and it is not installed on the machine. There can be very easy case. GCC is not installed on your target machine. You cannot, you cannot do anything. Basically. You, you literally cannot do anything in that case. The only option you can use in that case. So for example, GCC is not installed here. What you can do is you can make a virtual machine, and this is the practical thing that you will do. You will make a virtual machine with the same operating system, with the same kernel version, same operating system, same kernel version. You install GCC in that you compile the exploit in that. Then you transfer that compiled exploit, right? That, that file, which you compile after this command, that file, which you get you transfer that file them. But so, because compilation is done in this same environment, you compile it manually into a simulated environment, which is the same version of the operating system, same kernel version, which is kind of a big challenge to find that same thing. And again, it's very expensive stuff. So your client's budget needs to be kind of expensive. In that cases, it will take easily one day for the whole day to make all of that. So one day extra buget. So that, that is something that you may have to do, but let's, let's try to see if we have GCC in this machine. So I would just say GCC, I would press enter and you can see GCC error no input file dound basically we have GCC. That's why it's giving the error that no input file was found So we said GCC, and then we just give it to the file name, which is three dot. Something we didn't say dasd o output. We need the compiled output file. We need it. Just give it a name. I will just say exploit. I will just make a file. Whose name is exploit, press enter it has been compiled, now you can see if I do LS again, you can see we have a new file. Now which is exploit, right? This is the new file And this is the exploit This is the real exploit, which you have to run. And now this is in the green, green color, but you always should check LS dash lh. And ls is the list dash lh human readable, always check here it should have X. Okay. So for example read write? And then this one is X execute the right execute. You should always have execute permissions. Otherwise you will not be able to run it in this case. We have it by default in case you don't have to do ch mod. So ich mod CH MOD +X, which is execute. You. Just add the executable permission on the file. Once you do that, you will have the executable permissions. So if I, if I tried now again, you can see we still have the same permissions, but if it was not there. So just to show you, if I remove the executable permissions by doing minus X, if I remove them, and then if I show you, you can see now we don't have any executable permissions here. It does only read, write, read, write, read, write. So we need executable permissions. That means you cannot run it just say plus X again. Sometimes it will automatically come with the exploit compiling sometime it will not consult. Always check that first in this case. Now we again have it. So now we can run it again, we are not root user, I'm going to run it To run it simply just dot slash exploit and then press enter. And you could see we are root this hash sign, this, this hash sign here. If you're don't believe you can just say who I am or who am I sorry? Who am I? You are root. That is how you do privilege. Escalations. That is one way to do privilege escalations in one operating system with one specific kernel version. That is very small thing, which I just taught here, but it's a specialized field. It's very big field. Again. It's all about finding the exploits, the same methodology, right? You cannot say, I am. I'm going to learn pen testing. You need to be specific. What you want to learn privilege escalation is the same field. It's a very big ocean. You cannot bring it completely. You need to be specific what you are going to do in privilege esclation. Is that making sense? Any doubt? Any comments? Oh, it's fine for me, but check the steps again. Of course you need to review the video and you have to do this. Yeah. For me does make sense. Yeah. It makes sense when they say you need to compile. So what did we do in the compile? Right. Okay. So we don't compile it? And I mean, is it not supposed to show something like kind of essential or something? Okay. Yeah, it really doesn't matter. It will not show the extension in some cases it may, but normally it will not show the extension. It really doesn't matter if it is having extension or not. And in case of windows. Of course. I mean, in Linux, it doesn't matter in case of windows, you would want to have the exe extension, right? The EXE in Linux, it was just a dot slash tar and windows, you may want to have the EXE extension and then run it. And then it's your choice. I mean, I'm just going to exit it, exit that PX ID. I just exited the root shell. I am back as user. Okay. So if I,udo that GBCC command again, here, I can just put DB. So exploit don't DBB DB is the format we use in Debian, and ubuntu I can put it in. Now you will have a file called exploit.DBB. You can see exploit.dbb, right? So it's really actually your choice if you want to put extension or not at the end of year, running it as a, as a script, the terminals os not required. Right. All right. Yeah. That makes sense. Well, the original file, what extension is in you file what's was the extension for that dot c. The original was a dot C. So it's written in C language C language Okay. Okay. Now that's just that's okay, Right? That was the source code of the, of the, or of the actual file. Right? So whatever software you use it, it has been written in some language. So the source code of that thing, Right? And the good thing is C Python, Java, Ruby, these big languages, you know, the famous languages. They are cross platform languages, so they can work on Linux. They can work on mac, they can work on windows. That is why we have to compile them in the same environment that we want to run it. So I can take the C code and I can compile this code in windows machine And it will, it will compile it, but it will not give me anything because this exploit is not made for windows, but I can compile it in windows as well. I can compile anything okay. Ubuntu is different,Kali Linux is different. Operating system is different. It is Debian. Kali. Linux is Debian, but I can still compile it in Kali linux as well. So let me show you. Okay. So, so that means, that means if you need to run that the windows. So you need to compile it to dots, to have dots, c extension. I mean, it's not required again. If you're going to run it from command prompt from terminal, extension is not required. Yeah. But like I have the mastery of Python, but what I'm saying for you to run it, I know there are like, if you, for you to run a Python script, you can only Python script. But I mean, only window you, I think you need to compile it. So for that, for that, for that, for that program to run, let's say you create a program with Python. I think you need to compile it for it to run on the window. If I take am I think that's how it works. Ya that was the compiling stuff that does what you're doing compiling. Yeah. Okay. So if I try to do a here, you can see, I try to compile that same script. It should have worked. The only reason it is not working is there is some problem in the function. It can be because my GCC is new. And the GCC, which this, this source code has been written is old one. Right. So maybe I can downgrade my GCC to the old previous version of this PC. GCC is a software by the way to compile, right? So GCC is a compiler. I can download the older version of GCC and then run this, this same script and I can compile it in kali linux as well. So at the end, you can compile it, whatever operating system you want, but it will not work if the operating system and kernel do not match for what it was made for. Right. Making sense. Yeah. Yeah, it does. So does this only affect I mean what's it called C language .I think in Pikeville when you compile it, you can't run it in any, any platform. I mean, any platform you don't need to look at the con the Cornell I mean, you can run on any. You have to run python on any version of window. So in case of window, but that is still windows, right? Operating system is windows. It is just different version, Right? Yeah. That's not what I mean, like, like windows seven, windows 10. I think it can. If you compile with Python you can run it on windows seven, windows 10. That's what I'm saying. So is it just, is it because this is just a Unix or Linux system as well? We have to choose the kernel that this will run So I can still compile that in kali linux and then run it in a window. It will run, but it will not work All right. The exploit will not work. All right. Yeah. I get that Because i will even show you, because if we read the exploit code, let me show you by reading it. If you read it, the exploit code. Okay. What is the three, right? Yeah. If we read this code. Okay. Just scroll down and see the code here somewhere. Mmm. I don't know where it might be. I mean, it's a might be somewhere you have to see, but it will, it will tell you that this code is actually taking the version number, where it is being compiled and then putting different variables. If I am compiling it and it will make a different product. If I'm compiling it in ubuntu 16, it will make a different exploit. So these kinds of codes, they are always made for different, different versions, right? So whatever version you compile, it will make exploit for that version only. And the tested version are only these 12, 14, 14, and then this one, these four are the tested ones. So that's the whole point you can of course try it. So that's why I showed you that OSboxes right now, go on os boxes and, you know, just, just try to try to attack multiple Linux kernel versions because kernel is kind of the first thing you always try to do. I mean, if you can get it if you can get the escalation through kernel, that's the best thing you can get because that's the easiest one to find programs. And then finding expeloits for programs is kind of a big mess. So a kernel versions exploits are very easy and they are recommended once. If you can get them, that's the best thing you can happen to you? One more thing I want to show. Okay. One more thing i want to show. So I want to show windows as windows one as well, let me just close this up. I mean, similar way, you can find for windows as well. How does escalate? But I want to show the automatic way as well. So for that, let me power on the windows, I guess. Sorry, virtual box. There you go. I'm gonna power on my windows. Whereas windows, hereis the windows And there are multiple ways you can do this automatically through metal spoilt. So that this kind of a thing, you should try it. So let me change my network adapter. I want to be in the range of 148 so 148 Nat network, 148. And let me refresh my IPS DHC client. That's r oops, r host capital. Here we go DHC client. Clear IF config. Alright, there you go. So we got 148 IP. Okay. Let's see. And windows is powered on let's log in. What's the password, anyone licensed pen testing? Hmm. So this is a non root user, right? This is, this is not antiauthority. This is, this just hacker in the house. This is just the admin user. It's not a anti authority. Anti authority is the top user in windows systems. Ulet's make a payload, let's make a payload and let's hack it very quickly. So I'm going to say MSF,uMSF. I mean, I can actually do it using that. UI can do it using that eternal blue exploit, which we have, or I can create my own. So let me actually create my own MSF venom. MSF venom is used to create your exploits, thats the payload, and then you can give payloads. So I don't know the payload, so I will search for it. L is the list list payloads. Uhhere you go. I am just finding payloads. Hmm. Let's see. It's taking time. And he goes, these are all windows those payloads we have. So I will go with a payload which is x86 because our target is x86, a windows and meterpreter a reverse TCP. Reverse TCP. Yep. That is the one I want to choose you. Go copy clear. So now I will say MSF venom dash p the payload and then dash dash list. And then dash options . So this this MSF venom is the part of metasploit framework. It's another tool just like MSF console is the one of them. So it is also a part. It is used to create payloads and just creating one. Here are the options of that specific payload I can say l host right. So yeah, that's good. Um host is going to be my IP and l port i can choose whatever. So that's fine. Let's do that. So I'm going to just say clear again, the thing they come on, I don't need this options. I just need L host equals now my IP, what is my IP? So let's see. So I can just find my IP. If config my IP is 10 dot 11. Yeah. So that is the 11. So I'll just paste it here and L port. I want to open a port, which will be, het's say seven, six, seven, six, randomly . Just did for right. And umo we can save it. So format format will be exe and they can save it on my exploits folder. So the default that we created on desktop, sorry, desktop. And then exploit. And then the name of the file will be exploit dot EXE. So that is how I'm goining to create this exploit. Umsing MSF venom. There you go. We created a file. So if they go to CD exploit, what the hell? Okay. we are not on the desktop Right. And that was the problem. Okay. Let's let's do one thing. Let's let's manually go there. So here we have this exe file. This is a virus file,here is the payload in social engineering. You know, you normally create your payloads and then you send them, I can just copy this and I can just paste it here. And my Oh, I think I can do that. Okay. Okay. I thought it was possible directly. Can I do that? Hmm. Okay. I cannot do that, but again, I can, I can set up a I can set up a Python server here and, and import it using that. So I'll just quickly set up a Python server CD. The desktop exploits, clear the screen. And then I can basically set up a Python, python server dash M modules simple HTTP server simple HTTP. Server e was missing on port 80 i want to run a server So i just started? My IP was if I'm connected on my IP, I remember that. And now in this machine, I'm going to download that file. That infected file I'm using internet Explorer because that's the only thing we have to go. Okay. No HTTP, ten.zero.148.11. Then you go, we have the exe file. Let me download that and let's save it on desktop saved. There you go. That old sound heard after long time. Now this is the, this is the exe. And so we downloaded that now, because if I open this thing, if I open this file as a user, it will send a connection back to my machine on port. What was the port guys is anyone remember? It was six seven, six, seven, guys. Anyone remembers? Yeah. Six, seven, six, seven, six, seven, six, seven, six. So I need a listener. I need to start a listener here. I can listen to that connection. Multiple ways I can do Netcat I can use metaspoilt. Like, I mean, there's not a split, so MSF, venom, sorry, MSF console. I'm just opening msf console there. And I will listen. I'm on seven, six, seven, six, four. So I'll say use exploit multi handler, multi handler clear this screen show options and set. Yeah. I mean, it doesn't show anything because we need to send the payload as well. Set payload windows meterpreter. Come on. Met. meterpreter reverse TCP, here we go clear the options. Show options again. Okay. Now set l hosts Okay. And my l host am going to put zero zero, zero, zero. It can listen on any, any interface. I really don't. Yup. Set. Um l port will be seven, six, seven, six. That is the port where we are going to receive the connection. And now clear the screen, run it. Now we are running a handler. We are listening for any connection that comes on seven, six, seven 6. If I double click here, if I run this, if I run the software, nothing happens. But over here we get a meterpreter session. Right? So we basically brought a session, not if I, if I do shell the, we have the session. But if I try to do Sys info system info. Oh, a lot of information there, right? Yep. You can see it been Microsoft windows XP, right? So you can just see that,ulet's just do help. And these are all the options. The first option for privileged escalation is always get system get system. How do you get the system will automatically do privillege esclation for you? This is not available in all the meta in all the payloads. If you are hacking the machine using meterpreter also only in case of windows, you have get option, get system option. Yeah. Get ribs. Is that working? Yeah. So for example, get ribs. We'll show you what privileges do you have in, in my case, I have all these privileges and sometimes they are not enough. You will find very small little privileges and those cases you may want to go in and, and find other,uyou know, you may, go and try ahead and try to escalate to esclate your privileges, okay. One thing I want to check is net user. So net, user, yeah. You can see, these are all the users, which are available on my machine and I am logged in as hackerinthehouse.com by the way. But there are other users as well. Right. I can escalate. I can escalate right. And the authority is not given there, but that is the highest one. So to do escalate, I will actually go ahead and say, get system, press enter it will try to get the privilege escalation. And here,it automatically says. You actually got it. We actually got it. Okay. But sometimes it will fail. Okay. That is something you should always try. It may get it. But in most cases it will fail 40% chance. It will get that's the one thing you always want to try, but this thing will not work on every, every single operating system. I believe currently it is only supported on windows in meterpreter, shell. I think I closed this session. Now I will run the I will run that. I will run this again. I'm running this again, session and I will get the, get the session back again here. Okay. So we've got this session two now again. Okay. In some cases you would want to use a local privilege, escalation post exploitation. There is a post exploitation here. If I background the session background, and if we search for search for suggester. Okay. So there is an exploit suggestor it's a privilege, escalation exploit in metasploit. Okay. This is what I was trying. I can use this, use this, and I can just show options. This will require you this session number. Okay. So I'll just say a set session and session. Number two is the current one and show descriptions. Do you want to, if you find some exploit, do you want their descriptions and additional information? Do you want that? No You can make it true if you want, let's keep it false. Doesn't matter. Let's exploit. Now here, it will collect a lot of information. It will do everything. It will collect the currently installed programs, service, patches, currently kernel version. It will take a lot of information automatically, and then it will try to generate a report and then maybe suggest some things. This is again, because it is automatic. It will not be a hundred percent correct. It will. It will miss a lot of things. It will take a lot of things extra here. In this case, you can see 29 exploits have been found so we can escalate using these 29 different exploits. Okay. But at the end, if we see 29 exploits I've been trying, sorry, checking different 29 exploits based on the information it got, it collected the information. It made a list of tasks. It tried 29, different tasks 29 exploits And then these are potentially possible. So this can not be validated. This is vulnerable. This is vulnerable. So you can use this one, right? Trap popup menu. Very, very common. Okay. In windows, windows, server, windows, XPS, all of the windows. One. This is very common vulnerability, trap menu open. So randomly, it's just showing that there is this one, a client copy. This is also very common one. You can take any of these really doesn't matter. I'll just randomly just take this one. Yeah. I'm randomly doing it. I have no idea of this at the moment. It will work or not. And this is the first time I'm teaching on this machine. By the way, on XP. I have, I have shown it on windows 10, earlier of other batches. So use this show options. Again, it will require a session number because it's a local exploit privilege, escalation as well. So session number set. So set session true lets us exploit it. Once you do exploit, you will see you get another shell. Okay? You see meterpreter shell session three open why three, because you were able to escalate. Now you are anti authority. If you see here a process has been created, injecting the code, whatever it did exploit, finished waiting for hopefully privileged payloads. So maybe this is privileged. That's what it is. Trying to tell you. So this does not exist, actually my process, okay. I am running here as a mocker.exe. So that, that trap popup that has launched this, this process, which is a not mocker.exe. This is my process. If I, if I close this process, my shell will die. I am running as anti authority at the moment. If I close this shell will die and I can prove that I can go here, I can go ahead. And maybe just not sure if I can cut it from here, but let me try. Notepad. So where is notepad I can go here, right? Click end process. Maybe I will not be able to. Okay. I ended it. Let's go back and let's see if we have the Shell or not and you can see meterpreter shell session three closed, why it was closed because I ended up process, which was running as antiauthority. So I had antiauthority access. That is why this was a running at, notepad the first shell, which I have the session two, which I have that does running at exploit dot exe at the moment. If I close that as well, it will, it will close my normal shell as well. If I just say exploit already exe if I end this, you will be able to see one more shell will die, shell Two has also, die Right. So that one was running as a hacker in the house user, the second one, which I escalated, which was running as notepad, which was running with anti authority privileges. Now that's making sense. Is that clear now? Yeah. Right. So with that, I hope you enjoyed privilege. Escalations. It's quite important. So the part which we covered today is the base and that is at least I expect, you know, as a hacker, as a pen tester, at least you should know that much, if not more than atleast that much, maybe, you know, just go on botmill that website, just go ahead and read these, these commands atleast. Just try to see what you can do with these commands. Right. This what was that website got milk. So it's a very famous one, got milk. Just like got milk and then just say privilege, escalation. And that will be the first, the first lane. Right. Got milk privilege. Escalation. Yep. All right. Any doubts? Anyone, if you don't have, I mean, if you don't have any doubts, then what I am expecting now is that since we are at the end of the sessions, what I expect is we should do a report writing session tomorrow. And the next week we should do a real life test where I can maybe invite some of my client. They will give you a project and you will have to work on that. On that, that fields. That will be cool. That would be cool. Right. Maybe have a small project. I mean, I don't expect them to give you a $10,000 worth of project, maybe one machine or two machines, a real machines, where you can possibly try to hack them you have to sign a lot of paperwork, but let's do that next week. We can, we can hopefully get it if not next week then after that next week, I mean, I just need to talk to my clients and get you a project, but we will definitely do a live project tomorrow. Let's let's plan the, the report. I think that is very, very easy work report writing. And I can then explain that right.
