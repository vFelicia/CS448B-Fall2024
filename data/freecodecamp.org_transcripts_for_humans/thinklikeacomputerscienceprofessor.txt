With timestamps:

00:00 - in this course radu will teach you how
00:01 - to think like a computer science
00:03 - professor radu has a phd in computer
00:06 - science he teaches computer science at a
00:08 - university as well as on his youtube
00:11 - channel in this course you will see
00:13 - radu's thought process as he codes a
00:16 - project for the very first time many
00:18 - tutorials show you how to build a
00:20 - project that the instructor has already
00:23 - fully thought out beforehand but in this
00:25 - video you will learn what really goes
00:27 - into building a project from scratch and
00:30 - he does it all without even referencing
00:32 - the internet leave a comment with any
00:34 - insights you learn from watching his
00:35 - thought process
00:38 - hi in this video you'll see how i made
00:41 - this avatar using just vanilla
00:43 - javascript and html canvas
00:46 - i made this while competing with samwell
00:48 - so
00:49 - it wasn't scripted and we didn't even
00:51 - know what project we're gonna do when we
00:53 - began
00:55 - so don't look at this as a tutorial
00:57 - because i do a lot of mistakes in it
01:00 - but i really think you should watch the
01:02 - video
01:03 - because it shows the thought process of
01:06 - how to
01:08 - solve a problem like this in the real
01:10 - world and tutorials are not like that
01:13 - tutorials just show
01:15 - step-by-step instructions
01:17 - of
01:18 - solving a problem and those were usually
01:21 - polished well before recording the
01:23 - tutorial so if you really want to be a
01:26 - better problem solver you should check
01:28 - it out
01:33 - so the project we're gonna do
01:36 - is going to be
01:39 - an avatar
01:40 - i'm going to make something that kind of
01:42 - looks like me and
01:45 - maybe is able to talk or or something
01:48 - let's see about that
01:50 - and
01:51 - i'm going to do this project in
01:56 - html and javascript so it's going to be
02:00 - like a web page
02:02 - and i'm also going to do this without
02:05 - using
02:08 - any kind of
02:10 - libraries
02:11 - or
02:13 - external code
02:15 - so the reason i want to do this now
02:18 - particularly
02:20 - is because i'm going up against
02:22 - somewhere and um
02:24 - let's just say that i am about twice as
02:27 - old as he is and even though i said i'm
02:30 - not gonna be
02:31 - pulling my punches
02:33 - um
02:34 - i think i need to set some additional
02:37 - rules for myself
02:39 - and these rules are going to be
02:42 - [Music]
02:44 - not to use other code this is something
02:47 - i normally do when i make my tutorials
02:49 - but in this case i'm going to definitely
02:52 - try not to look at other code and
02:54 - actually i'm not going to use
02:57 - the internet i'm just going to try to
02:59 - code this
03:01 - using what i remember about coding in
03:03 - javascript and
03:06 - let's see how this goes so
03:09 - i really think something like that is
03:11 - needed but
03:13 - having said that i won't
03:15 - hold anything back so let's see how this
03:19 - goes
03:20 - i begin with
03:21 - a simple html and
03:24 - in the body part
03:26 - i'm going to add the canvas
03:30 - element
03:31 - let's call it
03:34 - my canvas
03:36 - like this
03:38 - and let me close the body
03:40 - and
03:41 - if you are watching this it means that
03:44 - this video recording is pretty good
03:47 - even though
03:49 - this is unscripted and we just selected
03:51 - this project a moment ago
03:53 - so
03:55 - i think it's good for you to watch a
03:57 - video like this from time to time
03:59 - because even though it's very long it
04:01 - has something that normal tutorials
04:03 - don't have and that's
04:06 - showing how the thought process goes
04:09 - when building something like this so
04:11 - normally when you watch tutorials you
04:13 - see people
04:14 - doing something that they have done
04:16 - before and they have made made it
04:18 - previously and they just show you the
04:20 - final steps most of the time
04:23 - but you don't realize all the thought
04:26 - that went into it and all the
04:28 - experimentation and things like that
04:30 - so
04:31 - if you watch this now it means i decided
04:34 - to post this video because i think it
04:36 - has a lot of educational value in it
04:41 - even though it's
04:43 - far slower paced than my other
04:46 - tutorials
04:47 - so
04:48 - hope you'll like it
04:50 - now
04:52 - i'm gonna also talk when i do these
04:54 - things most of the time and
04:57 - it's going to slow me down a bit but
04:59 - i'm not going to talk normally like in
05:01 - other tutorials
05:03 - so
05:05 - if it's something important that i'm
05:07 - doing i will
05:09 - explain more more carefully what that is
05:14 - now
05:16 - i refreshed the page here in the browser
05:19 - on the right and i've actually opened
05:22 - the index.html file that i started
05:24 - defining here and you can see the
05:29 - tab has changed its name there to the
05:31 - title that i declared and the the canvas
05:34 - is added here inside this page it's just
05:39 - transparent and in the stop top region
05:43 - so
05:44 - let me start to
05:46 - define some javascript next and
05:49 - i'm going to do that here in a script
05:52 - tag
05:56 - i will use many external files at some
05:58 - point but in the beginning i just want
06:01 - to set up this html page somehow so i'm
06:05 - going to get access to this
06:10 - my canvas
06:14 - let's just call it canvas
06:24 - like this
06:25 - and
06:26 - i will set its width and height
06:31 - let's say 300 pixels
06:39 - many people also ask me
06:44 - why do i disable the helper tools
06:47 - from visual studio code
06:50 - like it's not doing any autocompleting
06:53 - for me or telling me if i have typos or
06:57 - things like that and that's mostly
06:58 - because when i do tutorials i want them
07:01 - to not interfere with what i'm coding at
07:04 - the moment so
07:05 - often those windows just block parts of
07:08 - the code that i might be explaining and
07:11 - it's not very good from a pedagogical
07:15 - standpoint
07:17 - so let me give also a style here to the
07:20 - canvas otherwise it's still transparent
07:23 - and we can't see it there
07:27 - so
07:28 - i'm gonna say that the canvas is going
07:30 - to have a
07:33 - border of one pixel
07:35 - solid and black
07:38 - like this and if i refresh
07:41 - now i see the canvas element
07:43 - here
07:46 - so
07:47 - let me also align this to
07:56 - center actually i'm going to keep it in
07:59 - the top left corner i i prefer it like
08:02 - that and i will remove this extra margin
08:05 - from here it's going to make some things
08:07 - easier
08:08 - as we go
08:10 - so let's say here margin zero
08:18 - and now you can see this canvas over
08:21 - there
08:22 - okay
08:23 - now
08:24 - on this canvas i'm going to draw a
08:26 - character and i'm going to make this
08:28 - character a procedural object so it's
08:31 - going to be drawn using mathematics and
08:33 - lines and curves and different kind of
08:35 - shapes and colors and things like that
08:38 - but i'm going to
08:39 - um a drawing i made of myself a long
08:42 - time ago which i'm using to
08:45 - brand my my channel as a as a reference
08:49 - so i add it now here
08:51 - inside of this
08:53 - visual studio code
08:55 - project
08:56 - and i'm going to actually draw this
09:00 - image this jpeg
09:03 - on the canvas for reference to begin
09:05 - with and then the lines that i'm going
09:06 - to draw are going to be things that
09:08 - define this
09:10 - this character here
09:13 - so let me
09:14 - go back here and get a reference to the
09:18 - context for drawing on the canvas and
09:21 - that will be
09:23 - get context and i'm going to be using
09:25 - this 2d context
09:29 - let's see if i have enough time and
09:31 - energy to make this avatar even 3d a
09:33 - little bit
09:34 - but
09:36 - at the moment
09:37 - ideas are plenty and
09:40 - i should stick to simple things and have
09:42 - something that works first and then
09:44 - expand somehow it's not not easy
09:48 - so with the context i'm going to draw
09:50 - the image
09:51 - uh
09:52 - draw image
09:54 - method
09:56 - uh
09:58 - i need to get the image first so let me
10:04 - get the image by saying
10:06 - [Music]
10:10 - new image and the source of this
10:14 - image is going to be me dot jpg it's
10:18 - here in the same directory
10:20 - and i'm going to draw this
10:22 - image
10:23 - at
10:25 - 0 0
10:27 - coordinates
10:28 - on the canvas so if i refresh now
10:38 - nothing happens
10:40 - let me try to give this a width and a
10:42 - height of
10:44 - canvas width and canvas height
10:52 - now
11:03 - so for some reason this doesn't work
11:05 - let's see
11:06 - is the image existing in memory
11:15 - yeah that should be there
11:18 - so here i'm getting the context and i
11:21 - have the image and i'm
11:25 - drawing the image
11:32 - maybe
11:33 - actually you don't have to specify the
11:36 - location there let's see
11:40 - now
11:57 - oh what is wrong
11:59 - so the image is there
12:02 - but if i try to draw it
12:09 - it doesn't appear on the canvas
12:12 - what if i just want to put it in the
12:15 - background of the canvas canvas um style
12:20 - no i can't do that
12:36 - okay
12:37 - so
12:38 - it actually exists and it's there but
12:41 - for some reason drawing it on the canvas
12:44 - doesn't work
12:50 - why
13:23 - okay so three arguments required
13:34 - i don't remember exactly
13:36 - all the
13:45 - all the parameters for this method
13:59 - can i draw anything else on this canvas
14:02 - let's see
14:03 - ctx
14:05 - move to
14:07 - begin path
14:10 - ctx move to
14:13 - zero zero ctx
14:15 - line to
14:17 - 300 300
14:20 - and ctx stroke
14:24 - okay so the line is just fine but then
14:28 - ctx draw image
14:33 - img
14:37 - i think this should draw it
14:41 - starting at the zero zero coordinate
14:43 - there so something is strange
15:09 - a tough start apparently i don't
15:12 - remember simple things like this even
15:16 - so
15:20 - canvas works and it's initialized
15:22 - properly but when i want to draw it
15:24 - it doesn't appear there so what are the
15:27 - arguments here
15:28 - if i just put a draw image it says that
15:31 - it needs
15:32 - two more arguments
15:40 - so
15:45 - can i get the hint of what is this
15:55 - of what methods are available draw image
16:33 - not very useful
17:09 - oh boy
17:15 - how can i have problems with things like
17:17 - this now i'm getting worried
17:21 - so
17:22 - there's no internet thing
17:25 - it's scaring me right now
17:28 - but
17:29 - something here needs to work so what is
17:32 - the problem
17:39 - it is the correct name of the function i
17:42 - saw it here when i looked at the
17:45 - functions available here
17:51 - so if i type here for example
17:55 - ctx draw image without calling it
18:02 - it shows his native code so it i can't
18:05 - inspect it
18:11 - at least i don't know how
18:19 - oh here i get some information so x y
18:24 - width and height
18:29 - oh okay
18:35 - there are multiple versions of this so
18:38 - one it's with the x and y and you
18:40 - specify also width and height so it
18:42 - should work
18:44 - with zero zero and
18:47 - for example 100 100
18:52 - what
18:53 - why does this
18:54 - ah
18:57 - the image is not loaded
19:04 - the image is not loaded i tried to draw
19:07 - it
19:08 - before the image had the time to load
19:13 - horrible start so
19:16 - uh
19:17 - now it works it's a small image there
19:20 - let's just put it here to be
19:22 - [Music]
19:24 - canvas
19:25 - width and
19:26 - canvas
19:28 - height
19:29 - like so
19:30 - and i don't need this line
19:34 - line 2 anymore this code right here
19:38 - phew i really started to be worried
19:40 - there for a moment now before i draw
19:43 - this i actually want to draw it
19:45 - transparent so global alpha set to 0.1
19:51 - and
19:53 - then i'm gonna reset global alpha to one
19:56 - afterwards
19:58 - uh two transparent maybe
20:01 - four
20:02 - okay and now i'm going to try to draw
20:05 - this shape
20:06 - using
20:10 - using lines and curves and things like
20:12 - that and i will start with the head
20:15 - but before i start guessing these
20:17 - coordinates is going to be horrible
20:21 - really
20:22 - so let's me
20:24 - i'm going to write some code that helps
20:27 - me take coordinates by clicking with the
20:29 - mouse first so i'm going to say
20:33 - canvas
20:35 - uh
20:37 - add event listener
20:41 - mouse
20:42 - down
20:44 - actually
20:46 - click i think it's better
20:49 - let's see if it works and um
20:54 - get
20:56 - chord minutes
20:58 - like this so a function for get chords
21:02 - uh with the event
21:05 - like this and let's just uh
21:08 - log here
21:11 - edt.x and evt
21:15 - dot y to see if the coordinates are
21:17 - correct
21:19 - and uh refresh this and now when i click
21:22 - this
21:24 - i'm getting
21:26 - 0 close to 0 0 in this corner
21:29 - close to 300 300 in that corner so
21:33 - clicking gives me the coordinates from a
21:36 - point that i
21:37 - clicked on there so this is going to be
21:39 - very useful
21:42 - and let me just prepare here a function
21:45 - called
21:46 - draw
21:47 - me
21:48 - for now
21:50 - code will become much better later when
21:52 - i
21:52 - figure out all the things i want to do
21:54 - with this so i'm going to figure out the
21:56 - end result of this
21:59 - avatar as i'm making it
22:03 - it's
22:04 - gonna depend on
22:05 - the things that i know how to do and
22:08 - also
22:10 - um the time that i have and things like
22:13 - that i have a meeting in about
22:15 - two hours a little after two hours over
22:18 - two hours so
22:21 - let's see if i continue after that so
22:23 - draw me
22:24 - here is going to be
22:29 - called after the image is loading and
22:31 - after i'm drawing it here on the canvas
22:33 - so here for example i could draw the
22:36 - head
22:38 - let's draw just a line first from this
22:41 - point right here to this point right
22:43 - here so these are the coordinates that
22:46 - i'm going to use
22:48 - i'm going to say ctx
22:51 - begin path
22:53 - um
22:55 - like that ctx move to
22:58 - 149
23:00 - 34
23:01 - and ctx line
23:04 - to
23:06 - 151
23:08 - two two zero
23:10 - like this
23:13 - ctx stroke
23:17 - like this
23:18 - and now if i refresh i'm gonna get a
23:21 - vertical line here like that so
23:24 - um you can see that this code is helping
23:28 - me so that when i click on the screen
23:31 - i get the coordinates and i don't have
23:33 - to guess these points
23:36 - by
23:38 - trial and error
23:39 - and of course i can
23:41 - fine tune these points for example i
23:43 - probably know that this should be
23:46 - actually 150 150 which is the middle of
23:50 - this
23:52 - canvas there so now the line is
23:54 - perfectly straight before it was a
23:56 - little bit off center because i made
23:58 - mistakes in my licking
24:00 - normally you want mistakes when you draw
24:02 - things like that because something with
24:05 - not perfect symmetry and
24:08 - if it looks a little bit different on
24:10 - one side than the other then the end
24:12 - result is better
24:14 - but
24:14 - for this first part i'm gonna stick to
24:18 - it like this
24:20 - and at the end we'll see about
24:21 - normalizing these coordinates somehow so
24:25 - we'll get to that hopefully
24:28 - okay so this kind of works let me reduce
24:32 - this transparency
24:34 - i mean make it even more transparent
24:38 - maybe
24:39 - like this
24:40 - okay i kind of like that
24:44 - thing right here
24:46 - uh
24:48 - okay
24:50 - so i have just one line let's add a new
24:53 - line to see also the width of the head
24:56 - here
24:57 - so
24:59 - something like this
25:22 - yeah i used 130 because i want it to be
25:26 - perfectly horizontal here like so
25:29 - and 75
25:31 - to 15 i think that these are
25:35 - proper pretty much
25:40 - so here i just want them to be on the
25:42 - other side of this 150 if
25:46 - this is going to be symmetric
25:48 - and i think it's actually not so 150
25:52 - minus
25:54 - 75 it's
25:55 - 75 150
25:58 - plus 75 is
26:00 - 225
26:01 - so
26:03 - let's
26:04 - make this
26:05 - fix it a little bit already
26:08 - so now you can see already that the
26:10 - initial drawing that i made of this
26:12 - avatar was not perfectly symmetrical and
26:16 - maybe i want it to be symmetrical at
26:18 - least for now
26:21 - okay
26:22 - but
26:23 - this is now somehow centering the head
26:25 - right there
26:27 - uh let's draw the shape of the head
26:30 - somehow
26:32 - so i'm gonna begin a new path
26:36 - and i'm going to draw a line
26:39 - from
26:40 - this point right here to this point
26:43 - right here next
26:47 - move to
26:49 - 150
26:50 - 34.
26:55 - and
26:57 - 75
27:00 - 1 3 0.
27:08 - okay but this line is going to be curved
27:11 - somehow so actually i'm not gonna use
27:13 - line two here
27:14 - i'm gonna use um
27:19 - quadratic
27:21 - curve
27:22 - to
27:23 - that point but for the quadratic curve i
27:25 - need to give a control point
27:28 - somewhere
27:32 - maybe somewhere here 80 46 let's try
27:36 - that
27:41 - okay this is pretty much
27:44 - what i would expect the
27:46 - head to look like there
27:51 - but i have a feeling that this quadratic
27:53 - curve is not good because it's going to
27:55 - give me pointy
27:57 - pointy things there
28:00 - um when i'm gonna
28:02 - mirror this on the other sides
28:05 - but actually
28:07 - even if it's well let's just try
28:09 - so i'm gonna do another quadratic curve
28:12 - too and let's add the control point
28:16 - here
28:17 - like
28:19 - 94
28:20 - and
28:22 - 196
28:24 - and then the end point is going to be
28:26 - this bottom one so 150 to 20.
28:30 - i should actually label these points as
28:33 - well so here if you can look it's a
28:35 - little bit pointy but eventually this is
28:38 - going to get covered by all this hair so
28:40 - i don't need to worry if it's not so
28:42 - perfect there so having this now i'm
28:45 - going to actually
28:47 - copy this
28:48 - on
28:50 - the right side
28:56 - and i don't really like these numbers
28:59 - they are becoming way too difficult to
29:02 - somehow
29:05 - calculate all the things so
29:07 - i'm not going to do anything anymore at
29:09 - this stage i'm actually going to scale
29:12 - this
29:13 - canvas so that
29:17 - the center point is going to be here so
29:20 - this is going to become the new 0 0
29:22 - coordinate and everything else is going
29:24 - to be
29:25 - symmetric like this point is symmetric
29:28 - to that but with minus and plus and the
29:31 - minus and plus here also
29:35 - um yeah let me do that so i'm going to
29:38 - say here
29:40 - [Music]
29:42 - not there but here
29:45 - ctx
29:46 - scale
29:48 - [Music]
30:02 - um
30:04 - okay
30:08 - and um
30:09 - ctx
30:11 - translate
30:12 - actually maybe i think this should be
30:14 - first and i'm gonna translate to
30:17 - canvas with divided by two
30:20 - canvas height divided by 2.
30:23 - so
30:25 - now things stopped working at the moment
30:31 - but it's ok
30:34 - let's see if this can
30:39 - be fixed somehow
30:41 - so we translate it to the middle of the
30:43 - canvas and we also scaled let's um
30:46 - not scale for the moment so yeah we
30:49 - translate it there but now this has to
30:52 - start at
30:53 - minus canvas with divided by two
31:05 - and minus canvas height divided by two
31:11 - okay
31:14 - if we scale
31:16 - like that
31:17 - then i think this now needs to be just
31:20 - one divided by two one divided by two
31:24 - one
31:25 - and one
31:27 - um actually
31:31 - yeah
31:32 - i think it's something like this
31:54 - yeah i did some mistake here i want to
31:56 - scale it up so that
31:58 - these values mean what i want them to
32:01 - mean but actually um
32:04 - i think i want to scale it like this
32:07 - sorry by
32:10 - half
32:12 - by half because i don't want to work
32:15 - with these half values here i actually
32:18 - prefer
32:20 - i think to work in the space from
32:23 - minus one to plus one so
32:26 - now when i'm drawing this this corner up
32:30 - here means
32:31 - uh
32:32 - minus one
32:35 - yeah it means minus one minus one and
32:37 - this one on the right is going to mean
32:40 - plus one plus one i have to fix also
32:42 - this get coordinates there
32:45 - but uh also these ones so
32:49 - this now means
32:51 - zero
32:55 - yeah
32:56 - so all these coordinates i actually want
32:59 - to
33:01 - subtract
33:03 - 150
33:04 - and
33:06 - divide by
33:10 - 150
33:12 - so a little bit work to do here but it's
33:15 - going to make the numbers easier to work
33:17 - with afterwards you'll see
33:20 - so
33:23 - the 150s become zero
33:26 - zero zero
33:28 - zero
33:29 - and then
33:31 - three four minus one fifty
33:40 - 077 with the minus
33:44 - then
33:47 - 220 minus 150
34:05 - 46
34:09 - like that
34:11 - then
34:11 - [Music]
34:12 - 75
34:28 - and i actually know that this one is
34:30 - going to be plus 0.5
34:33 - because it was symmetric to begin with
34:36 - and this 130
34:54 - minus
34:56 - 0.13
35:04 - okay
35:05 - so
35:06 - i think this is correct
35:10 - and i can replace also these ones
35:13 - and
35:14 - this 75 was actually
35:20 - this one i think
35:26 - i'm gonna need new
35:29 - new coordinates for that let me just
35:31 - comment out these
35:35 - oh
35:36 - interesting something happened
35:44 - happened
35:58 - i'm not drawing any fill i think what
36:00 - happens is that the
36:04 - line with
36:09 - yeah the line with is very very
36:12 - thick now because of that scaling i did
36:14 - previously so actually i would like to
36:17 - do the stroke
36:20 - or let me just ctx line with
36:26 - something very small and work with that
36:29 - okay i think this is
36:32 - just fine now
36:34 - and for these i'm gonna need new
36:36 - coordinates and i rewrite that but after
36:39 - i fix this part right here so i want
36:42 - this to log
36:45 - the x
36:46 - minus
36:48 - canvas
36:52 - width divided by two
36:59 - and then
37:01 - divided by canvas
37:04 - width
37:07 - divided by two so something like that
37:10 - this is going to now give me
37:20 - the coordinates when i click on the
37:21 - canvas
37:23 - so that
37:26 - it's already scaled in this new space
37:29 - that i'm dealing with so this one here
37:31 - should be close to minus 1 1
37:34 - this one here
37:35 - one one
37:36 - and this
37:38 - thing in the middle should be
37:40 - pretty much zero zero
37:42 - like this and um
37:45 - i don't want this log to be so ugly
37:48 - so
37:50 - uh let's just calculate here
37:53 - x is equal to this
37:56 - and um
37:58 - around this so
38:06 - maybe this works
38:09 - if i remember right
38:11 - so the number formatting
38:16 - method here if i put two
38:20 - at the second argument it's going to
38:22 - give me
38:24 - just two decimal place
38:27 - i think it's probably gonna be enough
38:29 - and this is gonna be x and y here
38:36 - so
38:37 - why
38:41 - oh number format is not a function how
38:44 - was this
38:46 - not format too fixed
38:48 - i think so
38:50 - too fixed
39:10 - i don't remember where the two fixed
39:13 - ease
39:30 - yeah i don't remember how this works
39:33 - anymore
39:41 - i don't think there is a thing called
39:42 - format so no
39:49 - number
39:55 - oh no uh i think this is the number
40:01 - yeah let's just leave here
40:04 - um
40:06 - something like that
40:08 - and um i just copied this one for the y
40:12 - as well
40:17 - and here x two fixed yeah just two
40:22 - decimals
40:24 - so it is a number already and it's a
40:26 - method from the number
40:28 - yeah now it works and it looks
40:31 - it looks quite good
40:34 - okay so what were these control points
40:37 - here the one
40:39 - on the top
40:40 - minus
40:44 - minus
40:50 - 0.44 minus seven one and the bottom one
41:00 - that
41:02 - but these coordinates here need to also
41:04 - be
41:05 - 0 and 0.46
41:09 - so
41:10 - ok what did i do wrong
41:20 - this one
41:21 - needs to be this one
41:24 - great so we have the same thing as
41:26 - before but uh
41:29 - different so why did i do all this crazy
41:32 - stuff it's just that now and i want to
41:34 - make this symmetric on the other side as
41:36 - well i'm going to
41:38 - copy this for example
41:41 - and
41:43 - this one is going to go to
41:48 - this point
41:50 - right here but the control point is
41:52 - going to be the same as this one but
41:54 - with the plus here because now this
41:57 - control point is somewhere here and plus
42:00 - will make it go somewhere there so i
42:02 - don't need to do so much mental
42:04 - calculations if everything is symmetric
42:07 - like that
42:08 - and uh let's just do the final one here
42:10 - as well so we're gonna go back to the
42:12 - beginning to this
42:14 - coordinate there and this control point
42:17 - will have a plus right here so
42:22 - it's it took some extra time i didn't
42:24 - prepare for this kind of thing but
42:28 - it works so great
42:30 - okay
42:32 - now uh this is the shape of the head
42:35 - a little bit
42:37 - and
42:39 - i am soon going to have to specify names
42:42 - for these points i think let's
42:45 - let's see i might define some points for
42:47 - these so that i can animate them if i'm
42:50 - going to move the head in some way that
42:52 - would be nice
42:54 - but
42:55 - let's see
42:57 - so now that we have this
42:59 - i can also draw the body a little bit so
43:02 - let's draw the neck here
43:05 - so these two chords in its
43:09 - begin
43:10 - path
43:12 - and
43:14 - let's just say move to
43:17 - this location
43:19 - and
43:20 - align to
43:23 - this
43:24 - location i think i want this console log
43:29 - here to output the comma between the
43:31 - points as well
43:33 - so
43:34 - let me concatenate here a comma
43:37 - like this
43:39 - for the future
43:52 - oh i have this horrible thing here
43:59 - all right
44:04 - so we have the neck there
44:07 - good but the neck is a little bit curved
44:10 - it's supposed to be a little bit curved
44:13 - if you look
44:14 - closely
44:16 - and i'm gonna do that as well so i'm
44:18 - going to say here
44:20 - quadratic curve to the same destination
44:23 - but i will add the control point maybe
44:28 - somewhere here
44:30 - so this is going to be like that and now
44:33 - the comma is also here so i
44:35 - quicker at debugging and now the neck is
44:37 - curved like this it's great
44:40 - [Music]
44:44 - so it's going like that
44:47 - and
44:48 - let's continue this path to make the
44:50 - body somehow
44:52 - so
44:52 - add another point right here
44:58 - and i think i'm just going to
45:00 - line to
45:02 - this one
45:04 - so let me
45:06 - copy this
45:09 - like so
45:13 - now it's just fine i'm not going to
45:14 - focus on that part of the body very much
45:17 - and clothes are gonna cover that
45:18 - eventually
45:20 - so
45:21 - it's perfect
45:22 - and uh
45:23 - let's now
45:25 - make it go off the screen a little bit
45:28 - so downwards like the shoulder from here
45:32 - same x but a y that is going to be
45:36 - one or more let's put it 1.1 so this is
45:40 - going to go now
45:42 - down off screen a little bit and i'm
45:44 - going to do the same to the right so
45:47 - the next line two is gonna be
45:49 - a plus here
45:52 - uh we don't see it but now it's
45:54 - somewhere there
45:55 - and uh this one is gonna be
45:58 - with a plus there
46:01 - like that
46:03 - and
46:04 - now we are going to go
46:08 - to
46:09 - this location but with the plus
46:14 - so let me
46:19 - do that
46:21 - and finally
46:23 - a quadratic curve to for the other side
46:25 - of the neck we are going to this
46:28 - location but with the plus right here
46:31 - because it's on the other side of the
46:33 - center
46:34 - and the the control point it's going to
46:37 - be also symmetric so it has also a plus
46:40 - there
46:41 - great
46:42 - so
46:43 - let me actually extract this draw me
46:50 - function for from here and say that this
46:52 - is going to be the body
47:01 - i think eventually i'm going to use
47:03 - object-oriented
47:06 - programming
47:08 - but um
47:11 - i just want to see if it's needed and
47:15 - get something done and then i will
47:16 - refactor at some point so now i'm
47:18 - drawing the body and then the head
47:21 - so let me
47:23 - refactor this one as well
47:26 - draw
47:28 - head
47:34 - okay and i'm gonna put the body before
47:37 - drawing the head because
47:39 - i want these lines here to be covered
47:42 - with whatever the head will look like
47:45 - okay i'm missing a begin path somewhere
47:48 - or no
47:52 - uh no this line width has to happen
47:56 - early on i'm gonna just set the line
47:59 - width somewhere at the top for now
48:02 - so all the lines will be like this
48:05 - this shape
48:07 - this size
48:09 - all right
48:10 - now
48:15 - i would like the head to
48:20 - let's
48:20 - still practice a little bit with these
48:25 - lines or
48:27 - no
48:29 - no i would like the head to actually
48:31 - rotate a little bit so let's think how
48:35 - we can do that so i want
48:36 - him to be able to
48:38 - turn his head like saying no for example
48:41 - left or right i think that without doing
48:44 - some fancy feature like this uh i'm not
48:47 - gonna win this challenge so just drawing
48:49 - this
48:51 - you could just replace this with the
48:53 - sprite so
48:54 - i want this to have more personality
48:57 - than that
49:02 - so
49:03 - if we consider a point here
49:06 - in the center
49:09 - maybe the nose
49:10 - could be considered the center
49:13 - of the
49:15 - somehow let's see
49:17 - so
49:18 - um
49:19 - let's just consider this center point
49:21 - for now and give it a name
49:24 - let me
49:25 - actually
49:27 - draw this point somehow so i'm going to
49:29 - make a function
49:32 - draw a point
49:34 - let's give it the label
49:38 - and
49:40 - this is going to be
49:42 - ctx begin path
49:46 - ctx
49:48 - arc
49:50 - uh we need the location for this one as
49:53 - well not just the label
49:55 - so
49:56 - location.x location.y
50:00 - and
50:03 - a radius
50:06 - let's set here a radius with the value
50:09 - of 0.01
50:11 - or something like that
50:13 - and
50:15 - pass this radius
50:17 - and the arc method needs 0 and math dot
50:21 - pi times 2 so
50:23 - 2 pi means
50:25 - 360 degrees a full circle
50:28 - and now i'm going to do this
50:30 - and that point here is actually a point
50:38 - let's see draw
50:41 - point
50:42 - it's point um
50:47 - zero on the
50:48 - x
50:49 - but vertically it's uh minus zero 0.13
50:54 - this is where i drew this line because
50:56 - it's where the head is the widest i
50:58 - somehow want to have that value for
51:01 - i feel i want to have that value
51:04 - so
51:05 - we might change many of these things
51:07 - later but let's see how this draw point
51:10 - method looks like
51:12 - so
51:13 - refresh nothing happens
51:15 - because
51:18 - i'm not giving
51:20 - the point in the proper way
51:23 - maybe
51:26 - yeah let's give it in the proper way
51:29 - like this
51:30 - x and y i think it's fine
51:33 - okay and it's actually here but very
51:36 - small let's make this radius
51:40 - bigger
51:42 - yeah i think that's fine and the ctx
51:45 - feel
51:47 - but
51:48 - let's give it the white fill color
51:51 - so
51:52 - ctx
51:54 - fill style
51:56 - is white
51:58 - and
51:59 - after i fill it i want to draw there a
52:01 - label so this
52:03 - let's call this point
52:06 - a
52:10 - so the label a
52:12 - and i'm going to say here ctx
52:16 - fill text
52:19 - label
52:20 - at
52:21 - location.x and location.y
52:25 - like this but before that i will change
52:27 - this to black so that we can see black
52:30 - and white
52:32 - oh boy it's a horribly big
52:36 - font
52:39 - let's give it a radius
52:42 - number of
52:45 - pixels
52:46 - and make it aerial
52:49 - i somehow like this font for some reason
52:52 - and uh
53:01 - i wonder if text works well in this
53:04 - scaling conditions
53:07 - but um okay what what happens here
53:10 - let's put 0.1 pixels
53:28 - i think that it might not
53:35 - work for some reason this feels
53:39 - filled text
53:54 - the scaling method that i have
53:58 - used here might affect somehow the
54:03 - the text properties and i don't know if
54:05 - it supports these
54:07 - number of pixels
54:11 - or does it but
54:13 - i i didn't concatenate this pixel value
54:17 - here
54:18 - let me
54:21 - yes okay phew
54:23 - i
54:24 - i don't need to use a space there
54:26 - it's uh
54:28 - linked to that value okay a radius of
54:32 - a size of maybe radius times two
54:36 - now it's too small
54:42 - i think that is something fine
54:46 - maybe
54:50 - okay but
54:52 - i need to do
54:54 - text align
54:57 - center
55:05 - like this
55:07 - okay and now point a is in the center
55:09 - there so this point a i want to be able
55:12 - to control somehow
55:18 - let me
55:23 - make the background here actually
55:27 - light green
55:29 - and remove the stroke from here i think
55:32 - it's somehow too many strokes and i
55:34 - don't want it to be so distracting
55:37 - i think that's fine
55:38 - or let's make this green
55:42 - and the field style is going to be
55:47 - white
55:50 - i think this is much much more readable
55:53 - and this radius can be a little bit
55:55 - smaller maybe 1.9
55:59 - i just want to have things here that
56:00 - look somehow nice
56:05 - since i'm gonna reuse this component
56:08 - multiple times i might as well
56:12 - have some nice components to work with
56:14 - that is not distracting in some way
56:20 - okay for some reason this
56:23 - would need a little bit of adjustment
56:25 - here as well and i want to use part of
56:27 - the radius
56:29 - for that so that this is
56:31 - relatively
56:33 - well
56:36 - implemented so that if i change some of
56:38 - these
56:39 - scaling properties it looks good okay
56:43 - so
56:44 - this point a is something that i want to
56:46 - control somehow
56:48 - and i'm going to define for this some
56:51 - slider
56:52 - let me try to do that input type
56:57 - range
57:00 - id
57:04 - a
57:09 - the x of that point will be controlled
57:13 - by this ax
57:15 - slider
57:18 - okay
57:20 - so we have the slider now here
57:23 - uh
57:24 - i would like it to be up here actually
57:28 - so um
57:40 - no i don't want that because it's gonna
57:43 - mess up with my
57:46 - cord and it's when i click on the screen
57:49 - i don't want to bother with that i'm
57:51 - actually gonna
57:52 - put this
57:55 - slider i want it up because i will have
57:58 - more of them
58:00 - so let's put here
58:06 - sliders eventually i i want to move that
58:10 - point maybe also upwards let's see so
58:12 - another slider for that
58:15 - and um
58:16 - i want this sliders element to be
58:22 - uh
58:24 - positioned at the top somehow so
58:30 - not the best way to do this i might
58:32 - redesign the things later but let's see
58:39 - zero
58:41 - okay now it's here but i want it to be
58:44 - left
58:46 - 300
58:48 - pixels okay
58:51 - so this slider is going to control
58:54 - our position and
58:58 - for this ax element and let's just say
59:01 - that
59:02 - we will give here a minimum value of
59:06 - minus one
59:08 - max
59:10 - plus one
59:14 - okay and initially it's it's zero by
59:17 - default
59:20 - okay so
59:22 - now
59:26 - on change
59:30 - uh
59:32 - unchanged i'm going to
59:34 - set here a value
59:36 - a function for
59:38 - update
59:40 - point probably we'll rename this
59:43 - soon
59:44 - let's see but the update point
59:54 - let's put here info and log this
59:58 - info in the console because i don't
60:00 - remember what it contains so now when i
60:03 - change this
60:04 - okay it only works when i
60:08 - release so i don't really want that
60:11 - uh i think there exists also on
60:14 - update
60:19 - no
60:24 - on drag
60:28 - no
60:31 - one change
60:33 - but really i
60:35 - am pretty sure that
60:54 - it's on update
60:57 - with
60:58 - small u or
61:01 - no i don't think it matters
61:04 - on
61:06 - change
61:16 - yeah i really want it to go while i'm
61:19 - dragging this so this on change
61:22 - is not enough
61:42 - on move
61:46 - no
61:48 - update
62:03 - these are so different in different
62:05 - programs and different languages i don't
62:08 - remember
62:11 - ah
62:13 - on
62:48 - no i don't remember
62:52 - let's just leave it like this for now
62:54 - so
62:55 - what i want to print in the console is
62:57 - not the whole info but
63:00 - i think it's value
63:10 - oh
63:17 - but why is it like that because i
63:20 - specified here one as the maximum
63:25 - okay now it works but
63:27 - i can only put one zero or minus one it
63:31 - snaps somehow i think there is a step
63:33 - also
63:35 - that can be used to fine tune this
63:40 - yeah okay
63:43 - i guess i can work with this
63:46 - oh and i can use the keyboard
63:48 - to
63:49 - to move this as well
63:51 - okay so now the thing is
63:53 - i want this slider to control how the
63:56 - head is going to rotate
63:58 - by first controlling where this point is
64:01 - going to be
64:02 - relative to that and
64:06 - this is between -1 and 1 so it's going
64:09 - to be a
64:11 - maximum
64:12 - 100 percent or negative 100 percent
64:16 - movement that we will allow in the
64:18 - interface
64:19 - so
64:21 - let's just define this a point somewhere
64:25 - i'm going to define
64:28 - it at the top somewhere maybe
64:31 - maybe here
64:35 - a is equal to
64:37 - something
64:38 - so this in the beginning
64:42 - and then i'm just gonna write there a
64:45 - for now
64:46 - so
64:47 - this point is here
64:50 - and
64:52 - when we move this slider i want a
64:56 - according to this to go
64:59 - left on the x
65:01 - or right on the x so this would be left
65:04 - on the x from this original location
65:08 - uh like mid location to the far left and
65:13 - far right extremities that we will give
65:16 - so
65:17 - this x and y is like the initial
65:21 - like center
65:22 - point
65:29 - the only thing i'm changing is the x
65:32 - right
65:35 - so it's like the initial initial
65:37 - location but then um
65:40 - let's call another
65:42 - property here x
65:43 - range
65:45 - between
65:46 - let's say minus zero point
65:50 - [Music]
65:52 - seven
65:55 - now zero point two something small and
65:59 - plus zero point two so this is gonna be
66:06 - an array
66:08 - of two elements for this x range
66:11 - so now what we are doing
66:14 - [Music]
66:15 - updating the point i'm going to say
66:18 - a dot
66:20 - x is going to be
66:23 - within that x range give me the value
66:26 - according to this
66:28 - percentage here so this is between minus
66:30 - 100 percent plus hundred percent
66:46 - and maybe center
66:48 - could be somewhere
66:50 - in the middle
66:55 - i really want these things to be
66:57 - symmetric so putting here things like
67:00 - that is kind of too much
67:06 - let's just try to put center point and
67:09 - there and if the value is negative it's
67:12 - gonna mirror itself to the left if that
67:15 - makes sense so i'm only putting things
67:18 - on the right of this center part and
67:20 - everything else becomes symmetric to the
67:22 - left with the minus minus values
67:25 - so ax is going to be
67:31 - i'm going to do linear interpolation so
67:34 - linear interpolation between
67:42 - a dot x
67:44 - range
67:46 - of 0
67:49 - and a dot x range of
67:54 - 1.
67:56 - using this value as the percentage
68:02 - so
68:05 - function
68:08 - linear interpolation is very simple you
68:10 - have just two values let's call them a
68:13 - and b
68:14 - or start and end
68:17 - and a percentage we can call that
68:21 - t because p usually stands for point so
68:26 - the function is really easy it's
68:29 - you take the first value and you add the
68:32 - difference between
68:34 - the end and the start multiplied by this
68:36 - t value so
68:38 - if t is zero
68:40 - then this whole thing is zero and you're
68:42 - just at the starting point
68:44 - if t is one
68:46 - then this difference is going to the
68:49 - minus s from here
68:54 - i mean if t is one this disappears and
68:57 - the minus s from here cancels this one
68:59 - so you're just left with the end point
69:01 - if this is somewhere in the middle then
69:05 - this difference is not going to amount
69:06 - as much so it's basically evenly spacing
69:10 - you
69:10 - values according to this percent here
69:13 - and if this t is
69:15 - negative
69:16 - this difference from here actually goes
69:19 - uh on the up other side so i expect that
69:23 - this will work with the negative values
69:25 - as well so let me just
69:27 - try this
69:30 - like that but
69:31 - [Music]
69:33 - i
69:34 - won't see any changes here if i'm
69:37 - dragging this because
69:38 - i'm not redrawing this on every frame i
69:42 - need to animate this
69:44 - so
69:46 - i'm going to put this draw me function
69:51 - inside the function called animate
69:54 - that
69:55 - i'm going to call draw me
69:59 - on every frame
70:01 - and the
70:02 - request
70:03 - animation frame is the method that
70:07 - does this calling of the animate
70:10 - function again and again and again as
70:13 - fast as it can
70:15 - so now
70:22 - it still doesn't work
70:25 - oh because i'm not calling the animate
70:28 - function anywhere but where am i calling
70:30 - draw draw me okay
70:32 - so
70:34 - animate here once the image is loaded
70:40 - okay
70:43 - something bad happens because
70:46 - yeah
70:48 - um
70:52 - it just draws again and again and again
70:55 - thinks on the canvas so i think i'm
70:57 - going to copy this drawing of the image
71:03 - every time we draw us i also draw the
71:06 - reference image this image by the way
71:08 - will disappear
71:10 - by the end so that's no
71:14 - not something that will stay here and
71:16 - now it's drawing it on top of each other
71:18 - with these kind of uh
71:21 - small alphas there
71:23 - it looks horrible i will just
71:26 - clear
71:29 - clear the canvas
71:39 - i hope this works
71:42 - uh no it doesn't because
71:44 - we are in this new space right now so i
71:47 - need to use
71:49 - this
71:51 - okay so it looks as before but now every
71:54 - time i release here that a point is
71:58 - actually going to
72:00 - change according to my slider
72:03 - um
72:04 - within this
72:06 - um
72:11 - range that i allow it so i told it
72:14 - basically that it can go from
72:18 - zero which is somewhere here
72:20 - to
72:22 - 0.2 which is somewhere there
72:26 - but
72:30 - because linear interpolation works also
72:32 - with the negative
72:34 - value for t that we can give with this
72:38 - slider i can also have symmetrical
72:41 - symmetric behavior there as well
72:46 - which is good
72:48 - i think
72:50 - i'm not entirely sure
72:52 - i don't want everything to be symmetric
72:54 - but some things i i want them to be
72:56 - symmetric so
72:58 - yeah so now that i have this a point
73:02 - there
73:09 - i'm going to
73:14 - try to draw
73:16 - this straight line that we had
73:17 - previously to be controlled by a
73:21 - in some way like using a as a control
73:24 - point
73:25 - so that the head tends to rotate
73:29 - rotate a little bit like that
73:32 - so let's see if we can get that to work
73:36 - a is now here
73:38 - and
73:40 - when we draw the head this is the
73:42 - vertical line here
73:45 - and uh i don't want it to be
73:48 - uh line two anymore i want it to be a
73:51 - quadratic curve to
73:53 - where
73:55 - the end point is the same it's this one
73:57 - at the bottom right there
74:01 - but the first point here is going to be
74:04 - a dot x a dot y
74:07 - so
74:08 - instead of the line two we have a
74:09 - quadratic curve
74:11 - that goes through a
74:13 - when a is there it looks like a straight
74:16 - line but if i'm gonna do this
74:19 - you can see the head tends to
74:23 - rotate
74:26 - at least a little bit
74:28 - influenced by that control point so this
74:31 - quadratic curve two function it's
74:33 - actually poorly named because there's
74:35 - also another function called
74:38 - bezier curve two that has two control
74:40 - points and it's poorly called i think
74:44 - because both of them are bezier curves
74:47 - bezier curves are very general curves
74:49 - and they can have
74:51 - infinitely many control points so you
74:53 - can have one two three
74:55 - there is no
74:57 - function in the canvas with three points
75:00 - but you could implement it yourself
75:01 - using
75:03 - bernstein polynomials or something like
75:05 - that
75:06 - but um
75:10 - yeah so both of them are
75:13 - um
75:14 - bezier curves so the fact that there is
75:16 - another one called bezier curve 2 means
75:18 - that this one
75:20 - would not be
75:21 - which is kind of
75:24 - i don't know bad naming but
75:27 - when dealing with bezier curves it
75:28 - doesn't mean that the curve is going to
75:30 - pass through that point so this is one
75:34 - thing that people are usually confused
75:36 - about what it means is that when you
75:38 - start the curve here in the beginning
75:41 - you start exactly in the direction of
75:44 - this point so if you draw a tangent from
75:47 - this point it would go through a
75:50 - but it's just influenced and as you're
75:52 - going the end point starts to influence
75:56 - as well so you don't actually pass
75:59 - through a over there
76:03 - uh if my math is right i think that if
76:06 - you put here instead of ax
76:09 - ax times 2
76:14 - then it goes through a because when you
76:16 - have these quadratic curves
76:19 - essentially what i'm doing now is
76:21 - my control point here it's a x times 2
76:25 - so it's somewhere here where my mouse is
76:27 - now
76:30 - and then the curve goes exactly through
76:33 - that value so
76:35 - the
76:36 - point where
76:38 - let me just undo this
76:41 - the point
76:42 - where
76:44 - the curve will pass through closest to
76:47 - this a is actually gonna be halfway
76:50 - between where a is and
76:52 - the
76:53 - straight line
76:55 - goes
76:56 - there so a little bit of math this might
76:59 - be helpful later when i'm gonna do some
77:01 - of these
77:03 - things more carefully but okay this is
77:06 - the a x somehow
77:09 - how about one for the a y as well
77:12 - so
77:16 - i want to make this line here the
77:19 - straight line there also modified by a
77:21 - slider like that so let me go here in
77:24 - our sliders and define a y in exactly
77:28 - the same way as previously
77:34 - and here it's something that i really
77:36 - want to change
77:38 - something
77:39 - so this update point
77:42 - um
77:44 - i really want to say that this is uh
77:47 - just the x element
77:49 - x attribute needs to change and this one
77:52 - has to change its y attribute i don't
77:55 - really like this function here let's see
77:57 - later if it becomes better but
78:00 - now update point
78:04 - attribute so the attribute
78:09 - a of x so this here
78:12 - i can also write it like this and it
78:14 - should work
78:16 - but now instead of that hard coded
78:18 - string i'm going to put here the
78:20 - attribute is going to be
78:23 - um
78:32 - not very good
78:36 - uh i think what we will do is um
78:48 - so i want the y range as well
78:52 - let's say
78:55 - 0 and
78:57 - 0.4
78:58 - just to test and to see that they are
79:00 - different but i need to be able to
79:02 - specify
79:04 - where i want these
79:07 - this interpolation to happen so now this
79:09 - attribute
79:12 - yeah let's just
79:15 - say here for now switch based on the
79:18 - attribute
79:19 - and the
79:20 - case x then
79:24 - a of x
79:32 - is equal to
79:34 - that
79:38 - break
79:40 - and
79:42 - a of
79:43 - y
79:44 - is gonna be with y range here so i
79:47 - wanted to do this with a single line but
79:50 - i think this is also
79:52 - clear at least for now let's see later
79:55 - what what happens
79:57 - if this kind of code structure is good
80:01 - so what happens now we have two sliders
80:05 - and this other one controls the movement
80:08 - vertically somehow
80:12 - but
80:14 - there is a problem here because
80:16 - zero point is not where this
80:20 - thing is
80:21 - from previously
80:23 - and uh maybe this is actually a good
80:25 - thing
80:28 - um
80:30 - let me think about that
80:33 - but uh of course i could change this so
80:36 - this
80:37 - line this horizontal line here it's um
80:43 - at this location
80:45 - so if i'm going to
80:47 - put
80:50 - the y range
80:58 - like that
81:02 - then 0 is is fine there but
81:16 - let me
81:18 - try to have these steps more fine for
81:21 - this one
81:23 - i have a feeling there is something
81:25 - wrong with the math here so let me just
81:27 - move this with my
81:29 - keyboard
81:31 - no it looks pretty good so with my
81:34 - keyboard a is moving
81:39 - yeah it's it's moving quite well
81:43 - i don't know why i expect it to be a
81:45 - jump there somewhere let me try to make
81:47 - this even smaller
81:54 - it looks quite smooth there
81:58 - yeah okay everything seems to be just
82:01 - fine yeah it's uh it's good the math is
82:04 - good
82:04 - i
82:05 - don't know why i thought different
82:08 - so
82:14 - so
82:17 - with a there
82:20 - this looks good now but the horizontal
82:22 - line should be now controlled by a
82:25 - and
82:26 - let's do it so that
82:29 - i do the same kind of quadratic curve to
82:32 - here
82:33 - going
82:36 - to the bottom so from the top to the
82:39 - bottom
82:40 - and um
82:41 - [Music]
82:43 - the same control point as uh
82:46 - previously a a controls both of those
82:50 - curves
82:51 - so now
82:53 - you can see somehow the head
82:56 - seemingly
82:59 - 3d ish
83:01 - but
83:03 - some things here i just don't like for
83:05 - example
83:08 - i actually want those curves to go
83:10 - through a
83:15 - but that's not gonna be so easy to do i
83:18 - think
83:21 - let me see
83:23 - i don't want
83:24 - necessarily this to happen and i don't
83:27 - think that it will happen exactly
83:31 - yeah
83:32 - i don't want
83:33 - actually to complicate it like that but
83:37 - horizontally i think the movement is
83:39 - good but vertically
83:41 - it's way too much so when i wrote here
83:44 - at the top
83:46 - um
83:49 - the y range going
83:52 - from
83:53 - this to that this this value is just too
83:56 - much way too much so i'm gonna put here
84:01 - maybe also 0.2 as the other one let's
84:04 - see now how it looks like
84:06 - so
84:07 - left
84:08 - right
84:09 - and
84:15 - like that
84:16 - and this one here
84:20 - still too much i don't want to
84:22 - have so exaggerated movement i just want
84:25 - to give a little idea of 3d this is not
84:28 - going to be a
84:30 - 3d space with x y and z it's just going
84:33 - to be some locations
84:36 - like some keyframes when the character
84:38 - is looking left when the character is
84:40 - looking right and then interpolating
84:43 - between those
84:45 - somehow so
84:47 - it's one technique that
84:49 - is used in animation quite quite often
84:52 - but here i'm coding it instead which is
84:54 - actually not very often
84:56 - in practice
84:58 - so
84:59 - up and down it's actually way too much
85:01 - i'm gonna put here maybe point one
85:08 - i think this is just
85:10 - great so good enough movement there and
85:14 - the left and right
85:23 - yeah something like that
85:27 - so question is
85:42 - yeah okay
85:57 - and then the things that will somehow uh
86:01 - color the face and give it hair and
86:04 - things like that will
86:06 - also be influenced in the same way as
86:08 - this a point
86:10 - somehow so that would be
86:12 - overall the
86:14 - idea
86:17 - there are a few things that i don't like
86:20 - yet for example moving your head up
86:24 - doesn't just
86:25 - rotate it
86:27 - like this
86:29 - if i can try to mimic this
86:32 - your head actually moves a little bit
86:35 - upwards so
86:36 - these points here
86:40 - and this point here should also be
86:42 - affected by these sliders
86:46 - otherwise it just looks very
86:49 - robotic
86:50 - and
86:51 - not very
86:55 - realistic and same goes for left and
86:57 - right
86:59 - when i especially left and right because
87:01 - you can see the chin is
87:04 - really going off from the the center of
87:07 - the of the body when you do that
87:09 - so
87:10 - these points need to have
87:13 - ranges
87:15 - as well as this uh a point that we are
87:19 - somehow now i'm considering this a point
87:22 - as a point that the character is looking
87:25 - at
87:26 - if it's
87:27 - quite in in front of
87:29 - in front of the character so
87:31 - it has some sliders there
87:34 - uh to control that but the whole head
87:36 - shape is going to be affected
87:39 - uh as well not just this center point of
87:43 - the face it's uh
87:45 - yeah so that's what we are going to try
87:48 - to do next and i'm going to define these
87:50 - points
87:52 - give them labels as well as a is here so
87:57 - let's see uh i'm going to name this
87:59 - point
88:01 - maybe b
88:03 - b c d e or something like that
88:08 - so let's define these points as well
88:12 - and
88:12 - um
88:14 - i'm just going to start with one of the
88:16 - points
88:18 - maybe
88:20 - b
88:22 - and this one is going to be
88:25 - this location from here the first move
88:28 - to that we do there so i'm going to cut
88:30 - this say here b dot x b dot y
88:34 - and
88:39 - put the values here so 0 and minus 0.77
88:46 - and there is going to be also
88:49 - a range for x
88:52 - we will figure what the out what
88:55 - what those are
88:59 - what that is
89:03 - and also a y for that
89:11 - but let's just put these values to be
89:14 - minus
89:15 - 0.77
89:19 - minus 0.77 so essentially the range is
89:23 - null
89:24 - and 0 0 so now x is between 0 and 0 and
89:28 - y is between minus 77
89:31 - minus 77 so there's no range there i
89:34 - just put it as a default value
89:37 - so just to get it to appear somewhere
89:40 - first
89:41 - and uh let's put also b
89:46 - b
89:47 - like that
89:49 - so b is there
89:51 - the sliders don't affect b
89:54 - at the moment at all
89:59 - because also
90:01 - this draw point is something
90:05 - i mean update point is something that
90:06 - only updates point a
90:11 - so
90:12 - not
90:13 - good code here i really need to think
90:15 - about this just in a second
90:20 - but uh before that this b is
90:24 - 0 and minus 0.77
90:27 - let's see if these points
90:29 - are
90:31 - still somewhere
90:39 - so this is b right here definitely
90:48 - i think those are the only ones this one
90:51 - here and this one here so let's just put
90:53 - there bx by
90:58 - and uh now in this update point function
91:01 - i need to be able to specify somehow
91:03 - which is the point so
91:05 - let's
91:06 - put here b that that's the point i want
91:09 - to modify i send it as a parameter like
91:12 - that
91:14 - sorry first one is is a actually
91:18 - okay
91:19 - and here in the update point i could say
91:23 - um
91:33 - point so which one is going to be
91:36 - but now i need the way to access this so
91:39 - we could put actually all of these
91:42 - inside of um an object
91:45 - called
91:47 - points
91:48 - maybe live points they are points that
91:51 - move
91:52 - and
91:53 - this object is going to have an
91:55 - attribute
91:57 - called a
92:00 - and an attribute called b i don't know
92:02 - if this is better yet but
92:05 - i need to
92:06 - update the code depending on what i am
92:09 - looking and feeling when i'm designing
92:11 - this so this is not the typical
92:13 - waterfall way of developing things it's
92:17 - quite agile and you think
92:19 - what you need to change according to
92:21 - what you want to achieve there
92:24 - so
92:25 - now life points actually
92:28 - and the every time
92:36 - i'm using
92:37 - a or b
92:40 - like this
92:46 - or um i could actually destructure this
92:48 - i think and have uh references for a and
92:51 - b
92:52 - let's see const
92:55 - a b is equal to
93:00 - live
93:01 - points
93:04 - maybe does this fix my problem
93:10 - life points is not iterable
93:17 - no not not that so
93:21 - huh
93:30 - this is not an array
93:37 - okay a is still moving even though i did
93:40 - this change right here
93:42 - but then i want in the update point
93:45 - to take
93:46 - not a here
93:50 - but
93:52 - the
93:53 - live points
93:57 - let's call this
93:59 - point p is
94:01 - live points
94:02 - of point which is a string so this point
94:06 - here is a string and
94:09 - it's specified here which point are we
94:11 - changing by the slider
94:14 - let's actually also have
94:16 - here a and b like labels so that we
94:22 - oh no no no no no no it's not a and b
94:26 - it's a x oh boy
94:30 - a x a y
94:34 - no what am i doing this is not not even
94:37 - a anymore
94:42 - let's just keep team these a
94:46 - x and y so this id here it's actually
94:50 - not used anywhere
94:53 - um
94:55 - but this is not update point it's it's
94:57 - update points now
95:00 - yes it's update points now all the
95:04 - points need to update according to
95:09 - the value of these sliders and this
95:10 - slider controls the x and the other one
95:12 - controls the y
95:14 - so
95:18 - let me
95:19 - even remove this id from here because
95:21 - it's confusing now and we don't seem to
95:23 - need it
95:25 - so what we do now is go through all the
95:29 - live points so
95:35 - and
95:40 - and each of them have their own ranges
95:42 - right
95:44 - so
95:45 - this is now update points
95:48 - and
95:53 - um
95:59 - for each point
96:02 - in there i'm going to switch depending
96:05 - on the attribute
96:06 - and um
96:12 - p dot x
96:14 - so at first it's going to be a and then
96:16 - it's going to be
96:19 - b
96:20 - and both of them have a range on x and
96:22 - the range and y
96:24 - and
96:25 - the the ranges will eventually be
96:27 - different so let's see if this code
96:29 - works
96:31 - okay some problem there
96:35 - haha
96:36 - um
96:51 - for for each
96:53 - [Music]
96:55 - this would need to be an array i think
96:59 - let's see how the four in
97:02 - loop
97:04 - for
97:05 - let be
97:07 - in
97:10 - live points
97:14 - i really don't remember all of the ways
97:16 - that these
97:17 - for loops work but
97:38 - okay
97:39 - so
97:46 - um this is
97:49 - point id like a in that case and here
97:53 - i'm gonna say
97:54 - the point
97:58 - p is gonna be
98:00 - live points of
98:03 - p id so i don't use array but
98:08 - yeah okay so x is okay
98:11 - y is okay let me just add the line break
98:15 - there at the top
98:22 - okay and uh i think they can be a little
98:26 - bit to the right so
98:29 - something like that
98:30 - too much
98:35 - okay
98:41 - great
98:41 - so
98:51 - so let's try now to modify this b as
98:53 - well so
98:54 - it code should work we just have to
98:56 - change these ranges here like if i'm
98:59 - going to put a 0.02 range for b
99:04 - you can see b is moving now
99:06 - in that same kind of
99:09 - as much as a is moving actually and all
99:12 - the lines connected to b
99:15 - are also adapting
99:17 - according to the control points the same
99:20 - control points that we had earlier and
99:24 - you can see the shape here is not great
99:27 - it's not like a real head would look
99:29 - like but i have some other ideas for
99:31 - drawing the head on top of that and i
99:33 - think it's going to be fine
99:36 - but one thing is i do want b to somehow
99:39 - move like that but not as much so maybe
99:42 - i'm going to put here 0.1
99:45 - and now when a is going in that way b is
99:49 - moving
99:51 - b is moving
99:52 - less so
99:56 - i don't really know if b needs to move
99:58 - like that
100:00 - honestly
100:02 - because the top of the head does stay in
100:05 - the same place
100:06 - but uh
100:07 - i think i i do want it to move
100:10 - vertically with the y
100:12 - so it could be that i'm gonna just put
100:14 - here range zero zero
100:18 - like that or something very very small
100:21 - sometimes
100:23 - small values
100:24 - uh make a big difference in how
100:26 - everything feels so it may not seem like
100:29 - something but it does so now i'm not
100:32 - really doing any 3d stuff or
100:36 - realistic movement is more like using
100:38 - animation principles and
100:40 - things like that to make the
100:43 - movement more
100:45 - appear organic to somebody who knows
100:49 - some kind of things about about
100:52 - drawing
100:54 - drawing objects there and i'm not i
100:56 - don't want anything to be perfect but
100:59 - to look good so
101:02 - many things are like that especially in
101:03 - animation
101:05 - um
101:06 - you exaggerate and you emphasize some
101:08 - things that don't normally happen in the
101:10 - real real world
101:14 - okay so let's try the vertical one as
101:17 - well so from this
101:19 - value here
101:21 - let's give it
101:23 - a value of
101:26 - minus 8
101:29 - 0.8 and just see what happens
101:34 - uh
101:35 - okay it's it's opposite this
101:43 - it's opposite
101:52 - yeah it's opposite so
101:56 - i want
101:59 - 0.7 there
102:04 - so now that b point is also updating but
102:07 - it's too much maybe
102:09 - 0.772 i just want a little bit of head
102:13 - lowering
102:14 - when
102:15 - the character is looking downwards so
102:18 - again a little bit goes a long way
102:22 - and uh
102:24 - same for the
102:25 - upwards position
102:33 - maybe
102:34 - 7.3
102:36 - is actually even better
102:43 - yeah i'm i'm happy with that
102:46 - okay and
102:48 - it's also supporting this a little bit
102:52 - okay
102:53 - now this chin this is
102:56 - something that moves much more because
102:58 - it's pointing out like like like
103:01 - what
103:03 - chins do
103:04 - so let's try to do that point next and
103:07 - uh
103:09 - it's
103:13 - this one right here so let's extract
103:19 - point
103:20 - c dot x
103:22 - c dot y
103:26 - and
103:29 - i'm just going to
103:30 - duplicate this line here
103:38 - with
103:40 - c
103:41 - and
103:45 - there is a plus value here 0 46
103:48 - and the ranges
103:50 - um again i'm going to start
103:54 - or let's give this a value let's
103:56 - actually make it two because
103:58 - center of the face and the chin kinda
104:01 - are on the same
104:02 - plane i think
104:04 - uh and the y range
104:08 - yeah
104:09 - um
104:11 - zero point
104:18 - 46
104:20 - and let's just give this
104:24 - let's keep it like this for now and
104:26 - modify it later so the c point
104:31 - see
104:33 - appears there
104:35 - with 0 and 046
104:39 - but it also appears
104:41 - here
104:48 - is this the only place where the chin
104:50 - appears
104:52 - how is it possible because
104:54 - um okay we're drawing this way so
104:57 - then we don't have to move to yes okay
105:00 - so it's only one time here c dot x c dot
105:04 - y
105:07 - and an error
105:09 - c is not defined because here where we
105:12 - where i'm doing this destructuring
105:14 - so that i do have
105:17 - easy access for this a b and c points
105:19 - and i don't have to always write
105:22 - live points dot
105:25 - a b c so
105:28 - this destructuring is something i'm
105:29 - probably going to forget very often but
105:32 - now we have a b
105:34 - b
105:37 - c
105:39 - abc
105:42 - and yeah
105:47 - you can see that a and c are somehow c
105:50 - is definitely looking more like a like a
105:53 - chin now when you're rotating and i'm
105:56 - really happy with this i think
106:01 - i like this shape of the head that we
106:03 - have now
106:07 - okay
106:08 - and vertically
106:10 - c is not moving and this is something
106:13 - that needs to change
106:16 - i think it should move similar to a
106:20 - the place that you are looking in in
106:21 - your
106:23 - face yeah i think it should move
106:26 - as much as a
106:29 - pretty much let's see so a is moving
106:34 - okay quite much
106:36 - let's try to put here
106:38 - 60
106:40 - six
106:46 - it's
106:47 - too much i think it's
106:51 - not horrible
106:53 - but
106:54 - let's just put 62.
107:01 - so the thing is
107:03 - because these are on a plane
107:05 - the bottom part
107:10 - shouldn't move as much
107:16 - as the top part
107:18 - so this is a bit of a problem we are
107:20 - having now
107:25 - i like how it looks like when the face
107:28 - is looking upwards because the chin
107:30 - tends to let the neck visible and this
107:33 - part from here
107:34 - but um when it's i mean this position
107:38 - but when it's going downwards
107:41 - this becomes way too pointy like the
107:43 - chin actually disappears between under
107:46 - the nose and doesn't
107:48 - expand doesn't expand that much
107:52 - so i have a problem here this whole way
107:55 - of doing things just doesn't seem to
107:59 - work properly
108:01 - in this case
108:10 - i could do something of a
108:14 - two ranges
108:16 - a negative y range
108:20 - and a positive
108:21 - range
108:29 - maybe we try to do that it won't be very
108:31 - realistic but
108:36 - we see if there are consequences
108:41 - why negative range so this is going to
108:44 - be
108:57 - to zero point let's say
109:00 - 40.
109:03 - and
109:05 - here where we are doing these updates we
109:08 - check to see
109:11 - if the value is less than zero
109:15 - very complicated stuff
109:18 - so
109:21 - let's say
109:22 - const
109:24 - value
109:25 - is
109:26 - if the info value is less than zero
109:32 - no no no no
109:33 - no
109:35 - i want the x range i want the y range so
109:40 - y range to use if the value is less than
109:44 - zero then use
109:48 - then use
109:52 - negative range
109:55 - otherwise
109:57 - range
109:58 - um
110:00 - y
110:03 - range i don't like what i'm doing now
110:05 - but
110:06 - at least to get something that works and
110:08 - then we'll think about restructuring a
110:10 - bit later
110:12 - so
110:15 - here i just take that value
110:18 - and um
110:27 - and
110:31 - this only in the case that negative
110:33 - range exists
110:38 - so if
110:39 - b dot y negative range
110:42 - because all the other points are working
110:44 - just perfectly now
110:46 - so the only issue i have now is because
110:48 - of the phase and the 3d
110:50 - way that faces look like i can't model
110:53 - this mathematically with such simple
110:56 - linear interpolation techniques it needs
110:58 - to behave differently when
111:01 - when going up then when going down
111:05 - um
111:06 - so let's say here let y range
111:10 - and the
111:12 - value
111:13 - and now this y range is going to be
111:20 - that
111:23 - so
111:24 - actually y range equals to
111:28 - that
111:30 - but if the negative range exists then
111:33 - it's going to change and value is going
111:36 - to be info dot value
111:39 - but here if the negative range exists
111:42 - we actually want the value to be
111:44 - the
111:46 - absolute value
111:49 - of the value i think i will
111:53 - see if this works
112:04 - okay what happened
112:07 - did anything happen so let me put the
112:10 - negative range that just doesn't change
112:12 - so
112:14 - something like this
112:21 - okay
112:25 - everything is opposite
112:33 - oh
112:35 - yes because y goes downwards so
112:41 - uh
112:45 - the range let's just keep it
112:48 - 46 and this one
112:51 - 62.
112:59 - actually
113:02 - 62-46
113:04 - so
113:15 - and then
113:17 - 46 minus 16 30. so this is actually 0.3
113:23 - here
113:28 - okay so upwards movement is fine
113:30 - but then downwards movement
113:33 - at some point c becomes
113:41 - i really want to use some kind of a
113:43 - mathematical function like
113:45 - the sign here
113:48 - i don't know how to code this so nicely
113:50 - and i don't know if
113:52 - so much work is needed
113:54 - but um okay so at least now c is
113:58 - stationary there for the positive values
114:01 - so what i'm gonna do next is um
114:04 - modify this to say
114:06 - maybe
114:08 - 50.
114:14 - so
114:16 - okay
114:22 - so somehow now c doesn't move as much
114:25 - when going
114:27 - downwards but actually maybe i want it
114:29 - to move
114:31 - even opposite direction let's just play
114:34 - around with this a little bit so
114:46 - i think that this is actually a more
114:48 - natural movement when characters are
114:51 - looking downwards because the chin just
114:53 - disappears somehow
114:56 - so i'm over complicating this i think
115:10 - but
115:12 - yeah let's leave it like this now
115:14 - and let's try the other one
115:20 - okay i think this looks good
115:34 - good this is fine
115:50 - maybe
115:51 - four two there looks a little nicer
116:05 - yeah
116:06 - okay so a lot of time went to
116:09 - fine-tuning these things but i think
116:10 - that we are on to something
116:13 - and i kind of like this structure that
116:16 - we are having now and the fact that i
116:18 - can move the character
116:20 - in these different
116:21 - directions
116:23 - [Music]
116:28 - no i i don't
116:30 - think this is great i think
116:33 - let's try again with the positive
116:35 - bigger value there
116:55 - yeah from the side you actually would
116:56 - like to see
116:58 - the chin continuing to move downwards
117:01 - it's really tricky
117:03 - it's not going to be fantastic and i
117:05 - think that
117:06 - i'm going to
117:08 - limit this
117:11 - movement a bit more eventually
117:14 - like maybe not allow the sliders to go
117:16 - all the way
117:18 - i really think that you don't need
117:21 - the most extreme values for the slider
117:26 - to get a nice looking animation there
117:30 - and
117:30 - even values here in between are going to
117:33 - be
117:34 - good enough
117:35 - and we may not even need this crazy
117:38 - stuff here with the y negative range
117:41 - there
117:42 - it's just
117:44 - way too much
117:46 - work and too many things to worry about
117:48 - code will become also difficult
117:59 - yes
118:07 - but
118:10 - or
118:11 - let's leave it for now and worry about
118:14 - it a bit later
118:20 - and i will have also a meeting
118:24 - in about half an hour so let's see what
118:27 - is the next step going to be
118:31 - uh how about i try to draw
118:36 - the
118:37 - face
118:39 - like the eyes for example
118:42 - maybe that's one challenging thing that
118:45 - really needs to get done so maybe if i
118:48 - focus on that one for half an hour i
118:50 - have enough time i hope
118:53 - so all of these things that we did now
118:55 - are probably going to be things that
118:57 - will
119:00 - be deleted at some point they are just
119:02 - reference points
119:04 - but then at some point
119:06 - they will be replaced by actual skins
119:08 - and
119:12 - make the character look like that
119:14 - reference drawing
119:17 - and then we remove that reference
119:18 - drawing
119:20 - of course
119:22 - okay
119:25 - so
119:27 - let's
119:29 - have here the head and
119:32 - inside of the head i'm going to make a
119:34 - function
119:35 - draw
119:36 - eyes
119:39 - okay
119:40 - and
119:40 - i want these eyes to be
119:44 - somehow very much influenced by where
119:47 - a is
119:49 - right
119:55 - yes
119:57 - so let's put here a
120:00 - as a point that we will be doing this
120:03 - eyes relative to
120:05 - and i'm going to do here function
120:08 - draw eyes
120:10 - a reference point
120:13 - and
120:14 - let me just make the eye that is going
120:16 - to be
120:18 - on the right side here
120:20 - so
120:21 - i'm going to
120:22 - begin a path
120:27 - and move to some location there
120:30 - draw some curve for the top part
120:34 - i is very complicated actually
120:37 - oh boy
120:41 - oh boy
120:47 - what did i get myself into
120:52 - let's just draw the white part of the
120:54 - eye first
120:57 - so
121:00 - yeah
121:02 - we're gonna start at
121:07 - this point
121:09 - but these will be relative to a somehow
121:13 - so now i want to
121:15 - click on the points
121:17 - i mean measure here
121:19 - coordinates relative to this a location
121:24 - so
121:24 - just temporarily i'm going to
121:31 - modify my function for
121:34 - printing the coordinates here
121:40 - so that we have
121:44 - offset
121:50 - x is going to be x minus a dot x
121:55 - and y is going to be y minus a dot y
122:00 - so
122:01 - now we get here offset.x and offset.y
122:07 - and that means that
122:11 - clicking on a here is going to be pretty
122:13 - much zero
122:19 - very good
122:21 - okay so relative to a
122:25 - i'm going to
122:30 - start clicking on some locations now so
122:32 - this point right here
122:36 - okay
122:38 - and then i'm gonna do a
122:41 - quadratic curve
122:46 - to
122:47 - with this control point
122:50 - and to here
122:52 - and then another quadratic curve
122:57 - to here
123:00 - and another
123:02 - quadratic curve
123:05 - here
123:06 - and another
123:08 - quadratic curve to here so quite many
123:12 - points here that i'm listing in the
123:15 - console
123:26 - so let me clear this
123:30 - text
123:34 - somehow i'm going to align this and
123:44 - oh
123:44 - i didn't select all of them
123:50 - so these are the points
123:52 - and first i actually want to translate
123:54 - so
123:56 - the canvas
123:58 - before that i want to also save
124:00 - the context so save
124:05 - my language changed the keyboard
124:09 - translate
124:11 - to the reference x and the reference y
124:14 - so this is going to be a
124:16 - and just to remember at the end we also
124:19 - need to restore
124:21 - to the last state the canvas and here we
124:24 - begin a path and we say move to
124:30 - this location
124:36 - yes
124:39 - and then quadratic curve to
124:42 - i just copied this
124:44 - using this control point
124:50 - to
124:51 - this
124:52 - location
124:54 - let me actually cut these that i'm using
124:57 - already so that my
124:59 - i don't make mistakes
125:01 - and then
125:02 - another control point
125:07 - to this location
125:15 - and then another control point
125:20 - to this location
125:30 - what did i do wrong
125:35 - let's undo everything
125:43 - okay so this was the first i remove it
125:46 - so then you have control point
125:50 - to this location
125:57 - control point
126:01 - to this location
126:12 - control point
126:15 - to this location
126:23 - and control point to
126:26 - this location
126:32 - okay
126:35 - and uh maybe we want a stroke
126:38 - or
126:38 - actually a white fill but
126:41 - okay
126:42 - something is there it's not perfect i
126:45 - think the last click that i did
126:48 - needs to be
126:49 - actually perfect to the one in the
126:52 - beginning
126:54 - and i don't like this control point
126:58 - from here
127:00 - it should be
127:01 - higher up so
127:06 - i just moved it a bit okay and a little
127:09 - bit to the left i think
127:11 - i want it to be
127:13 - so
127:14 - five
127:17 - okay it's not that bad
127:20 - and of course this is now
127:23 - going to move with a but you can see
127:26 - it's not really
127:28 - great
127:30 - the way it's going to move with a
127:34 - needs to depend also on this slider in a
127:37 - way
127:38 - but it's something
127:40 - it's kind of like how uh
127:42 - yeah
127:44 - it's kind of like how glasses would look
127:46 - like on a person
127:48 - i think you could easily make glasses in
127:51 - this way
127:53 - let's actually try to consider
127:56 - glasses
127:58 - maybe i don't know i don't want glasses
128:01 - on this character i think
128:04 - but um
128:06 - so this is just one eye
128:13 - let's add another function here draw i
128:17 - like this
128:19 - and
128:20 - move the code
128:22 - from here
128:25 - to here
128:27 - and
128:28 - say now
128:33 - draw i
128:35 - so everything should be as before
128:38 - but
128:45 - if i'm gonna copy this
128:50 - now let's say
128:52 - scale
128:53 - minus 1 1 so i'm scaling on the
128:57 - horizontal axis
129:00 - basically flipping
129:03 - according to a
129:06 - to the a point
129:09 - then i'm getting
129:10 - here
129:12 - uh
129:14 - reverse
129:18 - okay begin path needs to go here
129:22 - there was some strange artifact there
129:24 - and now this kind of looks like the
129:27 - character
129:29 - has glasses
129:30 - um
129:32 - not eyes because the eye is somehow
129:35 - getting
129:36 - away from the
129:44 - out of the face
129:49 - i really like what what we are doing
129:51 - here
129:54 - i just hope this is possible to follow
129:56 - along i i think i'm definitely gonna
129:58 - publish this video it's gonna be long
130:01 - and some of the things may not be clear
130:03 - but comment below if you
130:06 - if you
130:07 - need some explanation about what i'm
130:09 - doing
130:10 - um
130:12 - yeah
130:16 - so
130:18 - let's actually have a function here
130:20 - called draw
130:23 - glass
130:26 - i
130:28 - draw a glass eye i will comment that is
130:31 - not used
130:33 - and uh
130:34 - now what i want to do is when we are
130:36 - drawing the eyes actually make these a
130:39 - little better so that the eye doesn't go
130:43 - out of the
130:45 - of the screen like that
130:48 - so
130:49 - [Music]
130:53 - what i want to do is on the positive
130:57 - value
130:58 - of this x i want to squish this i
131:04 - like that somehow
131:06 - so
131:11 - when i'm drawing the eyes i don't need
131:13 - just a reference point
131:15 - but i need also
131:22 - the x value there so
131:30 - how can i get it reasonably well
131:39 - i could store it inside of a
131:43 - as the value
131:49 - let's just do that so
131:52 - p dot
131:54 - x
131:56 - offset is equal to
132:01 - value
132:02 - so this is what
132:04 - is going to happen here
132:07 - and all of them will start having
132:10 - x offsets and y offsets
132:13 - equal to the value so it's just one way
132:17 - that i can do to
132:19 - pass
132:20 - this
132:21 - 0.6 value of my
132:25 - slider there
132:26 - from here
132:29 - to the point
132:31 - and now this reference point that i have
132:38 - here
132:39 - has this x offset as well
132:41 - so
132:42 - draw an eye
132:44 - with the reference x offset and this x
132:48 - offset is actually going to
132:56 - translate into the
133:00 - scale of the eye
133:07 - let's just do one eye first
133:10 - and
133:12 - let's call this value scale this
133:15 - parameter scale x
133:17 - and
133:21 - let's say here ctx
133:25 - scale
133:34 - one minus scale x
133:40 - and this is going to be something like
133:43 - a value there let's multiply it by
133:45 - something let's just see what happens
133:50 - oh
133:54 - okay this horizontally but vertically i
133:56 - don't want anything at least not yet so
133:58 - i just put hundred percent scaling
134:00 - vertically
134:02 - and now
134:04 - okay
134:09 - not what i want
134:11 - so the scaling
134:17 - the scaling that i'm doing here also
134:19 - needs to be restored afterwards
134:22 - after we draw that otherwise it affects
134:24 - the other eye as well and we don't want
134:27 - that
134:28 - so i'm gonna do this
134:31 - and now it affects only that eye
134:34 - but it's affecting way too much so
134:39 - i want it to affect less so this is why
134:42 - i mean here maybe multiply this by
134:49 - 0.3
134:51 - like that
134:53 - and now the i
134:56 - scales well but um
134:58 - here
135:00 - in the negative
135:02 - value it's still scaling
135:06 - it's stretching it
135:08 - more than the other eye and we don't
135:10 - want that i think that i only want this
135:13 - to happen
135:14 - for
135:15 - positive offsets
135:22 - so let's just put here math
135:25 - [Music]
135:33 - math
135:40 - max the maximum value of 0 and the x
135:44 - offset
135:45 - and
135:45 - let's see what happens
135:50 - yeah so now the eye doesn't stretch
135:53 - anymore i think it's kind of like what
135:55 - happens it does maybe get a little bit
135:58 - smaller when you do this but
136:01 - uh
136:02 - not very much the other one really
136:05 - becomes uh much smaller because of how
136:09 - um
136:10 - how the geometry of the of the face is
136:13 - it it starts to go behind the eye and
136:16 - also the nose goes in front of it so
136:19 - that's something that we will need to
136:21 - to think about
136:23 - um so
136:25 - when the eye shrinks horizontally like
136:28 - this
136:29 - it's it's good i think and we can put
136:32 - here a bigger value i think maybe 0.4
136:36 - yeah i think this looks great
136:38 - so the other one
136:45 - we'll see at the end some fine tunings
136:48 - if we're gonna change this in some way
136:50 - but um
136:52 - okay
136:52 - so
136:54 - how about the value here
136:57 - it's
136:59 - also needed so for the other eye when
137:01 - the head turns like this this one should
137:04 - also squish
137:06 - so now we have
137:13 - negative values there
137:16 - let's just put minus here i think
137:21 - yeah so that one squishes like that
137:25 - and the other one squishes like that and
137:28 - we see if we need to do anything
137:31 - for those cases when this is a negative
137:33 - and this is a
137:35 - positive there
137:36 - at the end but for now i like the way
137:39 - that this looks like and
137:45 - yeah i i think that this is pretty good
137:50 - so let me try to shape these eyes
137:54 - a bit more i'm going to draw
137:58 - actually i'm curious how it looks like
138:00 - with the glass eye
138:03 - as well so this one doesn't need the
138:05 - scaling
138:06 - i'm just going to put here
138:08 - draw glass eye on top of one eye and
138:12 - draw the other glass eye
138:20 - what happened
138:22 - why it doesn't work
138:27 - oh in the beginning everything is
138:29 - perfect there
138:31 - now it doesn't look that great
138:33 - i thought it would look somehow nice
138:35 - they would need some more adjustments i
138:38 - think so
138:40 - but okay a couple of things
138:44 - let's just remove and leave it as unused
138:46 - and maybe we adjust them later if we
138:49 - want glasses but i don't really like the
138:51 - idea
138:52 - the stroke here seems to be affected
138:55 - horizontally somehow
138:57 - the line thickness here at the bottom
139:03 - seems to be thicker than
139:05 - here
139:07 - i think that if i do the stroke after
139:10 - the restore
139:17 - yeah i don't get that effect anymore
139:19 - which is great
139:22 - i think it's great
139:24 - okay
139:25 - now vertically the eyes
139:28 - could also do something
139:51 - i think they should squish
139:53 - slightly
139:55 - so let's just put here
139:58 - uh
139:59 - ref.y offset
140:03 - and here as well
140:05 - and this is going to be scale y
140:10 - um
140:24 - okay and here
140:28 - one means nothing is going to happen
140:31 - but i want to
140:33 - if the scale y is something i want to
140:36 - make it smaller so it's going to be
140:38 - minus
140:39 - a fraction of this so scale y times
140:42 - 0.4 and because this is going to be
140:48 - negative and positive values but i want
140:51 - only positive here i'm going to take the
140:53 - absolute value of that
140:57 - so
141:04 - nothing seems to happen
141:06 - let me
141:09 - take the value from here and log it
141:31 - i don't think anything is happening
141:35 - but the values are good
141:38 - so let me call this
141:42 - vertical squish
141:44 - is equal to
141:46 - this which should work but it doesn't
141:51 - and um
141:55 - horizontal
141:56 - squish
141:58 - this one works
142:01 - already
142:13 - wow something bad happens there
142:16 - or
142:32 - oh
142:39 - this
142:45 - no now i lost the x behavior
142:55 - but the white behavior works what the
142:58 - what is happening
143:04 - oh
143:19 - no
143:20 - something is very weird
143:34 - it seems to squish the eyes but
143:36 - not the first time i'm
143:40 - uh
143:41 - i'm moving
143:43 - what is happening
143:51 - so the x offset
143:58 - should be good
144:01 - let's print a here
144:04 - x offset
144:07 - it's nothing but then i move y a little
144:10 - bit
144:14 - aha
144:15 - um
144:16 - i think i know
144:18 - so these offset values they should be
144:21 - something in the beginning um
144:24 - otherwise there is not a number there or
144:26 - undefined or something and it's causing
144:29 - some problems so let me put
144:34 - x offset is zero
144:37 - and
144:38 - y offset
144:41 - is zero in the beginning and we just use
144:44 - the ones from a at the moment but uh
144:47 - maybe we need the others at some point i
144:49 - i don't know
144:52 - so now
144:54 - yeah a y works
144:57 - just
144:58 - fine as i expect it to
145:01 - and here yeah this eye gets squished in
145:04 - the other way
145:10 - and that one like that
145:12 - uh
145:14 - some things i don't like in these
145:16 - extreme pose but i will probably not let
145:19 - it go
145:20 - all the way there so something like this
145:23 - is just fine
145:24 - and
145:25 - some rotation may be needed also to
145:28 - adjust these but this i'm gonna do later
145:31 - again it's just something for what looks
145:34 - good eventually so
145:38 - seems like i guessed the values quite
145:40 - well for the vertical movement i really
145:43 - like how that one
145:45 - happens
145:50 - here not sure if this would look better
145:54 - if everything here would be rotating a
145:56 - bit but
145:58 - when we have everything in the drawing
146:00 - then we will decide these
146:03 - things now it's just the shape of the
146:05 - eyes really
146:07 - so
146:08 - what i'm gonna do now is um
146:17 - yeah what i'm gonna do now
146:39 - it's good i like it
146:54 - okay so let's make the eye look like the
146:57 - actual eye in the drawing i still have
146:59 - about 15 minutes before i need to take a
147:02 - break
147:05 - and for that to happen
147:07 - i'm going to first
147:10 - instead of doing a stroke here i'm gonna
147:12 - do a fill
147:17 - like this so these are now white
147:19 - but
147:23 - let me make it
147:26 - fill style is equal to
147:29 - rgb a
147:31 - zero for red
147:34 - green
147:38 - maximum green but i'm gonna make it
147:41 - transparent so that i still see the
147:43 - shape behind
147:46 - all right this is
147:48 - good i think
147:50 - and i'm going to focus on this right eye
147:52 - again
147:52 - so
147:53 - there is one line here one curve
147:57 - going around the eye and this actually
148:07 - i think we already have the points for
148:09 - that one
148:10 - so here we started
148:13 - somewhere there and we had the quadratic
148:15 - curve like this
148:16 - the second quadratic curve
148:21 - might give us
148:23 - what we want here so i want to draw this
148:25 - black line
148:26 - here
148:27 - so
148:30 - i'm gonna move to
148:33 - this point which was the end of the
148:35 - first quadratic curve
148:45 - so begin path
148:51 - this restore i think can go here now
148:56 - and
148:57 - stroke
149:01 - okay
149:02 - that was fairly easy
149:05 - i think it's good and it doesn't align
149:08 - great with the other one i'll see later
149:10 - if i add some kind of
149:12 - randomness to somehow make it look more
149:14 - organic
149:15 - i just hope i have enough time
149:18 - and uh maybe this control point could be
149:22 - a little bit
149:27 - lower
149:30 - i don't know i think it's just good
149:33 - so last i want this
149:36 - not last but second last i want these
149:39 - eyebrows
149:41 - so
149:42 - let's do the eyebrows next
149:45 - and
149:46 - this is not going to be very easy
149:50 - i'm gonna start
149:52 - somewhere
149:54 - here
149:59 - and then
150:00 - a control point somewhere here
150:03 - another control point
150:05 - i mean end point of the first curve here
150:08 - and then a control point maybe here
150:12 - and another endpoint here
150:14 - another control point
150:17 - here another endpoint here
150:20 - and another control point here and
150:22 - another endpoint here with a little bit
150:24 - of adjustments we'll see
150:27 - so
150:28 - these are going to be the shapes of the
150:30 - eyebrows and i'm going to use
150:33 - fills for them
150:35 - but black a black fill
150:38 - because i really think that having an
150:40 - organic
150:42 - shape for this is important i'm not just
150:44 - going to draw a very thick line which is
150:46 - one way you could do this very quickly
150:50 - so
150:50 - i'm gonna
150:52 - i'm gonna
150:53 - go now
150:54 - move this restore to the bottom
150:57 - and begin a new path
151:05 - yeah i think this restore will have to
151:07 - need some thinking
151:09 - otherwise squished lines from previously
151:12 - might be but let's see but i'm gonna
151:15 - move to
151:17 - the first point from here
151:21 - and then quadratic curve to
151:30 - here
151:33 - and then quadratic curve
151:37 - to
151:40 - here
151:43 - and then
151:49 - quadratic curve
151:54 - to here
151:56 - and last but not least
152:00 - quadratic curve to actually the same
152:02 - point we start that
152:06 - my last click here was not that accurate
152:09 - so now with that
152:11 - let's stroke this one too
152:13 - no
152:15 - fill
152:19 - and it's actually green
152:23 - uh let me
152:25 - change it to black fill style
152:37 - okay not great yet but
152:41 - it's something
152:43 - and i don't really see everything
152:46 - because of this a point so let me just
152:48 - hide the point a for now
152:54 - eyebrows connecting there i don't think
152:56 - that's great
152:59 - so the start point could be
153:02 - more to the right i think maybe
153:07 - eight
153:10 - oh no this is this point
153:12 - i think that one was fine
153:14 - but uh
153:16 - actually the last control point this one
153:18 - yeah this could be
153:23 - maybe like that
153:27 - or even less
153:30 - yeah this is good
153:32 - i think
153:34 - let me comment out the eyes a little bit
153:40 - no too close it will look funny
153:43 - so
153:45 - these points are not very good there
153:47 - my clicking was not very accurate so let
153:50 - me
153:59 - put
154:00 - here how about the value of 0
154:05 - it's better maybe 0.01
154:12 - or even 0.2
154:15 - okay this is quite good and the this
154:18 - control point here
154:20 - from
154:21 - this one
154:24 - i think this needs to be more
154:27 - i mean
154:28 - less minus zero point zero
154:32 - four
154:34 - yeah i think this is good
154:37 - why not
154:40 - it looks quite okay
154:42 - some sharp corners around the edges here
154:45 - but
154:48 - let's try a bit bigger maybe six
154:52 - okay
154:53 - it's not bad i could fine tune these
154:56 - much more and i could use that bezier
154:58 - curve
155:00 - to which has two control points to get
155:03 - rounded corners
155:05 - to be more round or there's also the arc
155:08 - 2 method
155:09 - but
155:10 - i don't want to over complicate the code
155:12 - i prefer to use less methods more times
155:16 - because then it's
155:17 - more obvious what is happening
155:22 - and it looks it would look
155:24 - indistinguishable i think so
155:27 - okay
155:35 - it's not bad so this stroke thing is
155:38 - something that i complained about
155:41 - that
155:46 - yeah something will have to be done with
155:48 - this rotation if i consider these
155:50 - extreme
155:51 - sides but i said that i'm probably happy
155:54 - enough if this
155:56 - will be like the maximum
155:58 - movement range
156:01 - so it's fine it's no problem
156:04 - okay
156:06 - uh
156:08 - i want to get it done and not somehow um
156:14 - how to say
156:16 - not have
156:17 - nothing to show at the end or an
156:19 - incomplete thing so i prefer to have it
156:21 - not perfectly polished
156:23 - but somehow
156:25 - working
156:26 - and
156:32 - this is quite good i think so
156:34 - let me make these eyes now
156:38 - or let's draw also the arc for the
156:40 - circle so for the
156:43 - i
156:44 - um
156:47 - the dark part of the eye whatever it is
156:49 - the iris and the pupil somehow combined
156:52 - here so this is going to be just a
156:54 - single
156:55 - a simple circle let me put it
157:04 - here
157:06 - like this
157:08 - so
157:11 - yeah and if this stroke is somehow
157:13 - bothering that it squishes
157:17 - here like i said previously we can also
157:20 - move this here and do the restore before
157:23 - we do the final stroke there and i think
157:25 - that this is
157:26 - going to look exactly the same because
157:28 - the line and this part here are both
157:31 - black so
157:33 - oh
157:34 - how is this not giving me an error did i
157:40 - yeah anyway
157:42 - let's see but uh
157:48 - an arc so ctx begin path
157:53 - ctx
157:55 - arc
157:56 - at
157:57 - 0.17 and 0.09
158:01 - with the radius of
158:04 - i don't know i think i'm just gonna try
158:06 - to guess it
158:09 - zero and zero dot
158:12 - math dot pi times two
158:17 - and fill here
158:21 - oh i sure guessed it
158:23 - very small
158:28 - very big
158:29 - wow
158:34 - what
158:35 - oh
158:44 - okay
158:45 - maybe 0.6
158:50 - yeah
158:51 - it's actually not a great idea to use
158:53 - perfect circles like this i think that
158:56 - having slight ellipses would be better
159:00 - again something that i might polish in
159:02 - the end result
159:03 - but let me change now this
159:07 - green transparent fill style to white
159:11 - and
159:13 - now the eyes look kind of like the
159:15 - original eyes but they are
159:18 - animated
159:19 - in in a sense that
159:22 - they are controlled
159:25 - by this movement
159:27 - [Music]
159:34 - the pupils will need to move a little
159:36 - bit different than now otherwise it
159:39 - looks too much like these are not eyes
159:43 - but
159:46 - stickers that look like eyes
159:49 - and glued on top of the
159:51 - of the face
159:52 - so when looking up it's natural that
159:54 - these circles move a little bit
159:57 - upwards
159:59 - and so on
160:01 - so i will have to think about
160:04 - how that could be done
160:07 - again as a final fine tuning there
160:11 - but
160:12 - now this is
160:14 - good for now and
160:17 - i'm gonna have to go so i will come back
160:21 - a bit later today and try to do more of
160:24 - these graphical things
160:27 - i think i want to get it done today this
160:30 - kind of
160:33 - to get it to look like the original
160:35 - image and also move somehow
160:37 - and tomorrow i will try to make it maybe
160:41 - talk or
160:43 - something i i don't know yet and it
160:45 - depends on my speed so far it's been
160:47 - quite slow but i think that now i have
160:49 - enough tools with this kind of clicking
160:52 - to get coordinates and and whatever
160:57 - these are quite useful things that i
160:59 - have made
161:00 - and
161:01 - the eyes now were quite fast to do
161:04 - compared to when we started so
161:07 - i think things will speed up
161:11 - only speed up from now i hope
161:14 - depends what i will try to do later so
161:17 - i'm gonna stop the recording now and
161:19 - get back
161:21 - in a while
161:24 - okay i'm back now for three hours or so
161:29 - and i think that's all i can do today
161:31 - i'm getting pretty tired already
161:34 - so next what i want to do is um
161:39 - focus on the beard
161:41 - so i'm going to try to draw the beard
161:45 - and also
161:47 - have it go around the face like when the
161:49 - when the face is moving
161:51 - like like that
161:53 - it should wrap around nicely somehow
161:56 - so the way i'm gonna do it i'm gonna use
161:58 - the point a from previously
162:04 - the one here that i uh commented out
162:07 - previously so the beard is gonna be
162:12 - drawn
162:15 - relative to this point as well so
162:17 - similar as what we do with the eyes
162:20 - i think that that makes
162:22 - the most sense
162:24 - somehow let's see
162:30 - so
162:36 - i have draw eyes here
162:39 - let's have also
162:41 - draw
162:43 - beard
162:44 - according to the a reference point
162:47 - so we have a function
162:49 - um
162:51 - draw beard and let's have this point
162:54 - called
162:55 - the reference
162:57 - there
162:58 - and i'm gonna copy part of this code
163:01 - from here for the saving and translating
163:05 - but this part
163:08 - is not needed so
163:11 - now uh i still have activated here
163:16 - yeah
163:17 - these are coordinates relative to a
163:20 - now good
163:23 - so let me click here
163:26 - where this beard starts and
163:29 - actually
163:31 - i think i'm going to click here for the
163:33 - starting point
163:36 - so this is
163:37 - let me clear the
163:40 - console here
163:42 - and say
163:48 - click here
163:50 - and a control point should also
163:57 - be somewhere there
164:00 - maybe
164:02 - here and the end point will be this one
164:08 - now from here this changes curvature
164:12 - here so let me put
164:14 - another control point a bit
164:17 - higher here
164:19 - and then
164:21 - the final point here is going to be
164:24 - right in the middle so
164:26 - this is actually supposed to be zero but
164:29 - my clicking wasn't perfect
164:31 - so let me copy all of these things
164:34 - right here
164:36 - and
164:43 - remove those
164:44 - things from there
164:46 - and say
164:52 - begin path
164:56 - move to
164:58 - this point
165:03 - and then quadratic curve to
165:08 - using this control point
165:11 - to this location
165:16 - and the final one
165:20 - using this control point
165:24 - to this location
165:26 - like so and let's
165:30 - stroke this for now
165:33 - um
165:36 - and refresh
165:39 - yeah looks pretty nice like what i
165:41 - expected
165:43 - but when we rotate here
165:48 - it's not that bad
165:50 - there is a problem i think when we
165:51 - rotate other
165:53 - place here so
165:54 - similar kind of trick needs to happen
165:57 - as what we are doing with the
166:00 - squishing of this eye we are also going
166:02 - to have to squish this beard i think
166:06 - if that makes sense
166:10 - uh and we said that this is actually
166:12 - zero
166:13 - here the last point
166:18 - now it touches here perfectly
166:21 - okay
166:23 - so
166:25 - how do we do that
166:27 - squishing
166:30 - let's do it a bit later so
166:34 - now this is fine
166:38 - uh
166:50 - and i somehow like how this looks
166:53 - already when turning to one side
166:56 - this other side that's where the problem
166:58 - is
167:04 - maybe we do it now let me see how i did
167:06 - that before i i forgot
167:09 - okay we are calculating somehow
167:16 - a value for the
167:21 - we are using the offset
167:23 - as a scalar
167:25 - only on one side so um
167:35 - maybe we make
167:37 - the beard to be something like uh
167:40 - draw left beard or something
167:44 - but
167:44 - anyway
167:45 - let's see so
167:51 - scale x
167:55 - is gonna be
167:57 - that one
167:59 - and
168:05 - i'm just gonna copy this horizontal
168:08 - scaling for here from here
168:23 - like so and vertical just hundred
168:25 - percent for now so i'm not going to
168:27 - squish it in any way
168:29 - refresh
168:34 - something is wrong
168:36 - i'm squishing it now but i shouldn't
168:39 - this should happen on the other side
168:42 - this is happening because uh
168:45 - now i'm drawing this left side here but
168:48 - uh
168:49 - we were working with this eye primarily
168:52 - and this was just a mirrored part so i
168:55 - should actually work with the beard on
168:57 - the right side i i forgot what i'm doing
169:00 - so i'm just gonna mirror these
169:02 - coordinates by putting here
169:04 - plus plus
169:06 - plus plus
169:12 - and now the beard is there
169:15 - and when we rotate like this nothing
169:17 - happens to it it still looks pretty much
169:19 - the same
169:20 - on the other side
169:23 - it does get
169:24 - squished a bit
169:26 - but not enough i think it needs to be
169:28 - squished even more or
169:33 - or something needs to happen to this
169:35 - control point here i think
169:39 - this control point is somehow too
169:45 - too much going outside
169:49 - there
169:51 - so that the control point there is
169:57 - the one here
170:00 - and
170:01 - let me see if i can make this
170:05 - like that
170:25 - it doesn't seem to affect much
170:27 - okay now it affects way too much
170:35 - okay i think this looks pretty good
170:39 - okay
170:40 - and uh
170:42 - yeah
170:44 - let's
170:45 - check actually also vertically what
170:47 - happens
170:48 - so some squishing needs to happen there
170:51 - as well
170:52 - definitely
171:02 - okay and the other way
171:06 - this is quite good i think already
171:09 - so the vertical squishing
171:13 - let's actually start and do it in the
171:15 - same way as here
171:17 - for now
171:19 - and adjust it somehow so the vertical
171:22 - squishing something to do with this
171:24 - scale y
171:26 - so scale y is just the offset we don't
171:30 - do that
171:31 - only on one side at least not just yet
171:35 - so vertical squishing
171:40 - i mean
171:42 - scale y is equal to just that offset and
171:46 - let's put this value here
171:50 - and now
171:52 - yeah the beard gets squished somehow but
171:55 - it's not great
171:57 - i think
172:02 - and this is somehow too much so
172:06 - we don't want it to be like that i think
172:08 - so
172:18 - and the other scalar the horizontal i
172:21 - think needs to be bigger maybe
172:25 - 0.5
172:27 - so now what happens
172:29 - okay it's not good the line goes inside
172:31 - the eye i think point
172:34 - 45 is is nice
172:39 - yeah that's good and when going
172:41 - downwards like this
172:48 - the
172:49 - slider just goes way too much so i think
172:52 - that i'm gonna limit these sliders to go
172:56 - from
172:58 - minus
172:59 - 0.5
173:02 - to
173:03 - minus 0.5 there
173:09 - and the same for the positive
173:14 - so that the movement is not so extreme
173:17 - and that the 3d
173:19 - characteristics of the face don't
173:23 - interfere so much
173:30 - yeah
173:31 - and
173:32 - this one
173:37 - yeah i think that's just fine
173:41 - not perfect but
173:48 - somehow i liked
173:50 - the feeling of it i don't think they
173:52 - should be linear interpolations but
173:54 - something else but
173:57 - i'm quite happy with this at the moment
174:07 - yeah
174:08 - and um
174:13 - so we started up here
174:15 - now we got
174:16 - here
174:19 - and i'm going to actually connect this
174:22 - right part
174:24 - of the
174:25 - face so i'm going to go around it and
174:27 - connect it back here so let me add
174:31 - another line to
174:33 - here
174:34 - and then
174:39 - a line two so i'm gonna keep these as
174:42 - straight lines here they are maybe small
174:45 - curves but
174:48 - i just gonna
174:49 - i'm just gonna have a lot of line twos
174:52 - here
174:55 - and the last one is gonna be
174:58 - a curve to this point
175:02 - should use the same height for this one
175:06 - and then connect back to the starting
175:08 - point so all of these
175:11 - line two but the last one is going to be
175:13 - a quadratic
175:16 - quadratic curve
175:19 - too
175:20 - so going back to the beard
175:33 - and i'm gonna say here ctx line to
175:38 - this one
175:42 - and
175:43 - many other line twos
175:49 - okay
175:50 - let's close these like so
175:53 - and finally
175:54 - one quadratic curve two
175:58 - using this control point
176:02 - to this location the last one but here i
176:06 - want the same y value as we started
176:09 - which is the same it's great i clicked
176:11 - perfectly this time
176:12 - and i do want another line to the
176:15 - beginning
176:17 - or i can also call
176:20 - close path i think
176:22 - and it should do the connection probably
176:26 - let's see
176:28 - what did what is that
176:40 - what what is happening
176:42 - uh i'm missing a point
176:51 - here
177:07 - oh no the control point did i click here
177:10 - before i think i didn't
177:13 - this was the control point that i need
177:15 - to do
177:16 - um
177:18 - so
177:21 - this control point was here
177:24 - and another line to
177:26 - this one other point that i clicked
177:28 - earlier i think
177:30 - and this is just zero here let's
177:33 - keep it as such
177:36 - okay now this looks a bit better
177:44 - okay good
177:47 - and
177:48 - how does it look like so
177:50 - rotating like this
177:52 - looks quite nice
177:54 - like that
177:56 - doesn't look nice so here i want this
177:59 - point to actually extend
178:02 - all around the face now
178:07 - so that the beard covers everything
178:09 - so i'm gonna do that by
178:23 - working with this x offset so if the x
178:25 - offset is negative
178:32 - then these two points
178:35 - basically
178:37 - the control point and this other uh
178:41 - this point and the control point there
178:43 - need to be different need to move
178:45 - further away to keep the shape of the
178:47 - beard
178:48 - proper
178:49 - so
178:50 - i'm going to define those points as
178:54 - something so um
179:07 - do i want to use the linear
179:08 - interpolation and the range here
179:13 - probably
179:15 - so these would be initial starting
179:17 - points
179:18 - and then
179:20 - where did i use this lerp previously
179:25 - okay
179:27 - so
179:29 - we will define a new point we have a b c
179:33 - let's make d here
179:39 - so um
179:42 - d is going to be
179:48 - this value
179:49 - here
180:02 - hmm
180:10 - now i think i just
180:14 - call it here constant outermost
180:18 - point
180:21 - for the sides so let's have that one be
180:24 - equal to
180:26 - an x value
180:27 - and the y value
180:30 - and the x here is going to be
180:35 - this
180:37 - and the y is going to be this so our
180:40 - last point here will be
180:42 - outermost point x and outermost point y
180:48 - but
180:49 - when we
180:50 - if i refresh this it should look the
180:52 - same
180:53 - but
180:54 - now when we
180:56 - move like this our outermost point is
180:59 - going to be
181:02 - depending on
181:08 - the opposite
181:10 - of this offset
181:12 - but um
181:15 - scaled somehow
181:17 - and also not affecting here like that so
181:20 - only when
181:23 - that thing
181:25 - moves
181:26 - let's um
181:27 - move to the left so only when it's
181:29 - negative that means that
181:33 - minus
181:36 - math minimum of this offset
181:40 - and zero
181:42 - let's put zero in the beginning
181:44 - so i only keep the negative value and i
181:46 - multiply that by
181:50 - 0.4
181:56 - a bit too much i think
182:01 - 0.3 maybe
182:13 - i think i want to keep it
182:15 - seemingly in the same position so let's
182:18 - try 0.2
182:22 - i think i'm happy with that how it looks
182:25 - like
182:26 - and the control point
182:34 - i think control point is not bad let's
182:36 - see what happens when we move this one
182:38 - also
182:42 - okay
182:47 - okay
182:48 - so now when moving upwards like this
182:51 - we want our
182:53 - bottom point here to actually go
182:56 - down
182:58 - quite much so all the bottom part here
183:01 - should be
183:03 - should be black now
183:06 - so
183:07 - when the
183:08 - y offset
183:10 - is
183:12 - negative
183:17 - yeah something similar to this minus
183:20 - minimum of
183:21 - the y offset
183:24 - times probably something more here like
183:27 - three or so
183:34 - oh i'm moving this point so
183:38 - it's not good um
183:41 - okay
183:43 - outermost point just stays the same and
183:45 - let's call this right most point
183:48 - right most point
183:54 - and
183:58 - bottom most point
184:01 - so bottom most point is the one that is
184:05 - um
184:11 - this one
184:15 - and
184:16 - 0 for x
184:22 - like this
184:25 - and here we don't need to change that
184:27 - one so the bottom most point needs to be
184:30 - before this one
184:37 - and i just put here bought the most
184:40 - point x and bought the most point y
184:42 - so
184:51 - yeah
184:52 - now the beard is definitely continuing
184:56 - more than before it's a big space here
184:58 - now
185:00 - um i think i can get this scaler to go
185:03 - more maybe four
185:09 - good
185:10 - but
185:11 - i think i also want this control point
185:14 - to be affected somehow
185:16 - so i will call it
185:18 - control point
185:25 - and it will be
185:26 - this thing right here so
185:29 - let's
185:30 - let me copy this
185:32 - and
185:33 - say
185:41 - control point x control point y
185:46 - like this
185:48 - and
185:53 - now for
185:55 - this one it it also needs
185:57 - to go low like this but maybe not as
186:00 - much let's see
186:01 - so it will depend on on the y as well
186:07 - yes
186:08 - i think this shape here is much nicer
186:11 - now
186:12 - um it's good
186:26 - and when turning like this i actually
186:29 - think
186:30 - i want to
186:32 - yeah it should cover the neck here so
186:36 - for the control point we move it also
186:38 - like this
186:42 - so
186:46 - let's see what happens
186:51 - yeah now this covers the neck as well
186:54 - quite nicely
187:07 - it's
187:08 - fine
187:10 - i like it i think it's good
187:12 - so
187:14 - now that we have this beard on one side
187:16 - done i'm gonna do it on the other side
187:19 - in the same way
187:21 - let's try also with the other
187:26 - yeah
187:27 - something weird happens with the eyes
187:29 - there when moving really fast but
187:35 - i don't actually know if they should
187:37 - squish so much
187:39 - maybe not even at all
187:41 - let me remove
187:43 - make the eyes squish a bit less
187:45 - vertically so
187:47 - here when drawing the eyes vertically
187:50 - vertical squish
187:52 - let's put this
187:55 - 0.3 there
188:03 - even 0.2 i think it doesn't need to be
188:06 - so noticeable
188:22 - and uh
188:24 - this might apply also to the beard as
188:27 - well i think now they're somehow out of
188:29 - sync
189:09 - i need to adjust these values a little
189:11 - bit so this bottom most point
189:15 - too much going now
189:17 - and i think the control points
189:19 - as well
189:33 - yeah i think it's fine
189:35 - so let me
189:36 - now
189:37 - extract all of these things that we did
189:40 - here
189:44 - in the same way that we did for the eye
189:46 - so
189:47 - we are passing here
189:51 - some values for these offsets
189:59 - for scale x and scale y so let's say
190:02 - function
190:04 - draw
190:08 - beard
190:09 - draw half
190:11 - beard
190:13 - and scale x scale y so very similar to
190:16 - the other function for draw
190:19 - i
190:20 - or half eyes
190:22 - if that makes any sense
190:24 - so what we are going to do is
190:27 - say here draw half beard
190:31 - with
190:32 - this for scale x
190:36 - and
190:38 - this for scale
190:40 - y
190:51 - and we also need some other stuff here
191:05 - the minimum of zero and fx offset this
191:08 - is actually the same as our scale x so
191:13 - here
191:14 - i can actually
191:18 - replace with that
191:23 - and the minimum of zero and y offset
191:26 - this is something we don't have
191:28 - so
191:29 - um
191:31 - the bottom most
191:32 - point
191:33 - scaler
191:38 - i might call this some something like
191:42 - an anchor or something i'm not sure
191:46 - what would be the proper term
191:49 - but um
191:52 - let's say beard scaler
191:55 - or no
192:02 - it's something there so draw half beard
192:07 - bottom
192:10 - the bottom scaler will be the first the
192:12 - last thing here so
192:14 - minimum between
192:16 - 0 and y offset
192:18 - so bottom
192:20 - scaler
192:24 - bottom
192:26 - scaler and i'm just going to put
192:31 - one these
192:31 - the other for better readability
192:36 - and
192:38 - yeah let me just copy everything here
192:43 - like so
192:45 - put them in the new function
192:47 - and scale x doesn't need to be defined
192:50 - here anymore
192:52 - the squish is still good scale y is
192:56 - here now
192:57 - and this bottom scaler is going to be
193:01 - a third parameter
193:04 - for stretching the beard down to cover
193:08 - the neck
193:09 - let's refresh
193:11 - and
193:13 - everything still seems to work
193:30 - okay
193:35 - oh something is wrong there
193:45 - it's completely opposite here so
193:51 - i messed up something
193:54 - scale x
194:00 - um
194:23 - okay
194:24 - i'm missing something there i think it
194:26 - was a minimum
194:28 - of
194:32 - i think it was a minimum of
194:36 - minus this and let's rename these
194:40 - uh this will be
194:41 - [Music]
194:42 - vertical
194:44 - scalar
194:45 - and the last one will be horizontal
194:48 - scalar
194:49 - so this horizontal scaler is actually
194:52 - going to be
194:52 - [Music]
194:54 - here i shouldn't have renamed
194:57 - to scale x i think it was a different
195:00 - value there
195:01 - i hope
195:04 - no
195:08 - or maybe
195:21 - was it plus
195:24 - i think some minus plus thing here is
195:27 - going to fix it
195:29 - somehow
195:43 - no i think it was minus but uh
195:49 - without the minus
195:51 - yeah okay now now it's good this
195:54 - stretches out like that
195:58 - okay great
196:00 - so
196:01 - we have draw half beard uh how was the
196:03 - code doing the eyes it was scaling
196:06 - something and then
196:07 - drawing the other eye
196:09 - with the minus
196:12 - here
196:14 - so
196:15 - let's do the scaling
196:17 - here
196:19 - and the other
196:21 - half of the beard
196:26 - really horizontally is what everything
196:29 - matters i think vertically they behave
196:31 - the same
196:33 - so maybe putting it in both places is
196:36 - correct
196:39 - okay
196:58 - i don't know what happens there
197:14 - something strange happens there
197:23 - maybe the last one doesn't need the
197:25 - minus somehow i'm tired now and i
197:28 - don't
197:32 - no not there
197:40 - okay
197:44 - i just hope that i don't need to do the
197:46 - math and it
197:47 - it magically works
197:52 - but something is wrong so
197:59 - um
198:01 - am i restoring properly
198:05 - so draw half beard we have a scale
198:10 - we don't have a restore so here we have
198:13 - draw the eye
198:15 - starting with the save
198:17 - restore and stroke
198:19 - so
198:20 - draw half beard
198:23 - let's save this
198:25 - and
198:27 - i hope this is correct
198:31 - restore and stroke
198:39 - okay
198:40 - this looks good
198:41 - and vertically
198:45 - oh yeah
198:48 - i'm quite happy with this i think some
198:50 - things could be much better but um
198:54 - this is nice i really like it
199:00 - and notice that the lines i drew in the
199:02 - beginning those are just some kind of
199:04 - reference and i'm really looking at
199:06 - these um
199:08 - new lines that i'm drawing now and at
199:10 - the animation
199:12 - so maybe i draw the
199:15 - beginning lines
199:18 - gray somehow
199:24 - so the draw body and the draw head
199:27 - um
199:29 - line
199:31 - stroke
199:32 - color
199:35 - is it stroke color no stroke style
199:40 - i think
199:41 - gray
199:46 - yeah but after i do that i make it black
199:50 - again
199:51 - so
199:52 - this is now for this head
199:55 - lines
199:56 - here they are gray
199:58 - um
200:02 - light gray
200:05 - too too light gray is just fine so they
200:08 - are not as striking and the other as the
200:10 - other ones and i'm gonna do the same
200:12 - for the body so draw the body
200:17 - like that and the
200:19 - black
200:20 - there
200:21 - after we
200:22 - oh what happened no
200:27 - before
200:31 - i'm not in the right function am i
200:33 - it's draw beard
200:36 - i want drop body
200:38 - so for the draw body um
200:45 - so that it's not so
200:46 - in our face here and we look at the just
200:50 - the
200:50 - uh emphasized lines so now when we are
200:53 - looking at the
200:55 - dark lines we see the character moving
200:58 - as he should be moving
201:01 - now the nose is something
201:03 - that i want to do next
201:05 - and it's kind of
201:11 - silly because in the original
201:13 - nose like
201:15 - let me
201:17 - actually comment out everything for now
201:23 - so here the nose is somehow like it's
201:25 - broken to the side when the character is
201:28 - looking forwards but it looks kind of
201:30 - okay
201:31 - i don't think we can do something like
201:33 - this now the nose
201:36 - will
201:37 - look somehow different
201:46 - needs to look somehow different
201:51 - and it could be weird when you see the
201:54 - character from the front but
201:57 - let's see i'm gonna draw the nose as a
202:00 - straight line
202:01 - actually
202:04 - so i need two points
202:06 - and this control point
202:09 - let's see
202:13 - not the straight line i'm gonna draw it
202:15 - with the curve so let's say here
202:18 - uh
202:24 - something like that
202:27 - and
202:28 - i'm going to say
202:31 - ctx
202:34 - this should also be yeah it's relative
202:36 - to a i didn't change that clicking
202:39 - function yet let's make it draw nose
202:44 - um sorry
202:46 - we're still in the head
202:47 - so in the head
202:50 - draw nose relative to a
202:53 - again
202:54 - so function
202:56 - draw nose
202:58 - reference point
203:00 - and the
203:01 - ctx
203:03 - begin path
203:06 - ctx
203:08 - move to
203:09 - 0 0.2
203:12 - ctx
203:13 - quadratic curve
203:16 - 2
203:18 - using minus 0.05
203:21 - 0.27
203:25 - to go to zero point
203:28 - actually zero i just clicked wrong it
203:31 - should be the same vertical in the
203:33 - middle and uh
203:35 - 0.34
203:39 - yeah and the ctx stroke
203:43 - like that
203:46 - i don't know what happened
203:50 - um
203:51 - i need the translating also so i forgot
203:55 - this code right here we need to
203:57 - translate to the reference point before
203:59 - we do that and restore when we are done
204:02 - with with that
204:04 - okay now this is the
204:07 - nose here
204:08 - a little bit different shape than before
204:12 - and
204:14 - i don't like it
204:15 - so
204:18 - this bottom most point needs to be a bit
204:20 - higher let's say three
204:22 - and this control point
204:25 - more to the side i
204:27 - clicked on it i should have clicked
204:28 - outside of it if you remember how bezier
204:32 - curves work
204:33 - and it looks kind of too roundish i
204:36 - don't like it i think it needs to be
204:38 - also lower
204:43 - a bit better and maybe just
204:46 - 0 9 here
204:49 - i think this is ok
204:52 - maybe i use the bezier
204:55 - also but
204:57 - later in the fine tuning if i still have
204:59 - energy for it
205:00 - so
205:01 - it looks okayish maybe not not really
205:04 - great
205:05 - in that side and then in the other side
205:08 - it's it's pretty much horrible so this
205:10 - is why we need to modify this control
205:14 - point so this is the tip of the nose
205:17 - tip of the nose is going to be
205:20 - having an x and a y
205:24 - and
205:26 - the
205:27 - x
205:27 - is going to depend on this
205:33 - x offset
205:37 - so
205:41 - let's just say here ref.x offset
205:45 - and
205:46 - probably we have to scale it down a lot
205:48 - but anyway and the y is going to be
205:53 - same as here
205:55 - i think
205:57 - like that so here we just put tip dot x
206:00 - and tip dot
206:02 - y
206:03 - like this and what's wrong here
206:10 - is equal to a new object like that
206:14 - so now the nose is a line which is not
206:16 - really great uh but
206:19 - at least it's
206:21 - okay
206:24 - yeah so this needs to be less
206:27 - emphasized now
206:29 - so a fraction of this x offset
206:52 - i'm going to leave it as a line for now
206:54 - even though i want to do something about
206:57 - it later
206:58 - i want to think about some better better
207:01 - style for the nose maybe
207:04 - but
207:05 - at least
207:06 - a line is is something that we can deal
207:09 - with and
207:13 - it's not bad
207:15 - i think a bezier curve here would be
207:18 - better like that one that has two
207:19 - control points
207:22 - points
207:23 - and uh do something about the line
207:28 - to do
207:32 - okay
207:33 - great now
207:36 - let's do the top part and i'm gonna
207:39 - i got this idea while i was on the break
207:42 - previously that i want to have the hair
207:46 - quite dynamic
207:48 - like
207:48 - when the character moves his head the
207:51 - hair moves
207:54 - realistically somehow
207:57 - so
207:58 - i'm now just gonna make a black
208:01 - shape around here and i'm gonna draw
208:04 - these spikes
208:06 - only
208:07 - only later
208:10 - if that makes sense i'm gonna draw them
208:12 - using some physics
208:14 - so when the character for example moves
208:16 - his head like this the hair is going to
208:20 - be
208:20 - affected
208:22 - by
208:22 - these uh
208:25 - by those physics there and i notice now
208:27 - a problem here at the beard these
208:31 - lines there the last
208:34 - previous
208:35 - second to last line two has to have an x
208:38 - of zero
208:39 - what happens there
208:42 - draw a beard
208:49 - this one
208:54 - oh no what happened
208:59 - no after that this one this has to be
209:01 - zero
209:04 - yeah and the the the beards don't need
209:07 - to be stroked
209:08 - they need the fill
209:10 - so
209:12 - and not white phil it looks like santa
209:14 - claus
209:16 - i need to put um ctx fill style to black
209:21 - so i forgot those parts
209:23 - okay much much better now
209:28 - nice
209:30 - and
209:32 - yeah let's do the
209:36 - top part
209:38 - of the head next
209:43 - top part of the
209:45 - hair this black part and then do the
209:47 - physics somehow let's see
209:52 - so
209:53 - i really think i'm over complicating
209:55 - myself but it doesn't look so realistic
209:58 - and i think it needs more personality
210:00 - somehow so that physics is gonna make
210:02 - things much more much nicer i i i hope
210:10 - let's see
210:13 - so um
210:18 - uh
210:21 - half
210:22 - hair is going to be the the thing that
210:25 - is going to be drawn here somehow
210:28 - to do the top shape of the head
210:31 - of the
210:32 - some black lines here basically
210:35 - uh
210:38 - yeah and it should continue with the
210:40 - beard
210:42 - at least on this side and then
210:45 - maybe i'm gonna
210:48 - make these
210:49 - crazy things there these shapes as well
210:53 - i wonder if it's a good idea or not
211:00 - i think it's a
211:07 - not the great idea
211:10 - let's just pretend i have a very
211:13 - small
211:14 - haircut like very short hair
211:17 - just coloring the head for now and think
211:20 - what to do with those later
211:24 - so draw beard
211:28 - draw
211:30 - hair
211:32 - also with a as the reference point i
211:35 - think
211:41 - yeah we didn't really need b and c
211:43 - we would need them if we want to rotate
211:45 - the head like this but i don't want to
211:48 - do that it's just too much work
211:51 - too much trouble now so this is just
211:55 - really fine by me
212:03 - i kind of like we forgot about the nose
212:06 - when it's connected to
212:09 - scaling the nose vertically we forgot
212:11 - that but i kind of like it that it
212:13 - connects to the beard only when pointing
212:16 - down or when pointing up like this it
212:18 - somehow gives more
212:20 - personality i i think it's a mistake
212:23 - that i want to keep
212:25 - some okay let's do the head part
212:29 - what oh draw hair not defined yes
212:32 - so
212:33 - i'm going to copy draw beard
212:38 - pretty much like this
212:40 - and
212:42 - call it draw hair
212:45 - and it's going to be draw half here
212:50 - and draw half here
212:53 - and now i'm going to copy draw half
212:55 - beard
212:56 - and make it like that but change the
212:59 - coordinates somehow
213:00 - so
213:02 - let's see if we can do both at once even
213:04 - though i have a bad feeling about this
213:07 - so draw half beard
213:09 - uh
213:10 - now becomes
213:12 - draw half hair
213:14 - and
213:16 - move to
213:18 - so this point
213:25 - yeah
213:26 - air conditioner makes some strange noise
213:28 - here so
213:30 - this case
213:32 - is uh
213:36 - so draw half here
213:41 - uh this point is
213:44 - this point here so i definitely want to
213:45 - keep it
213:46 - the next one
213:49 - i would like to draw a line
213:51 - to somewhere here but with a very big
213:54 - curve like that so
213:56 - let's
213:57 - have here a control point maybe
214:01 - here
214:02 - and
214:04 - here the center point
214:06 - so
214:07 - quadratic curve to
214:10 - and
214:12 - i should draw the right side always so
214:14 - the right side is the base and the other
214:17 - one is reflected so
214:20 - this is plus
214:26 - 0.47 47
214:29 - and
214:31 - minus 0.
214:35 - 44.
214:36 - and here we have a 0
214:39 - and a
214:41 - minus zero point
214:44 - 44 really i clicked on the same y
214:48 - okay so this is now
214:50 - going like that
214:52 - and i want to go also upwards up to this
214:55 - point right here which is
214:59 - point b
215:01 - so
215:02 - the next
215:05 - it's actually going to be a line
215:07 - to a vertical line
215:09 - to
215:14 - b i think so b dot x and b dot
215:18 - y
215:23 - no need for this part
215:25 - and then uh going back down from b to
215:29 - this outer connecting part at least
215:33 - so um
215:35 - a quadratic curve to
215:38 - and
215:39 - a control point maybe here
215:42 - and
215:43 - that point i'm going to have to copy
215:45 - from somewhere but let's just click
215:47 - click it for now so this is going to be
215:51 - the control point and the last one
215:53 - is going to be
216:03 - the right most point so it's complicated
216:05 - with some scalar and things like that so
216:08 - let's just do this
216:10 - and
216:14 - put here right most point x
216:18 - and uh
216:20 - right most point
216:22 - y
216:24 - no need for
216:26 - maybe no need for control points
216:29 - we see later
216:30 - we might have to adjust this when the
216:32 - rotations happen
216:35 - and the close path so that
216:40 - the small line here gets drawn also
216:43 - and let's have this
216:45 - let's have it the field
216:47 - as before
216:48 - and refresh the page
216:55 - oh my
217:05 - oh
217:28 - oh boy
217:31 - the b is not good anymore because i'm
217:34 - remember i'm giving here relative to a
217:36 - so i need the new new point i'm just
217:38 - going to put the dot here
217:41 - minus 0.57
217:43 - so
217:46 - 0 and
217:48 - minus 0.57 so that's why the pointy head
217:52 - is there like that
217:55 - i think it can be even higher up so
217:59 - minus 0.6
218:01 - 65
218:05 - okay let's disable a b and c so that i
218:08 - see
218:09 - something there i don't think we're
218:11 - gonna need b and c
218:13 - for
218:14 - much let's say
218:16 - maybe later
218:18 - but i'm gonna disable
218:21 - code printing them there now so that i
218:23 - see what is happening here a little bit
218:26 - of a pointy tip here but i don't mind
218:34 - the inside part is great the outside
218:38 - part is not good
218:41 - and
218:49 - and something weird happens here so
218:57 - not much weird happens there but
219:00 - i do need this control point to be
219:04 - further away
219:05 - so
219:12 - something like that and i have a feeling
219:15 - this one needs to be somehow
219:17 - um
219:33 - this control point and it may need to be
219:38 - tailored in the same way for this right
219:39 - most point
219:42 - yeah maybe a bit too much let's say
219:47 - 60.
219:49 - i think that's good and let's make it
219:52 - higher up like also 0.6 both of these i
219:55 - think
219:56 - it's um
219:58 - this is fine
220:02 - mm-hmm
220:11 - okay
220:12 - and the y value
220:24 - yeah
220:25 - i'm quite happy with this
220:28 - i think
220:35 - i somehow don't like that it's getting
220:42 - so squished there but um
220:46 - like here it's squishing the forehead
220:50 - um yeah
220:52 - anyway it's
220:54 - it's fine
221:03 - hmm
221:19 - i think we will need to use b and c
221:21 - eventually
221:28 - maybe we see
221:31 - okay
221:34 - uh
221:36 - but something is really wrong like this
221:38 - like if if somebody is moving their head
221:42 - down like that
221:44 - you expect
221:46 - this part to stay up to somehow
221:49 - a lot of black hair needs to be needs to
221:52 - be there
221:54 - so
221:55 - moving head down like this
221:58 - should have that effect that
222:03 - that part doesn't
222:06 - go down
222:07 - so
222:08 - when we draw this we have the rightmost
222:10 - point
222:15 - for this connection
222:18 - and we also have
222:26 - this is the starting then we have the
222:28 - curve here
222:30 - let's say this is good
222:33 - and then the line two here this point
222:36 - this is something that is not great at
222:38 - the moment
222:39 - so this needs to be
222:42 - somehow with this vertical
222:47 - squish maybe
223:12 - no
223:23 - so there is some squishing here
223:24 - happening let's disable it because i
223:26 - forgot exactly what it's doing
223:33 - okay this actually looks much
223:35 - much better now
223:38 - but we do
223:39 - need something
223:45 - yeah this looks much much better now
223:48 - but we do need something for
223:54 - keeping this point up there
224:00 - and probably also controlling this
224:02 - control point of it
224:06 - so i think
224:08 - we need something similar to
224:12 - yeah
224:12 - let's just go and look at the beard
224:15 - again
224:16 - and the bottom most point we will need
224:19 - something like a topmost point
224:23 - so
224:28 - top most point
224:31 - and this is going to be this value here
224:34 - so
224:37 - maybe that
224:38 - and
224:40 - let's move this
224:43 - like so
224:45 - this one here where it's needed
224:48 - and um
224:50 - topmost point x
224:54 - and topmost point
224:56 - y like this
224:58 - so
224:59 - now
225:12 - this is good i like it
225:14 - apart from these control points that
225:16 - need to be done but it also needs to
225:19 - continue to happen so
225:23 - this vertical scaler
225:27 - from there
225:30 - i think should happen all the time
225:33 - so we have here
225:37 - this one and i'm using a minimum value
225:40 - there what happens if i just put the
225:43 - offset
225:45 - i'm doing it just on the right side but
225:50 - yeah
225:51 - this is better now
225:54 - so a different way for calculating this
225:57 - vertical scaler here
225:59 - and i'm going to do the same thing also
226:01 - on the left side
226:03 - and
226:04 - i'm going to need to
226:06 - do that also with the control points
226:10 - so
226:11 - the control point
226:14 - let's see how i did it for the beard
226:16 - previously
226:18 - so
226:25 - i think
226:29 - i just figure it out somehow
226:31 - here so draw
226:35 - uh
226:36 - this was the control point so
226:40 - control point
226:45 - 0.6
226:47 - 0.6
226:50 - minus
226:52 - vertically it's what needs to happen so
226:59 - minus this same thing i think might be
227:02 - good
227:08 - not really
227:09 - oh i'm not using it
227:11 - control point
227:14 - x
227:16 - and then control point
227:19 - y
227:22 - e
227:24 - what happened
227:31 - oh it was minus
227:38 - yeah okay
227:44 - okay i kind of like this
227:47 - way that these things are looking i like
227:49 - that the forehead now stays larger
227:53 - and
227:56 - head seems to be moving fine
228:13 - yeah there should definitely be some
228:14 - kind of rotation happening
228:17 - but
228:18 - it's way too much i don't think i will
228:20 - have time for that
228:33 - and this one
228:44 - yeah okay it's it's fine
228:54 - okay
229:19 - somehow the shape of the head is not
229:21 - great
229:26 - i think the
229:27 - horizontal scaler is also something that
229:32 - needs to be used here maybe
229:37 - in the control point
229:43 - maybe in the other way minus horizontal
229:45 - scaler
229:47 - i'm a bit tired now and i just can't
229:50 - concentrate on the math i'm just playing
229:52 - around with the numbers i know that one
229:54 - of them is supposed to work
229:58 - um
229:59 - but
230:01 - let's try 0.3 for the head
230:05 - i'm just playing with the values so that
230:07 - this
230:08 - looks more
230:13 - no not there
230:19 - so that it looks good to me
230:28 - yeah okay
230:37 - i think we are fine for now
230:56 - okay
231:01 - let's draw something easy like the body
231:03 - next
231:04 - so i do have the neck
231:07 - here and the kind of shape for for this
231:10 - body
231:12 - but um
231:30 - and actually
231:32 - let's also add colors so that's let's
231:35 - add the color for the skin
231:37 - i'm gonna
231:46 - i'm gonna get the color from here using
231:49 - some color picker tool
231:51 - i will
231:53 - do a print screen and i open paint you
231:56 - won't be able to see this but
231:59 - i get the color picker in paint and then
232:02 - i look at the color values
232:06 - so
232:08 - they are
232:10 - exactly
232:14 - red
232:19 - green
232:22 - and
232:27 - blue
232:31 - like so
232:32 - so what i'm gonna do
232:34 - with that is where we are drawing the
232:36 - head here i'm going to put um
232:52 - a fill here
232:58 - and the fill style
233:04 - let's say skin tone
233:08 - and i'm gonna define this skin tone
233:10 - somewhere at the top for now
233:17 - rgb
233:20 - with these things
233:23 - and the refreshing now
233:26 - doesn't do anything
233:29 - weird
233:30 - so i'm drawing the head
233:37 - why isn't it coloring
233:48 - oh
233:49 - these are the
233:50 - mid lines um i think the these ones are
233:53 - the outside yes something like that
233:56 - but now these points on the sides
234:00 - are way too too much i want these to be
234:02 - inside of the hair region
234:10 - yeah so
234:11 - minus
234:13 - 0.4 i think
234:21 - too much
234:22 - 0.45
234:27 - okay this is good
234:29 - maybe
234:32 - yeah starts to look like some real
234:37 - real character there now with the skin
234:40 - colored in
234:42 - okay something here is not quite right
234:51 - and
234:53 - also here something is not quite right
235:26 - yeah let's
235:30 - starts to be tiring already
235:37 - here it's not perfectly filling this
235:40 - shape
235:58 - let's just leave this for
236:00 - for a moment and worry about that a bit
236:03 - later
236:06 - i would like to use somehow the previous
236:08 - coordinates that we are calculating
236:10 - there but i have a feeling it's not so
236:12 - easy
236:14 - because of the symmetries and what we
236:17 - are trying to do
236:30 - we leave it for now
236:33 - uh let's just get other stuff that is
236:36 - more easy to do because my head doesn't
236:38 - work very much now
236:40 - so
236:42 - i'm gonna do this
236:44 - neck and the body there
236:47 - so when we are moving the head to the
236:50 - right like this
236:54 - i would also like to
236:57 - maybe move also
237:00 - part of the
237:01 - neck a little bit
237:03 - some kind of movement
237:06 - should happen otherwise it just looks
237:08 - like you're some
237:10 - rotating head on the
237:12 - on a screw there on some
237:14 - metal
237:16 - structure
237:18 - also when we are drawing the body
237:29 - i want to
237:35 - feel it some ctx
237:38 - fill and
237:42 - ctx fill style equals to skin tone
237:49 - yeah that's good
238:14 - okay but the lines here are not very
238:18 - thick i think
238:23 - what happens there
238:26 - should the stroke be after the fill or
238:33 - yeah i guess that was it
238:35 - okay
238:36 - now
238:38 - yeah what i was saying that
238:41 - for example
238:42 - one of the points here i think it's
238:45 - probably the first one
238:47 - and the last one where we are
238:52 - going here
238:55 - so these points i would like to somehow
238:57 - connect to
239:00 - a the a offset in some way
239:04 - so
239:05 - plus
239:06 - a dot offset
239:11 - x offset
239:13 - i think that's enough but
239:17 - [Music]
239:19 - scaled somehow
239:33 - i don't know what happened
239:34 - let's remove it from here have it just
239:36 - in one place
239:49 - very strange
240:16 - oh
240:18 - okay these values are just so small
240:21 - uh
240:30 - something like this maybe
240:34 - yeah now the neck somehow
240:39 - rotates in that way moves in that way
240:42 - somehow and i i like that movement and
240:45 - i'm gonna do a similar thing for this
240:48 - other one so
240:52 - like that
240:56 - it somehow looks a bit better
241:00 - yeah
241:02 - okay good
241:06 - also this one would be nice i think
241:10 - so
241:11 - we have
241:23 - the y offset effecting there
241:27 - and
241:27 - i think i'm gonna do the same
241:32 - here as well
241:34 - i don't know if this is going to be a
241:36 - great tutorial i don't think it is a
241:38 - great tutorial but um
241:42 - many of these things would need to have
241:44 - proper names
241:46 - for the variables
241:48 - but it will end up into something
241:52 - that
241:53 - i'm gonna find a use for
241:56 - okay it
241:58 - doesn't seem to
242:01 - to behave
242:04 - and then i don't think i'm gonna work
242:06 - with this code very much anymore after
242:08 - it's done and
242:10 - something useful
242:13 - but uh let's see so
242:17 - at least somehow the
242:20 - ideas of having different keyframes and
242:22 - interpolating between the frames somehow
242:25 - should
242:26 - be should be
242:30 - clear to some extent
243:00 - okay what is happening there i want to
243:02 - disable the head
243:09 - just to focus on the body
243:14 - it's doing something but not
243:17 - not very
243:18 - visible it's just behind
243:22 - everything there
243:26 - so
243:31 - yeah
243:33 - okay
243:44 - let's put
243:46 - what
243:54 - a smaller value there
244:26 - um
244:34 - doesn't seem to
244:36 - affect very much
244:43 - and i think this is flipped yeah this
244:45 - should be
244:47 - minus
244:49 - that offset
244:53 - yeah let's see so now if i go back here
244:56 - and
244:58 - reactivate this
245:03 - no
245:12 - no no
245:37 - uh
245:44 - so this
245:46 - at the
245:47 - negative side should be up
245:54 - oh no it wasn't flipped damn i
246:00 - i don't like this i'm getting tired
246:03 - i had a long day already
246:23 - uh
246:26 - maybe this is fine
246:28 - i think the control point is the issue
246:31 - we don't really see the change bit
246:33 - because the control point stays the same
246:36 - and then the changes when this head is
246:39 - moving so
246:42 - it's not that
246:48 - yeah it's not that significant it is
246:50 - moving a little bit
246:52 - but not not very much
246:57 - and this is a bit too much i think so
247:00 - when we draw the body
247:08 - maybe half of this is
247:13 - enough
247:16 - yeah it doesn't need to be exaggerated
247:25 - mm-hmm
247:36 - okay
247:40 - now the clothes so
247:43 - let me
247:45 - comment out this body part
247:50 - for now
247:51 - and
247:53 - draw these clothes somehow
247:55 - so i'm gonna do this
248:01 - trying to copy these shapes here
248:05 - so
248:07 - yeah
248:20 - i don't need to
248:23 - uh
248:33 - this get chords uh i don't want this to
248:36 - be an offset relative to
248:40 - a anymore i want the original code
248:43 - so that
248:44 - i just get the coordinates inside the
248:48 - screen where i'm clicking
248:51 - like this
248:52 - so now
248:54 - i'm gonna click here and i'm gonna say
248:57 - add the control point somewhere outside
249:00 - here
249:02 - and then
249:04 - another point here
249:06 - another control point here
249:10 - another point here
249:20 - control point here
249:24 - a point here
249:27 - control point here
249:29 - and point here so that's going to be
249:32 - that side on the left
249:35 - and
249:43 - now in the body
249:54 - okay
249:56 - so
249:57 - doing now um
250:00 - begin path
250:02 - and then move to
250:09 - move to
250:10 - this one
250:12 - in the beginning
250:14 - and then this quadratic curve 2
250:18 - where we use this as a control point
250:23 - and go here
250:27 - and then use this as a control point
250:31 - to go
250:33 - here
250:37 - and another one
250:38 - where we use this is the control point
250:43 - to go
250:44 - here
250:50 - and the last one where we use
250:52 - this as the control point
250:57 - to go here
251:04 - okay ctx
251:07 - stroke
251:12 - yeah this is fine maybe here
251:18 - i don't like this control point very
251:21 - much
251:22 - i mean this end point
251:27 - now this control point here this needs
251:30 - to be more to the right
251:32 - i think
251:41 - negative value so it grows like that
251:45 - okay
252:06 - okay maybe that's not the problem the
252:07 - next control point here maybe should be
252:10 - a bit more upwards
252:16 - yeah i like this shape now much better
252:18 - here
252:20 - okay
252:21 - so that's
252:23 - one side there
252:25 - and we can fill it with that kind of
252:27 - green color i'm just going back into
252:30 - paint to
252:31 - get the color code of that color
252:36 - 154
252:40 - 153
252:42 - and one
252:43 - blue is one
252:45 - okay
252:46 - so
252:54 - shirt color
253:08 - like this
253:10 - um
253:15 - so back in draw body we have here
253:20 - ctx
253:21 - fill style
253:24 - is shirt color and we also give this ctx
253:28 - fill
253:29 - like this
253:42 - what did i press on my computer
253:54 - okay
254:02 - not okay
254:04 - i pressed something
254:11 - okay uh this fn key somehow
254:16 - right
254:17 - so this is one part here done
254:20 - i'm just going to comment it out a bit
254:23 - and
254:24 - do the same thing on the other side i
254:27 - want these to be somehow
254:31 - separate
254:33 - lines so it looks more organic i'm gonna
254:36 - do
254:37 - a click here
254:40 - this is where i'm gonna begin
254:42 - so
254:46 - and a curve that goes
254:48 - like this okay
254:51 - undo
254:52 - start here a control point here
254:57 - going here
255:01 - then a control point here
255:04 - going here
255:07 - control point here
255:10 - going here
255:15 - control point here
255:20 - going here
255:22 - and the control point here
255:25 - going here or so
255:28 - so let's copy that
255:31 - and um
255:48 - keep these coordinates there
255:52 - and
255:53 - let's do
255:55 - a begin path with the move to
255:59 - starting point
256:00 - and then
256:03 - control point here
256:08 - going there
256:14 - control point
256:17 - and point
256:23 - control point
256:28 - end point
256:33 - control point
256:37 - and point
256:40 - and control point end point
256:49 - okay this is good
256:51 - but now it's using the
256:54 - skin tone
256:56 - which is the last fill style so now we
256:59 - have
257:01 - these things here
257:06 - they look really good i think
257:08 - but um
257:18 - so here we started like that ended like
257:21 - this
257:22 - i think this end should be lower so that
257:24 - it covers this
257:27 - stroke there
257:29 - yeah let's
257:32 - try
257:36 - eight
257:44 - oh no it grows the other way around so
257:47 - point line
257:50 - yeah
257:51 - doesn't seem to work
258:06 - i think this is
258:07 - okayish
258:18 - not okay
258:19 - let's leave it with nine zero and
258:22 - do another bit of a curve there as well
258:25 - so
258:29 - this control point
258:37 - i'm going to put it here and take us
258:40 - back to the starting point
258:44 - like this
258:47 - but i don't want that stroke to be there
258:50 - i think so let's see if i do this
258:53 - i think this is just perfect
258:56 - okay
258:57 - let's put also the body back on
259:01 - for reference
259:04 - okay
259:06 - and now i'm gonna
259:09 - draw the shoulders and that part
259:12 - pretty much
259:16 - copying
259:17 - going over this skin part right there
259:21 - so
259:23 - yeah
259:33 - hmm
259:44 - and i'm gonna also
259:47 - add a few
259:49 - scalings
259:50 - i mean a few
259:52 - translations based on these sliders for
259:56 - the whole body i think that will amplify
259:58 - the
260:00 - the feeling of movement make it look
260:03 - even better let's see
260:05 - but before that let me
260:10 - uh
260:11 - so this is now the
260:13 - this point right here
260:16 - is this one
260:17 - i'm gonna need the new one somewhere
260:20 - maybe here let's just draw this
260:25 - i'm gonna make new points there i'm
260:27 - gonna start with the point here
260:30 - actually this one will be zero
260:33 - and then it will go
260:35 - here
260:38 - and then
260:40 - line to
260:44 - here
260:46 - and
260:48 - control point here
260:53 - line to somewhere there and then
260:57 - i mean curve 2 somewhere there but this
260:59 - will be outside the screen
261:01 - so
261:02 - before we do these with the shirt collar
261:05 - we are going to do something else with
261:08 - the shirt caller
261:11 - so
261:12 - i'm gonna
261:13 - this was a zero actually and this was
261:17 - 1.1
261:18 - or something
261:20 - and
261:21 - we do a move to
261:24 - this center location
261:28 - and um
261:29 - now we do
261:31 - a line
261:32 - to
261:33 - this place
261:37 - and
261:39 - then align to this place
261:42 - and the last one is going to be this
261:44 - quadratic curve
261:46 - too
261:48 - with this control point
261:51 - and
261:53 - the last point there
261:55 - so this should be fine
261:57 - but now we need a line to
262:00 - [Music]
262:02 - the other side so basically this one
262:05 - with the plus
262:11 - and
262:13 - a quadratic curve to
262:17 - this will be same with the plus and
262:19 - going to this coordinate actually
262:24 - also with the plus on the other side
262:27 - and then
262:29 - this one
262:31 - with the plus
262:32 - and back to here or just doing
262:36 - close path
262:38 - and we need a
262:41 - fill and a stroke as well
262:45 - so this is fine i think
262:52 - i'm missing a begin path
262:57 - okay
262:58 - and here i'm just going to
263:00 - tuck these
263:07 - points a little bit
263:20 - i can see a little bit these corners
263:22 - there
263:29 - i think this was fine and such but this
263:31 - one was like that
263:34 - okay
263:35 - so
263:37 - better
263:37 - [Music]
263:40 - this is not great i see a small line
263:42 - there from
263:45 - this last connection
263:48 - uh with the closed path so this needs to
263:50 - be a bit
263:51 - lower i think let's try
263:54 - 86.
263:58 - let's try 87.
264:04 - can we go 88
264:08 - okay
264:09 - good
264:10 - good good
264:12 - but this looks a little bit weird so
264:15 - head moving neck is moving a little bit
264:18 - it's okay
264:19 - but the rest of the body just completely
264:22 - still
264:23 - so i'm gonna
264:25 - do something about that as well
264:28 - um based on that a point
264:31 - so when i'm drawing everything here like
264:35 - the body and the head i'm actually going
264:37 - to do a ctx
264:40 - translate
264:46 - first to save
264:48 - ctx translate
264:53 - a dot offset
264:56 - x
264:57 - or was it x offset
265:01 - and
265:02 - multiplied by
265:04 - 0.04 or something small
265:07 - and
265:08 - y offset
265:10 - also multiplied by that um
265:13 - i don't think i need the y offset let's
265:16 - just put it zero
265:20 - it would look a bit strange
265:23 - so i restored this now
265:28 - so everything moves now a little bit
265:31 - while the person is moving i don't
265:33 - really like it
265:39 - it's not fantastic
265:42 - maybe this value should be very low
265:46 - like that
265:56 - it's not not very great
266:03 - let's uh
266:05 - restore this somehow after the body
266:19 - this looks a bit better
266:21 - and
266:21 - let's actually
266:23 - scale
266:24 - also
266:26 - so that it goes
266:28 - um
266:31 - one minus a dot x offset multiplied by
266:35 - zero point
266:37 - zero five
266:39 - and one
266:45 - so
266:46 - not good
266:48 - it's good in this direction but not good
266:50 - in this direction
266:58 - absolute value might fix it
267:08 - yeah this is okay
267:10 - and maybe even a smaller value here like
267:14 - like that
267:17 - it gives some kind of movement it of
267:20 - course this should be
267:21 - skewed and it should give you a 3d
267:23 - perspective and
267:25 - all these points should be actually
267:27 - somehow
267:30 - computed with a 3d perspective in mind
267:34 - but
267:35 - i don't know how to use
267:38 - the webgl canvas for example and i said
267:43 - i don't use the internet
267:45 - and also
267:47 - i think it's too much trouble and when
267:49 - you try to do things in a 3d environment
267:52 - that are
267:53 - supposed to be 2d
267:59 - they don't look the way i i like them to
268:02 - look
268:03 - if that makes sense
268:08 - so this is just fine i think for for
268:11 - what i'm doing here
268:13 - and um
268:15 - hmm
268:25 - yeah good okay what happens when we move
268:27 - vertically
268:31 - okay let's see if now i have to
268:35 - energy to feel this
268:40 - shape
268:52 - when drawing the head something is
268:55 - off there
269:24 - yeah so i'm drawing the head
269:26 - [Music]
269:30 - i really feel like i want to disable all
269:33 - of these for a while and see what
269:35 - happens with this shape
269:48 - okay yeah we were using those
269:51 - b and c points
269:53 - let's add the
269:55 - a b and c points back in
270:07 - that was a kind of a good idea but
270:10 - somehow i ended up using just a as the
270:14 - point
270:19 - it would have been a better 3d
270:21 - perspective there
270:34 - let's put here
270:36 - ctx global alpha
270:40 - 0.4 and
270:43 - reset it to 1 at the end
270:45 - so what i'm gonna do is i want to see
270:48 - through the head
270:50 - the other shape and see what is the
270:53 - where is the problem coming
270:55 - from
270:56 - so here for example
271:19 - i think the bottom of the beard
271:22 - should go more down
271:26 - and then maybe
271:28 - we do something right here
271:32 - as well
271:33 - so
271:36 - let's go to the beard
271:40 - draw half beard
271:42 - so the bottom most point
271:47 - let's try this one
271:50 - with the three and also vertically here
271:54 - with the 0.3
272:10 - i think that's fine
272:16 - now this right most point
272:27 - so this is something that i want here to
272:29 - have a bit bigger maybe
272:33 - 47
272:36 - like that
272:52 - not really
272:54 - it was fine before
273:12 - so not the right most point but the one
273:17 - so this control point is
273:21 - i think the outside one
273:26 - this quadratic curve to
273:38 - what were these two things
273:46 - so these
273:47 - and that that means this point right
273:49 - here
273:51 - this one
273:52 - end point here
274:00 - no that that this is the start point i
274:03 - forgot it starts right here so
274:06 - it should be
274:09 - 39 or something so i want to move it a
274:11 - bit closer to the eye here
274:14 - like that
274:16 - and now if i do this
274:18 - and that
274:20 - almost good
274:22 - so also this control point right here i
274:25 - think also
274:27 - a lower value maybe
274:30 - 33 there
274:34 - yeah now this looks good
274:38 - [Music]
274:42 - and here
274:44 - this outside part
274:46 - so
274:47 - the
274:48 - control point here
274:50 - the x should be
274:53 - bigger maybe thirty
274:56 - eight or something
275:03 - yeah and the right most point
275:07 - maybe
275:08 - 46.
275:14 - i think this is good
275:16 - and the the hair needs to still connect
275:19 - so we have changed now this point here
275:22 - and also the right most point i'm
275:24 - copying them just for
275:27 - reference and i'm gonna draw go now to
275:30 - draw half
275:34 - hit
275:44 - no hair
275:46 - draw half hair
275:48 - and this one was also starting at
275:53 - it needs to start here
275:55 - and
275:58 - the right most point
276:02 - now this is a 46
276:05 - here
276:06 - so let's see now
276:08 - uh
276:09 - global alpha i want to
276:11 - remove this trick for making things
276:14 - transparent just so i see through
276:16 - them and
276:19 - okay
276:25 - almost there
276:30 - yeah this is fine
276:34 - it's kind of funny
276:37 - okay
276:40 - okay
276:41 - a little bit
276:44 - inwards so um
276:46 - the one control point from draw
276:50 - half
276:52 - beard
276:57 - uh
277:01 - the first one from here
277:03 - should be inwards a bit more so
277:07 - maybe like that
277:13 - maybe even more
277:21 - okay
277:22 - i think this is just good
277:24 - so
277:25 - we have done
277:27 - quite many things
277:28 - still many things to do
277:36 - but i need a brick
277:38 - so
277:39 - i'm gonna take few minutes break and
277:42 - then i come back for another
277:45 - hour or so
277:47 - and then tomorrow
277:49 - more interesting stuff
277:51 - i'm gonna think about this also when i
277:53 - walk to work
277:55 - and
277:57 - usually that's when i do most of the
277:59 - great idea
278:01 - thinking
278:03 - moments
278:06 - yeah
278:09 - okay so the years are still missing
278:12 - actually
278:13 - and i really want to do the hair
278:16 - um
278:17 - so that it's
278:19 - dynamic so when the character moves like
278:23 - moving his his head like this i want the
278:26 - hair to be shaking there i think it
278:29 - would look very nice
278:31 - and
278:34 - and i want the character to talk so this
278:37 - is something that i really want to do
278:40 - tomorrow and i'm not entirely sure how i
278:42 - want to do that
278:45 - i have some videos about this
278:50 - talking pumpkin that i did at some point
278:52 - where i used the microphone
278:55 - to
278:58 - get a different
279:02 - to get the volume and depending on the
279:04 - volume open the mouth more or less
279:07 - i could do that but i think it wouldn't
279:09 - be very
279:12 - organic
279:14 - people open their mouths in so many
279:16 - different ways and the
279:18 - volume is just one number
279:21 - so
279:23 - i i'm thinking about using webcam and my
279:26 - face and doing some kind of detection on
279:28 - the face
279:31 - i really want to do these two features
279:33 - otherwise i think i'm gonna lose this
279:35 - competition because i've spent so much
279:37 - time and i just have a
279:40 - nodding character and
279:42 - he seems to agree with me
279:45 - okay
279:47 - but um
279:48 - i will take a break and uh in a few
279:50 - minutes i continue and try to draw the
279:53 - ears
279:55 - and maybe i begin with the hair in some
279:58 - way
280:00 - something
280:02 - i might i think i should also clean up
280:05 - the code before i end today so that i
280:08 - have it easier tomorrow it's a bit
280:13 - it's not great
280:14 - i i should use some
280:17 - objects maybe or
280:19 - at least separate the code into files so
280:22 - that it's easier to
280:25 - to find the things this already starts
280:27 - to have quite many
280:29 - lines of code
280:34 - yeah
280:35 - okay be back in five minutes
280:40 - okay i'm back
280:42 - so i think one of the things i want to
280:44 - do is the years
280:47 - now
280:48 - and um i'm going to go back
280:51 - to the click event listener here and
280:55 - re-get
280:57 - um
280:59 - coordinates with respect to
281:02 - a
281:03 - so the same way we did for the eyes
281:06 - i'm going to refresh this
281:09 - and
281:11 - yeah so where are the years now they
281:14 - don't align very well here
281:18 - i'm going to try to
281:22 - map the locations where they should be
281:25 - somewhere here
281:27 - so i'm going to say
281:31 - i'm going to click where i think the
281:32 - location should be
281:34 - so one is here
281:37 - with um
281:40 - control point
281:41 - here
281:44 - and
281:45 - another point here
281:48 - and then
281:51 - control point here
281:55 - here
281:57 - another control point here
282:03 - here
282:04 - another control point here
282:07 - here
282:08 - i might need to
282:14 - adjust these a little bit
282:17 - yeah i think it's too complicated shape
282:20 - let's let's make a simpler one
282:22 - so starting here
282:25 - control point here
282:28 - and here
282:30 - and
282:31 - another control point here
282:45 - here
282:50 - let's see how this looks like
282:53 - so
282:54 - we have the draw ahead and
282:59 - draw
283:00 - years with respect to a
283:03 - so function
283:05 - draw
283:06 - years
283:08 - oh and i did everything on the left side
283:11 - again
283:12 - let me do it
283:13 - one more time and on the right
283:34 - okay
283:36 - i think this ended up even better
283:39 - so
283:41 - let's do that
283:43 - and um
283:49 - now we have
283:53 - a save and a translate
283:55 - and it ending with this restore
283:59 - and
284:02 - reference point passed here like that
284:05 - and what we do now is
284:07 - move to
284:09 - this first location
284:13 - and all of them are quadratic curves
284:17 - so i'm going to say
284:21 - quadratic curve to
284:23 - this
284:26 - with this
284:29 - and
284:31 - this
284:35 - to this
284:40 - and finally
284:45 - this
284:47 - to this
284:54 - and ctx
284:57 - fill style
284:59 - equals to skin tone
285:01 - ctx fill
285:04 - ctx stroke
285:09 - um
285:12 - it's something
285:14 - maybe i want this first control point to
285:16 - be more to the right
285:23 - no i i don't maybe i want this end point
285:34 - yeah maybe something like that and then
285:37 - the this control point maybe
285:42 - that looks good
285:45 - i think
285:46 - and
285:51 - close
285:52 - path as well
285:56 - now there is a line here that is thicker
285:59 - i think the starting point can be a
286:01 - little bit to the right
286:04 - so like that
286:11 - maybe also a little bit lower
286:16 - more low
286:19 - yeah why not
286:21 - and um
286:24 - i think now this can be
286:27 - left a little bit
286:29 - i think this looks okay
286:31 - uh the last
286:35 - thing here i think could be
286:37 - lower maybe
286:44 - not that one
287:00 - mm-hmm
287:27 - okay
287:28 - something like that this is just fine
287:32 - so i'm actually gonna
287:36 - copy
287:39 - this draw
287:42 - make it into a
287:51 - yeah some
287:52 - smart things need to happen here because
287:55 - this here on the right
287:58 - should actually disappear
288:04 - at some point
288:06 - yeah this is not very easy
288:09 - it's the first thing that we need to
288:11 - make disappear
288:13 - to make it vanish when the character
288:16 - rotates like that
288:30 - so if we go to the draw
288:33 - eyes for example
288:35 - let's take this as a reference
288:39 - draw
288:40 - years
288:42 - and
288:48 - draw a year
288:51 - like this
288:53 - i think it's pretty much the same as
288:54 - what the eyes are doing maybe a little
288:56 - bit different
288:58 - so i'm gonna
288:59 - make a new function here
289:03 - draw
289:04 - here
289:08 - uh
289:08 - x
289:10 - scale
289:11 - or
289:12 - scale x
289:20 - like this and the draw
289:24 - i
289:25 - is having here these two things
289:34 - i think we will need
289:36 - something similar as well
289:40 - and
289:40 - ctx restore because we are scaling them
289:46 - okay two years there
289:51 - uh this one is quite
289:54 - yeah it is scaling itself now it's
289:56 - better
289:57 - but
289:58 - it should also
290:00 - it should also scale
290:06 - uh
290:08 - i think
290:09 - not just in this case
290:11 - not not just with the maximum
290:14 - i think we just put here
290:19 - x offset let's see
291:06 - yeah it really needs to be
291:12 - more here somehow and i would like it to
291:16 - squish more
291:47 - yeah this is good
291:49 - but um
292:34 - these locations also need to be
292:36 - translated somehow let's do ctx
292:41 - translate
292:46 - scalex
292:51 - no
292:53 - nothing vertically just horizontally
292:56 - and
292:58 - it's way too much so let's do it
293:02 - by a small factor
293:06 - yeah i think this is fine
293:09 - now i'm worried what happens here
293:15 - it's not horrible
293:18 - some squishiness is happening which i
293:20 - don't
293:21 - necessarily like but i think it adds to
293:24 - some personality to the character so
293:28 - it's fine
293:31 - okay
293:32 - and uh drawing the head
293:34 - i think it's just too high up
293:38 - so when it's normal like this i would
293:40 - like it to be a bit lower
293:42 - it's just too
293:44 - too high up i i think
293:46 - so or maybe the body needs to be
293:50 - higher
293:52 - let me do a quick translation for the
293:55 - body
293:56 - to be higher
293:59 - and i think that will fix the problem so
294:12 - here
294:21 - okay maybe a bit too much point
294:26 - six
294:29 - okay
294:35 - yeah a little funny shape here but i
294:37 - really think that when i'm gonna do the
294:40 - um
294:41 - here with the physics hopefully i'm
294:43 - gonna do the hair with the physics then
294:45 - it's gonna be good and
294:47 - the year here
294:53 - i don't know if it really needs to be
294:56 - covered
294:59 - i would definitely cover it but it's not
295:02 - so easy to do that
295:33 - i think also
295:37 - we might do some tricks with the with
295:40 - the hair later
295:41 - to cover it
295:45 - but uh
295:46 - don't have a clear vision there yet my
295:48 - hair now is also a little bit different
295:50 - than in that
295:52 - initial drawing that we are
295:55 - getting inspiration from
295:57 - and it's shaking also to the sides so it
296:00 - goes also here
296:02 - i might need to redesign also the
296:04 - character a little bit
296:06 - maybe these top parts don't need so much
296:08 - attention
296:10 - well let's see
296:13 - yeah i think i'm gonna actually i don't
296:16 - even see my ears anymore
296:19 - because there is hair is covering them
296:21 - so
296:22 - i think that i don't need to worry much
296:24 - about the ears there
296:26 - even if you will see a little bit here
296:28 - because the hair will be covering it
296:33 - it won't
296:34 - be a big deal i think we're fine
296:39 - but now uh i think we are done with this
296:41 - kind of
296:43 - basic
296:45 - character
296:46 - movement
296:48 - and
296:49 - i'm not gonna polish this much more
296:51 - maybe something with the nose if i get
296:53 - some better idea
296:54 - uh to make it look nicer when it's
296:57 - straight
296:58 - watching straight at us like this
297:02 - uh
297:04 - but i'm quite happy with what we have at
297:06 - the moment
297:09 - here these
297:10 - lines look too thin i think that we need
297:13 - to
297:15 - stroke
297:16 - the
297:18 - that part
297:37 - okay
297:50 - this gray here is not
297:52 - needed anymore
297:55 - uh huh
298:02 - so let's put here
298:09 - skin part of the body
298:14 - and this is gonna be
298:20 - um
298:21 - shirt
298:27 - part of the body
298:30 - and now here we have those that color
298:36 - or the neck
298:38 - neck
298:39 - region
298:45 - and the shirt
298:52 - second
298:56 - part like that
298:58 - and
299:02 - so this draw body
299:11 - hmm
299:35 - um yeah the problem is stroke should be
299:38 - after the fill
299:44 - there
299:46 - this one is fixed but this one
299:53 - i don't want that connection there
299:56 - so
300:01 - i think i'm gonna do
300:03 - fill and stroke
300:08 - now this last fill is not good
300:10 - it
300:12 - destroys part of the stroke
300:21 - so
300:22 - this part here is something i don't like
300:25 - now
300:28 - i think i just do
300:31 - begin path
300:46 - yeah begin path
300:50 - that and fill
300:58 - i need the move to before so
301:06 - move to there
301:10 - okay almost i think this control point
301:13 - needs to be
301:14 - lower so
301:18 - like that
301:22 - no
301:48 - oh
301:51 - this is so horrible
301:54 - yeah this shape now is just this part
301:57 - right here
302:02 - i should use a move to a bit higher up
302:06 - so
302:11 - let's leave this as such
302:14 - and this move 2 goes to
302:17 - 89 here
302:21 - that looks good
302:23 - okay
302:24 - finally great uh i will also remove now
302:28 - a b and c again from there
302:31 - and um
302:44 - let's move the draw body function
302:49 - in
302:50 - a new file let's call it body dot js
302:55 - it's not a class but
302:58 - i don't know
303:00 - it will be very useful to keep
303:02 - everything inside the class eventually
303:05 - but now i just want to separate the
303:07 - functions
303:13 - so
303:14 - that one goes in the body
303:17 - and now
303:18 - let's put in the head
303:24 - draw head
303:25 - and all these other things draw ears
303:29 - draw ear draw nose draw hair
303:32 - half hair
303:34 - beard half beard eyes high
303:39 - this one we don't need anymore i'm not
303:41 - gonna worry about this glass i
303:45 - think so let's put this
303:47 - head js
303:51 - okay
303:52 - and let's clean up a bit what we have
303:54 - here
303:55 - so
304:00 - um
304:01 - high speared hair nose ears
304:05 - it's fine
304:07 - and
304:08 - i'm just gonna group these
304:12 - a bit like that
304:14 - i think they're a bit clearer and i like
304:16 - to separate save and restore so that
304:20 - i notice them easily whenever
304:24 - these
304:25 - modifications to the context are are
304:28 - done
304:32 - yeah the to-do for the nose is still
304:34 - here
304:35 - draw hair
304:50 - yeah
304:51 - to me the code is clear
304:55 - but there are many many of these
304:58 - values that are used to define the shape
305:01 - and it's actually not easy and
305:04 - not really needed to come up with names
305:06 - for these things
305:10 - i think it would be possible to export
305:12 - all these values in some kind of json
305:14 - format or something
305:18 - and then load them in
305:21 - but
305:24 - i'm not going to spend time on on that
305:33 - this feel can happen before the restore
305:35 - here i think what was this
305:38 - half beard
305:40 - only the
305:48 - stroke is affected in in width when you
305:51 - do that
305:53 - so we have eyes also
305:59 - so here we have the eyes
306:03 - the main the white part
306:11 - and then
306:13 - the
306:15 - eye brows
306:18 - just one
306:20 - and uh what is this thing oh yeah the
306:23 - let's call it
306:24 - pupil
306:26 - i'm not sure how you write it but
306:28 - it's gonna be like that now i don't have
306:30 - internet
306:33 - and what is this
306:37 - oh yeah that one line
306:39 - this one line here
306:45 - half
306:46 - contour line
306:49 - something like
306:50 - that and
306:53 - let's separate that as well so i is more
306:55 - complicated it needs special comments
306:58 - there
307:01 - the beard
307:02 - doesn't really need special comments
307:05 - because it has some variable names that
307:08 - are
307:10 - self-explanatory
307:11 - and of course you may need to play
307:13 - around with these a little bit to
307:16 - change but i did all the drawing that i
307:19 - want to do and i'm happy with it i don't
307:21 - want to update this anymore
307:24 - so that is the definition of this
307:26 - character pretty much
307:29 - and
307:30 - same goes for the hair i think it's well
307:33 - commented here
307:46 - this scale y is actually not used for
307:50 - the hair apparently
307:53 - so let's remove this
308:01 - so the vertical squish thing is not used
308:04 - anywhere this is just the one here
308:08 - good
308:09 - simpler
308:10 - code this simpler now
308:21 - okay draw body is not defined
308:23 - we need to go to index.html
308:26 - and
308:27 - include these scripts
308:31 - before we write this script right here
308:34 - so let's say
308:37 - script
308:39 - source is equal to body js
308:47 - i think like that
308:50 - and
308:52 - hit
308:53 - js
308:55 - okay things seem to work again
309:00 - this is so funny it looks kind of
309:03 - unnatural
309:06 - it's a very unnatural
309:09 - i stopped liking it now
309:16 - i really think that the hair is going to
309:20 - change a lot of
309:21 - things here
309:23 - i hope
309:26 - i hope it can give a 3d
309:28 - look to it and also the fact that it's
309:31 - going to move it's going to make things
309:39 - better yeah some polishing will be
309:42 - needed
309:43 - we are not done
309:44 - i still have maybe
309:47 - 20 30 minutes
309:50 - maybe even a bit more
309:52 - and um
309:54 - i wanted to do something completely
309:56 - different but let me clean up this a
309:59 - little bit
310:00 - so
310:01 - a little bit more
310:05 - still quite much cold here what do we
310:07 - have this lerp
310:09 - i usually have a utils file
310:15 - let's call it math this time
310:22 - i'm gonna put there the linear
310:25 - interpolation for example
310:28 - and these update points something quite
310:30 - general
310:33 - draw
310:34 - point i think i rename it back to
310:38 - utils
310:40 - and put also these
310:43 - this draw point there so it's not just
310:45 - math but now also some visualizing thing
310:48 - that we use in different places
310:52 - and this is just the helper thing this
310:54 - function will be
310:57 - removed
311:06 - like that
311:53 - like so
312:08 - now live points so these are
312:12 - those things that we have been using but
312:16 - this bees
312:22 - i guess it's
312:23 - used somewhere
312:30 - at least to define that head
312:33 - the colored part the skin colored part
312:36 - of the head
312:58 - okay we'll see tomorrow
313:07 - okay so now this utils let's include
313:11 - utils as well i'm gonna put it first
313:13 - here
313:16 - utils js
313:21 - we keep these points
313:26 - then the animation so
313:28 - this click and the get coordinates
313:31 - actually also the
313:33 - this event listener
313:37 - will need to be removed afterwards
313:41 - so
313:41 - [Music]
313:49 - i mean doesn't need to be removed but it
313:52 - won't
313:53 - do anything it's just printing stuff in
313:55 - the console
313:57 - so
314:07 - yeah
314:08 - animate function will stay and it has
314:10 - draw me
314:11 - and this part will also be removed
314:17 - it's just that background
314:23 - character i think we can actually remove
314:26 - it even now
314:27 - but
314:28 - let's just keep it a bit longer for
314:31 - reference here
314:38 - okay
314:40 - and the draw me function
314:43 - does a little bit of scaling so that the
314:46 - character
314:49 - appears a little bit more
314:54 - to move
314:56 - sideways
314:58 - not really 3d but at least
315:01 - if you're not paying close attention it
315:03 - feels like that
315:05 - and this is not fantastic really but
315:09 - not horrible i think the hair will make
315:11 - a very big difference and the beer beard
315:14 - might be adjusted a little bit after
315:16 - that let's
315:18 - let's see
315:20 - maybe the head could be
315:23 - the body could actually be a little bit
315:27 - higher up
315:33 - also
315:36 - yeah
315:37 - okay
315:49 - this one is
315:50 - the slider so this is called when
316:07 - hmm
316:15 - yeah i had some more some other ideas
316:18 - originally to make it look even a bit
316:20 - more 3d with these
316:23 - other things there
316:24 - but
316:26 - and the abc points
316:30 - they were
316:31 - supposed to
316:34 - do something a little bit more somehow
316:36 - shape the head
316:38 - but
316:39 - it's not horrible okay i still want to
316:42 - do a few more things
316:44 - so let me
316:46 - remove these points again they are
316:48 - disturbing a bit now
316:52 - and i'm actually gonna
316:54 - hide that
316:57 - character on the background this circle
316:59 - here and
317:02 - i might need that code again to compare
317:04 - in the end but for now this is what we
317:07 - are having
317:09 - and uh oh looks like some space here at
317:11 - the bottom let me just make
317:14 - the body
317:15 - be
317:16 - a little bit longer
317:19 - at the bottom
317:20 - here so
317:23 - outside the screen those two points
317:28 - i think it was a bit
317:30 - far enough anyway
317:32 - but this is some
317:34 - side of the canvas that just looks like
317:36 - that
317:38 - okay so what i still want to do now is
317:41 - um
317:42 - add a completely new thing i want to add
317:46 - our my camera my webcam
317:49 - and
317:51 - somehow do basic image processing there
317:54 - and see if i can move this head with
317:58 - the camera instead
318:00 - i think it's a bit too much now it's
318:02 - late but at least i want to start
318:06 - something
318:07 - so
318:10 - let me see
318:12 - i want to do this
318:18 - here
318:24 - let's just make a new file called this
318:26 - camera js
318:29 - and include it here
318:33 - camera js and here i'm gonna write
318:37 - navigator
318:39 - media device is
318:42 - get
318:43 - user media
318:47 - and i'm going to get
318:51 - the video but i think that i'm going to
318:53 - also use the audio later
319:02 - i think in the end i will want to
319:03 - support uploading a video and then it
319:05 - just the character is going to move
319:08 - according to that video somehow let's
319:10 - see
319:11 - so
319:12 - but for now just the video here i think
319:15 - is just fine so we get the user media
319:18 - and this returns a promise so
319:20 - we do then
319:22 - uh we use the data so we have the
319:27 - data coming
319:29 - from the promise when the promise
319:31 - succeeds
319:33 - and uh
319:34 - i'm gonna define
319:36 - a video
319:38 - object um
319:40 - i don't add it to the
319:42 - dom but
319:46 - element a video
319:48 - element
319:49 - and
319:50 - then i'm going to set this to the data
319:52 - that comes from the device so
319:56 - source
319:59 - i think it's source
320:01 - object
320:03 - is the data
320:05 - and we are going to play this video so
320:09 - if i'm going to change this from the
320:11 - camera to the
320:13 - to some video
320:15 - this is where i want sound to also
320:19 - display later
320:24 - i will remember i don't need to do that
320:26 - so then when this is loaded it's like
320:30 - on loaded
320:31 - data
320:32 - we get a new function new callback
320:35 - function
320:36 - and
320:37 - here
320:39 - i
320:40 - can start to
320:43 - do something
320:44 - with this video like start the
320:46 - processing and so on
320:48 - so
320:51 - we might also have an error
320:54 - if
320:56 - when you do this
320:58 - it's going to ask you on the screen if
321:00 - you allow or not
321:02 - to
321:07 - to give the camera so this might give an
321:09 - error and we can catch that error like
321:12 - that
321:14 - uh
321:15 - i just make an alert here and say
321:18 - no
321:23 - camera
321:26 - failed
321:27 - something like that
321:29 - okay
321:33 - why is this highlighted like that so we
321:36 - have this
321:42 - i'm not using the error anywhere
321:49 - was it so that in javascript catch is
321:51 - not like this but it's a callback
321:53 - function
322:12 - okay
322:15 - and now i have to close this one
322:45 - i need to close this
322:48 - catch somewhere
322:51 - this is a function i have the alert
322:56 - closing the function and then i have to
322:58 - close this catch
323:25 - you
324:12 - i just don't know what the problem is
324:14 - let's um
324:16 - run this
324:18 - and
324:21 - look in the console
325:00 - what is that
325:04 - oh
325:04 - this then
325:07 - no no no no
325:10 - no this is then
325:12 - this then has to be closed
325:17 - before
325:18 - before the catch
325:20 - it's then and then it's a catch yes
325:28 - okay it
325:29 - allows the camera and then
325:40 - could not start video
325:42 - source i think this is the error message
325:45 - from here
325:46 - it could be that i'm using the webcam
325:48 - here and
325:52 - that webcam
325:55 - doesn't let me use
326:01 - yeah
326:02 - uh
326:04 - let's see if i can make the web
326:06 - the browser
326:11 - have a different webcam
326:13 - i have a webcam in my
326:16 - laptop
326:17 - here as well in the front
326:24 - okay
326:29 - so
326:30 - i did something
326:37 - maybe
326:46 - refresh
326:52 - okay
326:53 - something worked i think it's using my
326:55 - front camera
326:59 - let's try to display this
327:03 - camera on some other kind of canvas
327:07 - i'm going to put another small canvas
327:10 - under these sliders there so i'm going
327:12 - to say
327:15 - canvas
327:16 - id
327:18 - cam canvas
327:22 - and i'm going to
327:27 - get the reference to this one as well
327:31 - somewhere here in the camera code
327:36 - and i will say
327:40 - camera canvas
327:44 - um
327:48 - i think i make this one as big as the
327:50 - video is going to be it's going to
327:52 - simplify things a bit and let's put here
327:57 - it
328:06 - i can scale it with css later
328:09 - and
328:16 - let's try drawing the image so
328:20 - i need
328:21 - i need a context for this one as well
328:35 - okay
328:37 - and i'm gonna draw the image
328:40 - of the video
328:50 - at zero zero
328:52 - so
328:53 - i don't need the width and height
328:55 - because the canvas has the same height
328:56 - as the
328:58 - video
328:59 - so let's remove this log
329:02 - and
329:05 - try
329:06 - to refresh
329:12 - okay
329:13 - but this is very large now
329:16 - so
329:17 - with css i'm going to say
329:30 - um
329:34 - max with
329:38 - okay
329:42 - i think this is just fine for debugging
329:45 - and fits in my screen
329:48 - quite
329:49 - nicely
329:50 - i think
329:51 - so
329:53 - this is the other camera from the front
329:55 - and that's just one snapshot because we
329:57 - are not animating these
329:59 - cameras in any way so i'm going to copy
330:02 - this style from here
330:04 - and i'm going to add it for
330:08 - cam
330:08 - canvas
330:11 - like this
330:12 - so when i refresh now
330:21 - okay
330:23 - now the room here is not fantastic with
330:26 - the lighting and everything
330:29 - i might change the room tomorrow
330:32 - i think i'm going to use a better
330:34 - room
330:36 - and um
330:48 - let's try to begin to do something with
330:50 - the camera here so i just hope i
330:55 - i
330:56 - at least get it to animate
330:58 - so
331:00 - here i'm going to call
331:04 - wait i already have an animate function
331:07 - here
331:10 - okay
331:13 - so what i need to do here is
331:20 - take this video out
331:24 - with let
331:29 - like this
331:31 - and
331:32 - i'm going to
331:47 - go back here and say
331:50 - okay this cam canvas also needs to be
331:55 - up here
331:57 - and
331:58 - camera
332:00 - context
332:04 - okay so camera context
332:13 - camera context draw image to video
332:19 - and then draw me on the other canvas
332:22 - so now the video should animate
332:25 - if i
332:26 - save this and refresh
332:33 - what is happening
333:23 - okay it works it was
333:26 - it did an error here because the video
333:29 - was null
333:30 - and it never got to request animation
333:32 - frames so animation didn't start and
333:36 - yeah
333:37 - even after i pressed that allow button
333:40 - for the webcam okay
333:42 - now
333:43 - if we have the video then do that
333:46 - and
333:53 - i really want to get somehow the
333:58 - locations
334:02 - of the
334:04 - of some pixels there so i always use
334:06 - these kind of markers i don't have a
334:08 - blue marker here
334:15 - tomorrow i need something blue
334:18 - and
334:21 - yeah
334:26 - spider-man is blue
334:30 - let's try with spider-man
334:33 - so
334:34 - let's write the function
334:36 - for
334:38 - a utility function for
334:42 - get
334:43 - marked locations so we're gonna look for
334:46 - the color blue
334:48 - so a color of zero red
334:51 - zero green
334:53 - maximum blue and we're gonna use a
334:55 - threshold
334:56 - like this
334:58 - and i'm going to get the
335:01 - data
335:04 - from the context i need here
335:08 - um
335:09 - the image data as well
335:12 - so
335:14 - here
335:16 - i'm drawing it on the context so then i
335:19 - want the image data
335:26 - camera context
335:28 - get image
335:29 - data
335:32 - from zero zero to
335:37 - cam
335:38 - canvas
335:40 - width
335:41 - cam canvas
335:43 - height
335:45 - like this
335:48 - and then
335:53 - this image data has a data attribute
336:02 - i just pass it completely to that utils
336:05 - function so
336:09 - the marked locations are going to come
336:11 - from get marked locations
336:14 - using the image data
336:18 - and the color and the threshold but i'm
336:20 - gonna keep those values
336:23 - inside of here
336:24 - i might put the color picker or
336:27 - something let's
336:29 - let's see later what happens
336:33 - but
336:37 - yeah get marked locations from the image
336:39 - data and let's console
336:43 - log
336:45 - logs length like this so the number of
336:48 - items in this array
336:50 - so now in the utils
336:53 - i need image data here also
336:57 - and
336:58 - let's just
337:03 - console log image data
337:06 - data
337:08 - length
337:09 - see how big this array is
337:12 - i remember
337:13 - this kind of thing quite well
337:18 - an error
337:23 - okay this is not returning anything
337:33 - yeah so here we have
337:43 - 0 is
337:44 - this empty array and this is the size of
337:47 - image data
337:49 - so
337:50 - these are values
337:52 - are this image data data
338:02 - is having
338:04 - i mean this data now is having this many
338:06 - numbers and it's the width times the
338:08 - height
338:14 - times 4 because each value for each
338:16 - pixel is the red green blue and alpha
338:19 - components
338:20 - so i'm going to loop
338:29 - through every four
338:32 - groups of four and i'm gonna say
338:35 - red is going to be data of i
338:40 - green is data of i plus one
338:46 - blue is data of i plus two and alpha
338:49 - would be data of i plus 3 but we don't
338:52 - need that so now i have a rgb value
338:57 - for this pixel
339:00 - now if this rgb value is
339:03 - a match
339:06 - our gb is a match to our
339:10 - caller that we are given this blue color
339:13 - there
339:14 - so
339:16 - match
339:18 - between these
339:20 - colors and
339:23 - under the threshold
339:25 - let's say the threshold is going to be
339:27 - something like
339:29 - 50.
339:30 - then this is gonna
339:34 - add something to this locations array so
339:38 - i'm gonna say here
339:40 - an empty array to begin with
339:44 - and uh
339:47 - the locations is gonna push
339:51 - an x
339:53 - um
339:55 - an x and a y
339:57 - so the x and the y we need to calculate
339:59 - them x is going to be
340:02 - i think the floor
340:04 - of
340:07 - the index of the pixel
340:10 - so the index of the pixel is i divided
340:13 - by four
340:14 - because we're going in groups of four
340:16 - and then the x is going to be
340:32 - p
340:34 - index
340:35 - divided by
340:37 - image data
340:39 - width
340:41 - and y is going to be
340:45 - the modulo i teach this all the time in
340:48 - my videos like all the marker effects
340:51 - have this this thing there i'm just
340:54 - trying to do it mentally and i hope that
340:56 - i don't mess up
340:59 - index modulo
341:02 - data
341:03 - with
341:04 - and these values are going to go now to
341:07 - our locations array
341:10 - and which we return here
341:12 - so we need two more things we need this
341:15 - match function
341:18 - match color one color two
341:21 - and this is just going to end the
341:23 - threshold
341:24 - and this is just going to say
341:27 - if the distance between color 1 and 2 in
341:29 - the 3d space
341:31 - is less than the threshold then it's a
341:33 - match so
341:34 - return
341:36 - distance c1 c2
341:39 - less or equal to this threshold
341:42 - and here we say function
341:46 - distance
341:48 - and this is going to be
341:52 - distance between two points p1 and p2 in
341:55 - 3d space
341:57 - um
342:01 - euclidean distance
342:34 - like that
342:39 - no
342:41 - like that
342:43 - okay and now return
342:47 - square root
342:49 - of this distance
342:51 - so
342:52 - this should be the distance
342:54 - in 3d space
342:56 - any space really because we have here a
342:59 - for loop
343:00 - like that
343:01 - so now what we are going to do
343:05 - is
343:14 - test
343:17 - i think
343:19 - i don't know i'm getting tired
343:22 - let's refresh
343:28 - so it's a zero there but if i bring this
343:31 - cup here
343:33 - it's still zero
343:36 - i think that these uh
343:38 - blues
343:41 - i need to go
343:43 - soon
343:44 - maybe five more minutes i tried to
343:46 - detect some blue color here
343:49 - um
343:52 - i think the
343:54 - value
343:55 - of the threshold could be bigger
344:12 - i think something doesn't work so
344:24 - let me put a
344:30 - break point here
344:32 - and go inside of this
344:38 - function
345:04 - okay
345:19 - things look good so i don't know why it
345:21 - doesn't work
345:23 - a bigger threshold is not a great idea
345:25 - because we are approaching too much
345:28 - the values of
345:31 - other colors
345:33 - oh okay
345:37 - well something blue there but i'm gonna
345:40 - go tomorrow in another room oh i have a
345:42 - pen here
345:45 - okay
345:50 - so something works i think
345:55 - these colors are detected
345:57 - let's see
346:01 - 10 more minutes i want to do something
346:03 - with all these let's average the
346:06 - locations
346:15 - so
346:16 - these are going to be x y locations
346:19 - the values from here
346:22 - so i'm going to say
346:28 - average is equal to x of 0 y of 0
346:33 - and
346:34 - for
346:44 - average x
346:49 - like this
346:57 - and i need to divide this by the number
346:59 - of locations
347:08 - both x and y
347:10 - so when i do this now and i return
347:18 - this
347:22 - oh i'm not calling this anywhere
347:25 - so back in index.js where we have here
347:29 - the locations i'm also going to get
347:33 - the
347:35 - average
347:37 - location like this
347:39 - and that's going to be
347:42 - what i'm going to log next
347:46 - so we have not a number there
347:49 - because
347:50 - the locations is empty
348:05 - oh yeah and then it's dividing this
348:08 - i don't want not a number there
348:13 - so here if we do have locations
348:23 - if we have locations then i'm going to
348:26 - do that
348:28 - otherwise
348:31 - i just don't
348:33 - so now what i want to do
348:35 - is use this location of this marker here
348:39 - to connect it to these sliders there
348:56 - so this info value of the slider and
349:00 - this attribute was x and y right so if i
349:04 - just
349:04 - send update points
349:15 - if i just send update points with
349:18 - something that has a value
349:23 - between
349:26 - minus 0.5 and plus 0.5
349:32 - so
349:32 - if i go here and say
349:36 - value is going to be
349:38 - average dot x minus
349:48 - image data width
349:52 - divided by 2
349:56 - and
349:58 - divided by
350:05 - image data width so this is going to
350:07 - give me a value
350:13 - for x
350:18 - so now what this will mean is
350:24 - how far is the marker from the center
350:26 - screen
350:28 - you will see
350:29 - and i did the same thing for the y as
350:32 - well
350:34 - so let's put here
350:37 - y like this
350:39 - and
350:41 - average y
350:43 - image data height
350:47 - like this
350:49 - and let's now instead of that value
350:52 - log
350:54 - x and y from here
351:02 - so
351:03 - now this is close to zero
351:06 - and this one there
351:11 - still zero on x but the y is big and now
351:15 - the y is
351:18 - negative
351:22 - okay i think i'm
351:24 - making some mistakes here
351:48 - is this average calculated correctly
352:03 - let's go back here and
352:05 - print what we had previously
352:16 - i didn't really look at those numbers
352:18 - before
352:19 - so
352:43 - they are flipped
352:46 - x and y are flipped
352:49 - yes
352:50 - this is why this is x
352:53 - okay and here
352:56 - now
352:58 - the new x and y values after scaling
353:01 - them
353:08 - yes so here x is close to minus 0.5
353:13 - x is
353:14 - plus 0.5
353:16 - y is plus 0.5
353:20 - y is minus 0.5
353:22 - and
353:24 - now that we have this x and y value here
353:27 - i'm just going to call
353:29 - update
353:30 - points
353:32 - with something that has a value
353:37 - of x
353:39 - and
353:40 - x so
353:42 - here update points was waiting for this
353:44 - attribute of x and y
353:47 - and the same thing with
353:49 - y
353:51 - and y there
354:00 - okay
354:07 - i like it
354:09 - uh this recognizing this blue color
354:13 - needs a bigger threshold maybe or
354:25 - not great but uh
354:29 - testing like this is sure is easier now
354:33 - and uh
354:34 - if i'm gonna put this on my
354:36 - in my head or something tomorrow then
354:41 - yeah
354:43 - i think i can make this
354:47 - somehow
354:48 - uh move with my head if i put some kind
354:51 - of markers on the face
354:53 - so i'm gonna
354:55 - do something like that tomorrow
354:57 - and i'm gonna think about it while i'm
355:01 - walking home
355:02 - i'm back
355:04 - and
355:06 - i would really want to get this
355:08 - character talking as well somehow
355:10 - depending on what i do with with my
355:13 - mouth
355:14 - so
355:15 - maybe i will have many markers on the
355:18 - face or something let's see
355:20 - but
355:22 - this is somehow quite nice already
355:26 - i'm happy with this
355:28 - um
355:31 - not perfect
355:32 - and some things feel a little bit
355:35 - strange
355:36 - but
355:44 - let's see how the hair will adjust and
355:49 - how the hair will fix some of the things
355:51 - and so on
355:54 - yeah
355:55 - okay
355:56 - see you tomorrow
355:59 - it's the next day now and i'm walking to
356:01 - work and
356:03 - i've been thinking what will happen
356:05 - today and
356:07 - it's going to be a very different day
356:09 - because yesterday i had no idea what's
356:12 - going to happen we didn't even know what
356:13 - project we're going to start
356:15 - but now
356:17 - i'm going to begin with
356:19 - some more code refactoring i'm going to
356:21 - change everything to be
356:24 - as object-oriented as possible because
356:26 - now functions are floating everywhere
356:28 - and if you want to import this in your
356:30 - own project it's
356:31 - it's a chance that something is gonna
356:34 - conflict with something else so
356:37 - not good
356:39 - and
356:40 - doing this refactoring stage in the
356:42 - beginning is also great because i'm not
356:44 - going to remember all the things that
356:46 - i've been doing yesterday
356:49 - then next thing what i'm going to do is
356:51 - implement some physics i'm going to use
356:54 - this verlai integration technique
356:56 - because i've used it so many times and i
356:59 - think i remember it
357:01 - and what i'm gonna do with that is
357:04 - eventually do the hair
357:06 - but uh
357:08 - that
357:09 - image of myself that i drew a long time
357:11 - ago initially had things like this
357:14 - around the around the neck and that's
357:17 - what i'm gonna apply the physics on
357:19 - first uh kind of like a simple pendulum
357:22 - and then i'm gonna move to the hair
357:23 - which is gonna be a bit more
357:26 - a bit more difficult
357:28 - but anyway uh physics for that so i will
357:31 - start with some kind of
357:34 - utility functions for
357:36 - doing linear algebra i'm gonna need some
357:38 - help for that and
357:40 - then
357:41 - a little bit of physics
357:44 - and
357:45 - last i'm gonna
357:47 - do
357:48 - some basic
357:50 - image processing and this is going to
357:52 - happen so that
357:55 - i'm going to have markers on my face
357:59 - so there will be
358:01 - markers
358:02 - on the face area they're going to be
358:05 - around the mouth somehow so that it can
358:09 - change the drawing based on how i'm
358:11 - opening my mouth i hope that's going to
358:13 - work i'm going to also use some
358:15 - reference point here so that the head
358:17 - movement like this is going to be picked
358:19 - up
358:22 - i didn't have any
358:25 - great markers at home so i took with me
358:28 - a double-sided tape
358:31 - which should hold on to things i hope
358:34 - it's gonna hold on to
358:36 - my face especially because i have the
358:38 - beard
358:40 - and um
358:41 - [Music]
358:44 - it's white so i also took one of the
358:46 - blue markers that i've used in many of
358:48 - the videos
358:50 - to color
358:51 - color them i really hope the detection
358:53 - is gonna be good i'm going now to a
358:55 - different room so the lighting there is
358:57 - better
358:58 - and i don't think i'm gonna have a big
359:01 - problem with that but detecting the
359:03 - all those points and figuring out what
359:05 - the face should do it's probably gonna
359:07 - be a challenge let's see
359:09 - [Applause]
359:11 - so
359:12 - the physics is something that i'm gonna
359:14 - start with and then this face detection
359:17 - thing i also have scissors because i'm
359:19 - gonna need to cut that tape somehow
359:22 - good that i don't forget things like
359:23 - that
359:27 - yeah so physics and then that
359:29 - uh
359:30 - face detection thing
359:33 - according to the markers
359:40 - and i'm gonna do those immediately when
359:42 - i arrive because i want to be as fresh
359:45 - as possible for the heavy stuff
359:47 - and then whatever fine tuning i can
359:49 - still
359:50 - manage
359:52 - will happen afterwards
359:55 - so maybe something like that knows that
359:57 - i don't like how it looks like i have
360:00 - some ideas
360:01 - about it maybe using transparency on
360:05 - that line and making some new lines
360:06 - appear as the face is moving we'll
360:09 - we'll see
360:10 - but yeah so
360:12 - uh
360:12 - heavy things at first
360:14 - and uh at some point i'm gonna need a
360:16 - way to toggle between
360:21 - between using
360:23 - the sliders as the input because i want
360:26 - to have users able to somehow play
360:28 - around with the avatar
360:31 - even if they don't have a webcam
360:34 - and the webcam and then the third thing
360:37 - that i want to do is
360:39 - record uh a small video of me saying
360:42 - something like hi i am produce avatar
360:45 - and maybe test a few movements uh
360:48 - talking and moving the head
360:51 - so that one will be the default when you
360:53 - enter the page um a video playing
360:56 - of myself with the markers
360:59 - and um
361:01 - the
361:02 - avatar is going to hopefully do the
361:05 - things that i'm doing at the same time
361:07 - and from that you can change to the
361:09 - webcam but you need some kind of way to
361:11 - mark the face
361:13 - like that
361:14 - and um
361:17 - if not then you can change to some
361:20 - um
361:22 - to just use the sliders there so maybe
361:24 - i'm gonna use a drop down simple drop
361:27 - down for that or um
361:30 - radio box
361:31 - is
361:33 - or something
361:34 - anyway
361:35 - that's the plan so
361:38 - refactoring oop
361:41 - um
361:42 - physics
361:43 - [Applause]
361:45 - face detection
361:48 - i mean face pose detection using the
361:50 - markers
361:52 - and
361:55 - uh a better interface and the video for
361:58 - that
361:59 - so hopefully the first two happen before
362:01 - my
362:03 - lunch break
362:04 - i also have another meeting
362:07 - and then the other two happen afterwards
362:10 - and uh
362:12 - yeah
362:12 - i'm gonna have about
362:19 - six more hours to put into this i think
362:22 - so let's see
362:30 - okay i'm in a new room now and the
362:34 - lighting is much better here
362:36 - so now when i use the marker which i
362:40 - took from home
362:42 - it's going to be
362:44 - detected much better than
362:46 - yesterday when i tried to do this so now
362:49 - i can move the character
362:51 - with this blue
362:53 - blue marker here in the screen so i will
362:56 - probably have something like this on my
362:58 - on my head and adjust this
363:01 - somehow and i really want to do
363:03 - something with the mouth as well so
363:06 - let's see later but first
363:11 - a little bit of refactoring and i'm
363:13 - going to make this character here
363:17 - using object-oriented programming
363:20 - so
363:21 - let me go
363:22 - to
363:23 - index html
363:26 - and
363:27 - what i want to do here
363:31 - instead of draw me i'm going to say
363:33 - something like
363:35 - uh
363:37 - avatar
363:40 - draw
363:41 - on
363:43 - on the context
363:44 - so i'm going to give the context here as
363:47 - a as an argument
363:49 - and this avatar is going to be an avatar
363:52 - object so i'm going to define this in an
363:54 - avatar
363:56 - js
363:57 - file
363:59 - class
364:00 - avatar
364:01 - like this
364:03 - and
364:05 - i will give it the constructor
364:08 - and the draw method
364:13 - so now um
364:15 - the code in this draw me is going to
364:18 - move
364:21 - inside of the avatar's draw method
364:26 - and
364:33 - context goes here
364:36 - in case you want to use multiple avatars
364:38 - multiple canvases something like that
364:42 - right and this draw me is not
364:45 - needed anymore but we need to define
364:47 - this avatar so we are going to say
364:58 - avatar
365:00 - new avatar
365:02 - here
365:04 - as a global
365:06 - variable
365:14 - good
365:14 - and
365:18 - draw body and draw head these are going
365:21 - to change to be
365:23 - methods inside of the avatar and they
365:25 - will be private methods so i'm going to
365:28 - say this dot
365:31 - hashtag draw body and same for this draw
365:34 - head
365:35 - so let's do the body first it's going to
365:37 - be
365:38 - this function from here i remove it
365:43 - and
365:47 - i put it here
365:49 - as a method the drawbody method and the
365:53 - ctx should be passed here as well so
365:56 - that the body knows where to draw itself
365:58 - so it begins the path
366:01 - um this a point is a global
366:04 - variable and that's something i don't
366:06 - like
366:08 - we are going to need to pass this
366:12 - down to
366:14 - the avatar so it knows where it should
366:17 - be looking at
366:18 - so a actually stands for that point that
366:22 - avatar was was directing its
366:25 - head at
366:30 - let's see the other code for the draw
366:32 - head and i'm going to
366:39 - have to copy everything from here
366:42 - this whole file
366:43 - goes also in the avatar class
366:46 - and
366:47 - it needs to become
366:49 - methods
366:50 - as well
366:53 - so these functions will also be
366:56 - converted into methods into private
366:58 - methods actually and they will need
367:00 - access to this context so i need to pass
367:02 - it down so
367:06 - private methods because it's its own
367:09 - responsibility the avatar knows how to
367:12 - draw itself
367:13 - and these points are going to somehow
367:17 - be important because they are coming
367:19 - from outside they are coming from
367:22 - the code that processes the camera here
367:25 - or they are coming from sliders here
367:27 - which currently i don't think work
367:30 - or
367:30 - oh they do work
367:32 - uh if there is no blue in the screen
367:35 - uh
367:36 - then
367:37 - they seem to work which is quite nice
367:40 - so i'm gonna have also some kind of
367:42 - toggling between how to move this
367:45 - character around
367:47 - so um
367:49 - b and c are really not much used i think
368:25 - yeah they are just used for the colored
368:28 - shape
368:30 - of the head
368:31 - colored with the skin color
368:33 - i wanted to have different ideas for
368:36 - that i wanted to
368:38 - somehow
368:40 - use more this interpolation
368:44 - and
368:44 - these ranges here but when i saw that
368:47 - it's becoming somehow tricky to do and i
368:50 - added there some negative range
368:53 - to make something work with c i realized
368:56 - that it's somehow
368:57 - uh
368:58 - becoming too confusing so i did
369:00 - everything relative to point a and the
369:02 - other ones i think we may not even need
369:05 - them let's let's see
369:07 - but let me finish this code now so
369:12 - uh
369:13 - draw years
369:15 - all of these things here they need to
369:17 - become
369:18 - method calls
369:20 - and private methods there's no real
369:23 - reason for the outside
369:27 - coders from the outside this class to be
369:29 - able to call this
369:32 - method
369:34 - and
369:36 - same here with the draw year
369:39 - now and
369:42 - all of these that are
369:45 - taking a here they need also the context
369:48 - now so let's
369:50 - pass already the context there
369:53 - in addition to this reference point
369:59 - to all of these things
370:02 - so context will be will be needed there
370:28 - right
370:30 - and um
370:34 - method
370:35 - here
370:41 - looks good
370:43 - so
370:44 - let's go down to this
370:49 - drawn nose
370:51 - and make this one as a method as well
370:56 - our to do is there
371:00 - if time at the end i will do those fine
371:03 - tunings
371:04 - the draw here it's going to be draw half
371:07 - here
371:08 - like that and
371:10 - these
371:11 - need the ctx as well
371:15 - now
371:26 - and here
371:34 - yeah looks good
371:36 - drawbeard
371:38 - also private method this time
371:41 - so doing the code like this means that
371:43 - we are
371:46 - we can include this avatar class and we
371:49 - don't have to worry if somebody else has
371:50 - a function called draw half beard
371:52 - somewhere
371:54 - so very useful
371:56 - um
371:59 - in separating the code and making it
372:02 - um
372:06 - not interfere with with other things
372:10 - draw half beard
372:17 - and i'm also relearning what i did
372:19 - yesterday so that i don't
372:24 - so that i know where i'm at pretty much
372:41 - okay
372:42 - so only problem now i think
372:47 - i don't need anymore this body js and
372:50 - this
372:52 - head js let me delete these
373:02 - like so
373:08 - and
373:08 - in index html i'm going to have to
373:13 - include avatar js instead
373:17 - and i think it should still be able to
373:19 - access the global points from here but
373:21 - i'm gonna do something about that let's
373:23 - refresh
373:25 - errors
374:30 - for some reason it complains about this
374:32 - context there
374:38 - let's put the breakpoint and
374:46 - undefined
374:49 - inside of this
374:52 - draw year
375:03 - oh i forgot here to pass
375:06 - ctx
375:24 - okay good
375:34 - yeah so
375:35 - much better
375:38 - i think
375:42 - but these points are something i don't
375:44 - really like very much so
375:49 - first of all i'm really curious can we
375:51 - do without them
375:56 - somehow let's activate these points
375:59 - again to be able to
376:03 - to see them
376:05 - where they are
376:07 - and do they really move that much or
376:09 - could we do them relative to a in some
376:12 - way
376:14 - so c is actually
376:34 - i think b doesn't move
376:36 - almost at all
376:38 - so maybe i could replace b
376:41 - i could maybe remove b in the beginning
376:44 - and just try replacing it with these
376:46 - values this value here
376:50 - let's see
376:51 - i just delete it from there
376:55 - and
376:56 - from here
376:58 - and inside of this avatar
377:00 - uh we use be
377:04 - here
377:06 - so how about we just put
377:09 - 0 and minus 0.77
377:12 - does this still look good
377:30 - b is not
377:32 - defined oh draw point b i don't want to
377:36 - draw that point
377:49 - okay here there is a problem
377:54 - here there is no problem
377:56 - so how about we just make it a little
377:58 - bit lower
378:00 - like um
378:16 - like this
378:35 - we don't need b anymore great
378:37 - and c is
378:40 - looks very much like that the bottom
378:42 - point of the
378:44 - beard
378:46 - it was relative to a
378:49 - let's see so when we draw the head and
378:52 - we draw the beard here
378:56 - we have the draw half beard
378:59 - and
379:02 - bottom most point so this point
379:07 - quite complicated it comes also from
379:09 - this vertical scaler i think
379:11 - but not impossible to figure out so
379:15 - let me copy this here
379:17 - and
379:18 - when we have the vertical scaler so this
379:21 - means
379:22 - um
379:26 - this one right here
379:28 - so the bottom most point is actually
379:32 - this
379:37 - something like that
379:39 - and this is
379:41 - c pretty pretty much so let me just have
379:44 - here
379:45 - uh
379:47 - b
379:49 - and c
379:50 - like that so they are not global anymore
379:52 - they are going to be just these local
379:55 - ones and i
379:57 - put here
379:59 - be like that
380:01 - so
380:03 - i remember what they are but
380:06 - they are not so important that they
380:08 - deserve drawing in the first place and
380:10 - definitely they don't deserve to be
380:12 - global variables a is an exception
380:15 - because it's going to be controlled by
380:16 - the sliders and this marker
380:19 - so c here is going to be
380:22 - okay
380:24 - b dot x
380:25 - b dot
380:27 - y so i'm going to use this everywhere so
380:30 - that i don't have the same
380:32 - hard coded values repeating themselves
380:34 - the others are important to be like that
380:36 - because they define the shapes
380:40 - and here c is going to be
380:45 - no comma there
380:48 - i think like that and
380:54 - i believe this is correct
381:00 - i'm going to
381:05 - stop drawing c
381:08 - and
381:09 - in the beginning
381:11 - i just have a there now
381:19 - whoa something happened
381:31 - oh
381:50 - oh
381:52 - ref is
381:53 - actually a
381:55 - in that case so
381:57 - c is defined according to the a
382:01 - y offset
382:04 - okay something bad is happening there
382:56 - haha it was first translating to ref
383:01 - yes so um
383:03 - we without translation i just first i
383:06 - just have to add the
383:08 - a coordinates there
383:11 - so
383:15 - a dot x
383:18 - a dot y
383:19 - plus this one
383:33 - okay not exactly sure why it's happening
383:37 - like that but it's almost correctly it's
383:39 - almost correct so it needs to be
383:48 - hmm
384:07 - so in the draw beard
384:21 - we translate today and then we draw half
384:24 - beard
384:28 - oh it's doing some scaling there oh so
384:32 - complicated
384:37 - yeah this scaling is also there
384:41 - complicated complicated stuff
385:08 - and
385:09 - [Music]
385:14 - scale y is just the y offset
385:21 - so
385:22 - a dot y offset
385:33 - like that
385:36 - one minus that
385:40 - okay
385:42 - i think that
385:48 - this needs to be multiplied by
385:55 - this
386:04 - no
386:06 - maybe
386:07 - divided by that
386:16 - no
386:17 - um
386:18 - [Music]
386:20 - i think everything here needs to be
386:24 - multiplied by that
386:30 - yes
386:32 - okay so now we don't need those things
386:34 - anymore and just that a point is
386:36 - controlling the head
386:38 - and
386:39 - i would also like to clean up
386:43 - even this a bit more
386:45 - um
386:52 - i mean
386:53 - this avatar class here is quite
386:59 - big now
387:02 - so maybe i would like to
387:04 - extract these
387:15 - methods somehow
387:20 - let's try to export extract the eyes
387:29 - draw eyes
387:33 - let's see if we can say
387:39 - this
387:49 - right eye
387:53 - draw
387:54 - and then
387:56 - give these
387:58 - things there
388:00 - like so
388:10 - and
388:12 - same for the left eye so i'm gonna
388:14 - define an eye object
388:27 - i don't think i need two of them
388:38 - and
388:39 - it can be a private
388:43 - attribute here
388:45 - okay so let's now here in the top say
388:54 - this i is new i
389:04 - class
389:05 - i
389:08 - and draw the draw method
389:14 - it's gonna be
389:15 - [Music]
389:16 - this one from here
389:23 - so it's gonna have a scale and the
389:26 - context on which to draw it
389:30 - and
389:37 - i think that's pretty much it
389:42 - empty constructor here
389:45 - so
389:48 - if i refresh now
389:54 - i get some errors
390:59 - is there something wrong with the
391:00 - private attribute
391:17 - okay i'm not sure what's wrong with that
391:20 - but
391:21 - let's just leave it public it's not the
391:23 - big deal there
391:26 - okay so
391:28 - the eyes
391:34 - don't work properly
391:49 - what happened here did i do some
391:52 - bad thing
391:58 - oh there was a minus
392:01 - did i
392:02 - lose this minus at some point
392:15 - yes now it looks good
392:17 - so with the i like that i'm going to
392:23 - take it out i'm going to put it in i.js
392:34 - like this
392:40 - and
392:53 - i could do the same for others but i
392:55 - think i'm spending too much time for
392:59 - refactoring
393:02 - let's go to index.js and
393:06 - import
393:08 - i js as well
393:11 - so
393:12 - now everything works
393:14 - as before but the code is better it has
393:17 - the eye here in its own class
393:20 - so
393:22 - next there would be this
393:24 - beard
393:26 - with the draw half beard
393:34 - so i think i'm gonna try to do it
393:37 - let's
393:38 - go where the draw beard is and say
393:42 - this
393:43 - beard
393:44 - draw
393:47 - using a and the context
393:52 - so
393:53 - at the top here
393:56 - this beard
393:58 - is new beard
394:04 - beard js
394:07 - i'm just going to copy i
394:10 - class and say here beard
394:13 - and
394:19 - i don't need this draw beard anymore
394:24 - draw beard is going to go inside of the
394:32 - beard
394:34 - object
394:36 - and
394:37 - it's going to become the draw method
394:41 - like this
394:44 - and draw half beard is still going to be
394:46 - a private method here inside i think
394:49 - there's no way around that
394:53 - we need it here
394:56 - so that's good
394:57 - and here in the alpha tar
395:00 - nothing else needed i just need to
395:02 - import
395:04 - beard
395:06 - like this
395:08 - so code is better
395:10 - much better
395:15 - now
395:16 - next thing uh
395:19 - i think nose doesn't necessarily need
395:21 - its own class it's small enough
395:24 - year is small enough i think
395:28 - here
395:29 - this will be needed
395:33 - because
395:37 - because i'm going to make it very
395:38 - complicated soon
395:42 - so here js and here i'm going to take
395:46 - out draw hair and draw half hair
395:49 - and it's already kind of complicated it
395:52 - says
395:57 - it's as complicated as the beard so i'm
396:00 - gonna take these
396:01 - methods out from here
396:03 - and put them here
396:06 - let's copy the beard
396:09 - code
396:11 - and
396:12 - just replace with this one
396:15 - probably
396:16 - i wasted more time copying that but
396:20 - somehow
396:22 - and the draw here in the same way
396:28 - yes no problems with that
396:31 - so the beard also will need to be
396:34 - defined somewhere
396:57 - i mean
396:59 - hair did i say beard
397:15 - okay
397:32 - right
397:33 - so
397:35 - avatar js has
397:39 - not so many lines anymore
397:43 - has the body drawing and then this is a
397:46 - debug thing
397:48 - that um
397:52 - maybe i'm going to actually make it like
397:53 - that
397:54 - if i want to debug then i'm going to
397:56 - show these points
397:59 - i may have multiple ones
398:01 - later and in index here i can have a
398:06 - debug
398:08 - true
398:09 - so now if this is true then the points
398:12 - are showing if this is false then the
398:15 - points are not showing
398:17 - so i don't need to comment out things
398:19 - all the time
398:20 - and here
398:22 - [Music]
398:24 - this a point is something that i need to
398:32 - fix
398:33 - it doesn't mean anything i'm
398:43 - i don't think i'm gonna need anything
398:45 - else just a point where it's looking at
398:49 - so let's just call it
398:54 - look at and i will make a comment here
398:58 - point a
399:00 - when we debug so this look at is
399:05 - a point
399:16 - like this
399:17 - and
399:20 - this a here
399:24 - won't be needed anymore so i'm gonna
399:26 - remove it and we will just
399:31 - use
399:32 - look at
399:33 - everywhere
399:35 - and when we define the avatar
399:40 - i'm going to give it this
399:42 - look at
399:44 - point as a reference
399:48 - so
399:49 - now
399:59 - here
400:08 - this is going to be a so where is it
400:11 - looking at
400:13 - every time we have a capital a so i'm
400:15 - gonna look for it matching the case and
400:18 - there's a full word
400:20 - every time we have this kind of capital
400:23 - a i'm gonna replace it with this dot
400:27 - look at
400:34 - that one can stay like that
400:37 - it's the label and drawing the point
400:40 - with our
400:41 - utility function
400:52 - okay
400:53 - saving
400:55 - and here
400:56 - we have that update
400:58 - points function
401:00 - so this was the thing that
401:03 - moves with the slider so
401:06 - update
401:07 - look at
401:15 - update look at
401:19 - update look at
401:21 - and
401:22 - i don't need the for loop here anymore i
401:24 - just have
401:26 - p equals to
401:28 - look at
401:30 - so
401:33 - right
401:39 - refresh
401:40 - allow
401:54 - no
401:55 - error when the
401:57 - camera because i still have update
401:59 - points here so update look at the value
402:02 - of x and the value of y
402:11 - yes okay finally
402:13 - finally code is now
402:16 - as clean as i'm going to get it in this
402:18 - project it's
402:21 - not all about the code quality i think
402:24 - code quality is very important and i
402:26 - don't want to give some bad
402:29 - bad
402:30 - example to anybody
402:36 - everything can always be improved but
402:39 - you need to stop somewhere also in real
402:42 - work
402:46 - okay
402:47 - done
402:48 - it's
402:49 - much better now at least
402:57 - yes
402:58 - so uh next what we are gonna do is
403:03 - physics
403:05 - so let's let's do the physics next and
403:08 - i'm going to
403:10 - go quite quickly
403:13 - through these things i've i've done them
403:16 - multiple times and i have an idea how
403:18 - they're gonna go
403:22 - yeah
403:24 - so let's have a
403:26 - file
403:28 - physics js and in index.js
403:32 - include this one as well
403:38 - okay
403:40 - and
403:41 - i'm actually going to start with adding
403:43 - some more utility functions so
403:46 - there will be some math functions
403:53 - that work with the
403:54 - vectors because i make mistakes if i
403:57 - don't use vectors when i'm doing the
404:00 - physics it's just so much easier when
404:02 - you work with
404:04 - x and y combined or i usually like
404:07 - vectors to be
404:08 - using arrays so i have the array of 0
404:11 - and array of 1. it's very useful because
404:14 - then i can use for example
404:16 - this function here that works with
404:20 - arrays
404:21 - this could have also been with that so
404:23 - now i have a mess of
404:25 - points and also these kind of 3d points
404:28 - are different they don't have xyz but
404:33 - yeah it's a little
404:36 - bit i should refactor this so here the
404:40 - location
404:41 - i prefer to use arrays everywhere so
404:43 - instead of an object with x and y it's
404:46 - going to be
404:47 - a vector with
404:51 - zero zero here
405:19 - yes
405:25 - it's just much better when the code is
405:27 - more
405:28 - is consistent everywhere and because we
405:30 - are using 3d here also for the color
405:32 - space
405:33 - it makes sense to
405:35 - have it like this these functions become
405:38 - more general
405:43 - yeah
405:45 - so we have the average and we are using
405:47 - this average somewhere in
405:50 - index
405:53 - i think
405:54 - no in camera
405:59 - no not in camera where is the average
406:01 - being used
406:02 - it it is an index
406:04 - some oh i have these things on
406:08 - um
406:10 - yes so here
406:13 - average of zero and average of
406:16 - one
406:19 - and um
406:23 - i don't
406:24 - think i need this logging anymore and
406:26 - this
406:27 - comment from here
406:30 - let's
406:31 - try again
406:38 - yeah good everything still works
406:41 - so where was i
406:44 - utility functions for more more vector
406:49 - operations
406:50 - so i just they are simple they are just
406:54 - for
406:55 - vector addition so for example you have
406:58 - two vectors here like that and
407:01 - you can implement this by just
407:04 - considering 2d vectors but i really like
407:06 - to go and
407:09 - say
407:10 - um
407:13 - the new vector like the result
407:15 - is like that and
407:18 - go through all the elements so it would
407:20 - work in any dimensions
407:22 - like this
407:36 - like so and return this new vector
407:41 - like this so this is for adding vectors
407:44 - now
407:45 - subtracting vectors
407:50 - we also need things like
407:52 - magnitude of a vector so
407:55 - essentially the
407:58 - length of a vector
408:02 - or just one vector here so i'm going to
408:05 - say
408:06 - this magnitude
408:13 - this is the same thing as the distance
408:17 - from zero
408:23 - so i think that i can actually reuse
408:25 - that function here and say
408:27 - return
408:32 - distance
408:34 - of
408:36 - v
408:37 - and an array of zeros
408:40 - so
408:43 - new array of the size of
408:47 - the
408:47 - [Music]
408:49 - filled with zeros i think is the syntax
408:52 - i hope
408:53 - this will work so the magnitude is
408:57 - how far from zero this is pretty much
409:00 - and
409:01 - we can reuse that function there
409:04 - and also very important function
409:07 - is to be able to normalize
409:10 - so you just get
409:11 - essentially a vector with a length of
409:13 - one
409:14 - any kind of input vector you just get
409:17 - output something with the length of one
409:19 - but it keeps the orientation
409:25 - or scaling
409:26 - to
409:28 - scale is also important so scale let's
409:32 - let's actually do this
409:37 - scaling first and then we do the
409:39 - normalization so when you scale
409:42 - something you need the vector but the
409:44 - other one is going to be a scalar of
409:46 - a simple number
409:48 - and i'm going to do this by going
409:54 - through
409:55 - these elements and each element
410:02 - multiplied by the scalar like this
410:05 - and now normalizing
410:10 - is just
410:11 - a return
410:14 - scale of the v with 1 divided by the
410:17 - magnitude of v so you divide it by its
410:21 - length and you end up with the value of
410:23 - 1 for the new magnitude
410:26 - so simple relatively simple things i i
410:29 - think and they are now
410:32 - more
410:33 - vector utility
410:37 - functions
410:39 - i can separate these a little bit
410:46 - so this is now general drawing here
410:51 - let's call these
410:56 - vector map
410:59 - and
411:00 - this is something to do
411:08 - with and that
411:11 - let's move linear interpolation here as
411:14 - well it's
411:15 - quite related i think
411:18 - and
411:19 - the last one was
411:25 - just drawing things general very general
411:27 - things so now our utility functions are
411:31 - more of them we have more utility
411:33 - functions now and the the physics that i
411:36 - want to implement are going to be
411:40 - do i have some error
411:44 - here
411:48 - i don't think so
411:50 - okay
411:51 - oh there is some error somewhere
411:56 - here
412:08 - i copied that
412:10 - so it's everywhere
412:15 - okay nothing broke
412:17 - i just added new code so in the physics
412:21 - everything will be based on
412:24 - it will be based on particles so this
412:26 - verla integration method i want to
412:29 - implement
412:30 - works well with particles and then with
412:33 - some constraints like
412:35 - sticks between the particles
412:37 - so
412:39 - class particle
412:43 - then
412:44 - here i'm going to put it at some
412:46 - location so
412:49 - each particle will be initialized
412:51 - somewhere let's say
412:53 - location like this
412:58 - and
413:01 - store it
413:06 - and when particles move it's useful to
413:08 - keep also the old location in memory it
413:11 - will be useful in the mathematics so i'm
413:14 - just going to initialize this with the
413:16 - same location in the beginning so the
413:18 - particle doesn't move from some past
413:21 - last
413:23 - place
413:24 - and
413:25 - we need to be able to draw this
413:29 - so i'm just gonna do simple things like
413:33 - begin path and then
413:38 - let's make these red
413:44 - so they stand out and we easily
413:46 - recognize them
413:48 - or actually orange i think it's better
413:51 - red than green like the green shirt
413:53 - color is sometimes confusing to people
413:57 - so
413:59 - uh
414:02 - let's
414:03 - just
414:04 - make a small circle there at the
414:07 - location
414:10 - since these are going to be vectors
414:13 - i can say here location of 0 and
414:16 - location of 1 or i can just
414:19 - spread the location object like this
414:22 - and give it the radius
414:24 - say
414:25 - 0.1
414:36 - and um
414:40 - the arc method works like that so
414:44 - i need to specify there
414:46 - the full circle and
414:48 - these need to
414:50 - update
414:51 - according to some kind of forces so
414:54 - usually we have some gravity
415:01 - i don't want to leave these as global
415:04 - variables here but
415:12 - let's see later
415:14 - so
415:15 - just some value for the gravity there
415:18 - and this would actually need to be a
415:20 - vector
415:21 - and since we're in 2d space i'm going to
415:23 - say
415:24 - 0 horizontally and 0 vertically like
415:28 - that and the update
415:32 - so what i'm going to do now is pretty
415:35 - much first figure out if the location if
415:37 - the particle is moving
415:39 - from its old location somehow so i'm
415:41 - going to get a
415:44 - velocity vector
415:46 - by doing a
415:48 - subtraction from this location to this
415:53 - old location
415:55 - like that and i can predict the new
415:57 - location
416:00 - to by adding
416:02 - to this location
416:05 - the velocity vector that we just
416:08 - calculated so where it came from where
416:10 - it's now
416:11 - you get that difference the vector
416:14 - connecting them and you add it to the
416:16 - current location to get the new one but
416:18 - you're not done yet because then you can
416:21 - still add this gravity for example so
416:25 - this actually needs to change
416:29 - and we say new location is equal to add
416:34 - to new location we add the gravity
416:37 - vector
416:39 - and
416:40 - we also have to update now
416:45 - old location to be equal to this
416:48 - location
416:50 - like that so we don't lose it and now we
416:52 - can update this location to
416:55 - new
416:58 - location that we calculated previously
417:00 - so i use the extra variable there so
417:03 - that
417:04 - i can still keep the previous one and i
417:07 - don't change it
417:09 - instantly there
417:12 - okay
417:13 - so with this kind of particle here and
417:17 - an update and then draw method i'm going
417:19 - to go to the avatar
417:23 - and uh
417:25 - here i'm going to
417:28 - just try adding a particle where it's
417:31 - looking at
417:34 - yeah
417:36 - so
417:38 - let's see
417:40 - this
417:41 - part
417:43 - particle new particle
417:46 - at
417:48 - look at
417:52 - this is with x y because it's in pixels
417:56 - so i'm gonna say
417:59 - this
418:00 - look at
418:06 - x and this look at
418:10 - why i'm converting it into an array here
418:13 - and
418:15 - i don't think i need to give it anything
418:17 - else and now here in the draw method i'm
418:20 - going to
418:21 - [Music]
418:22 - say this particle
418:25 - draw on the context like so
418:28 - so if i refresh
418:31 - i get errors
418:39 - okay
418:46 - oh wow
418:49 - i think this location might be a kind of
418:52 - a
418:54 - reserved word
419:15 - and this is uh
419:21 - or maybe not let's
419:23 - i think i'm missing this there
419:32 - yes i think now it should work let's see
419:36 - okay
419:37 - so
419:38 - we see now this particle
419:40 - um
419:44 - initialized where
419:47 - a where that look at point
419:50 - is in the beginning but it's not a
419:52 - reference to it i'm
419:55 - taking its x and y initially when it's
419:57 - initialized and then
420:00 - it stays there the particle
420:02 - um
420:03 - i think i'm gonna make the particle look
420:06 - a little bit different so
420:08 - let me go here and say
420:11 - i will make it red so i will make it a
420:14 - smaller radius
420:17 - 3 and
420:21 - stroke
420:22 - it will be red
420:24 - but i'm also going to
420:25 - [Music]
420:27 - make a stroke to it that is going to be
420:33 - white
420:34 - so that
420:36 - you can see it
420:38 - better
420:49 - okay i think this is good
420:51 - so that's the particle but it's not
420:53 - falling i said it should fall with the
420:56 - gravity but we are never calling this
420:58 - update function so
421:01 - here
421:06 - let's call this particle
421:10 - update first and see what happens
421:15 - something happens it's not there anymore
421:19 - i think it might have moved very quickly
421:24 - because
421:26 - this
421:28 - scene is in such a small
421:38 - or i don't know
421:58 - what is happening there
422:01 - this number is becoming huge all of a
422:03 - sudden
422:18 - and this becomes infinity so what what
422:20 - gives
422:23 - let me debug this velocity vector here
423:08 - something strange is happening no matter
423:10 - what the gravity is
423:17 - these numbers become big and small i
423:20 - mean
423:21 - negatively big let me go to the utils
423:23 - maybe i made some mistakes here with the
423:25 - vectors so
423:39 - oh subtract this minus
423:44 - probably this is it let's
423:46 - save
423:48 - okay and now the point
423:50 - is falling
423:51 - and it's actually accelerating
423:54 - it's falling faster and faster and
423:56 - faster and that's great
423:58 - so i would like to
424:01 - do a couple of things here
424:04 - [Music]
424:06 - and i will start with this
424:10 - let me show you the picture
424:13 - we had previously there like that so
424:17 - these things here are missing right now
424:19 - and they actually
424:21 - used to be
424:23 - um
424:25 - in my original drawing they used to be
424:28 - something hanging from there
424:30 - so i would like to make those
424:32 - move a little bit as the character is
424:35 - moving
424:36 - so
424:37 - um
424:38 - when he moves left to right like this i
424:40 - want it to fee
424:42 - to move a little bit like a pendulum
424:45 - so i'm going to put one particle here
424:47 - and one particle here i'm going to make
424:49 - this one up the one up static and the
424:52 - one at the bottom
424:55 - it will be constrained to be at the
424:57 - fixed distance from the top one
425:00 - so
425:01 - let's first define these particles and
425:03 - um
425:07 - actually uh i'm just going to define
425:11 - another one
425:14 - beneath this one
425:16 - so
425:17 - let's add a function here
425:29 - i will refactor this at some point
425:32 - but
425:33 - update particles and this is now going
425:36 - to
425:40 - let's put draw particles as well it's
425:43 - it's nicer like that and here we have
425:46 - particles
425:47 - is equal to
425:49 - an array so the first item in this array
425:52 - is going to be
425:53 - one particle at that look at
425:56 - and
425:56 - the other item in this array is going to
425:59 - be another particle that is somewhere
426:02 - below that so
426:03 - in the beginning
426:05 - i just do something easy like this
426:08 - so below the first particle and now what
426:11 - i'm going to do here is for
426:15 - this particles
426:16 - for each
426:19 - particle i'm going to loop through all
426:22 - of them and say
426:25 - update these particles and then i'm
426:28 - going to say
426:30 - draw
426:31 - these particles
426:34 - on the context so
426:36 - here this method will need that
426:39 - and
426:40 - i'm going to say here this
426:42 - update
426:43 - particles and
426:45 - this draw particles
426:50 - like this
426:51 - so this should now
426:53 - let's go back to our
426:55 - code this should now show two particles
426:57 - that are just falling like that but the
426:59 - first one i want it to be static so i
427:03 - think i wanted to
427:05 - fix it somehow to
427:09 - i will add the third parameter let's
427:11 - call it true and i'm going to
427:16 - fix it to
427:23 - is fixed so i
427:25 - i won't allow it to move
427:30 - like this
427:31 - and in the update
427:36 - none of this needs to happen if it's
427:37 - fixed so if is
427:40 - this is fixed
427:43 - return
427:44 - i think this is fine and i don't need to
427:46 - log the velocity anymore that was just
427:48 - for debugging there
427:50 - so now
427:56 - what happened
427:58 - where is one particle
428:01 - um
428:06 - no i don't think this is
428:08 - this is not the problem
428:24 - what happened
428:26 - so back in the avatar i have
428:29 - oh i'm passing here
428:34 - inside the array and i think it had
428:36 - consequences
428:38 - okay so back here
428:41 - if it's fixed i don't have to update
428:45 - so this one is fixed there
428:48 - right
428:52 - okay
428:53 - so that one is fixed but the other one
428:55 - is not so what we need to do now is uh
428:59 - constrain the other particle
429:01 - to
429:02 - uh
429:03 - the first one so for that i'm gonna
429:05 - implement here a segment class
429:10 - that will have a fixed length and this
429:12 - segment will be between two particles so
429:15 - i'm just gonna
429:17 - say here a constructor for
429:19 - a and b
429:21 - and
429:23 - i will say here
429:26 - okay
429:29 - i don't want to confuse a and b with the
429:31 - way i'm talking about those a b points
429:33 - from previously i think it's it's clear
429:36 - enough
429:38 - i'm going to save a here and say
429:44 - now let's just say
429:45 - particle a
429:49 - particle b
430:01 - okay and let's calculate the distance
430:03 - between these two particles so i'm going
430:06 - to say a length for this segment
430:09 - is equal to the distance between
430:12 - particle a
430:15 - location
430:17 - and particle b
430:19 - location like this
430:21 - and
430:23 - i think that's all i need to know about
430:25 - this segment it's initial length when
430:27 - it's defined
430:29 - and then to draw this segment i'm going
430:31 - to use a context and i'm just going to
430:35 - do
430:36 - this
430:38 - a simple line i think i'm going to do a
430:40 - red line just
430:42 - to debug for now
430:44 - so
430:45 - ctx
430:46 - begin path
430:48 - ctx
430:50 - stroke style
430:52 - red
430:54 - ctx move to
430:56 - this particle
430:58 - a location
431:02 - and here i can
431:04 - spread these into two values because the
431:06 - move two needs two values
431:08 - and line two particle b location
431:14 - like this
431:24 - i have a message
431:36 - okay
431:37 - oh wait there was another
431:51 - right
431:51 - so
431:52 - um
431:53 - stroke
431:58 - like this and
432:00 - the segment
432:03 - needs to be created also somewhere so
432:06 - here let's say
432:08 - this segment
432:10 - i pre i prepare it to be an
432:13 - array already
432:14 - is a new segment
432:17 - with
432:20 - particles of 0 and this dot particles of
432:26 - one so the ones we defined previously
432:30 - like this
432:33 - and uh i also i'm also gonna need
432:37 - update segments
432:42 - but all of these are the same all of
432:44 - these have update and draw update and
432:47 - draw
432:48 - so
432:49 - maybe it shouldn't be update particles
432:51 - and update
432:53 - and draw particles but
432:57 - update
432:58 - and draw
433:01 - we already have a draw
433:03 - update
433:04 - items and
433:10 - physics item
433:13 - and draw physics item
433:20 - and this is going to be a parameter so
433:24 - items
433:30 - and the context there so here
433:34 - i'm gonna have to change these
433:38 - like so
433:41 - i i'm gonna reuse this same code to
433:45 - handle the segments and the particles so
433:48 - here update physics items
433:52 - and
433:53 - draw physics items
433:56 - first i'm going to give this
433:58 - particles
434:00 - and then i'm gonna give this particles
434:03 - here
434:04 - but after we do that
434:08 - i'm gonna give this segments
434:16 - this segments
434:18 - and
434:18 - i don't have yet the update for the
434:20 - segments yet so let me comment it out
434:23 - and just see if this code still works
434:49 - um
434:50 - not in an array here
434:52 - these are just two arguments
434:57 - okay so now you can see also the red
434:59 - line but this is not a segment i mean it
435:02 - is a segment that is changing length but
435:04 - uh
435:05 - it should be like a stick so our update
435:08 - method here inside of the
435:11 - segment class it needs to
435:14 - constrain it to the initial length when
435:17 - it was defined so i'm going to say here
435:20 - update
435:24 - and let's just see
435:27 - what the new length is first so
435:34 - it's going to be we subtract
435:38 - from
435:39 - this particle a location
435:43 - to this
435:45 - particle b
435:48 - location so this is
435:50 - the difference between
435:52 - a and b and currently
435:55 - and i'm gonna need the magnitude of this
435:57 - so how
435:59 - i mean
436:00 - so far we we actually
436:03 - have the vector difference
436:13 - yeah and the magnitude of this is going
436:16 - to be
436:18 - magnitude of
436:22 - like this
436:23 - and
436:25 - we need the difference between the two
436:27 - magnitudes so how much do we need to
436:31 - relocate the particles so that they are
436:33 - still close to
436:35 - as close as in the beginning here so the
436:37 - difference between this magnitude and
436:39 - this initial length
436:41 - so
436:44 - is going to be magnitude minus this
436:47 - length like this
436:49 - and
436:53 - i'm also going to need
436:58 - it's going to be easier if i also get
437:00 - the normalized vector between these two
437:03 - because then i can scale that
437:06 - in both directions and
437:09 - and fix the segment if it gets too long
437:11 - or too
437:12 - too short
437:13 - so i'm gonna do here
437:17 - the normalizing
437:19 - vector
437:20 - normalized vector by normalizing this
437:25 - d vector so now the length is going to
437:28 - be 1 after this but it's not going to be
437:32 - losing its orientation
437:36 - okay
437:37 - so now what we can do
437:42 - is um
437:56 - move a and b
437:59 - locations of a and b
438:09 - with this difference with half this
438:11 - difference
438:13 - in each direction so
438:16 - this particle a location is going to be
438:21 - let's add so let's add to the current
438:24 - this particle a location
438:29 - we can scale the normalized vector from
438:33 - above
438:34 - with
438:36 - minus the difference
438:38 - by two so i'm moving um
438:43 - one point by half
438:44 - and i have to think about also these
438:46 - fixed points later the ones that
438:49 - don't move but let's just do this now
438:52 - and hope it works
438:53 - and the same thing for b
438:55 - but
438:56 - plus here so one goes if the segment is
439:00 - longer than it should be
439:01 - this point goes half the difference that
439:04 - way and this goes half the difference
439:06 - that way if it's shorter then it goes
439:09 - half the difference have the difference
439:11 - opposite direction so something like
439:13 - that
439:14 - great
439:16 - i hope
439:18 - i really think this is going to break
439:22 - refresh it's not broken but it's not
439:25 - doing oh i'm not
439:27 - calling this
439:28 - here because we didn't have an update
439:30 - method previously
439:35 - normalizing is not defined
439:40 - i think it's called normalize
439:45 - i was just talking what i'm doing
439:48 - okay
439:49 - and now this point is
439:54 - there
439:55 - interesting that this other one doesn't
439:59 - oh it does move
440:01 - it
440:02 - if you look closely you can see this one
440:04 - is actually falling very very slowly
440:07 - and that's because
440:10 - this one is pulling on it so it's going
440:12 - down a little bit and then this segment
440:14 - stretches and then both of these points
440:17 - adjust because
440:19 - here we have
440:21 - we are moving each of them even if point
440:24 - a
440:25 - should be fixed actually
440:28 - so i'm gonna need to
440:30 - take care of this somehow so this code
440:33 - is fine if the points are not fixed so
440:36 - if for example
440:37 - this particle a
440:40 - is fixed
440:42 - if it's not fixed and
440:48 - this particle b
440:50 - is not fixed
440:52 - then this is just fine code here
440:59 - but otherwise
441:07 - if
441:11 - a is not fixed
441:20 - then a is going to move
441:23 - twice that difference so it's going to
441:25 - do all the work so to
441:28 - speak else
441:31 - it means b is the one that is not fixed
441:37 - i don't need this if statement i think
441:39 - so
441:46 - what happens if both are fixed
441:49 - so if these are not fixed if a is not
441:52 - fixed
441:53 - if b is not fixed
441:57 - let's just be careful here and
442:00 - if b is not fixed then b is gonna move
442:04 - with both of them
442:07 - i mean uh with double the
442:10 - um
442:13 - yeah
442:16 - but uh
442:19 - if both of them are fixed
442:23 - then nothing should happen i think this
442:25 - is this should work
442:27 - i hope
442:28 - so if i refresh now
442:32 - i think this point doesn't move anymore
442:35 - but so far
442:36 - there's nothing fancy happening here so
442:39 - what i want to do now is
442:42 - fix this point to something maybe i'm
442:44 - going to fix it to the
442:47 - a location so
442:58 - let's say here this particles of zero so
443:02 - this point from there is gonna be
443:05 - this dot
443:07 - look at at each time we are drawing
443:11 - um
443:13 - actually i need to do to look at x and
443:16 - this look at
443:18 - y
443:19 - converting to an array from this point
443:21 - of pixel point object
443:29 - now
443:30 - it's breaking
443:32 - the
443:33 - location
443:35 - of the particle
443:36 - zero has to be like that
443:39 - okay and now
443:48 - this gravity is
443:50 - is too weak
443:53 - i
443:55 - i want it to be stronger so
443:59 - physics gravity
444:09 - okay
444:10 - so now when it's moving
444:12 - um
444:16 - that segment uh always constrains the
444:19 - bottom particle the particle wants to go
444:22 - down then when you move to the side it
444:24 - wants to stay there its original
444:27 - position but then that segment is going
444:30 - to pull it
444:31 - somehow so now i'm i'm getting
444:35 - pretty much exactly what i want but
444:37 - that's not where we're gonna put this so
444:41 - yeah i
444:43 - let's let me try to swing it like a
444:46 - like a swing
444:48 - like give it
444:53 - momentum when i should give it momentum
444:56 - and
444:58 - this is fun okay it's going more and
445:01 - more
445:02 - okay
445:03 - um
445:04 - i want this to be somewhere here
445:09 - attached to the
445:11 - body
445:12 - so that's gonna be
445:15 - this is gonna happen in the draw body
445:19 - thing
445:27 - yeah and then we are gonna use these
445:30 - same things for the hair as well
445:33 - so
445:33 - [Music]
445:36 - let's go back here and actually
445:39 - i would like to have in the avatar
445:42 - a body as well
445:44 - this all the because men much code is
445:48 - going to be their new body
445:51 - and
445:52 - hope this is not a re reserved word
445:57 - so
445:58 - bode.js and let's include it here as
446:02 - well
446:09 - like this
446:11 - and then both djs
446:14 - might be a reserved word but let's see
446:17 - so
446:18 - uh
446:19 - draw body
446:25 - is gonna be just a method in class
446:29 - body
446:38 - that is called
446:39 - draw like this
446:46 - and the shirt color
446:51 - let's actually pass it here
447:00 - uh
447:01 - i also need the skin tone
447:07 - so we don't use global variables at this
447:09 - stage
447:15 - okay
447:16 - shirt color and skin tone
447:29 - okay so this is now body and inside of
447:33 - avatar
447:35 - i
447:48 - all the
447:51 - draw
447:53 - on the context
448:40 - okay
448:41 - look at
448:42 - needs to be passed here as well
448:49 - because the
448:52 - body is also adjusting a little bit with
448:54 - that
449:05 - so
449:07 - draw
449:08 - with this
449:12 - this look at
449:17 - okay why is it red
449:20 - oh i'm not passing the colors here
449:25 - when creating the body i should use
449:34 - shirt color
449:36 - skin tone
449:39 - these should be also passed here in the
449:42 - avatar when creating the avatar
449:45 - to avoid
449:53 - issues
449:55 - great okay
449:56 - it works
449:58 - so
449:59 - now i really want to
450:02 - add these particles
450:03 - not in the avatar
450:08 - but in the
450:11 - body
450:13 - and
450:15 - i think this is just
450:17 - fine to copy here
450:22 - but the code here for
450:26 - updating the physics items drawing the
450:29 - physics items
450:34 - and these things here
450:36 - this needs to be extracted in the
450:38 - physics
450:40 - file here so i'm going to make a class
450:45 - physics
450:47 - and i think i'm going to use static
450:49 - variables so static functions so i'm
450:52 - going to
450:58 - write here
450:59 - physics
451:02 - update physics items
451:05 - draw physics items probably this draw
451:08 - should be
451:09 - not in physics but in some
451:12 - drawer or whatever
451:15 - but this is just fine
451:17 - and
451:20 - these go out from there
451:27 - to here with static because we don't
451:30 - initialize this object
451:32 - and i think this is where the gravity
451:35 - goes as well
451:37 - so
451:38 - static
451:40 - gravity there
451:42 - and
451:42 - the particle takes it from physics
451:49 - it's better like this
451:53 - a little better it's not perfect but
451:56 - i didn't really know what i'm gonna do
451:58 - with this
452:00 - so let's
452:03 - remove this and
452:05 - inside of the body
452:08 - after we do all the other drawings i'm
452:10 - gonna put here
452:13 - this code
452:16 - yeah
452:18 - save this refresh and an error
452:29 - okay the
452:30 - look at is
452:32 - no longer with this here i'm passing it
452:36 - like that
452:51 - hmm
453:05 - i'm just gonna put zero zero for now
453:16 - zero plus zero three i don't need the
453:19 - look at
453:21 - in that way at least so
453:28 - let's just
453:29 - have it zero zero
454:17 - mm-hmm
454:37 - um
454:58 - why aren't they appearing
455:15 - um
455:32 - why is it not appearing there
455:35 - it should appear right
456:17 - i know
456:22 - this location is not good
456:29 - it's under the head
456:32 - it was under the head
456:36 - oh boy
456:38 - yeah
456:40 - okay
456:41 - so
456:50 - so it's drawing it there
456:54 - but i really want to use this look at
456:57 - point somehow so
457:03 - let's first move it to
457:06 - location there so it was
457:09 - where was it
457:14 - somewhere here
457:17 - so
457:18 - let me put it actually somewhere
457:22 - lower
457:23 - so
457:24 - let's put
457:25 - 93 here
457:33 - i think this is
457:40 - let's see if we can use these values
457:42 - because i don't remember what
457:44 - here
457:50 - yes
457:51 - no
457:52 - it's not exactly
457:58 - a bit higher up let's say seventy
458:02 - five
458:06 - 71
458:09 - like this and
458:12 - now it's
458:13 - it's there but it's not affected by the
458:16 - physics because the drawings that are
458:18 - happening here
458:20 - are
458:23 - not
458:34 - i don't like
458:37 - uh
458:38 - not here
458:39 - we go with these back
458:42 - in the avatar and draw them on top of
458:44 - that otherwise this is just a squishing
458:48 - squishing effect there
458:50 - so let's go to avatar and
458:54 - put them back here
458:56 - and the it's okay that we did this in
458:58 - the body it's no problem it's very good
459:03 - but i want this to be at the higher
459:06 - level
459:08 - so here in the draw
459:10 - i'm going to say
459:12 - that
459:15 - okay
459:16 - and
459:18 - now
459:21 - this location should be even higher i
459:24 - think
459:25 - 65.
459:29 - okay it's almost good 64.
459:40 - yes 64. and this is the center point so
459:45 - now um
459:49 - i need to figure out how much this point
459:52 - should move left and right according to
459:54 - these
459:55 - translations and these scalings here
459:59 - so
460:00 - only the x location changes so
460:04 - i call this a string now i'm gonna call
460:07 - this thing string
460:11 - so let's say
460:13 - string x is going to be equal to
460:19 - i mean
460:21 - let's
460:22 - call it string location and the x is
460:25 - going to be equal to
460:27 - this value
460:29 - and
460:31 - y is going to be equal to this value
460:33 - but
460:35 - we need to
460:42 - we need to
460:51 - modify so first what we do is we
460:55 - translate
460:57 - this by that so that just means
461:00 - plus that value
461:03 - and then when we are at the location
461:09 - i'm going to scale with this
461:15 - let's say
461:16 - x translate
461:21 - this
461:32 - and this
461:39 - like so
461:40 - and uh here plus
461:44 - x translate
461:49 - times this x scale
461:51 - it should be fine and i'm not repeating
461:54 - the variables there anymore i really
461:56 - hope i didn't mess something up
462:04 - okay
462:08 - it's doing it
462:10 - it's it's doing it i don't want this to
462:13 - be anything like an in your face effect
462:15 - but
462:17 - i want it to do
462:19 - what it's it's doing there
462:21 - so
462:23 - great i
462:24 - i like it
462:26 - let's do the same thing on the right
462:28 - side
462:32 - i just want to get the things working
462:34 - now i i will style these better at the
462:36 - end somehow
462:38 - and the code is now not great yet but
462:41 - it will become better i think
462:43 - so i need more particles here
463:00 - this is actually the main location of
463:02 - the
463:08 - yeah
463:09 - this is the main location of the string
463:11 - so let's call this
463:13 - this
463:20 - string location
463:34 - initial string location
463:37 - and
463:38 - this one is going to be
463:44 - that
464:04 - okay
464:05 - and um
464:09 - this
464:13 - this
464:16 - with this in front
464:19 - otherwise like now if i re
464:22 - well i broke it but uh
464:24 - when you initialized everything was kind
464:26 - of
464:27 - spinning in place because the initial
464:29 - location was not that
464:31 - that we were forcing it to be but then
464:35 - um
464:39 - in the first second it teleports
464:41 - somewhere else and it forces the spin to
464:43 - happen
465:27 - in it
465:33 - okay
465:36 - yeah great and
465:39 - we have another one on the right
465:52 - let's put this one on the right
465:57 - oh
465:59 - yeah because it's not symmetric we i
466:01 - drew this kind of free form shape
466:05 - okay
466:07 - then let's have two of them
466:19 - or
466:20 - right and left
466:24 - i think i'm going to make a string
466:26 - object eventually
466:28 - but
466:31 - let's just see how how
466:33 - much software engineering do i need to
466:36 - use
466:46 - let's do it
466:49 - left string
466:57 - initial location
467:02 - this one
467:04 - particles
467:11 - an array
467:21 - segments
467:24 - an array
467:28 - segments should be with these particles
467:30 - and i'm not sure how to access these
467:33 - from here
467:38 - i don't think this code works
467:46 - i
467:47 - may need to extract this as a formal
467:50 - class
467:56 - but no problem
467:58 - let's see
467:59 - so left string let's put the right
468:02 - string and we'll adjust it later
468:07 - okay
468:08 - so this is now
468:12 - right string
468:13 - and here
468:30 - left string particles
468:34 - left string segments
468:42 - left string particles of zero
468:54 - is equal to and i'm just going to do the
468:56 - calculation here directly
468:59 - so
469:07 - it's going to be this dot left string
469:12 - initial location
469:19 - x
469:23 - plus the translate
469:30 - times the scale and the second one is
469:32 - going to be just the value of y
469:35 - i don't think this will work
469:38 - but
469:40 - needs to be done anyway
469:54 - yeah it doesn't work so let me extract
469:57 - this as uh
469:58 - as another class
470:06 - string and thread are called both words
470:09 - that mean something else
470:14 - hanging string
470:18 - okay
470:20 - and
470:21 - in the constructor
470:24 - we give it an initial location
470:28 - so this init lock is in it
470:34 - and
470:35 - now particles and segments can be here
470:38 - like i can write it like this like that
470:42 - this particles is equal to a new
470:44 - particle with this initial location
470:47 - these segments
470:49 - is going to be
470:51 - an array with just one segment
470:55 - and these
470:56 - particles
471:01 - okay and now i have this left string
471:04 - equals new hanging string
471:07 - of this initial location
471:10 - thing there
471:13 - and
471:15 - probably now it's going to work
471:18 - right string with the plus there
471:27 - no
471:32 - it doesn't work
471:35 - so a hanging string with these locations
471:41 - left string particles
471:44 - location is
471:47 - left string initial location plus
471:50 - blah blah
472:23 - some undefined particles
473:24 - so i'm passing it here
473:28 - the left string
473:32 - initial location
473:37 - oh dot y
473:39 - i hope it's this
473:41 - whew it's that
473:42 - great
473:46 - let's give it a draw method
473:50 - an update method and the draw method
473:55 - so
473:56 - in the update method i want to
473:58 - [Music]
474:00 - put the location of the first particle
474:03 - to something
474:07 - something like that so where is the
474:09 - attachment coming from so
474:18 - or
474:19 - no i just give it the translate and the
474:21 - scale it's a little bit confusing but
474:26 - yeah
474:27 - so this x translate and scale
474:31 - will be sent to that and it's going to
474:33 - use
474:34 - these particles of zero and this initial
474:37 - location like this
474:41 - it's not that confusing because that's
474:43 - how we are updating the the body there
474:46 - so
474:47 - it's okay
474:50 - so now i'm going to say here
474:53 - this left
474:54 - string update
474:57 - uh x translate x scale
475:01 - and
475:02 - for the right string
475:07 - i'm going to do
475:09 - the same
475:12 - thing
475:16 - maybe
475:29 - let's also
475:31 - update the physics after that
475:35 - like that
475:36 - and
475:41 - draw the things
475:43 - i have draw for that now
475:45 - so i'm going to say
475:48 - draw the particles
475:52 - and draw the segments
475:56 - i also need to update the segments
476:00 - yeah so
476:02 - a little bit confusing what i did maybe
476:04 - but
476:13 - so now i'm updating those that one and
476:17 - i'm gonna draw it this one
476:22 - on the context and same for the one on
476:25 - the right and hopefully this works now
476:29 - okay
476:36 - i think it's okay but the one on the
476:38 - right needs to be lower so
476:49 - even more
476:55 - even more
477:03 - okay and the bottom part can be even off
477:07 - the screen so
477:11 - something like that
477:12 - i
477:13 - i will style this a bit later but look
477:16 - at it now so one is moving one way the
477:18 - other one is moving a little bit
477:20 - different
477:21 - i really like this this
477:23 - effect now
477:25 - so
477:26 - about the styling we will look at later
477:29 - now what i'm gonna do is
477:39 - the hair
477:41 - so
477:45 - i'm gonna try to make
477:46 - strings like that
477:49 - here in the front so hanging somehow in
477:53 - the front and these are
477:55 - going to move and then maybe i'm going
477:57 - to do the same in the back i have longer
477:59 - hair now
478:01 - so maybe i don't worry about this top
478:03 - part just yet but here i want some hair
478:06 - to appear like this
478:08 - so let's
478:09 - let's try
478:11 - see how our
478:12 - code is at the moment
478:17 - like
478:23 - yeah basically i i want to know
478:26 - if this code is good enough
478:34 - i think it is at least for now so the
478:37 - string left and string right
478:40 - actually
478:41 - let's call this pendulum it's it's much
478:43 - better
478:45 - it's a much better name so pendulum
478:49 - uh
478:55 - like this
478:58 - yeah and let's extract it in pendulum
479:03 - js
479:04 - pendulum js
479:08 - like this
479:11 - and
479:12 - here
479:14 - in index i'm going to include
479:19 - pendulum js
479:22 - so everything still works now and the
479:24 - hair is going to be pendulum as well so
479:27 - made out of different pendulums
479:30 - maybe we make double pendulums chaotic
479:32 - pendulums let's see if enough time
479:36 - but
479:37 - i think that
479:39 - code is
479:41 - decent at the moment
479:44 - a little bit too many things here but i
479:46 - think
479:49 - fifth of them will go away because they
479:51 - are not
479:52 - needed for
479:53 - actual
479:54 - things
479:55 - all right so
479:59 - i want now to
480:03 - get back this code where i click
480:06 - and i get the chord and it's without the
480:08 - look at
480:10 - translation
480:12 - and um
480:14 - figure out some locations here in the
480:17 - beginning to put the hair
480:20 - so something like
480:22 - this location
480:26 - this this this this something like that
480:31 - so i just clicked there to something
480:33 - that looks good but i prefer to have it
480:35 - not exact so that it doesn't look too
480:37 - symmetric
480:39 - and
480:40 - these locations are going to be things
480:43 - where
480:44 - i'm going to
480:46 - add more pendulums so let's say
480:50 - this
480:51 - front
480:52 - here
480:53 - is going to be an array of pendulums so
480:56 - new pendulum
481:00 - of
481:04 - x and y
481:06 - something
481:18 - and these will need to be
481:26 - figured out somehow depending on the
481:28 - sliders
481:30 - but anyway
481:32 - one step at a time
481:34 - so now this
481:36 - value from here
481:39 - from here
481:42 - from
481:42 - here it looks the same
481:49 - starts to be positive
481:58 - thing one
481:59 - all right
482:06 - so
482:07 - uh
482:09 - yeah many pendulums in the front here so
482:12 - what do we do with them
482:13 - we update them so for
482:18 - this pendulums
482:21 - for each
482:24 - pendulum
482:26 - i'm going to say
482:29 - p dot update
482:31 - according to something i'm gonna put x
482:35 - translate
482:44 - and one at the beginning just to test
482:47 - some basic things but uh
482:49 - it will be different i'm sure
482:52 - so that's what happens first and then
482:55 - p dot draw on the context so each of the
482:57 - hair pendulums
483:00 - uh front hair not pendulums so
483:03 - for each front hair pendulum
483:06 - do this thing
483:10 - okay
483:13 - it's horrible
483:15 - so something happens but
483:18 - not what it should be
483:21 - i think
483:23 - i need to put
483:25 - something relative to
483:27 - a translation by a at least
483:32 - so
483:37 - something like this but the special
483:39 - translation for the head so these x and
483:44 - these are shirts
483:50 - shirt x translate and shirt
483:55 - x scale
484:00 - or body
484:08 - okay
484:20 - okay
484:21 - but i will need
484:27 - head x translate
484:31 - actually head translate
484:34 - and it's gonna need to have a
484:37 - x and a y
484:39 - so
484:47 - and i don't like something i have here
484:49 - this update with the scale doesn't make
484:52 - much sense
484:56 - not at all actually
485:00 - i will need to revise something here
485:04 - let's
485:05 - have another function
485:07 - update 2
485:09 - where
485:12 - it's going to have just an
485:15 - attach location i wanted to do something
485:18 - like this before so
485:20 - i just copy it inside and i say that
485:22 - this location is going to be
485:25 - this whatever
485:27 - attach location that i'm giving
485:30 - so
485:31 - if time i have to refactor this
485:36 - so hit translate
485:38 - x is going to be
485:40 - let's just put it um
486:00 - i can't put it at a
486:10 - i would like to keep these values
486:12 - somewhere
486:13 - maybe each particle is going to
486:16 - have the initial location kept
486:22 - let's see if that helps
486:24 - so
486:25 - then these numbers are as the initial
486:28 - location so this is going to be now
486:31 - this dot look at x
486:52 - so update 2
486:55 - yeah for each
486:57 - head it's different so
487:02 - update 2 with x to
487:06 - this look at x plus p
487:10 - init location
487:13 - x
487:15 - and
487:17 - this is something else not needed
487:22 - and
487:24 - it's not needed and the same thing
487:26 - happens for
487:29 - y i think
487:37 - nope
487:56 - oh
488:07 - actually
488:09 - it's not a bad idea
488:12 - [Music]
488:19 - hey
488:20 - we have it already
488:22 - i didn't need to do that so
488:24 - i don't need this initial location there
488:27 - and it's called init lock
488:32 - i don't like it let me refactor this
488:35 - like that
490:07 - okay so max and y goes there by mistake
490:17 - so the pendulum is defined with an x and
490:20 - y
490:20 - okay
490:22 - and then here
490:27 - p update
490:29 - oh this should be an array yes because
490:31 - we are in the vector place i couldn't
490:34 - use vectors
490:35 - i think for the
490:38 - pixels because
490:40 - they do have x y
490:44 - okay
490:46 - so
490:47 - let me disable now this
490:53 - pendulum
491:01 - this particle logging there it's filling
491:03 - up the console and i don't want that
491:06 - okay
491:08 - okay
491:11 - it's something it's uh something cool i
491:14 - like it length needs to be a parameter
491:17 - and these
491:22 - points here
491:24 - maybe they can be a little lower down
491:28 - so
491:32 - in the avatar where i'm defining the
491:35 - first and the last
491:37 - point i'm gonna put here minus
491:42 - 41.
491:48 - so now this is lower and the last one
491:51 - should be also
491:53 - somewhat lower
491:55 - maybe 38
492:00 - good and these lengths i think they can
492:06 - vary
492:09 - so in the pendulum the length is set to
492:12 - this
492:22 - i put the default of that but here
492:26 - when defining the avatar it's going to
492:28 - be
492:40 - no not that one
492:42 - this one
492:54 - second one i think can be 35
492:57 - i'm giving myself a haircut
493:01 - let's put this one also a bit lower
493:05 - this is
493:06 - fine
493:09 - okay
493:15 - this point is too much to the right i
493:17 - don't like it there so let me put here
493:23 - 34.
493:29 - good
493:30 - okay it's it's something interesting
493:33 - definitely interesting i i like it
493:37 - um
493:38 - i would like it to bounce somehow
493:42 - somehow
493:46 - uh
493:46 - let's try to make these as
493:50 - double pendulums
494:00 - it's not as hard as it sounds
494:03 - i think
494:04 - double pendulum
494:08 - okay
494:10 - length divided by two
494:13 - and
494:14 - one more particle
494:16 - that is going to be
494:20 - with the length so it's going to have a
494:22 - midpoint here
494:23 - and the
494:25 - segments
494:26 - will be two segments
494:28 - and
494:30 - the second one is going to be like that
494:37 - like that
494:40 - and uh that's it i think
494:45 - i just need to go here and replace with
494:47 - double pendulum
494:54 - and i get an error a double pendulum is
494:56 - not defined because i'm not including it
494:58 - anywhere
495:11 - okay
495:25 - it has a different shape
495:28 - now a little bit different behavior than
495:30 - before
495:31 - but somehow i
495:35 - i think the gravity is maybe too much
495:54 - maybe even too much
496:01 - yes
496:03 - tall and
496:04 - small but that's what i want
496:10 - more more of this kind of movement it's
496:13 - it's great
496:14 - and because the pendulums have different
496:17 - lengths then each hair is going to be
496:20 - behaving differently
496:22 - okay great i like it
496:31 - this is awesome
496:34 - i i like it a lot
496:37 - so
496:38 - what i'm gonna do next is uh do the back
496:41 - hair as well
496:45 - so the back hair
496:50 - similar to this i think it's not too
496:52 - complicated
497:04 - and
497:05 - [Music]
497:08 - then i'm gonna try to make the mouth
497:10 - move
497:12 - so
497:13 - i will keep the hair ugly like this for
497:15 - now and
497:19 - think about it later how to get it
497:21 - better
497:23 - but
497:27 - yeah so styling the hair will be the
497:29 - fine tuning part
497:31 - so now let me add similar things for the
497:34 - back here so front hair is there
497:41 - back here
497:45 - and
497:49 - let's have it very similar to this
497:54 - the same in the beginning
497:57 - but this needs to be longer maybe
497:59 - [Music]
498:02 - just replace these threes with the six
498:06 - and now the back here
498:10 - goes through the same things
498:14 - like this
498:20 - i refresh
498:21 - and it's there
498:23 - but
498:25 - it should be
498:27 - in the back
498:29 - and it should be lower
498:31 - so let's put here
498:35 - let's replace this four with the two
498:40 - this three with the one
498:44 - i think that's fine and this six with
498:46 - the seven
498:54 - okay and the problem now
498:57 - there are
498:58 - two problems actually
499:06 - it should be opposite of what a is doing
499:10 - so when you move the head up this back
499:13 - hair has to go down and when you do this
499:16 - this back hair has to go up
499:18 - so this back here
499:29 - i want a reflection here i want to
499:33 - not the reflection but a
499:36 - symmetric a point that is symmetric
499:41 - somehow
499:45 - this look at
499:49 - point that we define here in the
499:51 - beginning
499:53 - i wanted to have
500:06 - initial values so
500:08 - init x
500:10 - 0
500:11 - init y
500:13 - minus 0.13
500:15 - this is not the
500:17 - best way
500:18 - the clearest way to do it but
500:23 - i want to
500:24 - get this done
500:26 - so
500:28 - i keep the same value so that they never
500:30 - change
500:32 - and then in the avatar here when we are
500:35 - moving this so what i want to have here
500:38 - is a
500:40 - symmetric point on the other side of
500:42 - this one so i'm going to say
500:45 - i don't have the vector operations for x
500:47 - and y but
501:23 - so init x and init y are going to just
501:26 - keep them static right
501:32 - yes so those
501:34 - are the initial locations of that a
501:36 - point so now what i want is
501:40 - this point here
501:42 - is the
501:43 - initial one so i want
501:46 - this pendulum to move
501:48 - down here
501:50 - symmetric with respect to this pendulum
501:53 - so i have this location and i have this
501:55 - location
501:57 - if i subtract
501:59 - from x
502:00 - the initial x
502:06 - i need this vector right here
502:41 - i think it's like this
502:47 - i would really like to use the same
502:49 - operations there that's the vectors but
502:53 - i think i i could
502:55 - i just
502:57 - want to get things done now
503:00 - maybe have time to refactor this
503:09 - yeah yeah this is good this is very good
503:12 - it's just confusing that the
503:14 - back hair is in front so let me move it
503:17 - in the back
503:18 - somehow uh
503:22 - when we are drawing the head i want
503:26 - actually behind the body
503:28 - or i don't know
503:31 - yeah behind the body also so it's going
503:34 - to be
503:36 - here
503:49 - great
503:50 - they need to be
503:53 - longer
504:03 - and this one is too high up i can see it
504:06 - there i don't want that
504:08 - so
504:09 - the one on the right needs to be
504:12 - a little bit more to the left
504:15 - and let's put here eight
504:46 - okay
504:52 - let me make everything a bit um
504:59 - transparent
505:04 - doesn't work
505:09 - i don't draw the head
505:46 - i think
505:47 - um
506:23 - it's fine
506:32 - it's not fine i don't like it i think
506:34 - the front part it's interesting that
506:37 - it's like that but the back part those
506:40 - pendulums are so long
506:44 - that
506:46 - and the gravity is so weak that it
506:48 - affects them in some
506:50 - not so great way
506:52 - so what i want to do
507:00 - is put here a value of
507:04 - 3
507:05 - and in this update 2
507:12 - here
507:16 - gravity multiplier
507:24 - yes
507:25 - so
507:28 - i will pass this to the physics the idea
507:30 - is that
507:32 - i want them to be more solid than the
507:35 - the ones in front i mean not so much
507:37 - bouncing around
507:39 - and i just use this trick to get it to
507:42 - work
507:43 - of course it's not a realistic
507:45 - simulation but
507:47 - this is more about
507:49 - animation and how things look like and
507:51 - how they should
507:52 - look like on
507:54 - when drawing something so
507:56 - i don't care about reality
507:59 - really
508:00 - and
508:04 - i'm sending now this gravity multiplier
508:08 - to
508:14 - the double pendulum
508:18 - update physics items
508:32 - gravity multiplier
508:35 - gravity multiplier
508:38 - and the update is going to be
508:47 - usually it's nothing
508:49 - but otherwise it's going to be
508:52 - scaling
508:56 - g with this gravity multiplier so
509:02 - yeah by default it's one
509:04 - and here we are not using the gravity so
509:07 - we don't need to pass anything to to
509:10 - this
509:11 - i think let's save
509:20 - so the hair in the front is behaving in
509:22 - one way the hair in the back is behaving
509:25 - more rigidly if i'm going to put this
509:28 - avatar to have here maybe 30 then
509:32 - those hairs in the back are going to be
509:36 - very very
509:37 - rigid they are being pulled down so hard
509:40 - by that
509:41 - increased gravity
509:43 - that they are not allowed to move
509:46 - uh
509:47 - like the ones in front are jumping there
509:49 - but i'm not gonna exaggerate so much i'm
509:52 - just gonna put here maybe
509:54 - ten
510:00 - yeah i still want them to move somehow
510:02 - but
510:02 - not extreme like
510:04 - that okay
510:06 - great
510:17 - i think i'm gonna take a break and then
510:20 - what i'm gonna do next is gonna be
510:26 - the
510:27 - something with this blue and my face and
510:30 - i don't like really how that sounds
510:34 - i hope that i can use this tape somehow
510:38 - and make some blue markers on the face
510:41 - and i'm gonna move to do the
510:47 - mouth
510:48 - the mouth movements
510:52 - yes he agrees
510:56 - good
510:56 - okay so i'm gonna go have lunch and
511:01 - continue after that
511:07 - okay i'm back
511:09 - and uh we are going to do this mouth
511:12 - movement next
511:13 - so i'm gonna begin it by adding a couple
511:17 - of more sliders one that controls how
511:19 - the mouth opens like this
511:22 - like
511:22 - that and then another one
511:26 - upwards and
511:27 - remember only this part of the face
511:30 - moves actually so this top part of the
511:33 - mouth is always going to be at the same
511:35 - same place but
511:37 - this is
511:38 - move the down movement is what will
511:40 - happen
511:42 - so
511:43 - i'm going to
511:45 - just change the shape of the beard here
511:47 - and this bottom most point
511:50 - to somehow
511:52 - be controlled by the sliders and also
511:54 - this empty space right here
511:56 - i'm probably not going to draw an actual
511:58 - mouth i
512:00 - i hope
512:01 - i think this empty space might be enough
512:04 - with the movement of the
512:06 - chin to give the idea of talking
512:10 - otherwise
512:11 - it's more work
512:14 - so let's see i'm going to go to
512:16 - index.html
512:20 - and
512:23 - i'm going to
512:28 - put some more sliders here on the right
512:31 - so i'm going to say
512:42 - like this
512:46 - and
512:47 - i think same settings at the as before
512:50 - but
512:53 - update
512:54 - mouth
513:02 - and update mouth these will be some new
513:04 - functions there
513:06 - so if i refresh
513:10 - this is fine
513:11 - and
513:12 - let's add at the top there something
513:15 - like
513:17 - look at
513:22 - yeah
513:24 - and um
513:48 - i think this is better
514:01 - i'm gonna use capital values and i don't
514:04 - need um i mean capital letters and i'm
514:06 - not gonna
514:07 - need the column anymore i think it's
514:09 - quite obvious what these are
514:16 - i think that's good
514:21 - so um
514:22 - maybe here it's
514:25 - it's clear if i put
514:29 - column on the
514:31 - right of these words
514:35 - okay so these need to do something and
514:37 - update mouth is a function that doesn't
514:40 - exist so let's go down to
514:44 - where this one is and um
515:07 - um
515:16 - i'm gonna have to pass to
515:21 - yeah i don't know why i complicated
515:23 - things
515:25 - so much with this global variable i
515:27 - think i'm just going to access the
515:31 - avatar
515:34 - and tell the avatar what is the value
515:38 - and that's it
515:42 - so
515:43 - um
516:14 - like that
516:18 - so
516:19 - inside of the avatar i'm going to have a
516:24 - mouth
516:39 - um attribute with
516:43 - 0 x and y
516:46 - and
516:50 - actually this should be passed down to
516:52 - the beard as well because
516:58 - the beard is what is going to change
517:00 - shape according to these values so
517:03 - inside of the beard object i'm going to
517:06 - say here
517:11 - mouth info
517:14 - mouth info so some information about the
517:17 - mouth according to these sliders here
517:23 - okay
517:25 - so now when we do this draw half beard
517:29 - we need to remember
517:31 - what this
517:32 - what these shapes are and it's not very
517:35 - complicated
517:36 - we were moving
517:39 - here
517:43 - and then
517:45 - doing a curve here
517:48 - a curve here
517:51 - and then align to here nothing changes
517:54 - so much
517:55 - but now this point will change
518:01 - so that point
518:03 - will change according to the mouth x
518:09 - and then we have
518:11 - a line to here here
518:15 - here
518:16 - all of these three
518:20 - will change uh with y
518:25 - so
518:38 - i'm just gonna guess some scalers for
518:40 - how much this info is going to affect
518:56 - and let's see what happens
519:04 - okay
519:06 - this month
519:18 - so this is just going to pass a
519:19 - reference and every time we change this
519:21 - object it's going to
519:24 - should be updated in the beard as well
519:41 - too much too much way too much
519:44 - so
519:45 - here in the beard
519:50 - let's put um
519:51 - dot one
519:58 - maybe it's okay
520:00 - i think it's okay
520:03 - and uh vertically
520:14 - this also needs to be smaller
520:32 - yeah but i think that actually the this
520:36 - last
520:37 - two points here could be a little bit
520:40 - lower
520:41 - this 46
521:01 - i think that's fine
521:03 - so the mouth is like that and
521:06 - actually
521:07 - the bottom most point also needs the
521:10 - same thing here
521:12 - so for the y value
521:14 - um
521:18 - yeah and let's make some
521:21 - constants here so
521:23 - mouth stretch
521:25 - x
521:27 - is equal to this amount
521:36 - and mouth stretch you
521:49 - so that it's clear
521:51 - what these things that are also
521:54 - repeating very much
521:56 - mean
522:10 - okay
522:11 - something is bad here
522:23 - because when the mouth closes like that
522:25 - it um
522:32 - i can see that
522:33 - bottom point which used to be
522:37 - c i think
522:40 - so let me try to fix that i'm gonna go
522:43 - to
522:45 - the
522:53 - avatar
522:55 - and in draw head
522:57 - let's try to put this
523:02 - yeah very complicated function there for
523:04 - the translations and
523:26 - almost good
523:38 - i see that line a little bit and i don't
523:41 - like it
523:42 - but um
523:47 - i don't think i needed a stroke
523:50 - and then i just see the neck in the
523:52 - background
524:00 - yeah
524:01 - let's see so
524:07 - and i don't actually need this code
524:09 - anymore this was just for reference in
524:11 - the beginning
524:12 - they were those uh
524:15 - cross shape thing for the
524:17 - head i think yeah
524:19 - and here
524:21 - what if i just don't do the stroke
524:33 - it's perfect
524:34 - i don't see any anything wrong with that
524:40 - great
524:56 - okay
524:58 - good so no need for this
525:04 - and and
525:09 - now that i have these controls for the
525:11 - mouth i'm going to start to do some
525:14 - image processing here so that the mouth
525:17 - will
525:19 - the mouth information comes from
525:22 - a set of points around the face and
525:25 - actually the head should also come
525:28 - from my
525:29 - movement somehow so i'm thinking
525:32 - one thing needs to be static somewhere
525:35 - like a blue point should be here
525:40 - um
525:41 - and then
525:44 - here on the side of the mouth
525:47 - i need something so
525:48 - two points here on the sides of the
525:50 - mouth
525:52 - they should be quite close to the mouth
525:55 - so this might be
525:57 - difficult to place and i have the beard
525:59 - here it's horrible
526:01 - and then
526:02 - one point
526:04 - also needed here so two points there
526:08 - one point here
526:10 - and one point here so maybe then we use
526:13 - the bottom point
526:15 - relative to this point to figure out
526:18 - side to side movement
526:21 - and uh
526:25 - no
526:43 - i don't like that this point is changing
526:45 - vertically and we might need this
526:47 - distance for something
526:50 - like we might need this distance for
526:53 - um
526:58 - figuring out how much the head should
527:00 - move and so on so then if you're talking
527:02 - like this it might
527:04 - move your head in unexpected ways later
527:09 - will it yes
527:11 - basically
527:12 - the up and down movement like this it's
527:14 - the same as if my my mouth opens
527:18 - so
527:22 - i need this point for mouth up and down
527:27 - i also need something static maybe on
527:29 - the nose
527:30 - so let's start with the point here and
527:33 - the point on the nose and see if we get
527:35 - just the head movement that we have now
527:38 - and then do that
527:40 - more sophisticated thing i have a bit of
527:43 - a worry that this camera here that i'm
527:45 - using in front is not that good or
527:50 - let's see
527:51 - can it recognize very small objects if
527:58 - um i will have to play with the
528:00 - thresholds and and things for the image
528:02 - processing but first i'm gonna take this
528:05 - tape and i'm going to
528:08 - cut some things from the tape
528:13 - so this is double-sided tape and i'm
528:17 - hoping it will hold
528:19 - on my face
528:24 - and i have this marker here that i'm
528:27 - going to
528:30 - color it with so that it's blue
528:34 - i really didn't have it was clo shops
528:37 - were closed yesterday and i couldn't buy
528:39 - anything better
528:41 - i just had this tape at home
528:52 - so
529:24 - of course another option would be to
529:26 - draw on my face
529:28 - i really hope i don't have to do that
529:30 - and
529:31 - i think that the way that collar behaves
529:34 - on
529:35 - skin is
529:37 - not so great
529:41 - okay something works
529:44 - so
529:48 - i made something like this by
529:51 - coloring some tape on one side and i'm
529:53 - gonna put
529:55 - here
529:57 - i guess
530:05 - and it's not fantastic because
530:08 - light reflects from
530:10 - it
530:15 - i think it's recognized but sometimes it
530:17 - may not be recognized
530:20 - uh
530:26 - yeah
530:28 - not much i can do about it i think maybe
530:30 - i can change the lights somehow in the
530:32 - room later
530:33 - but um
530:36 - let's do tell one on the nose
530:40 - and i'm gonna look funny for some time
530:44 - if this stays on my nose
531:27 - okay
531:36 - great
531:39 - i really hope i win this
531:49 - so
531:51 - okay some strange movements there
531:54 - happening
531:55 - uh
531:56 - let's move on to
532:01 - due to
532:02 - uh the
532:04 - image processing part so here in index
532:08 - we were doing something with the video
532:10 - and
532:11 - getting the marked locations but i'm not
532:13 - convinced that this function works that
532:16 - great
532:17 - i would like to see the locations on the
532:20 - canvas here highlighted maybe i'm going
532:22 - to turn these
532:24 - blue pixels into
532:28 - red pixels by
532:30 - changing the pixel color there
532:37 - so
532:39 - let's display them
532:41 - i'm going to
532:42 - loop
532:45 - and now these are vectors actually
532:52 - so i'm going to loop through them and
532:54 - say
532:57 - cam ctx begin path
533:02 - cam ctx
533:06 - fill style red
533:09 - cam ctx
533:14 - arc
533:15 - no
533:16 - just a small rectangle so
533:18 - wrecked
533:20 - at the location so i can
533:24 - spread
533:25 - the location of i
533:28 - and one pixel one pixel for the width
533:30 - and the height
533:32 - and
533:35 - fill
533:36 - so now i'm debugging
533:39 - the small canvas there
533:41 - to see
533:46 - these are red
533:53 - not always red
533:56 - [Music]
534:01 - so what's the problem here if i go to
534:03 - the get marked locations
534:07 - and if i bring this color here
534:10 - okay this is
534:13 - not always red
534:23 - not always
534:25 - i mean sometimes it doesn't look red
534:28 - at all
534:32 - i think
534:33 - some problem can be with the threshold
534:36 - that i'm using maybe i could make it a
534:38 - bit higher but i think that if it's too
534:40 - high then maybe my shirt will look blue
534:43 - or
534:49 - let's try to go here
534:52 - 200 but
534:53 - this really depends on the room
534:57 - no something here is now turning
535:02 - turning blue
535:07 - how about without the headset
535:13 - no some things there are just too much
535:16 - so maybe this
535:18 - needs to be something like that
535:28 - it might be good enough if there would
535:30 - not be these reflections there
535:35 - so
535:40 - i'm gonna do something about the lights
535:41 - in this
536:26 - um
536:44 - okay and now i can't see very well
536:46 - because i looked directly in the light
536:55 - ah
536:56 - going great
537:06 - still waiting
537:09 - ah good that time is ticking and i have
537:12 - maybe
537:15 - three hours left of available
537:20 - time
537:20 - i can use for this
537:22 - i'm not gonna use anymore
537:25 - okay getting a little better
537:30 - so
537:35 - i think some
537:37 - it's better
537:38 - this
537:39 - detection seems to be
537:41 - seems to be better
537:44 - and if i'm hiding these blue things
537:50 - then the sliders work again
537:53 - so
537:54 - of course um
537:56 - i have to code now these things a little
537:58 - bit differently so
538:00 - i want to know where this is and where
538:02 - this is
538:10 - all right
538:21 - so
538:21 - [Music]
538:23 - how do i do that
538:27 - well
538:30 - i'm really concerned first about this
538:32 - bottom point so this is my most
538:34 - important point there
538:36 - and
538:38 - i want to detect it first
538:40 - so let's figure out how to get this
538:43 - bottom point first
539:01 - and
539:06 - let's just
539:07 - do here something like process
539:14 - image and move the code there because it
539:18 - starts to be horrible where it is at the
539:20 - moment we may need to add some more
539:22 - files here
539:25 - uh actually i'm gonna
539:27 - move these
539:28 - to
539:32 - camera
539:34 - file since
539:36 - that's where we initialize the camera
539:38 - and it's close enough to
539:41 - image processing
539:43 - at the moment
539:46 - so
539:48 - function
539:49 - process image
539:52 - and the video and the camera context are
539:54 - global
539:56 - variables i think everything here should
539:59 - still work now
540:02 - yeah
540:03 - so here this is just for debugging
540:22 - so now the
540:24 - markers here on the right are
540:27 - not changing color
540:29 - but if i put debug to true i will also
540:32 - see point a there
540:34 - but uh it's fine
540:37 - and
540:38 - this does change like that so
540:40 - inside of the camera file
540:48 - i'm going to
540:55 - also here say
541:02 - find
541:06 - um get constellation so these are two
541:11 - stars two points and there will be two
541:14 - more here and probably one more here so
541:16 - i'm gonna have a function that gets me
541:18 - this constellation
541:21 - from these
541:22 - marked locations
541:24 - so i
541:25 - of course now there are many many
541:27 - locations here that are making this red
541:29 - point and
541:30 - this one so they will need to be
541:32 - averaged or something
541:35 - but um
541:37 - let's get them like this and say here
541:40 - const constellations
541:44 - constellation
541:48 - or just points
541:50 - is
541:51 - get
541:52 - those
541:53 - things i don't know why i want to call
541:55 - it like that technical term is
541:57 - clustering but uh i'm not going to use
541:59 - any clustering algorithm for this
542:02 - i want it to be more reliable and
542:04 - they tend to be either
542:06 - slow or too complicated or
542:10 - random
542:12 - in some cases
542:13 - so i want to detect first this point
542:17 - with this get constellation function
542:26 - and
542:28 - then i will want to draw them
542:30 - so
542:40 - we'll get to that but inside of this get
542:43 - constellation function
542:47 - i want to say
543:00 - get the point with the minimum
543:03 - y value so i think the point with the
543:05 - minimum y value must be inside of this
543:08 - one
543:09 - here
543:11 - in this region
543:12 - many points here
543:14 - so let's say
543:16 - um
543:23 - meanwhile point is
543:27 - find the point
543:30 - so that
543:34 - this location or this point that we are
543:38 - inspecting
543:42 - this is a vector now so the
543:44 - second component is the y
543:47 - is equal to
543:54 - math
543:55 - the
543:56 - maximum actually because y grows
543:59 - downwards on the computer so maximum
544:02 - um
544:06 - of the y values
544:09 - of the locations so i'm going to say
544:11 - here
544:13 - locations
544:14 - map
544:27 - like this so this is going to give me an
544:29 - array this map here is going to give me
544:32 - an array of all the y values then the
544:35 - max is going to be the maximum of those
544:38 - y values and here we're going to find
544:40 - the point with the maximum of the y
544:42 - values
544:43 - so let's leave this here
544:46 - and
544:47 - now
544:54 - let's return it for now
544:57 - just one point
545:00 - okay
545:02 - and
545:04 - this is just one point now
545:06 - and um
545:08 - we were using something to draw this a
545:11 - point previously so um
545:20 - i don't know where that is it's in the
545:22 - avatar
545:25 - draw head
545:29 - this one the draw point
545:31 - so i want this to happen now in the
545:38 - on the camera screen there
545:47 - but it may not be very visible
545:50 - because here there's some scaling
545:52 - happening and here there's not
545:54 - let's just see what happens so
545:58 - drop point
546:01 - it's some utility function
546:05 - oh my the canvas is not even specified
546:12 - so ctx and let me change this inside of
546:16 - the avatar give it the ctx here and
546:19 - we're not really using it anywhere so
546:21 - that's good
546:22 - now here
546:24 - um
546:27 - cam
546:28 - ctx
546:31 - and uh
546:32 - let's call this point now
546:35 - m
546:40 - point
546:41 - so the one we are getting the bottom
546:43 - point from here
547:03 - this should be with x and y
547:37 - it's undefined
548:10 - really how is that possible
548:15 - because there must be some points there
548:23 - to have some mistake here let me just
548:26 - first
548:35 - log this part
548:53 - okay so these look like some y values
548:56 - indeed
549:06 - oh
549:07 - this is an array here
549:10 - it's an array and
549:12 - max doesn't work with array it works
549:14 - with
549:15 - many parameter values so i have to
549:21 - spread that right there
549:31 - okay
549:34 - no error at least
549:37 - but
549:44 - oh i
549:45 - should probably include this doctype
549:48 - here
549:52 - so this thing doesn't appear anymore
549:56 - okay
549:57 - i think the point that we are displaying
549:59 - is
550:01 - too small
550:05 - so when we draw the point here i'm gonna
550:07 - have to give it some big radius
550:10 - bigger radius
550:16 - something is there now but uh what
550:19 - happened to everything else
550:26 - what happened
550:46 - did that in this dog type do something
550:48 - to my css
550:50 - what
550:51 - really
550:59 - how did that happen
551:23 - okay
551:25 - so
551:26 - now the point is actually here this
551:29 - small m there
551:32 - so um
551:36 - it's not exactly in the middle of all
551:39 - these red points here at the bottom
551:42 - but maybe we'll get to that
551:44 - first i wanted to have this
551:48 - m point there
551:51 - and uh i need to draw this a little bit
551:54 - bigger it's just too small so um
551:58 - going back to the camera
552:09 - and now i think it's too big because if
552:11 - i'm gonna have many small ones there
552:17 - yeah it's good a little bit fidgeting
552:20 - like that but it's it's fine
552:22 - so
552:23 - this is just the one point the minimum y
552:27 - point
552:28 - now i'm gonna
552:29 - take the nose point
552:32 - so
552:33 - um
552:34 - to get the point on the nose i'm
552:36 - basically gonna get
552:38 - the farthest away point from m
552:42 - and i'm doing that
552:46 - i i think i can also get the one with
552:49 - the smallest
552:51 - y
552:54 - but i'm gonna use this furthest away
552:56 - from trick later so let's do that
553:00 - i will say
553:01 - let i
553:02 - like that
553:04 - i teach it better in this way
553:08 - so going through all the locations i'm
553:10 - going to calculate
553:15 - the distance between
553:20 - locations of i
553:22 - and
553:23 - the min y
553:25 - point which is actually the max y point
553:28 - because
553:29 - y grows downwards
553:31 - so
553:33 - yeah max
553:34 - so
553:35 - the distance from
553:37 - each point to that one and i'm going to
553:39 - take the maximum so
553:41 - i'm going to say
553:47 - nose
553:48 - point
553:49 - is going to be
553:53 - just some location
553:55 - like that
553:57 - and
554:06 - and that and here
554:09 - if distance is more than max distance
554:14 - then max distance is going to be
554:17 - distance and
554:19 - nose point will be updated to be
554:22 - the location of i something like this so
554:25 - just getting the maximum
554:27 - the furthest away point from
554:31 - this end point
554:33 - and now i have two points that i want to
554:37 - return so i'm going to call this chest
554:41 - and max y point
554:44 - and
554:46 - nose
554:47 - [Music]
554:49 - nose point
554:52 - i think i should call this one
554:55 - chest
554:57 - point
555:01 - it's clear that it's the max y from this
555:04 - line of code there
555:06 - so
555:07 - now i have two things that i'm returning
555:10 - and i have here points
555:12 - and um
555:14 - or i could have
555:17 - destructuring here like nose and chest
555:21 - and now i can say draw the
555:24 - nose point
555:29 - let's call it
555:31 - n actually for nose
555:34 - and the other one which is m here let's
555:36 - call it
555:37 - c for chest
555:47 - okay
555:53 - okay so i have the nose and i have the
555:56 - chest
555:57 - and it seems to be quite quite reliable
556:00 - sometimes problems because of this
556:03 - shininess
556:05 - i couldn't do everything i wanted with
556:07 - the lights because
556:09 - the window is also there and it's too
556:12 - complicated
556:13 - but
556:15 - this is something that kind of works now
556:18 - at least
556:20 - a little bit
556:21 - and it can be much better in better room
556:24 - conditions or with different types of
556:26 - markers here that don't
556:29 - shine because
556:31 - there are materials that don't shine out
556:34 - there and
556:35 - i just happen to have a crappy one
556:50 - does this mask
556:52 - work as blue if i change the color
556:56 - now
556:57 - i think this is okay for this demo
557:02 - okay so chest point nosepoint
557:05 - what do we do with them
557:08 - well
557:10 - um
557:17 - i need to know some
557:20 - i need to calibrate the system
557:22 - so i'm going to add here a button that
557:26 - says
557:26 - calibrate
557:31 - and
557:33 - html
557:49 - like that
557:51 - and
557:53 - when we press on this
557:58 - calibrate light
558:01 - i wonder if this is how you write
558:03 - calibrate
558:05 - anyway i don't use internet so
558:10 - i can't check
558:12 - so calibrate
558:14 - um
558:16 - it should go also in the camera for now
558:18 - at least
558:28 - so what happens now here is that
558:32 - i want to
558:36 - i really want to keep these as a global
558:38 - variable so
558:43 - let's call these
559:10 - something like that
559:19 - and now that and here i can still
559:21 - destructure so
559:39 - okay
559:41 - and when i calibrate i'm going to
559:44 - let's just log this
559:48 - like that
559:55 - okay so i have the nose and the chest
559:59 - coordinates
560:00 - when calibrated
560:02 - so what i'm going to do is
560:05 - when i press calibrate i'm going to make
560:07 - a copy
560:08 - of these
560:11 - points
560:17 - yeah i will say here
560:24 - the reference location so
560:27 - the reference
560:28 - um
560:29 - is going to be the one when you press
560:31 - the calibrate and then we're going to
560:33 - calculate relative to those somehow
560:36 - so
560:37 - constellation points
560:40 - reference is equal to
560:52 - nose is gonna be
560:58 - like that
561:00 - and
561:01 - the chest
561:06 - is gonna be like that so
561:09 - now i can log it after that
561:13 - and if i'm gonna press calibrate i'm
561:15 - gonna get
561:17 - the nose and the reference
561:20 - and if i move now
561:22 - a little bit and i check constellation
561:28 - points like this i should get
561:36 - i'm losing them
561:44 - yeah i'm losing them i'm replacing them
561:46 - here
561:47 - so let's add the code as before
561:54 - like this
561:56 - and now
562:01 - i just write here constellation points
562:04 - nose is equal to nose
562:08 - i think this is going to work
562:20 - yeah now they're equal but if i'm moving
562:22 - and i'm
562:26 - debugging
562:30 - they are not equal anymore
562:32 - so relative to this
562:34 - uh change so depending on this change
562:38 - somehow
562:42 - because i need to know
562:44 - how far
562:45 - is n from c to be able to do the head
562:50 - movement like this properly
562:52 - so now
562:57 - i don't need this log anymore i believe
562:59 - they are working
563:01 - based on this calibration
563:13 - here
563:17 - i want to
563:21 - based on nose and chest now
563:25 - and the reference nose and
563:28 - and chest i'm going to figure out
563:31 - something here so let's get the distance
563:34 - between nose and chest so
563:36 - distance between nose and chest
563:42 - let's just call this d1
563:45 - and
563:46 - d2 is going to be the distance between
563:51 - the ref
563:52 - the constellation points
563:55 - ref nose
563:57 - and constellation points
564:00 - ref chest
564:02 - so these are the
564:04 - other values when we press the calibrate
564:06 - button
564:08 - so two distances here so now um
564:12 - depending on how much these distances
564:15 - change if if d2 is exactly equal to d1
564:19 - then
564:20 - the head is gonna stand stand still but
564:23 - if d1 is going to be bigger it means the
564:27 - head should go up
564:32 - so
564:34 - d1 minus d2 and then we figure out some
564:38 - kind of
564:40 - scalar for that
564:42 - so i'm going to say here
564:45 - d1 minus d2
565:00 - the difference on y so this is d1 minus
565:03 - d2
565:06 - and that's going to be the value for
565:08 - this
565:09 - and i'm not gonna
565:11 - change x anymore i'm just debugging now
565:13 - so the head can't move
565:27 - all right we need to have a reference
565:46 - so without pressing calibrate nothing
565:48 - happens
565:49 - and now if i calibrate
565:59 - very interesting
566:01 - [Music]
566:04 - very interesting
566:10 - yep
566:12 - way too much
566:14 - we divide by the
566:16 - height
566:26 - and i think i messed something up here
566:28 - it should be d1 d2 minus d1
566:36 - calibrate first
566:40 - okay but i want more stronger than that
566:43 - so let's scale this by something let's
566:46 - say
566:47 - five times what it's doing at the moment
566:52 - i press calibrate
566:57 - okay
566:58 - and now horizontally nothing happens but
567:02 - it's easy i think let's just call this y
567:05 - one and y two
567:08 - uh
567:09 - they mean some distances um
567:12 - to the
567:14 - nose
567:15 - or no they were the distances yes sorry
567:20 - but horizontally we need something
567:22 - similar so
567:24 - we need we don't use actually the
567:26 - reference anymore
567:28 - i just want to know if n is on the left
567:31 - or on the right of this c right here
567:35 - so
567:43 - yeah
567:44 - so i'm going to say
567:47 - diff
567:48 - x
567:52 - is
567:56 - nose
567:57 - x minus chest x
568:02 - and also i'm going to divide this by
568:15 - i want to divide by this d1 actually
568:20 - let's see
568:22 - i
568:23 - i'm starting to get tired and i can't
568:25 - really explain anymore why i think some
568:28 - of these some of these things work
568:31 - but
568:35 - basically the distance
568:37 - this distance i want to use somehow for
568:40 - normalizing
568:42 - and
568:43 - this should be here and this code should
568:46 - work now
568:48 - i mean should be active
568:54 - okay very interesting
568:58 - very interesting
569:36 - something is strange
569:39 - oh these
569:40 - don't have x and y they have
569:43 - zero and one
569:45 - i
569:46 - i hope
569:48 - uh
569:49 - and i'm interested in x so zero for both
569:52 - of them
570:02 - nice i like it
570:07 - maybe multiply this by two
570:13 - okay
570:14 - calibrate
570:19 - yeah
570:20 - this starts to feel awesome i i'm really
570:23 - excited about this
570:25 - sometimes crazy stuff happens like if a
570:27 - point disappears
570:31 - but that's just how it is i'm not i
570:33 - don't even know what to do about things
570:35 - like that
570:36 - it will work in very good lighting
570:38 - conditions even better than this room
570:41 - and um
570:42 - if these things don't
570:45 - don't shine i think this room is quite
570:47 - good actually but the the material on
570:50 - these things is not great
570:55 - [Music]
570:56 - so some crazy stuff can happen
570:59 - when i'm testing but
571:02 - and there's a fidgeting here you can see
571:04 - the head somehow fidgeting all the time
571:07 - because
571:08 - i'm not actually detecting
571:11 - uh very well
571:14 - the center of all the blue points there
571:18 - so i would like to do that
571:23 - eventually
571:24 - let's fine-tune this later so
571:29 - i want now to detect
571:31 - points
571:32 - on the side of the mouth
571:35 - no this point on the bottom of the mouth
571:37 - next
571:42 - no the sides of the mouth so i need to
571:46 - cut some more of this
571:49 - tape
571:51 - and
571:52 - i'm going to do it in a smarter way now
571:54 - i'm
571:56 - going to actually
571:58 - peel the outer layer i can't draw on the
572:01 - outer layer because it's too slippery
572:03 - and the color just leaves off
572:06 - it's this kind of wax paper
572:10 - so i'm gonna
572:13 - draw here blue on one side
572:18 - for
572:21 - three more points
573:02 - like that
573:06 - and now i just cut these
573:32 - always important to
573:34 - pay attention to what you're doing
573:36 - normal things that what you're doing
573:39 - and see what can be improved because if
573:41 - you keep doing
573:42 - something in a
573:44 - bad way like how i drew these the first
573:47 - time then you never become better at
573:50 - things
573:53 - [Music]
574:15 - i don't think it will stay there
574:27 - stays on my lip
574:33 - not where i want it to be
574:35 - i want it to be
574:36 - here on the side
574:42 - nope
574:45 - i'm in trouble
574:52 - this bottom part of the lip is fine
575:02 - so at least i can do that
575:06 - it's not the best but
575:09 - it stays here i think
575:11 - the other ones i really don't know what
575:14 - to do about them
575:26 - so
575:27 - one here for opening the mouth it's
575:29 - definitely possible but i can't open the
575:31 - mouth
575:33 - sideways which is
575:40 - hello
575:41 - hello
575:44 - hello
575:45 - hello
575:47 - maybe the points here
575:57 - hello
575:58 - hello
576:06 - they are too much
576:08 - um how to say
576:11 - now they aren't on the side of the face
576:13 - and they are really getting light from
576:15 - the window and it's a problem there
576:20 - um it really needs to be here
576:28 - maybe i can somehow wrap it around my
576:32 - beard
576:45 - is this
577:09 - hmm
577:14 - i don't know how reliable this is
577:26 - because from the front you just don't
577:27 - see it now
577:35 - or
577:44 - maybe something
577:48 - so somehow wrapping it around the beard
577:52 - and
577:54 - inwards at the same time
577:58 - yeah hard to describe what i'm doing i
578:01 - don't know
578:03 - how to say it
578:04 - but
578:06 - i might be able to pull this off let's
578:09 - see
578:36 - hmm
578:39 - is it getting anything
578:48 - [Music]
578:54 - maybe on the outside
579:06 - no
579:08 - okay
579:12 - ow
579:14 - horrible
579:29 - i'm gonna have to make new ones
579:33 - i think that attaching it to the beard
579:36 - like that works
579:56 - i think attaching it to the beard
580:01 - does something
580:05 - but then i have to
580:06 - use two types of tapes so
580:09 - one of it is gonna be just to
580:13 - attach to the beard
580:30 - so i'm gonna
580:31 - put it
580:40 - just here like that
580:43 - i think
580:46 - and
580:55 - yeah
580:57 - something like that and the next one is
581:00 - going to this normal blue thing which i
581:02 - have to do again
581:07 - and attach it
581:15 - what
581:19 - oh great yeah new point coming in
581:22 - somewhere
582:30 - something like that
582:35 - it's not very
582:38 - good
582:41 - but
582:43 - i think it will work i think something
582:45 - will work and i probably look horrible
582:48 - and can i still drink
582:56 - yeah
582:57 - so we have two points and now i want to
583:00 - get this let's just call it left right
583:02 - and
583:05 - l
583:06 - r
583:07 - b
583:08 - so that's how these points are going to
583:10 - be called
583:11 - l r and b
583:14 - and um
583:15 - let's get point
583:17 - l
583:19 - l or r it uh it doesn't matter they are
583:22 - kind of the same thing and the property
583:25 - of that will be that
583:26 - the
583:27 - sum of distance from this one to this
583:32 - and to this
583:35 - must be maximum so the farthest away
583:37 - point from here
583:39 - is going to be that point that has the
583:41 - biggest possible distance to n and c
583:45 - so
583:47 - let's call that point
583:51 - l
583:53 - l point
583:56 - and say that it's the location of zero
583:59 - as before
584:00 - i'm going to copy this code
584:04 - and
584:05 - [Music]
584:07 - a new max distance i'm just going to
584:09 - reinitialize it with zero
584:11 - and the distance is going to be the
584:13 - distance to the chest point
584:17 - plus the distance to the nose point
584:24 - so
584:26 - yeah
584:27 - then
584:28 - l point is going to be the new one
584:31 - and let's just call it
584:33 - l
584:37 - l point
584:39 - like this
584:40 - so now with our constellations here
584:51 - i just want to draw it
584:53 - so l of 0 l of 1 and let's just call it
584:57 - l
585:06 - i need to
585:08 - destructure it here as well
585:14 - okay so l is a point
585:17 - and it's either here
585:19 - or
585:20 - in the other place
585:22 - i could force it to be one or the other
585:25 - but
585:25 - for now it doesn't i will do it later
585:30 - let's get r also
585:37 - so r is going to be
585:39 - if you know l like if l is this r is
585:42 - going to be the point that is the
585:44 - furthest away from all the other ones
585:47 - so i'm going to go here and say
585:51 - r
585:52 - like that
585:54 - and
585:56 - i copied this
585:59 - with r point
586:02 - and here i'm gonna also add the distance
586:05 - to
586:07 - l
586:08 - white let me write these distance
586:13 - sums one under the other so that it's
586:16 - more visible what is happening here
586:19 - and uh
586:20 - this is gonna be our point
586:35 - okay
586:46 - no
586:47 - it's not good
586:54 - something is not good so first problem
586:57 - is
587:04 - when i'm drawing them this should be r
587:07 - here
587:14 - okay
587:17 - okay
587:19 - so
587:28 - why it doesn't work so i'm having now
587:33 - l here
587:34 - okay and when
587:36 - or
587:36 - l here and when air l is here r is for
587:40 - some reason there
587:44 - next to c
587:46 - because it prefers the distance there so
587:50 - l and n distance to l and distance to n
587:53 - is so far away
587:56 - uh
587:58 - yeah
587:59 - that it's better to be down there than
588:02 - here these will be short and only one
588:04 - long so
588:06 - i think maybe trying instead of a sum
588:10 - doing a product there
588:12 - is going to emphasize that even more
588:16 - so let's see
588:21 - okay so
588:23 - now
588:24 - this system seems to work
588:29 - not big difference in l and r but
588:32 - it is what it is
588:34 - uh with different kind of markers it can
588:37 - be even better and
588:39 - probably if i get closer or let's see
588:41 - later
588:43 - the last one
588:45 - just the same thing again the point that
588:48 - is furthest away from all other points
588:52 - so
588:53 - i'm going to call that
588:56 - b for
588:57 - bottom of the of the mouth
589:01 - let's have
589:02 - b
589:06 - b
589:07 - b
589:09 - b
589:14 - b point
589:19 - b point
589:23 - b b
589:31 - also the distance to r there
589:35 - okay
589:40 - not good
589:50 - not good so
589:57 - yeah again it's better to have a
590:00 - position like that
590:11 - i think what i'm going to do because the
590:13 - chest point here is so low
590:16 - and it's such a big problem either move
590:18 - the point upwards a little bit so if
590:21 - this point here
590:24 - would be
590:32 - no that's not helping much
590:44 - let's put the weight on this chest point
590:49 - make it smaller
591:09 - no that's not the problem the problem is
591:12 - that b is such a great place for being
591:15 - far away from all the other ones
591:18 - so maybe we
591:20 - divide by the distance to the chest
591:23 - point
591:43 - no
591:47 - so i want a point that is
591:54 - far enough from
591:56 - n l and r
591:59 - but if you get too close to that point
592:06 - it's bad
592:08 - uh no
592:09 - i think that i i had this
592:14 - the other way around
592:46 - what if i use here the minimum distance
592:52 - the minimum distance
592:54 - to rl uh
592:57 - n and b
592:59 - so minimum distance
593:01 - if
593:02 - distance is less than the
593:06 - minimum
593:08 - distance
593:10 - then the minimum distance is updated
593:12 - like
593:21 - no
593:22 - because now it's going to choose a point
593:24 - that is it's exactly zero
593:27 - how about
593:28 - with the previous addition from before
593:36 - huh
593:46 - and how about squaring these
593:54 - so squaring the distance
593:56 - these individual distances
594:11 - no why does it go there where
594:24 - oh i'm looking for
594:26 - a minimum distance but this is a very
594:30 - small one to begin with
594:35 - okay now it works i think many of the
594:38 - others would have worked as well
594:42 - too many details to start to explain
594:45 - but
594:46 - basically b is quite close to the center
594:49 - of mass of all the other points so i
594:52 - used it
594:54 - in that way
594:56 - this definition here with the sum of
594:58 - squared distances is it's there now and
595:02 - i can do a check here that if um
595:07 - l point
595:10 - x
595:10 - i mean
595:11 - zero is greater than our point
595:14 - of zero
595:16 - then swap these
595:21 - i think i can do
595:27 - something like this in javascript maybe
595:45 - okay now l r are proper n is proper b is
595:49 - proper c is proper everything is fine
595:52 - but um
595:55 - and of course if i calibrate
595:59 - head still moves like this but the other
596:01 - things are not
596:02 - not appearing anywhere
596:06 - so
596:07 - what will happen next
596:10 - is uh
596:23 - is is
596:28 - let's just put here in the calibration
596:30 - in the reference points i'm going to put
596:32 - also
596:34 - l
596:42 - r and b
596:46 - that's the first thing
596:51 - and now um
596:57 - let's calculate
597:04 - a distance between b and n so b and n
597:11 - it's going to give us a distance for how
597:14 - the mouth is opening so b goes down and
597:18 - and always stays where the nose is i
597:20 - can't move my nose
597:22 - so
597:27 - let's say
597:36 - bn1 is going to be distance
597:41 - from
597:44 - nose to b
597:48 - and bn2 is going to be a distance from
597:53 - uh
597:55 - let's just say here ref is
598:01 - equal to that so that i don't write this
598:04 - everywhere it's just horrible
598:12 - okay so ref
598:14 - knows
598:16 - ref b
598:19 - so
598:21 - b and if
598:23 - y is going to be equal to
598:27 - b n one
598:30 - minus b and two
598:33 - probably like that
598:35 - i
598:37 - i don't want to think about it anymore
598:38 - if it's not one it's going to be the
598:40 - other
598:41 - and this difference is going to be
598:44 - divided by
599:02 - wait
599:16 - d1 let's keep the same logic and see
599:19 - what happens
599:20 - so with this bndiff i'm gonna say update
599:24 - mouth
599:26 - with um
599:36 - value and
599:38 - y
600:23 - okay
600:28 - so
600:29 - let's try calibrate
600:35 - everything broke
600:51 - ref nose and ref b
601:13 - oh
601:16 - the constellation points are missing the
601:19 - other ones
601:29 - okay
601:31 - calibrate
601:38 - opposite
601:39 - so
601:40 - needs to be opposite and needs to be
601:42 - multiplied by something more so i had it
601:45 - right in the first time and let's
601:47 - multiply this by five or something
601:56 - calibrate
602:06 - hello
602:07 - hello
602:08 - hello
602:10 - hi
602:11 - hi hi
602:13 - hi
602:14 - hello i think this can be even
602:19 - six but i'm gonna try with seven
602:25 - hello
602:27 - hello
602:28 - hi hello hello
602:34 - l and r points are not really moving
602:41 - i'm not using them yet but
602:46 - nothing seems to happen at least not yet
602:51 - this fidgeting is what i'm gonna fix
602:53 - next so what i'm gonna do
602:55 - is um
603:01 - i really like it i
603:03 - i did something really great i'm happy
603:06 - with this
603:08 - so um
603:10 - the fidgeting i'm gonna take
603:14 - an average of the points i'm gonna
603:16 - average the points in their neighborhood
603:19 - here
603:23 - somehow
603:30 - and replace
603:32 - lrb and
603:35 - nose and chest
603:36 - with the actual average there so that
603:39 - they don't jump around so much
603:42 - and then this animation will be also
603:44 - smoother on the left it's not good as it
603:46 - is
603:48 - so let's try that
603:51 - next
603:59 - now that we have all of those points
604:01 - there
604:08 - i'm going to go through
604:13 - let's create sets of points that are
604:15 - closer to n to l to b to air and to c
604:19 - so i'm going to call these
604:25 - n set
604:27 - like this
604:30 - c set
604:33 - b
604:34 - set
604:36 - lsat
604:39 - r set
604:41 - and now i'm going to loop
604:46 - through all of the points
604:54 - and i'm going to say
604:59 - to calculate
605:01 - five distances is
605:04 - n this is going to be distance from
605:10 - logs of i to
605:12 - a
605:13 - nose
605:14 - point
605:22 - and the others will be like
605:26 - same
605:29 - c distance
605:31 - b distance
605:32 - l distance r distance
605:36 - and this is gonna be
605:38 - chest
605:40 - point
605:42 - this is gonna be
605:44 - b point
605:47 - l point
605:51 - and r point
605:53 - and now i want to put these in the set
605:56 - where the distance is the minimum
605:59 - so let's
606:01 - get the mean
606:02 - uh
606:04 - is going to be math dot min of endist
606:08 - seedist be this
606:11 - eldest
606:13 - this like that
606:15 - and
606:19 - i'm going to say
606:23 - if
606:31 - mean this
606:33 - is going to be equal to
606:35 - and this then
606:38 - and set push
606:40 - locks of i
606:45 - and else
606:48 - if mindist is
606:50 - seedist
606:52 - then c set is going to be
606:56 - logs of i
606:57 - then b
606:59 - this here
607:02 - b set is going to be log getting logs of
607:06 - i
607:11 - l
607:12 - l set
607:14 - r
607:16 - r set
607:19 - yeah
607:20 - so now i have sets of points
607:22 - for each of those
607:26 - things so these points are going to be
607:27 - nearest to
607:30 - the ones that are marked on with the
607:32 - letters on the camera
607:34 - but um
607:40 - but now i can calculate the average of
607:42 - each of those and replace
607:45 - each of those points like nose point
607:47 - chest point b point and so on so
607:50 - nose point
607:51 - is going to be
607:53 - average of
607:56 - n set
608:01 - chest point
608:08 - b point
608:11 - l point and r point
608:15 - so r set
608:17 - l
608:18 - set b set
608:25 - c set
608:27 - ends
608:31 - might be confusing what i'm doing now
608:33 - but
608:34 - look at the points now and look at this
608:36 - fidgeting on the right
608:38 - and it should be gone when i refresh if
608:40 - i didn't make any errors
608:47 - errors
608:54 - okay
608:55 - chest point
608:56 - is const
609:05 - okay calibrate
609:18 - much more stable
609:19 - so i'm gonna actually have a tutorial
609:22 - someday about this lightsaber effect and
609:26 - i will teach better there what i did
609:28 - here with the averaging so
609:30 - i don't know if it's already out when
609:32 - you're watching this or if it's coming
609:34 - but
609:35 - we did it
609:38 - i i averaged the points and now they
609:40 - became stable because they are not
609:42 - represented anymore by one single point
609:45 - but by many points
609:49 - many points
609:51 - averaged together and
609:53 - they are not fidgeting so much
609:55 - yeah this is great wow i'm really happy
609:58 - with that character moving there
610:01 - when the points are not blocked
610:03 - otherwise it's horrible
610:14 - okay
610:16 - let's try also these side points this
610:22 - l and r
610:24 - maybe they work who knows
610:30 - so
610:34 - i'm gonna copy this code
610:39 - like this and say
610:42 - l r diff with dx
610:47 - lr1
610:50 - lr2
611:01 - lrdf
611:03 - x
611:05 - is gonna be lr1 minus lr2 divided by d1
611:10 - multiplied by something
611:12 - and lr diff
611:16 - x there
611:18 - so let's see
611:22 - calibrate i'm looking straight at the
611:24 - camera
611:30 - hey
611:32 - it kind of works
611:34 - hello
611:35 - hello wow
611:37 - wow this works um how about if you put
611:41 - bigger value here
611:43 - nine
611:45 - not 79.
611:48 - okay calibrate
611:55 - hello
611:56 - hello
611:57 - hello i am raduz avatar
612:00 - hello i'm radus avatar
612:04 - maybe with the mouth it would look even
612:06 - better
612:08 - let's see if i redesign it to have a
612:11 - mouth in the end
612:13 - i think i need a
612:15 - few minutes break and then i have about
612:18 - one and a half
612:20 - hours
612:21 - left to do this so i'm gonna do
612:26 - i'm gonna
612:28 - during my break i think i'm gonna record
612:30 - myself saying something with these
612:32 - things on my face
612:34 - so that i can play with this method
612:37 - also without these things on my face
612:41 - i mean to play with this
612:43 - thing
612:44 - so i will record myself saying something
612:47 - and
612:48 - when we come back
612:49 - uh
612:51 - when i come back
612:53 - i will
612:56 - make this work with the camera or only
612:59 - with the sliders
613:00 - or with the video that i'm going to
613:02 - record
613:04 - and
613:07 - i like it
613:09 - a lot
613:11 - and
613:13 - then fine tuning drawing these to look
613:16 - like hair kind of like in the original
613:18 - drawing
613:20 - and these strings here
613:27 - they are small minor it's much more
613:29 - interesting what happens up here now but
613:31 - i like them
613:33 - great so
613:35 - i will take a 5-10 minutes break and
613:38 - record also something meanwhile
613:42 - okay i'm back and
613:44 - i recorded a short video to test this i
613:48 - don't know if it works yet but i added
613:51 - it here as this
613:53 - mp4
613:54 - file in the folder
613:57 - and i think it's really easy to test
614:00 - here i just have to put
614:03 - something like
614:09 - and before of course it's still gonna
614:11 - initialize the webcam and and do
614:13 - whatever
614:15 - but uh
614:17 - it's
614:18 - gonna replace the data
614:21 - uh from the webcam with the
614:24 - source coming from that video
614:26 - let's see if it works
614:37 - it crashed
614:42 - but um it's talking there something and
614:46 - that's me from the video it crashed
614:48 - because of a
614:50 - course
614:52 - so it's trying to load the file from the
614:55 - computer and uh do some processing with
614:58 - it like image processing and the browser
615:00 - doesn't like that
615:02 - um
615:04 - i think i need to
615:08 - make this into a server
615:10 - so
615:13 - let me go to
615:20 - show the status bar
615:22 - in this visual studio code and i have
615:25 - this live server
615:27 - extension
615:33 - allow
615:34 - access
615:37 - and
615:38 - and and
615:41 - now instead of going to this
615:46 - location i'm just going to put here
615:49 - the localhost
615:51 - ip address and
615:53 - this 5500 port
616:00 - hi i am
616:03 - okay
616:04 - one
616:05 - two
616:06 - three
616:07 - four
616:08 - five
616:09 - six
616:10 - seven
616:12 - eight
616:13 - nine
616:14 - ten there were some problems there
616:19 - with um
616:23 - with some of those things disappearing
616:25 - sometimes
616:28 - but
616:30 - let's
616:32 - refresh and press to calibrate also
616:35 - quickly somehow
616:38 - or i don't know
616:39 - um i want this to actually
616:44 - calibrate here
616:54 - wow every time i'm
616:56 - saving something it's updating there the
616:58 - server works differently
617:03 - testing one
617:05 - two
617:06 - three
617:07 - four
617:08 - five
617:09 - six
617:10 - seven
617:11 - eight
617:12 - nine
617:13 - ten
617:38 - yeah um
617:41 - this calibrate can't be called there yet
617:44 - because the image processing hasn't
617:46 - happened yet
617:47 - so
617:53 - i'm gonna take it out
618:00 - i'm also going to disable the sound here
618:03 - four
618:04 - five
618:05 - six
618:06 - seven eight
618:09 - nine
618:10 - ten
618:14 - hi i am radus avatar
618:16 - testing
618:18 - one
618:18 - two
618:19 - three
618:20 - four five
618:23 - six
618:24 - seven
618:25 - eight
618:27 - hi i am radhu zabatar
618:30 - testing one
618:32 - two
618:33 - three
618:34 - four
618:35 - five
618:36 - six
618:37 - seven
618:38 - eight
618:40 - nine
618:41 - ten
618:43 - not very bad not very bad i like it um
618:47 - let me disable the sound because this is
618:50 - disturbing every time i i change
618:52 - something in the files this is uh
618:55 - updating in the browser and talking
618:59 - i can't concentrate when he's talking
619:01 - when i'm talking there like that
619:04 - some
619:07 - uh
619:19 - maybe that
619:24 - seems to work so the voice is not there
619:27 - anymore so there is some small problem
619:29 - with the
619:31 - mouth here
619:33 - and also
619:35 - here
619:36 - and
619:37 - i wonder if i can
619:41 - hmm
619:49 - work with the different thresholds that
619:52 - are better so that it works for all the
619:55 - cases let's say
619:59 - 195.
620:22 - was it perfect
620:42 - there was a little bit of a jumpiness
620:45 - but not much
620:48 - uh only if you look on the right side
620:51 - then this b was jumping at some point
620:54 - but only a little bit the mouth looked
620:56 - okay i think
621:05 - yeah
621:06 - okay i think this is just good
621:09 - so
621:13 - i have a demo now as well
621:15 - i can put this on my website
621:18 - and show it to the judges later
621:22 - otherwise it's very hard for somebody to
621:24 - test this application of course you
621:26 - could do something with these sliders
621:30 - but
621:34 - it's not as great as when you see it in
621:36 - action and people won't put these things
621:38 - on their face or wouldn't know how to do
621:40 - it unless they see some example like
621:42 - this
621:43 - so i'm happy i did that
621:47 - let's change the input somehow based on
621:50 - if you want to use the sliders or this
621:52 - video or your own webcam
621:55 - so
621:55 - in index.html
621:58 - i'm going to
622:04 - go
622:05 - and say
622:07 - here
622:11 - now where do i want to put this
622:13 - selection for the input
622:16 - um
622:17 - i think the sliders shouldn't even
622:19 - appear
622:26 - so sliders should actually be called
622:29 - side
622:32 - panel
622:38 - and
622:39 - here
622:44 - these are the sliders now
622:54 - and the sliders can be
623:06 - invisible
623:08 - i mean not added to the dom
623:12 - if the video is playing and in the
623:14 - beginning and i want the video to be
623:16 - playing in the beginning
623:18 - but i don't necessarily want the camera
623:21 - access because people don't like to
623:25 - share their cameras and website usually
623:28 - so also the calibrate button not needed
623:32 - if the video is there
623:35 - so
623:52 - okay
623:54 - and
624:00 - now we can add this kind of
624:03 - select
624:04 - component
624:07 - let's call it
624:13 - input
624:16 - and
624:17 - id of input
624:20 - and now i'm gonna give it
624:27 - some options inside so option
624:30 - with the value of
624:33 - video
624:37 - video
624:40 - and
624:42 - then
624:43 - the other ones are just going to be
624:45 - camera and
624:57 - sliders
625:08 - okay
625:09 - great
625:27 - so these will be
625:29 - here it needs a label
625:38 - let's give it also
625:40 - on a new line
625:43 - and
626:00 - okay
626:03 - here
626:41 - okay
626:42 - so
626:43 - inside of this camera.js file
626:47 - i think i'm going to just initialize the
626:49 - video with element here at the top like
626:52 - this
626:55 - and
626:56 - i'm actually gonna
627:00 - copy this
627:02 - here
627:07 - this navigator media devices blah blah
627:10 - blah
627:13 - this should be inside the function
627:14 - called
627:16 - initialize camera
627:20 - and we only call that when we change
627:23 - that selection
627:25 - i think
627:26 - and what will happen then is
627:31 - so by default the page should load the
627:33 - video first
627:48 - okay it wants some kind of a
627:53 - start button or something
627:58 - let's add here
628:13 - or i don't know
628:15 - now it worked
628:18 - so it begins with the video
628:24 - or no maybe it will want us to do that
628:27 - so let's just put here a button that
628:29 - calls
628:31 - a button that says
628:38 - start
628:46 - like this and the start function
628:50 - let's just go to the camera for now and
628:53 - say here
628:57 - start
629:23 - something is wrong there
629:29 - this needs to be here
629:34 - it changes the size already now
629:37 - now start
629:38 - and it begins and i think that it won't
629:41 - complain anymore about
629:43 - problems
629:45 - so
629:47 - it starts that but if we change this to
629:50 - the camera i want to do initialize
629:52 - camera and then i don't want to do this
629:55 - anymore
629:56 - i do want to say that the source object
629:59 - is going to be the data from there
630:11 - or maybe i do want to do this because
630:13 - maybe the
630:16 - yeah
630:16 - i'm gonna create a new video i'm gonna
630:19 - set its
630:21 - source object like that
630:23 - not like this
630:31 - because the camera your camera might be
630:33 - different than my camera when i recorded
630:36 - the video and so on
630:38 - so
630:39 - yeah
630:42 - so this start here should be start
630:48 - video maybe let's see
630:51 - so when i refresh and i press start this
630:54 - is going to start
630:56 - and
630:58 - it's great i like it
631:00 - and
631:02 - when i change to camera or sliders some
631:05 - things should happen so
631:07 - let's make here an unchanged
632:03 - okay so here we have camera sliders
632:06 - video
632:07 - and
632:08 - switch
632:10 - info dot value
632:13 - if we have
632:14 - video
632:21 - then what happens
632:22 - um
632:24 - let me close many of these things from
632:26 - here
632:28 - so
632:38 - i think i want to have this one like
632:40 - that
632:47 - and i actually
632:49 - think i it should be
632:51 - re-initialized here so let's just have
632:54 - it null in the beginning
632:56 - re-initializing it like that
633:00 - this volume
633:02 - i should remember to put it back to
633:04 - maximum
633:12 - start
633:14 - break
633:15 - and now if this is a camera
633:24 - then
633:25 - we are gonna do
633:26 - initialize camera
633:41 - okay
633:48 - so start the video
633:50 - video starts
633:52 - if i change this to camera
634:02 - it works but
634:05 - i think i'm in different positions and
634:07 - it's not calibrated or something
634:15 - video is great
634:25 - yeah something is wrong i oh this
634:28 - headset was making some bad
634:32 - colors i think
634:38 - okay
634:39 - now it's good
634:41 - so video seems to work
634:43 - it starts it's doing some different
634:45 - things there
634:46 - camera
634:49 - okay let's put also the video with the
634:52 - volume to one i'm
634:54 - i mean
634:55 - hide this
634:56 - because i wonder if the video plays in
634:58 - the background
635:18 - so the video is playing in the
635:19 - background and i think we should do
635:22 - video stop
635:25 - before
635:26 - starting something else
635:36 - if possible
635:57 - testing one
635:59 - two
636:00 - three
636:01 - four
636:02 - five
636:04 - seven
636:05 - eight
636:06 - nine
636:07 - ten
636:13 - hi i am
636:16 - testing
636:19 - okay
636:27 - i want to start in the beginning to just
636:29 - start the video without the option to
636:31 - give the input
636:33 - so i'm gonna
636:35 - remove the input from there
636:40 - just in the beginning so i'm gonna say
636:43 - here
636:48 - input display none
636:54 - input
636:55 - container
636:57 - display none
636:59 - and the input container will be inside
637:01 - of this thing
637:02 - so
637:15 - okay and these line breaks i think
637:18 - should be also inside there
637:21 - more line breaks here maybe inside this
637:24 - video output
637:33 - okay so now you just have the option to
637:36 - press start there
637:38 - hi i am
637:41 - testing one
637:43 - 2
637:44 - 3
637:45 - 4
637:46 - 5
637:47 - 6
637:48 - 7
637:49 - 8
637:50 - 9
637:51 - 10.
637:54 - so when we press the start
638:08 - i'm gonna make this input
638:17 - up here
638:29 - and this start button should disappear
638:32 - because we don't need to press
638:34 - start anymore i think
639:04 - okay
639:05 - so now we have the video we change to
639:07 - the camera
639:11 - calibrate button should be there with
639:13 - the camera
639:14 - so
639:17 - we need that
639:19 - everybody's going to have different
639:21 - markers on their face and if they ever
639:23 - try this
639:25 - i will
639:26 - so calibrate button
640:00 - no need to calibrate with the video it's
640:02 - just confusing it
640:06 - does the calibration it should do the
640:10 - calibration automatically let's put here
640:15 - on the first frame
640:20 - so auto calibrate set to true
640:42 - so on the first frame
640:45 - when there is no constellation points
640:48 - there
640:50 - we calibrate
640:59 - yes
641:21 - yeah i think this is good
641:23 - um
641:33 - but i don't want auto calibration for
641:35 - the camera because
641:38 - people need to see themselves first
641:52 - so now it doesn't work but if i press
641:55 - calibrate
641:59 - hello
642:00 - hey
642:01 - hello
642:02 - hello
642:04 - la la la la la la
642:06 - [Laughter]
642:12 - oh
642:15 - something was happening with this point
642:18 - okay this is very funny
642:22 - uh come on a little more energy i need
642:26 - more energy
642:47 - video
642:50 - yeah it starts well and it auto
642:52 - calibrates itself on the first frame
642:54 - there
643:08 - camera
643:12 - calibrate
643:19 - hello hahaha
643:21 - great
643:22 - and the sliders doesn't do anything yet
643:37 - let's put this to be
643:41 - initialize video
643:43 - initialize camera initialize sliders
643:46 - and now in the beginning the
643:49 - start button is going to be
643:51 - initialize video
643:54 - [Music]
643:56 - yeah
643:58 - and the sliders
644:02 - here so
644:16 - right
644:22 - so initialize sliders
644:26 - this should be in something like a
644:27 - control panel let's make
644:33 - control panel js and just move some
644:38 - functions there
644:53 - like that
644:55 - and from here
645:09 - so they initialize sliders it's going to
645:11 - be something like
645:14 - like what
645:16 - we have the sliders here that need to be
645:18 - turned on
645:20 - we want the video output to be turned
645:22 - off
645:26 - so
645:29 - sliders with output
645:47 - i'm getting some messages
645:50 - i have to check
646:18 - yeah
646:19 - okay
646:20 - so the output none
646:24 - and
646:25 - make sure that the sliders are off in
646:28 - both of those cases
646:37 - so start the video
646:39 - then they can change the camera for
646:41 - example but nothing but really will
646:44 - really happen here unless they do
646:45 - something serious like this
646:48 - um
646:51 - what happens if they press calibrate now
647:07 - so somehow with a
647:09 - marker like this
647:14 - funny things happen
647:17 - very funny things happen you really need
647:19 - to have
647:20 - points on your face like i have
647:24 - and then it works
647:27 - okay
647:28 - sliders
647:32 - okay
647:33 - uh
647:35 - no not okay
647:38 - the video needs
647:40 - to be not
647:41 - active anymore
647:43 - [Music]
647:48 - maybe this video pause is enough
647:56 - and
647:59 - constellation points has to be set to
648:03 - nothing
648:07 - let's see if now it's different
648:10 - so video is there
648:14 - camera is there calibrate
648:22 - okay
648:40 - for me
648:41 - seems to work i want a
648:44 - line break between the after the sliders
649:05 - why don't they work
649:20 - i think the video is still there
649:23 - so in the camera we have process image
649:26 - this is going to happen all the time
649:34 - here
649:36 - video
649:37 - it needs to be
649:40 - put to null we need to put it to null
649:43 - here
649:51 - that will make the sliders activate
649:59 - yes
650:03 - okay great um
650:11 - but now we are gonna work with this
650:13 - video i think and maybe with the camera
650:16 - if these things still stay on my face
650:23 - calibrate
650:29 - would be good to have some kind of
650:33 - some kind of
650:35 - instructions here what to do
650:39 - maybe
650:57 - start is not defined oh
651:48 - where's the video
652:16 - getting tired
652:20 - this is some common behavior it should
652:22 - be
652:23 - grouped together
652:35 - calibrate below the camera i think below
652:38 - the input i'm gonna
652:41 - move that button there
652:44 - it's better like that
653:17 - okay good
653:19 - we have something
653:22 - we have something that works here
653:25 - and even with this video i like it
653:29 - problem now is just that
653:32 - uh
653:36 - these styles are horrible this hair
653:38 - needs to look like hair
653:42 - and i
653:44 - still need some energy and i don't know
653:46 - how to get it
653:48 - but uh
653:50 - come on it's a little bit more effort
653:58 - [Music]
654:08 - [Applause]
654:12 - i think
654:19 - i can do something
654:21 - [Applause]
654:22 - maybe
655:04 - i like the hair
655:05 - i really like the hair
655:07 - what's wrong with this c now it's
655:11 - getting color from the
655:13 - it's getting glare from the light
655:21 - i don't think i can do much about the
655:23 - lights to make it better but
655:26 - this is really great i'm really happy
655:29 - with
655:30 - what i have done
655:31 - and for the hair
655:39 - let's do this
655:44 - so
655:55 - i want to connect now this point to this
655:58 - point
656:13 - may be influenced by this point
656:26 - let's do that so
656:28 - move to here
656:33 - line to here curve to
656:36 - this place and see what happens
656:40 - so inside of the avatar
656:46 - actually in the hair
656:48 - okay head is something that is empty
656:52 - i don't think we use head anywhere
656:57 - i remove this head now
657:04 - so here uh
657:10 - not in the hair but
657:11 - inside avatar because this is where we
657:13 - define these
657:15 - front hairs
657:17 - so what i'm gonna do now is
657:25 - here where we are drawing
657:28 - that's not gonna be
657:29 - used anymore at the end
657:32 - um
657:35 - and i'm gonna
657:36 - say
657:40 - draw
657:41 - front
657:42 - hair a function on the
657:47 - ctx
657:50 - actually a method here
658:00 - draw front here like this
658:03 - and i would say
658:06 - begin path
658:09 - move to
658:12 - this front hair
658:16 - of
658:18 - zero
658:20 - so this is going to be now
658:23 - the first pendulum
658:29 - particles of zero
658:39 - and these are
658:41 - arrays so i can
658:43 - do
658:44 - spreading here
659:25 - location
659:35 - okay
659:36 - and
659:37 - line two
659:40 - particle 2 location so this is gonna
659:44 - draw
659:46 - a line let's make ctx stroke and let's
659:49 - make this one
659:58 - yellow
660:01 - so this line right here that you can see
660:03 - in yellow
660:06 - here
660:08 - so now let's try ctx
660:12 - quadratic
660:14 - curve
660:16 - two
660:19 - and it's gonna go to
660:26 - the second hair
660:28 - the base of the
660:30 - second hair
660:34 - with the second hair
660:37 - control point from
660:39 - the middle
660:43 - yes and here
660:46 - comma
660:48 - so this is what i'm getting
660:52 - now
660:54 - my drawing here okay it's kind of like
660:56 - in reverse actually
660:58 - the
660:59 - curves are in reverse here
661:02 - mm-hmm
661:06 - so i should use this as the control
661:09 - point
661:11 - uh
661:11 - no problem
661:21 - okay something like that
661:27 - and i will do the same thing
661:32 - for the other
661:34 - one
661:48 - hmm
661:57 - looks nice
662:01 - i would like to have another hair
662:03 - somewhere on the left here that i won't
662:06 - draw but
662:08 - it will affect this other hair and the
662:11 - other things
662:17 - so let's actually do that have another
662:20 - pendulum
662:21 - in
662:22 - even more to the left here like
662:26 - three two
662:29 - oh this is the back here
662:40 - okay that's good
662:42 - or even 41.
662:44 - it doesn't matter if it's outside
662:47 - so what i will do now is uh
662:51 - that here
662:52 - strand here is not going to be
662:55 - drawn so
662:57 - i'm gonna
662:58 - go it's just gonna influence the others
663:01 - it's crazy
663:04 - uh
663:04 - what i'm doing
663:06 - so then i'm actually gonna start at the
663:09 - first hair here
663:13 - and
663:18 - continue to do as previously but now
663:21 - instead of this line 2 i would like to
663:24 - have it influenced by this point
663:28 - so this is not straight anymore so i'm
663:31 - going to
663:32 - replace that line too with another
663:36 - quadratic curve
663:39 - and
663:42 - end
663:43 - location will be that
663:46 - but
663:47 - this will be
663:48 - that
663:50 - what
663:54 - no line to
663:57 - yeah yeah this is what i want
664:01 - that's what i want
664:03 - okay
664:04 - so now that i'm here i'm gonna
664:06 - repeat the same thing
664:22 - but
664:32 - here i'm gonna have one here i'm gonna
664:35 - have two
664:36 - here i'm gonna have two and here i'm
664:38 - gonna have three
664:40 - i like that great
664:41 - and uh
664:43 - now
664:46 - i really feel like i want this to be
664:48 - more in the middle more on the left
664:52 - so this is now
664:54 - front here of three
664:56 - zero one two three
664:59 - maybe
665:02 - yeah
665:05 - and
665:06 - maybe this also a little bit to the left
665:09 - actually this one also a little bit to
665:11 - the top
665:17 - and the next one a little bit to the
665:19 - left
665:24 - and i would like
665:26 - actually the first one
665:28 - to be even more to the left
665:31 - but i don't care that it's outside like
665:33 - that
665:35 - and
665:36 - maybe even more
665:38 - and the first one here
665:40 - maybe 31
665:43 - okay and i will need another one at the
665:46 - end
665:47 - so
665:51 - like that for the influence of this last
665:54 - strand so now i'm going to do a little
665:56 - bit of things in reverse it's going to
665:58 - change the direction
666:01 - let's add one more strand there
666:05 - two on the left and three on the
666:08 - right
666:10 - i want there are too many here in this
666:12 - original one i don't want to waste time
666:14 - on that now
666:16 - so uh
666:18 - i want one more strand so let's
666:21 - group these
666:22 - more
666:29 - so this goes even more to the left maybe
666:32 - 1 5
666:37 - 28
666:40 - and another one here
666:44 - thirty
666:48 - two
666:49 - no
666:51 - forty
666:55 - [Music]
666:58 - 37
667:00 - 26
667:04 - 13.
667:05 - something like that
667:07 - so now going back to this place
667:10 - let's do
667:14 - third here
667:33 - so from here we are actually gonna go
667:36 - influenced by
667:45 - four maybe
667:52 - this is now three and this is four
667:57 - now
667:59 - this is five
668:01 - no this is four
668:04 - this is
668:07 - five
668:27 - yeah
668:28 - okay now i got it
668:31 - okay so now i have the third hair
668:34 - and
668:37 - fourth hair
668:52 - five five
668:53 - six
668:54 - five
668:59 - okay
669:07 - fifth hair
669:11 - six six
669:14 - seven
669:15 - six
669:23 - something is not good
669:42 - yeah the point that i'm using to
669:44 - influence here i think this should be
669:47 - four
669:49 - now
670:08 - no we're done we are done i forgot the
670:11 - last one is just
670:12 - to guide guide the things
670:16 - so now that we have done all those
670:18 - all these things
670:20 - i think all i need to do is um
670:25 - fill
670:26 - not stroke
670:44 - okay
670:45 - and probably i want one more
670:48 - line too and i'm gonna go in this middle
670:51 - point right here
670:56 - so that i will cover part of this bold
670:59 - area
671:04 - maybe that's enough let's see so
671:06 - zero one two three
671:09 - align to
671:10 - [Music]
671:17 - three particles of zero location
671:25 - maybe it's enough i hope
671:27 - and now
671:28 - i don't want to draw
671:31 - these
671:32 - anymore
671:37 - oh boy i look
671:39 - bold
671:41 - i
671:41 - i think that's maybe a sign that i'm
671:43 - becoming bold
671:46 - uh
671:47 - it's fine
671:51 - yeah
671:52 - uh let's see how it looks like
671:54 - with the video
672:10 - nice
672:11 - okay
672:14 - let's put the sliders on
672:31 - okay
672:32 - it's pretty okay
672:35 - uh let me add back the
672:42 - stroke and
672:45 - i think this one is just too
672:47 - much to the right
672:50 - so
672:59 - and this one
673:04 - yeah like that
673:05 - now when i'm actually drawing the hair
673:10 - i could move this point
673:12 - lower so that i don't look so bold let's
673:15 - see
673:16 - draw half here
673:18 - topmost point okay
673:21 - but um
673:29 - what was this point here
673:35 - i don't know
673:40 - i think it's something on the side
673:46 - the control point probably it's that one
673:49 - or the outer one
673:52 - right most point okay probably that one
674:04 - wow i look so cool i don't know how i
674:07 - did that
674:13 - i like it
674:15 - but i don't look like that
674:17 - so it wasn't that point
674:20 - i think it's
674:21 - this point right here
674:23 - so
674:43 - okay
674:44 - and let's disable now that
674:49 - stroke from here the yellow line that i
674:51 - don't want to see anymore
674:58 - i think these control points here need
675:00 - to be
675:02 - i don't have hair that goes like that in
675:04 - the
675:05 - down there
675:08 - yeah so this control point needs to be a
675:11 - little bit lower
675:27 - not that i think here i need
675:35 - no
675:37 - this is the outer control point okay
675:40 - uh
675:42 - oh yeah yeah yeah this one
675:56 - it's okay
676:01 - it's okay
676:37 - i think the hair can be lower
676:42 - the front hair can be lower
677:09 - yeah
677:10 - i like this it's better
677:12 - it could have few more hairs i think but
677:15 - it's not bad
677:17 - it's not bad at all
677:34 - hello
677:35 - hello
677:36 - hey
677:49 - i think that the initial video is so
677:51 - boring compared to what you can make it
677:53 - do
677:57 - let's
677:58 - i i want to do the
678:00 - hair in the back as well
678:10 - and then these front things
678:14 - so for the hair on the back i'm gonna do
678:16 - similar tricks
678:18 - and
678:20 - i also want to have another one on the
678:22 - left somewhere that is
678:24 - outside the screen
678:31 - or actually this might still be in the
678:34 - screen
678:41 - maybe something like that let's see
678:47 - and a last one
678:54 - okay
679:01 - yeah maybe it's gonna be good
679:03 - so i'm gonna do the same thing for
679:07 - draw
679:09 - back
679:11 - here
679:17 - so this
679:18 - draw front here
679:26 - does it have the same number of three
679:28 - four five six seven eight one two three
679:31 - four five six seven
679:34 - it's almost the same
679:36 - but
679:39 - without the last one
679:50 - this could be made definitely with the
679:52 - loop and i wouldn't have to reuse that
679:54 - but
679:55 - somehow
679:57 - i
679:58 - like that i could style them
680:00 - individually and if you would like one
680:02 - of them to be a little bit different you
680:04 - have control like this
680:06 - so
680:07 - i know this code could be
680:10 - half this size but uh
680:13 - i prefer to have this kind of
680:17 - [Music]
680:19 - control here
680:22 - so now this front here
680:26 - will be replaced with the back here
680:30 - everywhere here so let's just do
680:55 - okay something is happening
680:57 - but uh
680:59 - the drawing of the back here is now
681:02 - on the front and i want it to be here
681:06 - and okay
681:10 - nice
681:15 - um
681:50 - okay
681:51 - uh
681:53 - needs to be bigger
681:55 - needs to be bigger you don't see it well
681:58 - enough so let me put here
682:02 - nine nine nine
682:04 - nine nine
682:07 - nine
682:09 - okay
682:10 - and these ones on the side i think they
682:12 - can be even more so
682:16 - five and six
682:26 - maybe
682:28 - and these ones
682:46 - not bad
682:52 - oh
682:57 - this is bad
683:06 - so
683:11 - i think the top part
683:13 - of these can be
683:18 - lower
683:40 - hmm
683:45 - too much
683:46 - 85
683:50 - 85
683:52 - 80.
684:14 - and i think that
684:16 - something is wrong here
684:19 - i don't want it to move
684:21 - maybe that much up and down
684:25 - i don't know
684:28 - somehow moving too much up and down
684:55 - yeah i think i will just move
684:58 - the outsides a little bit more in let's
685:01 - say this is now
685:03 - 55 and this is 55
685:07 - and
685:09 - this can be 38 and
685:13 - 39
685:16 - and i think that now shouldn't be the
685:18 - problems anymore
685:22 - they're okay
685:27 - but uh that gravity thing
685:30 - i think it's too much i want to see it
685:32 - moving more so the gravity multiplier
685:40 - not there
685:45 - where is the multiplier
686:17 - where am i calling that
686:24 - oh in the double pendulum
686:30 - oh yeah this update 2 method
686:39 - this is the kind of thing that you
686:41 - really forget
686:42 - what it's doing
686:44 - after some time
686:48 - okay and i want the sides of the hair
686:51 - here to be closer to the other one so
686:55 - 23
687:01 - twenty
687:04 - no
687:05 - twenty eight
687:12 - no
687:14 - not the front here
687:19 - back here
687:30 - okay that one
687:32 - oh
687:34 - the side hairs are
687:37 - too long now
688:03 - these don't really matter
688:08 - okay
689:46 - [Music]
689:48 - these ones are too far to the side
689:55 - i like this shape more
690:12 - these movements are just way too much
690:15 - so
690:16 - i think that what i want to do here is
690:20 - put more emphasis on
690:29 - initial location
690:49 - why
690:56 - oh no something is horribly wrong
691:01 - this one maybe doesn't need that
691:07 - okay
691:17 - mm-hmm
691:39 - okay
691:43 - i want to move this point a little bit
691:45 - to the left so
692:03 - no
692:04 - minus 36
692:06 - and
692:08 - 36.
692:25 - it's a little funny
692:28 - i think that these sliders are just too
692:31 - much
692:33 - allowing too much freedom i'm gonna
692:36 - put them even less because in the real
692:39 - movement this never happens so i'm gonna
692:41 - put here minus
692:45 - three
692:46 - on the y
692:48 - plus three on the y
692:58 - uh huh
693:04 - and uh maybe even
693:06 - two
693:07 - two
693:08 - and uh the step is gonna be
693:13 - zero five
693:28 - okay and i think this hair can be a
693:31 - little bit more to the right
693:36 - they are too close now
693:38 - so let me go
693:41 - back to the avatar and
693:44 - try again
693:46 - 20 here
693:49 - 25.
694:02 - okay
694:08 - nice
694:09 - so
694:10 - one thing that could be tried is
694:13 - actually
694:15 - add one more hair on the front to
694:17 - partially cover the years i think that
694:20 - would be a great effect
694:23 - uh i'm gonna still try to do that
694:31 - and also limit this x a little bit i
694:34 - think that
694:36 - minus 0.4 and plus 0.4 is just enough
694:43 - i mean
694:44 - i'm cheating here not doing a real 3d
694:47 - and
694:48 - it can show
694:50 - if i'm not paying attention
694:53 - and of course people will notice it's
694:55 - it's obviously a 2d animation there
694:59 - and i think here it's just too much
695:03 - movement still so
695:06 - let me
695:11 - or it's fine okay
695:14 - i'm gonna try also something with the
695:17 - front here
695:19 - maybe i call it side hair
695:28 - let's say side hair
695:30 - and um
695:42 - left
695:43 - i'm just gonna copy these things
695:48 - i need just three pendulums the one in
695:50 - the middle is gonna do the actual
695:53 - drawing
695:54 - so this side here left
695:58 - uh
696:06 - update
696:08 - and
696:09 - draw
696:11 - yeah so just copying the one that we had
696:14 - previously
696:16 - and
696:18 - draw
696:18 - side here
696:29 - left
696:31 - my this needs to be extracted into its
696:34 - own function
696:38 - and done some loop there
696:41 - i'm too tired now
696:44 - and it's gonna stay like this
696:48 - so
696:49 - [Music]
696:52 - let's see if i have energy at some point
696:54 - to fix the code
697:02 - so
697:04 - this is actually all we need there
697:14 - yeah this is the side here
697:17 - but now we need to tweak it a bit
697:23 - so
697:24 - the side here on the left
697:30 - this point here
697:52 - okay i'm i have to comment out this
697:55 - front hair and this back hair it's
697:57 - confusing too much
697:59 - so why is it like that
698:01 - side hair left
698:04 - and also
698:07 - these many things i don't want them
698:09 - anymore
698:12 - yeah
698:13 - so
698:16 - okay it's good but these things need to
698:19 - be more to the left
698:20 - i think
698:25 - yeah let's put six here four here
698:38 - something like that maybe
698:55 - and up more up
699:10 - okay something like that
699:12 - so how does this look like with the
699:14 - sliders
699:18 - nice almost nice
699:21 - too much to the left here
699:24 - let's just put it so that
699:28 - it's 50
699:29 - 40 to
699:32 - 31
699:39 - okay
699:50 - hmm
700:21 - okay that's good i think
700:26 - okay
700:27 - so
700:29 - i think we can do another one
700:38 - on the other side
700:43 - i'm just gonna put positive signs here
700:46 - and hope for the best
700:49 - side hair right
700:52 - let's reactivate the back here
700:55 - uh i'm gonna draw these if debug
701:13 - front here
701:16 - if debug
701:25 - and
701:30 - side hair
701:32 - right
701:37 - probably would have been much better to
701:40 - write loops there
701:49 - at least here i'm going to make draw
701:51 - side here
701:53 - function and here i'm going to say
701:59 - side hair
702:01 - left
702:02 - and
702:04 - i mean draw a side hair method
702:07 - and write
702:18 - just
702:19 - object so
702:22 - i will replace
702:24 - this with the
702:25 - argument and i don't need to copy those
702:29 - i just can't concentrate anymore so it
702:32 - has to be like that
702:34 - okay
702:35 - better maybe
702:36 - let's put debug to false
702:50 - oh
702:51 - not like that
702:54 - okay so those things are not visible
702:57 - there and
703:10 - i like it it's much more personal this
703:13 - way
703:15 - let's see calibrate
703:21 - yeah
703:22 - yeah
703:24 - great i really like it
703:26 - very nice
703:28 - very nice
703:31 - okay
703:33 - so these things
703:35 - uh
703:37 - it's the last thing
703:38 - and then i'm gonna take a break do
703:40 - something else and come back in uh
703:44 - maybe half hour or so and
703:50 - see whatever quick polishing i can still
703:52 - do
703:55 - and i'm done with this so it was amazing
703:58 - okay these things
704:14 - i will make an option for the debug
704:17 - there
704:28 - oh yeah the horrible nose
704:40 - i forgot it's so horrible
704:53 - i don't need these
704:55 - click listeners anymore
705:12 - why should i remove this
705:17 - probably it means this alpha thing
705:20 - i don't need the image anymore
705:25 - the reference image
705:29 - yes
705:30 - i can actually delete it from the
705:32 - project here
705:40 - and in the beginning i'm loading it
705:42 - somewhere
705:43 - image image
705:45 - no need for image and i just need to
705:48 - animate
705:53 - yeah
705:54 - good
705:58 - fantastic
705:59 - it's so great
706:01 - why don't people do this
706:07 - it's awesome
706:11 - awesome
706:13 - and now i'm thinking about that project
706:15 - that we cut off the list with the
706:20 - scanning website that scans your body
706:22 - and so on it's not very complicated to
706:24 - actually change this so that
706:27 - you would do some face
706:30 - profiling like how big are somebody's
706:32 - eyebrows and what is the skin color and
706:36 - i don't know things like that how far
706:39 - apart the eyes are the big the nose is
706:42 - and so on and then with that you could
706:44 - change this avatar
706:47 - automatically so
706:50 - of course that one probably meant
706:52 - something different like that the actual
706:54 - textures and you
706:56 - the
706:57 - avatar you're making is pretty much
707:00 - looking like you
707:01 - but this is
707:02 - in my opinion much better it's much more
707:04 - creative
707:11 - yeah okay those things i want to get
707:14 - them done and then
707:16 - i need to do something for
707:19 - half an hour and then final
707:22 - find fine tuning
707:25 - probably debug button here if i if
707:28 - people want to see what is happening
707:30 - behind the scenes
707:43 - right
707:44 - [Music]
709:04 - i said i'm doing those threads on the
709:06 - shirt but i'm doing something else i'm
709:08 - just cleaning up some of this code
710:16 - okay much better
710:19 - structure here
710:30 - that thing
710:32 - avatar
710:34 - uh
710:42 - okay five minutes
710:44 - avatar
710:57 - left string and right string so
711:01 - update and draw so i don't want to draw
711:04 - them
711:05 - like this
711:06 - i want to say
711:14 - ctx
711:20 - begin
711:21 - path
711:24 - ctx
711:25 - field style
711:27 - and i'm going to do an rgba
711:30 - black with some transparency
711:34 - like that
711:35 - and probably
711:38 - same for a stroke
711:40 - style so what i want to do here is get
711:44 - um
711:46 - draw this as a circle
711:49 - which is a dark transparent and i don't
711:52 - need to define new colors
711:56 - uh
712:04 - pendulum
712:07 - init location
712:18 - x
712:24 - y
712:27 - a radius of something
712:33 - full circle
712:37 - and
712:38 - no more drawing this left
712:42 - left string like that
712:47 - and the ctx fill
712:50 - ctx stroke
712:54 - too big
713:00 - great
713:08 - i would really like to do these ellipses
713:11 - it's so easy to do but
713:14 - no time now
713:18 - circles are just too perfect eyes as
713:20 - well
713:21 - at least a little bit
713:23 - oval-ish it's enough to make it so much
713:26 - more organic
713:28 - so
713:30 - okay
713:37 - this
713:38 - this
713:42 - that
713:56 - okay both of these are there
713:59 - and now
714:00 - um
714:03 - just a line too
714:45 - something like that
714:47 - but
714:49 - thicker
715:04 - i don't like that they're so straight
715:09 - i'm gonna
715:10 - do a quadratic
715:18 - curve to
715:20 - [Music]
715:22 - going there
715:27 - but
715:33 - somehow
715:52 - somehow i want the point here
715:58 - anywhere really
716:05 - yeah
716:06 - um
716:41 - that's fine
716:43 - and um
716:56 - same here
717:08 - but the
717:09 - other side
717:16 - okay
717:27 - somehow i would like the body to
717:31 - move a bit more
717:50 - and these things to move more
717:56 - it's just too small movement i think for
717:59 - them to be picked up
718:15 - yeah
718:16 - so maybe in the physics i'm gonna put
718:19 - the
718:24 - gravity less
718:37 - no
718:38 - no that's just fine they wouldn't swing
718:42 - that much anyway
718:43 - and again this is some kind of
718:46 - very small
718:49 - thing that i wanted there
718:52 - no need to worry about so what i do want
718:55 - to do is have this curvature a little
718:57 - bit different so
719:00 - plus
719:03 - three
719:05 - it's good and i want the thickness to be
719:07 - more
719:11 - ctx line width
719:25 - uh
719:58 - okay now they look better
720:02 - right
720:11 - way too much movement on the side i
720:13 - don't like it i think it was
720:19 - i find
720:20 - more fine like that it needs to be
720:22 - subtle i think it's the head that it's
720:24 - doing the movement
720:26 - and the side just a little bit
720:28 - difference there
720:30 - okay
720:32 - one more test with the camera
720:35 - calibrating
720:48 - hello
720:49 - [Music]
720:51 - is this good
720:54 - should i do more
720:58 - great
720:58 - [Laughter]
721:01 - okay wow something crazy is happening
721:04 - gwen
721:06 - when not all points are recognized
721:09 - wow this is fantastic i'm so happy i did
721:13 - this
721:24 - okay i'll take a
721:26 - break and then
721:28 - really wrap up all this page and and
721:31 - that's it
721:35 - i'm back
721:36 - so
721:37 - i still want to do a couple of things
721:40 - um
721:42 - add a debug
721:44 - option
721:46 - so that
721:48 - for example when this video starts here
721:51 - um
721:54 - you don't see those things there
722:00 - actually those need to be added
722:02 - somewhere
722:03 - um
722:06 - let me see
722:07 - this draw point so this is
722:10 - if debug like that
722:13 - it's
722:14 - easy to do that part
722:17 - but
722:24 - um yeah
722:26 - um but i want to have an option there
722:30 - so
722:32 - i need to use a
722:35 - kind of a checkbox maybe
722:40 - so
722:41 - let's put
722:52 - input
722:53 - type
722:58 - checkbox
723:06 - okay and let's write here
723:10 - debug
723:19 - like this
723:21 - and
723:27 - yes
723:42 - and give it an id
723:49 - debug check like this
723:52 - so
723:54 - our debug value
724:10 - no no no
724:11 - i don't want it
724:13 - it was fine like that
724:15 - so on
724:17 - change
724:20 - toggle debug
724:23 - this
724:24 - and what will
724:26 - happen now is that
724:50 - okay so i compare it like that so i say
724:54 - if this is
724:57 - it was true or false so debug is equal
725:00 - to
725:01 - that
725:07 - and it doesn't need to be a constant
725:09 - anymore
725:14 - so now there are a lot of points there
725:16 - being visible
725:20 - points in the video also
725:26 - like control points
725:32 - yes
725:33 - but this jumps way too much somehow uh
725:56 - yes
726:11 - i think i just put this one at the very
726:14 - top to avoid these kind of nasty
726:17 - issues
726:32 - okay
726:34 - camera
726:36 - calibrate
726:40 - what
726:44 - what is happening i need to see with the
726:47 - debugging oh the headset is on
726:51 - it's uh confusing it has some kind of
726:55 - parts that reflect blue light
727:02 - yeah
727:03 - awesome
727:04 - i like it
727:06 - what happened
727:08 - what happened
727:10 - i didn't see what happened that
727:12 - debugging was ah this
727:18 - it's pointing upwards and the light is
727:20 - reflecting
727:24 - okay
727:26 - okay yeah great no debug
727:30 - awesome
727:34 - great
727:35 - okay
727:36 - uh
727:37 - video
727:41 - this needs the sound to be on
727:44 - let's remove also these debugging
727:46 - statements
727:58 - does that happen in the camera
728:07 - no
728:09 - index no we were in index how
728:13 - where is this coming from control panel
728:16 - oh okay i forgot we did that
728:20 - i don't need that value anymore
728:23 - put volume on
728:27 - i mean we don't need this anymore so the
728:29 - video does have volume
728:32 - let's
728:33 - check it out
728:36 - hi i am
728:39 - testing one
728:41 - two
728:42 - three
728:43 - four
728:44 - five
728:45 - six
728:46 - seven
728:47 - eight
728:48 - nine
728:49 - ten
728:59 - great
729:00 - okay
729:01 - the nose i still have a bit of energy
729:04 - and time left
729:06 - maybe 30 minutes max
729:09 - so
729:10 - let's try the nose
729:12 - [Music]
729:18 - nose
729:26 - so i think that the tip there
729:37 - i think we can do two curves one on each
729:40 - side somehow
729:42 - yeah
729:43 - so
729:46 - let me
729:47 - adjust this a bit
729:49 - so
729:50 - somehow the nose would look
729:53 - more
729:54 - 3d-ish more roundish
729:58 - so i'm gonna
729:59 - move to this is the top part i guess and
730:03 - then there is the bottom part
730:08 - yeah
730:09 - so
730:11 - this
730:12 - i want to say
730:14 - minus 0.1
730:18 - now
730:20 - 0
730:21 - three
730:24 - okay
730:26 - and um
730:27 - [Music]
730:34 - tip left so left tip tip l
730:40 - like that
730:41 - and another one on the right
730:44 - with
730:47 - plus that
730:49 - so this is going i remove this thing
730:53 - oh yeah two control points it was also
730:56 - some idea
730:57 - let's see
730:59 - so with the
731:00 - this one i'm gonna
731:03 - do another
731:07 - with the right
731:09 - but i'm going to go back to this stop
731:11 - point here
731:38 - like that
731:45 - not great but
731:48 - let's see
731:49 - so now uh
731:51 - let's see how it looks like with the
731:54 - sliders
731:59 - huge nose there
732:09 - i think
732:14 - this can be one
732:23 - yeah so now this other line
732:26 - will depend on this offset i'm going to
732:29 - make it transparent
732:31 - so it's not important anymore because
732:34 - the noise is defined by the outside line
732:38 - so
732:46 - the more
732:47 - the line is on the outside
732:51 - the more visibility it has so let's try
732:55 - something like
732:58 - ctx global alpha
733:02 - ref.x offset
733:07 - and
733:11 - stroke
733:49 - actually
733:50 - i want to keep this top point there and
733:54 - let's just put this bottom point also
734:02 - 0 and 0 33
734:46 - um
734:47 - actually i want this formula
734:59 - hi i am
735:32 - hi i am
736:14 - hi
736:34 - yeah i can't really explain what i'm
736:36 - doing anymore
736:52 - hi
737:18 - hi
738:06 - hi i am
738:19 - oh
738:37 - what is happening here
738:40 - this is a number but this is some weird
738:42 - thing
738:45 - it's concatenating here some string
739:01 - i don't know why it's doing that
739:07 - hi i am
739:23 - what is happening
739:35 - i don't know but i think that if i'm
739:37 - gonna
739:40 - change this to do first the
739:54 - audition hi hi
740:08 - hi i am
740:19 - no
740:35 - hi i am
740:55 - hi i am
741:16 - okay
741:46 - hi i am
742:28 - i'm just gonna
742:29 - comment out everything here at the
742:31 - bottom focus on one side
742:43 - so
742:49 - negative values
742:55 - no i don't want that um
742:58 - minus 0.4 and i want
743:04 - absolute value of this
743:07 - hi i am
743:20 - i don't know why it's not showing with a
743:22 - different alpha
743:28 - begin path move to
743:30 - curve to
743:32 - stroke and then the different global
743:34 - alpha
743:46 - what is happening here
745:17 - how can this line appear here
745:38 - uh
745:39 - [Applause]
746:04 - what is happening there
746:36 - hi i am
746:50 - what is happening
748:07 - i really don't get what's going on now
748:13 - and i don't have much time left
748:37 - um
748:59 - let me just undo everything i did here
749:02 - and see if this weird behavior is still
749:04 - happening
749:23 - so
749:24 - if i comment out this draw nose does it
749:27 - do this strange thing
749:29 - yes it does
749:41 - and here if i say
750:14 - doesn't make the nose red
750:39 - i think it's something of a bug
750:42 - and i'm not in the
750:48 - i don't have enough energy now and brain
750:51 - power to figure it out
751:30 - let's see if two control points work
751:34 - bezier
751:35 - curve two
751:52 - hi i am
751:57 - a little bit more pointy there
752:13 - hi
752:41 - i don't want that
752:44 - the opposite of that
752:55 - hi i am
753:13 - hi i am
753:27 - hi i am
753:49 - it's not going great
754:02 - hi i am
754:36 - why doesn't this work
755:02 - i just undo everything
755:04 - it feels like
755:06 - it's against wanting its nose to be
755:09 - changed
755:10 - it doesn't want me to change its nose
755:12 - and
755:14 - i respect that
755:17 - okay
755:18 - i think this is it
755:21 - it's
755:22 - more than i thought i'm gonna do
755:25 - i'm really curious what
755:28 - samuel is gonna do
755:31 - i have a feeling it might be more
755:33 - impressive than what i did
755:36 - because you can do so many great things
755:38 - nowadays with
755:41 - online resources and he's a very clever
755:45 - guy
755:46 - so
755:50 - it's going to be exciting to find out
755:59 - yeah but sliders work video
756:02 - works
756:05 - testing
756:06 - 1
756:07 - 2
756:08 - 3
756:09 - 4
756:10 - 5
756:11 - 6
756:12 - 7
756:13 - 8
756:14 - 9
756:15 - 10
756:18 - camera works
756:24 - hello
756:29 - this is the last time i'm
756:32 - talking now as the avatar
756:35 - thanks for watching if you got to this
756:38 - part
756:40 - and
756:41 - the code is not
756:43 - horrible
756:45 - but some parts of it could be better
756:50 - much better
756:51 - than
756:53 - what they are
756:55 - i'm really tired
756:57 - and i'm gonna
756:59 - call it a day because it's not yet night
757:02 - it's just four in the afternoon
757:04 - and i'm gonna go home
757:06 - and rest
757:08 - and
757:08 - the weekend is coming
757:11 - so
757:14 - that's it thanks for watching
757:17 - and
757:18 - see you guys
757:29 - [Laughter]
757:37 - look at the hair look at the hair
757:41 - it's great wow i like it
757:50 - awesome
757:55 - okay i'm gonna put one more thing here
758:00 - instructions for what calibrate means
758:34 - so in the control panel when we do the
758:36 - video
759:12 - hi i am radus avatar
759:15 - testing one
760:28 - hi i am
761:19 - hi i am
762:06 - hi i am
762:27 - hi i am
762:49 - hi i am
763:20 - hi i am
763:34 - hi i am
764:26 - hi i am radus avatar
764:29 - testing one
764:31 - two
764:32 - three
764:33 - four
764:34 - five
764:35 - six
764:37 - hi i am
765:06 - why is calibrate there
765:36 - hi i am
765:55 - hi i am
766:04 - hi i am radu zavantar
766:07 - testing 1
766:09 - 2
766:10 - 3
766:11 - 4
766:12 - 5
766:13 - 6
766:14 - 7
766:15 - 8
766:16 - 9
766:17 - ten
766:48 - hi i am
767:01 - hi hi
767:09 - hi i am
767:23 - okay
767:26 - okay
767:28 - yeah
767:29 - i'm gonna put this on my website and see
767:31 - if the video loads
767:37 - and that's pretty much it i might make a
767:40 - simple preloader
767:42 - if the website
767:44 - if it doesn't load fast enough then
767:47 - i'm gonna put their loading please wait
767:50 - if
767:51 - the video doesn't come immediately when
767:53 - you press the start button
767:56 - but that's a minor thing so
768:00 - see you guys

Cleaned transcript:

in this course radu will teach you how to think like a computer science professor radu has a phd in computer science he teaches computer science at a university as well as on his youtube channel in this course you will see radu's thought process as he codes a project for the very first time many tutorials show you how to build a project that the instructor has already fully thought out beforehand but in this video you will learn what really goes into building a project from scratch and he does it all without even referencing the internet leave a comment with any insights you learn from watching his thought process hi in this video you'll see how i made this avatar using just vanilla javascript and html canvas i made this while competing with samwell so it wasn't scripted and we didn't even know what project we're gonna do when we began so don't look at this as a tutorial because i do a lot of mistakes in it but i really think you should watch the video because it shows the thought process of how to solve a problem like this in the real world and tutorials are not like that tutorials just show stepbystep instructions of solving a problem and those were usually polished well before recording the tutorial so if you really want to be a better problem solver you should check it out so the project we're gonna do is going to be an avatar i'm going to make something that kind of looks like me and maybe is able to talk or or something let's see about that and i'm going to do this project in html and javascript so it's going to be like a web page and i'm also going to do this without using any kind of libraries or external code so the reason i want to do this now particularly is because i'm going up against somewhere and um let's just say that i am about twice as old as he is and even though i said i'm not gonna be pulling my punches um i think i need to set some additional rules for myself and these rules are going to be not to use other code this is something i normally do when i make my tutorials but in this case i'm going to definitely try not to look at other code and actually i'm not going to use the internet i'm just going to try to code this using what i remember about coding in javascript and let's see how this goes so i really think something like that is needed but having said that i won't hold anything back so let's see how this goes i begin with a simple html and in the body part i'm going to add the canvas element let's call it my canvas like this and let me close the body and if you are watching this it means that this video recording is pretty good even though this is unscripted and we just selected this project a moment ago so i think it's good for you to watch a video like this from time to time because even though it's very long it has something that normal tutorials don't have and that's showing how the thought process goes when building something like this so normally when you watch tutorials you see people doing something that they have done before and they have made made it previously and they just show you the final steps most of the time but you don't realize all the thought that went into it and all the experimentation and things like that so if you watch this now it means i decided to post this video because i think it has a lot of educational value in it even though it's far slower paced than my other tutorials so hope you'll like it now i'm gonna also talk when i do these things most of the time and it's going to slow me down a bit but i'm not going to talk normally like in other tutorials so if it's something important that i'm doing i will explain more more carefully what that is now i refreshed the page here in the browser on the right and i've actually opened the index.html file that i started defining here and you can see the tab has changed its name there to the title that i declared and the the canvas is added here inside this page it's just transparent and in the stop top region so let me start to define some javascript next and i'm going to do that here in a script tag i will use many external files at some point but in the beginning i just want to set up this html page somehow so i'm going to get access to this my canvas let's just call it canvas like this and i will set its width and height let's say 300 pixels many people also ask me why do i disable the helper tools from visual studio code like it's not doing any autocompleting for me or telling me if i have typos or things like that and that's mostly because when i do tutorials i want them to not interfere with what i'm coding at the moment so often those windows just block parts of the code that i might be explaining and it's not very good from a pedagogical standpoint so let me give also a style here to the canvas otherwise it's still transparent and we can't see it there so i'm gonna say that the canvas is going to have a border of one pixel solid and black like this and if i refresh now i see the canvas element here so let me also align this to center actually i'm going to keep it in the top left corner i i prefer it like that and i will remove this extra margin from here it's going to make some things easier as we go so let's say here margin zero and now you can see this canvas over there okay now on this canvas i'm going to draw a character and i'm going to make this character a procedural object so it's going to be drawn using mathematics and lines and curves and different kind of shapes and colors and things like that but i'm going to um a drawing i made of myself a long time ago which i'm using to brand my my channel as a as a reference so i add it now here inside of this visual studio code project and i'm going to actually draw this image this jpeg on the canvas for reference to begin with and then the lines that i'm going to draw are going to be things that define this this character here so let me go back here and get a reference to the context for drawing on the canvas and that will be get context and i'm going to be using this 2d context let's see if i have enough time and energy to make this avatar even 3d a little bit but at the moment ideas are plenty and i should stick to simple things and have something that works first and then expand somehow it's not not easy so with the context i'm going to draw the image uh draw image method uh i need to get the image first so let me get the image by saying new image and the source of this image is going to be me dot jpg it's here in the same directory and i'm going to draw this image at 0 0 coordinates on the canvas so if i refresh now nothing happens let me try to give this a width and a height of canvas width and canvas height now so for some reason this doesn't work let's see is the image existing in memory yeah that should be there so here i'm getting the context and i have the image and i'm drawing the image maybe actually you don't have to specify the location there let's see now oh what is wrong so the image is there but if i try to draw it it doesn't appear on the canvas what if i just want to put it in the background of the canvas canvas um style no i can't do that okay so it actually exists and it's there but for some reason drawing it on the canvas doesn't work why okay so three arguments required i don't remember exactly all the all the parameters for this method can i draw anything else on this canvas let's see ctx move to begin path ctx move to zero zero ctx line to 300 300 and ctx stroke okay so the line is just fine but then ctx draw image img i think this should draw it starting at the zero zero coordinate there so something is strange a tough start apparently i don't remember simple things like this even so canvas works and it's initialized properly but when i want to draw it it doesn't appear there so what are the arguments here if i just put a draw image it says that it needs two more arguments so can i get the hint of what is this of what methods are available draw image not very useful oh boy how can i have problems with things like this now i'm getting worried so there's no internet thing it's scaring me right now but something here needs to work so what is the problem it is the correct name of the function i saw it here when i looked at the functions available here so if i type here for example ctx draw image without calling it it shows his native code so it i can't inspect it at least i don't know how oh here i get some information so x y width and height oh okay there are multiple versions of this so one it's with the x and y and you specify also width and height so it should work with zero zero and for example 100 100 what why does this ah the image is not loaded the image is not loaded i tried to draw it before the image had the time to load horrible start so uh now it works it's a small image there let's just put it here to be canvas width and canvas height like so and i don't need this line line 2 anymore this code right here phew i really started to be worried there for a moment now before i draw this i actually want to draw it transparent so global alpha set to 0.1 and then i'm gonna reset global alpha to one afterwards uh two transparent maybe four okay and now i'm going to try to draw this shape using using lines and curves and things like that and i will start with the head but before i start guessing these coordinates is going to be horrible really so let's me i'm going to write some code that helps me take coordinates by clicking with the mouse first so i'm going to say canvas uh add event listener mouse down actually click i think it's better let's see if it works and um get chord minutes like this so a function for get chords uh with the event like this and let's just uh log here edt.x and evt dot y to see if the coordinates are correct and uh refresh this and now when i click this i'm getting 0 close to 0 0 in this corner close to 300 300 in that corner so clicking gives me the coordinates from a point that i clicked on there so this is going to be very useful and let me just prepare here a function called draw me for now code will become much better later when i figure out all the things i want to do with this so i'm going to figure out the end result of this avatar as i'm making it it's gonna depend on the things that i know how to do and also um the time that i have and things like that i have a meeting in about two hours a little after two hours over two hours so let's see if i continue after that so draw me here is going to be called after the image is loading and after i'm drawing it here on the canvas so here for example i could draw the head let's draw just a line first from this point right here to this point right here so these are the coordinates that i'm going to use i'm going to say ctx begin path um like that ctx move to 149 34 and ctx line to 151 two two zero like this ctx stroke like this and now if i refresh i'm gonna get a vertical line here like that so um you can see that this code is helping me so that when i click on the screen i get the coordinates and i don't have to guess these points by trial and error and of course i can fine tune these points for example i probably know that this should be actually 150 150 which is the middle of this canvas there so now the line is perfectly straight before it was a little bit off center because i made mistakes in my licking normally you want mistakes when you draw things like that because something with not perfect symmetry and if it looks a little bit different on one side than the other then the end result is better but for this first part i'm gonna stick to it like this and at the end we'll see about normalizing these coordinates somehow so we'll get to that hopefully okay so this kind of works let me reduce this transparency i mean make it even more transparent maybe like this okay i kind of like that thing right here uh okay so i have just one line let's add a new line to see also the width of the head here so something like this yeah i used 130 because i want it to be perfectly horizontal here like so and 75 to 15 i think that these are proper pretty much so here i just want them to be on the other side of this 150 if this is going to be symmetric and i think it's actually not so 150 minus 75 it's 75 150 plus 75 is 225 so let's make this fix it a little bit already so now you can see already that the initial drawing that i made of this avatar was not perfectly symmetrical and maybe i want it to be symmetrical at least for now okay but this is now somehow centering the head right there uh let's draw the shape of the head somehow so i'm gonna begin a new path and i'm going to draw a line from this point right here to this point right here next move to 150 34. and 75 1 3 0. okay but this line is going to be curved somehow so actually i'm not gonna use line two here i'm gonna use um quadratic curve to that point but for the quadratic curve i need to give a control point somewhere maybe somewhere here 80 46 let's try that okay this is pretty much what i would expect the head to look like there but i have a feeling that this quadratic curve is not good because it's going to give me pointy pointy things there um when i'm gonna mirror this on the other sides but actually even if it's well let's just try so i'm gonna do another quadratic curve too and let's add the control point here like 94 and 196 and then the end point is going to be this bottom one so 150 to 20. i should actually label these points as well so here if you can look it's a little bit pointy but eventually this is going to get covered by all this hair so i don't need to worry if it's not so perfect there so having this now i'm going to actually copy this on the right side and i don't really like these numbers they are becoming way too difficult to somehow calculate all the things so i'm not going to do anything anymore at this stage i'm actually going to scale this canvas so that the center point is going to be here so this is going to become the new 0 0 coordinate and everything else is going to be symmetric like this point is symmetric to that but with minus and plus and the minus and plus here also um yeah let me do that so i'm going to say here not there but here ctx scale um okay and um ctx translate actually maybe i think this should be first and i'm gonna translate to canvas with divided by two canvas height divided by 2. so now things stopped working at the moment but it's ok let's see if this can be fixed somehow so we translate it to the middle of the canvas and we also scaled let's um not scale for the moment so yeah we translate it there but now this has to start at minus canvas with divided by two and minus canvas height divided by two okay if we scale like that then i think this now needs to be just one divided by two one divided by two one and one um actually yeah i think it's something like this yeah i did some mistake here i want to scale it up so that these values mean what i want them to mean but actually um i think i want to scale it like this sorry by half by half because i don't want to work with these half values here i actually prefer i think to work in the space from minus one to plus one so now when i'm drawing this this corner up here means uh minus one yeah it means minus one minus one and this one on the right is going to mean plus one plus one i have to fix also this get coordinates there but uh also these ones so this now means zero yeah so all these coordinates i actually want to subtract 150 and divide by 150 so a little bit work to do here but it's going to make the numbers easier to work with afterwards you'll see so the 150s become zero zero zero zero and then three four minus one fifty 077 with the minus then 220 minus 150 46 like that then 75 and i actually know that this one is going to be plus 0.5 because it was symmetric to begin with and this 130 minus 0.13 okay so i think this is correct and i can replace also these ones and this 75 was actually this one i think i'm gonna need new new coordinates for that let me just comment out these oh interesting something happened happened i'm not drawing any fill i think what happens is that the line with yeah the line with is very very thick now because of that scaling i did previously so actually i would like to do the stroke or let me just ctx line with something very small and work with that okay i think this is just fine now and for these i'm gonna need new coordinates and i rewrite that but after i fix this part right here so i want this to log the x minus canvas width divided by two and then divided by canvas width divided by two so something like that this is going to now give me the coordinates when i click on the canvas so that it's already scaled in this new space that i'm dealing with so this one here should be close to minus 1 1 this one here one one and this thing in the middle should be pretty much zero zero like this and um i don't want this log to be so ugly so uh let's just calculate here x is equal to this and um around this so maybe this works if i remember right so the number formatting method here if i put two at the second argument it's going to give me just two decimal place i think it's probably gonna be enough and this is gonna be x and y here so why oh number format is not a function how was this not format too fixed i think so too fixed i don't remember where the two fixed ease yeah i don't remember how this works anymore i don't think there is a thing called format so no number oh no uh i think this is the number yeah let's just leave here um something like that and um i just copied this one for the y as well and here x two fixed yeah just two decimals so it is a number already and it's a method from the number yeah now it works and it looks it looks quite good okay so what were these control points here the one on the top minus minus 0.44 minus seven one and the bottom one that but these coordinates here need to also be 0 and 0.46 so ok what did i do wrong this one needs to be this one great so we have the same thing as before but uh different so why did i do all this crazy stuff it's just that now and i want to make this symmetric on the other side as well i'm going to copy this for example and this one is going to go to this point right here but the control point is going to be the same as this one but with the plus here because now this control point is somewhere here and plus will make it go somewhere there so i don't need to do so much mental calculations if everything is symmetric like that and uh let's just do the final one here as well so we're gonna go back to the beginning to this coordinate there and this control point will have a plus right here so it's it took some extra time i didn't prepare for this kind of thing but it works so great okay now uh this is the shape of the head a little bit and i am soon going to have to specify names for these points i think let's let's see i might define some points for these so that i can animate them if i'm going to move the head in some way that would be nice but let's see so now that we have this i can also draw the body a little bit so let's draw the neck here so these two chords in its begin path and let's just say move to this location and align to this location i think i want this console log here to output the comma between the points as well so let me concatenate here a comma like this for the future oh i have this horrible thing here all right so we have the neck there good but the neck is a little bit curved it's supposed to be a little bit curved if you look closely and i'm gonna do that as well so i'm going to say here quadratic curve to the same destination but i will add the control point maybe somewhere here so this is going to be like that and now the comma is also here so i quicker at debugging and now the neck is curved like this it's great so it's going like that and let's continue this path to make the body somehow so add another point right here and i think i'm just going to line to this one so let me copy this like so now it's just fine i'm not going to focus on that part of the body very much and clothes are gonna cover that eventually so it's perfect and uh let's now make it go off the screen a little bit so downwards like the shoulder from here same x but a y that is going to be one or more let's put it 1.1 so this is going to go now down off screen a little bit and i'm going to do the same to the right so the next line two is gonna be a plus here uh we don't see it but now it's somewhere there and uh this one is gonna be with a plus there like that and now we are going to go to this location but with the plus so let me do that and finally a quadratic curve to for the other side of the neck we are going to this location but with the plus right here because it's on the other side of the center and the the control point it's going to be also symmetric so it has also a plus there great so let me actually extract this draw me function for from here and say that this is going to be the body i think eventually i'm going to use objectoriented programming but um i just want to see if it's needed and get something done and then i will refactor at some point so now i'm drawing the body and then the head so let me refactor this one as well draw head okay and i'm gonna put the body before drawing the head because i want these lines here to be covered with whatever the head will look like okay i'm missing a begin path somewhere or no uh no this line width has to happen early on i'm gonna just set the line width somewhere at the top for now so all the lines will be like this this shape this size all right now i would like the head to let's still practice a little bit with these lines or no no i would like the head to actually rotate a little bit so let's think how we can do that so i want him to be able to turn his head like saying no for example left or right i think that without doing some fancy feature like this uh i'm not gonna win this challenge so just drawing this you could just replace this with the sprite so i want this to have more personality than that so if we consider a point here in the center maybe the nose could be considered the center of the somehow let's see so um let's just consider this center point for now and give it a name let me actually draw this point somehow so i'm going to make a function draw a point let's give it the label and this is going to be ctx begin path ctx arc uh we need the location for this one as well not just the label so location.x location.y and a radius let's set here a radius with the value of 0.01 or something like that and pass this radius and the arc method needs 0 and math dot pi times 2 so 2 pi means 360 degrees a full circle and now i'm going to do this and that point here is actually a point let's see draw point it's point um zero on the x but vertically it's uh minus zero 0.13 this is where i drew this line because it's where the head is the widest i somehow want to have that value for i feel i want to have that value so we might change many of these things later but let's see how this draw point method looks like so refresh nothing happens because i'm not giving the point in the proper way maybe yeah let's give it in the proper way like this x and y i think it's fine okay and it's actually here but very small let's make this radius bigger yeah i think that's fine and the ctx feel but let's give it the white fill color so ctx fill style is white and after i fill it i want to draw there a label so this let's call this point a so the label a and i'm going to say here ctx fill text label at location.x and location.y like this but before that i will change this to black so that we can see black and white oh boy it's a horribly big font let's give it a radius number of pixels and make it aerial i somehow like this font for some reason and uh i wonder if text works well in this scaling conditions but um okay what what happens here let's put 0.1 pixels i think that it might not work for some reason this feels filled text the scaling method that i have used here might affect somehow the the text properties and i don't know if it supports these number of pixels or does it but i i didn't concatenate this pixel value here let me yes okay phew i i don't need to use a space there it's uh linked to that value okay a radius of a size of maybe radius times two now it's too small i think that is something fine maybe okay but i need to do text align center like this okay and now point a is in the center there so this point a i want to be able to control somehow let me make the background here actually light green and remove the stroke from here i think it's somehow too many strokes and i don't want it to be so distracting i think that's fine or let's make this green and the field style is going to be white i think this is much much more readable and this radius can be a little bit smaller maybe 1.9 i just want to have things here that look somehow nice since i'm gonna reuse this component multiple times i might as well have some nice components to work with that is not distracting in some way okay for some reason this would need a little bit of adjustment here as well and i want to use part of the radius for that so that this is relatively well implemented so that if i change some of these scaling properties it looks good okay so this point a is something that i want to control somehow and i'm going to define for this some slider let me try to do that input type range id a the x of that point will be controlled by this ax slider okay so we have the slider now here uh i would like it to be up here actually so um no i don't want that because it's gonna mess up with my cord and it's when i click on the screen i don't want to bother with that i'm actually gonna put this slider i want it up because i will have more of them so let's put here sliders eventually i i want to move that point maybe also upwards let's see so another slider for that and um i want this sliders element to be uh positioned at the top somehow so not the best way to do this i might redesign the things later but let's see zero okay now it's here but i want it to be left 300 pixels okay so this slider is going to control our position and for this ax element and let's just say that we will give here a minimum value of minus one max plus one okay and initially it's it's zero by default okay so now on change uh unchanged i'm going to set here a value a function for update point probably we'll rename this soon let's see but the update point let's put here info and log this info in the console because i don't remember what it contains so now when i change this okay it only works when i release so i don't really want that uh i think there exists also on update no on drag no one change but really i am pretty sure that it's on update with small u or no i don't think it matters on change yeah i really want it to go while i'm dragging this so this on change is not enough on move no update these are so different in different programs and different languages i don't remember ah on no i don't remember let's just leave it like this for now so what i want to print in the console is not the whole info but i think it's value oh but why is it like that because i specified here one as the maximum okay now it works but i can only put one zero or minus one it snaps somehow i think there is a step also that can be used to fine tune this yeah okay i guess i can work with this oh and i can use the keyboard to to move this as well okay so now the thing is i want this slider to control how the head is going to rotate by first controlling where this point is going to be relative to that and this is between 1 and 1 so it's going to be a maximum 100 percent or negative 100 percent movement that we will allow in the interface so let's just define this a point somewhere i'm going to define it at the top somewhere maybe maybe here a is equal to something so this in the beginning and then i'm just gonna write there a for now so this point is here and when we move this slider i want a according to this to go left on the x or right on the x so this would be left on the x from this original location uh like mid location to the far left and far right extremities that we will give so this x and y is like the initial like center point the only thing i'm changing is the x right so it's like the initial initial location but then um let's call another property here x range between let's say minus zero point seven now zero point two something small and plus zero point two so this is gonna be an array of two elements for this x range so now what we are doing updating the point i'm going to say a dot x is going to be within that x range give me the value according to this percentage here so this is between minus 100 percent plus hundred percent and maybe center could be somewhere in the middle i really want these things to be symmetric so putting here things like that is kind of too much let's just try to put center point and there and if the value is negative it's gonna mirror itself to the left if that makes sense so i'm only putting things on the right of this center part and everything else becomes symmetric to the left with the minus minus values so ax is going to be i'm going to do linear interpolation so linear interpolation between a dot x range of 0 and a dot x range of 1. using this value as the percentage so function linear interpolation is very simple you have just two values let's call them a and b or start and end and a percentage we can call that t because p usually stands for point so the function is really easy it's you take the first value and you add the difference between the end and the start multiplied by this t value so if t is zero then this whole thing is zero and you're just at the starting point if t is one then this difference is going to the minus s from here i mean if t is one this disappears and the minus s from here cancels this one so you're just left with the end point if this is somewhere in the middle then this difference is not going to amount as much so it's basically evenly spacing you values according to this percent here and if this t is negative this difference from here actually goes uh on the up other side so i expect that this will work with the negative values as well so let me just try this like that but i won't see any changes here if i'm dragging this because i'm not redrawing this on every frame i need to animate this so i'm going to put this draw me function inside the function called animate that i'm going to call draw me on every frame and the request animation frame is the method that does this calling of the animate function again and again and again as fast as it can so now it still doesn't work oh because i'm not calling the animate function anywhere but where am i calling draw draw me okay so animate here once the image is loaded okay something bad happens because yeah um it just draws again and again and again thinks on the canvas so i think i'm going to copy this drawing of the image every time we draw us i also draw the reference image this image by the way will disappear by the end so that's no not something that will stay here and now it's drawing it on top of each other with these kind of uh small alphas there it looks horrible i will just clear clear the canvas i hope this works uh no it doesn't because we are in this new space right now so i need to use this okay so it looks as before but now every time i release here that a point is actually going to change according to my slider um within this um range that i allow it so i told it basically that it can go from zero which is somewhere here to 0.2 which is somewhere there but because linear interpolation works also with the negative value for t that we can give with this slider i can also have symmetrical symmetric behavior there as well which is good i think i'm not entirely sure i don't want everything to be symmetric but some things i i want them to be symmetric so yeah so now that i have this a point there i'm going to try to draw this straight line that we had previously to be controlled by a in some way like using a as a control point so that the head tends to rotate rotate a little bit like that so let's see if we can get that to work a is now here and when we draw the head this is the vertical line here and uh i don't want it to be uh line two anymore i want it to be a quadratic curve to where the end point is the same it's this one at the bottom right there but the first point here is going to be a dot x a dot y so instead of the line two we have a quadratic curve that goes through a when a is there it looks like a straight line but if i'm gonna do this you can see the head tends to rotate at least a little bit influenced by that control point so this quadratic curve two function it's actually poorly named because there's also another function called bezier curve two that has two control points and it's poorly called i think because both of them are bezier curves bezier curves are very general curves and they can have infinitely many control points so you can have one two three there is no function in the canvas with three points but you could implement it yourself using bernstein polynomials or something like that but um yeah so both of them are um bezier curves so the fact that there is another one called bezier curve 2 means that this one would not be which is kind of i don't know bad naming but when dealing with bezier curves it doesn't mean that the curve is going to pass through that point so this is one thing that people are usually confused about what it means is that when you start the curve here in the beginning you start exactly in the direction of this point so if you draw a tangent from this point it would go through a but it's just influenced and as you're going the end point starts to influence as well so you don't actually pass through a over there uh if my math is right i think that if you put here instead of ax ax times 2 then it goes through a because when you have these quadratic curves essentially what i'm doing now is my control point here it's a x times 2 so it's somewhere here where my mouse is now and then the curve goes exactly through that value so the point where let me just undo this the point where the curve will pass through closest to this a is actually gonna be halfway between where a is and the straight line goes there so a little bit of math this might be helpful later when i'm gonna do some of these things more carefully but okay this is the a x somehow how about one for the a y as well so i want to make this line here the straight line there also modified by a slider like that so let me go here in our sliders and define a y in exactly the same way as previously and here it's something that i really want to change something so this update point um i really want to say that this is uh just the x element x attribute needs to change and this one has to change its y attribute i don't really like this function here let's see later if it becomes better but now update point attribute so the attribute a of x so this here i can also write it like this and it should work but now instead of that hard coded string i'm going to put here the attribute is going to be um not very good uh i think what we will do is um so i want the y range as well let's say 0 and 0.4 just to test and to see that they are different but i need to be able to specify where i want these this interpolation to happen so now this attribute yeah let's just say here for now switch based on the attribute and the case x then a of x is equal to that break and a of y is gonna be with y range here so i wanted to do this with a single line but i think this is also clear at least for now let's see later what what happens if this kind of code structure is good so what happens now we have two sliders and this other one controls the movement vertically somehow but there is a problem here because zero point is not where this thing is from previously and uh maybe this is actually a good thing um let me think about that but uh of course i could change this so this line this horizontal line here it's um at this location so if i'm going to put the y range like that then 0 is is fine there but let me try to have these steps more fine for this one i have a feeling there is something wrong with the math here so let me just move this with my keyboard no it looks pretty good so with my keyboard a is moving yeah it's it's moving quite well i don't know why i expect it to be a jump there somewhere let me try to make this even smaller it looks quite smooth there yeah okay everything seems to be just fine yeah it's uh it's good the math is good i don't know why i thought different so so with a there this looks good now but the horizontal line should be now controlled by a and let's do it so that i do the same kind of quadratic curve to here going to the bottom so from the top to the bottom and um the same control point as uh previously a a controls both of those curves so now you can see somehow the head seemingly 3d ish but some things here i just don't like for example i actually want those curves to go through a but that's not gonna be so easy to do i think let me see i don't want necessarily this to happen and i don't think that it will happen exactly yeah i don't want actually to complicate it like that but horizontally i think the movement is good but vertically it's way too much so when i wrote here at the top um the y range going from this to that this this value is just too much way too much so i'm gonna put here maybe also 0.2 as the other one let's see now how it looks like so left right and like that and this one here still too much i don't want to have so exaggerated movement i just want to give a little idea of 3d this is not going to be a 3d space with x y and z it's just going to be some locations like some keyframes when the character is looking left when the character is looking right and then interpolating between those somehow so it's one technique that is used in animation quite quite often but here i'm coding it instead which is actually not very often in practice so up and down it's actually way too much i'm gonna put here maybe point one i think this is just great so good enough movement there and the left and right yeah something like that so question is yeah okay and then the things that will somehow uh color the face and give it hair and things like that will also be influenced in the same way as this a point somehow so that would be overall the idea there are a few things that i don't like yet for example moving your head up doesn't just rotate it like this if i can try to mimic this your head actually moves a little bit upwards so these points here and this point here should also be affected by these sliders otherwise it just looks very robotic and not very realistic and same goes for left and right when i especially left and right because you can see the chin is really going off from the the center of the of the body when you do that so these points need to have ranges as well as this uh a point that we are somehow now i'm considering this a point as a point that the character is looking at if it's quite in in front of in front of the character so it has some sliders there uh to control that but the whole head shape is going to be affected uh as well not just this center point of the face it's uh yeah so that's what we are going to try to do next and i'm going to define these points give them labels as well as a is here so let's see uh i'm going to name this point maybe b b c d e or something like that so let's define these points as well and um i'm just going to start with one of the points maybe b and this one is going to be this location from here the first move to that we do there so i'm going to cut this say here b dot x b dot y and put the values here so 0 and minus 0.77 and there is going to be also a range for x we will figure what the out what what those are what that is and also a y for that but let's just put these values to be minus 0.77 minus 0.77 so essentially the range is null and 0 0 so now x is between 0 and 0 and y is between minus 77 minus 77 so there's no range there i just put it as a default value so just to get it to appear somewhere first and uh let's put also b b like that so b is there the sliders don't affect b at the moment at all because also this draw point is something i mean update point is something that only updates point a so not good code here i really need to think about this just in a second but uh before that this b is 0 and minus 0.77 let's see if these points are still somewhere so this is b right here definitely i think those are the only ones this one here and this one here so let's just put there bx by and uh now in this update point function i need to be able to specify somehow which is the point so let's put here b that that's the point i want to modify i send it as a parameter like that sorry first one is is a actually okay and here in the update point i could say um point so which one is going to be but now i need the way to access this so we could put actually all of these inside of um an object called points maybe live points they are points that move and this object is going to have an attribute called a and an attribute called b i don't know if this is better yet but i need to update the code depending on what i am looking and feeling when i'm designing this so this is not the typical waterfall way of developing things it's quite agile and you think what you need to change according to what you want to achieve there so now life points actually and the every time i'm using a or b like this or um i could actually destructure this i think and have uh references for a and b let's see const a b is equal to live points maybe does this fix my problem life points is not iterable no not not that so huh this is not an array okay a is still moving even though i did this change right here but then i want in the update point to take not a here but the live points let's call this point p is live points of point which is a string so this point here is a string and it's specified here which point are we changing by the slider let's actually also have here a and b like labels so that we oh no no no no no no it's not a and b it's a x oh boy a x a y no what am i doing this is not not even a anymore let's just keep team these a x and y so this id here it's actually not used anywhere um but this is not update point it's it's update points now yes it's update points now all the points need to update according to the value of these sliders and this slider controls the x and the other one controls the y so let me even remove this id from here because it's confusing now and we don't seem to need it so what we do now is go through all the live points so and and each of them have their own ranges right so this is now update points and um for each point in there i'm going to switch depending on the attribute and um p dot x so at first it's going to be a and then it's going to be b and both of them have a range on x and the range and y and the the ranges will eventually be different so let's see if this code works okay some problem there haha um for for each this would need to be an array i think let's see how the four in loop for let be in live points i really don't remember all of the ways that these for loops work but okay so um this is point id like a in that case and here i'm gonna say the point p is gonna be live points of p id so i don't use array but yeah okay so x is okay y is okay let me just add the line break there at the top okay and uh i think they can be a little bit to the right so something like that too much okay great so so let's try now to modify this b as well so it code should work we just have to change these ranges here like if i'm going to put a 0.02 range for b you can see b is moving now in that same kind of as much as a is moving actually and all the lines connected to b are also adapting according to the control points the same control points that we had earlier and you can see the shape here is not great it's not like a real head would look like but i have some other ideas for drawing the head on top of that and i think it's going to be fine but one thing is i do want b to somehow move like that but not as much so maybe i'm going to put here 0.1 and now when a is going in that way b is moving b is moving less so i don't really know if b needs to move like that honestly because the top of the head does stay in the same place but uh i think i i do want it to move vertically with the y so it could be that i'm gonna just put here range zero zero like that or something very very small sometimes small values uh make a big difference in how everything feels so it may not seem like something but it does so now i'm not really doing any 3d stuff or realistic movement is more like using animation principles and things like that to make the movement more appear organic to somebody who knows some kind of things about about drawing drawing objects there and i'm not i don't want anything to be perfect but to look good so many things are like that especially in animation um you exaggerate and you emphasize some things that don't normally happen in the real real world okay so let's try the vertical one as well so from this value here let's give it a value of minus 8 0.8 and just see what happens uh okay it's it's opposite this it's opposite yeah it's opposite so i want 0.7 there so now that b point is also updating but it's too much maybe 0.772 i just want a little bit of head lowering when the character is looking downwards so again a little bit goes a long way and uh same for the upwards position maybe 7.3 is actually even better yeah i'm i'm happy with that okay and it's also supporting this a little bit okay now this chin this is something that moves much more because it's pointing out like like like what chins do so let's try to do that point next and uh it's this one right here so let's extract point c dot x c dot y and i'm just going to duplicate this line here with c and there is a plus value here 0 46 and the ranges um again i'm going to start or let's give this a value let's actually make it two because center of the face and the chin kinda are on the same plane i think uh and the y range yeah um zero point 46 and let's just give this let's keep it like this for now and modify it later so the c point see appears there with 0 and 046 but it also appears here is this the only place where the chin appears how is it possible because um okay we're drawing this way so then we don't have to move to yes okay so it's only one time here c dot x c dot y and an error c is not defined because here where we where i'm doing this destructuring so that i do have easy access for this a b and c points and i don't have to always write live points dot a b c so this destructuring is something i'm probably going to forget very often but now we have a b b c abc and yeah you can see that a and c are somehow c is definitely looking more like a like a chin now when you're rotating and i'm really happy with this i think i like this shape of the head that we have now okay and vertically c is not moving and this is something that needs to change i think it should move similar to a the place that you are looking in in your face yeah i think it should move as much as a pretty much let's see so a is moving okay quite much let's try to put here 60 six it's too much i think it's not horrible but let's just put 62. so the thing is because these are on a plane the bottom part shouldn't move as much as the top part so this is a bit of a problem we are having now i like how it looks like when the face is looking upwards because the chin tends to let the neck visible and this part from here but um when it's i mean this position but when it's going downwards this becomes way too pointy like the chin actually disappears between under the nose and doesn't expand doesn't expand that much so i have a problem here this whole way of doing things just doesn't seem to work properly in this case i could do something of a two ranges a negative y range and a positive range maybe we try to do that it won't be very realistic but we see if there are consequences why negative range so this is going to be to zero point let's say 40. and here where we are doing these updates we check to see if the value is less than zero very complicated stuff so let's say const value is if the info value is less than zero no no no no no i want the x range i want the y range so y range to use if the value is less than zero then use then use negative range otherwise range um y range i don't like what i'm doing now but at least to get something that works and then we'll think about restructuring a bit later so here i just take that value and um and this only in the case that negative range exists so if b dot y negative range because all the other points are working just perfectly now so the only issue i have now is because of the phase and the 3d way that faces look like i can't model this mathematically with such simple linear interpolation techniques it needs to behave differently when when going up then when going down um so let's say here let y range and the value and now this y range is going to be that so actually y range equals to that but if the negative range exists then it's going to change and value is going to be info dot value but here if the negative range exists we actually want the value to be the absolute value of the value i think i will see if this works okay what happened did anything happen so let me put the negative range that just doesn't change so something like this okay everything is opposite oh yes because y goes downwards so uh the range let's just keep it 46 and this one 62. actually 6246 so and then 46 minus 16 30. so this is actually 0.3 here okay so upwards movement is fine but then downwards movement at some point c becomes i really want to use some kind of a mathematical function like the sign here i don't know how to code this so nicely and i don't know if so much work is needed but um okay so at least now c is stationary there for the positive values so what i'm gonna do next is um modify this to say maybe 50. so okay so somehow now c doesn't move as much when going downwards but actually maybe i want it to move even opposite direction let's just play around with this a little bit so i think that this is actually a more natural movement when characters are looking downwards because the chin just disappears somehow so i'm over complicating this i think but yeah let's leave it like this now and let's try the other one okay i think this looks good good this is fine maybe four two there looks a little nicer yeah okay so a lot of time went to finetuning these things but i think that we are on to something and i kind of like this structure that we are having now and the fact that i can move the character in these different directions no i i don't think this is great i think let's try again with the positive bigger value there yeah from the side you actually would like to see the chin continuing to move downwards it's really tricky it's not going to be fantastic and i think that i'm going to limit this movement a bit more eventually like maybe not allow the sliders to go all the way i really think that you don't need the most extreme values for the slider to get a nice looking animation there and even values here in between are going to be good enough and we may not even need this crazy stuff here with the y negative range there it's just way too much work and too many things to worry about code will become also difficult yes but or let's leave it for now and worry about it a bit later and i will have also a meeting in about half an hour so let's see what is the next step going to be uh how about i try to draw the face like the eyes for example maybe that's one challenging thing that really needs to get done so maybe if i focus on that one for half an hour i have enough time i hope so all of these things that we did now are probably going to be things that will be deleted at some point they are just reference points but then at some point they will be replaced by actual skins and make the character look like that reference drawing and then we remove that reference drawing of course okay so let's have here the head and inside of the head i'm going to make a function draw eyes okay and i want these eyes to be somehow very much influenced by where a is right yes so let's put here a as a point that we will be doing this eyes relative to and i'm going to do here function draw eyes a reference point and let me just make the eye that is going to be on the right side here so i'm going to begin a path and move to some location there draw some curve for the top part i is very complicated actually oh boy oh boy what did i get myself into let's just draw the white part of the eye first so yeah we're gonna start at this point but these will be relative to a somehow so now i want to click on the points i mean measure here coordinates relative to this a location so just temporarily i'm going to modify my function for printing the coordinates here so that we have offset x is going to be x minus a dot x and y is going to be y minus a dot y so now we get here offset.x and offset.y and that means that clicking on a here is going to be pretty much zero very good okay so relative to a i'm going to start clicking on some locations now so this point right here okay and then i'm gonna do a quadratic curve to with this control point and to here and then another quadratic curve to here and another quadratic curve here and another quadratic curve to here so quite many points here that i'm listing in the console so let me clear this text somehow i'm going to align this and oh i didn't select all of them so these are the points and first i actually want to translate so the canvas before that i want to also save the context so save my language changed the keyboard translate to the reference x and the reference y so this is going to be a and just to remember at the end we also need to restore to the last state the canvas and here we begin a path and we say move to this location yes and then quadratic curve to i just copied this using this control point to this location let me actually cut these that i'm using already so that my i don't make mistakes and then another control point to this location and then another control point to this location what did i do wrong let's undo everything okay so this was the first i remove it so then you have control point to this location control point to this location control point to this location and control point to this location okay and uh maybe we want a stroke or actually a white fill but okay something is there it's not perfect i think the last click that i did needs to be actually perfect to the one in the beginning and i don't like this control point from here it should be higher up so i just moved it a bit okay and a little bit to the left i think i want it to be so five okay it's not that bad and of course this is now going to move with a but you can see it's not really great the way it's going to move with a needs to depend also on this slider in a way but it's something it's kind of like how uh yeah it's kind of like how glasses would look like on a person i think you could easily make glasses in this way let's actually try to consider glasses maybe i don't know i don't want glasses on this character i think but um so this is just one eye let's add another function here draw i like this and move the code from here to here and say now draw i so everything should be as before but if i'm gonna copy this now let's say scale minus 1 1 so i'm scaling on the horizontal axis basically flipping according to a to the a point then i'm getting here uh reverse okay begin path needs to go here there was some strange artifact there and now this kind of looks like the character has glasses um not eyes because the eye is somehow getting away from the out of the face i really like what what we are doing here i just hope this is possible to follow along i i think i'm definitely gonna publish this video it's gonna be long and some of the things may not be clear but comment below if you if you need some explanation about what i'm doing um yeah so let's actually have a function here called draw glass i draw a glass eye i will comment that is not used and uh now what i want to do is when we are drawing the eyes actually make these a little better so that the eye doesn't go out of the of the screen like that so what i want to do is on the positive value of this x i want to squish this i like that somehow so when i'm drawing the eyes i don't need just a reference point but i need also the x value there so how can i get it reasonably well i could store it inside of a as the value let's just do that so p dot x offset is equal to value so this is what is going to happen here and all of them will start having x offsets and y offsets equal to the value so it's just one way that i can do to pass this 0.6 value of my slider there from here to the point and now this reference point that i have here has this x offset as well so draw an eye with the reference x offset and this x offset is actually going to translate into the scale of the eye let's just do one eye first and let's call this value scale this parameter scale x and let's say here ctx scale one minus scale x and this is going to be something like a value there let's multiply it by something let's just see what happens oh okay this horizontally but vertically i don't want anything at least not yet so i just put hundred percent scaling vertically and now okay not what i want so the scaling the scaling that i'm doing here also needs to be restored afterwards after we draw that otherwise it affects the other eye as well and we don't want that so i'm gonna do this and now it affects only that eye but it's affecting way too much so i want it to affect less so this is why i mean here maybe multiply this by 0.3 like that and now the i scales well but um here in the negative value it's still scaling it's stretching it more than the other eye and we don't want that i think that i only want this to happen for positive offsets so let's just put here math math max the maximum value of 0 and the x offset and let's see what happens yeah so now the eye doesn't stretch anymore i think it's kind of like what happens it does maybe get a little bit smaller when you do this but uh not very much the other one really becomes uh much smaller because of how um how the geometry of the of the face is it it starts to go behind the eye and also the nose goes in front of it so that's something that we will need to to think about um so when the eye shrinks horizontally like this it's it's good i think and we can put here a bigger value i think maybe 0.4 yeah i think this looks great so the other one we'll see at the end some fine tunings if we're gonna change this in some way but um okay so how about the value here it's also needed so for the other eye when the head turns like this this one should also squish so now we have negative values there let's just put minus here i think yeah so that one squishes like that and the other one squishes like that and we see if we need to do anything for those cases when this is a negative and this is a positive there at the end but for now i like the way that this looks like and yeah i i think that this is pretty good so let me try to shape these eyes a bit more i'm going to draw actually i'm curious how it looks like with the glass eye as well so this one doesn't need the scaling i'm just going to put here draw glass eye on top of one eye and draw the other glass eye what happened why it doesn't work oh in the beginning everything is perfect there now it doesn't look that great i thought it would look somehow nice they would need some more adjustments i think so but okay a couple of things let's just remove and leave it as unused and maybe we adjust them later if we want glasses but i don't really like the idea the stroke here seems to be affected horizontally somehow the line thickness here at the bottom seems to be thicker than here i think that if i do the stroke after the restore yeah i don't get that effect anymore which is great i think it's great okay now vertically the eyes could also do something i think they should squish slightly so let's just put here uh ref.y offset and here as well and this is going to be scale y um okay and here one means nothing is going to happen but i want to if the scale y is something i want to make it smaller so it's going to be minus a fraction of this so scale y times 0.4 and because this is going to be negative and positive values but i want only positive here i'm going to take the absolute value of that so nothing seems to happen let me take the value from here and log it i don't think anything is happening but the values are good so let me call this vertical squish is equal to this which should work but it doesn't and um horizontal squish this one works already wow something bad happens there or oh this no now i lost the x behavior but the white behavior works what the what is happening oh no something is very weird it seems to squish the eyes but not the first time i'm uh i'm moving what is happening so the x offset should be good let's print a here x offset it's nothing but then i move y a little bit aha um i think i know so these offset values they should be something in the beginning um otherwise there is not a number there or undefined or something and it's causing some problems so let me put x offset is zero and y offset is zero in the beginning and we just use the ones from a at the moment but uh maybe we need the others at some point i i don't know so now yeah a y works just fine as i expect it to and here yeah this eye gets squished in the other way and that one like that uh some things i don't like in these extreme pose but i will probably not let it go all the way there so something like this is just fine and some rotation may be needed also to adjust these but this i'm gonna do later again it's just something for what looks good eventually so seems like i guessed the values quite well for the vertical movement i really like how that one happens here not sure if this would look better if everything here would be rotating a bit but when we have everything in the drawing then we will decide these things now it's just the shape of the eyes really so what i'm gonna do now is um yeah what i'm gonna do now it's good i like it okay so let's make the eye look like the actual eye in the drawing i still have about 15 minutes before i need to take a break and for that to happen i'm going to first instead of doing a stroke here i'm gonna do a fill like this so these are now white but let me make it fill style is equal to rgb a zero for red green maximum green but i'm gonna make it transparent so that i still see the shape behind all right this is good i think and i'm going to focus on this right eye again so there is one line here one curve going around the eye and this actually i think we already have the points for that one so here we started somewhere there and we had the quadratic curve like this the second quadratic curve might give us what we want here so i want to draw this black line here so i'm gonna move to this point which was the end of the first quadratic curve so begin path this restore i think can go here now and stroke okay that was fairly easy i think it's good and it doesn't align great with the other one i'll see later if i add some kind of randomness to somehow make it look more organic i just hope i have enough time and uh maybe this control point could be a little bit lower i don't know i think it's just good so last i want this not last but second last i want these eyebrows so let's do the eyebrows next and this is not going to be very easy i'm gonna start somewhere here and then a control point somewhere here another control point i mean end point of the first curve here and then a control point maybe here and another endpoint here another control point here another endpoint here and another control point here and another endpoint here with a little bit of adjustments we'll see so these are going to be the shapes of the eyebrows and i'm going to use fills for them but black a black fill because i really think that having an organic shape for this is important i'm not just going to draw a very thick line which is one way you could do this very quickly so i'm gonna i'm gonna go now move this restore to the bottom and begin a new path yeah i think this restore will have to need some thinking otherwise squished lines from previously might be but let's see but i'm gonna move to the first point from here and then quadratic curve to here and then quadratic curve to here and then quadratic curve to here and last but not least quadratic curve to actually the same point we start that my last click here was not that accurate so now with that let's stroke this one too no fill and it's actually green uh let me change it to black fill style okay not great yet but it's something and i don't really see everything because of this a point so let me just hide the point a for now eyebrows connecting there i don't think that's great so the start point could be more to the right i think maybe eight oh no this is this point i think that one was fine but uh actually the last control point this one yeah this could be maybe like that or even less yeah this is good i think let me comment out the eyes a little bit no too close it will look funny so these points are not very good there my clicking was not very accurate so let me put here how about the value of 0 it's better maybe 0.01 or even 0.2 okay this is quite good and the this control point here from this one i think this needs to be more i mean less minus zero point zero four yeah i think this is good why not it looks quite okay some sharp corners around the edges here but let's try a bit bigger maybe six okay it's not bad i could fine tune these much more and i could use that bezier curve to which has two control points to get rounded corners to be more round or there's also the arc 2 method but i don't want to over complicate the code i prefer to use less methods more times because then it's more obvious what is happening and it looks it would look indistinguishable i think so okay it's not bad so this stroke thing is something that i complained about that yeah something will have to be done with this rotation if i consider these extreme sides but i said that i'm probably happy enough if this will be like the maximum movement range so it's fine it's no problem okay uh i want to get it done and not somehow um how to say not have nothing to show at the end or an incomplete thing so i prefer to have it not perfectly polished but somehow working and this is quite good i think so let me make these eyes now or let's draw also the arc for the circle so for the i um the dark part of the eye whatever it is the iris and the pupil somehow combined here so this is going to be just a single a simple circle let me put it here like this so yeah and if this stroke is somehow bothering that it squishes here like i said previously we can also move this here and do the restore before we do the final stroke there and i think that this is going to look exactly the same because the line and this part here are both black so oh how is this not giving me an error did i yeah anyway let's see but uh an arc so ctx begin path ctx arc at 0.17 and 0.09 with the radius of i don't know i think i'm just gonna try to guess it zero and zero dot math dot pi times two and fill here oh i sure guessed it very small very big wow what oh okay maybe 0.6 yeah it's actually not a great idea to use perfect circles like this i think that having slight ellipses would be better again something that i might polish in the end result but let me change now this green transparent fill style to white and now the eyes look kind of like the original eyes but they are animated in in a sense that they are controlled by this movement the pupils will need to move a little bit different than now otherwise it looks too much like these are not eyes but stickers that look like eyes and glued on top of the of the face so when looking up it's natural that these circles move a little bit upwards and so on so i will have to think about how that could be done again as a final fine tuning there but now this is good for now and i'm gonna have to go so i will come back a bit later today and try to do more of these graphical things i think i want to get it done today this kind of to get it to look like the original image and also move somehow and tomorrow i will try to make it maybe talk or something i i don't know yet and it depends on my speed so far it's been quite slow but i think that now i have enough tools with this kind of clicking to get coordinates and and whatever these are quite useful things that i have made and the eyes now were quite fast to do compared to when we started so i think things will speed up only speed up from now i hope depends what i will try to do later so i'm gonna stop the recording now and get back in a while okay i'm back now for three hours or so and i think that's all i can do today i'm getting pretty tired already so next what i want to do is um focus on the beard so i'm going to try to draw the beard and also have it go around the face like when the when the face is moving like like that it should wrap around nicely somehow so the way i'm gonna do it i'm gonna use the point a from previously the one here that i uh commented out previously so the beard is gonna be drawn relative to this point as well so similar as what we do with the eyes i think that that makes the most sense somehow let's see so i have draw eyes here let's have also draw beard according to the a reference point so we have a function um draw beard and let's have this point called the reference there and i'm gonna copy part of this code from here for the saving and translating but this part is not needed so now uh i still have activated here yeah these are coordinates relative to a now good so let me click here where this beard starts and actually i think i'm going to click here for the starting point so this is let me clear the console here and say click here and a control point should also be somewhere there maybe here and the end point will be this one now from here this changes curvature here so let me put another control point a bit higher here and then the final point here is going to be right in the middle so this is actually supposed to be zero but my clicking wasn't perfect so let me copy all of these things right here and remove those things from there and say begin path move to this point and then quadratic curve to using this control point to this location and the final one using this control point to this location like so and let's stroke this for now um and refresh yeah looks pretty nice like what i expected but when we rotate here it's not that bad there is a problem i think when we rotate other place here so similar kind of trick needs to happen as what we are doing with the squishing of this eye we are also going to have to squish this beard i think if that makes sense uh and we said that this is actually zero here the last point now it touches here perfectly okay so how do we do that squishing let's do it a bit later so now this is fine uh and i somehow like how this looks already when turning to one side this other side that's where the problem is maybe we do it now let me see how i did that before i i forgot okay we are calculating somehow a value for the we are using the offset as a scalar only on one side so um maybe we make the beard to be something like uh draw left beard or something but anyway let's see so scale x is gonna be that one and i'm just gonna copy this horizontal scaling for here from here like so and vertical just hundred percent for now so i'm not going to squish it in any way refresh something is wrong i'm squishing it now but i shouldn't this should happen on the other side this is happening because uh now i'm drawing this left side here but uh we were working with this eye primarily and this was just a mirrored part so i should actually work with the beard on the right side i i forgot what i'm doing so i'm just gonna mirror these coordinates by putting here plus plus plus plus and now the beard is there and when we rotate like this nothing happens to it it still looks pretty much the same on the other side it does get squished a bit but not enough i think it needs to be squished even more or or something needs to happen to this control point here i think this control point is somehow too too much going outside there so that the control point there is the one here and let me see if i can make this like that it doesn't seem to affect much okay now it affects way too much okay i think this looks pretty good okay and uh yeah let's check actually also vertically what happens so some squishing needs to happen there as well definitely okay and the other way this is quite good i think already so the vertical squishing let's actually start and do it in the same way as here for now and adjust it somehow so the vertical squishing something to do with this scale y so scale y is just the offset we don't do that only on one side at least not just yet so vertical squishing i mean scale y is equal to just that offset and let's put this value here and now yeah the beard gets squished somehow but it's not great i think and this is somehow too much so we don't want it to be like that i think so and the other scalar the horizontal i think needs to be bigger maybe 0.5 so now what happens okay it's not good the line goes inside the eye i think point 45 is is nice yeah that's good and when going downwards like this the slider just goes way too much so i think that i'm gonna limit these sliders to go from minus 0.5 to minus 0.5 there and the same for the positive so that the movement is not so extreme and that the 3d characteristics of the face don't interfere so much yeah and this one yeah i think that's just fine not perfect but somehow i liked the feeling of it i don't think they should be linear interpolations but something else but i'm quite happy with this at the moment yeah and um so we started up here now we got here and i'm going to actually connect this right part of the face so i'm going to go around it and connect it back here so let me add another line to here and then a line two so i'm gonna keep these as straight lines here they are maybe small curves but i just gonna i'm just gonna have a lot of line twos here and the last one is gonna be a curve to this point should use the same height for this one and then connect back to the starting point so all of these line two but the last one is going to be a quadratic quadratic curve too so going back to the beard and i'm gonna say here ctx line to this one and many other line twos okay let's close these like so and finally one quadratic curve two using this control point to this location the last one but here i want the same y value as we started which is the same it's great i clicked perfectly this time and i do want another line to the beginning or i can also call close path i think and it should do the connection probably let's see what did what is that what what is happening uh i'm missing a point here oh no the control point did i click here before i think i didn't this was the control point that i need to do um so this control point was here and another line to this one other point that i clicked earlier i think and this is just zero here let's keep it as such okay now this looks a bit better okay good and how does it look like so rotating like this looks quite nice like that doesn't look nice so here i want this point to actually extend all around the face now so that the beard covers everything so i'm gonna do that by working with this x offset so if the x offset is negative then these two points basically the control point and this other uh this point and the control point there need to be different need to move further away to keep the shape of the beard proper so i'm going to define those points as something so um do i want to use the linear interpolation and the range here probably so these would be initial starting points and then where did i use this lerp previously okay so we will define a new point we have a b c let's make d here so um d is going to be this value here hmm now i think i just call it here constant outermost point for the sides so let's have that one be equal to an x value and the y value and the x here is going to be this and the y is going to be this so our last point here will be outermost point x and outermost point y but when we if i refresh this it should look the same but now when we move like this our outermost point is going to be depending on the opposite of this offset but um scaled somehow and also not affecting here like that so only when that thing moves let's um move to the left so only when it's negative that means that minus math minimum of this offset and zero let's put zero in the beginning so i only keep the negative value and i multiply that by 0.4 a bit too much i think 0.3 maybe i think i want to keep it seemingly in the same position so let's try 0.2 i think i'm happy with that how it looks like and the control point i think control point is not bad let's see what happens when we move this one also okay okay so now when moving upwards like this we want our bottom point here to actually go down quite much so all the bottom part here should be should be black now so when the y offset is negative yeah something similar to this minus minimum of the y offset times probably something more here like three or so oh i'm moving this point so it's not good um okay outermost point just stays the same and let's call this right most point right most point and bottom most point so bottom most point is the one that is um this one and 0 for x like this and here we don't need to change that one so the bottom most point needs to be before this one and i just put here bought the most point x and bought the most point y so yeah now the beard is definitely continuing more than before it's a big space here now um i think i can get this scaler to go more maybe four good but i think i also want this control point to be affected somehow so i will call it control point and it will be this thing right here so let's let me copy this and say control point x control point y like this and now for this one it it also needs to go low like this but maybe not as much let's see so it will depend on on the y as well yes i think this shape here is much nicer now um it's good and when turning like this i actually think i want to yeah it should cover the neck here so for the control point we move it also like this so let's see what happens yeah now this covers the neck as well quite nicely it's fine i like it i think it's good so now that we have this beard on one side done i'm gonna do it on the other side in the same way let's try also with the other yeah something weird happens with the eyes there when moving really fast but i don't actually know if they should squish so much maybe not even at all let me remove make the eyes squish a bit less vertically so here when drawing the eyes vertically vertical squish let's put this 0.3 there even 0.2 i think it doesn't need to be so noticeable and uh this might apply also to the beard as well i think now they're somehow out of sync i need to adjust these values a little bit so this bottom most point too much going now and i think the control points as well yeah i think it's fine so let me now extract all of these things that we did here in the same way that we did for the eye so we are passing here some values for these offsets for scale x and scale y so let's say function draw beard draw half beard and scale x scale y so very similar to the other function for draw i or half eyes if that makes any sense so what we are going to do is say here draw half beard with this for scale x and this for scale y and we also need some other stuff here the minimum of zero and fx offset this is actually the same as our scale x so here i can actually replace with that and the minimum of zero and y offset this is something we don't have so um the bottom most point scaler i might call this some something like an anchor or something i'm not sure what would be the proper term but um let's say beard scaler or no it's something there so draw half beard bottom the bottom scaler will be the first the last thing here so minimum between 0 and y offset so bottom scaler bottom scaler and i'm just going to put one these the other for better readability and yeah let me just copy everything here like so put them in the new function and scale x doesn't need to be defined here anymore the squish is still good scale y is here now and this bottom scaler is going to be a third parameter for stretching the beard down to cover the neck let's refresh and everything still seems to work okay oh something is wrong there it's completely opposite here so i messed up something scale x um okay i'm missing something there i think it was a minimum of i think it was a minimum of minus this and let's rename these uh this will be vertical scalar and the last one will be horizontal scalar so this horizontal scaler is actually going to be here i shouldn't have renamed to scale x i think it was a different value there i hope no or maybe was it plus i think some minus plus thing here is going to fix it somehow no i think it was minus but uh without the minus yeah okay now now it's good this stretches out like that okay great so we have draw half beard uh how was the code doing the eyes it was scaling something and then drawing the other eye with the minus here so let's do the scaling here and the other half of the beard really horizontally is what everything matters i think vertically they behave the same so maybe putting it in both places is correct okay i don't know what happens there something strange happens there maybe the last one doesn't need the minus somehow i'm tired now and i don't no not there okay i just hope that i don't need to do the math and it it magically works but something is wrong so um am i restoring properly so draw half beard we have a scale we don't have a restore so here we have draw the eye starting with the save restore and stroke so draw half beard let's save this and i hope this is correct restore and stroke okay this looks good and vertically oh yeah i'm quite happy with this i think some things could be much better but um this is nice i really like it and notice that the lines i drew in the beginning those are just some kind of reference and i'm really looking at these um new lines that i'm drawing now and at the animation so maybe i draw the beginning lines gray somehow so the draw body and the draw head um line stroke color is it stroke color no stroke style i think gray yeah but after i do that i make it black again so this is now for this head lines here they are gray um light gray too too light gray is just fine so they are not as striking and the other as the other ones and i'm gonna do the same for the body so draw the body like that and the black there after we oh what happened no before i'm not in the right function am i it's draw beard i want drop body so for the draw body um so that it's not so in our face here and we look at the just the uh emphasized lines so now when we are looking at the dark lines we see the character moving as he should be moving now the nose is something that i want to do next and it's kind of silly because in the original nose like let me actually comment out everything for now so here the nose is somehow like it's broken to the side when the character is looking forwards but it looks kind of okay i don't think we can do something like this now the nose will look somehow different needs to look somehow different and it could be weird when you see the character from the front but let's see i'm gonna draw the nose as a straight line actually so i need two points and this control point let's see not the straight line i'm gonna draw it with the curve so let's say here uh something like that and i'm going to say ctx this should also be yeah it's relative to a i didn't change that clicking function yet let's make it draw nose um sorry we're still in the head so in the head draw nose relative to a again so function draw nose reference point and the ctx begin path ctx move to 0 0.2 ctx quadratic curve 2 using minus 0.05 0.27 to go to zero point actually zero i just clicked wrong it should be the same vertical in the middle and uh 0.34 yeah and the ctx stroke like that i don't know what happened um i need the translating also so i forgot this code right here we need to translate to the reference point before we do that and restore when we are done with with that okay now this is the nose here a little bit different shape than before and i don't like it so this bottom most point needs to be a bit higher let's say three and this control point more to the side i clicked on it i should have clicked outside of it if you remember how bezier curves work and it looks kind of too roundish i don't like it i think it needs to be also lower a bit better and maybe just 0 9 here i think this is ok maybe i use the bezier also but later in the fine tuning if i still have energy for it so it looks okayish maybe not not really great in that side and then in the other side it's it's pretty much horrible so this is why we need to modify this control point so this is the tip of the nose tip of the nose is going to be having an x and a y and the x is going to depend on this x offset so let's just say here ref.x offset and probably we have to scale it down a lot but anyway and the y is going to be same as here i think like that so here we just put tip dot x and tip dot y like this and what's wrong here is equal to a new object like that so now the nose is a line which is not really great uh but at least it's okay yeah so this needs to be less emphasized now so a fraction of this x offset i'm going to leave it as a line for now even though i want to do something about it later i want to think about some better better style for the nose maybe but at least a line is is something that we can deal with and it's not bad i think a bezier curve here would be better like that one that has two control points points and uh do something about the line to do okay great now let's do the top part and i'm gonna i got this idea while i was on the break previously that i want to have the hair quite dynamic like when the character moves his head the hair moves realistically somehow so i'm now just gonna make a black shape around here and i'm gonna draw these spikes only only later if that makes sense i'm gonna draw them using some physics so when the character for example moves his head like this the hair is going to be affected by these uh by those physics there and i notice now a problem here at the beard these lines there the last previous second to last line two has to have an x of zero what happens there draw a beard this one oh no what happened no after that this one this has to be zero yeah and the the the beards don't need to be stroked they need the fill so and not white phil it looks like santa claus i need to put um ctx fill style to black so i forgot those parts okay much much better now nice and yeah let's do the top part of the head next top part of the hair this black part and then do the physics somehow let's see so i really think i'm over complicating myself but it doesn't look so realistic and i think it needs more personality somehow so that physics is gonna make things much more much nicer i i i hope let's see so um uh half hair is going to be the the thing that is going to be drawn here somehow to do the top shape of the head of the some black lines here basically uh yeah and it should continue with the beard at least on this side and then maybe i'm gonna make these crazy things there these shapes as well i wonder if it's a good idea or not i think it's a not the great idea let's just pretend i have a very small haircut like very short hair just coloring the head for now and think what to do with those later so draw beard draw hair also with a as the reference point i think yeah we didn't really need b and c we would need them if we want to rotate the head like this but i don't want to do that it's just too much work too much trouble now so this is just really fine by me i kind of like we forgot about the nose when it's connected to scaling the nose vertically we forgot that but i kind of like it that it connects to the beard only when pointing down or when pointing up like this it somehow gives more personality i i think it's a mistake that i want to keep some okay let's do the head part what oh draw hair not defined yes so i'm going to copy draw beard pretty much like this and call it draw hair and it's going to be draw half here and draw half here and now i'm going to copy draw half beard and make it like that but change the coordinates somehow so let's see if we can do both at once even though i have a bad feeling about this so draw half beard uh now becomes draw half hair and move to so this point yeah air conditioner makes some strange noise here so this case is uh so draw half here uh this point is this point here so i definitely want to keep it the next one i would like to draw a line to somewhere here but with a very big curve like that so let's have here a control point maybe here and here the center point so quadratic curve to and i should draw the right side always so the right side is the base and the other one is reflected so this is plus 0.47 47 and minus 0. 44. and here we have a 0 and a minus zero point 44 really i clicked on the same y okay so this is now going like that and i want to go also upwards up to this point right here which is point b so the next it's actually going to be a line to a vertical line to b i think so b dot x and b dot y no need for this part and then uh going back down from b to this outer connecting part at least so um a quadratic curve to and a control point maybe here and that point i'm going to have to copy from somewhere but let's just click click it for now so this is going to be the control point and the last one is going to be the right most point so it's complicated with some scalar and things like that so let's just do this and put here right most point x and uh right most point y no need for maybe no need for control points we see later we might have to adjust this when the rotations happen and the close path so that the small line here gets drawn also and let's have this let's have it the field as before and refresh the page oh my oh oh boy the b is not good anymore because i'm remember i'm giving here relative to a so i need the new new point i'm just going to put the dot here minus 0.57 so 0 and minus 0.57 so that's why the pointy head is there like that i think it can be even higher up so minus 0.6 65 okay let's disable a b and c so that i see something there i don't think we're gonna need b and c for much let's say maybe later but i'm gonna disable code printing them there now so that i see what is happening here a little bit of a pointy tip here but i don't mind the inside part is great the outside part is not good and and something weird happens here so not much weird happens there but i do need this control point to be further away so something like that and i have a feeling this one needs to be somehow um this control point and it may need to be tailored in the same way for this right most point yeah maybe a bit too much let's say 60. i think that's good and let's make it higher up like also 0.6 both of these i think it's um this is fine mmhmm okay and the y value yeah i'm quite happy with this i think i somehow don't like that it's getting so squished there but um like here it's squishing the forehead um yeah anyway it's it's fine hmm i think we will need to use b and c eventually maybe we see okay uh but something is really wrong like this like if if somebody is moving their head down like that you expect this part to stay up to somehow a lot of black hair needs to be needs to be there so moving head down like this should have that effect that that part doesn't go down so when we draw this we have the rightmost point for this connection and we also have this is the starting then we have the curve here let's say this is good and then the line two here this point this is something that is not great at the moment so this needs to be somehow with this vertical squish maybe no so there is some squishing here happening let's disable it because i forgot exactly what it's doing okay this actually looks much much better now but we do need something yeah this looks much much better now but we do need something for keeping this point up there and probably also controlling this control point of it so i think we need something similar to yeah let's just go and look at the beard again and the bottom most point we will need something like a topmost point so top most point and this is going to be this value here so maybe that and let's move this like so this one here where it's needed and um topmost point x and topmost point y like this so now this is good i like it apart from these control points that need to be done but it also needs to continue to happen so this vertical scaler from there i think should happen all the time so we have here this one and i'm using a minimum value there what happens if i just put the offset i'm doing it just on the right side but yeah this is better now so a different way for calculating this vertical scaler here and i'm going to do the same thing also on the left side and i'm going to need to do that also with the control points so the control point let's see how i did it for the beard previously so i think i just figure it out somehow here so draw uh this was the control point so control point 0.6 0.6 minus vertically it's what needs to happen so minus this same thing i think might be good not really oh i'm not using it control point x and then control point y e what happened oh it was minus yeah okay okay i kind of like this way that these things are looking i like that the forehead now stays larger and head seems to be moving fine yeah there should definitely be some kind of rotation happening but it's way too much i don't think i will have time for that and this one yeah okay it's it's fine okay somehow the shape of the head is not great i think the horizontal scaler is also something that needs to be used here maybe in the control point maybe in the other way minus horizontal scaler i'm a bit tired now and i just can't concentrate on the math i'm just playing around with the numbers i know that one of them is supposed to work um but let's try 0.3 for the head i'm just playing with the values so that this looks more no not there so that it looks good to me yeah okay i think we are fine for now okay let's draw something easy like the body next so i do have the neck here and the kind of shape for for this body but um and actually let's also add colors so that's let's add the color for the skin i'm gonna i'm gonna get the color from here using some color picker tool i will do a print screen and i open paint you won't be able to see this but i get the color picker in paint and then i look at the color values so they are exactly red green and blue like so so what i'm gonna do with that is where we are drawing the head here i'm going to put um a fill here and the fill style let's say skin tone and i'm gonna define this skin tone somewhere at the top for now rgb with these things and the refreshing now doesn't do anything weird so i'm drawing the head why isn't it coloring oh these are the mid lines um i think the these ones are the outside yes something like that but now these points on the sides are way too too much i want these to be inside of the hair region yeah so minus 0.4 i think too much 0.45 okay this is good maybe yeah starts to look like some real real character there now with the skin colored in okay something here is not quite right and also here something is not quite right yeah let's starts to be tiring already here it's not perfectly filling this shape let's just leave this for for a moment and worry about that a bit later i would like to use somehow the previous coordinates that we are calculating there but i have a feeling it's not so easy because of the symmetries and what we are trying to do we leave it for now uh let's just get other stuff that is more easy to do because my head doesn't work very much now so i'm gonna do this neck and the body there so when we are moving the head to the right like this i would also like to maybe move also part of the neck a little bit some kind of movement should happen otherwise it just looks like you're some rotating head on the on a screw there on some metal structure also when we are drawing the body i want to feel it some ctx fill and ctx fill style equals to skin tone yeah that's good okay but the lines here are not very thick i think what happens there should the stroke be after the fill or yeah i guess that was it okay now yeah what i was saying that for example one of the points here i think it's probably the first one and the last one where we are going here so these points i would like to somehow connect to a the a offset in some way so plus a dot offset x offset i think that's enough but scaled somehow i don't know what happened let's remove it from here have it just in one place very strange oh okay these values are just so small uh something like this maybe yeah now the neck somehow rotates in that way moves in that way somehow and i i like that movement and i'm gonna do a similar thing for this other one so like that it somehow looks a bit better yeah okay good also this one would be nice i think so we have the y offset effecting there and i think i'm gonna do the same here as well i don't know if this is going to be a great tutorial i don't think it is a great tutorial but um many of these things would need to have proper names for the variables but it will end up into something that i'm gonna find a use for okay it doesn't seem to to behave and then i don't think i'm gonna work with this code very much anymore after it's done and something useful but uh let's see so at least somehow the ideas of having different keyframes and interpolating between the frames somehow should be should be clear to some extent okay what is happening there i want to disable the head just to focus on the body it's doing something but not not very visible it's just behind everything there so yeah okay let's put what a smaller value there um doesn't seem to affect very much and i think this is flipped yeah this should be minus that offset yeah let's see so now if i go back here and reactivate this no no no uh so this at the negative side should be up oh no it wasn't flipped damn i i don't like this i'm getting tired i had a long day already uh maybe this is fine i think the control point is the issue we don't really see the change bit because the control point stays the same and then the changes when this head is moving so it's not that yeah it's not that significant it is moving a little bit but not not very much and this is a bit too much i think so when we draw the body maybe half of this is enough yeah it doesn't need to be exaggerated mmhmm okay now the clothes so let me comment out this body part for now and draw these clothes somehow so i'm gonna do this trying to copy these shapes here so yeah i don't need to uh this get chords uh i don't want this to be an offset relative to a anymore i want the original code so that i just get the coordinates inside the screen where i'm clicking like this so now i'm gonna click here and i'm gonna say add the control point somewhere outside here and then another point here another control point here another point here control point here a point here control point here and point here so that's going to be that side on the left and now in the body okay so doing now um begin path and then move to move to this one in the beginning and then this quadratic curve 2 where we use this as a control point and go here and then use this as a control point to go here and another one where we use this is the control point to go here and the last one where we use this as the control point to go here okay ctx stroke yeah this is fine maybe here i don't like this control point very much i mean this end point now this control point here this needs to be more to the right i think negative value so it grows like that okay okay maybe that's not the problem the next control point here maybe should be a bit more upwards yeah i like this shape now much better here okay so that's one side there and we can fill it with that kind of green color i'm just going back into paint to get the color code of that color 154 153 and one blue is one okay so shirt color like this um so back in draw body we have here ctx fill style is shirt color and we also give this ctx fill like this what did i press on my computer okay not okay i pressed something okay uh this fn key somehow right so this is one part here done i'm just going to comment it out a bit and do the same thing on the other side i want these to be somehow separate lines so it looks more organic i'm gonna do a click here this is where i'm gonna begin so and a curve that goes like this okay undo start here a control point here going here then a control point here going here control point here going here control point here going here and the control point here going here or so so let's copy that and um keep these coordinates there and let's do a begin path with the move to starting point and then control point here going there control point and point control point end point control point and point and control point end point okay this is good but now it's using the skin tone which is the last fill style so now we have these things here they look really good i think but um so here we started like that ended like this i think this end should be lower so that it covers this stroke there yeah let's try eight oh no it grows the other way around so point line yeah doesn't seem to work i think this is okayish not okay let's leave it with nine zero and do another bit of a curve there as well so this control point i'm going to put it here and take us back to the starting point like this but i don't want that stroke to be there i think so let's see if i do this i think this is just perfect okay let's put also the body back on for reference okay and now i'm gonna draw the shoulders and that part pretty much copying going over this skin part right there so yeah hmm and i'm gonna also add a few scalings i mean a few translations based on these sliders for the whole body i think that will amplify the the feeling of movement make it look even better let's see but before that let me uh so this is now the this point right here is this one i'm gonna need the new one somewhere maybe here let's just draw this i'm gonna make new points there i'm gonna start with the point here actually this one will be zero and then it will go here and then line to here and control point here line to somewhere there and then i mean curve 2 somewhere there but this will be outside the screen so before we do these with the shirt collar we are going to do something else with the shirt caller so i'm gonna this was a zero actually and this was 1.1 or something and we do a move to this center location and um now we do a line to this place and then align to this place and the last one is going to be this quadratic curve too with this control point and the last point there so this should be fine but now we need a line to the other side so basically this one with the plus and a quadratic curve to this will be same with the plus and going to this coordinate actually also with the plus on the other side and then this one with the plus and back to here or just doing close path and we need a fill and a stroke as well so this is fine i think i'm missing a begin path okay and here i'm just going to tuck these points a little bit i can see a little bit these corners there i think this was fine and such but this one was like that okay so better this is not great i see a small line there from this last connection uh with the closed path so this needs to be a bit lower i think let's try 86. let's try 87. can we go 88 okay good good good but this looks a little bit weird so head moving neck is moving a little bit it's okay but the rest of the body just completely still so i'm gonna do something about that as well um based on that a point so when i'm drawing everything here like the body and the head i'm actually going to do a ctx translate first to save ctx translate a dot offset x or was it x offset and multiplied by 0.04 or something small and y offset also multiplied by that um i don't think i need the y offset let's just put it zero it would look a bit strange so i restored this now so everything moves now a little bit while the person is moving i don't really like it it's not fantastic maybe this value should be very low like that it's not not very great let's uh restore this somehow after the body this looks a bit better and let's actually scale also so that it goes um one minus a dot x offset multiplied by zero point zero five and one so not good it's good in this direction but not good in this direction absolute value might fix it yeah this is okay and maybe even a smaller value here like like that it gives some kind of movement it of course this should be skewed and it should give you a 3d perspective and all these points should be actually somehow computed with a 3d perspective in mind but i don't know how to use the webgl canvas for example and i said i don't use the internet and also i think it's too much trouble and when you try to do things in a 3d environment that are supposed to be 2d they don't look the way i i like them to look if that makes sense so this is just fine i think for for what i'm doing here and um hmm yeah good okay what happens when we move vertically okay let's see if now i have to energy to feel this shape when drawing the head something is off there yeah so i'm drawing the head i really feel like i want to disable all of these for a while and see what happens with this shape okay yeah we were using those b and c points let's add the a b and c points back in that was a kind of a good idea but somehow i ended up using just a as the point it would have been a better 3d perspective there let's put here ctx global alpha 0.4 and reset it to 1 at the end so what i'm gonna do is i want to see through the head the other shape and see what is the where is the problem coming from so here for example i think the bottom of the beard should go more down and then maybe we do something right here as well so let's go to the beard draw half beard so the bottom most point let's try this one with the three and also vertically here with the 0.3 i think that's fine now this right most point so this is something that i want here to have a bit bigger maybe 47 like that not really it was fine before so not the right most point but the one so this control point is i think the outside one this quadratic curve to what were these two things so these and that that means this point right here this one end point here no that that this is the start point i forgot it starts right here so it should be 39 or something so i want to move it a bit closer to the eye here like that and now if i do this and that almost good so also this control point right here i think also a lower value maybe 33 there yeah now this looks good and here this outside part so the control point here the x should be bigger maybe thirty eight or something yeah and the right most point maybe 46. i think this is good and the the hair needs to still connect so we have changed now this point here and also the right most point i'm copying them just for reference and i'm gonna draw go now to draw half hit no hair draw half hair and this one was also starting at it needs to start here and the right most point now this is a 46 here so let's see now uh global alpha i want to remove this trick for making things transparent just so i see through them and okay almost there yeah this is fine it's kind of funny okay okay a little bit inwards so um the one control point from draw half beard uh the first one from here should be inwards a bit more so maybe like that maybe even more okay i think this is just good so we have done quite many things still many things to do but i need a brick so i'm gonna take few minutes break and then i come back for another hour or so and then tomorrow more interesting stuff i'm gonna think about this also when i walk to work and usually that's when i do most of the great idea thinking moments yeah okay so the years are still missing actually and i really want to do the hair um so that it's dynamic so when the character moves like moving his his head like this i want the hair to be shaking there i think it would look very nice and and i want the character to talk so this is something that i really want to do tomorrow and i'm not entirely sure how i want to do that i have some videos about this talking pumpkin that i did at some point where i used the microphone to get a different to get the volume and depending on the volume open the mouth more or less i could do that but i think it wouldn't be very organic people open their mouths in so many different ways and the volume is just one number so i i'm thinking about using webcam and my face and doing some kind of detection on the face i really want to do these two features otherwise i think i'm gonna lose this competition because i've spent so much time and i just have a nodding character and he seems to agree with me okay but um i will take a break and uh in a few minutes i continue and try to draw the ears and maybe i begin with the hair in some way something i might i think i should also clean up the code before i end today so that i have it easier tomorrow it's a bit it's not great i i should use some objects maybe or at least separate the code into files so that it's easier to to find the things this already starts to have quite many lines of code yeah okay be back in five minutes okay i'm back so i think one of the things i want to do is the years now and um i'm going to go back to the click event listener here and reget um coordinates with respect to a so the same way we did for the eyes i'm going to refresh this and yeah so where are the years now they don't align very well here i'm going to try to map the locations where they should be somewhere here so i'm going to say i'm going to click where i think the location should be so one is here with um control point here and another point here and then control point here here another control point here here another control point here here i might need to adjust these a little bit yeah i think it's too complicated shape let's let's make a simpler one so starting here control point here and here and another control point here here let's see how this looks like so we have the draw ahead and draw years with respect to a so function draw years oh and i did everything on the left side again let me do it one more time and on the right okay i think this ended up even better so let's do that and um now we have a save and a translate and it ending with this restore and reference point passed here like that and what we do now is move to this first location and all of them are quadratic curves so i'm going to say quadratic curve to this with this and this to this and finally this to this and ctx fill style equals to skin tone ctx fill ctx stroke um it's something maybe i want this first control point to be more to the right no i i don't maybe i want this end point yeah maybe something like that and then the this control point maybe that looks good i think and close path as well now there is a line here that is thicker i think the starting point can be a little bit to the right so like that maybe also a little bit lower more low yeah why not and um i think now this can be left a little bit i think this looks okay uh the last thing here i think could be lower maybe not that one mmhmm okay something like that this is just fine so i'm actually gonna copy this draw make it into a yeah some smart things need to happen here because this here on the right should actually disappear at some point yeah this is not very easy it's the first thing that we need to make disappear to make it vanish when the character rotates like that so if we go to the draw eyes for example let's take this as a reference draw years and draw a year like this i think it's pretty much the same as what the eyes are doing maybe a little bit different so i'm gonna make a new function here draw here uh x scale or scale x like this and the draw i is having here these two things i think we will need something similar as well and ctx restore because we are scaling them okay two years there uh this one is quite yeah it is scaling itself now it's better but it should also it should also scale uh i think not just in this case not not just with the maximum i think we just put here x offset let's see yeah it really needs to be more here somehow and i would like it to squish more yeah this is good but um these locations also need to be translated somehow let's do ctx translate scalex no nothing vertically just horizontally and it's way too much so let's do it by a small factor yeah i think this is fine now i'm worried what happens here it's not horrible some squishiness is happening which i don't necessarily like but i think it adds to some personality to the character so it's fine okay and uh drawing the head i think it's just too high up so when it's normal like this i would like it to be a bit lower it's just too too high up i i think so or maybe the body needs to be higher let me do a quick translation for the body to be higher and i think that will fix the problem so here okay maybe a bit too much point six okay yeah a little funny shape here but i really think that when i'm gonna do the um here with the physics hopefully i'm gonna do the hair with the physics then it's gonna be good and the year here i don't know if it really needs to be covered i would definitely cover it but it's not so easy to do that i think also we might do some tricks with the with the hair later to cover it but uh don't have a clear vision there yet my hair now is also a little bit different than in that initial drawing that we are getting inspiration from and it's shaking also to the sides so it goes also here i might need to redesign also the character a little bit maybe these top parts don't need so much attention well let's see yeah i think i'm gonna actually i don't even see my ears anymore because there is hair is covering them so i think that i don't need to worry much about the ears there even if you will see a little bit here because the hair will be covering it it won't be a big deal i think we're fine but now uh i think we are done with this kind of basic character movement and i'm not gonna polish this much more maybe something with the nose if i get some better idea uh to make it look nicer when it's straight watching straight at us like this uh but i'm quite happy with what we have at the moment here these lines look too thin i think that we need to stroke the that part okay this gray here is not needed anymore uh huh so let's put here skin part of the body and this is gonna be um shirt part of the body and now here we have those that color or the neck neck region and the shirt second part like that and so this draw body hmm um yeah the problem is stroke should be after the fill there this one is fixed but this one i don't want that connection there so i think i'm gonna do fill and stroke now this last fill is not good it destroys part of the stroke so this part here is something i don't like now i think i just do begin path yeah begin path that and fill i need the move to before so move to there okay almost i think this control point needs to be lower so like that no oh this is so horrible yeah this shape now is just this part right here i should use a move to a bit higher up so let's leave this as such and this move 2 goes to 89 here that looks good okay finally great uh i will also remove now a b and c again from there and um let's move the draw body function in a new file let's call it body dot js it's not a class but i don't know it will be very useful to keep everything inside the class eventually but now i just want to separate the functions so that one goes in the body and now let's put in the head draw head and all these other things draw ears draw ear draw nose draw hair half hair beard half beard eyes high this one we don't need anymore i'm not gonna worry about this glass i think so let's put this head js okay and let's clean up a bit what we have here so um high speared hair nose ears it's fine and i'm just gonna group these a bit like that i think they're a bit clearer and i like to separate save and restore so that i notice them easily whenever these modifications to the context are are done yeah the todo for the nose is still here draw hair yeah to me the code is clear but there are many many of these values that are used to define the shape and it's actually not easy and not really needed to come up with names for these things i think it would be possible to export all these values in some kind of json format or something and then load them in but i'm not going to spend time on on that this feel can happen before the restore here i think what was this half beard only the stroke is affected in in width when you do that so we have eyes also so here we have the eyes the main the white part and then the eye brows just one and uh what is this thing oh yeah the let's call it pupil i'm not sure how you write it but it's gonna be like that now i don't have internet and what is this oh yeah that one line this one line here half contour line something like that and let's separate that as well so i is more complicated it needs special comments there the beard doesn't really need special comments because it has some variable names that are selfexplanatory and of course you may need to play around with these a little bit to change but i did all the drawing that i want to do and i'm happy with it i don't want to update this anymore so that is the definition of this character pretty much and same goes for the hair i think it's well commented here this scale y is actually not used for the hair apparently so let's remove this so the vertical squish thing is not used anywhere this is just the one here good simpler code this simpler now okay draw body is not defined we need to go to index.html and include these scripts before we write this script right here so let's say script source is equal to body js i think like that and hit js okay things seem to work again this is so funny it looks kind of unnatural it's a very unnatural i stopped liking it now i really think that the hair is going to change a lot of things here i hope i hope it can give a 3d look to it and also the fact that it's going to move it's going to make things better yeah some polishing will be needed we are not done i still have maybe 20 30 minutes maybe even a bit more and um i wanted to do something completely different but let me clean up this a little bit so a little bit more still quite much cold here what do we have this lerp i usually have a utils file let's call it math this time i'm gonna put there the linear interpolation for example and these update points something quite general draw point i think i rename it back to utils and put also these this draw point there so it's not just math but now also some visualizing thing that we use in different places and this is just the helper thing this function will be removed like that like so now live points so these are those things that we have been using but this bees i guess it's used somewhere at least to define that head the colored part the skin colored part of the head okay we'll see tomorrow okay so now this utils let's include utils as well i'm gonna put it first here utils js we keep these points then the animation so this click and the get coordinates actually also the this event listener will need to be removed afterwards so i mean doesn't need to be removed but it won't do anything it's just printing stuff in the console so yeah animate function will stay and it has draw me and this part will also be removed it's just that background character i think we can actually remove it even now but let's just keep it a bit longer for reference here okay and the draw me function does a little bit of scaling so that the character appears a little bit more to move sideways not really 3d but at least if you're not paying close attention it feels like that and this is not fantastic really but not horrible i think the hair will make a very big difference and the beer beard might be adjusted a little bit after that let's let's see maybe the head could be the body could actually be a little bit higher up also yeah okay this one is the slider so this is called when hmm yeah i had some more some other ideas originally to make it look even a bit more 3d with these other things there but and the abc points they were supposed to do something a little bit more somehow shape the head but it's not horrible okay i still want to do a few more things so let me remove these points again they are disturbing a bit now and i'm actually gonna hide that character on the background this circle here and i might need that code again to compare in the end but for now this is what we are having and uh oh looks like some space here at the bottom let me just make the body be a little bit longer at the bottom here so outside the screen those two points i think it was a bit far enough anyway but this is some side of the canvas that just looks like that okay so what i still want to do now is um add a completely new thing i want to add our my camera my webcam and somehow do basic image processing there and see if i can move this head with the camera instead i think it's a bit too much now it's late but at least i want to start something so let me see i want to do this here let's just make a new file called this camera js and include it here camera js and here i'm gonna write navigator media device is get user media and i'm going to get the video but i think that i'm going to also use the audio later i think in the end i will want to support uploading a video and then it just the character is going to move according to that video somehow let's see so but for now just the video here i think is just fine so we get the user media and this returns a promise so we do then uh we use the data so we have the data coming from the promise when the promise succeeds and uh i'm gonna define a video object um i don't add it to the dom but element a video element and then i'm going to set this to the data that comes from the device so source i think it's source object is the data and we are going to play this video so if i'm going to change this from the camera to the to some video this is where i want sound to also display later i will remember i don't need to do that so then when this is loaded it's like on loaded data we get a new function new callback function and here i can start to do something with this video like start the processing and so on so we might also have an error if when you do this it's going to ask you on the screen if you allow or not to to give the camera so this might give an error and we can catch that error like that uh i just make an alert here and say no camera failed something like that okay why is this highlighted like that so we have this i'm not using the error anywhere was it so that in javascript catch is not like this but it's a callback function okay and now i have to close this one i need to close this catch somewhere this is a function i have the alert closing the function and then i have to close this catch you i just don't know what the problem is let's um run this and look in the console what is that oh this then no no no no no this is then this then has to be closed before before the catch it's then and then it's a catch yes okay it allows the camera and then could not start video source i think this is the error message from here it could be that i'm using the webcam here and that webcam doesn't let me use yeah uh let's see if i can make the web the browser have a different webcam i have a webcam in my laptop here as well in the front okay so i did something maybe refresh okay something worked i think it's using my front camera let's try to display this camera on some other kind of canvas i'm going to put another small canvas under these sliders there so i'm going to say canvas id cam canvas and i'm going to get the reference to this one as well somewhere here in the camera code and i will say camera canvas um i think i make this one as big as the video is going to be it's going to simplify things a bit and let's put here it i can scale it with css later and let's try drawing the image so i need i need a context for this one as well okay and i'm gonna draw the image of the video at zero zero so i don't need the width and height because the canvas has the same height as the video so let's remove this log and try to refresh okay but this is very large now so with css i'm going to say um max with okay i think this is just fine for debugging and fits in my screen quite nicely i think so this is the other camera from the front and that's just one snapshot because we are not animating these cameras in any way so i'm going to copy this style from here and i'm going to add it for cam canvas like this so when i refresh now okay now the room here is not fantastic with the lighting and everything i might change the room tomorrow i think i'm going to use a better room and um let's try to begin to do something with the camera here so i just hope i i at least get it to animate so here i'm going to call wait i already have an animate function here okay so what i need to do here is take this video out with let like this and i'm going to go back here and say okay this cam canvas also needs to be up here and camera context okay so camera context camera context draw image to video and then draw me on the other canvas so now the video should animate if i save this and refresh what is happening okay it works it was it did an error here because the video was null and it never got to request animation frames so animation didn't start and yeah even after i pressed that allow button for the webcam okay now if we have the video then do that and i really want to get somehow the locations of the of some pixels there so i always use these kind of markers i don't have a blue marker here tomorrow i need something blue and yeah spiderman is blue let's try with spiderman so let's write the function for a utility function for get marked locations so we're gonna look for the color blue so a color of zero red zero green maximum blue and we're gonna use a threshold like this and i'm going to get the data from the context i need here um the image data as well so here i'm drawing it on the context so then i want the image data camera context get image data from zero zero to cam canvas width cam canvas height like this and then this image data has a data attribute i just pass it completely to that utils function so the marked locations are going to come from get marked locations using the image data and the color and the threshold but i'm gonna keep those values inside of here i might put the color picker or something let's let's see later what happens but yeah get marked locations from the image data and let's console log logs length like this so the number of items in this array so now in the utils i need image data here also and let's just console log image data data length see how big this array is i remember this kind of thing quite well an error okay this is not returning anything yeah so here we have 0 is this empty array and this is the size of image data so these are values are this image data data is having i mean this data now is having this many numbers and it's the width times the height times 4 because each value for each pixel is the red green blue and alpha components so i'm going to loop through every four groups of four and i'm gonna say red is going to be data of i green is data of i plus one blue is data of i plus two and alpha would be data of i plus 3 but we don't need that so now i have a rgb value for this pixel now if this rgb value is a match our gb is a match to our caller that we are given this blue color there so match between these colors and under the threshold let's say the threshold is going to be something like 50. then this is gonna add something to this locations array so i'm gonna say here an empty array to begin with and uh the locations is gonna push an x um an x and a y so the x and the y we need to calculate them x is going to be i think the floor of the index of the pixel so the index of the pixel is i divided by four because we're going in groups of four and then the x is going to be p index divided by image data width and y is going to be the modulo i teach this all the time in my videos like all the marker effects have this this thing there i'm just trying to do it mentally and i hope that i don't mess up index modulo data with and these values are going to go now to our locations array and which we return here so we need two more things we need this match function match color one color two and this is just going to end the threshold and this is just going to say if the distance between color 1 and 2 in the 3d space is less than the threshold then it's a match so return distance c1 c2 less or equal to this threshold and here we say function distance and this is going to be distance between two points p1 and p2 in 3d space um euclidean distance like that no like that okay and now return square root of this distance so this should be the distance in 3d space any space really because we have here a for loop like that so now what we are going to do is test i think i don't know i'm getting tired let's refresh so it's a zero there but if i bring this cup here it's still zero i think that these uh blues i need to go soon maybe five more minutes i tried to detect some blue color here um i think the value of the threshold could be bigger i think something doesn't work so let me put a break point here and go inside of this function okay things look good so i don't know why it doesn't work a bigger threshold is not a great idea because we are approaching too much the values of other colors oh okay well something blue there but i'm gonna go tomorrow in another room oh i have a pen here okay so something works i think these colors are detected let's see 10 more minutes i want to do something with all these let's average the locations so these are going to be x y locations the values from here so i'm going to say average is equal to x of 0 y of 0 and for average x like this and i need to divide this by the number of locations both x and y so when i do this now and i return this oh i'm not calling this anywhere so back in index.js where we have here the locations i'm also going to get the average location like this and that's going to be what i'm going to log next so we have not a number there because the locations is empty oh yeah and then it's dividing this i don't want not a number there so here if we do have locations if we have locations then i'm going to do that otherwise i just don't so now what i want to do is use this location of this marker here to connect it to these sliders there so this info value of the slider and this attribute was x and y right so if i just send update points if i just send update points with something that has a value between minus 0.5 and plus 0.5 so if i go here and say value is going to be average dot x minus image data width divided by 2 and divided by image data width so this is going to give me a value for x so now what this will mean is how far is the marker from the center screen you will see and i did the same thing for the y as well so let's put here y like this and average y image data height like this and let's now instead of that value log x and y from here so now this is close to zero and this one there still zero on x but the y is big and now the y is negative okay i think i'm making some mistakes here is this average calculated correctly let's go back here and print what we had previously i didn't really look at those numbers before so they are flipped x and y are flipped yes this is why this is x okay and here now the new x and y values after scaling them yes so here x is close to minus 0.5 x is plus 0.5 y is plus 0.5 y is minus 0.5 and now that we have this x and y value here i'm just going to call update points with something that has a value of x and x so here update points was waiting for this attribute of x and y and the same thing with y and y there okay i like it uh this recognizing this blue color needs a bigger threshold maybe or not great but uh testing like this is sure is easier now and uh if i'm gonna put this on my in my head or something tomorrow then yeah i think i can make this somehow uh move with my head if i put some kind of markers on the face so i'm gonna do something like that tomorrow and i'm gonna think about it while i'm walking home i'm back and i would really want to get this character talking as well somehow depending on what i do with with my mouth so maybe i will have many markers on the face or something let's see but this is somehow quite nice already i'm happy with this um not perfect and some things feel a little bit strange but let's see how the hair will adjust and how the hair will fix some of the things and so on yeah okay see you tomorrow it's the next day now and i'm walking to work and i've been thinking what will happen today and it's going to be a very different day because yesterday i had no idea what's going to happen we didn't even know what project we're going to start but now i'm going to begin with some more code refactoring i'm going to change everything to be as objectoriented as possible because now functions are floating everywhere and if you want to import this in your own project it's it's a chance that something is gonna conflict with something else so not good and doing this refactoring stage in the beginning is also great because i'm not going to remember all the things that i've been doing yesterday then next thing what i'm going to do is implement some physics i'm going to use this verlai integration technique because i've used it so many times and i think i remember it and what i'm gonna do with that is eventually do the hair but uh that image of myself that i drew a long time ago initially had things like this around the around the neck and that's what i'm gonna apply the physics on first uh kind of like a simple pendulum and then i'm gonna move to the hair which is gonna be a bit more a bit more difficult but anyway uh physics for that so i will start with some kind of utility functions for doing linear algebra i'm gonna need some help for that and then a little bit of physics and last i'm gonna do some basic image processing and this is going to happen so that i'm going to have markers on my face so there will be markers on the face area they're going to be around the mouth somehow so that it can change the drawing based on how i'm opening my mouth i hope that's going to work i'm going to also use some reference point here so that the head movement like this is going to be picked up i didn't have any great markers at home so i took with me a doublesided tape which should hold on to things i hope it's gonna hold on to my face especially because i have the beard and um it's white so i also took one of the blue markers that i've used in many of the videos to color color them i really hope the detection is gonna be good i'm going now to a different room so the lighting there is better and i don't think i'm gonna have a big problem with that but detecting the all those points and figuring out what the face should do it's probably gonna be a challenge let's see so the physics is something that i'm gonna start with and then this face detection thing i also have scissors because i'm gonna need to cut that tape somehow good that i don't forget things like that yeah so physics and then that uh face detection thing according to the markers and i'm gonna do those immediately when i arrive because i want to be as fresh as possible for the heavy stuff and then whatever fine tuning i can still manage will happen afterwards so maybe something like that knows that i don't like how it looks like i have some ideas about it maybe using transparency on that line and making some new lines appear as the face is moving we'll we'll see but yeah so uh heavy things at first and uh at some point i'm gonna need a way to toggle between between using the sliders as the input because i want to have users able to somehow play around with the avatar even if they don't have a webcam and the webcam and then the third thing that i want to do is record uh a small video of me saying something like hi i am produce avatar and maybe test a few movements uh talking and moving the head so that one will be the default when you enter the page um a video playing of myself with the markers and um the avatar is going to hopefully do the things that i'm doing at the same time and from that you can change to the webcam but you need some kind of way to mark the face like that and um if not then you can change to some um to just use the sliders there so maybe i'm gonna use a drop down simple drop down for that or um radio box is or something anyway that's the plan so refactoring oop um physics face detection i mean face pose detection using the markers and uh a better interface and the video for that so hopefully the first two happen before my lunch break i also have another meeting and then the other two happen afterwards and uh yeah i'm gonna have about six more hours to put into this i think so let's see okay i'm in a new room now and the lighting is much better here so now when i use the marker which i took from home it's going to be detected much better than yesterday when i tried to do this so now i can move the character with this blue blue marker here in the screen so i will probably have something like this on my on my head and adjust this somehow and i really want to do something with the mouth as well so let's see later but first a little bit of refactoring and i'm going to make this character here using objectoriented programming so let me go to index html and what i want to do here instead of draw me i'm going to say something like uh avatar draw on on the context so i'm going to give the context here as a as an argument and this avatar is going to be an avatar object so i'm going to define this in an avatar js file class avatar like this and i will give it the constructor and the draw method so now um the code in this draw me is going to move inside of the avatar's draw method and context goes here in case you want to use multiple avatars multiple canvases something like that right and this draw me is not needed anymore but we need to define this avatar so we are going to say avatar new avatar here as a global variable good and draw body and draw head these are going to change to be methods inside of the avatar and they will be private methods so i'm going to say this dot hashtag draw body and same for this draw head so let's do the body first it's going to be this function from here i remove it and i put it here as a method the drawbody method and the ctx should be passed here as well so that the body knows where to draw itself so it begins the path um this a point is a global variable and that's something i don't like we are going to need to pass this down to the avatar so it knows where it should be looking at so a actually stands for that point that avatar was was directing its head at let's see the other code for the draw head and i'm going to have to copy everything from here this whole file goes also in the avatar class and it needs to become methods as well so these functions will also be converted into methods into private methods actually and they will need access to this context so i need to pass it down so private methods because it's its own responsibility the avatar knows how to draw itself and these points are going to somehow be important because they are coming from outside they are coming from the code that processes the camera here or they are coming from sliders here which currently i don't think work or oh they do work uh if there is no blue in the screen uh then they seem to work which is quite nice so i'm gonna have also some kind of toggling between how to move this character around so um b and c are really not much used i think yeah they are just used for the colored shape of the head colored with the skin color i wanted to have different ideas for that i wanted to somehow use more this interpolation and these ranges here but when i saw that it's becoming somehow tricky to do and i added there some negative range to make something work with c i realized that it's somehow uh becoming too confusing so i did everything relative to point a and the other ones i think we may not even need them let's let's see but let me finish this code now so uh draw years all of these things here they need to become method calls and private methods there's no real reason for the outside coders from the outside this class to be able to call this method and same here with the draw year now and all of these that are taking a here they need also the context now so let's pass already the context there in addition to this reference point to all of these things so context will be will be needed there right and um method here looks good so let's go down to this drawn nose and make this one as a method as well our to do is there if time at the end i will do those fine tunings the draw here it's going to be draw half here like that and these need the ctx as well now and here yeah looks good drawbeard also private method this time so doing the code like this means that we are we can include this avatar class and we don't have to worry if somebody else has a function called draw half beard somewhere so very useful um in separating the code and making it um not interfere with with other things draw half beard and i'm also relearning what i did yesterday so that i don't so that i know where i'm at pretty much okay so only problem now i think i don't need anymore this body js and this head js let me delete these like so and in index html i'm going to have to include avatar js instead and i think it should still be able to access the global points from here but i'm gonna do something about that let's refresh errors for some reason it complains about this context there let's put the breakpoint and undefined inside of this draw year oh i forgot here to pass ctx okay good yeah so much better i think but these points are something i don't really like very much so first of all i'm really curious can we do without them somehow let's activate these points again to be able to to see them where they are and do they really move that much or could we do them relative to a in some way so c is actually i think b doesn't move almost at all so maybe i could replace b i could maybe remove b in the beginning and just try replacing it with these values this value here let's see i just delete it from there and from here and inside of this avatar uh we use be here so how about we just put 0 and minus 0.77 does this still look good b is not defined oh draw point b i don't want to draw that point okay here there is a problem here there is no problem so how about we just make it a little bit lower like um like this we don't need b anymore great and c is looks very much like that the bottom point of the beard it was relative to a let's see so when we draw the head and we draw the beard here we have the draw half beard and bottom most point so this point quite complicated it comes also from this vertical scaler i think but not impossible to figure out so let me copy this here and when we have the vertical scaler so this means um this one right here so the bottom most point is actually this something like that and this is c pretty pretty much so let me just have here uh b and c like that so they are not global anymore they are going to be just these local ones and i put here be like that so i remember what they are but they are not so important that they deserve drawing in the first place and definitely they don't deserve to be global variables a is an exception because it's going to be controlled by the sliders and this marker so c here is going to be okay b dot x b dot y so i'm going to use this everywhere so that i don't have the same hard coded values repeating themselves the others are important to be like that because they define the shapes and here c is going to be no comma there i think like that and i believe this is correct i'm going to stop drawing c and in the beginning i just have a there now whoa something happened oh oh ref is actually a in that case so c is defined according to the a y offset okay something bad is happening there haha it was first translating to ref yes so um we without translation i just first i just have to add the a coordinates there so a dot x a dot y plus this one okay not exactly sure why it's happening like that but it's almost correctly it's almost correct so it needs to be hmm so in the draw beard we translate today and then we draw half beard oh it's doing some scaling there oh so complicated yeah this scaling is also there complicated complicated stuff and scale y is just the y offset so a dot y offset like that one minus that okay i think that this needs to be multiplied by this no maybe divided by that no um i think everything here needs to be multiplied by that yes okay so now we don't need those things anymore and just that a point is controlling the head and i would also like to clean up even this a bit more um i mean this avatar class here is quite big now so maybe i would like to extract these methods somehow let's try to export extract the eyes draw eyes let's see if we can say this right eye draw and then give these things there like so and same for the left eye so i'm gonna define an eye object i don't think i need two of them and it can be a private attribute here okay so let's now here in the top say this i is new i class i and draw the draw method it's gonna be this one from here so it's gonna have a scale and the context on which to draw it and i think that's pretty much it empty constructor here so if i refresh now i get some errors is there something wrong with the private attribute okay i'm not sure what's wrong with that but let's just leave it public it's not the big deal there okay so the eyes don't work properly what happened here did i do some bad thing oh there was a minus did i lose this minus at some point yes now it looks good so with the i like that i'm going to take it out i'm going to put it in i.js like this and i could do the same for others but i think i'm spending too much time for refactoring let's go to index.js and import i js as well so now everything works as before but the code is better it has the eye here in its own class so next there would be this beard with the draw half beard so i think i'm gonna try to do it let's go where the draw beard is and say this beard draw using a and the context so at the top here this beard is new beard beard js i'm just going to copy i class and say here beard and i don't need this draw beard anymore draw beard is going to go inside of the beard object and it's going to become the draw method like this and draw half beard is still going to be a private method here inside i think there's no way around that we need it here so that's good and here in the alpha tar nothing else needed i just need to import beard like this so code is better much better now next thing uh i think nose doesn't necessarily need its own class it's small enough year is small enough i think here this will be needed because because i'm going to make it very complicated soon so here js and here i'm going to take out draw hair and draw half hair and it's already kind of complicated it says it's as complicated as the beard so i'm gonna take these methods out from here and put them here let's copy the beard code and just replace with this one probably i wasted more time copying that but somehow and the draw here in the same way yes no problems with that so the beard also will need to be defined somewhere i mean hair did i say beard okay right so avatar js has not so many lines anymore has the body drawing and then this is a debug thing that um maybe i'm going to actually make it like that if i want to debug then i'm going to show these points i may have multiple ones later and in index here i can have a debug true so now if this is true then the points are showing if this is false then the points are not showing so i don't need to comment out things all the time and here this a point is something that i need to fix it doesn't mean anything i'm i don't think i'm gonna need anything else just a point where it's looking at so let's just call it look at and i will make a comment here point a when we debug so this look at is a point like this and this a here won't be needed anymore so i'm gonna remove it and we will just use look at everywhere and when we define the avatar i'm going to give it this look at point as a reference so now here this is going to be a so where is it looking at every time we have a capital a so i'm gonna look for it matching the case and there's a full word every time we have this kind of capital a i'm gonna replace it with this dot look at that one can stay like that it's the label and drawing the point with our utility function okay saving and here we have that update points function so this was the thing that moves with the slider so update look at update look at update look at and i don't need the for loop here anymore i just have p equals to look at so right refresh allow no error when the camera because i still have update points here so update look at the value of x and the value of y yes okay finally finally code is now as clean as i'm going to get it in this project it's not all about the code quality i think code quality is very important and i don't want to give some bad bad example to anybody everything can always be improved but you need to stop somewhere also in real work okay done it's much better now at least yes so uh next what we are gonna do is physics so let's let's do the physics next and i'm going to go quite quickly through these things i've i've done them multiple times and i have an idea how they're gonna go yeah so let's have a file physics js and in index.js include this one as well okay and i'm actually going to start with adding some more utility functions so there will be some math functions that work with the vectors because i make mistakes if i don't use vectors when i'm doing the physics it's just so much easier when you work with x and y combined or i usually like vectors to be using arrays so i have the array of 0 and array of 1. it's very useful because then i can use for example this function here that works with arrays this could have also been with that so now i have a mess of points and also these kind of 3d points are different they don't have xyz but yeah it's a little bit i should refactor this so here the location i prefer to use arrays everywhere so instead of an object with x and y it's going to be a vector with zero zero here yes it's just much better when the code is more is consistent everywhere and because we are using 3d here also for the color space it makes sense to have it like this these functions become more general yeah so we have the average and we are using this average somewhere in index i think no in camera no not in camera where is the average being used it it is an index some oh i have these things on um yes so here average of zero and average of one and um i don't think i need this logging anymore and this comment from here let's try again yeah good everything still works so where was i utility functions for more more vector operations so i just they are simple they are just for vector addition so for example you have two vectors here like that and you can implement this by just considering 2d vectors but i really like to go and say um the new vector like the result is like that and go through all the elements so it would work in any dimensions like this like so and return this new vector like this so this is for adding vectors now subtracting vectors we also need things like magnitude of a vector so essentially the length of a vector or just one vector here so i'm going to say this magnitude this is the same thing as the distance from zero so i think that i can actually reuse that function here and say return distance of v and an array of zeros so new array of the size of the filled with zeros i think is the syntax i hope this will work so the magnitude is how far from zero this is pretty much and we can reuse that function there and also very important function is to be able to normalize so you just get essentially a vector with a length of one any kind of input vector you just get output something with the length of one but it keeps the orientation or scaling to scale is also important so scale let's let's actually do this scaling first and then we do the normalization so when you scale something you need the vector but the other one is going to be a scalar of a simple number and i'm going to do this by going through these elements and each element multiplied by the scalar like this and now normalizing is just a return scale of the v with 1 divided by the magnitude of v so you divide it by its length and you end up with the value of 1 for the new magnitude so simple relatively simple things i i think and they are now more vector utility functions i can separate these a little bit so this is now general drawing here let's call these vector map and this is something to do with and that let's move linear interpolation here as well it's quite related i think and the last one was just drawing things general very general things so now our utility functions are more of them we have more utility functions now and the the physics that i want to implement are going to be do i have some error here i don't think so okay oh there is some error somewhere here i copied that so it's everywhere okay nothing broke i just added new code so in the physics everything will be based on it will be based on particles so this verla integration method i want to implement works well with particles and then with some constraints like sticks between the particles so class particle then here i'm going to put it at some location so each particle will be initialized somewhere let's say location like this and store it and when particles move it's useful to keep also the old location in memory it will be useful in the mathematics so i'm just going to initialize this with the same location in the beginning so the particle doesn't move from some past last place and we need to be able to draw this so i'm just gonna do simple things like begin path and then let's make these red so they stand out and we easily recognize them or actually orange i think it's better red than green like the green shirt color is sometimes confusing to people so uh let's just make a small circle there at the location since these are going to be vectors i can say here location of 0 and location of 1 or i can just spread the location object like this and give it the radius say 0.1 and um the arc method works like that so i need to specify there the full circle and these need to update according to some kind of forces so usually we have some gravity i don't want to leave these as global variables here but let's see later so just some value for the gravity there and this would actually need to be a vector and since we're in 2d space i'm going to say 0 horizontally and 0 vertically like that and the update so what i'm going to do now is pretty much first figure out if the location if the particle is moving from its old location somehow so i'm going to get a velocity vector by doing a subtraction from this location to this old location like that and i can predict the new location to by adding to this location the velocity vector that we just calculated so where it came from where it's now you get that difference the vector connecting them and you add it to the current location to get the new one but you're not done yet because then you can still add this gravity for example so this actually needs to change and we say new location is equal to add to new location we add the gravity vector and we also have to update now old location to be equal to this location like that so we don't lose it and now we can update this location to new location that we calculated previously so i use the extra variable there so that i can still keep the previous one and i don't change it instantly there okay so with this kind of particle here and an update and then draw method i'm going to go to the avatar and uh here i'm going to just try adding a particle where it's looking at yeah so let's see this part particle new particle at look at this is with x y because it's in pixels so i'm gonna say this look at x and this look at why i'm converting it into an array here and i don't think i need to give it anything else and now here in the draw method i'm going to say this particle draw on the context like so so if i refresh i get errors okay oh wow i think this location might be a kind of a reserved word and this is uh or maybe not let's i think i'm missing this there yes i think now it should work let's see okay so we see now this particle um initialized where a where that look at point is in the beginning but it's not a reference to it i'm taking its x and y initially when it's initialized and then it stays there the particle um i think i'm gonna make the particle look a little bit different so let me go here and say i will make it red so i will make it a smaller radius 3 and stroke it will be red but i'm also going to make a stroke to it that is going to be white so that you can see it better okay i think this is good so that's the particle but it's not falling i said it should fall with the gravity but we are never calling this update function so here let's call this particle update first and see what happens something happens it's not there anymore i think it might have moved very quickly because this scene is in such a small or i don't know what is happening there this number is becoming huge all of a sudden and this becomes infinity so what what gives let me debug this velocity vector here something strange is happening no matter what the gravity is these numbers become big and small i mean negatively big let me go to the utils maybe i made some mistakes here with the vectors so oh subtract this minus probably this is it let's save okay and now the point is falling and it's actually accelerating it's falling faster and faster and faster and that's great so i would like to do a couple of things here and i will start with this let me show you the picture we had previously there like that so these things here are missing right now and they actually used to be um in my original drawing they used to be something hanging from there so i would like to make those move a little bit as the character is moving so um when he moves left to right like this i want it to fee to move a little bit like a pendulum so i'm going to put one particle here and one particle here i'm going to make this one up the one up static and the one at the bottom it will be constrained to be at the fixed distance from the top one so let's first define these particles and um actually uh i'm just going to define another one beneath this one so let's add a function here i will refactor this at some point but update particles and this is now going to let's put draw particles as well it's it's nicer like that and here we have particles is equal to an array so the first item in this array is going to be one particle at that look at and the other item in this array is going to be another particle that is somewhere below that so in the beginning i just do something easy like this so below the first particle and now what i'm going to do here is for this particles for each particle i'm going to loop through all of them and say update these particles and then i'm going to say draw these particles on the context so here this method will need that and i'm going to say here this update particles and this draw particles like this so this should now let's go back to our code this should now show two particles that are just falling like that but the first one i want it to be static so i think i wanted to fix it somehow to i will add the third parameter let's call it true and i'm going to fix it to is fixed so i i won't allow it to move like this and in the update none of this needs to happen if it's fixed so if is this is fixed return i think this is fine and i don't need to log the velocity anymore that was just for debugging there so now what happened where is one particle um no i don't think this is this is not the problem what happened so back in the avatar i have oh i'm passing here inside the array and i think it had consequences okay so back here if it's fixed i don't have to update so this one is fixed there right okay so that one is fixed but the other one is not so what we need to do now is uh constrain the other particle to uh the first one so for that i'm gonna implement here a segment class that will have a fixed length and this segment will be between two particles so i'm just gonna say here a constructor for a and b and i will say here okay i don't want to confuse a and b with the way i'm talking about those a b points from previously i think it's it's clear enough i'm going to save a here and say now let's just say particle a particle b okay and let's calculate the distance between these two particles so i'm going to say a length for this segment is equal to the distance between particle a location and particle b location like this and i think that's all i need to know about this segment it's initial length when it's defined and then to draw this segment i'm going to use a context and i'm just going to do this a simple line i think i'm going to do a red line just to debug for now so ctx begin path ctx stroke style red ctx move to this particle a location and here i can spread these into two values because the move two needs two values and line two particle b location like this i have a message okay oh wait there was another right so um stroke like this and the segment needs to be created also somewhere so here let's say this segment i pre i prepare it to be an array already is a new segment with particles of 0 and this dot particles of one so the ones we defined previously like this and uh i also i'm also gonna need update segments but all of these are the same all of these have update and draw update and draw so maybe it shouldn't be update particles and update and draw particles but update and draw we already have a draw update items and physics item and draw physics item and this is going to be a parameter so items and the context there so here i'm gonna have to change these like so i i'm gonna reuse this same code to handle the segments and the particles so here update physics items and draw physics items first i'm going to give this particles and then i'm gonna give this particles here but after we do that i'm gonna give this segments this segments and i don't have yet the update for the segments yet so let me comment it out and just see if this code still works um not in an array here these are just two arguments okay so now you can see also the red line but this is not a segment i mean it is a segment that is changing length but uh it should be like a stick so our update method here inside of the segment class it needs to constrain it to the initial length when it was defined so i'm going to say here update and let's just see what the new length is first so it's going to be we subtract from this particle a location to this particle b location so this is the difference between a and b and currently and i'm gonna need the magnitude of this so how i mean so far we we actually have the vector difference yeah and the magnitude of this is going to be magnitude of like this and we need the difference between the two magnitudes so how much do we need to relocate the particles so that they are still close to as close as in the beginning here so the difference between this magnitude and this initial length so is going to be magnitude minus this length like this and i'm also going to need it's going to be easier if i also get the normalized vector between these two because then i can scale that in both directions and and fix the segment if it gets too long or too too short so i'm gonna do here the normalizing vector normalized vector by normalizing this d vector so now the length is going to be 1 after this but it's not going to be losing its orientation okay so now what we can do is um move a and b locations of a and b with this difference with half this difference in each direction so this particle a location is going to be let's add so let's add to the current this particle a location we can scale the normalized vector from above with minus the difference by two so i'm moving um one point by half and i have to think about also these fixed points later the ones that don't move but let's just do this now and hope it works and the same thing for b but plus here so one goes if the segment is longer than it should be this point goes half the difference that way and this goes half the difference that way if it's shorter then it goes half the difference have the difference opposite direction so something like that great i hope i really think this is going to break refresh it's not broken but it's not doing oh i'm not calling this here because we didn't have an update method previously normalizing is not defined i think it's called normalize i was just talking what i'm doing okay and now this point is there interesting that this other one doesn't oh it does move it if you look closely you can see this one is actually falling very very slowly and that's because this one is pulling on it so it's going down a little bit and then this segment stretches and then both of these points adjust because here we have we are moving each of them even if point a should be fixed actually so i'm gonna need to take care of this somehow so this code is fine if the points are not fixed so if for example this particle a is fixed if it's not fixed and this particle b is not fixed then this is just fine code here but otherwise if a is not fixed then a is going to move twice that difference so it's going to do all the work so to speak else it means b is the one that is not fixed i don't need this if statement i think so what happens if both are fixed so if these are not fixed if a is not fixed if b is not fixed let's just be careful here and if b is not fixed then b is gonna move with both of them i mean uh with double the um yeah but uh if both of them are fixed then nothing should happen i think this is this should work i hope so if i refresh now i think this point doesn't move anymore but so far there's nothing fancy happening here so what i want to do now is fix this point to something maybe i'm going to fix it to the a location so let's say here this particles of zero so this point from there is gonna be this dot look at at each time we are drawing um actually i need to do to look at x and this look at y converting to an array from this point of pixel point object now it's breaking the location of the particle zero has to be like that okay and now this gravity is is too weak i i want it to be stronger so physics gravity okay so now when it's moving um that segment uh always constrains the bottom particle the particle wants to go down then when you move to the side it wants to stay there its original position but then that segment is going to pull it somehow so now i'm i'm getting pretty much exactly what i want but that's not where we're gonna put this so yeah i let's let me try to swing it like a like a swing like give it momentum when i should give it momentum and this is fun okay it's going more and more okay um i want this to be somewhere here attached to the body so that's gonna be this is gonna happen in the draw body thing yeah and then we are gonna use these same things for the hair as well so let's go back here and actually i would like to have in the avatar a body as well this all the because men much code is going to be their new body and hope this is not a re reserved word so bode.js and let's include it here as well like this and then both djs might be a reserved word but let's see so uh draw body is gonna be just a method in class body that is called draw like this and the shirt color let's actually pass it here uh i also need the skin tone so we don't use global variables at this stage okay shirt color and skin tone okay so this is now body and inside of avatar i all the draw on the context okay look at needs to be passed here as well because the body is also adjusting a little bit with that so draw with this this look at okay why is it red oh i'm not passing the colors here when creating the body i should use shirt color skin tone these should be also passed here in the avatar when creating the avatar to avoid issues great okay it works so now i really want to add these particles not in the avatar but in the body and i think this is just fine to copy here but the code here for updating the physics items drawing the physics items and these things here this needs to be extracted in the physics file here so i'm going to make a class physics and i think i'm going to use static variables so static functions so i'm going to write here physics update physics items draw physics items probably this draw should be not in physics but in some drawer or whatever but this is just fine and these go out from there to here with static because we don't initialize this object and i think this is where the gravity goes as well so static gravity there and the particle takes it from physics it's better like this a little better it's not perfect but i didn't really know what i'm gonna do with this so let's remove this and inside of the body after we do all the other drawings i'm gonna put here this code yeah save this refresh and an error okay the look at is no longer with this here i'm passing it like that hmm i'm just gonna put zero zero for now zero plus zero three i don't need the look at in that way at least so let's just have it zero zero mmhmm um why aren't they appearing um why is it not appearing there it should appear right i know this location is not good it's under the head it was under the head oh boy yeah okay so so it's drawing it there but i really want to use this look at point somehow so let's first move it to location there so it was where was it somewhere here so let me put it actually somewhere lower so let's put 93 here i think this is let's see if we can use these values because i don't remember what here yes no it's not exactly a bit higher up let's say seventy five 71 like this and now it's it's there but it's not affected by the physics because the drawings that are happening here are not i don't like uh not here we go with these back in the avatar and draw them on top of that otherwise this is just a squishing squishing effect there so let's go to avatar and put them back here and the it's okay that we did this in the body it's no problem it's very good but i want this to be at the higher level so here in the draw i'm going to say that okay and now this location should be even higher i think 65. okay it's almost good 64. yes 64. and this is the center point so now um i need to figure out how much this point should move left and right according to these translations and these scalings here so only the x location changes so i call this a string now i'm gonna call this thing string so let's say string x is going to be equal to i mean let's call it string location and the x is going to be equal to this value and y is going to be equal to this value but we need to we need to modify so first what we do is we translate this by that so that just means plus that value and then when we are at the location i'm going to scale with this let's say x translate this and this like so and uh here plus x translate times this x scale it should be fine and i'm not repeating the variables there anymore i really hope i didn't mess something up okay it's doing it it's it's doing it i don't want this to be anything like an in your face effect but i want it to do what it's it's doing there so great i i like it let's do the same thing on the right side i just want to get the things working now i i will style these better at the end somehow and the code is now not great yet but it will become better i think so i need more particles here this is actually the main location of the yeah this is the main location of the string so let's call this this string location initial string location and this one is going to be that okay and um this this with this in front otherwise like now if i re well i broke it but uh when you initialized everything was kind of spinning in place because the initial location was not that that we were forcing it to be but then um in the first second it teleports somewhere else and it forces the spin to happen in it okay yeah great and we have another one on the right let's put this one on the right oh yeah because it's not symmetric we i drew this kind of free form shape okay then let's have two of them or right and left i think i'm going to make a string object eventually but let's just see how how much software engineering do i need to use let's do it left string initial location this one particles an array segments an array segments should be with these particles and i'm not sure how to access these from here i don't think this code works i may need to extract this as a formal class but no problem let's see so left string let's put the right string and we'll adjust it later okay so this is now right string and here left string particles left string segments left string particles of zero is equal to and i'm just going to do the calculation here directly so it's going to be this dot left string initial location x plus the translate times the scale and the second one is going to be just the value of y i don't think this will work but needs to be done anyway yeah it doesn't work so let me extract this as uh as another class string and thread are called both words that mean something else hanging string okay and in the constructor we give it an initial location so this init lock is in it and now particles and segments can be here like i can write it like this like that this particles is equal to a new particle with this initial location these segments is going to be an array with just one segment and these particles okay and now i have this left string equals new hanging string of this initial location thing there and probably now it's going to work right string with the plus there no it doesn't work so a hanging string with these locations left string particles location is left string initial location plus blah blah some undefined particles so i'm passing it here the left string initial location oh dot y i hope it's this whew it's that great let's give it a draw method an update method and the draw method so in the update method i want to put the location of the first particle to something something like that so where is the attachment coming from so or no i just give it the translate and the scale it's a little bit confusing but yeah so this x translate and scale will be sent to that and it's going to use these particles of zero and this initial location like this it's not that confusing because that's how we are updating the the body there so it's okay so now i'm going to say here this left string update uh x translate x scale and for the right string i'm going to do the same thing maybe let's also update the physics after that like that and draw the things i have draw for that now so i'm going to say draw the particles and draw the segments i also need to update the segments yeah so a little bit confusing what i did maybe but so now i'm updating those that one and i'm gonna draw it this one on the context and same for the one on the right and hopefully this works now okay i think it's okay but the one on the right needs to be lower so even more even more okay and the bottom part can be even off the screen so something like that i i will style this a bit later but look at it now so one is moving one way the other one is moving a little bit different i really like this this effect now so about the styling we will look at later now what i'm gonna do is the hair so i'm gonna try to make strings like that here in the front so hanging somehow in the front and these are going to move and then maybe i'm going to do the same in the back i have longer hair now so maybe i don't worry about this top part just yet but here i want some hair to appear like this so let's let's try see how our code is at the moment like yeah basically i i want to know if this code is good enough i think it is at least for now so the string left and string right actually let's call this pendulum it's it's much better it's a much better name so pendulum uh like this yeah and let's extract it in pendulum js pendulum js like this and here in index i'm going to include pendulum js so everything still works now and the hair is going to be pendulum as well so made out of different pendulums maybe we make double pendulums chaotic pendulums let's see if enough time but i think that code is decent at the moment a little bit too many things here but i think fifth of them will go away because they are not needed for actual things all right so i want now to get back this code where i click and i get the chord and it's without the look at translation and um figure out some locations here in the beginning to put the hair so something like this location this this this this something like that so i just clicked there to something that looks good but i prefer to have it not exact so that it doesn't look too symmetric and these locations are going to be things where i'm going to add more pendulums so let's say this front here is going to be an array of pendulums so new pendulum of x and y something and these will need to be figured out somehow depending on the sliders but anyway one step at a time so now this value from here from here from here it looks the same starts to be positive thing one all right so uh yeah many pendulums in the front here so what do we do with them we update them so for this pendulums for each pendulum i'm going to say p dot update according to something i'm gonna put x translate and one at the beginning just to test some basic things but uh it will be different i'm sure so that's what happens first and then p dot draw on the context so each of the hair pendulums uh front hair not pendulums so for each front hair pendulum do this thing okay it's horrible so something happens but not what it should be i think i need to put something relative to a translation by a at least so something like this but the special translation for the head so these x and these are shirts shirt x translate and shirt x scale or body okay okay but i will need head x translate actually head translate and it's gonna need to have a x and a y so and i don't like something i have here this update with the scale doesn't make much sense not at all actually i will need to revise something here let's have another function update 2 where it's going to have just an attach location i wanted to do something like this before so i just copy it inside and i say that this location is going to be this whatever attach location that i'm giving so if time i have to refactor this so hit translate x is going to be let's just put it um i can't put it at a i would like to keep these values somewhere maybe each particle is going to have the initial location kept let's see if that helps so then these numbers are as the initial location so this is going to be now this dot look at x so update 2 yeah for each head it's different so update 2 with x to this look at x plus p init location x and this is something else not needed and it's not needed and the same thing happens for y i think nope oh actually it's not a bad idea hey we have it already i didn't need to do that so i don't need this initial location there and it's called init lock i don't like it let me refactor this like that okay so max and y goes there by mistake so the pendulum is defined with an x and y okay and then here p update oh this should be an array yes because we are in the vector place i couldn't use vectors i think for the pixels because they do have x y okay so let me disable now this pendulum this particle logging there it's filling up the console and i don't want that okay okay it's something it's uh something cool i like it length needs to be a parameter and these points here maybe they can be a little lower down so in the avatar where i'm defining the first and the last point i'm gonna put here minus 41. so now this is lower and the last one should be also somewhat lower maybe 38 good and these lengths i think they can vary so in the pendulum the length is set to this i put the default of that but here when defining the avatar it's going to be no not that one this one second one i think can be 35 i'm giving myself a haircut let's put this one also a bit lower this is fine okay this point is too much to the right i don't like it there so let me put here 34. good okay it's it's something interesting definitely interesting i i like it um i would like it to bounce somehow somehow uh let's try to make these as double pendulums it's not as hard as it sounds i think double pendulum okay length divided by two and one more particle that is going to be with the length so it's going to have a midpoint here and the segments will be two segments and the second one is going to be like that like that and uh that's it i think i just need to go here and replace with double pendulum and i get an error a double pendulum is not defined because i'm not including it anywhere okay it has a different shape now a little bit different behavior than before but somehow i i think the gravity is maybe too much maybe even too much yes tall and small but that's what i want more more of this kind of movement it's it's great and because the pendulums have different lengths then each hair is going to be behaving differently okay great i like it this is awesome i i like it a lot so what i'm gonna do next is uh do the back hair as well so the back hair similar to this i think it's not too complicated and then i'm gonna try to make the mouth move so i will keep the hair ugly like this for now and think about it later how to get it better but yeah so styling the hair will be the fine tuning part so now let me add similar things for the back here so front hair is there back here and let's have it very similar to this the same in the beginning but this needs to be longer maybe just replace these threes with the six and now the back here goes through the same things like this i refresh and it's there but it should be in the back and it should be lower so let's put here let's replace this four with the two this three with the one i think that's fine and this six with the seven okay and the problem now there are two problems actually it should be opposite of what a is doing so when you move the head up this back hair has to go down and when you do this this back hair has to go up so this back here i want a reflection here i want to not the reflection but a symmetric a point that is symmetric somehow this look at point that we define here in the beginning i wanted to have initial values so init x 0 init y minus 0.13 this is not the best way the clearest way to do it but i want to get this done so i keep the same value so that they never change and then in the avatar here when we are moving this so what i want to have here is a symmetric point on the other side of this one so i'm going to say i don't have the vector operations for x and y but so init x and init y are going to just keep them static right yes so those are the initial locations of that a point so now what i want is this point here is the initial one so i want this pendulum to move down here symmetric with respect to this pendulum so i have this location and i have this location if i subtract from x the initial x i need this vector right here i think it's like this i would really like to use the same operations there that's the vectors but i think i i could i just want to get things done now maybe have time to refactor this yeah yeah this is good this is very good it's just confusing that the back hair is in front so let me move it in the back somehow uh when we are drawing the head i want actually behind the body or i don't know yeah behind the body also so it's going to be here great they need to be longer and this one is too high up i can see it there i don't want that so the one on the right needs to be a little bit more to the left and let's put here eight okay let me make everything a bit um transparent doesn't work i don't draw the head i think um it's fine it's not fine i don't like it i think the front part it's interesting that it's like that but the back part those pendulums are so long that and the gravity is so weak that it affects them in some not so great way so what i want to do is put here a value of 3 and in this update 2 here gravity multiplier yes so i will pass this to the physics the idea is that i want them to be more solid than the the ones in front i mean not so much bouncing around and i just use this trick to get it to work of course it's not a realistic simulation but this is more about animation and how things look like and how they should look like on when drawing something so i don't care about reality really and i'm sending now this gravity multiplier to the double pendulum update physics items gravity multiplier gravity multiplier and the update is going to be usually it's nothing but otherwise it's going to be scaling g with this gravity multiplier so yeah by default it's one and here we are not using the gravity so we don't need to pass anything to to this i think let's save so the hair in the front is behaving in one way the hair in the back is behaving more rigidly if i'm going to put this avatar to have here maybe 30 then those hairs in the back are going to be very very rigid they are being pulled down so hard by that increased gravity that they are not allowed to move uh like the ones in front are jumping there but i'm not gonna exaggerate so much i'm just gonna put here maybe ten yeah i still want them to move somehow but not extreme like that okay great i think i'm gonna take a break and then what i'm gonna do next is gonna be the something with this blue and my face and i don't like really how that sounds i hope that i can use this tape somehow and make some blue markers on the face and i'm gonna move to do the mouth the mouth movements yes he agrees good okay so i'm gonna go have lunch and continue after that okay i'm back and uh we are going to do this mouth movement next so i'm gonna begin it by adding a couple of more sliders one that controls how the mouth opens like this like that and then another one upwards and remember only this part of the face moves actually so this top part of the mouth is always going to be at the same same place but this is move the down movement is what will happen so i'm going to just change the shape of the beard here and this bottom most point to somehow be controlled by the sliders and also this empty space right here i'm probably not going to draw an actual mouth i i hope i think this empty space might be enough with the movement of the chin to give the idea of talking otherwise it's more work so let's see i'm going to go to index.html and i'm going to put some more sliders here on the right so i'm going to say like this and i think same settings at the as before but update mouth and update mouth these will be some new functions there so if i refresh this is fine and let's add at the top there something like look at yeah and um i think this is better i'm gonna use capital values and i don't need um i mean capital letters and i'm not gonna need the column anymore i think it's quite obvious what these are i think that's good so um maybe here it's it's clear if i put column on the right of these words okay so these need to do something and update mouth is a function that doesn't exist so let's go down to where this one is and um um i'm gonna have to pass to yeah i don't know why i complicated things so much with this global variable i think i'm just going to access the avatar and tell the avatar what is the value and that's it so um like that so inside of the avatar i'm going to have a mouth um attribute with 0 x and y and actually this should be passed down to the beard as well because the beard is what is going to change shape according to these values so inside of the beard object i'm going to say here mouth info mouth info so some information about the mouth according to these sliders here okay so now when we do this draw half beard we need to remember what this what these shapes are and it's not very complicated we were moving here and then doing a curve here a curve here and then align to here nothing changes so much but now this point will change so that point will change according to the mouth x and then we have a line to here here here all of these three will change uh with y so i'm just gonna guess some scalers for how much this info is going to affect and let's see what happens okay this month so this is just going to pass a reference and every time we change this object it's going to should be updated in the beard as well too much too much way too much so here in the beard let's put um dot one maybe it's okay i think it's okay and uh vertically this also needs to be smaller yeah but i think that actually the this last two points here could be a little bit lower this 46 i think that's fine so the mouth is like that and actually the bottom most point also needs the same thing here so for the y value um yeah and let's make some constants here so mouth stretch x is equal to this amount and mouth stretch you so that it's clear what these things that are also repeating very much mean okay something is bad here because when the mouth closes like that it um i can see that bottom point which used to be c i think so let me try to fix that i'm gonna go to the avatar and in draw head let's try to put this yeah very complicated function there for the translations and almost good i see that line a little bit and i don't like it but um i don't think i needed a stroke and then i just see the neck in the background yeah let's see so and i don't actually need this code anymore this was just for reference in the beginning they were those uh cross shape thing for the head i think yeah and here what if i just don't do the stroke it's perfect i don't see any anything wrong with that great okay good so no need for this and and now that i have these controls for the mouth i'm going to start to do some image processing here so that the mouth will the mouth information comes from a set of points around the face and actually the head should also come from my movement somehow so i'm thinking one thing needs to be static somewhere like a blue point should be here um and then here on the side of the mouth i need something so two points here on the sides of the mouth they should be quite close to the mouth so this might be difficult to place and i have the beard here it's horrible and then one point also needed here so two points there one point here and one point here so maybe then we use the bottom point relative to this point to figure out side to side movement and uh no i don't like that this point is changing vertically and we might need this distance for something like we might need this distance for um figuring out how much the head should move and so on so then if you're talking like this it might move your head in unexpected ways later will it yes basically the up and down movement like this it's the same as if my my mouth opens so i need this point for mouth up and down i also need something static maybe on the nose so let's start with the point here and the point on the nose and see if we get just the head movement that we have now and then do that more sophisticated thing i have a bit of a worry that this camera here that i'm using in front is not that good or let's see can it recognize very small objects if um i will have to play with the thresholds and and things for the image processing but first i'm gonna take this tape and i'm going to cut some things from the tape so this is doublesided tape and i'm hoping it will hold on my face and i have this marker here that i'm going to color it with so that it's blue i really didn't have it was clo shops were closed yesterday and i couldn't buy anything better i just had this tape at home so of course another option would be to draw on my face i really hope i don't have to do that and i think that the way that collar behaves on skin is not so great okay something works so i made something like this by coloring some tape on one side and i'm gonna put here i guess and it's not fantastic because light reflects from it i think it's recognized but sometimes it may not be recognized uh yeah not much i can do about it i think maybe i can change the lights somehow in the room later but um let's do tell one on the nose and i'm gonna look funny for some time if this stays on my nose okay great i really hope i win this so okay some strange movements there happening uh let's move on to due to uh the image processing part so here in index we were doing something with the video and getting the marked locations but i'm not convinced that this function works that great i would like to see the locations on the canvas here highlighted maybe i'm going to turn these blue pixels into red pixels by changing the pixel color there so let's display them i'm going to loop and now these are vectors actually so i'm going to loop through them and say cam ctx begin path cam ctx fill style red cam ctx arc no just a small rectangle so wrecked at the location so i can spread the location of i and one pixel one pixel for the width and the height and fill so now i'm debugging the small canvas there to see these are red not always red so what's the problem here if i go to the get marked locations and if i bring this color here okay this is not always red not always i mean sometimes it doesn't look red at all i think some problem can be with the threshold that i'm using maybe i could make it a bit higher but i think that if it's too high then maybe my shirt will look blue or let's try to go here 200 but this really depends on the room no something here is now turning turning blue how about without the headset no some things there are just too much so maybe this needs to be something like that it might be good enough if there would not be these reflections there so i'm gonna do something about the lights in this um okay and now i can't see very well because i looked directly in the light ah going great still waiting ah good that time is ticking and i have maybe three hours left of available time i can use for this i'm not gonna use anymore okay getting a little better so i think some it's better this detection seems to be seems to be better and if i'm hiding these blue things then the sliders work again so of course um i have to code now these things a little bit differently so i want to know where this is and where this is all right so how do i do that well i'm really concerned first about this bottom point so this is my most important point there and i want to detect it first so let's figure out how to get this bottom point first and let's just do here something like process image and move the code there because it starts to be horrible where it is at the moment we may need to add some more files here uh actually i'm gonna move these to camera file since that's where we initialize the camera and it's close enough to image processing at the moment so function process image and the video and the camera context are global variables i think everything here should still work now yeah so here this is just for debugging so now the markers here on the right are not changing color but if i put debug to true i will also see point a there but uh it's fine and this does change like that so inside of the camera file i'm going to also here say find um get constellation so these are two stars two points and there will be two more here and probably one more here so i'm gonna have a function that gets me this constellation from these marked locations so i of course now there are many many locations here that are making this red point and this one so they will need to be averaged or something but um let's get them like this and say here const constellations constellation or just points is get those things i don't know why i want to call it like that technical term is clustering but uh i'm not going to use any clustering algorithm for this i want it to be more reliable and they tend to be either slow or too complicated or random in some cases so i want to detect first this point with this get constellation function and then i will want to draw them so we'll get to that but inside of this get constellation function i want to say get the point with the minimum y value so i think the point with the minimum y value must be inside of this one here in this region many points here so let's say um meanwhile point is find the point so that this location or this point that we are inspecting this is a vector now so the second component is the y is equal to math the maximum actually because y grows downwards on the computer so maximum um of the y values of the locations so i'm going to say here locations map like this so this is going to give me an array this map here is going to give me an array of all the y values then the max is going to be the maximum of those y values and here we're going to find the point with the maximum of the y values so let's leave this here and now let's return it for now just one point okay and this is just one point now and um we were using something to draw this a point previously so um i don't know where that is it's in the avatar draw head this one the draw point so i want this to happen now in the on the camera screen there but it may not be very visible because here there's some scaling happening and here there's not let's just see what happens so drop point it's some utility function oh my the canvas is not even specified so ctx and let me change this inside of the avatar give it the ctx here and we're not really using it anywhere so that's good now here um cam ctx and uh let's call this point now m point so the one we are getting the bottom point from here this should be with x and y it's undefined really how is that possible because there must be some points there to have some mistake here let me just first log this part okay so these look like some y values indeed oh this is an array here it's an array and max doesn't work with array it works with many parameter values so i have to spread that right there okay no error at least but oh i should probably include this doctype here so this thing doesn't appear anymore okay i think the point that we are displaying is too small so when we draw the point here i'm gonna have to give it some big radius bigger radius something is there now but uh what happened to everything else what happened did that in this dog type do something to my css what really how did that happen okay so now the point is actually here this small m there so um it's not exactly in the middle of all these red points here at the bottom but maybe we'll get to that first i wanted to have this m point there and uh i need to draw this a little bit bigger it's just too small so um going back to the camera and now i think it's too big because if i'm gonna have many small ones there yeah it's good a little bit fidgeting like that but it's it's fine so this is just the one point the minimum y point now i'm gonna take the nose point so um to get the point on the nose i'm basically gonna get the farthest away point from m and i'm doing that i i think i can also get the one with the smallest y but i'm gonna use this furthest away from trick later so let's do that i will say let i like that i teach it better in this way so going through all the locations i'm going to calculate the distance between locations of i and the min y point which is actually the max y point because y grows downwards so yeah max so the distance from each point to that one and i'm going to take the maximum so i'm going to say nose point is going to be just some location like that and and that and here if distance is more than max distance then max distance is going to be distance and nose point will be updated to be the location of i something like this so just getting the maximum the furthest away point from this end point and now i have two points that i want to return so i'm going to call this chest and max y point and nose nose point i think i should call this one chest point it's clear that it's the max y from this line of code there so now i have two things that i'm returning and i have here points and um or i could have destructuring here like nose and chest and now i can say draw the nose point let's call it n actually for nose and the other one which is m here let's call it c for chest okay okay so i have the nose and i have the chest and it seems to be quite quite reliable sometimes problems because of this shininess i couldn't do everything i wanted with the lights because the window is also there and it's too complicated but this is something that kind of works now at least a little bit and it can be much better in better room conditions or with different types of markers here that don't shine because there are materials that don't shine out there and i just happen to have a crappy one does this mask work as blue if i change the color now i think this is okay for this demo okay so chest point nosepoint what do we do with them well um i need to know some i need to calibrate the system so i'm going to add here a button that says calibrate and html like that and when we press on this calibrate light i wonder if this is how you write calibrate anyway i don't use internet so i can't check so calibrate um it should go also in the camera for now at least so what happens now here is that i want to i really want to keep these as a global variable so let's call these something like that and now that and here i can still destructure so okay and when i calibrate i'm going to let's just log this like that okay so i have the nose and the chest coordinates when calibrated so what i'm going to do is when i press calibrate i'm going to make a copy of these points yeah i will say here the reference location so the reference um is going to be the one when you press the calibrate and then we're going to calculate relative to those somehow so constellation points reference is equal to nose is gonna be like that and the chest is gonna be like that so now i can log it after that and if i'm gonna press calibrate i'm gonna get the nose and the reference and if i move now a little bit and i check constellation points like this i should get i'm losing them yeah i'm losing them i'm replacing them here so let's add the code as before like this and now i just write here constellation points nose is equal to nose i think this is going to work yeah now they're equal but if i'm moving and i'm debugging they are not equal anymore so relative to this uh change so depending on this change somehow because i need to know how far is n from c to be able to do the head movement like this properly so now i don't need this log anymore i believe they are working based on this calibration here i want to based on nose and chest now and the reference nose and and chest i'm going to figure out something here so let's get the distance between nose and chest so distance between nose and chest let's just call this d1 and d2 is going to be the distance between the ref the constellation points ref nose and constellation points ref chest so these are the other values when we press the calibrate button so two distances here so now um depending on how much these distances change if if d2 is exactly equal to d1 then the head is gonna stand stand still but if d1 is going to be bigger it means the head should go up so d1 minus d2 and then we figure out some kind of scalar for that so i'm going to say here d1 minus d2 the difference on y so this is d1 minus d2 and that's going to be the value for this and i'm not gonna change x anymore i'm just debugging now so the head can't move all right we need to have a reference so without pressing calibrate nothing happens and now if i calibrate very interesting very interesting yep way too much we divide by the height and i think i messed something up here it should be d1 d2 minus d1 calibrate first okay but i want more stronger than that so let's scale this by something let's say five times what it's doing at the moment i press calibrate okay and now horizontally nothing happens but it's easy i think let's just call this y one and y two uh they mean some distances um to the nose or no they were the distances yes sorry but horizontally we need something similar so we need we don't use actually the reference anymore i just want to know if n is on the left or on the right of this c right here so yeah so i'm going to say diff x is nose x minus chest x and also i'm going to divide this by i want to divide by this d1 actually let's see i i'm starting to get tired and i can't really explain anymore why i think some of these some of these things work but basically the distance this distance i want to use somehow for normalizing and this should be here and this code should work now i mean should be active okay very interesting very interesting something is strange oh these don't have x and y they have zero and one i i hope uh and i'm interested in x so zero for both of them nice i like it maybe multiply this by two okay calibrate yeah this starts to feel awesome i i'm really excited about this sometimes crazy stuff happens like if a point disappears but that's just how it is i'm not i don't even know what to do about things like that it will work in very good lighting conditions even better than this room and um if these things don't don't shine i think this room is quite good actually but the the material on these things is not great so some crazy stuff can happen when i'm testing but and there's a fidgeting here you can see the head somehow fidgeting all the time because i'm not actually detecting uh very well the center of all the blue points there so i would like to do that eventually let's finetune this later so i want now to detect points on the side of the mouth no this point on the bottom of the mouth next no the sides of the mouth so i need to cut some more of this tape and i'm going to do it in a smarter way now i'm going to actually peel the outer layer i can't draw on the outer layer because it's too slippery and the color just leaves off it's this kind of wax paper so i'm gonna draw here blue on one side for three more points like that and now i just cut these always important to pay attention to what you're doing normal things that what you're doing and see what can be improved because if you keep doing something in a bad way like how i drew these the first time then you never become better at things i don't think it will stay there stays on my lip not where i want it to be i want it to be here on the side nope i'm in trouble this bottom part of the lip is fine so at least i can do that it's not the best but it stays here i think the other ones i really don't know what to do about them so one here for opening the mouth it's definitely possible but i can't open the mouth sideways which is hello hello hello hello maybe the points here hello hello they are too much um how to say now they aren't on the side of the face and they are really getting light from the window and it's a problem there um it really needs to be here maybe i can somehow wrap it around my beard is this hmm i don't know how reliable this is because from the front you just don't see it now or maybe something so somehow wrapping it around the beard and inwards at the same time yeah hard to describe what i'm doing i don't know how to say it but i might be able to pull this off let's see hmm is it getting anything maybe on the outside no okay ow horrible i'm gonna have to make new ones i think that attaching it to the beard like that works i think attaching it to the beard does something but then i have to use two types of tapes so one of it is gonna be just to attach to the beard so i'm gonna put it just here like that i think and yeah something like that and the next one is going to this normal blue thing which i have to do again and attach it what oh great yeah new point coming in somewhere something like that it's not very good but i think it will work i think something will work and i probably look horrible and can i still drink yeah so we have two points and now i want to get this let's just call it left right and l r b so that's how these points are going to be called l r and b and um let's get point l l or r it uh it doesn't matter they are kind of the same thing and the property of that will be that the sum of distance from this one to this and to this must be maximum so the farthest away point from here is going to be that point that has the biggest possible distance to n and c so let's call that point l l point and say that it's the location of zero as before i'm going to copy this code and a new max distance i'm just going to reinitialize it with zero and the distance is going to be the distance to the chest point plus the distance to the nose point so yeah then l point is going to be the new one and let's just call it l l point like this so now with our constellations here i just want to draw it so l of 0 l of 1 and let's just call it l i need to destructure it here as well okay so l is a point and it's either here or in the other place i could force it to be one or the other but for now it doesn't i will do it later let's get r also so r is going to be if you know l like if l is this r is going to be the point that is the furthest away from all the other ones so i'm going to go here and say r like that and i copied this with r point and here i'm gonna also add the distance to l white let me write these distance sums one under the other so that it's more visible what is happening here and uh this is gonna be our point okay no it's not good something is not good so first problem is when i'm drawing them this should be r here okay okay so why it doesn't work so i'm having now l here okay and when or l here and when air l is here r is for some reason there next to c because it prefers the distance there so l and n distance to l and distance to n is so far away uh yeah that it's better to be down there than here these will be short and only one long so i think maybe trying instead of a sum doing a product there is going to emphasize that even more so let's see okay so now this system seems to work not big difference in l and r but it is what it is uh with different kind of markers it can be even better and probably if i get closer or let's see later the last one just the same thing again the point that is furthest away from all other points so i'm going to call that b for bottom of the of the mouth let's have b b b b b point b point b b also the distance to r there okay not good not good so yeah again it's better to have a position like that i think what i'm going to do because the chest point here is so low and it's such a big problem either move the point upwards a little bit so if this point here would be no that's not helping much let's put the weight on this chest point make it smaller no that's not the problem the problem is that b is such a great place for being far away from all the other ones so maybe we divide by the distance to the chest point no so i want a point that is far enough from n l and r but if you get too close to that point it's bad uh no i think that i i had this the other way around what if i use here the minimum distance the minimum distance to rl uh n and b so minimum distance if distance is less than the minimum distance then the minimum distance is updated like no because now it's going to choose a point that is it's exactly zero how about with the previous addition from before huh and how about squaring these so squaring the distance these individual distances no why does it go there where oh i'm looking for a minimum distance but this is a very small one to begin with okay now it works i think many of the others would have worked as well too many details to start to explain but basically b is quite close to the center of mass of all the other points so i used it in that way this definition here with the sum of squared distances is it's there now and i can do a check here that if um l point x i mean zero is greater than our point of zero then swap these i think i can do something like this in javascript maybe okay now l r are proper n is proper b is proper c is proper everything is fine but um and of course if i calibrate head still moves like this but the other things are not not appearing anywhere so what will happen next is uh is is let's just put here in the calibration in the reference points i'm going to put also l r and b that's the first thing and now um let's calculate a distance between b and n so b and n it's going to give us a distance for how the mouth is opening so b goes down and and always stays where the nose is i can't move my nose so let's say bn1 is going to be distance from nose to b and bn2 is going to be a distance from uh let's just say here ref is equal to that so that i don't write this everywhere it's just horrible okay so ref knows ref b so b and if y is going to be equal to b n one minus b and two probably like that i i don't want to think about it anymore if it's not one it's going to be the other and this difference is going to be divided by wait d1 let's keep the same logic and see what happens so with this bndiff i'm gonna say update mouth with um value and y okay so let's try calibrate everything broke ref nose and ref b oh the constellation points are missing the other ones okay calibrate opposite so needs to be opposite and needs to be multiplied by something more so i had it right in the first time and let's multiply this by five or something calibrate hello hello hello hi hi hi hi hello i think this can be even six but i'm gonna try with seven hello hello hi hello hello l and r points are not really moving i'm not using them yet but nothing seems to happen at least not yet this fidgeting is what i'm gonna fix next so what i'm gonna do is um i really like it i i did something really great i'm happy with this so um the fidgeting i'm gonna take an average of the points i'm gonna average the points in their neighborhood here somehow and replace lrb and nose and chest with the actual average there so that they don't jump around so much and then this animation will be also smoother on the left it's not good as it is so let's try that next now that we have all of those points there i'm going to go through let's create sets of points that are closer to n to l to b to air and to c so i'm going to call these n set like this c set b set lsat r set and now i'm going to loop through all of the points and i'm going to say to calculate five distances is n this is going to be distance from logs of i to a nose point and the others will be like same c distance b distance l distance r distance and this is gonna be chest point this is gonna be b point l point and r point and now i want to put these in the set where the distance is the minimum so let's get the mean uh is going to be math dot min of endist seedist be this eldest this like that and i'm going to say if mean this is going to be equal to and this then and set push locks of i and else if mindist is seedist then c set is going to be logs of i then b this here b set is going to be log getting logs of i l l set r r set yeah so now i have sets of points for each of those things so these points are going to be nearest to the ones that are marked on with the letters on the camera but um but now i can calculate the average of each of those and replace each of those points like nose point chest point b point and so on so nose point is going to be average of n set chest point b point l point and r point so r set l set b set c set ends might be confusing what i'm doing now but look at the points now and look at this fidgeting on the right and it should be gone when i refresh if i didn't make any errors errors okay chest point is const okay calibrate much more stable so i'm gonna actually have a tutorial someday about this lightsaber effect and i will teach better there what i did here with the averaging so i don't know if it's already out when you're watching this or if it's coming but we did it i i averaged the points and now they became stable because they are not represented anymore by one single point but by many points many points averaged together and they are not fidgeting so much yeah this is great wow i'm really happy with that character moving there when the points are not blocked otherwise it's horrible okay let's try also these side points this l and r maybe they work who knows so i'm gonna copy this code like this and say l r diff with dx lr1 lr2 lrdf x is gonna be lr1 minus lr2 divided by d1 multiplied by something and lr diff x there so let's see calibrate i'm looking straight at the camera hey it kind of works hello hello wow wow this works um how about if you put bigger value here nine not 79. okay calibrate hello hello hello i am raduz avatar hello i'm radus avatar maybe with the mouth it would look even better let's see if i redesign it to have a mouth in the end i think i need a few minutes break and then i have about one and a half hours left to do this so i'm gonna do i'm gonna during my break i think i'm gonna record myself saying something with these things on my face so that i can play with this method also without these things on my face i mean to play with this thing so i will record myself saying something and when we come back uh when i come back i will make this work with the camera or only with the sliders or with the video that i'm going to record and i like it a lot and then fine tuning drawing these to look like hair kind of like in the original drawing and these strings here they are small minor it's much more interesting what happens up here now but i like them great so i will take a 510 minutes break and record also something meanwhile okay i'm back and i recorded a short video to test this i don't know if it works yet but i added it here as this mp4 file in the folder and i think it's really easy to test here i just have to put something like and before of course it's still gonna initialize the webcam and and do whatever but uh it's gonna replace the data uh from the webcam with the source coming from that video let's see if it works it crashed but um it's talking there something and that's me from the video it crashed because of a course so it's trying to load the file from the computer and uh do some processing with it like image processing and the browser doesn't like that um i think i need to make this into a server so let me go to show the status bar in this visual studio code and i have this live server extension allow access and and and now instead of going to this location i'm just going to put here the localhost ip address and this 5500 port hi i am okay one two three four five six seven eight nine ten there were some problems there with um with some of those things disappearing sometimes but let's refresh and press to calibrate also quickly somehow or i don't know um i want this to actually calibrate here wow every time i'm saving something it's updating there the server works differently testing one two three four five six seven eight nine ten yeah um this calibrate can't be called there yet because the image processing hasn't happened yet so i'm gonna take it out i'm also going to disable the sound here four five six seven eight nine ten hi i am radus avatar testing one two three four five six seven eight hi i am radhu zabatar testing one two three four five six seven eight nine ten not very bad not very bad i like it um let me disable the sound because this is disturbing every time i i change something in the files this is uh updating in the browser and talking i can't concentrate when he's talking when i'm talking there like that some uh maybe that seems to work so the voice is not there anymore so there is some small problem with the mouth here and also here and i wonder if i can hmm work with the different thresholds that are better so that it works for all the cases let's say 195. was it perfect there was a little bit of a jumpiness but not much uh only if you look on the right side then this b was jumping at some point but only a little bit the mouth looked okay i think yeah okay i think this is just good so i have a demo now as well i can put this on my website and show it to the judges later otherwise it's very hard for somebody to test this application of course you could do something with these sliders but it's not as great as when you see it in action and people won't put these things on their face or wouldn't know how to do it unless they see some example like this so i'm happy i did that let's change the input somehow based on if you want to use the sliders or this video or your own webcam so in index.html i'm going to go and say here now where do i want to put this selection for the input um i think the sliders shouldn't even appear so sliders should actually be called side panel and here these are the sliders now and the sliders can be invisible i mean not added to the dom if the video is playing and in the beginning and i want the video to be playing in the beginning but i don't necessarily want the camera access because people don't like to share their cameras and website usually so also the calibrate button not needed if the video is there so okay and now we can add this kind of select component let's call it input and id of input and now i'm gonna give it some options inside so option with the value of video video and then the other ones are just going to be camera and sliders okay great so these will be here it needs a label let's give it also on a new line and okay here okay so inside of this camera.js file i think i'm going to just initialize the video with element here at the top like this and i'm actually gonna copy this here this navigator media devices blah blah blah this should be inside the function called initialize camera and we only call that when we change that selection i think and what will happen then is so by default the page should load the video first okay it wants some kind of a start button or something let's add here or i don't know now it worked so it begins with the video or no maybe it will want us to do that so let's just put here a button that calls a button that says start like this and the start function let's just go to the camera for now and say here start something is wrong there this needs to be here it changes the size already now now start and it begins and i think that it won't complain anymore about problems so it starts that but if we change this to the camera i want to do initialize camera and then i don't want to do this anymore i do want to say that the source object is going to be the data from there or maybe i do want to do this because maybe the yeah i'm gonna create a new video i'm gonna set its source object like that not like this because the camera your camera might be different than my camera when i recorded the video and so on so yeah so this start here should be start video maybe let's see so when i refresh and i press start this is going to start and it's great i like it and when i change to camera or sliders some things should happen so let's make here an unchanged okay so here we have camera sliders video and switch info dot value if we have video then what happens um let me close many of these things from here so i think i want to have this one like that and i actually think i it should be reinitialized here so let's just have it null in the beginning reinitializing it like that this volume i should remember to put it back to maximum start break and now if this is a camera then we are gonna do initialize camera okay so start the video video starts if i change this to camera it works but i think i'm in different positions and it's not calibrated or something video is great yeah something is wrong i oh this headset was making some bad colors i think okay now it's good so video seems to work it starts it's doing some different things there camera okay let's put also the video with the volume to one i'm i mean hide this because i wonder if the video plays in the background so the video is playing in the background and i think we should do video stop before starting something else if possible testing one two three four five seven eight nine ten hi i am testing okay i want to start in the beginning to just start the video without the option to give the input so i'm gonna remove the input from there just in the beginning so i'm gonna say here input display none input container display none and the input container will be inside of this thing so okay and these line breaks i think should be also inside there more line breaks here maybe inside this video output okay so now you just have the option to press start there hi i am testing one 2 3 4 5 6 7 8 9 10. so when we press the start i'm gonna make this input up here and this start button should disappear because we don't need to press start anymore i think okay so now we have the video we change to the camera calibrate button should be there with the camera so we need that everybody's going to have different markers on their face and if they ever try this i will so calibrate button no need to calibrate with the video it's just confusing it does the calibration it should do the calibration automatically let's put here on the first frame so auto calibrate set to true so on the first frame when there is no constellation points there we calibrate yes yeah i think this is good um but i don't want auto calibration for the camera because people need to see themselves first so now it doesn't work but if i press calibrate hello hey hello hello la la la la la la [Laughter] oh something was happening with this point okay this is very funny uh come on a little more energy i need more energy video yeah it starts well and it auto calibrates itself on the first frame there camera calibrate hello hahaha great and the sliders doesn't do anything yet let's put this to be initialize video initialize camera initialize sliders and now in the beginning the start button is going to be initialize video yeah and the sliders here so right so initialize sliders this should be in something like a control panel let's make control panel js and just move some functions there like that and from here so they initialize sliders it's going to be something like like what we have the sliders here that need to be turned on we want the video output to be turned off so sliders with output i'm getting some messages i have to check yeah okay so the output none and make sure that the sliders are off in both of those cases so start the video then they can change the camera for example but nothing but really will really happen here unless they do something serious like this um what happens if they press calibrate now so somehow with a marker like this funny things happen very funny things happen you really need to have points on your face like i have and then it works okay sliders okay uh no not okay the video needs to be not active anymore maybe this video pause is enough and constellation points has to be set to nothing let's see if now it's different so video is there camera is there calibrate okay for me seems to work i want a line break between the after the sliders why don't they work i think the video is still there so in the camera we have process image this is going to happen all the time here video it needs to be put to null we need to put it to null here that will make the sliders activate yes okay great um but now we are gonna work with this video i think and maybe with the camera if these things still stay on my face calibrate would be good to have some kind of some kind of instructions here what to do maybe start is not defined oh where's the video getting tired this is some common behavior it should be grouped together calibrate below the camera i think below the input i'm gonna move that button there it's better like that okay good we have something we have something that works here and even with this video i like it problem now is just that uh these styles are horrible this hair needs to look like hair and i still need some energy and i don't know how to get it but uh come on it's a little bit more effort i think i can do something maybe i like the hair i really like the hair what's wrong with this c now it's getting color from the it's getting glare from the light i don't think i can do much about the lights to make it better but this is really great i'm really happy with what i have done and for the hair let's do this so i want to connect now this point to this point may be influenced by this point let's do that so move to here line to here curve to this place and see what happens so inside of the avatar actually in the hair okay head is something that is empty i don't think we use head anywhere i remove this head now so here uh not in the hair but inside avatar because this is where we define these front hairs so what i'm gonna do now is here where we are drawing that's not gonna be used anymore at the end um and i'm gonna say draw front hair a function on the ctx actually a method here draw front here like this and i would say begin path move to this front hair of zero so this is going to be now the first pendulum particles of zero and these are arrays so i can do spreading here location okay and line two particle 2 location so this is gonna draw a line let's make ctx stroke and let's make this one yellow so this line right here that you can see in yellow here so now let's try ctx quadratic curve two and it's gonna go to the second hair the base of the second hair with the second hair control point from the middle yes and here comma so this is what i'm getting now my drawing here okay it's kind of like in reverse actually the curves are in reverse here mmhmm so i should use this as the control point uh no problem okay something like that and i will do the same thing for the other one hmm looks nice i would like to have another hair somewhere on the left here that i won't draw but it will affect this other hair and the other things so let's actually do that have another pendulum in even more to the left here like three two oh this is the back here okay that's good or even 41. it doesn't matter if it's outside so what i will do now is uh that here strand here is not going to be drawn so i'm gonna go it's just gonna influence the others it's crazy uh what i'm doing so then i'm actually gonna start at the first hair here and continue to do as previously but now instead of this line 2 i would like to have it influenced by this point so this is not straight anymore so i'm going to replace that line too with another quadratic curve and end location will be that but this will be that what no line to yeah yeah this is what i want that's what i want okay so now that i'm here i'm gonna repeat the same thing but here i'm gonna have one here i'm gonna have two here i'm gonna have two and here i'm gonna have three i like that great and uh now i really feel like i want this to be more in the middle more on the left so this is now front here of three zero one two three maybe yeah and maybe this also a little bit to the left actually this one also a little bit to the top and the next one a little bit to the left and i would like actually the first one to be even more to the left but i don't care that it's outside like that and maybe even more and the first one here maybe 31 okay and i will need another one at the end so like that for the influence of this last strand so now i'm going to do a little bit of things in reverse it's going to change the direction let's add one more strand there two on the left and three on the right i want there are too many here in this original one i don't want to waste time on that now so uh i want one more strand so let's group these more so this goes even more to the left maybe 1 5 28 and another one here thirty two no forty 37 26 13. something like that so now going back to this place let's do third here so from here we are actually gonna go influenced by four maybe this is now three and this is four now this is five no this is four this is five yeah okay now i got it okay so now i have the third hair and fourth hair five five six five okay fifth hair six six seven six something is not good yeah the point that i'm using to influence here i think this should be four now no we're done we are done i forgot the last one is just to guide guide the things so now that we have done all those all these things i think all i need to do is um fill not stroke okay and probably i want one more line too and i'm gonna go in this middle point right here so that i will cover part of this bold area maybe that's enough let's see so zero one two three align to three particles of zero location maybe it's enough i hope and now i don't want to draw these anymore oh boy i look bold i i think that's maybe a sign that i'm becoming bold uh it's fine yeah uh let's see how it looks like with the video nice okay let's put the sliders on okay it's pretty okay uh let me add back the stroke and i think this one is just too much to the right so and this one yeah like that now when i'm actually drawing the hair i could move this point lower so that i don't look so bold let's see draw half here topmost point okay but um what was this point here i don't know i think it's something on the side the control point probably it's that one or the outer one right most point okay probably that one wow i look so cool i don't know how i did that i like it but i don't look like that so it wasn't that point i think it's this point right here so okay and let's disable now that stroke from here the yellow line that i don't want to see anymore i think these control points here need to be i don't have hair that goes like that in the down there yeah so this control point needs to be a little bit lower not that i think here i need no this is the outer control point okay uh oh yeah yeah yeah this one it's okay it's okay i think the hair can be lower the front hair can be lower yeah i like this it's better it could have few more hairs i think but it's not bad it's not bad at all hello hello hey i think that the initial video is so boring compared to what you can make it do let's i i want to do the hair in the back as well and then these front things so for the hair on the back i'm gonna do similar tricks and i also want to have another one on the left somewhere that is outside the screen or actually this might still be in the screen maybe something like that let's see and a last one okay yeah maybe it's gonna be good so i'm gonna do the same thing for draw back here so this draw front here does it have the same number of three four five six seven eight one two three four five six seven it's almost the same but without the last one this could be made definitely with the loop and i wouldn't have to reuse that but somehow i like that i could style them individually and if you would like one of them to be a little bit different you have control like this so i know this code could be half this size but uh i prefer to have this kind of control here so now this front here will be replaced with the back here everywhere here so let's just do okay something is happening but uh the drawing of the back here is now on the front and i want it to be here and okay nice um okay uh needs to be bigger needs to be bigger you don't see it well enough so let me put here nine nine nine nine nine nine okay and these ones on the side i think they can be even more so five and six maybe and these ones not bad oh this is bad so i think the top part of these can be lower hmm too much 85 85 80. and i think that something is wrong here i don't want it to move maybe that much up and down i don't know somehow moving too much up and down yeah i think i will just move the outsides a little bit more in let's say this is now 55 and this is 55 and this can be 38 and 39 and i think that now shouldn't be the problems anymore they're okay but uh that gravity thing i think it's too much i want to see it moving more so the gravity multiplier not there where is the multiplier where am i calling that oh in the double pendulum oh yeah this update 2 method this is the kind of thing that you really forget what it's doing after some time okay and i want the sides of the hair here to be closer to the other one so 23 twenty no twenty eight no not the front here back here okay that one oh the side hairs are too long now these don't really matter okay these ones are too far to the side i like this shape more these movements are just way too much so i think that what i want to do here is put more emphasis on initial location why oh no something is horribly wrong this one maybe doesn't need that okay mmhmm okay i want to move this point a little bit to the left so no minus 36 and 36. it's a little funny i think that these sliders are just too much allowing too much freedom i'm gonna put them even less because in the real movement this never happens so i'm gonna put here minus three on the y plus three on the y uh huh and uh maybe even two two and uh the step is gonna be zero five okay and i think this hair can be a little bit more to the right they are too close now so let me go back to the avatar and try again 20 here 25. okay nice so one thing that could be tried is actually add one more hair on the front to partially cover the years i think that would be a great effect uh i'm gonna still try to do that and also limit this x a little bit i think that minus 0.4 and plus 0.4 is just enough i mean i'm cheating here not doing a real 3d and it can show if i'm not paying attention and of course people will notice it's it's obviously a 2d animation there and i think here it's just too much movement still so let me or it's fine okay i'm gonna try also something with the front here maybe i call it side hair let's say side hair and um left i'm just gonna copy these things i need just three pendulums the one in the middle is gonna do the actual drawing so this side here left uh update and draw yeah so just copying the one that we had previously and draw side here left my this needs to be extracted into its own function and done some loop there i'm too tired now and it's gonna stay like this so let's see if i have energy at some point to fix the code so this is actually all we need there yeah this is the side here but now we need to tweak it a bit so the side here on the left this point here okay i'm i have to comment out this front hair and this back hair it's confusing too much so why is it like that side hair left and also these many things i don't want them anymore yeah so okay it's good but these things need to be more to the left i think yeah let's put six here four here something like that maybe and up more up okay something like that so how does this look like with the sliders nice almost nice too much to the left here let's just put it so that it's 50 40 to 31 okay hmm okay that's good i think okay so i think we can do another one on the other side i'm just gonna put positive signs here and hope for the best side hair right let's reactivate the back here uh i'm gonna draw these if debug front here if debug and side hair right probably would have been much better to write loops there at least here i'm going to make draw side here function and here i'm going to say side hair left and i mean draw a side hair method and write just object so i will replace this with the argument and i don't need to copy those i just can't concentrate anymore so it has to be like that okay better maybe let's put debug to false oh not like that okay so those things are not visible there and i like it it's much more personal this way let's see calibrate yeah yeah great i really like it very nice very nice okay so these things uh it's the last thing and then i'm gonna take a break do something else and come back in uh maybe half hour or so and see whatever quick polishing i can still do and i'm done with this so it was amazing okay these things i will make an option for the debug there oh yeah the horrible nose i forgot it's so horrible i don't need these click listeners anymore why should i remove this probably it means this alpha thing i don't need the image anymore the reference image yes i can actually delete it from the project here and in the beginning i'm loading it somewhere image image no need for image and i just need to animate yeah good fantastic it's so great why don't people do this it's awesome awesome and now i'm thinking about that project that we cut off the list with the scanning website that scans your body and so on it's not very complicated to actually change this so that you would do some face profiling like how big are somebody's eyebrows and what is the skin color and i don't know things like that how far apart the eyes are the big the nose is and so on and then with that you could change this avatar automatically so of course that one probably meant something different like that the actual textures and you the avatar you're making is pretty much looking like you but this is in my opinion much better it's much more creative yeah okay those things i want to get them done and then i need to do something for half an hour and then final find fine tuning probably debug button here if i if people want to see what is happening behind the scenes right i said i'm doing those threads on the shirt but i'm doing something else i'm just cleaning up some of this code okay much better structure here that thing avatar uh okay five minutes avatar left string and right string so update and draw so i don't want to draw them like this i want to say ctx begin path ctx field style and i'm going to do an rgba black with some transparency like that and probably same for a stroke style so what i want to do here is get um draw this as a circle which is a dark transparent and i don't need to define new colors uh pendulum init location x y a radius of something full circle and no more drawing this left left string like that and the ctx fill ctx stroke too big great i would really like to do these ellipses it's so easy to do but no time now circles are just too perfect eyes as well at least a little bit ovalish it's enough to make it so much more organic so okay this this that okay both of these are there and now um just a line too something like that but thicker i don't like that they're so straight i'm gonna do a quadratic curve to going there but somehow somehow i want the point here anywhere really yeah um that's fine and um same here but the other side okay somehow i would like the body to move a bit more and these things to move more it's just too small movement i think for them to be picked up yeah so maybe in the physics i'm gonna put the gravity less no no that's just fine they wouldn't swing that much anyway and again this is some kind of very small thing that i wanted there no need to worry about so what i do want to do is have this curvature a little bit different so plus three it's good and i want the thickness to be more ctx line width uh okay now they look better right way too much movement on the side i don't like it i think it was i find more fine like that it needs to be subtle i think it's the head that it's doing the movement and the side just a little bit difference there okay one more test with the camera calibrating hello is this good should i do more great [Laughter] okay wow something crazy is happening gwen when not all points are recognized wow this is fantastic i'm so happy i did this okay i'll take a break and then really wrap up all this page and and that's it i'm back so i still want to do a couple of things um add a debug option so that for example when this video starts here um you don't see those things there actually those need to be added somewhere um let me see this draw point so this is if debug like that it's easy to do that part but um yeah um but i want to have an option there so i need to use a kind of a checkbox maybe so let's put input type checkbox okay and let's write here debug like this and yes and give it an id debug check like this so our debug value no no no i don't want it it was fine like that so on change toggle debug this and what will happen now is that okay so i compare it like that so i say if this is it was true or false so debug is equal to that and it doesn't need to be a constant anymore so now there are a lot of points there being visible points in the video also like control points yes but this jumps way too much somehow uh yes i think i just put this one at the very top to avoid these kind of nasty issues okay camera calibrate what what is happening i need to see with the debugging oh the headset is on it's uh confusing it has some kind of parts that reflect blue light yeah awesome i like it what happened what happened i didn't see what happened that debugging was ah this it's pointing upwards and the light is reflecting okay okay yeah great no debug awesome great okay uh video this needs the sound to be on let's remove also these debugging statements does that happen in the camera no index no we were in index how where is this coming from control panel oh okay i forgot we did that i don't need that value anymore put volume on i mean we don't need this anymore so the video does have volume let's check it out hi i am testing one two three four five six seven eight nine ten great okay the nose i still have a bit of energy and time left maybe 30 minutes max so let's try the nose nose so i think that the tip there i think we can do two curves one on each side somehow yeah so let me adjust this a bit so somehow the nose would look more 3dish more roundish so i'm gonna move to this is the top part i guess and then there is the bottom part yeah so this i want to say minus 0.1 now 0 three okay and um tip left so left tip tip l like that and another one on the right with plus that so this is going i remove this thing oh yeah two control points it was also some idea let's see so with the this one i'm gonna do another with the right but i'm going to go back to this stop point here like that not great but let's see so now uh let's see how it looks like with the sliders huge nose there i think this can be one yeah so now this other line will depend on this offset i'm going to make it transparent so it's not important anymore because the noise is defined by the outside line so the more the line is on the outside the more visibility it has so let's try something like ctx global alpha ref.x offset and stroke actually i want to keep this top point there and let's just put this bottom point also 0 and 0 33 um actually i want this formula hi i am hi i am hi yeah i can't really explain what i'm doing anymore hi hi hi i am oh what is happening here this is a number but this is some weird thing it's concatenating here some string i don't know why it's doing that hi i am what is happening i don't know but i think that if i'm gonna change this to do first the audition hi hi hi i am no hi i am hi i am okay hi i am i'm just gonna comment out everything here at the bottom focus on one side so negative values no i don't want that um minus 0.4 and i want absolute value of this hi i am i don't know why it's not showing with a different alpha begin path move to curve to stroke and then the different global alpha what is happening here how can this line appear here uh what is happening there hi i am what is happening i really don't get what's going on now and i don't have much time left um let me just undo everything i did here and see if this weird behavior is still happening so if i comment out this draw nose does it do this strange thing yes it does and here if i say doesn't make the nose red i think it's something of a bug and i'm not in the i don't have enough energy now and brain power to figure it out let's see if two control points work bezier curve two hi i am a little bit more pointy there hi i don't want that the opposite of that hi i am hi i am hi i am it's not going great hi i am why doesn't this work i just undo everything it feels like it's against wanting its nose to be changed it doesn't want me to change its nose and i respect that okay i think this is it it's more than i thought i'm gonna do i'm really curious what samuel is gonna do i have a feeling it might be more impressive than what i did because you can do so many great things nowadays with online resources and he's a very clever guy so it's going to be exciting to find out yeah but sliders work video works testing 1 2 3 4 5 6 7 8 9 10 camera works hello this is the last time i'm talking now as the avatar thanks for watching if you got to this part and the code is not horrible but some parts of it could be better much better than what they are i'm really tired and i'm gonna call it a day because it's not yet night it's just four in the afternoon and i'm gonna go home and rest and the weekend is coming so that's it thanks for watching and see you guys [Laughter] look at the hair look at the hair it's great wow i like it awesome okay i'm gonna put one more thing here instructions for what calibrate means so in the control panel when we do the video hi i am radus avatar testing one hi i am hi i am hi i am hi i am hi i am hi i am hi i am hi i am radus avatar testing one two three four five six hi i am why is calibrate there hi i am hi i am hi i am radu zavantar testing 1 2 3 4 5 6 7 8 9 ten hi i am hi hi hi i am okay okay yeah i'm gonna put this on my website and see if the video loads and that's pretty much it i might make a simple preloader if the website if it doesn't load fast enough then i'm gonna put their loading please wait if the video doesn't come immediately when you press the start button but that's a minor thing so see you guys
