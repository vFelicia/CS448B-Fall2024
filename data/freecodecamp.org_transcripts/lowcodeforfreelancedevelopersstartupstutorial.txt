00:00 - hi everyone here on the freecodecam
00:02 - channel today
00:03 - in this course i will be showing you how
00:05 - you can build the tools that everyday
00:08 - startups need in a matter of hours by
00:10 - learning how to build using the low code
00:13 - approach
00:14 - my name is kubo and i am a software
00:16 - developer course creator as well as your
00:19 - instructor for this action-packed
00:22 - low-code course in which you will learn
00:25 - how to build a customer support
00:27 - dashboard thanks to local solutions and
00:30 - apis
00:31 - for those of you who are new to low code
00:33 - it is an approach in which a developer
00:36 - can choose to use a platform that
00:39 - already provides certain ui components
00:42 - for our disposal as well as
00:43 - pre-configured ways to plug in apis
00:46 - this is a great time saver when it comes
00:48 - to spinning up complex apps fast
00:52 - low-code solutions are not to be
00:54 - confused with no-code solutions in which
00:57 - no coding knowledge is required
00:59 - this is why a prerequisite for this
01:01 - course is to have a basic understanding
01:03 - of javascript and http request methods
01:07 - in order to fully grasp its contents
01:09 - however if you do not have any of that
01:11 - please do not let that stop you from
01:13 - following along anyway as i will be
01:15 - taking you through everything step by
01:17 - step
01:18 - okay
01:19 - wonderful so let's get to it by the end
01:21 - of this course you will have a support
01:23 - dashboard where you can modify customer
01:25 - details browse order history refund
01:28 - active orders and manually add orders if
01:30 - you need using the appsmith platform and
01:32 - the google sheet api you will also be
01:35 - able to cancel and refund orders thanks
01:37 - to the stripe api this course is made
01:39 - possible from a grant from appsmith app
01:42 - smith is an open source low code
01:44 - framework the community edition is
01:46 - feature-rich and completely free you can
01:48 - self-host it or use their cloud version
01:50 - and it's a great way to get started with
01:52 - low-code development
01:56 - okay so let's get to it let's get to
01:59 - building our first app
02:01 - so first things first i'm just going to
02:03 - start off on the appsmith dashboard as
02:06 - you can see this is my organization
02:08 - called the anius apps and you can see
02:11 - some previous apps that i have made
02:13 - so all we're going to do once you get to
02:15 - this position after signing up is go
02:18 - ahead and click
02:20 - new
02:21 - okay so we are creating essentially a
02:24 - new app i'm going to start off with
02:28 - building from scratch
02:29 - so let's go ahead and click this one and
02:32 - you should see a blank canvas generate
02:34 - for you while we are here i'm actually
02:36 - going to rename my page so it's very
02:38 - obvious for future projects and just for
02:40 - organizational purposes
02:42 - so let's go ahead and call this
02:46 - zip
02:47 - food
02:48 - delivery as this is the app that we are
02:51 - going to make it's going to be an order
02:52 - dashboard so i've just called it zip
02:54 - food delivery just like so and let's get
02:57 - going
02:58 - now i want you to first off think about
03:01 - how you want to store your database
03:04 - for this tutorial we're going to go
03:06 - super simple and just use a google sheet
03:08 - database
03:09 - so if you haven't already signed up to
03:13 - google please go ahead so that you can
03:15 - access their google drive and in turn
03:17 - create a google sheet
03:20 - just like
03:21 - so
03:22 - so on my google sheet which i will be
03:24 - linking in the description so please
03:26 - feel free to go ahead and clone it if
03:29 - you wish it will be open for use so just
03:31 - go ahead and do that like so
03:34 - so in this data let's talk it through a
03:36 - little bit so this is our customer
03:38 - database on the first tab we have the
03:40 - orders and the orders will simply
03:42 - consist of an order number followed by
03:44 - the date that that order was made the
03:47 - delivery address the total amount spent
03:49 - in a currency value the status of it and
03:53 - a stripe purchase id which we will be
03:55 - going into later you will have to
03:57 - replace these these are just some
03:59 - template ones for this tutorial and then
04:02 - we have the customer id of the customer
04:04 - that ordered it so this brings me along
04:07 - nicely to the second tab where you will
04:09 - be able to see each customer by their id
04:13 - so danny is customer id number one
04:17 - we've got the first name the last name
04:18 - the email address associated with that
04:21 - user what date they joined if they sign
04:24 - up for the newsletter and a random image
04:26 - that we have assigned them okay so this
04:28 - is just hosted online if you visit this
04:30 - url you will see the image
04:32 - and a phone number and same for the id
04:35 - 2.
04:36 - next up i'm actually going to go to the
04:38 - product catalog so here is just a
04:40 - database of all the products that we
04:42 - have in our store at the moment it's not
04:45 - many we only have four items but again
04:47 - this is just for tutorial purposes each
04:49 - item has an id and an image which is
04:52 - once again hosted on the internet so if
04:54 - we visit this directly it will just show
04:57 - us the image like so so make sure that
04:59 - you can see this like this
05:01 - okay
05:02 - and
05:03 - great one thing to note of course this
05:05 - is hosted by someone else so if they
05:07 - take this down we will no longer be able
05:09 - to see the image so that is just
05:11 - something to keep in mind
05:14 - okay and finally we have the products
05:16 - tab now this products tab is essentially
05:19 - a better view on what is associated with
05:22 - each order number so as you can see this
05:25 - order number here
05:27 - we will be able to see that this order
05:29 - number consists of one birthday cake and
05:32 - five lollipops okay
05:34 - so
05:35 - that is important as well that is how we
05:38 - read this data once you feel comfortable
05:41 - with what you're seeing here it will be
05:43 - time to move on to start using this data
05:46 - to start building out our
05:48 - order dashboard so that it displays all
05:51 - this information but also allows us to
05:54 - add information to this database from
05:57 - the dashboard itself
05:58 - okay
05:59 - we're going to add data we're going to
06:01 - be able to
06:02 - edit data as well so let's get to it i'm
06:05 - excited let's go back to appsmith
06:09 - so the first thing i'm going to do is
06:11 - actually just hook up this database so
06:13 - we can do so really easily i'm just
06:15 - going to go to data sources over here
06:17 - and i'm just going to pick google sheets
06:21 - and we want to be able to read and write
06:23 - as we will be adding data to the
06:26 - spreadsheet so make sure that that is
06:28 - connected and save and authorized
06:31 - so now we'll just have to log in to our
06:33 - google
06:34 - drive so that appsmith can continue to
06:37 - talk to it and has access to it so just
06:39 - make those steps and
06:42 - wonderful
06:43 - so let's go ahead and perhaps change
06:45 - what this is called i'm going to call
06:48 - this
06:50 - order
06:52 - database just like so
06:55 - and wonderful
06:58 - so now let's go ahead and create a new
07:00 - api so this is where we're going to tell
07:03 - our platform that we want to get the
07:05 - data okay from this spreadsheet so this
07:08 - is simple all i'm going to do let's
07:10 - perhaps rename this as well i'm going to
07:12 - call this
07:13 - get orders or fetch
07:15 - fetch
07:16 - orders okay as that is the first thing
07:18 - we're going to fetch we're going to
07:19 - fetch everything from this tab right
07:22 - here
07:24 - so just make sure that this says fetch
07:27 - sheet rows
07:28 - and then the sheet name for our
07:30 - spreadsheet well it's going to be
07:33 - orders so make sure to spell it exactly
07:35 - as you see there so i'm just going to go
07:37 - ahead and type orders like
07:40 - so
07:41 - and table heading row index we do have a
07:44 - heading so i'm going to leave that as it
07:47 - is
07:48 - one
07:49 - query format now the query format we're
07:52 - going to query the rows that is correct
07:54 - because we're going to be looking by the
07:55 - rows
07:57 - make sure that the spreadsheet url is
07:59 - the one from yours right here so i'm
08:01 - literally just going to take all of this
08:04 - and just paste it in here like so and
08:06 - then just simply
08:08 - run
08:09 - this
08:10 - like so
08:12 - so here is the data that is coming back
08:15 - to us
08:16 - this is looking
08:19 - wonderful
08:21 - now we have hard coded this is us 10 for
08:24 - the moment but we can change this
08:25 - dynamically but first let's get this
08:27 - data into a table first
08:30 - so all i'm going to do is go back to my
08:32 - zip food delivery app
08:34 - and then under widgets i'm just going to
08:36 - click plus and then i'm going to select
08:38 - the table widget
08:40 - so let's go ahead and find that now here
08:42 - is the table widget and i'm just simply
08:44 - going to drop it like so
08:48 - okay so here is my table the next thing
08:50 - i want to do is actually get the data
08:53 - necessary to populate this table
08:55 - and to do this so let's just get rid of
08:57 - that i'm going to use the
09:00 - fetch
09:01 - orders data data
09:04 - just
09:05 - like that
09:07 - so there we go that is super simple
09:09 - that's all i've done and now we can see
09:10 - all our orders showing up here but just
09:13 - our orders okay not any of the other
09:15 - pages
09:16 - okay
09:18 - so
09:18 - this is looking good i'm actually just
09:20 - going to rename this to be
09:22 - the order
09:24 - table just to make things more readable
09:26 - and things a little bit more organized
09:29 - okay
09:30 - so that is our order table
09:33 - great
09:34 - maybe let's make this orders table to be
09:36 - a bit more precise
09:39 - so we have our table however let's maybe
09:42 - do some styling first so all i'm going
09:45 - to do is just make this look a little
09:46 - bit prettier before carrying on
09:48 - so to do this i'm actually going to i
09:51 - think grab a container so let's grab a
09:54 - container
09:56 - and i'm going to just work this whole
09:58 - table in my container
10:01 - so all these widgets they're also your
10:03 - disposal and they essentially just make
10:05 - you know app creation a lot more easier
10:08 - if i was developing this from scratch it
10:11 - would of course take me much longer to
10:13 - create you know the container the table
10:16 - and so on so this is one of the main
10:18 - benefits of low code solutions we can
10:21 - simply drag and drop things as we please
10:24 - in making our app
10:27 - so there we go and i'm just going to
10:29 - drag this a little bit lower
10:31 - just like so so that we could add a
10:34 - title and a way for us to essentially
10:38 - add more data to our table by creating a
10:42 - pop-up modal
10:43 - so the first thing i'm going to do is
10:45 - just search for
10:46 - the text
10:48 - and just drag it in here oops
10:53 - so there we go
10:55 - now the text well the label for this is
10:58 - going to say orders just so it's super
11:01 - clear what this table is about we can
11:04 - also use emojis if we want so i'm just
11:06 - going to go ahead and grab an emoji
11:08 - just whack it in like so
11:11 - okay and then we can also choose to
11:13 - change the color i want this to be a
11:17 - title so i'm going to go ahead and
11:18 - choose heading one for this so it's a
11:20 - little bit larger but there is some
11:22 - pre-configured text styles but again if
11:25 - we want we can really take this uh that
11:28 - next further step and really personalize
11:30 - it to give it whatever colors we wish
11:33 - okay
11:34 - so there we go that is how you use the
11:37 - text
11:38 - now the next thing i want to do is just
11:41 - create a button so that it shows a
11:44 - pop-up model so again this is super easy
11:46 - i'm just going to drag and drop an icon
11:48 - button
11:50 - i'm going to drag it in there
11:52 - we can of course you know space this out
11:54 - a little bit better if we wish
11:57 - center that so now we have a way to add
12:00 - a modal we can of course also style this
12:03 - button let's actually call this
12:06 - button and all i'm going to do to start
12:08 - it up
12:10 - is perhaps let's just change the color
12:13 - of it so i'm just going to go with this
12:15 - dark gray
12:16 - and what else can we do we can change
12:17 - the border radius to make it look like
12:19 - this
12:20 - and of course now we need to get an
12:22 - event so on click
12:24 - of this widget i need something to
12:26 - happen
12:27 - and what i want to happen is i want to
12:29 - open the modal so i'm just going to go
12:31 - ahead and write that show mojo and then
12:34 - we need to essentially create a modal so
12:38 - let's go back to our widgets one more
12:39 - time
12:42 - and i'm just going to find the modal
12:46 - so here is my modal i'm just going to
12:47 - drag it in here
12:49 - okay and let's call this at modal
12:54 - and let's not animate the loading let's
12:57 - keep that one off scroll contact true so
13:00 - we can scroll everything in here quit
13:03 - dismiss also true and there's no action
13:06 - for this at the moment
13:08 - okay so now let's hook it up so on click
13:11 - of this i want to show the modal
13:15 - so open modal
13:18 - and then select the modal add modal okay
13:21 - so i've just selected the modal that
13:23 - i've just created which we call admodal
13:26 - which means that now if i click this my
13:28 - modal will show up
13:30 - great
13:31 - so let's go ahead and add everything
13:34 - that we need in here i'm just gonna say
13:37 - add new
13:38 - order
13:41 - manually
13:44 - just like so
13:46 - okay and let's maybe spread this out a
13:47 - little bit and just center it so it's in
13:49 - the center
13:51 - and let's also we can change the color
13:53 - of these buttons so i'm just going to go
13:55 - ahead and do that now i'm going to
13:57 - choose this kind of color for this
14:00 - and the clothes again i'm just going to
14:03 - change it from being green
14:05 - to this dark grayish color
14:07 - okay wonderful for now i'm just going to
14:09 - leave this as it is we will go back to
14:11 - that later i want to carry on building
14:13 - out our main dashboard first so another
14:15 - thing i'm going to do is just quickly
14:17 - add a header to this so once again i'm
14:19 - going to get the container widget and
14:21 - i'm just going to drag it up here
14:24 - and then make it a little bit smaller
14:28 - so that is looking good and now i'm just
14:30 - going to drag my first container down
14:32 - here a little bit again
14:34 - so
14:36 - there we go and then just make this one
14:37 - maybe a little bit bigger so that we can
14:39 - fit some more stuff in here like so
14:42 - uh great and let's change the color of
14:45 - this so what color do i want to make
14:47 - this i think this blue would be quite
14:49 - nice let's just go ahead and keep it as
14:51 - that and once again i'm going to add
14:53 - some text
14:54 - so let's find our text widget
15:03 - here is our text widget i'm just going
15:04 - to drag this in here again let's change
15:07 - the text color to be white
15:09 - and then i want this to be an h1 heading
15:13 - just like so and i'm going to call this
15:16 - zip food delivery so just in here
15:19 - zip
15:20 - food
15:22 - delivery okay and then we can change
15:24 - this to title if we wish
15:26 - so here's our title and once again just
15:28 - going to add an emoji
15:31 - and then i'm just going to add the emoji
15:33 - like
15:34 - so and i'm just going to add a sub
15:37 - title now and the subtitle so once again
15:39 - here's the label i'm going to say your
15:42 - custom
15:44 - dashboard to view
15:46 - add
15:48 - and delete
15:50 - orders
15:51 - let's make the text of this white and
15:54 - i'm happy with it being a paragraph
15:57 - so the paragraph default styling
16:00 - and great
16:01 - our header is looking good
16:05 - so we have our header we have our orders
16:07 - in a table we're gonna have a way for us
16:09 - to add new orders manually
16:13 - i'm also gonna go ahead and add a
16:15 - refresh button to do this i'm actually
16:17 - gonna grab the
16:20 - icon button again but this time i'm
16:23 - going to choose a different icon and
16:26 - this icon is going to be the refresh
16:28 - icon that looks like this
16:31 - okay
16:32 - so
16:33 - wonderful and i'm actually going to make
16:35 - the background white
16:37 - to make it look like
16:38 - this
16:40 - so i'm really happy with this and we can
16:42 - actually add an event to this already so
16:44 - on the click of this refresh i actually
16:48 - want to execute a query and it's a query
16:50 - we've already written which is to fetch
16:52 - the orders again okay so i'm going to
16:54 - fetch the orders i'm going to rerun that
16:56 - just like so
16:58 - okay great and that is it so now if i
17:01 - click this button i will essentially
17:03 - refetch the data from our database if we
17:06 - ever need to
17:07 - wonderful
17:08 - so we have that so far the next thing i
17:12 - want to do is just display
17:14 - our customer
17:16 - okay the customer of our order if i
17:18 - highlight one of the lines i want to
17:20 - show me exactly who order it i want to
17:22 - see their name i want to see their email
17:24 - i want to see their phone number and
17:25 - maybe a little picture of them too as we
17:27 - do have that data available to us
17:31 - so that is the next step once again i'm
17:33 - just going to grab the container
17:37 - just like so and just make that a little
17:39 - bit smaller and in here i'm just going
17:42 - to grab the text
17:44 - and this is essentially going to show
17:46 - the name of our customer
17:51 - so we can even give it customer
17:54 - name
17:55 - just like so and then let's make this
17:58 - maybe a little bit larger let's make
18:00 - this i'm going to give it an h1
18:02 - tag as well
18:04 - the next thing we're going to do is just
18:06 - show their email address so i'm actually
18:07 - going to call this
18:09 - email
18:11 - address just give it a label so
18:13 - everything is a lot more readable and a
18:15 - lot easier for us to do let's maybe
18:17 - change the color of this to be like blue
18:19 - or something and then we're also going
18:21 - to have the phone number so
18:24 - name email phone number i'm going to
18:26 - change this for readability to be
18:28 - phone number
18:30 - and
18:32 - wonderful
18:33 - and we also want to have that image
18:34 - right so i'm just going to move this
18:35 - over a little bit actually for now
18:41 - and i can choose to have an image
18:45 - so once again let's go back to the
18:46 - widgets
18:48 - and i am just going to find
18:50 - the image widget
18:52 - it's going to drag that in here
18:55 - and this essentially is going to show me
18:57 - the image of the customer when we pick
19:00 - them out
19:02 - okay
19:03 - so again i'm just going to rename this
19:05 - readability
19:07 - customer
19:09 - profile
19:11 - wonderful so let's do it let's link it
19:13 - all up
19:15 - so to do this we're actually going to
19:17 - have to make another query
19:20 - so
19:21 - let's go ahead and do that now so just
19:23 - under queries i'm going to select this
19:26 - and and we are going to
19:28 - use the
19:30 - order database we're going to make a new
19:31 - order database query this one is going
19:34 - to be fetch
19:38 - user
19:39 - and once again we're going to fetch the
19:41 - sheet row we're going to get the url for
19:44 - our spreadsheet so i'm just going to
19:45 - paste that in here like so the sheet
19:48 - name well the sheet name for this is
19:50 - actually going to be the
19:52 - customers okay because we want to get
19:54 - this information right here so i'm just
19:56 - going to make sure to spell exactly the
19:58 - same way so customers and then let's
20:01 - leave these blank we can increase the
20:03 - row limit if we
20:05 - wish
20:06 - so i'm just going to put 20 for now and
20:09 - then let's click run
20:11 - okay
20:12 - so there we go we're getting all our
20:14 - customers and now we can use this fetch
20:17 - user
20:19 - query in order to fetch our users to
20:21 - populate our app
20:23 - so let's go back to here
20:30 - now
20:31 - what i'm going to do
20:32 - is so instead of this default image
20:36 - i'm going to once again get our two
20:38 - curly braces and use the fetch
20:41 - user
20:42 - query so it's exactly exactly the same
20:45 - as this one right here that fetches all
20:47 - of our users i'm gonna go into the data
20:50 - for now i'm just gonna put in the first
20:53 - user and i'm going to get there
21:00 - image
21:01 - so let's go ahead and do that
21:04 - making sure just for image with a
21:06 - capital i
21:08 - and great
21:09 - so there we have our customer profile
21:11 - however what i want to do is use
21:13 - whatever
21:14 - row i'm in to show the customer
21:17 - profile
21:18 - okay
21:19 - so i'm going to show you how to do that
21:21 - next
21:23 - so all i'm going to do is go back to
21:25 - fetch user and make sure to fetch just
21:27 - the one user that is selected so to do
21:30 - this i'm going to look for the user by
21:32 - the id and the value is going to be
21:35 - we're going to go into the orders table
21:37 - how do we call it we call it orders
21:39 - table so make sure to call it exactly
21:41 - the same
21:42 - okay because it's the name that we gave
21:44 - our table widget
21:46 - and i'm just going to choose selected
21:49 - row
21:50 - and i'm going to
21:53 - search for the customer
21:56 - id oops making sure to spell id with a
22:00 - capital i
22:02 - and making sure the operator is equal
22:03 - equal so id equals customer id and click
22:08 - run
22:09 - so now let's go back to our zip through
22:12 - delivery and talk it through again so we
22:14 - are going into the orders table the
22:16 - widget called orders table and the
22:18 - selected row we are getting the customer
22:20 - id
22:21 - okay
22:23 - and all it means that in here i am
22:25 - looking
22:26 - for the id with a column name
22:29 - for our customers
22:31 - equals
22:34 - the customer id on our table
22:38 - now to actually make this run every time
22:41 - we click on one of these we're going to
22:43 - have to run the
22:44 - that user query so all i'm going to do
22:47 - is go back in here and on the row
22:50 - selected
22:53 - so on row selected we'll have an action
22:55 - i'm going to execute the query fetch
22:58 - user okay so that's all we're going to
23:00 - do we're going to fetch the user and
23:03 - run it
23:04 - okay
23:05 - so there we go we can also have more
23:09 - events on here so on page change we can
23:12 - also rerun the fetch orders query just
23:15 - to make sure that our fetch orders are
23:17 - always the freshest it can be
23:19 - so there we go so now let's check it out
23:21 - i'm going to click on this one
23:23 - and
23:24 - here we have delphi and then if i click
23:26 - on this one we have the user associated
23:29 - with this next order
23:31 - so that is all working good let's apply
23:34 - the same logic to the email address
23:36 - so all i'm going to do here is go into
23:42 - the fetch
23:44 - user query and just get the first row of
23:48 - data okay and i'm gonna get the email
23:51 - because after we click one of these
23:54 - we're only gonna return
23:55 - one customer which is why we could just
23:57 - put a zero here we are literally just
23:59 - going into the first oops these should
24:02 - be curly braces the first
24:05 - uh item in our returned array
24:08 - okay
24:09 - so there we go what's not what's going
24:12 - on here oops
24:14 - we need two curly braces at the end so
24:17 - that is the syntax
24:18 - for whenever you need to get data from
24:21 - one of these
24:22 - or
24:23 - from a query
24:26 - wonderful
24:27 - [Music]
24:28 - and last one you know what to do the
24:31 - last one we want to get is the phone
24:32 - number so once again here's the syntax
24:34 - we're going to get up our curly braces
24:36 - we're going to go into the fetch
24:38 - user query which at the moment is
24:40 - returning just one
24:42 - object in an array if we click on any
24:46 - one of these so we're going to go into
24:47 - that object into the first object and
24:49 - we're going to get the
24:51 - phone number so i'm just going to double
24:53 - check
24:54 - how it's written here it's written phone
24:56 - so that's what we're going to get we're
24:58 - going to get the
24:59 - phone
25:00 - and
25:02 - wonderful
25:03 - okay
25:04 - so this is looking good just to recap
25:06 - once again to get this working it is
25:08 - important to write another query so the
25:11 - fetch user query we'll look into our
25:14 - table it will look into the sheet of
25:16 - customers so that's what i'm saying i'm
25:18 - saying look in the sheet of customers
25:20 - and then also look
25:22 - okay
25:23 - look at the id of the customer which is
25:26 - one look at that and then match it with
25:28 - the orders table selected row customer
25:30 - id so essentially go into here look at
25:34 - the orders table and look at the
25:36 - selected row
25:38 - custom id
25:39 - and just return back the customer based
25:42 - on that okay and then to get it shown
25:45 - here we're just going to go into the
25:46 - fetch user query and get the first item
25:49 - returned in our array which should be
25:50 - the user
25:52 - so hopefully that now makes sense
25:54 - hopefully us going over that again has
25:56 - given you a better understanding of how
25:58 - all of this works together
26:00 - now that we have that let's carry on
26:04 - so this is actually great because we're
26:06 - going to use the exact same technique we
26:09 - did to fetch the user to fetch a
26:11 - specific
26:13 - product or specific order so this is
26:15 - great for repetition let's do it again
26:18 - so the first thing i'm going to do is
26:19 - just use a container
26:21 - so let's make a new container not an
26:23 - existing container i'm going to drag it
26:25 - in here and this is going to display our
26:28 - order information
26:30 - so once again i'm just going to style it
26:32 - out a little bit first i'm going to grab
26:34 - some text
26:35 - and let's call this order information
26:41 - and then i'm just going to display the
26:42 - order that we have here for now i'm just
26:44 - going to leave it blank let's also make
26:46 - this an h1 heading just like so just to
26:48 - make it really big
26:50 - and then let's perhaps also name this
26:52 - something so we can call this
26:55 - order
26:57 - info so it's easier for us to pick out
27:01 - so we've got our order information here
27:03 - i'm just going to move this around a
27:05 - little bit just to make it look a little
27:06 - bit neater
27:12 - and now what do we need well i'm going
27:16 - to actually show the charge id
27:19 - so let's go ahead and just put
27:23 - charge
27:25 - and once again i'm just going to put in
27:26 - my charge id after this
27:29 - from stripe so let's call this charge
27:34 - info
27:35 - so we're going to have our charge id
27:37 - here and the next thing we're also going
27:38 - to have so i can actually also just copy
27:41 - and duplicate stuff like this
27:43 - let's call this the address
27:47 - info and this is going to obviously have
27:49 - my address
27:51 - once again i will leave that blank
27:53 - because we're just you know getting the
27:55 - basics ready for us to carry on and then
27:58 - we're also going to have the status
28:01 - the status of our order so let's put
28:03 - status
28:05 - info
28:07 - and then perhaps let's also have the
28:08 - order date
28:10 - so i'm just actually going to drag that
28:12 - over here and let's just put
28:14 - date
28:16 - and have this as date
28:19 - info
28:20 - wonderful
28:22 - so there we have that and i'm just also
28:24 - going to show our products that are
28:26 - associated with this order so products
28:30 - let's call this
28:32 - product
28:36 - title if you ever need to pick it out
28:37 - that was what it is called
28:39 - and in here i'm just going to show
28:41 - perhaps an image
28:43 - of our product so once again i'm just
28:45 - going to drag this in here
28:47 - for now even though we will need to map
28:49 - stuff out
28:51 - and then we're also going to have the
28:52 - total amount so i'm just going to drag
28:54 - this here
28:56 - and amount
28:59 - info and i'm just going to give this a
29:01 - label
29:02 - total
29:05 - amount
29:06 - okay
29:08 - so this is looking good and the one last
29:10 - thing we're going to do is actually add
29:12 - a refund button so that we can refund
29:14 - the order through the strike api if we
29:17 - need
29:18 - so let's get our button
29:22 - just drag it here
29:25 - and let's just call this
29:27 - refund
29:30 - and then let's make the button
29:33 - maybe this blue color
29:35 - we can also give it a border radius just
29:37 - to soften it up a
29:39 - little bit
29:41 - so great
29:47 - so now let's go back and we're going to
29:50 - have to make a
29:52 - another query you guessed it so in here
29:55 - we're going to click here and we're
29:56 - going to use a new order database query
30:00 - so we're going to use our order database
30:01 - in order to make a new query this time
30:04 - however we're going to fetch the
30:07 - products so let's do fetch
30:10 - products just like so making sure to use
30:13 - this url to this spreadsheet
30:16 - and then this time the sheet i'm gonna
30:18 - get is products
30:20 - so let's go ahead and just put products
30:22 - here
30:25 - and click
30:26 - run
30:27 - okay so it's getting all the products
30:30 - and we already know that we need to look
30:32 - in here and we're going to look for the
30:34 - order id this time so we're going to
30:36 - grab this to make sure it's spot exactly
30:38 - the same way we're going to look at our
30:40 - table in here and get the order id and
30:42 - make sure it is matched so let's just
30:44 - whack that in here it's matched so we're
30:46 - going to use the double equals sign so
30:48 - this actually these two equals means
30:50 - that it doesn't matter if we're
30:52 - comparing a number to a string
30:54 - uh that will be equal it doesn't look at
30:56 - the type
30:58 - okay so that is just something you
30:59 - should know as well and we're gonna look
31:02 - for
31:03 - the order id in our table so what do we
31:06 - call our table we called it orders table
31:09 - i'm going to look at the selected
31:11 - row and we're going to look for the
31:14 - order id
31:15 - okay so those two things need to match
31:19 - in order to fetch the correct product
31:20 - and let's just hit run
31:23 - great
31:24 - i'm just going to increase the row limit
31:27 - while we are here and now let's use this
31:29 - fetch product so let's go back in here
31:32 - and make sure that every time we select
31:34 - a row
31:39 - we also execute another function and
31:41 - that is
31:42 - fetch
31:43 - products
31:45 - so to actually write two we can just use
31:48 - this javascript function in order to
31:50 - manually type out the two
31:53 - uh queries we wanna run so again using
31:56 - the
31:57 - two
31:58 - curly braces i'm just going to add fetch
32:01 - products and
32:03 - run
32:04 - okay and make sure to use the semicolon
32:06 - here and i'm just going to use one here
32:08 - so now these two functions these two
32:10 - queries will run if i click on any one
32:13 - of these
32:14 - okay
32:15 - wonderful
32:17 - so now that we are getting the products
32:19 - i want to actually map all the products
32:21 - that are returned so all the products
32:23 - for example
32:24 - in here that have the same order id i
32:27 - want them to be returned and shown to me
32:29 - here so let's do it
32:32 - so let's go into the widgets and i'm
32:34 - actually going to look for a list
32:37 - so i'm just going to drag this in here
32:39 - for now making sure that it fits
32:42 - i'm just going to drag this down
32:46 - so here is my
32:52 - list and the list is just an easier way
32:55 - to map things onto
32:57 - a list i guess so that's why we are
32:59 - using it i'm just gonna move all this
33:01 - out the way for now and then let's drag
33:03 - out our list a little bit
33:06 - okay
33:08 - so here is our list and now i'm just
33:10 - going to map out the information onto it
33:12 - so the information we want to map out is
33:15 - well it's actually just everything from
33:17 - the fetch
33:19 - products
33:21 - data query so let's just remove all of
33:23 - this and use our two curly braces and
33:26 - then i'm going to go into the fetch
33:28 - products data
33:31 - and
33:32 - now
33:35 - i'm going to use the current items so
33:37 - let's see what we can use here quantity
33:39 - i can use item name so let's do
33:42 - item
33:48 - and that will map out the item
33:50 - name just like so we can also use the
33:54 - quantities about
33:56 - q t y i believe
33:59 - q t y with small t y
34:03 - so we've got one by the cake and five
34:06 - lollipops and then we can also do the
34:07 - same for the image so this i believe is
34:10 - image spell like this but let's just
34:11 - check i know it's item image so
34:15 - let's change that
34:18 - item
34:19 - image
34:21 - however as it's two word we're gonna
34:22 - have to actually just go into
34:26 - the array and look for anything
34:29 - with the key of item image
34:32 - okay making sure to have two curly
34:35 - braces at
34:37 - the end
34:39 - so there we go
34:42 - this is looking
34:43 - wonderful
34:44 - and i believe that's all the data we
34:46 - really want to show
34:48 - so
34:49 - this is looking good so i'm just going
34:51 - to get rid of this actually we don't
34:53 - need that anymore and i'm just going to
34:54 - move this whole list
34:56 - a little bit higher and then also let's
34:59 - move the total amount to be below
35:05 - and the refund amount to be below
35:08 - 2.
35:10 - great
35:12 - this
35:13 - is looking
35:15 - wonderful
35:16 - just gonna
35:18 - make sure that this is all
35:20 - a little bit more
35:22 - i liked
35:23 - okay
35:24 - so we are now getting our products if i
35:27 - click on here it should show me the
35:29 - correct product for this order which is
35:32 - four chocolates and two candies and the
35:34 - customer profile is updating too
35:37 - great
35:39 - so that was the hard part done believe
35:41 - it or not the next thing we're going to
35:43 - do is just link up these information so
35:46 - let's get our kylie braces up and we're
35:48 - just going to look in the order data
35:50 - table so orders
35:53 - table
35:55 - and we are going to look for the
35:59 - stripe purchase id
36:02 - so actually we need the selected row
36:04 - don't we selected row and then we're
36:06 - going to get the stripe purchase id
36:09 - so there we have it i'm just going to
36:11 - stretch that out a little bit so it's
36:13 - more readable
36:14 - there's the charge do the same for the
36:16 - address
36:19 - so perhaps we can make this
36:21 - smaller actually this doesn't really
36:23 - need to be as big as it is
36:31 - so i'm just literally dragging and
36:33 - dropping things around this could not be
36:35 - any easier i just want to make sure that
36:38 - we're getting
36:39 - all the information we need
36:41 - on the order information
36:43 - so just drag that out i'm also going to
36:46 - drag this out here uh the address now so
36:49 - once again we know the drill double kali
36:51 - braces let's look into the orders table
36:54 - and the selected row we want to get the
36:57 - address right so address
37:01 - we can actually just select from this
37:03 - drop down to see
37:04 - what we need so delivery address
37:08 - and then just
37:09 - spread that out a little bit same for
37:11 - the status so
37:13 - let's go into the orders table
37:17 - let's get the selected row and let's get
37:20 - the
37:22 - status
37:24 - okay so this is looking
37:26 - good
37:27 - and finally the date so once again
37:31 - kylie braces
37:32 - orders table
37:36 - selected row
37:39 - and then we have the
37:42 - date
37:46 - and i'm just going to spread that out a
37:48 - little bit just
37:49 - like
37:50 - so
37:52 - so this is all looking so wonderful we
37:55 - only have a few things left we need to
37:57 - hook up the refund functionality with
37:59 - the stripe api
38:01 - so
38:02 - let's do that i'm going to do that right
38:05 - after actually we um just tidy up our
38:08 - table a little bit so one cool thing
38:10 - about this table is that we can actually
38:11 - edit the
38:13 - uh columns columns what we want to see
38:15 - we can also format things so for example
38:17 - the date
38:18 - column
38:21 - so for example for the date column i can
38:24 - edit this so i can use the
38:26 - pre-configured date
38:29 - formats or i can actually write my own
38:31 - if i want to be super specific if i
38:32 - don't like any of those so here's some
38:34 - javascript that i wrote earlier so here
38:36 - we have the two kylie braces what i'm
38:38 - doing is getting the current rows date
38:40 - so the column is called date so we have
38:42 - to make sure this felt exactly the same
38:44 - and if it exists
38:46 - then i'm going to pass it through a
38:47 - moment i'm going to pass a date through
38:48 - a moment in its current format
38:51 - and i'm going to format it to this
38:52 - format which includes a much more
38:54 - readable date as you can see here that's
38:56 - what has been formatted to
39:00 - and if it doesn't exist then just put an
39:02 - empty string
39:03 - wonderful
39:04 - so that's looking better we can of
39:06 - course also rename the columns
39:09 - themselves so if i want order id just to
39:12 - be a bit more user friendly i could put
39:15 - order id the delivery dress we can have
39:18 - as
39:18 - you know delivery address order amount
39:21 - status do we need the stripe purchase id
39:24 - i don't really think we do
39:26 - need it so i'm just gonna go ahead and
39:28 - actually make it not visible and i'm
39:30 - gonna do the same for the customer id as
39:34 - well
39:35 - okay
39:36 - so there we go
39:39 - the total amount i can actually also
39:41 - make this much more user-friendly and
39:44 - just make sure that people know it's in
39:46 - dollars
39:48 - so let's go ahead and click here and i'm
39:50 - just going to add a
39:52 - dollar sign
39:53 - to
39:54 - the end
39:56 - okay so this is all looking much better
40:00 - uh let's also add some colors for the
40:02 - statuses and let's also hide the row
40:04 - index so where's the row index i don't
40:07 - want that visible so i'm just gonna
40:09 - click on the i so these three are not
40:11 - visible now this is all that's going to
40:13 - be visible and on the status
40:16 - i'm just going to instead of putting in
40:18 - a text color just going to use some
40:19 - javascript so let's get up our two curly
40:22 - braces again i'm going to grab the
40:24 - current
40:25 - row and i'm going to get the status
40:28 - column
40:28 - and if the status equals the string
40:32 - refunded i want the color to be so if
40:36 - it's true i want it to be
40:39 - blue
40:40 - otherwise
40:45 - sorry we should be writing this in
40:46 - javascript
40:48 - so make sure the js is turned on
40:52 - otherwise
40:54 - if current
40:55 - row
40:57 - status equals
41:00 - delivered
41:02 - delivered
41:04 - then we want
41:08 - the color
41:10 - green
41:13 - otherwise if current row
41:16 - status
41:18 - equals
41:20 - delayed
41:22 - then we want it
41:25 - red
41:25 - and as a default we're just going to
41:27 - have
41:30 - luck so that is some javascript for you
41:32 - using the tertiary operator and there we
41:35 - go
41:36 - and then we can also make this uh
41:38 - you know we can make it capital letters
41:40 - if we want so i'm just going to make it
41:43 - so this is looking good uh we also
41:46 - actually need to add
41:49 - be able to add orders
41:51 - manually so perhaps let's do that bit
41:53 - next i'm gonna start making my modal
41:58 - so
41:59 - let's do it
42:01 - so on our model let's get up on module
42:03 - what do we need in here
42:06 - well i need some inputs
42:08 - so i'm actually going to have a drop
42:11 - down so i'm going to use the select drop
42:13 - down here because we want to select from
42:15 - a list of already existing customers
42:19 - so let's put
42:21 - customer
42:22 - just like so and at the moment i'm just
42:25 - going to leave these options in here
42:26 - because we're just going to do the ui
42:27 - for now
42:29 - the next thing we're going to need is a
42:31 - area to write the address in
42:35 - so i'm just going to put in an input so
42:38 - i'm just going to drag in the input
42:40 - widget
42:43 - just like so
42:45 - making sure to move the button down
42:49 - so there's
42:51 - the buttons
42:53 - confirm and
42:56 - close
42:59 - and i'm actually just going to copy this
43:00 - a few times
43:04 - and then we also need to put in some
43:07 - labels so i'm just going to drag this
43:08 - above here
43:10 - so this label is going to say
43:12 - address and i don't want it to be bold
43:18 - so again making sure to keep things
43:21 - in
43:23 - line
43:25 - and we can make this one a little bit
43:31 - the next one we want is
43:34 - stripe purchase id so if we want to put
43:37 - this in manually we need a stripe
43:39 - purchase id
43:42 - once again let's not make this bold
43:48 - and let's also have another select
43:51 - to choose the
43:52 - status so again let's pick the
43:58 - select
43:59 - widget and just put it under here
44:07 - and this is going to be for selecting
44:08 - the status so let's just
44:11 - put that in here and i think i'm just
44:12 - going to hard code the statuses because
44:15 - there's not many so let's go ahead and
44:17 - do that
44:19 - so label let's say
44:24 - order
44:27 - placed
44:29 - value order
44:31 - placed
44:34 - and then we have
44:39 - delayed
44:42 - delivered
44:45 - and
44:48 - refunded okay so we're just gonna hard
44:51 - code these ones i'm i don't mind doing
44:54 - that delayed
44:57 - delivered
45:00 - refunded
45:02 - okay so these are looking
45:07 - good
45:09 - wonderful
45:14 - we can also have a default value if we
45:16 - want i think it should be order
45:19 - placed
45:23 - okay great
45:24 - and the next thing we need to do is just
45:26 - be able to select products from our drop
45:28 - down so this is actually going to be
45:30 - another select so i've just copied that
45:33 - and this one however is going to say
45:38 - selected products
45:48 - and now we also need a multi select okay
45:50 - the multi select is going to allow us to
45:52 - select multiple products that we want to
45:54 - order
45:55 - so let's just make this a little bit
45:57 - bigger and let's give this the label
46:01 - uh select
46:04 - products just like so
46:09 - and let's write a query for this okay
46:12 - i'm actually going to write a query for
46:13 - this as well so that we can get all the
46:15 - products that we want
46:17 - so i think this is it now let's just go
46:20 - ahead and i'm just going to put these
46:21 - two buttons like so so the close and
46:24 - confirm button just make sure that the
46:26 - very end
46:30 - okay so let's continue with this
46:36 - so we're selecting our products we're
46:38 - selecting a status
46:40 - we also have
46:42 - the purchase id a place to put the
46:45 - address and of course the customer name
46:48 - from a drop down also perhaps let's have
46:50 - a list so we can see what products we
46:52 - have selected
46:54 - so we oh we also need to put in the
46:56 - total amount as well so this is going to
46:58 - be a number input
47:01 - so let's go ahead and get the currency
47:02 - input right about here
47:07 - and just
47:08 - put it like so
47:10 - so this is going to be for the
47:12 - order amount so maybe let's make that a
47:14 - little bit smaller and then let's also
47:17 - put in some text that says order amount
47:20 - so here we go and the label will say
47:23 - order
47:25 - i'm out and make sure that it's not
47:30 - bold just to keep everything consistent
47:36 - i'm just going to make the actual
47:38 - pop-up model a lot bigger
47:42 - and then let's also add a list to show
47:45 - all the products that have been selected
47:47 - so once again let's find the list widget
47:52 - just drag and drop it in here
47:55 - so there
47:58 - you go
48:02 - that's looking a lot better
48:14 - so there is a full order pop-up now
48:17 - let's get to actually getting the
48:19 - customers we're gonna have to write a
48:21 - query for that
48:22 - so once again back in here we're gonna
48:24 - make a new
48:27 - query from our order database
48:30 - and let's call this fetch customers
48:34 - or maybe fetch all
48:36 - users to be a bit more consistent once
48:38 - again we're going to grab all of this
48:41 - we're going to put that url in here the
48:43 - customer
48:44 - sheet is called customer customers with
48:47 - an s
48:48 - so make sure to make that the same
48:51 - row limit let's put 100 and let's just
48:54 - run it okay so there we have all our
48:57 - customers now we're going to use this
48:59 - query
49:00 - so let's go back to our zip food
49:03 - delivery
49:04 - let's get up our model we're going to
49:06 - use the query to populate
49:08 - the
49:09 - customer drop down so
49:12 - using the two curly braces i'm going to
49:14 - fetch all users data okay
49:18 - so that is all i'm doing
49:21 - and now i'm just going to map so i'm
49:23 - going to get each user
49:26 - that exists
49:27 - and for each user well what do i want to
49:30 - do i just want to return the user's
49:35 - first name
49:39 - and we also need to give it a value so
49:42 - we also need to go comma value
49:47 - and let's just give the value of this to
49:49 - be the user's
49:50 - id
49:52 - okay so that's how it should be looking
49:55 - now
49:58 - okay so that's how our array of objects
50:00 - should be looking now we can also have
50:02 - the last name so perhaps let's do that
50:04 - i'm just going to add an empty space and
50:08 - then add the user
50:11 - last
50:14 - name
50:16 - great so that is what it should look
50:17 - like at this moment and then we don't
50:20 - want a default value so let's just leave
50:22 - that
50:23 - blank
50:25 - wonderful
50:27 - so there we go we've used a query to
50:29 - fetch all our users so we can select
50:31 - them in this drop down
50:33 - the next thing we need to do is uh
50:36 - figure out how we're going to
50:38 - do the same for selected products so
50:41 - once again we're just going to use
50:43 - exactly the same method that we just did
50:45 - so we're going to make a new query from
50:47 - the object database query
50:49 - let's call this
50:51 - fetch all
50:53 - orders or fetch
50:55 - um product catalog let's call this
50:58 - product
50:59 - catalog
51:01 - so once again we're going to go in here
51:03 - to get this url
51:08 - i'm just going to paste it in here like
51:09 - so and the sheet name well the sheet
51:12 - name for the product catalog is product
51:14 - catalog
51:15 - so let's type in
51:17 - product catalog exactly like spelts and
51:22 - making sure the capitals are all capital
51:23 - and so on uh row limit 100
51:26 - and click
51:28 - run
51:29 - okay so there we go there's our product
51:31 - catalog which means that now we can go
51:32 - back here let's get off our module and
51:36 - let's get the selected products let's
51:38 - get rid of all this data
51:41 - and let's go into the fetch product
51:44 - catalog data
51:46 - and once again we use the map
51:48 - javascript function
51:51 - to map so for each product so for each
51:54 - item that exists in our array i am going
51:57 - to
51:58 - return
52:01 - a label and a value so the label is
52:03 - going to be let's go into the product
52:06 - and get its
52:07 - item name
52:11 - and then let's also give it a value
52:12 - because that's how this needs to look we
52:14 - need a label and a value and that's
52:16 - going to be the product id
52:19 - okay so item has to be spelt with a
52:21 - capital i actually because that is how
52:24 - it is spelt in here capital i but id is
52:27 - small i so just make sure that is the
52:29 - same so that you can have objects with a
52:31 - value and a label okay because that is
52:33 - how we do this and let's not have
52:35 - default values so let's only have the
52:38 - option to select certain products
52:41 - wonderful and now let's map them onto a
52:44 - list
52:44 - so to do this i'm actually going to use
52:47 - this so the multi select one
52:50 - so i'm going to get the
52:52 - multi or let's actually rename this
52:54 - maybe to make this easier i know we
52:56 - haven't been renaming all of them but i
52:58 - guess it's just interesting to know that
52:59 - you can
53:00 - i'm going to call this product
53:02 - mo
53:04 - t select
53:07 - so that means
53:09 - that now we're going to use the
53:18 - product
53:21 - multi select
53:23 - and i'm going to get the
53:26 - selected option values not labels
53:30 - and map
53:31 - uh each
53:34 - thing in my array i'm going to map
53:37 - it so it returns
53:43 - what do i need it to return
53:45 - i just want it to return the fetch
53:49 - product catalog i'm going to go into the
53:51 - catalog and find so get the data
53:54 - and find
53:59 - the product
54:00 - that has a matching so id to the product
54:04 - id so product
54:06 - id has to equal the id
54:13 - okay
54:16 - and now this means that for the image we
54:19 - can get the current items
54:23 - item image so let's go into here and get
54:26 - the item image making sure to spell it
54:28 - exactly the same as it is here
54:32 - and now let's test it out let's select
54:34 - products i'm gonna go lollipop
54:36 - and there we go so that is updating now
54:40 - text 13 i guess we want this to be the
54:43 - item
54:44 - item
54:46 - so there
54:48 - you go and if i select more things so
54:50 - let's go chocolate
54:52 - we can see more of them too
54:56 - so this is looking great i'm so happy
54:58 - with this
55:00 - uh and everything is working as it
55:02 - should we've got all that we need so
55:04 - let's link this up so that it actually
55:06 - adds some data to our database
55:11 - so let's do it i'm going to have to
55:13 - write some queries for this so once
55:15 - again i'm going to
55:17 - go in here and write a new order
55:20 - database query and this time i'm going
55:23 - to say add order
55:25 - and for this to work i'm just going to
55:28 - once again have to get the same
55:31 - url however this time i'm going to
55:33 - insert sheet row so there we go that's
55:35 - all we're going to do and we're going to
55:38 - insert this on the orders page
55:40 - okay and then we're going to make a row
55:43 - object so this is what we need to do
55:44 - we're going to get the two back ticks
55:46 - and then we're just literally going to
55:49 - look at the orders and then find each of
55:51 - these column names
55:53 - so let's perhaps do that now
55:58 - okay so we're going to have the
56:01 - order
56:02 - id making sure to spell exactly the same
56:05 - so order id the next thing is dates so
56:07 - perhaps it's easier just to
56:10 - you know
56:11 - copy and paste date
56:15 - the next thing is going to be
56:17 - delivery address
56:19 - so let's have the delivery address and
56:21 - for now i'm just going to keep this
56:23 - empty
56:29 - oops this doesn't need to be in two
56:31 - sorry that's just one like so
56:33 - the next one is going to be
56:36 - the total amount
56:41 - the next one is going to be the status
56:46 - it's just
56:48 - like that
56:50 - then we've got the stripe purchase id
56:58 - and then we have the customer id so
57:01 - there
57:02 - you go
57:03 - and what kind of data do we want to put
57:06 - in here
57:07 - well
57:08 - i'm going to say that this
57:12 - id
57:14 - i'm just going to put this for now and
57:15 - see what happens the date however is
57:17 - going to be a lot easier because we're
57:18 - going to use moment
57:21 - and then we're just going to do
57:23 - format
57:27 - and we're gonna have to make it the same
57:28 - format that we have currently so year
57:30 - year month month
57:32 - day day
57:34 - making sure that's in strings
57:37 - the address well that is gonna be the
57:41 - uh let's actually just save this for now
57:44 - because we're gonna have to get the
57:49 - address input so maybe let's call this
57:54 - address
57:56 - input let's call this stripe input
58:03 - i'm going to call this
58:05 - amount input
58:10 - because we're going to have to grab all
58:11 - of these values
58:13 - let's also have the status select
58:16 - or status input it doesn't really matter
58:19 - maybe just everything consistent and the
58:22 - product multi select that is fine so and
58:25 - of course the customer so customer
58:27 - select maybe have
58:29 - cuss
58:31 - select so let's hope to remember all
58:32 - these now
58:34 - uh okay let's go back to our explorer
58:36 - and back to writing the ad order
58:40 - so the delivery address is going to be
58:42 - the
58:43 - address
58:44 - input
58:48 - text
58:49 - the total amount well that is going to
58:51 - be the
58:53 - amount
58:55 - input
58:56 - text
58:58 - status since again that's going to be
59:00 - the status input
59:03 - text and this is going to be the
59:06 - stripe input
59:08 - text
59:11 - and this is going to be the
59:13 - customer
59:17 - select
59:19 - so
59:20 - which ones were select because we're
59:22 - going to have to change some of these
59:25 - this was a
59:26 - selected
59:29 - option value
59:32 - and the status was a selected
59:35 - option value okay so obviously the
59:38 - customer id is not being liked why is
59:40 - that did we not save it
59:45 - ah we did not save this is not changed
59:47 - so customer
59:49 - select and make sure that updates
59:53 - okay
59:54 - so this should now all be good selected
59:57 - option value
59:58 - this is looking wonderful
60:00 - um great so actually if i run this it
60:03 - should add and it has been adding
60:05 - uh so
60:07 - great let's actually
60:11 - delete these for now but we can see the
60:13 - stuff is working that is good
60:16 - so we've written a query to add the
60:18 - order we also need to update it so it
60:20 - adds a product right so let's go ahead
60:24 - and do that too
60:25 - so once again i'm just going to make a
60:28 - new query
60:30 - and let's go ahead and add a call it add
60:32 - product we're going to insert a line
60:35 - to make sure that this is inside sheet
60:37 - row let's get the sheet
60:41 - and let's call this
60:43 - whatever product is called so products
60:51 - and once again let's make our object
60:54 - so this time once again let's just have
60:57 - a look at what we need to add
61:00 - well as there could be multiple ones
61:02 - what we actually need to do is get the
61:05 - product
61:08 - list
61:09 - so these are two curly braces
61:13 - and the products list
61:18 - and then get the list
61:21 - data
61:23 - and map
61:25 - each product and i'm also going to get
61:27 - this index
61:33 - and i'm just going to return
61:36 - the id so now we're going to make our
61:38 - object be id item item image order id so
61:41 - id
61:45 - item spell exactly the same
61:51 - so making sure that the capital is all
61:52 - the same and all that otherwise you know
61:55 - it will not work
61:57 - and we also have the
61:59 - order id
62:06 - and the quantity
62:11 - so
62:12 - now let's get to picking some out
62:14 - so for the id what i'm going to do is
62:16 - actually fetch the product so all the
62:19 - products and get the length
62:22 - of my uh column i guess or my table and
62:25 - just add the index
62:27 - another item well that's easy it's just
62:30 - going to be the product
62:32 - item the capital i because we are just
62:36 - mapping each one of the product lists
62:38 - and then we're going to go into the
62:40 - product again and we're just going to
62:42 - grab the item image
62:46 - and now we need the order id so i'm just
62:49 - going to go this params
62:55 - id ah of course we need a quantity
62:58 - because we can have multiple ones in
63:00 - fact this should not be insert row
63:04 - this needs to be bulk insert row
63:07 - okay which means just paste the same
63:10 - thing again and now let's fix the
63:12 - quantity part uh well that is just going
63:14 - to be the products
63:17 - list
63:19 - items
63:21 - index
63:24 - quantity
63:25 - input
63:27 - text
63:29 - okay
63:30 - so i don't think we saved product lists
63:32 - i thought i named my products list
63:34 - product list but i obviously didn't so
63:36 - let's go back in here and just make sure
63:39 - that this list
63:42 - this list right here so list two
63:44 - is actually called
63:46 - product list
63:48 - wonderful
63:49 - so
63:50 - on the product list
63:53 - i'm just going to add a number input
63:56 - so let's get the input that is for
63:59 - numbers
64:00 - so just drag in the input like so
64:03 - and make sure the data type is number
64:07 - and let's
64:09 - call this
64:10 - quantity
64:11 - input
64:13 - okay
64:14 - so now each one of these will have a
64:15 - quantity input as well so we can decide
64:17 - how many we want
64:19 - okay so we've written two queries now
64:21 - let's get to actually making sure that
64:23 - they both run when we click the confirm
64:25 - button so let's do it
64:28 - so for this i'm actually going to make a
64:30 - utils
64:31 - uh file so just to make it a little bit
64:33 - easier for us when there's a lot of
64:35 - stuff that's going to happen when we do
64:37 - one thing and all i'm going to do so
64:39 - let's
64:40 - do that in
64:42 - here
64:43 - i'm going to delete that and i'm going
64:45 - to write my own function
64:47 - it's going to be called add order
64:51 - and it's an async function
64:54 - and all that's going to happen is i'm
64:56 - going to
64:58 - generate an order id so const
65:03 - order id
65:05 - equals and this generates
65:10 - random id
65:14 - make sure that it's camel case
65:17 - so this is a function that we will write
65:18 - in a bit so we're going to do that
65:21 - we're also going to await and we're
65:23 - going to run the function add
65:25 - order
65:26 - so let's run it
65:29 - and we'll pass through the id okay so
65:32 - that's what i was doing when i was using
65:34 - this params so let's pass through the
65:36 - order id
65:37 - we'll do the same for add products
65:40 - so let's run that it probably should be
65:42 - products multiple but you know let's
65:45 - also add the id so the order
65:48 - id
65:49 - and then also refresh all the orders
65:52 - right because we want them to be fresh
65:55 - and let's reset the widget so i can do
65:57 - so with reset widget and i'll pass
66:00 - through the name of the module so it was
66:01 - called add
66:04 - modal let's just pass that through
66:07 - and then let's close the modal too so oh
66:09 - wait
66:10 - close
66:11 - or let's return this actually
66:13 - return close
66:16 - module and the model we want to close is
66:18 - the
66:19 - add modal
66:23 - great
66:24 - and now let's write our function to
66:26 - generate an id
66:28 - so that's going to be generate random id
66:33 - it's going to be a function
66:36 - that returns
66:38 - a random so math
66:41 - random this is a javascript method
66:45 - 2 string
66:47 - 36
66:50 - sub string
66:52 - to 9.
66:54 - maybe let's just make sure to use single
66:56 - quotes
67:04 - just make everything a bit more
67:05 - consistent
67:07 - and
67:08 - wonderful
67:09 - uh we don't actually need these so just
67:11 - pass it through without the curly braces
67:14 - so now let's go back to here and let's
67:16 - use my util so once again i'm just going
67:19 - to get the model and on click of the
67:21 - confirm
67:23 - i'm going to use javascript for this but
67:25 - i want to go into my utils file
67:28 - so utils and i want to use do add order
67:32 - okay so let's try out i'm going to
67:35 - select
67:36 - danny address i'm going to just do let's
67:39 - do test
67:41 - strike id test id
67:44 - order amount 30
67:48 - order
67:49 - let's say it's delayed and i'm just
67:51 - going to choose a lollipop and some
67:53 - chocolate so once again this time i'm
67:55 - just gonna select the quantity
67:57 - let's go with one
68:00 - and in fact maybe let's have a default
68:02 - of one
68:04 - so default text one
68:07 - and click
68:09 - confirm
68:13 - and there we have it our order has been
68:15 - added an order id has been generated we
68:18 - have added it to our database we've also
68:21 - added it in the products so there we go
68:25 - and then we've refetched all of this
68:27 - data
68:28 - wonderful
68:30 - so this is all looking good
68:33 - okay so we've done that i just want to
68:35 - show you how to actually delete orders
68:37 - too so i'm going to show you how to do
68:39 - that quickly all i'm going to do is
68:41 - actually go on to my order table and i'm
68:44 - going to add some new uh columns to here
68:49 - so let's go ahead and just make one
68:51 - column and call this deletes
68:55 - and one other column and let's call this
68:58 - edit
68:59 - now for this one i actually want this to
69:02 - be an icon so let's go ahead and choose
69:05 - icon button and then let's go ahead and
69:09 - choose sub delete option
69:11 - so delete and i'm going to make it red
69:14 - okay so that's all i'm going to do and
69:16 - we're going to have to write a you
69:19 - guessed it a query so let's go back in
69:21 - here
69:26 - order database query
69:30 - this time i'm going to delete a row
69:31 - we're of course going to grab the
69:34 - spreadsheet url let's call this delete
69:38 - order
69:41 - let's also give this a sheet name so
69:44 - we're going to be looking in orders as
69:46 - that's what we are going to delete and
69:48 - then the row index well once again we
69:51 - are just going to go into the order
69:53 - table
69:54 - and we are going to get the selected row
69:57 - index this time okay so that is all we
70:00 - do for the delete order query let's go
70:04 - back to our app
70:07 - and now
70:08 - on the delete button
70:14 - so just here all i'm gonna do is on
70:17 - click i'm gonna execute a query and
70:19 - that's gonna be delete order
70:21 - okay
70:22 - so that is all i'm going to do so let's
70:25 - give it a go let's delete the order i
70:27 - just made
70:31 - and then if i refresh
70:34 - that will be gone oh i've deleted two
70:42 - why is that
70:46 - it must have pressed
70:48 - two perhaps let's try undo that
70:54 - so for now i'm just gonna copy this
71:01 - and use this order number
71:10 - and then let's make this customer one
71:15 - so now let's refresh
71:18 - i'm just going to try delete this order
71:22 - and then refresh
71:26 - okay so that is working
71:27 - so of course on success we also need to
71:31 - fetch
71:33 - this again so we need to run this again
71:35 - so on deletes
71:39 - on success i want to execute a query to
71:44 - fetch
71:44 - all the orders again
71:47 - wonderful
71:50 - now let's do the edit model so on edit
71:54 - here we go what do we want well i want
71:56 - this to be an icon button let's try find
71:59 - an icon that looks like edit so i'm just
72:01 - going to type in edit and let's use this
72:04 - little pen right here and maybe let's
72:06 - give it the color of blue
72:08 - i think that's quite nice we don't have
72:10 - to we can really have any color we
72:12 - really wish but i think blue is quite
72:15 - nice
72:17 - we can also make a secondary button so
72:19 - that also looks quite cool and on action
72:22 - we're going to
72:24 - actually make a pop-up modal show up so
72:27 - once again let's go into widget this is
72:29 - going to be the edit pop-up model so
72:31 - let's find our modal
72:33 - i'm just going to drop it in here for
72:35 - now so here is our modal just going to
72:37 - drop it in like so
72:40 - okay
72:41 - and i'm just going to say
72:43 - edit
72:46 - order and we're going to show the order
72:48 - number in here
72:52 - so it's going to be number
73:01 - now we get the two curly braces up we're
73:03 - going to go into the orders
73:05 - orders
73:06 - table
73:08 - and we're going to get the selected
73:12 - row
73:13 - and we're going to get the
73:14 - order
73:16 - id
73:17 - okay so that should show up when we
73:20 - actually select
73:22 - one of them and let's just make this
73:23 - maybe a little bit bigger the other
73:25 - things we're gonna have to edit an order
73:27 - right so we're gonna populate this with
73:30 - selected row items
73:33 - so first things first i'm going to have
73:36 - just the order date showing up as an
73:39 - input
73:40 - so i'm actually going to pick the date
73:42 - picker for this
73:44 - and just drag it in like so
73:50 - so we've got our date picker let's just
73:52 - put some text next to this
73:55 - i'm going to say order dates
74:02 - we're also going to have
74:04 - we can actually align this i'm going to
74:05 - align it to the left
74:08 - just copy and paste that
74:11 - we're going to have the order date we're
74:12 - also going to have the address
74:24 - next we're going to have
74:27 - the status
74:33 - and total amount
74:35 - so i'm just copy pasting new ones
74:38 - this will say
74:39 - total
74:41 - amount
74:42 - and then we're going to have the stripe
74:44 - purchase id so these are all things that
74:46 - we can edit from the order
74:49 - so this one should say stripe
74:52 - purchase id
74:56 - okay maybe we can make this a little bit
74:58 - smaller if we wish it's totally up
75:01 - to
75:02 - us how big we want to make all of these
75:04 - things
75:06 - so again like obviously you can style
75:09 - this as you want i'm just making the
75:10 - most basic
75:12 - app
75:13 - for you in fact perhaps we can even
75:15 - stretch the modal itself
75:17 - that's a bit better and now everything
75:19 - fits
75:20 - okay so we've got the order date we've
75:22 - got the address and this i'm going to
75:24 - actually populate with the date we
75:27 - currently have so that is again going to
75:30 - be just today
75:34 - and let's format this so i want it to
75:36 - look like so
75:38 - okay and the address well for this i'm
75:41 - actually going to have an input
75:44 - so let's get the text input
75:47 - i'm going to drag that in here
75:51 - and this i'm going to say
75:53 - let's call this edit address
75:56 - edit
75:58 - address so if you notice i didn't really
76:00 - bother naming these as i don't think
76:02 - they're that important these ones we are
76:03 - going to have to pick out when we edit
76:05 - an order in our query which is why i've
76:07 - done it like so this is going to be edit
76:10 - date picker so let's
76:11 - edit
76:13 - date
76:14 - picker i'm just going to change it like
76:16 - so
76:17 - next we have the status so once again
76:19 - i'm just going to drag this in here
76:24 - but before we do that
76:26 - i'm actually going to put a default
76:27 - value in here and that is going to be
76:29 - the existing one so orders
76:32 - table
76:33 - and then we're going to get the selected
76:35 - row
76:37 - uh delivery address so the
76:40 - selected row dot delivery address it
76:42 - should show up and it has
76:44 - so that will be the default value for
76:46 - this
76:50 - once we do actually select one
76:53 - and the status well the status again
76:55 - let's gonna go let's give this uh
76:58 - the name of edit status so edit
77:01 - status
77:02 - and the default value is once again
77:04 - going to be the orders
77:06 - table
77:08 - selected
77:10 - row
77:11 - dot status
77:15 - and now the total amount
77:18 - so you've probably got the hang of this
77:21 - now let's call this edit
77:24 - amount
77:25 - and let's get this the default of order
77:30 - table
77:32 - selected
77:33 - row
77:35 - total amount
77:38 - and now the purchase id
77:41 - we're nearly there i promise
77:46 - oops
77:47 - just move that up a tiny little bit
77:52 - and now we're going to drop for the
77:55 - purchase id
78:00 - let's call this
78:03 - edit
78:05 - stripe
78:06 - id
78:10 - and the default for this is once again
78:13 - orders
78:15 - table
78:16 - selected
78:18 - row
78:20 - uh stripe
78:22 - purchase id
78:23 - so actually i think that's it let's move
78:25 - up this button
78:27 - and let's next write the query right
78:29 - that we want to call
78:32 - when we want to update and order so
78:35 - before we do this i'm just going to
78:36 - maybe change these colors around a bit
78:38 - let's make this one orange actually and
78:40 - let's make this orange whoops
78:43 - two so let's first link up this uh to
78:46 - open up the modal so click on the edit
78:49 - button
78:50 - so where's the edit button it is here
78:53 - and the action that we want to do is we
78:55 - want to
78:56 - open the modal right so open modal and
78:59 - the modal we want to open is
79:01 - modal three it's a shame we didn't call
79:04 - it but i'm pretty sure that's the
79:05 - correct modal let's check it out
79:08 - okay so there we go it is the correct
79:11 - modal i'm just going to center this
79:13 - while i'm here so text align center
79:15 - okay and this button oops why does it
79:18 - keep doing that i just keep pressing it
79:19 - by my stick okay just press on it on the
79:22 - orange bit and i want to make this
79:24 - button orange but i also want to make it
79:26 - secondary
79:28 - great so that is all we need to edit an
79:30 - order now let's actually
79:33 - you know let's let's write it up so
79:38 - this should actually be a select not
79:43 - a
79:44 - input
79:45 - because we want to pick from certain
79:47 - ones so let's get this select
79:51 - just put it in here
79:53 - okay let's not give it a label because i
79:56 - already have one so let's
79:58 - shut that label down
80:00 - so no label
80:05 - just make it a little bit smaller now
80:07 - oops
80:16 - and we actually already have written
80:18 - these options somewhere
80:20 - so it was here wasn't it so let's go
80:23 - back to the other modal
80:26 - and on the statuses i'm just gonna copy
80:29 - this
80:30 - in fact we can actually store this in
80:33 - the utils file so perhaps let's go ahead
80:35 - and do that as we are using it in two
80:37 - places now so in the utils file i'm just
80:41 - going to export let's call this
80:43 - order
80:45 - status
80:47 - options okay and i'm just going to paste
80:51 - the whole thing like
80:53 - that
80:54 - so now we can use this from the utils
80:57 - the order status option so let's go back
80:59 - to our app
81:01 - and instead
81:03 - of having so let's click on this model
81:05 - again
81:06 - instead of having all of these here i'm
81:08 - just going to go into the utils
81:14 - and get the order status options
81:16 - okay so that is easy and now i can just
81:19 - use them in the other one so on the edit
81:22 - let's go ahead and click the edit model
81:25 - so just click on the select and just
81:28 - paste
81:30 - oops
81:31 - go into the utils once again and get the
81:33 - order status options
81:36 - wonderful and let's call this something
81:37 - this is edit
81:39 - edit select edit status sorry
81:43 - and now let's go picking them all out so
81:45 - we can edit our order
81:47 - so in fact do we actually have the order
81:50 - number here add in the order manually
81:52 - now okay so now let's uh write our new
81:55 - query using the order database and this
81:59 - time it's going to say edit
82:01 - order just like so
82:04 - and to edit an order well i'm just going
82:06 - to use update sheet row and i'm going to
82:08 - copy this once again i'm just going to
82:10 - paste it in here
82:12 - and now we're going to make the row
82:14 - object so the row object is going to be
82:17 - let's get our object up i'm going to use
82:19 - the row index
82:22 - and that is going to be the order tables
82:24 - selected row index
82:28 - and then i'm going to use the stripe
82:32 - pro
82:33 - chess
82:34 - id and if it's changed i'm just going to
82:36 - update it so
82:38 - let's get the edit
82:40 - stripe id as we called it
82:42 - text
82:45 - next we need the total amount
82:49 - so once again i'm just going by all of
82:51 - these column names
82:54 - so we've got the total amount
82:57 - and this again is going to be the
83:00 - edit amount because that's what we
83:02 - called it when we were making our model
83:04 - so edit
83:06 - oops not address edit amount
83:09 - and this was text so we're getting the
83:11 - text
83:12 - and then we need the delivery address
83:16 - so if it's changeable update and if it
83:18 - stays the same well then obviously it
83:19 - will update but it will look exactly the
83:21 - same so edit address
83:24 - text
83:27 - and then we have the date and i'm going
83:29 - to use moment again so moment
83:33 - and what i'm going to pass through into
83:35 - a moment is the edit
83:37 - date picker
83:38 - and whatever the selected date is and
83:41 - then i'm going to format it so
83:44 - dot
83:45 - format
83:47 - and i'm going to make sure that it's the
83:48 - same as my
83:49 - database so just change it to be
83:52 - this format
83:54 - and then one more and that's the status
83:59 - and the status is going to be the edit
84:03 - status
84:04 - selected
84:06 - option
84:07 - value
84:09 - so this i think is looking good oops we
84:11 - need to say which sheet we want this on
84:13 - it's on the orders sheet
84:15 - okay
84:17 - great
84:18 - so i guess let's check it out
84:21 - so
84:22 - wonderful let's go here
84:25 - and let's link it up so on edit
84:29 - so what if we press the confirm button
84:31 - what do i want to happen well on click i
84:33 - want to execute a query and that is to
84:36 - edit the order and on success i want to
84:39 - refresh
84:40 - all the data so re-fetch
84:44 - fetch
84:46 - fetch
84:47 - borders
84:49 - in fact we actually need to do a few
84:51 - things so perhaps let's do it like we
84:53 - did before so in the utils file and
84:55 - let's write our own
84:57 - uh i guess
84:59 - function so update order
85:02 - it's going to be an async
85:05 - function just like so
85:08 - and what do we need to do well we need
85:10 - to await edit orders so let's run that
85:13 - so just like this this is how we run it
85:16 - and then we're also going to fetch the
85:17 - orders right so await
85:19 - fetch
85:20 - orders
85:21 - run and then we also need to shut the
85:23 - model so return close modal
85:26 - and then let's pass through the modal we
85:28 - want to close it's the edit
85:31 - middle
85:33 - great
85:35 - so that shouldn't be karma commas sorry
85:37 - it should be semicolons
85:39 - okay so now let's use this
85:42 - let's go back in here and i'm just going
85:44 - to delete all the other ones so
85:46 - let's get our edit model up
85:50 - let's click on this button
85:52 - and i'm actually just going to instead
85:57 - utils
85:58 - update order
86:00 - so let's check it out
86:02 - um
86:03 - let's
86:04 - well there's only one to edit so i'm
86:06 - going to edit this one and i'm just
86:07 - going to edit these status
86:11 - should not really say green oh yes
86:13 - default value
86:14 - the status
86:17 - the default value is going to be of
86:18 - course the order
86:20 - tables selected
86:23 - row
86:24 - status
86:25 - oops selected
86:29 - row
86:32 - status just wrote that out manually it
86:35 - wasn't picking up some reason
86:37 - let's try again so let's just
86:39 - click on this one edit it
86:44 - okay so that's picking up and i'm just
86:45 - going to change it and i'm going to
86:47 - change it to delivered and confirm and
86:49 - see if that updates
86:54 - and
86:56 - great this is not shutting down oh we
86:58 - call this modal 3 not edit modal so you
87:01 - know what
87:02 - should we just change what this is
87:04 - called let's just call it modal three
87:06 - so that is in the utils file
87:10 - we need to shut
87:13 - module three
87:14 - okay
87:15 - so hopefully you know now how to change
87:17 - this if you want to but
87:19 - this is looking good for me so let's
87:21 - just try edit that again
87:23 - i'm going to edit it back to delayed
87:27 - and then confirm
87:30 - and on success it should shut down the
87:32 - modal for me now
87:34 - and it does
87:35 - wonderful
87:36 - so this is great we can add new orders
87:39 - we can edit orders we can delete orders
87:42 - um i mean i'm really happy with this we
87:44 - get the order information here so i'm
87:46 - just clicking on it here and
87:48 - everything's updating the last piece
87:50 - that we need to do is to make a refund
87:53 - so
87:54 - let's go ahead and do that
87:56 - so i'm just going to refund this one by
87:58 - the stripe purchase id
88:01 - now i'm just going to show you how to do
88:03 - this by going to the stripe api
88:07 - okay so we're going to be doing a test
88:09 - one and i'm going to be showing you how
88:11 - to do it with the test one of course you
88:13 - can use real data but i'm going to be
88:14 - using a test account
88:16 - and refund is what we want to do
88:19 - so i'm just going to sign into my
88:21 - account where i have created some fake
88:23 - payments already
88:25 - okay so if i go to payments
88:28 - these are some fake payments that i have
88:31 - made i can create a fake payment so
88:34 - let's just say i make a fake payment for
88:36 - 20
88:38 - okay and we're gonna uh put in some fake
88:42 - card information so let's go ahead and
88:44 - do that now we can just check the fake
88:47 - cards so payment methods
88:51 - i'm going to go here and i'm just going
88:52 - to copy this one i'm just going to put
88:55 - it in
88:59 - right here and then just use today so 20
89:05 - and then cv123
89:08 - and i think that should be it let's
89:10 - submit the payment
89:14 - okay and payment successful so this is a
89:17 - fake payment all you have to do is
89:19 - essentially sign up to stripe and then
89:22 - go to the test payments and create a new
89:25 - payment so this is the payment that i
89:27 - have made it is fake
89:30 - uh this is test data
89:33 - so this is the payment right here if i
89:36 - click on this we can find a charge id
89:41 - so here's the charge id and now i'm
89:43 - going to use that and put it in here so
89:46 - that is now my fake payment it's as if i
89:49 - paid 20 so i know it says uh this here
89:52 - let's actually just change this to be 20
89:54 - like so
89:56 - and now i'm going to essentially
90:02 - refund
90:03 - some of this
90:04 - so
90:05 - let's
90:06 - do it let's make a fake refund so using
90:10 - that in mind that should now be updated
90:12 - as well so i'm just going to refresh
90:14 - this there's our stripe purchase id
90:16 - there's our charge id i want to refund
90:19 - an amount
90:20 - okay using this charge id
90:24 - and for this i'm actually going to write
90:26 - a function in the utils and it's going
90:28 - to say
90:30 - refund order
90:31 - so refund order
90:34 - it's going to be an async function
90:38 - don't forget the comma and what's going
90:40 - to happen here well i'm going to run the
90:42 - stripe refund and then i'm going to
90:44 - update the order amount so that it you
90:46 - know reflects exactly how much is left
90:49 - and i'm going to re-fetch the orders so
90:51 - actually maybe let's do that first let's
90:54 - write a new query so new query and i'm
90:57 - going to call this one
91:00 - uh
91:01 - update order amount so that is one we
91:03 - need to write update
91:05 - order
91:07 - amount
91:09 - and this is gonna update the sheet row
91:11 - we're gonna have to grab
91:14 - this
91:16 - and then we need to update the orders
91:18 - because that is where the uh amount
91:21 - lives and all we're going to do is we're
91:23 - just going to update one
91:26 - thing right we want to just update the
91:28 - status but for this we also need the row
91:31 - index because we want to know which row
91:33 - so which row it is
91:35 - so the row index is just going to be the
91:38 - uh
91:41 - order
91:43 - table
91:44 - selected row index
91:48 - and the status
91:51 - we want to update is going to be
91:53 - we're going to have to update it to say
91:55 - refunded so we can hard code that okay
91:58 - so that is looking good the next thing
92:00 - we need to do is write a new query this
92:02 - time it's going to be a stripe
92:06 - uh it's going to be we're going to write
92:08 - our own one
92:10 - so we're going to create a blank api for
92:12 - this
92:12 - and it's going to be a post because
92:15 - we're going to be posting to the stripe
92:17 - api and the url for this well we're
92:20 - going to have to go to
92:22 - refunds so we were just on this reef
92:26 - fund
92:29 - refunds
92:31 - and
92:32 - we're gonna have to find
92:34 - the uri that we need to make this post
92:37 - request to
92:39 - so this is it i'm just going to copy
92:42 - that
92:43 - okay we're going to use this as a guide
92:46 - i'm going to copy this
92:48 - go back in here i'm going to post it to
92:51 - the uh the v1 refunds
92:54 - and we're not going to have this we're
92:56 - actually going to have refund
92:59 - refunds
93:00 - the charge id which we're going to pass
93:02 - through as the order table selected row
93:07 - and you guessed it stripe purchase id
93:09 - and i'm also going to pass through the
93:11 - amount we want to refund so the amount
93:14 - is going to be
93:16 - the order
93:19 - so
93:20 - order
93:21 - table
93:22 - selected row
93:24 - total
93:25 - amount
93:27 - okay so that's where that is going this
93:29 - is going to be content type application
93:31 - json and the authorization
93:34 - authorization that we need to pass
93:36 - through is going to be this bearer code
93:41 - so bearer
93:45 - and let's go ahead and find it in here
93:48 - this one
93:59 - and now we just need to get our secret
94:01 - key
94:05 - and just paste it in like so
94:08 - and run it
94:10 - okay so perhaps it's not picking
94:12 - anything up but let's check it out let's
94:14 - see if that works so back in the utils i
94:18 - am going to to refund my order well we
94:20 - need to await
94:22 - and let's rename this api to stripe
94:25 - refund perhaps
94:27 - stripe
94:29 - refund
94:32 - let's go back in the utils
94:36 - so await
94:37 - stripe
94:42 - refund dot run
94:45 - and then we're going to return
94:47 - await fetch
94:49 - orders
94:51 - run and of course before that we're also
94:53 - going to update the orders so await
94:57 - update order amount
95:00 - run so a lot going on there
95:04 - let's go back in here
95:11 - okay and now when we press this button
95:17 - i just want to run
95:21 - execute javascript
95:25 - function and it's refund order so let's
95:28 - check it out i'm just going to click
95:29 - that
95:33 - oops this should just be v1 refunds
95:36 - question mark and run
95:40 - and then we are doing some we're passing
95:43 - through
95:44 - obviously stuff that we should not be
95:46 - passing we just want to pass through the
95:47 - amount so let's actually fix that
95:56 - so when we edit
95:59 - we actually on the edit amount
96:02 - we want to take off
96:04 - the dollar
96:06 - so what i'm going to do is just do
96:10 - slice
96:12 - and i'm just gonna take it off like so
96:16 - okay and of course we already had a
96:17 - dollar in there
96:19 - um but that shouldn't happen any more
96:23 - so let's try fix that now i'm just going
96:25 - to get rid of this and just make it 20
96:31 - and
96:32 - not make this dollar
96:36 - okay so let's
96:38 - try this again
96:43 - okay so if we edit this
96:46 - and i edit this to say 21
96:49 - or actually just 20 so confirm
96:55 - okay so the dollar sign does not get
96:57 - added and if i try to refund this
97:01 - so run that
97:04 - okay
97:07 - aha it's still
97:09 - not
97:11 - liking it it's still trying to add the
97:13 - dollar so we need to remove that perhaps
97:15 - we can remove that here slice
97:18 - zero
97:20 - nice one
97:23 - okay
97:26 - so let's try that now
97:30 - what we also want to do is disable this
97:33 - we want to disable this if order
97:36 - to orders table
97:38 - selected row is already refunded right
97:42 - so if the status
97:44 - equals
97:46 - refunded
97:47 - then of course we you know we don't want
97:50 - to do anything so disable it for that
97:55 - uh we also need the total amount showing
97:57 - up here so we can do so easily
98:02 - order table selected row
98:07 - total
98:09 - i'm out
98:14 - great
98:23 - and wonderful you will see that has
98:25 - updated to be refunded so our refund has
98:29 - happened this is looking so so good
98:33 - okay so the refund has worked
98:35 - everything's amazing i'm so happy this
98:38 - is working
98:40 - so
98:41 - great i'm just going to do some final
98:43 - checking just to make sure everything
98:44 - works 100
98:45 - so i'm just going to go ahead and add a
98:47 - new order so as if we are manually
98:49 - adding an order of course usually all
98:52 - our data probably would be just you know
98:54 - on the database itself but if we ever
98:56 - need to manually add one this is what
98:58 - i'm doing now
99:01 - so here we go
99:03 - and so i'm just going to go through this
99:05 - making some fake data making it up
99:09 - uh of course a random id will be
99:11 - generated for me
99:14 - and i'm just gonna go ahead and do this
99:19 - and
99:20 - great
99:21 - i can see that order has been added
99:23 - however this does say stripe id why is
99:26 - that
99:27 - so let's just go here aha perhaps we
99:30 - need to call this let's just put this as
99:34 - stripe input i think we tried to change
99:36 - that and it just didn't work so stripe
99:38 - input is what i call this
99:41 - it's already being used is it adds
99:43 - because we call this stripe input
99:46 - that's annoying we want this to be
99:47 - stripe input so let's just call this
99:50 - stripe title that's why
99:53 - stripe title so that's why it was taking
99:55 - the text from here
99:57 - and we want this to be stripe
100:01 - input okay so whatever we put in here
100:03 - will now be updated
100:06 - great so actually let's edit that it's a
100:09 - great opportunity for us to check if the
100:11 - edit
100:13 - works
100:14 - so not on this one actually but on this
100:17 - one
100:18 - i'm just going to change the stripe id
100:21 - so i'm just going to make it up for now
100:23 - and i'm just going to put
100:26 - ch and then just some random numbers and
100:29 - click confirm
100:30 - okay
100:31 - so hopefully that should work
100:34 - wonderful so that is now being updated
100:38 - this is all looking so so good
100:44 - uh the other thing we need to do is
100:46 - actually change the name because we just
100:48 - have the label so this is now easy all
100:50 - we're going to do is use the fetch user
100:53 - query and go into the data because only
100:55 - one item is being returned so we just go
100:58 - into that item so as it's the first i'm
101:00 - going to put the zero index and i'm
101:02 - going to get the first name and then i'm
101:04 - actually going to just put a space which
101:06 - is just
101:07 - two strings with a space and add the
101:10 - last name too so once again just getting
101:12 - it from my fetch user query
101:16 - okay
101:17 - so this is all looking good
101:20 - uh and finally why aren't the products
101:22 - displaying here
101:23 - let's have a quick look into this
101:28 - okay so all we're gonna have to do is
101:30 - this and
101:32 - there we go okay so everything is now
101:36 - done of course if you want to rename
101:38 - this to perhaps add products as it is
101:40 - more precise just make sure to update
101:43 - that wherever you use this query okay
101:46 - otherwise this will of course
101:49 - break right so where do we use the add
101:51 - products
101:53 - let's have a quick look
101:59 - so add products ah it's actually already
102:01 - been updated for us so that was really
102:03 - really great i didn't know that that is
102:05 - such a uh such a lifesaver really
102:10 - now before moving on i'm just going to
102:12 - rename this quickly so just edit the
102:14 - name right here and there we go i'm just
102:17 - going to shut these things down as well
102:19 - as we don't need that
102:22 - now we are going to connect our project
102:23 - to our git repository so i'm going to
102:25 - show you how to do that all we need is
102:27 - the remote url so head over to your
102:30 - github account and under repositories
102:33 - just create a new repository let's call
102:35 - this zip food delivery app and just go
102:38 - ahead and create the repository so this
102:41 - is the url we need so just grab it and
102:44 - paste it in here and click generate key
102:48 - now copy the generated key and we're
102:50 - going to go back to our github and under
102:53 - settings we're going to go to deploy
102:56 - keys and then add the diplo key in here
102:59 - so that our app can essentially
103:02 - deploy on behalf of us
103:05 - so paste that in here and let's call
103:07 - this app key and add the key
103:10 - so once that is done there is not much
103:13 - else to do we're just going to connect
103:16 - and once that has finished we're just
103:18 - going to actually make a commit so we're
103:20 - going to commit our project to the
103:22 - repository we just made
103:25 - and this means that once this has been
103:28 - done if we go back to our github
103:30 - repository so just right here we can
103:34 - actually view the deployed project
103:36 - so there we go we are now viewing our
103:38 - deployed project and our project is
103:40 - stored on our github profiles
103:44 - okay
103:45 - so this is all looking good i hope
103:47 - you've enjoyed this tutorial i've loved
103:49 - teaching you it's amazing what we can
103:51 - build with low code solutions and the
103:53 - complexity that they can bring
103:56 - so thanks so much again for coding with
103:59 - me and i hope to see you again
104:02 - real soon