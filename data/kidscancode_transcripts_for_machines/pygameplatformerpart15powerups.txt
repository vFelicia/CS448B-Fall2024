welcome back to game development with pygame this is part 15 of our platformer game and in this video we will be adding powerups okay so before we go too far into the powerups there's one thing I wanted to do to talk about about the platform collisions now you may have noticed this and it's kind of should be obvious why it's happening but if you stand over here on the edge you can look like you are floating in space right because there we go so the hitbox of my player is just still barely touching the hitbox of the platform so the you know our code is seeing this as a collision and of course it happens over here too and you know that's a little weird we shouldn't be able to jump when we're standing in them in midair like that so fortunately there's an easy solution to this and since we're using the X the center here as our position for our player we can just say when that position if that position extends past the edge of the platform on either side then we won't collide we won't stop falling okay so we can go down to our platform collision code right and this little this if statement here is what puts us on the top of the platform stops us from falling so basically we'll only want to do that if our player is between the the left and right edge of the platform so we can say if the players pause X is less than the platform that we're hitting right and the player pause X is greater than the lowest rect left now you'll notice this line is getting pretty long right that's a really long line and long long lines are kind of a pain there's a couple things you can do to solve that I mean Python does let you do this if you put a backslash and you continue around then you can you can say this it sees this as one line right so it doesn't count as two separate lines we do want to indent the F now that's not super pretty but it's good enough for now so let's see what this looks like okay so I'm hitting this platform because my exposition is less than this spot and it's greater than this spot so let's go over to a platform where we can fall off now watch as I reach the edge there we go see how so that is not counting as a collision right I'm falling right off the side as soon as my Center gets that site but that doesn't quite look right because my foot should still be touching so we want to give that a little bit extra space so we're gonna say I'm just gonna add a little bit to the little extra ten pixels on either side and I just picked 10 out of thin air just to see what it looks like so let's get up to one where we can fall so now I can walk to there my foot still touching oh and it I fall okay so you can see that looks much better it looks much more natural especially when we walk off the edge that we fall when our feet aren't on the edge supporting us okay on to power ups now power ups are gonna be objects that are gonna that are gonna spawn on the screen and for these I want these powerups to spawn attached to a platform so I don't want them floating in midair or or kind of half overlapping a platform I want them to be resting on platforms like their objects that are sitting there that we'll go find so so when we make the new sprite and I'm just gonna go ahead and I'm gonna copy some of this stuff so I don't have to retype it alright bad indenting there we go okay so so what we want to do is we're gonna call this I'm just gonna call this a pal for powerup okay now when we spawn a powerup we're just gonna pass it a platform that you know we're gonna so we're gonna pass it what platform it needs to be sitting on so that way it'll know where it needs to be and so we're gonna do in itself game will keep track of that platform we don't have a list of images I don't need that but we do need our image sorry so first of all we are gonna have multiple types of platforms now to start with I'm going to do we import yes we imported choice okay I'm gonna just have one platform or I mean I'm sorry one type of power up to start with and that's a boost one that shoots you upwards later we can have more and we can improve this randomness here and choose different random ones what we want to do but for now we're just gonna stick with one and the boost image is going to be over here in our spreadsheet it's this little jetpack so we're gonna use that set the color key to black get the rectangle in our location so our where we place the where we place the powerup sprite is just going to be at the center of the platform and then the bottom of the sprite will be at the top and a little bit up so I just want to look like it's sort of just barely floating right there above it now as far as the update for our sprite we're gonna just make sure we keep we just want to keep the bottom of the sprite at that point right so that way if the put when the platform moves so will the power and if now if we want to delete these these powerups when the platform disappears right and the platform so the platform's go off the bottom and then they disappear right that means this self dot plat won't exist anymore so we get an error message so we want to make sure we delete the sprite whenever our the powerup sprite whenever the platform sprite gets deleted so we can do that by using the self dot game dot platform's group right that group has a list of all the platform's right and they get removed from that group when they go off the bottom and get deleted so in PI game with groups you can do you can do the halves command and this will return true or false so this this command will be true or false whether the platform in the platform group and if it doesn't so if this is false then we will delete the powerup sprite as well okay so that's our powerup sprite now we have to talk a little bit about groups some more so you recall if I go back over here to our new we have these we have these groups where we are placing the different sprites in right we add the player to the all sprites group when we spawn a platform we added to both groups that starts to get tedious having to do this right we had to do that here down here when we spawn some new platforms we also have to add it to both right well there's an easier way to handle groups and that way is if we go over here actually real quick let me make a we're gonna need a group for powerups so that we can do the collision so I'm gonna say powerups is a PG sprite group right now so the game has these three groups and we know we're gonna be wanting to add different sprites to them so we can do that instead of doing it as a separate command every time we spawn the sprite we can do it when the sprite is actually initiated so let's see here so we'll start with our power up here so if we make a list here right when right before and it's important we do this before the sprite class in it okay we name a list of groups so in this case we want game dot all sprites and game dot powerups right those are the two groups that I want the powerup sprites to be in then I can just adhere to the init that it should do that now if I do that I can do the same thing with the platform's right soft outgroups equals so this is gonna be a game dot all sprites and game dot platforms this makes it a lot easier if later on as your as you're changing things and you add different groups for different kinds of effects or different different code that you want to add that needs more groups you can easily just add here in the sprite a list of which which groups it needs to be a part of okay so if we do that then over here we no longer need this line oops we no longer need that line we no longer need either of these lines and in fact we don't need when we spawn a platform we don't even need to assign it to a variable because it's going to get added to the group so I can do that there and I can do it here as well okay and now everything should still work the same right we're still spawning and the other group collisions and stuff is still working but we've simplified some of our sprite creation and we're ready to do the powerup spawning okay so let's add a couple more game settings over here we're going to add a couple of things here I'm going to add a boost power that we're gonna use for when we how how fast the boost shoots us upwards and we're also going to add a number for how frequently we want these powerups to spawn so I'm gonna put about something less than ten right so this is how likely every time a platform spawns that it will have it how like it is to have a tower up on it all right so in the platform in it right here when the platform spawns we're just going to give it a chance to have a powerup on it and all we need to do for that is we could pick a random number between 1 and 100 or 0 to 99 technically and if it's less than the power of spawn percentage then we'll spawn a powerup we pass it a copy of self game and we pass it a copy of the platform itself ok and then we are going to need Rand range up here and let's see how that works up there we go so that one spawned and has a plot a powerup on it so now we can see that most of the platforms aren't having power ups on them but every once in a while we got a dry spell here hope there's another one and again once we start responding different kinds of powerups we can change that percentage around very easily so all that's left is here in our update to just check for collisions with the platform's I mean with the powerups so we can stick this in here this is going to be if player it's a powerup okay so much like we've done before we're gonna do a sprite collide between the player and the powerups and we want the powerups to disappear we might conceivably hit more than one so if the powerup type is Boost remember we might have other types of powerups later then we are going to take our players Y velocity and we're gonna just shoot upwards at whatever the boost power was and we're also gonna set our jumping equal to false because we don't want to have the jump cut stop our stop our boost in the middle okay so let's see how that works now I'll go find a boost power up spawn for us there we go OOP OOP self dot player player velocity game doesn't have a velocity oh there's a couple alright there we go so now we're getting some all right we can get pretty high scores now up unless that happens what a bummer anyway you can see the powerups are working and now we have a chance to boost if we had another one along the way it's gonna boost us again so we can chain them together my maybe we will update or increase that spawn percentage because they're not coming up very often I thought 7% would be plenty but that's good and so that'll about do it except I do want to add one more thing which is it would be nice to have a sound play when we hit the powerup so let's go and add a sound here so I am going to duplicate that line and made it make a boost sound and the sound I have for that I got this one so I'm just going to I'm gonna duplicate this line it would be a boost sound and this was the sound I have is boost 16 another one I just created you can use sound effects there again like we did in the previous one and then we're just gonna want to play this boost sound right here where we just added alright I'll give us some good feedback when we get boosted let's find one first when you're trying to find one to test it out the random number generator doesn't cooperate with you there we go perfect nice okay this video has gone a little bit long I apologize for that it seemed to go by fast as I was doing it but suddenly we were way over ten minutes so we will stop there for this time and as always please click like below that helps other people find these videos and if you're not subscribed subscribe so you can get the next one as soon as it's released and I will see you next time thanks you