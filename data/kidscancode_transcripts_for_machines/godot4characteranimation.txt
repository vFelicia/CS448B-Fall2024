welcome back to goodo recipes in this video we're going to look at how to set up animation for our 3D character in this video we're going to assume you've already imported all of your 3D assets if you haven't done that already I have a video on that which I'll link in the comments below and when you've got your assets imported come back here where we have our character and our animation player showing all the animations that were included with this particular character and we want to Now set this up so that we can use it in our game and for all these animations would be really really hard to keep track of and manage in your code imagine if you had an if statement for every single possible situation where you might want to choose a different animation it's going to get unmanageable really quick and for this example we're not going to do all of these animations but we are going to set up a system for using several of them and we're going to do that by using something called the animation tree the animation tree is going to do a lot of things for us including help us choose which animation to play but also how to transition between those animations it's also going to handle something called animation blending you can see I'm running the animation called running a right now but there's also an idle animation that we would want to play when we're standing still and if we're standing still and we press forward we want to change from this the idle animation to that Running Animation but we don't want to do it instantaneously because that's going to look really really jarring and so what we want to actually do is something called blending between the two animations and that's something animation tree is going to help us do too so let's get started by adding an animation tree to our scene here okay when we add the animation tree we'll see its settings over here and one of them is an in player because what an animation tree does is it controls an animation player so we want to assign the animation player from our scene there so it has a reference to that for what it's going to control and then we want to decide what our tree root is going to be we're going to go through what these various things mean but for right now choose animation node State machine as our tree root and then you'll see the window changes a little bit down here and the last warning we have here is the animation tree is inactive activate to make it work and if we press active here you're going to see the character is going to reset because now our animation tree is controlling what animations it plays and actually if you go over to the animation player you'll see it's still running but it's not showing anything because when you are when the animation tree is active it's in control the animation player node is not all right so let's look at the animation tree panel here so we've got a few buttons over here this little arrow stands for the select this little plus creates new nodes and this little arrow connects nodes and we're talking about nodes here we're talking about nodes in the State machine here not nodes in the tree so what we can do is if we right click out here we can add an animation and there we see the list of all the animations are animation player has in them so I'm going to choose the idle and if I hit play on here well now we'll see that idle playing and I'm also going to for this quick example just pick one more let's just say the melee attack and we want to look at how we would connect these together so if we go to the transition mode we can drag connections between these so for example dragging from start to idle means idle is going to play when we start the scene this is kind of like unready we can drag from here to here and it's going to immediately jump to there but we also want to be able to after the attack has animation is finished come back to idle so if I drag another arrow going back this way you're going to see it's just instantaneously going to be flickering back and forth between them and that's obviously not ideal so what we want to do is go back to select here and we can determine how we want these transitions to happen so the transition from idle to melee here is set to Auto we don't want that to be Auto we want it to be enabled so you can transition from here to here but it doesn't happen automatically in the transition back we can change switch mode here to at end meaning don't switch back until the animation finishes so now we're playing the idle animation and if we ever trigger the attack animation like this it will play and then immediately go back to idle you can see which one is active by the red outline around them and this is basically how the animation node State Machine Works you set up a sequence of animations and the transitions between them how you get from one to the next now this was just an example and so I'm going to delete these because what we really want to do what we really want to do is set up that idle walk run cycle all right let's start by right clicking and adding a blend space 2D and I'm going to click here to change the name of it call it iwr because this will be our idle walk run Loop and then we'll go ahead and do our transition from start because we do want to play this one right away and now when we're ready to configure this blend space 2D we click the pencil icon here and we will kind of go inside of it need to be in select mode and we go inside of it and now you see in root we're inside the iwr and we see this 2D grid and this 2D grid represents is going to represent our character's horizontal movement so up here when we're going forward down here when we're going backwards when we're moving to the left when we're moving to the right so whatever our characters horizontal movement Vector is is going to match this space here and we have some controls over here this one that I'm on right now sits the blending position which is this little Crosshair and we'll see what that does in a minute this Arrow here is for selecting and moving points and this one is for creating points and so we want to Define our grid and the first one we want to add is right here at the center I'm going to click and I say add an animation and that's going to be the idle because idle is what I want to play when my x velocity is 0 and my y velocity is zero or my forward and back velocity is R of zero and so that's there enough up here at the top I'm going to want to add the running a animation down here at the bottom I'm going to add the walking backwards animation and then on the right we can use running strafe right and on the left we can use running strafe left and now you see those lines have been connected and we have this little diamond shape and so if I go back to root here for a second and hit play on this iwr then go back in if I select the Crosshair here I can now control the blending so see as I move forward you see we're transitioning to the Running Animation and when I get all the way here we're fully playing the Running Animation as I scale back so you see and as I go all the way down to the bottom we start playing that walking backwards we have strafing to the right we have strafing to the left and anywhere in between take a little time to play around with this it's really fun to see how the animations blend together and when you're done we'll head back to the root node so now this kind of becomes the Hub of our character's animations this is where we're ordinarily going to be unless we're doing something specific and for the other animations that we're going to add in this example we're going to add some attack animations we're going to add death animation and jumping and but jumping is a little special so we're going to do that one last so first I'm just going to add a few more animations like we did in the earlier example okay so now I've set these all up just like we did the earlier example with the transition set the way we want them so when we're in idle walk run we can trigger one of the attacks and it'll transition back to idle we can trigger the interact which is to push a button or a door and then we have the death animation which does not have a transition back so when it happens that's when the game's over and so this is all just like the example before and now we want to set up jump and jump is going to work a little different because the jump animation comes in three parts so let's add those nodes and take a look at how they look all right so the animation for jump comes in three parts there's the jump start which is the launching off of the ground and there's the jump land which is when you hit the ground but jump idle is a looping animation that's designed to play as long as you are in the air so maybe you step off a cliff you're gonna play Jump Idol until you hit the ground so the transitions between these are not necessarily going to be always the same so we are going to want to transition from idling to jump start and that the way that transition is going to work is we're going to want to do it immediately but what we're going to do is instead of being automatic we're going to have the condition here jumping and that's going to be a condition that we can set in our code go back to I don't hear so now you see it's not even though it says Auto it's not transitioning into there because until this jumping condition becomes true the transition won't happen going from let's make a connection here from start to idle okay that's going to happen at end so if you trigger the jump start it will play and then go to jump idle if the transition from jump idle to jump land is also going to be Auto but it's going to have a grounded condition so however we will stay in the jump idle train uh we'll stay in the jump idle animation as long as we need to but as soon as grounded becomes true we're going to transition to jump land and then that transition goes back to iwr when it's finished playing and then lastly we're going to have one more transition here to go straight to jump idle and there you see the jump idle playing but that we're just going to set to enabled and we want that so that if we're walking along and we just step off a cliff we can transition to jump idle if I go back here to playing the idol now when a jump starts it will transition to this you see we left up we're in Jump idle and when grounded becomes true we'll transition to that now if you notice here let me jump back to here take a look at this a little closer so we're following through the air we're falling through the air and when I play Jump land watch the transition from jump land to iwr see there's a little jump there or a little stutter because those two animations the end of the jump land and the beginning of idle don't quite match up so what we can do here is in this transition add a small Crossfade time of 0.1 seconds and let's watch what happens watch how this looks different I'm going to press jump land and then it just looks like his feet spread out naturally instead of that jarring effect all right so now we've set up all of the animations that we want to use and for most of the others if you want to use any of those you're going to set them up in a very similar way but these are what we're going to do for this demo and so in the next video we'll talk about how to combine this with code so when we start doing our character controller and moving around this screen how do we access this animation tree and make sure we're playing the right animation depending on what we're doing so if you haven't already liked the video and subscribed so you can see the next one when it comes out do that and I will see you then you can find this and many other goodo recipes tutorials examples and tips at good or recipes.com don't forget to like And subscribe on YouTube to get the latest video tutorials and if you'd like to help support these efforts please consider clicking the patreon link thanks