hi welcome to a new Godot game development series a lot of you have been requesting another full game tutorial so I've chosen to make a topdown tank game I'm building this as we go so while I have some idea of what the final result will be the game could go in many different directions I know we will cover tile maps will cover paths finding an AI we may even get into things like multiplayer we'll have to see where it goes in this first part we're gonna discuss the project setup and we're gonna make the player tank so we're gonna start with a little bit of project settings to get everything ready to go in the rendering quality we're gonna turn use pixel snap on this is a 2d setting that you want to use when you're using pixel art because what it does is it snaps the rendering of the pixels to the pixel grid so when something's moving and you have something you know position that's a fractional pixel amount this will prevent that jitter that happens sometimes during movement and we're also going to go down to the window display and we're gonna set the stretch mode to 2d and we're going to set the aspect to keep and we'll get into a little more later once we get the game working how that effects resizing the game window now we're also going to need some inputs so I've gone ahead and added some input actions here in the input map for turn right and turn left forward and back and the mouse click and so those are going to be the controls for our tank WASD is gonna be to control the movement and the mouse is going to control aim and fire of the tanks turret now another thing I want to do before I drop all of my assets into the project folder is just gonna save me some time is change the default import settings for textures by default I'll bring this icon out here just so you can see this by default Godot has filtering on which is what's making this little blurry effect when you zoom in on the pixels and we don't want that for our pixel art that's going to make thing look not as good so we're gonna make sure we've selected a PNG file and we're gonna go over to import and it's going to show us our texture import settings and one of them is filter so we want to turn that off and then if you click reimport you can see now no matter how much i zoom in the individual pixels remain looking exactly the same and what we can also do is click here and say set this as the default for texture so that way any texture that imports will have these settings automatically and we won't have to go and change them after we've already imported them all right so now I've dropped my assets folder in here and it's imported all of the textures and we are ready to get started now for this project we're using another kennyart pack this time we're using the topdown tanks which is a nice art pack with lots of tanks and accessories and things that are going to work great for getting this game going it has tanks of different colors it's got some big boss tanks lots of features you can get this at Kenny's website Kenny and L and it'll also be in the download in the comments below now one thing I have changed from the original art pack is if you open up the texture atlas and the art pack this or is oriented so that all the tanks are facing downwards and since in Godot 0 degree orientation means pointing to the right that would just mean that every asset you use out of here you would have to rotate the sprite 90 degrees to align it properly so instead I have rotated the entire Atlas and I've called it underscore rotated here so you can get that in my download or if you download it directly from Kenny you'll have to open that up in an art program and rotate it if you don't want to rotate every sprite individually all right let's start making a tank now this games going to have many different tanks in it it's going to have the player controlled tank it's going to have the enemy tanks maybe it has more than one player tank if down the road we decide to try out some multiplayer in this project it might have those boss tanks they're all going to have similar properties and they're gonna have different properties and so one thing we can do is try and plan ahead a little bit usually it's not a great idea to overdesign at the beginning so I'm not going to try and think this out too far we can always go back and change things if if it changes later but we're gonna make a generic tank scene and then we're gonna inherit from that scene to make the player tank which has keyboard controls or to make the enemy tank which has AI controls but they're gonna have their similar features grouped together in this tank scene so we're gonna start with a kinematic body 2d and that's gonna be the tanks root node and so that's gonna need a few different nodes underneath it it's gonna need a sprite it's going to need a collision shape 2d it's going to need actually another sprite because what I'm gonna do is have one of these be the body and one is going to be the turret and so these two parts will move separately I want the tank to be able to aim in a different direction than it's moving the turret is going to need to have a position 2d placed at the end of it to mark the exit of the muzzle so we know where to spawn bullets when the tank fires and then last we're gonna add a timer that's gonna be it's gonna time it's gonna be basically the cooldown of the gun it will control how fast this tank can shoot and so each tank will be able to have that configured differently but they're all gonna need to have these properties so I'm gonna save that and I'm gonna make a folder called tanks so that we're gonna put all the tank related scenes underneath this folder and that's all we need to do we don't need to add any actual textures to this because the individual inherited ones will have that so start one of those we're gonna click on scene new inherited scene and we're gonna inherit from tank and I'm going to name this player and save it and it's gonna go in the same folder because it's the player tank alright let's give this player tank an appearance so on the body sprite I'm gonna drag the texture over into here drop that in the texture and now of course we have the whole giant texture so we're gonna click region and we're gonna go and select the portion of the texture that we want to use for our tank now notice we do have some tanks in this spreadsheet that have the turrets already attached we don't want those because then we won't be able to rotate them freely and so for this tank I think I'm gonna choose the green one so now I need to select this now you have a couple of different options of how to use this texture region tool up here in snap mode there is a option called Auto slice now Auto slice unfortunately does not always work with most texture atlases in fact it won't work with this one sometimes it can slice things up automatically and it's useful instead I'm going to set this to pixel snap by the way you can use grid snap if your if your Atlas is laid out into a regular grid but you can see all these textures are packed in really tight so they're not evenly spaced but we're gonna choose pixel snaps so we make sure we don't select in between some pixels and if you zoom in you can adjust the size of this and make sure you don't go over the edge and grab you know like part of the adjacent image we don't want that just want the tank alright and if we close that now we have our tank I'll zoom in here some now we have our tanks body and they're gonna do the same thing for the turret we're going to use the same texture and turn region on and this time we're gonna go and select one of the gun images I'm going to use this one up here the green to match my tanks body make sure I have all the pixels selected okay so there's my turret now one issue we're going to have with this is if I switch to rotate mode up here I'll use this button which is you can press e is the shortcut this puts you in rotate mode and if I rotate that sprite you see it rotates around its center and that doesn't quite look like what we want so what we're gonna do is on the turret we're gonna set its offset I'm going to offset it about let's see 20 yeah 20 pixels is pretty good because now when it rotates it will rotate around that pivot point and that looks much better okay and then the same thing with the muzzle we need to move the muzzles position 50 maybe 50 55 pixels there so that it's at the tip of the gun so now when the gun rotates you see the muzzle marker rotates with it so our spawn point for our bullets will always be at the tip of the turret alright save that let's click our nice don't let the objects children be selectable button because we don't want to accidentally be dragging our things away if you don't do this little happen is you can you can go and when you're in move mode you go and grab things and you drag that away now things are all offset the kinematic body is still here but the one sprites over here when sprites over there this gets to be a mess so we do that and it will only let you grab the root node when you grab things you can't grab individual ones it's a good habit to get in and then finally we need to add a collision shape I'm going to use a rectangle shape to D and we'll go in and size this to fit just maybe to the edge of the treads but not quite all the way over them we'll see how that looks when we start actually colliding with obstacles that'll be the test to see exactly how we want to tweak this alright and our player tank is now designed now we need to add a script to it and start controlling it alright so now it's time to start adding some scripts and we're gonna do the scripts the same way we're gonna create a common script that has all the code that every tank is going to need and then we're gonna add they extend that for each individual tank so if we go over to the script tab we're gonna hit new and we're gonna make this inherit from kinematic body we're gonna call it tank Gd we're gonna put it in the tanks folder and we're gonna use the empty template because I don't like all that those comments all right so this is tank GD and it's here in the tanks folder with the other tank scenes and this is gonna have all the stuff that we're gonna have in common so we're gonna add we're gonna add a few things here let's see I'm going to add some signals for updating UI so when the health of the tank changes or when the tank dies we're going to export a few things like the bullet so we can attach a different bullet to each individual tank if we want to we're going to attach a we're gonna attach export a speed variable they're all going to have some movement speed we're gonna have a rotation speed that's gonna be how fast the turret rotates or maybe we'll call this no this is how fast this is gonna be how fast the tank itself rotates like when it makes you know when it turns to try and point in another direction it's gonna be its rotation speed we're going to we're gonna have a variable for the fire the gun cool down that we can set we're going to and we're going to export a health that's going to be how much armor the Hank Tet has tank has but how many hits it can take alright and then the other things we need we're going to need a velocity vector we're going to need a can shoot flag so we can make the cooldown work and alive so that we can mark the tank dead and have it maybe do a death animation an explosion that kind of thing in the ready we're just going to take the gun timer and set its weight time equal to the the gun cooldown that we chose we're going to have a function called control and that's going to be something that will call every frame that will let you input the controls to the tank now in the player tank that will be the keyboard controls but in the AI tank that will be the AI code you know whatever makes it move and decide how it's going to operate so if we're not alive we're going to skip this alright so shouldn't do that stuff then we'll call control and then we'll move and slide using the velocity alright so there's a very generic tank controller and okay I think maybe we're probably going to want to pass Delta to control as well so it can use that in its calculations yeah all right so that's our generic tank script and we'll we'll extend this more when we have other functions that we want to add to all of the tanks but now our player tank is gonna need its own script that's going to inherit using the inherits functionality we're gonna choose tank GD and now player GD is gonna extend that so now we have right if I hit save when you click on the player you'll see we have all of the exported variables already available right we'll set the speed to like two hundred rotation speed to one gun cooldown zero point four health 100 I don't know we'll see we'll see how we want to adjust those later so in this script for the player is where we want to just basically all we got to change is the control all right we're going to override the control function and have it do its own thing for the player now the first thing we want to do is we want to make sure the turret is always pointing at the mouse so we're going to say turret look at get global Mouse position and then the other controls we're going to need to do are the left right forward and back for the rotation we're going to have a variable just a temporary one here that we can add or subtract one to get the direction of the rotation so that we need to set that equal to zero and then what we're going to do is check the inputs so if input is action of not just breast is X impressed TURN RIGHT we turn right we want to take that rotation direction and we want to add one to it and then we can actually just copy and paste this and if we did left instead then our rotation and direction should get subtracted by one then we can set the actual rotation of the body by adding the rotation speed times that direction times Delta and then the other one is the velocity so the velocity we're going to set to zero and then alter if we have any input so for this one we want to say if is action pressed you I I'm sorry not you I forward forward is what we called the action so we're going to change our velocity and make it equal to a vector of the speed so we want to be going at whatever our speed is rotated by whatever our rotation is so we want to go forward in the direction that we are pointing so if I copy that and paste that we can also do that for back and back I'm gonna make it negative I'm also going to make it half the speed so we don't go forward we go forward faster than we go backwards so let's go ahead and try this out so there's my tank and we can see I am driving around and the mouse turrets following the mouse wherever it points and then WASD are allowing me to rotate the tank move forward move backwards all right very nice you