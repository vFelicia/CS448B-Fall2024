welcome back to game development with tie game we are still working on our shmoop and in this video we will be adding player lives this time around we're gonna add an explosion for the player when they die and we're also going to add some lives so that the game will start with three lives and you have three chances to survive so what we're gonna do is we want a nice unique looking explosion for the player's death and there's another type of explosion in the kinney game art called the sonic explosion and I went and got it out of that pack and you'll be able to download it below if you don't have it it looks or not a lot nicer it's really flashy and will be a good effect for the player explosion so what we're gonna do is we're gonna add another explosion animation for the player okay and it's going to work the same way as the ones we made in the last video there's just another type of explosion we're adding so what we need to do is we need to add we need to load those images in okay and I'm just gonna tack this on to this to this loop because if you look over here the sonic explosion also has nine frames just like the regular explosion did so we can use the same counting loop here so what we're gonna do is we're going to add another file name I'm just gonna do it at the end of the loop here and this is going to be sonic explosion zero whatever oops PNG not tonk dot format i okay so that'll get get us that then we can load the image and don't forget to convert it and then we have we can append it to the to the list explosion and a player player 1 is the one we want to add it to append okay excuse me now we have that now we can go and look at our explosion sprite where really I think we're all good one change I wanted to make was I was gonna slightly just a little bit speed up the framerate make the explosions a little bit faster I think because once we have a whole lot going on you're not going to want them to hang around on the screen too long and then we can go down to the player death and so what do we want to do here well if the players shield runs out we want to spawn a an explosion right so we could say death call it the death explosion and so that's going to spawn a new explosion that's going to be at the players the center of the player and we're gonna use the player type explosion the sonic one we loaded will add that to the all sprites group and then here's the problem so let's see what that looks like so we can see that so if I let the mobs hit me see what happened when my shield ran out it started to play the explosion but we set running to false immediately after that so there's no time for the explosion to play before the loop ends so what we really want to do is give a chance for that explosion to play out we also still have the player sprite on the screen so the explosion is just showing on top of the player sprite so we want to we want to remove the player so what we can do is say player dot kill which will delete the players sprite and we're not going to set running to false there what we're going to do is we're going to say we're going to wait and say if the player died and the explosion has finished oops that's when we want to actually in the game so we're gonna say if the player is not alive alive is a little is a PI game sprite function that tells you whether it's the the sprite exists or not or it whether it exists in any groups that's what the kill command does the kill commit actually removes the sprite from any groups and remember if it's not in the all sprites group it's not getting drawn or updated so it's effectively gone so if the player is not alive and the death explosion is also not alive just remember in our explosion sprite we have those sprites automatically getting killed when they finish looping through their animation so if the player is dead and the explosion has finished playing then we can set we can set running equal false okay so let's try that out but some rocks hit me there we go and then we also left out one little thing which was we forgot to set the color key when we loaded the image so I had an ugly background there okay let's try that one more time and then we should be in good shape there we go all right now on to the lives now what we'd like to do is kind of like we did with the shield bar up in the corner is we want to show how many lives we have on the screen and a common way that you see in a lot of games is you just put some little icons up there like a little miniature picture of the ship and there'll be three of them and then they'll be two of them then they'll be one of them and so on so what we can do is we've already already loading the player image here right so what we can do is we can also load or create a miniature version of that using the scale transform and we'll just call this the the mini the mini image and that's just going to be a transform dot scale of the player image and we're gonna make it 25 by 19 so just a tiny little icon that looks just like the ship and I'm gonna go ahead and set this mini image set that color key to black okay and then we can go up to our player sprite and add a couple of things we're going to add a lives parameter that will keep track of how many lives we have so we're going to start the game out with three and then we need to talk about what what do we do when our lives run out well we want to show the player explosion animation which means we want to hide the players sprite we actually don't want to delete it anymore we want to actually hide it and then have it pop back up for your next life so what we're going to do is we're gonna set a flag or a flag is just a variable that can have two values and we're gonna set it to be either be true or false it can be hidden when it's hidden we won't display it and we're also going to add a timer to keep track of how long we've been hidden so we can control how long we stay hidden and make the and adjust that delay until we have it the way we want it okay so so now we have what we need set up in the player so now down in our events now what we have to change here is now when we spawn this death explosion we're not going to kill the player we're gonna hide it so what we want to do here is we're gonna say a player dot hide which we will define in a moment we're gonna take the lives and subtract one we're gonna set the shield back to a hundred because you're gonna spawn a new life so and we're gonna also oops and then we're gonna change right here we're not going to check if the player is alive we're gonna check if the player lives equals zero okay so now if our shield reaches zero we're gonna hide start a death explosion and if our lives are zero and the death explosion has ended that will be the end of the game so we'll see that last explosion and then the game will be over so we just need to define how the player dot hide works so we'll go back up to our player here and we will define the hide method okay so this is going to temporarily hide the player so how do we do that well we're going to set the hidden flag to true we're gonna start our hide timer to whatever the time is right now and then we're going to there's a couple of ways we could hide this the sprite but a simple way is just to move it temporarily off the screen so we just place it over here on the side it can't get hit by anything it can't get seen and then we'll just pop it back over that's easier than taking it out of groups and stopping it you know removing it from the draw function and all of that so we're just gonna set the center of the rectangle to width over to height plus 200 so I'm just popping it down below the bottom actually we know there won't be any meteors they're hitting us or anything doing anything weird so now we're hidden now in our update we're just going to check to see if it's time to unhide so if we're hidden and the and enough time has passed and I'm just going to put 1000 and that's in milliseconds so that's one second so we hide for one second and then we come back so we'll set hidden back to false and we'll set our center back to where we want to where we want to be which is with over two and it's actually going to be the same spot where we start out right height minus ten so we just pop it back into the right location okay so let's try that out and see if we have it working the way we want okay now remember we're not gonna see how many lives we have but there we go so that's bloat and then I popped back and oh I misplaced where we are supposed to be that height minus 10 was supposed to be where the bottom is so let's just make sure we have the right location so what I'm going to do is yeah again there's also two different ways you can do that I'm just gonna put it like that just so it's clear where we're placing it okay so when we unhide should be back where we're supposed to be a second might be a little too short and sometime eventually we're gonna want to check and make sure there's no actual meteor right there where we spawn otherwise we're spawning right on top of the meteor and losing a bunch of shield but that can wait because the last thing we need to do is we need to show how many lives we have okay let's set up our function to draw our lives so I'm just going to call it draw lives and what we want to do is we want to pass it a surface and an x and a y how many lives we have and an image to use that'll make it flexible so we can change it for other things if you want and then we're going to just count right we're gonna we're going to draw as many of them as we need for how many lives we have so the image the rectangle is going to be get the rectangle from the image and we'll set the X equal to whatever X we specified plus 30 pixels x I but 30 there because if you remember when we made our mini image we made it it's 25 pixels wide so if we draw one and then we move over 30 pixels there'll be a nice 5 pixel gap in between them so 30 times I so the first one will be at X plus 0 second will be X plus 30 and the third one will be X plus 60 the Y would be just whatever Y we said to use and then we just flip it on to be on to the surface image image correct okay and that's it so that's draw lives and then down in our draw section of our game we are just going to add a command to draw the lives and like we said in the when we define the function we're passing it the screen what x and y we want to use I'm going to say width minus 100 remember we have three of these they're gonna be about 90 and each one is 30 pixels apart so it's gonna be about 90 pixels wide when all three of them are there so if we say with minus 100 we should have plenty of space 5 pixels down from the top the players lives is the value and player mini damage okay let's see if it works oh I see made a little typo in our draw function which is these were supposed to be underscores not dots okay so let's run it just remembered you see our live disappeared there so that's good but I just realized there's one very important thing that we forgot and that is we do not have an explosion sound for our player when they die I really want one of those cuz it's kind of dull without any explosion sound so I have a sound in mind so we'll go down here to our location where we load all of our sounds and we're gonna call this player here we go I'm gonna call this the player die sound okay tie game duct mixer that sound sound directory and then the file that I have for that which I'll also put in the links below it's called Rumble one it's a nice and deep explosion sound so we load that and then we're going to down here when the player gets hit and we do the end we spawn a death explosion we will also play the death explosion sound right here player die sound play okay now we can run our game and see oops several typos today we need to capitalize sound there we're creating a sound object alright now let's go all the way to running out of the middle there we go nice sound isn't it we're gonna let all the lives run out so we can make sure that when I was my last one we actually have the game over excellent alright now this has been a pretty long video so I'm going to stop for today I will see you next time you