welcome back to part 11 of the topdown tank battle game in this video we're going to be making a pickup item that we can put on our map and allow us to do powerups supplies things like that objects that we want the player to be able to run over and pick up all right let's get started so I've started out my pickup scene already with an area 2d and for the sprite I'm using this crate now later we're probably gonna add some other types of pickups and we'll extend it from there but I'm just gonna make one right now that gives the player a health pickup or repair since it's a tank and the collision shape is just a circle but I'm hiding that just so it makes a little easier to see the crate okay now if we add a script to this what we're gonna want to do in this script is set up the properties and connect the body entered signal so that we can detect when the player runs over this so let's just say for now we had the plan to have two different types of pickups a health pickup and an ammo pickup and and when we choose one of these we're going to put this in the inspector so that we can change it around if we want to but we'll make it helped by default and then we're also going to have a vector two which I'm going to use to store the amount the minimum and maximum amount that we want the pickup to randomly give the player so for example if if it's a health I wanted to give them between ten and twenty five health it's just easier to store it in a vector like this so we have to since we have two numbers rather than making two separate variables so that's that now we also want to connect to that signal now while we're at it we should probably set the collision we want the mask to be on player and later we can just turn off so I only care about the player picking these up I don't want if we happen to have an me run across it I don't want the enemy to pick it up and we're gonna connect the body entered signal and in that signal we're gonna depending on what the type is we're going to say if we were an item Scot health we're a health pickup then if the body has a method called heal and we don't have one of those yet we don't have a take damage so that won't work quite yet but we'll just call heal with a random number in that range amount X amount Y so now if for example the same one fantasy is there so and then if we have and if we were in ammo just gonna put past there right now we don't have anything yet and then we're also going to Q free so now we should be able to toss one of these into our map let's go back over to our map and I have all the obstacles in a node to D to organize them I'm going to do that to here I'm going to add a node to D and I'm gonna call this items and I'm an instance a pickup which I've put it in items folder let's grab this let's put one let's just put one over by the player and let's also instance one down here on the road so we can make sure that the enemy tank coming along doesn't pick it up so let's see how that looks so there it is there and I picked it up that's what the enemy come along here and see let's make sure we didn't mess up our yeah there we go the enemy goes right through it okay so now this picks up but it's it's really boring it's just sitting there and it's kind of hard to tell the difference between this crate and any other obstacles that you've made especially once we have our map all flashed out when we have lots and lots of stuff on the map how do we tell that that's a thing that we can pick up well one thing we can do is give it a little bit of animation to make it appear like something that's moving and and something that attracts the eye so you know you want to go pick it up and we'll do that with an animation player okay and my animation player I'm going to create a bounce animation I'm going to set it to auto play and loop and what I want this to do is change the position of the sprite so I click on the sprite here and we're gonna add a keyframe for the position so I'll create the track and I'm going to move to about two halfway along the animation the length is one second so we're gonna move to halfway and we're gonna put this at minus 20 and we're gonna keep frame that and then we'll go back to zero automatically because we're gonna have it loop alright there's we have that on loop so right now if we did that it's just gonna bounce up and down like this which is okay but it looks a little artificial you can smooth that out a little bit by clicking on the on one of the keyframes and then clicking this button right here and that lets you edit the key and what you can do is change the transition and you can change this curve around a lot I encourage you to play around with it I like to do for this one I'm gonna do just a slight sine curve and I'm gonna do it on both keyframes about the same round 1.5 or so so just a little bit and then oh I hit stop here so then we can see it's a little smoother right so when it's on the screen it's going to be bouncing up and down like that if we look at it in the map we can see what that looks like so there's our bouncing crate alright we can still pick it up but we can do even better and make it look look a little nicer still and we'll do that by adding a shadow if we drop that in the texture you'll see it's a little bit too big so we're gonna scale it down and we also need to move it down so below the sprite itself so I'm gonna move it down about 20 pixels or so and I'm going to change the scale and we want to make it a lot thinner narrower and thinner so the Y may be 0.5 and the X may be point 3 to 5 okay and I think well maybe we'll move it down a little bit further okay and so what we want this shadow to do is we're going to scale it down even a little bit more as you as the cube rises up and down and then we're also going to fade it out just a little bit so we're going to change its scale we're gonna animate its scale and it's modulate alright so let's take the shadows scale and we're gonna start with it the size it is now and at the halfway point when the box is at its highest we're gonna shrink it down and I want it to be proportional so I'm going to use the same amount I'm just gonna divide by 1.5 which is gonna give me about it's gonna give me two thirds of the size and then we'll just keyframe that and now we'll have a nice shrinking shadow and now I want to play with the opacity a little bit because it's way too dark so again at the front we're gonna start with the shadows modulate and I'm gonna put the alpha just a little bit above half and I'm gonna keyframe that and then at the end I'm gonna drop it to just a little below half maybe a third and I make you frame that and that way we have a nice fading shadow okay and in our main scene that's gonna look a lot nicer we have a nice little shadow on our box now the remaining thing is I want to be able to indicate what kind of pickup this is so when the player sees this box how are they gonna know whether it's a health pickup or an ammo pickup or some other kind of pickup that we do later a big bonuses or equipment who knows what so we need some sort of symbol telling us what kind of crate it is so we're going to add one more sprite here and this one is going to be we're gonna call this the icon and this one is going to use in the assets folder this wrench image that I have and we're going to take that we're going to put it let's see we're gonna shrink it down a little bit like that and then we're gonna move it up say yeah up above the crate and then we're going to animate some of that too so I'm going to animate this scale to have it change size and I'm also going to animate the transparency so that it will give a little pulsing effect so we're gonna take this and we're going to keyframe the scale and at the end we're gonna go down to half the size keyframe that and then we're going to fade it out and I'm not spending a lot of time on this because I might you know down the road do some particle are some shader effects for these some of these things I don't want to really get into that and yet but for right now we can get pretty far with some simple little effects like this that at least give us an idea of what kind of thing we're going for accident flashes like that and then we can separately if we want set the color so that we could have color means something to I'm just gonna use the modulate and set it to like a bright green and let's see what that looks like on the map alright so visibility is a little low so it might not mean to pick that green color so I'll make it a little brighter yeah I think that'll be alright so so now I have this little pulsing icon in the pickup script we're already telling it to heal the body if the body knows how to be healed so we need to add a method for that to the tank script so we'll go to the tanks grip we already have the take damage so we will add heal some amount and so that will increase our health by whatever amount it's going to emit the same health change to signal so that we update the bar and then we need to make sure we clamp the health so it doesn't go above our max health and so I better do that before I you met the signal or element the signal with a bad value okay so now we have our player should be able to heal so if we go over to our map okay I'll run up here and take a couple of hits okay and then we'll go grab the crate and there are health went back up okay so now we have our pickups working the way we want we can't really do anything with the ammo pickups yet because we haven't added ammo to the tanks or quite yet decided there's a couple different ways we could do ammo and how we want to handle that but that will have to wait for a future video I hope you enjoyed it please leave your comments and questions below and I'll see you in the next video you