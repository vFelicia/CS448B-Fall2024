welcome back to another Godot recipes video I decided to make this video after seeing a lot of questions in the community about how to handle kinematic body is interacting with rigid bodies it can definitely be tricky if you don't know what you're doing and you might see some surprising behavior so let's get started and see what we can do so here we have a very generic kinematic body platformer character with moving and jumping using move n slide to execute the movement and then I've added this ball and these blocks are rigidbody to DS and everything is left at its default settings right now so if I move against the ball I'll push it and the same with the blocks and you might think well that's looking okay now but the problem will happen if for example I try and jump on top of the blocks or if I try and push them into the corner you will see that things are not behaving the way you would think that they should we get tunneling and we get overlapping and these bodies are not behaving correctly so how do we fix this if we look at the code we're getting the user input and then we're applying gravity and we're using move n slide passing it the floor normal so that we know what the floor is and we can use its own floor to process our jump and this is very common this is what you'll see in most tutorials and it's a great way to get a basic kinematic body a character working but if we go and look at the documentation for moving slide you'll see that there are a lot more parameters especially this one right here infinite inertia is true by default and that's what's doing the pushing when we run into a rigidbody 2d it's telling the rigidbody that an infinite mass object has run into it so it should just it should just move no matter what and that's what's causing the strange behavior you're seeing it also means that the mass of the rigid body is getting ignored if I made that circular rigid body have a much much higher mass it would still move exactly the same when my kinematic body pushed it so we're ignoring the rigid body physics when we push it which is what's causing our problem so we want to set that value to false so here I've added the other parameters and since GED script doesn't have named parameters we do have to include them all since we want to go to the last one so I'm just using the defaults that were already there for the other parameters this is just what they are by default and I but I've set infinite inertia it to false so let's see what happens when we run so now when I move I can't push these at all my kinematic body just stops when I hit the rigid body as if it was a static body all right and now I have no way to move these so that solved part of the problem but now I can't push them at all and the way we fix that is going to be when we detect a collision with a rigid body we want to apply an impulse to it so we're going to add a new parameter up here to our kinematic body and this is going to be our this is gonna represent our inertia I'm just gonna call we'll call this inertia and I'm gonna set this equal to 100 this is gonna help us calculate the force with which will push the rigid body and so now down here after the movement slide is when we need to check to see if we have collided so we'll stick this down here at the end and with slide collisions you can have multiple collision so we have to loop through them using get slide count in case there was more than one and then if there was then the collision object the kinematic collision 2d object we get with get slide collision and on that index so now we have our collision and then I'm going to put all of my rigid bodies in a group you can also test if it's a rigid body but I'm gonna say if collision dot Collider is in group and I just called it bodies so if I've hit one of the objects identified as a body then I want to apply an impulse an impulse is like a kick like when you hit a baseball with a bat or when you kick a soccer ball so collision Collider apply central impulse and let's zoom out a little bit so you can see everything so we're going to use the collision normal and I'm going to reverse it I'm going to put a negative sign and to invert it because the normal points out of the body I want it pointing into the body and I'm going to multiply by that inertia that we added and now I should have a nice push on this body when I push up against it so see I can push the blocks the blocks do not tunnel through each other and if I jump on top I can just stand on top so already you can see a huge improvement in the behavior from here there are lots of things you can do to tweak and adjust exactly how it works to get it to work the way you want it in your game adjusting the physics properties of the rigid bodies and adjusting the inertia value up here to different values to see how that works and get it working the way you want but hopefully this helps you in solving your kinematic body to rigid body interactions thanks for watching and I'll see you in the next video this tutorial is part of my nugudo recipes website the goal is to collect all the best tips and lessons to help make you a better Oh developer if you like this video I hope you'll go and check out the site and make sure to hit subscribe so you'll be notified whenever I release new videos thanks for watching