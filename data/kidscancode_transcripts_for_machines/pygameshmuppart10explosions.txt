welcome back to a game development with pygame we're continuing our development in this episode we're going to add explosions to our game which is going to make it a lot more visually appealing so before we get the explosions working there's one other little thing I wanted to add you might have noticed that you've got to keep pounding the spacebar to fire so we're gonna add auto fire meaning our ship as long as we hold the spacebar down the ship will continuously fire so all we need to do to do that is add to our we're gonna add to our player a variable called shoot delay that's gonna just basically be how long it waits in between each time it shoots and that'll be in milliseconds so we'll say 250 and then we just need to keep track of what time we last shot so that we know we'll know whether it's time to shoot again okay and then what we can do is here just like we are checking the key state of the left and right and as long as left is down we move or as long as right is down we move we're just gonna say as long as we are holding down the spacebar then we're also going to go say self shoot and then in shoot we just have to check that it's been long enough for us to shoot again so now get ticks we'll get what time it is now and if now the last last time the last time we shot if now last shot is greater than the shoot delay then we're gonna do this stuff otherwise we don't so what we want to do is say last shot equals now and then I want to indent all of this stuff and in case you weren't aware if you want to indent a chunk of code you can highlight it and then using the command on Apple or the control on Windows the square bracket keys so I'm holding down command and I'm pressing the square bracket keys and you see how I didn't it will you see how it will indent in either direction so I can indent it up to where I want it to be and then the last thing we can do is down here in our events we can get rid of this space bar event because now we're doing it up there in our player sprite so now I should be able to just hold down the key and I'm just shooting steadily I'm not pressing the key I'm just holding it down and there are 250 milliseconds apart so I have a steady stream of bullets that'll make it a lot easier and do a lot less abuse to your spacebar now on to the explosions to do the explosions we're going to need some art so I've gone into the Kinney game art pack again in that spaceship pack and I've got some explosions called regular explosion and then see they're numbered 0 through 8 so these are going to be a sequence of images creating an animation so it starts off with this one and then it cycles through and looks like it sort of puffs out and then disappears so what we want to do is anytime a meteor gets destroyed we want to spawn a sprite at that location that starts with this image image number zero and then fairly rapidly just cycles through each of these images until it gets to the last one and then it goes away and we do that quicker it'll look like this explosion puffs out where it is a look a lot nicer than the meteor just plainold disappearing so first let's load those graphics just like we did with all these other ones so we're gonna load we're gonna need to load a bunch of them and we're gonna keep them in a list and it's actually what I want to do is I want to load these images and I'm gonna resize them just like we did with the spaceship sprite to the right size for the explosion we want but I'm also going to do that a second time and resize it to a smaller image so that we also can make the explosions that will appear when the meteor explodes off of our shield so we also want to show that but I'm gonna make those smaller so they don't cover up our whole ship so we want to go through a list of those filenames load them in scale them to a large size and scale them to a small size and then make two lists the list of the large ones and a list of the small ones so that's going to take a few steps so the way we're going to do that is is we're gonna say the explosion animation is going to be a dictionary and if you are not familiar with dictionaries they're sort of like lists except that each item in the list hat can having basically a name instead of a number for how you refer to it and we'll we'll try this and we'll see if it makes sense if you have any questions about dictionaries you can ask them in the comments and I can point you at some more explanations so in the dictionary there's gonna be an item called large that's gonna be a list and then there's also going to be an item called small that's going to be a list both of those are going to be lists and that's we're gonna we're going to append each image and then we can exhale we want to use explosion animation large or explosion animation small now fortunately those files that we have are numbered 0 through 8 so we can do a little loop and just count to get the different file names so we'll do that by counting to from zero to eight and then the file the file name is just going to be regular explosion zero zero something dot PNG okay and the way you one of the ways you can format strings like this is this little easel brackets are a placeholder and they will be filled in with whatever you put over here in the format function so I so first time through the loop I will be 0 so this will be explosion zero zero second time through the loop I will be one so this will be explosion zero one and so on so we're going to get the right file names so then we need to say that we need to load it by game image dot load from our path in the image folder file name and then we need to make sure we do dot convert and then I'm going to set the color key to black like we have on all the other ones and then now I'm going to resize them so the large one is going to be transformed scale scale the image and I want to scale it to 75 by 75 now these are just numbers that I've worked out by trying it out and seeing what size I like once you see it working if you like a better you know a different size then you're welcome to change them and now to the animation large we want to append that that image that large image okay then we're also going to take and make an image small which is going to be we're again you see I'm scaling the original I'm not scaling that scaling it 275 and then scaling that one because then the image would start to look kind of fuzzy and blurry so we want to keep doing this do the scale each time on the original image that we brought in okay and I'm making this one 32 by 32 and then we're going to append that to the small list okay then we have all of our images loaded and we'll go ahead and run it make sure we have no typos oops we do have a typo and that is I wrote image 1 an image 2 here I don't know why I wrote that I said image large an image small right typed it and I just said the wrong thing out loud very common mistake to do when you're typing and talking at the same time okay didn't get any error messages so we are good now we've loaded all those images in and we're ready to make our explosion sprite so I'm gonna head up here to my top of my program where I defined my different sprites I had my player my mob and my bullet and now I'm going to after all of those add one more and this is going to be an explosion sprite okay and just like we did on the others we're going to initialize our sprite and we're going to set a couple of things now on the explosion we need a couple of properties to pass in we need to tell it where to where to appear so we're going to tell it the center of the we're going to use the center of the meteor that that we that we're blowing up and say make the explosion spawn right there so it'll appear at the same place and then I'm going to tell it what size explosion I want it to be large or small so it will spawn the right one okay so we'll set the size we'll keep we'll save that size to use whenever we need it and then we're going to create the image okay and the image is going to be the explosion animation we're going to use either the large or the small whichever one we wanted right so explosion animation large or explosion an animation small and then we're going to use number 0 out of that list so the first one in the list is the one we start with and then we're going to get the get the rectangle we're gonna set the rectangles center to the center we said to use and now to do the animation we just need to keep track of what frame were on so we're starting on frame 0 we're just gonna check when the last time we updated it was and then we're gonna set our frame rate which is how long do we wait in between each frame and we're gonna create this as a variable so that we can adjust that if we want to change how the how quickly the explosion happens so I'm gonna put 50 here and then if you want your explosion to take longer to go through you can make that bigger if you want to go even faster you can make it smaller okay so that spawned our explosion I created the sprite and now the update for this sprite is just going to change the image if enough time has gone by this is a very common thing you can see we just did this in the in the auto fire as well is to just find out using the the PI game clock if it's been enough time for us to go again so frame rate so if it's been at least that long then last update will get updated and we will when we're ready to start cycling through so we're going to say frame plus equals 1 so we add 1 to frame if we've gotten to the end so if the frame we've gotten to is the same as the length of the explosion animation whichever one we're using the size that we're using if it's the same length of the size of one we're using then we must have gotten to the end one so if we've gotten to the end one then we should kill it otherwise we need to spawn the new image and like when we started doing the rotation on the meteors we got to update the rectangle so that it stays centered in the same place and it doesn't look like the explosion is shifting as it as it moves which would look weird so we're gonna check we're gonna save where the center is make our new image right which is just going to be the next one in the sequence so explosion animation of whatever size we're using and use whatever frame were on get the new rect and set the Rex center to that Center that we wanted to keep okay so there is our explosion sprite complete now we want to just spawn one of those whenever a mob is hit by a bullet so that is down here in our game loop so right here whenever we spawned a new whenever we want our destroy a mob and take some damage then we want to play the explosion sound and we're going to spawn a new mob so we're gonna say just called expl for short that's an explosion and the two things we need to tell it are where to put the center so that's it whatever the thing we hit at use the center it's wrecked and which one do we want to use we want to use the large ones for the explosions and then I'm going to add that to the all sprites oops daad so that we can see it happen and let's see what that looks like oops we got a little typo in our yeah right here where did I type that I misspelled get rekt did any of you catch that as I did it there we go so now you see we have these nice little explosions popping up how exciting okay now let's do the same thing right there when the meteor hits the spaceship so that we can see a little small explosion pop up there so that's gonna be right here where we check to see if a mob hit the player we're gonna do the same thing so I'm going to just copy this and I'm going to place it here so we take away some some shield and we're gonna spawn a small explosion alright and now let's let a meteor hit us and boom we get some little sea faces on the side we get some nice little explosions on us as well alright this has been kind of a long video so we'll end it there if you want to play around with things and adjust them you can change right here how big you make the explosions just make sure you keep the width and height the same because these are square images so you want to keep them square whatever size you make them so they look stretched out and the other thing you could change is in the class explosion you can change the frame right here for how long you wait in between each frame of the explosion and you can see if we were to make that twice as long the explosions will be a lot slower I don't really like that I think it's a little slow but you get the idea alright thanks for watching and I'll see you next time you