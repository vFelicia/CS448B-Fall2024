welcome back to game development with pygame this is part 7 of our tile based game and in this episode we're going to add mobs some zombies to chase our player around all right in the last video we made our character be able to run around the screen using the arrow keys to turn and the up arrow to move forward and we can also walk backwards and we can run around our map colliding with the walls and it's all working good it's nice and responsive and I think for the next step the first thing we're gonna do is just make this look a little better the grid is a little distracting to look at right now so let's paint the ground and let's change the walls and just use some placeholder graphics for the walls that'll make them a little more interesting than this plain old filled green square alright and also when I mentioned that it's responsive something that you run into a lot when you're building a game is you start adding features and adding features and you add things that you had things and then suddenly things start getting slow and it's a really good idea to keep an eye on while you're while you're developing keep an eye on how the performance is going and one way you can do that is to just keep track of your FPS so what I like to do is just in my loop and we'll stick it in the draw section just for a while we're developing you're going to take this out when you're done we're just going to set the caption of the window to be the frame rate now the frame rate is going to be a decimal number so we want to format this so we don't have to see you know 80 digits after the decimal point and then so we're going to format that to be just two digits and the command to get the FPS is get FPS all right so that lets us just keep track as we're running and see that we are averaging around 60 frames per second still which is good that's what we want to see and we can see that if we add a feature and it suddenly starts dropping that then we'll know we'll at least have an idea what to look at at the beginning before we get fancier with optimizing and everything like that all right so let's do the graphics so I'm going to go over here to my settings file and just how just like we're listing what image we're going to use for the for the player I'm just going to keep all of this stuff in the same kind of format we're going to say the wall sorry wall image is going to be tile green 39 dot PNG and what's that well that's just a picture picture I went and found I'll show you what it looks like it's just a little square I think it's from the Kenney puzzle pack for making puzzle games and things but this will look nice and at least look better than our plain green squares but what you'll notice is that this image is a hundred and eight pixels by a hundred and eight pixels which is not the right size for our wall so when we go over here to our main we're going to load the image so we're going to duplicate this line and we're gonna make this the wall image and we're gonna use the wall image and then we're going to take that wall image and we're going to resize it we're just going to say scale the wall image and the size we want to scale it to is tile size by a tile size okay then we can go into our sprites here and in our wall sprite we can get rid of our green fill and here we can change this to wall image and that's gonna look a little bit nicer yeah so now our walls or at least something interesting to look at and now you notice also that we have that layering problem you know some of the walls are drawn above my player and some of them are drawn below it I think I would like for them all to be drawn below it like this doesn't look right all right so we can set up some layering for that as well and I think we'll also go over here to the main and we're sorry we'll go to the settings and we're gonna make the background color something a little nicer I'm gonna put a brown color in here and by the way if you're wondering where I got that where I got those numbers for the color RGB for the colour there is a colour picker plugin for for Adam that's really nice it'll just go ahead and let you go and grab whatever image or sorry whatever color you want and show you what the RGB is for that and you can even insert it right into your code super handy so we're just gonna make the background color be brown just so we have a ground oh and then I also wanted to I'm just going to temporarily comment this out just in case we want to see the grid again sometime we can we can turn that back on so we can make sure you know things are working right but this looks a little better at least we have a plain background to run around on all right you okay so now we are ready let's add some mobs to this game so we're gonna go over to our classes over here and we're gonna add a class mob okay now I'm gonna grab just gonna copy some of this code here alright now when we spawn our mob we're gonna just like we do with everything else tell it the XY where it's going to be spawned we're gonna add it to a mobs group and then we need an image and we have an image for the mob it comes in the same art pack as the player it's a little zombie so we're going to use this little zombie guy back over here to our settings we're going to have a lot of different settings for our mobs so starting with the mob image zombie one underscore hold dot PNG that's an underscore alright and other stuff that we will put in there later so our image is going to be mob image get rekt and our location is just going to be where we are x tosses alright so that's going to be enough to spawn our mob so let's go over here and make sure we have our in our new that we have our mobs group and we can open up our map and let's just spawn a mob right here by the player all right so we need to load our mob image so we will just duplicate that we'll change this to mob image and we need to say here that when we when we find an M when we find the tile with an M in it we're gonna spawn a mob all right I think that's everything oh I just realized we forgot one other thing which is we figured out where we were we need to put our rectangle there all right just put ourselves at the location or but the pazham be I should say all right so there is our zombie okay ready to chase us around the screen now there's all sorts of ways to get this you know that we could decide to have this mob behave right does it chase after the player does it walk around randomly do we you know pacman style assign a a path to it that is gonna walk that if you can avoid it you can avoid it all sorts of things we can do and at some point we'll get to a few of those and talk about how we do them but to start with right now with the time we have left for this video let's just make the zombie before we make a move let's just make it turn and always point at the player okay so that means we want the zombie to rotate so we're going to give it a rotation value right starts out zero degrees it's pointing to the right just like our player was when it started all right and what we need to do is when the mob updates it needs to see where the player is and figure out what angle it needs to rotate to to point at the player so let's look at a little picture so let's look at this diagram so we have a mob and a player each sprite has a position vector that position vector is its location on the screen right this this position vector is pointing from the origin right because if the mob is at an X of 5 and a Y of 1 then he's 5 over and 1 down right so this vector is pointing at the mobs location and the player's position vector is pointing at the players position so if we take player position and we subtract mob position what we get is we will get the vector that connects those two locations if I had done it the other way around mob pause player pause then we would have the arrow pointing in this direction we would find the direction vector from the player to the mob but this is the one we want right we want the vector pointing from the mob to the player so once we have that direction vector just by subtracting these two we have that vector what we want to know is what is this angle what is this angle from the x axis then we know how far to turn our zombie and as our player moves around this angle will change and will change how our zombie is facing so the way we do that is we need to find the angle to the x axis and then another way to look at the x axis is it's a vector just pointing in the X direction so it has an X component and no y component so the angle between two vectors is very easy to find there is a vector command to just tell you what it is you give it two vectors it tells you what the angle between them is so we have a way to find out how to point at our player okay so let's just update our angle our rotation angle is going to be that direction vector so the players position minus our position oops and I just notice we did not so to save our game there we go alright so there's our direction vector right player position mob position and now we to find out the angle we have we take our direction vector and we save dot angle and then we say what vector we want want to find the angle well we want to find the angle to that xaxis Direction vector right and so that will now tell us our angle and we just like we did with our player we can now just rotate we can just rotate that vector or that image the mob image by the rotation vector we get our new rectangle and we make sure we update our center of our rectangle to stay at our position all right let's try it there's my mob look he's pointing at me and as I move around he is always going to point at me right so as my player moves that direction vector is changing and we're calculating at every frame which means when I run by him he's going to turn really fast but that's ok because we're gonna be running away soon all right and now you'll see we could even go into our map and add some more mobs let's add a couple more just so that we can see how they are all going to track the player oops I made that one spawn inside the wall because he's centered I'm sorry he's not centered but his position is using the corner of the wall which will have to change soon but there we go so now you can see how wherever I go every mob is always chasing me very spooky these are some perceptive zombies okay so we're gonna stop there for this video and in the next video we can start having the mobs actually move and chase our player around as always please hit the like button below it helps a lot and subscribe if you haven't already and I'll see you in the next video thanks you