welcome to part 8 of the Godot topdown tank battle tutorial game this time we're gonna finish up with the explosions make the enemy tanks explode when we kill them and add a little bit of visual effects to the shooting with a muzzle flash animation alright let's get started so I started out this time by going to the tank master scene and I've added a couple of things I've added a sprite attached to the turret called flash this is gonna be a muzzle flash effect that is going to play when the tank fires look like you know flame coming out of the muzzle of the tank when the bullet comes out and I've also added an animation player to make that animation effect happen and then I've also attached an explosion scene I've taken the explosion scene in instance it here because I want to have the tanks explode when they are destroyed just like the bullets do and a couple of things here so on the explosion I've chosen the fire animation instead of the smoked one so we have a different one for that also on the flash go ahead and set the region to enabled so that when you customize this on the individual tanks you won't have to go and choose that each time so this is going to apply to all tanks so the animations that we make are gonna do the same thing with the flash sprite we can just use a different image on them to get a different visual effect to new animations here the first one I'm gonna call init and this one we're gonna set it to auto play and what that means is this is the this animation is gonna be used to set the any of the properties that were animating to their initial state so for example on the flash sprite we're gonna take its modulate property and put the Alpha all the way to zero so that the flash can't be seen and then we will add that as a keyframe and that's all we need in there for now when we add other effects and things we might have other properties that we need to add okay and now we're gonna add another animation this one is going to be the muzzle flash effect and I don't want this to take one second I only want it to take 0.15 seconds it's gonna be a nice short animation and I'm going to set the steps to 0.01 so we have a little bit more of a control over where we can set the keyframes and let me zoom this out so we can see the whole thing so this is going to have two tracks on it first we're going to set the modulate so let's set the Alpha back to maximum and add that as a keyframe then we're going to move out to around here almost all the way to the end and we're going to hit another keyframe so it's going to stay with a full alpha there and then at the end we're going to quickly ramp down to invisible again so it'll be visible and then become invisible and then the other thing we're gonna do is we're going to change it to change its scale so in the transform scale I want to do a couple of things here I want it to look like it's flame that's exploding out of the turret and then shrinks down so we're gonna start with the scale being small it's gonna get big and then it's gonna shrink again so I'm gonna set the scale to 0.5 and start that on my first keyframe and then somewhere about here about there we're gonna set the scale to 1.5 and that will be that and then about here where we are shrinking down again we're going to set it to 1 and then it can remain that size during the end of it okay so it's really hard to tell what that's going to do so we need to add a an actual image there and play the animation so you can see what it look like okay so now if we go over to our player tank we can add the image here and choose the texture region I'm using this orange one let me zoom over here I'm using this orange one here make sure that you use pixel snap so you don't get any of the pixels from the adjacent shapes they're all pecked in there pretty tight so now we can see the image there now we need to move it so that it's going to be at the tip of the of the muzzle but we also need to change its offset and the reason for that is because we're scaling when we scale it in the animation it's going to scale centered on the center of the sprite so it's going to scale in equally in all four directions I want it to scale from here like it's coming out from the end so we're gonna change the offset about like that and then we're gonna change the position maybe 60 pixels iosys yeah maybe a little bit smaller than that 55 okay so now it's at the tip of the cannon and if we shoot we should see it play okay that's the effect we're going for so when I shoot you can see it's scaling upwards and then back down again and fading out at the end now the other thing we added to this tank scene was the explosion and so I want this explosion to play when the tank is it when it dies when it runs out of health right now when it runs out of Health we're just doing Q free but we created this explode function this is where we're gonna put the code to do that so what do we want to happen when it explodes well there's a few things we need to do we need to take its collision shape and disable it because we don't want more additional bullets hitting the additional bullets hitting the explosion while it's playing will set alive equal to false which makes the physics process stop running so it won't move anymore we're going to hide the turret and the body and body thanks we don't want to see them or you can see the explosion and then we're gonna exploit play the explosion so we need to do two things we need to show the explosion because it's hidden right now and we need to explosion dot play now that will play the explosion and then when the explosion finishes is when we want the tank to actually be destroyed so we will connect the animation is finished signal here and when the explosion animation finishes that's when we're gonna cue free so let's go over to the map scene and try and blow up an enemy tank and see if that works you notice I already added the muzzle flash to the enemy tanks as well which was the same there we go same process is adding it to the player I just used a different image I'll use the yellow one instead of the orange one if you want to you can go over to the enemy tank and you can scale the explosion to whatever size you feel is gonna be good for the size of the tank you can unhide it here and see that's what it's gonna look like when it explodes so I think that'll be alright a little bit bigger 1.5 that'll do it for this time it's a little bit shorter this time around I've been really busy with the end of the school year happening so I'll hopefully be able to ramp back up in speed in the next couple of weeks so I hope you enjoyed it and learn a little bit about how to do some basic animation effects we'll be doing a lot more of those as time goes on to give some other visual effects as well and coming up we're going to talk about adding obstacles and pick up items to the game thanks for watching see you next time you