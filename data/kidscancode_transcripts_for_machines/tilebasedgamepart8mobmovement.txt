welcome back to game development of pi game this is part 8 of our tile based game and in this video we will talk about how to handle our mob movement having it chased the player and collide with the walls properly ok let's look at where we are so far we have the player who can run around the screen and we have some zombie mobs that we can spawn that currently cannot move but they can follow the players location or they can watch the players location so I always turn so that they're always pointing at the player so now we want to make these mobs chase our player around so I'm going to add a couple more vectors here I'm going to add a velocity vector that's going to be how fast the mob is moving and I'm also going to add an acceleration vector and the reason I'm going to do that is so that the zombie doesn't turn on a dime you know instantly change direction if we move past the zombie then it's going to turn towards us but it's going to need to slowly change its direction so it will look more like it's running than if it then it's instantly you know changing direction and turning on a dime so we have these two variables to track that so we already know what direction the player is in because we've turned to point at that so our rotation variable is going to tell us what direction we want to accelerate and to move towards the player so our acceleration is just going to be something and what we can do is we can go over to our settings here and we're going to add a new variable here called the mob speed this is gonna be this is gonna control how fast our mobs are going to run and we're gonna make that be a little bit slower we don't want them to be as fast as I pastor than our player at least not yet I'm gonna set that to 150 okay so now we have our wrong file there so we have our vector our vector is just going to be mob speed all right we want to run in the forward direction rotated at whatever our rotation is okay and then that's going to accelerate the player in the right in the right direction okay alright and then I want to take these velocity and that's just going to be the acceleration times the games DT and then our position is going to be the velocity times the DT plus one half of one half of the acceleration times the DT squared and that comes from our equations of motion which if you haven't watched the previous video where I talked about the equations of motion I'll link to that below and now we know where our sprite should be so I'm just going to set the rectus enter equal to self dot pause okay so that's going to be enough for the moment now let's just make sure this works I'm going to get rid of these other mobs I only want to have one to deal with at the beginning okay so let's run this and let's see what happens oops and we have a little typo here that's supposed to be plus equals all right so now my mob is going to accelerate towards my player right so you see him accelerating towards the player but he's very floaty right he takes a long time to turn around and come back because he has no friction so he's accelerating towards me at a constant rate which makes him go faster and faster and faster and then he cannot stop so we need to slow him down a little bit or basically make him have some resistance against his movement add some friction and a simple way to do that is once we've figured out what our acceleration is our direction we're going to take the acceleration and we're going to add a little bit to it we're going to add a little bit of negative value to the acceleration based on how fast he's going so that's going to basically the faster he's going the higher this number will be so the less he'll accelerate so he's going to hit a maximum speed that he can't go faster than okay and there we go so you see him chasing after me but he has a maximum speed he doesn't keep accelerating sexy he's hit to maximum speed okay so now he can chase me around and I can run away but of course he has a big advantage over me because he is not stopped by the walls right so I need him to collide with the walls in the same way that the player does which means we need to do the same thing we did with the player where we took the movement and we broke it down into the X component and the y component and tried to collide with the walls in both now I could take this collide with walls and I could copy and paste it right and I could take this whole thing copy and paste this down into my mob class and have it work for that as well problem with that becomes what happens when I decide I want to do this a little differently I'm gonna have to change it in more than one place right copying and pasting is always a bad idea it means there's probably a better way to do it and the better way to do it would be to take this function and remove it from the player and make it a function that any sprite can use okay so we're gonna take that and we're going to paste this up at the top here okay so this is gonna be a new function we're going to indent that whoops nope we're good okay so this is a new function and what this function is gonna do is it's no longer a method in a class so it doesn't have a self anymore it's just gonna take a sprite and some group and in the direction okay and so I just need to take everywhere I have self by itself here self is going to change to sprite so if right Val right all this kind of stuff so I'm going to take I'm just hitting command D control D if you're on Windows to grab every time I see the word self and select it so that I can change that to sprite okay and then the other thing is the thing we collide with is not going to be game dough balls we're gonna say group here so we're just passing it to the sprite we want to collide with in the group we want to collide with okay now everything else will stay the same we don't to change anything else about that so now for the player to use that we need to go back over here and it's no longer self oops no longer self collide with walls right it is just collide with walls and what we have to do is tell it what sprite to use which is self and the walls and we can make sure that that is working by going over here and making sure that we still collide with the walls okay but now we can do this exact same thing with the mob and we can have the mob work the same way so all right we're going to take this and we're going to split this into two and move the center X and they Center Y separately just like we did with the player and that will let us use that function in the same way so Center X center Y self dot pause X pause dot y and then we say just collide with walls self X and then I'll duplicate that so I left off the quote there and we shift that down and we call that one y alright now if we go and run that we should see our mob OOP I remember what we left off the mob also now needs a hit rect remember we had to have the separate rectangle that did not change proportions as our sprite rotated so we need a hit rect for our mob and so what I'm gonna do is I'm gonna put that in the settings too cuz that's going to be something we might want to adjust so the mob hit rect the mob hit correct is going to be there's a little smaller than the player we'll see how it works I just want to put something in there and let it work so go down here to our class mob and then when we when we start the mob right we need to use that hit rect so we're gonna say hit rect we want a copy of that we're going to have more than one gonna have lots of mobs so everyone is gonna be a have a hit rect if it's a copy of this one in the settings and we set our hit rec center equal to the rec center and then we just need to in our update we move our hit rect here not our regular right our hit rect gets adjusted by at the collide with walls function and then we just set our regular rect equal to wherever that hit rect wound up after colliding with the walls okay so now our mob should run into the walls and I can even probably get him stuck on the wall yeah so you can't go through there if I Cove fast enough he's gonna be stuck he can't go through the wall haha okay more progress he's got a lot done this time around but that will be it for this video we now have our mobs moving properly and running into the walls like they're supposed to and in the next video we can start talking about how we could have the mobs injured the player when they hit him and we could also talk about how we're going to defend ourselves so I'll see you next time in the meantime please hit that like button below and subscribe to the channel if you haven't already and I will see you next time Thanks you