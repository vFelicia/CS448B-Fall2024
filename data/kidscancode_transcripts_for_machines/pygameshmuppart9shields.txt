welcome back to game development with pygame in this episode we're going to continue to work on our smurf game and we're going to add shields to our player spaceship and also a display so we can see how much shield we have so let's look at where we are right now we have a pretty nicelooking game so far we've got a score we can shoot our meteors we've got some nice sound however we die instantly when we get hit by a meteor that's not very satisfying so let's add some shields to our spaceships so that we have some resistance to some damage and maybe we have to get hit a couple of times before the game actually ends so what we need to do is on our player we're gonna add a value here called shield that's just going to be a measure of how much shield we have we're just gonna we're just gonna have that be from 0 to 100 right now so 100 means you have maximum shields and then every time you get hit by a meteor you're gonna lose some amount of shield and we could make that relative to the size of the meteor right because on every mob we have a radius set so we can just use that radius to calculate the amount of damage that mobs should do as well so if we go down to where we have the mobs hitting the player and this is where we want to make the changes so the first thing we want to change is I want to change this false to a true in the sprite collide command because I want those mobs to disappear now I don't want them to continue in existence because then they would they would hit us we would lose some shield they still exist so they're gonna move a little bit farther the next frame of the animation so they'll still exist so the count is hitting us again so they'll pretty much instantly remove our entire shield so we're going to have the the meteors will disappear when they hit us and then remember we might possibly get hit by more than one so this might be this will be a list of all the sprites that hit us so we're gonna actually loop through them and say for hit in hits so we're gonna go through each one of the ones that hit us and for each one that hit us we can take away some shield so player dot shield we're gonna subtract whatever the radius of the hit was times two so so essentially the damage will be the diameter of the circle for each thing so the tiny meteors will do a tiny amount of damage and the really big meteors will do a lot of damage and then we don't want to instantly quit so we're going to say if the player shield if the player shield is less than or equal to zero that's when you're going to end the game okay so now if we run it we should see see that one hit me that one hit me so it took two of them to knock me out that big one did a lot of damage we can try it one more time and see if I only let a couple of the smaller ones hit me yeah I probably am getting low now you can see it's kind of frustrating when you can't see what your shield is yeah so now of course it's very frustrating to not be able to see what your shield is so we could go the simple route and just print the number up at the top like we're doing with the score and say your shield is 100 and then show whatever it's going down to but instead I think what we'll do is we will put a a bar so we'll have a little bar that's full and gets lower and lower and lower until it's empty showing how much shield you'd have oh and one other thing you might have noticed you might not have noticed is that since we're deleting the mob here when it hits us then eventually we're going to have fewer mobs right just like happened when we just like what happened when we shoot them if we keep letting them disappear then eventually there won't be any more in that mobs group because we spawned eight at the beginning right and so whenever we shoot one we spawned a new one we also want to spawn a new one whenever we have one disappear from hitting us now that means that we kind of want to do the same thing multiple times right we want to be able to just spawn a new mob so spawning a new mob is these three steps right make a mob add it to the groups and if you notice down here make a mob add it to the new groups that's what we would also have to do down here so that's a lot of repeating ourselves and there's a very common rule of thumb or guideline in programming that says good program and a good programmer doesn't repeat themselves it's called the the d ry principle don't repeat yourself so whenever you find yourself repeating a chunk of code like this it usually means there's probably a better way to do it and that better way to do it would be let's just make a command right and that command is just gonna be spawn a new mob we'll just call it a new mob so every time we hit something we're gonna spawn a new mob every time we shoot one we're gonna spawn a new mob and in this loop here every time we count when we count to eight we're gonna make a new mob okay see how that's a lot simpler now we can just define new mob to be those three steps so we're grouping all of our various function definitions up here so we'll do this up at the top as well new mob is just going to be those three steps spawn a mob add it to the all sprites and add it to the Imams group okay and then we have everything we need so let's just check it real quick make sure we don't have any error messages shoot a bunch of them we're not running out of them we still have them spawning okay and that looks good okay now we can talk about showing our shield so we have the value for shield so what we want to do is draw a rectangle and fill some part of it whatever percentage of it since it goes from zero to a hundred we fill whatever part of it our shield variable is equal to so to do that we are gonna need to add something to our draw section here so just like we did we drew the text we're also gonna draw the shield bar so we're gonna make a function called draw draw shield bar oops and that is going to we're gonna want to tell it where we want it drawn and so let's put it in the upper left hand corner and what value do we want to use to fill the bar we're gonna use player shield okay and so now we can define that function draw shield bar which says it takes an X a Y and a number value of how much of what percentage of the bar to fill so we'll go back up here to the top again and we're gonna define draw shield bar X Y and the percentage okay now it's possible in a certain frame of animation shouldn't happen but just in case we want to be careful if the the shield went less than zero right now we're telling it to end the loop when the shield gets less than zero but if we change things around or something else takes away shield we just want to be a little safe here and say that if the percentage is less than zero then we're gonna set the percentage equal to zero so that we don't have anything weird happen with our drawing I don't want to our drawing to look kind of odd and have the filled part be outside of the empty part and it's gonna look odd okay and then I'm gonna set a couple of constants here for the length oops the length say a hundred pixels and the height just so we know what size this bar is and if we want to adjust it we can just adjust these two settings to have our bar be whatever size we want it to be okay and the filled percentage is going to be it's going to be whatever percentage we have right so percentage divided by a hundred times the bar length that way if you decide so right now if our shield is it 57 then our bar length will be 57 but if we decide to change the bar line to 200 it'll still be 57 percent of that bar length so now we need two rectangles we need the outline you know the whole bar and then we need the rectangle portion that needs to be filled to show how much we have so the outline rectangle is just going to be the the overall size of the bar so that's going to be a rect and it's going to be at X Y and it's width is going to be bar length and its height is going to be bar high and the other rectangle we need is the portion that's going to be filled and the filled rectangle is going to be a PI game rect it's also going to be at X Y but its width is going to be the fill amount that we just calculated and its height is still going to be bar bar height just sorting to be the same height it's just going to be shorter and now we can just draw those two rectangles so pygame dot draw rect by the way I forgot one thing that we need to include on our function just like when we did draw text we needed to say what surface we need to be on we also need to say what surface we're drawing this bar on so go back up here we also need the surface okay so we're gonna draw the rectangle on the surface we're gonna draw it in green and the fill rect is gonna be the size and then we're also going to draw a rectangle on the surface that's white that's going to be the outline rectangle and I'm gonna put a two here which when you draw a rectangle this last number is the number of pixels for how wide you want that the the outline of the rectangle to be so when you're drawing a rectangle ordinarily it's a one pixel thick line I'm gonna make it two because it looks a little better so let's see what that looks like now okay so now I have that nice bar up there on the top and you see how when I got hit it got a little lower but I accidentally let myself get hit by a big one so there we go it's going down whenever I'm getting hit getting lower hope I'm almost dead so now I can see very well that I have a very low shield and when I get hit they're perfect and so that's a simple way to do a progress bar and show it on the screen you basically just want to draw the rectangle outline and fill it with another rectangle of whatever size you want it to be that'll do it for this episode next time we'll start talking about adding explosions you