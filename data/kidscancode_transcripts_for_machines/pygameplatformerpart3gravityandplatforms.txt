in this episode of game development with pygame we're gonna continue with part three of our platformer game in this video we will learn how to add gravity and also some platforms that our player can land on in the last video we added our player sprite worked on the movement so we have a kind of a realistic movement with a little bit of inertia friction slowing us down when we let go of the key and we only did sidetoside movement because obviously for this we're gonna want to have downward movement be caused by gravity now gravity itself is gonna be really easy to do we just want an acceleration downwards now of course as soon as I add gravity we are going to fall off the bottom of the screen so we're gonna need to add some platforms pretty quick but let's go ahead and talk about how we do gravity so over in our player sprite we have in our update section so the part of the sprite that runs every frame of the animation we're setting the acceleration in the X direction and in the Y direction to zero so for gravity we want an acceleration in the Y Direction positive ydirection so we could put say zero point five here so every frame we will be accelerating downwards right so you want that to be an acceleration not a velocity because we don't follow that steady speed we accelerate that's what will look realistic okay so let's see what that looks like all right now you might notice I'll run it one more time I don't look like I'm accelerating I'm falling at a steady speed now can you guess why that is has to do with what we did last time remember when we added the friction so we actually have friction slowing us down and basically putting a maximum on our speed in the Y direction but we don't want that we want this friction to only apply in the xdirection so we're gonna have just the acceleration xdirection affected by friction and that will make gravity work a little more like we expect it to there see I fell off the bottom of the screen okay so before we can do even begin to talk about jumping we're going to need to have some platforms to land on all right eventually we're gonna want to have multiple platforms but to start with we need to put something that we can land on at the bottom of the screen there like the ground of our world so I'm gonna hide my player class for the moment and we're gonna jump down here to the bottom and we're gonna add a class platform now platforms are going to be pretty simple at least to start with because all we really want them to do my underscores there all we really need is when we spawn a new platform we're gonna want to specify where on the screen it is so we're gonna give it an X and a y and we're gonna give it a width and a height for how big we want that platform to be so every time we make a new platform we give it an X and y location and a width and a height so so what we're gonna do is first we're gonna create the image and that's going to be a surface using the width and height I'm gonna just use green for my color so I'll fill the image with and then the rect and we just want to place the rectangle at the at the X&Y we specified okay and that is our entire platform class that's all we need to make the platform work so if we come over to our main and we go to our new we're going to be able to spawn a platform but I'm also while I'm here going to add a platforms group to hold all the platforms so that we can do collisions just like we did in the shmoop where we had all of our mobs and one group to do the occlusion very easily so so we're gonna spawn a platform we're gonna add it to the sprites and to the platforms now to start with I'm just going to manually spawn one okay and this is going to be a platform and remember we need to give it the X Y width and height so I want this to be at the bottom so the X to be zero I want the Y to be eight minus 40 so a little bit up from the bottom I want the width to be the same as the width of the screen and I want the height to be 40 pixels and then I'm gonna do go ahead and add it to the group's so it'll be ready to work with our clave notes so that should give us a platform down here at the bottom 40 pixels tall with the width of the window wide now we're ready to start talking about collisions so if we go over here and look at our player sprite remember we have our acceleration our velocity and our position right and those are being calculated using those equations of motion at the end of all that calculation we have whatever our position of our sprite should be and we're using that position variable to set the center of our players rectangle so it puts the sprite wherever the position has been calculated that it should be and that's okay and it works fine but it is does mean that if we look at this diagram that I drew that we are gonna have to do a few other things so if here's our yellow player sprite you know when the player sprite falls and hits the platform we want to put the bottom of the player against the top of the platform alright but that means that we want to put the players Y position we want to put this dot this far above the top of the roof of the platform so we're gonna have to use some sort of formula like this where the Y position of the player is equal to the top of the platform minus half the height of the player and that's kind of cumbersome and it really doesn't make a whole lot of sense to track the center since most of the time when we're standing on things we're talking about the feet of the player so we might as well do it like this so instead of using that center position we're going to use this position of the rectangle which is called the mid bottom so all we have to do when we collided with a platform it set the players Y position equal to the top of the rectangle of the rectangle of the platform and that is a lot clearer and simpler and we don't have to deal with all those height over two problems so all we have to do to change that is just go right here and set this to mid bottom so now our position calculated position will always be the mid bottom of the player and then we're ready to start trying the collisions so if we go over here to our update section of our game loop we're just going to do a collision check we're gonna do the collision check between the player and the platforms and we're gonna put false remember that tells you whether or not to delete the item you ran into and we don't want to delete the platform's when you run into them so if we hit something then we want to take this the player's Y position and set it equal to whatever we hit it stopped and you might think that that would be enough but something weird is going to happen I'm gonna fall and you see how I fall through the platform I'll run out one more time so you can see it sort of sink through there why does that happen well if you think about what's happening remember we have our our velocity and our acceleration are continuing to be calculated right and because we keep accelerating we have this acceleration so when we hit that when we hit that platform our velocity is not zero our velocity is some number greater than zero because we're falling and even though we stopped the rectangle and put it at the top we didn't set our velocity to 0 sorry velocity is going to continue to grow because of the acceleration so our velocity keeps getting bigger and bigger so we've keep moving even though we've said to stop so we need to make sure we also tell the set the players Y velocity equal to zero that way we can fall and stop moving and we can run along the platform but we don't fall through it so I know the last couple of videos have been kind of long and we're always I always try to keep them around 10 minutes and we've just crossed the 10 minute mark now so just one other thing that I wanted to do was I'm gonna add one more platform just so that we have something else to look at okay and so this platform is going to be I'm gonna put it with over to say minus 52 so it's not right at the center I'm gonna put the Y at height times 3 over 4 3 quarters of the way and I'm gonna put the width to 100 and the height to say 20 ok now you can see I have to add to get to the groups and in an upcoming video we'll talk about a cleaner way to do this so we don't have to keep doing all that repeating all of this added to the group out of the group and and we're not gonna manually create a whole bunch of platforms but just for now just have a second one it's okay to do it temporarily so I just wanted to show you that if we had if we had dot adhere if we had two platforms on the screen then C will land on the one we hit and if I walk off the side I'll fall through it just so you see how it works with the platforms okay and I will stop it there so you can experiment with your gravity you can make your gravity lower or higher right go in and change this 0.5 right here if you make that number bigger you're gonna fall faster right you have a stronger gravity and if you make it lower you can pretend like you're on the moon and fall slower so in the next video we'll actually get started having jumping alright thanks for watching you