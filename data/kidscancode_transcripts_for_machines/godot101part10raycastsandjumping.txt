welcome back to judo 101 this is part 10 and in this video we're going to continue talking about physics and collisions and using a new node called the raycast alright let's get started you have our player and we can run around and the next logical step would be to make them able to jump but there's a few things you've got to take into account when you're going to implement jumping and it may not be obvious right away so let's take a look at it now we could add a jump speed define a jump speed here to be let's make this try negative 1500 right so that's going to be negative you want to be upwards and we could just go down here and just like we're doing with the UI right and you I left we could add a check there to see if we want to jump upwards Frank we could say something like if is action pressed UI up and we just set the velocity equal to jump speed but they're going to be a couple of issues with that so let's take a look all right time I'm going to tap the up key I jumped up right but if I hold down the up key I'm going to keep jumping constantly right my velocity is always going to be playing upwards until I let go of the key and if you're trying to do a flappy bird style game you know that might be what you want to do so you can keep jumping in midair but you only want to be able to jump if we're standing on the ground we also don't want the jump to continue to happen every time where as long as we're holding it down right we want to only jump once when we tap it once so first let's talk about only allowing jumping when you're standing on a platform there's two main approaches to this one really common one is to have a flag something like can jump right and that can be a boolean and you go down here and when you're when you collide with the ground you set can jump to true and when you press the key you only allow it it can jump is true when you do jump you set it to false so now you can't jump again until you hit the ground and it goes back to true and that's that's one common way to approach it we're not going to do it that way we're going to use a node go over to my player here and we're going to add a new node to this called a ray cast to be and I'm just going to call this I'm going to name this the let's call it the ground ray and it might be a little hard to see I'm going to hide the collision there so you can see it so you can see now we have a equal blue arrow pointing downwards and that is a ray cast in it the purpose of a ray cast is it'll tell you if it collides with something so it's basically an extended like a collision shape except it just tells you if I get something and it only points in one certain direction so pointing downwards is what we want but we do want to move it a little bit right we want to make it lower down so let's shift it down about 50 pixels and then we also want it to it's right here cast to is how long it is I don't need it to be that long so we're going to put a 20 and so just project below their feet so when you're standing on the ground this Ray Kappe node is going to detect a collision when you're in the air it will not because there's nothing there and these are super useful little nodes you know you can definitely want to enable it here don't forget to do that you can set it to only detect certain types of nodes so it'll only detect you know static bodies in that way you work fine on platforms but not on other characters or whatever things like that and we're also going to talk about what the glare mask thing means just a little bit so let's just check this out and get it working okay over to our script we are first going to give ourselves a reference to that ground rain node you don't have to type it know it all the time and then to make this a little easier to see I'm going to set my jump speed to a lot a lot smaller so we don't jump nearly as high just when we can see the effect better then we're going to go here to where we check for the input and we're going to say it's action pressed and the ground ray gives collide then we'll set the jumps team so let's take a look at that now when I press the arrow key I jump up but if I hold it down you can see I don't jump again until I hit the ground again and that collision is happening that's pretty good but I don't like the repeated jumping when I hold the arrow down right I want to have to press the key again to get another jump well to do that we need to do this input detection a little difference right now what's happening is we're in the fix process function so this is happening every frame so every frame it checks this and it does it but instead we want to use a different function so we're going to set process input to true and that means we can define a function called input 1 and this function will trigger every time an event happens and it will pass the event into it so we're going to take that yes I'm going to put that in here and instead of saying input we're going to put use it so it's the event that happens that triggers this function is that then we will do it and you can see that will solve our repeated jumping problems I'm holding the arrow key down now if I let go and tap it again I will jump again so I can do it as often as I want but I have to press the key again to get another job okay so let's crank that jump speed back up again you not quite as high and let's look at our main scene we have our platform here right I'm going to duplicate that and add another platform over about there that's totally them I just want to make sure we have room to sit and you can see we should be able to jump up and get on that plus one just as well all right if we're underneath you can't jump we're going to fall to our head what if we wanted it to work a little differently and have our player jump up through the platform and then land on the top all right let's go over to our platform and over here this is X body 2d section you see the oneway equalizer options and here is where we want to set these properties direction is what direction you want to make the collisions happen so we want to happen you want to hit the top of the platform that means when bodies are moving downwards so that means we want to put this a direction a direction vector pointing downwards and then we have max depth that is how far the body can penetrate into this before it snaps up to the top right and counts as a on the top and that let's just set this to 16 we right now have a 32 height here so that would be half height so if we run our code now we should see you jump up and we land on top perfect except you might notice that we are going behind the platform so let's just go to the player and if we go to its the property we just put that to one and that will make sure that the player gets drawn on top of the platform that's better and one last thing we can do is jump is we can set a minimum jumping speed and what that is going to let us do notice that that's about the same 500 and what that going to let us do is if you hold the jump key down you're going to get a full jump if you just tap it and let go quickly you're going to jump a shorter distance so in our input you want to look for the event these action released also on UI up if that happened we need to check what our Y velocity is if it's less than min jump then we're going to set it equal to and jump and what's that that's going to allow us to do is give a little tap and see I can do a short jump if I hold it down I'll do the full jump up and if you want to do this a different way you could also get the same effect by using the clamp function and clamping the Y velocity to as a min jump or whatever it is and that will give you the same effect that's going to do it for this lesson hopefully you can see how useful these Ray casts are you can imagine if you're doing you want to do wall detection you could have them pointing out in front or behind of the player they can be used for bullets if you're doing a shooter game where you want really high speed bullets you really just project one of these outwards from the player and if it hits something and you hit it with the bullet and you know you can point even whatever direction and get all sorts of different effects of them they're super useful and you'll see we're going to use them for other things as time goes on thanks for watching and I'll see you next time you