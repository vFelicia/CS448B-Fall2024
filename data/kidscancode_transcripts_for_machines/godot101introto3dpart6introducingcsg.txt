earlier we saw how to design a 3d environment using imported models but what if we want to make something like a room that has walls doors ramps and other things but we don't want to have any models handy that's where CSG comes to the rescue CSG stands for constructive solid geometry it allows you to build complex geometry using primitive shapes combining them in different ways so let's look at CSG and how it works and then we'll use it to make a new environment for a character to move around in start with a spacial scene and then add a child and type CSG in the search box and you'll see a list of the different CSG nodes we have to choose from these different shapes can then be combined into other ones let's start with a box so here we have a CSG box and you'll see in the properties over here we can set the size but we can also set the operation Union intersection or subtraction and that's going to be how different shapes are combined so let's give the CSG box a child of a cylinder and now we see we have a cylinder here and we can change the cylinder number of sides to make it more round we could stretch it taller to make it taller and because it's set on Union these two shapes are going to be combined into a single shape but let's try setting it instead to intersection so now we only get the part where the two shapes overlap turns snapping off here and you can see it a little cleaner so now we only get the two parts overlapping and then subtraction is the opposite the cube will have the cylinder subtracted from it so you can see we could Center in here we're cutting a hole right through the center of the cube we change the radius here so we're not quite so big right you could rotate it and you're cutting a hole through it like that so any CSG shape is going to have the children applied to it in order using whatever operation they have chosen so let's make something useful I'm going to delete the cylinder so that we're starting with a box and so this box is going to be our room the walls of the room let's make it big I'm gonna set the width to 20 and the depth to 20 so we have a large room and I'm gonna set the height to let's say five so that's our room but we want to be inside the room not outside it so I'm going to click invert faces and now the inside becomes the surface not the outside and the the camera will automatically hide the one you're looking at so you can see it let's turn snapping back on so everything's going to be and I like to move it up so that it's at the level of the grid so that I can see the grid on the floor so there's our room now if we stick our player in here it's gonna fall right through so we need to turn on use collision so let's name name this CSG room and we're gonna save it and let's add our character in here there's our character and recall that when we play the game you're going to be in capture mode mouse capture mode so we want to add a script to this and to this and add that code in from our last tutorial let's give it a try and now you see we can walk around inside the room and we are all good now let's add some features of this room as a start I'm going to add some internal walls so separated into two separate areas and I want to add a Ledge around part of it that will have a ramp that we can walk up to and so I'm going to make that in a separate scene and we're going to use the CSG combiner the CSG combiner node lets you organize your CSG nodes into groups so for example this is gonna be our ledge and so it will combine the objects underneath it but not with other ones in the scene so we're going to start with a couple of boxes okay and I've added two boxes a CSG box and a box as a child and I've made these both fairly thin and they're gonna go in the corner of one of the rooms but now I want to ramp so I can get up to it and to do that we're going to use the CSG polygon now the way up history polygon works is it takes a polygon and here you see it starts out being a square and then it extrudes it into a into a 3d shape and so for a ramp we want our polygon to have three sides so I'm going to reduce this to three and now you can grab these points and you can drag them around and turn that into your ramp and so here I've done this and if you want them to be perfectly lined up you might want to go over here and actually type in the numbers or you can drag the points whichever works better for you it's back over in our room we can instance our ledge object and place it so that it is aligned with the walls and we have a ramp that we can walk up let's try it out I can walk up the ramp and I'm on the ledge okay for my second feature of the wall I'm going to make a solid wall that has a height of five so it'll be the same height as the room itself floor to ceiling and then I'm gonna make it I want to make a doorway in it so we're gonna add a child CSG box and we're gonna set it to subtraction mode and that way we can place this so that it cuts a hole something like that and if we add that into our scene now we have a wall you could try doing some other things you could use a cylinder shape instead to give you an arched doorway if you don't cut the hole we can have a solid wall so we can make our room layout as complex as we want feel free to do it differently than me I'm going to show you a final layout here in the next scene so here's my final scene I've added on material to each of the objects just to give it a nice tan color I just changed the albedo color on each objects material and I've placed a couple of walls here's an example of a using a cylinder to cut out an arched doorway and then there's my ramp over there so I have some rooms that I can explore and I can walk through the doorways go into the other rooms and so on now the rooms pretty featureless right now as it is but you can spice it up a little just by putting a couple of lights in so here I've added a couple of lights to give it some visual appeal and I added a few of our crates that we made in the first video to have something to interact with so now if I go in here I've got a green light in this room and over here in this room we have a light there in the corner and we can go up on the ledge and knock over the crates so hopefully you're starting to see how powerful CSG nodes can be in building objects for your game they can be really useful for creating a quick prototype level to test out your character movement on or to make some complex shapes that you need for your game without having to go over into blender or something like that to model it just keep in mind that the more complex these trees of nodes get the more performance impact you're going to have so it's important to group them in these CSG combiners and don't try to combine too many objects all into one so you know rather than having each of these objects all be part of one tree we have them separated into different ones which is going to keep the performance impact as low as possible all right hopefully this was useful to you in the next video we're going to look at using this level to make a firstperson perspective character instead of our thirdperson perspective character thanks for watching and I'll see you next time you