hi welcome back to space rocks the ongoing Godot game development tutorial series in this video we're going to add some upgrades or some some money collecting so that we can purchase upgrades to the ship and we're going to talk a little bit about the new particle 2d feature in good of 3.0 so this time around I've added a couple of small things I'm going to start with the simplest ones which is on the player ship I have added two more position two DS I'm calling the muzzle left and muzzle right and the idea is that this is a potential upgrade that you can get for your ship that will allow you to do that instead for the code I just did this I added a shoot to function which just spawns two bullets I think the the end goal is gonna be that this will become one function and we'll pass in some arguments to say how many bullets we want to fire but I still haven't decided what all the different weapon upgrades might be so I don't want to go too far into that until I've decided how that's gonna work so just for now I just going to use this other function now part of the reason I added that now is that I've added a we need to start developing the upgrade process and to do that I've created a drop object which is this little yellow star which is a very uncomplicated object it just spawns somewhere and it moves in a straight line at a in a random direction and it disappears after a certain amount of time and this is basically gonna be the currency in the global I've created a drop percentage here so it has a 5% chance of dropping when an asteroid is destroyed it'll also drop when a enemy is destroyed so what that means is I've got a new UI up here it's going to show you how many stars you've collected and if we blow up some stuff here there is our well pick up sound and our UI telling us how many stars we've collected so those are a couple minor changes but the main thing that I want to talk about this time around is I've been really interested in experimenting with the new particle 2d engine in Godot 3.0 and so I thought that I would replace this little blue simple little blue flame with something particle based for the exhaust of our ships engine so what I've done is created a exhaust flame particle to denote so I'm going to disable this one and if I run the ship scene you can see what that looks like so we have some orange fading to red particles coming out to look kind of flame like and so I want to go a little deeper into how we're doing that using the particle to denote so let's look at some of the settings here emitting just turns out whether it's on or off and something you'll notice here is that because the particles are very shortlived they don't they don't last for very long the preview here in the inspector doesn't look like what you saw in the game because it's not able to actually show the whole process it's a preview it's a preview of the particle animation so you don't see the actual final result now normally you will if you have a if you have slower moving particles or long longer living particles but because I have my lifetime here set to 0.1 these particles last for a very short amount of time so it doesn't look quite like what you're going to see in the running game the only other thing that I've changed here outside of the defaults for the particle 2d node is I've added a texture here and this texture is just a it's an animation actually it has a whole bunch of frames of a little fireball animated fireball I'm not actually using the animation because for this the particles are also very small so you wouldn't be able to see them but I just added the texture here mark that it's eight by four frames so that's just gonna use the first frame of this and so whatever particle sheet you have might have a similar grid layout you can just grab whichever frame you want that way or actually have the particles be animated and running an animation as they go so that's pretty much it I've moved the location so that it's going to appear from the back of the ship and I've also rotated it 180 degrees because the default so the default direction that the particles come out is just going to be rearward and that is all the settings that go into the particle 2d all the magic happens all this appearance stuff happens with a process material and when you click this down arrow you can make a shader material that's if you want to write a shader to do all of your particle processing or you can add a particles material and a particles material is where you're going to set all the properties for how you want those particles to move look change over time all those kind of things if I click on the material here you'll be able to see all of the properties that you can set now there's way too much for me to go into here I actually am planning on doing a an indepth tutorial that's all about how to use the particles material and how all these different settings work but for this one I'm just gonna go briefly through and talk about the ones that I have changed to create the little flame effect the emission shape the default is a point all the particles fun at the same point I have changed this to box so that I can could expand the Y extents a little bit so that the the particles spawn over a small range of Y values so it looks like they're coming out of the little back exhaust here I've set the spread to zero changing the spread makes the particles spread out more so they have more angular spread as they come out of the emission point let's see gravity I have turned off gravity gravity is on by default and that's gonna make all of the particles fall we don't want that in space initial velocity it's how fast you want those particles moving I said this fairly high because I want it to look like flames shooting out other properties about movement I didn't change any of you know what angle angle lets you rotate the particles themselves scale I've scaled these way down and these start out as a pretty large shape so but I've also added a scale curve and this is something you're gonna see cropping up a lot and the particles material is allowing you to create curves that describe how a property changes over time and so the scale curve here if you click on it there's this interface here for drawing this curve and so you have your starting value and then over time and this this is from the beginning to the end of the lifetime whatever the lifetime is I have the particle starting out zero really rapidly becoming large and then shrinking down again like they're fading away and you can grab these points and adjust them and it'll change what happens and you can grab these little handles to change the shape of the curve and so you can get a lot of different effects that way what else did we do here so we have our scale changing we also have a color a color ramp if you've used the color ramp in good o2 it works pretty much the same way I'm starting out at the white to the natural color and slowly transitioning to red so it looks like the flame particles are cooling as they get farther away from the engine and then if if you have some animation to happen if you have animated particles this is where you would set those I don't have any of that happening that is essentially how I got this flame effect and there's obviously a lot of different things you could do once you start playing around with it I highly encourage you just create a particle node and experiment with all the settings it's the best way to get a feel for what each of them does and how they combine and the possibilities are really pretty limitless once you have your particle 2d in the code all we're doing is that instead of when we look at the player script instead of when we when we thrust showing and hiding that sprite we're going to set emitting to true or emitting to false on the particle 2d node and then I also added a sound called the thrust sound we want to stop it when we let go of the key but when we hit play we don't want to or when we hit up arrow and thrust we don't want to start playing because then every frame it would restart playing the sound it would sound very very bad so if it's not playing we play it so that way on the subsequent frames if it's already playing it lets it keep going and so you just want to use a sound that can loop so that it sounds like it keeps going as it as it repeats all right that's all the changes so far the next video we're gonna start adding the UI for the upgrade screen so that after a after a wave finishes the upgrade screen will pop up and you'll be able to see how much money you have and what things you can buy to upgrade all those different options on your ship and maybe we'll come up with a few more the way all right thanks for watching I'll see you next time you