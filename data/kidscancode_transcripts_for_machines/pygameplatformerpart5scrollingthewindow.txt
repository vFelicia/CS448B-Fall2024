welcome back to game development with pygame this is part 5 of our platformer game we're going to talk about scrolling the window so that we can keep moving as we hit the edges of the screen all right at this point we have a game where we can jump around on platforms and all the mechanics are working well but if we're gonna continue along the direction of making this a doodle jump style game then we want to be able to continue jumping higher and higher that's the goal is to see how how long you can keep going upwards so we want well there's a couple ways you can look at it we want the camera to move up although technically we don't really have a camera in this game we just have the the game window here the other way to look at it is we want everything on the screen to move downwards right that's what would happen if the camera went up then everything would look like it moved down so we want to move everything on the screen downwards and then have new platforms that are up above the top of the screen move into the window ok so typically you want to do that somewhere you know around the middle point of I mean a around a quarter of the way from the top right about here when our player reaches this height is when we want to scroll the screen so let's go down here to our update section of our game loop and I'm gonna actually collapse some of these other ones that we don't need to look at right now to keep us from being distracted all right we're looking at the update section of our game loop and what we want to do here is we want to check for when the player reaches the top that line that we that we marked off which is the top quarter of the screen right so if player reaches top 1/4 of screen so what that means is if the player rect dot top is less than or equal to height over four right if that happens then we want to move everything down right and that includes the platform and the player or all the platforms and the player so we're gonna take the player position right because that's the the pause dot why is the variable that's actually tracking where the player is okay and we're gonna add the player velocity now we're moving upwards right so our velocity is negative so we're just gonna take the absolute value of it which means taking out the sign right so move at whatever speed the player is moving at right because if you think of it as a camera that's scrolling we wouldn't want it to move at a different speed than the player is because then it's gonna be it's not gonna be smooth then we need to take all the platforms so we'll go through each platform in the self dot platforms take the platform's rectangle and add also add the player velocity to it okay so for each platform we're moving the platform down at whatever the speed the player is so what that should mean oops where did I put self dot player all right so when we get up here see things start scrolling down when we hit that line all right I'll run it again one more time so you can see it right so they'll put my mouse right here right about when we get here right we push downwards right and now of course there's nowhere else to go because there's no more platforms well we have two things we need to worry about now when I jump upwards these existing platforms they're scrolling down off the bottom right so they're down here somewhere there their ycoordinate is greater than the height of the screen so they're down here somewhere and if we were to keep spawning new platforms and keep scrolling them off the bottom eventually we're gonna have lots of platforms down here more and more right and remember that the collisions the way the collisions work is we check if the player collides with any platforms so if that if this platforms group just keeps getting bigger and bigger we're wasting we're wasting processing power and we're wasting time checking for collisions with things that are way way off the screen down below and eventually if you were really good at the game and you got really high then that would start causing a lag because we're trying to collide with thousands of platforms but there's only you know five or six on the screen so what we want to do is we want to delete the platforms that go off the bottom so when we move the platform here we're just gonna say if the plat top is greater than equal to height so if the top of the platform goes off the bottom of the screen then we're just gonna kill the platform that way we're only worried about the ones that are on the screen right and that won't look any different because we're they're gonna go off before we delete them but it does mean that there's nothing there anymore when we fall down and that's fine because we don't want to go down or do we want to go upwards so we need to think about spawning some new platforms well if we have been killing the ones that go off the bottom then our group is getting smaller so what we could do is respawn new ones to replace the ones that are gone that way we'll keep you know a similar amount of platforms on the screen on average because we don't want there to be too many and we don't want there to be too few so remember we're making five forms here right to start with those are the ones we see on the screen at the beginning and whenever we jump up we might be in this frame when we jump upwards we might be deleting one or two or even three however many scrolled off right so we need to spawn new platforms to keep the same average number of platforms so what we'll do is we'll make a little while loop and as long as the length of the platform's group is less than six I'm going to say six we have five starting so we'll actually be spawning another one up above then we want to spawn a new platform and the place we want to spawn it is above the top right so that we see it scroll in as we jump up so we're gonna spawn a new platform okay let's call it P for short because there's gonna be a long line this is gonna be a platform and we're going to randomize this a bit okay and actually we need to randomize first we need to randomize what the width is so let's grab a a width real quick and this is gonna be a random number for how wide you want this new platform responding to be right and so I'll put like 50 to 100 okay and then when we spawn the platform we need to say what X we were gonna use well we're gonna use random dot R and range and we're going to choose a number between 0 so this is the X right so it's going to be either right on this side or right on this side minus however wide we decide to make it okay and then the second category is the why well why we want it to be above the top of the screen so we want to spawn somewhere up above the top so we'll put it between say minus 75 and minus 30 we're gonna make the platform's we're making our platforms 20 pixels thick so we don't want to spawn it somewhere where it's going to already be sticking below so this is up above the top of the plot of the window okay the width is going to be whatever width we decided to use and the height is going to be 20 okay so that's our new platform we need to add this to the group's all sprites okay and now we should be seeing some new platforms start spawning let's see what happens okay there we go so now these are random right so there's gonna be times so I could barely make that jump when you might not be able to make the jump although remember you can go in both directions so you can always jump off this way and land on one over there which is a nice trick okay now this is working and we can go pretty far although I might have hit a spot here where I can't get any further and that's gonna be possible too but that's okay at this point we're not trying to make this perfect yet we just want to make sure that we are spawning new platforms and they're showing up and we can go from one to the next and there you see when your random sometimes they're gonna be right on top of each other but this is a fastpaced game it's gonna keep going so we're gonna be yeah see there that's a little problem we're gonna have to deal with at some point and it's kind of fun already even though there's no real challenge yet okay okay I'm gonna stop here and leave this for you to play around with at this point play around with this number how many platforms you want to have on the screen or have an existence at any given time play around with how you're randomizing the new platforms right maybe you want to make more skinnier ones maybe you want to make fewer wide ones maybe you want to try different locations for them you want them not so close to the edges things like that play with that also you can adjust how it works by changing over in your sprite how how fast or how powerful the jump is right by changing this and this player acceleration right we we talked about this before the player acceleration and the player friction are gonna affect how the player moves so you can adjust how far they can jump horizontally as well as how far they can jump vertically so play around with that find it find it you know find a setting that you like see if you can see if you can play it for a little while and then in the next video we will move on and start talking about improving our graphics you