welcome back to space rocks to go to game engine tutorial series this is part 4 we're going to continue with the asteroids we made in the last video and update them to allow us to spawn them into that sizes different quantities and in different locations okay let's get started okay so the first thing we're going to do is we're going to update our main team we're going to delete all these asteroid instances because I don't want to manually have to instance them here what I want to happen is we're going to different different levels different ways and different numbers of meteors are going to spawn so we're going to have our main node in charge of that so we're going to delete these okay now we're just going to add a script to our main node we want to make sure that in the scripts folder and this script is going to control the game or it's going to manage all of the objects in the scene so it's going to spawn meteors however many we want for whatever level we're on going to keep track of the score it's going to display the display to score and whatever HUD information we want to show all that kind of thing so the first little bit our asteroid here and we have all of this art over here and you have a bunch of different sizes of the asteroids the brown ones and grey ones I'm going to use the grey ones but there are big medium small and tiny switch for different sizes and what I'm going to want to happen is when we blow up a big one it's going to split into multiple medium ones and medium ones will break into small ones and so forth so you want to be able to let me spawn the asteroid tell it what texture to use and by that you know in relation to that out big to be okay save you watching me type them out I just skipped ahead to I made this textures which is a dictionary and the keys are just the four different sizes and each key is pointing to the list here's a list of the different textures so what we're going to do is only spawned the asteroid we're going to tell it what size we want and whichever size we pick is going to pick a random texture out of that category okay so now we want to take out this line because we don't want to you don't know the size yet when we first run the script so we haven't chosen the texture yet so we can't set the extent so we're going to make a function called in it and we're going to what we're going to pass to this is the size that we want and each position where we want it to spawn because we don't want them all to spawn on top of each other in the same location okay and so we're going to have to pick what texture to use this is going to be a random choice out of the particular category of whatever size we chose so we're going to load from the textures dictionary keep the queue size and then the item we wanted to random one out of the list so we're going to pick a random number and we use the modulus to make sure we pick between like if they're three we'll pick zero one or two you want to just take whatever the textures size category is dot size so if there's three this will be equal to three so we're taking a random integer modulo 3 which can only give us 0 1 or 2 ok so we've got the texture now we need to just set our sprite mode you get node sprites set texture to that texture and then we can use the then we can get the extents like we did before that's just the texture getsize byebye we're going to set position to let it additionally specified and that's it so let's let's just try this out by calling in it with a big meteor at screen we'll put it at screen size over to center the screen just to try this out let's hit run scene and there we've got a big asteroid we've run it again you might see we got a different texture and we can even try it if we put small in there we should see a small one there's a small one now our only problem now is that if I turn on collision shapes we are going to see that when we find a small one it's still going to have this big collision circle because we set our collision size to that size and now we'll have the problem that we need the size of this collision object to be the collision shape to be the radius of whatever texture we're using all right we don't want it to be the same size when the meet limit picture is smaller so what we're going to do is we're going to delete this you can delete that collision shape and we're going to make the collision shape when we choose our texture so what we can do is after we've set the texture we're just going to say we're going to make a new circle shape to be objects that's what we want and we're going to take that shape and we're going to set its radius when I said it's radius well we want to know how wide the texture is but some of these some of these images are wider than they are tall and vice versa so I don't want the circle to be set by this distance the distance across it's the distance if the height is smaller so so we're going to choose the minimum of the texture dot get with / for the texture get height / so whichever one is smaller we'll use that as the radius and then we just have to say add shape and that adds the shape to our cinematic body so now we'll have the right size shapes for whatever size after it responding I'm going to get rid of this this is just a test alright let's go over to our main scene and start out by wanting somebody so we need a you need to load that after I team so we can instance it so we're going to use preload to do that and we want the asteroids scene so I'm just going to copy the path there and paste that in and now we have that and now what we want to do is when the game starts we're going to spawn say five of these so we need to pick where to spawn them and to do that I'm going to use that handy position 2d like we used on the ship and I'm going to set some spawn locations around the screen so I'm going to do that real quick and skip the videos me clicking on all of them okay so I've just made eight of these position to dinos labeled one through eight and I've put them in a container called spawn locations so that they're organized and we can hide them and these are the spots where the asteroids can spawn when we restart that way we know since we're cleaning this ship at the middle the beginning they're going to spawn out here on the edges and not be right on top of the player okay so on our script list that just put in the ready that we want to spawn five of these so we're going to count to five and we're going to say we're going to make a new asteroid instance we're going to take that instance and we're going to add it as a child and then we're going to take that instance we're going to use the in it that we made to say I want them to be big and I want the position to be we need to use the spawn locations so we're going to say I'm going to make another variable here we call it spawns equals get node spawn locations and I just want to say spawns dot get child and the name of the names of the children are so so we can just use I all the children of an odor just are numbered zero one two three four right so we can just get whatever one we're on and it'll take one through five for the places to spawn them we just need to get that position okay so let's try that there we go we want some back ten in the corners and they come on to the screen now fine let's randomize it again okay the player has a little time to react to see where they are coming from before we start to shoot and if we want to spawn a bunch of a medium ones then we can do that too okay so now we have that working away we want we can spawn them now we'll be able to do the shooting this is when the bullet hits the asteroid I want it to break apart into multiple smaller ones so we'll be able to you know when I hit the medium one destroy it an instance two small ones there when I shoot a small one I can destroy it in instance two tiny ones there and we'll do that in the next video thanks for watching and I'll see you next time you