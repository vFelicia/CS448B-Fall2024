welcome back to your game development our game in this video we're going to be adding persistent data to our platform game and what I mean by that is a high score that will stick around after we quit playing and come back the next time ready let's get started so in this video we want to talk about doing file i/o which is written like this io stands for input and output so it's how you have your program read and write information from another file it's specifically for this example that we're going to do we want to do a high score which means we want to save whatever the high score is we want to save that so that when you quit the program the next time you run it you'll be able to is the program will be able to see that high score and it's saved and the only way to do that since when the program ends right all of our variables stop existing we can't save it in the program we need to save it to a separate file okay so what I'm gonna do is I'm gonna go over here to settings and I'm going to add another setting constant here to tell us what the name of the file we're gonna keep our high score is so that's gonna be high score dot txt it's just gonna be a simple text file with a number in it and that number will be whatever the high score is and so this would be the name of the file that the program will look for to open and we're also going to need to over here in our main we're going to import the path command this is gonna help us locate other files on the computer if you have watched the shmoop game tutorial you know when we went through loading our files we talked about different operating systems and how Windows uses backslashes and OS 10 and Linux use forward slashes and all that can get confusing to keep track of where files are so we use this path command to build our file locations automatically and I'll link to the video below if you want to go back and review how that worked now the first thing we want to do is when the program starts up we want to go look at that high score file and read the value in so we know so the game does what the high score is and so we can go over here to our startup when we first start up here and create the game object we can load the file now planning ahead we know we're also going to load lots of you know graphics and sounds and things when we add those so what I'm going to do is I'm just going to add a load data function so that we have that all grouped together okay and so this will be where we'll put all the graphics loading and the sound and all that kind of stuff but right now we're just gonna load the high the high score and so we need to figure out what folder our program is located in right we're on the computer it lives so we can use that path command to figure that out right and then that way we can have you know other folders that hold our graphics or and and so on our high score file we're just going to say that in the same folder that our program lives in now now we need to open that file and when you open a file in Tython you know the computer goes and locates that file on the hard drive and it opens it for reading so that it can look inside the file and see what's inside it and then you can do whatever you need to do you know write information to it read information out of it and then at the end you need to close that file because you don't want you know what can happen is something bad can happen if more than one program opens the file at the same time and they're both trying to do different things to it so you want to make sure you close the file so you're no longer doing things to it and a lot of times programs will run into trouble because they you know write the code to work with a file and then they forget to close it you know somewhere and everything work seems to work fine for a while and then you get strange errors later on that become that can be kind of difficult to track down so in Python a great thing you can use and the fancy name for it is a context but I'll explain it this way if we we make we basically make a little block of code that operates with the open the file open command okay file open command or the open command is the one we use to open a file and so we're gonna open our we're gonna open our high score file so we just join use path giant to join whatever folder we're in with the name of the high score file we decided to use and that will open the file and then when you open a file you have some options that you can set okay and there's a variety of ones you can use you can use our if you want to read from the file you can use you can put a B if it's a binary file or a t if it's a text file you can put a W if you want to write sometimes you want to only put stuff at the end of an existing file there's a lot of different options okay I'm going to use the W here because the W will actually open the file for reading and for writing but also if the file doesn't exist which it doesn't right now cuz we haven't created it then it will create the file so otherwise if I just tried to do R here it's gonna look for the file and if the file doesn't exist we'll get an error message and the program ends and you never really want that so I want to create the file if it doesn't exist okay and then we just give this a name what was call it f for short so in this little width sorry with block it's gonna work with the open file and when this block of code ends the file will automatically be closed okay so now we could read from the file now I could do it this way I could say give it to a variable here called high score and we could just save F dot read so read from the file whatever is in there which is gonna come in as a string and then convert it to a number and then I would have number but think about what's gonna happen if I just created this file because it didn't exist then the file is empty then what I read out of it is nothing you know there's nothing existing there so you can't take and make an integer out of that string I'm sorry that string you know there's nothing inside it so you'd get an error message so again we have a problem where what do we how do we cover all the possibilities so that we don't get an error message and our program crashes well this is where we want to use something called a try accept and so what what this does is lets you have two different options something that you can some code that you can run and then some other code you can run in case that code breaks or has an error so what we want to run is self dot high score equals into F dot read all right we want to run that and if that works because there was something in the file there was a number in the file then we're fine but if it doesn't work then we get an error or what can also be called an exception which is another word for error if we get that error then we're gonna set self dot high score equal to zero so it didn't find anything in the file Ouimet maybe we just created it or maybe something went wrong another time and there's something wrong in the file so forget it we're just going to call the high score zero now we've so now we've got our high score being read okay now to make sure this is to see if this is working what we're gonna do what we'll do is we'll go down to our shows Start screen and we'll add something on there to show what the high score is okay so I'm just gonna add another draw text command and I'm gonna say the high high score and I'm gonna draw that at the same size we've been doing white with over two and I'm gonna put it I'm just gonna stick it at the top of the screen okay so now we should be able to run our program it's going to not see the file so it's gonna create it so I'll open up the file manager here and you can see this is the folder this working folder is where we're currently adding the code so you see there's no high score text file but now when I run this program oops I forgot to do what I do oh I wrote der name here twice when I was talking I want I want the directory name of the file yeah I see that I just made a little type of I was talking all right so we run our program notice over here in the folder this high score text file has been created now it just came into existence and obviously there was nothing in it so our exception triggered and we set the high score to zero so now we can see what our high score is okay so now we have our high score being read we know what it is hopefully you can see how these try and accept clauses are very useful anytime you need to run you're gonna run some code and you're not entirely sure where you you know there's a case where it might fail you can have basically as safety as opposed to if we ran this without you know we could have our program just crash at the high score file wasn't there for some reason it got deleted or something went wrong then the program won't even run and that's frustrating so okay so we have our high score in our game now we need to see if the player you know if the player beat it so I'm gonna go to game over screen here and the game over we're going to add a little message here if they got a if they got a high score we also needed to save that high score to the file so that it's so it's permanent so I'm going to say here I'll just put this after the other text here if the score is greater than the high score so we did it we got a high score then then we make the high score equal to the score now we have a new one alright and we want to say something to congratulate the player for doing it so we're gonna say you got a new high score might Center it and I'm gonna put that at height over to where we is where we put the score so I'm gonna put that right below where we wrote the score so you see where a score is and then you get this little message saying new high score now I'm also going to open up the file to write it so just like we did in the loading we're gonna we're gonna open up high score file with a W because we are gonna be writing to it and we're going to just say F dot right okay so we're going to write what the score was and we need to convert it to a string because this is a text file and that will do that now if we didn't get a new high score then I'm also going to just say what the high score was so I'm just gonna do like I did here I'll just copy and paste that down here and I'll click that at the same place right over to plus 40 all right let's see how it goes our high score is zero so I'm gonna play I'm just gonna jump a little bit now my I got a 20 so hopefully when I fall off hey look we got a new high score press the key to play again well I will but first I want to just take a look let's go look at our high score file yeah see it has a 20 in there so we correctly wrote what we were supposed to write in there and now if we run it again I'll jump up a little bit higher and get hey I got a new high score of 50 now let's make sure if I'd died yeah see I got 20 the high score is 15 okay so everything is working the way we want it to all right thanks for watching as always if you have any questions please post them below hopefully you can see how this would be useful and could be extended to add to other programs to be turned into something a little more complicated like a save game things like that are just extensions of this basic process this is the simplest example I could come up with for reading or writing from a file just putting one number in there all right next time we will come back and we will add more to our platform game I think next time we will start talking about graphics alright thanks for watching you