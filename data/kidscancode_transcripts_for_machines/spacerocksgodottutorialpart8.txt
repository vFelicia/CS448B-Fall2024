welcome to part eight of space rocks the Godot engine game tutorial where we're making a full asteroid style game this time we're gonna do a little more work on the HUD adding a pop up message for announcing level transitions and things like that and we're also going to script a simple pause function okay let's get started okay to start off I've done a little cleanup and reorganize the code a little bit from last time when we added the HUD and what I'm doing is I'm I'm getting rid of in main this show HUD shield function so I'm going to get rid of that and I'm also getting rid of the individual components of the HUD and I'm just turning this into a HUD dot update function so that the main doesn't have to know anything about how the HUD is organized or anything it just is gonna tell it to plan to update and pass it the player object with all of its you know shield level and all that kind of stuff and so that way I can on the script for the HUD is where I've moved all this stuff so in the HUDs update function I update the shield which is the code we had before about picking the level and setting the the length of the bar in the color and setting the score on the score label so everything still works exactly the same it still looks fine we just are a little bit more organized now you see everything works the same and I just want to give a quick shout out to after YouTube in the comments on the previous video he made this suggestion and I think it's a really good one and it's gonna make it a lot more flexible down the road as we add more features to the head alright so let's move on all right on this HUD we are going to add another label and this label is going to be called message and what this is gonna be for is any announcements we need to make like level transitions GAMEOVER anything like that so what we've done is just set the font the message the same as we did on the score and we've set the align to make it fill the whole screen so that however big a chunk of text we send to it it's just going to always be centered at the middle so we just set the anchors to the beginnings and ends and the margins to zero and that will be that and then in the code we're just going to set this to show and hide different messages a message timer here and I'm going to set the wait time to 3 seconds it's going to be a oneshot so it just stops when it reaches the end and it's not going to auto start and we're gonna take its time out method and connect that and when the message timer times out we're just gonna say get node message and we're gonna hide it and for starting a message we're just going to have a function called show message and you pass in you pass in some text and what that's going to do is on the message node we're going to set the text to whatever that was we're going to make sure we show it and we're going to start the message timer okay so in our main in our ready we're going to call a new function called begin again next level and every time we want to start a new level this is what we're going to do and what this function is going to do is it's going to increment the level so we're going to move that up here and then we're also going to issue a message so that's HUD show message and the message we're gonna say is just wave whatever level we're on so we're just going to do % global level and then on that next wave we are going to move this stuff up to because we want to spawn the new asteroids and in the process when we're detected we have no more asteroids left we will begin next level and now we get this nice message when we run the program we're on level 1 and if I fast forward here now you see we get wave too so this is a really nice way to do message popups and things that you want to display on top of your your game screen just using the the basic Godot GUI nodes so the other thing we want to do is in this video is we're going to add a pause function so in our global we're going to make a variable called pause it's going to keep track of our pause state and in the HUD we're going to process input and I've already added here the pause toggle input event which I've set in the input map to be the P key and that's just going to toggle that boolean variable from false to true and so now we want the game to pause but we also want to be able to see on the screen that we're paused so we're going to add a node for that so we're gonna add a panel node this is going to be the pause popup and then inside of that we're going to put a label and that's going to just hold the pause the text that we're gonna show on the screen and the reason we're using this label is if we make it fullscreen as you can see it has a dark background so if we take the opacity and we crank that down a bit it'll give us a nice gray dimming effect and then the pause text we're gonna Center on the screen so I've gone ahead and done all the font setting and centering it and everything just so you can see what it looks like so just by hiding and showing this pause popup is how we'll be able to show the state of the game how do we actually pause game play well there's a command called git Tree and what this does is it gets the root of the game for exam when our main scene is running the root of the tree is is the parent domain and so we want to use the method in that called set pause and what we want to set it to is global dot paused so we want to set that to true or false and if you've noticed on any of your nodes that you click on down at the bottom under the node object is a property called pause mode and it can be set to inherit stop or process by default all the modes are going to be set to inherit and but this lets you choose what you want each node to do when pausing it's set to true and your options are that you can have it stopped or you can have it process stop means it should freeze like you would expect pause to do to a moving character or something process means keep going ignore the fact that we're paused which is how you would let certain animations or things keep happening while you're paused so if we leave everything on inherit what inherit means is do whatever your parent is set to do so if we go over to our main node and in the main we set it to stop then everything underneath it is going to stop as well when we set pause so now we can go back to our script here and we've set paused and now we can also set we can also get node and we'll get the pause popup and we're going to set hidden we're going to set hidden to the opposite of whatever global dot paused is because positives true we want to set hidden to be false and now if we run this we're gonna see a problem or actually we're going to see two problems actually so I've hit the pause button and now you can see that it's gotten dim and the pause message is showing but wave one was still under there and that makes it really hard to read so we need to hide any message that's showing while we're paused the other problem is I can't unpause it I'm pressing P and it won't resume and that's because our HUD is inheriting from Maine and it's stopping well if it's stopping it's not processing input so we're not able to unpause so we need to do two things here we need to take the HUD and set it to process all right we don't want the HUD to stop processing input the other thing we want to do is we want to get the message node and we want to set it to hidden when we're paused and now you might expect if you do something like this that you're on the right track but watch what happens now so I'm going to pause it we've won disappears and now I've specifically waited for 3 seconds to go by and when I unpause it wave one comes back and it is never going to go away right that's not what we want because what happened was we paused the game but our message timer kept ticking so we need that to stop when the game is paused that way when we if we pause it while a message is up when we resume the remaining amount of time we'll be there and it'll disappear when it's supposed to you