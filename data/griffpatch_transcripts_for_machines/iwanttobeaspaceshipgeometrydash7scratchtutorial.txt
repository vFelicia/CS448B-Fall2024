hello fellow scratchers back for more Geometry Dash well that's excellent because that's exactly what I've got in store for you no beating around the bush we are finally branching out to bring that awesome ship mode into our games whether you fancy drawing these assets yourself or want to grab them from me I've got you covered yes we're going to get the ship physics just right and I've got the perfect bit of Mass to point the ship in the right direction finally we don't forget to fix the ship's particle stream to emit from just the right area so are you ready well before we dive in if you would like some help with the costumes for this episode I've created an asset pack on my Griff patch tutor account also linked under this video it contains the player and their ship form of course if you want to draw these yourself then please do that can be half the fun after all uh these are some of my hit boxes I use in my game and and then we have some level assets too including yes my rather artistic handdrawn portal costume and finally we have two soundtracks from the previous episodes just don't forget to give credit if you use them to foreverbound and robtop himself thank you guys right then if you want to make use of any of these then just drop the Sprites into your backpack one two and three and we are ready to rumble so open your projects from episode 6 and we'll save them as a fresh new copy for this is episode 7 guys let's get scratching we are going to begin by adding a portal and to avoid us trekking halfway across the level to test it I think we'd better pop one right here at the very start of the game click into the level Sprite and we want the portal dropping right here now it's your choice whether you draw your own portal in scratch or use my asset the important thing is that its size is around 2 by three of your regular tiles now it must contain no pure white color so that the player can pass through it without gliding and it must contain a unique color that we'll use to trigger the change to ship mode I'm using this pinky purple color so this would do just fine but since we have the at hand we might otherwise bring in my level asset Sprite and then copy the portal and paste it where is it ah paste it into the existing level like so we just need to remember to hide the imported asset Sprites before we play the game and here we are one very fine portal ready to transform us into a very Splendid ship or note how we are not colliding with the portal because I didn't include any Pure White in this costume so we are going to need a new costume for our ship too I don't mind if you want to draw this yourself or borrow the asset project the player Sprite I backpacked earlier already has a very fine ship ready to rock and roll so just drag the costume from that Sprite into our player Sprite like so then check back in our player Sprite to ensure both costumes are now ready for use I just noticed my players colors are still yellow and white so I'm going to update them to match the asset colors we can use the fill tool for that great now just in case you don't use my assets let me show you how the dimensions of this costume compare to the original player Cube okay so as you can see the player and the ship should fit just within the height of the original player Cube however the width is just a little wider and that's okay one thing you must ensure is that once you finished drawing your ship that you select the entire costume and snap it to the center of the costume canvas like so that is so that it will rotate nicely around its origin the middle point now costume names these are important you'll see I've named the ship form as ship but we must also rename the First costume not as player but now as cube this is the cube form if you want to support more than one skin then make this Cube one Cube two and Cube 3 Etc just always begin with Cube or ship excellent so with our costumes ready we need a way to switch between game modes from Cube to ship for this we'll make a new variable named mode and it's for all Sprites we want to begin as a cube so under the when I receive game on script before switching costumes we can set mode to cube the same name as our costume and that is no coincidence now move down to the forever Loop we want to watch out for when the player touches a portal I want all these Collision checks to be performed using the hitbox costume but also in the nonrotated form so I'm going to move this set rotation style to all around down below the touching Spike check here great now for the portal checks make a new custom block check portal and then I'm going to pop in a numeric input of player y we won't need that varable right now but it will be useful later on for sure we'll make use of this new block down here before setting rotation mode and we'll pass in the current y position of the player okay let's code the custom block are we touching a portal if touching color then make the level Sprite visible so that we can get the portal costume visible on the stage which will allow us to pick our exact pink shade that will trigger a change of form great next up set mode to can you guess yeah ship hold on I just realized I am recording this video in the new high contrast scratch color mode I use it quite a lot these days as it's great for taking screenshots but let me switch back to keep things consistent with my other videos now let's finish off this script after changing mode to ship we need to ensure we are facing to the right point in Direction 90 and reset the player's jump speed setting speed y to zero cool if you want to test that then we should see that the mode variable will switch from Cube to ship the moment we touch the portal excellent and therefore actually switching costumes is just one block away switch costume that's here to mode are you ready for this let's go and yes we did it ship mode complete well I hope you enjoyed this episode like the video subscribe only kidding well no do please do those things but no we are not done we need some proper ship movement scripts just before we add these though I realize that some of you will have rushed ahead and added skins to your project and that will mean multiple new costumes something like well actually no hopefully nothing like this but anyhow all you need to do in this case is add a number after the costume name like so and then when we switch costumes pop in a join block first joining the mode with a skin variable and that can be the value one two or whatever to make the full costume name anyhow maybe we'll cover that fully in a later episode I just didn't want to leave you hanging so player movement scripts that's found up here if you happen to have scratch addons installed with my Dev tools extension then you can jump right to the definition by simply middle clicking the block yes these are the cube specific movement scripts so what I suggest is that we create a new custom block cube move for men let's try that again Cube movement and we'll move the entire player movement scripts over into that new defined block then we'll make use of this but within an if else block checking whether mode is equal to cube there we go excellent I think you can see where I'm going with this so now we need a second custom block ship movement run without screen refresh and of course we're going to drop that into the else Branch we'll code this block up now in some free space the movement of our ship is quite simple when the jump key is held we accelerate up otherwise we're going to be accelerating down so if else checking for the jump key oh yeah we have that over here it's space or Mouse down then we're going to accelerate up by changing ing speed y by one and back down just as easy change speed y by negative one we do have to be careful though not to exceed a maximum speed uh if speed Y is greater than 12 then we can set speed y back to 12 downwards is almost the same if speed Y is less than but we're not going to use 2 instead we'll use 10 this is the same as the scrolling speed so that the ship will fall perfectly diagonally and yet set speed y to 10 so that's a speed sorted Now we move the actual ship change y by speed y yay and it's testing time I'm pretty excited to see how this turns out and into the portal okay so this is pretty cool holding space has me shoot up into the air and releasing brings me back down to earth however there are a few things missing one I should be rotating to match the direction of travel and two I can fly straight through the ground and the walls and that's less than ideal we'll fix that first adding to the ship movement scripts if the player is touch in the color white and that's pure white then first are we flying up or down use an if else if the speed Y is less than zero then we are flying downwards we'll use our move out of level block and we can enter one in the input to raise the player up out of the floor otherwise in the else also move out of level but use a negative one to drop the player out of the ceiling yeah this time we really do want to allow ceiling collisions when in ship mode finally still within the touching white if block finish by setting speed wi back to zero to level the ship off shall we give that another try smash that green flag and I'm going straight for the floor to ensure I can no longer pass through it it's also worth checking that the spikes are still as capable of ending my game as before and running into a wall yeah this is coming along great the next step is to improve the visuals by making the ship point in the direction it is flying H so how do we do that well we'll need a pointing Direction block at least but next up we need some trigonometry ha well don't worry it is actually simple enough drop in an addition and we're going to add 90 two and this is the exciting block no not the ABS but the arc tan or aan for short this calculates an angle based on the supplied gradient value now that is speed y divided by scroll speed just pop that in there and that is it don't believe it could be that easy well just watch this see using just the movement speed in the X Direction and the y direction we can calculate the direction angle and everything just looks beautiful Simply Beautiful don't you agree that simple change transforms this game mode into something quite special but of course there is still something missing we've lost our player particle Trail well previously this was triggered by a crate clone block and cloning h H the particle Sprite and you know what that doesn't look half bad it's just a shame that the particles do not emit directly from our ship's rear end if we click into the players costume Tab and take a closer look at the ship costume I'll just duplicate it so I can show you this without ruining the original costume if I make all the fills transparent then now I can count grid squares from the center of the costume to the rocket EX exhaust it's 1 2 3 4 5 squares to the left and two squares down from Center okay make a note of that we'll need it again in a moment and we click into the particle Sprite you can see it's here that we position the particle at present so bring in an if else and once more we'll check for a mode of cube mode equals cu Cube then we'll separate off the show and repeat Loop and take just the change X and Y blocks and Below over into that if that is specifically for the cube particles great return the separated off scripts to the bottom and the if else to the when I start as clone hat block now we'll position the particles for our ship firstly we want to move five grid squares to the left ha except if our player is Rota then actually that's five squares backwards from the direction of rotation so we need to first point in the same direction as our player Sprite and luckily there's a handy Block in the sensing category for this the mighty thing of thing block just here and we begin by changing it to be of player because then the left hand options change and we can select direction of player now the particle is facing the same direction as the player Sprite that means if we use the move block we can move forwards in that direction or backwards by supplying a negative value so a grid square is four pixels so 5 multip by 4 is 20 pixels then to move down by two squares we first turn clockwise by 90° so we're facing downwards and then move again this time by two multiply by 4 that's 8 pixels cool what about the particle speed duplicate the set speed X and Y and we'll change them both to be a random number from 1.0 to 1.0 Splendid I think we can give that green flag a slap here we go so these particles are now definitely emitting from roughly the right place and they are controlled and less random but something is not quite right it feels like the particles are still slightly misaligned and in fact they are appearing roughly 10 pixels to the left of the ship's exhaust it had me stumped for a short while but then I realized that after all our Pixel Perfect positioning up here we then have the animation Loop below that Scrolls the particles off leftwards and that's great except that it begins to run right away and so immediately Scrolls the particles one frame to the left of where they're supposed to be ah the 10 pixels we need to delay this animation by one frame that we can do with a simple weight block waiting for zero seconds yes zero even without a specified time the scripts below will be postponed until the next animation frame and that's perfect so slap that green flag again and let's see what a difference one frame can make yes all the difference see how the initial particle is locked exactly in place no matter what angle our ship is at it's those little finishing touches that makes our games look awesome right talking of which what is up with our main title menu our player Sprite is stuck in mode but also we somehow lost our floor let's tackle the floor first I'm sure it's super simple and yes in the floor Sprite we set camera y to zero under the reset level script but not under our green lag script let's set camera y to zero in there good good we're getting there now for the player costume click back into the player Sprite and again when the green flag is clicked we just switch the costume to for whichever costume you fancy on the title screen Cube for me and with that things are looking back to normal bug squashed well that's great now there is one more issue that has been raised by a fellow scratcher and that's the fact that we don't have any particle Trails appearing on the title screen either well challenge accepted continue the green flag script with a forever Loop and again we create a clone of the particle Sprite now that almost does the trick except we have to be careful what game mode we were left in we are seeing the ship mode particles here no problem though we just need a set mode to cube right here at the top of the script and there you have it and I know that there are still more aspects that I have yet to cover like locking the vertical scrolling to a single height when in ship mode and a portal to return us back to cube mode but that and the many other exciting features we'll have to wait for another episode I do hope you are enjoying this tutorial and if you wouldn't mind liking the video to show your support then that means a lot also have you sub to the channel just asking because it's amazing how many people find they haven't so subscribe now and click that Bell icon so you won't miss the next video the moment it drops but until then thanks for watching bye lots of my merch have a great week ahead and scratch on guys