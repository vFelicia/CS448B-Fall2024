hello fellow scratchers this is griff patch i'm sorry that we missed last week's video because i was on holiday and i'm still on my vacations now so this is going to be a short video too i'm going to try and do it in a bit of a truncated format and i'm doing a bit off the cuff so it's not gonna be quite as polished as normal so forgive me for that but off we go today we are gonna add in the piranha plants to the mario tile scrolling platformer if we have a look at the enemy sprite we should find that the here we go the piranha plant is costume number nine so to use the piranha plant in the editor we're gonna have to drag the costume into the tiles sprite okay so in the tile sprite now that has created a costume number 68 great i'm gonna have to map this to an editor key so in the editor numbering its tile 68 in the variables come down and we want tile key map there we go so costume number 68. there we go we've gotta wait for it ready this needs to be a number nine because it's going to be an enemy okay so that straight away if i hide the list we should now be able to run into the editor with the zero key and press the number nine until we see there we go the piranha plant now piranhas usually go up and down inside a pipe key number one is our pipe so let's just add in a pipe here for our piranha plant to go into and then press nine here's the piranha plant and now look this is the first problem we have to solve the piranha plant can't sit directly in the middle of the pipe like we would like so we're gonna have to change the position of this tile to make it look like it's in the middle so to do that we need to move across by half a tile and up by half a tile for this piranha plant i'm going to press a zero key to save the level as i've done it so far so we don't have to unredo that tube again so in the tiles yeah so in this costume editor we need to move the costume we want to move it across by 16 up by 16. but remember that these costumes we've set size to 200 percent so in fact we only need to move it across by eight and up by eight not 16. so zoom right out with the equals there select the whole thing and then using the arrow keys so we can do fine control we click right eight times one two three four five six seven eight and the up key eight times one two three four five six seven eight and then unselect so that i'm hoping will position it perfectly that was the tile sprite we were doing that in so let's come across now press the editor key press the 9 key and there look at that so this is now looking great this will position it perfectly in the middle of the pipe so if i click the left button to lay that down next problem it doesn't appear and that is normal behavior for enemy sprites because we need to do a bit more work to get the enemy sprite working so press the zero key again to save it and we'll exit out and go into the enemy and i'll come into the code and we will get going what we need is the define spawn type custom block so here it is this is where we're defining all of the different types of enemy that we can spawn so we're going to want a new enemy type in here so if i just create some space now remember what number it was i think it was 68 for the piranha plant and the type is piranha costume ah now let's have a look costumes for the actual enemy it's costume number nine so let's pop a nine in there width 16 yep height is double height so 32 because the piranha plant takes up two full height of tiles so that should be enough to at least get the piranha plant appearing on the screen and here we go look at this very good so it's appearing now it's appearing where we actually set the sprite not where we moved it to so we're going to do a little bit more work to get this to appear in the right position too again this one now needs to move across by 16 pixels so what we are going to do is something slightly different to normal rather than doing this in the set type i'm going to use a when i start as clone block so in here we can check whether the type is equal to pirvana like so next we shall change the x position by 16. so this is the x variable rather than position so that should mean it now spawns across by 16 pixels let's run that okay excellent so with this piranha plant centered perfectly on the pipe how about we try and move the piranha down into the pipe a little bit to do that we're going to change y by negative 16. that should move it down just a touch so let's just run that again okay can you spot the problem so upon a plant has moved down but it has not moved into the pipe whatsoever it's positioned right over the top so to fix this we're gonna have to move this behind all of the tiles but careful not to move it behind the background sprite otherwise it'll disappear completely so if we move this to the back layer first as i said this will mean we can no longer see it at all which is no good we need to move it back in front of these sprites so to do that we go forward not by one layer but by the number stored in layers background do you remember this variable we created this to keep a record of how many sprites there were in the background so that we could do it exactly what we're doing now which is to move things back in front of the layer behind so there we go this is now positioned beautifully behind the pipe but in front of the back layers great now one problem that this is going to show up if i go into the level editor this is still positioned down a little bit here and i want this to be positioned where it originally was so to fix that why not surround the change y here with a check to see that we're in the editor or not so if editor is less than one okay so now it's only going to move us down and behind everything if we are in the editor so if i run the game it's behind the pipe press zero and now it's exactly where we positioned it which is above the pipe there super okay so how about next we get this little piranha plant to open and shut his mouth to do that we need to find the move enemy receiver here this deals with all of the movement of our enemy sprites if we scroll down we should find here we go let's do this duplicate this if type equals life okay so what our type is going to be is parana and of course we're not going to take life in here we're going to have a new custom block and let's pop this in the list of these different things that we create so we're going to need a new custom block and we'll call it tick piranha to be consistent like so and run without screen refresh great let's plop this over here and of course we need to make use of it in here so find the tick piranha drop it in there so if tick type equals piranha then tick purana and what we'll do in here oops where am i gone is what are we gonna do let's change the costume so we'll change frame by one because frame will keep track of its animation and we'll set costume do you remember what the first costume number was let's just check again there we go costume number nine so start with costume number nine so we're gonna want two different costume changes if you look at the costumes we've got costume nine and we've got costume 10 like so and we want to animate back and forth between the two so to do that we use our friendly mod operator so two frames to animate between and now we're going to use frame in here but we always have a floor a frame divided by and now this is how many frames the animation wants to take before moving on to the next costume and we're gonna have four so pop that into this side of the mod and there you go if we want it to go quicker we can change it four to say a two wow look at that super fast or three no i like four it's good perfect so next up how about getting this little guy to move up and down well obviously we can put a change y in here and just drop it in here and whoo up it goes and minus one goes back down and back up okay stop that so up and down's easy peasy how are we going to make it go up and down when we want it to go up and down what we'll do is a technique very similar to what we've done with this costume here because the up and down motion will be on a cycling loop um the only difference is we want it to stay still for a bit then move up stay still and move down so let's use the temp variable that just means temporary i use that for a lot of things so set temp 2 and we'll use mod again and i'm going to have eight stages of movement um i'll show you a little bit more in the detail in a second and on the left we're going to use a divide and we're going to have frame again and now this number this is how many frames it does something for so what we're going to do is we're going to move them move the piranha plant up for 16 frames and down for 16 frames so we're going to divide by 16 here to keep track of how many frames it moves for okay so let's try and use this what it means i should be able to do is compare frame to something but i'm going to use the floor of frame because i didn't use a floor in here like i would in the costume so floor frame equals now this number frame uh oh no beg your pardon beg your pardon temp flaw of temp so temp will go from zero up to seven because i'm modding it by eight and it will repeat and go from zero to seven again and it stays on a number for 16 frames so when temp reaches 4 i'm going to change my y to make it move upwards and i'm going to move it up by 4 pixels at a time okay so if i do 16 times four that will move it up by 64 which is the full height of the enemy if i run that okay so that now moves up by 64 pixels every now and again which is fine because we're going to move it down again otherwise it looks a bit silly so duplicate that and on number seven we shall move down by 4 so let's run that okay it goes up and it goes down and it goes up and then it goes down so this is almost working we just need to make sure that it is behind the pipe completely when it starts now it's not quite evenly timed so this is now moving up and then down but it stays down for longer than it stays up that's because i've used four and seven i've had that as a three instead it would now move up and down equally spaced and if i was this is much lower it would then go up and wait oh i've done bad timing there something went again now it'll stay up for a longer than it stays down see that but four is good for me i want it to stay down for a little bit longer to give the player a bit more time so now if we want this now to appear right behind the pipe we're gonna have to go to the when i start as a clone again and now i'm moving down by 16 i need to move down by minus 64 to get right behind the pipe let's run that there we go excellent so this is looking really good now so i can imagine playing this game quite happily any problem is so i'm completely invulnerable to this guy at the moment so i need to add in mario's death here so let's see how about doing that so back to the tick provana script let's put this at the bottom of this script here we'll have an if touching mario and then we broadcast the mario lose life now that's pretty standard so i assume that'll work straight away let's just see yep that does him in well and truly but there is one slight problem here let me show you it to you yep i die even when the plant is down now why is that listen to the level editor here the reason that we're having that problem is that even when mario is just standing on top of this pipe the plant is just here and he is actually even though he's hidden he's just just just touching mario's foot which kills him so that's no use so how about instead we have a bit of a check to make sure that the plant is up or down before we kill mario so let's put an if around this here to stop it from triggering under certain conditions and what i should say is i shall check this temp variable because i know the plant is not moving up unless temp reaches the 4 value but i'm not going to say 4 what i'm going to do is 4.2 something slightly bigger now this is why i didn't put the floor in the original assignment up here because i wanted to make sure that temp could be a value with a decimal place now what this means is if i run the project if i stand on top of here like this now did you see that the plant was allowed to come up just a little bit before it killed me if i hadn't put that point two it would have killed me as soon as it popped up slightly and you wouldn't be able to see the plant and that would be a little bit unfair so are we there let me just press the zero key yep so the plant is appearing correctly and when i press zero again it disappears and it starts its little root that's really really good yeah i think we've got it okay well it's great to have more enemies in this game now than just the gumbas piranha plants are a absolute vital part of mario next up perhaps would be the koopas now you might be able to find that you can start doing the koopas yourself based off the same code as the gumbas in fact you can use the same gumbo walking code that gumball uses what is a little bit more tricky is the cooper shells now that's been driving me a little bit more trying to work out the best way to show you how to do that but i won't believe it this time i'm sorry and that then will be the end of the video i look forward to seeing you again next time if you like this video then click the like button love button whatever it's called in youtube and subscribe to the channel not to miss any future videos i will see you next time thanks for watching and scratch on guys you