hello fellow purple scratchers you've all seen and played these awesome online scratch games and who hasn't wanted to make their own well today that dream comes true as we take our powerful Cloud Player Sprite developed over the last three episodes of this series and drop it into our own games you can choose any game you like but today I'm going to show you step by step how we can add it to our classic platformer games instantly transforming them into online Platformers supporting 100 players and up due to popular demand I've opened an official scratch studio for the series linked under the video and it's already filling up with your crazy awesome MMO projects very cool so when you have something fun to share do visit the studio and ask a curator to have the project added too I cannot wait to play them okay so Wow Let's just address the purple elephant in the room yes purple is the new blue and love it or hate it I think the color scheme is here to stay and so my friends we load up our completed episode 3 Cloud purples I mean projects we're going to get it backpack ready all are important and backpackable scripts are already in the cloud player Sprite and here they are and to make them work with our projects we just need a few scripts to be present in our main game Sprite to be specific that would be a broadcast to Cloud setup and then in a game Loop the add position X and Y to my values and a broadcast to Cloud tick that's not much right and to make it even easier to remember we can drag this small block of code into the Cloud Player Sprite too okay great so these scripts will now be included in our backpackable Sprite so open up your backpack now and drop the entire Cloud Player Sprite in there excellent time to dig out our old classic platformer projects I hope you can find them I love this platforming game engine because it has so many cool features and is really easy to extend and make any number of cool games with and now we'll make it Cloud play compatible the least that we want to achieve is to bring other players into the game they should move around animate just like our player and move from screen to screen so we'll begin as always we do by Saving oops watch out the file menu has moved position saving as a new copy because this is oh what this isn't going so well please try again okay saving as a new copy for this is the cloud enabled scratch platformer oh yeah Step One open our backpacks and drag in the cloud player Sprite I'm going to move mine up to the top of the Sprite list for convenience as I like it next to the main player Sprite okay so notice along with our Cloud Player Sprite scratch is also helpfully brought in the cloud variables and other required lists or at least that's what we are led to believe sadly though these Cloud variables look the part but they are imposters they're fake and they don't work at all and you can tell they're fake because even after reloading the project doesn't show as being cloud enabled on the project page so to fix this we must remove and readd each of these Cloud variables but hold on there we have to be careful because well watch this if I delete Cloud 1 from my project scratch also deletes the variables from my scripts this is terrible and this will cause all sorts of problems so let me undo that with Ctrl Z and now the way to safely do this is to click into the stage Sprite and now delete all of the cloud variables one through eight and without going back into the other Sprite create a new variable oh my this purple and blue is a little clashy and we add Cloud one back into our project remember to mark it as a cloud variable brilliant and of course do the same for Cloud 2 3 4 5 6 7 and Cloud eight all Cloud variables and as long as you delete and create them from the stage none of the other Sprite variables get messed up and everything will work as expected great hide all them variable reporters and find those orphaned game Loop scripts we prepared a moment ago those are the ones we want to copy into the main player Sprite now so drag them over and the fun begins click into the player Sprite and let's see where these new scripts should go well the initial broadcaster set up the cloud scripts should only run once so we'll drop that under the when green flag clicked but before we launched the main menu this leaves us with the scripts that record the player's position and broadcast to run the cloud Scripts these will need to go into the main game Loop so bring them down here's the main game Loop as you can see we already have a forever Loop here we can transfer our scripts over to the existing one we just want to ensure we broadcast Cloud tick after moving the player but before that tick Last Broadcast Splendid that's the initial integration complete and so it's already testing time make sure the project is saved and from the project page size the window to the left side of the screen then we're going to duplicate the tab and pop it over to the right this makes testing easy okay running the left project good and the right project cool wow oh my have my scratch cat just swelled in size yeah so there was a large cat sat in front of me but my actual player is still displaying as usual but look over to the other project and you'll notice the large second player is moving around following my actions this is actually really cool that's all we coded the multiplayer Sprite to be able to do if we want extra functionality like player animations and direction of movement which obviously we do then we have a little bit of extra work to do but don't worry it's surprisingly easy at present we only send a player's X and Y position through the cloud we just need to add to this the player's costume and their Direction too add to my values the costume number and again the Sprites Direction simple drop that in after adding the X and Y position indeed these two properties of a Sprite are so commonly needed in a multiplayer game we might consider adding them to the backpackable Sprite itself for the next time in fact I'll just copy these blocks now and clicking into the cloud player's bright I'll paste them in adding them to the orphaned mini script here just like we do in the Real Player Sprite now next scroll over to the Define player clone tick script and then down at the bottom this is where the Cloud Player receives the messages that we just sent at present we're just expecting an X and Y position but of course we will now be receiving a costume number and a Direction so duplicate the bottom four blocks and we'll start by reading in a new value and so we switch costume two that vowel variable we just decoded then we read in the next value this should be the direction so point in direction again using the decoded vowel variable awesome just tidy that up drop those scripts after the others and we've read in all four values and updated the Sprite accordingly so I think you can give that another test now don't forget save and then reload the right hand window to get the latest scripts and then smash those green flags so did we miss something this looks exactly the same well no not exactly the second player is now animating kind of and they do change direction only they flip upside down well both completely explainable firstly flipping upside down That's a classic case of not having set the direction mode to Left Right living and as for the costume animation looking wrong well the player Sprite has all these costumes but the Cloud Player Sprite just has these two and that is never gonna work we need them to share the exact same set of costumes so we'll start by removing all the costumes from the Cloud Player Sprite well we can't remove the first so instead name it delete me for later then we'll click back into the first Sprite and we'll begin dragging each costume one at a time into the cloud player's bright I find it easiest if I count them off as I go so as not to copy the same one twice or to miss one costumes three four five and then scroll down and continue with 6 7 8 you get the picture and yes we even copy those hitbox costumes not because they're used in the cloud Sprite but just because keeping the costume numbers the same is super important and that makes it easier oh hello guy you didn't want to be left out did you so the last costume was costume number 36 so when we now click into the Cloud Player Sprite we should find there are 37 costumes yes that's one more why because we still need to scroll up and delete the leftover delete me costume and feel free to just double check the costume numbers all match up and if they do then splendid we can give that another test to confirm the animations are now playing back correctly not forgetting to reload that right hand project then here we go and scratchtastic we have some gorgeous running animations now this just proves that the costumes were all copied correctly between our Sprites so I can see just two issues remaining now the turning upside down and our oversized cat Sprite no problem click into the Cloud Player Sprite and enter the direction dialog then switch the mode from all around to left right and then if we check the size of the original player Sprite it's set to 40. so back in our Cloud plus bright and set size to 40 to match and save again this is going to be good I've reloaded the right hand project and that is beautiful finally the player is moving animating and turning just like they are on the first screen this is so neat so are we done well almost look what happens when a player moves from one screen to the next oh dear all the players remain on the same screen with you it looks so weird seeing them floating around on nonexistent platforms so to fix this we must only display Cloud Player clones when they are on the same scene number as the main player that's the scene hash available shown down here so that we'll need adding to the growing list available sent over the cloud back into the player Sprite then and that game Loop receiver will pop in one more add to list block adding in the current players scene hash variable as the fifth item added to the list and then back into the Cloud Player Sprite find the player clone tick script and scroll down to the bottom we need to read in that fifth value the cloud player's scene number and using an if else check if that value is equal to the main players scene hash variable great because if it is then this clone is on the same scene and we can show this Sprite otherwise let's just hide it sounds simple enough shall we give it a try so here we are on scene one and both players are visible so I'll wander onto scene two oh man this is not what I was hoping for the second player should be hidden now but instead we are toggling between hidden and visible erratically this is most certainly a bug in my script what did I miss so I'm showing and hiding down here but tell you what scroll up further and uh yes okay there's another show block up here this triggers when reading in a new cloud value and it's no longer required if we are controlling the visibility lower down so remove that carefully but make sure to leave in the hide block here for when the player times out after leaving the game right I'm feeling good about this so we'll give it another try walking to scene two brilliant and the second player is correctly hidden then coming back scene one and there they are just where we left them so this is really cool but you know what I've just noticed this scene switching is still not quite perfect you might note that cloud players still hang around on a previous scene as we change over and this bugs me something rotten and after a bit of faffing around I got to the bottom of it to tighten things up we need to Simply keep track of the scene each player clone was last seen on and when we change scene in sure we quickly update the visibility to match so scroll down and make a new variable naming it clone scene hash making sure to create it for this Sprite only so that each clone can have their own scene number recorded then after reading in the last vowel that's the scene number we set clone scene hash to Val then for clarity replace this vowel with the new clone scene hash bearable right if you had a dig into the player code you'd find that the Last Broadcast in our Loop is the tick last and this one checks for the player moving off the scene and if they do we broadcast about to change scene followed by the actual change scene event we'll use this to clean up the player clones as the scene changes so back in the cloud player Sprite when I receive change the scene and then to ensure we don't mess with the Clone Factory check if player hash is greater than the empty value and if it is then hurray just duplicate that if else script we made a moment ago to correct the visibility of any clones as the scene switches over and if all is well we should now have pretty perfect scene changing at last let's see switching scene now did it work I think so hold on checking it out in slow motion and by jove I think we've got it what a relief so as you can tell sometimes these scripts need a little tweaking to get the most out of them up until now I'd only use them on scrolling games so the scene changing was a little new to me but we got there in the end and so that's it we have cloud enabled the classic platformer what you do next is up to you as I mentioned earlier I've opened up a scratch studio for your finished projects and they don't need to be from the classic platformer I'd be even more excited to see what other projects you are able to Cloud enable using these scripts if there's any other Concepts you'd like covering like displaying players usernames above their heads or how to find projectiles that everyone can see then drop me a comment under the video letting me know what you find most helpful but that's all we've got time for today if you've enjoyed the video then please smash that like button and if you haven't already remember to subscribe to the channel checking that Bell icon to ensure you get notified as soon as my next exciting video lands but until next time I hope you have a great week ahead and scratch on guys beautiful purple