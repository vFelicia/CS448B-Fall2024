hi this Griff patch welcome to my top down scrolling game tutorial for scratch we left off here in a zombie cubes game with a single enemy who could follow you around and now we're going to expand that and look at how we can add lots of them now in my zombie cube game there were loads of zombie cubes so you don't really want to have to add them all in by hand one by one so the best thing to do is have a list of positions so we're going to create a list here and it's gonna be for all sprites that's very important because having it list per zombie cube is not gonna work so we're going to call this mobs capital letters so we know it's everything well if this is a term really it came from my use of Minecraft but it'll it'll do here so mobs okay there we have our list but we don't really want to have to enter in the positions by hand either have been nicer to be able to use a bit more of an interactive way in the game so we'll do that so it says hide that list of a second what I'm going to do is have it so that you press a certain key and it will position a mob wherever your mouse is so you can play the game and you can pop the mobs in as you play it so let's go into the player scripts for that and what we'll do is well add in an event went key pressed now let's add it in over here it's a bit out of the way okay the key we're gonna pressed at a mob is gonna be M this M is pressed then we're going to add two mops from the lists and the position we're going to add is going to be operators plus scroll X on the right hand side and then Mouse we're going to sensing X there mouse x + scroll X and another row it's going to be Mouse why a scroll wine so every time you press em it's gonna add the position of the mouse on the level two mops now if we go into our zombie we need a way of actually positioning these mobs as the game starts I've been set up so let's add a new custom block called setup run without screen refresh okay and when we call the setup script here receiver we're going to actually call this setup now so now I'll just move that next wonder there so this is going to be setting up all our mobs let's get some fresh space of e yeah okay so all the positions of the mobs is in this list mobs here so we need to it's call iterate go through the list and find a positions in that list so we need a variable I'm going to call it I but iterator for this sprite only okay and I'm going to set I the very beginning let's get it set X Y and set I to wat and then we're gonna have a loop and we're going to repeat until greater than and on the left we're gonna have the available I repeat until I is greater than the length of the list the ones I is bigger than the length of mobs we're going to stop so in here now we're going to have our set X and wife this first one it's going to be item and then we want there I so I x item I of mobs which is one to start with then we're going to have a change I buy one so it's the next item and then change Y sets I set Y to item I of mobs which is going to be the next I'm about to now of mobs and then we're going to change I again so it's going to go through one by one setting the X and then the y to the position of the mob and then at last part of the loop we need to make a clone so that we have our next mob okay this is almost there the only problem we have now is that there's gonna be one extra mob created so if there was two mobs we have to create two clones but then we still have the original sprite and we don't really want that so it'd be useful if we could find a way of getting around that problem so what we're going to do is set I to be zero at the very end so the one that isn't a clone will have an eye of zero now let's see what we can do with that okay so when I is zero we don't want to do anything with the non clone so let's have a control if so in move level let's only move them when I is bigger than zero like so and also we want to make sure when we've set up before we call set up let's set the is visible to false and let's hide or we call setup so this means that the first one isn't a glow when I visit of all set to false and I have zero and which means is physical is gonna be always set to false and when it comes to moving the enemy it's gonna be false so it's going to be hidden and it's not going to try and move anything and so it's just gonna act as if it's never there which is exactly what I wanted to right now if we've on this we've got no enemies at all yep so to add an enemy all we need to do is put the mouse where we want it to be while the game is running press him let's run it again is if we want another enemy its add one down here so please that's what you want it to be what's em and I'll do one over here puts them now burn it there we go and how is this working do you remember look in the the list variable now if we make that visible the mobs have a look what we've got in here we've now got a list of okay list positions this is the X this is the Y the X which is the Y so one two three or mops according to that so like look it's three of them must at some point of pressed M yes in fact there he is stuck down here another one has appeared because at the moment I've got it tied to the M key whenever I press M key it's gonna create a mob so probably a good idea to delete those rows because I don't want that mop appearing in that position so let's delete these top two you probably haven't got those because you probably impress M key but maybe you did let's run that again okay so now hopefully there's no mob damn bottom yeah there we go no mob down there which is what I wanted so these are the positions that we're creating our mobs you may have found zombies starkest getting stuck in walls the problem with the detection of walls in scratches that it sometimes doesn't quite work and you end up with a zombie getting stuck in a wall and not being on a move you might been having that problem already so let me show you how to fix that it's not happening in mine but I'll put it in anyway so let's do that so what will happen is we have the move enemy in Zombie here and it shows the zombie for the first time just here if it's visible now what can happen is it shows it but it's actually already it's slightly overlapping a bit of level now this can happen just because of slight glitches in the positioning or whatever reason it shouldn't happen in theory because we only ever let me you only ever let the zombie move if it doesn't touch the make but it does happen especially when there's offscreen bits of level which it can't detect or for other reasons so what we can do is add in an if statement just after this show and before the follow player and see when we show it whether it's touching a wall already so we need that touching block where is it it is just duplicate that so I've got the right color so if we are touching a green wall the player if they're zombies I is touching a green wall as soon as we show it we should not happen but it can happen and it gets stuck in a wall then we want to try and get me out of a wall so let's run like a new block called escape war like this and we shall all the fun without screen refresh that's fine okay so move that escaped war to here so if when we first show the enemy we are touching a wall we want to run this little escape war routine so let's put that down here and all we simply going to do is try moving him first of all we'll move him to pixels to the left and we'll try moving in two pixels to the right and then we'll try moving him to pixels up and we'll try moving him to pixels down so this just wiggles him around and hopefully that will get him free so that's it the main problem is like says if somebody's moving toward you here and we've been up and down this wall he said he stops moving and it's because he's got into the wall slightly but this routine here will just move him back out of the wall again so it just there's a little bit of a precaution to try and stop at the zombie getting stuck in walls and it does tend to work quite well that's all great what we need to do now is perhaps add in something that actually will mean he can hurt you and restart the level but that probably will have to happen in the next tutorial thank you for watching I hope you enjoyed that and are getting somewhere with this see you next time