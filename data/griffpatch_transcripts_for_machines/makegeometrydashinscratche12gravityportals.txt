hello fellow scratchers I hope you had a whole lot of fun with your jump pads and jump rings from last episode today we have something perhaps even more exciting the gravity portals a yellow portal that flips all player movement upside down and a blue portal that brings us back down again this can get real exciting especially as it applies equally to other game modes like our ship or the jump pads and Rings wow for those who don't want to draw the assets themselves feel free to borrow the ones I prepared earlier which can be backpacked on my scratch asset project linked under the video okay then are you ready guys let's get scratching once you've saved your project as a new copy grab some gravity portal assets and bring them straight into our level now I'm not quite sure where I'll position them how about we have a jump ring bounce us into the yellow gravity flipping portal once again this is another unique yellow color so that it doesn't get confused with the other yellow triggers now when gravity flips the player will shoot upwards so we need to make sure there is something solid up there to stop us falling off into outer space now I'll just grab a row of tiles from another scene and drop them in above the portal continuing it on in into the following scene the reverse gravity portal can be taken into the following scene 2 to give us a little bit more time to play so it's worth a test to ensure the yellow portal doesn't cause any erroneous triggering yep that seems okay I could jump straight through the yellow gravity portal without it getting in my way or triggering a jump making sure the level Sprite is visible on on the stage and then click into the player Sprite we'll set up the triggering event find the main menu script and to keep track of whether gravity has flipped I'll make a new variable naming it up for all Sprites right away we will set up to one so even in the game menu We Begin the correct way up this needs copying into the game on screen also so that it resets with the level attempt now to check for portal activations that's in the defined check portal code we'll add a new if to the very bottom checking whether we are touching color and we'll select the fill color of that bright yellow portal and all we do is set the up variable to to1 so that up becomes down and down becomes up oh this is going to be fun now duplicate that if condition as we'll also set up the gravity restoring portal the blue one we need to make it visible on the stage by switching level costumes okay so back in the player Sprite and pick out that blue shade nice this color will switch up back to one again restoring things back to normal now we can make this a little more efficient drop in an if else around those two portal checks we only need to check for yellow portals when gravity is normal that is when up is greater than zero and the reverse for the blue restoring portals that will stop them triggering over and over when they don't need to let's make sure the detection is is working oops I missed the portal okay cool up has switched to 1 that's great of course I should be able to test the Blue Portal if I can just get the ship to fly yeah up is back to one brilliant that means we can get on with the far more fun job of actually flipping gravity for our Cube for this we need to locate the Define Cube movement script so take for example this turn by 15 if we were to Simply multiply that 15 by our up variable then now it will be 15 when up is 1 and 5 when up is 1 so it turns the exact opposite direction which is exactly what we want so the change speed Y is the actual gravity so change it by 4.3 multiplied by up this next if controls the maximum fall rate to avoid switching between less than and greater than will multiply the current speed y by up instead and then set speed y to 28 multiply by up now careful this change y wants to stay untouched so next up we have the level Collision scits this if decides if we are traveling down towards the floor or not well that wants to flip so again multiply speed spe y by up then we have the jumping code set speed y to 28 multiply by up to flip that too okay so that was my first pass did we miss anything let's give it it Go smash the green flag and flip gravity oh um hold on right something is indeed wrong my first guess is that perhaps I'm traveling too fast into the ceiling and and it's glitching out let's reduce the maximum fall weate from 28 down to 22 bother I was expecting that to work don't you hate it when you have bugs like this well just know that it happens to everyone it's just part of being a coder so it must be something to do with the Collision code oh look the move out of level block here it's moving up out of the cision with that one but when gravity is flipped it should be moving down just drop in an up variable and that should fix that one yes houon the eagle has landed and also nicely flipped back down to the floor too how cool is that and I can jump as well ah don't ever fall into space no now you may have noticed that while on the ceiling the player's particles are being emitted out of the wrong side of their body let's fix that click into the particle Sprite and here where the mode is Cube we change y by 16 to move the particles to the player's feet so 16 multiplied by up yes and then also this speed y that pushes the particles upwards so again multiply that random number by up to flip it green flag and we flip and that did the trick nice yes next we'll work on inverting our ship's gravity too let's address the ship's particle effects first in advance since we're still here the only thing that needs to change is the turn block here that directs us down towards the thrusters of the ship multiply 90 by up okay nothing much to test here yet so click back into the player Sprite and we'll check out the player's costumes next a problem we have here is that although we can turn this ship 360Â° we don't have a way to flip it upside down but still face right so what we'll do is duplicate our ship costume and add a negative one to the end of its name ship one then click on the flip vertical button to do the job next up we'll go to the first ship costume and rename it adding a one to the end ship one and although we don't need a flipped Cube costume it will make it easier if we can duplicate that to changing the name to cube NE one and the first Cube to cube one this Chang is going to require a small alteration to our costume switching code the first is in the game on event receiver here all we need to do is join the game mode variable with our up variable to form the full costume name now if you have already implemented skins then you'll need to join with that too since we are having to set the costume multiple times now how about we formalize this in a new custom block name it restore costume and run without screen refresh we can pop both these set rotation mode and the set costume blocks in there and then call it right away with a restore costume followed by the camera tracking block great where else do we change the costume in the when I receive game overripe and switch costume with the new Resto or costume block and then link it all back together and the same in our level complete script replacing again the rotation mode and the set costume there I think that is all of them let's run the project on the ceiling and into the ship portal okay we are indeed upside down both the costume and the particle Trail is working too which is excellent news however the control scheme is still functioning as if I was the correct way up and this two needs to be inverted so to invert the ship's gravity we need to scroll across to the Define ship movement script and once more we'll make heavy use of the multiply by up block invert the direction of thrust multiply one by up and negative1 by up then the maximum up speed becomes maximum Down Speed speed y multiplied by up capping the speed as usual to 12 multiplied by up then we have the minimum Down Speed speed y multiplied by up then setting speed y to 10 multiplied by up the actual change by speed Y is unchanged and in fact that is it so let's give that a shot shall we smashing the green flag and I want to get upside down and into the ship portal there we go and I can confirm that pressing space does indeed thrust us downwards now which is exactly what we wanted and it looks and feels awesome you are really going to love this now there's just a few things to clean up before we finish for today the first is that our camera tracking window needs a slight tweak for the inverted mode because it usually leaves more space below the player so that we can see where we're dropping down to in inverted mode that doesn't give us much view of what lies above so let's scroll over to the camera tracking custom block and once more we'll use the multiplied by uptick but it's a little bit more convoluted here first let's make sure that this last camera Y is less than zero check is moved out of this if to run afterwards instead this is because either ifs will now be able to move the camera downwards next all four mentions of Y position need to be carefully multiplied by up but that's not quite all we will also need to multiply the whole round operations too something like this I told you this was convoluted I'll give you a second to look over that and make sure yours is correct and then we can give it a test okay now we should mind that we get to see a lot more level above the player than we were before that's great news when we are falling upwards and lastly what about inverted jump pads and wings when placed on the ceiling these need to trigger the player to jump downwards now for this we will need to locate the Define check transporter script and upgrade our set speed wise with a mult multiply by up of course for both the 40.5 and for the 29 and let's check that out up we go and boing very fun what about for a jump ring yeah this has turned out perfectly I can only imagine the level designs you guys will match together with the jump pads Rings antigravity portals ship portals Cube portals and the standard gravity portals so please do keep submitting them to the official scratch Studio linked under this video it's such a joy to see and play the community's projects if you enjoyed the video then please take a moment to give it a like and make sure you subscribed so as not to miss the next exciting episode when it drops also if you have any ideas for what we should cover next in this series then drop me a comment well that is it from me today thank you for watching have a great week ahead and scratch on guys