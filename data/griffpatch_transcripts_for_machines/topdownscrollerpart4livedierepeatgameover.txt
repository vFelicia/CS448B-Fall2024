Highschool patch welcome to the fourth part of my tutorial series on making a topdown scrolling tutorial today we are going to look at how to get these green zombie cubes to actually hurt you and in the game when they touch you so let's get on with app straight away let's go into the player sprite and what we need to do is add in actually before we do that let's disable this M key to add of enemies so when you're not designing levels just detach this let's put an if statement yeah like this this protects us so we'll press M key it's never gonna go and do this not if there's nothing in there so that just protects us from being able to add new enemies by pressing M by mistake any point when you want to add them just pop that down like that then the M key will now run those and Naomi back in there when you don't want it okay so now we protect it from adding them by mistake so duplicate your broadcast here and create a new one and we're going to add a broadcast to check whether we are touching an enemy so that's called new message and we're gonna say touching enemy like that okay last one in the list of broadcasts so let's have a receiver for this when I receive enemy now this is a nice straightforward they've coded in here just have an if and then we want sensing ching mouse pointer no we want to change that to be touching zombie she's the name of the sprite there if we touch a zombie we need to end the game now for that let's create a new available and I will make it for all sprites and I'm going to call it end like that so when we touch a zombie we set end to die like that okay that's all we need in that and now we have this repeat loop here so what we're gonna say is keep repeating until and in there greater than and then we're gonna have end it's greater than and just delete that side don't have anything in it so when end is bigger than nothing then we're going to end and come down here so we need to set end just up here where's we did at the very top end to blank so end is starting as blank and as soon as we touch an enemy and be bigger than blank and will drop out so that should just stop the game it seems to be touch the enemy right now just try that yep game over can't move and is now died okay let's get rid of that end verbal from the view and now we want to do something down here now in my zombie cube game and I touched an enemy I shook the screen so let's do that sit down here let's have an if/else at the end of the air the game loop and we're going to say equals end equals died okay so if ND quiz die we're gonna run this bit of code here that bit of code is going to be a new custom block mate block and it's going to be shake screen and now add in two variables and scroll X and scroll Y like that two parameters now do not run without screen refresh okay keep that block box unticked because we want this to be moving to be shaking the screen when it's in here so we mustn't have it running without screen refresh otherwise it's not going to see it shaking so leave that blank it is keeps maybe my block out of the way okay and we going to add that shake screen to the if condition to say if ends die shake the screen and pass into that our two variables scroll X and scroll Y ok so it's now shaking a screen at the position that we currently are now it's code up a score like scratch shake screen script now let's make this we need a verbal create a variable called eye for this sprite only so it's a little lowercase I and we'll set eye how much we want it to shake so we want this to shake for say a second so 30 so the 30 shakes is a second because it's 30 frames a second a squid game is running out then we need a repeat and we'll repeat for I think that and what we need to do is set the position of scroll X so small X is where the camera is pointing so if we move the camera around rapidly it'll shape the screen so what you can do in here is position it that now we're using the scroll X from the past in parameter here plus and now this is going to be multiplied we're going to do is I because I starts at 30 so 30 pixels times by a random amount of movement and the random map is going to be 4 minus 1 I'm zero to one point zero so any amount between those two values and they're going to do the same scroll wife set to scroll Y to the scroll Y parameter plus I times a random amount so this is going to move it anywhere between minus 30 and 30 because we're timesing by either minus 1 to 1 times by 30 and after we've moved it we're going to broadcast and wait can we Podcast the move level then we're going to change for before the broadcast do a change i buy minus one so as we go through it starts at 30 it goes down and down and down so this amount of shake start big and will get smaller and smaller now we can test with that shake works let's just put a call to shake here and pass in Assam zero by zero so it's in the middle there we go every time I can run that start shaking a lot and then calms down good let's just run that it actually works excellent okay and once it's finished shaking what we really wanted to do is allow us to restart the game so let's move back over here have a look at that what we did let me just remove these scripts across at the moment we've only got one repeat loop here as soon as it ends it shakes the screen and then finishes so we need its loop back and run the game again now our whole loop really should go right to the base start here so let's have a control where ever loop put it around the whole game after it's finished shaking its going to come right back at the top set end knot and opposition to the middle and broadcast set up again which is gonna then start positioning all the zombies now we're gonna be careful there because that's going to create a duplicate of all our zombies because they're zombies we're already on the level so what we need to do is have a tidy up before we will repeat back so it'd be worth having a vent broadcast and wait at the very bottom here just there and we're going to call this reset we broadcast a reset before it goes around again and a reset we need to wipe out all the zombies so let's have a receiver and here when I receive reset and I want to end all the clones so delete this clone just make sure that works so a guy and it resets okay so think we really don't want the game to start as soon as this screen appears what I did in my zombie cube game was have a thing of a bit of text on the screen saying press any key to start and that just gives it a much more professional intro so let's stop this and have a look at how we can do that so in the player sprite here at the moment we set up all of the positioning we broadcast set up and we start the loop so before we start the loop here this is where we want to have the press any key bit so for that let's just move things down a bit so we've got a bit more room scripts always start to balloon a little bit as you'd code these games right so we wanted to have a weight just in here but before we wait we want to make sure everything is drawn on the screen in high position now it's quite easy all we need to do for that it's broadcast more level but let's do in two events and/or a broadcast and wait so just here before we start the game loop you want to broadcast move level that opposition everything on screen right positions and then in here we can have a loop that waits for a key press so if you go down you can have the wait until underneath the move level before we start our game we probably ton till then sensing and let's have a key pressed now you can choose what you put in here you can either have a particular key you want to start the game or you can have any key and I'm going to put in any key for now and as soon as I think it's pressed the game will begin so let's just run that okay so nothing's happening at the moment Prez a key and the game starts now one question is why were none of those cubes visible so we broadcast moved level and that in the zombie script move level now that positions them which sets the is visible or not but it doesn't actually show them that is done in move enemy here so what we need to do is call this move enemy as well as the as the move level so let's add in another broadcast and wait underneath the move level where we call move enemy now let's run that it should there we go that's better so that's the start of the game it's a key and it all begins what we need now is a way of winning the level so next tutorial we're going to just clean up the project and look at how to get a winning game screen with maybe a timer and make fun like that so join me next time thanks for watching this grift match bye now