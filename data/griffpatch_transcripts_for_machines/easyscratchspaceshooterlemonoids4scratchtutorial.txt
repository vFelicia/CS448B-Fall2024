hello fellow lemon scratchers it's been ages since our space shooter project luminoids had an update and i know many of you have since taken it upon yourselves to extend and upgrade this project in very exciting ways wow man that is so awesome i love it like this exciting project potatoed by coolcats80 the powerups work especially well what we are going to focus on in this tutorial will be adding an opening title menu a play button with smooth scene transitions will polish up the sprite layering taking the pain out of keeping everything in the intended layer order our player can finally take damage too ouch and so they'll need their own health bar and then it's game over dude this is all super cool and really helps to polish off the whole game experience so awesome are you ready to take lemonoids to the next level oh boy yes so our last official episode was episode three but since then there have been two tutorials posted on this channel that we will be making use of today amazing health bars and awesome number counters so before you will be able to follow along further do make sure you have completed both of these episodes there's a link to them both in the description under this video now amazing health bars it was a bonus episode of lemonoids so hopefully you'll already have this in your game but i didn't officially add awesome number counters to lemonoids although i know a lot of you already did good job guys you know who you are anyhow today i will show you exactly how to add it in so when you have the completed number counters project make sure to open up your backpack and drop the score sprite right in there all ready to go oh yeah this is going to be great okay guys it's time to open up our part three lemonoid projects with the bonus health bars already in place i hope and before we go any further go to the file menu and make sure to save this as a new copy this is episode four guys let's get scratching so we are going to begin by officially adding the player score with the number counter sprite safely in our backpack this is going to be super easy drag the sprite into the lemonoid project like so and right away if we run the project by clicking the green flag our score pops right up like this brilliant we'll just be wanting to make the score increase when we shoot the lemons but just before that click into the player sprite because it's always important to reset our variables when the game begins if you look in our variables a new variable has appeared named score this is a for all sprites variable that came as part of the number counter sprite we're going to want to set score to zero and just drop it in before the feather game loop begins great our score will start at zero now we can work on our lemon sprite find the define enemy hit script so obviously this gets triggered when an enemy is hit by our laser so we can simply change score by one do that right at the top of this script so every successful hit will give us a point and we can run the project and wow i love how easy that was to get working this drop in number counter is indeed awesome loving it of course we can extend this further for example why not give the player an extra big reward for destroying a big lemon we can do that by duplicating the change score and dropping it in here within the if size is greater than 250 this is where the large lemon gets destroyed so change score by not one but yeah 10. just checking that out yep no problem now perhaps you might find this score a little bit big on the screen it is rather in your face right if you wanted to shrink it down just a touch then click into the score sprite and this 100 number is the size we need to change we can make it any size we like whoa oh let's go for 65. now the only problem with this is that having changed the size of the score the score animation is now rather over exaggerated no problem this too can be easily fixed that's controlled by the number here in the define change costume 2 block so drop that back to something like 90 that is much better yeah i like that score achieved and that brings us nicely on to our next topic gui layering and that's gui or gui it stands for graphical user interface and this includes anything like buttons and text on our screen in this case i'm talking about the score and how it's not floating in front of the player or the lemon health bars and that looks plain wrong all gui elements should be brought right to the front so starting with the score sprite itself when the game starts we create six new clones to represent each digit of our score all these want to come to the front so under the when i starters clone hat block it would make sense to drop in a fresh goto front block and that will ensure each one is brought in front of all the other games sprites seems logical so run the project and take a look yeah the player is now nicely behind the score but hold on did you see that we have not been so lucky with the health bars now the problem here is that health bars themselves are considered gooey elements and as such are also competing to be at the front look click into the health bar sprite and as you might have expected here under their when start as clone blocks they too have a go to front and since these health bars are actually cloning all the time over and over that's the way they work then they are always jumping to the front no matter what problem to solve this puzzle we just have to remember that the only thing we want in front of these health bars are those six score clones so after this health bar clone jumps to the front if we were to immediately shuffle it back by six layers with a go back layers block then that would naturally restore it to behind the scoreclones nice plan but rather than using the number 6 we would be wise to make a new variable to store this number in name it gui layers and make it for all sprites then if we do need more user interface sprites in front we have the power to change this while the game is running so drop the new variable into the go backwards block like so cool we're going to front and then shuffling back behind the gui elements great now to set the number of elements click into the player sprite and under the green flag script we'll set gui layers to just zero as no score sprite has yet to be cloned drop it in right at the top after going to the front okay to ensure our score sprite gets cloned in the right order to update this variable we'll bring in a broadcast block right after setting it to zero and broadcast the new message set up score clones now to hook this up click into the score sprite and we'll replace the when flag clicked with the new when i receive setup score clones event receiver cool that means these won't begin cloning until we are ready for them now to add up the required number of gui clones this is super easy when i start as a clone and move to the front then right away change gui layers by one this will happen once for each score clone and should then add up to six if we run the project now yeah there we go gooey layers is indeed equal to six so the proof will be in the pudding if i can just get a health bar to move over the score yes there we go the health bars are moving back by six layers behind the score clones beautiful and clean managing sprite and clone orderings in scratch is never an easy task but this does the job for us here but if your project needs further help with crazy sprite ordering then make sure to check out my tutorial on sprite layering as that has the most amazing solution for this ever anyhow back to lemonoids our next goal will be to add player health and this is well overdue because what sort of space shooter game is this without it since we already have the health bar sprite we can use this again for our player the health bar sprite has this handy custom block named show health that we can drag out into any sprite we want to endow with a health bar so drag it now to our player sprite then click back into the player sprite and there it is splat it on top of all my other scripts just move it into some free space okay that's safely in place come back to the green flag script because before we can use this show health block we need to define how much health this player actually has we'll need some new variables name the first one max health for this sprite only and click ok now my player will start with a health of 50. so set max health to 50. then to store the current health make another variable named health again for this sprite only of course health must begin fully charged so set health to max health and then move the two blocks to be grouped with the lower set of game initializing setblocks perfect health will now be starting at 50. now to manage collisions and the player's health scroll down to our main game loop this forever loop here you can see we have custom blocks for the different actions we need to take and we now need a new one for checking for the player's collisions and managing the player's health make a new custom block named check player collisions tick to run without screen refresh we can drop this new block into the bottom of our forever loop and that frees up to work on the define block itself nice and simple if this player sprite is touching a lemon sprite then boom we are in trouble change health by and not positive one but negative one this is bad news for us and here we go now we can drag in our very handy show health block but make sure to place it below the if as this wants to be displayed whether we are colliding or not and all we do is fill in the current health and the max health and then in the offset pick a number like negative 30 to show the bar below this sprite oh cool i am excited to see this in action there's not so many backpackable sprites that can be just thrown into a project and be up and running so easily but the score and the health bar sprites they are the real deal yeah this player health bar is working great draining fast while i'm in contact with a lemon but it is a little underwhelming don't you think there's not enough visual feedback that i'm actually getting damaged here we can first go with changing the player to be a white silhouette like we do when the lemons get hurt so set brightness to 100 as soon as the player is touching the lemon then to ensure we don't stay bright forever duplicate the set brightness to before the if check and set it to a brightness of zero if we run that and collide with a lemon then yes we now appear white that's cool but still it's not so inspiring look at the cool effects we get when shooting lemons there's all that nice particle pops how about we make use of these again if you click into the lemon sprite under the enemy hit script you'll find that to spawn a new explosion particle we are adding three numbers to the bang list the first is the type of particle this can be a one or two at present i believe and then we add the x position and y position that the particle should be spawned at nice let's use this in the player sprite so when we have collided with a lemon and after we change health by negative one drop in the three new add to boom blocks keeping them just the same type one and positioned at the sprites x and y positions run the project and let's see how that mixes things up okay now that's better it just needs to be a little more turbulent perhaps we'll mix up the positions of the particles with an addition block and on the right a pick random number between minus 10 and 10. this will shift the position erratically we need two of these one for the exposition pop that back into the adblock and one for the y position let's give it a spin i'm expecting this to look way more cool and yes i'm not disappointed what do you think the icing on the cake will be to get some sound in here now hopefully you still have the all sound sprite if not then the sounds were also used in the lemon sprite the ones i'm after are called explosion 2 and explosion 18. if you'd be so kind as to drag them into the player sprite then we can continue start sound explosion 2 and we drop it in to start playing as soon as we know we have made a collision here we go yeah sweet and now i know we are losing health for sure good job so wow we have lost a lot of health our health variable is showing negative 233 that sure is a good indicator that we should have exploded a long time ago and that poses an interesting new problem here scrolling up to our main game loop you can see that this is coded to continue forever well no longer bring in a repeat until block this game loop will stop as soon as the player's health drops below 1. health is less than 1. now swap the script from the forever loop into the new repeat loop and goodbye forever hello repeat great so now when our health is low enough the game loop will end and we'll arrive down here and we are going to want to do something quite dramatic a really cool end of game player explosion right so we begin by hiding the player sprite next up we're going to animate a number of explosions so use a repeat loop repeating perhaps seven times over then we'll start playing the explosion 18 sound that's the big one and while this happens let's spawn some new explosion particles okay find those add to bang list blocks here we go duplicate these up here under the start sound but switch the initial add 1 4 and add 2 as we want the larger god ray explosions this time around oh yeah perhaps we shouldn't be adding this random turbulence to the position this time round either switch back to just the x and y positions as they were and one final effect the camera shake to get this all we need to do is broadcast shake love it then to give us time to appreciate all the work we've done plop in a weight block at the last block in the repeat for 0.1 seconds that's one tenth of a second do you want to see this in action i sure do so let's get our health down and boom boom boom this is seriously more like it those lemons seriously kick butt and we are a goner to continue we need to press the green flag and everything starts off again now this is a legitimate way to restart a scratch project i've seen it done a million times but it would be way cooler if we have a proper ending and a way to restart the game without restarting the entire project so how about once the game is ended we start by fading the gameplay to black this can be triggered after the repeat loop has ended but first a little pause using a wait one second and then broadcast the new message splash screen this will fade us to black and then bring up the splash screen that is the title screen to fade to black we need to make a fresh new sprite name it curtain this is often the name we give to a layer that will cover the entire screen like the curtain of a theater we need a fully black rectangle so switch to bitmap mode and use the fill tool to blacken out the entire canvas just so the coding of this is quite straightforward when flag clicked hide the curtain but when we receive the splash screen event we want to fade the black curtain in in front of all the other sprites begin by making sure it is covering the entire stage using a go to x0 and y0 next ensure it begins fully transparent by setting its ghost effect to 100 fully ghosted out of course the curtain must be in front of all the other sprites and clones so go to front layer but what about all those gooey layers sprites huh does the curtain want to be in front of the score no it does not we want to continue to see our score after the game has ended that's important as the player will want to know how well they did so go backwards by gooey layers as before but we don't quite stop there this black curtain itself needs to be counted as a gooey element so that the health bars don't get moved in front of it too so right after moving the sprite to the correct layer we then change gui layers by one to include this curtain sprite too finally make sure to show the curtain but the curtain is still fully ghosted we need to fade it gradually into view drag in a repeat block and i find a repeat of 20 is a good amount of time for these kinds of transitional animations changing ghost effect by and now to fade our black curtain all the way to solid black we'd want to change ghost by negative 5 however instead i'm going to opt to change it only by negative two this will have the effect of only partially darkening the screen instead testing that quickly now and here comes the darkening yes did you see that lemons and their health bars are both darkened as they are safely behind our dark curtain thanks to our gooey layers variable but importantly the score is still perfectly bright in the foreground nice work right i hope you are feeling artistic next up we need to get creative to design our awesome title screens for our games it's going to look amazing on this darkened background i'm sure we can start by duplicating the curtain sprite as that has the same basic structure and name it logo jump right into the costume editor and make a fresh costume for our cool design the old costume can be deleted the basis for our logo will of course be the words lemonoids but i leave to you the fun job of designing your logo just the way you want it and there i have my logo i can't wait to see yours too i love scrolling down the project studio and checking out all the title screens the creativity of you guys just blows me away it's so exciting okay back to the code so this splash screen event will occur at the same time as our black curtain fade but i really want the logo to fade in just a little bit later so perhaps wait half a second 0.5 before doing anything at all next up look here yes we want to bring the logo to the front but unlike the curtain it should stay in front so chuck away the move back block but do keep the change gui layers by one as this logo is kept in front of the health bars i'm just going to push the logo a tiny bit higher on the screen to make way for the play game button below and lastly the fading in repeat loop at the bottom needs a tweak we want to fully fade our logo in so we must change the ghost effect by negative five five twenties is a hundred a full fade yes yes yes it's time to see our work in its full glory smash the green flag and proceed to lose all our health boom here comes the fade and in comes the logo oh man that looks great and see how having the black outline on our text makes it show up super cool against the faded lemons i love that so much and of course our score is still prominent which is perfect when you want to check out how well you did and then then we'll want to let the player click to play again but for this we will need a new way to begin our game other than just triggering off the green flag let's take a look at the player sprite and find the when green flag clicked script yeah this is where it all begins but now rather than launching straight into our game we might as well trigger the splash screen that would be way cooler okay so we need to identify what should run at startup and what runs later once the play button is clicked keep these top blocks to set up the score clones but everything below can be separated off for later we don't want the player visible on the title screen so make sure to hide them here then to trigger the title screen all we need is the broadcast splash screen just like we do when the game ends hey that basically should do the job smash the green flag and see how the game starts up of course we begin with no lemons so we don't see the fade effect but it's all nice and clean looking and what's also cool is that the lemon scripts do actually kick off as if we were playing in the background and that means the lemons start to drift into view i really like that it makes the title screen feel more dynamic and gives you a feel for the game well great all we need now is the start game button the main game loop scripts are still floating around without a hat block here let's attach a new when i receive event hat to that stack and give it a new event name of new game super we'll use this later because that sets us up perfectly to add a cool start game or play button whatever you want to call yours so again we'll duplicate the last sprite we made the logo sprite and name it play now this button will be positioned lower down like around here i think so in the costume editor start a new costume i want to have the button use the same color as my lemonoids spaceship so select the part of the costume of that color and then come back to our new sprite and the color swatches retain the same colors useful so i'll draw a nice rectangle for the button sizing and snapping it to the center of the canvas add the text label play thickening it up and adding a nice shadow effect and lastly i'll give the button a border and then use the shape tool to add straight line points to each side great with that made let's check out the code as with the logo let's delay this play button even longer perhaps a full second after the splash screen event the position is about right on screen so update the go to with a negative 100 for the y all the other scripts will work okay so let's run that to see how it looks so far yeah so the title comes first and then the play button quickly follows and that looks good but we can make it better still by animating it to entice clicks so start by switching this repeat loop for a forever loop so we want the button to gradually grow and shrink in size so bring in a set size block the start size will be a hundred percent so we use an addition block with a hundred on the left then on the right add a multiply block we'll pulsate bigger and smaller by three percent so enter that in here but the actual pulsating is given by the signoff operator in the right of the sign we need a timer but scratch's timer is too slow by default so multiply timer by 180 within the sign block that's it drop it into the size block remember we have the original size 100 the throb size 3 and the throb speed 180 simple enough and a very useful little scratch script let's see that in action shall we yeah can you see the throb it's a good speed it's a little bit too subtle we can play around with the throb's size until we're happy and yes i'm liking 10 much better finally how about a little hover feedback when the mouse is over the button we can do that with an ifelse block in the same forever loop checking if the button is touching the mouse pointer if it is touching then the mouse is over the button so set the button's brightness to 15. otherwise we want to make sure it's set back to the default brightness of zero testing again and there you go a very simple mouse over effect nice so all that remains is to make it clickable in some free space drag in a when this sprite clicked block you could drop in a cool sound here if you liked but i don't have one to hand so i'm just going to make it flash set brightness effect to 100 pow white out see now i'd like to fade this back out again but we have to be careful because this other forever loop in the same sprite is still running after we click and that will undo the brightness effect right away so to make sure this new click script runs uninterrupted we can use a stop other scripts in sprite that will stop this forever loop script but leave the sprite clicked event running so drop in a repeat 10 block and change brightness effect by negative 10. to bring it back down quickly to zero if i click the block stack you can see that in action and that gives the button a nice quick flash effect perfect next as the game begins we'll need to fade out the title screen elements so another repeat loop this time for a count of 20 and instead of changing the brightness we change ghost by five to fade the whole thing out i can click it now to show you that working but once faded out i need to run the project see it come back again cool this is nice next up we need to reset our game ready to play once more but we don't want to just delete all the onscreen lemons that wouldn't look so great so instead let's take our black curtain and use it to smoothly fade the lemons away to nothing then at that point we'll be free to delete them and reset the game we'll trigger the reset using a broadcast block just after the when sprite clicked event is triggered and we'll name it reset game now click back into the curtain sprite and we'll need a matching when i receive reset game event receiver we're going to now fade to fully black so copy the repeat loop that previously faded us partway and this time we change the amount to negative 5 for a full fade to black great run the project we are looking for the lemons to now fully fade to black so here goes wow yeah they certainly did and really quite fast you might like to make that slower but before we cast judgement let's also get the logo fading out too click into the logo sprite when i receive reset game let's just wait a moment 0.2 seconds perhaps and then as a safeguard drop in a stop other scripts in sprite just in case the other repeat loop was still running now we'll have our normal repeat 20. with a change ghost effect by 5 positive 5 because we are now ghosting this logo out rather than fading a black in here let me click the script so that you can see it fading away yeah there you go cool so once the logo has faded away there's no point keeping it in front of all the other layers so how about we go to the back layer and equally then change gooey layers by negative one yep one less gui element to worry about we have to do this because otherwise when the splash screen event runs later on we'd be adding to the gui layers again and that would not balance out but it will now while we are at this then let's do the same with the play button sprite back in the when sprite clicked script after it's faded out send it to the back go to back layer and then change gui layers by negative one but here's something new we then want to trigger our game to finally begin once more and luckily we already added an event receiver for this so broadcast yes that was it new game woohoo we are nearly there at this point the main game loop will begin but the black curtain is still hiding the entire game behind its eternal darkness and our lemon clones are still hanging around and need resetting let's sort that first in the lemon sprite drop in a when i receive new game this triggers after the curtain is fully black and the lemons are hidden the perfect time to just delete all those lemon clones and since all the clones receive this event all the clones will delete themselves all except the original lemon sprite which is the hidden lemon cloning factory sprite that one continues to spawn new lemons and the new game continues splendid but the black curtain it's still obscuring everything click into the curtain sprite and we'll fade the curtain away to reveal our player's ship as the game starts up when i receive new game repeat 20 and change ghost by not negative 5 but positive five that's right we are making the black curtain more transparent until it's completely faded away ah so this curtain was one of the gooey layers so now it's gone we'll go to back and change gui layers by minus one ah you know i think that is everything i can hardly believe it it's time to give it a whirl smash the green flag and let's check out that play button in action so once a lemon shows up i'll click the play button and we'll watch for the fade out and the fade back in to a new game perfect and that worked exactly as we wanted the next thing we need to test is that once we die the score and layers all continue to work consistently gotta say this is looking great what do you think let's play another game the fades are looking sweet the score resets and yeah very good again it looks like our clones are fully under control as reported by scratch addons at the top here always resetting to seven or eight clones as the game begins cool now did you notice that as the game starts up we show the score of zero we could perhaps retain a high score using cloud data or if you prefer to just hide the initial score then in the player sprite set score to the empty value before setting up the score clones and there the score is hidden so it all just depends on what you prefer doesn't it and that is it our lemonade is actually looking like a real game so as i talk you out you can finally enjoy watching me take on lemonoids for real and see how good a score i can get this is really the first time i've ever played it for real so it will be interesting i do feel i'm pretty good at dodging these lemons by now well i hope you enjoyed this video if you did then please smash that like button and if you haven't already then do subscribe to the channel and click the notify me button so as not to miss my next exciting episode as always there's a link to the scratch studio in the description under the video so get scratching and submit those projects so we can all see what you've achieved i can't wait there's so much potential to take this game in awesome directions with powerups timers bosses other types of enemies wow come on guys let's see what you can do so thank you for watching have a most awesome week ahead and scratch on guys you