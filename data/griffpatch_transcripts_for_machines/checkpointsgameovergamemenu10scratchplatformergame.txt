hello fellow scratchers in the now legendary words of bennett foddy starting over is harder than starting up i'm griff patch and this is episode 10 of our classic platformer series and yeah it's true having our player respawn from the beginning after every mistake is too much like hard work you've been filling my inbox with requests to add checkpoints to our game so we will tackle that today as well as this we'll give the player a fixed number of lives and build a game over screen and as you might have noticed we're gonna round it all off with a delightful title screen to boot yeah this game is really coming together so are you ready for this i know i am guys let's get scratching we'll begin where we left off in episode 9. just make sure to save it as a new copy naming it episode 10. now forgive me when i recorded this video i forgot to rename the project so don't panic when you see it titled episode 9 for the rest of this video sorry guys it's ok this really is episode 10. so to create waypoints or checkpoints in our game we need to consider how to set the initial spawn of the player in the player sprite scroll down to the define reset and begin level custom block you'll find we have hard coded the player's spawn location here in this begin scene block in my game it always spawns us in scene 1 at an xy of 125 by 55. this happens both when the game starts and after we lose a life to allow us to change where we respawn back to we'll need to remove these socalled hardcoded values and replace them with variables that we can update as and when the new checkpoints are reached so we'll make three new variables the first named spawn x check it for all sprites then spawn y again for all sprites and lastly spawn scene and we mustn't forget that one also for all sprites great so to begin the game we set these to the same values we used in the begin scene block set spawn scene to 1 set spawn x to negative 1 to 5 and set spawn y to 55. it should be no surprise then that we can slot these variables into the begin scene block to continue spawning us as we did before we just need to ensure these variables are set only once when the game starts so move them up into the when green flag clicked script underneath the broadcast setup will be perfect it's worth quickly testing our platformer is still working there should be no change great we are still spawning on the first screen excellent but now we have the power to change these spoil point variables at will so how about we introduce a few checkpoints along our path we could add a new sprite for the checkpoints but since we've already got a very cool collectible system why don't we just reuse it for checkpoints too click into the oh the apple sprite it got that name since we brought it in from the scratch library but we use it for the apples and keys and whatever else we need so anyway open the costume editor and let's pick a new costume for our checkpoint i think scratch has a ah yes scratch is green flag so funny we'll use that just click to make it visible on the stage it's a little bit oversized but at least it makes it easy for you guys to see in the video i'm just going to buff up this costume a little bit right now to make things clearer i hope you don't mind if we rename the sprite as collectible better so placing a checkpoint on the level should be quite straightforward we do it the same way as placing the other items in the game we play the game until we find the point that we want to place the checkpoint just here we'll be good next we click to make the collectible visible oh that's the one costume hold on switch to the green flag costume yep then we can position it on the stage like so then under the when i receive setup script we can duplicate one of the existing place blocks the costume name we want is i'll just copy it from the costume itself using the clipboard to ensure it's correct green flag capital g and f now the scene that's scene number two the position x and y is given by the x and y of the sprite on the stage here and yay we can run the project to test that out here we go will it be there yes our checkpoint flag is just where we placed it excellent so easy go ahead and collect it now when i lose a life we want to spawn back to the last touched checkpoint for that to happen we now need to update those spawn variables when the flag is collected now check this out if we make the collected list visible we can see clearly that our project has registered the green flag as an object we can carry around that's so cool but not what we want in the collectible sprite find the when i start as clone script we have a check for collecting apples but as you can see every other object gets added to the collectible list below we need to identify when we collected a checkpoint so using a new if else compare the sprite's costume name with the words green flag for speed i'll reuse the same start sound wand but i'm sure you can find a better one and now all we want to do is set the spawn point variables set spawn scene to the scene hash variable that's the current scene and then set spawn x now we do the same for spawn y now we'll use the player's current position this is obtained through the thing of thing block in the sensing category we need to access the player sprite and get their x position cool now we do the same for spawn y it just occurred to me though that rather than going to this effort we might prefer to set spawn x and y just to this sprite's x and y position feel free to choose often there are many means to an end now we want to slot this if else into the main script here so pull the existing lscript into the new else and push the whole thing back where that came from like so right shall we give that a test first test the original respawn yep we respawned back at the start next up collect the first checkpoint and now yeah yes that's perfect we respawn at the first checkpoint it's a good idea to confirm this also works when we lose a life on a different scene entirely yeah we've got it that's great dancing a little jig yeah so what i think would be good it's just to add a second waypoint just to confirm that there will be no issue and we'll put it on the right side of the locked door just here so taking the same steps again in the setup script of the collectible sprite we can duplicate our place green flag block this time it's for scene 4 so fill that in make the sprite visible position it and enter the x and y mine are 138 and 57 and that should be it let's test here we are i can see the checkpoint just touch it and then let's see does it work you bet it does excellent that makes me super happy and i bet it will do wonders for your games because now you can afford to make your levels bigger and more exciting than ever oh yeah but hold on all this talk of losing lives and respawning but seriously just how many lives have i lost should we allow the player to just keep losing lives forever and no what we need is the concept of limited lives and then game over so no problem we need to keep track of how many lives our player has clicking to the player sprite and create a new variable we'll name it lives for all sprites so start off by setting lives to three have you ever wondered why three lives is the standard number of lives who knows but hey who are we to break from convention pop the set lives under the green flag script so it gets set the same time as the initial spawn variables do you remember where in our code we handled losing a life it's in the when i receive lose life event receiver this project is getting big enough now that it helps to have scratch addons installed to locate these events so after we've played the sound and faded the player out we should be thinking of reducing the number of lives we have left change lives by negative one we do this as the last thing before the level restarts with the reset and begin block a great time to test that the lives are working check to see we start with three lives yup and that losing a life takes us down to two lives yes and again now one life and finally aha now we are down to zero lives at this point the game should end but right now we are still responding so back to the code surround the reset and begin block with an if else block we only want to restart the game when lives is greater than zero that is we still have some lives left however if we are out of lives then it's game over dudes so to handle this we'll introduce a broadcast with a new message of game over great so this broadcast wants to cause the words game over to appear on the screen the best way to do this is with a brand new sprite i'll name it splash screen because we'll reuse it for any large in your face messages or splash screens later on now the first costume let's name it game over i'll leave it up to you to draw these words in any way you like mine will be nice and big and i'm adding the text twice layering one on top of the other with the background one having a thick border to give that text a clear outline that looks pretty cool we just need to trigger it off the game over event start with a when flag clicked to hide the game over message when the game starts and then when i receive game over we'll just quickly position the message with a go to xy of zero zero switch to the game over costume just in case and go to front layer to bring the sprite to the foreground and then finally we can show it and it's testing time bear with me as i just lose three precious lives two one zero fantastic the game has ended and we know it this adds much more playability to our game and suddenly we have the risk of losing all our progress cool right so what happens next our eager players are now hooked and want to try again do we force them to click the green flag oh no no rude we should add in a nice big button inviting them to play again okay we're still in the splash screen code after we've shown the game over costume we want another broadcast block this time with a new message of and this is a little forward thinking main menu our main menu will include the button to restart the game so this will serve as well for this we'll need a new sprite and we'll name it main menu the first costume we'll name play button starting with some simple text play now i need a button around the text a rectangle no let me show you a trick for drawing rounded buttons start by drawing a circle hold shift while drawing it to keep it perfectly circular now zoom in and switch to the shaping tool you can see the circle has four points around its edge by default still with the shaping tool carefully click either side of the first point to create two new points then click the middle one and delete it we can do the same with the bottom point now here's the fun part now i just need to move the text away from our circle to do this okay so with the shaping tool again click the circle to make sure the points are visible and we're going to drag a selection box from the top center of the circle to surround the three rightmost points of the circle now watch this with the three points selected i can drag any one point and all three points will move together letting me stretch the circle out in a really cool way but if while dragging i hold shift i can keep it nice and straight and yeah this is looking like a cool button right so i'll just snap it to the center of the canvas and plonk my text in the middle excellent we are on let's code the game over sprite has broadcast the main menu event so add in a when i receive block and trigger it off the main menu event just add a tiny delay a weight of 0.1 seconds and now we can follow this by a go to front layer block and be sure that it will move us right the very front of whatever might have come before it then simply show the button great we should position it on the stage somewhere down here to be under the game over message then drop in a go to xy we can even it up by setting the x to zero gosh we're almost there we should just ensure this button is not visible when the project starts when flag clicked hide splendid run the project losing my lives and that looks okay the button is perhaps a little low down hold on just fix that better before we make this button clickable let's spruce things up a little bit more with some hovering effects it's nice to see the button react to my mouse moving over it drop in a forever loop then we will continually check using an if else block whether the button is touching the mouse pointer when it is we want the button to grow so change size by we want the button to grow until it is sized at 110 we can work out how much it needs to grow to get there and then change the size by a small amount of that each frame to animate it getting bigger use a multiply and on the right a subtract to work out the difference in size we place the current size on the right and then the size we want on the left that's 110. that tells us how much we need to grow to get to the full 110 to give us a fraction of that amount we multiply by say 0.2 that's onefifth of the difference each time around the loop a quick test by clicking on the script and then watch me hover over the button nice it grew very smooth now we just need it to shrink back down again when we leave it alone duplicate the change script into the else block and we want a target size of 100 to return the button to its regular size there we go now we can play with this button all we like it's great you know what would be super cool try setting the size to just 10 here when we first show the sprite now watch as i click the main menu script to run it how cool the button now has an entrance zoom effect for free great so let's make this button clickable easiest way is to trigger off a when this sprite clicked hat block the actions we need to trigger are first to hide this big button and then we need to broadcast to restart the game we don't have anything for this yet so a new message called start game is a good choice so how do we link this to the game startup code click into the player sprite and find the when green flag clicked script here we are this is where the game begins and everything is set in motion but now we want to be able to restart it from our own event with a when i receive start game receiver and we'll simply move the green flag scripts under this new receiver instead now we mustn't forget this green flag event though we might use a broadcast start game to move straight into the game as before after the green flag is clicked but now that we are delving into main menus it would be really cool if we added a proper title screen to our game so broadcast main menu this means when we click the green flag up pops our play button yay that's so cool and look if we click it the game begins super just test to make sure that the play button reappears when we lose all our lives yep game over and the play button returns and this pattern should repeat over and oh hold on we have a problem the game over message is still visible when we restart the game shocking but easy to fix head over to the splash screen sprite we just need a when i receive start game hat block and we hide this sprite cool back to business i think you'll agree that we need to work on the initial screen of our game a play button alone is not the title screen we were hoping for i'm planning to reuse the splash screen sprite to show her splash screen of course gosh you might be forgiven for thinking that i plan this in advance so still within the splash screen sprite make a new costume naming it main menu or perhaps title screen would have been better but no matter i'll fill the whole screen with a filled rectangle as a background and then quickly design a title screen for my game don't forget to leave space for the play button at the bottom of course you guys can arrange this any way you like to make it look great with your own game designs okay here we go what do you think not too shabby so back to the code we need to make this title screen visible as the game starts up we'll duplicate the game over scripts here just be careful to remove the broadcast main menu from the bottom we're going to trigger this from the green flag script here so it will only appear when the game starts remove the hide block and drag the scripts together we just need to replace the game over costume with our main menu costume fantastic that's done so smash the green flag so we can test this out and this looks promising and the button sits well on the title page click the play button to start the game this is all working great continue testing for the game over screen brilliant but watch out we have a horrible bug lurking just out of sight because i have the scratch addons web browser extension installed i can see the number of clones that have been created by this project and it's reading how many 99 oh no that should not be anything like that high run the project again with the green flag there i start with just nine clones at this point so when does this all go wrong well all is fine until we are on the game over screen and then click the play button boom 99 clones that is not good the only clones we are creating in our project are the collectibles so come into the collectibles sprite here is the setup event receiver it creates all the collectible clones for the level so what's wrong with this well nothing for the first time the project runs but the second time around after the game over screen is displayed that is where things are getting problematic the reason is that the event receiver to set up clones is received by all sprites and clones of sprites within this receiver and the second time we play the game we already have lots of collectible clones left over each clone will therefore receive this setup event and each one will create a whole level more of collectibles wow overload so to fix this we need to make sure to clear down all of these clones before the game starts up again bring in a when i receive block right at the top and we'll add a new message named reset game and all we need to do is delete this clone when this is broadcast all the clones will go away we should broadcast it from the player sprite under the when i receive start game script bring in a broadcast and wait block triggering the reset game event and we insert this before the setup broadcast that sounds good to me shall we test it out just a second right we're back on the game over screen now with nine clones you may have more or less depending on how many collectibles you've cloned and now hold on to your mice we click the play button phew we did it still just nine clones what a relief disaster averted cloning bugs like that are really common and it's good to understand why they happen yeah clones creating clones always a danger when combined with broadcasts but wow hasn't this episode been another transformative one we're going to have such polished games appearing in this week's studio i'm telling you i'm so excited to see how your games develop comment below to let me know what makes your project extra special so awesome and i'm afraid that brings us to the end of another episode if you've enjoyed it then smash the like button right away and wherever possible do subscribe to the channel that way youtube will alert you when my next video lands and you don't want to miss them do you no i should think not and also if you want to support the channel further you have the option of joining our channel membership there's plenty of perks to be had like priority replies to comments early access to videos and also for educators and top supporters you can even get downloads of the projects themselves so until next time have a great week ahead thanks for watching and scratch on guys you