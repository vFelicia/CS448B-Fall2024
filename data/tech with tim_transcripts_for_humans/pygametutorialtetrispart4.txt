With timestamps:

00:00 - hey guys and welcome to the fourth video
00:02 - in my PI game Tetris series in this
00:05 - video I'm gonna be showing you guys a
00:07 - few different things so in the last
00:09 - video I mentioned I was gonna be doing
00:10 - more cosmetic stuff so that is true in
00:12 - this video I'm going to be showing you
00:13 - how to do the main menu screen how to
00:15 - draw text in the middle the screen how
00:17 - to make things look a little bit better
00:18 - and I'm also gonna be adding a little
00:20 - bit of functionality to the game in
00:21 - terms of making the piece fall faster as
00:25 - it moves or as time moves forward so
00:28 - obviously we want the game to get more
00:29 - difficult as time goes on so what we're
00:32 - gonna do to do that is increase the
00:33 - speed at which the piece falls down the
00:36 - screen it's pretty easy I'll show you
00:37 - how to do that I'm going to be adding
00:38 - score and we're gonna be displaying that
00:40 - score and that's probably about it for
00:42 - this game so the first thing I want to
00:45 - show you is how to add the piece falling
00:48 - faster so to do this we need to create a
00:50 - variable in our main here and I'm just
00:52 - gonna make this equal to what are we
00:55 - going to say fall all right let's say
00:57 - level underscore time okay and this is
01:01 - gonna just represent how much time has
01:04 - passed and it's gonna be similar to full
01:05 - time and level is just because as we
01:07 - increase speed like the level is going
01:09 - up kind of whatever okay so say level
01:11 - time plus equals clock dot get
01:14 - underscore wrong time and we're gonna do
01:16 - exactly what we did with making the
01:19 - piece move down the screen except we're
01:21 - just gonna change the speed at which it
01:22 - moves down the screen so what I'm gonna
01:24 - do here is when I make another if
01:26 - statement I'm just simply going to say
01:27 - if level underscore time divided by a
01:31 - thousand is greater than and then you
01:32 - can put in whatever time you want here
01:34 - now I'm gonna do five seconds so every
01:36 - five seconds we increase the speed okay
01:39 - and then we can decide what we want to
01:41 - increase the speed by so I'm gonna say a
01:43 - level underscore time we need to first
01:45 - reset this back to zero so that we
01:46 - continue to do this and then what I'm
01:48 - gonna actually do here is gonna say if
01:51 - level underscore time is greater than
01:55 - and we want to put like a terminal
01:57 - velocity here so at what speed do we
01:59 - stop increasing the time because we
02:02 - obviously we can't get to a negative
02:03 - false speed otherwise you're just gonna
02:05 - instantly fall and we don't want it to
02:07 - get too fast that the game's unplayable
02:08 - so we need to pick a speed now a good
02:10 - speed that I kind of found was 0.12
02:13 - because anything faster than that is
02:15 - like pretty fast but I mean you guys can
02:17 - play with that and change that around
02:19 - it's really easy number just to fix
02:20 - right and then if we're greater than
02:22 - that we're just simply gonna subtract a
02:24 - value from level underscore time now
02:28 - this value the magnitude to the size of
02:30 - this value that you're subtracting is
02:31 - gonna determine like how quickly you
02:34 - increase the speed as well as obviously
02:36 - at the time so I put originally zero
02:39 - point zero one and I mean depending on
02:41 - how long it takes you to play a Tetris
02:43 - game this is pretty fast because that
02:45 - means after 50 seconds you're already
02:47 - gonna be down to zero point one seven
02:50 - which is very quick and almost at
02:51 - terminal velocity so I recommend you do
02:53 - 0.005 that means it'll take about a
02:56 - minute and 40 seconds before you're
02:59 - gonna be close to reaching this terminal
03:00 - velocity which might be good if you're
03:02 - playing Tetris for a decent amount of
03:03 - time okay so you guys can play with
03:05 - those numbers but that is going to move
03:06 - it down faster I would show you but it's
03:09 - gonna take like a decent amount of time
03:10 - for to continue moving faster to just
03:13 - play with that okay just trust me all
03:15 - right the next thing we want to do is
03:17 - add score so we need to first create a
03:19 - score variable and I'm gonna say score
03:21 - it's equal to zero like that and
03:23 - incrementing score is pretty simple I'm
03:25 - gonna say and you guys can make this
03:27 - whatever you want whenever we clear a
03:28 - row I'm gonna add ten to our score
03:30 - because you had ten pieces or ten cubes
03:33 - or whatever that you cleared okay so
03:35 - actually the way that we need to do this
03:37 - is we're going to return a value from
03:39 - clear rows which is going to be equal to
03:40 - score now I'm gonna go to clear rows and
03:45 - in here I'm simply just gonna return i
03:47 - NC okay and I NC is the increment so how
03:52 - many rows that we actually ended up
03:54 - clearing so if we clear more than one
03:57 - row we're gonna get a value of two we
03:58 - can multiply that by whatever our score
04:00 - increments gonna be and then yeah we can
04:03 - just add that to the score so this is
04:05 - pretty straightforward if we go to clear
04:07 - rows we're gonna say score is equal to
04:10 - clear rows multiplied by ten all right
04:15 - or actually not equal to we're gonna
04:17 - have to say plus equal to clear rows
04:19 - plus ten now what we need to do is we
04:22 - need to display this score on the screen
04:24 - somewhere the user can see then we're
04:26 - actually going to save this score as
04:27 - well
04:27 - when we lose the game okay so the way
04:30 - that we can display this is we're gonna
04:32 - have to do it in draw window but we're
04:34 - gonna have to pass this score to draw
04:35 - window so after our grid object we're
04:37 - gonna pass score like that and we're
04:39 - gonna go to draw window and we're simply
04:42 - going to add another parameter here
04:44 - score like that now I'm just going to
04:46 - set it equal to zero as a default
04:48 - parameter so in case we call it
04:49 - somewhere else and we forget to add that
04:51 - score that's fine we don't need that so
04:53 - what I'm gonna do now is I'm actually
04:55 - gonna go to draw next shape and at draw
04:57 - next shape you can see if I run the
04:59 - program quickly here it shows us a
05:01 - little text object okay now I want to
05:04 - get this similar text object so I'm just
05:06 - gonna copy this fall into the label SX
05:09 - sy and I'm just gonna bring it down here
05:11 - into draw window now it doesn't really
05:13 - matter where you draw it I'm just gonna
05:14 - plop it in the middle here and obviously
05:16 - I'm going to change this from next shape
05:17 - to be score now we need to obviously
05:20 - display what the actual score is so we
05:22 - can just say plus str score like that
05:26 - and that should be displaying for us
05:28 - okay so now we have SX and sy which is
05:31 - giving us the play area I believe or no
05:34 - this is actually the position in which
05:36 - we wanted to draw it okay so what I'm
05:38 - gonna do is I'm gonna say win dot blitz
05:41 - or is it surface stir this dog blitz our
05:45 - text object which is the label and then
05:48 - where do we want to draw it to and draw
05:49 - SX sy now I'm just gonna have a look up
05:52 - here to see where I did it here so SX
05:53 - plus 10 sy minus 30 so what I might want
05:56 - to do is we can add plus time to this so
06:00 - it's aligned but then we're out gonna
06:01 - subtract we're actually add to the Y so
06:04 - it's lower so I'm gonna add let's say
06:06 - like 80 like that so let's test this out
06:09 - and see if it's working score so it's
06:11 - not low enough so we'll add this I do
06:13 - 120 and see what how where we're getting
06:16 - enough scores again although enough to
06:19 - go 160 and again you guys can play with
06:22 - these our score equals zero perfect and
06:23 - then maybe I'll just add 10 more pixels
06:26 - here so it's more in the center and you
06:29 - know whatever that's good enough for me
06:30 - okay good
06:32 - so that is working well so we've got the
06:34 - score and we were moving down faster now
06:36 - what else do we need to do what we need
06:37 - to do now is work in main
06:39 - and you and to figure out what happens
06:40 - when we actually lose the game so we
06:42 - have this check lost and all this simply
06:44 - does is just quit the game for us when
06:46 - that happens but we want to do something
06:48 - else when we lose and we want to display
06:50 - something to the screen so actually
06:51 - before I go and main menu I'm gonna go
06:53 - up here to a function that I told you
06:56 - guys I wanted to hear that that I was
06:58 - going to finish which is draw a text in
07:00 - middle now this is gonna take a service
07:02 - text and what else do we want say size
07:06 - and color okay so surface text size
07:10 - color this way you can use this in
07:12 - another function or oh sorry and another
07:14 - program and you can use them multiple
07:15 - times with give every text size and
07:16 - color you want so we're gonna set up a
07:18 - font train say font equals PI game dark
07:23 - font dot sys fonts by now you probably
07:25 - know this I'm just gonna pick Comic Sans
07:28 - we're gonna make it equal to size and
07:31 - bold is gonna be equal to true now you
07:34 - can make this false if you want or just
07:36 - omit it completely and then it won't
07:37 - make it bold pretty straightforward make
07:40 - a label label is equal to again font
07:43 - render and then we're gonna say text one
07:47 - for anti-aliasing and color like this
07:51 - okay now we'll just simply draw this in
07:53 - the middle of the screen so to do this
07:55 - will say surface double its label comma
07:59 - and now we're gonna do a little bit of
08:01 - math here so talk underscore left under
08:04 - short X plus play underscore width
08:07 - divided by 2 not three - and we're gonna
08:12 - get the label width and the way we do
08:13 - this I don't believe I've actually done
08:15 - this yet is get underscore width I think
08:18 - I'm just gonna check yeah get width and
08:19 - then the reason I have this in brackets
08:21 - because I'm gonna divide this by two as
08:22 - well and this will essentially give us
08:24 - the middle position where we should be
08:26 - drawing in terms of x-coordinate okay so
08:29 - now I'm gonna give top underscore left y
08:31 - plus play underscore height divided by
08:37 - two okay and now same thing - label dot
08:41 - get underscore height
08:44 - in brackets and / - I don't know why
08:49 - can't tab over here okay / - and that
08:53 - should hopefully be working for us okay
08:56 - so we can test that I'm just a second so
08:58 - we've got this it's bleeding now
08:59 - whatever text we want to the screen so
09:01 - this makes it really easy for us to draw
09:02 - anything to the middle of the screen so
09:04 - the first thing I want to draw to the
09:06 - middle of screen is like a you lost
09:08 - message so when it says you've lost what
09:10 - I want to do is draw obviously you lost
09:12 - and tell them that so let's say draw
09:15 - text middle and then what do we want to
09:19 - draw well let's simply draw what surface
09:22 - first actually that we need so we'll say
09:23 - win and then we're going to pass it text
09:28 - and in this case we're gonna say you
09:30 - lost exclamation point
09:32 - sighs let's go for E and color let's go
09:37 - wait and you obviously you guys can play
09:40 - around with that now after I draw that
09:42 - and I display the screen or update this
09:45 - screen by game display update just cuz
09:47 - we haven't called the window yet draw
09:49 - window when we do this then what we're
09:52 - gonna do is we're just gonna delay so I
09:53 - say pygame dot time delay and I'm just
09:58 - gonna delay one and a half seconds just
09:59 - so once this comes up the user has a
10:02 - second to look at it because then we're
10:03 - gonna move back into our main menu
10:05 - screen which you'll see okay
10:07 - so I'm just gonna fast forward this
10:10 - until I lose and then you guys can see
10:11 - that it's working
10:15 - and there we go so we got you lost and
10:18 - then it's late and then just quit
10:19 - because I have this PI game dot display
10:21 - dot quit here okay so now we're gonna
10:23 - move to is main menu everything else is
10:25 - working I told you guys it's not like
10:27 - super difficult a lot of this stuff and
10:28 - it main menu what we're gonna do now is
10:30 - we're just gonna make it pop up whenever
10:32 - you start the game and whenever you lose
10:33 - and just gonna say hit any key to like
10:37 - move forward to continue okay so I'm
10:39 - just gonna set up another game loop in
10:41 - here so we're gonna say run it was true
10:44 - well run and this is gonna be really
10:46 - similar to the loop we've done above it
10:48 - just cept just a lot shorter we're and
10:50 - we're gonna just draw in here without
10:52 - using a different function just because
10:53 - we're not drawing very much so it's not
10:55 - important that we wouldn't call it like
10:57 - update the screen with a defined
10:58 - function so I'm just gonna fill with
10:59 - black just so we kind of are getting rid
11:01 - of everything we're gonna draw text
11:02 - middle and what I'm gonna do here I'm
11:04 - gonna say press any key to play okay and
11:10 - then we'll give this a size of 60 and a
11:13 - color of white once again okay so that's
11:16 - being drawn in the middle we'll update
11:18 - the display so PI and up display don't
11:21 - update like that and then we're gonna
11:24 - say for event and PI game dot event tech
11:29 - gets a similar cool you've already typed
11:30 - up top we're gonna say if event type
11:33 - equals equals PI game got quit we always
11:36 - want one of these not quit Q then we are
11:39 - simply going to say run oops
11:44 - run is equal to false and then we can
11:47 - tab out here and we can just make sure
11:49 - that we are actually quitting the
11:50 - display so don't quit and we'll get rid
11:53 - of this PI game dot display dot quit and
11:56 - then we're gonna add one more event and
11:58 - this event is gonna be a key down so
12:00 - whenever they press any key on the
12:02 - keyboard then that is going to move this
12:04 - forward and we're simply gonna call this
12:05 - main function where we'll play and I'll
12:08 - explain how this kind of flows in just a
12:10 - second because it's really nice okay so
12:12 - if event dot type equals equals PI game
12:16 - dot all capitals key down so if they hit
12:19 - any key then what we're gonna do is
12:21 - we're gonna say main like that okay and
12:24 - I believe that is about it
12:27 - okay yeah so let's see here my game
12:30 - don't display that quit looks correct
12:32 - okay so the way this is gonna work
12:34 - pretty much is when we run the game we
12:37 - start by running main menu so we run
12:38 - main menu and then we go into this main
12:41 - loop where all its gonna do is just say
12:43 - press any key to play and that's gonna
12:44 - be drawn in the middle of the screen
12:45 - once that happens we're gonna check if
12:48 - they're hitting any key if they hit any
12:49 - key we're gonna call mate
12:50 - and in which case sir let me close this
12:52 - so it's easier to see if we hit main
12:54 - then we go into the main game loop and
12:56 - we go and we do this loop until
12:59 - eventually we lose once we lose it
13:01 - displays you lost on the screen makes
13:04 - this loop equal to false which means it
13:05 - brings us back into this main menu loop
13:07 - and we can play again by hitting any key
13:09 - pretty straightforward okay so let's
13:11 - test this out to make sure this is
13:12 - working draw text missing one potential
13:15 - argument color ah because I didn't give
13:17 - a surface my bad so let's just do win
13:19 - and there we go
13:21 - okay so press any key to play press
13:25 - space missing one protect me okay sorry
13:27 - guys and this is why we test our program
13:28 - okay win and now let's try there we go
13:32 - and now we're playing it shows the score
13:34 - and you guys can mess around it I
13:35 - haven't actually tested the score so
13:36 - I'll just do this really quickly and see
13:38 - if I can clear row without having to
13:39 - fast forward which we may be able to do
13:44 - not using that one okay let's see there
13:49 - you go
13:49 - and score is equal to ten so the score
13:51 - system is working as well and that's
13:52 - relief because I hadn't even tested that
13:53 - before I put this in the video okay
13:55 - perfect oh when you press the X brings
13:57 - you to press any key to play you press
14:00 - it again you can do that so if we wanted
14:01 - to change it so when you hit the X key
14:03 - in the main thing and you want to close
14:06 - the game then in the main loop here
14:09 - sorry what you're gonna do is sort of
14:10 - saying run equals false just do PI game
14:12 - let's display dot quit so you can do
14:15 - both you and say run equals false and
14:17 - then you can quit the display as well
14:18 - okay so what's next so I said we were
14:22 - going to save the score and potentially
14:24 - display that so if we want to save the
14:26 - score we're gonna have to do something
14:28 - when we lose so we're gonna have to
14:29 - update like at the current score and
14:31 - we're gonna use a text file to do this
14:32 - so that you can play multiple times so
14:34 - what I'm gonna do now say new file just
14:36 - create a new text file and he's gonna
14:37 - call this scores dot txt
14:41 - okay and here I'm just gonna put a zero
14:42 - as a default value it's really important
14:44 - you put a default value to start
14:45 - otherwise you might run into some issues
14:47 - so just create a new text file make sure
14:49 - it's in your directory with the main
14:51 - with the script okay now what I'm gonna
14:54 - do is I'm gonna create another function
14:55 - it doesn't really matter where it goes
14:56 - so I'm gonna say define update
14:59 - underscore score and we're gonna give it
15:02 - to score okay now in here what I'm gonna
15:04 - do is I'm gonna say with open and this
15:08 - is how we're gonna open our text file
15:10 - and it's like update and display with
15:11 - open squares text in R so in read mode
15:14 - and this action needs to be in quotation
15:16 - marks as well we are going to say F yeah
15:21 - I have to do this as F sorry I say F dot
15:25 - read lines like this okay and that'll be
15:29 - equal to lines is equal to F dot read
15:34 - lines so that means our score is going
15:35 - to be well the first line so score is
15:37 - equal to lines zero and we're gonna add
15:41 - this dot strip so that we remove any
15:44 - like backslash ends because if you don't
15:47 - know in a text file when you hit the
15:49 - next line the way that it actually
15:50 - tracks that you have another line is it
15:52 - puts a character that looks like this on
15:54 - the line it's invisible to you in the
15:56 - text file when you're viewing it but
15:57 - when you read it in with code you
15:58 - actually read in this character so we
16:00 - just want to make sure we strip that off
16:01 - in case it is there I'm gonna say score
16:04 - equals this and then we'll just say okay
16:06 - so we've done that and since we're
16:08 - topping out now at all it's gonna
16:09 - automatically close our file what we're
16:11 - gonna do now is we are going to open the
16:13 - file again except in this time we're
16:14 - gonna open it right mode which means
16:15 - we're gonna overwrite whatever is in the
16:17 - file and we're simply gonna say if score
16:21 - is I guess I'm gonna change this to end
16:25 - score standing for new score if score is
16:28 - greater than n score then we'll say F
16:32 - dot and we'll say write lines actually
16:35 - right I think and we'll simply put in
16:38 - STR of score which is this updated score
16:42 - otherwise so if that's not true we just
16:45 - have to write back the other score
16:47 - because we're at clearing it when we
16:48 - open this with W mode okay so rinse it F
16:51 - dot right and then
16:52 - or sorry this is gonna be my do and and
16:56 - score yeah sorry so I kind of messed up
17:00 - in this way it should be the other way
17:02 - around but whatever we're just checking
17:04 - if the original score is greater than
17:05 - the new score if it is we'll write the
17:07 - original score otherwise we'll write the
17:09 - new score so this works still it just
17:10 - not the way that I was thinking about it
17:12 - when I was kind of talking about that
17:13 - okay so update score should work and
17:16 - then you know you can actually return
17:18 - let's just return actually a naught we
17:20 - don't need to return anything so I
17:22 - haven't pre written this yet so I'm kind
17:24 - of still just going through how I want
17:25 - it to work okay what we'll do here after
17:28 - we set run equal to false we'll say
17:29 - update score and we'll give it whatever
17:32 - the current score is and then this
17:34 - should be working in the scores dot txt
17:36 - file so let's run this I'll fast forward
17:38 - through and make sure things working
17:43 - [Music]
17:47 - okay so we got an error not support it
17:50 - between instance of string and int okay
17:52 - so if score greater the end stress which
17:54 - mean we have to convert the student int
17:55 - so if we go back up to score and where
18:01 - did I make this okay score is going to
18:03 - int score like that okay
18:07 - and that's hopefully work because that
18:09 - score comes in as an int and we'll run
18:12 - it one more time one more fast forward
18:14 - sorry without guys
18:15 - [Music]
18:21 - okay and another issue lines zero
18:24 - Linda list index out of range okay I'm
18:27 - gonna have a look at this and come back
18:28 - okay so this code is actually working
18:30 - just fine the issue was that since the
18:32 - last time when I crashed we didn't end
18:34 - up writing anything into the file so we
18:36 - had a blank file and then we were going
18:37 - lines to zero where is it here and
18:40 - obviously there was no line 0 so that
18:42 - crashed but if you just add any numbers
18:45 - like my add 0 back in here two squares
18:46 - dot txt and save it then this works fine
18:48 - okay so that's it for saving scores now
18:51 - we need to display those saved scores so
18:53 - I'm kind of gonna leave this up to you
18:55 - guys where you want to display it I
18:57 - don't really know where I want to put my
18:58 - saved score like high score maybe on the
19:00 - left side of the screen it doesn't
19:03 - really matter so if I want to draw it on
19:05 - the left side of the screen then I can
19:07 - do something like we're gonna have to
19:09 - first get this max score right so I'm
19:11 - gonna have to make a new function called
19:13 - define max score or last score or
19:18 - whatever you want to call it and if you
19:20 - call max score what we're gonna do is
19:22 - we're just gonna do the exact same thing
19:23 - we did here so we can say it with open
19:26 - score set text score zero slide your
19:28 - strip accepting this time we're gonna
19:30 - return score like that okay now we
19:34 - actually do here to is we could just
19:36 - simply replace this whole line with max
19:39 - score and just say score equals max
19:42 - score be the efficient way to do it and
19:45 - I mean feel free to do that if you want
19:47 - orally but the other way okay so now we
19:48 - have something that's getting us max
19:49 - score so how are we gonna use this well
19:52 - when we call main I guess when we call
19:54 - me or we can call main menu does it like
19:56 - you guys if you want to draw it in the
19:57 - main menu can do that otherwise draw it
19:59 - in the main to draw it in the main all
20:01 - you're gonna do is gonna say like last
20:03 - score is equal to u max score which is
20:06 - going to be whatever is stored in that
20:09 - text file and then to draw this we're
20:12 - gonna have to pass this again into when
20:14 - we read wrong'd window so in draw window
20:17 - I'm just gonna say last score we can go
20:20 - up to draw window again say last
20:24 - underscore score equal to zero and
20:26 - you're pretty much it gonna copy exactly
20:28 - what we have here with
20:30 - this font and the split so let me just
20:33 - comment this and say this is current
20:38 - score just so I could remember you know
20:40 - how to comment say lost score high score
20:44 - whatever you want to say here and then
20:46 - we can just say score and we actually
20:48 - get rid of this font because we already
20:49 - defined it will say high score equals
20:53 - and in this case last underscore score
20:58 - okay
20:58 - draw that to the screen this is probably
21:01 - not where you want to draw it you
21:02 - probably wanna draw it top left X minus
21:06 - like some value like minus 30 top left Y
21:09 - maybe plus I don't know like 300 or
21:14 - something so now we can see where this
21:15 - is actually gonna draw if we check this
21:17 - out so let's run this press any key so
21:20 - it's not obviously showing up where we
21:22 - want to so we have to subtract more from
21:24 - this so let's subtract like I don't know
21:27 - 100 and then this was plus too much
21:31 - let's see plus 200 and high score so
21:35 - again like you got to move it over more
21:36 - so we'll move over to go under this time
21:38 - and hopefully this works
21:40 - okay so high score zero scores here and
21:42 - that's obviously because at the current
21:44 - moment we have no our score is just zero
21:47 - in that text file okay so I think that
21:50 - is pretty much it for this video
21:52 - if you guys have any questions any
21:53 - errors anything that I did in this video
21:55 - that you weren't sure about leave a
21:56 - comment down below we'll be sure to get
21:58 - back to you also quick side note here I
22:00 - do have a discord server I forgot to
22:02 - talk about it since I released like a
22:04 - channel update thing but if you guys
22:05 - want to join that I help out a lot of
22:06 - people you can chat with me it's a cool
22:08 - kind of community there's a link in the
22:09 - description completely free and also if
22:12 - you guys enjoyed the video and you want
22:13 - to support the channel and more than
22:14 - just liking and subscribing I do have a
22:16 - patreon account and I would really
22:18 - appreciate any donations that come from
22:19 - that anyway so that's been it for this
22:21 - video if you guys enjoyed please make
22:22 - sure you leave a like and subscribe and
22:24 - I will see you again in another tutorial
22:26 - [Music]

Cleaned transcript:

hey guys and welcome to the fourth video in my PI game Tetris series in this video I'm gonna be showing you guys a few different things so in the last video I mentioned I was gonna be doing more cosmetic stuff so that is true in this video I'm going to be showing you how to do the main menu screen how to draw text in the middle the screen how to make things look a little bit better and I'm also gonna be adding a little bit of functionality to the game in terms of making the piece fall faster as it moves or as time moves forward so obviously we want the game to get more difficult as time goes on so what we're gonna do to do that is increase the speed at which the piece falls down the screen it's pretty easy I'll show you how to do that I'm going to be adding score and we're gonna be displaying that score and that's probably about it for this game so the first thing I want to show you is how to add the piece falling faster so to do this we need to create a variable in our main here and I'm just gonna make this equal to what are we going to say fall all right let's say level underscore time okay and this is gonna just represent how much time has passed and it's gonna be similar to full time and level is just because as we increase speed like the level is going up kind of whatever okay so say level time plus equals clock dot get underscore wrong time and we're gonna do exactly what we did with making the piece move down the screen except we're just gonna change the speed at which it moves down the screen so what I'm gonna do here is when I make another if statement I'm just simply going to say if level underscore time divided by a thousand is greater than and then you can put in whatever time you want here now I'm gonna do five seconds so every five seconds we increase the speed okay and then we can decide what we want to increase the speed by so I'm gonna say a level underscore time we need to first reset this back to zero so that we continue to do this and then what I'm gonna actually do here is gonna say if level underscore time is greater than and we want to put like a terminal velocity here so at what speed do we stop increasing the time because we obviously we can't get to a negative false speed otherwise you're just gonna instantly fall and we don't want it to get too fast that the game's unplayable so we need to pick a speed now a good speed that I kind of found was 0.12 because anything faster than that is like pretty fast but I mean you guys can play with that and change that around it's really easy number just to fix right and then if we're greater than that we're just simply gonna subtract a value from level underscore time now this value the magnitude to the size of this value that you're subtracting is gonna determine like how quickly you increase the speed as well as obviously at the time so I put originally zero point zero one and I mean depending on how long it takes you to play a Tetris game this is pretty fast because that means after 50 seconds you're already gonna be down to zero point one seven which is very quick and almost at terminal velocity so I recommend you do 0.005 that means it'll take about a minute and 40 seconds before you're gonna be close to reaching this terminal velocity which might be good if you're playing Tetris for a decent amount of time okay so you guys can play with those numbers but that is going to move it down faster I would show you but it's gonna take like a decent amount of time for to continue moving faster to just play with that okay just trust me all right the next thing we want to do is add score so we need to first create a score variable and I'm gonna say score it's equal to zero like that and incrementing score is pretty simple I'm gonna say and you guys can make this whatever you want whenever we clear a row I'm gonna add ten to our score because you had ten pieces or ten cubes or whatever that you cleared okay so actually the way that we need to do this is we're going to return a value from clear rows which is going to be equal to score now I'm gonna go to clear rows and in here I'm simply just gonna return i NC okay and I NC is the increment so how many rows that we actually ended up clearing so if we clear more than one row we're gonna get a value of two we can multiply that by whatever our score increments gonna be and then yeah we can just add that to the score so this is pretty straightforward if we go to clear rows we're gonna say score is equal to clear rows multiplied by ten all right or actually not equal to we're gonna have to say plus equal to clear rows plus ten now what we need to do is we need to display this score on the screen somewhere the user can see then we're actually going to save this score as well when we lose the game okay so the way that we can display this is we're gonna have to do it in draw window but we're gonna have to pass this score to draw window so after our grid object we're gonna pass score like that and we're gonna go to draw window and we're simply going to add another parameter here score like that now I'm just going to set it equal to zero as a default parameter so in case we call it somewhere else and we forget to add that score that's fine we don't need that so what I'm gonna do now is I'm actually gonna go to draw next shape and at draw next shape you can see if I run the program quickly here it shows us a little text object okay now I want to get this similar text object so I'm just gonna copy this fall into the label SX sy and I'm just gonna bring it down here into draw window now it doesn't really matter where you draw it I'm just gonna plop it in the middle here and obviously I'm going to change this from next shape to be score now we need to obviously display what the actual score is so we can just say plus str score like that and that should be displaying for us okay so now we have SX and sy which is giving us the play area I believe or no this is actually the position in which we wanted to draw it okay so what I'm gonna do is I'm gonna say win dot blitz or is it surface stir this dog blitz our text object which is the label and then where do we want to draw it to and draw SX sy now I'm just gonna have a look up here to see where I did it here so SX plus 10 sy minus 30 so what I might want to do is we can add plus time to this so it's aligned but then we're out gonna subtract we're actually add to the Y so it's lower so I'm gonna add let's say like 80 like that so let's test this out and see if it's working score so it's not low enough so we'll add this I do 120 and see what how where we're getting enough scores again although enough to go 160 and again you guys can play with these our score equals zero perfect and then maybe I'll just add 10 more pixels here so it's more in the center and you know whatever that's good enough for me okay good so that is working well so we've got the score and we were moving down faster now what else do we need to do what we need to do now is work in main and you and to figure out what happens when we actually lose the game so we have this check lost and all this simply does is just quit the game for us when that happens but we want to do something else when we lose and we want to display something to the screen so actually before I go and main menu I'm gonna go up here to a function that I told you guys I wanted to hear that that I was going to finish which is draw a text in middle now this is gonna take a service text and what else do we want say size and color okay so surface text size color this way you can use this in another function or oh sorry and another program and you can use them multiple times with give every text size and color you want so we're gonna set up a font train say font equals PI game dark font dot sys fonts by now you probably know this I'm just gonna pick Comic Sans we're gonna make it equal to size and bold is gonna be equal to true now you can make this false if you want or just omit it completely and then it won't make it bold pretty straightforward make a label label is equal to again font render and then we're gonna say text one for antialiasing and color like this okay now we'll just simply draw this in the middle of the screen so to do this will say surface double its label comma and now we're gonna do a little bit of math here so talk underscore left under short X plus play underscore width divided by 2 not three and we're gonna get the label width and the way we do this I don't believe I've actually done this yet is get underscore width I think I'm just gonna check yeah get width and then the reason I have this in brackets because I'm gonna divide this by two as well and this will essentially give us the middle position where we should be drawing in terms of xcoordinate okay so now I'm gonna give top underscore left y plus play underscore height divided by two okay and now same thing label dot get underscore height in brackets and / I don't know why can't tab over here okay / and that should hopefully be working for us okay so we can test that I'm just a second so we've got this it's bleeding now whatever text we want to the screen so this makes it really easy for us to draw anything to the middle of the screen so the first thing I want to draw to the middle of screen is like a you lost message so when it says you've lost what I want to do is draw obviously you lost and tell them that so let's say draw text middle and then what do we want to draw well let's simply draw what surface first actually that we need so we'll say win and then we're going to pass it text and in this case we're gonna say you lost exclamation point sighs let's go for E and color let's go wait and you obviously you guys can play around with that now after I draw that and I display the screen or update this screen by game display update just cuz we haven't called the window yet draw window when we do this then what we're gonna do is we're just gonna delay so I say pygame dot time delay and I'm just gonna delay one and a half seconds just so once this comes up the user has a second to look at it because then we're gonna move back into our main menu screen which you'll see okay so I'm just gonna fast forward this until I lose and then you guys can see that it's working and there we go so we got you lost and then it's late and then just quit because I have this PI game dot display dot quit here okay so now we're gonna move to is main menu everything else is working I told you guys it's not like super difficult a lot of this stuff and it main menu what we're gonna do now is we're just gonna make it pop up whenever you start the game and whenever you lose and just gonna say hit any key to like move forward to continue okay so I'm just gonna set up another game loop in here so we're gonna say run it was true well run and this is gonna be really similar to the loop we've done above it just cept just a lot shorter we're and we're gonna just draw in here without using a different function just because we're not drawing very much so it's not important that we wouldn't call it like update the screen with a defined function so I'm just gonna fill with black just so we kind of are getting rid of everything we're gonna draw text middle and what I'm gonna do here I'm gonna say press any key to play okay and then we'll give this a size of 60 and a color of white once again okay so that's being drawn in the middle we'll update the display so PI and up display don't update like that and then we're gonna say for event and PI game dot event tech gets a similar cool you've already typed up top we're gonna say if event type equals equals PI game got quit we always want one of these not quit Q then we are simply going to say run oops run is equal to false and then we can tab out here and we can just make sure that we are actually quitting the display so don't quit and we'll get rid of this PI game dot display dot quit and then we're gonna add one more event and this event is gonna be a key down so whenever they press any key on the keyboard then that is going to move this forward and we're simply gonna call this main function where we'll play and I'll explain how this kind of flows in just a second because it's really nice okay so if event dot type equals equals PI game dot all capitals key down so if they hit any key then what we're gonna do is we're gonna say main like that okay and I believe that is about it okay yeah so let's see here my game don't display that quit looks correct okay so the way this is gonna work pretty much is when we run the game we start by running main menu so we run main menu and then we go into this main loop where all its gonna do is just say press any key to play and that's gonna be drawn in the middle of the screen once that happens we're gonna check if they're hitting any key if they hit any key we're gonna call mate and in which case sir let me close this so it's easier to see if we hit main then we go into the main game loop and we go and we do this loop until eventually we lose once we lose it displays you lost on the screen makes this loop equal to false which means it brings us back into this main menu loop and we can play again by hitting any key pretty straightforward okay so let's test this out to make sure this is working draw text missing one potential argument color ah because I didn't give a surface my bad so let's just do win and there we go okay so press any key to play press space missing one protect me okay sorry guys and this is why we test our program okay win and now let's try there we go and now we're playing it shows the score and you guys can mess around it I haven't actually tested the score so I'll just do this really quickly and see if I can clear row without having to fast forward which we may be able to do not using that one okay let's see there you go and score is equal to ten so the score system is working as well and that's relief because I hadn't even tested that before I put this in the video okay perfect oh when you press the X brings you to press any key to play you press it again you can do that so if we wanted to change it so when you hit the X key in the main thing and you want to close the game then in the main loop here sorry what you're gonna do is sort of saying run equals false just do PI game let's display dot quit so you can do both you and say run equals false and then you can quit the display as well okay so what's next so I said we were going to save the score and potentially display that so if we want to save the score we're gonna have to do something when we lose so we're gonna have to update like at the current score and we're gonna use a text file to do this so that you can play multiple times so what I'm gonna do now say new file just create a new text file and he's gonna call this scores dot txt okay and here I'm just gonna put a zero as a default value it's really important you put a default value to start otherwise you might run into some issues so just create a new text file make sure it's in your directory with the main with the script okay now what I'm gonna do is I'm gonna create another function it doesn't really matter where it goes so I'm gonna say define update underscore score and we're gonna give it to score okay now in here what I'm gonna do is I'm gonna say with open and this is how we're gonna open our text file and it's like update and display with open squares text in R so in read mode and this action needs to be in quotation marks as well we are going to say F yeah I have to do this as F sorry I say F dot read lines like this okay and that'll be equal to lines is equal to F dot read lines so that means our score is going to be well the first line so score is equal to lines zero and we're gonna add this dot strip so that we remove any like backslash ends because if you don't know in a text file when you hit the next line the way that it actually tracks that you have another line is it puts a character that looks like this on the line it's invisible to you in the text file when you're viewing it but when you read it in with code you actually read in this character so we just want to make sure we strip that off in case it is there I'm gonna say score equals this and then we'll just say okay so we've done that and since we're topping out now at all it's gonna automatically close our file what we're gonna do now is we are going to open the file again except in this time we're gonna open it right mode which means we're gonna overwrite whatever is in the file and we're simply gonna say if score is I guess I'm gonna change this to end score standing for new score if score is greater than n score then we'll say F dot and we'll say write lines actually right I think and we'll simply put in STR of score which is this updated score otherwise so if that's not true we just have to write back the other score because we're at clearing it when we open this with W mode okay so rinse it F dot right and then or sorry this is gonna be my do and and score yeah sorry so I kind of messed up in this way it should be the other way around but whatever we're just checking if the original score is greater than the new score if it is we'll write the original score otherwise we'll write the new score so this works still it just not the way that I was thinking about it when I was kind of talking about that okay so update score should work and then you know you can actually return let's just return actually a naught we don't need to return anything so I haven't pre written this yet so I'm kind of still just going through how I want it to work okay what we'll do here after we set run equal to false we'll say update score and we'll give it whatever the current score is and then this should be working in the scores dot txt file so let's run this I'll fast forward through and make sure things working okay so we got an error not support it between instance of string and int okay so if score greater the end stress which mean we have to convert the student int so if we go back up to score and where did I make this okay score is going to int score like that okay and that's hopefully work because that score comes in as an int and we'll run it one more time one more fast forward sorry without guys okay and another issue lines zero Linda list index out of range okay I'm gonna have a look at this and come back okay so this code is actually working just fine the issue was that since the last time when I crashed we didn't end up writing anything into the file so we had a blank file and then we were going lines to zero where is it here and obviously there was no line 0 so that crashed but if you just add any numbers like my add 0 back in here two squares dot txt and save it then this works fine okay so that's it for saving scores now we need to display those saved scores so I'm kind of gonna leave this up to you guys where you want to display it I don't really know where I want to put my saved score like high score maybe on the left side of the screen it doesn't really matter so if I want to draw it on the left side of the screen then I can do something like we're gonna have to first get this max score right so I'm gonna have to make a new function called define max score or last score or whatever you want to call it and if you call max score what we're gonna do is we're just gonna do the exact same thing we did here so we can say it with open score set text score zero slide your strip accepting this time we're gonna return score like that okay now we actually do here to is we could just simply replace this whole line with max score and just say score equals max score be the efficient way to do it and I mean feel free to do that if you want orally but the other way okay so now we have something that's getting us max score so how are we gonna use this well when we call main I guess when we call me or we can call main menu does it like you guys if you want to draw it in the main menu can do that otherwise draw it in the main to draw it in the main all you're gonna do is gonna say like last score is equal to u max score which is going to be whatever is stored in that text file and then to draw this we're gonna have to pass this again into when we read wrong'd window so in draw window I'm just gonna say last score we can go up to draw window again say last underscore score equal to zero and you're pretty much it gonna copy exactly what we have here with this font and the split so let me just comment this and say this is current score just so I could remember you know how to comment say lost score high score whatever you want to say here and then we can just say score and we actually get rid of this font because we already defined it will say high score equals and in this case last underscore score okay draw that to the screen this is probably not where you want to draw it you probably wanna draw it top left X minus like some value like minus 30 top left Y maybe plus I don't know like 300 or something so now we can see where this is actually gonna draw if we check this out so let's run this press any key so it's not obviously showing up where we want to so we have to subtract more from this so let's subtract like I don't know 100 and then this was plus too much let's see plus 200 and high score so again like you got to move it over more so we'll move over to go under this time and hopefully this works okay so high score zero scores here and that's obviously because at the current moment we have no our score is just zero in that text file okay so I think that is pretty much it for this video if you guys have any questions any errors anything that I did in this video that you weren't sure about leave a comment down below we'll be sure to get back to you also quick side note here I do have a discord server I forgot to talk about it since I released like a channel update thing but if you guys want to join that I help out a lot of people you can chat with me it's a cool kind of community there's a link in the description completely free and also if you guys enjoyed the video and you want to support the channel and more than just liking and subscribing I do have a patreon account and I would really appreciate any donations that come from that anyway so that's been it for this video if you guys enjoyed please make sure you leave a like and subscribe and I will see you again in another tutorial
