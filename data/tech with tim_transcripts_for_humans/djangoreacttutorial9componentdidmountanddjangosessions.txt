With timestamps:

00:02 - [Music]
00:08 - hello everybody and welcome to video 8
00:10 - in this django and react tutorial series
00:13 - what we're going to be doing in this
00:14 - video is kind of starting from where we
00:16 - left off
00:17 - we're actually going to be working on
00:18 - the home page we're going to be trying
00:20 - to make it so that we can actually
00:21 - redirect the user to the room that
00:23 - they're currently in
00:24 - if they leave the website and then
00:26 - rejoin it so pretty much we're going to
00:27 - be styling this home page
00:29 - actually making it look better than just
00:30 - a paragraph tag that says
00:32 - this is the homepage we'll have a button
00:33 - that says join a room we'll have a
00:34 - button that says create a room
00:36 - based on what they click they'll get
00:38 - redirected to those different pages
00:40 - and then if the user is already in a
00:42 - room for some reason say maybe they
00:44 - left the website and came back to it
00:45 - will automatically redirect them to that
00:48 - room
00:48 - so that will mean in the next video
00:50 - we'll have to actually code out some
00:51 - more stuff on the room page itself
00:53 - which will allow a user to leave the
00:55 - room so that they can you know get into
00:57 - another room or
00:58 - create a room of their own anyways we've
01:00 - got a lot of stuff to do a lot of cool
01:01 - stuff still to come in this series i
01:03 - hope you guys are excited
01:04 - let's go ahead and get started so the
01:07 - first thing
01:07 - that i want to do is i actually want to
01:09 - start working on the home page and just
01:11 - coding out what
01:12 - this should look like so pretty much
01:13 - we're going to have this route right
01:15 - here which is the home page
01:16 - and well we need to look better than
01:18 - this paragraph tag now i'm actually
01:20 - going to put everything that i want to
01:21 - render here
01:22 - inside of a separate method or a
01:24 - separate function just because it will
01:25 - be
01:26 - a little bit easier if we can have it
01:27 - kind of separated for what we're going
01:28 - to do next
01:29 - but anyways let's make a method and
01:31 - let's just call this render
01:33 - main section or you know we can even
01:35 - call this
01:36 - render home page like that that makes
01:38 - sense as well inside of here we don't
01:40 - need to take anything
01:41 - and we'll simply return some brackets
01:44 - like this and then inside of here what
01:45 - we want to render we'll just call this
01:47 - function from inside of this render
01:49 - function
01:50 - and then it'll give us all that html or
01:52 - the jsx or whatever you want to call it
01:54 - anyways we're going to need to use a
01:55 - grid we're going to need to use
01:56 - typography we're going to need to use
01:58 - some buttons so we need to import all of
02:00 - that
02:00 - so let's go up here and i'll actually
02:02 - just do it above
02:03 - react router dom and i'll start by
02:06 - saying import
02:07 - we're going to import the grid we're
02:09 - going to import the button we're going
02:10 - to import a new thing that i don't think
02:12 - we've used yet called button group
02:13 - and then we are also going to import
02:16 - typography
02:17 - now that is all going to be from at
02:20 - material ui
02:22 - core all right so now that we have all
02:25 - that let's go inside of here and let's
02:26 - start setting up what we want
02:28 - so the first thing that i want to do is
02:29 - just make a grid this is kind of
02:30 - standard just to make sure everything's
02:31 - nice and centered
02:32 - so we're going to say grid we're going
02:34 - to make this one a container
02:36 - i'm actually gonna say the spacing is
02:38 - equal to three
02:39 - and then i'm gonna close the grid tag
02:41 - like that
02:43 - now inside of this grid we're gonna make
02:44 - two grid items
02:46 - one for pretty much each thing that
02:47 - we're gonna have so we're gonna have a
02:49 - big title
02:50 - this title is going to be kind of the
02:51 - name of our app i'm just going to call
02:53 - it house party but you can call this
02:55 - whatever you want feel free to change
02:56 - the name and then we'll have another
02:58 - grid item and this grid item will store
02:59 - the two buttons
03:00 - i want to have two buttons horizontally
03:02 - aligned one that says join room and one
03:04 - that says create a room
03:06 - anyways you'll get it as we go through
03:07 - but let's make the first grid item so if
03:09 - i can spell grid correctly
03:10 - we'll say grid item xs equals 12
03:14 - we will say align equals center like
03:17 - that
03:18 - and then close the grid now we can just
03:20 - copy this because we'll use this again
03:22 - down here and in the first one we want
03:25 - to put our title
03:26 - so i'm going to go ahead and do a
03:27 - typography tag like that
03:29 - we're going to say that the variant is
03:31 - equal to h3 so a little bit bigger than
03:34 - what we've been using before which was
03:35 - h4
03:36 - and then we'll say the component is
03:37 - equal to h3 as well now we can end the
03:39 - typography tag
03:40 - and inside of here we'll just put what
03:42 - we want our title to be now i said that
03:44 - i wanted to call mine house party so
03:45 - let's go ahead and do that
03:46 - and call this house party nice now
03:49 - inside of the next grid we want to set
03:51 - up a button group the reason we're
03:52 - setting up a button group is because we
03:54 - want to have two buttons aligned
03:55 - horizontally
03:56 - and this is just the easiest way to do
03:58 - this it's literally the tag is just
04:00 - called button group
04:01 - and it will take the two buttons based
04:03 - on kind of the stuff that we give it
04:04 - and make sure that they are aligned
04:06 - horizontally all right so inside of here
04:08 - we're going to do our button group
04:09 - so we're going to say button group we're
04:10 - actually going to write this thing
04:11 - called disable
04:12 - elevation if you want to see what it
04:14 - looks like with elevation you can just
04:15 - remove that tag
04:17 - but pretty much this is just going to
04:18 - remove kind of the shadow that by
04:20 - default is showed up that i don't want
04:22 - then i'm going to say variant of this is
04:24 - going to be equal to contained this will
04:26 - make sure that we're aligning them
04:27 - horizontally
04:28 - and then the color for this for our
04:30 - button group we can make it equal to
04:31 - primary although it doesn't really
04:33 - matter what we have for that
04:34 - all right so now we have button group
04:36 - here now we're just going to define two
04:37 - buttons we've already done this before
04:39 - many times we'll say button
04:41 - we'll start by defining the color this
04:43 - one will be
04:44 - primary and then we'll say what do we
04:46 - want this button to go to well we want
04:47 - this to go to the slash
04:48 - join page then we'll say what component
04:51 - is this button
04:52 - well the component is going to be equal
04:54 - to inside of our little squiggly
04:56 - brackets like this it's going to be
04:57 - equal to a link which we have imported
04:59 - up here
05:00 - all right awesome uh so then we can just
05:03 - close the button
05:04 - actually i guess we'll just do a full
05:06 - button like that and then inside of here
05:07 - we'll do our name and we'll say
05:09 - join a room okay and it's going to copy
05:12 - this
05:13 - we'll keep it inside of the button group
05:14 - because we want these grouped obviously
05:16 - the next one instead of being primary is
05:18 - going to be secondary like that
05:20 - we don't want to go to slash join we
05:22 - want to go to slash create
05:24 - this too will be a link and then instead
05:26 - of join a room
05:27 - we can simply say create a room
05:30 - alright so now we actually have the
05:32 - render for our home page
05:33 - we can take this and just use it inside
05:35 - of this render method so inside of here
05:37 - it's going to put two squiggly brackets
05:39 - and say this dot render home page
05:42 - and now whenever we go to slash we
05:44 - should call this function or this method
05:46 - we should show all of this jsx slash
05:49 - html
05:50 - all right so let me go to my browser let
05:52 - me
05:53 - refresh and you can see that now we get
05:55 - house party
05:56 - join a room and create a room now some
05:59 - of you may have noticed that sometimes
06:00 - i'm right clicking on this reload button
06:02 - in google chrome
06:03 - and i'm pressing empty cache and hard
06:04 - reload i'm messing with like a bunch of
06:06 - different versions of this application
06:08 - because i coded out before the tutorial
06:10 - to make sure everything looks good
06:11 - so sometimes the caching is all weird if
06:13 - for some reason you guys are updating
06:14 - stuff and you're not seeing it in your
06:16 - browser
06:16 - if you're on google chrome just make
06:18 - sure you open up the inspect window so
06:20 - you have to have the console open
06:22 - and then you can right click on here and
06:23 - click on empty cache and hard reload
06:26 - anyways let's make sure this is working
06:28 - i'm going to press on join a room brings
06:30 - us to the joy in a room page let's go
06:31 - back
06:32 - create a room brings us to the creator
06:33 - room page let's go back
06:35 - awesome that's perfect this is working
06:37 - and that's what i wanted for my home
06:38 - page
06:39 - now what i want to do is make it so that
06:41 - if we go to the home page and we're
06:42 - already
06:43 - in a room it automatically redirects us
06:45 - to that room
06:46 - so to actually accomplish this what i
06:48 - need to do is pretty much
06:50 - right when this application loads or
06:52 - right when this home page loads
06:54 - i need to check if the user is currently
06:56 - in a room and if they are in a room then
06:58 - i need to redirect them
07:00 - now to do that we need a way to check if
07:01 - they're in a room right so really we
07:03 - need an
07:03 - endpoint that we can call on the server
07:05 - that tells us hey is this user in a room
07:08 - if they are what room are they in and
07:10 - then from here we can redirect them to
07:12 - that room
07:12 - so i'm going to start by just creating
07:14 - what is actually going to be kind of
07:16 - the entry point for this now i don't
07:17 - think i've talked about these before but
07:19 - in react there's these things called
07:21 - life cycle methods now essentially these
07:23 - are things that you can kind of hook
07:25 - into
07:26 - that allow you to alter the behavior of
07:27 - the component so the life cycle method
07:29 - that we're going to be using
07:30 - this is called component did mount so we
07:33 - will continue in one second but i need
07:35 - to again
07:35 - thank the sponsor of this video and the
07:37 - series which is algo
07:38 - expert algo expert is the best platform
07:41 - to use to prepare for your coding
07:42 - interviews at large tech companies
07:44 - and they recently released an awesome
07:45 - new feature which is mock interviews on
07:48 - the platform
07:48 - so you can actually sit down and perform
07:50 - a mock interview with another live human
07:52 - being which is always some great
07:54 - practice if you guys want to check out
07:55 - algo expert have a look at it from the
07:57 - link in the description
07:58 - and use the code tech with tim for a
08:00 - discount on the platform
08:02 - so componented mount pretty much means
08:04 - that the component just rendered for the
08:06 - first time
08:07 - on the screen there's a bunch of
08:08 - different lifecycle methods i'm not
08:10 - really going to go through them in depth
08:11 - here you can look them up if you want to
08:12 - see what they are
08:13 - but there's pretty much are just ways to
08:15 - hook into the behavior of this react
08:17 - component so if you want to do something
08:19 - before it loads or before it actually
08:20 - renders on the screen
08:22 - well then you would do that in a
08:23 - specific life cycle method if you want
08:25 - to say
08:26 - make the component not update when
08:27 - something specific happens
08:29 - then you would hook into the should
08:30 - component update method or hook or
08:32 - whatever you want to call it
08:34 - and just say hey no we shouldn't update
08:36 - if this happens there's a bunch of
08:37 - different things you can do
08:38 - they actually are pretty important to
08:39 - understand and we'll use more of them as
08:41 - we go through this tutorial
08:42 - but for right now we're just going to
08:43 - use component did mount now some of you
08:45 - may be noticing that i put this async
08:47 - keyword here
08:48 - uh we will need to use that i'll discuss
08:50 - why in a second but but usually when you
08:52 - do a component mount you don't have
08:54 - the async before it the reason we're
08:55 - going to have async before it is because
08:57 - we're going to be performing an
08:58 - asynchronous operation inside of
09:01 - component did mount
09:02 - now if i don't put async here in case
09:04 - you're not familiar with what async
09:05 - means
09:06 - if i don't have that keyword here that
09:08 - means that whatever i put in this method
09:10 - we need to wait for all of that to
09:12 - happen
09:12 - before we can do anything else and
09:14 - pretty much what we're going to do
09:16 - inside of here
09:16 - is we're going to call an endpoint on
09:18 - the server and that could take some time
09:20 - right imagining these things are not on
09:22 - the same device
09:23 - maybe the client is sitting you know
09:25 - halfway across the world
09:26 - this could take like a second or two or
09:28 - maybe even just like a few milliseconds
09:30 - to load so we want to make sure that the
09:32 - rest of our application isn't waiting on
09:34 - this component did mount method
09:36 - and that only once this is ready to go
09:38 - it actually performs the action inside
09:40 - of it so
09:41 - if we put async here that pretty much
09:43 - tells the program that hey
09:44 - this is asynchronous which means we
09:46 - don't need to wait on this to finish
09:48 - before we can go ahead and continue
09:50 - doing other things in the program
09:52 - but as soon as this is ready to go or as
09:54 - soon as we actually receive a response
09:56 - from the server and we'll see that in a
09:57 - second
09:58 - then we'll go ahead and actually execute
10:00 - what's happening inside of there
10:01 - anyways i hope that kind of makes sense
10:03 - as i said and as i keep saying it will
10:05 - make more sense as we go through
10:07 - but i just feel like i need to explain
10:08 - that in case some of you guys are
10:09 - wondering
10:10 - all right so now that we have that uh
10:12 - let's actually go to the server and just
10:13 - make our end point this one's going to
10:14 - be really simple
10:16 - and then we can call it and then we'll
10:17 - actually be done for this tutorial
10:19 - so what i want to do is create a new
10:21 - view here and i'm just going to say
10:23 - class and this one i'm just going to
10:25 - call user in room
10:26 - again feel free to call this whatever
10:28 - you want but we're going to inherit from
10:30 - api view
10:30 - and all we want to do in here is simply
10:33 - we're just going to send a get request
10:34 - to this endpoint
10:35 - uh and then the endpoint will check hey
10:37 - is the current user in whatever session
10:39 - they're in
10:40 - uh are they in a room and if they are
10:42 - then we will return
10:43 - that room code so i'm just going to
10:45 - define get like that
10:47 - i'm going to say self request and then
10:50 - format
10:51 - equals not for nat format equals
10:54 - none like that and then here i'm going
10:56 - to say data
10:57 - equals to and then we're just going to
10:58 - do a blank python dictionary
11:01 - we're going to say code this is what
11:02 - we'll use as i guess the key for
11:04 - returning
11:04 - our actual room code and then we'll say
11:06 - that's equal to
11:08 - self dot request dot session
11:11 - dot get and then room underscore code
11:14 - now notice this is the same thing that
11:16 - i'm using inside of here right when i
11:18 - actually
11:19 - update the user session and add that
11:21 - information telling us hey what room
11:23 - this user is
11:24 - actually in so it probably would make
11:25 - sense to actually make kind of a global
11:27 - variable
11:28 - at the top of this file that says you
11:29 - know room code field or something
11:32 - and then we put that inside of all of
11:33 - here so they're consistent but for now
11:35 - it's fine we'll just leave it as a
11:36 - string
11:37 - room code so this is how you get
11:38 - information from the session
11:40 - if there is no room code it will simply
11:42 - return none
11:43 - now there is one thing that we need to
11:44 - quickly do inside of here we need to
11:46 - make sure that the user actually has a
11:47 - session
11:48 - so we're going to do the exact same
11:49 - thing that we've done previously we're
11:51 - just going to take
11:52 - this right here and put this at the top
11:54 - of our
11:55 - function here at the top of our method
11:57 - just to make sure that we actually do
11:59 - indeed have a session because if we
12:00 - don't have a session well that is
12:01 - problematic
12:02 - so now that we have that what we're
12:04 - going to do is we're simply going to
12:05 - return a json response
12:08 - now we have not used this yet so i'll
12:10 - discuss it in a second
12:11 - what this does is take a python
12:13 - dictionary and serialize it using a json
12:16 - serializer and then sends that
12:17 - information
12:18 - back to the frontend or sends it in the
12:20 - request so just like we had
12:22 - you know this uh i guess room serializer
12:25 - right
12:25 - it's the exact same thing except we're
12:27 - just going to take an arbitrary python
12:28 - dictionary
12:29 - rather than a python object like a room
12:32 - or you know like database models that we
12:34 - had
12:35 - so let's go to the top of the file here
12:37 - we're going to say from
12:38 - django dot what is it here i think it's
12:41 - http
12:43 - we're going to import json response
12:46 - like that so there we go we have json
12:48 - response and now all we have to do is
12:50 - instead of json response we're going to
12:52 - pass the data that we actually want to
12:53 - send
12:54 - and then we need to pass the status code
12:56 - so we're going to say status equal
12:57 - status
12:58 - dot http underscore 200 underscore ok
13:02 - again remembering that if they're not in
13:04 - a room we'll simply return none so we
13:06 - can handle that case on the front end
13:08 - where we say hey you know user is not in
13:10 - room so we aren't going to redirect them
13:12 - all right now we need to set up the url
13:14 - for this so let's go to urls.pi
13:16 - let's import user in room
13:20 - like that and now let's make our path
13:23 - so we're going to say path i guess we
13:24 - can call this user in
13:27 - room i mean i guess that makes sense
13:29 - that's what we call to the class
13:30 - and then that will be user in room dot
13:32 - as underscore view
13:34 - all right so now we have our url uh we
13:36 - have our api endpoint
13:38 - all that's left to do is actually call
13:39 - it and then kind of handle the logic
13:41 - or handle what happens based on the
13:43 - response that we get
13:44 - so let's go back to our home page now
13:47 - inside of here i am simply going to
13:49 - actually fetch or send this request so
13:52 - that we can get if the user is in the
13:54 - room
13:54 - so i'm going to fetch slash api slash
13:58 - user hyphen in hyphen room remember not
14:01 - to add the trailing slash otherwise
14:02 - that's going to cause an issue
14:04 - we're then going to say dot then here
14:07 - we're going to take
14:08 - a response and we're going to return the
14:10 - response
14:11 - dot json like that and this will have to
14:14 - have parentheses
14:15 - we're then going to say dot then one
14:16 - more time here
14:18 - this is going to take data and then what
14:20 - we're going to do
14:21 - is actually something that i've not yet
14:23 - talked about but let's just save that
14:24 - and get that going
14:25 - so what's going to happen right now is
14:26 - we're going to call api user in room
14:29 - this is going to return to us whether or
14:31 - not we are in a room and if we are in a
14:32 - room we are going to actually get that
14:34 - room code coming in
14:35 - through the field called code and then
14:38 - what we'll do is we'll return
14:39 - the response.json so we'll just get the
14:41 - json from our response
14:43 - that will then go to this dot then so
14:45 - now we'll have data which is really just
14:46 - a json object
14:48 - then we can parse and look through this
14:49 - json object and pretty much
14:51 - get the room code so what i want to do
14:54 - is i want to store this room code in the
14:56 - state of this home page
14:58 - and then i want to use that inside of my
15:00 - render method to determine whether or
15:02 - not i need to redirect
15:03 - us to another page so you'll see kind of
15:06 - why and how this works
15:07 - but let's start by just setting some
15:09 - state so we're going to say this
15:12 - dot set state like that and that's going
15:15 - to be equal to
15:17 - room code and by default this will be no
15:20 - so now we have some state so what we'll
15:22 - do inside of this dot then that we
15:24 - haven't yet written
15:25 - is we will say this
15:28 - no not touchless what i'm saying this
15:31 - dot
15:32 - set state and then in here
15:35 - we'll say room code is equal to data dot
15:38 - code now if for some reason the or i
15:41 - guess
15:41 - if in the situation where this code is
15:44 - none we will just
15:45 - update room code to be equal to null
15:46 - once again so that would be totally fine
15:49 - and all will still work all right so now
15:51 - that we have that what we can do is
15:53 - actually use
15:54 - this state inside of our render method
15:56 - and remember that pretty much the way
15:58 - this component.mount is working
16:00 - is once we've rendered the page so we've
16:03 - actually already called this render
16:04 - method one
16:05 - time we will asynchronously do this
16:08 - operation so once this is done and this
16:10 - has completed
16:11 - we will have set the state and this
16:13 - setting of the state
16:15 - will force our component to re-render
16:18 - so once it re-renders then we'll say oh
16:20 - we have a new room code
16:21 - down here we'll see that we have a new
16:23 - room code and we can go to that room
16:25 - code
16:25 - because by default when we start this
16:28 - application
16:29 - the room code will be equal to no so on
16:31 - the first render it will show us the
16:33 - home page and then
16:35 - after this component.mount is finished
16:37 - running we'll see hey we have a room
16:39 - that we're actually in we need to go to
16:40 - that and then it will redirect us there
16:42 - based on the logic that i put inside of
16:44 - render so inside of render what i'm
16:46 - going to do is kind of you do a weird
16:47 - thing here
16:48 - but i'm going to go inside of my route
16:50 - for the home page and pretty much
16:52 - i have two cases right i have the case
16:53 - where we're in a room and the case where
16:55 - we're not in a room
16:56 - so i need a way to tell us whether hey
16:59 - you know we redirect to the room or we
17:01 - just show
17:01 - the contents of the home page so i'm
17:04 - going to say render
17:05 - this is actually a guess i guess a
17:07 - method or something that you can hook
17:08 - into
17:09 - and you can change what happens when
17:11 - this route is
17:12 - rendering something right so here we
17:14 - have component is a
17:16 - room join page here when i define render
17:18 - this just means that if we're on this
17:20 - route it will call this render method
17:22 - whatever we put inside of here is what's
17:23 - going to show up okay so i will actually
17:25 - remove this here and now what i want to
17:27 - do is inside of render i need to make an
17:29 - arrow function
17:30 - this is because whatever i put inside of
17:32 - here this is the function that's going
17:34 - to be called
17:35 - when i'm rendering this route so if we
17:38 - are actually
17:38 - on this route then we will render
17:40 - whatever or we will call this function
17:42 - which will then return to us whatever we
17:44 - should render so inside of here i've
17:46 - done an arrow function i open up my
17:48 - parentheses again
17:49 - now i'm going to return and we're going
17:51 - to actually use the ternary operator
17:53 - here to check if we have a room code or
17:55 - not so i'm going to say this.state.room
17:57 - code
17:58 - question mark in the situation where we
18:00 - actually do
18:01 - have a room code then what we need to do
18:03 - is we need to redirect
18:05 - to that room code so i'm going to put
18:06 - parentheses here and we will redirect in
18:09 - that situation and then i'm going to say
18:10 - colon
18:11 - and in the colon i'm just going to say
18:14 - this
18:14 - dot render render home page yeah i think
18:18 - that's what we called it right
18:19 - this star render home page yeah this dot
18:21 - render home page now for some reason
18:23 - that's giving me all kinds of issues let
18:24 - me just
18:25 - wrap this oh i think it's because i
18:27 - didn't
18:28 - put something here okay so i don't know
18:30 - what's going on but i think it's just
18:31 - because i haven't
18:32 - actually finished writing what i need to
18:34 - put inside of here but anyways what
18:36 - we're going to do inside of these
18:37 - parentheses here
18:38 - is we're just going to say redirect and
18:40 - we're going to redirect
18:41 - to and then inside of here we're going
18:43 - to have to actually grab the room code
18:45 - and redirect
18:46 - to that so oops not a zero we'll say two
18:48 - and then we'll use our back ticks like
18:50 - we've done previously and we'll go to
18:52 - slash room
18:53 - slash dollar sign open the curly braces
18:57 - and then this dot state
18:58 - dot room code so now what will happen
19:02 - is if we are in the situation where we
19:04 - have room code we'll simply have this
19:06 - redirect component which will just
19:07 - redirect us
19:08 - to the correct page now again i don't
19:11 - know why
19:12 - i'm getting this weird syntax error so
19:13 - let me just have a look and
19:15 - then oh it's because i did not end this
19:17 - redirect
19:18 - tag okay so now that i end that there we
19:21 - go now it's all working so pretty much
19:23 - what we have is if we have a room code
19:24 - redirect to that otherwise
19:26 - simply render the home page now i think
19:29 - that
19:29 - is all good and now what we need to do
19:32 - is uh
19:33 - actually just see if this is working so
19:34 - that should be it let's have a quick
19:36 - refresh here you can see i was looking
19:38 - at this component did mount to make sure
19:40 - that i was telling you guys the right
19:41 - thing
19:42 - let's close that let's refresh
19:45 - empty cache and hard reload and what's
19:48 - going on here do we have any issues in
19:49 - the console
19:50 - doesn't look like we do but we can see
19:51 - this is just loading like crazy and just
19:54 - constantly
19:55 - loading and what do we have here
19:57 - uncaught type cannot read property room
19:59 - code of
20:00 - null okay so let me just have a quick
20:02 - look and see what's going wrong here and
20:03 - i will be right
20:04 - back all right so i found what the issue
20:06 - is apparently i had this dot set state
20:08 - equals if this really should be
20:10 - this dot state equals uh so my apologies
20:13 - about that just an issue in the
20:14 - constructor here and that was causing us
20:15 - to have a problem
20:17 - so let's give a quick refresh here and
20:19 - now we can see that this actually does
20:21 - redirect us to the room so if i go back
20:23 - to the home page
20:25 - you can see that it flashes for a second
20:27 - that uh that home page
20:29 - and then it redirects us over here so
20:31 - let's actually just go to
20:33 - slash join and then we can go back
20:36 - and we can see that boom automatically
20:38 - redirects us back to the home
20:40 - page now or sorry not the home page but
20:42 - to the room page that we're in
20:44 - now we probably don't want that behavior
20:45 - exactly to be happening but pretty much
20:47 - what we're going to do now or in the
20:48 - next video is we'll add a button and
20:50 - we'll add some kind of nicer styling to
20:52 - this page
20:52 - that will let us actually leave the room
20:54 - so then we'll again send a request to
20:56 - the back end it will then remove that
20:57 - from our session
20:58 - and then that way when we go back to the
21:00 - home page it doesn't you know
21:02 - flash and then show us this it just
21:03 - keeps us on the home page
21:05 - so anyways that was all i wanted to show
21:07 - you guys in this video
21:08 - that's how we can use the user session
21:11 - to actually redirect them to the room
21:12 - that they're in
21:13 - so now say you know i close this tab and
21:16 - i go back to that this page it just
21:18 - automatically brings me into the room
21:20 - so i don't need to press the code again
21:22 - i don't need to rejoin
21:24 - and that way it's just more convenient
21:25 - say you know like you close your safari
21:27 - app on your phone the example i keep
21:29 - giving and then you open
21:30 - it back up you're already in the room
21:31 - you were in before all right so we're
21:33 - making some really good progress on this
21:35 - app
21:35 - again i hope you guys are learning a lot
21:37 - uh and you're excited about what's
21:38 - coming in the future of this series
21:40 - because i definitely am so with that
21:41 - said if you enjoyed make sure to leave a
21:43 - like
21:43 - subscribe to the channel and i will see
21:44 - you again in another youtube video

Cleaned transcript:

hello everybody and welcome to video 8 in this django and react tutorial series what we're going to be doing in this video is kind of starting from where we left off we're actually going to be working on the home page we're going to be trying to make it so that we can actually redirect the user to the room that they're currently in if they leave the website and then rejoin it so pretty much we're going to be styling this home page actually making it look better than just a paragraph tag that says this is the homepage we'll have a button that says join a room we'll have a button that says create a room based on what they click they'll get redirected to those different pages and then if the user is already in a room for some reason say maybe they left the website and came back to it will automatically redirect them to that room so that will mean in the next video we'll have to actually code out some more stuff on the room page itself which will allow a user to leave the room so that they can you know get into another room or create a room of their own anyways we've got a lot of stuff to do a lot of cool stuff still to come in this series i hope you guys are excited let's go ahead and get started so the first thing that i want to do is i actually want to start working on the home page and just coding out what this should look like so pretty much we're going to have this route right here which is the home page and well we need to look better than this paragraph tag now i'm actually going to put everything that i want to render here inside of a separate method or a separate function just because it will be a little bit easier if we can have it kind of separated for what we're going to do next but anyways let's make a method and let's just call this render main section or you know we can even call this render home page like that that makes sense as well inside of here we don't need to take anything and we'll simply return some brackets like this and then inside of here what we want to render we'll just call this function from inside of this render function and then it'll give us all that html or the jsx or whatever you want to call it anyways we're going to need to use a grid we're going to need to use typography we're going to need to use some buttons so we need to import all of that so let's go up here and i'll actually just do it above react router dom and i'll start by saying import we're going to import the grid we're going to import the button we're going to import a new thing that i don't think we've used yet called button group and then we are also going to import typography now that is all going to be from at material ui core all right so now that we have all that let's go inside of here and let's start setting up what we want so the first thing that i want to do is just make a grid this is kind of standard just to make sure everything's nice and centered so we're going to say grid we're going to make this one a container i'm actually gonna say the spacing is equal to three and then i'm gonna close the grid tag like that now inside of this grid we're gonna make two grid items one for pretty much each thing that we're gonna have so we're gonna have a big title this title is going to be kind of the name of our app i'm just going to call it house party but you can call this whatever you want feel free to change the name and then we'll have another grid item and this grid item will store the two buttons i want to have two buttons horizontally aligned one that says join room and one that says create a room anyways you'll get it as we go through but let's make the first grid item so if i can spell grid correctly we'll say grid item xs equals 12 we will say align equals center like that and then close the grid now we can just copy this because we'll use this again down here and in the first one we want to put our title so i'm going to go ahead and do a typography tag like that we're going to say that the variant is equal to h3 so a little bit bigger than what we've been using before which was h4 and then we'll say the component is equal to h3 as well now we can end the typography tag and inside of here we'll just put what we want our title to be now i said that i wanted to call mine house party so let's go ahead and do that and call this house party nice now inside of the next grid we want to set up a button group the reason we're setting up a button group is because we want to have two buttons aligned horizontally and this is just the easiest way to do this it's literally the tag is just called button group and it will take the two buttons based on kind of the stuff that we give it and make sure that they are aligned horizontally all right so inside of here we're going to do our button group so we're going to say button group we're actually going to write this thing called disable elevation if you want to see what it looks like with elevation you can just remove that tag but pretty much this is just going to remove kind of the shadow that by default is showed up that i don't want then i'm going to say variant of this is going to be equal to contained this will make sure that we're aligning them horizontally and then the color for this for our button group we can make it equal to primary although it doesn't really matter what we have for that all right so now we have button group here now we're just going to define two buttons we've already done this before many times we'll say button we'll start by defining the color this one will be primary and then we'll say what do we want this button to go to well we want this to go to the slash join page then we'll say what component is this button well the component is going to be equal to inside of our little squiggly brackets like this it's going to be equal to a link which we have imported up here all right awesome uh so then we can just close the button actually i guess we'll just do a full button like that and then inside of here we'll do our name and we'll say join a room okay and it's going to copy this we'll keep it inside of the button group because we want these grouped obviously the next one instead of being primary is going to be secondary like that we don't want to go to slash join we want to go to slash create this too will be a link and then instead of join a room we can simply say create a room alright so now we actually have the render for our home page we can take this and just use it inside of this render method so inside of here it's going to put two squiggly brackets and say this dot render home page and now whenever we go to slash we should call this function or this method we should show all of this jsx slash html all right so let me go to my browser let me refresh and you can see that now we get house party join a room and create a room now some of you may have noticed that sometimes i'm right clicking on this reload button in google chrome and i'm pressing empty cache and hard reload i'm messing with like a bunch of different versions of this application because i coded out before the tutorial to make sure everything looks good so sometimes the caching is all weird if for some reason you guys are updating stuff and you're not seeing it in your browser if you're on google chrome just make sure you open up the inspect window so you have to have the console open and then you can right click on here and click on empty cache and hard reload anyways let's make sure this is working i'm going to press on join a room brings us to the joy in a room page let's go back create a room brings us to the creator room page let's go back awesome that's perfect this is working and that's what i wanted for my home page now what i want to do is make it so that if we go to the home page and we're already in a room it automatically redirects us to that room so to actually accomplish this what i need to do is pretty much right when this application loads or right when this home page loads i need to check if the user is currently in a room and if they are in a room then i need to redirect them now to do that we need a way to check if they're in a room right so really we need an endpoint that we can call on the server that tells us hey is this user in a room if they are what room are they in and then from here we can redirect them to that room so i'm going to start by just creating what is actually going to be kind of the entry point for this now i don't think i've talked about these before but in react there's these things called life cycle methods now essentially these are things that you can kind of hook into that allow you to alter the behavior of the component so the life cycle method that we're going to be using this is called component did mount so we will continue in one second but i need to again thank the sponsor of this video and the series which is algo expert algo expert is the best platform to use to prepare for your coding interviews at large tech companies and they recently released an awesome new feature which is mock interviews on the platform so you can actually sit down and perform a mock interview with another live human being which is always some great practice if you guys want to check out algo expert have a look at it from the link in the description and use the code tech with tim for a discount on the platform so componented mount pretty much means that the component just rendered for the first time on the screen there's a bunch of different lifecycle methods i'm not really going to go through them in depth here you can look them up if you want to see what they are but there's pretty much are just ways to hook into the behavior of this react component so if you want to do something before it loads or before it actually renders on the screen well then you would do that in a specific life cycle method if you want to say make the component not update when something specific happens then you would hook into the should component update method or hook or whatever you want to call it and just say hey no we shouldn't update if this happens there's a bunch of different things you can do they actually are pretty important to understand and we'll use more of them as we go through this tutorial but for right now we're just going to use component did mount now some of you may be noticing that i put this async keyword here uh we will need to use that i'll discuss why in a second but but usually when you do a component mount you don't have the async before it the reason we're going to have async before it is because we're going to be performing an asynchronous operation inside of component did mount now if i don't put async here in case you're not familiar with what async means if i don't have that keyword here that means that whatever i put in this method we need to wait for all of that to happen before we can do anything else and pretty much what we're going to do inside of here is we're going to call an endpoint on the server and that could take some time right imagining these things are not on the same device maybe the client is sitting you know halfway across the world this could take like a second or two or maybe even just like a few milliseconds to load so we want to make sure that the rest of our application isn't waiting on this component did mount method and that only once this is ready to go it actually performs the action inside of it so if we put async here that pretty much tells the program that hey this is asynchronous which means we don't need to wait on this to finish before we can go ahead and continue doing other things in the program but as soon as this is ready to go or as soon as we actually receive a response from the server and we'll see that in a second then we'll go ahead and actually execute what's happening inside of there anyways i hope that kind of makes sense as i said and as i keep saying it will make more sense as we go through but i just feel like i need to explain that in case some of you guys are wondering all right so now that we have that uh let's actually go to the server and just make our end point this one's going to be really simple and then we can call it and then we'll actually be done for this tutorial so what i want to do is create a new view here and i'm just going to say class and this one i'm just going to call user in room again feel free to call this whatever you want but we're going to inherit from api view and all we want to do in here is simply we're just going to send a get request to this endpoint uh and then the endpoint will check hey is the current user in whatever session they're in uh are they in a room and if they are then we will return that room code so i'm just going to define get like that i'm going to say self request and then format equals not for nat format equals none like that and then here i'm going to say data equals to and then we're just going to do a blank python dictionary we're going to say code this is what we'll use as i guess the key for returning our actual room code and then we'll say that's equal to self dot request dot session dot get and then room underscore code now notice this is the same thing that i'm using inside of here right when i actually update the user session and add that information telling us hey what room this user is actually in so it probably would make sense to actually make kind of a global variable at the top of this file that says you know room code field or something and then we put that inside of all of here so they're consistent but for now it's fine we'll just leave it as a string room code so this is how you get information from the session if there is no room code it will simply return none now there is one thing that we need to quickly do inside of here we need to make sure that the user actually has a session so we're going to do the exact same thing that we've done previously we're just going to take this right here and put this at the top of our function here at the top of our method just to make sure that we actually do indeed have a session because if we don't have a session well that is problematic so now that we have that what we're going to do is we're simply going to return a json response now we have not used this yet so i'll discuss it in a second what this does is take a python dictionary and serialize it using a json serializer and then sends that information back to the frontend or sends it in the request so just like we had you know this uh i guess room serializer right it's the exact same thing except we're just going to take an arbitrary python dictionary rather than a python object like a room or you know like database models that we had so let's go to the top of the file here we're going to say from django dot what is it here i think it's http we're going to import json response like that so there we go we have json response and now all we have to do is instead of json response we're going to pass the data that we actually want to send and then we need to pass the status code so we're going to say status equal status dot http underscore 200 underscore ok again remembering that if they're not in a room we'll simply return none so we can handle that case on the front end where we say hey you know user is not in room so we aren't going to redirect them all right now we need to set up the url for this so let's go to urls.pi let's import user in room like that and now let's make our path so we're going to say path i guess we can call this user in room i mean i guess that makes sense that's what we call to the class and then that will be user in room dot as underscore view all right so now we have our url uh we have our api endpoint all that's left to do is actually call it and then kind of handle the logic or handle what happens based on the response that we get so let's go back to our home page now inside of here i am simply going to actually fetch or send this request so that we can get if the user is in the room so i'm going to fetch slash api slash user hyphen in hyphen room remember not to add the trailing slash otherwise that's going to cause an issue we're then going to say dot then here we're going to take a response and we're going to return the response dot json like that and this will have to have parentheses we're then going to say dot then one more time here this is going to take data and then what we're going to do is actually something that i've not yet talked about but let's just save that and get that going so what's going to happen right now is we're going to call api user in room this is going to return to us whether or not we are in a room and if we are in a room we are going to actually get that room code coming in through the field called code and then what we'll do is we'll return the response.json so we'll just get the json from our response that will then go to this dot then so now we'll have data which is really just a json object then we can parse and look through this json object and pretty much get the room code so what i want to do is i want to store this room code in the state of this home page and then i want to use that inside of my render method to determine whether or not i need to redirect us to another page so you'll see kind of why and how this works but let's start by just setting some state so we're going to say this dot set state like that and that's going to be equal to room code and by default this will be no so now we have some state so what we'll do inside of this dot then that we haven't yet written is we will say this no not touchless what i'm saying this dot set state and then in here we'll say room code is equal to data dot code now if for some reason the or i guess if in the situation where this code is none we will just update room code to be equal to null once again so that would be totally fine and all will still work all right so now that we have that what we can do is actually use this state inside of our render method and remember that pretty much the way this component.mount is working is once we've rendered the page so we've actually already called this render method one time we will asynchronously do this operation so once this is done and this has completed we will have set the state and this setting of the state will force our component to rerender so once it rerenders then we'll say oh we have a new room code down here we'll see that we have a new room code and we can go to that room code because by default when we start this application the room code will be equal to no so on the first render it will show us the home page and then after this component.mount is finished running we'll see hey we have a room that we're actually in we need to go to that and then it will redirect us there based on the logic that i put inside of render so inside of render what i'm going to do is kind of you do a weird thing here but i'm going to go inside of my route for the home page and pretty much i have two cases right i have the case where we're in a room and the case where we're not in a room so i need a way to tell us whether hey you know we redirect to the room or we just show the contents of the home page so i'm going to say render this is actually a guess i guess a method or something that you can hook into and you can change what happens when this route is rendering something right so here we have component is a room join page here when i define render this just means that if we're on this route it will call this render method whatever we put inside of here is what's going to show up okay so i will actually remove this here and now what i want to do is inside of render i need to make an arrow function this is because whatever i put inside of here this is the function that's going to be called when i'm rendering this route so if we are actually on this route then we will render whatever or we will call this function which will then return to us whatever we should render so inside of here i've done an arrow function i open up my parentheses again now i'm going to return and we're going to actually use the ternary operator here to check if we have a room code or not so i'm going to say this.state.room code question mark in the situation where we actually do have a room code then what we need to do is we need to redirect to that room code so i'm going to put parentheses here and we will redirect in that situation and then i'm going to say colon and in the colon i'm just going to say this dot render render home page yeah i think that's what we called it right this star render home page yeah this dot render home page now for some reason that's giving me all kinds of issues let me just wrap this oh i think it's because i didn't put something here okay so i don't know what's going on but i think it's just because i haven't actually finished writing what i need to put inside of here but anyways what we're going to do inside of these parentheses here is we're just going to say redirect and we're going to redirect to and then inside of here we're going to have to actually grab the room code and redirect to that so oops not a zero we'll say two and then we'll use our back ticks like we've done previously and we'll go to slash room slash dollar sign open the curly braces and then this dot state dot room code so now what will happen is if we are in the situation where we have room code we'll simply have this redirect component which will just redirect us to the correct page now again i don't know why i'm getting this weird syntax error so let me just have a look and then oh it's because i did not end this redirect tag okay so now that i end that there we go now it's all working so pretty much what we have is if we have a room code redirect to that otherwise simply render the home page now i think that is all good and now what we need to do is uh actually just see if this is working so that should be it let's have a quick refresh here you can see i was looking at this component did mount to make sure that i was telling you guys the right thing let's close that let's refresh empty cache and hard reload and what's going on here do we have any issues in the console doesn't look like we do but we can see this is just loading like crazy and just constantly loading and what do we have here uncaught type cannot read property room code of null okay so let me just have a quick look and see what's going wrong here and i will be right back all right so i found what the issue is apparently i had this dot set state equals if this really should be this dot state equals uh so my apologies about that just an issue in the constructor here and that was causing us to have a problem so let's give a quick refresh here and now we can see that this actually does redirect us to the room so if i go back to the home page you can see that it flashes for a second that uh that home page and then it redirects us over here so let's actually just go to slash join and then we can go back and we can see that boom automatically redirects us back to the home page now or sorry not the home page but to the room page that we're in now we probably don't want that behavior exactly to be happening but pretty much what we're going to do now or in the next video is we'll add a button and we'll add some kind of nicer styling to this page that will let us actually leave the room so then we'll again send a request to the back end it will then remove that from our session and then that way when we go back to the home page it doesn't you know flash and then show us this it just keeps us on the home page so anyways that was all i wanted to show you guys in this video that's how we can use the user session to actually redirect them to the room that they're in so now say you know i close this tab and i go back to that this page it just automatically brings me into the room so i don't need to press the code again i don't need to rejoin and that way it's just more convenient say you know like you close your safari app on your phone the example i keep giving and then you open it back up you're already in the room you were in before all right so we're making some really good progress on this app again i hope you guys are learning a lot uh and you're excited about what's coming in the future of this series because i definitely am so with that said if you enjoyed make sure to leave a like subscribe to the channel and i will see you again in another youtube video
