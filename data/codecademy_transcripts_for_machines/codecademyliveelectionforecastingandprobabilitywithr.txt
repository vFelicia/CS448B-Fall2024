loading just wait a little bit i can never tell when it's like even actually going all the way through loading it sometimes makes us be live so yeah we'll just hang out here for a second until we actually confirm that we're live i think we probably are but we'll see okay cool we are live so if you want to go ahead and get started whenever you're ready sure yeah welcome everybody i'm super excited to be here um i'm sophie this is my coworker alex and we are both curriculum developers at codecademy and we're both uh working on data science content a fair amount on the site so we've been working on our own data science projects for a while and um and asking our own data science related questions and um one of the things that we were working on for the last week or so is digging into some of the 538 data and we thought we would share all that work with you guys so um feel free to say hello in the chat i think we're live on youtube and twitter i think or twitter yeah okay well we're live on a few different platforms but we are going to um be monitoring the youtube chat so i have that open um feel free to say hi feel free to say where you're calling or you're watching from it's always fun to see where everybody is at um and if you have any questions or you want us to stop and like discuss anything um feel free to mention that in the chat as well um yeah i i'm really excited for this one if you haven't been following our youtube channel very much we've been doing these live stream series kind of teaching lessons on codecademy uh we just finished a series teaching introduction coding topics and so we're kind of looking for the next live stream thing to do and uh last week sophie was telling me you were like looking around at 538 data and we felt like it would be a a fun quick little oneoff stream to do so um sophie i'm like blown away by uh the lesson that that you prepared maybe i don't want to set expectations too high but i'm super excited too to go through this stuff yeah so uh i think the first caveat that we just want to share with everybody is that uh neither of us are election forecasting experts um we both are people that like asking questions and trying to understand things um and like you know and we both like to try to understand things through code and so um for me you know like as i read the news and i see these simulations i want to understand what's going on i want to know how to make my own i don't know form my own opinions about what simulations are good or bad or like i don't even know uh but i want to be able to understand it so that i can feel like i know what's going on in the world and so um the way that i do that is i read a bunch of stuff and then i download some data and then i kind of play around with the data on my own and so i think the goal for today is one to kind of talk about election simulations and election forecasting but a bigger goal i think is to kind of demonstrate to you how if you're reading stuff and you want to understand something you can kind of dig a little bit and sometimes download your own data and kind of ask your own questions and so what i hope people get from this is that it's possible to do um and we we also have uploaded some code uh like the final code uh that we're using today um where can people get that alex yeah so if you're watching on youtube or if you're watching um in our uh youtube channel after the fact this will be posted after the fact um it's all in the description of the uh youtube video so we have a link to the data that we're using from 538 we will link to a blog post from andrew gellman who uh sophie we're going to talk about this specific blog post a lot i think and then finally we have a link to the code that sophie um wrote in preparation for this and hopefully we'll be able to show a lot of that in this stream perfect awesome so i think with that we will get started um and so i have this page up hopefully everybody can see it this is on 5 38 and this is um they're kind of like interactive election map where you can try out different scenarios and see how it changes the map so by default when you first go to this site you can see all of the all the states are colored by how likely uh we think they are to go red or blue so if you hover over any state like here we're on texas and it says trump has a 61 and 100 chance or 61 chance of winning based on this forecast and biden has a 39 chance um if we hover over florida we see biden has a 69 chance and trump has a 31 chance um and then what you can do so this is kind of like the baseline map and then what you can do is you can turn certain states different colors so um you can say okay well what would happen if pennsylvania goes red and then you'll notice that the whole map changes um so before if we go back to kind of normal it says we have biden with an 89 chance of winning um and then if you turn pennsylvania red all of a sudden now this gets flipped where trump has a higher percentage chance of winning based on the simulation and another thing you'll notice too if you look at this is um like right now florida is slightly blue so biden has a 69 chance of winning based on this baseline map but if we turn pennsylvania red all of a sudden florida now goes red um slightly red and is now slightly in favor of of trump winning um and so we've got like some interesting things going on here where when you first come to this map at least when i first came to this this map and sort of saw this baseline and i see these probabilities um for each state i'm thinking okay so it's kind of like it's like flipping a coin or something like this where you know a coin has a 50 chance of coming up heads if i flip that coin it's gonna come up heads half the time and it's going to come up tails the other half the time but then you get a little bit i don't know i felt i get a little confused because then i'm thinking well how can we really talk about probability in that way with this map because well first of all there's only going to be one election right so like with a coin flip you could imagine flipping a coin like a million times and when we say that there's a 50 chance of it coming up heads we really mean that like if we flip that coin a million times half the time we expect it to come up heads but with the election there's only going to be one election day tomorrow like there's going to be an outcome and it's not like we could repeat the same election um and there would be slightly different outcomes like these probabilities are not really uh or maybe it's false to call them probabilities but the way they're presented they kind of seem like them these probabilities are not um you know imagining that we're running the same election multiple times and just like depending on who's a who's able to get out to vote we expect some differences like it's it's something else a little bit more complex here um and so i felt like i wanted to understand this a little bit better um and so i i started by reading a lot on 5 38 i also um i follow andrew gelman's blog he's a statistician at columbia um and he helped create a forecast for um the economist i believe and uh so he has some back and forth and um this is a blog post that he wrote somewhat recently about 538 simulation or 538's map um and he points out some interesting edge cases i think it's a healthy back and forth um but he points to he has a uh someone in the comments of his uh blog had pointed to a file on 538 site where you can get all of the data uh for this simulation map and so oops for this for this map you can get the data that's creating it um and so whoops and so i decided to download it myself i used some of the code that he actually provided in this article or in this blog post so um lots of credit to him for sharing his code um and and i went ahead and investigated myself so what i'm gonna do now unless alex is there anything you wanna no i think i i think kind of in all of this prelude i think uh you've hit on something that's a little bit interesting which is like uh you know we we probably started talking about doing this stream like a week ago and we had an idea of what we originally wanted to do and it focused a lot about that idea of like probabilities of like oh let's um you know uh let's run a thousand simulations of the election uh you know for every state we're gonna flip our coin you know it's not a coin but it's for texas it's gonna be 61 trump uh 31 uh biden or whatever it was uh we were gonna do that i think something that's interesting is that like we could just keep digging deeper and deeper where our results from our initial idea were a little bit underwhelming and we felt inaccurate or like not not actually showing what these simulations are going on and so we uh well you uh dug deeper and found more discussions and so again abstracted away from the conversation about elections and forecasting and all this stuff i think this is a really common thing that happens in data science where basically you join a part of the community where sophie has really dug into this article really like read these discussions trying to understand what other people are talking about trying to replicate it herself which i think is a really cool demonstration of what it means to be a data scientist where you're able you're empowered to start with this thing that you kind of understand and slowly grow knowledge about it yeah no i think it's my favorite thing about the skills that i now have is that i i always have been the person that wants to understand things and like asks a million questions until i feel like i have a grasp on it um and so this is a fun way to be able to do that okay so i'm gonna actually go to this file you can see um it's like it's if you just take lop off this last part of the um of this it just brings me back to the map um the simulation map so it's if you take a closer look you can see that it is what is generating this map um but we can go to this file and i'm actually going to demonstrate this full process because i just think it's useful um so i'm going to go ahead and i'm going to say file save i think save page as yup json um simmed maps for right now i'm actually gonna just save it to my desktop um i'll i'll show you in a minute what i'm gonna do with this um okay so we have it saved as a json file and i'm going to close this because it makes my computer fan start going um and now i'm going to just kind of demonstrate uh how i would open this file in r and r studio um i so i use rstudio our studio is basically like a some software that allows you to run our code and allows you to see output from that r code in a way that's simpler um and so what i'm going to do is i'm going to open r and hopefully you guys can all see oops um so it's it's actually opening me up into a file that i was working in before but if you've never used our studio before or if you're working in somewhere else it'll open up to whatever you were most recently using um and what i like to do whenever i'm working on a new kind of set a new project is i like to create a project um which just makes it easier to read in data um without having to use like all of the uh without having to like say exactly where that data exists on your computer um so what i'm gonna do is file new project um i'm gonna create a new directory because i don't have one to dump stuff in yet um i'm going to say new project and then i am going to create uh an election live stream folder i am going to just put this on my desktop and i'm gonna press create project and it's gonna switch me over now to this new project in um in our studio and now i can dump any files that i want into this folder and then it r will all or our studio will know that like i'm just working out of this folder so anything that i put in this folder is something that i might want to use um okay so i'm gonna open up a new finder window you can see whoop you can see that this folder that i made is just a folder on my this project that i made there's a folder on my desktop and i'm going to move this json file into it whoops sorry um i'm having issues with my sorry i'm gonna go to this i don't know why it's doing that sorry one more do you know i did this earlier yeah um maybe it's because it's open in uh original studio like you want to close your visual studio uh it's not open um um i don't know okay let me let me try this one more time i'm just having like you can you can always also use your uh the other project that you have set up and uh i think it has to do i'm sorry guys uh i think it has to do with my like dual desktop situation going on here so i'm gonna go ahead and why here maybe uh maybe you can stop sharing your screen for a sec and then uh i think i might have it like well what i'm going to do actually is just drop it in there um file save pages and then i'm just gonna put it into that the folder um hopefully this won't happen to you oh and rename it yeah there you go okay there we go and now we can pull this back okay well basically all i was trying to show is that uh if you put that file into this folder that we're you're working in then you'll you can see it even in our studio in that um in that little file area and now i'm going to create a new file in here i'm going to make it an r script i'll just save it as demo you'll see it's down here and now i can start writing some code um so the first thing that you'll need to do is read in this data um and in order to read it in we actually need a library called our json so what i'm going to do is quickly so if you've never installed um if you never installed our json in r the first thing you would need to do is do install.packages um and then rjson in quotes and you could run that and this is called the console so this is where you can run code um and that will install it if you are on the internet um but if you've already installed the package you can load it using the library command um so i'm going to go ahead and load that file and then um i'm gonna go ahead and load this data so i'm gonna call it sim maps um and i'm gonna say from json and then the file name is simmed maps sophie when you have a sex you want to go over your browser and close that uh that giant tab that's making your computer work can you hear it uh i can't i can't tell if i can hear it exactly but uh audio quality seemed like it got a little bit worse yeah just close that tab and hopefully it'll get better oh yeah that file like stress that's huge um okay so we've got this and then whoops sinned do you see what's wrong with this let's see uh sorry i was talking in chat no you're good zoomed maps oh that worked okay cool um all right so now i'm gonna just so i have lo uploaded this file um from here from my desktop or from this folder and i've saved it as something called sim underscore maps and now what i want to do is just take a look at what this object is um and so just you'll notice that i'm writing code up here i'm saving that code but i can also run code at the bottom here i can save code up here and then run it all at once or i can just write like one line at a time down here um cool so what i'm gonna do is first take a look at sim maps and one of the nice things about rstudio is that if you use this dollar sign operator it'll tell you what is contained in this like object um and so i see that there's something called states in here which i can print out and i see that these are the state codes i also notice when i look at this that there are some interesting state codes in here which you might be able to guess if you've done some election or if you've done some research you might be able to guess what these are but you'll see there's an n1n2 and n3 and then there's also an m1 and an m2 um and so those are those are the like i don't know exactly what they're called but basically in nebraska and i think maine um you they split out the electoral votes into different regions and then the state itself also gets some electoral votes for the entire state um and so these are like the those separate regions that get their own electoral votes yeah this will be relevant later on when we start dealing with something that we're going to start having a bunch of numbers and there aren't 50 of them there are uh what 56 of them i think because of these extra nebraska ones and main ones in dc as well dc is in here as well um and then i'm going to just take a look at the other piece here so we've got sim maps maps and wow there's a lot in here let's take a look i'm actually gonna we see that this is a list um it's got a bunch of it's got basically 40 000 different sets of vectors within uh these like list headers so i'm actually just going to print out the first one because they think it's a little easier to see um so the way i'm going to do that is i'm going to just kind of call this like first this one is number 1000 but the first one that got printed out would be number one i'm just gonna print that out and then i'm gonna print the states along with it so that we can see them um and so it looks like so these map these lists within the maps they are um they are longer than the states lists and it looks like they're all starting if you kind of look back at this they all start with three numbers um that kind of follow a similar pattern so it's first either a one or a zero um and then there's numbers like 187 and 351 or 302 and 236. um and so just maybe by guessing uh i you can probably tell that these are um these are the number of electoral votes for each of the candidates and then this one or zero um if you dig a little deeper you can figure out that this is like a one if trump one and a zero if um biden won and then uh it goes i i guess trump electoral votes and then buy in electoral votes for each simulation separately and then it gives numbers for each of the states um and those numbers you'll notice there's like positive and negative numbers so that's not the share of or it's not the um the share of the vote but rather the margin um so like how much one candidate beat the other by so if it says 1.12 this is like trump won this state by 1.12 percentage points and you can figure out that it's trump won the state by 1.12 percentage points by taking a look at like a state that you kind of know like uh wyoming right is like clearly a positive number versus i don't know what's another one that's easy to find that would be democratic so california is probably one of those first big negatives it's probably about negative 37. so like one two three four five in one two three four five and is this negative 37 so that means that in this forecast and in most of them right like it's always a bigger negative number and that would suggest that that's like how much trump would lose by in that simulated election so basically yeah so basically each of these like 1000 or 40 000 i mean um lists is like a simulated election um that's being used to generate the map that you see on 538 yeah one of the things i think is cool about this is again this was kind of a instance of you having to like interact with the community follow along in that blog post i know you were reading the comments on that blog post a lot um this data the explanation of the data isn't immediately obvious right it took a little bit of investigation to figure out what's going on and i imagine that um you know people in the community are helpful in in terms of doing that sort of stuff um often times you'll encounter data where things are a little bit more spelled out where they'll give you descriptions of the data that sort of stuff but sometimes you come across data like this where it's like you kind of have to deduce what's going on a little bit yeah totally um okay so what i'm gonna do now is because this is currently in like a kind of tough uh this this format is not the easiest format to parse if you're trying to like look at things more easily so what i'm going to actually do is i'm going to convert all of these separate lists into basically one big array um and i'm using i'm gonna use andrew gelman's code because he just did it and already and it makes it very very easy um so i'm gonna pull this over and then i'll walk through what the code is doing um i guess i called this something else so naps um okay so basically this first uh line of code all we're doing here is we're just saving the states separately so um remember we when we pulled out the states that's this is what we got now we're just saving it as something called states so that we can pull that out um the next thing is that uh we're we're taking we're gonna make this um this array the same length as the number of simulations that 538 ran um and so you'll see this is just 40 000 um this length right so we could have just said n sims is equal to 40 000 because we know they ran it 40 000 times but this makes it a little more reproducible if they change this data and they decided to do it 50 000 times then we could still download this data set the same way and our code would still work um so we're saving nsims is the number of simulations that's 40 000. and then we're gonna create this empty array um so all this is doing is it's basically filling an array with n a's and that array is going to have 40 000 rows and it's going to have 59 columns the reason we want it to have 59 columns is just that um there are 59 numbers in each of these like list elements um and again those numbers are the three kind of like markers where the first one is who won it's either one or a zero and then the two uh electoral votes and then the 56 states or you know uh nebraska has four of them uh because of how that works so so it all adds up to 59 total right and now so if i run this oops i guess i didn't run this i'm using command return by the way to run each thing you can um also just press run and you'll see it like copies it down into the console um so you can see that it ran um okay cool so i'm just gonna now show you what this looks like so sims um we'll do just like the first 50 rows um is really or that's hard to read but basically i just made this uh this array it's got columns where there's no name for the first column then it says trump biden and then it's got all the states um uh as the rest of the state codes as the rest of the column names in here yeah so what we're really doing here is we're just kind of like organizing our code would you say this is data cleaning or data like um preprocessing i guess where before we had yeah before when we had um like the list of states and then the um just the list of numbers without any like matching to them now we're kind of combining them so later on in our code we can say things like okay get me the uh give me the number associated with florida from the first um from the first simulation or get me every single simulation from the numbers from every single simulation from florida and it's gonna be a lot easier to do that now that we've associated the names with the numbers yeah exactly um so we've created this empty array and now basically all this code is doing is filling it in so we're saying for every row just take the list from um from that like initial maps data take the list and fill it in as a row in this array so once we run this now we'll see that if we look at um sims one to we'll do like one to ten now um we it's just filled out it's basically one big array where each row is one um one election simulation and uh there will be 40 000 rows in this i've just printed the first 10. nice cool um okay so now we've got this thing called sims that is a little bit easier to work with um one other thing that i'd like to do is i probably just want to pull out like these first three columns are maybe not as useful as the first as the rest of them or at least what we're going to be looking at um is just the the state column so what i'm going to do is actually just pull those out so i'll make a new um a new array where i just say okay i want the simulations um but i just want the columns and i wrote down before uh yeah so four through 59 yeah that makes sense right so we're cutting off the first three columns right okay i think and that and that comma beforehand uh so i'm i'm not a huge r person i do much more python that comma beforehand is just saying i want every row and then the comma says okay i've got every row what which columns do i want um and we want yeah the syntax is like square brackets rows and then columns so you can say like if i did 1 to 20 then i would get like the first 20 rows um and those columns since i want all the columns i just leave it or all the rows i just leave it blank that syntax really tripped me up at first i hated seeing like that floating comma i feel like this compared to well we don't have to get into our discussion about python versus i feel like this is so much easier now that i understand it i get it but you know just coming from python it looked very strange i see some people in the chat like our snap's the best and then python slab it's growing on me i realized when i started doing this i kept using uh like python syntax and i was like oh god i've been working with python for too long losing my r skills um okay so now we've got all of our state simulations and now we can start taking a look at them um and so i think like the one of the first things that's interesting to take a look at is just the distribution of margins um for a particular state so um for example like i think when we were first looking at this when we started on the map we were looking at pennsylvania so i'm going to start with with pen well yeah i'm going to start with pennsylvania um and so we can also take a request from chat as well so we can also take a look but um and so the histogram function is the easiest way to do this um and what i'm going to do is i'm going to take the state sims and then i want um i want just pennsylvania there's a couple of different ways i can do this um i think actually since this is not saved as a data frame we can't do that um but i can so like we said before use the square brackets now i want a single column right i just want the pennsylvania column that has all of these values just for pennsylvania all these um these marginal like win percentages uh and i can uh just say i want um okay yeah so again this is uh well two things one this is the same syntax we want all rows comma just pa um something i need this here actually you can if you wanted like different if you wanted a selection of them you could create a vector and say which ones you want yeah we could get pencil we could get pennsylvania pennsylvania and new york but if we just want one we don't have to put that there um the other thing that this shows is again the kind of value of us putting it in this organized table where if we didn't connect the table with the names we'd have to know like pennsylvania was like the 25th column or something but now we can just straight up ask for pa um which is really nice yeah totally okay so i get this histogram it's got some it's default things here are a little bit uh maybe not easy to read so what i'm going to do is just change some of those things so i'm going to say maine is trump margins in pa and i'm going to say xlab is trump margin um and um i also can color it something so i can do like call equals red um and that looks a little nicer um i can also just like open this up a little bit so you can see it a little better and what you see is this distribution so basically um let's let's remind ourselves about what we're plotting so across all the different simulations um trump is gonna win or lose by some number of percentage points and this is the distribution so this shows us how often different ranges of percentage points when percentage point wins or losses are occurring so um the highest bar here looks like it's around negative five so that means that the most common outcome across all these simulations is that trump is losing by five percentage points in um in pennsylvania and if you look at the polling um the polling averages in pennsylvania you'll see that um biden is ahead by about five percentage points on average so this is kind of like a polling average more or less like it's telling us um on average trump loses by about five points in pennsylvania meaning that biden wins by about five points in um in pennsylvania and then this distribution on either side of here is giving us a little more information about how much error we think might exist in the polls so if this is the if this is the distribution of simulated margins for trump across all these simulations it's kind of indicating that based on 538's model they think that the most like likely outcome is that biden wins by um five points but it that could be off by as much as about 15 percentage points so it's unlikely but trump could win pennsylvania by 10 percentage points or by five percentage points um it's also unlikely but possible that biden wins pennsylvania by 20 percentage points on the other side um so zero would be a tie anything on this side anything to the left of zero would be a simulation where biden won and everything to the right of here would be a simulation where trump won yeah and i think one of the one of the main questions that i had when um i was going through this with you was like where do these numbers even come from and i know that we like digged into this a little bit but essentially that's like a little bit of the like real intense stat magic that's going on at um 538 is there different ways that they can like simulate 40 000 runs of the election to get these numbers for for each individual state yeah and i think the maybe i shouldn't call it an epiphany but the thing that this helps me understand and maybe it helps you understand too um if you're watching is that basically what's going on here when you're seeing percent chances or proportion of simulations where someone is winning it's basically like the proportion of this distribution that's less than or greater than zero so like if you calculate the proportion of this distribution that's like to the left of zero that's going to be on their website what they're saying is biden's probability or biden's chances of winning and this distribution is really like even if you read nate silver's comments on his model like he says that they predominantly in their modeling use um the polling averages and so essentially like this distribution what i can learn from it is like basically if you look at an individual state you'll see this distribution of margins where um where the most common one is going to be approximately what the polls are saying and then there's going to be some level of uncertainty and that uncertainty can we don't fully know like i think you can read what nate silver writes and you can kind of understand more about where that uncertainty comes in but basically it's like polling error like did we survey the right people did we wait like our observations appropriately based on like who's actually gonna show up to the polls like um are there other random factors that are gonna influence who comes out to the polls um and so this level and then some of the uncertainty i believe also comes from like how wrong polls have been in the past like it helps us understand like if we if we do this this polling how confident can we be that like the result of the polls or the result of an average of a bunch of polls is like accurately gonna tell us the outcome of the election and so this ra the randomness is more associated with our level of uncertainty about the polls than it is about like coming back to the coin flip like whether a coin comes up heads or tails which is like it could go either way every time you you do it right there's like no uncertainty with a coin flip it's like a known probability right um whereas with poles it's like we think that the the average is here and then there's some degree of uncertainty yeah i come back to the fact that you can't run the election multiple times but the uncertainty is coming from basically our uncertainty about our polls this is this is a question from from uh um which i think segues nicely into what we're probably going to go into next uh and you touched on it a little bit here does the data collected in surveys nicely represent the total set of those who ultimately vote i think that this is related to uh looking at the correlation between states and like how how yeah i think another so my advisor in graduate school taught an incredible class on um surveys and and actually like the way that polls work is that they're you're not just going out and surveying a bunch of people and saying like how many of those people said they'd vote for biden and how many of those people vote said they'd vote for trump there's also some like very complicated waiting that goes into that so like uh basically like if you only if you think on average like a certain number of hispanic women are gonna go out to vote but you only manage to survey like a smaller proportion then you're gonna upweight all of those observations to try to like match the demographics of who you think is is gonna vote so um so yeah so there's a lot of complicated like waiting and math that goes into not just taking not just surveying people but like figuring out who are the people who are most likely to vote and how can we appropriately weight our sample in order to know or in order to more accurately guess how like our our survey relates to what's actually going to happen thanks um so the so there's some uncertainty here the other thing that i showed you guys when we were clicking around on the map is that when you click on one state and you say okay um pennsylvania is going to go blue or pennsylvania is going to go red then you saw that the other states are changing or the probabilities and the other states are changing and so there's some there's something going on where the outcome in one state is predictive of the outcome in another state um and so one of the things that andrew gellman does in his blog and for a different reason but it's super interesting to do is he starts looking at kind of like a a scatter plot basically of one state versus another so i'm going to do that let's say i want to plot um we're going to do pa versus florida and i just know from experience i'll plot this for you because i think it's like useful to see um it's going to take a second uh that it by default it uses these like circles that are not great so you can change that i think i had pch equal 20. um try it and you can change around just like before um you can change the uh the x and the y labels to make them easier to see so the x label is gonna be um pa margins um and the y label is gonna be florida margins oh my computer is making sounds again it's all right it's working hard oh well now my ocd is kicking in um okay i will rerun it um and you'll notice that there's kind of this relationship right like you can kind of draw like a positively sloped line through here so um you'll remember from before when we looked at just pennsylvania um those we kind of saw that histogram that like the trump margins range from negative 25 to up to like a little above 10 positive 10. um and then florida looks like the predictions are ranging from negative 25 to positive 30 almost um and so i see a question how do we know that this is trump margins for pennsylvania that's related to how we how we structured this data set um but basically i'm just once we pulled out uh each of these so we set up this this array with each of these as each of these states as columns um now i can just pull out and plot the pennsylvania column against the florida column and that's what this code is doing yeah and going back to that question of like how do you know what this data is actually doing again that's like part of the discussion all of these blog posts um yeah and you can kind of verify it for yourself where you can look at the numbers for a state that's likely to go trump or biden we did with wyoming you can see the wyoming numbers are all very positive you can see the um vermont uh numbers which um probably is probably a uh biden state all very negative so you can kind of extrapolate from there that positive is a trump margin um a negative is a vitamin margin right yeah exactly um yeah so i think it's interesting to kind of take a look at we see this relationship um and and basically what that tells me is right if if it turns out that pennsylvania um loses by or that sorry that in pennsylvania biden wins by 20 percentage points so trump loses by 20 percentage points then more in more of the simulations we have that florida had a similar result that like biden also won by 20 percentage points in florida if that happened and on the reverse side if trump wins by 10 percentage points over here then um then it looks like more of the more of these points are up in this corner right where in florida there was a similar margin for trump and so the question is and like the question that i ask myself when i look at this is why is that um and i think a lot of it having listened to podcasts and and read a bunch of blog posts a lot of it is basically because if we're wrong in the polls in one state then we're likely to be similarly wrong with our polling in other states um and so it's basically like if our if our polls are skewed towards biden in one state then they're more likely to be skewed towards biden in another state and vice versa do we want to show that weird example that we saw when we were playing around with this or is that just like too hard to explain i think we looked at california and wyoming where they were negatively correlated yeah i mean i don't have a good answer for it but i think that uh i think that this is like another example of how you could like play with this yourself so we can show it um so if you look at california and wyoming we see this like negative correlation showing up um i i honestly don't have a good explanation for why this happens but maybe if i read more i can understand it yeah i mean what this graph is saying is that if california goes to trump which is on the right side of the uh of the image then that means that wyoming will be more likely to go biden because that's on the lower half of the image and that's like completely reverse of what you would expect obviously most of the data is in the top left corner of california going to biden wyoming going to trump but yeah they have this inverse correlation which uh i was confused by as well yeah i'm sure there is an explanation um okay uh okay we're running a little bit low on time uh but i think that at this point it would be fun to look at some maps um i think a fun thing to do is kind of inspect how this correlation plays out uh by looking at a map um and so i'm actually gonna grab i'm gonna grab some code that i wrote prior to this um and it's gonna look a little bit complicated um but it's probably unnecessarily complicated this is this is uh me not liking using builtin functions um is really what's going on um so basically i wanted to plot a map of the us and you can do that with shape files which you can find on like census.gov but when i was doing that the scale was really off like because you have hawaii and alaska and you want you don't want those to be in their actual locations um the shape file that they had on on the census website had had it to scale and so everything was really tiny and so then in google searching um i found this this package called usmap in r that you can use to easily simulate or to easily generate us maps um but then it wasn't giving me enough uh i couldn't like put the labels i wanted or what like i couldn't ha i didn't have enough control over the inputs to their function and so instead of just using their function i pulled out their data um and this map will take an understanding of uh of what the number correlation is we're going to have numbers between zero and one here um let's see oh you need a oh oh that's fine i don't need this this was for something else ignore ignore all the red i know it's stressful but ignore it okay so what i'm gonna go ahead and do is grab this um okay so basically what i'm doing here and i'll try to talk through it quickly is i'm taking the correlation so this core function will will give me the correlations between um between pennsylvania and other states so this gives me the correlation between pennsylvania and all of the other states the correlation is just basically a measure of how strong this relationship is so this is going to be a negative correlation if it was in just like a straight line um the correlation would be one so if we if we do the correlation of like california against california um we can even see it in that print out actually if you scroll down a little bit we can see the correlation of pennsylvania to pennsylvania somewhere in there there it is left second one yeah and then the larger the number the stronger this association is the the more clumped those points would be around a line the smaller the correlation so the closer to zero um the more dispersed these points would be there would be no real relationship um and if it's positive it's going to be a positive slope and if it's negative it's going to be a negative slope this is a lot we're building some new content though uh explaining all this year and i'm very yeah about it so so you'll be able to learn more once that is uh once that exists um okay i'm just gonna go ahead and you should we you should make this the the project of uh of that course ooh maybe that's actually not a bad idea um okay so we can see this i made this map um and so this is giving us the correlations between pennsylvania and every other state um and so basically you can see obviously pennsylvania is dark blue because it has a high correlation with itself but now we can see based on 538's model like if pennsylvania changes if the if we lock in pennsylvania as like red or we lock in pennsylvania as blue you can see which other states um are most are gonna have their probability of or their chances of going towards biden or trump change the most drastically so the darker colors are going to change the most drastically when pennsylvania changes and the lighter colors are going to change the least drastically so it looks like for example the whatever happens in pennsylvania based on this isn't really gonna change what we think happens in california or is this what a state is this that's uh alabama alabama sorry i need to like learn my learn my states again um but then you'll see you know other states nearby that are kind of like mississippi not alabama mississippi yeah mississippi alabama georgia got it i used to like say that in my head when you know when you were younger and you had to take those like i don't know if you had to do this take like quizzes where you need to fill in all the state capitals yeah um we have a question in the chat or a comment in your chat all of your correlations are positive do you want to speak to that yeah so in this in this simulation um all of the correlations with pennsylvania came out to be positive um i think most of the most of the correlations are coming out positive in this um in 538 like simulations just because i think it makes more sense for um for information like if your polls are wrong in a particular direction in a given state it makes more sense to me that your polls are wrong in the same direction in similar states it makes less sense to me um but again i'm not an expert and i'm sure there's a there is an explanation that like if your polls are favoring biden in one state that we think that like the polls are then more likely to favor trump than another state if we throw in uh i don't know how easy it is for you to change pennsylvania to california if you can throw in california there we might be able to see again there's that there was that weird negative correlation with wyoming so we might be able to see a negative correlation there um um to california yeah california yeah between california and uh and wyoming in particular it looked negative um i'll just do this i'm going to save it as core pa anyway but it's the new data why did that correlation not found did i not on this there we go there we go um yeah so now we see the scale runs into the negatives so california is negatively correlated with a lot of the south uh wyoming south dakota interesting yeah i really so this is like another uh this is another thing that i'm probably gonna spend more time uh trying to figure out and i think it's something that if you're interested like i very much encourage you to think about and explore yourself um and all of the all of the code to generate these maps and everything like alex said is available to you um if you want to just download my code and um and run it and then change it however you find interesting yeah in the in the youtube description there's a link uh that will download a zip file and then that's all of so please code that you can play around with awesome we are right at six o'clock so i think this is maybe a good time to wrap up is there anything else you want to shadow i don't think so uh this was super cool i love doing this kind of stuff i would love to do more things like this on codecademy um we can stall here for a little bit to see if people have questions i think we can probably hang out for like five minutes to answer some uh some last minute questions i see one from andrew right now um so yeah basically is there any historical data for if poems are wrong in one direction they're wrong everywhere in one direction so like i said i'm not an expert so i don't really know but i assume yes i i assume that if all of these simulations and and all of them have this kind of like correlation between states or all the ones that i've looked into um i'm assuming that that's because of historical data right and yeah and again the the data that we're using here are the 538 for uh 40 000 simulations of this election but the way that that data is generated is probably through some combination of historical data and current pollings and all that sort of stuff thanks jamie and morgan oh morgan is content contributor extort extraordinaire for the data science team um what was uh yeah uh taku says what is the lowest and highest correlation for california with other states i mean we can look at that right now right it seems like california is very highly correlated with washington colorado new mexico new york and pretty low uh lowly or negatively correlated uh with alabama mississippi tennessee arkansas uh yeah with correlation too it's about absolute value when we're talking about like how strong the relationship is but it looks like none of these negative correlations are really getting below none of them are getting to like negative 0.5 because that's not even on the scale so i would assume that these are pretty weak negative correlations and then we've got um all of the kind of light purple ones um are the kind of weekly positive ones cool awesome awesome um yeah in finishing up i think uh i at least would encourage people to go vote wherever you are um it's uh we're glad that we were able to get this in before election day just so we could show some data encourage people to vote um thanks for running this sophie this was super super cool i'm very impressed thank you awesome well have a good night