hi there my name is Michelle McSweeney and I am the domain manager for the data science domain here at code academy today in celebration of national coding week I'm going to take you through a project that you could put into a data science portfolio so if you are following along with us for the other two live streams this week um you saw benstone go through how to make a portfolio using HTML CSS and JavaScript that's fantastic but now you might be wondering what do I put in that portfolio you might already know that a portfolio is Far and Away the most important way that you can show employers what skills you actually have um so we're going to walk through some types of things and an example of something that you could put into a portfolio ideally um you would want to be thinking about your portfolio keeping in mind what types of roles you want to fill so let's say you are someone who's really interested in answering answering and asking and answering questions with data right if you're like I just want to know what's there I want to get to the root of it I want to be able to tell people what is going on and what they should use in order to make datadriven decisions then your portfolio should file should focus on answering analytics questions if however you're like I really want to do Predictive Analytics I'm super excited about machine learning and using data to help guide companies and organizations around what they should do based on what happened before you sh your portfolio should be focused on machine learning right if however you're really curious about testing hypotheses and like figuring out why things happened then your portfolio should focus on a b testing and causal inference right so thinking about that one thing that across the board everyone who wants to work with data should have in their portfolio is data cleaning and exploratory data analysis everyone needs to be able to do that it should always be there and having that'll naturally be baked into bigger projects that you do but having a standalone project that shows that you can explore a data set and figure out which variables you should focus on to begin with that is going to set you up for Success so that's the kind of project that we're going to work on today we're going to do an exploratory data analysis of NBA Trends right so NBA the National Basketball Association is an American organization focused on basketball obviously um and we're going to look at how a couple of teams have performed what their outcomes are in relationship to whether they're playing at home or whether they're playing away and finally we're going to look at um how we can compare variables and if we should look deeper at a couple of different variables all right so without further Ado let's dive in and look at this project all right so I'm going to share my screen this is a project that's in our exploratory data analysis course it's in our data scientist from data science fundamentals skill path it's in a lot of um really key like foundational concepts for data science um so so this data was originally sourced from 538's analysis of the complete history of the NBA 538 is a statistics journalism organization that does a lot of work on specifically Sports and politics they cover Science and Arts and a lot of other topics but they focus mostly on Sports and politics that's where both hypothesis testing and Predictive Analytics come in handy no matter what they have to figure out what variables they want to work with so without so we're going to dive in and see how they might do something like that okay so we are going to work with their data set you can learn a lot more about the data set here in this data set that they've created they've put in a forecast prediction so they've already created their own proprietary internal algorithm to figure out who who might win a match right so this is their work we're going to test whether their work uh um pans out or not okay so first thing that we're going to do whenever we're working with data is we're going to import numpy and pandas you might see as NP and as PD these are what we call aliases oh no I lost my connection anyhow an alias is because programmers are lazy I don't want to type out the entire word pandas I want to type out just PD um so every time I'm calling something I'm just going to write PD rather than the whole word so that's what these these aliases do for us anytime you're working with data you're going to want to have numpy and you're going to want to have pandas because there's incredibly powerful um tools within both of them to work with what we call a data frame so as you are diving into your first data science projects you're going to see data frames come up a lot it's really a special way to organize a data set um and it's a special way that pandas stores a data set it looks a lot like a table it's actually what you're seeing right here um so I have some specific features that we're not going to dive in too much here but I do encourage you to take our pandas course if you want to learn a lot more about those features anyhow okay so we are also going to import the Pearsons R which we're going to use to test the association and a chai square contingency oftentimes you wouldn't import these until much later in your code because you wouldn't necessarily know that that's what you're going to want to use but we know it early on so we're importing it right up at the top the other thing we're going to work with is Matt plotlin because we want to make some plots and Seabourn because we want to make some nicer plots finally we have this import code academy lib3 you don't have to worry about that if you're doing this project off platform because that is a package that just helps translate when we're within the code code academy environment um finally I've set these print options that just tells um how that just tells my code how I want to see these things output um okay so we have here in our files this NBA games CS feed we have actually shortened that file so that everything runs a little bit faster and we've only included five teams um there's only a few years worth of data in it okay so we've loaded this in for you um set this we've loaded in this CSV as a data frame and we've called that data frame NBA so the first thing that we're going to do is we're going to separate out just 2010 and just 2014. we're looking at these two years strategically to be completely transparent um because they illustrate some things that we really want to be able to talk about within this project okay so the way that I am subsetting for 2010 is I'm making a brand new data frame I'm calling that new data frame NBA 2010 and that's just for me so I know that it's the 2010 data and I'm saying take this entire data frame and find only where the year of the data frame is equal to 2010 okay so it says take this column year ID and find only 2010. right but give me back all of The Columns of the data frame just filter for these rows I did the same thing here for 2014. I said give me the whole data frame but only the rows where the year is equal to 2014. okay and then I'm going to look at the head of both of these I save that and what I see here is our data frame now let's take a quick look and see how this data is organized just to give us a mental model to go forward okay so we have an ID a unique identifier we have a unique identifier for the game um this looks like it's probably a concatenation of a lot of different things but this is probably unique and it's going to tell me um exactly what game that is I have the gear we already use that to filter for only 2010. I have franchise ID so this looks to me like the name of the team and interestingly we have opponent franchise so that is who they were playing this tells me that everything is going to be in relationship to this franchise ID it doesn't necessarily mean that that was the home team or the away team just that this is who everything else is in relationship to okay so we have the franchise ID here is Celtics and they were playing the Cavaliers and it was a way so it was a way for the Celtics we can assume usually that that means it was home for Cavaliers but not always right so it doesn't necessarily mean that the Cavaliers were playing in their home stadium um it just means that it was downloaded away for the Celtics is it a playoffs game no the Celtics scored 95 the opponent scored 89. so here we're like okay we actually are centering this around the Celtics the Cavaliers are secondary the Cavaliers are just the opponents and they scored 89 points it was a win for the Celtics um 538 had forecasted as about 28 chance of winning and it looks like there was a six point difference okay so it looks like both of our data frames are organized the same way as they should be since they're coming from the same original data frame so that's just a good mental model for us to have all right so now suppose that we want to compare the Knicks to the Nets we're in New York we're like okay I want to know about the Knicks and the Nets everybody who's local um with respect to points earned per game so we're going to use the points column from our 2010 data frame to create NYX points 2010 and Nets points 2010. okay so I am going to actually I prewrote the code um an important thing to do whenever you're teaching something live prewrite your code you don't want to see me make typos it's not fun okay so we have NYX points 10 we have our NBA 2010 data frame that's the one we made up here that's filtered just for 2010 and I have only where the Knicks are the franchise and I only want the points column so I did the same thing I did up there but I'm saying only the points column and I'm going to do the same thing for the Nets right so I say NBA 2010 only where the franchise ID is equal to the Nets so I want only those rows where the franchise is the Nets I want the whole data frame but now I say at the end to give me only the points column right so if we work this from the inside out we say only those rows and then on the outside we say give me everything oh I changed my mind just give me the points right I'm going to back up just a little bit and point out something that is really common that I forgot to go over before okay so here I've written this code about the 2010 um filtering for 2010 and 2014 two different ways so I could show you the two ways to filter your columns so very commonly you'll see us use dot um notation this means that I take the data frame and I put a dot here and then I specify which column there's a second way that you're gonna see and it's super common and it took me a really long time to figure out why things were written two ways the reason why there's two options is that this is short and I am lazy this if rather than having year underscore ID we had your space ID we wouldn't be able to use dot notation because there'd be a space here so that would create a mess right if there was a space here I could still use what's called bracket notation because I put the I put the name of the column in quotes and then I put a bracket to say give me this column from this data pane so what that means is that this is exactly the same as this the reason there's two is to account for when you might have a space in your column name okay cool all right so we've done that here and we've gotten our next points and our Nets points I'm going to save it and I'm going to check off that task and say I'm done okay so now I might want to know what the difference is between the mean points of the mix and the mean points of the Nets in 2010 right on average what's the difference right so I have the mean of this NYX points 10 which is this series that we created a series is just a one column data frame or one column of a data frame and then I have and then I'm saying give me the mean calculate what the average is same thing with the next points I have the series I want to calculate the mean and then I want to take subtract them and find the difference I'm going to print that and it looks like I have 9.73 based on this do you think that the franchise and the number of points are associated maybe there might be something to that okay um but maybe not I actually don't have enough information to figure that out so I'm going to move on to the next okay rather than comparing means it can be very useful to look at the full distribution um to understand whether a difference in means is Meaningful like whatever that wasn't is the difference in means meaningful um so we're going to create a set of overlapping histograms that can be used to compare the points scored for the Knicks to the points scored for the Nets okay so we're going to use the series that we already created so this NYX points 10 series that's that one column data frame the Nets points 10 series one column and we're going to plot them against each other so let's go through here and talk about this code so I'm going to use matte platlin and I'm going to call the histogram function so it's going to give me a histogram I'm going to say take the Nyx from 2010 that's going to be the data that I want you to plot use on the yaxis the alpha is going to be 0.8 that just means how seethrough it's going to be so I want it to be a little bit seethrough so I can compare them normed is true so we're going to assume this um on a normal distribution and then call give it a label of the next I'm going to do the exact same thing for the Nets but give it the label of the Nets I'm going to tell it to give me a legend give me a title of 2010 and then show yourself so I'm going to plot that and then take a look over here and see what we got all right so I'm seeing that the Knicks and the Nets have a lot of not overlapping space the not overlapping space is clustered at two different ends so I'm going to assume that their points are not associated and that the Knicks the fact that they are different teams that is what has the association that there's a relationship there okay so I've I'm gonna check that one off now we want to compare the 2010 games to 2014. Okay so we've done enough in comparing the Knicks and the Nets now we're going to compare 2010 to 2014. okay so I'm gonna say I'm gonna do all everything that I just did but I'm gonna do it for the 2014. so I have here my 2014 season I'm going to call just the Nyx and just the points column 2014 season just the Nets just the points column I'm going to compare their means and then I'm going to plot it one thing I'm going to back up really quick I'm going to add this plt.clf this clears the space so if your plots are ever appearing on top of each other you probably just need to call PLT clf and um make a new canvas okay so go ahead and plot that and we see very different distributions between 2010 and 2014 right so in 2010 there is clearly not an association between these two teams in 2014 it's clear that they're a lot closer they're performing a lot more similarly to each other okay so for the remainder of the project we are just going to focus on 2010 right so we're like okay what is going on in 2010 the Knicks and the Nets are you know they're both New York teams but they're performing super super differently um so we want to understand that a little bit better okay so for 2010 we're going to generate sidebyside box plots for all five of our teams to understand if there's a relationship between them okay so I'm going to clear my field I'm going to use the Seaborn Library I'm going to call it box plot and I'm going to say just give me all of the 2010 data that entire NBA 2010 data frame on the xaxis put the franchise ID so along the bottom the franchise ID on the yaxis put how many points and then show yourself so I'll go ahead and save that and wow the Nets are really doing poorly compared to everyone else um so what we're looking at here is a box plot and what you see in the middle is the mean you see one quartile another quartile uh the lowest quartile the uppermost quartile and the outliers box plots are really great for showing the distribution especially when you care about outliers um so when there's a lot of overlap between different categories that means that there's likely an association when there's a something that isn't does not have a lot of overlap there is not likely an association so the Nets are performing way worse than everyone else so we're going to look at the relationship between these category variable categorical variables okay so we are we say okay maybe there's something to like wins and losses compared to home in a way right so maybe when teams are home they might win more games there's like a cheering effect you know like maybe that could help them out so let's go ahead and look at uh look at across tab so we want to understand if there are if there's a relationship between the game result and the game location is there an association between whether they win and lose and if it was home and away okay so let's go ahead and calculate that and a cross tab is a box of away and home losses and wins right so this is just number of times that they lost when they were away number of times they lost when they were home number of times they won when they were away and one when they were at home wow so it looks like they did actually win more times when they were at home it's not sure that there's a strong Association there but there is something that might be worth looking into okay but I'm looking at this and I'm like ah I don't really understand like the percentages right like I know that there's more losses when they're away then there are winds when they're away but like it's really hard for me to do that Mental Math I'd rather look at a table of proportions okay so I'm going to check this one off and I'm going to go next to make it a table of proportions and what is what I'm going to do here is actually quite clever so I'm going to take this table of results right and this was just the raw counts and I'm going to divide it by the entire length of the table right I'm going to divide it by the entire length of the data frame because what I'm saying is each one of these so to get a proportion sorry um I can take 133 and divide it by the sum of all of these the easiest way to get the sum of all these is actually just to take the length of the entire data frame so that's what we're doing right here okay so I'm going to run that and I get proportions now I can see that it's when teams are away they lose almost 30 percent of the time they only win a little over 20 percent of the time when they're home they win almost 27 of the time and lose about 23 of the time still it's really hard for me to eyeball that I'm not totally sure if there's an association yet I'm gonna mark this one complete and go to the next okay so this is where she uh chisquared contingency test comes in chisquared is a statistical test to determine if there's an association between categorical variables right what we're looking at are categorical variables away in home win and loss those are categories right unlike numeric variables or quantitative variables categorical variables are kind of like bins I put it into the away bin or the home bin the win bin or the lose bin usually these are described by words sometimes we even use numbers to describe categorical variables so for example let's say that you are talking about medals at the Olympics right and Simone biles to one of gold and a bronze you cannot average those and make a silver that's because metals or places in a race is a categorical variable even though it's represented by numbers right so if you're looking at places in a race or Olympic medals you would put it again um into a chisquare contingency um test okay so we are going to just use the chai square contingency test that we got out of the package above here it's going to tell us the chisquare value which is the strength of the association the pvalue so the point out or the degree to which is statistically significant the degrees of freedom and what we would have expected if there was nothing um nothing out of the ordinary if our null hypothesis was true right okay so I'm going to call it on the frequency table not the proportions table why well the chi squares chisquare contingency test is expecting raw numbers it is going to do the proportions behind the scenes unlike me as a human this test is not trying to do any Mental Math right so it is expecting you to give it the raw numbers not the proportions that might seem a little bit counterintuitive but here we go all right so I'm going to go ahead and run that and what do I get all right I get my output down here it looks like my expected values would have been 119 119 so here losses would have been 119 119 and 106 106. that's not what we get at all the value of the Chi Squared is 6.5 okay on its own that means basically nothing if you were going to use this test on your own you would look up what is um indicative of an association and you would find that it's around four so for a two by two Matrix about four is indicative of an association we're at 6.5 that is much larger awesome we probably have an association so what this tells us is that there's probably some relationship between winning and losing and being home or away that's interesting that tells us not necessarily that we should write a paper like you know tell every team to play their games at home but rather it tells us hey there's something here look a little bit more deeply right we haven't necessarily set this up as a hypothesis test but this is telling us hey explore the relationship between those variables because there might be something there okay so I'm going to mark that one off and go to the next one all right so cool we've looked at categorical variables now let's look at quantitative variables what new quantitative variables in this data set are interesting to us okay so I'm curious about this like forecasting that um 538 did and if there's some relationship between the number of points and the strength of that forecast right so if that forecast was like 0.68 that's pretty close to 50 50. but if that forecast was like 0.9 that's way way more in favor or way more likely that the other team will win I'm curious if the strength of that forecast is then borne out by the number of points different that the teams were okay so that means that we're going to test the association between two new quantitative variables and use a different test this is why we imported Pearson's R we may have already already realized that okay so here I'm going to use um I'm going to use the forecast and the points different um columns and I'm going to look at the covariance which means literally do they vary together do they covariate covary um and we're going to call this our Point difference covariance so I'm going to use the numpy um function COV which stands for covariance and I'm going to look at the point difference column and I'm going to use the forecast column both from the MBA 2010 data set so all five teams NBA 2010 looking at the covariance here and I'm going to print that out okay so if I'm looking at this Matrix um which is the margin of Victory and defeat do we think that there's going to be a covariance between these two variables well I do initially um because I'm seeing them um how do we say basically because this number is much much larger than all of the others okay now I'm going to actually I'm going to mark that one off and I'm going to test this statistic because it's one thing for me to eyeball it and it's another for me to use an actual um statistical test on it okay so here I'm going to calculate the Pearson's R um which is a way to test the association between two quantitative variables okay and the variables and we look at are the forecast and the point difference I'm going to run that and here I have it that the forecast is 0.44 and the degree to which it is statistically significant is 9.4 to the negative 23rd this means to me that they definitely are um Associated that there's a very strong Association and it is slightly positive so zero would mean no association um and one would be a very strong positive Association so it looks like there is an association here um and the degree to which we are confident in that is very very high so um I'm going to mark that off but again it's still really hard for me to think through that or to visualize it so I'm going to generate a scatter plot um and that should give me a little bit more of a visual in the relationship between whether a team is home or away and whether they win or lose so we'll go ahead and plot that here we're using the matplotlib scatter plot on the xaxis we're putting the point difference on the yaxis we're putting the forecast and the data that we're using is the NBA 2010 data set um we'll label our xaxis forecast wind probability wait a minute this is these are flipped so sorry about that um so I'm going to move this one up here and move that down there I'm going to save it and oh I probably you see how I have these dots right here you know what that means it means that I did not clear my field up here so now I'll save it again and our box plot looks good again and our scatter plot looks good again okay so the forecasted wind probability um we have a couple of outliers here you know this one was highly forecasted to win and there was a huge Point differential um this one was you know kind of a mid but the point differential was really extreme to the um that the reference team lost um so there's some interesting features going on here it's not an obvious like straight line like we might have expected but this is what about a 0.5 um correlation looks like it looks like there's a little bit of an association but it's not super super um strong it's not like they're all very close to this regression line okay so if you were to do a project like this you would then write up a summary um and publish it on something like your personal website or GitHub or something along those lines saying that yes we should look more deeply at the relationship between game result and game location and yes we should look more deeply about um home or away and wins and losses all right thank you so much for joining us on this journey and looking at this project with us um let us know down in the comments if you have any questions and we look forward to seeing you at our next live stream all right take care byebye foreign