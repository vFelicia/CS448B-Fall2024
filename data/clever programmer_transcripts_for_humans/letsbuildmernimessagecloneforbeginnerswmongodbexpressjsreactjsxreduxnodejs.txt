With timestamps:

00:02 - hey guys um
00:03 - i'm sorry the stream has dropped for
00:06 - some reason
00:07 - uh let's actually i think i'll start
00:10 - waiting for everybody to join
00:12 - right now we only have one peop one
00:15 - person and okay
00:16 - let's actually everybody start coming in
00:20 - and let's let no let everybody know that
00:24 - i am live back we are back and we
00:28 - are ready to continue
00:31 - for some reason my internet provider uh
00:34 - had some kind of outage
00:36 - for a couple of minutes but we
00:39 - are going to carry on where we left it
00:42 - off
00:42 - okay so yeah we got uh 50 people
00:46 - back live hello i thought it was says yo
00:49 - rishi hi how are you thanks i'm fine i
00:53 - was just a bit frustrated because my
00:54 - internet dropped
00:55 - okay okay uh yeah
00:59 - mohit kumar says hi nice okay
01:02 - uh we are coming back
01:05 - that's cool that's awesome and
01:09 - yeah uh we we are starting to get uh
01:12 - starting to get our people back we are
01:15 - already 70 people
01:16 - strong 75 that's nice that's awesome
01:20 - and yeah um
01:23 - we should be good in any minute
01:26 - okay uh let me know guys if you are
01:30 - uh here and if you guys are back we will
01:33 - wait
01:34 - just a little just a tiny bit while
01:37 - everybody is coming back and we can
01:40 - uh go forward
01:44 - yes positive vibes that's what we want
01:47 - so
01:47 - we are actually we were actually
01:49 - building the
01:51 - uh imessage clone with the mern stack
01:54 - uh and we say my name
01:58 - in your accent dude that was hard
02:02 - uh raza ra rafa rafaideen
02:05 - i think so we were
02:08 - at the moment where on the only thing we
02:12 - had left
02:12 - uh we we had left is making the app real
02:16 - time
02:16 - and the nice outro that i actually
02:18 - wanted to give you guys as a
02:20 - surprise but
02:23 - yeah okay i'm going to wait a bit more
02:26 - while uh while all the others are coming
02:29 - back
02:31 - and i think yeah
02:34 - and i will start in just a bit okay
02:38 - so let's actually dude how are you
02:41 - i'm cool please build a version control
02:44 - system
02:45 - dude that would be some huge stuff what
02:48 - about our names khalid ibrahim
02:53 - almost yeah we can totally do an
02:56 - instagram live sometime that uh
02:58 - i'm trying to speak out uh for names
03:01 - yeah uh okay uh so guys
03:04 - actually let's draw let let me know if
03:07 - you guys are
03:08 - uh ready to continue i already says it's
03:12 - 2 a.m
03:12 - okay i know how much efforts you guys
03:15 - put after yesterday's interview
03:17 - i know i completely messed up but i
03:18 - thought uh i taught a lot
03:22 - [Music]
03:23 - we will see when i send out the
03:25 - responses okay
03:26 - okay uh let's go and
03:30 - we will be start we will start coding
03:33 - in just a bit i just want everybody to
03:36 - come back
03:37 - we are already 86 people strong
03:41 - um hey we got shirangi back
03:45 - okay we are getting all the old people
03:48 - we we got
03:48 - and we are getting all the people back
03:50 - so that's nice
03:52 - uh ready to never okay uh
03:54 - [Music]
03:56 - please join button dude i am so eager to
03:59 - join what
04:01 - oh join button oh okay uh
04:04 - i think we can do that yeah okay let's
04:07 - go
04:07 - all right we we are getting everybody
04:10 - back that's nice we are already
04:12 - 92 people strong everybody let's go
04:15 - ahead and just let others know
04:17 - we got kelvin back in the house yo
04:20 - what is up my man how's it going
04:26 - we are going to start in just a couple
04:28 - of minutes i just want to
04:30 - uh get everyone back on this live
04:34 - uh so that we can continue and i think
04:38 - okay let's just sum it up where we left
04:41 - off so we were at this point where
04:44 - this application should have started
04:48 - working
04:49 - but then my internet dropped so what i
04:52 - will be doing
04:53 - is pretty much create a new chat and say
04:56 - the name
04:56 - is going to be uh epic cp
05:00 - community and i will add the
05:05 - are you using stream yes i am is this a
05:07 - new live
05:08 - ask asks clarity no it's actually the
05:11 - same one
05:12 - uh just my internet dropped and so i had
05:15 - to uh
05:16 - start it all over again raza says let's
05:19 - start bro it's 2 am here yeah i'm trying
05:21 - to wrap it up in
05:22 - 15 minutes there is probably not more
05:25 - than that left
05:26 - so what i will be doing is just add the
05:29 - welcome message and say
05:30 - welcome back guys
05:34 - and add a bit of a fire emoji
05:39 - and yeah nothing happens because it's
05:41 - not real time yet but i'm going to
05:43 - refresh
05:44 - and whoa we got two of these stuff going
05:47 - on
05:48 - uh so let's actually test this one okay
05:52 - so for some reason
05:53 - this doesn't work let's add the back
05:56 - effect and what we will be doing is
06:01 - going ahead and pretty much uh
06:04 - fix this bug now uh
06:08 - because it is actually having problems
06:11 - in the message.js file
06:13 - i will be going in there so message.js
06:17 - has some kind of issues going on and
06:21 - let's actually address those so
06:24 - message.js actually receives only
06:28 - four of the four uh pro
06:31 - four props and those are
06:34 - being the following so we are we are
06:37 - actually tr we
06:38 - actually changed a tiny bit of the
06:41 - uh structure that we were uh building we
06:44 - are 82 strong guys
06:45 - as you are coming in uh let's carry on
06:49 - we are continuing where we left off my
06:52 - internet dropped for a
06:53 - second so i had to restart earlier start
06:55 - the whole stream
06:57 - um so yeah let's actually continue
07:02 - and what i will be doing is pretty much
07:05 - just
07:05 - add a new uh
07:08 - new way how we uh handle all the
07:12 - dates and this is this would be it uh
07:16 - actually i'm gonna uh add the old one uh
07:19 - up above so we are actually
07:23 - why you implement channel uh and message
07:26 - deletion
07:27 - will you implement uh not today this is
07:30 - already a long build but we will
07:31 - definitely do
07:32 - a crowd functionality and all that stuff
07:34 - that will be a bit longer build
07:37 - uh yeah finish it in style yes i'll do
07:40 - okay so sunny built
07:44 - it uh sunny did a bit of a differently
07:47 - uh with some time ago stuff and all that
07:50 - we are not going to use that
07:51 - instead we are going to be parsing it as
07:54 - a
07:55 - an integer and we will be uh
07:58 - making this a date string
08:01 - now we also changed the way
08:06 - how we uh uh
08:11 - add the email as well so we will be
08:14 - saying oops we will be saying
08:17 - sender.email because we are passing in
08:19 - sender here right
08:21 - so we are actually testing
08:24 - uh we are actually testing against the
08:27 - sender.email
08:28 - the current user and that's how we will
08:31 - decide if it goes to the right and if
08:33 - it's going to be blue
08:34 - or if it is going to be uh uh
08:37 - if it is going to be on the left and
08:39 - it's going to be
08:40 - gray
08:44 - okay nice we are actually getting back
08:46 - we are almost at 100 people
08:48 - thank you so much for coming back guys i
08:50 - really appreciate everybody
08:52 - and let's actually uh
08:56 - check out how we will handle the photo
08:59 - questions because
09:00 - we are handling that differently as well
09:02 - because we are passing in
09:04 - this sender right guys and we are
09:07 - we will need to uh
09:10 - import that thing and we will also
09:14 - add the message which hasn't really
09:17 - changed so with that let's test
09:21 - let's test it out if it is working this
09:24 - way
09:24 - now this is still bugging out for some
09:27 - reason
09:28 - and now it says
09:31 - okay let's actually clean up the
09:32 - database
09:34 - uh and remove all the stuff that is
09:38 - not cool so we have two epic cp
09:41 - communities we only need one for now
09:45 - uh yeah david can i
09:48 - can i ask please respond uh actually
09:50 - drop it on um
09:52 - so right now guys that this is my
09:55 - instagram handle please go ahead and if
09:56 - you have questions regarding this but uh
09:58 - please drop it there
10:00 - i will be responding to everybody and
10:02 - but i just want to
10:03 - keep this live as short as possible
10:06 - because
10:06 - yeah so yeah let's actually
10:10 - speed up a tiny bit now uh we are going
10:13 - to go ahead and debug whatever
10:15 - is happening over here and what we know
10:19 - is that it is inside of message.js still
10:25 - and what i see is
10:28 - it has a problem the anonymous function
10:31 - sender.email
10:32 - is not not an object okay let's see
10:36 - what is not cool so user email
10:40 - sender.email
10:42 - actually should be good though
10:46 - let's check it let's check up on it with
10:49 - postman so
10:50 - [Music]
10:53 - we should be able to get the
10:54 - conversation list that's
10:56 - working good uh we don't have a get data
11:00 - however we have the conversation data
11:03 - and let's actually oh
11:07 - okay let's copy this one
11:10 - let's go into here get back a
11:12 - conversation which we
11:14 - definitely should have
11:18 - um i've used code mirror package develop
11:21 - js
11:21 - oh actually i can check that out good
11:23 - idea thanks
11:25 - uh let's see how we have things going on
11:29 - on the back end so collection update is
11:32 - deprecated use
11:32 - update one oh my god everything is
11:36 - getting deprecated
11:38 - let's okay let's refresh uh
11:42 - some okay wrong port
11:46 - so inside of here we should be getting
11:48 - this email so that should be
11:50 - good
11:54 - so sender uh let me
11:57 - actually check up what is the actual
12:00 - endpoint that
12:01 - we are passing in here so
12:05 - uh message yes because we are not
12:08 - sending back
12:10 - uh we are not passing in that prop
12:14 - uh from the chat.js file and we need to
12:17 - address
12:18 - that thing so what i will be doing is i
12:20 - have this snippet of code over here
12:23 - and oh my god uh so that's actually i'm
12:26 - just gonna go ahead and paste it here
12:28 - and i'm gonna go ahead and explain what
12:30 - is happening so
12:31 - what we had was a bit different from
12:34 - this one
12:35 - we are we are going to pass in yes
12:37 - exactly with
12:38 - we don't have a sender as a prof on a
12:40 - message think yeah
12:41 - that's that's exactly why what was
12:43 - happening
12:44 - uh exactly and
12:50 - and now i need to pass this kind of id
12:53 - the mongodb kind of id
12:54 - i need to pass that in uh
12:58 - and twice as the key and as the id as
13:01 - well
13:02 - and in the sender i am passing in the
13:05 - whole
13:06 - user uh thing we have
13:09 - somewhere here so i i i
13:12 - am passing everything inside of here i'm
13:14 - chucking it in
13:15 - in the sender also i'm sending in a
13:17 - message and all that stuff
13:19 - so we are destructuring everything and
13:21 - yeah there
13:22 - is there it is so with that said
13:26 - actually it should be now working let's
13:29 - test it out
13:30 - and welcome back guys there we go
13:34 - massive thanks everybody who is coming
13:36 - back and who is here
13:38 - i appreciate you guys and
13:42 - welcome so let's continue where we left
13:45 - off
13:47 - and what i think we should do now is
13:50 - test
13:50 - it with an other message oh
13:53 - and uh we are going to merge the videos
13:56 - no i think we will be adding like part
13:58 - one part two
14:00 - uh so we need to address the
14:03 - thing that it is not working perfectly
14:06 - so
14:06 - it's not showing my face not showing the
14:08 - date and not showing the last message
14:11 - so what we will be doing is
14:15 - go ahead and on the sidebar chat
14:18 - we need to add all this stuff and we
14:21 - need to uh
14:22 - address the situation over there
14:25 - now what i am doing is again changing a
14:28 - bit of
14:29 - uh sunny's code i'm literally gonna
14:32 - uh get rid of this time ago thing
14:36 - it we could make it work but not today
14:39 - uh you guys could see that how it is
14:41 - working we will be going with the utc
14:43 - string
14:44 - for now and what we will do is pretty
14:47 - much
14:48 - as we uh set up all the last message
14:50 - last photo
14:51 - last time and all that stuff uh
14:54 - we will literally go ahead and go
14:58 - with that thing now inside of here we
15:01 - want to go
15:02 - and add the last timestamp we want to
15:05 - check everything in here and add the
15:08 - last
15:08 - message there we go
15:12 - and inside of here we want to pass in
15:14 - the last
15:15 - photo that is pretty much going to do
15:18 - all the work for
15:19 - us will this will be uh will this be
15:21 - available for a
15:23 - later watch yes it will be everything is
15:26 - going to be
15:27 - available for watch later uh we will
15:29 - make a part 1 and part 2 videos out of
15:32 - it
15:32 - uh and yeah thank you so much for uh
15:35 - coming back here and
15:37 - being here we are 100 people
15:40 - strong that's awesome okay now
15:43 - uh what we will be doing is that should
15:46 - actu that should have actually fixed
15:48 - that issue
15:50 - here we go and
15:53 - yeah let's test this thing out
15:57 - um and what i will be
16:02 - and what i will be doing is just add
16:05 - another message in here like
16:06 - saying hey and send this message and
16:10 - because
16:11 - and for some reason it actually okay
16:15 - so it's actually a uh
16:18 - my my computer type of issue what i need
16:22 - to do
16:22 - is go to um
16:28 - chat.js and or actually it's called
16:31 - chat.css
16:35 - and go all the way down so let's go into
16:38 - chat.css and
16:40 - find the button guys if it's working for
16:43 - you
16:44 - uh if it's working for you don't you
16:48 - don't have to do this for some reason uh
16:50 - on my computer the display none is just
16:53 - simply not
16:54 - working so instead i will be doing this
16:57 - stuff
16:58 - uh so i am adding a head of zero a width
17:00 - of zero an outline transparent
17:02 - background transparent in the border of
17:04 - none which is literally the exact same
17:07 - thing
17:08 - as display none it's just
17:11 - i don't know what's happening here i
17:12 - need to uh debug that but
17:15 - that's just it is what it is right
17:23 - uh yeah so with that said
17:27 - uh it should be working and it should be
17:30 - reloading because as you guys can see
17:33 - uh somewhere here somewhere here there
17:37 - is the
17:38 - message which says uh send
17:42 - yeah the send message it still says
17:44 - either prevent default we shouldn't
17:46 - enable
17:47 - reloading i gotta uh i gotta look into
17:50 - that so
17:51 - i'm gonna type in hey uh
17:55 - like this and go ahead and refresh it
17:58 - and it should
17:58 - actually yeah it actually updated over
18:01 - here
18:02 - and here we go so it actually showed up
18:05 - nice so now the only thing
18:09 - uh we will do buy a new macbook dude i
18:12 - just bought this one
18:15 - uh i just need to set something up
18:18 - so so
18:22 - what do we what so the only thing now
18:25 - left to do
18:26 - is guys go to pusher.com and make this
18:29 - app real time
18:30 - let's actually do that in a couple of
18:32 - minutes
18:33 - we should be able to do that in like ten
18:35 - or uh five minutes
18:37 - so let's go there and say
18:40 - so we got pusher going on in here and
18:43 - we are just going to sign in uh
18:46 - yep here we go let's go to manage let's
18:49 - go to create
18:50 - app you name it however you wish i will
18:53 - call it imessage
18:55 - live and
19:00 - let's use us west should be good
19:03 - and we have react and we also
19:07 - have some node.js going on the back end
19:11 - and we will go ahead and create the app
19:14 - now with that done it actually throws a
19:17 - couple of code at me
19:19 - uh there is actually let's actually go
19:21 - with the back end first copy that
19:24 - piece of code go back to server.js
19:27 - go up to app.config and what we will do
19:30 - is pretty much just paste it in here
19:32 - change the war to const and
19:35 - yeah that will pretty much do the uh
19:38 - instance work
19:39 - for us now you also need to go in here
19:42 - where
19:42 - uh we said uh db connected
19:46 - and you need to set up the chain stream
19:50 - which is essentially a thing that we are
19:53 - going to be using
19:54 - to trigger the pusher so what we will do
19:56 - is say
19:57 - const chain uh let's actually i'm i'll
20:00 - be using the snippets of
20:02 - code that i have uh so what we will be
20:06 - doing
20:06 - is pretty much just say uh we will set
20:10 - up the change stream
20:12 - which is super easy so cons chain stream
20:15 - mongoose connection collection uh and
20:18 - the
20:19 - collection that we are actually uh
20:20 - watching is going to be the
20:21 - conversations
20:23 - and we just add the watch at the end
20:26 - and next up what we will do is say
20:29 - uh change stream whoo
20:33 - the on change
20:36 - uh we will fire off the function with
20:38 - the change that actually happened
20:41 - and if there is a
20:44 - if the change is ah
20:48 - change dog oh
20:51 - uh it's ending there are few very few
20:53 - people
20:54 - that's right that's right but only the
20:57 - hardcore people are
20:58 - here are here at the end
21:02 - oh yeah you relate yeah
21:05 - so the operation type when the operation
21:07 - type is
21:08 - insert uh we are going to do some
21:11 - stuff and we want to go ahead and
21:14 - trigger the pusher
21:15 - with the messages uh oh no the
21:19 - chats uh stream
21:22 - and we want to say the uh the event is
21:24 - going to be
21:25 - new chat and once one and
21:28 - if the as if uh
21:31 - something else which means uh
21:34 - we are updating uh in the
21:37 - database then we want to go ahead and uh
21:41 - create another channel with another uh
21:45 - with another event and we pass it in
21:48 - again and if like let's handle
21:51 - all the errors that could happen so if
21:54 - that didn't work
21:55 - let's just console log the error
21:57 - triggering pusher
21:58 - now with that done the back end is
22:00 - actually ready to be
22:02 - uh real-time and let's actually
22:05 - go back to our front-end part and go to
22:08 - the sidebar.js
22:09 - file where we will actually first set up
22:13 - all the back all the real-time stuff now
22:17 - if you're scrolling up here in a bit
22:20 - you're good bro i just checked hey
22:23 - frankie
22:24 - what is going on we got frankie in the
22:26 - house
22:28 - yo uh so what we will be doing
22:32 - is pretty much uh can you do a twitch of
22:35 - course
22:36 - um what we will be doing is pretty much
22:39 - just
22:40 - uh copy this part of the code
22:43 - and let's actually set that instance
22:46 - up let's go to the sidebar sidebar
22:50 - chat.js file
22:53 - which sidebar chat.js
22:57 - oops hold on inside the bar
23:01 - chat.js yeah there we go that's what we
23:04 - wanted
23:04 - and we want to go up here like out of
23:07 - the uh
23:08 - whole function let's add the instance
23:12 - say cons instead of var because never
23:15 - ever use we don't ever use
23:18 - var uh now that we have that
23:22 - thing set up we should be
23:25 - able to go ahead and do the other type
23:28 - of connection
23:29 - so what we will be doing is add the uh
23:32 - inside of the use effect we will add
23:36 - this stuff so we are literally going
23:39 - ahead
23:40 - and creating a channel which means that
23:43 - uh
23:43 - with pusher we are subscribing to the
23:45 - messages channel
23:47 - and whenever uh something happens
23:51 - so so a new message thing happens we
23:53 - want to go ahead
23:54 - and get the sidebar elements again
23:58 - okay so that will literally just uh pull
24:01 - in
24:01 - all the the last message stuff okay if
24:04 - you guys remember it
24:05 - this is just getting back the data
24:09 - which we will be okay it's not defined
24:12 - just yet
24:13 - let's go ahead and do that um
24:18 - we are going to go ahead uh
24:23 - we will be doing like pusher for
24:26 - um and we will say
24:30 - oh i haven't even installed this so
24:33 - what we guys want to do now is go to the
24:36 - front end terminal
24:37 - and type in npm i pusher dash
24:41 - js right because on the front end we
24:44 - install the pusher.js and on the backend
24:46 - we are installing pusher
24:47 - as it is so once it will
24:50 - load up uh it should be pretty fast
24:56 - i said fast okay uh
25:02 - okay i think i'm stupid because my brain
25:04 - doesn't want to understand what redox is
25:06 - that's actually not right uh you just
25:09 - want to go ahead and
25:11 - and learn learn whatever you can find on
25:13 - the internet about it and watch
25:15 - all the redux videos that sunny has
25:18 - already
25:18 - dropped and thank you so much shimongi
25:22 - for that nice awesome comment thank you
25:24 - so much
25:26 - okay uh right so now we should be able
25:31 - to
25:31 - uh import pusher with a capital p
25:36 - from uh pusher.js
25:40 - because right this is what we're
25:42 - importing nice
25:44 - and what we will be doing is let's
25:46 - actually test out if it
25:47 - okay so this is the part that we just
25:50 - made real time right
25:52 - so actually if i go in here and say yo
25:56 - that part should update there we go
25:59 - so that part actually updated we are
26:02 - making the app piece by piece
26:04 - real time right so the oops
26:08 - so the other part just uh didn't get uh
26:11 - didn't update because that's not real
26:13 - time just yet
26:14 - but what we will do uh
26:18 - please do a cms app with mer of course
26:20 - drop me
26:21 - on instagram and i will make a list out
26:23 - of it and actually
26:24 - plan these lives the way you guys want
26:28 - it and the way you guys will get the
26:30 - most value out
26:31 - of which keyboard do you use
26:34 - apple magic keyboard okay uh
26:38 - next up what i will be doing is going to
26:42 - uh chad.js i think that should be
26:45 - the next one that we make real time
26:50 - so what we will be doing in here
26:53 - is pretty much yeah let's go to chat.js
26:57 - and in here we will actually need to add
27:00 - two different types of stuff first
27:04 - what we definitely want to do and i just
27:07 - i actually found this part
27:08 - uh found this piece out before the live
27:11 - stream
27:13 - that i should be actually adding it
27:14 - otherwise it will be bugging out
27:16 - so this is pusher unsubscribe messages
27:19 - this is how you want to start the uh
27:23 - use effect fanboy that's right
27:26 - um
27:30 - okay so pusher and subscribe
27:33 - with this will actually when the chat
27:36 - components
27:37 - loads so whenever we are actually
27:39 - switching between chats it
27:40 - actually reloads itself so that user
27:42 - fact actually
27:44 - fires off again because chat id changes
27:47 - and that is a dependency of the
27:49 - new use effect so then we are actually
27:52 - unsubscribing from the messages and that
27:54 - the reason for that
27:56 - is that we want to we don't want to
27:59 - subscribe to it multiply
28:00 - so right if you guys actually remember
28:03 - how pusher works on the front-end side
28:07 - we subscribe to channels right
28:09 - and if we subscribe to channels like
28:11 - multiple times
28:12 - then it will go ahead and refresh all
28:14 - the
28:16 - all this stuff right so if i'm in one
28:19 - chat and i'm
28:20 - entering to another one and then send a
28:22 - message there it will refresh both of
28:24 - them and it's going to be like
28:26 - giggling around and it's just not going
28:28 - to be a good user experience
28:30 - so that whenever we are changing
28:34 - uh chats you want to go ahead and
28:38 - you want to go ahead and unsubscribe
28:40 - from the for sure that you are already
28:42 - subscribed
28:42 - to and then subscribe to a new one
28:46 - i hope this actually made sense it was
28:48 - pretty fast
28:49 - but yeah uh drop me questions if you
28:53 - guys need more explanation
28:55 - okay so what we will then do
28:58 - is pretty much just say um
29:02 - uh subscribe to the new one and
29:06 - that will actually okay that will
29:09 - actually go ahead and say
29:12 - of course we're subscribing to the same
29:14 - channel again
29:16 - exactly rerender stuff many many times
29:18 - we don't want to do that
29:20 - okay and we want to we want to just do
29:23 - whatever we did with the other one so
29:26 - now uh what i think should be
29:30 - happening is next up we need to make
29:33 - the sidebar so right so before that the
29:37 - the other one
29:38 - was the sidebar chat right so that's
29:40 - actually
29:41 - two different type of stuff one of them
29:43 - is going to watch out whenever a new
29:45 - chat is getting added
29:47 - and the other one is watching out for
29:48 - the new messages so that it actually
29:50 - updates the thumbnail
29:51 - and whatever that is in there now let's
29:54 - go ahead and jump
29:58 - into sidebar.js and this is going to be
30:00 - the last piece
30:02 - if you're not running into any bug and
30:04 - this is going to be the last step
30:06 - that we are covering today uh
30:09 - and here we go so
30:12 - that should actually do it notice that
30:15 - we are subscribing to chats now
30:17 - and not new chat and you guys might be
30:20 - asking
30:21 - why are weren't we unsubscribe here and
30:23 - cyborg.js file
30:26 - um that's part that's because we don't
30:30 - need to
30:30 - okay so you only want to unsubscribe to
30:33 - it when you're
30:34 - when you need to and the other thing the
30:37 - reason
30:37 - the other reason is that only the chat
30:39 - gets actually re-rendered
30:41 - that many times when we are changing
30:43 - chats uh the sidebar stays consistent
30:46 - because react actually cleverly knows
30:48 - what part of the
30:50 - screen to re-render and okay
30:53 - now let's actually go ahead and test
30:56 - this thing
30:56 - out uh on
30:59 - in sidebar it's not actually existing
31:02 - let's go ahead and import
31:04 - that oh because i haven't created
31:07 - the uh i haven't actually added this
31:11 - part
31:12 - so let's do that and sidebar is loaded
31:15 - everything
31:16 - yeah remember me yeah i remember you
31:20 - okay let's actually add this thing here
31:23 - and
31:24 - change the word to const and you also
31:26 - want to go ahead and import
31:29 - item import pusher
31:32 - from pusher.js yeah with
31:36 - js okay let's see what
31:39 - we missed or haven't missed yeah chat.js
31:43 - let's go into chat.js
31:45 - and chat.js we haven't subscribed there
31:49 - either
31:50 - so we just want to go in and say pusher
31:54 - from pusher.js
31:58 - and we should be good to go in any
32:01 - minute so say const
32:04 - thanks think a bit uh we are saying
32:07 - const
32:07 - and we i think now now
32:11 - no now we should be good okay okay so
32:14 - i'm going
32:15 - into epic cp community and say
32:18 - you guys are awesome
32:24 - and add some fire because you guys are
32:27 - on fire
32:29 - and boom there we go
32:32 - it updated over here we updated it
32:36 - over here and we are go
32:39 - good okay uh
32:43 - please explain how to understand error
32:45 - messages
32:47 - that's actually uh a really good
32:50 - question as she won he says
32:53 - um honestly try to read it
32:56 - it's good okay this is one of the most
33:00 - demanded questions ever
33:01 - okay so how to understand error messages
33:05 - uh so you guys wanna actually understand
33:08 - what is actually
33:10 - right right right you want to read it
33:12 - through word by word
33:13 - it's going to be stupid but sometimes it
33:15 - actually makes sense
33:16 - but when it doesn't make sense you want
33:18 - to go ahead and google it up and then
33:20 - essentially when you google it up so
33:23 - much time
33:24 - you wanna you will essentially
33:26 - understand it
33:28 - by feeling okay and i am today
33:31 - still running into uh issues that i'm
33:33 - looking at like
33:34 - excuse me like what and then i still go
33:38 - ahead and google it up and that's the
33:40 - only way that i can find it and then
33:41 - literally go ahead and copy paste the
33:43 - whole thing into google
33:44 - and there is going to be a stack
33:45 - overflow article about it
33:47 - okay uh and now the only thing we need
33:51 - to test
33:51 - out is if the sidebar is actually real
33:54 - time so we will say
33:55 - youtube over here we will add a welcome
33:58 - message
33:59 - yo and some fire and a
34:03 - rocket nice and if we add it
34:06 - it should pop up immediately with the
34:09 - welcome message
34:10 - and guys we actually
34:13 - are done with today's build it was
34:17 - quite a long one but i think uh guys
34:20 - um uh
34:24 - thank you so much for joining and i
34:26 - think you guys
34:27 - uh have a work for years to develop uh
34:31 - imessage clever programmer took only
34:32 - three hours
34:35 - almost yeah there is a
34:38 - couple of stuff we need we could add
34:41 - into that but yeah
34:43 - uh so guys
34:46 - i hope you guys got value out of it we
34:48 - are 110
34:50 - strong thank you so much for joining
34:53 - and guys i think today was an awesome
34:56 - build
34:57 - even though my internet dropped for like
34:59 - 10 minutes and
35:00 - thank you so much for everybody who
35:02 - joined and rejoined
35:04 - afterwards uh i really appreciate you
35:07 - guys
35:08 - and make sure that you
35:11 - uh guys are sticking around as we
35:14 - are dropping value on a daily basis
35:18 - so with that said this was it today
35:22 - thank you so much for joining this is
35:24 - david
35:25 - and i'll see you in the next
35:28 - video peace out guys
35:50 - [Music]
36:31 - [Applause]
36:34 - [Music]
36:38 - hey
36:40 - [Music]
36:49 - [Applause]
36:52 - me
37:01 - you

Cleaned transcript:

hey guys um i'm sorry the stream has dropped for some reason uh let's actually i think i'll start waiting for everybody to join right now we only have one peop one person and okay let's actually everybody start coming in and let's let no let everybody know that i am live back we are back and we are ready to continue for some reason my internet provider uh had some kind of outage for a couple of minutes but we are going to carry on where we left it off okay so yeah we got uh 50 people back live hello i thought it was says yo rishi hi how are you thanks i'm fine i was just a bit frustrated because my internet dropped okay okay uh yeah mohit kumar says hi nice okay uh we are coming back that's cool that's awesome and yeah uh we we are starting to get uh starting to get our people back we are already 70 people strong 75 that's nice that's awesome and yeah um we should be good in any minute okay uh let me know guys if you are uh here and if you guys are back we will wait just a little just a tiny bit while everybody is coming back and we can uh go forward yes positive vibes that's what we want so we are actually we were actually building the uh imessage clone with the mern stack uh and we say my name in your accent dude that was hard uh raza ra rafa rafaideen i think so we were at the moment where on the only thing we had left uh we we had left is making the app real time and the nice outro that i actually wanted to give you guys as a surprise but yeah okay i'm going to wait a bit more while uh while all the others are coming back and i think yeah and i will start in just a bit okay so let's actually dude how are you i'm cool please build a version control system dude that would be some huge stuff what about our names khalid ibrahim almost yeah we can totally do an instagram live sometime that uh i'm trying to speak out uh for names yeah uh okay uh so guys actually let's draw let let me know if you guys are uh ready to continue i already says it's 2 a.m okay i know how much efforts you guys put after yesterday's interview i know i completely messed up but i thought uh i taught a lot we will see when i send out the responses okay okay uh let's go and we will be start we will start coding in just a bit i just want everybody to come back we are already 86 people strong um hey we got shirangi back okay we are getting all the old people we we got and we are getting all the people back so that's nice uh ready to never okay uh please join button dude i am so eager to join what oh join button oh okay uh i think we can do that yeah okay let's go all right we we are getting everybody back that's nice we are already 92 people strong everybody let's go ahead and just let others know we got kelvin back in the house yo what is up my man how's it going we are going to start in just a couple of minutes i just want to uh get everyone back on this live uh so that we can continue and i think okay let's just sum it up where we left off so we were at this point where this application should have started working but then my internet dropped so what i will be doing is pretty much create a new chat and say the name is going to be uh epic cp community and i will add the are you using stream yes i am is this a new live ask asks clarity no it's actually the same one uh just my internet dropped and so i had to uh start it all over again raza says let's start bro it's 2 am here yeah i'm trying to wrap it up in 15 minutes there is probably not more than that left so what i will be doing is just add the welcome message and say welcome back guys and add a bit of a fire emoji and yeah nothing happens because it's not real time yet but i'm going to refresh and whoa we got two of these stuff going on uh so let's actually test this one okay so for some reason this doesn't work let's add the back effect and what we will be doing is going ahead and pretty much uh fix this bug now uh because it is actually having problems in the message.js file i will be going in there so message.js has some kind of issues going on and let's actually address those so message.js actually receives only four of the four uh pro four props and those are being the following so we are we are actually tr we actually changed a tiny bit of the uh structure that we were uh building we are 82 strong guys as you are coming in uh let's carry on we are continuing where we left off my internet dropped for a second so i had to restart earlier start the whole stream um so yeah let's actually continue and what i will be doing is pretty much just add a new uh new way how we uh handle all the dates and this is this would be it uh actually i'm gonna uh add the old one uh up above so we are actually why you implement channel uh and message deletion will you implement uh not today this is already a long build but we will definitely do a crowd functionality and all that stuff that will be a bit longer build uh yeah finish it in style yes i'll do okay so sunny built it uh sunny did a bit of a differently uh with some time ago stuff and all that we are not going to use that instead we are going to be parsing it as a an integer and we will be uh making this a date string now we also changed the way how we uh uh add the email as well so we will be saying oops we will be saying sender.email because we are passing in sender here right so we are actually testing uh we are actually testing against the sender.email the current user and that's how we will decide if it goes to the right and if it's going to be blue or if it is going to be uh uh if it is going to be on the left and it's going to be gray okay nice we are actually getting back we are almost at 100 people thank you so much for coming back guys i really appreciate everybody and let's actually uh check out how we will handle the photo questions because we are handling that differently as well because we are passing in this sender right guys and we are we will need to uh import that thing and we will also add the message which hasn't really changed so with that let's test let's test it out if it is working this way now this is still bugging out for some reason and now it says okay let's actually clean up the database uh and remove all the stuff that is not cool so we have two epic cp communities we only need one for now uh yeah david can i can i ask please respond uh actually drop it on um so right now guys that this is my instagram handle please go ahead and if you have questions regarding this but uh please drop it there i will be responding to everybody and but i just want to keep this live as short as possible because yeah so yeah let's actually speed up a tiny bit now uh we are going to go ahead and debug whatever is happening over here and what we know is that it is inside of message.js still and what i see is it has a problem the anonymous function sender.email is not not an object okay let's see what is not cool so user email sender.email actually should be good though let's check it let's check up on it with postman so we should be able to get the conversation list that's working good uh we don't have a get data however we have the conversation data and let's actually oh okay let's copy this one let's go into here get back a conversation which we definitely should have um i've used code mirror package develop js oh actually i can check that out good idea thanks uh let's see how we have things going on on the back end so collection update is deprecated use update one oh my god everything is getting deprecated let's okay let's refresh uh some okay wrong port so inside of here we should be getting this email so that should be good so sender uh let me actually check up what is the actual endpoint that we are passing in here so uh message yes because we are not sending back uh we are not passing in that prop uh from the chat.js file and we need to address that thing so what i will be doing is i have this snippet of code over here and oh my god uh so that's actually i'm just gonna go ahead and paste it here and i'm gonna go ahead and explain what is happening so what we had was a bit different from this one we are we are going to pass in yes exactly with we don't have a sender as a prof on a message think yeah that's that's exactly why what was happening uh exactly and and now i need to pass this kind of id the mongodb kind of id i need to pass that in uh and twice as the key and as the id as well and in the sender i am passing in the whole user uh thing we have somewhere here so i i i am passing everything inside of here i'm chucking it in in the sender also i'm sending in a message and all that stuff so we are destructuring everything and yeah there is there it is so with that said actually it should be now working let's test it out and welcome back guys there we go massive thanks everybody who is coming back and who is here i appreciate you guys and welcome so let's continue where we left off and what i think we should do now is test it with an other message oh and uh we are going to merge the videos no i think we will be adding like part one part two uh so we need to address the thing that it is not working perfectly so it's not showing my face not showing the date and not showing the last message so what we will be doing is go ahead and on the sidebar chat we need to add all this stuff and we need to uh address the situation over there now what i am doing is again changing a bit of uh sunny's code i'm literally gonna uh get rid of this time ago thing it we could make it work but not today uh you guys could see that how it is working we will be going with the utc string for now and what we will do is pretty much as we uh set up all the last message last photo last time and all that stuff uh we will literally go ahead and go with that thing now inside of here we want to go and add the last timestamp we want to check everything in here and add the last message there we go and inside of here we want to pass in the last photo that is pretty much going to do all the work for us will this will be uh will this be available for a later watch yes it will be everything is going to be available for watch later uh we will make a part 1 and part 2 videos out of it uh and yeah thank you so much for uh coming back here and being here we are 100 people strong that's awesome okay now uh what we will be doing is that should actu that should have actually fixed that issue here we go and yeah let's test this thing out um and what i will be and what i will be doing is just add another message in here like saying hey and send this message and because and for some reason it actually okay so it's actually a uh my my computer type of issue what i need to do is go to um chat.js and or actually it's called chat.css and go all the way down so let's go into chat.css and find the button guys if it's working for you uh if it's working for you don't you don't have to do this for some reason uh on my computer the display none is just simply not working so instead i will be doing this stuff uh so i am adding a head of zero a width of zero an outline transparent background transparent in the border of none which is literally the exact same thing as display none it's just i don't know what's happening here i need to uh debug that but that's just it is what it is right uh yeah so with that said uh it should be working and it should be reloading because as you guys can see uh somewhere here somewhere here there is the message which says uh send yeah the send message it still says either prevent default we shouldn't enable reloading i gotta uh i gotta look into that so i'm gonna type in hey uh like this and go ahead and refresh it and it should actually yeah it actually updated over here and here we go so it actually showed up nice so now the only thing uh we will do buy a new macbook dude i just bought this one uh i just need to set something up so so what do we what so the only thing now left to do is guys go to pusher.com and make this app real time let's actually do that in a couple of minutes we should be able to do that in like ten or uh five minutes so let's go there and say so we got pusher going on in here and we are just going to sign in uh yep here we go let's go to manage let's go to create app you name it however you wish i will call it imessage live and let's use us west should be good and we have react and we also have some node.js going on the back end and we will go ahead and create the app now with that done it actually throws a couple of code at me uh there is actually let's actually go with the back end first copy that piece of code go back to server.js go up to app.config and what we will do is pretty much just paste it in here change the war to const and yeah that will pretty much do the uh instance work for us now you also need to go in here where uh we said uh db connected and you need to set up the chain stream which is essentially a thing that we are going to be using to trigger the pusher so what we will do is say const chain uh let's actually i'm i'll be using the snippets of code that i have uh so what we will be doing is pretty much just say uh we will set up the change stream which is super easy so cons chain stream mongoose connection collection uh and the collection that we are actually uh watching is going to be the conversations and we just add the watch at the end and next up what we will do is say uh change stream whoo the on change uh we will fire off the function with the change that actually happened and if there is a if the change is ah change dog oh uh it's ending there are few very few people that's right that's right but only the hardcore people are here are here at the end oh yeah you relate yeah so the operation type when the operation type is insert uh we are going to do some stuff and we want to go ahead and trigger the pusher with the messages uh oh no the chats uh stream and we want to say the uh the event is going to be new chat and once one and if the as if uh something else which means uh we are updating uh in the database then we want to go ahead and uh create another channel with another uh with another event and we pass it in again and if like let's handle all the errors that could happen so if that didn't work let's just console log the error triggering pusher now with that done the back end is actually ready to be uh realtime and let's actually go back to our frontend part and go to the sidebar.js file where we will actually first set up all the back all the realtime stuff now if you're scrolling up here in a bit you're good bro i just checked hey frankie what is going on we got frankie in the house yo uh so what we will be doing is pretty much uh can you do a twitch of course um what we will be doing is pretty much just uh copy this part of the code and let's actually set that instance up let's go to the sidebar sidebar chat.js file which sidebar chat.js oops hold on inside the bar chat.js yeah there we go that's what we wanted and we want to go up here like out of the uh whole function let's add the instance say cons instead of var because never ever use we don't ever use var uh now that we have that thing set up we should be able to go ahead and do the other type of connection so what we will be doing is add the uh inside of the use effect we will add this stuff so we are literally going ahead and creating a channel which means that uh with pusher we are subscribing to the messages channel and whenever uh something happens so so a new message thing happens we want to go ahead and get the sidebar elements again okay so that will literally just uh pull in all the the last message stuff okay if you guys remember it this is just getting back the data which we will be okay it's not defined just yet let's go ahead and do that um we are going to go ahead uh we will be doing like pusher for um and we will say oh i haven't even installed this so what we guys want to do now is go to the front end terminal and type in npm i pusher dash js right because on the front end we install the pusher.js and on the backend we are installing pusher as it is so once it will load up uh it should be pretty fast i said fast okay uh okay i think i'm stupid because my brain doesn't want to understand what redox is that's actually not right uh you just want to go ahead and and learn learn whatever you can find on the internet about it and watch all the redux videos that sunny has already dropped and thank you so much shimongi for that nice awesome comment thank you so much okay uh right so now we should be able to uh import pusher with a capital p from uh pusher.js because right this is what we're importing nice and what we will be doing is let's actually test out if it okay so this is the part that we just made real time right so actually if i go in here and say yo that part should update there we go so that part actually updated we are making the app piece by piece real time right so the oops so the other part just uh didn't get uh didn't update because that's not real time just yet but what we will do uh please do a cms app with mer of course drop me on instagram and i will make a list out of it and actually plan these lives the way you guys want it and the way you guys will get the most value out of which keyboard do you use apple magic keyboard okay uh next up what i will be doing is going to uh chad.js i think that should be the next one that we make real time so what we will be doing in here is pretty much yeah let's go to chat.js and in here we will actually need to add two different types of stuff first what we definitely want to do and i just i actually found this part uh found this piece out before the live stream that i should be actually adding it otherwise it will be bugging out so this is pusher unsubscribe messages this is how you want to start the uh use effect fanboy that's right um okay so pusher and subscribe with this will actually when the chat components loads so whenever we are actually switching between chats it actually reloads itself so that user fact actually fires off again because chat id changes and that is a dependency of the new use effect so then we are actually unsubscribing from the messages and that the reason for that is that we want to we don't want to subscribe to it multiply so right if you guys actually remember how pusher works on the frontend side we subscribe to channels right and if we subscribe to channels like multiple times then it will go ahead and refresh all the all this stuff right so if i'm in one chat and i'm entering to another one and then send a message there it will refresh both of them and it's going to be like giggling around and it's just not going to be a good user experience so that whenever we are changing uh chats you want to go ahead and you want to go ahead and unsubscribe from the for sure that you are already subscribed to and then subscribe to a new one i hope this actually made sense it was pretty fast but yeah uh drop me questions if you guys need more explanation okay so what we will then do is pretty much just say um uh subscribe to the new one and that will actually okay that will actually go ahead and say of course we're subscribing to the same channel again exactly rerender stuff many many times we don't want to do that okay and we want to we want to just do whatever we did with the other one so now uh what i think should be happening is next up we need to make the sidebar so right so before that the the other one was the sidebar chat right so that's actually two different type of stuff one of them is going to watch out whenever a new chat is getting added and the other one is watching out for the new messages so that it actually updates the thumbnail and whatever that is in there now let's go ahead and jump into sidebar.js and this is going to be the last piece if you're not running into any bug and this is going to be the last step that we are covering today uh and here we go so that should actually do it notice that we are subscribing to chats now and not new chat and you guys might be asking why are weren't we unsubscribe here and cyborg.js file um that's part that's because we don't need to okay so you only want to unsubscribe to it when you're when you need to and the other thing the reason the other reason is that only the chat gets actually rerendered that many times when we are changing chats uh the sidebar stays consistent because react actually cleverly knows what part of the screen to rerender and okay now let's actually go ahead and test this thing out uh on in sidebar it's not actually existing let's go ahead and import that oh because i haven't created the uh i haven't actually added this part so let's do that and sidebar is loaded everything yeah remember me yeah i remember you okay let's actually add this thing here and change the word to const and you also want to go ahead and import item import pusher from pusher.js yeah with js okay let's see what we missed or haven't missed yeah chat.js let's go into chat.js and chat.js we haven't subscribed there either so we just want to go in and say pusher from pusher.js and we should be good to go in any minute so say const thanks think a bit uh we are saying const and we i think now now no now we should be good okay okay so i'm going into epic cp community and say you guys are awesome and add some fire because you guys are on fire and boom there we go it updated over here we updated it over here and we are go good okay uh please explain how to understand error messages that's actually uh a really good question as she won he says um honestly try to read it it's good okay this is one of the most demanded questions ever okay so how to understand error messages uh so you guys wanna actually understand what is actually right right right you want to read it through word by word it's going to be stupid but sometimes it actually makes sense but when it doesn't make sense you want to go ahead and google it up and then essentially when you google it up so much time you wanna you will essentially understand it by feeling okay and i am today still running into uh issues that i'm looking at like excuse me like what and then i still go ahead and google it up and that's the only way that i can find it and then literally go ahead and copy paste the whole thing into google and there is going to be a stack overflow article about it okay uh and now the only thing we need to test out is if the sidebar is actually real time so we will say youtube over here we will add a welcome message yo and some fire and a rocket nice and if we add it it should pop up immediately with the welcome message and guys we actually are done with today's build it was quite a long one but i think uh guys um uh thank you so much for joining and i think you guys uh have a work for years to develop uh imessage clever programmer took only three hours almost yeah there is a couple of stuff we need we could add into that but yeah uh so guys i hope you guys got value out of it we are 110 strong thank you so much for joining and guys i think today was an awesome build even though my internet dropped for like 10 minutes and thank you so much for everybody who joined and rejoined afterwards uh i really appreciate you guys and make sure that you uh guys are sticking around as we are dropping value on a daily basis so with that said this was it today thank you so much for joining this is david and i'll see you in the next video peace out guys hey me you
