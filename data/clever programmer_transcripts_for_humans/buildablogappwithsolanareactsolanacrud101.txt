With timestamps:

00:00 - in this video we're gonna be making a
00:02 - blogged app on the Solana blockchain if
00:05 - you're a web developer and you want to
00:06 - get started with web3 this is the
00:08 - tutorial for you I'll be showing you
00:09 - guys step by step on how to make your
00:12 - first Solana smart contract using anchor
00:14 - which is just a framework of rust for a
00:16 - blog app we need to be able to create
00:18 - posts so what's special about this is
00:21 - we're going to be able to create a post
00:22 - with a Solana smart contract and store
00:25 - them onto the blockchain well then fetch
00:28 - all of those posts from the Solana
00:29 - blockchain so that we can display it
00:31 - back to our app and making our app
00:33 - decentralized to do this we're going to
00:34 - be using quick node which is our RPC
00:36 - node provider to help us get access to
00:39 - the blockchain and from there I'll show
00:41 - you guys how to set up your Phantom
00:42 - wallet so that we can store our Solana
00:44 - and sign all of our transactions we'll
00:47 - be doing all of that Salon of code on
00:48 - something called Solana playground which
00:50 - we can use to build compile and deploy
00:52 - all of our Solana code as well as my
00:55 - favorite part is testing all of our
00:57 - functions so you can understand how it
00:58 - all works together so before before we
01:00 - get started make sure you use our CLI
01:02 - tool to get the front end code that you
01:04 - need to get started right away and now
01:06 - further Ado let's get to the demo
01:07 - welcome to the demo of the blog app so
01:10 - it's gonna be pretty simple guys I want
01:11 - to show you how this works first thing I
01:13 - want to draw your attention to is this
01:15 - right here so already off the bat our
01:18 - app will auto connect to Phantom you'll
01:20 - see it when I refresh really quickly so
01:22 - let's do that see connect and then boom
01:24 - we're connected right we're connected to
01:26 - this specific wallet I have wallet
01:29 - number four and at the moment there's no
01:32 - user how do I know there's no user
01:33 - because the way I have my code set up is
01:35 - that if I did have a user there would be
01:37 - a picture and there would be a random
01:39 - username that gets generated so let's
01:41 - generate and initialize a user
01:44 - bam okay
01:46 - you'll see that our code uses our
01:48 - Phantom wallet to approve uh Solana
01:51 - functions on the blockchain so we can
01:53 - hit approve all right give it a second
01:55 - and Bam look at that all of a sudden we
01:57 - have nervous Alliance right that's the
02:00 - random name and the random Avatar it
02:02 - generated for me and now we have a user
02:04 - now that we have a user that button that
02:06 - said initialize user is now create post
02:09 - right so what you'll learn today besides
02:11 - uh creating a user will be able to
02:13 - create posts on the blockchain so get
02:16 - excited for that so welcome to the video
02:20 - right right this is for you guys
02:26 - all right so if I hit post there it is
02:28 - this is how you know we're making
02:29 - transactions on the blockchain I hit
02:31 - approve it disappears and Bam there you
02:34 - go there's our post welcome to the video
02:36 - and if I click on it it takes me to the
02:39 - full post page right very Bare Bones
02:42 - front end and we're not even going to
02:44 - focus on what the front end is we're
02:45 - going to be focusing on how to make a
02:47 - smart contract and how to connect that
02:49 - contract to our front-end app so let's
02:52 - get started all right now that we're set
02:54 - up with quick note let's go ahead and
02:55 - look at our app I know you guys saw me
02:57 - use the demo but go ahead and press Ctrl
02:59 - J and make sure you see the interior app
03:02 - so you're in the same root folder as I
03:04 - am right
03:05 - so if I do yarn Dev here
03:07 - all right we're on localhost 3000 so
03:10 - what I'm going to do is open up my
03:11 - browser again and let's go ahead and
03:14 - type in localhost 3000 and let's take a
03:17 - look and Bam there we go here's our app
03:19 - right what's the difference though
03:21 - you notice
03:22 - a couple things there is no posts right
03:26 - but would you say this is a working app
03:28 - I'd say not yet right the things that
03:30 - you see here like my random robot and
03:33 - the create post right it doesn't work
03:36 - right it's all static I can click this
03:37 - nothing right I can uh this is not even
03:41 - a user registered on the Solana
03:44 - blockchain
03:45 - all right so what does this app do right
03:47 - let's take a look so what I'm going to
03:49 - do next is show you the difference so if
03:51 - I open up my app let's go to the source
03:54 - and let's head over to our Pages all
03:58 - right the page that I care about is the
04:01 - dashboard right so in this dashboard
04:03 - right look at this comment here and it's
04:06 - our static data right this random robot
04:09 - here let's turn it to Lance
04:11 - all right so if I save this let's open
04:13 - up my app see how the name has changed
04:16 - it's using static data we want to change
04:18 - this the gold of this app is we're going
04:21 - to turn all of our static data using our
04:23 - Solana code right
04:26 - so I'll simplify it for you all right
04:28 - this is where you can change the Avatar
04:29 - so that means we need a user object
04:31 - right
04:32 - there's another thing here that says
04:34 - connected true
04:35 - right so if I say connected false let's
04:38 - see what happens
04:39 - look at that my name is now gone right
04:42 - and I have this connect button right
04:43 - here that doesn't actually work either
04:45 - okay
04:46 - and then you also see post is equal to
04:48 - this and just some static functions that
04:51 - don't do anything right but the cool
04:52 - thing that you can visualize is if I
04:54 - change the show model to true all right
04:57 - look what happens right this is the
04:58 - modal that we make to create a post all
05:01 - right so that's another thing that we
05:02 - keep in mind think of this as our little
05:04 - controllers that we want to give
05:06 - functionality to right so
05:09 - those are the main things that we will
05:10 - work on the functionality and fetching
05:13 - and creating right another thing that we
05:16 - need to know is how exactly does this
05:18 - app work so let's go ahead and review
05:20 - that
05:21 - okay
05:23 - so what I'm going to do is open up a
05:25 - website and I'm going to use this
05:26 - website to just illustrate how our app
05:29 - works and remember I said you need the
05:30 - prerequisite is to understand uh react
05:34 - well or one the one pretty good that I
05:36 - said is to understand fundamentals of
05:38 - JavaScript and HTML right so let's talk
05:40 - about HTML and react all right so
05:43 - basically there's a tree when it comes
05:45 - to components right so uh the best way I
05:48 - can illustrate this is let's format it
05:51 - so let's take a look what would you say
05:52 - is the parent component right the most
05:55 - top level component that holds the whole
05:57 - entire app well if I were to tell you it
06:00 - would be this
06:01 - app.jsx right here see this if I were to
06:04 - remove this router right the app would
06:07 - break all right we want some proof if I
06:09 - do this
06:11 - boom all right just blank screen I'm
06:13 - gonna bring it back we're good okay and
06:15 - I can't even exit out this model because
06:16 - I need to change this to false
06:20 - boom okay cool
06:22 - all right you got the idea so this is
06:23 - our main component here
06:26 - and there's something called a Blog
06:28 - provider which I'll get to and then
06:29 - there's something called a router all
06:31 - right let's illustrate what this app
06:32 - looks like by making a little rectangle
06:35 - here let's call that app
06:39 - all right so this is our most top level
06:41 - component and the app has children right
06:44 - you do see this router here but we'll
06:46 - talk about that in a second right
06:48 - so if you go let's figure out what
06:51 - router is
06:52 - so it's in Source router boom okay so
06:56 - the child of app is inside a router
06:59 - right and in this router
07:02 - right you see route path we can go to
07:04 - two different pages
07:06 - this forward slash for path means just
07:09 - the regular URL
07:11 - and this read post by ID right it's a
07:14 - dynamic URL so this leads us to another
07:16 - page which is essentially uh in the demo
07:19 - when you saw me click the post it's
07:21 - going to lead you to a page with that
07:23 - post all right so there's two ways
07:25 - routes right two routes our app can go
07:27 - so to illustrate this right we can
07:30 - either load
07:32 - the dashboard right
07:35 - or we can load the full post
07:38 - right
07:39 - so let's uh write that down so let's say
07:41 - dashboard
07:43 - and we'll say
07:45 - full post
07:47 - you with me so far cool so in my app
07:50 - there's two routes dashboard full post
07:52 - right if we go to our folders here
07:56 - underneath sort if we open up the pages
07:58 - folder guess what we see we see
08:00 - dashboard.jsx
08:02 - and we see full posts right so what did
08:06 - I just change where was where does the
08:07 - static data live guys does it live in uh
08:10 - full post or does it live in dashboard
08:13 - what do you think
08:15 - I think it lives in dashboard right
08:16 - because this is dashboard.jsx and this
08:19 - is where the static it is all right so
08:21 - if you understand that you're in a
08:22 - pretty good standing
08:24 - so let's go ahead and make this a little
08:25 - bit smaller
08:27 - cool
08:29 - so now what I want to talk about is
08:30 - what's in the dashboard right so let's
08:33 - go on the dashboard let's scroll down
08:34 - let's look for any other components
08:36 - right we see jsx here that's normal
08:39 - right that's how we can see home and
08:40 - blog right the image that holds my
08:43 - avatar
08:44 - right if I keep scrolling I keep
08:46 - scrolling here line 133 you're going to
08:50 - see something called posts
08:52 - dot map all right let's post then you
08:54 - might not know but post is an empty
08:56 - array
08:57 - or what should it contain it should
08:59 - contain all of my blog posts all right
09:01 - right now it's empty which is why you
09:03 - see nothing right but that map
09:06 - is a built-in array function right if
09:09 - you didn't know map will iterate through
09:11 - an array and basically make a new uh
09:15 - array right if you had like a can of
09:19 - blueberries right you take the
09:21 - blueberries and put it in a new can of
09:23 - blueberries all right depending on what
09:24 - you want kind of like filter but
09:25 - different similar all right so what does
09:28 - this map make right so for every single
09:30 - item
09:31 - and you can read this as post for every
09:33 - single Post in posts
09:36 - make all of this HTML so if we have zero
09:39 - posts how many uh of this jsx elements
09:42 - will it make
09:44 - zero if you had one or two posts how
09:47 - many of these you would make right it
09:49 - could make two right this isn't really a
09:51 - component but we'll label it with one we
09:53 - can call it article right so and then
09:55 - the dashboard
09:57 - right let's do a dude
10:00 - within the dashboard all right it's
10:03 - gonna make
10:04 - articles all right we can illustrate
10:06 - like this articles
10:08 - article
10:11 - article
10:13 - okay think of these as posts they're
10:16 - really just posts
10:17 - cool
10:18 - is there any other components that we
10:20 - need to care about
10:21 - right there's nothing called post form
10:24 - all right when does this post form shown
10:26 - well it's it's going to be shown when
10:30 - show modal is true ah okay so remember
10:33 - when we were changing the static show
10:35 - models true or false right this is our
10:36 - flag
10:37 - that's going to tell us hey this is when
10:39 - you should see the modal this is when
10:40 - you shouldn't see the model so that's
10:42 - how that's working there
10:43 - and if you look we also have components
10:46 - right these are buttons that we made if
10:49 - you go to components you can see that we
10:51 - have a component here called button and
10:54 - I'm just reusing this that's the cool
10:55 - part about react and components is that
10:58 - you have reusable uh jsx that you can
11:00 - use for whatever you need so notice how
11:02 - many times I'm using this button it's
11:05 - like three times I believe
11:08 - all right so this button's right here
11:09 - one and there's another button right
11:11 - here and we're going to create a button
11:12 - use it together soon cool
11:14 - other than that we can take a look at
11:16 - full posts right if I look at full posts
11:18 - here
11:20 - right
11:22 - pretty standard right there's no
11:24 - um it's another article tag but there's
11:27 - no components with it so this is it for
11:29 - full post I don't want you guys to worry
11:30 - about this just yet right we're gonna
11:32 - worry about it later and what I do care
11:34 - about is dashboard
11:36 - so what do we want to do then what's the
11:38 - point of this well let's make some
11:40 - pseudocode
11:43 - to make some pseudocode I'm just going
11:44 - to go down below here and let's make
11:46 - kind of a to-do list right what do we
11:48 - want to do first well
11:50 - if you look at our app
11:52 - can I connect anything no what should we
11:55 - connect to we want to connect to our
11:57 - Phantom wallet okay so first step
12:01 - it set up Phantom connection yeah it's a
12:07 - couple different steps for that we want
12:08 - to set up our Phantom connection to make
12:11 - sure that we can use our test Solana to
12:14 - write to the Solana blockchain right I
12:17 - want you guys to start thinking salon on
12:18 - blockchain for now as like on any other
12:21 - database right what do we want to store
12:23 - on the sauna chain I want to store blog
12:26 - posts right anytime you store something
12:29 - on Solana
12:31 - you need to pay Solana to do that right
12:33 - you're gonna say like hey uh think of it
12:35 - as like space right if you're going to a
12:37 - storage facility you can't just throw
12:39 - your couch in there you need to pay the
12:41 - people to store it there right so we
12:43 - want to set
12:44 - um make payments using our Phantom
12:46 - wallet okay so I'll show you guys how to
12:48 - do that set up Phantom connection the
12:50 - second thing is set up our blog context
12:55 - yeah our blog context right you guys
12:58 - know what do you mean by that right set
13:00 - up our blog context right
13:02 - uh
13:03 - another thing that we should do actually
13:05 - let's make that step three
13:07 - we should do for step two is write
13:10 - Solana
13:12 - functions right
13:14 - we need to be able to create posts right
13:17 - and
13:18 - sign up users right so maybe we can
13:20 - indent this oops
13:23 - we can indent number two and say we need
13:25 - to be able to initialize
13:29 - a new user all right
13:31 - and then we also want to
13:34 - create posts
13:37 - there you go all right so if you were
13:38 - coming from this to do app this is going
13:40 - to be even simpler than the to do app
13:42 - with Solana all right so we all want to
13:44 - do initialize a new user create posts
13:46 - and then set up our blog context right
13:50 - call Solana functions
13:54 - from the front end right because we can
13:56 - make the Solana functions on the Solana
13:58 - Network on the blockchain but we need to
14:00 - call them from our front end right which
14:03 - I'll show you how to do that as well so
14:04 - this is really exciting all right and
14:06 - other than that if you do all this right
14:09 - that's pretty much done so
14:11 - without further Ado let's talk about the
14:13 - Phantom connection all right there's a
14:15 - couple things that you need to do to set
14:17 - up this Phantom connection all right
14:18 - then one of the first things that I want
14:19 - you guys to do is uh make a new tab and
14:23 - let's get Phantom if you don't already
14:24 - if you do go ahead and Skip ahead to
14:27 - where I start connecting the buttons all
14:29 - right so if you don't have Phantom or
14:31 - don't know what it is Phantom wallet is
14:33 - essentially your virtual wallet that's
14:35 - gonna hold Solana for you right it's
14:37 - going to hold any other tokens it'll
14:39 - even hold any nfts that you own on the
14:41 - Solana chain now which is awesome so
14:43 - what you could do is type in Phantom
14:45 - wallet extension right and this is going
14:49 - to work if you're using Google Chrome so
14:51 - since I am using Google Chrome click on
14:53 - this you'll see the extension and go
14:54 - ahead and click install in section uh
14:57 - extension I already have it so you
14:58 - should be good to go all right once you
14:59 - do you should see it over here or if you
15:02 - don't you can click this up extensions
15:04 - puzzle piece and make sure you pin it so
15:07 - that I can click it easily it's going to
15:08 - tell you your recovery phrase make sure
15:10 - you save that somewhere and don't don't
15:12 - share your recovery phase with anybody
15:14 - else or your private Keys alright so
15:16 - when you enter your password I'm just
15:18 - going to do this
15:19 - as you can see you can make multiple
15:22 - different wallets I have four I actually
15:24 - have six now right all for testing
15:26 - purposes and what you need to do first
15:28 - is go to settings here right you can
15:31 - change the name of your wallet right
15:32 - here what I care about is this change
15:35 - network so change the network and make
15:38 - sure you're on the same network that
15:40 - we're developing on so which one we're
15:41 - developing on guys
15:42 - I know you can see it so it's definite
15:45 - you got it good job Jason all right so
15:47 - you can click devnet if you're working
15:50 - on the mainnet click mainnet vice versa
15:53 - Okay cool so we're on devnet we're on
15:55 - the same page but if you notice
15:57 - something here oops not model three we
15:59 - want all four you might not have any
16:01 - Salon all right I have 26 Soul right I'm
16:03 - not rich or anything but I can show you
16:05 - guys how to get test salon right around
16:07 - the devnet this doesn't mean anything
16:09 - to get free Solana on the test net right
16:12 - you can type in seoulfosset.com
16:16 - and all you have to do is open up your
16:18 - wallet again see this cvr6 that is my
16:22 - public key or in other words that is the
16:25 - address of where my wallet lives on the
16:27 - Solano blockchain so let's hit copy
16:28 - click just click on it
16:30 - and go click on this input field paste
16:33 - and there you go there's my full address
16:34 - right if you want to send me money you
16:37 - or send somebody money just send Seoul
16:39 - to that address right same logic here
16:41 - right we can airdrop up to two Soul
16:44 - right I usually do two and make sure you
16:46 - click devnet so let's remember how much
16:48 - I have right now I have 26. cool if I
16:51 - click on this boom successful airdrop I
16:53 - got to Seoul to this address right I can
16:56 - click on my Phantom
16:58 - 28 right get as much as you need uh you
17:00 - won't need a lot you may need like up to
17:03 - six Soul so maybe do this three times
17:06 - right because when we deploy the smart
17:08 - contract that's gonna cost some Salon as
17:10 - well remember anytime you put something
17:11 - on the salon and chain it's gonna cost
17:13 - some so it's a good practice for that so
17:15 - got as much Solana you need other than
17:17 - that you should be good to go and set up
17:19 - with Phantom
17:21 - okay so for now I'll X these out all
17:23 - right so let's set up the Phantom
17:24 - connection the first thing to understand
17:26 - is we need to make sure that my Phantom
17:30 - connection
17:31 - Phantom connection or Phantom wallet
17:35 - connection right
17:38 - we want to make sure that this
17:39 - connection is available in my entire app
17:42 - right so if I want to make this
17:45 - available should I set this up in full
17:47 - post is that going to be working on my
17:49 - entire app no should I set up a
17:51 - dashboard no what if I set it up an app
17:53 - yes all right because if you set it up
17:55 - an app technically Phantom wallet will
17:58 - be available
17:59 - throughout the whole thing the circle is
18:01 - simplifies the where the Solana while
18:03 - the connection is from okay cool
18:05 - so where do we want to set up let's set
18:07 - up in the app
18:09 - okay so I'll put this here to visualize
18:11 - it for you guys and let's go ahead and
18:14 - move to this and let's go ahead and go
18:16 - to our app.jsx what we can do is make
18:19 - this smaller and let's make it a little
18:20 - bit more visible for you guys how's that
18:23 - cool and you're going to see there's
18:24 - already an import ready for you guys to
18:26 - use uh there's the context our block
18:28 - provider which I'll explain later when
18:30 - we get to it our router which controls
18:32 - which page we're at
18:34 - and this is our jsx right here so how do
18:37 - we get the connection right let's go
18:39 - ahead and do that so like I mentioned
18:41 - before we need to wrap our entire app
18:43 - with the connection right so we want to
18:46 - wrap this router with that connection we
18:48 - need to provide our router with the
18:50 - connection so if you understand what we
18:52 - want to do the blog provider will start
18:54 - to make a little bit more sense right so
18:56 - like I said we want to provide our
18:57 - router with the connection
18:59 - so we're going to need to import a
19:01 - couple things
19:03 - so let's go ahead and write import uh
19:06 - let's write this curly brackets here to
19:07 - the structure and let's write connection
19:11 - provider right you're going to see this
19:13 - Auto Import connection Provider from
19:15 - Solana wallet adapter react
19:18 - cool and there's another thing that
19:21 - we're going to need from this it's going
19:22 - to be something called a wallet
19:24 - provider right the first one is
19:26 - providing the connection you can look at
19:28 - the second one is providing which wallet
19:29 - we're using because uh there's multiple
19:31 - walls it's not just Phantom on it I just
19:33 - prefer to use that one so let's go ahead
19:35 - and do wallet provider right and like I
19:38 - said we are using Phantom so we can
19:40 - actually import
19:41 - the Phantom wallet adapter from salana
19:45 - wallet adapter wallets all right you
19:48 - should say wallets yep cool
19:50 - so we got these three Imports uh that
19:53 - should be it I believe cool
19:56 - so the next thing you want to do is set
19:58 - these Imports up so let's go ahead and
20:00 - set up our endpoints
20:02 - right so to use the connection provider
20:06 - what we can do is wrap this entire thing
20:08 - with that provider so let's bring it out
20:10 - I'll show you what I mean connection
20:12 - provider boom I'm would you say this is
20:15 - wrapped inside this not quite so let's
20:18 - go ahead and bring that up here
20:21 - boom
20:22 - so now we just wrapped an entire
20:24 - connection with our app right you can
20:27 - look at it with that Circle again
20:29 - so if I do whoop this is our connection
20:32 - it's provided right
20:34 - or at least the skeleton of it is yeah
20:37 - cool we want to do the same thing for
20:39 - the wallet providers let's go ahead and
20:40 - type in wallet provider
20:43 - all right bring that all in here
20:46 - and let's just bring it out here
20:48 - let's give it a nice indent cool so what
20:51 - did we just do right if this is our
20:54 - connection provider we also provided a
20:57 - wallet around our whole app so think of
20:59 - it like two circles right
21:01 - and again this snap might be super
21:03 - accurate but I think it's a good visual
21:05 - to kind of understand uh what's going on
21:08 - okay cool uh we're not done yet though
21:11 - mostly because we set up the skeleton
21:13 - but we didn't provide a connection and
21:16 - we didn't say which wallet we're using
21:17 - so to do that uh we're gonna need to
21:20 - pass in a prop called endpoint
21:22 - and tell him
21:25 - tell him what endpoint we're using so
21:27 - remember that quick node endpoint that
21:29 - we use this is where you're going to
21:30 - plug that in
21:33 - cool so endpoint equals let's just put
21:36 - this empty object here and let's define
21:39 - what our endpoint is so let's say const
21:41 - and point
21:43 - I'm just going to hold in the variable
21:44 - you don't have to do this but it's going
21:46 - to make this a lot nicer because if you
21:49 - remember
21:49 - our HTTP provider if you copied it
21:53 - it's gonna be pretty long
21:55 - so I'm going to go ahead and put this
21:57 - here
21:58 - we go and we can just write endpoint
22:02 - awesome
22:03 - okay so we have the end point another
22:05 - thing that we need to do is get our
22:07 - wallet set up so what wallets are using
22:09 - we're using Phantom so we're going to
22:11 - need to use this Import in just a second
22:12 - so let's do kant's wallet is equal to
22:16 - use memo all right it's a react hook
22:20 - and inside this react hook
22:22 - it's going to take in an anonymous
22:24 - function I'm gonna put this right here
22:26 - and inside this array let's write new
22:31 - new Phantom
22:34 - wallet adapter right let me put
22:37 - parentheses here comma
22:39 - comma after this uh end of this bracket
22:42 - and then another empty array right here
22:45 - cool so then now that we provided the
22:48 - end point let's provide the wallets for
22:50 - our provider
22:52 - say wallets is equal to wallets and
22:56 - another cool thing is we can write
22:58 - autoconnect here so that it will
23:00 - automatically connect
23:02 - and there you go we set up our
23:03 - connection but at the moment we're not
23:06 - connecting right because there's nothing
23:07 - set up
23:09 - um to use that connection or make use of
23:11 - it so let's go ahead and do that
23:13 - so let's refer to our little diagram
23:17 - here and if I want to use the connection
23:19 - that I just made which component should
23:22 - I be looking at should I look at full
23:24 - posts app or dashboard I'll give you
23:26 - guys three seconds three two one all
23:30 - right if you said dashboard ding ding
23:33 - ding you got it all right so let's go
23:34 - ahead and use the dashboard I don't know
23:36 - why I use my epic pen
23:38 - but let's go ahead go to dashboard.jsx
23:42 - right and let's get started and see what
23:44 - we have here
23:46 - so again I gave you guys a little bit of
23:47 - help here I used all the Imports already
23:50 - right but the Imports that we care about
23:52 - is this use wallet right and we also
23:56 - care about uh Phantom wallet name all
23:59 - right this might be a news already
24:02 - okay
24:03 - cool
24:04 - so let's scroll down we can go back to
24:06 - this app and remember how I said
24:09 - connected is false right we don't have
24:12 - to use this all right calm this out
24:14 - you're gonna see there's errors all
24:16 - right because connected doesn't exist
24:18 - what you need to do is grab connected
24:20 - from use wallet right we imported that
24:22 - from here use wallet is a hook from
24:25 - Solana wallet adapter right and you can
24:28 - get something called connected here all
24:30 - right connect it
24:32 - is basically going to read our
24:34 - connection and say hey there's a wallet
24:35 - connected if there is right it will be
24:38 - true and if it's not it's going to be
24:40 - false okay so let's go ahead save
24:43 - okay cool another something here it
24:45 - doesn't say uh
24:47 - what's called connect there's no connect
24:49 - button right it's the same as if I were
24:51 - to undo this
24:53 - and bring this back it's the same as me
24:56 - switching this flag or this variable
24:58 - from true I mean from false to True
25:00 - right except I didn't have to manually
25:02 - change it right this is called Static
25:04 - right and me taking this out is making
25:06 - it what we call Dynamic right so if I
25:10 - wasn't connected for whatever reason oh
25:11 - let's refresh this
25:13 - or let's actually just uh see if there's
25:15 - a way to disconnect here
25:19 - okay now I'm a different person
25:22 - cool
25:24 - I guess there's no real way to
25:25 - disconnect oh I know maybe if I do
25:27 - uh different network let's try this I
25:29 - actually don't know what will happen
25:30 - here
25:31 - [Music]
25:33 - okay so it says I'm connected even
25:35 - though I'm in a different network
25:37 - that's fine but basically if I my wallet
25:39 - wasn't connected which you might see
25:41 - when I mess around with this
25:44 - right it's gonna say connect but
25:46 - remember that
25:47 - um
25:47 - property right here autoconnect it will
25:50 - automatically connect our wallet if it's
25:52 - already there
25:53 - so let's try and not having this
25:57 - there we go cool so I removed auto
25:59 - connect so now it's a better visual
26:01 - connected is what guys is it true or
26:03 - false
26:04 - false I click this right it should work
26:07 - right we should auto connect boom
26:11 - awesome Okay cool so the connected is
26:13 - working now and let's see what else
26:17 - on connect select connecting true boom
26:20 - okay
26:22 - nice
26:25 - awesome so we're Auto connecting we
26:27 - already have our Phantom connection up
26:29 - and running let's see what else do we
26:31 - need here I actually think that's good
26:33 - all right so we'll come back to this
26:34 - right
26:35 - but with that said we have our Phantom
26:38 - wall connection up and running which is
26:40 - awesome
26:42 - all right so what's next let's take a
26:43 - look at what we wrote right what we want
26:46 - to do next is write Solana functions
26:50 - right that was a very simple way to say
26:53 - um
26:54 - edit write Solana smart contract right
26:58 - so if you didn't know if you don't know
27:00 - what smart contract is basically it's
27:02 - exactly what it sounded like it's a
27:03 - contract right where you have a list of
27:05 - things that you need to do and depending
27:07 - on what you wanted to happen it happens
27:09 - instantly that's what makes it smart
27:11 - right
27:13 - so how do I write a salon a smart
27:15 - contract well I'm glad you asked so let
27:17 - me show you
27:18 - so I'm gonna make this full screen We're
27:19 - not gonna go into vs code for a while
27:21 - we're going to come back to it in later
27:22 - all right so we want to do let's make a
27:25 - new tab here and let me show you a
27:27 - website it's going to be called
27:31 - beta.sol.pg.io if you guys are coming
27:34 - from solidity at all this is essentially
27:36 - the remix of Solana it's an online IDE
27:40 - where that helps you write Solana smart
27:43 - contracts all right I already have a new
27:45 - project set up but let's say you want to
27:47 - make your very own project what you
27:48 - could do is hit create
27:50 - and there's three Frameworks we could
27:51 - use native rust uh anchor rust it's just
27:55 - a framework of rust and then there's new
27:57 - support for something called seahorse
27:59 - which is right you can write Solana with
28:01 - Pike with python right let me try it
28:04 - again and there's a new framework here
28:05 - called seahorse which is very exciting
28:07 - it's basically writing Solana code with
28:10 - python which is cool all right but today
28:13 - we're going to be using anchor so let's
28:15 - go ahead and name our project let's say
28:16 - uh Solana blog let's click anchor rust
28:20 - click create
28:21 - and boom there we go right and you
28:24 - should see basically the same thing I
28:25 - had before right uh let's just go over
28:29 - what is here right so there is
28:31 - essentially an import here this is the
28:34 - ID of our smart contract or what we'll
28:36 - call in Solana programs right so when I
28:39 - say program it also means smart contract
28:41 - and I'll use them interchangeably cool
28:43 - so if you see this hashtag program this
28:46 - is what we call a macro in Rust and
28:48 - underneath it is uh the actual program
28:52 - right so if this is a macro for program
28:55 - underneath it is our smart contract this
28:57 - is everything about our smart contract
28:59 - this is a function there's structs here
29:01 - don't worry about those just yet but uh
29:03 - we'll get to it so what I'll do for you
29:05 - guys is I'm going to erase everything
29:08 - except declare ID because uh we're gonna
29:11 - need that for a second I want to build
29:12 - it from scratch just for you this is
29:14 - Solana playground the reason why I love
29:16 - it is because not only you can build you
29:19 - can also test all of your salon as well
29:22 - as deploy right because after you write
29:24 - this smart contract we need to deploy it
29:26 - on the blockchain right so let's
29:29 - illustrate that right so basically
29:30 - what's going to happen is we're going to
29:32 - write a rectangle here that's a smart
29:34 - contract let's make a giant one this is
29:37 - called the Block Chain right so if this
29:40 - is the Smart contract right we're going
29:41 - to write something here all right once
29:44 - we finish writing it we can deploy it so
29:46 - that it lives on the blockchain right
29:49 - let's make a circle here this is our our
29:51 - app what we want to do is use our
29:54 - endpoint
29:57 - right we use our endpoint
30:00 - to connect to the blockchain call our
30:02 - smart contract and what let's say we
30:04 - want to create a post we'll call the
30:06 - create post from this smart contract
30:07 - we'll create the post right the post
30:10 - will get created right here this is the
30:12 - post on the blockchain and then we're
30:14 - gonna fetch the post right fetch
30:17 - post and this is a visual of what's
30:19 - happening what's going to happen all
30:21 - right so what's the first step we need
30:22 - to make right so if we just rewind a bit
30:24 - what we need to do first
30:26 - is make the smart contract so this is
30:29 - the step that we're on visually you with
30:30 - me cool
30:32 - so let's get started Okay cool so as you
30:35 - can see our main file that's going to
30:37 - have all the main information is lib.rs
30:40 - this is our entry point uh for Solana to
30:43 - read our code so declare ID
30:46 - um is our is the program address all
30:51 - right
30:52 - so let's get started to get started
30:54 - remember when I use the word import
30:56 - where we're importing usually a library
30:58 - a hooked from react right with anchor
31:02 - the closest equivalent we have is
31:04 - something called use we want to use
31:06 - anchor Lan right uh anchor Lang is a
31:11 - library within anchor which again
31:13 - framework for rust so when I do colon
31:16 - colon basically I'm going inside that
31:19 - folder or inside that library and
31:22 - there's going to be a couple different
31:23 - folders or different other libraries
31:24 - right so within anchor Lang I want to
31:28 - get something called Prelude simple
31:30 - enough right and you don't have to fully
31:33 - understand what Prelude is but just know
31:35 - that we're going to import it into our
31:37 - liv.rs
31:39 - of course if I do call again I'm going
31:41 - inside what I'm looking inside Prelude
31:44 - and then I'm going to write Star right
31:45 - get me
31:46 - everything from Prelude which is coming
31:49 - from anchor Lang
31:51 - we're good all right let's say we had
31:52 - but now the question is let's say we had
31:55 - other files here right we've got other
31:58 - files here let's make other files to say
32:00 - a new file and say uh constant dot RS
32:03 - right RS stands for rust
32:05 - and let's say a state star RS cool how
32:09 - do we bring these files whatever's in
32:11 - them Insider app right so the first step
32:13 - is you want to say Pub mod constant and
32:17 - then you want to say Pub my States right
32:20 - then to import them as modules we're
32:24 - going to say use create all right think
32:27 - of crates in Rust like
32:31 - um closest thing I think of for
32:32 - JavaScript would be like npm it's like
32:34 - packages right so I want to get let's do
32:38 - this get constant all right which is
32:40 - going to be this file and basically if I
32:42 - do this what am I saying now get me
32:44 - everything within constant right now
32:46 - there's nothing but we'll put something
32:48 - nowhere and let's do a comma here and
32:49 - get me States and how do I get
32:50 - everything within States we'll do this
32:52 - another thing to notice is if I put a
32:55 - semicolon here right in JavaScript we
32:57 - can get away with this right in Rust we
32:59 - can't right every time you end the line
33:02 - right that's the last piece of that line
33:04 - of code you need to put a semicolon
33:06 - otherwise it'll think that it'll rust
33:08 - with read it like this which is going to
33:10 - give us an error right so make sure you
33:11 - mark the end of your code or line with
33:14 - the semicolon if you don't do this it'll
33:15 - yell at you after that usually the
33:17 - program the declare ID goes here awesome
33:19 - and remember how do we Define a program
33:22 - right we can use a macro
33:25 - you could say hashtag
33:27 - square brackets
33:29 - program just like so cool so what we
33:33 - could do here is a pub mod and this is
33:36 - where you can name your smart contract
33:38 - or your program
33:40 - what do I want to name this I could just
33:42 - say blog so all right and then if I put
33:45 - curly brackets here this whole scope is
33:49 - the Smart contract or what we call the
33:52 - instructions right what are the
33:54 - instructions of this contract right cool
33:57 - so quick recap basically we are
33:59 - importing any libraries or files that we
34:02 - need to the global scope over here
34:05 - everything I'm highlighting it's in that
34:06 - scope we can just use this as is but we
34:09 - can also just bring these variables into
34:11 - this scope right we can do that by
34:13 - saying use
34:15 - super
34:17 - star this liner here to my understanding
34:19 - right basically if this bring if these
34:23 - lines of code brings it to this scope
34:25 - you super will bring all of these into
34:28 - this scope all right so that I can just
34:31 - use it easily in the program otherwise I
34:33 - still have to do like create
34:35 - this and then get what I need from it I
34:38 - can just call what I need without uh
34:41 - saying crate or States
34:42 - okay cool
34:45 - so let's make our first function
34:49 - all right to create a function on uh
34:51 - Solana I'm going to do is write Pub FN
34:54 - boom FN is like in JavaScript if you
34:57 - write function here
34:58 - so FN is function next is just the name
35:01 - right you guys know this and let's say
35:03 - let's call it init user right when I say
35:05 - knit it means initialize the user right
35:07 - so if we go back to our app we want to
35:10 - initialize a user for this app and the
35:13 - user
35:14 - should be related to our wallet right so
35:18 - essentially we can sign up using our
35:20 - wallet address as our user right that's
35:24 - the idea here
35:25 - you don't have to do there's many
35:26 - different ways to do it but it's the way
35:28 - we'll do it cool and just like any other
35:31 - function we put parentheses uh the
35:33 - difference is you need to put a dash
35:36 - greater than sine to make an arrow
35:38 - and then you're going to say result
35:42 - and do something like this right
35:44 - basically you're saying hey this
35:46 - function will get you a result
35:49 - and what and then we put these curly
35:51 - brackets and that is what the function
35:53 - does this is a skeleton of a function in
35:56 - Rust so you would basically write oops
36:00 - right logic here
36:03 - and what do we write in logic of it's
36:05 - initializing a user all right so let's
36:08 - build this like in JavaScript and I'll
36:09 - turn it to rust
36:11 - so basically
36:13 - uh we're gonna put in a couple
36:14 - parameters
36:16 - okay so again for JavaScript what should
36:19 - making a user take in right I can see a
36:22 - name and I could see a profile picture
36:25 - so I could write that name and uh we'll
36:28 - call it Avatar boom right so this is how
36:30 - you write it in JavaScript but now I'll
36:32 - show you in Rust it's a little bit
36:34 - different right if you guys are familiar
36:36 - with typescript this might make a little
36:38 - bit more sense so with rust you have to
36:41 - specify the type of the variable
36:44 - JavaScript it doesn't care what it is
36:46 - it'll figure it out later right
36:49 - rust it needs to know so name you want
36:52 - to put a colon here to define the type
36:54 - and then you can say space string so I'm
36:57 - basically saying uh this function init
37:00 - user is going to take in a parameter
37:02 - called name and it's going to be a
37:04 - string if it's not a string you should
37:07 - it's just it's a problem right so then
37:09 - Russ will say like hey this isn't a
37:10 - string
37:11 - that's the reason for typecasting
37:13 - okay so for Avatar right what should
37:16 - this be if you're not sure we could take
37:18 - a look at our vs code and we can go to
37:19 - dashboard where is a URL an image or an
37:22 - avatar is essentially with these quotes
37:25 - it's a string so we can actually say
37:27 - string here too
37:28 - cool so you might think we're done but
37:31 - there's one more thing that rust needs
37:33 - he needs to take in uh context something
37:38 - called or we'll say a CTX okay well what
37:41 - is the context right uh essentially is I
37:44 - look at context to my understanding is
37:46 - what information should init user have
37:49 - when it comes to
37:51 - um
37:52 - destruct and rust right so you might not
37:55 - that might not mean anything to you but
37:56 - that's okay
37:57 - all right so what is the type of struck
37:59 - it's not a string right it's going to be
38:01 - type context
38:03 - okay and you're gonna put these two
38:05 - things here and inside this right if you
38:08 - look at the docs will usually be t or
38:09 - something like that inside this you want
38:11 - to describe the struct or what that
38:14 - context is well uh usually the
38:17 - convention here is the context will be
38:20 - similar to the name of the function so
38:22 - I'm just going to be init user right so
38:24 - take in whatever context whatever init
38:27 - user means taking the name and taking
38:30 - the Avatar right
38:32 - there's the reason why we need context
38:34 - here is because there's some validation
38:35 - there you go so we need init User it's
38:38 - going to take in context name Avatar uh
38:40 - this this doesn't exist yet all right if
38:42 - we were to run this and say init user is
38:45 - undefined or I don't know what this is
38:47 - right so what you need to do is we're
38:49 - going to pause like put a pin on this
38:50 - pause it and let's create this init user
38:54 - context right so it's going to be pretty
38:57 - simple you want to go outside the scope
38:58 - of your program so I'm going to go to
39:00 - line 19 for me
39:02 - and let's define this struct so
39:06 - uh in Solana the most simplest way to do
39:09 - this what we're going to do is uh if we
39:12 - can create something called accounts
39:15 - right or a program derived account
39:17 - basically we're going to use our program
39:21 - to create
39:24 - accounts that hold information right so
39:26 - this might hold a user right so
39:30 - basically our smart contract created
39:31 - this
39:32 - and we can call this an account right
39:34 - this account will have its own public
39:36 - key right it'll have its own address on
39:38 - the blockchain and information that I
39:41 - put in right
39:42 - so
39:43 - in order to set that up uh we're gonna
39:46 - have to write these structs so I'm going
39:48 - to say hashtag and we'll say derive
39:50 - right this is why I'm going to say the
39:52 - word counts built-in macros that's going
39:54 - to make our life easier
39:56 - okay next we're going to say instruction
39:58 - here because this is an instruction
39:59 - right then we can say the pub
40:02 - struct and then we need to make sure
40:04 - it's the exact name of this right
40:06 - otherwise I won't know what you're
40:08 - talking about so this is init user right
40:10 - same spelling right it's good
40:12 - and then we need this again and we need
40:15 - to write info right again like for me
40:18 - when I was getting sauna it was so hard
40:20 - to understand info talked to a lot of
40:22 - different developers about this but the
40:24 - simplest way to my knowledge about how I
40:27 - can explain this is that info is what we
40:30 - call a lifetime variable right uh the
40:32 - way I'll explain it is in JavaScript if
40:35 - I say let array is equal to this right
40:38 - how long will this array exist in memory
40:42 - in JavaScript it's essentially going to
40:44 - exist Forever Until you don't use it and
40:46 - then something called uh the garbage
40:47 - collector in JavaScript will remove it
40:49 - right but otherwise it's just gonna stay
40:51 - there until you do something
40:53 - a lifetime variable tells us tells rust
40:57 - how long this will live
40:59 - four in the code
41:01 - and the reason why info is confusing is
41:03 - because info you can look at it as it'll
41:06 - live this will live as long as it needs
41:09 - to right yeah I know all right cool so
41:13 - all you need to know is that usually
41:14 - when we're going to make a struct we're
41:16 - going to add info to it all right we
41:17 - need to tell them how long this is going
41:19 - to live for you don't need to fully
41:22 - understand how how long I need to live
41:24 - for you just need to put input okay
41:26 - cool what is important though is within
41:29 - this two color brackets is the scope of
41:32 - the context and within that we're going
41:34 - to write another macro here it's going
41:35 - to be a count all right
41:37 - the cool thing about uh anchor is that
41:39 - we don't need to set up the account
41:42 - itself we can use this macro to
41:45 - initialize it or set it up so how do we
41:47 - initialize an account
41:49 - um it's really difficult guys just gotta
41:50 - write in it boom it's initialized right
41:54 - cool next thing what I have here is
41:56 - something called seeds right
41:58 - seeds is what's going to help us find
42:02 - the program address
42:04 - for our
42:06 - account right let's let's say we want to
42:08 - make a user account right
42:10 - it's going to be at like some sort of
42:11 - address like something like this right
42:13 - the address already exists we just need
42:17 - to get a place we need a place to put
42:19 - this user right at this address right so
42:23 - in order to verify or trace it back
42:26 - we're going to use a seed to generate
42:28 - that address right the closest thing I
42:30 - can relate to it's not exactly the same
42:32 - thing is let's go to something called
42:34 - dice bear
42:36 - right dice bear is you put a custom seed
42:40 - right and then you get a random Avatar
42:43 - so if I say cat right this is the Avatar
42:45 - it generates so the equivalent here is I
42:48 - put in a seed right we get uh instead of
42:52 - a picture or an avatar we get a public
42:54 - key or an address right it's not a new
42:57 - address it exists it's just a place we
42:58 - can put it
42:59 - all right so let's say my seed is a
43:01 - strand called user
43:03 - and let's get and usually we do our
43:06 - Authority or our public key
43:07 - so let's copy this
43:09 - and paste it right it's these two things
43:11 - together will make our public address so
43:13 - this is our public address or our our
43:16 - PDA
43:18 - right so
43:20 - yeah that's what we want to do for seats
43:22 - right and for the seeds itself right I'm
43:26 - just going to write user seed here this
43:28 - is a variable right there's if I were to
43:30 - run this it's going to say this is
43:31 - undefined cool don't worry about it yet
43:33 - now we're going to put a comma here
43:35 - right and say another C that this is
43:37 - going to take is Authority right who
43:40 - Authority is basically
43:42 - um who is in charge of this account and
43:46 - typically it will be though the person
43:49 - what wallet that you're connected with
43:51 - right so this is my CV right this is why
43:53 - I put this there TV right and to get
43:56 - that key and make it Dynamic you're
43:59 - going to say authority.key
44:00 - dot as ref and you don't need to know
44:03 - exactly what as ref does just know that
44:04 - it gets it basically formats the key to
44:07 - something that the seeds can read
44:10 - right this can read
44:12 - okay
44:13 - so we set that up
44:15 - let's set up this variable right where
44:16 - am I getting this variable from you
44:18 - could Define it at the top here there's
44:19 - nothing wrong with that I just want to
44:21 - show you guys an alternative and that's
44:22 - going to go into constants all right we
44:24 - can go into our constants right here
44:26 - and what we want to write is say use
44:29 - anchor Lang Prelude
44:33 - star
44:35 - all right and to make a constant we can
44:38 - say constant sorry like this
44:40 - and say Pub const right it says constant
44:43 - user seed right that's where I get the
44:46 - name and what's the type of this
44:48 - it's going to be and u8
44:51 - uh just means unsigned integer right and
44:54 - it's going to be equal to a binary
44:58 - string called these right so this is a
45:01 - fancy way to put a string as a seed all
45:05 - right you'll see that when I test it
45:06 - right don't worry this doesn't make
45:08 - sense to you once we test this it will
45:10 - all make sense
45:12 - okay then we're going to do a constant
45:14 - here
45:15 - let's put another one since we're here
45:16 - we'll say Pub cons we're gonna need a
45:18 - post seed later on so to save time I'm
45:21 - gonna make it same thing
45:24 - and you ate all right because we need
45:25 - this in bites and bites of a
45:30 - boom so we have our constants all done
45:32 - all set up and now because of this we
45:35 - bring it to Global scope because if you
45:37 - super I can just write uh user seed well
45:41 - actually no it's because of this it's
45:42 - still Global I can still write user seed
45:44 - right here
45:46 - instead of doing a constant or something
45:49 - like that right
45:52 - so we have that seeds done another thing
45:54 - that we're going to need is something
45:56 - called bump right
45:59 - right so what bump is basically let's
46:01 - say I want to put this user at this
46:04 - address but well let's say there's
46:06 - something in there let's say there's a
46:07 - tweet in there right I can't put this
46:10 - there if there's a tweet so bump is
46:12 - going to go to the next available one
46:14 - right which is at a different interest
46:16 - which could be
46:18 - Asda Das and then different set of
46:20 - numbers right we could put the user data
46:22 - at that address right the equivalent on
46:25 - dice bear would be like this is my seeds
46:26 - oh wait there's already a picture there
46:29 - let's put a
46:30 - one in there this is our program address
46:33 - clearly different right
46:34 - cool so I hope that makes sense that's
46:36 - what bump is for and again if whenever
46:38 - we store something or puts even though
46:41 - it's our program creating this account
46:43 - we still need to pay so we can say the
46:45 - payer is equal to the authority and the
46:46 - authority you can just look at it as us
46:48 - or who owns it
46:50 - the next thing I need to do is space
46:53 - right how much space is whatever this is
46:57 - gonna take okay well to determine that
47:01 - right we need to figure out what the
47:03 - hell we're getting space for so before I
47:05 - Define how much space it is what I want
47:06 - to do is say what this macro is for
47:10 - and again do that underneath the macro
47:11 - so we say Pub user account
47:15 - right
47:16 - user account right so how much space
47:18 - does a user take I don't know either yet
47:20 - right we got to find out
47:23 - okay so I'm lying I do know but let's
47:24 - find out together so again what type is
47:26 - user account well user account is going
47:29 - to be a type of an account right this
47:30 - should be an account
47:31 - uh inside of it we're going to put info
47:34 - of course and put a comma here and put
47:37 - user account right so what kind of
47:40 - account uh what kind of type is user
47:42 - account it's going to be an account what
47:43 - kind of account is user account it's
47:46 - going to be something called user
47:48 - account does this exist yet I tell you
47:51 - no so if I run this it's going to say
47:53 - hey I get it yeah this should be an
47:55 - account that's cool but what the hell is
47:57 - a user account right that's what it's
47:58 - going to say
48:00 - so I'm gonna put a comment here and
48:01 - let's make another macro to set up the
48:04 - rest of it I'll say account mute and
48:06 - it'll say Pub
48:08 - Authority
48:10 - signer
48:13 - info
48:15 - right another thing is Pub system
48:19 - program
48:21 - is going to be program all right this
48:23 - signer
48:24 - uh attribute here is coming from
48:26 - somewhere else this program is coming
48:28 - from anchor link all right so we could
48:30 - just say info
48:32 - system boom all right so within this
48:35 - context we figure we give him we give
48:38 - this function knowledge about what the
48:40 - hell a user account is and Authority
48:42 - what are the authority is which is US
48:44 - who's ever signing the transactions and
48:47 - the system program which is going to be
48:50 - essentially this
48:53 - Okay cool so that's all said and done
48:56 - but uh we still need one more thing we
48:58 - need a user so let's go ahead and make
48:59 - that so remember the states file this is
49:01 - what we're going to do so similar that
49:02 - we did the constants right we can say
49:04 - use anchor
49:07 - Lang
49:09 - Lang Prelude
49:12 - star semicolon did I put a semicolon
49:14 - here sometimes I forget cool so we end
49:17 - that import now how do we Define an
49:19 - account right so we made a constant here
49:21 - how do we get an account well luckily
49:23 - there's also a macro for that so we can
49:25 - say account right and we're gonna knock
49:28 - another one we say derive
49:30 - default
49:32 - and we're good to go so let's define
49:34 - what the name of this account and we
49:36 - want to make sure that's the same name
49:37 - as this otherwise it'll still be
49:39 - undefined so we say Pub struct user
49:42 - account all right so you might not know
49:44 - what the hell is going on right but if
49:47 - you're coming from JavaScript let's say
49:49 - I want to make a user all right how
49:52 - would I make this user object right if
49:54 - you think back it's going to be name
49:56 - right and it's going to be uh Avatar
50:00 - this is the rust equivalent or the
50:02 - anchor equivalent right so how do we
50:05 - make a user object well we can say that
50:08 - a user account will always have a name
50:11 - and what's the type of that strap
50:13 - yeah cool what else should a user
50:15 - account have I think the cheat sheet is
50:18 - right here guys it's a pub Avatar
50:21 - string right
50:23 - cool
50:24 - and now do you got it this is the user
50:26 - account and you could leave it as is but
50:27 - I'm going to add more properties to a
50:30 - user account uh to make the rest of our
50:33 - functionality a lot simpler this is the
50:35 - way you can think about your code right
50:36 - the way I'm getting better and better at
50:38 - Solana I'm no expert yet is by
50:40 - constantly making these projects right
50:42 - it's not the projects that yourself that
50:44 - gets a job it is you practicing them and
50:46 - understand the concepts so once you
50:48 - figure out the pattern right you can use
50:49 - it for one so let's say I want to make a
50:50 - tweet account a Twitter account all
50:53 - right how would you make that all right
50:54 - same structure so for the authority I'll
50:58 - say I'm gonna have another property
51:00 - called Authority here and this is gonna
51:01 - accept the type of Pub key right because
51:03 - when I make a user I want to make sure
51:05 - that the public key of my wallet is
51:07 - associated with it
51:09 - all right that wallet has authority of
51:12 - this user and it should be different and
51:14 - dynamic
51:15 - another one that's going to be is a last
51:17 - post ID right because when I map through
51:20 - the posts I want to give it an ID I
51:23 - don't want any duplicate IDs out here so
51:25 - we can say u8 right if you're expecting
51:28 - a lot of posts you can do u16 u32 right
51:31 - depending on the size
51:33 - so I'll say you ate for Onsite integer
51:37 - comma there and uh we also want a total
51:40 - post count how many post accounts has
51:42 - gotten have in total just in case you
51:43 - want to use that somewhere
51:45 - you wait so again optional this last one
51:47 - but it's good to know
51:50 - okay
51:52 - so that is a user account
51:55 - I think that should be it
51:58 - um let's go ahead and build so a good
52:00 - way to test if this code is all valid is
52:02 - to build and if you get any warnings uh
52:05 - there's something wrong and usually I do
52:06 - because I forget a semicolon I might
52:07 - type something wrong or I might forget
52:09 - which I just remembered thanks for
52:10 - reminding me guys I never said how much
52:12 - space does this take right so there's
52:14 - some anchor documents out there that
52:16 - tells you how much space this could take
52:17 - and for Strings usually it's going to be
52:20 - four plus how long you think the string
52:22 - will be and I'll say 256 bytes or
52:25 - character that's equivalent to one
52:27 - character I think and then we can do
52:29 - four plus Avatar which is an image URL
52:33 - so which one thing would be longer a
52:35 - name or an avatar
52:36 - an avatar you got it guys you guys are
52:39 - geniuses right so what I'll do is this
52:41 - what I did before was figure out what's
52:44 - the longest URL we can put and this
52:46 - would be the longest URL 2048.
52:50 - for Pub Key this is going to be
52:51 - consistent it's usually 32.
52:53 - for u8 you can just say one and one
52:56 - right
52:57 - cool all right so this is how much space
52:59 - it takes you just add it all up and we
53:02 - get the number that we want and that's
53:03 - how much space we get right so for space
53:07 - I already I already did the math it's
53:09 - going to be
53:10 - 2302 312 bytes all right another thing
53:15 - that we need is something called an
53:16 - account discriminator
53:18 - when you're storing stuff in memory you
53:20 - want to separate the stuff that you put
53:22 - in memory
53:24 - so we do that by running plus eight here
53:26 - right and again I'm still learning what
53:28 - this means but I just know it's
53:29 - necessary so I'll do plus eight
53:32 - cool so now we have how much space I
53:35 - believe this should be good let's just
53:36 - run it build
53:38 - cool
53:39 - and there you go right I already forgot
53:41 - the semicolon up here
53:44 - let's go ahead and try again you super
53:46 - needs a semicolon
53:47 - course
53:49 - result oh okay okay all right cool I
53:53 - know what's going on now all right so
53:54 - that should be enough of the semicolon
53:56 - Fiasco but we didn't write any function
53:59 - we set up the structs and the context
54:00 - but I forgot we gotta write some logic
54:02 - here
54:03 - so let's quickly write some um logic
54:07 - so if I write CTX here
54:09 - right if you were to con to log this in
54:11 - JavaScript right this doesn't work in
54:12 - Rust but if I were to write this in
54:13 - JavaScript we should see
54:15 - all this information right that's the
54:17 - context
54:18 - all right uh if I wanted to get the
54:22 - information of a user I can say dot
54:26 - accounts
54:27 - or dot accounts dot do I want a
54:31 - Authority a program I want the user
54:33 - account user
54:35 - all right so this gives me
54:37 - this
54:39 - yeah
54:39 - so with that in mind let's uh organize
54:42 - it with variables so it's easier so we
54:43 - can say let user account is equal to
54:48 - and mute
54:51 - all right writing mute here means that
54:53 - this variable can change all right in
54:56 - JavaScript we can write let user is
54:58 - equal to Lance and then say user is
55:01 - equal to David right and that would just
55:03 - be just fine no errors but if I did this
55:06 - in Rust it'd say hey
55:08 - you didn't say this was mutable why are
55:10 - you changing it right so here I'm
55:12 - letting rest on hey uh this can change
55:14 - all right and it can be cat ctx.accounts
55:17 - dot user account all right just storing
55:21 - that in this variable and saying that
55:23 - hey this could change it doesn't have to
55:24 - be Lance all the time could be whatever
55:26 - user is made
55:27 - right cool so now we also want to set up
55:30 - uh this Authority variable
55:32 - of course we say and mute and say
55:34 - ctx.account
55:36 - and make sure it's accounts
55:38 - Dot
55:40 - Authority all right so it's kind of like
55:42 - an object with DOT notation
55:44 - Okay cool so now
55:47 - if I console log or say user account
55:51 - it's basically the same as this line
55:52 - right so if this gives me this
55:58 - how do I get the name all right how do I
56:01 - get the name if it's an object or it's
56:02 - like an object we can say dot name all
56:05 - right so now I got access to the name I
56:08 - can say here that the name will be Lance
56:10 - all right why is this bad if I just run
56:12 - this and you know put it into my blog
56:14 - app why would this be bad it would be
56:16 - bad because every user from now on will
56:18 - be called Lance and that would be so
56:20 - confusing right we want to make this
56:21 - Dynamic rights how to make this Dynamic
56:23 - well we can say is equal to name all
56:26 - right well where's this coming from
56:28 - ah now regular parameters right how we
56:32 - use them in JavaScript it's going to be
56:33 - the same
56:34 - cool with that logic
56:37 - it's going to be
56:39 - just like how we did it before so we can
56:41 - say user uh account
56:44 - dot Avatar is equal to Avatar right and
56:48 - then we have a user count dot last post
56:53 - ID it's equal to right we don't have it
56:57 - ID parameter but we do know
57:00 - that when I knit a user it should start
57:04 - at zero
57:05 - and when we first make a user the ID
57:07 - should be zero
57:09 - okay user account dot post count is
57:13 - equal to right how many total posts
57:15 - should they start with we can also say
57:17 - zero
57:18 - okay and who should be the authority of
57:20 - this
57:21 - all right do we have access to that we
57:24 - do and it's in this variable right we
57:26 - can say Authority right but I want their
57:29 - public key right like the CV right you
57:31 - can say get it by saying dot key it's a
57:34 - built-in method
57:35 - and I can say semicolon all right so now
57:38 - we have a complete function uh usually
57:41 - in JavaScript we have something like a
57:43 - return here the equivalent or the
57:45 - closest thing it's not the same thing is
57:47 - okay
57:49 - all right and if you wanted to return
57:50 - five you can put five here but we won't
57:53 - return anything so we'll just say Okay
57:54 - building build successful let's go cool
57:57 - and uh they're saying it's a this one
57:59 - when you ever see a warning that is your
58:02 - program will still run it's just letting
58:03 - you know like hey uh just so you know
58:05 - this should change but it'll still run
58:08 - so there's something with the post seat
58:10 - here and it's right it should be cap
58:14 - let's build one more time hey okay build
58:16 - successful right so now we can hit
58:20 - deploy and this is gonna cost some
58:22 - Solana so another thing I forgot to
58:23 - mention is with Solana playground
58:25 - there's this button here make sure you
58:27 - click it you might have figured this out
58:28 - at this point in tutorial but it's going
58:29 - to connect you to a playground wallet so
58:31 - this wallet is different than your
58:33 - Phantom it's a built-in IDE notice how
58:35 - the address is different make sure you
58:37 - have Solana here if you don't you could
58:39 - take this address and bring it to Solana
58:42 - Fawcett and do the same thing cool so
58:44 - this is the address of this playground
58:45 - wallet awesome uh let's go ahead and
58:48 - deploy cool so now it's going to deploy
58:51 - our smart contract right we wrote it
58:53 - right here and we're going to deploy it
58:56 - to the blockchain all right so if I were
58:58 - to erase all this you guys should know
58:59 - what this means now so we wrote Our
59:01 - smart contract we are deploying it to
59:03 - the blockchain as we speak with all the
59:06 - little code that we wrote in it awesome
59:07 - deployment successful and now it's on
59:10 - chain and we don't it's on the
59:12 - blockchain but we're not going to call
59:14 - it yet from our app right one thing I
59:16 - want to do first is now that it's
59:17 - deployed if you look at this test tube
59:19 - we can test our function right so we can
59:22 - see if we can actually initialize a user
59:24 - right so let's let's go ahead and do
59:25 - that let's say our name is Lancy all
59:29 - right let's make it fun Lancy and then
59:31 - the Avatar all right let's just use this
59:33 - we already have this uh we'll say um
59:36 - we'll copy this link here
59:38 - and we'll paste it
59:40 - and now again if you didn't understand a
59:42 - word I said maybe us testing it will
59:45 - help you understand right so
59:48 - best part you should you should know
59:50 - we're passing in Lancy has the name and
59:53 - the Avatar is going to be the string or
59:55 - it's the image but now you're going to
59:56 - see something called accounts here where
59:58 - is this coming from that's not an
59:59 - argument technically it is it's right
60:01 - here it's our context
60:04 - right
60:05 - our context is the accounts right so
60:08 - what accounts do we need well it looks
60:10 - like we need a user the authority and a
60:13 - system program so let's open this up we
60:16 - have a user account an authority and a
60:19 - system program all right if I were to
60:20 - ask you a question uh do we already have
60:23 - a user account no how can I tell if you
60:26 - scroll down you can see all the accounts
60:27 - that you set up which is really cool by
60:29 - the way shout out to Atron the guy who's
60:32 - behind beta Soul playground he taught me
60:34 - a lot about Solana and how this all
60:36 - works but once you set up an account you
60:38 - should see it here and you can click
60:40 - this fetch all button and you should be
60:42 - able to fetch all the accounts right and
60:44 - right now there shouldn't be any
60:45 - accounts or user accounts so they're
60:47 - going to see nothing
60:49 - okay cool and all I'm going to do is
60:51 - actually we can actually change this
60:52 - endpoints because sometimes we get an
60:53 - error let's do genesis go let's do a
60:55 - fetch all boom so now you should see
60:57 - empty array because there is no object
61:00 - right there's no account
61:02 - so if this does this exist just yet no
61:05 - how can we get it to exist or find a
61:09 - place
61:10 - to store
61:12 - my user account which is this little
61:13 - square right how do we find a place for
61:15 - it well we can get it from a seed right
61:19 - so what seeds do we need user C that's
61:20 - our first seed but you don't want to
61:22 - write uh user seed here that's the
61:24 - variable
61:25 - I want to go to constant and write the
61:28 - string so what's the string here let me
61:30 - user
61:31 - okay
61:32 - uh what's the other seed
61:34 - Authority key as ref right for me I
61:37 - didn't know this for a while but this is
61:39 - gonna be a Pub Key a public key and it's
61:42 - usually
61:43 - your key the one who made this all right
61:44 - so I can say add seed say Pub Key and
61:48 - copy your playground wallet right
61:51 - so that we can make a user based off
61:53 - your playground wallet hit generate and
61:56 - now this is the unique address where we
61:57 - can put our user if this was if this
61:59 - already had stuff at this address it'll
62:01 - go to the next available one
62:03 - cool so now for the authority
62:05 - we want to do is put my address which
62:08 - should be the same as this
62:09 - cool and if everything went well you're
62:11 - gonna test and it should work look at
62:14 - that init user pass I love seeing that I
62:16 - get really happy when that happens
62:17 - especially a first try which is awesome
62:20 - so if you guys got in on the first try
62:22 - give yourself a pat on the back right so
62:24 - how do we know it passed well what
62:26 - should happen after we emit a user if I
62:29 - fetch all we should have a user right
62:32 - when we fetch data from a database like
62:34 - let's say Firebase we can usually get it
62:37 - back as an object so what kind of object
62:38 - did we get we've got an object with a
62:40 - public key right this is the user
62:42 - account
62:43 - right you get this here six seven y six
62:46 - seven y then we have another property
62:48 - called account which holds an object
62:50 - which holds our user information there's
62:53 - Lancey my avatar The Authority which is
62:56 - the same as my wallet the last post ID
62:58 - and post count so when I create a post
63:02 - what should happen to these two should
63:04 - increase right should be one
63:06 - let's keep that in mind for the next
63:07 - function but other than that that's how
63:09 - you make a function
63:10 - all right so take what you learned from
63:13 - this and let's put it to the test with
63:15 - our second to last or actually our last
63:17 - function all right all right so on to
63:19 - the next function so let's go ahead and
63:22 - move to here and to create a function
63:25 - it's going to be the same kind of
63:26 - pattern guys so how do we make a
63:28 - function we can say Pub have fun
63:31 - we can say the name
63:34 - which will just be create
63:37 - post
63:39 - here is going to be the parameters we
63:42 - just know it takes an error result
63:46 - and you write it like this and here we
63:50 - go this is the scope of the function
63:52 - right now we can write what parameters
63:54 - it takes in and as you know with rust it
63:56 - will usually take a context right what
64:00 - kind of type does this expect it's going
64:03 - to be context and it's going to be
64:05 - create post and as you know create post
64:07 - doesn't exist yet so what else does a
64:10 - post take in as a parameter to think
64:12 - takes in a title and it takes in content
64:16 - right but we also need type so if we
64:18 - need type it's going to be string
64:20 - content also going to be string
64:23 - okay from there
64:26 - right oh
64:27 - how's that from there we can say uh the
64:30 - logic goes in here
64:32 - but let's pause this and let's make
64:34 - create post so I'm going to scroll down
64:37 - and to make create post if you ever get
64:39 - lost we can look at this as a template
64:42 - of how to make this struct right like I
64:44 - said it's important that you understand
64:45 - the patterns because it'll make this a
64:47 - lot more easier and simple to understand
64:49 - okay
64:51 - cool so to get started we'll take our
64:54 - macro to make an account we'll say to
64:56 - arrive counts
64:58 - we also want to use instruction here and
65:02 - then we could say Pub struct right name
65:05 - of the context which is just create post
65:09 - to create post
65:11 - oops
65:12 - say info
65:15 - then from here we can do hashtag account
65:18 - right so how do we make an account
65:20 - remember uh anchor does it for us when I
65:23 - write init we're initialize an account
65:25 - at this point you might be asking what
65:27 - account are we making Lance well we have
65:29 - so far a user account we also need to
65:32 - make what I'll call a post account so we
65:35 - could say Pub post count all right say
65:38 - account
65:39 - you can say info oops
65:43 - comma here we can say post account right
65:46 - and if I ask you does this exist just
65:48 - yet nope we're gonna make it soon right
65:51 - so just keep that in mind let's add a
65:54 - comma here and let's make the rest of
65:56 - these parameters so we also want to put
65:59 - in seeds for this so if you remember in
66:03 - our constants we have a postseed right
66:05 - here okay post seed we're going to say
66:08 - post
66:09 - seed all right we also want to put in
66:11 - our Authority dot key oops dot key
66:15 - but kamaki dot key
66:18 - dot as ref
66:20 - right and the issue with this seat is
66:24 - that every time I make a post it's going
66:26 - to generate the same image or the same
66:29 - uh address right we don't want the same
66:32 - address over and over so we got to make
66:34 - it unique so how will we differentiate
66:36 - that let's add another seed that's what
66:38 - we can do and for this we're gonna use
66:42 - um if you go to States here we're going
66:43 - to use the last post ID that number as
66:48 - part of the seed so what that would look
66:49 - like is if I were to say
66:52 - um the custom seat is post right that's
66:54 - the string
66:55 - it takes in our Authority or our wall
66:58 - address and then it takes in a number of
67:00 - the last IDs so if the last post ID was
67:02 - three this is the unique
67:05 - um
67:06 - profile picture or the unique address or
67:09 - the public key right what if it was four
67:10 - five six seven see how it's a different
67:13 - one every time all right we can you know
67:16 - replicate that with our code here by
67:18 - putting last post ID as part of the
67:20 - seeds so I'll put a comma and we're
67:22 - going to put it in a format that this
67:25 - likes right you can't just write the
67:26 - user account last post ID
67:28 - I'm going to say end
67:30 - user account I'm not going to go too in
67:32 - depth of this because again uh
67:35 - it's not necessary just know that you
67:36 - need it in this format as the eight
67:40 - dot as ref
67:44 - Okay cool so with this the format should
67:47 - be good
67:49 - and user account that last post ID as
67:52 - you ate cool
67:54 - and that's the seeds right
67:57 - and doesn't need anything else oh yeah
67:59 - we need bump right you guys remember
68:00 - what bump does that address has stuff
68:03 - already it's not available to us we can
68:04 - just say bump go to the next one say
68:07 - pair is equal to Authority
68:10 - okay and then for space you can set that
68:12 - equal to how much space does a post
68:15 - account take I don't know let's find out
68:18 - cool so pausing that again I know we're
68:20 - pausing a lot of stuff and coming back
68:22 - to it so keep just keep track of
68:24 - everything all right but we'll Circle
68:26 - back all right so we want to make
68:29 - um the post account
68:30 - state so we could say a pub struct post
68:33 - account right and another thing I want
68:36 - to mention is that you don't have to
68:37 - name this user account you could just
68:39 - say users you could just name this post
68:40 - right I'm just using this naming naming
68:43 - convention to kind of help you guys
68:44 - understand uh what has happened
68:47 - right so this is essentially this post
68:49 - account just represents each post so
68:52 - each post account is a post right so I
68:55 - can say Pub all right what properties
68:57 - does a post account need and ID
68:59 - you wait okay
69:03 - all right I'll save you some time it's
69:04 - gonna take in the title
69:07 - it's going to take in content
69:11 - it's going to take in a user and this
69:13 - user will be Pub Key and this Pub Key
69:15 - isn't going to be our wallet address
69:17 - it's going to be the pub key of the user
69:20 - account right so if you remember
69:22 - uh where there's Lana playground oh this
69:24 - is our playground oops if we fetch a
69:27 - user real quick
69:28 - this is the address of the user account
69:31 - where that data lives right that is also
69:34 - going to be stored in this post account
69:36 - right here so this six seven it's gonna
69:37 - go here when I make a post that way we
69:39 - can identify what user made that post
69:42 - right cool then we also need the
69:45 - authority which is going to be different
69:46 - than the user right it's going to be the
69:49 - pub key of your wallet so that would be
69:51 - our 6D here all right because this
69:53 - wallet should sign whatever we want to
69:56 - do with this post if you want to delete
69:57 - this post later right that address
70:00 - should be able to do it right now my
70:02 - friend David shouldn't be able to delete
70:04 - my post because he doesn't have the
70:06 - authority
70:07 - Okay cool so what we know here is that
70:10 - this is 32
70:12 - right
70:13 - this is 32. uh content right content can
70:17 - be really long right especially if it's
70:18 - a Blog so again um we'll just make it
70:21 - really long string so we can do that for
70:24 - title it should be 256 as well it could
70:28 - be just like that
70:30 - and this is going to be one
70:32 - cool so if we add that all together
70:34 - you can go back to lib we can write the
70:36 - space now and I already did the math
70:38 - it's going to be two three seven six I
70:41 - believe plus what guys let's see this
70:44 - count discriminator
70:45 - it's going to be
70:47 - eight you got it
70:49 - cool that said right the payer is us is
70:53 - how much space it takes
70:54 - and we're good to go all right another
70:57 - thing that we need to know right
71:00 - we need to get access to the user
71:02 - publicly like how does my post know what
71:04 - this is right well
71:07 - we can give it some context right ah all
71:09 - right so how do we get the context of a
71:12 - user account right we can just say
71:14 - account
71:16 - all right we can say mute right because
71:18 - this user account could be different it
71:20 - could be me making a post it can be
71:23 - David making a post
71:25 - or it doesn't have to be just one person
71:26 - uh the seats right we can find the exact
71:30 - user account by passing in the same
71:32 - seats right if I want to get
71:34 - my user account I would pass in that
71:37 - string users the user string and my
71:41 - wallet address but again we can make a
71:43 - dynamic because if I passed in David's
71:46 - user address or wall address we get a
71:48 - completely different seat we'll get his
71:50 - PDA right so boom just in case and
71:55 - another thing is we can write this as
71:57 - one
71:59 - has one Authority and it's gonna be us
72:04 - cool as you can say Pub user
72:07 - account
72:08 - say account
72:11 - take some info
72:13 - and a user account up here
72:16 - okay another thing we need is the
72:19 - authority and the system program and
72:21 - usually when you make this it's exactly
72:23 - the same as before so go ahead go to
72:25 - line 45 48 for me and you can just copy
72:29 - that you can write it out it's going to
72:30 - be exactly the same no matter what
72:32 - cool that's the shock for create post we
72:36 - have our constant we use it we have our
72:38 - state that we just created and now
72:41 - let's make the logic so let's walk
72:43 - through the logic of creating a post
72:44 - right we need to uh initialize
72:47 - the post
72:48 - I mean what else we need to do we need
72:50 - to
72:51 - increment the post total and the ID
72:58 - set
72:59 - properties
73:01 - okay let's do that then
73:04 - so to do that it's going to be very
73:06 - similar to how we initialize the user
73:07 - here let's make a variable say let post
73:10 - account and how do we get the post
73:14 - account information
73:16 - from this context
73:18 - right well we first we need the context
73:20 - then we need to go to the accounts and
73:22 - now we have access to post account user
73:25 - account Authority and System Program
73:27 - which one do we need
73:29 - we need
73:31 - dot post
73:33 - account I believe yep dot post account
73:36 - semicolon
73:38 - okay now with that logic how do we get a
73:41 - user account ctx.accounts.user
73:44 - [Music]
73:46 - simple enough cool last thing we need
73:49 - and we don't have to do this but you
73:51 - know again just for consistency uh and
73:54 - ctx.accounts.authority
73:57 - boom
73:59 - cool so what are the
74:02 - properties that we need to initialize we
74:04 - need the ID title content user Authority
74:07 - and that order so if we do Post account
74:10 - right we have this object how do we get
74:13 - the ID
74:15 - right we do Post account dot ID and what
74:18 - do we want to set it equal to right if
74:20 - we set this is equal to zero every post
74:23 - will have an ID of zero and that's not
74:25 - good right it should be
74:27 - right
74:29 - the last user ID right so this first one
74:33 - based on that it should be zero after we
74:35 - make a post it should be one two three
74:37 - right so how do we get access to this
74:39 - user account
74:40 - from here
74:42 - luckily we set that up with this
74:44 - variable and us doing this this user
74:47 - account we have the context right that's
74:50 - why it's important
74:52 - so if you have the context we could say
74:53 - that user account variable dot last
74:57 - post ID
75:00 - right so there you go that was the power
75:02 - of the hardest one right so then we
75:03 - could do a post
75:05 - account dot title is equal to
75:07 - our per our argument title
75:12 - post account dot content equal to
75:15 - content
75:17 - and then we also want the user who made
75:20 - it right so user we need access to the
75:23 - user account again which we do we can
75:25 - say user account and if you look at the
75:27 - object right we don't need to dot
75:29 - account
75:30 - right we can just say uh user account
75:35 - dot key and parentheses to get this
75:39 - public key
75:40 - make sense right us doing that key is
75:43 - getting this putting it here
75:46 - cool
75:47 - okay semicolon and then last but not
75:50 - least post account that Authority is
75:53 - equal to Authority dot key that's how we
75:56 - get our wallets public key
75:58 - and we're not done yet remember we need
76:00 - to increment the post total and the ID
76:02 - right so there's an easy way to do this
76:04 - or you can just do the math yourself or
76:06 - we can do it last post ID is equal to
76:10 - user count dot last post ID right I'm
76:15 - gonna do a DOT I'll build a method here
76:17 - checked add right and because of the
76:19 - semicolons uh it can format it like this
76:21 - that oops
76:23 - dot checked
76:26 - add one
76:28 - then dot unwrap
76:33 - cool and remember don't put a semicolon
76:35 - here or else you're splitting this dot
76:36 - on wrap right you want to put it right
76:39 - here so basically uh it's going to
76:42 - increase
76:45 - post ID
76:47 - buy one or if you wanted to increase it
76:49 - by two you put two right so it's just a
76:52 - built-in method that would take this
76:54 - number which is zero add one and unwrap
76:57 - it to a format that Russ likes okay so
77:01 - that's not it though
77:03 - we also need to do the total right
77:05 - increment that by saying that post count
77:08 - is equal to user
77:11 - account dot post count
77:14 - dot checked oops checked
77:17 - add one
77:19 - dot unwrap
77:23 - cool all right so we incremented two
77:25 - things the last post ID the post count
77:27 - right which will make this
77:31 - seed validation more Dynamic right we're
77:33 - not going to get the same seed we don't
77:35 - have to rely on bump all the time right
77:37 - and last but not least we can say okay
77:40 - that's it
77:42 - awesome
77:43 - and that's it that's creating a post
77:45 - guys all right this should be I hope
77:47 - this is very easy to follow right let me
77:50 - know down below alright drop a like
77:52 - comment down below like thank you Lance
77:54 - right and again if you we're gonna be
77:55 - harder and harder ones than this right
77:57 - we can look at Airbnb we can look at the
78:00 - to-do app which is just slightly this
78:01 - harder than this all right let's go
78:03 - ahead and build and see if there's any
78:04 - errors
78:05 - hey cool
78:07 - post account
78:11 - instruction I spelled that wrong
78:16 - struck
78:18 - that happens to me a lot
78:22 - okay
78:26 - trait
78:30 - not satisfied
78:33 - okay
78:34 - oh that's right have to put the
78:38 - accounting I have to tell them hey this
78:39 - is an account oops
78:42 - this is going to use the account macro
78:44 - and we need to derive the default and
78:48 - this should be a lot better cool all
78:50 - right different errors I can live with
78:52 - this
78:52 - uh cannot borrow as multiple I think I
78:55 - know why already
78:57 - Yep this is why we need the and mute
78:59 - perfect example of that
79:02 - and mute
79:04 - there we go build successful right cool
79:07 - so I will just refresh this so you don't
79:09 - see the errors you could see that if I
79:11 - build now boom build successful so all I
79:14 - did was make sure in your states you
79:16 - have this account and derive default
79:17 - otherwise it's not going to be satisfied
79:19 - with just this
79:21 - next in your create post make sure this
79:23 - is mutable otherwise it's going to be
79:24 - like hey you can't change you can't
79:26 - change what's in there
79:27 - cool
79:29 - another cool thing about Solana is that
79:31 - usually with solidity once you deploy to
79:33 - the blockchain you can't really add more
79:36 - code onto there right with solidity at
79:38 - least I don't know if it changed since
79:39 - I've recorded this video but the cool
79:41 - thing about Solana is uh you can take
79:45 - your copy of the smart contract right
79:48 - make a new lines new structs everything
79:51 - like that
79:54 - and deploy all of that together right
79:56 - you can update your contract with this
79:59 - new stuff
80:00 - okay
80:02 - that's the cool part about this
80:04 - all right that's why it says upgrade
80:06 - here instead of deploy so let's upgrade
80:08 - right now that we know that this is
80:09 - stable and you know and successful
80:12 - and then let's test it and we should be
80:14 - good to go okay it's almost done
80:17 - bam deployment successful right if we
80:20 - look at our tests now create post is
80:22 - there and post account is there as well
80:24 - right we can do a fetch all there is one
80:26 - user Lancy all right and then there's a
80:28 - post account
80:29 - no post right that makes sense we
80:31 - haven't created a post yet so let's
80:32 - create a post and again let's break it
80:35 - down right it takes in two arguments
80:37 - title and content right we can say uh
80:41 - welcome to my blog
80:43 - all right content this is my first post
80:46 - right
80:48 - what is what else do we need is this it
80:50 - we need to provide the context so when
80:53 - we go to accounts
80:54 - all right we need to put information for
80:57 - all of these right so I'm not going to
80:59 - start with post account let's start with
81:00 - authority right who has authority of
81:02 - this post me my address this wallet does
81:06 - right assistant programs there by
81:08 - default right user account we need to
81:11 - put this do we need to make a new user
81:13 - account associated with this post let's
81:15 - see
81:16 - is this initializing a new one nope
81:19 - we're reusing one based off the seed
81:21 - right so basically I'm saying is we want
81:24 - to use
81:26 - this six seven y right so what you can
81:28 - do
81:28 - is just copy that put it here right or
81:32 - you can get it from seed again put in
81:34 - user put in your Authority and you
81:36 - should still get the same number right
81:39 - six seven y
81:41 - cool but now for the Post account from
81:43 - seed all right this doesn't exist yet we
81:46 - want to find a place to put our post
81:47 - data right so for the seeds it's all
81:50 - right here the answers are in front of
81:52 - us
81:53 - we want to say post because I believe
81:54 - that's the string I wrote yep post you
81:57 - want to put the pub key which is our key
81:59 - and to make this a unique uh PDA we need
82:03 - to add a u8 here right how do I know
82:06 - it's u8 because I said as you wait and
82:09 - it should be a number of the last IDs
82:11 - what was the last ID of this zero so I'm
82:15 - putting zero if we already had a post if
82:18 - this is our second post it should be one
82:20 - all right but it's zero so let's
82:21 - generate that this is the will be the
82:24 - public key where that post information
82:26 - will live let's hit test hopefully it
82:28 - passed let's go create post past right
82:31 - how do we know
82:33 - let's fetch this and Bam this is our
82:35 - post right
82:37 - there we go right welcome to my blog
82:39 - this is my first post
82:41 - now
82:42 - that said this is it this is our Solana
82:45 - program guys all we need to do now right
82:48 - is like let's say we made our account we
82:52 - also made a couple posts right all we
82:54 - need to do now is use our endpoint to
82:57 - call these functions right to create
83:01 - more posts right and then we will use
83:04 - our endpoint right to get the program
83:07 - and get fetch all the posts Associated
83:11 - right all the users all the posts
83:13 - Associated to our app
83:15 - right and that is what the final part is
83:18 - so let's go ahead and figure out how to
83:20 - do that cool so with that out of the way
83:23 - I'm super proud of you guys let's go
83:24 - ahead and clean up some things here and
83:27 - let's say you guys want to make a brand
83:29 - new program right you don't want to use
83:32 - these users he wants to start fresh
83:34 - right we can do that all right so to
83:36 - show you guys how to do that right we're
83:38 - going to go to this toolbar the build
83:40 - and deploy section
83:41 - and go into program credentials and
83:43 - let's say you want to use a different
83:45 - smart contract right but you want the
83:48 - same logic all right you just don't want
83:51 - you just don't want you want to start
83:51 - fresh you don't want any of these
83:52 - accounts uh we didn't set anything to
83:54 - delete them or to close these accounts
83:56 - so what we could do is we could say new
83:59 - right this is our program address right
84:01 - now our program ID if I hit new here
84:03 - right if you don't save this it'll be
84:05 - lost forever I'll you'll forget what
84:07 - this program ID was
84:09 - I don't care
84:10 - just hit generate
84:11 - and this is our new program ID so when I
84:13 - hit build
84:15 - this is going to change boom everything
84:18 - stayed the same but this changed why is
84:20 - that significant because now
84:22 - this program has no uh accounts
84:26 - associated with it so now it's kind of
84:28 - like we started fresh right and it's not
84:30 - deployed so let's deploy it let's put
84:32 - this smart contract on the blockchain
84:36 - all right so deployment successful right
84:39 - we put our new smart contract with its
84:41 - new address on blockchain and now I can
84:44 - prove it to you let's see if lancey's
84:46 - still there he's gone and any post he's
84:49 - gone all right and that's okay why is
84:51 - that okay because now we're gonna make a
84:54 - user Make a post
84:56 - from our very own app so get excited for
84:59 - that let's get it set up
85:01 - so one of the first things I want you
85:03 - guys to do is head over here go to your
85:06 - IDL and hit export right when you hit
85:09 - export and if you're using Chrome you
85:11 - should see an idl.json in your download
85:13 - so go ahead and go to search for this
85:15 - idl.json in your downloads
85:17 - could double click it and it should open
85:19 - it up in vs code
85:22 - so I'm just gonna make this bigger if I
85:24 - do a save here
85:25 - oops cool so take a look at this
85:27 - basically it's a Json file right that
85:30 - represents our Solana program right the
85:33 - instructions this is our init user
85:35 - function create post function right has
85:38 - all our accounts all right all the
85:40 - information we need right we need this
85:43 - IDL and need to put it in our front end
85:44 - right so go ahead and press Ctrl a uh
85:47 - you can press copy or if you want to be
85:49 - really sure press cut right control X
85:52 - and go over to your ideal.json so this
85:56 - idl.json right here is different
85:58 - it's the same thing this is the demo
86:01 - idea
86:02 - all right and the only difference
86:04 - between the one you just copied and this
86:06 - one is that it has metadata address
86:08 - alright so we want to copy that let's go
86:11 - ahead and paste it underneath this Json
86:14 - right and what we could do just to keep
86:16 - the same formatting right this is
86:18 - important you don't need to have
86:20 - metadata address on there but the way
86:22 - we're grabbing the address uh is through
86:25 - this file so I'm gonna oops I'm gonna
86:28 - copy this even up to the comma
86:31 - and I'm going to bring it all the way
86:33 - down here
86:37 - and what we'll do next is let's erase
86:39 - the old one
86:41 - all right
86:43 - cool let's hit save and and X Out the
86:46 - downloads version
86:48 - I'll hit don't save just in case you
86:50 - need to get it back later
86:51 - cool so let's just go over this right
86:53 - this is essentially right our new IDL
86:58 - with the old address of the demo smart
87:01 - contract right so what we need to change
87:04 - is this right here this shouldn't be FB
87:08 - all right this should be CSX so let's
87:10 - copy that
87:12 - and paste it here so now we're using the
87:15 - updated IDL with the correct uh metadata
87:20 - address
87:21 - let's hit save and that very first step
87:24 - is done right
87:26 - the next thing that you're going to need
87:27 - to do is head over to your contacts and
87:31 - head over to
87:32 - blog.jsx this is what's important here
87:36 - um we need to understand how context
87:38 - works okay
87:40 - cool so to give you a visual of how
87:42 - context Works let's go back into our
87:45 - program and let's move to our app here
87:47 - are we going to erase this to avoid
87:49 - confusion
87:50 - but let's say this is our app right
87:53 - and usually with react right when you
87:56 - make a variable let's say a user right
87:59 - this holds Lancy or my user information
88:00 - you created an app and you can pass it
88:03 - down as a prop to dashboard so then
88:05 - dashboard knows what user is
88:08 - if you don't pass it as a prop
88:10 - if you say user in here it's going to be
88:12 - like what the hell is user Lance you
88:13 - didn't tell me all right so that's why
88:14 - you need to pass it down as props right
88:16 - in react let's say we had like multiple
88:19 - components right on uh as a child if I
88:23 - were to bring if I need to bring user
88:24 - all the way down to this bottom
88:25 - component you have to go like prop pass
88:27 - down as a prop pass down as a prop
88:29 - promise not a prop and that could lead
88:30 - to issues way down the line this is
88:32 - what's known as prop drilling right so
88:35 - there's solutions to this actually so
88:36 - the solutions is using something called
88:38 - Redux or uh creating context right and
88:43 - context is essentially think of it like
88:44 - a little store or a bubble right we call
88:47 - that contextblog.jsx
88:50 - and I can create the user here right or
88:53 - in other words I can fetch a user in my
88:58 - contacts right and the cool thing about
89:00 - using context is that I don't need to
89:03 - pass it down as a prep I could still but
89:05 - I could call it from whatever I want
89:07 - right I just have to bring that context
89:10 - into here right so that's what's the
89:12 - beauty of context
89:14 - so let's work on our blog context
89:19 - okay so what do we have so far
89:21 - all right if you didn't know how to
89:22 - create context this is how you do it use
89:25 - the react hook
89:26 - and then you just need to make a
89:28 - provider for that context remember the
89:29 - wild provider I reset it here and let's
89:32 - say
89:33 - now let's say you want to make a
89:35 - variable or a function right remember
89:37 - that visual I just did like this would
89:39 - be the code equivalent let's say Lance
89:41 - all right
89:43 - cool or let's just make this even more
89:45 - weird so you understand dog right cons
89:47 - User it's a dog right and better yet
89:50 - let's make this an object and we can say
89:52 - name is uh
89:54 - dog right Avatar
89:57 - all right it's not a dog but we can get
90:00 - it from
90:03 - and splash so let's go here
90:05 - I'm gonna quickly get an image of the
90:07 - dog you don't have to do this step
90:10 - it's a dog
90:12 - this pug is perfect
90:15 - actually let's use this one
90:17 - copy image address
90:19 - go to our code and say that the Avatar
90:22 - is this very long string and let's say I
90:26 - want to use this static user right
90:28 - anything that I want to bring outside of
90:30 - our context put it inside here in line
90:33 - 24 this value right here so I'll say
90:35 - user
90:36 - okay
90:37 - and let's say I want to bring this user
90:39 - into my app right well not app sorry our
90:42 - dashboard
90:43 - right all you need to do is use blog
90:47 - right
90:48 - so you can go down below here you can
90:50 - say import use blog from your contacts
90:54 - and then say const curly brackets to
90:57 - de-structure equal to use block right
91:01 - and then from here you say what you want
91:03 - right let's say I had like five things
91:05 - in here but I only wanted user you can
91:07 - just say give me just the user here and
91:10 - then from there let's erase this right
91:12 - we did erasing our static user data and
91:14 - saying static user from the blog all
91:17 - right let's see if it worked look at
91:19 - that it's dog now right so now my little
91:21 - drawing right that's the application
91:23 - right we got user and we're putting it
91:25 - into dashboard
91:27 - static this is still static we still
91:28 - need to make it fetchable
91:30 - okay cool
91:32 - so now we have static user from the blog
91:34 - context but that's the gist of it we're
91:36 - going to be building out this blog
91:37 - context with right we need the functions
91:41 - from the Solana smart contract and we
91:44 - need to fetch all the accounts so that's
91:46 - the goal with this context
91:49 - okay so I'm gonna head over to our
91:51 - blog.jsx and this is where the majority
91:53 - of the code is going to be written
91:55 - um everything on dashboard.js is pre-set
91:58 - up for you we just need to write the
92:00 - logic right and if you're interested in
92:01 - learning more react stuff and next.js
92:04 - stuff right leave a comment down below I
92:06 - could I'll be happy to go over that with
92:07 - you the focus again is just the web 3
92:10 - Salon code okay that's it let's keep it
92:13 - going so we are in back at the blog
92:16 - context right uh one of the first things
92:18 - I like to do is let's get our program
92:22 - key right and my program key I mean our
92:25 - address right so uh what I mean by that
92:28 - if you go to let's see our app go to our
92:33 - program we need this address right
92:34 - because this is we need to first use our
92:37 - endpoint uh and then get this program
92:41 - which will then help us get everything
92:43 - else right and I could just hard code
92:45 - this in here but I hardcoded it in our
92:47 - RDL so let's do do that
92:50 - okay so to do that the first thing I'm
92:52 - going to do is get some imports one of
92:54 - the Imports that I'm going to get here
92:56 - is
92:57 - Star as anchor from
93:01 - hold on second from
93:07 - quotes project
93:10 - or sorry at project at project serum
93:13 - anchor there you go that's what we want
93:15 - and basically it'll get everything from
93:18 - anchor and call it anchor
93:21 - okay first thing
93:23 - uh the next thing is let's import
93:26 - another hook here custom hook
93:29 - and say use anchor wallet
93:32 - from slana wall adapter and there's a
93:34 - couple of things that we're going to
93:35 - need here it's going to be use
93:36 - connection
93:39 - and use the wallet
93:44 - amazing
93:46 - okay next we need import
93:50 - public key all right
93:52 - and then you also need System Program
93:56 - right again don't worry about all these
93:58 - Imports yeah they're going to come into
93:59 - play as we go
94:01 - okay
94:03 - um and there's a couple functions that
94:05 - we need to make so again this was given
94:07 - to you guys but if you go into this
94:09 - functions folder you're going to see
94:11 - something called
94:12 - uh get random name right this is a
94:16 - function that we set up for you guys
94:17 - right this is getting a library called
94:18 - name generator to give us a random name
94:21 - right you could set this up to give uh
94:24 - your self name like make a input field
94:26 - like a modal and put in your name and
94:28 - sign up right here we'll just get you a
94:31 - random name and we'll get you a random
94:33 - Avatar using these functions okay my
94:37 - challenge for you guys if this is making
94:38 - sense to you guys
94:39 - is make it so that you put an input
94:41 - field and then you can sign up a unique
94:43 - user otherwise I'm just gonna get a
94:46 - random user to save some time
94:48 - okay so to get that information we could
94:51 - say import uh get Avatar URL from this
94:56 - path right cool you also need to get
95:00 - random names so let's get a random name
95:02 - I'm just importing everything we need
95:06 - random name sorry spelled it
95:10 - yep
95:12 - from
95:14 - sorry C functions
95:17 - get a random name perfect
95:20 - cool so we have the random name uh what
95:22 - another thing we're going to need
95:31 - we're going to need to import the IDL
95:33 - right so remember the ideal we set up
95:34 - right here we need to bring that in we
95:37 - can say uh import IDL from
95:41 - oops
95:43 - source
95:44 - slash I believe it's just ideal.json
95:47 - perfect and to fetch the program
95:51 - addresses or the pdas we can say import
95:55 - find
95:57 - a program address sync
96:00 - from Project CM anchor right and then we
96:03 - want to import uh utf-8 this is for
96:07 - formatting purposes later on
96:09 - and with that
96:11 - uh we should be good to for now we might
96:13 - need some react hooks later on but we'll
96:15 - import those when we need it
96:18 - blog context that's fine let's go ahead
96:21 - and get program key all right so to get
96:25 - program key let's make a variable let's
96:27 - make cell caps program key
96:30 - is equal to
96:32 - uh IDL right and remember in our IDL how
96:36 - do we get this we say dot metadata
96:40 - dot address
96:42 - right and what type would this give us
96:46 - string exactly right because this is a
96:48 - string duh right but we need this as a
96:51 - public key right so we're going to use
96:54 - this import public key and we'll say new
96:57 - public
96:59 - key parentheses right this is going to
97:01 - generate a public key based off this
97:04 - address
97:05 - that's all we're doing here
97:07 - amazing
97:08 - cool so we have our public key right we
97:12 - are using blog right returning contacts
97:15 - cool
97:16 - right they're basically taking our our
97:19 - context putting it in a hook and then
97:20 - using a hook and dashboard that's why it
97:22 - says use block okay cool
97:25 - so in let's see in our blog provider
97:28 - right still have static dog we can leave
97:31 - that for now until we get an actual user
97:33 - but underneath this I'm trying to think
97:35 - let's set up uh our anchor wallet right
97:38 - here so we're going to make use of this
97:41 - use anchor wallet right here
97:44 - and underneath the user I'm going to say
97:46 - const anchor wallet is equal to the hook
97:50 - use anchor wallet
97:53 - which we're going to use and place this
97:55 - somewhere else later on all right this
97:56 - is one of our parameters for something
97:58 - okay so we need a wallet we're using
98:01 - anchors default wallet we'll say const
98:04 - connection all right I'm destruction
98:06 - connection from use connection
98:10 - all right I'm gonna get a connection
98:13 - oops not from I keep saying from should
98:15 - be equals but this is from use
98:18 - connection
98:19 - and we also need to say const
98:23 - public key
98:26 - all right public key oops not the
98:28 - Capital One we need the lowercase one
98:33 - and set this equal to use wallets all
98:36 - right so this this one specifically I
98:38 - don't know why I'm putting semicolons
98:39 - it's because of rust but you just use
98:41 - wallet Hook is going to get us publicly
98:43 - and if I were to console log it uh it
98:45 - should tell me the public key.2 string
98:48 - all right let's see what this is
98:51 - all right anytime you want to see what
98:53 - this all means I just console log it
98:55 - that's how I usually go about it
98:57 - and see if we can see it from here
98:59 - oh what can I have any properties from
99:01 - now
99:06 - okay so I didn't like that let's just
99:08 - try without the two string first
99:11 - [Music]
99:14 - no okay yeah so it's not right now so
99:16 - you can't tell no to string but if I
99:18 - connect now
99:20 - [Music]
99:24 - I'll enter my password of course
99:29 - should have a wallet now
99:31 - okay that was weird I'm just fresh a
99:33 - couple times but uh I had to log into my
99:36 - wallet and we're good to go anyways as I
99:39 - was saying uh back to blog.js we console
99:41 - log the public key
99:43 - inspect element let's see if it's no
99:46 - there we go right so notice how it's not
99:47 - null anymore it's an actual public key
99:49 - but if I were to do that to string now
99:54 - there you go CVR
99:57 - right CVR right so that tells me that
100:00 - this public key
100:01 - right this usable hook always knows what
100:04 - while it's connected and it'll tell me
100:05 - the public key of that wallet connected
100:07 - when I say public key okay connection is
100:11 - our connection whether that's devnet or
100:12 - n or quick note
100:15 - and uh while we're using it's an anchor
100:17 - wallet so we're going to be using this
100:18 - for something in just a second next we
100:21 - can say const program
100:23 - right is equal to use and we don't have
100:26 - this hook but we need to get use memo
100:29 - it's going to say uh I'm actually going
100:31 - to form it like this because you might
100:32 - need a couple different things from
100:34 - react
100:36 - so let's do comma and say use
100:39 - memo
100:41 - okay
100:42 - so program use memo
100:45 - takes in an empty function
100:48 - cool and what we want to do with this is
100:50 - if anchor wallet exists
100:53 - right we want to say that the provider
100:55 - is equal to new
100:58 - anchor dot anchor provider
101:03 - all right
101:04 - we have to pass in
101:06 - um
101:07 - the connection
101:11 - right are we set up up here
101:13 - we need to pass in the anchor wallet
101:17 - we need to pass in anchor
101:20 - itself and you can say anchor dot anchor
101:23 - provider dot default options
101:27 - you don't need to fully understand this
101:29 - just yet you just need to set it up cool
101:32 - so that's our provider
101:34 - right we want to return from this uh new
101:37 - anchor dot program right which will have
101:42 - our IDL our program key
101:45 - and our provider that we just set up
101:48 - cool
101:49 - and we're going to run this
101:52 - uh when the connection changes or for
101:55 - whatever reason the anchor wallet
101:56 - changes
101:58 - okay so when I say program when I
102:00 - console log this it should give me
102:02 - something console up
102:03 - program
102:06 - here
102:08 - and see if we can
102:11 - there we go so we got our actual program
102:13 - so if you open this up we can see all
102:16 - the accounts right we can see the
102:17 - instructions all right this program has
102:19 - create post the net user all right what
102:21 - accounts does this program have has a
102:23 - post account and a user account so when
102:25 - I say program dot account
102:29 - right
102:30 - look at that we see all the accounts
102:32 - associated with it so that's how you get
102:34 - the program I thought it was all the
102:36 - setup for this when you say when I say
102:38 - lowercase program I mean the program and
102:41 - all its information you with me
102:43 - cool
102:45 - all right so we got the program the next
102:47 - thing I want to do is set up a use
102:49 - effect right so I don't believe I have a
102:51 - use effect hook set up yet so let's
102:53 - import use effect
102:56 - it's not like that cool and if you don't
102:59 - know what use effect is essentially it's
103:01 - a react hook right that's gonna set up
103:04 - things when our component uh first loads
103:07 - when that component updates when that
103:09 - component gets removed so basically what
103:12 - do you want to do when your component or
103:15 - your app loads all right so when what I
103:18 - want to do is set an empty function here
103:21 - and let's just say uh cons start let's
103:24 - make a function
103:25 - I'll make this asynchronous because
103:26 - we're gonna need to do that later
103:29 - let's say I wanna whenever my app loads
103:31 - we have to run the start function and
103:34 - say
103:35 - uh starting
103:37 - pack and fetching data right that's what
103:40 - our start function is doing I can say uh
103:44 - start this and then we can put an empty
103:48 - right here because this is going to make
103:49 - it only run when it first loads once
103:52 - cool so what we should see
103:55 - starting app and fetching data all right
103:57 - so that's essentially what we're doing
103:59 - here right I'm setting up my app so what
104:03 - do we want this start function to do
104:05 - really all right it's is to
104:08 - check if there is a user
104:12 - right if there is a user
104:16 - get or fetch posts
104:21 - if no user what do we want to do
104:24 - all right
104:27 - set state to false and
104:32 - say to false right if no user sets date
104:34 - to false and we need a button and need a
104:37 - button
104:38 - to emit use
104:40 - all right we don't have to set up the
104:42 - button in here but we just need to check
104:43 - if there's a user that's what this is
104:45 - going to do if this user got all the
104:47 - posts
104:48 - if there's no user just keep the state
104:50 - as false so that's what I want to do to
104:52 - start
104:53 - you with me
104:54 - cool so uh how do we get started with
104:57 - this then right well
105:00 - the first thing I want to do is if
105:04 - if there's a program right because uh if
105:07 - this if this doesn't exist there's no
105:09 - point right we can't get the accounts
105:11 - right you saw me do program.account so
105:13 - we need to make sure this exists and we
105:15 - also when I say and both things have to
105:18 - be true so we also need a public key so
105:21 - what I'm setting up here is a check that
105:23 - says hey if there is a program and if my
105:27 - wallet is connected right it's
105:28 - essentially what this check is doing
105:30 - then we can write that logic here oops
105:33 - which is
105:34 - check if there's a user all right so how
105:37 - do we check if there's a user let's set
105:39 - up a try
105:40 - catch block
105:43 - okay
105:46 - cool so we're gonna try if something
105:48 - works if it doesn't if we tried a
105:50 - promise and if that promise doesn't work
105:52 - right it's going to catch it and it's
105:53 - gonna
105:55 - console.log the error okay so what do we
105:58 - want to try well we want to try to see
106:01 - if there's a user
106:03 - check if there is a user account all
106:07 - right so let's do all this the way I
106:08 - like to write this is think about what
106:10 - do we know and you do this with every
106:12 - single coding problem this is Problem
106:13 - Solver here check if there's a user
106:15 - account I go back to my Solana
106:18 - playground go to my testing
106:21 - with this current program that we're all
106:23 - using in my front end now is there a
106:25 - user account
106:28 - no there is not I fetched it there's no
106:30 - user account is there a user account
106:32 - with this wall address that I made no
106:35 - hasn't been made all right so what do we
106:37 - know that there is no user right
106:40 - but we can check if there's a user right
106:43 - by
106:45 - um checking if it exists right on the
106:47 - blockchain how do we do that well let me
106:49 - show you it's going to involve this find
106:51 - program address so we're going to find
106:53 - if that address exists and if it has
106:56 - information we need okay check if the
106:59 - account exists we need five program
107:00 - address
107:01 - so to do so we can say oh wait uh find
107:06 - program address sync right and the cool
107:09 - thing is that you do is put seeds here
107:13 - right so basically if I want to find a
107:15 - user account right
107:18 - I just need to get the seeds of it right
107:20 - and what seeds does a user account take
107:21 - so I use this as my cheats as my guide
107:24 - it takes in a user seed or a string of
107:26 - user and that Authority right so check
107:29 - so how do I get this string and how do I
107:32 - get this my Authority or my check if
107:35 - there's a user with my public key
107:38 - all right so this is the fun part let's
107:40 - see if we can put it together
107:44 - so what we need to do is go into here
107:48 - make sure this is an array right and one
107:51 - of the first seeds is utf-8
107:55 - dot encode all right this is the uh
107:57 - import from here
108:00 - utf-8 dot encode
108:03 - the string user that's like me going in
108:06 - the test and writing user all right how
108:09 - many seats does a user account need two
108:13 - second one is my wallet address
108:17 - think back what did I say holds my
108:18 - wallet address
108:19 - aha
108:21 - public key yes but we need it in a
108:24 - format that the seeds like right so we
108:26 - need to use a built-in method here
108:28 - called to buffer
108:31 - amazing cool and uh after you put the
108:35 - seeds it does take in a program ID so we
108:39 - can get this by saying program right
108:40 - this is the all the informational
108:41 - program dot program ID
108:46 - okay so this is gonna basically it's
108:49 - async right which lets us do in weight
108:51 - so basically weight
108:54 - for this function to run and when it's
108:56 - done you can do the next thing right
108:58 - another thing you want to do here is do
109:00 - some destructuring because this will
109:02 - give back an array and from that array
109:05 - right we want to get a variable I'm
109:08 - going to call that variable user PDA
109:10 - right this would get us the address
109:14 - right but we need to get take that
109:17 - address and fetch the account with that
109:21 - address get the information at this PDA
109:24 - all right so how do we do that
109:26 - well the next thing we need to do after
109:28 - waiting for that is await program
109:31 - all right we're getting information over
109:32 - program dot account right so what
109:34 - accounts do we have user account right
109:38 - Dot and this is a built-in method I
109:40 - don't expect you to know this one but
109:41 - you can see fetch fetch fetch fetch
109:43 - fetch right fetch
109:46 - user PDA basically get me all the user
109:51 - accounts with this address and how many
109:54 - should that be it should be one
109:57 - right
109:58 - cool
109:59 - so we want to set this to a variable
110:02 - right because I don't want to say this
110:03 - every time I want to do that const use
110:05 - it
110:06 - so let's say there is no user here right
110:10 - we can just say console log
110:13 - instead of the error all right we'll say
110:15 - no user so it's easier to read that's
110:17 - the only reason I'm doing this if there
110:19 - is a user though right then we can get
110:22 - the posts right but at the moment we
110:24 - know there's no user so let's see what
110:26 - do you think is going to run this
110:27 - console log no user or this uh
110:30 - this fetching user
110:35 - no user right so we have no user
110:39 - okay so if we have no user
110:43 - then it should just be blank
110:46 - right
110:48 - okay
110:51 - so now the first part of our use effect
110:53 - is done
110:54 - right and we can now
110:58 - change this data right we don't need the
110:59 - static user anymore all right let's make
111:01 - a state all right so let's go up here
111:04 - let's say use State comma and then we
111:08 - can write that all within the provider
111:10 - we can say const user or actually make
111:14 - it like this const use it set user is
111:18 - equal to use State and the initial state
111:21 - of a user
111:22 - um it should be
111:24 - like an empty object okay
111:28 - and I know to see this Google because
111:29 - it's already user here so let's erase
111:32 - that
111:33 - and this will still work because this is
111:35 - called user and this user right here is
111:38 - still here
111:39 - okay
111:44 - cool so let's see what happens now
111:47 - now we don't have an image or a name
111:49 - right and
111:52 - if you were to write down this logic
111:53 - right if there's no user we should be
111:55 - able to create one so that means we need
111:57 - a button here to initialize user okay
112:02 - keep that in mind
112:06 - and how do we keep track if something's
112:08 - initialized well what we can do is make
112:10 - another state we can say const
112:12 - initialized
112:14 - is an inset initialized
112:18 - right
112:19 - that's equal to use State as well and
112:22 - the default state for initialize is
112:24 - false
112:26 - okay cool
112:27 - so let's work with this logic okay
112:30 - so at this point uh in my code should
112:33 - the user be initialized should it be
112:35 - true no is it true yet no is it true yet
112:38 - no
112:39 - if it's here right
112:41 - this should still be false and you don't
112:43 - have to write this unnecessary but let's
112:44 - just put it here for safety set
112:47 - initialized is false when should it be
112:49 - true well it should be true
112:52 - if there's a user
112:54 - or if this exists
112:55 - right technically uh this should be
112:58 - empty
113:00 - yep doesn't break still so it's empty so
113:02 - if there is a user from here and it
113:04 - didn't go to the catch right then we can
113:08 - set
113:09 - initialized right to true
113:13 - you with me so far cool
113:17 - all right so now let's make a button
113:19 - that shows up
113:21 - when initialized is false it should say
113:26 - initialize user all right and then if
113:30 - it's true create a post right you'll
113:32 - only create a post if there's a user so
113:35 - which buttons do we have we have create
113:36 - post
113:37 - but we don't have initialize a user so
113:40 - how do we get that let's refer back to
113:42 - our drawing we need to go to the
113:45 - dashboard that's where that button lives
113:48 - you with me
113:49 - cool
113:50 - all right so we're going to the
113:52 - dashboard
113:53 - let's make a new button so basically
113:56 - there's something called conditional
113:58 - rendering here if we're connected right
114:00 - show me the create post button if we're
114:03 - not connected we see that connect button
114:05 - right I showed this way back at the
114:06 - beginning of the video
114:07 - okay what I want to happen next is a
114:11 - conditional rendering for this
114:13 - right
114:14 - so basically if there's no uh
114:19 - let's do it like this all right so to
114:21 - start conditional rendering you need to
114:22 - make put this in a jsx right
114:25 - put this in color brackets I mean and
114:28 - we'll take everything in here so we can
114:31 - say
114:32 - mix this out
114:33 - boom so I just erased that for a second
114:37 - and
114:40 - yeah we could put that there
114:43 - cool so let's just say initialized is
114:46 - our condition if initialized is true
114:49 - right we can load this
114:53 - this colon right here is if it's false
114:55 - right
114:57 - so if it's true
114:59 - we want to show the image
115:02 - and if it's false we need a button here
115:05 - I'm going to copy this uh button here
115:08 - for connecting let's do the
115:13 - let's just copy this button
115:15 - and let's go here
115:17 - paste
115:19 - uh on click essential model true that's
115:22 - fine but we want to say
115:23 - initialize user
115:29 - okay so that means we can take this
115:32 - and put it up here
115:36 - cool so basically I move the image out
115:38 - of there
115:42 - hold on so basically I move the image
115:44 - out of the condition right so if
115:47 - initialize is true
115:48 - create post if initialize is false
115:52 - initialize user and right now it doesn't
115:54 - actually initialize the user but let's
115:55 - see if it works
115:57 - oh it's going to tell me initialize is
115:59 - false
116:00 - so we haven't brought it in yet but
116:02 - let's make a static version
116:04 - let's say initialize right here
116:06 - initialized
116:09 - is true so which one should we see if
116:11 - it's true
116:12 - you see creates post what if it's false
116:16 - we see initialize users that's good
116:18 - right so now we don't need the static
116:21 - one we can get the dynamic one
116:25 - all right so how do we bring the
116:27 - initialize to our dashboard you can just
116:30 - say
116:31 - initialized right here
116:33 - oh don't forget the comma
116:35 - and go to your dashboard go to the use
116:37 - blog and say initialized
116:40 - so now we'll see initialize the user and
116:43 - it's not going to work because I didn't
116:45 - make the function for it
116:47 - okay cool
116:49 - awesome so this is basically conditional
116:52 - rendering inside conditional rendering
116:54 - right
116:56 - awesome so this will pop up this will be
117:00 - filled once we fetch the user and we
117:02 - initialized it okay
117:04 - so
117:07 - all right so we set up our use effect
117:08 - but it's not done right we haven't got
117:11 - all the posts yet right but I'm gonna
117:13 - just stop that because we should make
117:16 - the rest of the logic of initializing a
117:19 - user right that shouldn't be in our
117:21 - start function it can be right you can't
117:23 - make it like uh right when you load the
117:25 - app you can say Hey you have to make a
117:27 - user sign up all right but let's give
117:28 - our users a little bit more choice right
117:30 - and we kind of set it up so that when I
117:33 - click initialize user that's when we run
117:36 - this init user function right so let's
117:39 - learn how to make that function on the
117:42 - front end
117:44 - okay so underneath my use effect right
117:46 - we can say const init user right this is
117:50 - not different from the front end the
117:52 - Solana smart contract function this is a
117:54 - front-end function
117:56 - I'll show you the part where we use the
117:58 - salon code Okay cool so make a standard
118:01 - function like so make it asynchronous
118:03 - and again I have my standard checks here
118:06 - all right I can't uh it's kind of like
118:10 - over engineering but I shouldn't be able
118:12 - to initialize a user
118:14 - if there's no program and my wallet
118:17 - isn't connected you won't even see the
118:18 - button if the wall is not connected but
118:20 - again just an extra check
118:23 - cool so if there's a program if there's
118:25 - public key let's get to the logic we can
118:27 - set up a try catch
118:30 - [Applause]
118:31 - okay because we're dealing with promises
118:33 - here
118:36 - okay
118:37 - and a console.log pair Perfect all right
118:41 - so when we initialize a user what do we
118:44 - want to try well we want to try
118:47 - calling the Solana smart contract
118:50 - function all right so how do we do that
118:54 - okay so the first thing that we're going
118:55 - to need is all the parameters right so
118:58 - what are the parameters if you want us
119:00 - on a playground go to init user the
119:03 - first thing it's going to need it's a
119:04 - name and an author an author a avatar
119:06 - and then we need the account so let's
119:08 - deal with name and Avatar first
119:10 - okay so to get name and Avatar we can
119:13 - just say const name is equal to get
119:18 - random name and where the hell did this
119:21 - function come from I'm importing it from
119:24 - a folder right so what's function do it
119:28 - gets us around it returns a random name
119:29 - I'm storing it in this variable
119:32 - okay let's go to Avatar const Avatar is
119:36 - equal to get Avatar URL it's going to
119:39 - get me a random Avatar
119:41 - cool so those are our two parameters
119:43 - right well now we have the arguments we
119:46 - need our accounts now all right so we
119:48 - need a user account and an authority and
119:50 - again when we were testing right this is
119:52 - where all the understanding comes in
119:53 - this is that user account exist yet
119:56 - it does not so we need to get it from
119:57 - the seat right so essentially we're
120:00 - going to do the same thing here we can
120:01 - actually copy and paste this whole thing
120:03 - this constant user PDA thing it's the
120:06 - same thing we need to find if there is
120:08 - an address there if there's not we'll
120:11 - use that address that's the goal right
120:12 - so the first time where you're writing
120:14 - this line we're checking if it's there
120:16 - the second time where you like this time
120:18 - we're using it to put information here
120:21 - and run our function okay so we're going
120:23 - to use our PDA like so
120:25 - and then we can say oh wait
120:28 - program all right so remember what is
120:30 - program it is the variable that holds
120:32 - all the information about my program
120:34 - right how do we call the instructions or
120:37 - the functions within that program you
120:39 - say dot methods
120:41 - right and again
120:44 - we can chain this by saying dot within
120:47 - that method so you got to say what
120:48 - methods you want to use well I want to
120:50 - be knit
120:51 - a user okay only init user we need to
120:55 - pass in the actual arguments so if you
120:58 - remember its name
121:00 - Avatar
121:02 - right and then another comma here
121:04 - actually I need to come here what you
121:06 - can do is uh after this line at the end
121:09 - of it hit enter again and do dot
121:11 - accounts the starter counts this is the
121:14 - context right the context that you're
121:15 - going to pass in
121:17 - so I'm going to put curly brackets there
121:19 - and let's write what we need
121:21 - we need a user account and Authority so
121:23 - you need to write that exactly and say
121:24 - user account and then you want to say
121:27 - Authority
121:29 - cool but what is the user account do we
121:32 - have the PDA like are we using our seeds
121:34 - we do we did it right here and we store
121:37 - it in this variable so we can say the
121:39 - user account is user PDA
121:41 - all right this this part right here or
121:43 - this part right here specifically is the
121:45 - same as me doing from seed user and then
121:49 - doing Pub Key
121:50 - like so
121:52 - all right generate this three I UL
121:55 - that's basically what user PDA is and
121:57 - I'm putting it in as user account
121:59 - for Authority it's actually pretty
122:01 - simple you can say public key
122:03 - and that's it because it's already a
122:04 - public key
122:05 - and last but not least System Program uh
122:09 - make sure it's lowercase with the
122:11 - capital p
122:13 - and you can just write System Program
122:16 - dot program ID right and we're getting
122:19 - this from our import System Program
122:21 - right here Solano web 3.
122:23 - cool so we did it we passed in all the
122:26 - accounts right
122:27 - and uh last but not least though last
122:29 - chained method is dot RPC
122:32 - if there's a user are we initialized now
122:35 - yes so we can use our U State here say
122:38 - set
122:39 - initialized to True which will then in
122:42 - turn um
122:43 - update our
122:46 - react app so that this initial is true
122:48 - we usually create posts instead of
122:50 - initialize users so it's all coming
122:51 - together I hope it's making sense
122:54 - the thing I like to do is make another
122:56 - state and say const uh Trend section
123:00 - pending all right we need a state for
123:02 - this it's basically a loading State set
123:05 - transaction pending
123:10 - okay and default is false right same
123:12 - reason we use this it's another flag
123:14 - right basically
123:16 - uh when I knit a user
123:19 - we should set
123:21 - transaction pending to True right and
123:24 - when it's all done after this cap you
123:26 - can actually add a finally
123:28 - and say set transaction pending to false
123:32 - right it's done loading okay
123:34 - [Music]
123:36 - and while we're at it we can set that up
123:38 - in our use effect as well
123:40 - you can say uh oh I already said it oh I
123:42 - put it in our use effect well that's
123:43 - perfect we need to do that anyways we
123:45 - also want to do it here uh try
123:48 - set transaction pending
123:51 - true and and add a finally to our net
123:53 - user one
123:55 - set transaction pending false
123:59 - cool
124:00 - all right I think that's it yep I mean
124:03 - that user
124:04 - and now let's bring it
124:07 - out of our context by doing this
124:10 - go to our dashboard
124:12 - okay we're at a dashboard and now we can
124:14 - get it from our use blog knit user
124:19 - and where do we want to use this
124:21 - function well that should be pretty
124:23 - obvious we should use it here when I say
124:27 - init user I don't have to pass anything
124:30 - in because it gets passed in inside this
124:33 - function cool so now let's save now
124:35 - let's hope it all works so again for
124:37 - good luck let's restart the process
124:39 - we're connected there is no user because
124:42 - our use effect so it's building
124:43 - initialize user I click this
124:46 - and not illegal arguments undefined
124:50 - [Music]
124:51 - all right let's take a look on click we
124:54 - want to init a user
124:56 - so let's try let's make it empty first
124:59 - let's see if this just runs so save and
125:02 - let's just say
125:03 - it's a log
125:06 - initializing user this is how I
125:09 - troubleshoot stuff initialize and use it
125:11 - okay cool so this function is running
125:13 - for sure
125:15 - what point does it doesn't like so let's
125:17 - take out this
125:20 - [Music]
125:23 - console log the use our PDA
125:27 - [Music]
125:29 - legal arguments undefined so that tells
125:32 - me that there's something wrong with
125:34 - this right here okay let's take a look
125:35 - okay so I was doing some troubleshooting
125:37 - and I realized that it's nothing to do
125:40 - with this this is perfectly fine my
125:42 - issue was that before
125:44 - this didn't have anything right when we
125:46 - generate a random name I want to get an
125:49 - avatar based on that name so once we put
125:51 - name here you can see all of my testing
125:54 - right we could do initialize user and
125:57 - Bam we actually see on a transaction
125:59 - right but this doesn't enough to make
126:01 - sure that it works oh we have to go to
126:03 - console right and you know what let's
126:04 - refresh it and let's uh click approve
126:08 - actually let's cancel this first and
126:10 - let's click initialize user all right
126:12 - this is a good sign but it doesn't mean
126:14 - it's done is it approve awesome okay I
126:16 - wasn't sure if that worked but let's see
126:18 - if there's a user account generated here
126:19 - there was stoic Pastor that is amazing
126:23 - so it did work right I'm not sure why
126:27 - it's not working here yet oh I know why
126:29 - all right so it did work but the reason
126:31 - it didn't show up is because our use
126:34 - effect right so now we do have a user
126:37 - all right so if I correct it's correct
126:40 - here
126:40 - this should say
126:43 - great post for some reason it's not
126:44 - unless it's still static let's see
126:47 - dashboard
126:50 - initialized
126:52 - initialized in our blog
126:55 - set initialized
126:59 - initialize
127:01 - [Music]
127:04 - Ed well I spelled that wrong completely
127:09 - put the a in the wrong spot that's
127:11 - what's going on here oh yeah because my
127:13 - use effect I know why Okay cool so the
127:16 - reason why we don't see A change is
127:17 - because my use effect is only running
127:19 - once why is it only running once because
127:21 - you can make your use effect only around
127:24 - one time when you load the app that's it
127:26 - right if I put this what we call a
127:28 - dependency module there right let's say
127:31 - you don't want it to run once you want
127:34 - to run once when you first load but
127:37 - again when
127:39 - program changes when the public key
127:42 - changes or when there's a transaction
127:44 - pending
127:46 - so it said save now
127:47 - see
127:49 - cool and now this isn't actually running
127:54 - and see
127:57 - a transaction pending to true
127:59 - if there's a user
128:01 - set initialized ah
128:06 - there we go cool and then I had to make
128:08 - the spelling correct so there if this if
128:11 - this is true if we see create post that
128:13 - means there is a user right but there's
128:16 - no user yet because we need to set that
128:18 - right so again uh user is empty
128:22 - but we can set the user here
128:25 - it's a set User it's equal to user you
128:28 - can hit save and Bam there it is stoic
128:31 - pasture right so we were successfully
128:35 - able to create a user and now
128:38 - we need to create the post so the next
128:41 - thing I want to do is set up the create
128:43 - post functionality right so there's a
128:45 - couple things that we need to do to set
128:47 - that up and one of them we'll need to
128:50 - look at our dashboard and look at our
128:53 - static data right there's something
128:54 - called a show model here that when I
128:57 - create when I click create posts this
128:59 - flag should turn to True right so we
129:03 - have static uh data here let's make them
129:05 - real so to make them real I'm going to
129:07 - go here say const uh show modal and set
129:13 - show modal and say equals uh use State
129:18 - and we'll set that equal to false first
129:21 - right
129:23 - from here we can just bring it in show
129:25 - model set show model right and once
129:29 - that's here we can delete this don't
129:31 - save yet though
129:33 - all right and we want to be able to
129:36 - bring it from here so we can say uh show
129:40 - model set show mode perfect so now we
129:44 - shouldn't see any errors if I click this
129:46 - boom look at that all right
129:49 - we can see it perfectly like so great
129:52 - post boom X
129:54 - all right again this was the modal
129:56 - itself is given to you we just set up
129:59 - the functionality right what I want to
130:01 - happen is for us to write something and
130:03 - I hit post all right if I click post it
130:06 - doesn't actually make a post on Solana
130:09 - all right nothing
130:11 - we want to set up the same way we
130:12 - initialize user let's set up how to
130:14 - create a post now
130:16 - Okay so
130:18 - same thing as before we're going to
130:20 - scroll down to
130:23 - our blog.jsx and underneath init user we
130:27 - can go ahead and make another function
130:29 - so just like before we'll give it the
130:31 - same name create post equals async
130:36 - okay uh we'll do our standard check here
130:38 - again optional and oops and public key
130:44 - right there's multiple ways to do one
130:47 - thing you'll realize that as you code
130:49 - more and more so if you have a better
130:51 - way that's more efficient than mine
130:52 - please share it down below in the
130:54 - comments and I'm happy to hear it so
130:56 - cool if there is a program we can set
131:00 - transaction pending to True right for
131:03 - our state and then we can do a try catch
131:07 - at any point our try fails it will catch
131:10 - that error and we can console log better
131:16 - cool so what do we want to try we want
131:18 - to try calling our Solana function right
131:20 - so let's review what do we need well if
131:23 - I want to
131:25 - create a post right
131:27 - for my arguments I'm going to need a
131:29 - title and content and I'm also going to
131:33 - need post account
131:35 - user account Authority and System
131:37 - Program so let's talk about the
131:39 - arguments first so unlike init user
131:41 - where we got the arguments from within
131:43 - the front end function right here we're
131:45 - actually going to pass them straight up
131:46 - so we can just say title oops
131:49 - title and content here
131:52 - okay
131:54 - now to get the
131:56 - arguments now I mean the accounts let's
131:58 - open that up does user account exist
132:02 - yes it does we're going to be using this
132:04 - user account right the user account with
132:06 - my wallet address CVR
132:08 - okay so that exists
132:11 - does the Post account exist not yet
132:13 - right we want to write to that address
132:15 - does Authority exist yes it does all
132:18 - right so how do I get
132:20 - the user right so I'm copy and pasting
132:22 - this but it's literally the same thing
132:23 - right you can put this right here right
132:26 - so This Is Us
132:28 - fetching the user all right find
132:30 - programmers are just sync get that user
132:33 - right and it will exist and the ad
132:35 - account will exist at that address
132:37 - right because we made it before the only
132:39 - time we call this function is if it does
132:41 - exist right the next thing that we need
132:43 - which I won't copy paste is the post
132:46 - PDA and guess what to get the post PDA
132:50 - just like in our test we're going to get
132:52 - it from our seed and what seed does it
132:54 - need post seed or authority and the
132:58 - losers last post ID okay so do we have
133:02 - all those information let's find out so
133:04 - we say find program address sync all
133:06 - right here comma program dot program ID
133:11 - I believe that's what we do and now for
133:13 - the seeds all right we can copy this
133:15 - utf-8 code
133:17 - but this time instead of user our string
133:19 - is post all right
133:22 - for our Authority we can just say public
133:24 - key so it should match and we say to
133:26 - buffer to get it in a format that it
133:28 - likes and now
133:30 - how do we get the last ID if we were to
133:32 - do this with uh on Solana playground we
133:35 - say post
133:36 - we say Pub key right we just put in our
133:39 - Pub Key and then we get u8 we need to
133:42 - get a number here and based on this zero
133:46 - it should generate three t two this is
133:48 - the address that we're gonna write to
133:49 - it's always going to be the same it's
133:50 - predictable in Solana right it's not
133:53 - random this address
133:56 - okay but how do we get the users last ID
134:01 - well do we have access to the users
134:02 - without asking myself
134:03 - [Music]
134:04 - and we actually do right what do we have
134:06 - access to user in this check right here
134:09 - right if there's a user right if I were
134:12 - to console log this and console.log
134:14 - user
134:16 - user stuff
134:18 - okay that's console log it so you know
134:20 - what I mean
134:21 - a lot of understanding for me was taking
134:23 - Solana code that everyone wrote and
134:25 - console logging in oops
134:28 - this is running like crazy
134:31 - let's make this run once for now
134:36 - okay cool
134:37 - it's running way too many times
134:39 - uh program
134:42 - cool object user stuff
134:45 - Okay cool so in our user State we have
134:50 - access it's last post ID right and we
134:52 - can separate that right into another
134:54 - state so we could do that by saying over
134:58 - here
134:59 - const
135:01 - uh last
135:03 - post ID I think we'll call it last post
135:06 - ID comma set last
135:09 - post ID and to be honest we won't need
135:12 - this Set uh last post ID because I don't
135:15 - believe we're going to set it to
135:16 - anything else because in Solana we are
135:19 - incrementing it we're not doing anything
135:20 - on the front end with it so I'll
135:22 - actually do well actually no we will
135:24 - need to set last post ID because
135:26 - underneath set user right here we can
135:29 - say set last post ID to user dot last
135:33 - post ID and that's the only time we'll
135:35 - set that state again okay
135:38 - cool
135:39 - all right so we got it last post any
135:43 - and we let's see if I put transaction
135:45 - pending here with a freak out oh so
135:47 - transaction not pending
135:50 - oh no it still doesn't like that
135:54 - [Music]
135:56 - nope
135:57 - okay so we can't use this just yet
136:00 - uh it might be because we're using it
136:02 - here
136:07 - [Music]
136:10 - we go
136:11 - yep awesome so I'll put public key back
136:15 - and now it's not going to run their use
136:16 - effect too many times right because it
136:18 - makes sense if I put set transaction
136:20 - pending here it's going to run way too
136:22 - many times
136:25 - the set initialized
136:30 - there spelled that right cool okay cool
136:32 - transaction pending it's all good
136:35 - all right no more issues
136:38 - awesome
136:39 - all right so I got that settled um let's
136:42 - go back to our code so we have our last
136:45 - ID now
136:47 - so anytime I say last post ID it will be
136:50 - the user's last post so it should be
136:51 - zero
136:52 - okay so with that information
136:55 - we need to add another seed okay so how
136:58 - do we add this next seed well there's a
137:00 - lot of uh things that we need to do to
137:02 - format it right we can write last post
137:04 - ID but it needs to be formatted we can't
137:06 - just write zero here it should be an
137:08 - unsigned
137:10 - integer eight U eight right so how do we
137:13 - make this a you wait
137:14 - um to do that I'll just erase this for
137:16 - now
137:19 - right I'm just going to say uh you int
137:23 - right you're gonna see eight array Dot
137:26 - from
137:27 - parentheses and put in a right here last
137:31 - post ID and that's how you're going to
137:34 - u8 from this ID
137:36 - Okay cool so we have user PDA the post
137:38 - PDA
137:40 - right we have title and content and now
137:43 - we have to actually call the program
137:45 - method so we can say await program right
137:47 - dot methods
137:50 - dot create post
137:53 - okay it takes in two things title
137:55 - content right which we're getting from
137:57 - when we pass it
137:59 - then we can say dot counts
138:05 - then what accounts does this program
138:08 - need
138:10 - if you're unsure at all we can go ahead
138:12 - and look at our Solana playground
138:15 - when you post account user account and
138:18 - Authority so let's go ahead and do that
138:19 - I can say post account we need a user
138:24 - account we need a Authority
138:28 - and we need a system capital P program
138:31 - Okay cool so do we have what we should
138:34 - put for each account we do Post PDA
138:37 - remember this is checking if it exists
138:38 - if it doesn't exist right that's the
138:40 - address we're making that the address
138:42 - that we write the account to
138:45 - for user account it's going to check if
138:46 - this exists and if there's an account
138:48 - there it does so we're going to say user
138:51 - PDA
138:52 - Authority right so with the authority we
138:55 - can say a public key
138:57 - and we don't need to format that
138:59 - resistant program we can say System
139:01 - Program dot program ID
139:04 - comma
139:07 - dot oops
139:09 - dot RPC
139:11 - cool right and we also want to close
139:14 - that modal so we can say set show modal
139:17 - false
139:19 - okay
139:21 - and then we add our finally here
139:23 - you can say sets transaction pending to
139:26 - false as well
139:28 - awesome
139:30 - okay cool let's pass down create post
139:35 - and go to dashboard
139:37 - we can erase static create posts
139:41 - and now we can just get it from here get
139:45 - it from use blog create post and where
139:48 - do we want to put this create post well
139:50 - let's find it create posts right here on
139:52 - submit right so I don't have to rewrite
139:56 - anything this is the same name luckily
139:58 - it's using our States from our title and
140:00 - content and putting it there
140:03 - so
140:04 - in theory if I
140:06 - create post
140:07 - it should work so let's try it so
140:09 - welcome to my blog
140:13 - this is my first post that's the
140:16 - description we hit post
140:18 - let's go we got a transaction right so
140:20 - now we approve and if this closes it
140:23 - should work it closed and we don't see
140:25 - anything here because we didn't fetch
140:27 - those posts yet all right well we can
140:29 - test it though if we fetch this
140:32 - there you go it exists right this is my
140:34 - first post welcome to my blog
140:37 - so there we go we were able to create a
140:40 - post which is amazing let's freaking go
140:42 - guys so we gotta create posts I'm
140:44 - excited last but not least let's figure
140:46 - out how to fetch post all right so you
140:47 - want to learn how to fetch all the posts
140:50 - well what you could do is go ahead and
140:54 - to go into your code and you're already
140:56 - One Step there right so remember how we
140:58 - did program dot account dot user account
141:01 - right I went ahead and console logged
141:03 - program right if I can't select program
141:05 - by itself what is that guys program by
141:08 - itself is literally all the information
141:10 - about your program I can get the ID by
141:13 - doing that program ID if I do a DOT
141:16 - account let's take a look at what we see
141:18 - all right you might know this already
141:19 - but if I do dot account you should see
141:22 - if I refresh this oops
141:24 - let's make sure this is running
141:26 - uh yarn Dev
141:28 - okay
141:29 - make sure this is running and there you
141:32 - go cool you see this object here and you
141:35 - see all the accounts that are associated
141:38 - right with this program which is user
141:40 - and just posts so which one do we want
141:42 - out of these well I want the post all
141:44 - right so if I say dot post account let's
141:48 - see where we go from here all right this
141:49 - is how I figured out uh what everything
141:51 - does it's a lot of content logging and
141:53 - testing
141:54 - cool so as you can see when I do that
141:57 - post account this is all the information
141:59 - about it right here and another thing
142:02 - that we'll need is
142:04 - the method so let's see if we can find
142:06 - any here provider coder prototype object
142:09 - cool awesome
142:11 - so you can see
142:13 - right you can say fetch multiple fetch
142:15 - right there's also unsubscribe subscribe
142:19 - but there's also an all right this will
142:22 - fetch all the accounts that are posts
142:26 - all right even if you yourself didn't
142:28 - make it right for our scope of our
142:31 - project there's only going to be uh one
142:33 - user associated with it it's kind of how
142:35 - we made it but if you were going to get
142:37 - multiple users and want their unique
142:39 - post right you can filter it by their
142:42 - public key all right but again because
142:45 - of the scope we don't have to do that
142:47 - but this time so let's set it up
142:50 - okay so if this is the case then what we
142:54 - want to do here is say const post
142:57 - accounts or make a variable it's equal
142:59 - to a weight program dot account dot post
143:03 - count
143:06 - all right so this should give us all of
143:09 - the posts right
143:11 - and of course if we want to save this
143:15 - we're going to need to
143:17 - we're going to need to put it in a
143:20 - variable we'll put in a state really
143:22 - rather
143:23 - let's fix this and let's make a state
143:25 - for it so to make a state you guys know
143:27 - how to do this by now it should be post
143:29 - posts
143:31 - set posts and set this equal to use
143:34 - State and the default State can be an
143:36 - empty array
143:38 - so
143:40 - what do we do here we say set posts
143:42 - is equal to post accounts and if you
143:45 - want we can console log the post account
143:48 - so how many post accounts should we have
143:49 - guys all right if you've been paying
143:51 - attention all right as you should be
143:52 - should have one post cool so it'll take
143:55 - a second to load let's see console array
143:58 - one right but is it just the object
144:01 - itself take a look at this right it's an
144:03 - object with a public key with another
144:05 - property or a count but if I open it
144:08 - welcome to my blog this is my first post
144:10 - blah blah blah
144:12 - and there we go all right so all we need
144:14 - to do now is take posts right because
144:17 - that's what's holding all these posts
144:19 - and bringing it out to the block
144:21 - so you can go below here we can say
144:24 - posts right we can go to the dashboard
144:27 - and let's bring it in here
144:30 - so I'm gonna go to the use blog hook and
144:33 - say posts
144:35 - right and you can see post is declared
144:37 - over here it's our static data and
144:39 - actually erase this and now we don't
144:41 - have any more static data so if I save
144:43 - this
144:44 - look at that we got our post right and
144:47 - this makes sense we only should see one
144:48 - so if I do this all right and let's
144:51 - let's hear this is my first post welcome
144:54 - to my blog right so our second page this
144:57 - is our router right if you go back to
144:59 - our model here this is full posts when I
145:02 - click on this it loads to the full post
145:04 - page right and loads
145:07 - said item all right so let's put this in
145:09 - action now let's go back to the code
145:11 - just double check our create post
145:12 - function oh yeah that's in blog so I'm
145:15 - gonna create post awesome so transaction
145:17 - so let's see if it loads let's create a
145:19 - post uh
145:22 - this is how to build a block
145:26 - all right this Vlog uses the salon chain
145:32 - all right let's hit post
145:33 - there's our transaction we hit approve
145:36 - it loads and there it is this blog uses
145:39 - the Solana chain right and if you want
145:41 - to put even go even more in depth with
145:43 - this and you want like a date with each
145:46 - post right you can get the date from the
145:48 - front end
145:49 - right and to your user account or your
145:53 - post account you can add a date feature
145:56 - right so if you want right there's
145:59 - another video we have Airbnb on Solana
146:01 - this should help you out with that so
146:04 - with that said all right we're done with
146:07 - the app guys this is it because all you
146:09 - have to do to set up write a smart
146:12 - contract on chain to make an account to
146:15 - creating a post and now you have a Blog
146:18 - so I hope this helps you guys all right
146:20 - let me know down below if this helped
146:22 - and I'll see you guys in the next video
146:24 - peace

Cleaned transcript:

in this video we're gonna be making a blogged app on the Solana blockchain if you're a web developer and you want to get started with web3 this is the tutorial for you I'll be showing you guys step by step on how to make your first Solana smart contract using anchor which is just a framework of rust for a blog app we need to be able to create posts so what's special about this is we're going to be able to create a post with a Solana smart contract and store them onto the blockchain well then fetch all of those posts from the Solana blockchain so that we can display it back to our app and making our app decentralized to do this we're going to be using quick node which is our RPC node provider to help us get access to the blockchain and from there I'll show you guys how to set up your Phantom wallet so that we can store our Solana and sign all of our transactions we'll be doing all of that Salon of code on something called Solana playground which we can use to build compile and deploy all of our Solana code as well as my favorite part is testing all of our functions so you can understand how it all works together so before before we get started make sure you use our CLI tool to get the front end code that you need to get started right away and now further Ado let's get to the demo welcome to the demo of the blog app so it's gonna be pretty simple guys I want to show you how this works first thing I want to draw your attention to is this right here so already off the bat our app will auto connect to Phantom you'll see it when I refresh really quickly so let's do that see connect and then boom we're connected right we're connected to this specific wallet I have wallet number four and at the moment there's no user how do I know there's no user because the way I have my code set up is that if I did have a user there would be a picture and there would be a random username that gets generated so let's generate and initialize a user bam okay you'll see that our code uses our Phantom wallet to approve uh Solana functions on the blockchain so we can hit approve all right give it a second and Bam look at that all of a sudden we have nervous Alliance right that's the random name and the random Avatar it generated for me and now we have a user now that we have a user that button that said initialize user is now create post right so what you'll learn today besides uh creating a user will be able to create posts on the blockchain so get excited for that so welcome to the video right right this is for you guys all right so if I hit post there it is this is how you know we're making transactions on the blockchain I hit approve it disappears and Bam there you go there's our post welcome to the video and if I click on it it takes me to the full post page right very Bare Bones front end and we're not even going to focus on what the front end is we're going to be focusing on how to make a smart contract and how to connect that contract to our frontend app so let's get started all right now that we're set up with quick note let's go ahead and look at our app I know you guys saw me use the demo but go ahead and press Ctrl J and make sure you see the interior app so you're in the same root folder as I am right so if I do yarn Dev here all right we're on localhost 3000 so what I'm going to do is open up my browser again and let's go ahead and type in localhost 3000 and let's take a look and Bam there we go here's our app right what's the difference though you notice a couple things there is no posts right but would you say this is a working app I'd say not yet right the things that you see here like my random robot and the create post right it doesn't work right it's all static I can click this nothing right I can uh this is not even a user registered on the Solana blockchain all right so what does this app do right let's take a look so what I'm going to do next is show you the difference so if I open up my app let's go to the source and let's head over to our Pages all right the page that I care about is the dashboard right so in this dashboard right look at this comment here and it's our static data right this random robot here let's turn it to Lance all right so if I save this let's open up my app see how the name has changed it's using static data we want to change this the gold of this app is we're going to turn all of our static data using our Solana code right so I'll simplify it for you all right this is where you can change the Avatar so that means we need a user object right there's another thing here that says connected true right so if I say connected false let's see what happens look at that my name is now gone right and I have this connect button right here that doesn't actually work either okay and then you also see post is equal to this and just some static functions that don't do anything right but the cool thing that you can visualize is if I change the show model to true all right look what happens right this is the modal that we make to create a post all right so that's another thing that we keep in mind think of this as our little controllers that we want to give functionality to right so those are the main things that we will work on the functionality and fetching and creating right another thing that we need to know is how exactly does this app work so let's go ahead and review that okay so what I'm going to do is open up a website and I'm going to use this website to just illustrate how our app works and remember I said you need the prerequisite is to understand uh react well or one the one pretty good that I said is to understand fundamentals of JavaScript and HTML right so let's talk about HTML and react all right so basically there's a tree when it comes to components right so uh the best way I can illustrate this is let's format it so let's take a look what would you say is the parent component right the most top level component that holds the whole entire app well if I were to tell you it would be this app.jsx right here see this if I were to remove this router right the app would break all right we want some proof if I do this boom all right just blank screen I'm gonna bring it back we're good okay and I can't even exit out this model because I need to change this to false boom okay cool all right you got the idea so this is our main component here and there's something called a Blog provider which I'll get to and then there's something called a router all right let's illustrate what this app looks like by making a little rectangle here let's call that app all right so this is our most top level component and the app has children right you do see this router here but we'll talk about that in a second right so if you go let's figure out what router is so it's in Source router boom okay so the child of app is inside a router right and in this router right you see route path we can go to two different pages this forward slash for path means just the regular URL and this read post by ID right it's a dynamic URL so this leads us to another page which is essentially uh in the demo when you saw me click the post it's going to lead you to a page with that post all right so there's two ways routes right two routes our app can go so to illustrate this right we can either load the dashboard right or we can load the full post right so let's uh write that down so let's say dashboard and we'll say full post you with me so far cool so in my app there's two routes dashboard full post right if we go to our folders here underneath sort if we open up the pages folder guess what we see we see dashboard.jsx and we see full posts right so what did I just change where was where does the static data live guys does it live in uh full post or does it live in dashboard what do you think I think it lives in dashboard right because this is dashboard.jsx and this is where the static it is all right so if you understand that you're in a pretty good standing so let's go ahead and make this a little bit smaller cool so now what I want to talk about is what's in the dashboard right so let's go on the dashboard let's scroll down let's look for any other components right we see jsx here that's normal right that's how we can see home and blog right the image that holds my avatar right if I keep scrolling I keep scrolling here line 133 you're going to see something called posts dot map all right let's post then you might not know but post is an empty array or what should it contain it should contain all of my blog posts all right right now it's empty which is why you see nothing right but that map is a builtin array function right if you didn't know map will iterate through an array and basically make a new uh array right if you had like a can of blueberries right you take the blueberries and put it in a new can of blueberries all right depending on what you want kind of like filter but different similar all right so what does this map make right so for every single item and you can read this as post for every single Post in posts make all of this HTML so if we have zero posts how many uh of this jsx elements will it make zero if you had one or two posts how many of these you would make right it could make two right this isn't really a component but we'll label it with one we can call it article right so and then the dashboard right let's do a dude within the dashboard all right it's gonna make articles all right we can illustrate like this articles article article okay think of these as posts they're really just posts cool is there any other components that we need to care about right there's nothing called post form all right when does this post form shown well it's it's going to be shown when show modal is true ah okay so remember when we were changing the static show models true or false right this is our flag that's going to tell us hey this is when you should see the modal this is when you shouldn't see the model so that's how that's working there and if you look we also have components right these are buttons that we made if you go to components you can see that we have a component here called button and I'm just reusing this that's the cool part about react and components is that you have reusable uh jsx that you can use for whatever you need so notice how many times I'm using this button it's like three times I believe all right so this button's right here one and there's another button right here and we're going to create a button use it together soon cool other than that we can take a look at full posts right if I look at full posts here right pretty standard right there's no um it's another article tag but there's no components with it so this is it for full post I don't want you guys to worry about this just yet right we're gonna worry about it later and what I do care about is dashboard so what do we want to do then what's the point of this well let's make some pseudocode to make some pseudocode I'm just going to go down below here and let's make kind of a todo list right what do we want to do first well if you look at our app can I connect anything no what should we connect to we want to connect to our Phantom wallet okay so first step it set up Phantom connection yeah it's a couple different steps for that we want to set up our Phantom connection to make sure that we can use our test Solana to write to the Solana blockchain right I want you guys to start thinking salon on blockchain for now as like on any other database right what do we want to store on the sauna chain I want to store blog posts right anytime you store something on Solana you need to pay Solana to do that right you're gonna say like hey uh think of it as like space right if you're going to a storage facility you can't just throw your couch in there you need to pay the people to store it there right so we want to set um make payments using our Phantom wallet okay so I'll show you guys how to do that set up Phantom connection the second thing is set up our blog context yeah our blog context right you guys know what do you mean by that right set up our blog context right uh another thing that we should do actually let's make that step three we should do for step two is write Solana functions right we need to be able to create posts right and sign up users right so maybe we can indent this oops we can indent number two and say we need to be able to initialize a new user all right and then we also want to create posts there you go all right so if you were coming from this to do app this is going to be even simpler than the to do app with Solana all right so we all want to do initialize a new user create posts and then set up our blog context right call Solana functions from the front end right because we can make the Solana functions on the Solana Network on the blockchain but we need to call them from our front end right which I'll show you how to do that as well so this is really exciting all right and other than that if you do all this right that's pretty much done so without further Ado let's talk about the Phantom connection all right there's a couple things that you need to do to set up this Phantom connection all right then one of the first things that I want you guys to do is uh make a new tab and let's get Phantom if you don't already if you do go ahead and Skip ahead to where I start connecting the buttons all right so if you don't have Phantom or don't know what it is Phantom wallet is essentially your virtual wallet that's gonna hold Solana for you right it's going to hold any other tokens it'll even hold any nfts that you own on the Solana chain now which is awesome so what you could do is type in Phantom wallet extension right and this is going to work if you're using Google Chrome so since I am using Google Chrome click on this you'll see the extension and go ahead and click install in section uh extension I already have it so you should be good to go all right once you do you should see it over here or if you don't you can click this up extensions puzzle piece and make sure you pin it so that I can click it easily it's going to tell you your recovery phrase make sure you save that somewhere and don't don't share your recovery phase with anybody else or your private Keys alright so when you enter your password I'm just going to do this as you can see you can make multiple different wallets I have four I actually have six now right all for testing purposes and what you need to do first is go to settings here right you can change the name of your wallet right here what I care about is this change network so change the network and make sure you're on the same network that we're developing on so which one we're developing on guys I know you can see it so it's definite you got it good job Jason all right so you can click devnet if you're working on the mainnet click mainnet vice versa Okay cool so we're on devnet we're on the same page but if you notice something here oops not model three we want all four you might not have any Salon all right I have 26 Soul right I'm not rich or anything but I can show you guys how to get test salon right around the devnet this doesn't mean anything to get free Solana on the test net right you can type in seoulfosset.com and all you have to do is open up your wallet again see this cvr6 that is my public key or in other words that is the address of where my wallet lives on the Solano blockchain so let's hit copy click just click on it and go click on this input field paste and there you go there's my full address right if you want to send me money you or send somebody money just send Seoul to that address right same logic here right we can airdrop up to two Soul right I usually do two and make sure you click devnet so let's remember how much I have right now I have 26. cool if I click on this boom successful airdrop I got to Seoul to this address right I can click on my Phantom 28 right get as much as you need uh you won't need a lot you may need like up to six Soul so maybe do this three times right because when we deploy the smart contract that's gonna cost some Salon as well remember anytime you put something on the salon and chain it's gonna cost some so it's a good practice for that so got as much Solana you need other than that you should be good to go and set up with Phantom okay so for now I'll X these out all right so let's set up the Phantom connection the first thing to understand is we need to make sure that my Phantom connection Phantom connection or Phantom wallet connection right we want to make sure that this connection is available in my entire app right so if I want to make this available should I set this up in full post is that going to be working on my entire app no should I set up a dashboard no what if I set it up an app yes all right because if you set it up an app technically Phantom wallet will be available throughout the whole thing the circle is simplifies the where the Solana while the connection is from okay cool so where do we want to set up let's set up in the app okay so I'll put this here to visualize it for you guys and let's go ahead and move to this and let's go ahead and go to our app.jsx what we can do is make this smaller and let's make it a little bit more visible for you guys how's that cool and you're going to see there's already an import ready for you guys to use uh there's the context our block provider which I'll explain later when we get to it our router which controls which page we're at and this is our jsx right here so how do we get the connection right let's go ahead and do that so like I mentioned before we need to wrap our entire app with the connection right so we want to wrap this router with that connection we need to provide our router with the connection so if you understand what we want to do the blog provider will start to make a little bit more sense right so like I said we want to provide our router with the connection so we're going to need to import a couple things so let's go ahead and write import uh let's write this curly brackets here to the structure and let's write connection provider right you're going to see this Auto Import connection Provider from Solana wallet adapter react cool and there's another thing that we're going to need from this it's going to be something called a wallet provider right the first one is providing the connection you can look at the second one is providing which wallet we're using because uh there's multiple walls it's not just Phantom on it I just prefer to use that one so let's go ahead and do wallet provider right and like I said we are using Phantom so we can actually import the Phantom wallet adapter from salana wallet adapter wallets all right you should say wallets yep cool so we got these three Imports uh that should be it I believe cool so the next thing you want to do is set these Imports up so let's go ahead and set up our endpoints right so to use the connection provider what we can do is wrap this entire thing with that provider so let's bring it out I'll show you what I mean connection provider boom I'm would you say this is wrapped inside this not quite so let's go ahead and bring that up here boom so now we just wrapped an entire connection with our app right you can look at it with that Circle again so if I do whoop this is our connection it's provided right or at least the skeleton of it is yeah cool we want to do the same thing for the wallet providers let's go ahead and type in wallet provider all right bring that all in here and let's just bring it out here let's give it a nice indent cool so what did we just do right if this is our connection provider we also provided a wallet around our whole app so think of it like two circles right and again this snap might be super accurate but I think it's a good visual to kind of understand uh what's going on okay cool uh we're not done yet though mostly because we set up the skeleton but we didn't provide a connection and we didn't say which wallet we're using so to do that uh we're gonna need to pass in a prop called endpoint and tell him tell him what endpoint we're using so remember that quick node endpoint that we use this is where you're going to plug that in cool so endpoint equals let's just put this empty object here and let's define what our endpoint is so let's say const and point I'm just going to hold in the variable you don't have to do this but it's going to make this a lot nicer because if you remember our HTTP provider if you copied it it's gonna be pretty long so I'm going to go ahead and put this here we go and we can just write endpoint awesome okay so we have the end point another thing that we need to do is get our wallet set up so what wallets are using we're using Phantom so we're going to need to use this Import in just a second so let's do kant's wallet is equal to use memo all right it's a react hook and inside this react hook it's going to take in an anonymous function I'm gonna put this right here and inside this array let's write new new Phantom wallet adapter right let me put parentheses here comma comma after this uh end of this bracket and then another empty array right here cool so then now that we provided the end point let's provide the wallets for our provider say wallets is equal to wallets and another cool thing is we can write autoconnect here so that it will automatically connect and there you go we set up our connection but at the moment we're not connecting right because there's nothing set up um to use that connection or make use of it so let's go ahead and do that so let's refer to our little diagram here and if I want to use the connection that I just made which component should I be looking at should I look at full posts app or dashboard I'll give you guys three seconds three two one all right if you said dashboard ding ding ding you got it all right so let's go ahead and use the dashboard I don't know why I use my epic pen but let's go ahead go to dashboard.jsx right and let's get started and see what we have here so again I gave you guys a little bit of help here I used all the Imports already right but the Imports that we care about is this use wallet right and we also care about uh Phantom wallet name all right this might be a news already okay cool so let's scroll down we can go back to this app and remember how I said connected is false right we don't have to use this all right calm this out you're gonna see there's errors all right because connected doesn't exist what you need to do is grab connected from use wallet right we imported that from here use wallet is a hook from Solana wallet adapter right and you can get something called connected here all right connect it is basically going to read our connection and say hey there's a wallet connected if there is right it will be true and if it's not it's going to be false okay so let's go ahead save okay cool another something here it doesn't say uh what's called connect there's no connect button right it's the same as if I were to undo this and bring this back it's the same as me switching this flag or this variable from true I mean from false to True right except I didn't have to manually change it right this is called Static right and me taking this out is making it what we call Dynamic right so if I wasn't connected for whatever reason oh let's refresh this or let's actually just uh see if there's a way to disconnect here okay now I'm a different person cool I guess there's no real way to disconnect oh I know maybe if I do uh different network let's try this I actually don't know what will happen here okay so it says I'm connected even though I'm in a different network that's fine but basically if I my wallet wasn't connected which you might see when I mess around with this right it's gonna say connect but remember that um property right here autoconnect it will automatically connect our wallet if it's already there so let's try and not having this there we go cool so I removed auto connect so now it's a better visual connected is what guys is it true or false false I click this right it should work right we should auto connect boom awesome Okay cool so the connected is working now and let's see what else on connect select connecting true boom okay nice awesome so we're Auto connecting we already have our Phantom connection up and running let's see what else do we need here I actually think that's good all right so we'll come back to this right but with that said we have our Phantom wall connection up and running which is awesome all right so what's next let's take a look at what we wrote right what we want to do next is write Solana functions right that was a very simple way to say um edit write Solana smart contract right so if you didn't know if you don't know what smart contract is basically it's exactly what it sounded like it's a contract right where you have a list of things that you need to do and depending on what you wanted to happen it happens instantly that's what makes it smart right so how do I write a salon a smart contract well I'm glad you asked so let me show you so I'm gonna make this full screen We're not gonna go into vs code for a while we're going to come back to it in later all right so we want to do let's make a new tab here and let me show you a website it's going to be called beta.sol.pg.io if you guys are coming from solidity at all this is essentially the remix of Solana it's an online IDE where that helps you write Solana smart contracts all right I already have a new project set up but let's say you want to make your very own project what you could do is hit create and there's three Frameworks we could use native rust uh anchor rust it's just a framework of rust and then there's new support for something called seahorse which is right you can write Solana with Pike with python right let me try it again and there's a new framework here called seahorse which is very exciting it's basically writing Solana code with python which is cool all right but today we're going to be using anchor so let's go ahead and name our project let's say uh Solana blog let's click anchor rust click create and boom there we go right and you should see basically the same thing I had before right uh let's just go over what is here right so there is essentially an import here this is the ID of our smart contract or what we'll call in Solana programs right so when I say program it also means smart contract and I'll use them interchangeably cool so if you see this hashtag program this is what we call a macro in Rust and underneath it is uh the actual program right so if this is a macro for program underneath it is our smart contract this is everything about our smart contract this is a function there's structs here don't worry about those just yet but uh we'll get to it so what I'll do for you guys is I'm going to erase everything except declare ID because uh we're gonna need that for a second I want to build it from scratch just for you this is Solana playground the reason why I love it is because not only you can build you can also test all of your salon as well as deploy right because after you write this smart contract we need to deploy it on the blockchain right so let's illustrate that right so basically what's going to happen is we're going to write a rectangle here that's a smart contract let's make a giant one this is called the Block Chain right so if this is the Smart contract right we're going to write something here all right once we finish writing it we can deploy it so that it lives on the blockchain right let's make a circle here this is our our app what we want to do is use our endpoint right we use our endpoint to connect to the blockchain call our smart contract and what let's say we want to create a post we'll call the create post from this smart contract we'll create the post right the post will get created right here this is the post on the blockchain and then we're gonna fetch the post right fetch post and this is a visual of what's happening what's going to happen all right so what's the first step we need to make right so if we just rewind a bit what we need to do first is make the smart contract so this is the step that we're on visually you with me cool so let's get started Okay cool so as you can see our main file that's going to have all the main information is lib.rs this is our entry point uh for Solana to read our code so declare ID um is our is the program address all right so let's get started to get started remember when I use the word import where we're importing usually a library a hooked from react right with anchor the closest equivalent we have is something called use we want to use anchor Lan right uh anchor Lang is a library within anchor which again framework for rust so when I do colon colon basically I'm going inside that folder or inside that library and there's going to be a couple different folders or different other libraries right so within anchor Lang I want to get something called Prelude simple enough right and you don't have to fully understand what Prelude is but just know that we're going to import it into our liv.rs of course if I do call again I'm going inside what I'm looking inside Prelude and then I'm going to write Star right get me everything from Prelude which is coming from anchor Lang we're good all right let's say we had but now the question is let's say we had other files here right we've got other files here let's make other files to say a new file and say uh constant dot RS right RS stands for rust and let's say a state star RS cool how do we bring these files whatever's in them Insider app right so the first step is you want to say Pub mod constant and then you want to say Pub my States right then to import them as modules we're going to say use create all right think of crates in Rust like um closest thing I think of for JavaScript would be like npm it's like packages right so I want to get let's do this get constant all right which is going to be this file and basically if I do this what am I saying now get me everything within constant right now there's nothing but we'll put something nowhere and let's do a comma here and get me States and how do I get everything within States we'll do this another thing to notice is if I put a semicolon here right in JavaScript we can get away with this right in Rust we can't right every time you end the line right that's the last piece of that line of code you need to put a semicolon otherwise it'll think that it'll rust with read it like this which is going to give us an error right so make sure you mark the end of your code or line with the semicolon if you don't do this it'll yell at you after that usually the program the declare ID goes here awesome and remember how do we Define a program right we can use a macro you could say hashtag square brackets program just like so cool so what we could do here is a pub mod and this is where you can name your smart contract or your program what do I want to name this I could just say blog so all right and then if I put curly brackets here this whole scope is the Smart contract or what we call the instructions right what are the instructions of this contract right cool so quick recap basically we are importing any libraries or files that we need to the global scope over here everything I'm highlighting it's in that scope we can just use this as is but we can also just bring these variables into this scope right we can do that by saying use super star this liner here to my understanding right basically if this bring if these lines of code brings it to this scope you super will bring all of these into this scope all right so that I can just use it easily in the program otherwise I still have to do like create this and then get what I need from it I can just call what I need without uh saying crate or States okay cool so let's make our first function all right to create a function on uh Solana I'm going to do is write Pub FN boom FN is like in JavaScript if you write function here so FN is function next is just the name right you guys know this and let's say let's call it init user right when I say knit it means initialize the user right so if we go back to our app we want to initialize a user for this app and the user should be related to our wallet right so essentially we can sign up using our wallet address as our user right that's the idea here you don't have to do there's many different ways to do it but it's the way we'll do it cool and just like any other function we put parentheses uh the difference is you need to put a dash greater than sine to make an arrow and then you're going to say result and do something like this right basically you're saying hey this function will get you a result and what and then we put these curly brackets and that is what the function does this is a skeleton of a function in Rust so you would basically write oops right logic here and what do we write in logic of it's initializing a user all right so let's build this like in JavaScript and I'll turn it to rust so basically uh we're gonna put in a couple parameters okay so again for JavaScript what should making a user take in right I can see a name and I could see a profile picture so I could write that name and uh we'll call it Avatar boom right so this is how you write it in JavaScript but now I'll show you in Rust it's a little bit different right if you guys are familiar with typescript this might make a little bit more sense so with rust you have to specify the type of the variable JavaScript it doesn't care what it is it'll figure it out later right rust it needs to know so name you want to put a colon here to define the type and then you can say space string so I'm basically saying uh this function init user is going to take in a parameter called name and it's going to be a string if it's not a string you should it's just it's a problem right so then Russ will say like hey this isn't a string that's the reason for typecasting okay so for Avatar right what should this be if you're not sure we could take a look at our vs code and we can go to dashboard where is a URL an image or an avatar is essentially with these quotes it's a string so we can actually say string here too cool so you might think we're done but there's one more thing that rust needs he needs to take in uh context something called or we'll say a CTX okay well what is the context right uh essentially is I look at context to my understanding is what information should init user have when it comes to um destruct and rust right so you might not that might not mean anything to you but that's okay all right so what is the type of struck it's not a string right it's going to be type context okay and you're gonna put these two things here and inside this right if you look at the docs will usually be t or something like that inside this you want to describe the struct or what that context is well uh usually the convention here is the context will be similar to the name of the function so I'm just going to be init user right so take in whatever context whatever init user means taking the name and taking the Avatar right there's the reason why we need context here is because there's some validation there you go so we need init User it's going to take in context name Avatar uh this this doesn't exist yet all right if we were to run this and say init user is undefined or I don't know what this is right so what you need to do is we're going to pause like put a pin on this pause it and let's create this init user context right so it's going to be pretty simple you want to go outside the scope of your program so I'm going to go to line 19 for me and let's define this struct so uh in Solana the most simplest way to do this what we're going to do is uh if we can create something called accounts right or a program derived account basically we're going to use our program to create accounts that hold information right so this might hold a user right so basically our smart contract created this and we can call this an account right this account will have its own public key right it'll have its own address on the blockchain and information that I put in right so in order to set that up uh we're gonna have to write these structs so I'm going to say hashtag and we'll say derive right this is why I'm going to say the word counts builtin macros that's going to make our life easier okay next we're going to say instruction here because this is an instruction right then we can say the pub struct and then we need to make sure it's the exact name of this right otherwise I won't know what you're talking about so this is init user right same spelling right it's good and then we need this again and we need to write info right again like for me when I was getting sauna it was so hard to understand info talked to a lot of different developers about this but the simplest way to my knowledge about how I can explain this is that info is what we call a lifetime variable right uh the way I'll explain it is in JavaScript if I say let array is equal to this right how long will this array exist in memory in JavaScript it's essentially going to exist Forever Until you don't use it and then something called uh the garbage collector in JavaScript will remove it right but otherwise it's just gonna stay there until you do something a lifetime variable tells us tells rust how long this will live four in the code and the reason why info is confusing is because info you can look at it as it'll live this will live as long as it needs to right yeah I know all right cool so all you need to know is that usually when we're going to make a struct we're going to add info to it all right we need to tell them how long this is going to live for you don't need to fully understand how how long I need to live for you just need to put input okay cool what is important though is within this two color brackets is the scope of the context and within that we're going to write another macro here it's going to be a count all right the cool thing about uh anchor is that we don't need to set up the account itself we can use this macro to initialize it or set it up so how do we initialize an account um it's really difficult guys just gotta write in it boom it's initialized right cool next thing what I have here is something called seeds right seeds is what's going to help us find the program address for our account right let's let's say we want to make a user account right it's going to be at like some sort of address like something like this right the address already exists we just need to get a place we need a place to put this user right at this address right so in order to verify or trace it back we're going to use a seed to generate that address right the closest thing I can relate to it's not exactly the same thing is let's go to something called dice bear right dice bear is you put a custom seed right and then you get a random Avatar so if I say cat right this is the Avatar it generates so the equivalent here is I put in a seed right we get uh instead of a picture or an avatar we get a public key or an address right it's not a new address it exists it's just a place we can put it all right so let's say my seed is a strand called user and let's get and usually we do our Authority or our public key so let's copy this and paste it right it's these two things together will make our public address so this is our public address or our our PDA right so yeah that's what we want to do for seats right and for the seeds itself right I'm just going to write user seed here this is a variable right there's if I were to run this it's going to say this is undefined cool don't worry about it yet now we're going to put a comma here right and say another C that this is going to take is Authority right who Authority is basically um who is in charge of this account and typically it will be though the person what wallet that you're connected with right so this is my CV right this is why I put this there TV right and to get that key and make it Dynamic you're going to say authority.key dot as ref and you don't need to know exactly what as ref does just know that it gets it basically formats the key to something that the seeds can read right this can read okay so we set that up let's set up this variable right where am I getting this variable from you could Define it at the top here there's nothing wrong with that I just want to show you guys an alternative and that's going to go into constants all right we can go into our constants right here and what we want to write is say use anchor Lang Prelude star all right and to make a constant we can say constant sorry like this and say Pub const right it says constant user seed right that's where I get the name and what's the type of this it's going to be and u8 uh just means unsigned integer right and it's going to be equal to a binary string called these right so this is a fancy way to put a string as a seed all right you'll see that when I test it right don't worry this doesn't make sense to you once we test this it will all make sense okay then we're going to do a constant here let's put another one since we're here we'll say Pub cons we're gonna need a post seed later on so to save time I'm gonna make it same thing and you ate all right because we need this in bites and bites of a boom so we have our constants all done all set up and now because of this we bring it to Global scope because if you super I can just write uh user seed well actually no it's because of this it's still Global I can still write user seed right here instead of doing a constant or something like that right so we have that seeds done another thing that we're going to need is something called bump right right so what bump is basically let's say I want to put this user at this address but well let's say there's something in there let's say there's a tweet in there right I can't put this there if there's a tweet so bump is going to go to the next available one right which is at a different interest which could be Asda Das and then different set of numbers right we could put the user data at that address right the equivalent on dice bear would be like this is my seeds oh wait there's already a picture there let's put a one in there this is our program address clearly different right cool so I hope that makes sense that's what bump is for and again if whenever we store something or puts even though it's our program creating this account we still need to pay so we can say the payer is equal to the authority and the authority you can just look at it as us or who owns it the next thing I need to do is space right how much space is whatever this is gonna take okay well to determine that right we need to figure out what the hell we're getting space for so before I Define how much space it is what I want to do is say what this macro is for and again do that underneath the macro so we say Pub user account right user account right so how much space does a user take I don't know either yet right we got to find out okay so I'm lying I do know but let's find out together so again what type is user account well user account is going to be a type of an account right this should be an account uh inside of it we're going to put info of course and put a comma here and put user account right so what kind of account uh what kind of type is user account it's going to be an account what kind of account is user account it's going to be something called user account does this exist yet I tell you no so if I run this it's going to say hey I get it yeah this should be an account that's cool but what the hell is a user account right that's what it's going to say so I'm gonna put a comment here and let's make another macro to set up the rest of it I'll say account mute and it'll say Pub Authority signer info right another thing is Pub system program is going to be program all right this signer uh attribute here is coming from somewhere else this program is coming from anchor link all right so we could just say info system boom all right so within this context we figure we give him we give this function knowledge about what the hell a user account is and Authority what are the authority is which is US who's ever signing the transactions and the system program which is going to be essentially this Okay cool so that's all said and done but uh we still need one more thing we need a user so let's go ahead and make that so remember the states file this is what we're going to do so similar that we did the constants right we can say use anchor Lang Lang Prelude star semicolon did I put a semicolon here sometimes I forget cool so we end that import now how do we Define an account right so we made a constant here how do we get an account well luckily there's also a macro for that so we can say account right and we're gonna knock another one we say derive default and we're good to go so let's define what the name of this account and we want to make sure that's the same name as this otherwise it'll still be undefined so we say Pub struct user account all right so you might not know what the hell is going on right but if you're coming from JavaScript let's say I want to make a user all right how would I make this user object right if you think back it's going to be name right and it's going to be uh Avatar this is the rust equivalent or the anchor equivalent right so how do we make a user object well we can say that a user account will always have a name and what's the type of that strap yeah cool what else should a user account have I think the cheat sheet is right here guys it's a pub Avatar string right cool and now do you got it this is the user account and you could leave it as is but I'm going to add more properties to a user account uh to make the rest of our functionality a lot simpler this is the way you can think about your code right the way I'm getting better and better at Solana I'm no expert yet is by constantly making these projects right it's not the projects that yourself that gets a job it is you practicing them and understand the concepts so once you figure out the pattern right you can use it for one so let's say I want to make a tweet account a Twitter account all right how would you make that all right same structure so for the authority I'll say I'm gonna have another property called Authority here and this is gonna accept the type of Pub key right because when I make a user I want to make sure that the public key of my wallet is associated with it all right that wallet has authority of this user and it should be different and dynamic another one that's going to be is a last post ID right because when I map through the posts I want to give it an ID I don't want any duplicate IDs out here so we can say u8 right if you're expecting a lot of posts you can do u16 u32 right depending on the size so I'll say you ate for Onsite integer comma there and uh we also want a total post count how many post accounts has gotten have in total just in case you want to use that somewhere you wait so again optional this last one but it's good to know okay so that is a user account I think that should be it um let's go ahead and build so a good way to test if this code is all valid is to build and if you get any warnings uh there's something wrong and usually I do because I forget a semicolon I might type something wrong or I might forget which I just remembered thanks for reminding me guys I never said how much space does this take right so there's some anchor documents out there that tells you how much space this could take and for Strings usually it's going to be four plus how long you think the string will be and I'll say 256 bytes or character that's equivalent to one character I think and then we can do four plus Avatar which is an image URL so which one thing would be longer a name or an avatar an avatar you got it guys you guys are geniuses right so what I'll do is this what I did before was figure out what's the longest URL we can put and this would be the longest URL 2048. for Pub Key this is going to be consistent it's usually 32. for u8 you can just say one and one right cool all right so this is how much space it takes you just add it all up and we get the number that we want and that's how much space we get right so for space I already I already did the math it's going to be 2302 312 bytes all right another thing that we need is something called an account discriminator when you're storing stuff in memory you want to separate the stuff that you put in memory so we do that by running plus eight here right and again I'm still learning what this means but I just know it's necessary so I'll do plus eight cool so now we have how much space I believe this should be good let's just run it build cool and there you go right I already forgot the semicolon up here let's go ahead and try again you super needs a semicolon course result oh okay okay all right cool I know what's going on now all right so that should be enough of the semicolon Fiasco but we didn't write any function we set up the structs and the context but I forgot we gotta write some logic here so let's quickly write some um logic so if I write CTX here right if you were to con to log this in JavaScript right this doesn't work in Rust but if I were to write this in JavaScript we should see all this information right that's the context all right uh if I wanted to get the information of a user I can say dot accounts or dot accounts dot do I want a Authority a program I want the user account user all right so this gives me this yeah so with that in mind let's uh organize it with variables so it's easier so we can say let user account is equal to and mute all right writing mute here means that this variable can change all right in JavaScript we can write let user is equal to Lance and then say user is equal to David right and that would just be just fine no errors but if I did this in Rust it'd say hey you didn't say this was mutable why are you changing it right so here I'm letting rest on hey uh this can change all right and it can be cat ctx.accounts dot user account all right just storing that in this variable and saying that hey this could change it doesn't have to be Lance all the time could be whatever user is made right cool so now we also want to set up uh this Authority variable of course we say and mute and say ctx.account and make sure it's accounts Dot Authority all right so it's kind of like an object with DOT notation Okay cool so now if I console log or say user account it's basically the same as this line right so if this gives me this how do I get the name all right how do I get the name if it's an object or it's like an object we can say dot name all right so now I got access to the name I can say here that the name will be Lance all right why is this bad if I just run this and you know put it into my blog app why would this be bad it would be bad because every user from now on will be called Lance and that would be so confusing right we want to make this Dynamic rights how to make this Dynamic well we can say is equal to name all right well where's this coming from ah now regular parameters right how we use them in JavaScript it's going to be the same cool with that logic it's going to be just like how we did it before so we can say user uh account dot Avatar is equal to Avatar right and then we have a user count dot last post ID it's equal to right we don't have it ID parameter but we do know that when I knit a user it should start at zero and when we first make a user the ID should be zero okay user account dot post count is equal to right how many total posts should they start with we can also say zero okay and who should be the authority of this all right do we have access to that we do and it's in this variable right we can say Authority right but I want their public key right like the CV right you can say get it by saying dot key it's a builtin method and I can say semicolon all right so now we have a complete function uh usually in JavaScript we have something like a return here the equivalent or the closest thing it's not the same thing is okay all right and if you wanted to return five you can put five here but we won't return anything so we'll just say Okay building build successful let's go cool and uh they're saying it's a this one when you ever see a warning that is your program will still run it's just letting you know like hey uh just so you know this should change but it'll still run so there's something with the post seat here and it's right it should be cap let's build one more time hey okay build successful right so now we can hit deploy and this is gonna cost some Solana so another thing I forgot to mention is with Solana playground there's this button here make sure you click it you might have figured this out at this point in tutorial but it's going to connect you to a playground wallet so this wallet is different than your Phantom it's a builtin IDE notice how the address is different make sure you have Solana here if you don't you could take this address and bring it to Solana Fawcett and do the same thing cool so this is the address of this playground wallet awesome uh let's go ahead and deploy cool so now it's going to deploy our smart contract right we wrote it right here and we're going to deploy it to the blockchain all right so if I were to erase all this you guys should know what this means now so we wrote Our smart contract we are deploying it to the blockchain as we speak with all the little code that we wrote in it awesome deployment successful and now it's on chain and we don't it's on the blockchain but we're not going to call it yet from our app right one thing I want to do first is now that it's deployed if you look at this test tube we can test our function right so we can see if we can actually initialize a user right so let's let's go ahead and do that let's say our name is Lancy all right let's make it fun Lancy and then the Avatar all right let's just use this we already have this uh we'll say um we'll copy this link here and we'll paste it and now again if you didn't understand a word I said maybe us testing it will help you understand right so best part you should you should know we're passing in Lancy has the name and the Avatar is going to be the string or it's the image but now you're going to see something called accounts here where is this coming from that's not an argument technically it is it's right here it's our context right our context is the accounts right so what accounts do we need well it looks like we need a user the authority and a system program so let's open this up we have a user account an authority and a system program all right if I were to ask you a question uh do we already have a user account no how can I tell if you scroll down you can see all the accounts that you set up which is really cool by the way shout out to Atron the guy who's behind beta Soul playground he taught me a lot about Solana and how this all works but once you set up an account you should see it here and you can click this fetch all button and you should be able to fetch all the accounts right and right now there shouldn't be any accounts or user accounts so they're going to see nothing okay cool and all I'm going to do is actually we can actually change this endpoints because sometimes we get an error let's do genesis go let's do a fetch all boom so now you should see empty array because there is no object right there's no account so if this does this exist just yet no how can we get it to exist or find a place to store my user account which is this little square right how do we find a place for it well we can get it from a seed right so what seeds do we need user C that's our first seed but you don't want to write uh user seed here that's the variable I want to go to constant and write the string so what's the string here let me user okay uh what's the other seed Authority key as ref right for me I didn't know this for a while but this is gonna be a Pub Key a public key and it's usually your key the one who made this all right so I can say add seed say Pub Key and copy your playground wallet right so that we can make a user based off your playground wallet hit generate and now this is the unique address where we can put our user if this was if this already had stuff at this address it'll go to the next available one cool so now for the authority we want to do is put my address which should be the same as this cool and if everything went well you're gonna test and it should work look at that init user pass I love seeing that I get really happy when that happens especially a first try which is awesome so if you guys got in on the first try give yourself a pat on the back right so how do we know it passed well what should happen after we emit a user if I fetch all we should have a user right when we fetch data from a database like let's say Firebase we can usually get it back as an object so what kind of object did we get we've got an object with a public key right this is the user account right you get this here six seven y six seven y then we have another property called account which holds an object which holds our user information there's Lancey my avatar The Authority which is the same as my wallet the last post ID and post count so when I create a post what should happen to these two should increase right should be one let's keep that in mind for the next function but other than that that's how you make a function all right so take what you learned from this and let's put it to the test with our second to last or actually our last function all right all right so on to the next function so let's go ahead and move to here and to create a function it's going to be the same kind of pattern guys so how do we make a function we can say Pub have fun we can say the name which will just be create post here is going to be the parameters we just know it takes an error result and you write it like this and here we go this is the scope of the function right now we can write what parameters it takes in and as you know with rust it will usually take a context right what kind of type does this expect it's going to be context and it's going to be create post and as you know create post doesn't exist yet so what else does a post take in as a parameter to think takes in a title and it takes in content right but we also need type so if we need type it's going to be string content also going to be string okay from there right oh how's that from there we can say uh the logic goes in here but let's pause this and let's make create post so I'm going to scroll down and to make create post if you ever get lost we can look at this as a template of how to make this struct right like I said it's important that you understand the patterns because it'll make this a lot more easier and simple to understand okay cool so to get started we'll take our macro to make an account we'll say to arrive counts we also want to use instruction here and then we could say Pub struct right name of the context which is just create post to create post oops say info then from here we can do hashtag account right so how do we make an account remember uh anchor does it for us when I write init we're initialize an account at this point you might be asking what account are we making Lance well we have so far a user account we also need to make what I'll call a post account so we could say Pub post count all right say account you can say info oops comma here we can say post account right and if I ask you does this exist just yet nope we're gonna make it soon right so just keep that in mind let's add a comma here and let's make the rest of these parameters so we also want to put in seeds for this so if you remember in our constants we have a postseed right here okay post seed we're going to say post seed all right we also want to put in our Authority dot key oops dot key but kamaki dot key dot as ref right and the issue with this seat is that every time I make a post it's going to generate the same image or the same uh address right we don't want the same address over and over so we got to make it unique so how will we differentiate that let's add another seed that's what we can do and for this we're gonna use um if you go to States here we're going to use the last post ID that number as part of the seed so what that would look like is if I were to say um the custom seat is post right that's the string it takes in our Authority or our wall address and then it takes in a number of the last IDs so if the last post ID was three this is the unique um profile picture or the unique address or the public key right what if it was four five six seven see how it's a different one every time all right we can you know replicate that with our code here by putting last post ID as part of the seeds so I'll put a comma and we're going to put it in a format that this likes right you can't just write the user account last post ID I'm going to say end user account I'm not going to go too in depth of this because again uh it's not necessary just know that you need it in this format as the eight dot as ref Okay cool so with this the format should be good and user account that last post ID as you ate cool and that's the seeds right and doesn't need anything else oh yeah we need bump right you guys remember what bump does that address has stuff already it's not available to us we can just say bump go to the next one say pair is equal to Authority okay and then for space you can set that equal to how much space does a post account take I don't know let's find out cool so pausing that again I know we're pausing a lot of stuff and coming back to it so keep just keep track of everything all right but we'll Circle back all right so we want to make um the post account state so we could say a pub struct post account right and another thing I want to mention is that you don't have to name this user account you could just say users you could just name this post right I'm just using this naming naming convention to kind of help you guys understand uh what has happened right so this is essentially this post account just represents each post so each post account is a post right so I can say Pub all right what properties does a post account need and ID you wait okay all right I'll save you some time it's gonna take in the title it's going to take in content it's going to take in a user and this user will be Pub Key and this Pub Key isn't going to be our wallet address it's going to be the pub key of the user account right so if you remember uh where there's Lana playground oh this is our playground oops if we fetch a user real quick this is the address of the user account where that data lives right that is also going to be stored in this post account right here so this six seven it's gonna go here when I make a post that way we can identify what user made that post right cool then we also need the authority which is going to be different than the user right it's going to be the pub key of your wallet so that would be our 6D here all right because this wallet should sign whatever we want to do with this post if you want to delete this post later right that address should be able to do it right now my friend David shouldn't be able to delete my post because he doesn't have the authority Okay cool so what we know here is that this is 32 right this is 32. uh content right content can be really long right especially if it's a Blog so again um we'll just make it really long string so we can do that for title it should be 256 as well it could be just like that and this is going to be one cool so if we add that all together you can go back to lib we can write the space now and I already did the math it's going to be two three seven six I believe plus what guys let's see this count discriminator it's going to be eight you got it cool that said right the payer is us is how much space it takes and we're good to go all right another thing that we need to know right we need to get access to the user publicly like how does my post know what this is right well we can give it some context right ah all right so how do we get the context of a user account right we can just say account all right we can say mute right because this user account could be different it could be me making a post it can be David making a post or it doesn't have to be just one person uh the seats right we can find the exact user account by passing in the same seats right if I want to get my user account I would pass in that string users the user string and my wallet address but again we can make a dynamic because if I passed in David's user address or wall address we get a completely different seat we'll get his PDA right so boom just in case and another thing is we can write this as one has one Authority and it's gonna be us cool as you can say Pub user account say account take some info and a user account up here okay another thing we need is the authority and the system program and usually when you make this it's exactly the same as before so go ahead go to line 45 48 for me and you can just copy that you can write it out it's going to be exactly the same no matter what cool that's the shock for create post we have our constant we use it we have our state that we just created and now let's make the logic so let's walk through the logic of creating a post right we need to uh initialize the post I mean what else we need to do we need to increment the post total and the ID set properties okay let's do that then so to do that it's going to be very similar to how we initialize the user here let's make a variable say let post account and how do we get the post account information from this context right well we first we need the context then we need to go to the accounts and now we have access to post account user account Authority and System Program which one do we need we need dot post account I believe yep dot post account semicolon okay now with that logic how do we get a user account ctx.accounts.user simple enough cool last thing we need and we don't have to do this but you know again just for consistency uh and ctx.accounts.authority boom cool so what are the properties that we need to initialize we need the ID title content user Authority and that order so if we do Post account right we have this object how do we get the ID right we do Post account dot ID and what do we want to set it equal to right if we set this is equal to zero every post will have an ID of zero and that's not good right it should be right the last user ID right so this first one based on that it should be zero after we make a post it should be one two three right so how do we get access to this user account from here luckily we set that up with this variable and us doing this this user account we have the context right that's why it's important so if you have the context we could say that user account variable dot last post ID right so there you go that was the power of the hardest one right so then we could do a post account dot title is equal to our per our argument title post account dot content equal to content and then we also want the user who made it right so user we need access to the user account again which we do we can say user account and if you look at the object right we don't need to dot account right we can just say uh user account dot key and parentheses to get this public key make sense right us doing that key is getting this putting it here cool okay semicolon and then last but not least post account that Authority is equal to Authority dot key that's how we get our wallets public key and we're not done yet remember we need to increment the post total and the ID right so there's an easy way to do this or you can just do the math yourself or we can do it last post ID is equal to user count dot last post ID right I'm gonna do a DOT I'll build a method here checked add right and because of the semicolons uh it can format it like this that oops dot checked add one then dot unwrap cool and remember don't put a semicolon here or else you're splitting this dot on wrap right you want to put it right here so basically uh it's going to increase post ID buy one or if you wanted to increase it by two you put two right so it's just a builtin method that would take this number which is zero add one and unwrap it to a format that Russ likes okay so that's not it though we also need to do the total right increment that by saying that post count is equal to user account dot post count dot checked oops checked add one dot unwrap cool all right so we incremented two things the last post ID the post count right which will make this seed validation more Dynamic right we're not going to get the same seed we don't have to rely on bump all the time right and last but not least we can say okay that's it awesome and that's it that's creating a post guys all right this should be I hope this is very easy to follow right let me know down below alright drop a like comment down below like thank you Lance right and again if you we're gonna be harder and harder ones than this right we can look at Airbnb we can look at the todo app which is just slightly this harder than this all right let's go ahead and build and see if there's any errors hey cool post account instruction I spelled that wrong struck that happens to me a lot okay trait not satisfied okay oh that's right have to put the accounting I have to tell them hey this is an account oops this is going to use the account macro and we need to derive the default and this should be a lot better cool all right different errors I can live with this uh cannot borrow as multiple I think I know why already Yep this is why we need the and mute perfect example of that and mute there we go build successful right cool so I will just refresh this so you don't see the errors you could see that if I build now boom build successful so all I did was make sure in your states you have this account and derive default otherwise it's not going to be satisfied with just this next in your create post make sure this is mutable otherwise it's going to be like hey you can't change you can't change what's in there cool another cool thing about Solana is that usually with solidity once you deploy to the blockchain you can't really add more code onto there right with solidity at least I don't know if it changed since I've recorded this video but the cool thing about Solana is uh you can take your copy of the smart contract right make a new lines new structs everything like that and deploy all of that together right you can update your contract with this new stuff okay that's the cool part about this all right that's why it says upgrade here instead of deploy so let's upgrade right now that we know that this is stable and you know and successful and then let's test it and we should be good to go okay it's almost done bam deployment successful right if we look at our tests now create post is there and post account is there as well right we can do a fetch all there is one user Lancy all right and then there's a post account no post right that makes sense we haven't created a post yet so let's create a post and again let's break it down right it takes in two arguments title and content right we can say uh welcome to my blog all right content this is my first post right what is what else do we need is this it we need to provide the context so when we go to accounts all right we need to put information for all of these right so I'm not going to start with post account let's start with authority right who has authority of this post me my address this wallet does right assistant programs there by default right user account we need to put this do we need to make a new user account associated with this post let's see is this initializing a new one nope we're reusing one based off the seed right so basically I'm saying is we want to use this six seven y right so what you can do is just copy that put it here right or you can get it from seed again put in user put in your Authority and you should still get the same number right six seven y cool but now for the Post account from seed all right this doesn't exist yet we want to find a place to put our post data right so for the seeds it's all right here the answers are in front of us we want to say post because I believe that's the string I wrote yep post you want to put the pub key which is our key and to make this a unique uh PDA we need to add a u8 here right how do I know it's u8 because I said as you wait and it should be a number of the last IDs what was the last ID of this zero so I'm putting zero if we already had a post if this is our second post it should be one all right but it's zero so let's generate that this is the will be the public key where that post information will live let's hit test hopefully it passed let's go create post past right how do we know let's fetch this and Bam this is our post right there we go right welcome to my blog this is my first post now that said this is it this is our Solana program guys all we need to do now right is like let's say we made our account we also made a couple posts right all we need to do now is use our endpoint to call these functions right to create more posts right and then we will use our endpoint right to get the program and get fetch all the posts Associated right all the users all the posts Associated to our app right and that is what the final part is so let's go ahead and figure out how to do that cool so with that out of the way I'm super proud of you guys let's go ahead and clean up some things here and let's say you guys want to make a brand new program right you don't want to use these users he wants to start fresh right we can do that all right so to show you guys how to do that right we're going to go to this toolbar the build and deploy section and go into program credentials and let's say you want to use a different smart contract right but you want the same logic all right you just don't want you just don't want you want to start fresh you don't want any of these accounts uh we didn't set anything to delete them or to close these accounts so what we could do is we could say new right this is our program address right now our program ID if I hit new here right if you don't save this it'll be lost forever I'll you'll forget what this program ID was I don't care just hit generate and this is our new program ID so when I hit build this is going to change boom everything stayed the same but this changed why is that significant because now this program has no uh accounts associated with it so now it's kind of like we started fresh right and it's not deployed so let's deploy it let's put this smart contract on the blockchain all right so deployment successful right we put our new smart contract with its new address on blockchain and now I can prove it to you let's see if lancey's still there he's gone and any post he's gone all right and that's okay why is that okay because now we're gonna make a user Make a post from our very own app so get excited for that let's get it set up so one of the first things I want you guys to do is head over here go to your IDL and hit export right when you hit export and if you're using Chrome you should see an idl.json in your download so go ahead and go to search for this idl.json in your downloads could double click it and it should open it up in vs code so I'm just gonna make this bigger if I do a save here oops cool so take a look at this basically it's a Json file right that represents our Solana program right the instructions this is our init user function create post function right has all our accounts all right all the information we need right we need this IDL and need to put it in our front end right so go ahead and press Ctrl a uh you can press copy or if you want to be really sure press cut right control X and go over to your ideal.json so this idl.json right here is different it's the same thing this is the demo idea all right and the only difference between the one you just copied and this one is that it has metadata address alright so we want to copy that let's go ahead and paste it underneath this Json right and what we could do just to keep the same formatting right this is important you don't need to have metadata address on there but the way we're grabbing the address uh is through this file so I'm gonna oops I'm gonna copy this even up to the comma and I'm going to bring it all the way down here and what we'll do next is let's erase the old one all right cool let's hit save and and X Out the downloads version I'll hit don't save just in case you need to get it back later cool so let's just go over this right this is essentially right our new IDL with the old address of the demo smart contract right so what we need to change is this right here this shouldn't be FB all right this should be CSX so let's copy that and paste it here so now we're using the updated IDL with the correct uh metadata address let's hit save and that very first step is done right the next thing that you're going to need to do is head over to your contacts and head over to blog.jsx this is what's important here um we need to understand how context works okay cool so to give you a visual of how context Works let's go back into our program and let's move to our app here are we going to erase this to avoid confusion but let's say this is our app right and usually with react right when you make a variable let's say a user right this holds Lancy or my user information you created an app and you can pass it down as a prop to dashboard so then dashboard knows what user is if you don't pass it as a prop if you say user in here it's going to be like what the hell is user Lance you didn't tell me all right so that's why you need to pass it down as props right in react let's say we had like multiple components right on uh as a child if I were to bring if I need to bring user all the way down to this bottom component you have to go like prop pass down as a prop pass down as a prop promise not a prop and that could lead to issues way down the line this is what's known as prop drilling right so there's solutions to this actually so the solutions is using something called Redux or uh creating context right and context is essentially think of it like a little store or a bubble right we call that contextblog.jsx and I can create the user here right or in other words I can fetch a user in my contacts right and the cool thing about using context is that I don't need to pass it down as a prep I could still but I could call it from whatever I want right I just have to bring that context into here right so that's what's the beauty of context so let's work on our blog context okay so what do we have so far all right if you didn't know how to create context this is how you do it use the react hook and then you just need to make a provider for that context remember the wild provider I reset it here and let's say now let's say you want to make a variable or a function right remember that visual I just did like this would be the code equivalent let's say Lance all right cool or let's just make this even more weird so you understand dog right cons User it's a dog right and better yet let's make this an object and we can say name is uh dog right Avatar all right it's not a dog but we can get it from and splash so let's go here I'm gonna quickly get an image of the dog you don't have to do this step it's a dog this pug is perfect actually let's use this one copy image address go to our code and say that the Avatar is this very long string and let's say I want to use this static user right anything that I want to bring outside of our context put it inside here in line 24 this value right here so I'll say user okay and let's say I want to bring this user into my app right well not app sorry our dashboard right all you need to do is use blog right so you can go down below here you can say import use blog from your contacts and then say const curly brackets to destructure equal to use block right and then from here you say what you want right let's say I had like five things in here but I only wanted user you can just say give me just the user here and then from there let's erase this right we did erasing our static user data and saying static user from the blog all right let's see if it worked look at that it's dog now right so now my little drawing right that's the application right we got user and we're putting it into dashboard static this is still static we still need to make it fetchable okay cool so now we have static user from the blog context but that's the gist of it we're going to be building out this blog context with right we need the functions from the Solana smart contract and we need to fetch all the accounts so that's the goal with this context okay so I'm gonna head over to our blog.jsx and this is where the majority of the code is going to be written um everything on dashboard.js is preset up for you we just need to write the logic right and if you're interested in learning more react stuff and next.js stuff right leave a comment down below I could I'll be happy to go over that with you the focus again is just the web 3 Salon code okay that's it let's keep it going so we are in back at the blog context right uh one of the first things I like to do is let's get our program key right and my program key I mean our address right so uh what I mean by that if you go to let's see our app go to our program we need this address right because this is we need to first use our endpoint uh and then get this program which will then help us get everything else right and I could just hard code this in here but I hardcoded it in our RDL so let's do do that okay so to do that the first thing I'm going to do is get some imports one of the Imports that I'm going to get here is Star as anchor from hold on second from quotes project or sorry at project at project serum anchor there you go that's what we want and basically it'll get everything from anchor and call it anchor okay first thing uh the next thing is let's import another hook here custom hook and say use anchor wallet from slana wall adapter and there's a couple of things that we're going to need here it's going to be use connection and use the wallet amazing okay next we need import public key all right and then you also need System Program right again don't worry about all these Imports yeah they're going to come into play as we go okay um and there's a couple functions that we need to make so again this was given to you guys but if you go into this functions folder you're going to see something called uh get random name right this is a function that we set up for you guys right this is getting a library called name generator to give us a random name right you could set this up to give uh your self name like make a input field like a modal and put in your name and sign up right here we'll just get you a random name and we'll get you a random Avatar using these functions okay my challenge for you guys if this is making sense to you guys is make it so that you put an input field and then you can sign up a unique user otherwise I'm just gonna get a random user to save some time okay so to get that information we could say import uh get Avatar URL from this path right cool you also need to get random names so let's get a random name I'm just importing everything we need random name sorry spelled it yep from sorry C functions get a random name perfect cool so we have the random name uh what another thing we're going to need we're going to need to import the IDL right so remember the ideal we set up right here we need to bring that in we can say uh import IDL from oops source slash I believe it's just ideal.json perfect and to fetch the program addresses or the pdas we can say import find a program address sync from Project CM anchor right and then we want to import uh utf8 this is for formatting purposes later on and with that uh we should be good to for now we might need some react hooks later on but we'll import those when we need it blog context that's fine let's go ahead and get program key all right so to get program key let's make a variable let's make cell caps program key is equal to uh IDL right and remember in our IDL how do we get this we say dot metadata dot address right and what type would this give us string exactly right because this is a string duh right but we need this as a public key right so we're going to use this import public key and we'll say new public key parentheses right this is going to generate a public key based off this address that's all we're doing here amazing cool so we have our public key right we are using blog right returning contacts cool right they're basically taking our our context putting it in a hook and then using a hook and dashboard that's why it says use block okay cool so in let's see in our blog provider right still have static dog we can leave that for now until we get an actual user but underneath this I'm trying to think let's set up uh our anchor wallet right here so we're going to make use of this use anchor wallet right here and underneath the user I'm going to say const anchor wallet is equal to the hook use anchor wallet which we're going to use and place this somewhere else later on all right this is one of our parameters for something okay so we need a wallet we're using anchors default wallet we'll say const connection all right I'm destruction connection from use connection all right I'm gonna get a connection oops not from I keep saying from should be equals but this is from use connection and we also need to say const public key all right public key oops not the Capital One we need the lowercase one and set this equal to use wallets all right so this this one specifically I don't know why I'm putting semicolons it's because of rust but you just use wallet Hook is going to get us publicly and if I were to console log it uh it should tell me the public key.2 string all right let's see what this is all right anytime you want to see what this all means I just console log it that's how I usually go about it and see if we can see it from here oh what can I have any properties from now okay so I didn't like that let's just try without the two string first no okay yeah so it's not right now so you can't tell no to string but if I connect now I'll enter my password of course should have a wallet now okay that was weird I'm just fresh a couple times but uh I had to log into my wallet and we're good to go anyways as I was saying uh back to blog.js we console log the public key inspect element let's see if it's no there we go right so notice how it's not null anymore it's an actual public key but if I were to do that to string now there you go CVR right CVR right so that tells me that this public key right this usable hook always knows what while it's connected and it'll tell me the public key of that wallet connected when I say public key okay connection is our connection whether that's devnet or n or quick note and uh while we're using it's an anchor wallet so we're going to be using this for something in just a second next we can say const program right is equal to use and we don't have this hook but we need to get use memo it's going to say uh I'm actually going to form it like this because you might need a couple different things from react so let's do comma and say use memo okay so program use memo takes in an empty function cool and what we want to do with this is if anchor wallet exists right we want to say that the provider is equal to new anchor dot anchor provider all right we have to pass in um the connection right are we set up up here we need to pass in the anchor wallet we need to pass in anchor itself and you can say anchor dot anchor provider dot default options you don't need to fully understand this just yet you just need to set it up cool so that's our provider right we want to return from this uh new anchor dot program right which will have our IDL our program key and our provider that we just set up cool and we're going to run this uh when the connection changes or for whatever reason the anchor wallet changes okay so when I say program when I console log this it should give me something console up program here and see if we can there we go so we got our actual program so if you open this up we can see all the accounts right we can see the instructions all right this program has create post the net user all right what accounts does this program have has a post account and a user account so when I say program dot account right look at that we see all the accounts associated with it so that's how you get the program I thought it was all the setup for this when you say when I say lowercase program I mean the program and all its information you with me cool all right so we got the program the next thing I want to do is set up a use effect right so I don't believe I have a use effect hook set up yet so let's import use effect it's not like that cool and if you don't know what use effect is essentially it's a react hook right that's gonna set up things when our component uh first loads when that component updates when that component gets removed so basically what do you want to do when your component or your app loads all right so when what I want to do is set an empty function here and let's just say uh cons start let's make a function I'll make this asynchronous because we're gonna need to do that later let's say I wanna whenever my app loads we have to run the start function and say uh starting pack and fetching data right that's what our start function is doing I can say uh start this and then we can put an empty right here because this is going to make it only run when it first loads once cool so what we should see starting app and fetching data all right so that's essentially what we're doing here right I'm setting up my app so what do we want this start function to do really all right it's is to check if there is a user right if there is a user get or fetch posts if no user what do we want to do all right set state to false and say to false right if no user sets date to false and we need a button and need a button to emit use all right we don't have to set up the button in here but we just need to check if there's a user that's what this is going to do if this user got all the posts if there's no user just keep the state as false so that's what I want to do to start you with me cool so uh how do we get started with this then right well the first thing I want to do is if if there's a program right because uh if this if this doesn't exist there's no point right we can't get the accounts right you saw me do program.account so we need to make sure this exists and we also when I say and both things have to be true so we also need a public key so what I'm setting up here is a check that says hey if there is a program and if my wallet is connected right it's essentially what this check is doing then we can write that logic here oops which is check if there's a user all right so how do we check if there's a user let's set up a try catch block okay cool so we're gonna try if something works if it doesn't if we tried a promise and if that promise doesn't work right it's going to catch it and it's gonna console.log the error okay so what do we want to try well we want to try to see if there's a user check if there is a user account all right so let's do all this the way I like to write this is think about what do we know and you do this with every single coding problem this is Problem Solver here check if there's a user account I go back to my Solana playground go to my testing with this current program that we're all using in my front end now is there a user account no there is not I fetched it there's no user account is there a user account with this wall address that I made no hasn't been made all right so what do we know that there is no user right but we can check if there's a user right by um checking if it exists right on the blockchain how do we do that well let me show you it's going to involve this find program address so we're going to find if that address exists and if it has information we need okay check if the account exists we need five program address so to do so we can say oh wait uh find program address sync right and the cool thing is that you do is put seeds here right so basically if I want to find a user account right I just need to get the seeds of it right and what seeds does a user account take so I use this as my cheats as my guide it takes in a user seed or a string of user and that Authority right so check so how do I get this string and how do I get this my Authority or my check if there's a user with my public key all right so this is the fun part let's see if we can put it together so what we need to do is go into here make sure this is an array right and one of the first seeds is utf8 dot encode all right this is the uh import from here utf8 dot encode the string user that's like me going in the test and writing user all right how many seats does a user account need two second one is my wallet address think back what did I say holds my wallet address aha public key yes but we need it in a format that the seeds like right so we need to use a builtin method here called to buffer amazing cool and uh after you put the seeds it does take in a program ID so we can get this by saying program right this is the all the informational program dot program ID okay so this is gonna basically it's async right which lets us do in weight so basically weight for this function to run and when it's done you can do the next thing right another thing you want to do here is do some destructuring because this will give back an array and from that array right we want to get a variable I'm going to call that variable user PDA right this would get us the address right but we need to get take that address and fetch the account with that address get the information at this PDA all right so how do we do that well the next thing we need to do after waiting for that is await program all right we're getting information over program dot account right so what accounts do we have user account right Dot and this is a builtin method I don't expect you to know this one but you can see fetch fetch fetch fetch fetch right fetch user PDA basically get me all the user accounts with this address and how many should that be it should be one right cool so we want to set this to a variable right because I don't want to say this every time I want to do that const use it so let's say there is no user here right we can just say console log instead of the error all right we'll say no user so it's easier to read that's the only reason I'm doing this if there is a user though right then we can get the posts right but at the moment we know there's no user so let's see what do you think is going to run this console log no user or this uh this fetching user no user right so we have no user okay so if we have no user then it should just be blank right okay so now the first part of our use effect is done right and we can now change this data right we don't need the static user anymore all right let's make a state all right so let's go up here let's say use State comma and then we can write that all within the provider we can say const user or actually make it like this const use it set user is equal to use State and the initial state of a user um it should be like an empty object okay and I know to see this Google because it's already user here so let's erase that and this will still work because this is called user and this user right here is still here okay cool so let's see what happens now now we don't have an image or a name right and if you were to write down this logic right if there's no user we should be able to create one so that means we need a button here to initialize user okay keep that in mind and how do we keep track if something's initialized well what we can do is make another state we can say const initialized is an inset initialized right that's equal to use State as well and the default state for initialize is false okay cool so let's work with this logic okay so at this point uh in my code should the user be initialized should it be true no is it true yet no is it true yet no if it's here right this should still be false and you don't have to write this unnecessary but let's just put it here for safety set initialized is false when should it be true well it should be true if there's a user or if this exists right technically uh this should be empty yep doesn't break still so it's empty so if there is a user from here and it didn't go to the catch right then we can set initialized right to true you with me so far cool all right so now let's make a button that shows up when initialized is false it should say initialize user all right and then if it's true create a post right you'll only create a post if there's a user so which buttons do we have we have create post but we don't have initialize a user so how do we get that let's refer back to our drawing we need to go to the dashboard that's where that button lives you with me cool all right so we're going to the dashboard let's make a new button so basically there's something called conditional rendering here if we're connected right show me the create post button if we're not connected we see that connect button right I showed this way back at the beginning of the video okay what I want to happen next is a conditional rendering for this right so basically if there's no uh let's do it like this all right so to start conditional rendering you need to make put this in a jsx right put this in color brackets I mean and we'll take everything in here so we can say mix this out boom so I just erased that for a second and yeah we could put that there cool so let's just say initialized is our condition if initialized is true right we can load this this colon right here is if it's false right so if it's true we want to show the image and if it's false we need a button here I'm going to copy this uh button here for connecting let's do the let's just copy this button and let's go here paste uh on click essential model true that's fine but we want to say initialize user okay so that means we can take this and put it up here cool so basically I move the image out of there hold on so basically I move the image out of the condition right so if initialize is true create post if initialize is false initialize user and right now it doesn't actually initialize the user but let's see if it works oh it's going to tell me initialize is false so we haven't brought it in yet but let's make a static version let's say initialize right here initialized is true so which one should we see if it's true you see creates post what if it's false we see initialize users that's good right so now we don't need the static one we can get the dynamic one all right so how do we bring the initialize to our dashboard you can just say initialized right here oh don't forget the comma and go to your dashboard go to the use blog and say initialized so now we'll see initialize the user and it's not going to work because I didn't make the function for it okay cool awesome so this is basically conditional rendering inside conditional rendering right awesome so this will pop up this will be filled once we fetch the user and we initialized it okay so all right so we set up our use effect but it's not done right we haven't got all the posts yet right but I'm gonna just stop that because we should make the rest of the logic of initializing a user right that shouldn't be in our start function it can be right you can't make it like uh right when you load the app you can say Hey you have to make a user sign up all right but let's give our users a little bit more choice right and we kind of set it up so that when I click initialize user that's when we run this init user function right so let's learn how to make that function on the front end okay so underneath my use effect right we can say const init user right this is not different from the front end the Solana smart contract function this is a frontend function I'll show you the part where we use the salon code Okay cool so make a standard function like so make it asynchronous and again I have my standard checks here all right I can't uh it's kind of like over engineering but I shouldn't be able to initialize a user if there's no program and my wallet isn't connected you won't even see the button if the wall is not connected but again just an extra check cool so if there's a program if there's public key let's get to the logic we can set up a try catch okay because we're dealing with promises here okay and a console.log pair Perfect all right so when we initialize a user what do we want to try well we want to try calling the Solana smart contract function all right so how do we do that okay so the first thing that we're going to need is all the parameters right so what are the parameters if you want us on a playground go to init user the first thing it's going to need it's a name and an author an author a avatar and then we need the account so let's deal with name and Avatar first okay so to get name and Avatar we can just say const name is equal to get random name and where the hell did this function come from I'm importing it from a folder right so what's function do it gets us around it returns a random name I'm storing it in this variable okay let's go to Avatar const Avatar is equal to get Avatar URL it's going to get me a random Avatar cool so those are our two parameters right well now we have the arguments we need our accounts now all right so we need a user account and an authority and again when we were testing right this is where all the understanding comes in this is that user account exist yet it does not so we need to get it from the seat right so essentially we're going to do the same thing here we can actually copy and paste this whole thing this constant user PDA thing it's the same thing we need to find if there is an address there if there's not we'll use that address that's the goal right so the first time where you're writing this line we're checking if it's there the second time where you like this time we're using it to put information here and run our function okay so we're going to use our PDA like so and then we can say oh wait program all right so remember what is program it is the variable that holds all the information about my program right how do we call the instructions or the functions within that program you say dot methods right and again we can chain this by saying dot within that method so you got to say what methods you want to use well I want to be knit a user okay only init user we need to pass in the actual arguments so if you remember its name Avatar right and then another comma here actually I need to come here what you can do is uh after this line at the end of it hit enter again and do dot accounts the starter counts this is the context right the context that you're going to pass in so I'm going to put curly brackets there and let's write what we need we need a user account and Authority so you need to write that exactly and say user account and then you want to say Authority cool but what is the user account do we have the PDA like are we using our seeds we do we did it right here and we store it in this variable so we can say the user account is user PDA all right this this part right here or this part right here specifically is the same as me doing from seed user and then doing Pub Key like so all right generate this three I UL that's basically what user PDA is and I'm putting it in as user account for Authority it's actually pretty simple you can say public key and that's it because it's already a public key and last but not least System Program uh make sure it's lowercase with the capital p and you can just write System Program dot program ID right and we're getting this from our import System Program right here Solano web 3. cool so we did it we passed in all the accounts right and uh last but not least though last chained method is dot RPC if there's a user are we initialized now yes so we can use our U State here say set initialized to True which will then in turn um update our react app so that this initial is true we usually create posts instead of initialize users so it's all coming together I hope it's making sense the thing I like to do is make another state and say const uh Trend section pending all right we need a state for this it's basically a loading State set transaction pending okay and default is false right same reason we use this it's another flag right basically uh when I knit a user we should set transaction pending to True right and when it's all done after this cap you can actually add a finally and say set transaction pending to false right it's done loading okay and while we're at it we can set that up in our use effect as well you can say uh oh I already said it oh I put it in our use effect well that's perfect we need to do that anyways we also want to do it here uh try set transaction pending true and and add a finally to our net user one set transaction pending false cool all right I think that's it yep I mean that user and now let's bring it out of our context by doing this go to our dashboard okay we're at a dashboard and now we can get it from our use blog knit user and where do we want to use this function well that should be pretty obvious we should use it here when I say init user I don't have to pass anything in because it gets passed in inside this function cool so now let's save now let's hope it all works so again for good luck let's restart the process we're connected there is no user because our use effect so it's building initialize user I click this and not illegal arguments undefined all right let's take a look on click we want to init a user so let's try let's make it empty first let's see if this just runs so save and let's just say it's a log initializing user this is how I troubleshoot stuff initialize and use it okay cool so this function is running for sure what point does it doesn't like so let's take out this console log the use our PDA legal arguments undefined so that tells me that there's something wrong with this right here okay let's take a look okay so I was doing some troubleshooting and I realized that it's nothing to do with this this is perfectly fine my issue was that before this didn't have anything right when we generate a random name I want to get an avatar based on that name so once we put name here you can see all of my testing right we could do initialize user and Bam we actually see on a transaction right but this doesn't enough to make sure that it works oh we have to go to console right and you know what let's refresh it and let's uh click approve actually let's cancel this first and let's click initialize user all right this is a good sign but it doesn't mean it's done is it approve awesome okay I wasn't sure if that worked but let's see if there's a user account generated here there was stoic Pastor that is amazing so it did work right I'm not sure why it's not working here yet oh I know why all right so it did work but the reason it didn't show up is because our use effect right so now we do have a user all right so if I correct it's correct here this should say great post for some reason it's not unless it's still static let's see dashboard initialized initialized in our blog set initialized initialize Ed well I spelled that wrong completely put the a in the wrong spot that's what's going on here oh yeah because my use effect I know why Okay cool so the reason why we don't see A change is because my use effect is only running once why is it only running once because you can make your use effect only around one time when you load the app that's it right if I put this what we call a dependency module there right let's say you don't want it to run once you want to run once when you first load but again when program changes when the public key changes or when there's a transaction pending so it said save now see cool and now this isn't actually running and see a transaction pending to true if there's a user set initialized ah there we go cool and then I had to make the spelling correct so there if this if this is true if we see create post that means there is a user right but there's no user yet because we need to set that right so again uh user is empty but we can set the user here it's a set User it's equal to user you can hit save and Bam there it is stoic pasture right so we were successfully able to create a user and now we need to create the post so the next thing I want to do is set up the create post functionality right so there's a couple things that we need to do to set that up and one of them we'll need to look at our dashboard and look at our static data right there's something called a show model here that when I create when I click create posts this flag should turn to True right so we have static uh data here let's make them real so to make them real I'm going to go here say const uh show modal and set show modal and say equals uh use State and we'll set that equal to false first right from here we can just bring it in show model set show model right and once that's here we can delete this don't save yet though all right and we want to be able to bring it from here so we can say uh show model set show mode perfect so now we shouldn't see any errors if I click this boom look at that all right we can see it perfectly like so great post boom X all right again this was the modal itself is given to you we just set up the functionality right what I want to happen is for us to write something and I hit post all right if I click post it doesn't actually make a post on Solana all right nothing we want to set up the same way we initialize user let's set up how to create a post now Okay so same thing as before we're going to scroll down to our blog.jsx and underneath init user we can go ahead and make another function so just like before we'll give it the same name create post equals async okay uh we'll do our standard check here again optional and oops and public key right there's multiple ways to do one thing you'll realize that as you code more and more so if you have a better way that's more efficient than mine please share it down below in the comments and I'm happy to hear it so cool if there is a program we can set transaction pending to True right for our state and then we can do a try catch at any point our try fails it will catch that error and we can console log better cool so what do we want to try we want to try calling our Solana function right so let's review what do we need well if I want to create a post right for my arguments I'm going to need a title and content and I'm also going to need post account user account Authority and System Program so let's talk about the arguments first so unlike init user where we got the arguments from within the front end function right here we're actually going to pass them straight up so we can just say title oops title and content here okay now to get the arguments now I mean the accounts let's open that up does user account exist yes it does we're going to be using this user account right the user account with my wallet address CVR okay so that exists does the Post account exist not yet right we want to write to that address does Authority exist yes it does all right so how do I get the user right so I'm copy and pasting this but it's literally the same thing right you can put this right here right so This Is Us fetching the user all right find programmers are just sync get that user right and it will exist and the ad account will exist at that address right because we made it before the only time we call this function is if it does exist right the next thing that we need which I won't copy paste is the post PDA and guess what to get the post PDA just like in our test we're going to get it from our seed and what seed does it need post seed or authority and the losers last post ID okay so do we have all those information let's find out so we say find program address sync all right here comma program dot program ID I believe that's what we do and now for the seeds all right we can copy this utf8 code but this time instead of user our string is post all right for our Authority we can just say public key so it should match and we say to buffer to get it in a format that it likes and now how do we get the last ID if we were to do this with uh on Solana playground we say post we say Pub key right we just put in our Pub Key and then we get u8 we need to get a number here and based on this zero it should generate three t two this is the address that we're gonna write to it's always going to be the same it's predictable in Solana right it's not random this address okay but how do we get the users last ID well do we have access to the users without asking myself and we actually do right what do we have access to user in this check right here right if there's a user right if I were to console log this and console.log user user stuff okay that's console log it so you know what I mean a lot of understanding for me was taking Solana code that everyone wrote and console logging in oops this is running like crazy let's make this run once for now okay cool it's running way too many times uh program cool object user stuff Okay cool so in our user State we have access it's last post ID right and we can separate that right into another state so we could do that by saying over here const uh last post ID I think we'll call it last post ID comma set last post ID and to be honest we won't need this Set uh last post ID because I don't believe we're going to set it to anything else because in Solana we are incrementing it we're not doing anything on the front end with it so I'll actually do well actually no we will need to set last post ID because underneath set user right here we can say set last post ID to user dot last post ID and that's the only time we'll set that state again okay cool all right so we got it last post any and we let's see if I put transaction pending here with a freak out oh so transaction not pending oh no it still doesn't like that nope okay so we can't use this just yet uh it might be because we're using it here we go yep awesome so I'll put public key back and now it's not going to run their use effect too many times right because it makes sense if I put set transaction pending here it's going to run way too many times the set initialized there spelled that right cool okay cool transaction pending it's all good all right no more issues awesome all right so I got that settled um let's go back to our code so we have our last ID now so anytime I say last post ID it will be the user's last post so it should be zero okay so with that information we need to add another seed okay so how do we add this next seed well there's a lot of uh things that we need to do to format it right we can write last post ID but it needs to be formatted we can't just write zero here it should be an unsigned integer eight U eight right so how do we make this a you wait um to do that I'll just erase this for now right I'm just going to say uh you int right you're gonna see eight array Dot from parentheses and put in a right here last post ID and that's how you're going to u8 from this ID Okay cool so we have user PDA the post PDA right we have title and content and now we have to actually call the program method so we can say await program right dot methods dot create post okay it takes in two things title content right which we're getting from when we pass it then we can say dot counts then what accounts does this program need if you're unsure at all we can go ahead and look at our Solana playground when you post account user account and Authority so let's go ahead and do that I can say post account we need a user account we need a Authority and we need a system capital P program Okay cool so do we have what we should put for each account we do Post PDA remember this is checking if it exists if it doesn't exist right that's the address we're making that the address that we write the account to for user account it's going to check if this exists and if there's an account there it does so we're going to say user PDA Authority right so with the authority we can say a public key and we don't need to format that resistant program we can say System Program dot program ID comma dot oops dot RPC cool right and we also want to close that modal so we can say set show modal false okay and then we add our finally here you can say sets transaction pending to false as well awesome okay cool let's pass down create post and go to dashboard we can erase static create posts and now we can just get it from here get it from use blog create post and where do we want to put this create post well let's find it create posts right here on submit right so I don't have to rewrite anything this is the same name luckily it's using our States from our title and content and putting it there so in theory if I create post it should work so let's try it so welcome to my blog this is my first post that's the description we hit post let's go we got a transaction right so now we approve and if this closes it should work it closed and we don't see anything here because we didn't fetch those posts yet all right well we can test it though if we fetch this there you go it exists right this is my first post welcome to my blog so there we go we were able to create a post which is amazing let's freaking go guys so we gotta create posts I'm excited last but not least let's figure out how to fetch post all right so you want to learn how to fetch all the posts well what you could do is go ahead and to go into your code and you're already One Step there right so remember how we did program dot account dot user account right I went ahead and console logged program right if I can't select program by itself what is that guys program by itself is literally all the information about your program I can get the ID by doing that program ID if I do a DOT account let's take a look at what we see all right you might know this already but if I do dot account you should see if I refresh this oops let's make sure this is running uh yarn Dev okay make sure this is running and there you go cool you see this object here and you see all the accounts that are associated right with this program which is user and just posts so which one do we want out of these well I want the post all right so if I say dot post account let's see where we go from here all right this is how I figured out uh what everything does it's a lot of content logging and testing cool so as you can see when I do that post account this is all the information about it right here and another thing that we'll need is the method so let's see if we can find any here provider coder prototype object cool awesome so you can see right you can say fetch multiple fetch right there's also unsubscribe subscribe but there's also an all right this will fetch all the accounts that are posts all right even if you yourself didn't make it right for our scope of our project there's only going to be uh one user associated with it it's kind of how we made it but if you were going to get multiple users and want their unique post right you can filter it by their public key all right but again because of the scope we don't have to do that but this time so let's set it up okay so if this is the case then what we want to do here is say const post accounts or make a variable it's equal to a weight program dot account dot post count all right so this should give us all of the posts right and of course if we want to save this we're going to need to we're going to need to put it in a variable we'll put in a state really rather let's fix this and let's make a state for it so to make a state you guys know how to do this by now it should be post posts set posts and set this equal to use State and the default State can be an empty array so what do we do here we say set posts is equal to post accounts and if you want we can console log the post account so how many post accounts should we have guys all right if you've been paying attention all right as you should be should have one post cool so it'll take a second to load let's see console array one right but is it just the object itself take a look at this right it's an object with a public key with another property or a count but if I open it welcome to my blog this is my first post blah blah blah and there we go all right so all we need to do now is take posts right because that's what's holding all these posts and bringing it out to the block so you can go below here we can say posts right we can go to the dashboard and let's bring it in here so I'm gonna go to the use blog hook and say posts right and you can see post is declared over here it's our static data and actually erase this and now we don't have any more static data so if I save this look at that we got our post right and this makes sense we only should see one so if I do this all right and let's let's hear this is my first post welcome to my blog right so our second page this is our router right if you go back to our model here this is full posts when I click on this it loads to the full post page right and loads said item all right so let's put this in action now let's go back to the code just double check our create post function oh yeah that's in blog so I'm gonna create post awesome so transaction so let's see if it loads let's create a post uh this is how to build a block all right this Vlog uses the salon chain all right let's hit post there's our transaction we hit approve it loads and there it is this blog uses the Solana chain right and if you want to put even go even more in depth with this and you want like a date with each post right you can get the date from the front end right and to your user account or your post account you can add a date feature right so if you want right there's another video we have Airbnb on Solana this should help you out with that so with that said all right we're done with the app guys this is it because all you have to do to set up write a smart contract on chain to make an account to creating a post and now you have a Blog so I hope this helps you guys all right let me know down below if this helped and I'll see you guys in the next video peace
