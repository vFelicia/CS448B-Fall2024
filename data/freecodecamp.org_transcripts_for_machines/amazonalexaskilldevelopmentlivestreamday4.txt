hey this is steve we are to get started in just a second here looks like i'm having some network issues i'm getting uh some errors on the encoding side can you guys see this all right and hear this all right if you could leave a comment in the chat that'd be super helpful let's see okay looks like uh looks like it's all working now so welcome um welcome back if you were on previously we're now day four of five working through um our project here developing an alexa skill for free code camp i keep forgetting to turn alexa off every time i say that today we are going to uh we're going to cover a lot where we we started talking about slots yesterday and um we are going to get into it uh a little bit more today and talk about custom slots so we're down here day four a couple of other things uh that i talked about yesterday i set up i pushed all the code out to to github and so if you go to github.com dabble lab uh there's a repo called free code camp livestream so if you head out there that is what i'm looking at right now i've got all of the um the the source code out there that we've been working on along with um our dialogue yeah earlier this morning i i made some cleanups or i just kind of took what we had from yesterday and and um cleaned it up a little bit let me um let me show you what i changed just so uh nothing is confusing for anybody that was here uh yesterday so the um the dialogue uh we there's there's three intents that we're going to work through here so i changed the um the example dialogue to uh alex well actually i'll just play it so you guys can hear it alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code camp hear about our most recent medium post or get answers to frequently asked questions get answers to frequently asked questions there was an error the error was could not find handler alexa stop yeah so that's where we're going to pick up today so we didn't get that implemented yesterday but we um we also what we did get implemented yesterday was the medium post and i changed that around just a little bit to make it um less stubbed out so alexa open free code camp alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code camp hear about our most recent medium post or get answers to frequently asked questions most recent medium post the most recent article posted on medium for free code camp is titled recursion demystified it's been recommended zero times alexa stop okay so so that's really so i didn't change a whole lot i just kind of cleaned it up a little bit so that it made uh made more sense so um we're gonna pick up today from there and like i said today um we're gonna implement the dialogue let me um let me just recap what we did yesterday before i get into this so yesterday uh day three so yesterday we we talked about debugging and we looked at making modifications to the skill manifest and then we also talked about beta testing and for anybody that filled out that google form uh you should have gotten an invite to beta test and if anybody wants to do that that hasn't done it already if from the uh the repo from the readme page i put a link here to um complete the the form to uh beta test the skills so if you've got an echo and you want to test the skill before it's published live you can use the the beta test link to do that okay so let's get into day four so um like i said using slots so the um the the functionality that i'm gonna get into today is custom slots and specifically what we're gonna do and we started talking about this yesterday but um didn't get very far into it uh what we're gonna do is we're going to create a a custom slot and uh an intent for handling questions that could be pretty much anything as i was thinking about a little bit more after we finished up yesterday a lot of the the functionality that we we had kind of brainstormed two days ago a lot of it was q a and so um what i tried to do is come up with a way that we could go at that where we could pretty much have any kind of questions so sort of a knowledge base that could expand and that is what we're gonna try to uh implement here today and i also mentioned yesterday there is on skilltemplates.com there's a template called uh knowledgebase starter and so i'm using some ideas from that for this but i've changed it up a little bit for today so some of the some of the code i'm just gonna gonna copy and paste in so we can move through it pretty quickly but i'm gonna start with the um with the model and going in here and what we're going to do first is we're going to create a custom uh slot type and we're going to do that up here in the the types section of the interaction model and the um the type that i've come up with here let me shh this is what up because there's a a lot here so i'm gonna just copy and paste this in and then talk about it give me one second here so um so i've created a type called questions and this is where we're going to define all of the questions that a user could ask and we're also going to define similar synonyms for the the questions and what this is going to allow us to do is basically like if we've got one answer we might have that answer might answer multiple questions so for example um if uh somebody says what is free code camp our answer might say you know code camp is dot dot dot you know it was founded dot dot dot and founded by dot dot dot and you know we could have a lot more than one response or one answer covered and so we'll use synonyms to map different ways that somebody might ask the question to the same answer and the way that we're going to do that is with this id here so we're going to have another file that we're going to use so we'll we'll add our questions in here into the uh the questions custom slot type and i've just got some placeholder ones in there now but we can we can build that out i've just got five questions but this can expand uh i think the upper limit for custom slot values i i want to say it's 50 000. i'm not a 100 sure on that but it's something like that so we've got a lot of room to grow if um if this got really big and was changing often a better way to go at it might be to use like elasticsearch or something like that on the back end but i think for illustrating what we're trying to do which is really more um alexa stuff this makes more sense so we're gonna do it this way but what we are gonna also need is a way to map to the uh the answers and so what i'm gonna do is um i'll have a folder called data and then in that i'm gonna have um a file that's just gonna be a json file that's going to uh to have my answers and i'll show you how we're going to do that real quickly so i'm going to i'm going to call that file answers dot jason and in here and i've only done one so far and then i just got some placeholder ones here so um before we built this out or before we published this live we'd of course uh go through and add all the questions and and like i've been saying previously so if anybody wants to uh to help out with these questions please um please feel free to uh go out to the site and grab some questions or add your own questions and uh we should probably provide a way for somebody to actually we'll do that we'll provide a way that somebody can ask a question that hasn't been answered and then we'll capture that question so that we can't answer it um but for anybody that wants to contribute like i said before um go uh follow the uh the the repo that i set up and um do a pull pull request and we'll uh incorporate your changes in there so we've got the questions we've got the answers what else do we need we need to define our custom intent right inside of our model so let's do that next we're gonna have an intent that i am gonna call knowledge base intent so we could call it like qa in 10 or something like that too but now uh knowledge base and time works so we'll um we'll go in here and get our recent articles we'll put it like right below that um so we've got our knowledge base intent and the knowledge base intent has one uh slot and the slot name is question and the type is question so this is what we just defined up here so when we created a custom slot type the name here is what i'm referencing down here and then in the sample searches uh this is um you'll see when in the code for the intent itself so there's kind of two things that can happen here you could just have somebody say hey you know i want to search the knowledge base or you could have somebody actually submit a question and say you know what is free code camp or or any question for that matter if we've got it defined so i've got samples here where some of them are just static like search um you know take me to frequently asked questions faq and then i've also got the um the slot as just a sample as well and so we're going to hopefully make this work to uh to get our questions answered so now i've got the questions and the answers and for those of you that have been following along you know now we need to uh handle the um the custom intent the knowledge base intent so i am going to uh let's see here what are we gonna do we're gonna go in to our index here and what do we got to do here so we well for starters we need to include the module right the qa module do i have that i don't don't have that yet but actually let me do that next so so i'm creating a folder for this is going to be just a local node module that we're going to use to query the data file the answers.json file and i'm going to call this qa js and this is going to and this code is just exactly as it is in the um what's it called the uh knowledgebase starter from skill templates.com so i'm not changing any of this so but i'll push all this stuff out to the repo so you'll have all this code anyhow uh let's see okay um so um i'm requiring here the native node file system uh module and then also we're requiring the uh the answers that i just added back here earlier and then um we've got just one function in here that's pretty simple it is um returning a promise uh but it's looking up to the to get the answer based on the id that's going to be passed and the id i'll show you how that is getting passed over by the alexa service so that's what we defined in our interaction model here so this id is the id that we're going to be using to query that json file with our answers um okay let's see what am i missing here uh now i need to i need my handler and let's do that next so i did modify this code this morning this is not exactly the same code as the knowledge base starter but it's pretty close and again i'll push this all of this code out so we have it uh let's see we're and did i include no so i need to also include the qa um and you don't have to add the js but i like to because it reminds me that it's local i guess i could see that just from the path but that's why i do that um so we've got our qa we're getting close let me talk through what's um what's going on here in the uh the knowledge base handler so we talked about um the the basic intent uh structure previously so i'm not going to go over that again but we're going to be looking for an intent request and the intent is the knowledgebased intent which let me just confirm that i didn't change that but i think that is what we called it right yeah so the knowledge base intent and then um in here so there's uh something called entity resolution which basically um when you're using synonyms it's going to look at everything uh look at the what what the request was from the user the the utterance and then try to match it to the um to the uh to the right uh slot type but um it's going to be there there might be multiple possible matches and so what we're doing in here is we're going to we're going to be looking at the very first match which i think is going to work in most cases we'll test it out but let me show you that here so so basically it could return if it matched if whatever the user says matches multiple possible uh answers what we're doing here is taking the id of the very first answer and and then we're using that id uh to get or question rather the the idea the very first question and then we're using that to get our answer and um we're building our response from information that we've got in our answers.json file so this file has the id which maps to the question id and then um the the answer is whatever we want here and then the the prompt is going to prompt the user for whatever we want them to do next so like in this first example which i built out it's handling the very first question which is what is free code camp and so the response should be free let me do this free code camp free code camp is a place where you can learn to code for free there are online challenges uh youtube videos medium posts and podcasts uh which would you like to hear more about and this um i can't remember who provided that we had it but uh thank you for whoever did somebody provided that yesterday or the day before so um we're going to uh re reprompt by basically asking what they want to do next uh i think we're pretty close to being able to uh to test this let's um let's see so deploying all right i'm going to look through the uh the questions while this is building and deploying and then we'll uh we'll test it out and see how it's going uh we can set the trigger hey welcome mr quality time thanks for hopping in so startup santana do you got your um you got your request is it working is the skill working the beta test are you able to say alexa open free code camp looks like this is deployed let's see if it's working alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code cam hear about our most recent medium post or get answers to frequently asked questions frequently asked questions there was an error the error was could not find handler that can handle the request oh a request requested amazon one dot echo api dot request okay alexa stop so we did forget to do something uh we forgot to register the handler so we talked about this yesterday too and i always forget this but that happens down here and i need to deploy again but this time i can just deploy the lambda function which will go faster so this will just take a second here okay there we go so let's test this again alexa open free code camp hello welcome to the free code cam skill would you like to learn about free code cam hear about our most recent medium post or get answers to frequently asked questions frequently asked questions ask me a question like what is free code camp what is free code camp free code camp is a place where you can learn to code for free there are online challenges youtube videos medium posts and a podcast which would you like to hear more about podcasts podcast it's nice to meet you alexa stop so um you can see that uh the um the the response that we're getting back on that it's mapping to in our interaction model a intent that we created yesterday that hello intent so basically what we need to do is we need to go in here and we need to um do a question like um what uh what is you your podcast about and then for some synonyms we'll go something like this um podcast tell me about your podcast uh let's see do you have a podcast maybe uh maybe how often is the podcast updated um okay we'll leave it at that for right now and then i would go over into my answers for number two and say um the answer is um our podcast is called the free code camp camp podcast that you can find on itunes i'm assuming it is yes and and it covers stuff you'll love and then down here like i said before this is where we will reprompt them for something else uh maybe we'll just say something like um what other questions do you have do you have what other questions can i answer for you and so now let's redeploy and try this again so now i'm just deploying the code uh actually i need to deploy not just the code because we made a change to the interaction model here and anytime you make a change to the interaction model the interaction model needs to be rebuilt so i can't just deploy the lambda function i need to deploy the lambda function and rebuild the model so that's what's happening here this is going to take a second and again while that's happening i'm gonna read through the uh the comments so if you have any comments or thoughts or ideas post away okay let's see um let's see alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code camp here about our most recent medium post or get answers to frequently asked questions frequently asked questions ask me a question like what is free code camp what is free code camp free code camp is a place where you can learn to code for free there are online challenges youtube videos medium posts and a podcast which would you like to hear more about the our podcast is called the free code camp podcast that you can find on itunes and it covers stuff you will love what other question can i answer for you what about question three question three is the third of five sample questions you can also convince users to ask another question for example what is question four alexa stop so you can see how this works um we would just build out the knowledge base by uh first adding the question to the interaction model and ask me a question like what is free code alexa stop goodbye um yeah so we would uh we would extend this by just adding the uh questions as a value in the custom slot type that we called questions and then we would have any synonyms that would help train the alexa service on you know how to know when somebody is asking something that could be answered by our answer which we would put in the answers.json file and all we would need to do all you need to do to tie them together is just post this or make sure that the id in the answer matches the id in the question and i'm gonna because this is working right now i'm gonna go ahead and just commit this in case anybody wants to look at the code on github uh added qa and and push that out so so you guys can take a look at that in a second once it um is pushed out and the other thing that i wanted to show you because we're we're doing pretty good today on time we kind of got into the slots a little bit yesterday so i'm a little ahead of where i thought so we'll probably finish up early today but i'm going to i'm going to see if we can do one more thing because we've got a little bit extra time here i'm going to let's try this uh the simulate command so um so you go um ask simulate and then um i think it's dash t actually it'll tell me give me an error tell me what i didn't do yeah dash text so so i'm gonna i'm gonna just pass um what is free code camp and i think it's also gonna want a locale hmm yeah see if i can remember how to do this i think it's en us let's see yeah that was it so now we're testing and um we're doing that from the command and we got uh un unexpected error so let's see i'll say open let's just try open free code cam see if that works yeah so that did work so um up until this point we've looked at the testing in the developer console through the web and um through alexa through the echo but you can and i mentioned this earlier you can also test using the the cli i wanted to show you something here the so this is just a launch request but if we um if we change this up to be something like i want to show you the entity resolution part so ask free code camp what is free code camp see if this works okay so we got we got our answer back i want to show you the requests though okay so this um this is the request that went from the alexa service to our skill service and you can see in the request the um the question slot is being passed over and the request type is an intent request so this is and i know we talked about this so i'm just recapping because we we've got some time but the uh intent handler not recent articles the intent handler here is getting this request and it's coming in as the handler input and we're looking in here in the can't handle method function for the type and the type is intent request which is here and then the intent name so request intent name knowledge base intent which is this and then down here we're looking at uh to see if the request has resolutions uh so in here that's yes and then uh in there we're grabbing we're setting this this variable resolution to um the the first record in the resolution per authority which is an array so here's that resolution for authority and um actually there's only i think there's only one in this yeah there is but if it had matched to multiple possible um values we'd be taking the uh the very first one in all cases so you you'd probably in if you were going to roll this out live you'd want to do a lot of voice testing and checking this to make sure that the the utterances are being mapped the right way but i think that is probably where we're going to stop for today but um let me just go look at our outline here maybe there's something else that we can get in today um using slots multiturn dialogues that's a longer topic so we're not going to get into that today uh it's persisting to dynamodb that kind of goes with that so i'm going to hold off on that um what we can do though is just update we can do some cleanup stuff right now on it so let's see camp logo i saw this out here maybe we can just um update the uh the logo and uh that kind of stuff and we talked about where that was but um um let's see i thought i had one i let's start a new one so the uh the logo sizes are 512 by 512 pixels for the large larger logo and i think 108 maybe i'll confirm that yeah so actually this works here let's see and uh i think i have it alexa alexa icon small and alexa icon large yeah so um the large icon is yeah 512 by 512 and the small icon is 108 by 108 and i think i could just do like this i think let's see uh maybe not or maybe so maybe i just need to change the background color yeah but i need to know what color that is so it's probably on here somewhere yeah there we go and i'll do the same thing for this and get these fixed up i know this is not really alexa coding but like i said we got a little time and i want to try to get this skill as far along as we can all right i think i think they can be pngs and let's see save that and save this oh and then i need to put these someplace so i'm going to put them on um just in an s3 bucket it's temporarily for right now i think i've got one if not i can create one actually you know what's going to be faster we can set this in here you can also set it in the um the skill manifest which is something that we looked at yesterday also which is normally how i do it but just for uh time i'm gonna just go into the developer portal and just do it here so this here and large icon oops march and save that we're like really close now to having it ready where we could probably if we if we updated the content we could probably um publish it so let's um let's do one uh final test and then we'll we'll call it a day today unless anybody has um any specific questions and we could spend some time uh asking or answering questions that are uh related or even off topic if you want to do that just um let me know in the in the chat alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code cam hear about our most recent medium post or get answers to frequently asked questions tell me about free code camp free code camp is a place where you can learn to code for free there are online challenges youtube videos medium posts and a podcast which would you like to hear more about the podcast our podcast is called the free code camp podcast that you can find on itunes and it covers stuff you will love what other question can i answer for you what's the most recent medium post the most recent article posted on medium for free code camp is titled recursion demystified it's been recommended zero times so you guys can see um alexa stop even though i'm uh asking uh different questions some of them are in our q a q a or some of them are handled by our qa handler others are being resolved to their own intent so um so like that one is a separate question alexa alexa stop and and we would um we would probably continue uh building this out like i added some of the ideas that we had talked about uh when we were first planning this but um some of the things that i don't know if we'll get to um get to adam or not but just uh some other feature ideas provide a list of upcoming live stream events on youtube i think we could probably get that one in uh let users listen to podcasts i think listen to the podcast i think that would be really cool um and then provide a like a qa and coding trivia functionality i think that'd be fun and then let users watch videos if they have like the echo show spot and fire tablet i think that we could get uh get that kind of stuff in but let me let me show you one other thing that i've added that um let me see if i can get it to do this alexa open free code camp hello welcome to the free code camp skill would you like to learn about free code camp hear about our most recent medium post or get answers to frequently asked questions how many colors are in the rainbow ask me a question like what is free code camp how many colors are in the rainbow ask me a question like what is free code cam alexa stop so um one thing that i was trying to do i obviously don't have it um working completely yet was to um set up a way here where if the user asks a question that we can't handle then we would respond back with this sorry i don't know i've sent your question to one of my human coworkers who can teach me the answer please ask me again tomorrow and hopefully i'll have an answer for you then and then here we would capture the question um like to a database and probably email somebody so that they could go in and add the answer to our answers file and and add the question also to the questions file so that is um a functionality i think that we could get working so let me add that to our dialogue um or our future road map all right and i think um yeah i think that's going to do it for uh for today if there are if there are no uh no other questions then um thanks so much for uh for for hopping on to uh to today's stream and we will continue tomorrow and tomorrow like i said we are going to uh to cover um multiturn dialogues and we are going to uh also look at uh persisting stuff to uh to dynamo db so thanks so much and hopefully i'll get to see you back tomorrow you