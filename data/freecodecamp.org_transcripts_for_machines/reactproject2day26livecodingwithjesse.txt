hey everybody its Jesse and the good morning if you're in the time zone close to mine it's 1000 a.m. here and I have to do an interview later on during my normal time so hopefully this time is okay for for most of you and maybe some of you who don't normally get to watch live will get to watch it live now so I think it'll probably work out alright I'm going to wait just a minute my analytics are probably just a little bit slow right now but it's showing no viewers which I know it can't be right because I have at least six people waiting all right so I guess let me check the the live chat okay so we do have some people in the live chat so there we go the analytics finally caught up okay Wow okay everybody in the live chat says it's 43 it's showing me 21 right now in the analytics and it was showing zero and so just a few seconds ago so hey everyone hey all right we got some firsttimers welcome welcome Sebastian I just saw the that pool request right before I started so I'll check that out later on all right so today we're gonna keep going with our file our file uploader and yesterday we were trying to do some we're trying to put some security measures in place so we had a whitelist for files file types and we wanted to set a max file size so let me show you what I've done so far and this is now on github but it's under the the branch I always forget the name of the branch file type check is the name of the branch so it's not merged into master yet but you can see I've replaced we had kind of some really long ugly stuff going on here in our if statement yesterday two checks I've replaced that with a regular expression that goes through a lot of different file types I think this is all we'll want maybe now just looking at it I could see like maybe we want that too okay so basically all this does is it's it's just checking all of these and it's case insensitive so if the file type matches any one of these then it's aok to download this isn't the only check I want to do but we have this in place now and definitely better than it was yesterday so yesterday we left off and I was considering so we figured out a way to get the total size of the form so everything coming in from the form input fields files the whole thing what we wanted to be able to do was set a file size limit per file but I think so I've thought about it this morning and I think it's going to be okay server side to have a total limit so I think we're not gonna have to switch I was thinking about switching to two Moltar instead of formidable to handle the form data because it's it's easier with Moltar to do the checks for file size but this is what I'm thinking have it clear on the client side what size we can accept so even we could even set a file size limit client side even if technically it still could go through if it was a little bit bigger we could still set one and then we could check it client side knowing that people could get around that but that ultimately when it comes server side even if if they get through the client side stuff and try to send a huge file or a ton of files it's still gonna it's not gonna go through so that'll offer us protection from a lot of small files or a huge file either away just with the one check so let me know if that makes sense that sounds alright I wish see I think I did get rid of all the code that we'd used before and I wish I hadn't because it would have been helpful since now I've decided that I want to use it and I yeah we never committed that or anything so I'm not gonna be able to get that back but it shouldn't be too hard I guess I could have just watched my video from yesterday I always I I it sounds weird but I always forget that I think I frequently think like oh man I wish I remembered what I did you know last week or something like that and then it hits me like oh wait like I can just watch the video and see what I did oh yeah Samuel thank you for pointing that out yeah I am I didn't mean that the P is optional okay I'll doublecheck that Sam hold on a second let me double check and make sure cuz I'm not really great with regex so I want to double check to make sure that I've put that in correctly let's see on my other screen I had to look it up and the first link was not very helpful Jax all right thanks Samuel I'm uh I'm gonna check this out so basically if anybody's not sure what's going on here I just want to know in this context I put this question mark in here the goal is that I want to be able to allow if the extension is jpg or jpg so that was my intention but I'm not sure that I did it correctly Samuel says I can replace this this stock with just dark X because there's no other actually isn't the old the old file type is just doc right haha yeah you're right yeah so bah bah bah Kumaran says can't you just basically just write both out yes I definitely could okay so it seems like the question mark should work so I'll leave that in there for now maybe I'll doublecheck later on I'm not worried about it I can always just try to upload both versions and see if it works let's uh let's get started and I want to put in place first that max size check and we're gonna I guess what we'll do is we'll stop so yesterday we ended up putting it inside do we put it inside here I have to look actually now that I think about it I believe that the code was pasted into the live chat so let me go back to yesterday's live chat and just grab that code there we go that was it was on progress I said this when I grabbed let's see all right so let me cease let me doublecheck I know we did this yesterday and I pretty much just want to recreate the point we were at yesterday and then actually finish it today okay and let me bring over this over I'll make it a lot bigger that's really small okay what did I do have crash waiting for file to use oh okay as this well that's why wait oh sorry everybody it's so trouble the syntax okay alright so what I'm looking for basically is just to make sure that this is giving us some values when we try to upload something so I have of the form open on another screen so I just clicked upload and there we go so the first number is bytes or C the second number is expected so you see the expected stays the same and then finally it they're equal so we've gotten everything okay good so that's what I want so the first check we're gonna do is the bytes expected if bytes expected is too big right off the bat we know that we can't accept it and then after that we'll keep checking just to be sure I've never seen so far it exceed the bytes expected but I'm just kind of assuming that there's maybe some way to fake the bytes expected somehow and try to get past it so I'll do both checks just in case okay so what we'll need to do all right we need to figure out how you're supposed to stop a form from being submitted in formidable so I assume that there's I really just do all right let me check I want to check the light check quickly I see some things in here that might be helpful okay I'm glad I checked this so Samuel is saying in regard to dock the dock axe thing that the way I have it set up currently this would match doc or docx but also anything else that starts with duck his example is docked or so yeah I definitely don't want to match other words like that so although I guess it doesn't really matter yeah now that I think about it yeah you're you are right about that I'm glad you brought it up because I haven't even thought about it but since I'm checking this against the file type if I was checking it against the file name I would be a lot more worried about that but I'm checking against the file type so the type is not I mean it's not likely to be be anything other than regular file types so anyway if someone has some more insight into that let me know but I'm pretty sure it should be okay like that but you all you are right and I'm so if you're going to do some checking like particularly if you were going to use something like this but you were going to check against the file name then you probably don't want to do this you'd want to maybe write out you know everything and not not use the asterisk of probably for anything okay let's go back to our own progress all right so here's what I'm trying to do at some point it within this progress updates the the progress update I want to be able to just end the upload so I'm not sure so maybe it's farther up yeah all right so I'm not seeing any way to do this so maybe I'll have to go let's check if we can do this in Express yes all right I had just figured that there would be some easy way to do this enough not finding it all right I'm wondering so we can obviously if there's an error it ends I'm wondering how we could throw an error let's see what we're doing already and let's see I I forgot to start my timer but I am checking the time so in a few minutes I'm gonna go back to the live chat and catch up on what's going on there all right so let's see okay okay let's I don't really know if this will work but I think is worth the try so let's say i'ts expected is greater than let's just try it which I something really low this time just to see if we can make it work alright so what I'm trying to do then is just send back a bad status request immediately on what I want to see is if this actually will end the upload alright save that make sure you don't get any errors cool no errors all right so I want to upload something that we don't have already ok cool we got an error but my mine is a 31 okay let's get rid of that let's try that again okay get a new air this time all right so good and bad news on that so one thing that I noticed is that this did fire before the file got uploaded now obviously we set it so low it's gonna it's gonna go off you know pretty early on but uh hold on a second I got a knock at the door all right I'm back sorry about that that was my boss so in case you don't case you're not familiar with the show this is me doing my everyday work so interruptions and mistakes are definitely included and so what happens from time to time not often but since this is my not my normal time more likely to get interruptions otherwise everybody around here pretty much knows what my normal stream time is and they leave me alone but uh all right so let's get back to this so I was just trying out some things just to see if we could you know get away with this and have it work the goal here is to end the forum handling as soon as as soon as we realize that there's too much data and we we've got this error now actually was I trying I was trying to upload a file types it's not very file type anyway so I wanted to try it with something that was it was a correct file type so I'll switch it up and try it with a correct file outside next time but for now but see if we can figure out another way we could do this I guess if we if we did check for at least four bites expected here and made that a part of of what we check for we could stop downloading anything if the bytes expected is too large well that would be that would be the first step we'll give it a shot it won't solve all the problems but so in here this is where we're actually uploading the files so then we know that this already works in regard to file types so let's try this let's see what I think I can just get that with without having to be in the progress see 4 bytes fights expected ok less than three all right so with this what I hope that this does is if the file type is correct then it'll go on and check to check on the total number of bytes expected and it anything pretty much should get rejected at this point since we're checking for 3 bytes so I'm gonna try to upload a pain that's definitely more than 3 bytes and it should get rejected so it's alright this is that is a okay so it did not get uploaded even though I know this says that we just never corrected that but okay I see why it's saying that I never I didn't change this so anyway so this did work as expected we just have the wrong wording in the console look but we can double check this by setting this I don't know like what's I don't know how big this file is let's uh let's check it out 250 guys all right so let's just set this to how they normally do it like whoops not plus hundred times that's how you usually see it done like and that's a lot easier to reason about then than having like a big long numbers actually let's see there's actually a cool converter built right into Google search so if you have if you want to check kilobytes and megabytes and all that it is pretty useful huh hm sorry I was I was just messing around with the converter there's actually a lot I'm just gonna bring this over because I think it's cool just for a second so I didn't realize that they actually measure up it's probably hard to see cuz it's small I wonder if I can ever make it bigger so you up to up up heavy bite anyway it's really matter but that's crazy all right so basically if we set this at that like sorry I'm trying to find that file size again all right 250 kilobytes that's what I thought so let's just go 300 lets you work yeah there's gonna be some extra data well I'm not really putting that much else in the form so but this should work I see let me know I've stopped getting anything in the live chat so I haven't gotten anything in there for about 20 minutes which is weird so I don't try typing something into the live chat so I can see if I don't see anything in a few minutes then I'll know something is something is wrong with the live chat okay awesome it works great haha everybody's just quiet alright cool thank you for the prompt response okay so let's try this again and submit there we go okay so just submitted and you see it was uploaded just uploaded successfully alright so cool so this works for bites expected so I guess what's a reasonable amount of bites expected should we set it should we limit it to like 10 megabytes I'm better saying for ya I'm thinking so remember this will be total so people are sometimes gonna upload multiple files let me think of what normally is so the mostly what gets uploaded are PDFs Word documents and images so I'm not worried about file size on anything really except for the images so I could see maybe an image getting big I'll set it I'm gonna set it to 10 and that should be that should be good I think it's actually let's do it like that wait a second that is not what I meant to do all right suit times yeah so I for a second my brain didn't work and I forgot that I had to do that in megabytes okay so that should give us about 10 megabytes which that should be fine I mean we can ten megabytes is not a lot so we can definitely handle that and if anybody I wonder if I should split this out the I'm not really did we get a success I think we may have gotten a success message all right actually you know what I'm I'm thinking too much into this right now we're not worried about sending messages back to the user from here this is protection for people who are trying to circumvent our client side stuff so client side stuff will catch it and will give the right feedback to the user I don't really care and in fact it's probably better if someone is maliciously trying to do something that we don't even send an error message back to them yeah that that's better okay so because what this is doing is it's not sending an error it's just not uploading that file so everything else is going on you know as it normally would so here's another concern so this is just dealing with the file uploads potentially I don't I don't know that this is possible this would be kind of weird potentially could someone put so much text in a text input field that it would be it would go over the data limit because they wouldn't we could check for it here but it wouldn't matter because there's not going to be files all right and I have had said that I was going to stop and check the live chat and that was a long time ago and I've forgotten so let me stop and check the live chat now it's not a bad place because we got step one of this finished and working so let me scroll up and a live chat I'll take any questions you have now for about about five minutes I'll set the timer I might go a little over five since I skipped I skipped ahead and did more coding all right cool so we have Vinicio since a little from Brazil awesome welcome Sean says it's first time from Phoenix Arizona hey Sean welcome really glad you could join us for the first time feel free to ask any questions or putting comments in the live chat oh cool err drifter says I'm done with HTML and CSS tutorials awesome congratulations assuming now you'll you'll start getting into JavaScript stuff so if you have any problems and want any help let us know in the live chat or message me or something I'd be happy to get some advice if if you need it and if I get a chance to Slick Rick asks what are you coding he asked us a while ago so he or she asked us a while ago I am not sure if you're still still around watching and you've probably got it already but um it's a file upload we're handling file uploads in node we're using formidable as our package or another package to help us handle those we have the file uploads working but now we want to try to rule out which uploads we want to actually which files we actually want to upload and which ones we want to reject based on what type of file they are and how big the files are okay all right so krill ik has a question I guess so is it fine to render or not a component depending on the state of another component in react for example I have a navigation component with filter component inside and I render filter only if navigation he's a state state is home is true okay so only if navigation state is I was true yeah yeah I think that's fine so basically so you have you have navigation as your parent component then filter is being rendered inside navigation you have a state of his home when it's set to true you want to render filter so yeah definitely I would just put it put it in a ternary so let's um let's bring up I guess let me bring up a javascript file so we'll get the syntax highlighting here but let me go down here so within your render or you know you return you'll probably want to do something like this so this state is is home and then you can since you're just checking if it's true or false you can actually just short circuit with an and then after that you can put your what was it called filter so you could do something like this right so this would check it would check the state if the state is true it's gonna filter if it's not true it's not going to do anything so let me know if that's helpful or if that fits your use case or if I'm misunderstanding what's going on there but if anyone else has any input into this you know please please weigh in here but as I understand the question this should work so we're doing this a lot between this project and the last project we've we've used pretty much this exact set up somewhat frequently okay so we did have my timer went up but there's only a few more questions so I'm just going to do them to get to the bottom of the chat here so techie Tintin says what does the jape JPEG with a question mark in the middle mean so let me I'm gonna get rid of this hopefully it was the hopefully kerlick had a chance to check that out I just don't want to leave that in there and accidentally I wouldn't really be able to accidentally save that cuz I would get an error but rather just take it out now so this part here is is what you're asking about what it what I'm intending this to do and I haven't tested it yet is to take either jpg or jpe G so basically the question mark here means the e would be optional but originally so recently I did have it like this and then Samuel said that he thought it should be like that so I started to look it up but then I figured like I'm not gonna spend the livestream trying to look this up I'll just look it up later so definitely before you try to use this test it or look it up because I'm not a hundred percent sure what it is I'm just I don't really use regex often enough to memorize what all these things mean so I just look it up every time so I need to verify that this is correct okay so when I had said I asked earlier about would it be possible for somebody to put so much text in a text input that it would exceed our max limit for size and Umberto's has potentially yes unless you're only getting the first you know X characters from the text box of this so there's some character limit yeah that sounds like a good idea and I could do that I'm thinking can I do that clientside I mean obviously I can set limits clientside but I'm thinking for somebody who's gonna try to get around that could I send could I only send a certain amount off to check it out I don't think I'm gonna do any client side stuff today I'll say that I'll probably work on it myself later on I was just going to do some serverside stuff but that's that's a good point thanks somebody to techie Tintin says you rock bro first time here awesome I'm glad glad you think that and so hopefully hopefully you stick around and I are able to watch some some shows in the future and I contribute in the live chat or ask questions okay Mei has Mei Mei HFR I'm sorry I'm probably mispronouncing that but I'm trying trying Mei hitch flora says hey hey hi Jesse what time do you come live usually usually it's 2 p.m. Eastern Time but occasionally I have to switch that up depending on what I'm going on haha nobody says a few weeks ago I didn't know JSON at all it's cool I can watch this stream and understand what node1 is doing that's awesome he also says hey Jesse this might be a sidetrack but would love to know your thoughts on node.js if you have any experience yes so I'm a big fan of serverside JavaScript because it allows well it allows someone like me to do full tactful stack type of stuff without having to learn another language which is cool there's nothing wrong with knowing more than one language and that's awesome if you do but there's only so many hours in the day and so much time you can dedicate to learning so if I can dedicate all my time to JavaScript then I'll get better at that then if I was learning more than one language so the general concept of it I'm really a fan of I don't have I wouldn't say I have a ton of experience actually doing serverside JavaScript with node I do stuff like this like we've been doing you know just some I don't know I guess this is basic stuff file upload things some routing so I I hope to do more with it and yes so that's my I guess I don't know if that's what you what you wanted in terms of an opinion but I just think it's it's really really cool to be able to use clientside and serverside JavaScript and then it allows you to do other stuff like people are doing Internet of Things with JavaScript it's like everything that you can do with other languages it seems like people have figured out how to make it happen with JavaScript and I don't know that's really cool it's not like I think JavaScript the greatest language in the world I don't think I've been supposed to enough languages to really make a decision like that but it's what I know the best so the fact that you can use it so many places means that I could potentially code those different things and that seems really cool and fun for me let's see all right so I've got through all the questions let's go back let me set my timer this time so we'll definitely do yeah we'll probably do one more Pomodoro session and then the to finish up I'll answer any questions you all have if you haven't seen this this stream before the end is saved for questionandanswer from the live chat so stick around for that if you do have questions or if you'd like to stick around and help answer that would be awesome as well this stream benefits greatly from the expertise of everyone who's watching and contributing if it was just based on my expertise it would not be nearly as helpful to you all okay so yeah so this is working now we want to yeah the second step was to check the bytes received and then stop hmm stop it based on bytes received this is going to be a little bit more tricky so here's why if I try to look at bytes received here in file begin it's gonna say zero or at least for the first time that that runs it's going to say zero so there's going to be stuff already getting uploaded which I guess is fine yeah that's probably fine because what I want to do is just cut it off at some point okay so let's try it out let's just console.log it first to see what we get and let's get rid of this okay and I'm gonna have to upload multiple files to really see this in action now the what this isn't really going to protect against I suppose is one really big file so I guess I'll still have to find some way and there may not be a way with formidable to do that I mean progress those go with chunks all right let's just try this first and then we can worry about the other stuff okay so let's see what we have okay yeah definitely so we did get we actually did get a value for the first time which is cool when we tried it before I think I think we tried it yesterday we did get zero at first so that might actually be useful let's try it with one file and see what we get okay so here's my bytes received okay this might actually work then if we if we are actually getting some something here this will be somewhat more useful than I thought it would be so let's just I guess put in okay so one if I can try let me try so I'm gonna try to upload a really big file so I think I do have some videos recorded at pretty high quality that will definitely be more than what do we have ten megabytes so let's try that okay let's see here we go here's a 40 megabyte one all right here we go yours there's a 500 big one alright so I'm gonna try to upload this 500 megabyte file and let's see what happens Wow well I've never seen the loading modal before because everything's uploaded so fast but I finally saw it and it looks great so that's good so I I did it on my other screen but let's see all right let's see what value we got oh no it got rejected because of the file types and QuickTime oh I'm gonna have to rethink how I'm checking these file size okay cool so this this wasn't the result I was looking for but I'm glad it happened because this uncovered a bug that this could have been really bad so what it looks like though is at least for this file is that would have gotten through I mean assuming that I could have faked the bytes received thing there the the bytes expected thing this would have gotten through because that that first time that fired you can see it's it's only registering 16,000 bytes so yeah so that's not going to protect us from huge files trying to get uploaded but the problem is excuse me it's yawning the problem is I pulled this from one of my previous projects and in that project I was actually checking the file name and not the file type so these aren't gonna work for everything so I you can see that I'm allowing the MOV extension but that's not what came up as the type the type and was QuickTime so I'm gonna have to get another list I'm not gonna search for a list right now during the stream but I'm gonna try to search for a list of common file types and I'm gonna I'm gonna replace what I have now with that list okay I'm gonna keep this in here because it still could have some use but I don't know I guess we'll have to find I'll have to think of some other way so for right now we are protected from lots of smaller files being uploaded so that's good I mean that's better that's better than nothing at this point that's a step forward I still would like at the very least I would like some sort of protection from very long file input values and from someone trying to upload one very large file and the the final thing is assuming that the bytes expected could be faked to make it appear less than it really is which I'm not sure if that's possible or not if I find out that that's not possible then we're fine but I don't know you never know people come up with all kinds of ways to get around things all right so I'm gonna commit this and then push that to get up and see how much time we have left Oh straight here okay all right so we checked in what we changed good only the server J s has changed which is what we expect we're committing with the am flag which means we're adding and putting a message in at the same time we're committing let me say okay that works yeah okay so a lot of our tests are running now if you have a project without tests on it that will have a precommit hook that run on a precommit hook then you're not going to see this and it's going to be a lot faster but if you do download this repo you're gonna see something like this so now you won't be freaked out when you see it I guess and remember if you do want to check out what we've been doing you have to switch to the file type check branch and if this code is not on the master branch okay so twelve minutes left in this moment or a cycle I'm not sure that it's worth it to try something else the odds of me actually getting something else to work in ten minutes are small especially since I'm not really sure what I want to do next so this might be a good time to take questions yeah so I'm gonna go to the live chat now I'm gonna scroll up to where I left off at there's not a whole lot in the live chat so it shouldn't take me too long so if you do have any questions please get them in there quickly so that I can answer them otherwise if you don't if you can't stick around for the question answer session and you're just here for the code thank you so much for watching please watch again sometime if you can and let's let's go to the lodge where did I stop alright so I'm scrolling up to the live chat that has the timestamp of around 1100 a.m. okay cool so no D had asked the question about nodejs and in response he says make sense been trying to learn it the past few weeks cool yeah I I think it's definitely worth while there's so much you can do with node nowadays so if you're if you're not sure what what to learn and you're looking for something to try out I think Note is a good route to go right now okay so Bastian says that I shouldn't be looking at bytes received through the air if the bytes expected or bigger than what you want okay and I'm there too saying but I'm also checking to make sure bytes received is less than by it's expected to separate checks yeah that's that's what I was trying to do Sebastian says I may be wrong but if you stop and upload based on what it's already uploaded you might end up with filled halfway uploaded aka useless files yes so what I guess I'm not so much worried about useless files so potentially so there's going to be clientside checks in place so people who are genuinely trying to use this for what's an intent it's intended to be used for are going to be stops clientside from uploading anything that they shouldn't be uploading in terms of type or size what I'm worried about on the server side are people that have circumvented our clientside protections so I don't really want their files anyway so if I only get a half a file and it's useless I'm fine with that I would I would prefer getting nothing but if I if I need to stop it in the middle that's fine with me as well okay umberto says that he would send a message back to the client indicating the upload failed and the case that receives is greater than expected yet anyway um I'm not I'm not sure if you sent that message before after I explain my reasoning why so I'll just reiterate it again for anybody that wasn't around when I did explain that so normally I would want to send back a message but in this case as I said the user if if that occurs it's likely that the user is trying to do something malicious I don't really care about sending them back anything telling them that it failed I would almost I would rather have them think it succeeded and then have them know that it failed and try something DIF African flight star says this is really cool for a newbie coder like me to actually watch live how the experts do it very helpful thanks for saying putting me in the category of expert I appreciate that I don't know that I would put myself in that category but I'm at least expert enough so that people pay me to do this anyway hopefully you do get something good out of this and if if you're new to coding and you have any questions definitely let me know in the live chat or you can message me on Twitter or some other social media platform Dave says sorry if I if asked only just been sent tuned into what program alright so profuse assists okay so the question from Davis is basically what programs do you use dave is just starting to learn again on free code camp if you're just starting on free code camp you won't really need any separate programs at first once you start to get into some of the projects some of the later projects you'll need it so I use the adam text editor that's 8000m it's free our side code editor and for my terminal I use I term I think that's Mac only for Windows I think I use Commander it's a Cmdr I'm pretty sure that's what I use I haven't used it in quite a while though so I can't remember for sure I think that's that's it for you know any special programs I mean other than what I have you know so I have no js' installed on my computer and NPM and then I install my packages through that so but that's probably if you're just starting in with free code camp that's a little bit more than need to worry about right now I would do your free code camp things and when you get to that point where you really start you need to develop things locally on your own computer you know then you know get into some of you know learn get learn how to use NPM kind of easier way into it sometimes it is helpful to be able to start with somebody else's project and kind of see how they have it set up as long as it's not too complex but anyway you will get a lot of you'll see a lot of how that works on these streams it's not really a tutorial but at least you get to see it in action and I'll do my best to explain it and feel free to ask any questions along the way if I'm going too fast or something you're not sure how somethingsomething works okay cool African flight starts says just signed up with free code camp and I'm looking forward to diving in that's awesome that's really great seems like the last few streams I've had a lot of people say that they're just starting with free code camp and that's great it's good to hear that a lot of people are getting into that I think it's a great resource thing I mentioned before but my wife actually just started I think she's only on her second week of doing free code camp but that's kind of cool now I can talk about coding stuff with my wife and she understands me so anyway Dave said thank thank you for the info but you're welcome hopefully it's it's helpful to you all right so I've gotten to the end of the live chat and I think we're actually we're actually going to be finished in under an hour and a half which that may seem like a long time to you but compared to some of the other streams we've done this is one of the shorter ones so I will be back tomorrow I will just lose today Wednesday tomorrow's Thursday yes it's Morris Thursday I should be good to go at the same normal time yeah so probably expect the stream to 230 p.m. normal time Friday extreme will probably be a little bit earlier than normal as well but I'll let you know more about that tomorrow and on Friday morning but until then thank you for watching thank you for helping out in the live chat all your contributions I really appreciate it and have have a great day