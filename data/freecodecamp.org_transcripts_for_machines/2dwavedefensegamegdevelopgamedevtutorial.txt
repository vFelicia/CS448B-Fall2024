learn how to create a wave defense game without coding using gdevelop gdevelop is a no code open source game engine this beginner tutorial covers player movement firing a bullet enemy logic spawning enemies and more there's a link in the description to download all the free assets used in this game in this video I'm going to go over how to make a wave defense game with gdevelop the no code open source game engine so here I've created a blank project no events no objects no nothing the first thing I need to do is change the properties because the assets I'm using are designed for 768 by 432. now the first thing I'm going to do is set up the area we'll be playing in this is going to be a wave defense game starting out on a single screen so I'll create the Sprite object for the floor all right now I'm going to go to the event sheet and at the beginning of scene I'm going to zoom the camera in and then Center that camera on the object foreign and there we go I just realized I need to change the properties for importing assets if you saw the image was a little blurry because it's pixel art and so now that I've imported that image in I need to change the smoothing all right there we go nice and crisp so now that I have the room I'm going to add the Sprite object for the player character one animation being for run and the other being a single frame for idle I'll put the idle animation first so it's the first one that plays now for the Running Animation I'll need to set this to Loop and find a speed that makes sense yeah there we go I'll press apply and now I've got a little armless character in scene to get it to move around I need to give it the top down movement Behavior which is right here I'll leave all of its variables alone oh wait nope I need to change that variable rotate object needs to be turned off there we go now to animate that character I need to go to the event sheet where I'm going to use two different events where if the character is moving we'll change the animation and if it's not we'll change it to idle so now if the character is moving the animation will play running and if it's not moving it'll be idle here we go now the next thing for a wave defense game is the gun so I'm going to add the gun in as a separate object and put it into the scene next I'll need to go to the player and give it a point I'll just call it gun and then move that point down to the center ish where the hands would be that's good for now and now I've got to go to the event sheet and tell the gun to be positioned at that point so to get that point I'll type in player point quotations and then I can select gun alternatively I could do this y position of point select the player and then select gun it's the same way to get it but once you get used to typing it in you just do that and we also want the gun to rotate towards the mouse so I'll use the cursor X and the cursor y and the speed will be zero so it happens immediately and now if I preview the game you'll see the gun is rotating towards the mouse but the position is a little bit off and the reason for that is simple the origin point of the gun is in the top left so if I'm positioning the gun on that point on the character it should be in the center which in this case is 14x8 here we go gun is in the center now the next thing I want to do is have the character flip so to do that we'll set it up so that if the mouse is on the right hand side of the character they'll look right and if they're on the left hand side of the character they'll look left so we need to check if the mouse is above or below the X position of the character so on the right or the left okay let's see if I did that right nope that's backwards there we go now for the gun now the gun will want to do the opposite four because it's already rotating towards the mouse we need to flip it vertically for it to make sense and there we go character moves is animated and the gun follows the mouse the next thing to do is firing a bullet so we thankfully have a wonderful extension in gdevelop if I go to the behaviors and go to search for new behaviors I can look for the fire bullet extension and add that it comes with a lot of great things but we don't need any of it right now we just need to add a bullet object which is just another Sprite object and then add an event for firing the bullet when I release the left Mouse button and I find for this it's best to have it so that the bullet Fires at the angle the gun is facing so we'll be creating a bullet but we need an X and Y position to create the bullet at so for that we'll go to the gun and add another point and we'll drag it right there if I go back in I can use the Expression Builder and get the X point and get the Y point we'll angle the bullet at the same angle as the gun and set it to go at a speed of 100. oh there we go it's a little bit off but that's because we haven't set the center point there we go now I just need to set it up so that it only happens when I release the left Mouse button all right and now for the sake of performance we'll make it so that the bullets delete after they get off screen and there is an extension for this but I found it's easier to just use the distance from the player if the camera follows the player then once the bullet gets a certain distance away from the player it's off screen whoops this event needs to be inverted in order to work there we go you see it gets deleted once it gets a certain distance away from the player there we go object picking so now we need to change that so it's wider than the screen and that'll do it now for enemies I'll create another Sprite object for the enemy okay then I'll add the health behavior to the enemy so we can easily kill it I need to search this one up with the extensions again and just like firing a bullet there's lots of variables in there to play with but we just need the health and that's it so I'll set the starting Health to three and the maximum as well and now in the event sheet we'll set it up so that if the bullet is in collision with the Enemy foreign we delete the bullet and then subtract one Health from the enemy by using the apply damage to an enemy action there we go and the last thing we do is check if the enemy is dead and if they are dead delete them there we go one two three now we'll want to change the Collision masks on these two objects so that they fit the image more foreign and that just makes more sense and now the next thing I'm going to do is have the enemies spawn outside of screen and come in and we'll have them do that towards some Center object in the middle whether it be a baby or a pet rabbit or whatever I'm gonna be doing the spawning with spawn points as points for the enemies to spawn at and now in the events I need to set up a timer that will repeat and when it finishes repeating it will pick one of these points and spawn an enemy there foreign so to make this spawn at a different point each time we need to add the condition pick a random object and now every time that timer hits one second it will pick a random spawn point and create the enemy at that point and then we need to reset the timer okay we can't see it so hold on here we go one two three four okay now the enemies need to spawn and move towards the center object so we're going to apply a permanent Force to get them there making sure not to use the physics Force because we're not using the physics engine so now we have the enemy moving towards the center with a permanent force of 20 pixels per second there we go and now to give the game a fail State we'll set it so that when the ghost is in collision with that Center Point the game scene restarts and we're doing that by just changing the game scene to what it is already so if we start it and they run into the center point the game will just restart oh that's something to fix gonna set it so that the screen doesn't expand and there we go that's the beginnings of a wave defense game and now with the basic setup done we're going to move on to some game polish fixing up some of the weaker points of the game adding some sound effects and shake and all of the things that make a game feel good to play the first thing I need to do though is go to the event sheet and organize a little bit because this is going to get a bit chaotic if we don't organize from the beginning always check to make sure things are still working the way they're supposed to yep good now we can begin so the first thing that we're going to do is deal with Z ordering and the position of the enemies because we want our enemies to be looking at the position they're going to rather than just off in the distance so for Z ordering we're going to do something that makes a lot more sense when you see it in the action so we're going to go to The Ghost and move its origin Point down to the center bottom right there this is going to be the point where Z ordering kicks in and determines whether the ghost will be in front of or behind other objects in the scene and we'll do the same thing for the player as well now there is an extension for Z ordering but I personally don't like it because it means you have to add the behavior to every single enemy or object that needs to be affected personally I just like to put things into a group and use that group for the ordering okay so now that we have this and all the points have been changed and everything is in a group we just need a single action for Z ordering where we tell the Z order of the player and the other objects to be equal to their y position which is the Y position of their origin point which is now at their feet and that's it now when I press preview and the go start to show in nope uh one second there we go I had to change the gun Z order to be one above the player so it doesn't go behind them all right now as the ghosts spawn in I'll be able to walk up to them and show you the Z ordering happening and you can already see it with these two ghosts the one that's lowered down is behind the one that's ahead of it but if I go to this ghost I'll be hot nope one second okay if I go to this ghost and behind it now and now I'm in front of it behind in front behind in front behind in front and it's gonna happen for all the ghosts in the scene to help give the game depth so things look like they make sense all right now I want to make it so that the ghosts are facing towards the center point so they're not going backwards okay so I've set it up so that if the enemy is to the right of the center point it'll flip and it's to the left it won't flip so that way when they spawn in from the spawning action it'll check this and then flip them accordingly and there we go now they're all looking at the center point when they spawn in so they're not going in backwards like they were before the next thing I would like to do is give them health bars and there are a lot of ways to do this like you could use the prefab objects that we already have in game and that's a great option but I'd probably use that for the player because the player is going to need to adjust for different things and get healed and so on but just for an enemy health bar you can just use a Sprite object actually it's probably better to use a tiled Sprite for this you got to put in the size of your object or the image and now we'll want to spawn these in over the ghosts whenever we spawn in a ghost so we'll be creating the health bar when we create a ghost object and then we'll be using the action to link that health bar to the ghost which will let us do something later and because The Ghost and the health bar created at the same time when we tell it to link it's going to link two of those objects together because they've already been picked and it will ignore all of the other ones in scene so now that it's linked I can make an event that positions ah shoot you know what this is actually easier with a Sprite object because a Sprite object you can change the center point hold on foreign first because it will get rid of the events in the event sheet we just need to change it to the new object and now delete the old one okay there we go now we want to position the object using both the X and Y positions and we actually want to use a point on the ghost object so we need to put that point in call this health bar and we want that to be above the ghost in the center I should probably do it and we want to change the health bars origin to the center depending on the kind of game that you're working on this may be a thing you need to do all the time or not at all so now that we have the point somebody asked about this in the last video so I'm going to show you this is just a regular position action it's not a position to a point or anything like that it's just a regular position action in the position section of the actions and then here we can press on the Expression Builder search point click on the X position of a point select the ghost enemy object Select Health bar because that's the point that we just made and then do the same thing for the Y position so now we have the X and Y position of that point so the health bar will be positioned at The X and Y position of that point on the enemy object but to make sure it picks the right ghost to be above we need to use the condition take into account linked objects and there we go now let's see if that worked it should be cut oh no no health bars no health bars let's see what's going wrong we'll just disable that oh the other ones are being left behind one enemy has their health bar okay there we go okay so now we have each health bar following each ghost what I had to do was use the repeat for each instance of enemy or whatever object you want event so this way for every single ghost on the scene it's going to take into account if the health bar is linked with the Enemy and then position that health bar on top of that enemy so before it was doing it for one enemy and because it was doing it and doing it for one enemy it was content because it was doing what it was supposed to do I didn't tell it to do it multiple times so it did it once and it was okay and now we're going to need to delete those health bars because otherwise they're going to get left behind when the ghost dies watch now just floats there so when the ghost is dead take into account the link and delete the health bar and didn't work there we go no no I deleted all of them okay there we go don't judge me I've only had three coffees let me just link that object picking video again up in the top corner so now the health bar deletes when the enemy does part of the problem was if I put it up here yeah so if I put the enemy above the event then this happens first and there's no enemy to check for this action if I put it down here then the health bar gets deleted first and then the enemy now we're gonna do a hit animation and we're going to start by giving the ghost a knockback animation we'll call the first one walking and the next one hurt there we go now when the enemy gets hit with a bullet will change their animation to hurt change it by name and we'll make an event that checks to see if the enemy's animation is hurt and if it's finished and if that's the case we'll change this animation back to walking or floating I guess but we're gonna make other enemies and it's going to make more sense then okay and the last thing we're going to do is make it so that if the enemy is hurt they stop walking which actually means that we need to change the way enemies go towards the center point so instead of moving them with the permanent Force we're going to change this so that if the enemy's animation is not hurt so if the enemy's animation is not hurt we'll use an instant Force instead to move the enemy there we go let me just fix the zoom not disabled anymore there we go oh whoops So currently when you add a new animation to an object it has those original origin points because it doesn't want to conflict with the existing ones so we can go to the animations go to hurt just use the same points as the animations nope not this one hold on hold on I need to go to walking flip this switch turn it on there we go and now this one has it if I done it the other way around it would have applied this image's points to the other one which this one only had its origin point and Center so that would have been a bad thing cool so now both animations have the same points and can be used as we want them to here we go so shoot it hurt hurt dead hurt hurt okay so you might have seen there that when I shot a ghost and it was already in her animation it didn't change or react and so now I've changed it so that when that animation triggers it's actually going to set the frame to zero so if it's already in that animation it's going to restart it so I said three one two three one two I'll try to show a good example of it happening and I noticed the Z order for the health bars were kind of off so we need to fix that too so we'll change the Z order for the health barriers to be equal to the enemies Z order uh Plus one sure actually if we make it even then it will be like a flat image and that will work out better let's see if that worked no it it didn't work it doesn't know which one to check okay now this isn't a big deal but for performance I should probably do this that way we don't have the same event triggering twice checking every single enemy so now within a single event where we're checking to see if the enemies are linked to the health bar and then changing the position and changing the zorder so first we need to make the health bar represent the actual health of the ghost so when they get hit take into account the link and we don't need the four each for this one because we've already got the ghost picked and we'll change the width of the sprayed object to equal the current health divided by the max Health times the original size and to get that we can use the Expression Builder this is using the health extension so if you haven't got that extension installed this won't be there so the health points of the enemy that's the current health divided by maximum health of the enemy times the original width which is 12 pixels because if we go back to the object and open it with piscal we can see it's 12 pixels wide so it's the current divided by Max times 12. and we'll see how that works there we go one shot left boom gone so now that the health bar is working I'm going to adjust the speed and everything of the character and that's in the top down Behavior because that's what we're using to move the character all right next I'll add the collisions for the walls because someone asked for that in the comments I'm going to add a sprayed object for that and just spread it out over the walls okay now I can go to the event sheet and go to the players group ment and make it so the player gets separated from the wall and the player is the first object so that it gets moved and not the wall when separating the two objects all right now when I go in I cannot walk past the walls there we go now it looks like I can walk up to the wall but I get stopped down here I could have gone into the room itself gone to the Collision mask and added in several different kinds of collision masks for the walls which I've done before but honestly it's a slow way to do it if you're just using a single room like this or something static it's just easier to build out a collision mask like this with a separate object it just means that at the beginning of scene you need to hide it and it's gone but I still can't walk past him the player just can't see it and while we're doing collisions we should probably also do the ghost enemy foreign so here in the ghost enemy object we can make a new event and then use the action to separate two objects to make it so that the enemy is separated from the group entities yeah there we go so you can see they're pushing away from each other I just noticed actually hold on I never changed the Collision mask so I go to this one yeah it's the full size of the image so I need to go to this one which is the Collision mask that I once shared and toggle it on and this will share same Collision masks for all animations which means if I go to this one it'll be that so now when I shoot them it doesn't push them all away they do stop though because there's something in front of them trying to stop them from moving and that way they won't be able to overlap and group up like they did before and now up to this point I've been able to spam the bullet as fast as I can click it'll spawn well if we go to the gun and go to the fire bullet Behavior you can see that the cooldown is 0.1 seconds and we can just change that to 0.5 or something like that foreign and because there's a cool down on there we can change this to actually be Mouse button is pressed instead so that way we can hold on to the button and it'll fire at that fire rate you don't want to go too fast with bullets because there's a chance for them to clip through the object before it gets recognized as a collision but that's pretty good and now for firing a bullet let's add a sound effect we can use the condition has just fired for the gun to play a sound I don't have one picked yet so I'm going to go to create one and I'm just going to pick something randomly until I get something good so we'll call that gun save volume and of course randomized pitch because if you have a sound that plays repeatedly you need to make sure that it randomizes so it doesn't drive your player nuts so 0.8 to 1 means it'll be a little bit less or exactly the pitch of what it was before all right now there's a secret weapon for all game devs out there who might want this camera Shake and now we can go into the events and add in screen shake when the bullet has been fired it's a bit too intense so we need to change the settings to make it a little bit less annoying and we do this by going in and having an action and we do this by going in and using the action to change certain aspects of the shake alright so now that we've set up the camera settings using the actions at the beginning of scene we have something that's pretty okay to cover up those edges we're going to change the background color so we'll go to piscal use the Color Picker tool to get the color and then apply that color to the background and there we go now when the screen shakes you can't see those edges anymore now one more thing that we can add in is some object shake for the gun and that again is an extension called shake shake object put that on the gun and then in the event sheet at the point where the gun is fired we'll set it so the gun shakes along with the screen to add to the effect and let's see what that looks like okay now one more thing I'm going to add in is my secret weapon so I'm going to add in a vignette turn the grid back on so it goes in place properly and to make sure the vignette stays above everything I'm going to put it on a different layer select the vignette go to properties and change the layer to vignette now I will need to zoom in because otherwise it will do this because the main game Zooms in and the vignette doesn't and there we go so now on the edges of the screen the character is a little bit darker and on the inside it's a little brighter and now that we've brought the game up to a certain level of Polish we're going to add menus and settings to the game to make it a more complete package so let's get started so the first thing we need to do is go to another scene for the main menu I'll start by adding a bitmap text because the resolution of this game is a little bit smaller than you would normally make the regular text object would look blurry in this setting so you really want to use a bitmap text if you're using any resolution that's not at least 1280. for bitmap text you need the bitmap font and an atlas image and the font basically tells the engine how to break up the image to turn it into a font and the image can actually be edited with any kind of image editing software so you can make some pretty fancy custom text with bitmap text and now I'll just copy that to make some extra buttons for the menu before I make the rest of the text objects I'm going to install the extension button States and add it to the play text object because then I can use that as a button in the event sheet I can use is clicked as a condition for future events now I'm going to create a marker object that I can use to Center the camera on and I'm going to create two of these so that when I press settings I can tween over to the next section of the menu and show the settings so I've got the main menu part and the settings part and from here I can use the user interface objects like the toggle switch buttons and Sliders to create my settings menu and I'm going to start with the sliders all right and from here when I press settings it's going to Tween the camera over to the settings menu okay animated settings marker object because otherwise I would need to use variables to decide which one was which and this is less complicated so we'll be tweening between the marker for the main menu and the marker for the settings menu and there we go so we're tweening to the center X of this bar and the camera's Center y position which is already at so that won't change and now I'm going to set it up so that when I press back we go back to that original menu and there we go and actually I'm going to set it up so that the title stays in place while the menu changes just as a personal preference so I'm going to make a new layer called title and then put that title object on that layer so it won't be affected when the camera tweens all right next I'm going to hide those bars okay and now the rest of the buttons thank you so now when the play button is clicked it will change the scene to the Untitled scene which is our original game scene and when the back button is clicked we'll quit the game here we go and when the quit button is clicked we'll quit the game there we go so now all the buttons do something now let's make the settings do something so we're going to create some Global variables we'll make a structure call this settings make one for Sound and Music all right now go back into the event sheet and make it so that the value of the sound bar or the music bar dictates that variable and we'll use the Expression Builder to get the value for that bar okay so when the sound slider bar is being dragged we change the global variable sound settings that we just made to equal the value of that bar and we'll do the same thing for music alright so now when the music slider is being dragged it'll change that value and if there is music being currently played or sounds being played while that slider is being moved and you want them to dynamically shift you'll need to change that as well using one of the actions for volume of the music or Sound on that channel so you'd slap that in right here but for sound effects we'll use this setting when playing those so if we go back into the main game and find the point where the sound for the gun is played will change the volume to equal that Global variable so now when we change that setting it's going to affect this sound when it gets played so now if I open the menu and go to settings I can change sounds to be up here at 100 go back press play you can hear the sound played but if I go to the menu go to settings change the sound down low to just above zero it's been turned down but every time I go into the game it's going to be back at that same level again so we need to save and load that in and it's been a little while since I've done this so bear with me so we'll be writing a text and we'll be writing that entire setting structure into a save file outside of the game so settings so when we click back it's going to write settings into an external folder or external file outside of the game and then at the beginning of the scene we'll read this text settings from the storage settings and store it as a temporary settings text and then we can add the action to parse or convert this text into our Global variables so we select the settings structure and then we're going to change the position of that slider bar based on the new value so we're setting the sound slider and music slider to the global variables that we just read into the engine and converted two Global variables because they come in as scene variables and then we use those global variables to set the value on those slider bars so let's try that out okay now press back and that's going to be where we save the settings so now they're saved so if I exit and preview it again and go to settings they didn't save okay I know what I was doing wrong so it's not just a string of the structure you need to actually convert the global variable to a Json first now slight settings apply so now it's saved as a Json then it's going to get read back in and yeah okay preview settings set the settings back quit preview settings and there where they were before awesome okay so now the settings are saved when we come back in same thing when we go play the game if I skip back to here settings they're saved okay great so they save as a Json here and then the red back into the engine as a temporary file in the scene variables and then they get converted from that Json to a readable Global variable in settings cool and then these two actions change the sliders to represent what they actually are cool cool cool now the next thing is highlighting so when you hover over a button it lights up if you have a button object this will happen the way it does already it just changes the animation for the object one of these objects here the panel Sprite buttons but if you're using text like this you instead need to add an effect to it so we'll just add this to all of our buttons and then we'll create a group and call it buttons and we'll add two events one for if the button is hovered then the effect is on and if the button is not hovered then the effect is off we'll use the group okay all right so if the button is hovered it's on and if the button is not hovered it is off and if the button is not hovered it is off here we go all right now just make this blend in with the actual game itself we'll snag this color and drop it in here there we go now really quickly the last thing I want to do is add a transition really quickly so for this we're going to go to the extension list and add an extension for transition and with that installed we're going to add a paint shaper object change the fill color to Black and I'll put it in the scene so it's there now we need to give it the behavior first so now when the play button is clicked thank you okay and we'll change this so that when the transition finishes then we will change scenes we'll want to put this on the title layer so it's above everything else above the title specifically okay and you'll notice on the edges it doesn't reach the edges before the transition happens I've noticed that to be a thing that can be tweaked so we're going to go to add layer call this transition transition layer and then at the beginning of scene Zoom camera transition layer by 1.5 now it goes to the edge of the screen and then for the other side we'll do the same thing so we can just set this to be a global object awesome go over here place this into scene add a transition layer put this onto it and then do the same thing the only difference is that we need to do the reverse now for the transition so it shrinks instead of expands so we'll set this to Circular again and backwards this time instead of forwards so when this scene starts nope oh this is in seconds one second there we go okay so now when we press play does this and then this and we're into the game now with the menus and settings done we're going to move on to some more game mechanics and we're starting with leveling up the very first thing that we need is a leveling bar and thankfully G develop has one in the asset store that will match this game's style already we just need to put it on a different layer so it's above all of the gameplay alright now we need to make some scene variables for leveling up the first one's of course being the current and maximum experience for leveling up and then all of the stats we want to actually level up start with something small for the maximum experience points and now we need to link the resource bar object with those stats and there we go now it's 0 out of 10 because 10 was the amount of experience you need to actually level up but now we need experience points and for that I'm going to create a new Sprite object and just make a little white dot to use as the experience point that is way too big that's much better okay and now we'll make it so that the ghosts drop these whenever they die there we go and then we need to be able to pick them up to use them as EXP foreign let's see if that worked there we go now when we kill a ghost and get close enough to the experience point it adds it to our scene variable which is used to control the EXP bar but running this every single frame would be a lot so we're going to change this to this and this so it's only doing that whenever we actually run into any XP point and to fix this at the beginning of scene I'm just going to change the default values of the bar so now they line up but that's not very fun to look at so we're going to change this so that the points go to you whenever you get close enough and then when they get really close to you they'll actually get picked up thank you and there we go maybe a little faster though so now we're able to level up but what happens when we actually reach the max level currently nothing but I'm going to create a new layer with some buttons on it to spend points whenever we level up again adding the bitmap font that I added in earlier and because people have been asking this font plus all the assets will be available in a folder in the description from now on so you can actually follow along yourself thank you thank you all right so now we have a text object that says power fire rate and accuracy that we can modify when we update the stats and buttons that we can actually use for those stats one for power one for fire rate and then one for accuracy and then for accuracy we actually need to tank the accuracy to make it make sense we'll change this to 20 and see how that does zero would be perfect accuracy 20 is off by an angle of 20. that might be a bit too much but it's fine for now alright so we'll hide the level up layer and then in the event sheet make it so that when the current exp level hits the max we'll pause the game show that layer and then when they spend their point on that thing go back to the game again I always set it to greater than or equal to or less than or equal to just in case something happens where you pick up two with the exact same frame or something like that it's just safer that way all right so now when we hit the maximum number for the XP we'll set the time scale to zero show the level up layer and then set the current exp back to zero so we start over again and while we're doing this it's a good idea to have the scaling happen here so we'll change the scene variable for the max exp to something like twice of what it currently is there we go so now when this happens well let me just show you actually oh I need to be good at the game to actually show you I guess and there we go now we've now the game is frozen and this should fix itself once that's done and we can press on these buttons no we can't we can't do that yet um okay so we need to add this part into the actual event sheet and while I'm at it I need to add a darkening layer here so it's not this bright okay so I used a shape painter object to make a black rectangle the size of the screen and then change its the order to be lower than everything else on that layer and we'll change this to 180 and that way it won't be completely black it'll be transparent and you'll be able to see the background so the next thing we'll do is make it so that the buttons actually do something and when you press them you go back to the game with the improved stats I'll put all of the buttons into a group to make it easier now because we have the button State Extension installed you can see two of them but this is for the panel spray buttons and this is for the button State Extension so now when one of these buttons gets pressed we'll hide the level player change the scale back to one and then update the bar but now for the actual leveling up part so because we have the nope the gun object with the behavior on it for fire bullet this is what we'll be updating so we'll be changing the fire cooldown rate and the angle variance whenever we change the level of the stat but also we're going to do that for when we hit the enemy so right now it's applying one point of damage to the enemy but we're going to change that to the stat for power so that when they get hit they take more than one hit worth of damage thank you so for the accuracy I've changed the angle variance which is how much it'll Miss by by multiplying it by the angle variance which I got using the Expression Builder times 0.9 so each time this gets picked it's going to hack off 10 percent of the current value which means as this level gets higher the accuracy getting added to it is going to be less and less as it gets closer and closer to zero which is perfect accuracy foreign and then I did the same thing for the firing cooldown which is the fire rate so we'll be changing the stat number in the scene variables so we can use that for displaying it but the actual change is happening here in this second action whereas for the power variable we're actually going to change that up above so right here where the enemies are taking damage get rid of that one and change it to scene variable for power so now they'll be taking the power as your damage instead of one and the last thing I want to do is change it so that the stats actually changed in the level up page so for that I'm going to go here again copy this come back here and go to bitmap to change the text of the bitmap object stats equal quotations and this is going to get a little messy but bear with me so the one quotations power so we got the power stat Plus power so now it's going to show Power to here plus this variable for power and then we'll add a plus here and another quotation there we go and so now it's this and then down here we'll do the same thing I'll just copy all of this paste it paste it get rid of the Plus on this end because this will be the end of it and the coordination and then this will be changed to this is the fire rate and the accuracy is being changed to the accuracy there we go so now power fire rates accuracy showing the variables for power fire rate and accuracy let's see if that worked um that is not how it's supposed to go that accuracy is quite a bit worse okay ah setu and set to there we go okay let's try that okay yeah there we go oh and the power is by default at zero so let's change that as well we'll set all of these to one to start with okay and I'm actually gonna add a cheat down here I usually put my cheats down in the bottom of the screen so I'll change it so that if the K key is pressed we'll change the current variable two variable scene variable Max exp so we'll just set it straight to Max exp when I press k okay so when the game starts I'll pick accuracy press k and we'll level up instantly I'll press fire rate and now it's changed to 20. so on the second level it'll take 20 to level up I'll press K again upgrade power 40 announce two two and two upgrade power again and when I shoot this ghost it should die in one hit yeah and that's because now the power is level three so we're doing three points of damage when we hit them and the fire rate should be up let's try to crank that up oh yeah that's way faster accuracy is a little bit too much I think though I may need to turn that down a bit more okay I just noticed that the background darkening layer isn't showing up so I need to fix that and the problem is that it's drawing it right here but it's only doing that once because this is only true for one frame and if we go to the paint shaper object no not for transition for darken uh it is clearing the rendered image between each frame so it's only doing it once for a single frame and then disappearing so I'm going to turn this off and turn that off because I don't want it relative to the actual position of the object in scene and I'm going to change this to be at the beginning of scene instead so it does it once at the beginning of scene and then doesn't clear it away afterwards and we'll see if that works so now if I press k huh oh because the base layer is zoomed in and this is zero so that's why it's pulled over to the left okay so I need to change this to the level up layer there we go because there's two different cameras the base layer is zoomed in and the level of layer is not zoomed in there we go so now it's the whole size of the level up layers camera and if I press power it goes away and level up again it's there great I might change this to be down here though my changes to here instead of here so when I level up yeah it does it automatically and it's already down to zero yeah there we go now that leveling up is done we're going to go ahead and add some more enemies to the game to give it some more variety we'll stick with basic enemy behaviors for now but we'll add some more interesting behaviors later so let's get started currently there's just the one enemy type so I'm going to add two more Sprite objects with the same kind of animations and variables to go along with it so I'm just going to copy this one and change out the images foreign foreign I'm going to put them all into a group and I'm going to call it enemies the game they should react just like oh no wait hold on okay so in the event sheet I can swap out anything that was called ghost enemy and change it to enemies the group make sure that's the right spelling all right and if I press replace all of these points here should all be changed to enemies of the group instead just need to double check that it actually worked okay now if I start the game they're getting hurt they're going towards it obviously the health bar is breaking because they weren't supposed to have that there we go okay so that worked out now we need to be able to spawn those enemies in separate from the way that we spawn in ghosts and for that I'm actually going to implement a wave system so I'm going to add a text object called a wave number uh pick the same font I guess and we'll put it on the UI layer there we go and now we'll create a new timer call it wave and then add an event where we check if the timer is above let's try five seconds just for testing and we'll create a scene variable call it wave as well have it start at one and we'll change this to one okay and add the action to change the scene variable Wave by adding one to it all right there we go and we'll change the enemy's spawning rate to equal the wave so the higher the wave is the faster enemies will spawn let's say three seconds divided by the variable of wave variable is just the scene variable of wave so every five seconds that will go up and we will modify the text of the wave number to equal in quotations wave Plus that um oh it needs to be a text variable so we will change this to we'll search through the Expression Builder to get it because it's easier scene variable number wave there we go it adds the tostring for us to make it a text instead of a number okay now let's try that all right so one enemy spawned because we're on Wave one so it's three divided by one so it's three seconds this didn't change uh they seem to be coming in faster oh no they no they're not need to reset this and change the scene variable to be equal to one this needs to be wave as well wave there we go okay now try this okay so there's one enemy we're on Wave three now so I should get one every second from wave four so I should get one every threefourths of a second and it's going to speed up to the point where it's Gonna Get Ridiculous Okay cool so that works but we'll change this to something more reasonable like 30 seconds now on top of this I'm going to change this to the health of the enemies is going to actually change along with it so when we're here and we create the enemy we'll change the health of that enemies group to equal 3 plus that wave variable divided by three and rounded down okay so floral rounded down if it's less than a whole number so when we're on Wave three the enemies will have four health because it'll be three plus one and then it won't go up again until we reach wave six when they'll have five health and so on and so on okay change that there we want to change the maximum and their current health as well change their health points to equal their Max health okay now let's try that out so we need to get to wave four to see this work in action oh we'll change this to five again and do that one two three one two three one two three wave four one two three four one two three four one two three four one two three oh there we go okay you get the idea so when this enemy is created their Max health and current health get changed based on the wave variable and now to make it so that the enemies spawn at different wave levels to do this we'll add another scene variable properties scene variable add I'll just call it random enemy and then when enemies get spawned I'll use an event to change that number so it picks a different enemy nope so we use random in range so it'll pick a whole number zero two and we'll need a little bit of algebra for this if we want a new enemy to show up every three waves then we can do it the same way that we did it for the health so let's go there maximum health we'll steal this copy okay paste in here so now when an enemy gets created this scene variable is going to change from zero to whatever this will be so if we're below the third wave it will be less than a whole number so it'll get rounded down to zero so this will be zero zero if we're at wave three to six or three to five this will round down to one so it'll be zero to one and then if we're on wave six or above or six to eight this will round down to two so it'll be zero two so it'll be zero one or two and then we want to stop there because if we go beyond that we'll have more numbers than we have enemies for so for that we'll use min which is another expression that's wonderful to have uh we need a comma right here yep there we go and then two nope what um ah there we go okay brackets okay so now it's zero or the wave variable divided by three rounded down and then Min so it'll pick the smallest number out of the two options which is either this or two which means if the variable forward the wave goes above nine which would turn this into three which is more enemies than we actually have Instead This Min expression will change this to two so it'll pick two instead of the three because it's the smaller number okay so this is either 0 or whatever Enemy Number we're at and now we need to modify this quite a bit by moving all of this down here we'll use the scene variable as the condition scene variable for random enemy and if it equals zero we'll spawn the ghost enemy and since it's already at zero by default then it's going to pick the ghost enemy for the first three waves and then on the if it picks one will spawn oh will spawn the spider and if it picks three or two sorry we'll spawn the Imp okay we'll see if this works so we should only see ghosts for the first three waves oh there's a spider the spider stole the health bar ah this should be changed to enemies it must not have been changed with the search bar okay so now I need to make these apply to each enemy type so I'm going to shuffle these around and change the names so they work with each enemy as they spawn and now I can copy this down for each enemy okay so now when the number gets picked for the enemy it creates the enemy object and then applies the health and creates the health bar and links it to that specific enemy and it'll do that for each one and then regardless of which one gets picked it's going to reset the timer and pick a new number so the next time it'll be a new number and we get a different enemy now let's see if that worked here come the ghosts and the first three waves more ghosts oh they're spiders or spiders they each have individual health bars and Chris power it's hard to tell but also they they also have higher health and there comes the imps yeah there we go yeah so their health was going up so the Imp at the end had five health because I shot it twice with an attack that had two power and it still had one Health left so now to make a little bit of variation there I'm going to change the base health of the spiders and imps so they'll operate differently there he goes now the spiders will have two Health the imps will have four and the ghost will have three and then that will just scale up as they go but to make them also a little more different I'm going to change how they move so I'm going to affect this event here and change this to imp ghost and spider oh that is the wrong event here here we go so I'll make three different versions for this change this to ghost change this to spider and change this to imp okay so now the Imp will move towards the center at a speed of eight so it's a little slower but it has more health and then the spider will do 12. let's see how much of a difference that is see if we want more or less maybe we need a little bit more of a difference yeah there we go that should be enough oh you're not stopping oh had these backwards there we go yeah great so now we have three different enemies in game that are a little different from each other spawn based on the number of the wave that we're in and how difficult the game is have their health scale to go along with the difficulty of the game and it's all working as intended and now that we have the basic enemies in the game we're gonna go make each one seem more unique and then at the very end of the video we're going to add mobile controls so then you'll be able to release this game on desktop or mobile devices so let's jump in now the quickest way to give your enemies some movement is to use the Boyd's extension which I kind of overuse but it's really good for giving basic enemies some more interesting movement so we'll just give that behavior to the ghost enemy there we go and now go to enemies and instead of telling it to move I'm going to tell it to go towards the center using the Boyd's extension I'm going to tell it to go towards an object and the object is the center decision wait we'll just start with 10 and see how that works and now we'll preview the game okay that's way too fast and they were rotating so let's turn off rotation and turn down the max speed a lot and let's see how that works out there it comes still too fast and it's kind of beelining for the center so we need to change that as well let's change the decision weight down to two and see what that does change it to 0.5 see if that helps oh there we go now we're getting that kind of I'll be there eventually Behavior that's what I want I'm gonna tweak the values a little bit and then come back okay there we go so I have tweaked the speeds a little bit and I've changed it so that now the ghost tries to avoid the player so when you're playing the game you can try to chase them off away from the center which makes them a much more interesting and kind of dynamic enemy but also makes them a little random so if you get your hands on this game you might want to tweak the values on these things all right now I'm going to do the same thing to the Imp but I'm going to make it different on how they approach the center I'll give them the same behavior leave all that alone I want them to be even slower than the ghost not rotate I don't want them to be afraid of the player okay and now I'm also going to give them the fire bullet extension as well so they can fire at the center there we go let's make their firing cool down every four seconds put one into the scene going to create a new object Sprite thank you okay so we'll go here make a new group imp and we'll make it so that when the Imp is no we changed the fire rate in the extension itself or the behavior itself to four seconds so we need to make it shoot or fire bullet towards a position from the Imp oh no wait fire the bullet nope here to fire the bullet from the Imp and we'll go from the Imp Center X and Y to the center objects Center X and Y and make it go at 50 I guess okay and we'll see if that works it should fire up there it is yeah okay great uh the bullets a little bit out of alignment because I haven't changed the points changes origin to its Center now see how it looks there we go great and now we'll change this down to 40 and we'll change the imps movement speed down slower go 10 and 10. all right now I want to make this so that you can block these bullets with your own body because why not I can do what I want to and you can change this if you uh open the example later and want a different thing so let's create a new event here if the enemy bullet is in collision with the player delete enemy bullet so that way you have a way to combat these bullets when they fly in so when they shoot the bullet yeah I can run into it and stop it all right I will want to change the player's Collision mask I think a little bit yep let's bring this down okay all right and that is the Imp done and now for the spider I'm not going to use boys movement for the spider because that gives like a floating effect instead I'm going to use points and spawn the spider and use the movement paper that we've already got set up so I'm going to duplicate this and call this the spider spawn and put a couple points in here foreign maybe a couple more there we go okay and I'm going to add another object in call this shadow if you've ever seen those hand enemies the evil hand enemies from Zelda back in the day this is what I'm doing adding a new Sprite object call this drop great change the center point to the center oh wait no no no it needs to be the same as the spider so spider's points its origin is 12 22. cancel Shadow points 12 22. and the drop object 12 22. and this is only going to work because the shadow image and the drop image are both the exact same size as the spider image the full size of it thank you and now we go to the spawning and we're going to create both of those objects shadow and the drop move the spider down here add a weight action let's say one second and I need to give both of these objects the tween Behavior tween wait not between Z order just a normal tween okay drop add the tween Behavior there it is all right and then tween uh y position now we'll start with scale foreign grow and we'll go to full scale easing can be linear I guess again this can be changed because it's not a big deal 1000 milliseconds and then destroy I'm not going to scale from the center I'm going to scale from the origin I believe move this here we're going to change the spot that this spawns at to the spider spawn point and the same thing for the drop object we'll pick a random spider spawn point and we'll do another tween for the Y position of the drop object and call this drop and we'll go down we'll go down a hundred so we fall down a hundred and again we'll stick with linear a thousand milliseconds destroy object when it's done all right so these here are here now we need to spawn a Bove the spider spawn point 100 pixels so that way when we drop we go hold on negative negative is up and so that way when we drop we go from 100 Above Down to the actual position itself also spawn at the same spider spawner what's gonna happen is we're going to spawn these objects between them to the right position and then have the spider spawn at those positions when they get destroyed by the tweening event I'm going to change this to zero for right now to make it Force the spiders to spawn first hey there's one okay all right so they are dropping not exactly greatly but they're dropping properly what's not happening is a scale event so we'll scale the Sprite object of The Shadow to zero so then it's going to start at zero and go to Tween up so let's try that oh there we go there's another one so that looks like they're falling from the ceiling I'm going to change the position of that spawning point though because that's a bit weird let's change the spawning point to the center there we go and perfect oh I'm going to actually beginning of scene hide those spider spawners so they're still there we just can't see them okay cool and now you can see the spiders are dropping and because the object that's dropping is not the spider itself I can't shoot it all right great so now we have three unique enemies that all act differently the ghost kind of hovers around and the Enders its way to the center the spider runs towards the center after dropping from the ceiling and the Imp will actually fire a fireball that I didn't code properly hold on okay game over we'll also add if the enemy bullet hits the center game over so we need to use or and then put this inside of the ore condition so now if the enemy gets to the center or if the enemy bullet gets to the center it's game over and we start over now let me just play test that to make sure it actually works and as a nice twist the ghosts now being afraid of you means that they won't go towards the center so you'll kind of have an ever increasing swarm of ghosts around the center until you choose to run off and grab the experience points or run off to try to protect the center from one of the Fireballs now there's one thing I did notice though and that's that these enemies aren't necessarily looking the right way anymore because the code has changed for how they spawn so I'm going to need to change this forever so they won't just do it when they spawn they'll do it always okay now I need to fix a bug that somebody mentioned in one of the earlier comments um the leveling up layer exists whether or not you can see it so even during gameplay if you click where that button is on screen you will get that level up without the experience points required okay so the buttons clicked so we need to add a second condition here for um if the layer is currently visible so we can search for visibility visibility of a layer the leveling up layer so we will only be able to click on the button if the leveling up layer is actually showing so that bug is now fixed great now the last thing I want to do in this video before I run out of time is ADD mobile controls because people have been asking for that and it's really quick so watch this joystick I like these joysticks okay we'll create another layer call this mobile controls uh we'll call this movement plop this down shrink it down a little bit because it's a bit big you can find the size you want maybe a little bigger there we go and then I will duplicate this and call it aiming all right so now movement and aiming for the player I'm going to go to behaviors add a behavior and once you've added a joystick you should have top down multitouch controller mapper top down movement analog great so I've added the behavior to the player I press preview ah I've got to put the object on the layer right mobile controls okay preview down Behavior plus this plus the mapper behavior and it works now for aiming let's plop this one down make it the same size so 96 by 96 and roughly the same spot okay all right now for this it's going to be a little bit trickier but we'll collapse all of this go to the player go to gun check if this is a mobile device and change this to not make a new action move that there all right so if it's not a mobile device we will rotate the gun towards the cursor if it is a mobile device we will rotate the gun towards the angle angular speed zero angle of that joystick so joystick stick angle I think it's two and secondary we will make sure that's right so we go to here go to aiming change this to 2 and make this secondary all right and so now because I'm on a laptop and this is not a mobile device I'm going to just remove that condition really quickly and disable that just for testing huh and put this on the mobile control layer there we go so now the gun AIMS in the direction of the joystick great okay so this will work it's just the problem is that it's fighting two conflicting orders so we will copy these and disable both of these right now just for testing and there we go now the gun and the player rotate with the joystick because we're using the condition joystick pushed in a direction and then using the proper number and joystick name and then the direction so if it's pushing right it's going to not flip and if it's pushing left it will flip just like when the cursor was on one side or the other of the player and now we will use the condition mobile device and again but inverted all right and then put this here and we are good so if it's not a mobile device it's going to use the cursor's position if it is a mobile device it will rotate towards the joysticks angle and then for the flipping this will happen we do need to change it though so that or two here either the left joystick or Mouse button is down no hold on and okay back to the mobile device thing so if it's not a mobile device this is an and condition if the left Mouse button is pushed down and it's not a mobile device then this will be true this is an ore condition so if that is true or the joystick is pushed down let's try that okay so if it's above zero if the force on the joystick is above zero so it's being moved at all yeah so when I'm clicking anywhere else doesn't work holding the joystick does work so I've got movement and joystick we'll change that back to not a mobile device and we have our controls all set up sorry if it looks a little bit complicated but you need to have separate controls for mobile and not mobile so all right that's the game we'll move this down below the transition so you can't see it when you first start the game and we will set it up so that copy this if it is not a mobile device we will just delete the mobile controls which are movement and aiming so now when I start the game and it's not a mobile device because it's my laptop they're gone and the game plays normally all right and that has been the entire series I'm making a wave defense game