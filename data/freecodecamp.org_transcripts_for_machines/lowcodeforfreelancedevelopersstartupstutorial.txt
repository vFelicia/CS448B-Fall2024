hi everyone here on the freecodecam channel today in this course i will be showing you how you can build the tools that everyday startups need in a matter of hours by learning how to build using the low code approach my name is kubo and i am a software developer course creator as well as your instructor for this actionpacked lowcode course in which you will learn how to build a customer support dashboard thanks to local solutions and apis for those of you who are new to low code it is an approach in which a developer can choose to use a platform that already provides certain ui components for our disposal as well as preconfigured ways to plug in apis this is a great time saver when it comes to spinning up complex apps fast lowcode solutions are not to be confused with nocode solutions in which no coding knowledge is required this is why a prerequisite for this course is to have a basic understanding of javascript and http request methods in order to fully grasp its contents however if you do not have any of that please do not let that stop you from following along anyway as i will be taking you through everything step by step okay wonderful so let's get to it by the end of this course you will have a support dashboard where you can modify customer details browse order history refund active orders and manually add orders if you need using the appsmith platform and the google sheet api you will also be able to cancel and refund orders thanks to the stripe api this course is made possible from a grant from appsmith app smith is an open source low code framework the community edition is featurerich and completely free you can selfhost it or use their cloud version and it's a great way to get started with lowcode development okay so let's get to it let's get to building our first app so first things first i'm just going to start off on the appsmith dashboard as you can see this is my organization called the anius apps and you can see some previous apps that i have made so all we're going to do once you get to this position after signing up is go ahead and click new okay so we are creating essentially a new app i'm going to start off with building from scratch so let's go ahead and click this one and you should see a blank canvas generate for you while we are here i'm actually going to rename my page so it's very obvious for future projects and just for organizational purposes so let's go ahead and call this zip food delivery as this is the app that we are going to make it's going to be an order dashboard so i've just called it zip food delivery just like so and let's get going now i want you to first off think about how you want to store your database for this tutorial we're going to go super simple and just use a google sheet database so if you haven't already signed up to google please go ahead so that you can access their google drive and in turn create a google sheet just like so so on my google sheet which i will be linking in the description so please feel free to go ahead and clone it if you wish it will be open for use so just go ahead and do that like so so in this data let's talk it through a little bit so this is our customer database on the first tab we have the orders and the orders will simply consist of an order number followed by the date that that order was made the delivery address the total amount spent in a currency value the status of it and a stripe purchase id which we will be going into later you will have to replace these these are just some template ones for this tutorial and then we have the customer id of the customer that ordered it so this brings me along nicely to the second tab where you will be able to see each customer by their id so danny is customer id number one we've got the first name the last name the email address associated with that user what date they joined if they sign up for the newsletter and a random image that we have assigned them okay so this is just hosted online if you visit this url you will see the image and a phone number and same for the id 2. next up i'm actually going to go to the product catalog so here is just a database of all the products that we have in our store at the moment it's not many we only have four items but again this is just for tutorial purposes each item has an id and an image which is once again hosted on the internet so if we visit this directly it will just show us the image like so so make sure that you can see this like this okay and great one thing to note of course this is hosted by someone else so if they take this down we will no longer be able to see the image so that is just something to keep in mind okay and finally we have the products tab now this products tab is essentially a better view on what is associated with each order number so as you can see this order number here we will be able to see that this order number consists of one birthday cake and five lollipops okay so that is important as well that is how we read this data once you feel comfortable with what you're seeing here it will be time to move on to start using this data to start building out our order dashboard so that it displays all this information but also allows us to add information to this database from the dashboard itself okay we're going to add data we're going to be able to edit data as well so let's get to it i'm excited let's go back to appsmith so the first thing i'm going to do is actually just hook up this database so we can do so really easily i'm just going to go to data sources over here and i'm just going to pick google sheets and we want to be able to read and write as we will be adding data to the spreadsheet so make sure that that is connected and save and authorized so now we'll just have to log in to our google drive so that appsmith can continue to talk to it and has access to it so just make those steps and wonderful so let's go ahead and perhaps change what this is called i'm going to call this order database just like so and wonderful so now let's go ahead and create a new api so this is where we're going to tell our platform that we want to get the data okay from this spreadsheet so this is simple all i'm going to do let's perhaps rename this as well i'm going to call this get orders or fetch fetch orders okay as that is the first thing we're going to fetch we're going to fetch everything from this tab right here so just make sure that this says fetch sheet rows and then the sheet name for our spreadsheet well it's going to be orders so make sure to spell it exactly as you see there so i'm just going to go ahead and type orders like so and table heading row index we do have a heading so i'm going to leave that as it is one query format now the query format we're going to query the rows that is correct because we're going to be looking by the rows make sure that the spreadsheet url is the one from yours right here so i'm literally just going to take all of this and just paste it in here like so and then just simply run this like so so here is the data that is coming back to us this is looking wonderful now we have hard coded this is us 10 for the moment but we can change this dynamically but first let's get this data into a table first so all i'm going to do is go back to my zip food delivery app and then under widgets i'm just going to click plus and then i'm going to select the table widget so let's go ahead and find that now here is the table widget and i'm just simply going to drop it like so okay so here is my table the next thing i want to do is actually get the data necessary to populate this table and to do this so let's just get rid of that i'm going to use the fetch orders data data just like that so there we go that is super simple that's all i've done and now we can see all our orders showing up here but just our orders okay not any of the other pages okay so this is looking good i'm actually just going to rename this to be the order table just to make things more readable and things a little bit more organized okay so that is our order table great maybe let's make this orders table to be a bit more precise so we have our table however let's maybe do some styling first so all i'm going to do is just make this look a little bit prettier before carrying on so to do this i'm actually going to i think grab a container so let's grab a container and i'm going to just work this whole table in my container so all these widgets they're also your disposal and they essentially just make you know app creation a lot more easier if i was developing this from scratch it would of course take me much longer to create you know the container the table and so on so this is one of the main benefits of low code solutions we can simply drag and drop things as we please in making our app so there we go and i'm just going to drag this a little bit lower just like so so that we could add a title and a way for us to essentially add more data to our table by creating a popup modal so the first thing i'm going to do is just search for the text and just drag it in here oops so there we go now the text well the label for this is going to say orders just so it's super clear what this table is about we can also use emojis if we want so i'm just going to go ahead and grab an emoji just whack it in like so okay and then we can also choose to change the color i want this to be a title so i'm going to go ahead and choose heading one for this so it's a little bit larger but there is some preconfigured text styles but again if we want we can really take this uh that next further step and really personalize it to give it whatever colors we wish okay so there we go that is how you use the text now the next thing i want to do is just create a button so that it shows a popup model so again this is super easy i'm just going to drag and drop an icon button i'm going to drag it in there we can of course you know space this out a little bit better if we wish center that so now we have a way to add a modal we can of course also style this button let's actually call this button and all i'm going to do to start it up is perhaps let's just change the color of it so i'm just going to go with this dark gray and what else can we do we can change the border radius to make it look like this and of course now we need to get an event so on click of this widget i need something to happen and what i want to happen is i want to open the modal so i'm just going to go ahead and write that show mojo and then we need to essentially create a modal so let's go back to our widgets one more time and i'm just going to find the modal so here is my modal i'm just going to drag it in here okay and let's call this at modal and let's not animate the loading let's keep that one off scroll contact true so we can scroll everything in here quit dismiss also true and there's no action for this at the moment okay so now let's hook it up so on click of this i want to show the modal so open modal and then select the modal add modal okay so i've just selected the modal that i've just created which we call admodal which means that now if i click this my modal will show up great so let's go ahead and add everything that we need in here i'm just gonna say add new order manually just like so okay and let's maybe spread this out a little bit and just center it so it's in the center and let's also we can change the color of these buttons so i'm just going to go ahead and do that now i'm going to choose this kind of color for this and the clothes again i'm just going to change it from being green to this dark grayish color okay wonderful for now i'm just going to leave this as it is we will go back to that later i want to carry on building out our main dashboard first so another thing i'm going to do is just quickly add a header to this so once again i'm going to get the container widget and i'm just going to drag it up here and then make it a little bit smaller so that is looking good and now i'm just going to drag my first container down here a little bit again so there we go and then just make this one maybe a little bit bigger so that we can fit some more stuff in here like so uh great and let's change the color of this so what color do i want to make this i think this blue would be quite nice let's just go ahead and keep it as that and once again i'm going to add some text so let's find our text widget here is our text widget i'm just going to drag this in here again let's change the text color to be white and then i want this to be an h1 heading just like so and i'm going to call this zip food delivery so just in here zip food delivery okay and then we can change this to title if we wish so here's our title and once again just going to add an emoji and then i'm just going to add the emoji like so and i'm just going to add a sub title now and the subtitle so once again here's the label i'm going to say your custom dashboard to view add and delete orders let's make the text of this white and i'm happy with it being a paragraph so the paragraph default styling and great our header is looking good so we have our header we have our orders in a table we're gonna have a way for us to add new orders manually i'm also gonna go ahead and add a refresh button to do this i'm actually gonna grab the icon button again but this time i'm going to choose a different icon and this icon is going to be the refresh icon that looks like this okay so wonderful and i'm actually going to make the background white to make it look like this so i'm really happy with this and we can actually add an event to this already so on the click of this refresh i actually want to execute a query and it's a query we've already written which is to fetch the orders again okay so i'm going to fetch the orders i'm going to rerun that just like so okay great and that is it so now if i click this button i will essentially refetch the data from our database if we ever need to wonderful so we have that so far the next thing i want to do is just display our customer okay the customer of our order if i highlight one of the lines i want to show me exactly who order it i want to see their name i want to see their email i want to see their phone number and maybe a little picture of them too as we do have that data available to us so that is the next step once again i'm just going to grab the container just like so and just make that a little bit smaller and in here i'm just going to grab the text and this is essentially going to show the name of our customer so we can even give it customer name just like so and then let's make this maybe a little bit larger let's make this i'm going to give it an h1 tag as well the next thing we're going to do is just show their email address so i'm actually going to call this email address just give it a label so everything is a lot more readable and a lot easier for us to do let's maybe change the color of this to be like blue or something and then we're also going to have the phone number so name email phone number i'm going to change this for readability to be phone number and wonderful and we also want to have that image right so i'm just going to move this over a little bit actually for now and i can choose to have an image so once again let's go back to the widgets and i am just going to find the image widget it's going to drag that in here and this essentially is going to show me the image of the customer when we pick them out okay so again i'm just going to rename this readability customer profile wonderful so let's do it let's link it all up so to do this we're actually going to have to make another query so let's go ahead and do that now so just under queries i'm going to select this and and we are going to use the order database we're going to make a new order database query this one is going to be fetch user and once again we're going to fetch the sheet row we're going to get the url for our spreadsheet so i'm just going to paste that in here like so the sheet name well the sheet name for this is actually going to be the customers okay because we want to get this information right here so i'm just going to make sure to spell exactly the same way so customers and then let's leave these blank we can increase the row limit if we wish so i'm just going to put 20 for now and then let's click run okay so there we go we're getting all our customers and now we can use this fetch user query in order to fetch our users to populate our app so let's go back to here now what i'm going to do is so instead of this default image i'm going to once again get our two curly braces and use the fetch user query so it's exactly exactly the same as this one right here that fetches all of our users i'm gonna go into the data for now i'm just gonna put in the first user and i'm going to get there image so let's go ahead and do that making sure just for image with a capital i and great so there we have our customer profile however what i want to do is use whatever row i'm in to show the customer profile okay so i'm going to show you how to do that next so all i'm going to do is go back to fetch user and make sure to fetch just the one user that is selected so to do this i'm going to look for the user by the id and the value is going to be we're going to go into the orders table how do we call it we call it orders table so make sure to call it exactly the same okay because it's the name that we gave our table widget and i'm just going to choose selected row and i'm going to search for the customer id oops making sure to spell id with a capital i and making sure the operator is equal equal so id equals customer id and click run so now let's go back to our zip through delivery and talk it through again so we are going into the orders table the widget called orders table and the selected row we are getting the customer id okay and all it means that in here i am looking for the id with a column name for our customers equals the customer id on our table now to actually make this run every time we click on one of these we're going to have to run the that user query so all i'm going to do is go back in here and on the row selected so on row selected we'll have an action i'm going to execute the query fetch user okay so that's all we're going to do we're going to fetch the user and run it okay so there we go we can also have more events on here so on page change we can also rerun the fetch orders query just to make sure that our fetch orders are always the freshest it can be so there we go so now let's check it out i'm going to click on this one and here we have delphi and then if i click on this one we have the user associated with this next order so that is all working good let's apply the same logic to the email address so all i'm going to do here is go into the fetch user query and just get the first row of data okay and i'm gonna get the email because after we click one of these we're only gonna return one customer which is why we could just put a zero here we are literally just going into the first oops these should be curly braces the first uh item in our returned array okay so there we go what's not what's going on here oops we need two curly braces at the end so that is the syntax for whenever you need to get data from one of these or from a query wonderful and last one you know what to do the last one we want to get is the phone number so once again here's the syntax we're going to get up our curly braces we're going to go into the fetch user query which at the moment is returning just one object in an array if we click on any one of these so we're going to go into that object into the first object and we're going to get the phone number so i'm just going to double check how it's written here it's written phone so that's what we're going to get we're going to get the phone and wonderful okay so this is looking good just to recap once again to get this working it is important to write another query so the fetch user query we'll look into our table it will look into the sheet of customers so that's what i'm saying i'm saying look in the sheet of customers and then also look okay look at the id of the customer which is one look at that and then match it with the orders table selected row customer id so essentially go into here look at the orders table and look at the selected row custom id and just return back the customer based on that okay and then to get it shown here we're just going to go into the fetch user query and get the first item returned in our array which should be the user so hopefully that now makes sense hopefully us going over that again has given you a better understanding of how all of this works together now that we have that let's carry on so this is actually great because we're going to use the exact same technique we did to fetch the user to fetch a specific product or specific order so this is great for repetition let's do it again so the first thing i'm going to do is just use a container so let's make a new container not an existing container i'm going to drag it in here and this is going to display our order information so once again i'm just going to style it out a little bit first i'm going to grab some text and let's call this order information and then i'm just going to display the order that we have here for now i'm just going to leave it blank let's also make this an h1 heading just like so just to make it really big and then let's perhaps also name this something so we can call this order info so it's easier for us to pick out so we've got our order information here i'm just going to move this around a little bit just to make it look a little bit neater and now what do we need well i'm going to actually show the charge id so let's go ahead and just put charge and once again i'm just going to put in my charge id after this from stripe so let's call this charge info so we're going to have our charge id here and the next thing we're also going to have so i can actually also just copy and duplicate stuff like this let's call this the address info and this is going to obviously have my address once again i will leave that blank because we're just you know getting the basics ready for us to carry on and then we're also going to have the status the status of our order so let's put status info and then perhaps let's also have the order date so i'm just actually going to drag that over here and let's just put date and have this as date info wonderful so there we have that and i'm just also going to show our products that are associated with this order so products let's call this product title if you ever need to pick it out that was what it is called and in here i'm just going to show perhaps an image of our product so once again i'm just going to drag this in here for now even though we will need to map stuff out and then we're also going to have the total amount so i'm just going to drag this here and amount info and i'm just going to give this a label total amount okay so this is looking good and the one last thing we're going to do is actually add a refund button so that we can refund the order through the strike api if we need so let's get our button just drag it here and let's just call this refund and then let's make the button maybe this blue color we can also give it a border radius just to soften it up a little bit so great so now let's go back and we're going to have to make a another query you guessed it so in here we're going to click here and we're going to use a new order database query so we're going to use our order database in order to make a new query this time however we're going to fetch the products so let's do fetch products just like so making sure to use this url to this spreadsheet and then this time the sheet i'm gonna get is products so let's go ahead and just put products here and click run okay so it's getting all the products and we already know that we need to look in here and we're going to look for the order id this time so we're going to grab this to make sure it's spot exactly the same way we're going to look at our table in here and get the order id and make sure it is matched so let's just whack that in here it's matched so we're going to use the double equals sign so this actually these two equals means that it doesn't matter if we're comparing a number to a string uh that will be equal it doesn't look at the type okay so that is just something you should know as well and we're gonna look for the order id in our table so what do we call our table we called it orders table i'm going to look at the selected row and we're going to look for the order id okay so those two things need to match in order to fetch the correct product and let's just hit run great i'm just going to increase the row limit while we are here and now let's use this fetch product so let's go back in here and make sure that every time we select a row we also execute another function and that is fetch products so to actually write two we can just use this javascript function in order to manually type out the two uh queries we wanna run so again using the two curly braces i'm just going to add fetch products and run okay and make sure to use the semicolon here and i'm just going to use one here so now these two functions these two queries will run if i click on any one of these okay wonderful so now that we are getting the products i want to actually map all the products that are returned so all the products for example in here that have the same order id i want them to be returned and shown to me here so let's do it so let's go into the widgets and i'm actually going to look for a list so i'm just going to drag this in here for now making sure that it fits i'm just going to drag this down so here is my list and the list is just an easier way to map things onto a list i guess so that's why we are using it i'm just gonna move all this out the way for now and then let's drag out our list a little bit okay so here is our list and now i'm just going to map out the information onto it so the information we want to map out is well it's actually just everything from the fetch products data query so let's just remove all of this and use our two curly braces and then i'm going to go into the fetch products data and now i'm going to use the current items so let's see what we can use here quantity i can use item name so let's do item and that will map out the item name just like so we can also use the quantities about q t y i believe q t y with small t y so we've got one by the cake and five lollipops and then we can also do the same for the image so this i believe is image spell like this but let's just check i know it's item image so let's change that item image however as it's two word we're gonna have to actually just go into the array and look for anything with the key of item image okay making sure to have two curly braces at the end so there we go this is looking wonderful and i believe that's all the data we really want to show so this is looking good so i'm just going to get rid of this actually we don't need that anymore and i'm just going to move this whole list a little bit higher and then also let's move the total amount to be below and the refund amount to be below 2. great this is looking wonderful just gonna make sure that this is all a little bit more i liked okay so we are now getting our products if i click on here it should show me the correct product for this order which is four chocolates and two candies and the customer profile is updating too great so that was the hard part done believe it or not the next thing we're going to do is just link up these information so let's get our kylie braces up and we're just going to look in the order data table so orders table and we are going to look for the stripe purchase id so actually we need the selected row don't we selected row and then we're going to get the stripe purchase id so there we have it i'm just going to stretch that out a little bit so it's more readable there's the charge do the same for the address so perhaps we can make this smaller actually this doesn't really need to be as big as it is so i'm just literally dragging and dropping things around this could not be any easier i just want to make sure that we're getting all the information we need on the order information so just drag that out i'm also going to drag this out here uh the address now so once again we know the drill double kali braces let's look into the orders table and the selected row we want to get the address right so address we can actually just select from this drop down to see what we need so delivery address and then just spread that out a little bit same for the status so let's go into the orders table let's get the selected row and let's get the status okay so this is looking good and finally the date so once again kylie braces orders table selected row and then we have the date and i'm just going to spread that out a little bit just like so so this is all looking so wonderful we only have a few things left we need to hook up the refund functionality with the stripe api so let's do that i'm going to do that right after actually we um just tidy up our table a little bit so one cool thing about this table is that we can actually edit the uh columns columns what we want to see we can also format things so for example the date column so for example for the date column i can edit this so i can use the preconfigured date formats or i can actually write my own if i want to be super specific if i don't like any of those so here's some javascript that i wrote earlier so here we have the two kylie braces what i'm doing is getting the current rows date so the column is called date so we have to make sure this felt exactly the same and if it exists then i'm going to pass it through a moment i'm going to pass a date through a moment in its current format and i'm going to format it to this format which includes a much more readable date as you can see here that's what has been formatted to and if it doesn't exist then just put an empty string wonderful so that's looking better we can of course also rename the columns themselves so if i want order id just to be a bit more user friendly i could put order id the delivery dress we can have as you know delivery address order amount status do we need the stripe purchase id i don't really think we do need it so i'm just gonna go ahead and actually make it not visible and i'm gonna do the same for the customer id as well okay so there we go the total amount i can actually also make this much more userfriendly and just make sure that people know it's in dollars so let's go ahead and click here and i'm just going to add a dollar sign to the end okay so this is all looking much better uh let's also add some colors for the statuses and let's also hide the row index so where's the row index i don't want that visible so i'm just gonna click on the i so these three are not visible now this is all that's going to be visible and on the status i'm just going to instead of putting in a text color just going to use some javascript so let's get up our two curly braces again i'm going to grab the current row and i'm going to get the status column and if the status equals the string refunded i want the color to be so if it's true i want it to be blue otherwise sorry we should be writing this in javascript so make sure the js is turned on otherwise if current row status equals delivered delivered then we want the color green otherwise if current row status equals delayed then we want it red and as a default we're just going to have luck so that is some javascript for you using the tertiary operator and there we go and then we can also make this uh you know we can make it capital letters if we want so i'm just going to make it so this is looking good uh we also actually need to add be able to add orders manually so perhaps let's do that bit next i'm gonna start making my modal so let's do it so on our model let's get up on module what do we need in here well i need some inputs so i'm actually going to have a drop down so i'm going to use the select drop down here because we want to select from a list of already existing customers so let's put customer just like so and at the moment i'm just going to leave these options in here because we're just going to do the ui for now the next thing we're going to need is a area to write the address in so i'm just going to put in an input so i'm just going to drag in the input widget just like so making sure to move the button down so there's the buttons confirm and close and i'm actually just going to copy this a few times and then we also need to put in some labels so i'm just going to drag this above here so this label is going to say address and i don't want it to be bold so again making sure to keep things in line and we can make this one a little bit the next one we want is stripe purchase id so if we want to put this in manually we need a stripe purchase id once again let's not make this bold and let's also have another select to choose the status so again let's pick the select widget and just put it under here and this is going to be for selecting the status so let's just put that in here and i think i'm just going to hard code the statuses because there's not many so let's go ahead and do that so label let's say order placed value order placed and then we have delayed delivered and refunded okay so we're just gonna hard code these ones i'm i don't mind doing that delayed delivered refunded okay so these are looking good wonderful we can also have a default value if we want i think it should be order placed okay great and the next thing we need to do is just be able to select products from our drop down so this is actually going to be another select so i've just copied that and this one however is going to say selected products and now we also need a multi select okay the multi select is going to allow us to select multiple products that we want to order so let's just make this a little bit bigger and let's give this the label uh select products just like so and let's write a query for this okay i'm actually going to write a query for this as well so that we can get all the products that we want so i think this is it now let's just go ahead and i'm just going to put these two buttons like so so the close and confirm button just make sure that the very end okay so let's continue with this so we're selecting our products we're selecting a status we also have the purchase id a place to put the address and of course the customer name from a drop down also perhaps let's have a list so we can see what products we have selected so we oh we also need to put in the total amount as well so this is going to be a number input so let's go ahead and get the currency input right about here and just put it like so so this is going to be for the order amount so maybe let's make that a little bit smaller and then let's also put in some text that says order amount so here we go and the label will say order i'm out and make sure that it's not bold just to keep everything consistent i'm just going to make the actual popup model a lot bigger and then let's also add a list to show all the products that have been selected so once again let's find the list widget just drag and drop it in here so there you go that's looking a lot better so there is a full order popup now let's get to actually getting the customers we're gonna have to write a query for that so once again back in here we're gonna make a new query from our order database and let's call this fetch customers or maybe fetch all users to be a bit more consistent once again we're going to grab all of this we're going to put that url in here the customer sheet is called customer customers with an s so make sure to make that the same row limit let's put 100 and let's just run it okay so there we have all our customers now we're going to use this query so let's go back to our zip food delivery let's get up our model we're going to use the query to populate the customer drop down so using the two curly braces i'm going to fetch all users data okay so that is all i'm doing and now i'm just going to map so i'm going to get each user that exists and for each user well what do i want to do i just want to return the user's first name and we also need to give it a value so we also need to go comma value and let's just give the value of this to be the user's id okay so that's how it should be looking now okay so that's how our array of objects should be looking now we can also have the last name so perhaps let's do that i'm just going to add an empty space and then add the user last name great so that is what it should look like at this moment and then we don't want a default value so let's just leave that blank wonderful so there we go we've used a query to fetch all our users so we can select them in this drop down the next thing we need to do is uh figure out how we're going to do the same for selected products so once again we're just going to use exactly the same method that we just did so we're going to make a new query from the object database query let's call this fetch all orders or fetch um product catalog let's call this product catalog so once again we're going to go in here to get this url i'm just going to paste it in here like so and the sheet name well the sheet name for the product catalog is product catalog so let's type in product catalog exactly like spelts and making sure the capitals are all capital and so on uh row limit 100 and click run okay so there we go there's our product catalog which means that now we can go back here let's get off our module and let's get the selected products let's get rid of all this data and let's go into the fetch product catalog data and once again we use the map javascript function to map so for each product so for each item that exists in our array i am going to return a label and a value so the label is going to be let's go into the product and get its item name and then let's also give it a value because that's how this needs to look we need a label and a value and that's going to be the product id okay so item has to be spelt with a capital i actually because that is how it is spelt in here capital i but id is small i so just make sure that is the same so that you can have objects with a value and a label okay because that is how we do this and let's not have default values so let's only have the option to select certain products wonderful and now let's map them onto a list so to do this i'm actually going to use this so the multi select one so i'm going to get the multi or let's actually rename this maybe to make this easier i know we haven't been renaming all of them but i guess it's just interesting to know that you can i'm going to call this product mo t select so that means that now we're going to use the product multi select and i'm going to get the selected option values not labels and map uh each thing in my array i'm going to map it so it returns what do i need it to return i just want it to return the fetch product catalog i'm going to go into the catalog and find so get the data and find the product that has a matching so id to the product id so product id has to equal the id okay and now this means that for the image we can get the current items item image so let's go into here and get the item image making sure to spell it exactly the same as it is here and now let's test it out let's select products i'm gonna go lollipop and there we go so that is updating now text 13 i guess we want this to be the item item so there you go and if i select more things so let's go chocolate we can see more of them too so this is looking great i'm so happy with this uh and everything is working as it should we've got all that we need so let's link this up so that it actually adds some data to our database so let's do it i'm going to have to write some queries for this so once again i'm going to go in here and write a new order database query and this time i'm going to say add order and for this to work i'm just going to once again have to get the same url however this time i'm going to insert sheet row so there we go that's all we're going to do and we're going to insert this on the orders page okay and then we're going to make a row object so this is what we need to do we're going to get the two back ticks and then we're just literally going to look at the orders and then find each of these column names so let's perhaps do that now okay so we're going to have the order id making sure to spell exactly the same so order id the next thing is dates so perhaps it's easier just to you know copy and paste date the next thing is going to be delivery address so let's have the delivery address and for now i'm just going to keep this empty oops this doesn't need to be in two sorry that's just one like so the next one is going to be the total amount the next one is going to be the status it's just like that then we've got the stripe purchase id and then we have the customer id so there you go and what kind of data do we want to put in here well i'm going to say that this id i'm just going to put this for now and see what happens the date however is going to be a lot easier because we're going to use moment and then we're just going to do format and we're gonna have to make it the same format that we have currently so year year month month day day making sure that's in strings the address well that is gonna be the uh let's actually just save this for now because we're gonna have to get the address input so maybe let's call this address input let's call this stripe input i'm going to call this amount input because we're going to have to grab all of these values let's also have the status select or status input it doesn't really matter maybe just everything consistent and the product multi select that is fine so and of course the customer so customer select maybe have cuss select so let's hope to remember all these now uh okay let's go back to our explorer and back to writing the ad order so the delivery address is going to be the address input text the total amount well that is going to be the amount input text status since again that's going to be the status input text and this is going to be the stripe input text and this is going to be the customer select so which ones were select because we're going to have to change some of these this was a selected option value and the status was a selected option value okay so obviously the customer id is not being liked why is that did we not save it ah we did not save this is not changed so customer select and make sure that updates okay so this should now all be good selected option value this is looking wonderful um great so actually if i run this it should add and it has been adding uh so great let's actually delete these for now but we can see the stuff is working that is good so we've written a query to add the order we also need to update it so it adds a product right so let's go ahead and do that too so once again i'm just going to make a new query and let's go ahead and add a call it add product we're going to insert a line to make sure that this is inside sheet row let's get the sheet and let's call this whatever product is called so products and once again let's make our object so this time once again let's just have a look at what we need to add well as there could be multiple ones what we actually need to do is get the product list so these are two curly braces and the products list and then get the list data and map each product and i'm also going to get this index and i'm just going to return the id so now we're going to make our object be id item item image order id so id item spell exactly the same so making sure that the capital is all the same and all that otherwise you know it will not work and we also have the order id and the quantity so now let's get to picking some out so for the id what i'm going to do is actually fetch the product so all the products and get the length of my uh column i guess or my table and just add the index another item well that's easy it's just going to be the product item the capital i because we are just mapping each one of the product lists and then we're going to go into the product again and we're just going to grab the item image and now we need the order id so i'm just going to go this params id ah of course we need a quantity because we can have multiple ones in fact this should not be insert row this needs to be bulk insert row okay which means just paste the same thing again and now let's fix the quantity part uh well that is just going to be the products list items index quantity input text okay so i don't think we saved product lists i thought i named my products list product list but i obviously didn't so let's go back in here and just make sure that this list this list right here so list two is actually called product list wonderful so on the product list i'm just going to add a number input so let's get the input that is for numbers so just drag in the input like so and make sure the data type is number and let's call this quantity input okay so now each one of these will have a quantity input as well so we can decide how many we want okay so we've written two queries now let's get to actually making sure that they both run when we click the confirm button so let's do it so for this i'm actually going to make a utils uh file so just to make it a little bit easier for us when there's a lot of stuff that's going to happen when we do one thing and all i'm going to do so let's do that in here i'm going to delete that and i'm going to write my own function it's going to be called add order and it's an async function and all that's going to happen is i'm going to generate an order id so const order id equals and this generates random id make sure that it's camel case so this is a function that we will write in a bit so we're going to do that we're also going to await and we're going to run the function add order so let's run it and we'll pass through the id okay so that's what i was doing when i was using this params so let's pass through the order id we'll do the same for add products so let's run that it probably should be products multiple but you know let's also add the id so the order id and then also refresh all the orders right because we want them to be fresh and let's reset the widget so i can do so with reset widget and i'll pass through the name of the module so it was called add modal let's just pass that through and then let's close the modal too so oh wait close or let's return this actually return close module and the model we want to close is the add modal great and now let's write our function to generate an id so that's going to be generate random id it's going to be a function that returns a random so math random this is a javascript method 2 string 36 sub string to 9. maybe let's just make sure to use single quotes just make everything a bit more consistent and wonderful uh we don't actually need these so just pass it through without the curly braces so now let's go back to here and let's use my util so once again i'm just going to get the model and on click of the confirm i'm going to use javascript for this but i want to go into my utils file so utils and i want to use do add order okay so let's try out i'm going to select danny address i'm going to just do let's do test strike id test id order amount 30 order let's say it's delayed and i'm just going to choose a lollipop and some chocolate so once again this time i'm just gonna select the quantity let's go with one and in fact maybe let's have a default of one so default text one and click confirm and there we have it our order has been added an order id has been generated we have added it to our database we've also added it in the products so there we go and then we've refetched all of this data wonderful so this is all looking good okay so we've done that i just want to show you how to actually delete orders too so i'm going to show you how to do that quickly all i'm going to do is actually go on to my order table and i'm going to add some new uh columns to here so let's go ahead and just make one column and call this deletes and one other column and let's call this edit now for this one i actually want this to be an icon so let's go ahead and choose icon button and then let's go ahead and choose sub delete option so delete and i'm going to make it red okay so that's all i'm going to do and we're going to have to write a you guessed it a query so let's go back in here order database query this time i'm going to delete a row we're of course going to grab the spreadsheet url let's call this delete order let's also give this a sheet name so we're going to be looking in orders as that's what we are going to delete and then the row index well once again we are just going to go into the order table and we are going to get the selected row index this time okay so that is all we do for the delete order query let's go back to our app and now on the delete button so just here all i'm gonna do is on click i'm gonna execute a query and that's gonna be delete order okay so that is all i'm going to do so let's give it a go let's delete the order i just made and then if i refresh that will be gone oh i've deleted two why is that it must have pressed two perhaps let's try undo that so for now i'm just gonna copy this and use this order number and then let's make this customer one so now let's refresh i'm just going to try delete this order and then refresh okay so that is working so of course on success we also need to fetch this again so we need to run this again so on deletes on success i want to execute a query to fetch all the orders again wonderful now let's do the edit model so on edit here we go what do we want well i want this to be an icon button let's try find an icon that looks like edit so i'm just going to type in edit and let's use this little pen right here and maybe let's give it the color of blue i think that's quite nice we don't have to we can really have any color we really wish but i think blue is quite nice we can also make a secondary button so that also looks quite cool and on action we're going to actually make a popup modal show up so once again let's go into widget this is going to be the edit popup model so let's find our modal i'm just going to drop it in here for now so here is our modal just going to drop it in like so okay and i'm just going to say edit order and we're going to show the order number in here so it's going to be number now we get the two curly braces up we're going to go into the orders orders table and we're going to get the selected row and we're going to get the order id okay so that should show up when we actually select one of them and let's just make this maybe a little bit bigger the other things we're gonna have to edit an order right so we're gonna populate this with selected row items so first things first i'm going to have just the order date showing up as an input so i'm actually going to pick the date picker for this and just drag it in like so so we've got our date picker let's just put some text next to this i'm going to say order dates we're also going to have we can actually align this i'm going to align it to the left just copy and paste that we're going to have the order date we're also going to have the address next we're going to have the status and total amount so i'm just copy pasting new ones this will say total amount and then we're going to have the stripe purchase id so these are all things that we can edit from the order so this one should say stripe purchase id okay maybe we can make this a little bit smaller if we wish it's totally up to us how big we want to make all of these things so again like obviously you can style this as you want i'm just making the most basic app for you in fact perhaps we can even stretch the modal itself that's a bit better and now everything fits okay so we've got the order date we've got the address and this i'm going to actually populate with the date we currently have so that is again going to be just today and let's format this so i want it to look like so okay and the address well for this i'm actually going to have an input so let's get the text input i'm going to drag that in here and this i'm going to say let's call this edit address edit address so if you notice i didn't really bother naming these as i don't think they're that important these ones we are going to have to pick out when we edit an order in our query which is why i've done it like so this is going to be edit date picker so let's edit date picker i'm just going to change it like so next we have the status so once again i'm just going to drag this in here but before we do that i'm actually going to put a default value in here and that is going to be the existing one so orders table and then we're going to get the selected row uh delivery address so the selected row dot delivery address it should show up and it has so that will be the default value for this once we do actually select one and the status well the status again let's gonna go let's give this uh the name of edit status so edit status and the default value is once again going to be the orders table selected row dot status and now the total amount so you've probably got the hang of this now let's call this edit amount and let's get this the default of order table selected row total amount and now the purchase id we're nearly there i promise oops just move that up a tiny little bit and now we're going to drop for the purchase id let's call this edit stripe id and the default for this is once again orders table selected row uh stripe purchase id so actually i think that's it let's move up this button and let's next write the query right that we want to call when we want to update and order so before we do this i'm just going to maybe change these colors around a bit let's make this one orange actually and let's make this orange whoops two so let's first link up this uh to open up the modal so click on the edit button so where's the edit button it is here and the action that we want to do is we want to open the modal right so open modal and the modal we want to open is modal three it's a shame we didn't call it but i'm pretty sure that's the correct modal let's check it out okay so there we go it is the correct modal i'm just going to center this while i'm here so text align center okay and this button oops why does it keep doing that i just keep pressing it by my stick okay just press on it on the orange bit and i want to make this button orange but i also want to make it secondary great so that is all we need to edit an order now let's actually you know let's let's write it up so this should actually be a select not a input because we want to pick from certain ones so let's get this select just put it in here okay let's not give it a label because i already have one so let's shut that label down so no label just make it a little bit smaller now oops and we actually already have written these options somewhere so it was here wasn't it so let's go back to the other modal and on the statuses i'm just gonna copy this in fact we can actually store this in the utils file so perhaps let's go ahead and do that as we are using it in two places now so in the utils file i'm just going to export let's call this order status options okay and i'm just going to paste the whole thing like that so now we can use this from the utils the order status option so let's go back to our app and instead of having so let's click on this model again instead of having all of these here i'm just going to go into the utils and get the order status options okay so that is easy and now i can just use them in the other one so on the edit let's go ahead and click the edit model so just click on the select and just paste oops go into the utils once again and get the order status options wonderful and let's call this something this is edit edit select edit status sorry and now let's go picking them all out so we can edit our order so in fact do we actually have the order number here add in the order manually now okay so now let's uh write our new query using the order database and this time it's going to say edit order just like so and to edit an order well i'm just going to use update sheet row and i'm going to copy this once again i'm just going to paste it in here and now we're going to make the row object so the row object is going to be let's get our object up i'm going to use the row index and that is going to be the order tables selected row index and then i'm going to use the stripe pro chess id and if it's changed i'm just going to update it so let's get the edit stripe id as we called it text next we need the total amount so once again i'm just going by all of these column names so we've got the total amount and this again is going to be the edit amount because that's what we called it when we were making our model so edit oops not address edit amount and this was text so we're getting the text and then we need the delivery address so if it's changeable update and if it stays the same well then obviously it will update but it will look exactly the same so edit address text and then we have the date and i'm going to use moment again so moment and what i'm going to pass through into a moment is the edit date picker and whatever the selected date is and then i'm going to format it so dot format and i'm going to make sure that it's the same as my database so just change it to be this format and then one more and that's the status and the status is going to be the edit status selected option value so this i think is looking good oops we need to say which sheet we want this on it's on the orders sheet okay great so i guess let's check it out so wonderful let's go here and let's link it up so on edit so what if we press the confirm button what do i want to happen well on click i want to execute a query and that is to edit the order and on success i want to refresh all the data so refetch fetch fetch borders in fact we actually need to do a few things so perhaps let's do it like we did before so in the utils file and let's write our own uh i guess function so update order it's going to be an async function just like so and what do we need to do well we need to await edit orders so let's run that so just like this this is how we run it and then we're also going to fetch the orders right so await fetch orders run and then we also need to shut the model so return close modal and then let's pass through the modal we want to close it's the edit middle great so that shouldn't be karma commas sorry it should be semicolons okay so now let's use this let's go back in here and i'm just going to delete all the other ones so let's get our edit model up let's click on this button and i'm actually just going to instead utils update order so let's check it out um let's well there's only one to edit so i'm going to edit this one and i'm just going to edit these status should not really say green oh yes default value the status the default value is going to be of course the order tables selected row status oops selected row status just wrote that out manually it wasn't picking up some reason let's try again so let's just click on this one edit it okay so that's picking up and i'm just going to change it and i'm going to change it to delivered and confirm and see if that updates and great this is not shutting down oh we call this modal 3 not edit modal so you know what should we just change what this is called let's just call it modal three so that is in the utils file we need to shut module three okay so hopefully you know now how to change this if you want to but this is looking good for me so let's just try edit that again i'm going to edit it back to delayed and then confirm and on success it should shut down the modal for me now and it does wonderful so this is great we can add new orders we can edit orders we can delete orders um i mean i'm really happy with this we get the order information here so i'm just clicking on it here and everything's updating the last piece that we need to do is to make a refund so let's go ahead and do that so i'm just going to refund this one by the stripe purchase id now i'm just going to show you how to do this by going to the stripe api okay so we're going to be doing a test one and i'm going to be showing you how to do it with the test one of course you can use real data but i'm going to be using a test account and refund is what we want to do so i'm just going to sign into my account where i have created some fake payments already okay so if i go to payments these are some fake payments that i have made i can create a fake payment so let's just say i make a fake payment for 20 okay and we're gonna uh put in some fake card information so let's go ahead and do that now we can just check the fake cards so payment methods i'm going to go here and i'm just going to copy this one i'm just going to put it in right here and then just use today so 20 and then cv123 and i think that should be it let's submit the payment okay and payment successful so this is a fake payment all you have to do is essentially sign up to stripe and then go to the test payments and create a new payment so this is the payment that i have made it is fake uh this is test data so this is the payment right here if i click on this we can find a charge id so here's the charge id and now i'm going to use that and put it in here so that is now my fake payment it's as if i paid 20 so i know it says uh this here let's actually just change this to be 20 like so and now i'm going to essentially refund some of this so let's do it let's make a fake refund so using that in mind that should now be updated as well so i'm just going to refresh this there's our stripe purchase id there's our charge id i want to refund an amount okay using this charge id and for this i'm actually going to write a function in the utils and it's going to say refund order so refund order it's going to be an async function don't forget the comma and what's going to happen here well i'm going to run the stripe refund and then i'm going to update the order amount so that it you know reflects exactly how much is left and i'm going to refetch the orders so actually maybe let's do that first let's write a new query so new query and i'm going to call this one uh update order amount so that is one we need to write update order amount and this is gonna update the sheet row we're gonna have to grab this and then we need to update the orders because that is where the uh amount lives and all we're going to do is we're just going to update one thing right we want to just update the status but for this we also need the row index because we want to know which row so which row it is so the row index is just going to be the uh order table selected row index and the status we want to update is going to be we're going to have to update it to say refunded so we can hard code that okay so that is looking good the next thing we need to do is write a new query this time it's going to be a stripe uh it's going to be we're going to write our own one so we're going to create a blank api for this and it's going to be a post because we're going to be posting to the stripe api and the url for this well we're going to have to go to refunds so we were just on this reef fund refunds and we're gonna have to find the uri that we need to make this post request to so this is it i'm just going to copy that okay we're going to use this as a guide i'm going to copy this go back in here i'm going to post it to the uh the v1 refunds and we're not going to have this we're actually going to have refund refunds the charge id which we're going to pass through as the order table selected row and you guessed it stripe purchase id and i'm also going to pass through the amount we want to refund so the amount is going to be the order so order table selected row total amount okay so that's where that is going this is going to be content type application json and the authorization authorization that we need to pass through is going to be this bearer code so bearer and let's go ahead and find it in here this one and now we just need to get our secret key and just paste it in like so and run it okay so perhaps it's not picking anything up but let's check it out let's see if that works so back in the utils i am going to to refund my order well we need to await and let's rename this api to stripe refund perhaps stripe refund let's go back in the utils so await stripe refund dot run and then we're going to return await fetch orders run and of course before that we're also going to update the orders so await update order amount run so a lot going on there let's go back in here okay and now when we press this button i just want to run execute javascript function and it's refund order so let's check it out i'm just going to click that oops this should just be v1 refunds question mark and run and then we are doing some we're passing through obviously stuff that we should not be passing we just want to pass through the amount so let's actually fix that so when we edit we actually on the edit amount we want to take off the dollar so what i'm going to do is just do slice and i'm just gonna take it off like so okay and of course we already had a dollar in there um but that shouldn't happen any more so let's try fix that now i'm just going to get rid of this and just make it 20 and not make this dollar okay so let's try this again okay so if we edit this and i edit this to say 21 or actually just 20 so confirm okay so the dollar sign does not get added and if i try to refund this so run that okay aha it's still not liking it it's still trying to add the dollar so we need to remove that perhaps we can remove that here slice zero nice one okay so let's try that now what we also want to do is disable this we want to disable this if order to orders table selected row is already refunded right so if the status equals refunded then of course we you know we don't want to do anything so disable it for that uh we also need the total amount showing up here so we can do so easily order table selected row total i'm out great and wonderful you will see that has updated to be refunded so our refund has happened this is looking so so good okay so the refund has worked everything's amazing i'm so happy this is working so great i'm just going to do some final checking just to make sure everything works 100 so i'm just going to go ahead and add a new order so as if we are manually adding an order of course usually all our data probably would be just you know on the database itself but if we ever need to manually add one this is what i'm doing now so here we go and so i'm just going to go through this making some fake data making it up uh of course a random id will be generated for me and i'm just gonna go ahead and do this and great i can see that order has been added however this does say stripe id why is that so let's just go here aha perhaps we need to call this let's just put this as stripe input i think we tried to change that and it just didn't work so stripe input is what i call this it's already being used is it adds because we call this stripe input that's annoying we want this to be stripe input so let's just call this stripe title that's why stripe title so that's why it was taking the text from here and we want this to be stripe input okay so whatever we put in here will now be updated great so actually let's edit that it's a great opportunity for us to check if the edit works so not on this one actually but on this one i'm just going to change the stripe id so i'm just going to make it up for now and i'm just going to put ch and then just some random numbers and click confirm okay so hopefully that should work wonderful so that is now being updated this is all looking so so good uh the other thing we need to do is actually change the name because we just have the label so this is now easy all we're going to do is use the fetch user query and go into the data because only one item is being returned so we just go into that item so as it's the first i'm going to put the zero index and i'm going to get the first name and then i'm actually going to just put a space which is just two strings with a space and add the last name too so once again just getting it from my fetch user query okay so this is all looking good uh and finally why aren't the products displaying here let's have a quick look into this okay so all we're gonna have to do is this and there we go okay so everything is now done of course if you want to rename this to perhaps add products as it is more precise just make sure to update that wherever you use this query okay otherwise this will of course break right so where do we use the add products let's have a quick look so add products ah it's actually already been updated for us so that was really really great i didn't know that that is such a uh such a lifesaver really now before moving on i'm just going to rename this quickly so just edit the name right here and there we go i'm just going to shut these things down as well as we don't need that now we are going to connect our project to our git repository so i'm going to show you how to do that all we need is the remote url so head over to your github account and under repositories just create a new repository let's call this zip food delivery app and just go ahead and create the repository so this is the url we need so just grab it and paste it in here and click generate key now copy the generated key and we're going to go back to our github and under settings we're going to go to deploy keys and then add the diplo key in here so that our app can essentially deploy on behalf of us so paste that in here and let's call this app key and add the key so once that is done there is not much else to do we're just going to connect and once that has finished we're just going to actually make a commit so we're going to commit our project to the repository we just made and this means that once this has been done if we go back to our github repository so just right here we can actually view the deployed project so there we go we are now viewing our deployed project and our project is stored on our github profiles okay so this is all looking good i hope you've enjoyed this tutorial i've loved teaching you it's amazing what we can build with low code solutions and the complexity that they can bring so thanks so much again for coding with me and i hope to see you again real soon