hey everybody welcome to live coding with jesse today we're going to continue on with what we're doing but i had an idea this morning about how to cut down on the number of components that we're using so i'm going to try to implement that idea i'm not sure i don't know i'm not sure if it'll work i haven't tried anything with it i just was getting ready for work this morning and it just came to me so we'll see let's see if it works um let's see i'm on the wrong project i wondered why i couldn't i see what we were working on so i've just been migrating a lot of data still not through yet and so this is what we've been doing every time we bring in let's see where pages are pages so we keep making a new page for every different type of content but it occurred to me that a lot of these are exactly the same we just have a different content types we're just grabbing different content with graphql so we have all these pages that are basically the same with the exception of the name and then we also have all these queries that are exactly the same except for the name so why not just have one page component that accepts not only the the id to get you know the specific type of content that we want but it will also accept from the router the the content type okay so then we can pass into the query so let me all right so right here we're passing in the id wow that's way too small let me make it bigger um so we're passing in the id here and then if we go to an actual component we can see it's pulling the id here and then that's getting passed to our query and then in our query we're using that um here for name so what if we not only passed in the name but we also passed in this so then we'd be able to use the same query for a variety of pages and we'd be able to use the same component for a variety of pages and i think this will work as i've been looking through the content on the site you know even more there's going to be a lot of content that just has the same basic structure i think this works well it will enable us to work faster and be less cluttered and then it still leaves open the possibility of customizing the different parts of the site later on because it wouldn't be that big of a deal to just change you know where a certain route goes so instead of using our default component we can make another component later or customize the default so we'll have different options so anyway let me know if that makes sense if there's any objections to that otherwise that's what we're going to try to do first and then we'll everything that we've done already we'll just leave it no no sense in redoing it right now but then as we bring in new content types we'll just route them through that default uh query and that default uh page component okay and i do need to keep this stream you know somewhat short so we'll see depending on how many questions are in the live chat i may cut the the coding part short so i have to pick up my kids from school so i gotta make sure i get the stream ended and finish anything i need to finish before i leave today let's see all right so i guess the best thing to do would just be to copy one of these pages so let's copy that and make a new page and oops actually we already have page.js let's just make page.js what we use here so page works and do we have department the post.js might be what went with page.js so we might just change that name to page.js because i don't think we're using that for anything else right now but first things first let's get this set up so we're going to import i guess we'll call this page query page query and we'll call this page even though it doesn't exist yet and then down here we're going to want to do page query and then for our options we're going to want to pass in let's see id can we can we do it to like this can we know id and type okay there it was all right so we'll have name id and then let's go with type type all right let's see we do want to change the name of this to page oh i've forgotten about this part okay so we do want to make sure that we use we're going to use type let's see if we can can we put bring in two all right and then let's use type here i think that'll work great oh you know maybe we need today shoot how am i going to get oh within here i needed to be this right are we getting this props data i don't want that i want i guess this props type okay sorry i'm not doing a good job explaining what's going on here uh so for those of you who aren't great with with react um here's here's what we're doing so when we pull things in here uh with nexjs which is what we use to build uh this react app uh when you return these they become available as as props right the function is get initial props so then down here where i'm going to grab the data eventually the data is going to be available um in props so we have this props and we made this const data right so we don't have to type this props all the time so that's why we're starting with data but then for the type since the type's now going to be variable we're going to grab this props types which is going to pull in whatever type we pass in from our server.js file we're also passing that same thing down to here to the query so it it should hopefully it'll make sense once we get it work if we get it working uh so it may not it may not work this is just the idea i had earlier i've never never tried it so maybe that's better let me try see if it works first and then we can go back and explain it no sense trying to explain something that's doesn't really work anyway all right uh let me make this capital capital page all right that's i think that's what we need from now so let's go in here to our queries let's grab this but then i want to go to our post query all right great so this is the sample one faculty departments did we take this you know what i'm not 100 sure that this isn't in use somewhere so i'm not going to change this let's make a new query called page and now let's paste this in and so here we have this variable name but now we're also going to have the variable type um hopefully this this works out what's this new line required about the file but not found um okay and let's change this to page query page query oh shoot all right so we were in the query we're defining name string and let's say type is string all right i'm not sure that seems like that's that had to happen but i'm not entirely sure let me check the live chat to see make a function let's see oh okay harsh it's saying that we i can't use this like that so i'm let me see the time stamp on that okay so that was just a minute ago so i'm assuming that i can't do this what i'm trying to do is that what you're saying all right so i'm waiting to hear that harsher says make a function i'm not i'm not 100 sure what um what what you're you're talking about harshit so i'm sure you know what you're talking about but i don't know so i'm just gonna keep i need to make a uh a route anyway so while i'm waiting on harshit um to explain more i will go to the server file and let me get rid of some of these because we certainly don't need all of these all right or should send me a link to jsfiddle let's check it out oops okay let's see i'm gonna copy and paste what harshit has in here so we all can see and compare all right so let's check it out all right so we can see the making it a function so we have associate query name we're pulling in name where name is name all right let me see i'm just saying return all right all right i'm a little bit confused so why are these why is this name name here and this one name name could i do this variable is a part of graphql syntax the dollar sign yeah so with the dollar sign that that's why i was thinking that i had to make a dollar sign variable here if i wanted to use it in here but what i'm wondering about is like can i rename this name here and this name here to type okay i just don't want it to be too confusing with lots of different variables name name or dollar sign name type type okay and we can change this to page query okay cool um all right let's get rid of this all right so now essentially we kind of have this function wrapper around here and then we're passing in the type do i need to string name let's see oh okay good point harshit okay so harshit's explaining that since this these backticks make it a template literal that's why we can pass this variable in like this let's see okay now harsha do we need to change anything in terms of how we're bringing the variable for name in or we or should we be good with that okay all right so save that let's go back to our page.js and graphql page query so should we then do put the id in like like here or will it still work to add our options in here so basically what i'm saying is you know should we put in type here hmm this props type okay heart should say no change okay all right that's what i thought so we can get rid of this and this okay all right so we have this we have this we need a route now i don't need that anymore oh don't say it all right so that's our route gonna be i guess we could use we could use any of our routes so let me just grab something we've already made so we can copy it and what did i pull over about yeah i think i pulled over some of the about pages yesterday so let's do that because we haven't made let me let me double check in my wordpress installation to make sure that we do have content for those okay i do have those pages okay in about five minutes i'm going to take a break and go back to the live chat answer some questions all right so we're going to have a route like this it's going to be about and then an id and then we're going to send in send it to the page component and with id we're also going to send a type and the type will be about page okay and let's restart the server all right let me give you the ngrok link as well so i didn't give that out yet here we are i think it's still one from yesterday it is um this should still work from yesterday so i'm gonna paste the same link in if it's not working i'll restart it uh but if you click the link i just pasted into the live chat you should be able to see the website now uh all right cool looks like it's working and i'm gonna restart the server here so it may not work for a few seconds okay about and then i need to find content where's my page i think it's on my other screen uh let's see this should be one let's see can i read props of undefined all right let's let's verify that this is the slug yeah our mission should be one can't read property props oh okay so we're at pages46 okay so i can't do this props type here hmm type is not defined well let's see if it'll pass type is not defined okay all right so how do we get the type in here let's make sure that let's see whoops let me bring the live chat up hmm okay rook says try component name props type okay we try that i don't know if that'll work or not but that's worth a shot all right yeah that's not working either ah man i i remember having it might have been the same problem and i can't remember what i did about it and i hate when that happens um okay let me think all right it says use recompose i don't know what recompose is so i'm assuming recompose is a react apollo thing all right so i just looked up recompose all right um okay i guess i just read an article on recompose so it wasn't really documentation let's see we can make this all right cool i found the github of it now it looks like it can do a lot of stuff okay all right let me bring in how about this yeah it's time let me take a five minute break go to the live chat answer some questions and then when we come back we'll we'll bring in recompose and try to get access to the props down here uh to test this out actually we can test this out right now let's test it um page or what was it about page sorry property edges is undefined huh this is not passing it in maybe it's not passing things in like i wanna type about page hmm or like novels we might have other issues as well all right well let's uh let me go to the live chat i'm gonna take about five minutes go through the chat so if you have any questions uh please put them in the live chat and i'll get through as many as i can dakoran said i started work at 5 00 am that's pretty early to start working nikki says there are three hard things in programming naming things and off by one errors i like that one let's see alberto says it's like the there are two things you should know about infjs one they never tell you everything uh infj that's like from the um with myersbriggs personality test right i can't remember what all the letters stand for i don't even remember what i am uh balaji said can you please arrange your videos and uh properly it would be really helpful uh yeah i i do plan on arranging the videos i know i've been saying that for a long time it's just you know there's a whole list of things that i want to do and arranging the videos just has never made it like to the top of that list but i would like to arrange them so far i've had two different suggestions one is arrange them by project which would be pretty easy to do the other one is to arrange them by topic so that no matter what project it is you could see every video i've ever done on let's say graphql or uh routing or something you know which would be a lot harder because some videos i do a variety of things and so i i don't know i mean it would be hard to go back and watch every video to see what i've done because i i don't always title them or give them a description with everything that i'm doing so i don't know i i don't know if i'll be able to get them arranged by topic but i can definitely arrange them at least by project uh ravi raj says this looks cool but i have no idea what is happening um feel free to ask as many questions as you want uh some of the shows are a little bit easier to understand depending on what we're working on let's see richard says uh i'm new what's he working on and michael elsa says i'm always late so i have no idea what's going on right now uh right now we're we're trying to make a component a graphql query and a graphql query that could we can pass in the the type of content that we want and then the slug or id for a specific piece of content and then that way we can just keep reusing that one component in query instead of making new components and queries like we have been doing uh richard says i'm new in programming i'm here that's why i read and try to understand his code and uh yeah richard you know any questions that you have please let me know i'll be happy to help um what's trying to understand you know i'm sure there's something that you don't understand i bet there are other people watching or that are going to watch the recording that also you know could probably benefit from an explanation and it always helps me when i have to explain what i'm doing sometimes i realize that something i've done maybe i could do it better or you know it was kind of illogical and it says ionic framework uh no we're not using the ionic framework right now uh just just react andy says react don't use separation of concerns yeah it's not it's definitely a shift in thinking you know we don't separate everything out we um you know a component will have the mark up the javascript i'm really sorry let's keep yawning but one component could have you know all the markup javascript and styles that it would need all in one file uh harsh okay let's get back to let's get back to the code now um harshit says have spelled it correct test for faculty one time oh yeah that's true maybe i didn't spell everything correct about let's make sure it's initial props about um page page page page type not passing it about page a page and the by server page okay i'm still i'm still kind of wondering why why are we able to grab the id value here but not the type the only difference i could see is that the id is in curly brackets right i don't know what difference that would make and still yeah no difference why does id are we oh compose with root with data sorry see let me make sure let me go somewhere else just to make sure this is working okay sort of make sure i didn't accidentally mess up the wordpress installation again oh harshad says that he's got it all right cool watch it oops there we go um whoa use react clone element page props type all right let's let's try that out okay also want to change this back to what we had types okay why so what's our render all right let's see what we have now economy property edges so undefined okay all right well that's that's not bad so the error basically this seems to be working now which is good um so now the error is here in terms of the data that we're getting back so i need to make sure what we're passing in harsh it says try faculty are saying try faculty like make a faculty route and then try this on there actually let me let me use graphic ql just to make sure that this is working so i don't want to keep troubleshooting that if that's not really a problem um let's see where's our page query i can't find about in schema okay or she's already checking the schema that's a good idea about page by about page yeah i actually i see about paige hmm hmm let me check the router as well to see if i'm not routing something ahead of this okay all right that looks fine hmm see what i'm passing in sample query queries pose uh let me shh have we tried something yet that had two words is it faculty department is that what we used to no departments okay so we are using this form right the associate programs that edges okay so you do like this i kind of want to see what what we are getting here let's see let me double check the live chat it looks like harsh it says about pages the s uh the s so so should we use about pages no so my queries no need my queries major query where majors hmm so shoot programs huh oh you know what i need to restart the server sorry can't just make a change and have it work all right let's see all right so page such as about pages and then now here get out of here okay and this is this is floral too yep all right so everything does need to be plural and it looks like we we have that um nikki says it's taunting you flashing the site just before it gives you that error page i know right come on okay i should say save the page so all right i guess i have not saved it then all right so that's saved let me save everything the server save the server as well alright alright now no restart yes still nothing um uh ricky that's a good suggestion ricky says just console log this props yeah at this point yeah it's like what am i gonna do um let me take this out so i quit getting errors i could console log in let's console though i want to make sure that i'm getting type in here properly too um cannot query field undefined all right so it looks like type it is not getting passed in properly let's see all right so that does fix it ah okay all right so at least we know where the problem is now so everything is coming in if as long as we can pass about pages in it works so we know we can get it from this props about pages but we need so we need to be able to get this props type here i mean honestly like this is just gonna i don't know if this is the react way but like just thinking like javascript wise like this is just a scope issue right like uh let um type equal i mean can we do something like this type is just oh yeah i don't want to do um query type and then in here i can just say query type equals type and then use query type no all right let's see expected name but found cleavage ah all right we have a different error now which is progress in our queries okay so we expected a name did not get the name let's go let's console uh type see what we're getting yeah yeah okay let me see all right harsh it's saying add yarn add recompose um actually yeah this is beside the point we're obviously not getting the right data in because we got it to work before when we just hard coded it so so what i did must not have worked i don't know why but it doesn't work so let's get rid of what i just did then all right we don't need this log anymore all right and great all right so harsh is saying use recompose i'll install it let's see and keep an eye on the time okay all right so i have recomposed now i've never used recompose i have no idea how to use recompose i've just glanced for a few seconds at the documentation here so i'm guessing i would use the map props with recompose map props or with props okay with props all right i'm checking out the api documentation right now all right let's uh so this and then down here oh michael korea is asking how to get to the page that gives the errors let me just paste this is what i'm using so you would replace localhost 3000 with the ngrok url obviously um but that's that's what i'm trying to test out all right let's see so now i'm gonna have a with props create props all right so it's like mac so i'm reading documentation for this on my other screen so that's why i'm talking to myself here um okay hmm um with props foreign thank you it looks like i can also use default props let's see if i can do um so all right i need to find an example of this because i'm not sure you now all right let me bring over something i found that's somewhat similar to what we're doing it seems like all right so right now they're making uh higher order components but uh in here they're they're importing with state from recompose which is similar to the with props that we're trying to use and let me give you here's the link to the api documentation that i'm looking at right now and uh it has the anchor directly to the with prop section so maybe if you all can uh can check it out you know knowing what we're trying to do with it you can help me for some reason i'm just missing something but anyway so basically export default compose which is exactly what we're doing but then here it says with states and then we brought in the is visible um and toggle viz so and with handlers we say toggle visibility and it looks like there's now access to toggle vis and is visible here so with that it seems like what we should be able to do then is within with props we should be able to just say type and then now we'll have access to type as a variable i'll make sure i put a comma there type is not defined okay let's see what i miss let's see hmm ah let's see maybe no it's still not going to do anything all right all right let's check this out again okay oh all right awesome okay so they're using with props um all right so all right let's check out with props now uh looks like we can grab it here let's just grab that pull it over here with props and so all right so we're returning all right michael chris is in the i guess in the query are we starting off with where don't you need to declare what we're filtering on yes all right let me see i can't see my chat my chat window is now zoomed in and won't let me zoom out and now i can't see anything okay now why is it doing this there we are finally okay um page create shouldn't it be page where um yeah the query is fine so there's the where we have so we're pulling in the type so that should be it should be okay all right so let's go back to here and just say so this is all right all right it's so good all right i don't really think this will work let's give it a shot type no still nothing all right this props type no it shouldn't all right save this props is undefined okay i'm at 50 props and fine yep okay okay all right harsh it says now final solution update apollo there is a new query component no need of composing then all right let's check this out then all right so let's check out this new component that we can use whoops github.com apollo graphql why is this not working releases that was weird new query component wow what so wow okay all right let's try it out then uh we'll check our package json to make sure we get the version we want so this should be two one two 2.1 no didn't get that all right right all right we're taking out recompose and let's make sure we take this out of our component i'm we may not get this working in time we'll see um recompose um okay okay oops all right so let's try to get this oops where's it at here it is uh let's try to get this beta version running so all right let's see if this works so this is a harsh it's suggestion two we have react apollo latest version nope oh okay i see your other suggestion there horror yeah and that is what we need right beta 2.1 2.1 awesome okay let's just make sure you didn't break everything okay cool still works all right so now i guess we can use stuff like this import graphql query let's import these so can we just get rid of both of those then and then down here do we need any of this now we still need compose all right uh sun bass says jessie you are alien as far as i know i am not but maybe maybe you know something that i don't ugh all right all right let's go back to our example here so let's take this oops let me see your function my computer all right let's we have query and now we need to grab what our query was um okay okay and we should be able to do our name equals string and how are we reassigning let's see okay so we're saying variables name id so we should be able to we should be able to add in this props type and now that's what i'm confused about it's ours just saying leave the query i'm not exactly sure where he was talking about to leave the query anyway what i'm not sure about is we're past when we're passing this name in irish it says remove the query stuff so all this query stuff uh okay michael says i'm so lost so i'm gonna need i'm gonna read up on so i understand what's going on i'm pretty lost myself here as well so i guess just to catch everybody up to speed including myself just as a review we've updated uh to the beta version the 2.1 beta version of react apollo there's a different way to do queries a query component i'm trying to convert over to using this query component what i'm not sure about is i was trying to follow harshit and i get the messages remove graphql from export so i did that no need of query and then the next message was leave the query and then the next message was remove query stuff so i'm not exactly sure what what's going on because i i've gotten both leave the query and remove the query so i'm going to drink some g fuel um all right harshit says you you have adam still let me edit the code using teletype it's hard to explain in the chat um yeah i do have adam all right let me check the time see if we have time for this um i really do want to use teletype because it sounds really cool but i think i'm gonna have to end the stream because i need to i need to make sure i get everything ended in enough time for me to um get ready and pick up my kids from school so what if what if we wrap things up here i commit what i have and then work on it tomorrow does that sound good so i kind of figured on the stream being over by now all right i'm just i'm going to scroll through really quickly just to make sure there hasn't been a question that i missed uh ravi raj says are you an independent developer or work for free code cam i volunteer for free code camp and i work for a university so um i'm a frontend developer for a small university i also do some work on the side i like freelancing work drewness when i use visual studio code on windows the font isn't that bold how can i make it look like that um i'm not sure i'm using the seti theme so scti i don't think i've done anything else besides just use a different theme i mean i've made the font bigger um but other than that i don't maybe it's just the theme igor says where can i find your custom post types post plugin i don't know if i have it i don't know if i have it available on github or not check out the uh ci react repo so it'll be in the same organization as this repo it might be in there it might be listed as like ci custom post types or category custom post types it's basically the same plugin i'll just add some some different types but maybe it might not be a bad idea to add that in with this repo as well uh michael kerr is asking about a react tutorial codecademy has a pretty easy intro react tutorial uh michael cruz says is there any way to see your data structure not sure how wordpress works um i don't know i guess i mean normally if i'm running wordpress i usually have it running on something that has like php my admin and i can look at it but i don't have that right now um so i i don't know i mean it's following the same structure as a normal wordpress so maybe there's like an example online of the normal data structure for wordpress all right so yeah let me commit this let's see what the status is package json pages okay oh what do i need um a new feature don't think so ah shoot i figured that'd be the case queries defined but never used gql is defined let's get rid of that and then i'm pretty sure i use query did i not save it all right so what 54. maybe i should just take that stuff out yes take that out let's take a page query and query and graphql there we are harsha says just use no verify yeah that would have made sense i should have done that all right let's just run a get how did my server.js get modified thank you yep that's what i meant uh come on no verify two dashes there we are all right okay all right everything is now committed and we will pick this up again tomorrow so i've already gone through all the questions in the live chat and my brain is tired right now so um learning something new is hard enough but uh it's i i guess learning something new on the live stream is harder so um all right so i'll see y'all tomorrow kind of like i have an early meeting tomorrow i'm gonna try to get in early enough to schedule the stream before my meeting and then that way i can jump right into it if i don't get in that early though i might not be i'll try to do the stream at the same time but it might not actually be scheduled uh so you may not be getting a notification on youtube you know like an early notification or any at all so i'll i'll see i'm gonna try my best to get in and uh and get the schedule all right thanks for all the help um almost had it we almost had it today i think we're really close i mean basically everything's working except just need to pass that that's um type through uh to the query so we knew it already worked when we manually passed it through so i'm i mean i'm happy with that the concept works so from here on out it'll definitely cut down on the amount of work we have to do and it'll clean things up so uh i guess i guess we did enough to prove that the concept works so we could let's count that as a win right all right uh thanks for watching and uh i'll be back tomorrow until then have a great day