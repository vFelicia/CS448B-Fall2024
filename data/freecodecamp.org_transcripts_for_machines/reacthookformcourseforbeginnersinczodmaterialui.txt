learn how to use react hook form which makes it simple to add forms to react with authentication in this course from code genix you'll learn how to handle the most complex crud form scenarios and react and completely integrate it with Zod and material UI this is the most complete Zero to Hero tutorial you can find for free on YouTube for react hook 4 I spent a large amount of time on this tutorial so liking and subscribing means the word to me in this tutorial you learn how to handle the most complex CR form scenarios and completely integrate with Zod and material UI or mui if you only want to learn react hook form and not zot or mui or if you want to change your validation library for example to y or UI library for example to and design you can still follow along with the tutorial the video is mostly about react hook form the tutorial is Project based but you will learn Concepts section by section so you can navigate through the video to the section you want using the timeline below we are going to create a user crow form that covers the most possible form scenarios as you can see here our user is going to have a name email address the states languages gender skills registration date and time former employment period which is a date range his salary range and also Dynamic form Fields like this as you can see here I can add new form fields to my form dynamically each field is going to have its unique validation for example for email if I put wrong input this throws this validation error that email is not valid and if I make it a valid email like this for example test sign gmail.com their error will be gone or for example if I select more than two scales for my user the error will be raised which I have put in my validation SCH schema like this for for each of these fields we create reusable components that connect the mui component to the react hook form we can later use these components in your other react projects all of this is handled in the most type safe way with the least amount of code we can also find all of the codes in the description below of this video you will also learn how to populate your form Fields by calling external API like this for example if I switch between different users here you can see the form Fields will be filled according to the data that I'm getting from the server and for example if I change the James name Tod for example David here and if I go down and hit on edit user you see that user edited successfully and the James changed to David and if I again switch to this user here you see that the new data is populated in the user form so you will learn how to create read and update an entity with the real for example using the best form validation strategy best practices architecture and much much more so let's get it started before we start setting up the project I need you to know that you can find all of the links of the source codes in the description below also if you have already set up your project you can always change the timeline below and head over to the section that you want another thing that I want you to know is that more than 92% of my viewers are not subscribed to my channel so subscribing and liking this video can really help me to stay motivated and it helps me grow my YouTube channel sooner so thank you very much so let's start a tutorial open up your preferred ID in this tutorial I'm going to use vs code then open up your terminal and create a very simple VI application like this mpm create V and Dot to create the project the same folder and hit enter I'm going to select react here type es Plus swc for better performance and that's it then let me just clear my terminal here then then type npm run sorry npm install to install all the packages after that all of the packages have installed we need to also install all of the requirements for our project these are all of the packages and dependencies that we need to install for our tutorial first we have mui packages here these three are always required in every mui project this is for our icons our date Piers here for this tutorial being complete we need to also install the date Piers pro version of mui B if you don't have this installed or if you don't have the license you can also follow the tutorial 100% there's nothing different if you don't have it installed because you can install it easily and after that if you have preferred to use the extra features of date Pickers which are not a lot you can buy the licensed profit to use but in this tutorial the date Pickers the simple date Pickers will satisfy our needs there's only one or two features that we need to have the date Piers Pro installed but there's nothing very special can follow along we have also we also going to use the data fness there are many libraries for managing data and time in JavaScript but for example moment and data fness but the reason that I prefer data fness over all of the similar packages is that it supports many different calendars and you can always convert between all those calendars between each other which is pretty awesome after that we have our form logic here the main dependency the react form is here use Zod for our esas and validations we also need to create a connection between the react form and the Zod here and because of that we need to install this hook form resolvers because by default the react hook form doesn't know anything about Z so we need to create a connection between these two libraries with this third Library which we are going to install it as a third as a death dependency and lastly we have our utils here we need a simple HTTP client we are going to use axus here because we're going to fetch our data outside of our project for simulating the real Bo we're going to use a March back end in this tutorial which we're going to set it up later after that we are going to install the lad dash for a very simple task which is not very requir in this tutorial and also we are going to install the react query to manage our serate which is not required in this tutorial and if you have other ways to handle your queries you can follow along and it's just for the Simplicity that it provides and if you want to learn it you can check the description below to check my other free video on YouTube about react query which is the complete course of this package but you can see follow along if you don't want to use this package or you haven't learned it yet now we head over to the vs code then open up the terminal and install all of the dependencies that I just told you about but a very important thing to do here is that to just install the version 3.2 of the date FNS Library here because there's some conflicts between this Library here and the mui datee Piers Library so if you install this version of it everything is going to be all right now hit enter after that they are installed you need to also install a very simple dependency the hook form def tools as a def dependency here which is helpful for debugging our form so hit enter also then if we head over to our package.json file let me just make it a little bit smaller these are all of the versions that I'm using in this project so if if you want to exactly follow along you can install these exact versions so you don't have any conflicts or other problems also I'm using the note version 20 in this tutorial now close your package adjacent file open your file explorer here then delete the assets folder app to CSS and index a CSS file here because I always want to keep everything very simple and in this tutorial we are not going to use any CSS at all and styling because we don't need them so remove all of these then head over to your app. TSX file then remove all of these Imports then remove everything between the curly braces here to the bottom and for Simplicity I'm going to return return a simple div like this you're going to change it later and I will prefer the name export instead of default exports it's just a personal preference so use whatever you want now I need to do a little bit folder structure here in the SRC folder I'm going to create a components folder a types folder and also a users folder which is mainly the thing that we are going to develop in this tutorial is in this folder as I talked before and I'll show you we're going to create a CR user for this tutorial also in this feature in the users feature I again create the components folder the services folder the types folder and also the U folder to do some simple task for us in the components folder I'm going to create the users. TSX component itself which is the main component of this feature then the services folder is for communicating to the outside world for that I'm going to create one file called queries. TS because if you have follow along my react query or query tutorial you know what is this going to be but if you don't know it or if you don't know react query you can also follow along pretty easily and also we need to create another file called mutations. TS this is responsible for for example our post request delete request put request and this is for only getting data from the server which is not related to this tutorial but I have to do because it makes the project much simpler for you to follow along let me just collapse it and we don't need to create anything inside the Su folders for now then we need to head over to the main. TSX file let me just close the Explorer here I need to remove these two Imports here sorry I need to just remove the index at CSS file here and change this import to named import like this now we need to wrap our project inside our react query like this I'm going to Simply create a new query client client is equal to new query client I don't know why sometimes my vs code intelligence for imports do not work so I'm going to import all of the packages manually so I'm going to import from 10 stack react query the query client itself and also I need to import query client provider here like this and I'm going to wrap my project inside this provider here so like this I'm going to use Query CL client provider and I'm going to wrap my app file inside it then for the property client property I'm going to use this query client that we just defined earlier so like this query client then I need to go to the users component here then I'm going to export a very simple function component like this return div for example users and after that I'm going to import the user component inside our app. TSX file here like this I'm going to remove this return again I'm going to type return and then I'm going to use users here like this and now if we run our application like this andp run Dev if you head over to this address here we see that everything is working as expected excuse me that if the tutorial is very slow paced but I want you go through everything in detail and this tutorial is very beginner friendly so anyone can follow now that project is perfectly set up we can start the main project so for that we head over to our users. TSX file and for you to better understand the concept of react hook for the controllers and Zod I need you to create the old way of creating form fields in react which is pretty simple just follow along but it's necessary for you to learn the react hook form and the controllers of react form so it's necessary to follow line in the return of our component I need to create a simple HTML input as you can see here the input is here but it doesn't have any special functionality for now for this input to have some meaning I need to create a simple State like this for example input and set input I'm going to import from react the user State and the initial value is a simple string now I need to somehow create a connection between this and this input for that for the value property of my input field I'm going to put for example input the input and now for example if I change the initial value of this input for example to something and if I refresh the page you see that this value is bind it here just let me remove it and as you can see if I type anything here you see that nothing is changing because I need to also do something but the input is changing so for that I'm going to use the unclick Handler for react then I'm going to get the event from this and after that I'm going to set the input to e. target. value sorry for my mistake instead of unclick I need to use unchange Handler and now if I type something on this input you see that the value changes and now I can access this value inside of a component because this value is exactly this for other things to handle for example I need to specify the unur when the user leaves the field what should happen I need to specify a name for my input for example the user name by hand then I need to pass the ref I need to handle the disa state if the field is required what is the max length of my input field and much much more as you can see this is too much code for only a very simple text field or input in our project and it's going to be a spaghetti code as our project grows which is not very developer friendly and it's going to become very very hard to maintain for Enterprise our larger scale applications and that's the old way of using or or creating form fields in react now I need to replace this implementation with the modern react hook for implementation let me just remove all of this only I need to keep the input like this then I'm going to remove the state and also the user import then from the react hook form from react hook 4 I need to import the main hook of this amazing Library like this then inside my component here I'm going to use it I'm going to Define const is equal to use form like this and from our use form hook I can access all of the properties of the react hook form for example I can get the values of my form I can register my Fields I can reset my form I can set value of any fields and much much more you can also use the functions or values of use form hook like this for example instead of opening and closing CR braces here I can remove it and for example I can save form and below it for example I can access all those properties and attributes like this for example I can say form. register or I can say form. set value but it's too much boilerplate code and hard to read and also the use for recommends us to initialize the values from use for hook like this for example for now I need to get the register for now and you're going to know what is it in a second also this hook here is generic what does it mean it means that I can pass a type for my form like this for example my form is a single email input like this which is of Type S string here this going to help us with intelligent very very much you're going to know in a second inside the return section I'm going to open and close curly basis here and I'm going to use a spread operator then I'm going to put the register here like this so and for its value I'm going to place single quotations here and as you can see here the intelligence is helping me here this is the email the react hook form got from the generate that we passed here so the Intel sense is crucial here so I select email here and as you can see my input field is registered with my hook for but what is this register here let me just remind you instead of passing unchange ref name the unblur max length of our field is it required or not and so much board instead of this we're going to pass this which if I show you register and if I place a DOT here you can see all of the things that is going to do for us with this sprad operation Ator here it has name un blur unchange ref required disabled Max mean and so much so much more let me just remove all of these this is the most simple form that you can create with react hook form and if you compare it with previous implementation you can see that it's so much cleaner code and easy to maintain and it does for us very much now if you open your browser you can see that everything is working as previously just let me put a simple placeholder for my input for you to know that it's an email field and now you see that there is no validation on this input field for example I don't want to let the user enter invalid email for example this is not a valid email so I need to show the user a very simple error below it that your email is not valid or it is too many characters or this field is required and for example you cannot leave it alone the thing that I'm going to show you is the default implementation of feied validation in react H formb it's for you to better understand the concept of react C form and it's not the way that we want to implement the validation in our tutorial and for that we are going to use Zod in a few minutes imagine that my email field in my form is required and it cannot have more than 10 characters to make this type of validation I'm going to put a comma here then I'm going to open an object here inside that for example I can type required these are all Native HTML Fields validation and I again open another C basis here and for the value I can say I can put the true here because my email field is required and for the message I'm going to put for example the email is required I can add other validations here for example I can add max length is going to be 10 for example and for the message I'm going to put too many characters characters sorry character erors that's it for now but how to show these errors to the users I need to put my input inside a react fragment here and below the input I'm going to open a paragraph here then I can show the errors to the user but how very simple in the use form hook we have our form estate like this and if I show you this form estate here form State you can see that there is errors here disable the fields that are dirty or for example if our form is submitting and much more but it's not a good practice to use for example if I want to show you show the user the errors like this form mistake. errors it's too much go down it's not very nice for that in my use form hook I'm going to put colum then from it I'm going to import the errors or other thing that you want for now the errors is enough between these two paragraphs here I can put errors. email this is for the generic that we pass here in our use form Hook and the intelligence is amazingly helping us out and we put another dot here I can then I can get the email. message here then we can show it to the user and now if I head over to my application and if I for example put more than 10 characters here as you can see there is no error shown to the user but what is the problem here by default the react hook form shows the user the fields errors the form errors when the user hit on submit or create or anything else button below the form but for now we don't have any submit button inside our form for that inside the options of the use form hook I can open an object here and I can also apply many many default settings for my use form here I can set for example default values for my form I can set initial errors I can use the resolver which is the thing that is going to connect the Z to the reactor form in a moment for now I need only the mode field here then I put call in here and as you can see here this is when form validation occurs by default it's on submit by default and if I again refresh the page and if I type more than 10 characters you can see that there is no error here because it waits for us for for us to submit the form then show the errors to the user but if I put it on all and if I refresh the the page you can see if I type more than 10 characters it immediately shows me this error because the validation is set on all I can also change it to many other conditions for example I can put it on blur here and if I refresh the page if I type more than 10 characters and unfocus from this input you can see that on blur this error is going to shown to us but for this tutorial I'm going to put it on all for you to see better all the errors I'm thinking there here and to your preference you can change it later for example if I type something and remove it you see that the email is required let me just make it a little bit smaller the email is required is shown to us from here which is very powerful thing to do in use form with a few lines of code which is handled for us automatically every form needs to be able to submit its data to something for example your backend it's pretty simple in react hook form I'm going to change this react fragment here for example to form then this form has a property called unsubmit this is all HTML and inside it I need to pass something first what I'm going to do on submit if the user clicks on submit button or if he clicks on the enter button on his keyboard it's going to run this function here for example I can name it whatever I want for example I call it un submit for Simplicity then I'm going to create a simple function that likes the submit V here and I can pass the onsubmit here the problem is that whenever the user clicks on submit or hits enter on his keyboard the form is going to be submitted to the server which is not the behavior that we want because there might be some fields that they are not validated or they are required but they are not filled by the user so we do not want that behavior to overcome that also react form provides us with another utility called handle Summit for us it's pretty easy to use it you just need to wrap your submit function here around it handle submit and I put ons submit here inside what does this do is that let me just show you side by side if I go over it and hit on enter which Summits our form and runs this function here if I hit enter you see that it's going to raise us all the form Fields errors and also if you check the console here if I refresh again and hit on enter this function didn't run which is exactly the behavior that we want we want this on Summit function to only run when all fields are valid this handle Summit does this for us so if I make this email form valid for example like this and if I hit on enter you see that Summit is run collect now if I make this form not valid and if I hit on enter you see that there is no Summit here which is exactly the behavior that we want so this was the most simple form that we can create using react F form this way of implementing a form in react to form is totally all right and 100% correct but the problem is that when our forms become more complex this way of handling for ES schemas here and the validations like this here is not very maintainable and it can become unmaintainable after a while imagine that your application has 15 20 or 30 forms inside it and each of them has 20 or 30 fields in it and you need to handle all of the validations the schema the summit and so much more this way of implementing is not recommended for Enterprise applications in react the Zod is here to rescue Us in this tutorial we're going to create this form here as you can see there is so much into it if I for example click on the summit the new user button you see that all of the validations are causing error which is correct if I hit the reset button here the form has been reset if I click on for example David a user the fields are loaded if I click on John Robert and so much more I have auto complete here the toggle button and for example these checkboxes have validation to for example if I select more than two items the validation is causing this error that at most two elements must be selected which all of these errors and for example all of these errors are caused by zot for example if I put no email here it says that email is required if I put invalid email it says that email is not valid and so much more and if you want to handle this type of forms with this way it's not pury recommended so we need to use Zod this is Zod Zod is a type script first scheme of validation VI static type inference which is pretty complicated here and in the documentation also Z is a type Escape first schema declaration and validation library and and so much more but we are going to learn what is it in real world example for you to learn better in practice this is the form that we have created so far and this is the form that we are going to create before we assort anything about implementing this structure in our project we need to create a skeleton for our form by skeleton I mean the schema for our form the fields names their types their validations for example this field is going to be of type a string this going to be of type bullan this going to be of type date these are going to be of type A String arrays and much much more during the SCH schema creation I'm going to compare the result and the schema itself side by side for you to better understand what are we doing and creating at the moment so in your vs code just open the file explorer then inside the users folder inside the types I'm going to create the es schema. TS file which is the schema for the users form which is I mean this schema is exactly going to be here when it has been implemented so now if I head over to the SCH schema I need to start implementing my form SCH schema to create a schema in Zod first we need to import Zed from zot and inside my es schema. TS file here I'm going to export cons es schema you can name it whatever you want which is going to be equal to z. object and inside it I'm going to put all of my form Fields what do I mean as you can see here my form has a name field then inside my schema for example I can put the name field here which is going to be of type z. string and that's it for our first field schema VI Z the syntax is very explanatory and very very easy to implement for example if I had another field called for example age I can do something like z. number if I had a date field for example I can do set. date we can do for example custom field with Z like this imagine that you have a type that is not in results default types and you can Define it here and so much more that we are going to learn them one by one let me just remove the age also also if you remember you see that my name field is a required field and if I remove and clear the field you see that it says that a string must contain at least one character to implement something like this in Zod which is pretty simple I can put another dot here mean and one it means that the field cannot be less than one at least I need to put one character for error to be gone also this error that is shown here is handled by Zod also and you can also overwrite this default error pretty simple uh in your SCH schema right here for example I can open an object here put message here then I can put something like required here and you're going to see this required exactly here in the error field which we haven't implemented our form yet so bear with me the other field is email which the concepts are the same but the problem is that we cannot put the zot doesn't have anything like the email validation here and we must put this kind of validation manually which is pretty simple and normal below the name here I'm going to create the email which as I told you before the names here can be different and can be anything in front of email I'm going to put z. string as before and then I'm going to put mean of one which means that the FI is required and also if the email is not filled yet the validation error cause this error to be raised email is required let me just make it a little bit smaller it's too much and that's it for now but it only validates if the email is not filled or if this input is empty like this but how can I do something like this if the user enters invalid email where does this come from this is the power of Zod here I can put dot dot refine here then what does this do is that it's going to create different or custom validation for our Fields after all of this here by now my email is going to be a type of string with the minimum character of one and now I have access to the email input like this for example email but it can be item with text anything else the name doesn't matter here but the thing you need to know is that this is going to be exactly the thing that the user has typed now for example if I put a here it's going to be a i to if I type fa here the email or for example item or text field is going to be fa now I need to do something here in the refine function of Zod I need to validate the the text to be image and if it is true then the validation is correct and else if it is not a valid email it causes this error to be traced so it's pretty simple to do let me just remove this here inside your file exp I need to create for example a new file called cont constants TS here then I'm going to paste this custom rejects here which will validate any email pattern here you can copy it from the source code or you can do any other different Rex pattern that you want just I only want you I only want to show you how we can Implement different types of custom validations in zot so we Define these patterns. email here if I want to access it from other components I can access it like this patterns. email which is JavaScript 101 now if I head over to the users component here sorry the es schema function here I can do something like this this refined function expects us to return a bullant statement it must be either true or false so I need to validate if this text the text that the user has filled Now by now is an email or not it's pretty simple using reject so I'm going to return patterns. email this exactly the thing that we just paste it here then I'm going to test this reject with the value of this now this is going to return a true false statement if this text validates the email rejects that we just paste it's going to return true otherwise it's going to return false and then our form field is going to return is going to show us an error and also I can make this code a little bit simpler I remove this carrace here this one and also this one then I'm going to return the return here and that's so much simpler after the function we can pass another argument here which I can pass custom validation errors like this for example I can say email not valid which you are going to see it in our application in a moment we are going to do the next fields in a moment just I need to implement these two Fields schemas inside my users component for you to see what are we doing right now now we need to start implementing our form Fields one by one in our users component here using material UI or muui and I expect you to know a little bit of material UI because uh our usage of material UI or muui in this tutorial is not pretty complex and it's very easy to follow if you don't know anything about mui you can also follow along the usage of mui in this tutorial is something like for example this input field here and in the mui for this input field is going to be for example be text field instead of input so I remove all of this I just put a simple react fragment here I'm going to remove this also I need only the register here then I need to remove this generic here but I need the mode to be all for now then I'm going to remove this on Sumit also now I can start adding my M components here if we head over to our schema here again we see that we defined a name and an email here so I need to create two text Fields using mui the first one I'm going to import text field which my intence is not working I'm going to import text field from assign mui and material then I'm going to pass a register register as before but as you can see here I cannot see any intelligence at all it is because that we remove the generic that we passed here so I need to pass something here this is our esema and this is our form here we need to create some kind of connection between this esema here and this generic here because I expect that here I can see the name or email by vco intelligence for example name or email here which is recommended to me by vscode but now I cannot see anything because this form here doesn't know anything about this schema here to do that I cannot simply pass this schema here schema here because this isn't a type but this generic here accepts only types the has an amazing utility type that you can easily convert your SCH schema into types like this below my schema or anywhere else I can export a type called for example es schema or anything else which is going to be equal to z. infer and I'm going to pass this esema as a generic to this z. infer here I'm going to pass this type of our schema and now if you hover over the schema you see that we have name and email and we converted our schema here to a type which now I can simply put this es schema in here es schema and I'm going to import it from types schema and if we control and space here we see that we have email and name pretty easily and the intelligence is working as we expected but by now our form doesn't know anything about the Zod here you only pass the name this is used for only for intelligence and nothing much more but we need to somehow create a connection between the form the react hook form and Z which is pretty simple here inside this object here I can pass the resolver like this and for resolver I'm going to use Zod resolver then I need to import the Zod resolver Zod resolver from which form the resolvers slz then this Z resolver here expect expects us to provide it with an argument which this argument is going to be exactly the schema that we just defined earlier so I'm going to put schema here and that's it by now our form is completely connected to the schema here by using the Zod resolver for the logic and the SCH schema generic that we have inferred from Zod for the Intellis to work better now I have intellisense for my name field and also I'm going to put put another field for my email but as you can see by now they don't have any labels I'm going to add a label for name for example called name and also another for email called email for you to see better understand what is what then I'm going to put them in a simple stack if you don't know what a stack is in mui it's a display Flex with the direction of column and now I can add a gap of two between these two Fields here the six is exactly equivalent to the a style prop on any HTML tag for example instead of doing this in mui I'm going to do something like for example div St style display is off of type Flex Flex direction is column and also the Gap is going to be two which is exactly this stack here but we do not need it the stack is pretty much simpler because we are using M now everything is correct now but as you can see here if I do anything the validations that we Define in our schema these validations the SCH schema the email is required imaage is not valid or the required message of our name field are not shown to us because we need to tell the mui about these errors which is pretty simple and selfexplanatory the mui text field provides us with an error Boolean what is it if it's true the field is going to be of type of color red and else is going to to be normal so we need to somehow tell the mui that if there's an error on this field change your color to red or error or whatever else to do that as before from the form State object I'm going to get the errors of my form and for the error I want to make it true when we have an error otherwise false errors. but we need to convert this value to a Boolean it's pretty simple in type Escape we are going to to use double exclamation marks here and this is going to convert this value to a Boolean and now sorry I use wrong field here I'm going to put name here instead of email because it's email it's a name field and now if I uh don't fill it you see that we have an error because the fill is required and we haven't filled it yet and if I again fill it we see that the error is gone but we need to also show the user the error the mui provides us with the helper text prop if you want to use it we can simply put helper text here in our text field then inside it we can provide for example I can provide it here test as you can see here the helper text is exactly below our text field here and for example if I if our form field has an error the error is going to be here and we somehow need to substitute this text here with the error validation that we provided in the Zod schema if you head over to our schema here then I put it here side by side we need to somehow show the user the validation errors in our schema in our component so it's very simple can be done with the react form on our errors object errors. email not email the name do message I can get I can get the validation message from my ER schema as you can see here this error message is automatically provided by the we can overwrite it here like this I can put for example message is equal to required and now if I refresh my page then you can see the validation here this required exactly here and if I resolve this issue here you can see that error is gone I can simply do this scenario also for the email text field for error I can pass the errors. email exactly like the name text field and also for the error message I can do exactly something that be done for the name errors. email. message and if I enter invalid email we can see see that this error message here exactly is shown to the user if I make this field empty you can see that email is required which is exactly this message that we have passed for our email in our schema this is enough for now so let's just add new fields to our schema so I close the users component here make this bigger and if I head over to our final project here we can see that here we have an auto complate component from mui which we can select the states in the drop down here and also I added another validation that if we select more than two items here it will cause this error to be raised in comparison to text Fields implementing this Auto complate component and connecting it with react hook form and Zod is something that we need to handle it manually let me just give you an example if I head over to my users's component I create for you the most simplet form of AO complate here the complate I'm going to import it from mu y then it's going to need an options property which is responsible for showing these options here for example for demonstrating only I'm going to for example put the ID to one and for the value I'm going to use for example Texas here also we need to put the render input prop here we're going to get the params from the this render input then for the return of it I'm going to render a simple text field like this I'm going to pass the prams here with the label of for example something like States if you head over to the mui documentation of a the complete this is exactly the implementation that we just did in our users component here now if I head over to my application we see that an error will be raised because instead of value I forgot to put label instead because a complete needs an array of options with the key ID and key label here instead of value and if I click on my auto compete here I can see that the Texas is here this is the implementation of the complete component in AI but the problem is that this component doesn't know anything about our for here and we cannot do something simply like our text field here we cannot pass something as simply as a register to this auto complete and we cannot expect that it works so let me just remove it from here because of that I need to create a custom controller for the mui or the complete component and I want to make it reusable so we can use this component that we just created anywhere that we want because of that I'm going to open the file explorer here then in the components inside the SRC folder I'm going to put the custom controllers that we create for the react hook form and mui so inside this folder I'm going to create a custom component for example called rhf AO complete AO complete. TSX the rhf it stands for react hook form so I always want to create my custom controllers like this so I know that it's a controller for the react hook form library inside this component I'm going to export function rhf Auto Complete auto complete like this then I'm going to return a simple something here for now implementing this controller here the component that we are just going to create here is pretty much tricky but very sensible and it requires to to follow along the instructions carefully and if you implement this custom controller in our project the rest of the tutorial will be very easy we're going to create custom controllers for aut complete for Target group for radio buttons for checkboxes and much more let me just remove the return value here then I'm going to return controller and I'm going to import it from react form let me just make the ID full screen to consent concentrate then I'm going to close it here this controller from react hook form provides us and render property that from this we can get the prams that the react provides us then we can pass it to something that we want to this controller to control for example here I'm going to use the auto complete component from mui and we need to fill in the value here the unchange method unchange method options and much more but we need to somehow get all of these values from our controller here our controller also wants a property called control which I'm going to pass the control here which I did not defined it yet and also a name here after that we implemented this custom component which we didn't yet if I head over to my users I cannot simply use it for example like this rhf or the complete in my users component then I'm going to pass the name for example something which is exactly something like this register here I'm going to pass the options which for example in this example let me just change it to state in this example is going to be our list of states here and also for example a label to show the user what is this field stand for for example I put the state label here like this but what should be put for this control and name here this control here is exactly going to be the control that we get from our use form hook we need to somehow pass this control to our rhf or the complete component here also we need to pass the name the errors the error message and much more related to our form here which is not a good practice to pass all of these values from our form to our CH component because we want to make this component reusable everywhere that we want but we cannot pass from our parent form to our chart component in here RF a the complete every time that we want to use for example in here if you want to use the RF a the complete in this component here I need to pass five or six at least properties from our parent to this component here which is not very good practice the react hook form provides us with a very powerful API called use for context what does it mean it means that I can define a form here this form then inside another child component of this parent component I can use instead of using use form here I can use use form context as you can see our nested input this component is wrapped around this form provider this is all related to react context and if you don't know about the react context you must learn it for this tutorial to make sense for you so if you don't know it I recommend you to just put 10 or 15 minutes of your time to learn it and after you have learned it then come back to this tutorial then we can do the rest of the tutorial if I want to recap this nested component here is wrapped around this form this form provider or form context here and I can simply access the register of this use form who here exactly Inside My Child component other than register I can access control errors and much more anything that we have in our form instead of passing all of our form properties this nested input here we can simply use use form context here which is going to be very helpful for much complex components and will be make it easier for us to handle these complex scenarios and it will solve us for us the problem of passing all of these properties into our Char Char component so the first thing that we need to do is to wrap our users's component inside a form provider here to do that I just remove this component here for now then inside the file explorer I'm going to create another file called for example users provider. TSX inside it I'm going to export function users provider then inside it I'm going to return a form provider which is going to be imported from the react form then inside it I'm going to put my users component exactly this component here for our context to be recognized from this users component here as you can see in the the react hook form documentation we need to also pass this this methods that we have got it from the use form for our form provider very simple inside it I'm going to initialize my form exactly the thing that we have here I'm going to cut all of it here then I'm going to head over to the users provider then I'm going to paste it here I'm going to import this use form here the schema of our form that we just defined it here also the skema itself and I need to import again the Zod resolver like this from hook forms resolvers and Z we do not need this we just need to initialize the use form properties like this I'm going to put methods here and then I'm going to pass the methods like this for our form provider here the other thing that we need to do is that we need to head over to the app. TSX file and instead of directly using the users component here which is wrong we need to use the users provider instead of users so I'm going to delete this and instead of this I'm going to use users provider here now that our provider is set up inside our users instead of using the use for we can simply use use for context here this use form context is exactly the users provider here this form and then we can also use this use form context in our for example rhf auto complete here which is going to be a child of this users component here like this I need to get the register from it exactly how we do it with use form hook and also the form State errors but the problem is that the typescript is throwing us this error that it cannot access the name or email because it doesn't recognize our es schema here because we need to pass as before our generic here I'm going to pass our SCH schema that we just defined earlier then the errors are gone now we need to head over to our rhf auto complete component for the control I'm going to Simply you get it from our use form context control equal to use for context here as simply as this but this component is not aware of what this name can be so I need to pass it from my parent component the users component here so if I Define my RF autoc complete here I the property for example like this that I can simply pass the states here so if I head over to the autocomplete component we need to use the power of generics in types script which if you don't know anything about generic in typ a script I recommend you to learn it then come back to this tutorial because it's outside the scope of this tutorial ball you can also follow along if you don't know anything about it but if you know it it would help you a lot inside my RF automate I need to get the props for my parent component I'm going to define the interface for type props which is going to be equal to name a string and I'm going to get this name here as you can see here the error is gone but it's it's not complete yet because if we head over to our users we see that if I remove this Estates here the intelligence of types script is not helping me out because the typ script does not know anything about this schema here and what it contains to help me out with the items that I can put here before we go any further with our other compil component let me just head over to our schema file here and create the states field schema here like this if you recall States is an auto compete here that it can hold multiple value or other words is it's an array of Str strings that it cannot hold more than two items and it's also required so what does it mean it means that it's an array of a string which is required and also it has a maximum capacity of two items at most then open your users component and by now we expect that type script helps us with estate name here but as we can see the type is not helping us at all so we need the help of typ script here if I head over to my custom RF automate component here I need to do something with this string here simply putting a string for the type of this name here is not correct because the type script won't help us with this intelligence here the thing that we are going to do is that typ script knows that we can put Estates here so inside our aut compilate component instead of a string I need to pass something else the thing thing that we need to pass here instead of this is path which is going to be imported from react form which is a type and also we need to provide something to it which I call it t we need to get this T from our parent how you can see generics as inputs of your type for example if I give you an example for example I have function function test here which is going to have parameters for example test which is of type A String here as you can see here we can pass Valu to our function like this we open and close the the parenthesis here and pass our values here but for type we can simply use the Syntax for example my type instead of round parentheses I can use this type of parentheses bigger than less than signs and we can simply pass our type here let me just remove it and for our props I need to pass the T which is going to extend the field values from the react cook for all of these are necessary for creating custom controllers for our project so bear with me now also this prop is throwing us this error that it needs a generic parameter that we need to pass to it I need to pass the T it again is throwing us this error that couldn't find name t so we need to also get it from our parents like this T also extends field values like this exactly and then we can simply pass the name here the thing that we just did is pretty amazing if I head over to my users component by now again the typ Escape doesn't know anything about the thing that that must be filled here but if you pass our form SCH schema here we see that the intelligence is is working amazingly this SCH schema that we just passed here is going to be this T here this T here and then the typescript is intelligent enough to know that this name can hold the values of our schema email name States so far I put States here for now we handled the complex section of the tutorial the generics here but we have done something amazing here now our custom component has Intelligence for the name property so what about our autoc complete itself the first thing that our autoc complete wants is the options property options is going to be the thing that we are going to get from our parents here because as I told you before our custom controller here doesn't know about doesn't know anything about our parent so we must pass all of these properties from our parent to this component So Below this name here I'm going to Define options here which is going to be of type option which which I didn't Define it yet so head over to your file explorer then inside our types folder create a very simple type called option. TS which is going to be export type option here it's equal to ID which is of type a string and label which is also a type of a string then close this component here close this then import it here again my intelligence is not working import option from types here and option then I need to get it from my props interface type sorry options here then the error Here Is Gone also we need to handle value unchange render input and so much more one by one for the value and unchange as we talked as we talked before we need to let the react hook form to take care of it this prams here inside the render property of our controller we can destruct it here like this from it I can get the field here and inside the field I can get value unchange and the ri here for now inside it for the value I'm going to pass the value which is here which is going to hold the selected options in this value what do I mean is that if I for example s California here this value by now is an array of options which the option is ID of one and the label of California if I select Texas for example the ID is going to be let me just show you like this the value is going to be for example by now is of is ID one and the label is California for this one and for the second one is going to be ID for example two and the label is going to be Texas here so I need to create a connection between this value that book for provides us with this autocomplete property value here and then I'm going to need to map over them let me just remove it and for each iteration um this value is going to return ID here if you recall the SCH schema of our states here we see that it's an area of strings in here the value I want it to be also an arraya of IDs an area of strings so in each iteration over value here I will get ID here which is of type A String then then I need to make a comparison between this ID and my options here how to it's pretty simple me just remove this parenthesis here over the options I'm going to find find which item. ID is equal to this ID what does this do is that it converts this value here which is going to be this for example one and two these are the IDS of selected items and we'll convert them to for example ID of one label California fornia and the ID of two with the label of for example Texas Texas so by now we mapped the value here to the aut complete data here which is exact that we want for the unchange method of this auto complete here unchange the mui unchange property auto complete provides us with two parameters here the first one that we don't that we don't want it and the second value is the new value of our changing item if I open the call back here inside it I'm going to put I'm going to pass this unchange here that we have that we get it from our controller here so I'm going to pass unchange here the new value that the mure provides us I can pass it here new new value then I'm going to map over these values if I show you what this new value holds it's something like this ID one with the label of California and much more then we need to convert it to this data here one two we need to somehow convert this to this exactly the opposite the thing that we just do we just did for the value here so inside this I'm going to map over each new value then for each of them I'm going to return item. ID for now the intelligence is not smart enough to know what the type of this item is but in a few moments later we're going to solve this issue also the problem is that our auto complete is single select but we need to somehow tell the typoscript tell the mui that I want a multiple select or a complate like this one here I can select multiple items here but by default the auto complate of mui is single select and it's because of that that we cannot map over the new value because it's a single item not an array to overcome this we simply put the multiple Boolean here and by now our error is gone and now our new value is an array that we can map over them and get the IDS of them this get option label here that I just put it a little bit sooner let me just create it for you get option label is used for to get the label of each ID with our options here so if I recall it by now our aut compilate hold holds the value like this this is the value that our aut complete provides Us by now so by this here I need to get the label of these corresponding labels for example if we recall one is California and two is Texas and to get the label for each of these IDs I need to Simply pass another callback function like this for example I call it option here then I'm going to map over the options here the options that we pass from our parent to our child then I'm going to find then for each item I'm going to I'm going to check if it is if the item. ID is equal to option. ID here and if you found anything I'm going to put do Lael here otherwise if it didn't find anything I'm going to Simply pass an empty a string here so this line exactly is going to convert this to this for example California and Texas if you don't do it it will throw us an error and it won't show the corresponding labels of the IDS correctly so it's also required the other thing that we need to add is that we need to tell our aut comple component that which option is equal to which value like this if I select this it knows that this option is selected and it must highlight it and check the checkbox here to implement this I can simply use another property of the mui Library here I don't know why I pasted them earlier but as you know the is option equal to value is responsible to to map between our options and the values of our auto complete we can do other miscellaneous things for the auto complete for example I don't want my auto complete to be closed when when the new item is Select so I'm going to disable close on select by now we have passed the most things that we want but we forgot to put the render input here which is required by the aut complete mui component this render input provides us with that with the params then inside it I'm going to return a very simple text field and this text field first we need to destruct this params here then I'm going to make it full wids I need to pass a simple input rev so the mui will connect this text field here to the auto compilate here by passing this ref that we get it from the react Hook from controller so I'm need to pass the ref here for the error I simply need to get the error from the controller here so after this object the field object I can get the form State sorry instead of form State I need to get the field estate I need a single error only error here and then I'm going to pass it here like this as before for the error message for my auto complete I simply put error. message here and for the label of an autocomplete I'm going to get it from the parent which is a simple string here label string I'm going to get it and then pass it here the last thing to to do I need to make these checkboxes here to make it more beautiful and user friendly it's just it's not something very special but it can helps the user or maybe it's the something that most of you want exactly below the render input here I'm going to render option here this option provides us with props option and the selected item here then I use the arrow function here and I'm going to return a simple gxs here box which is of type list item you can simply not pass it here it's not it's recommended but don't do it for this tutorial then I'm going to distract the props here then inside this box I'm going to render a simple check box from Material UI for the icon of it I'm going to pass this icon here this icon here and I simply pass it here and for the checked icon I'm going to pass this icon here this icon I'm going to copy it then paste it in here and to tell the mui checkbox here that whether this checkbox is checked or not to switch between these two icons I can simply put checked property here and give the selected value this value to it inside this box I'm going to render the option. label here the typ script is throwing us this error we can simply I did a mistake I remove the component Li here and now the typ es eror is gone that's it that's for our the most complex controller that we we going to create in this tutorial it Wass so much into it but I promise you it's the most intelligent way to handle this custom controller for auto complete here so it was pretty complex we use generics here we did something with mui we got value options unchange we did something with the auto compete itself we rendered custom input here and also we added checkboxes to each list item of our aut complete now close this component the rhf or the complete then inside our users we have passed the States before we need to pass the label I'm going to call it states or whatever and for the options for now I simply hard cot the values the ID is going to be one and the label is going to be for example California and another option for example two the label is going to be off Top Texas for now it's enough now if you head over to our application here we see that we have so many errors the most of one is can't access property map value is undefined if you head over to our aut compete component it's it's exactly this part value. map when we start at first render we don't have any value here this value is going to be undefined but instead we expect that it holds an empty array instead of undefined so this error will be gone but I do not recommend using the optional operator here sorry the undefined operator here so what we can do is that if we head over to our schema here below it I always recommend create a constant called default values and you're going to know what is it in a second this default values is going to be of type the schema here schema is going to be equal to email what is the most basic email that user can provide is an empty string also for name we have empty string and estate which is going to be an empty array because we have defined it in the es schema that it's going to be an array of strings and the most basic variation of it is empty array for name we have empty string and for email we have also empty string now if you head over to our users provider here which we defined our form here below the resolver we can pass the default values to the default values that we just defined in our schema here but for Simplicity I remove this here and now it's the same it's always recommend it to always pass the default values to your form initialization because the errors will be handled perfectly it's better for performance and now the use form can distinguish between the empty form which we defined it in our default values and the current form value so it's always recommended to pass default values to your form initialization and now you see that errors are gone our the complete is working perfectly here and everything is correct and sync with the react hook form if I refresh the page you see that we do not have any errors in the console here which is perfect and that's it for our or the complete here but how to know that what values does our form house by now there's a simple tool called def tools for react hook 4 we install it earlier and I can import it like this import def tool from hook for def tools and we need to pass a simple prop to control which we're going to get from this and pass it to the dev tools methods. control here as you can see here on the top right corner of our project we see that this icon is added here if I now click on it let me just make it a little bit bigger if I click on it and if I type something on name and if I open it we see that this value is exactly the same like this if I for example enter something for my email we see that the value is exactly here we see the validation here exactly in here and also we now see that our EST of the complate is empty by now and if I select something here and open it again you see that it holds the ID of one which is California and if I also select Texas here you see that the two is added here it's not pretty powerful tool but it can help you in some situations another way to see and look the current estate and values of your form is a simple trick you just need to Simply go ahead to your user component here then after we initialize our form context here you need to to use this simple code snippet here I'm going to use the use effect by react then put the mt4 dependency array for now and as a call back I'm going to create a simple subscription here is equal to watch but what is this watch here we simply get this watch from our use form context or use form it doesn't matter the react hook form provides us with this really powerful hook here called watch what does this do is that it Returns the current estate of my form like this and if I like this value here or use it anywhere I can see the current estate of my form as an object but another P powerful thing to see here is that we can specify what field do we need to see for example if I put name here always I see the current estate of name field here or I can use the states here or I can use another watch here for example imagine that you have a component and you need to show the email that user has entered another place like this if I copy this line here then I head over here I can simply use this value like this here and whenever the user changes the email field here this value will be updated and user can see the current state of email field but as a developers of react hook for they don't recommend us to always use watch here because we have another Alternatives that we are going to learn them um it's a b l for performance and in some situations it can cause extra renders but you need to use it carefully and this usage here is completely safe for the call back of watch H I can pass the value here then as a function I'm going to lck the console.log the value that this hook returns us then after the user effect is done I'm going to return the sub. unsubscribe here for memory management and performance best practices and as dependency array I'm going to use I'm going to put all so watch here and now if I open the console of my browser here and type something in any field you can see on each key stroke or each estate changes the whole estate of my form is locked here for example if I type something in the email field you see that email f is something and this can be very helpful in some situations this way of loging the current estate of your form by now we have learned so many new things about react hook forms out and implementing them with material UI but if I again open the users component here and head over the auto complete here that we just created we see that this scenario that we pass the current value or current options of these aut compy is not applicable in real vce scenarios and 99% of scenarios these values are going to be fetched from the server and for the sake of this tutorial to be uh complete we need to also get these values from this server here but we need to create a very simple server on another Port of our system to simulate a marck backend for our project if you check the description below you see that there's also another repo called backend react hook form MBI zot that you can simply clone it on your system this is nothing very special it just it has only two simple dependency Json server and cross origin here we have an index.js file here that is going to provide us with this dp. Json file here let me just make it a little bit smaller here as you can see here this Json file contains the states the languages the genders skills users and so much more this is kind of a backend server that provides us with the simple crow operations in our project and if you take a look at the outcome of this tutorial you see that all of these values are going to be pitched from the server the skills here are exactly the skills here that you see in the dp. Json file of our MK backend here and many other fields for example if I click on Robert here we see that the user with the name of Robert is going to be fetched from the server and we are going to implement them in our project to run the server we simply let me justop the server clear the terminal here to just use this server you need to clone it from the description below and type npm npm Run start here as you can see the port is going to be exposed on the port of ADA you can access this backend API end points on your local house point ad80 if now we head over to our project I need to Simply use those API endpoints that we just saw earlier and use that in our application for that I need to go to the services folder and queries script here that we just defined it earlier and by now it's completely empty the goal here here is to load these options here from the server it's pretty simple you just need to open the queries file here then inside it I'm going to export export a simple H called for example use States here which is going to return a use Query hook as a result I simply going to use tack query here for the sake of this tutorial if you haven't learned it yet please check my other video that I thoroughly explain this amazing Library and in modern react development it's a must to put this library in use if you want to develop Enterprise level applications and it's pretty simple to use but if you don't want to know this library and if you haven't already Lear it yet it's not a big deal and you can simply follow along the tutorial just imagine that this US states is going to return the Estates from the server and you can get the Estates from our backend server with any way that you want simply here I'm going to use the react query here for the query key I'm going to pass the states here then for the query function I'm going to pass a very simple function that will resolve to the states of my backend server how to get them is pretty simple by using the axus library let me just import it my intelligence doesn't work import axus from axus here then I'm going to dot get it something from this address HTTP Local Host ad ad s/ which is going to return the states on the back end and because we are using typc I'm going to specify the return of this query here which is going to be option an array of option that we defined earlier in the types folder here you see that we defined option as an object of ID and label and if you head over to our dp. Json file here on back end we see that our estate is an areay of Aid and label and we know that our back end is going to return this area of objects here but I need to import it manually like this import option from from types. option here as you can see I forgot to put WR I use the con here wrong I need to put the function here and you see the errors are gone by now now if I head over to the users component see simply I can use the hook that I just created here for example at the top of my component here as simply as this cons States query is equal to use States hook that we just created use states to use this here I'm going to head over down and as the options array I'm going to Simply pass the states query. data as you can see here the type script is throwing us this error that this s query. data might be undefined which is correct and we need to handle this situation also so I head over to the controller for aut compy that we just created before and put this optional operator here and we need to also resolve these problems that just occurred here the options cannot be null on the autoc complete component of material y so I need to put the empty array if options is undefined also I need to put the optional operator here and also here for erors to be gone then but I forgot to put something else in my query function let me just head over to the queries component after that the quer is resolved I need to then as my response here I need to get the res. data here and now you see that errors are gone and now you see that the new Estates are going to be fetched from the server the validations are working correctly and that's it for now also I just implement the other queries that we need in our application here they're pretty simple I copy all the user States hook here then paste it here for other query I'm going to put the use languages here for the query function I'm going to pass languages and for the endp point I'm going to put languages here another hook we need the genders that we need to get them from the server genders here put the genders for the query key and also get them by the gender Endo the last one is skills query here use escales here put escales here and also get them from the skills endpoint for now and I can use all of these four hooks in my application like this the next controller that we are going to create is a simple toggle button group that is much much simpler than this other compy that we just Implement implemented earlier so we need to create something like this the values are going to be fetched from the server and the current estate of this field is always going to be present on the form state so let's create our new controller in our application in your SRC components folder create another file called rhaf hugel button group. TSX here then export a simple function let me just close the file explorer export function RF TL button group here and simply return something for now as a return of this function like our other complete that we just created earlier let me just put them side by side I simply need to copy all of these props from the auto complete then paste it here because from this point of tutorial to the end most of the concepts are the same with a little bit of TW in some places let me just close this here we here only need the options and name do not need the label because our Target button group doesn't contain any label at any point then import the missing dependencies here I'm going to import this from react hook form also this and import it up manually from types SL option then I'm going to use the props type here props and get the values from the props but I need to pass the generic here as before the T extends field values then I can use the name and options value inside my component this is very similar to the RF or the compete component I'm going to Simply get the control Hook from my use form context then pass the T here for type safety for now then I'm going to use the controller from react H form pass the sorry pass the control here control control as before also pass the name and return this render function here return something which is going to be the Tuggle button group that we are going to import it from Material UI for now and from the call back pass parameters I'm going to get the field from Fields I'm going to get the unchange method the value and also the rest of the fields rest field inside the props of the toggle button group here I'm going to use the unchange method on this material UI component here then connected it with the react hook Form controller and my form context here the first argument we don't need it here I'm going to get the second argument and call it as new value then I'm going to do something here for example if the new value do length is bigger than zero I'm going to pass the unchange this unchange with the new value because this component is going to always return us with an area of strings so we know that our new value is always going to be an array which if it has any length or any item in it I'm going to call this unchange method on the react hook form for the value I pass if value. length was bigger than zero I'm going to return the value itself otherwise I'm going to return the options if it present then the first element of it because the button group that we are going to create is exclusive and always one element is selected if you don't want this if you don't want this behavior and you want your Tuggle button group at some point be completely empty and user can unselect all of them you can modify this section for the render for the children of this Tuggle button group I'm going to map over the options let me just Factor code do map over the options we get the option on each iteration then for each iteration I'm going to Simply render a toggle button instead of toggle button group and inside the toggle button for the text of it I'm going to render the option. label here for the value of the cycle button I'm going to return option. ID and for the key also I'm going to return option. ID here we forgot to use this rest field here so simply pass them here to use this custom controller in our project simply head over to the users component like this below the a complete just put the arch toggle button group and pass the es schema as a generic here and pass the field that we want that we just need to Define it in our es schema just head over to the types and schema here and below the Estates just put the languages spoken which is going to be an array of strings also put the languages spoken default array here for initial value and in our users component just pass the language spoken as the name of it and for the options simply put empty array here then go to the top of your file initializing initialize the languages cons languages query is equal to use languages this is the hook that we just created earlier and I simply need to use this for the options of my toggle button group here so languages query. data here perfect if you now head over to your application here if I for example click on Germany you see that the ID one and two are selected if I click on Spanish and check the console you see that the current sayate the languag is spoken of one two and three and in real world application you can send these IDs to your backend server which is per to Common after this we are going to create this radio group here which is pretty simple and forward just head over to your SRC components folder and create a new component called rhf radio group here. TSX and just head over to your rhf tole button group here and copy all of this file here then past it in your RF radio group component here because a part of all of these controllers are the same for example the prop sections for example a radio group you're going to have a title so we are going to have a label field as an string we need to change this name to RF radio group here the generics are the same also we need to get this label from the props here label the control is the same the controllers are the same we just need to remove all of these because we only need all of the fields the same that they are also I need to get the field State the error from the field estate and you're going to see what remove all the things inside the render function here one way to hand this radio group controller in our application is to use the radio group itself from the material UI and passy props to it but this way of using it is not in my opinion very recommended because uh you don't have control over the error state of your material UI component your form doesn't have any label by now and it's not very accessible for the users to do that to overcome that I just need to Simply first put the form control from Material UI here inside it I'm going to put form label here and inside it I'm going to pass the label here and below this label and inside this form control I simply pass the radio group here like this this way of creating these types of custom components is pretty common in material UI world because uh we know because we have wrapped our radio button group inside a form control it has a form form control label it automatically does so many things for us for example if there is an error as a par up for this form control here for example the form label will become red and so much more and it's pretty readable for other developers too inside your radio group here just map over the options do map and in each iteration we also going to get the option itself and inside the render of each iteration I'm going to pass the form control label here like this that's it for the key I'm going to pass the option. ID for the value I'm going to pass the option. ID for the control itself I'm going to pass the a radio a simple radio from the material UI for the checked state I'm going to pass the if field. value is equal to option. ID I'm going to explain it in a second and also for the label of each radio buttons I'm going to pass the option. label here so this value is the current estate of each radio buttons this control is the thing that this form control label is going to render for us as you can see it's pretty read readable and accessible for the users this way of handling these types of custom components for the control of this form control label I'm going to pass a simple radio I'm going to pass the check property as if the field value here the field that we are going to get from our controller value is equal to option ID and if this statement is true then our radio button is going to be checked also I need to pass the field like this here and also there is another error property on the form control here that I can pass if there is an error in my form state I'm going to put all of these in error State now if I head over to my users component here below the rhf target button group I'm going to pass the rhf radio group as before we pass the SCH schema generic here we pass the name as a gender but we don't have the gender on our SCH schema here so I'm going to head over to our types schema here and for the gender I'm simply going to pass the gender zit. s string which is a simple a string but it's required so the value that this gender field will be will be holding is for example something like this the ID of the gender that we're going to get from server or two or three uh if there's no value there result we throw us an error that this field is required let me just remove these redundant comments here and for the default values I simply pass the empty array here empty a string here and also we need to pass the options here and also the label which I'm going to call it the gender here and for this options property here I simply go the top of my component and get the const gender gender query is go call to use genders like this and if I put over down here instead of this empty areay I simply pass gender sarey do data as you can see here we have this beautiful radio group here if I open my console here and if I select the mail here you see that our gender is one and if I again hit on the female button you see that the state of gender becomes two but where does this two come from if we head over to our back end here we see that in our G genders array the male is one and the female is two and if I change it for example to male again we see that the gender is one so that's it for our radio group the next component that we are going to implement is this checkbox group here after that we also will create controllers for date and time pees date range pees range pees also the complex field array scenarios here that you can add a new custom fields to your Dynamic field and each of these fields are going to have their unique validation so let's implement this again head over to your components folder here create a new file called RF no don't do it just copy for example your radio group again here change your name to rhf check box check box like this the generics are the props and generics are the same just change name to rhf checkbox here this line is the same the control the name are the same just I need to change this object instruction here I'm going to get the value and unchange Method from the field itself and nothing else and also I'm going to get the error from the field State object here we do not need to pass the field here just the error itself the label is as before and instead of this radio group I'm going to remove it and passive form group from the material UI open it and inside it map over the options. map for each option I'm going to render a simple checkbox form control label here close it as solo tag here for the control of this material UI component just pass the control like this the control is also the same as our radio group it's going to render it is going to be what will it be rendered for each iteration of our options for each for each iteration I'm going to render a simple check box here like this for the key I'm going to pass the option. ID here for the label no and for the checked property check I just realized that I did a mistake I accidentally imported the checkbox icon from Material material UI not the checkbox itself so let me import it like this checkbox from the mui material like this and change this B into the lowercase b here for the checked property here I want to specify it when value do includes includes option do ID here for the unchange here I simply pass this function here to handle the unchange of my checkbox group if value do includes the option. ID then I'm going to call this unchange here inside this if statement unchange value. filter and in each iteration I'm going to Simply get the item itself which is going to be the ID of the checkbox that is selected for example if I select this this item is going to be this if I select this it's also the same so I'm going to get the item in iteration then check this statement here like this option. ID simply I'm telling the react Qui form that only return the values that are not equal to the item which is going to be the selected IDs by the user but the type of script is throwing us this error that you cannot guess the type of this item here so I simply do this trick here I'm going to cast the value as an array of strings here and as you can see the error is gone now and for the else Clause of this is of this if statement I simply pass the unchange to distruct the values thems and also the current option. ID here also for the label also for the label of my form group I simply pass the option. label here let me just zoom out a little bit that's our simple controller here for our checkbox group then we need to use this checkbox controller in our application so I had over to the users component here just head over to the top of your file here and get the skilles query like this scales skilles query is equal to use skilles here then below here just put rhf rhf checkbox pass the SCH schema here as before pass the name as scales just head over to your schema here as before Define the scales field like this z. array each array item is going to be a string and and for the maximum selected skills for example I want the user to only select not more than two items for the scills default value pass the Mt array also pass the options from the query itself skills. data here and for the label simply pass the scales name and as you can see here but I realized that I forgot to put the key for each form control label simply pass the option. ID and now if I head over to my application here we see if I select each of these skills the corresponding fields in my form state will be selected and if I Des select any of them you see that the skilles array is empty but as you can see here if I select more than two items for the skilles field like this we see that the user has selected more than two items and as we defined it in our schema here we want to raise an error but we also need to show the user the eror itself so I will head over to the checkbox component here and below this form group here I simply pass the form help eror text here and inside it I simply pass the error. message here and as you can see here if I select more than two items it says that array must contain at most two elements but as you told before you can also simply change the message for example to test here I refresh it and select more than two items instead of that default error message this error will be going to sh but for the sake of this tutorial I'm going to return it that keep everything much simpler and that's it for our checkbox component the beautiful thing about this current stack the mui Zod and react hook for is that it's very much simple to handle date pies time pies date time pies and also date range pies with a few lines of code we can achieve a pretty powerful custom controller for each of these elements here so let's get started now head over to your users types schema here and for example create a new field called registration date and time for the name of my field which is going to be a simple date here and also for the default value registration registration I'm going to Simply return the current state of the user system now just simply again head over to your components and create a new file called rhf date and time perer but remove this ant here for shorter name and I move to put the TSX file here and just head over to your puggle button here and select all of this and paste it in your data Pier here because most of them are the same these properties are the same and I just need to change the name to rhf date time peer controller is the same remove all of these redundant custom Imports here remove anything inside this render function here and for the material UI component dat Pier component and anything else else related to date Piers we need to Simply pass our localization provider localization provider which are going to import it manually remove this redundant Imports here import localization localization Provider from mui ex dat pies that's it like this but the best practice is to wrap all of your projects inside this local localization provider in your for example main. TSX file here at this level I can pass the localization provider here but for the sake of this tutorial I'm not going to do that inside the localization provider I simply import the datetime Peak eror from the xate PE eror from Material UI Library like this and for the label I simply pass the label here but I realize that this options is IR redundant here and instead of option I need simply pass the label as a string also change it to string no not a string the label and and just destruct the field here and this pretty much it this is all the things that we need to handle for our custom dayon Pier components which you can do other things other custom things this controller and you have all the power here but the thing that is bothering me here is that I need to use this self closing tag here for my controller not like this and this is much better and now if I head over to my users component here and below the check box I simply pass the rhf date time Pier custom component again pass the schema here for the name I simply pass the registration date and time and for the label anything you want for example registration date and time but now if you open up your browser here see that we have so much errors because we forgot to pass the our adapter to our localization provider here so for the localization provider or date adapter date adapter I simply pass adapter date FNS here which I'm going to import it again manually import adapter date FNS from mui mui X dat CES adapter V3 that's it and now open your browser and you can see that we can simply select any date and time that we want and the corresponding registration date and time will be filled here and everything is working correctly and simply select and time and everything is handled for me and that's it for our date and time controller the next component is going to be this date range picker here it's pretty much the same as data and time P here that we just implemented just duplicate this rhf data P here like this change the name of it to RF date range peer like this for this component I'm not going to use any label remove all the label here change the name of the component to RF date range peer here for the controller I'm going to get the value and rest field from the render method here the localization provider is the same as before instead of this component I'm going to use date range Pier here I'm going to destruct the rest Fields here and for the value I'm going to Simply pass this here array. is array value firstly I'm going to check that if the value is an array then return the value here otherwise I'm going to return null and null this is necessary for this component for this controlled component to work correctly and for the T typ script and the runtime to not throw any errors then head over to your SCH schema file here and Below registration date and time just put former employment employment period for example or anything else this is going to be sorry I have an typo here for M and for the top I'm going to return an array of dates here which at much maximum is going to be two because a range has a minimum and maximum for its values and I can also put a mean of two here for better type safety for my form like this for the default values I simply going to return an array with two dates new date and for the second one also I'm going to return the new date also then head over to the user's components here and below it for example I simply put the typography of material value right here and then for example I put the former former employment period and I'm going to import the date range peer I'm going to pass the esema here and the name is going to be former employment period you could also put this typography inside these ARF date range Pier as a label but I prefer to show all the possible scenarios and you are free to handle anything related to your application freely there is no strict ways of handling things this is the results by now as you can see I can select a date range between the start and end dat as you can see everything is handled by react H4 the next component is going to be this range slider here just open the components again and for example again copy the datetime peer here change the name of the component to for example RF slider change the name of the component to rhf slider the props are okay here everything is the same remove all of these localization providers here open an empty react fragment for the label I simply going to use a Topography of material UI and for the slider I simply use the slider component provided by material UI simply I distruct the field here and for example I want to TW a little bit of its properties for example I'm going to use value label display as Auto to see the current value while the user is sliding the range and for the schema itself not this types folder here inside the users inside the types inside the schema file I simply add another field for example called salary range which is going to be an array of numbers with the minimum of two and the maximum of again two values and I simply initialize it as an M array and let me just close of the components here then open your users component and below the date range speaker just simply add your custom slider here I have an typo here in the name of this component let me just hit F2 on the title of the function then Chang it to RF slider and everything is correct I going to put the schema here and the name of field as salary range and for the label I'm going to put the salary range Here and Now if you open your application here you see that we have an error because by default our salary range must have a minimum and maximum but in default values we forgot to put the for example me and Max of our range here for example I put 0 and 2,000 here and if I refresh my page we see that everything working as expected for the last custom controller we are going to create a simple controller for these switch element here just head over to your components folder for example duplicate this RF slider that we just created and change the name to rhf switch and change also the name of the component to rhf switch just remove the render function here and just simply return a simple form control label here for the control just pass the switch element from the material UI destruct the field object here and for the checked property just return the field. value here also don't forget to put the label here and that's it for our custom RF switch and for the schema just add a simple field called is teacher which is going to be of type z. Boolean for now but we are going to change it later in the tutorial for some other scenarios now for the default values put the ischer for example as true and go to your users component here below the slider just add the rhf switch here pass the schema here and for the name ad is teacher and for the label just simply add are you a teacher and as you can see here we have simply have our switch component also here control that is it for all of our custom controllers but the thing that we can do here and I just realized is that we can also make our text field component here control as you can see here each time that I want to use the text field I need to pass also the helper takes and the error here but I just realize that we can handle this duplication for all of our our text fields in our project by simply adding another custume controller called rhf text field which is pretty simple and you can also do it yourself but for the sake of the tutorial we're going to implement it together also just create another custom component called for example rhf T fields. TSX here go to your switch for example and copy all of its content then paste it in the rhf text field here we do not need any label for this custom text field and I'm also remove this label from here and change the name to rhf Tes field and then remove all of these render function here we need the field here and also we are going to get the field L State the error from the field State because we're going to show the user the error itself and also we going to make the component red or whatever if there's something wrong with the user's input inside the render function we simply need to pass the Tex field material UI and for the props first I'm going to destruct the field here for the error state I'm going to Simply pass the error like this and for the helper text or the error text itself I'm going to pass the error. message here and that's pretty much it for our custom controller for our text field and inside our application the user component I simply change this text field to rhf text field like this also I'm going to change it to RF text field simply I remove all of this here I'm going to pass the es schema as before and for the name I simply pass the name which is also the name and for this I'm going to pass also the schema itself and the name which is going to be email I want I want to show you a simple trick but it's powerful in this type of scenarios imagine that I want to pass the label property of material UI TT field itself for example I want to change the VD for example to full VDS and also I want to pass the S6 fr which is equal to a style and also much more related property of the material UI text field but as you know we only get you only defined the name as a props of this custom RF text field here to do that I simply go to the rhf text field component here and for the props itself let me just change it interface to type here for better results we do not need to change the previous prop field that we just defined earlier I just need to end this type with another type like this first I'm going to use the type utility of type script called Peak here what I'm going to Peak is here that first I'm going to import the text field props and I'm going to import it from Material UI here then here for example I can specify what properties of text field of material U text field I want for this custom component to have you can for example I can select the label here and can select the disabled property the size of the text field and as you can see the intelligence is guiding us perfectly but for the sake of this tutorial I simply get the label for the text field component and you can do this trick for almost all of the material UI components you can import first import the props of that component whether it's a button it's a text field and much more and here I need to pass and destruct the remaining props like this and beside the field here I simply pass the props like this and as you can see here if I head over to my users component I can pass the label to name and for the email field also to email perfectly if you head over to your application here you see that the error States and the helper takes are handled automatically without us without us to pass the helper Tes and error Fields anytime that we want to use a simple texted in our project from now on in this tutorial the next sections are going to be more practical in complex scenarios if I head over to my completed project here you see that we have a switch here called are you teacher which we have implemented H here but it doesn't do anything special it only changes this is teacher value to true or false here which is not an amazing an amazing thing to do but here in the completed project you can see if I check the aru a teacher switch to True something else happens now I can add new student here also if I click on this button again I can add another field another field and so much more this case of scenario is pretty common in complex scenarios in Enterprise applications where you have a dynamic list of fields that you can that the user can add or remove to them or it can be dynamic depending on the response that you get from your server the amazing thing about this is that each of the these Dynamic fields that we just added here has have their custom validation here custom validation here for example like this if I don't put more than four characters here it throws me this air for this and not for this is pretty amazing I can remove them and for more complex scenarios you can also add switch here to change the order of these Dynamic Fields here the thing that I recommend you to do is that go ahead to the react hook form documentations especially for the use field array hook here and I just need you to take a brief look at this documentation here and read the headings and the code Snippets which is pretty much simple but yet very powerful and in my opinion it is one of the most advanced features of react hook form which will make the life of the developer pretty much easier it's an amazing hook let me just again refresh the completed project page the thing that we are going to implement is that if the switch is false nothing will happen if the switch is true the new Dynamic fields are going to be add to the schema so we need to distinguish between the false estate and true state of the switch here if it is false a new type of validation for our schema is going to be implemented and if it is true it's going to be changed if it is false we don't have Dynamic Fields if it is true we can add Dynamic Fields like this and if one of them is not valid then you see that I cannot Summit my form and the react hook form doesn't allow me to do it all of these criteria must be met to create this type of effect in Zod and react hook form that we can dynamically change the fields of our schema here we just need to learn a very simple yet powerful thing in typ of script called unions and discriminative unions which is very practical in many use cases so let's learn it just head over to anywhere in your project you don't need to do it I just need to show you something then we delete this file that we just created here I'm going to create a file called tests here we're going to remove it later imagine that we're creating a type for our products in our application I'm going to create a type called Product our product is going to have a name of type a string and a price of type number here and then I'm going to create for example a laptop from this product for example laptop XYZ is going to be of type product here for the name I'm going to pass the for example the XYZ itself and for the price I'm going to pass the 200 also I'm going to add another field for example called the screen size here which is going to be up type number then I'm going to pass the screen size for example to 14 here this is correct so far imagine that we are going to create another product called for example cons airpods Pro here which is of type also the product here the name is for example airpods Pro 2020 airpods Pro the price is for example I don't know 100 but the screen size here doesn't have any meaning for the airpods pro because doesn't have any stren let me just make it cam case here so we need to distinguish between our laptop here and airpods which both of them are product but laptop may have other fields that is not common with airpods and vice versa to overcome this issue in types script I just simply remove this screen size from the product itself and only mention the common fields that are shared between all products here this is it above the type of product I simply add another type for example called Laptop here the laptop is going to have a type which is going to be laptop and the fields that are only unique to the laptops for example a laptop might have a screen size here which is of type number the graphics also string and much more also we have another category for example in our shop called headphones headphone not headphones which it has a shared key like laptop called for example headphone here and it has another custom field called for example active noise cancelling here which is of type for example Boolean it has ANC or not and this is it for now we call it discriminative Union in types script because the only thing is common between the type of laptop and type of headphone is this type field here it can be anything you can call it variant product type and much more but it must be something unique between each of these types here why do we need them for your product type here I'm going to put an and operator here then I'm going to or the laptop and headphone together with this simple trick I can now distinguish between a laptop and airpods pro for my product type here what do I mean is that if I hit control space here and as you can see here we have a new field called type which is going to be get from here and here which we added it to our product type here like this my laptop is going to be of type laptop which is obvious and if I put laptop here as you can see if I hit on control and space here you see that the fields only specific to the laptop I can pass the graphics for example to Nvidia and also the screen size for example to 40 but for example imag that I use the headphone type for my product here the type script is throw me this error that graphics and screen size is not present on the product in this situation with this discriminated type here but if I change it to the laptop itself you see that the type Escape is satisfied itself now the type Escape for the airpods pro is throwing me this error that you need first firstly you need to pass the type here I know that my airpods Pro is of type headphone here and now if I hit on control space here you see that you have only see the ANC here not screen size or Graphics only ANC which is specific to headphones which is for example two with this simple concept here we can handle the most complex scenarios in handling forms and dynamic fields and states which is a must to know which most of you may have known it for a while now now let me just remove this extra component that we just created now we need to bring this typoscript cont concept into our Zod SCH schema here how to do it we want to do something that is pretty common in complex scenarios so what is it imagine that we are creating a new user with this information here for example with the name of James and with the age of 30 depending on your server or back end most commonly we call an API endpoint with this information as body here as body of the request and the new user will be created on our server so for example we call an endpoint like/ API SL create new user and the method is just not important here so keep that in mind that we create the user with this information by calling one of our backend apis inputs but what if we want to edit the user that we just created in most cases you need to identify for your back end that which user you want to make some edits on it we need to distinguish between the users between the one the the user that we want how to we simply add another field for example like the ID of the user to our body of the request for example I want to change the James to Leo the 30 to 20 but my backend needs to distinguish between the users so I need to pass the ID of that user so I send the new name the new age alongside with the ID of the user that I want to edit here and for example call another endpoint on my server here this concept is pretty common in many scenarios where you have a single operation in your application but with different Dynamic schemas imagine that you have one schema that when you are creating the user has this SCH schema here and while you are editing that user it has this schema with added ID Fields here and you can extend this concept into new things for example when you you are creating your user you cannot specify for example the profile image for it but when you are editing that user you can simply add the profile image to the user so you can also add for example the image profile field alongside with others and so much more so let's implement this concept this useful concept into our Zod esema which you can extend it to your needs to do that just open your SCH schema. TS file and wrap all of the schema into another zot utility called zot do intersection like this and don't forget to remove this semicolon at the end which is perfect this is equal to this concept in type es skip for example I have the type one equals to something and the type two is equal to something and I want to create the intersection of these types for example to new type here and and I'm going to and I would use something like this type one intersect with type two here this is exactly the same and now if I add another Z for example object here I can merge these two objects together so let me just remove all of them but as we talked before we all we need the and operator and also the or operator so imagine that I want to create a new type like this type type for example type one is equal to something type type 2 is equal to something else and type type three something else I want to create the new for example Type 4 which which will be equal to type one intersect with type two or type three just remember the laptop and headphone example that we just talked about you want to implement something something like this with the Zod which is pretty simple yet very powerful so we have the intersection part here just at the end of this object here at a new comma and we need to use another Zod utility called z. discriminated Union here like this for the first argument of this utility function I need to pass the thing that will be common between our Dynamic schema Fields remember the type field from the typ script version example of this the laptop and headphone example I want to call it the variant here like this and it will make sense in a moment add comma here and for the second argument open the brackets here and we need to pass two variation of our es schema what are they for the first object I'm going to use the variant as z. literal. create what do I mean by create it means that my current state of form is in creation mode I'm creating a new user and here at another z. object here with the variant of z. literal edit here what is this z. literal here for example imagine that I'm going to create a new const for example something which is equal to not something for example if for example product type here which will for example equal to laptop as con here like this this is something this is exactly like this so nothing very special if you remember in our example that when we are in create a state create variant creation variant we don't need any extra field but when we are in editing a state we need this ID field here so in this variant the create variant we do not need any extra field but when we are in edit mode we need something we need to Simply add the ID of our SCH schema like this z. string with the minimum of one so with this way we are sure that we're we are sending the right the correct data the correct SCH schema with the ID when we are sending the data to our server and now for default values the typ script is throwing us this error that we need to also specify the variant of our form which by start we are in creation mode and I need to pass the variant create but if I change it to for example edit here you see you see that typ of script is not happy here because if you are in edit mode we need also to pass the ID so if I hit control space here we see that the intelligence is guiding me through and if I pass the ID for example to something the error will be gone but for the initial estate of my form I need to use the create State not edit state so that was the use of intersection and discriminated Union in Zod which is pretty powerful tool that you can use in complex scenarios in your application by the help of the concept that we just implemented into our schema we can also add these Dynamic field build into our scheme also and implement it into our application so if I check the are a teacher switch here now I can add new fields and also I can remove them all of these Dynamic Fields have their unique validation here like this and as you can see we have two Estates here for our SCH schema one if the is teacher here is false another estate is that wheny is teacher is true so let's implement it we have another way to implement this concept with Zod which has simpler syntax but it might remove some of the useful features of Zod but in this situation it won't bother us at all so let's learn that way of doing it also to do that at the end of your schema here at the end of the Z do intersection here call and on it open the parenthesis here inside it use z. Union again inside it open the brackets and put the z. object that you want to use here for example let's just remove this is teacher here and put it exactly here is teacher I'm going to use Z do literal false and also another z. object when the is teacher Z do sorry is teacher z. literal is true and as you saw if the teacher if the is teacher switch is true I'm going to have dynamic students field so I simply add a students which is z. array here each array item will be be simply another Z object and each student is going to have simple name with the minimum characters of four for example and as you can see here the top script is throwing us the error that is that when the is teacher field is true we also need to have the students field by you'll be going an empty array and if I change it to false you see that typescript is not happy and telling is telling me that I must remove this students here because when the is teacher switch is false you have nothing when it is true you have the student array here so by default I'm going to use the is teacher to false perfect now let's just implement this schema in our application just head over to your users component and to to implement this kind of behavior where we have Dynamic fields that we can add or remove we can use one of the most powerful tools of a react hook form Library which is the field the use field array hook which is perfect for these kinds of scenarios to use it do like this Con distract the object and use the use field array Hook from react hook for and inside the options here the first thing that we need to pass is the control itself which will get from the use form hook here in this case use form context control and we must pass it here like this control or with simpler syntax like this and also we need to tell the react hook form that which field we need to take the control of it so we need to pass also another option here the name option and for this value as you can see here here we have a students by default from the intelligence why only a students is recommended here if you head over to our schema here you see that the only array of this schema this is a string a string and array of a string and array of a string also also this is array but the only array that it has another object inside as a schema is a student field here which is exactly what we want as a type for for this hook to work the react hook form type system is very smart enough so it can recommend me the correct field that I can use for the name here perfect now from the destructured object I can get many many useful utility functions here and methods like append Fields insert move prepend remove replace Swap and update here which the names are pretty selfexplanatory ien adds a new item to the end of the list with Fields you can get the array itself and map over them to show the corresponding inputs with insert you can pass a new element at a specific location at a specific index with move you can move an element up or down the array prepend add to the start of list remove add deletes an element from the array at a specific index replace replace the holes the whole array Swap and update are also explanatory with update you can pass the index that you want to change and also the new element that you want to change with for a starter we are going to use only the append method for now just let me hide the browser here like this and the thing that we also need is the let me just open the esema here we need to have access this is teacher switch so we want to know when show the user just bring it back show the user let me just refresh the page we want to know when to show the the user this button for example here which user can add or remove Fields so I need to have access to this switch here which is here and in react H form I can simply access it like this const is teacher for example I call it e teacher because in our ESO we call it iser ischer is equal to use watch from react form as always we need to pass the control here and for the name I'm going to use the eer also now head over to your end of the component here and below this switch here which is is teacher field here put the is teacher here and if his teer is true we're going to render our button here like this for the text add add new student here on click we want to add a new student into our fi so what we are going to use is the append that we get from here you're going to use the append and what we are going to append here a simple object with an empty name which is the name of the students and it can be anything else and for the type of this component I'm going to use button instead of submit if you don't do it if you click on this button the react whe Summit our form instead of doing the unclick here perfect now we also need to map over our field array here so we need to get another thing from this use field array called field Fields here and down here I'm going to use I'm going to map over the fields here fields. map and for each field and also I'm going to get the index of each field I'm going to return a simple text field sorry not text field the RF text field that we just created for the name I'm going to pass this string here we need to give it the address of our field inside that SCH schema so let me just open the es schema side by side here so we need to pass this name here inside this name here so we need to address it here where is it it's inside the students and because this is an array and we need to have the index of the name that we want here so how to pass it it's pretty simple a students dot this index here that we get for each iteration and pass the index here and Dot the name of the field that we want which is here is the name also do name here which is perfect for our name here just close it here for the label I'm going to pass simply pass the for example name and also don't forget to pass the key with the value of fields. ID here this ID will be autogenerated for us when we are using the fields from our use field array which is perfect and for each iteration I also want to add a remove button so simply we need to pass this rhf text field inside a react fragment here just put it here and copy the key here in the fragment perfect and below our text field I need to pass the button itself button not button base button with the text of remove the color of error or red for the unclick I'm going to pass the remove the index that we want here we also need to get the remove from use field array here remove go again here perfect and for the type also as before I need to pass the button here instead of summit also another thing that I think it's better practice to do is that I want when the is teacher switch is targ off or false I simply need to empty the student array which is the correct Behavior so below here I'm going to add another us and empty dependency for now and I need to check if the stitcher is false or is not active I simply replace my whole field array with an empty array so I also need to get the replace from use field array which is perfect and also I need to Simply unregister my students array from the react hook form if you don't do it and change pick the form value after the replace is done we have something like this inside our form data the students will equal to undefined which is not that we want we also do not want to see the students at all when the switch is false inside our form logic which is also another good practice and it's not necessary to do this unregister part but for the sake of this tutorial I'm going to put it here and also I need to get the unregister from our use form context here like this and for the dependencies here I simply use the Quick Fix here and pass iser replace and unregister here perfect and now if you head over to our application and refresh the page itself if I change it to true this switch the button is here because we specified that if the E teacher is through I'm going to see a new button with it takes off add new student here if I click on it you see that a new field here is added to my Fields here which will going to have the validation that they specified inside our schema here we specified that at least the name of the student must be at least four characters which is exactly that we have here perfect I can add new students here like this each of them going to have it's their specific validation and I can also remove them V by one and I can also again make the switch false let me just add a few fake students here and if I check the console like here you see that for the students field we have exactly the fields here and if I make the switch false you see that there is no students inside our form here the form values here which is exactly the behavior that we want here which is perfect for our Dynamic field array here perfect now that we have implemented our whole fields for our application now also we need to have the submit button for example reset form button like this the editing capabilities and totally the crow capabilities of our simple project so let's get it started open your users component and at the end of your function here but before do anything extra here first I simply wrap all of my application inside the mui container like this and copy all of the this here and paste it here for the max fits of my container I'm going to use SM also for the component I simply use the form HTML form here so this all of these container will be considered as a form HTML element and that's it for now and now if I check the application here you see that there is a nice padding between the edge of the browser and my application content itself just for now consider using it now again head over to the end of your application here and here above the last stack here you need to add another stack for the containers for the container for our buttons for the direction I'm going to use Felix direction of row and I need to justify the content space between so the buttons are separated by each other inside this s stag I simply need to pass two button one for creating new user for now P it type of submit here submit and another button just for resetting our form just to show you the capabilities of re from library on unclick I simply need to pass a simple handle for example reset function here and at the top of our component here I simply Define it it's pretty simple just create a simple handle function which is equal to reset sorry reset with did default values that we defined it inside our schema here so whenever the user clicks on the reset button just let me bring it from the use form hook here reset like this and whenever the user clicks on the reset button the form values will be reset to these values these default values that defined in our application this is one of another use cases of the default values for our form so now if you check our application here like this if I put something here in my field select anything that I want and if I hit on reset button here you see that the form state is the initial state of my form if I click on new user nothing will be happen because we haven't implement this new user button here so by implementing it in the next section of video we can mutate our database our server and add a new user on it so let's get it started now the thing that is needed here is that when the user clicks on this new user button it submits our form data to our fake back end here which is running on our local port to implement the new user button functionalities just close everything here then open your file explorer and go to the services folder then the mutations. TS file here open it just for your information it doesn't matter how you handle your form submissions and your Communications with your backend server it doesn't matter at all for for the sake of this tutorial I'm just showing you one of the ways that you can post your data to the server and API endpoints it doesn't matter how you handle them and in in this tutorial we're going to do it with react query we're going to do our mutations with react query which is very powerful very easy to use and maintain to create a mutation with react query we do something like this I'm going to export a function a hook called use create user inside this hook I'm going to return another hook called use mutation and I'm going to import it from tac react query here like this in inside it as a query sorry as a mutation options I simply need to pass a mutation function which is responsible for communicating with the server it's going to be of type an asynchronous function this async function is going to get some data which is of type our es schema which we defined earlier in the tutorial here and for the function itself we simply need to create a simple axus dopost let me just import the axis here ax of post to the end point of our API which is HTTP Local Host on our at8 port at the route of users with the data here which we're going to pass to this mutation function in a moment when the mutation function is done I remind you again that all of these are related to react query and it's not react hook form specific when this mutation function is done or resulted on the unsuccess event of this use mutation book here I'm going to do something I'm going to pass an asnc function after that our user is created then we need to update the list of the users in our application which technically this process is called invalidation it's pretty simple with the help of react query So Below the use create user hook here I need to create a cons here called query client which will going to be the query client itself and on our un success method here I simply need to await query client. invalidate queries and I want to invalidate one of my queries by providing its key so what should I pass here as a key it must be an array what is it going to be I simply go to my queries file here then search for the query which is responsible for fetching the users itself which I didn't implement it yet so let us implement it here in my queries. ts file here at the end of the file I'm going to export another simple query hook like this use users which this feel going to return a list of users return use Query here for the query I'm going to pass the users key for the query function also I'm going to pass the a function like this ause do get and for the endpoint itself I simply pass the HTTP Local Host on the port of ad8 and endpoint of users here by now this query function will return the list of the users but it's not pretty functional in typescript because we don't have any intelligence here to get around this I simply need to provide the return of this function with type so this function will be of type promise and it will be going to return a list of option like this then I simply need to get the response of my query function then I simply need to map over the data but also the return of this axis. get method here is not obvious for typescript here so we need to pass another type here as a generic imagine that this end point Point Returns the list of users with another shape and your application will going to consume the result of this API call with another shape so we need to convert our API response to a shape or type that it can be consumable for our front end application which is pretty common in communicating between client side and back inside of any project so this endpoint will return the list of users here and if I head over to my fake backend here and go to the db. Json file here if I go down here for the sake of this tutorial I have created a few users here for you to see the shape of each user in our database so by now I know that my fake back end my M back end will return the shape of the user like this and I simply need to make it a type in my application for each user that my back end will return for better organization of our code I create another file type in my types folder called API types here.s if you remember we talked about the discriminated unions in typescript and my application needs to create an edit the created user by our client so our API types will going to have a type for example create and the type of edit here which the variant will be edit and on our on the edit variation of our API post call I also need to pass the ID here because when we are creating there's no need to provide the ID of the user itself because the back end will generate it automatically but when we are editing a user or an entity on our server we always need to pass the ID of the desired user some of the fields are common between the create and edit phas of our API call in a few moments you will understand why are these going to be very useful in the future I will create another type called for example type common here and I simply pass the shape of the user that the back end will return we have email field name Estates gender language spoken which are exactly the fields that exist on my database here so by now I know that my user returning from the server is going to have these fields and the depending on the situation that I'm creating or editing the user I'm going to pass the ID or not pass it depending on the situation so I need to export it for now for the future and below here I simply need to export another type called API create edit which will be going the intersection of common with the unions of create and edit here create or edit here and also so and also the get user API call type will be going to this edit here and the common type here like this these types that we implemented here are pretty useful if you want to maintain your application and extend the scale of your application very easily and these scenarios will happen so much in real world cases for example first you need to create a type of shape of the response of your backend for example the put request the post request the get request all of it are going to be handled by you for better tie safety and better maintainability so now the thing that I want from this file here for now is this API get here so if I head over to my queries. ts file again I can simply pass the API get here as a generic like this and I'm going to import it then it's going to be a list of API get or a list of users here then I can simply easily let me just remove this map here I can simply map over the response returning from this API call and I simply call each iteration user and for each iteration I simply hit control space here which the intellisense is not working I don't know why I need to return a list of option here which will going to have ID and label and I'm going to use this use users query to show our client the list of users to manage it to manage them ID is going to be user user. ID and the label also is going to be user. name but I realize that I can pass anything here and the type safety is not working in these situations you need to Simply Force type a script to get the types and help you in the future so I'm going to use satisfies option here and if I for example put another field which is not exist on the option type it's going to return us an error and if I for example don't provide the required field it's also going to return me the error we can also use the as here but I most of the time prefer satisfies in most situations now that I implemented this use queries hook here I can simply use it in my application so I simply head over to the users component onent here then I'm going to initialize the created query earlier cons users query use users here now I need to render the users query data in my application so exactly below the container of our form I simply create a list for the subheader let me just import it from Material UI for the subheader of this I simply put the Leist subheader with the name of the users inside the list itself I'm going to map over the use query. dat map for each iteration I simply return a list item with the key of user. ID and I simply disable the padding of my list for better appearance then inside each list item I simply return a list item button so when the user clicks on each item of my list it will going to do something in the future open it here and on click of it just put the handle user click Handler here let me just make it uppercase then for each iteration I simply pass the user. ID here but I have not implemented this hand the user click here so let me just implement it here the thing that this function is going to do is that do something so that my application knows that this user is clicked so at the top of my component here I simply create a constant called ID and I'm going to use the use Hook from rhf I'm going to pass control and also the name will be going to be ID this is the this constant will be the ID which is presented on my form object why do I need this is that I simply will be going to pass this to my user query which I did not implement it yet it's not users's query it's user query it will be going the complete user returning by our server not the list of it so I simply pass the users no sorry the use user here and for the argument of it I simply pass the ID here so let's go and implement this query also in the queries. TS file here below the file here just export another query hook called use user which will going to return a user from the server it's going to get the ID of the user that we want and we simply return a use Query as before query key will be going to be for example the user as a main key and also the ID as a dynamic key for the query function I simply pass an async function this function will be of type promise and returning the schema of our user which we defined it earlier in our application so I simply create a res constant which we going to be the response of our API call to the server evate axio doget API get as a result of this query it's not an array of API get it's only an API get because we're going to get only a user not a list of users and for the Endo here I simply put two pactic here HTP Local Host adad users and I simply pass the ID here for the argument of my API this is how the Json server much backend Works in njs but it might be different with your case and instead of doing like this I simply distract the result and simply return the data from it then I simply need to return an object with the shape of my SCH schema as you can see the intense is working because we provided the result of our API call function so inside our return here for the variant I simply pass the edit so my application now knows that we are in editing mode and when the variant is on edit here I can simply pass the ID which will be going to be res dot sorry the data. ID here but for example if I put it as create you see that the ID is not available when the variant is create which we discussed thoroughly earlier before before edit here for the name I simply pass the res. name not res sorry the data. name email you be going to be data. email former employment period will be going to going to be new date press do not sorry again data. formare employment period for the first index of this array here and for the second also I simply pass the new date data. form employment with the index of one for the gender I simply pass the rest of gender Purity spread straightforward languages is spoken will be going to be languages spoken registration date and time will be new date R data. registration date and time salary range will be going to be data. salary range first index and the second index salary range also scals are going to be the data do skills States data do states here students data dot students is teacher also going to be data do is teacher here sorry there's an typo here put it states here as you can see here that everything is working just fine the type of scpt is very happy and by now I have created a use user hook that it will return the desired user by providing the ID of the user that I want here so let's use this use user hook in our application let me just import this use user hook here and also we're going to pass the ID available on our ID form field to this user query but we never change the ID on our form to the desired ID so if you remember we put the handle user click whenever I whenever our user clicks on each list item in our form so wherever you want in the application create this function cons handle user click here is going to pass the ID and of Type S string and we're going to set the value let me just get it from our form here set value value from our use form hook here this utility will change any of your form fields to whatever you want so I need to change the ID field of my form to the passing ID to the handle user click Handler function so head over down here perfect and I want to make this button selected on a certain condition so I'm going to pass the selected then the ID of my form the ID here then it's equal to the user. ID here and for the text of each list item I simply pass the list item text here with the label of user. label here and now if we head over to our application here we see that we have the list of the user you might not see them because your backend server is empty but we're going to create some other users in a few moment just let me just make this app a little bit more beautiful so put all of the things inside the main container for application inside a stack select all the things here except the ending container here put it inside this stack here for the direction of this tag I simply put the flex direction of row and for The Gap I simply pass the two as you can see here the list of users is left and our form is on the right and you can see that whenever I click on one of these list items here nothing happens but as you can see it will be going to be selected because this it is now equal to user. ID so if I now like this ID here for example below the list here for example I simply pass the ID here you see that whenever I click on each list item you see that the ID of that user is now saved on the ID constant here and this ID is also the ID presenting on my form field now that we have this ID by clicking on one of the list items here I can simply get the corresponding user entity from the serer and populate my entire form with the fetched data so let's implement this Behavior also but I forgot something to do in the queries. TS file here we have provided the query key the query function also exactly after the query function method here I simply pass the enabled to this here this will only call this query function here whenever the ID is is not a falsey value for example if I not provide this this function this query function might run even when the ID is not provided and it might cause some problems in our application so whenever the ID is provided whenever I'm I'm sure that we have valid ID and not falsy ID here I can simply can get the call the call this endpoint to fetch the user with the corresponding ID here it's react query specific not react to form spef let me just close this to populate the form with the user query data fish from server we simply need to create another use effect here whenever you want use effect and for dependency don't pass anything for now and if the user query. data is defined I just want to Simply reset my form with the user query. data here and I use es to provide the dependencies for the use effect dependencies array now if I refresh my page and for example if I click on David you see that my form is perfectly populated with the David data fetched from the server if I click on Robert we see that the values are fetched from the server if I click for example on John you see that everything is working perfectly if I hit on reset you see that the David is now selected is now not selected and all of the fields are have been reset to their initial State and again if I click on Robert John and anything else you see that everything is working perfectly and now it's the time to make this new user button to work we just need to head over to the mutations. TS file and we are going to complete this use create user hook here that we were just creating it if you recall we provided the mutation function here and on success we were needed to provide the query key of our users list on our invalidate queries function here so if I head over to our queries here and if I go to the use users you see that the query key is users here as I simply pass the users here and whenever a new user is created the query with the users key which is corresponding to this query here will be invalidated and also this list is going to be refreshed from the server and for for the sake of this tutorial I'm simply put the put an alert for example call the user created like this now if I head over to the users. TSX file here I simply need to do something when the form is submitted to the server so on our form component here I simply on the unsubmit event I simply pass the handle submit here which is not defined as simply we can get it from our use form hook here like this it will do anything related to checking the form validations before submitting it prevents the page to reload and many other useful features and also whenever we submit our form it will pass the current data on our form to the function that we provide here in the handle Summit argument I simply need to pass a unsubmit function here which I will create it here cons onsubmit for the r arguments I'm going to use the submit Handler type on the react hook form and pass the SCH schema of my form as a generic here is equal to this function data data here I simply do something when the handle Summit function is called and now for example I want to do something depending on the situation if variant is equal to create or edit which the variant is not defined yet so for example here here I simply Define it here comes variant of my form we be going to be going to pass the control here and also get the variant from the form and also here for the onsubmit function if the variant is create then we know that we are creating a new user else we know that the variant is for example of type edit here but for the simplicity I simply pass the else class here because we know that by now the variant is of type edit so I can edit the user here sorry the user and if the variant is create I can create my user we defined our create user mutation earlier so I simply need to initialize it create user mutation we're going to be create use create user here and whenever we submit R4 with the variation of create I simply call the use user mutation do mutate like this and also I simply pass the data to my create user mutation here and we need to test whether it works or not so if I refresh my application for example put something here if you check it now you see that if I click on new user nothing works and the form won't be submitted it's only because of these handle submit function function will be which will which we get it from our use form here which is pretty useful in the react hook form I pass an email here fake State gender and if I click on new user you see that nothing is working what is the problem here the problem was because of the typo here the mutations. TS file here instead of Local H Local Host I provideed Local Host without L here and now if you test our application here let me just refresh the page you see that I created this user just now let me just revert it to the previous previous state and now is everything is reverted to its initial and if I for example put test here sorry I accidentally clicked on John here let me just refresh the page again test test at sign test.com for example for States I simply select all of them mail I going to take all of it where I must contain at most two elements because of my validation here and for this also and I simply click on the new user here and as we can see here the user has been created and also the user leas has been invalidated because of this line here so when we create our user and this mutation function on use create user Hook is done this unsuccess will run and will invalidate the user's query like this so if I create another user with the name of test two for example and click on test two if I okay on the alert here which is the success alert you see that test here for example I can switch between all of these data here which is perfect you have done something very amazing here it's working pretty amazing we can simply switch between the created users the form will be populated with the fetch data from this server and now the only thing that is remaining is that we need to somehow also edit the users from the list for example if I click on Robert and change your rubber to for example Max and click on for example an edit user button here the list the user will be updated on the server to implement the editing capabilities we just need to Simply go to the mutations script again because we're going to script something on the server we're going to create another hook called use edit sorry use edit user here like this return use mutation here for the mutation function just pass the async data which is of type El schema and simply pass the data to the put put method of ause on the end point of HTTP Local Host ad ad users and with the ID of data. ID which is not presented on our data but if you recall we have the ID on our form but because of this variant field that we just defined earlier we have don't access to this ID on the data object to work around this simply put the if data. variant is equal to edit like this and wrap this ev. A.P put here in our if statement here we see that the type of script error is gone which is perfect for now and for the data also we need to pass the data to update our user for better organization and maintainability instead of passing the object like this for example the server accepts ID which is going to be of type id data. id the name is going to be name do for example the name and also on some fields we need to map and convert the shapes of our form data into the server data and it's to TS to pass all of them here and it's not very readable for this scenarios just let me remove the data argument of axis here and inside the SRC folder in the users feature let me just close all of the things in the utils here just create a file called for example map datts which is responsible for converting the user form data into the accepting shape of our server or any other server it doesn't matter but this scenario is pretty common so from this file we simply export a function called map data which will get the data with the type of our form schema and this we going to return this type that we defined earlier API create edit type here if you recall it's going to be the shape accepted by the back end of our back end so we simply want this function to be responsible for both converting the form data on both create and edit variations which is pretty doable by using using the typ script capabilities so there is if you recall and if I open the API types file here if you recall that there was there were so many common fields between the create and edit variation of our form submitting in other scenarios it might be much different but in our situation just for learning purposes the only field that is not common between the creation and edit is this simple id. string ID field here but it's very important and if you recall we have exported this commment type from this file here so inside our map data function here I simply create a common constant common of the type common just let me just rename this common to for example API common for better readability of the code and now I simply map the data of my form to the API common shape I just copied and paste the common constant here for the speed of the tutorial and also I simply put a switch case a statement here data variant here and in the case that if data. variant is create I'm going to return the common constant itself and also the variant of data. variant and then on edit variant I simply return the common itself also the ID itself data. ID of my form and with the variant of data do variant here and perfect for now this is our mapper function which is pretty useful so if I head over to the application before we continue to finish the use user use edit user hook here I just go to the use create user that we just created before and I simply put the map dat data and pass the data to this function which is not be needed in this case but it might be needed in real word case scenarios and also if you recall that this mapper function will also return another extra variant field here we only needed this variant field for demonstration for better type safety and better maint maintainability of our code but when we are submitting the form to the the server we don't need that variant I think might cause many problems so we need to somehow remove the variant field from the this map data it's pretty simple I just need to get the Amit utility function from the low Dash let me just import like this omit from low Dash omit and like this I can simply put the object and also the field that I want to remove it from the object itself like this and I just need to also so copy this from here and paste it in the data argument of A.P put here and after that the user has been edited I simply alert the user that user edited successfully for example and on success here I simply put another asnc function these are all react query related the first argument of unsuccess method is the data returned on the mutation function and also the second one which for example I call it variables here is exactly the thing that we provided as an argument to our mutation function why do I need this for cach invalidation in react query when the user has been edited first of all I need to invalidate the yeast of users because the name of the user might have been changed and the user is edited so the users list also might be changed also so first of all I need to invalidate the users key so first I need to import the initialize the query client by query client like this query clients. invalidate queries the query key will be going to be users here why do I needed this variables because of this if variables. variant is equal to edit I'm going to invalidate query client. invalidate queries query key will be user and the ID will be variables. ID here uh where this come from if you head over to our queries here we see that for our user we simply pass the user as the head key and also the ID so whenever one of these changes the query key the query itself will be refreshed from the server so we need to somehow tell the query client that invalidate the list of users and also the single user that have been edited like this so perfect now we need to use this use edit user hook in our application so we need to head over to our users component here and instead of passing the new user for the submitting button form I make it conditionally so if the variant of my form is on create I simply return the new user like this else I know that the variant is on edit mode so I return the edit user here and just let me just make this button of the contain for you to see better and now if we head over to our application for example I click on Robert here and if I for example uncheck this and change a Robert for example to Max and if I hit on edit user we see that something is wrong with our application so let me just check it out the problem was that we forgot to implement the else Clause of our onsubmit function which is pretty simple we just need to initialize the edit user mutation like this use edit user from our mutations file and I simply use the mutate method on edit user mutation and I'm going to pass the data itself now if I refresh my application here and for example click on rubber change it to Max here and edit on click on edit in this situations that we see that our form is not working correctly we simply need to know why it's not submitting our data to the server because I know that when I click on edit user the edit user mutation must be called and when the user is created it must show me an alert but by now I know that even this function won't be run because this handle submit here does not allow the unsubmit function to be run why because there might be something wrong with the validation on my form but I don't maybe I don't see it on my form here because to solve that for example I need to parse the form value on the Zoda it's pretty simple yet very powerful in these situations so I simply create a test button here like I'm going to call it parse here unclick I simply pass the pass a function which is going to be a schema this is the schema that we just defined earlier esia esa. pars method on it with the current value of R4 get values which we are going to get this from also from our use for context here like this get values here now if I click on the parts button and open the browser console you see that the Z is throwing me this error that for the ID field we expected a string but received a number and if we head over to our backend server here we see that the ID of each user is save on the database on the fake database as a number but we defined the ID returning from the database as s string which is causing us this validation error which is one of the amazing features of Zod which will prevent these types of mistakes in our application so now that now that I Chang the string to number here we see that other files are throwing me the error if I head over to the queries we see that the ID this line has an error it says that the type number is not assignable to type a string so we must convert this right side of the equation to from number to a string we have another error here what is this so also we need to change the right side to a string also a string like this and also here just change the ID to a string also and remove this satisfies option here because we don't need it and now if I refresh my page if I click on Robert and finally if I change the Robert to Max and if I create click on edit here you see that the Robert has been changed to Max for example I can also change the email to Max and click on enter you see that the accessibility is correct also and everything is correct if the form is not valid and if I click on edit you see that we the for the field has been focused automattic Al so we need to solve the validation here for example I can remove these here and click on the edit user and if I refresh the page we see that the Max has been edited successfully I also check the salary for example the slider here we see that everything has been fored perfectly if I refresh again we see that the slider is on the previous state so this is the end of the tutorial itself we have learned almost anything related to react hook for and also it's combination with material UI library and also the validation library and you can use your knowledge now in the real world applications because you know all the basic and advanced things related to this face famous stack for managing the forms in client side front end applications if you enjoy don't forget to like And subscribe and leave a comment below if you have any question related to this tutorial here