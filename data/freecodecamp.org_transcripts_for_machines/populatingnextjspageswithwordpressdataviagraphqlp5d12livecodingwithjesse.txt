hey everybody welcome to live coding with Jesse I'm Jesse and today we're gonna take some of that data that we moved from sequel server into my sequel via the WordPress API and we're going to take that data now out of WordPress with graph QL into our react next j/s applications so first thing we have to do well I already did the first thing before the stream so I just installed the latest version of the WP graph QL plugin onto WordPress so just a quick recap of how I did that it's in case you're you know following along or what do you use this for your own project I just went to the WP graph QL I don't think I have it up anymore I went to their github page and then I went to releases I guess I can bring it up just to show y'all there we go okay so when you go we know to get up repo you can check the releases so I clicked on releases I downloaded this zip file of the latest release and then I just went into the plugins add new plugin upload and then I uploaded that zip file alright that's it it's as simple as that activated that after you do that you do need to flush your what do they call it your permalinks so the way I do it is I just click on one of these buttons and then I click back I save it and I click on another one of those buttons and that flushes it for me they may be a better way to do that but I don't know but if you skip that step it's not gonna work you're not gonna get any data from that graph qo endpoint but assuming you did that now if you just type in your so this is graph graph eql I'm not sure how to pronounce that but you can get it as a Chrome extension you just put in your URL which in our case now is it's just an IP address and then put graph QL at the end a slash graph key well and you should be able to get some data so right now I'm just testing it and I'm grabbing the IDS of all of our posts okay so that part is pretty easy but here's the the problem that we had it's not really a problem it's just an extra step we have to do so that post type that we made in our last stream faculty I'm gonna try to get data from that and it says it can't find the field faculty all right so we have to add something else to our plugin our custom post types plugin to make this work so here's our faculty custom post type and you can see down here we say show and rest in the rest api and that's how we got it to show up obviously in our REST API but what we need to do now is we need to get it to show up in graph QL as well so we're gonna go graph oops sorry show in graph QL actually let me start my let me start my Pomodoro timer since we're kind of getting into it right away okay I just checked the latch at hey everybody and Brooks says is it graph graph e cool like graphical but cooler I don't know that maybe that's how you pronounce it I just I've never heard it always just seen it alright here we go let's start our Pomodoro timer we're going to get into Pomodoro sessions today I have a Christmas party for my department here in about an hour and a half a little less than an hour and a half so we'll see what we much we can get done let's see graph kilo graph kilo and we also hoops a skipped as for label we need to add a label as well I think we do 30p graphical poser custom feels I'm gonna try to get away with not adding the label so I have some documentation open here this is from the graph graph WP graph QL wiki and it's saying to put in this label but I I don't know that much about this but it seems to me like I might not have to add this label so I'm gonna try to get away without it and see if it works all right so let me all right so we're gonna show in graph QL and then we're gonna do this little arrow thing I'm not sure what they call that in in PHP but looks like an arrow function to me coming from JavaScript land so we're gonna say true and then graph qo single name we're gonna give it faculty and then we're just gonna say faculty again I guess if I really wanted to for singular we could do like faculty member but I think it'll be fine so plural plural name okay so let's see public sure we make sure I have everything the way it should be okay that looks good and then also if we want to get that custom taxonomy working we need to add some things in there as well so right now our custom taxonomy we have said show and rest so we need to do pretty much the same thing so I'm just going to copy and paste since we've we've done it already and instead of genre we're gonna do faculty department for singular and then departments for plural I'm gonna save that hopefully that's all we need to do it's worth a try at this point to see if it works so we do need to copy all of that and then add it in here to our plugin so we'll go to our plugin editor and let's go to what the plugin that we made paste that in update it and let's see hopefully I don't have to flush the permalinks again we'll see if it works like this if it doesn't then we'll flush the permalinks it was a Oh internal server error that is not good Wow so we're not getting anything hmm all right let's check this out I mean we're still able to move around here let's go let's let's flush our permalinks see if that makes a difference all right so evidently I messed something up we shouldn't be surprising I do that quite a bit also the stream is a little bit earlier today so I can see I have a lot less people going to normally have let me know what you think about this time though for a stream so I mean the other time that we do this in the afternoon well for me the afternoon is okay with me but you know I'm interested in seeing what time works better for you also let me know either in a live chat now or in the comments later on if a an 1130 a.m. time is okay it it goes over top of my lunch break but to be honest with you I usually end up working through my lunch break anyway so it wouldn't be a big deal for me to stream at this time if that ends up being a better time for everyone I can maybe try it out and just stream at this sum of a few days and then at the normal time a few other days a week just to see you know how many people end up watching hmm I'm interested to see now okay so our REST API is still working let's make sure it's working here okay so the REST API works maybe I do all right let's take a look at what I did and perhaps I I had it in an error well that's if it was a syntax error in the plugin then we would get a much worse result immediately right so we still have this here so it's probably not a syntax error but maybe I missed something so I'm gonna bring this documentation back over and we can look at it together so okay we've done that we've added those three attributes so these three are the ones that are important and we've also added them for the taxonomy I'm not really sure what this is doing or whether or not I need it let me scroll up and see what else we have here shushing okay so these look like it's four fields which I'm not worried about the fields yet but this is good to know that if we want to add custom fields we can do that yeah I don't think that first part is what we're really going for right now let me look more closely yeah really the only thing that I didn't do was add this in with the label see my labels look different than their labels let's go back and check what we have here so yeah our labels were actually we've created a variable labels and we have you know quite a bit in here so let's compare so I mean we have faculty right she's all right let me check the live chat and see oh hey Jason's here alright awesome I'm really glad so jason created WP graph QL the plugin so I'm really glad that you that you came I um I was hoping that you might you know stop in for a bit so Jason I have the latest version of WP graph QL installed in in WordPress here so it's I think it's point 2 2 and right now I've I've added in I'll show you here so I've added in the show and graph QL graph QL names right here for the post type and then also for the taxonomy but now I am getting an error so when I try to get anything from graph QL now well let's just try post again so before when I try to get posts it worked now I'm getting internal server error what I'm really trying to get is faculty and that's a custom post type so this is the message I'm getting so I messed something up and I'll leave I'll leave this code up here with it we that we had let me make that a bit bigger so anyway so if you have any ideas about what I'm doing wrong or anything let me know I did use a show again what was I using I was using the graph QL wiki page on extending and customizing so that's where I was going off of to do this okay Jason is gonna try to get a snippet for us thank you I appreciate it okay so while we're waiting on that I'm gonna check out what's in the live chat as well here so it looks like it's not it's not a bad time this so I asked earlier about this time whether this would work for everyone and seems like the time is okay all right so Jason's asking if the faculty post type shows up in the admin panel and it does so we have it here I'm gonna refresh everything yep yeah so the faculty post type does show up okay it looks like so far I'm seeing all positive response to streaming at this time so yeah maybe I'll try it out I think I said we have it's still lower than normal viewers but that could definitely be because I I scheduled the stream you know kind of later like pretty close to when the stream is actually going to start and every time I do that I always have less viewers I think at least for some people there's no notification usually there's like a warning notification of the streams going to start I'm gonna check to see if I got it yeah see I only got the notification saying the stream is live I didn't get the other one that I'd normally get saying the stream is going to start in 30 minutes alright okay cool and Jason has a snippet coming all right I need to keep an eye on my time as well so don't miss my Christmas party I had I was already late to one meeting this morning it snowed a lot here I mean a lot for my area if you live you know farther north than me it probably wouldn't seem like a lot but I think it was maybe like two inches overnight so anyway the kids had a delay for school so it kind of threw everything off this morning and I got in a little bit later than I normally would for my meeting so I don't want to be late for two things in one day all right let me we also have okay so the the sights the react site the next yeah site that we're working on have some updates so hard went in and and hooked up Apollo so that we can use graph QL and pull the data in so you can check out in the package.json I have up here you can see there's a lot of new things so make sure if if you've already cloned this repo definitely do a get pool I just added in yesterday I did pull in those changes so I merged that request so check that out so I mean we'll be using it and going over it a little bit more once we get graph QL working here so I guess you can you can check that out while we're trying to fix this if you want okay won't let Jason paste the code in the live chat let's see Jason do you think yeah a harsh desist try paste paste mental work if you can paste it in a direct message on Twitter that would work too whatever is whatever is easier for you I think we do have we do have this as a as a git repo it's a public git repo so you could paste it in an issue if you wanted I mean really any whatever is the easiest way for you to get it to me is it's fine with me all right awesome so Jason has put it into a gist and I'm gonna check that out right now alright awesome let me pull this over to this screen so we can just check it out okay so all right let's see okay so we action okay so I would replace absolutely didn't have the okay so Jason was saying it might have been an issue with having the graph QL single and plural names the same but actually it looks like it works Jason say not sure what the difference between my snippet and yours is alright let's check it out let's check it out again like the only thing custom fields is included here I don't see what that would have to do with anything the would are there any issues with me having near the rest api activated as well I saw with the last route yeah with the last release there was a note about a conflict on custom post types that have registered show and rest true so it does say that version 2 to our zero point zero point two two fixes that I mean I could try to take this out let's try to take this out and see and we'll try to take it out here as well take it out so we've taken out all the rest stuff here which if we're going to use the REST API to pull in data we're gonna have to put that back in but at least you know we'll test this out and see if if that was an issue oh yeah okay so let's go back to our plugins to the editor and we'll update that right now let's check this out hmm so still getting the error there let me try the permalinks thing here again mmm still an error just to make sure I'm trying to I'm getting the right thing here yeah we should be able to get those Oh what is this whoops alright let me check okay Jason says the show and wrestling is working for for him so alright let me let me just leave that back in there since we'll probably need that at some point anyway okay harsh it says open the console to see if there's an error in here for the request okay yeah we have errors for sure yeah so it's giving us a 500 internal okay so it's it's saying the graph QL requests must be a post or get request with a valid query alright so let's try hard refresh then hmm so we're not we're not getting any schema oops my the timer went off let me do it sure I think I'm all caught up in the live chat let me double check but I think we can just kind of keep going okay yeah I've gone over everything live chat so I'm just gonna start another Pomodoro Pomodoro session here all right all right let's try got some some things that were being put in the in the chat for me to try okay still getting that internal server error can you share a link of the WP install yeah the the wordpress install let me give you the link here I mean it's just an IP address but there it is in the in the live chat now okay so I'm gonna take the snippet where to go now I can't find too many things open all right let's get rid of that I get rid of that for now there it is all right yeah so I'm gonna copy this and let's yeah let's just put this in here and then I'll take this and comment this out there we go jace setup I'm like five minutes behind on the stream that is that's a lot of a lot behind I don't think I can do about it now I usually do set it to low latency so there's not that much of a difference between what I'm saying and when you all hear it let's see all right so I'm just gonna try this and you know what let me let me get rid of this for now it's just in case that's messing things up okay so no more air so we have our post again let's see if we can get faculty what would we have as faculty members yeah oops I spelled it wrong yeah alright so we have faculty members now okay so that works so there's something in and what I'm doing what I was doing that was messing this up so this weird well alright I think we can figure this out alright so I guess what we can do it this is going to be kind of tedious so I apologize for this but I don't know that there's much sense in trying to move forward until we make sure that this is gonna work you know with everything that we need so I'm gonna take basically I'm gonna paste in these different things let me see you know what let's try this first all right so let's see if we can get this taxonomy in here so basically we're gonna slowly put paste these things back in here and until we get an error and then we should be able to find out what exactly is causing the error so this is going to be tedious just because of the way I'm updating this plugin which I wonder like actually I could do this in a way that would be easier but I'd have to set that up as well and at this point I don't think it would be worth it to take the time to do it right now but at some point maybe it would be alright let's update that and check it alright so we did get the internal server error and all we added back in was the stuff with this taxonomy alright so you know what I'm gonna try let's take this out and I'm going to departments I'm going to take that out so basically this is going to be everything that we originally had for our post types I'm adding all this back in but I'm taking out this part that we know caused an error so we'll see we'll see how this goes now okay so the air is gone but we can't find faculty members and that's because we named it something different so faculty okay great all right so this is good this and this took a lot less time than I thought so all of this worked right so just adding the show and graph QL stuff to what we had for the post type works but for whatever reason something we did here with the taxonomy did not work so for now I guess we can we can move on for now and get this data in here yeah I said let's see what let's see what else we can get I want to be able to see is there a way I can get all the fields that are available here I don't know enough about this syntax you can do like that no it's not gonna work all right so let's do the ID title to recall a department all right so we don't have that field I could see oh okay all right sorry Jason I I wasn't looking at the live chat so jason says you can't have special characters like faculty departments so I'd have to camelcase it awesome okay baby is so harsh it says the wp install is redirecting this is what I get when I mean obviously it shouldn't really show anything okay let's refresh alright great we've got the schema now and it's hype ahead as you read queries great all right so let's let's go ahead and add in our what we needed here for or is that here we go so I'm gonna grab these again and this time oops let's see if I can get it right so I should be able to do this and then change it to faculty departments oops supposed to be Department right whoops there we go faculty department faculty okay great all right let's try this out now see if we get it no the shadow refresh okay all right let's see with the ID let's see if we can get the title can we get this name yeah see oh nice alright check that out okay so this is what we're getting now so we get all our faculty members alright so right now I'm I'm not getting all the data we need but we have the title and then we have on our faculty departments and we have the idea which we won't really need but we can get the name of that faculty department it's awesome awesome awesome this is great and actually that's thanks for mentioning like the reloading this to get the schema because this typeahead you all probably can see it is too small but you know being able to go in here and type in you know something like this I can immediately see you know what what's available to me so I mean that's that's really useful I just want to see what has four count seven seven nice the count might be useful at some point really cool all right all right see much time we have okay we're not bad on time can definitely finish out this Pomodoro cycle and right now there's not a whole lot in the live chat that I haven't already addressed so maybe I don't know if we can do a whole nother Pomodoro a cycle but maybe so we'll see so let's go in now and let's try to pool some of this data in let's see how we're gonna do okay so we'll make a page first and Paige will have parameterised routing we've done this before in previous streams so we'll have some parameterised routing and then if they go to the page we should see what this is like let's check the current site I'm jumping all over the place sorry about this so I'm going to check the current site to see what the URL is or jason says my connection is saw it sorry I wasn't able to help more but I'm not really able to even follow us oh no problem Jason you you are super helpful there's no way I would have made it we'll figure that out on my own about the having a camel case things so super super helpful thank you so much alright so I want to check the current site to see what the URLs are for the faculty page if I can match that URL that would be awesome then users who have something bookmarked or any links you know from elsewhere that are trying to link to that page they won't break so let's check that out first and I don't really even know how to get to there let's see Department all right let's try departments first and we'll just take biology so we did import the biology professors so let's see faculty and let's read more I actually know this doctor dr. Oskie he's a super nice guy I played Lord of the Rings Trivial Pursuit at his house before and his wife is super super knowledgeable about Tolkien stuff and she actually beat me and so I was really impressed but they're really nice people so it looks like this is going to be perfect so I don't know if you can see the URL through small.i there we go hopefully you can see that better now but it's just slash faculty slash and then the the name so it's jurasky slash there so it's last name and then first name see i can get that we got to figure out a way to to get that last name first name in there just right now we have that's going to be the toughest part because i don't have i don't think we have a piece of data with that slug but let's let's see if we can find it I'm really glad we looked at this first let's go back to let's go back to the Microsoft sequel whatever this is called sequel operation studio that I always forget what it is so I want to go back and find all the fields again so I can look through and see if we can we have that data in any of the fields alright let me check this okay so something's up with the stream the stream is smearing that webpage looks like a window crashed in Windows XP and you moved it alright so maybe the zoom probably on the wrong Network right no no all right all right listen I'm gonna change networks really quick so the stream is gonna drop off and then start up again so I'm warning everybody now that this is gonna happen so it's just going to be a just a second I need to just set this other network is my default Network from now on since I need it to work on it all right so I'm gonna do it okay so the stream should be back up so let me run this again come on my try to disconnect and reconnect all right let me copy this there we go oh all right okay so looks like alright I'm back we still have the same amount of viewers we have any left so that was a lot better than last time we lost half the viewers when I switch networks okay it's actually really good to know you can switch networks in the middle of a stream and it still picks right back up that's kind of cool all right so here's what we're looking for some data that has the last name of the professor and a hyphen and then first name you would think it would be in here right let's see if not this might be something that needs to be manually put in and hopefully we can figure out some way no it's not in here that's not good that's not good at all all right let's check let's check the data that we have now and see if it's in here somewhere you know I don't see it in there okay blue day says hello hey hey how's it going thanks for watching Harshit says Queen you give me an example slug alright so let's see what are our slugs right now okay so right now we're impress is just making the slugs like McKenna dr. Kyle right so it's adding that doctor in there because of the way it's it's in here we don't want that we want it just to be let me double check actually so Derek Duras key is Duras key Derek right so let me so even though the name that shows here and that we're pulling as the title into WordPress is dr. Derek jurasky the slug is just Eric röszke so I'm gonna paste that and you can see in the live chat now let's find another professor so let's see Kyle McKenna and make sure yeah McKenna Kyle okay so yes it's definitely different so I guess here's what we can do this might not be bad for most of these it seems like if they have doctor it'll change let's see what this one since this is a priest let's see what the name ends up alright so even for a priest is still you learning okay last and first name so what if we just wrote some function that checked and if it had a doctor in it it stripped that out wolf it had fathers ofr period or tio R which mean it's third order regular that's the the order of Franciscans that that run this University we could strip that out maybe we can do that yeah maybe we can do that in our in our migrate Jas file yeah I'm thinking we do that in the migrate Jas file and then pull in see if we can actually add slug like a custom slug here which we should be able to check and here see if we can add it so here's we create a post yeah we can add a slug so we can make a custom slug which can just be our last name and first name but what we'll do is we'll pull out any commas and we'll pull out doctor or any titles like that and we'll make sure we'll insert a and we'll lowercase everything see okay heart should just put in some things to split this so I think I might be mistaken but I think we need to go the other way so what I have is is this so I have this as a string what I want to get is the slug Duras key Derek all lowercase without the doctor so yeah so I need to go the other way that's what I'm thinking so regular expressions then and rook and Hart shooters are talking about regular expressions in the live chat yeah that's going to be the way to go let's let's see what I can do now actually my timer ran out so let me check what time it is it's not too bad on time right now let me double check to make sure I didn't get any messages that need my attention before the party slack there's nothing in slack and there's nothing in my email okay so I should be good to work on this well let me I'll leave it up to you all so here's what I'm thinking we could do I could manually change the slug on some of them and then go forward with trying to actually pull the data in or we could wait till tomorrow when we can actually get the regular expressions or Harshit is is going to work on writing a regular expression when we can actually pull this data and we'll probably delete what we have and then pull the data and again with the correct slug that'll be the fastest way to do it and then we can go ahead and create our template for the faculty you know our page and basically use it so that the URL will be the same as it is in the current site where I just lost it words yeah so the URL will be the same as we have in the current site it'll be you know a Franciscan dot edu slash faculty slash and then faculty lastname firstname and then based on that slug that faculty lastname firstname then it'll get the data for that particularly fact particular faculty member C so anyway so that's the two choices could should we just use some manual test data and keep going or should we just say forget it let's just wait till tomorrow when we can have all the real data so I'll wait for some responses here and while I'm doing that I just want to check out what we have here already and our pages so we do have a faculty page already and let's find our survey s faculty okay so we have it set up already great that's great so we have the parameterize routing set up already so if you can let me a lost it here we go so already when it's slash faculty slash and then this is going to be ID this we're calling it ID but we know that's it's going to be the slug we're gonna send the slug there and we're gonna be able to access this ID at that page so let's go back to our faculty component and this query this ID will get saved into props now what we'll do is in this within this get initial props we're gonna actually grab the data so right now we're just returning the ID but what we'll do is like we did on project one the catechetical Institute project here in this get initial props function that's where we're going to get the data and this will run server side as well so this will work with our serverside rendering and then based on the data we return then we can fill out the fields here so this is actually gonna have for now I'm going to leave this as ID but really this will be the title so what we'll have is that title we're gonna have an image and then we'll have some some text here so I mean really this page is pretty it's it's going to be somewhat close to what we what we want but first let's let's just do kind of like a demo here what's what it's gonna be like so right now here's the local version of this and I'm gonna go faculty and then let's go to Ross key Derek great see so Duras key Derek will be able to access that and then use this slug to access the the data so in graph QL it would be we essentially we would search by slug I guess faculty I remember how I did this originally but essentially here it would be where slug why is it not giving me slow we're faculty I don't remember I got it before but basically it'll be like where the slug for this faculty equals and then whatever the value of that idea is so that would end up being you know how we get that data we pass in that ID and then we pull it out which I can't remember I can't remember how we did that I'll have to check and see how we're already doing that in that were doing that in the bulletin the react version of the bulletin we're doing a similar thing so I can just check that code out and github and I'm gonna do the same thing that we were doing before kiss your ass hi should i watch the whole series from the beginning to get along I wouldn't try to watch the whole series from the beginning I think we're well over a hundred videos now it would take a really long time but maybe to get up to date as soon as you can on on this particular project maybe just watch all the videos that are labeled with project five so if you go back to like project five day one and I think this is day 12 that'll be a lot easier to catch up and then if I make reference to some earlier project and you want to you know catch up on that you could certainly try to go back to you know watch you know a video or two from a previous project but I wouldn't unless you have the time I wouldn't worry about needing to watch every video just maybe if you see a topic that that interests you that you want to know more about you know check that out but otherwise it is it would take quite a while all right okay well I think at this point then I think we'll end this this dream and tomorrow will be kind of like part two so we didn't we didn't actually get to the point where we're pulling this data into react but we are able to pull it out of WordPress so we've got the first part done the second part will be getting the data into react and we already have it set up we have our parameterize drowning setup as we just saw you know that works it's just now we'll have to make sure that we we call within this get initial props function we're gonna pass through that slug and get the correct data and then we can populate this so that's what we'll work on tomorrow and we may even pull in the data from our sequel server database into WordPress a little differently so we have correct slugs that's something I might work on you know kind of earlier in the stream we'll see how it goes but I think tomorrow I'm gonna check my calendar just to be sure that I'll be able to stream tomorrow yeah I don't have any meetings on my calendar tomorrow so I should be able to stream I don't know about I might try doing it at like the normal time that I usually stream tomorrow and just see the difference and in viewers but yeah but that's it that's it for today so it didn't get everything done that I thought it was kind of an ambitious project for one stream especially a stream where I knew I had to end you know somewhat you know if I could have taken another hour I think we could definitely could get it done but anyway still we made good progress so even overcame some some issues that were mainly just based on you know the fact that we had the camel case things in our plugin let's see boxing expert says good job Jesse it takes true will to be doing this every day thanks I appreciate that and then thanks for watching alright so I'm gonna end things now will most likely be back tomorrow thank you so much for watching and for all your help and it was really cool so I know Jason who's the creator of WP graph QL plugin if you end up watching this recording and seeing this then thank you so much again that was super helpful and and everyone else who helped I really appreciate that thanks hardship for the updates with graph QL and our what are we calling this franciscan site react project and also thank you for for your your work that you're about to do here on these regular expressions so really appreciate it and I'll see y'all tomorrow have a great day