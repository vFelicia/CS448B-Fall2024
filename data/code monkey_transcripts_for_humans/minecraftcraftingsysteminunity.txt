With timestamps:

00:00 - in this video we're going to create the
00:01 - crafting system from Minecraft we're
00:03 - going to have our 3x3 we're in position
00:06 - the items according to a recipe and get
00:08 - our output that we can use what's begin
00:13 - [Music]
00:17 - hello and welcome I'm your code monkey
00:20 - and this channel is all about helping
00:21 - you learn how to make your own games
00:23 - with enough tutorials made by a
00:24 - professional indie game developer so if
00:26 - you find the video helpful consider
00:27 - subscribing okay so here's what we want
00:29 - to create we have the UI set up in here
00:32 - just like in Minecraft so we have a
00:34 - simple 3x3 grid as well as an output
00:36 - slot then down here is the current
00:39 - inventory where I have a bunch of items
00:41 - this is using the inventory that we made
00:43 - in a previous video then I can drag and
00:45 - drop items which again was also covered
00:47 - in another video and using this I can
00:50 - place items into the crafting window now
00:52 - the crafting works based on recipes
00:54 - those recipes are based on specific
00:56 - items being placed in specific positions
00:58 - in the crafting grid for example I place
01:00 - the wood right down the middle
01:02 - now just like this there's nothing on
01:04 - the output since this is not a valid
01:05 - recipe however now I can place this wood
01:08 - on the position right beneath it and
01:10 - there you go now we have a vellum recipe
01:12 - to output a stick so this is the recipe
01:14 - that we define in order to make a stick
01:16 - we have two pieces of wood one there and
01:18 - one in there now when I grab the stick
01:20 - and drop it in my inventory
01:22 - there you go over the piece of wood were
01:24 - consumed so the entire recipe has its
01:26 - cost and now another recipe is putting
01:29 - two pieces of wood on the top the other
01:30 - with a stick underneath it and there you
01:32 - go we have a wooden sword and if I now
01:35 - make another stick and then take these
01:37 - two out place the stick in there and the
01:39 - two diamonds on top and there you go now
01:42 - we have a diamond sword so here we have
01:44 - our fully functioning crafting system
01:45 - and now here on the side we also have
01:48 - the player equipment window this was
01:50 - also made in a previous video so right
01:52 - now my character is only attacking using
01:54 - punches and kicks however now I can drag
01:56 - and equip the wooden sword and there you
01:58 - go now he's using a wooden sword and I
02:01 - can take it out to replace it with the
02:02 - diamond sword that we crafted and there
02:04 - you go now we have this nice sword so
02:06 - over here you can see a whole nice
02:08 - ecosystem built from a bunch of separate
02:09 - systems so we have our inventory then we
02:12 - drag and drop items to place them into
02:14 - the crafting system the crafting system
02:16 - receives items and according to a recipe
02:18 - makes something and then we can take our
02:20 - crafting items and equip them into our
02:22 - character everything is written in a
02:24 - clear way so it is very easy to add more
02:26 - recipes and more items this video is
02:28 - made possible thanks to these
02:30 - awesome supporters go to
02:31 - patreon.com/scishow to code monkey to
02:34 - get some perks and help keep the videos
02:35 - free for everyone alright so this is our
02:37 - goal let's get to it okay so here's our
02:40 - starring scene I have my player
02:41 - character that I can move around and I
02:43 - can attack over here is the inventory
02:45 - and the equip you want right now there's
02:47 - nothing where you can equip so let's
02:49 - craft some items let's begin by making
02:51 - our crafting system script so we make a
02:53 - new script and code our crafting system
02:57 - now in here and let's get rid of mana
02:59 - behavior since we're not going to be
03:00 - using these functions instead let's make
03:04 - a simple constructor so in crafting
03:07 - system okay
03:08 - and now let's see how we're going to
03:11 - represent our grid for example we could
03:13 - use the grid system we created
03:14 - previously if I was making this system
03:16 - to use in one of my games that's exactly
03:18 - what I would do however in order to keep
03:20 - this video simple let's make a simple
03:22 - basic array in step so up here we make
03:24 - an array so we're going to have a
03:26 - private it's going to be of type item so
03:29 - an item array and call it our item array
03:33 - the atom class is in here this is the
03:36 - class that we created when we made the
03:37 - inventory system so make sure you watch
03:40 - that video so here we have our atom
03:42 - array however it's going to be a
03:43 - multi-dimensional array and now on the
03:46 - constructor we're going to initialize it
03:48 - and for the size let's define a constant
03:54 - so we have our grid size and we
03:56 - initialize alright alright so here we
03:58 - have our 3x3 crafting grid now let's
04:01 - make some helper functions to help work
04:03 - with this grid
04:30 - all right so here we have a bunch of
04:32 - functions to interact with our crafting
04:34 - system grid so you can ask if a certain
04:36 - position is empty we can get the item in
04:39 - that position certain item in that
04:40 - position increase the item amount
04:43 - decrease it remove an item and try to
04:46 - add an item so you first test if it's
04:48 - empty then we set the item if it's not
04:49 - empty then we test if it's the same type
04:51 - if so we increase the item amount and if
04:53 - not then we cannot add it so we should
04:55 - have pretty much all the actions we're
04:57 - going to need to implement with our
04:58 - crafting system now let's test this out
05:01 - so let's go back into the editor here we
05:04 - already have a testing game object with
05:06 - a testing script this is where we're
05:08 - making the connection between the player
05:09 - and the UI inventory and the character
05:11 - equipment and the UI character equipment
05:13 - now here let's construct a crafting
05:16 - system then let's create a new item so
05:28 - we have a new item and then we go into
05:29 - the crafting system and let's set the
05:32 - item and finally we do a debug log on
05:38 - the gift item on this position and now
05:42 - it's s and we should be able to see this
05:43 - time and located on the item on the zero
05:46 - zero position here we are any of the
05:48 - consumed essay we have a diamond placed
05:50 - on the zero zero position awesome so we
05:53 - have set up the basic logic for our
05:54 - cutting system now let's make our UI
05:56 - visual so here in the canvas let's build
05:59 - it so we make our game object call it
06:01 - our UI crafting system
06:26 - all right so here we have our crafting
06:28 - system UI we just have a simple
06:30 - background then we have a output slot
06:33 - here on the right and our 3x3 grid of
06:36 - input slots as you can see they are all
06:38 - named 0 0 1 0 2 0 and so on and then on
06:41 - top we have an item container in this
06:43 - item container is where we're going to
06:45 - in Senshi 8 the items that are placed on
06:46 - the grid okay so now let's handle the
06:49 - code let's make a new script for our UI
06:52 - like crafting system and we drag it in
06:55 - there okay now in here let's make a grid
06:57 - and locate all of our grid positions
07:25 - all right so here we have our references
07:27 - for all the various slots as well as the
07:29 - output slot now let's make a function to
07:32 - be able to spawn an item on a grid
07:33 - position so here we're going to
07:38 - instantiate that prefab so let's add a
07:40 - film for that reference and back in the
07:46 - editor we drag it okay alright so we
08:01 - have a function to create an item we
08:02 - instantiate our prefab wien located
08:05 - right on top of the slot transform
08:07 - position and we simply call the function
08:09 - to set the item okay so just like this
08:11 - we can now create an item on any
08:12 - position in our grid and now let's also
08:14 - make one to create an item on the output
08:19 - and just like that okay so now let's
08:22 - test it out let's go up here and let's
08:26 - create some items all right so we should
08:36 - be able to see a diamond a piece of wood
08:38 - and a sword made of wood let's see any
08:41 - of there we have our items correctly
08:42 - placed in our grid so we got a diamond
08:44 - there wooden there and a sword in there
08:46 - all right awesome and again since we're
08:48 - using the prefab that we made previously
08:50 - we can simply grab and drag and drop
08:51 - these items all right so far so good
08:54 - now my 10 on being able to take an item
08:56 - and drop it on to the crafting window so
08:59 - first let's make a script out to our
09:00 - slots that won't handle the item drop so
09:03 - here we make a new C sharp script color
09:05 - our UI crafting items like and let's
09:10 - write the script onto every single one
09:12 - of our Smuts so crafting Adam son yep
09:13 - right now in here we're going to do just
09:16 - like we did on the equip inventory video
09:18 - so check that out if you haven't seen it
09:20 - yet essentially we're going to capture
09:22 - the eye drop an alert event so inside
09:24 - unity engine dot event systems
09:30 - so here is the script that we made in
09:32 - the character equipments what now we
09:34 - could probably make this more generic
09:35 - and use it for both scenarios but in
09:37 - this case let's just copy face the same
09:38 - code so we're going to have the same
09:40 - behavior alright so on drop we're simply
09:43 - going to fire off an event okay there it
09:46 - is very simple now let's go back into
09:49 - the main UI script and now in here we
09:51 - need to know on which word position we
09:53 - dropped an item so in here for example
09:55 - we could subscribe individually to every
09:57 - single item slot however that would
09:59 - result in a ton of duplication code so
10:02 - instead of let's use a single event but
10:04 - we're going to pass in the X&Y into our
10:06 - slot so first let's go into our slot
10:08 - script and in here let's receive the X
10:10 - and the y okay we have this function
10:17 - test them and now over here on our item
10:20 - drop event Rx and let's add some more so
10:23 - let's set a min for the X and then for
10:24 - the Y okay so we now have this event
10:29 - being fired and it also tells us the X&Y
10:31 - and now we can go back into our crafting
10:33 - system and in here we can go into our
10:36 - slot transform array we get the
10:38 - component of type UI crafting slot and
10:42 - in there we subscribe to the on item
10:44 - dropped event
10:44 - all right so anytime we drop something
10:47 - into any slot it will fire off this
10:49 - event and over here we have the Adam
10:51 - dropped event args so this contains the
10:53 - X and the y and here just for testing
10:55 - let's do a simple debug log and we also
11:00 - need to call the set X Y function so in
11:04 - here alright so we can't set X Y we
11:10 - subscribe to the event then on the event
11:12 - we do a debug log which shows the item
11:14 - the X and one alright let's test ok here
11:17 - we are let's pick up this diamond and
11:19 - drop it in there and if there you go it
11:21 - says we dropped an item on position to
11:22 - zero which is indeed that one
11:24 - now drop a piece of wood in there and
11:25 - there your wood - - alright so we have
11:28 - everything working correctly awesome now
11:30 - that we have the visuals working let's
11:32 - interact with the crafting system so
11:34 - we're here on our UI script let's have a
11:36 - function to receive our crafting system
11:43 - all right we just set it like this and
11:46 - now we can go back into our testing
11:47 - script and here we can make our
11:49 - connections so we first make the
11:50 - crafting system now let's make a
11:53 - sterilized feel for our UI crafting
11:55 - system and we concept and we trust in
12:01 - our crafting system all right so now we
12:04 - have the UI being aware of the crafting
12:07 - system and now over here when we capture
12:09 - any dropped let's tell the crafting
12:11 - system to try to add that item into that
12:13 - position so we can use the function that
12:15 - we made previously try add item and we
12:18 - pass in the e-dot item into this X and
12:21 - one alright so just like this it should
12:24 - be working try to add an item into our
12:26 - crafting system on a specific position
12:27 - however if we do just like this then we
12:29 - won't actually see anything so we need
12:31 - to update our visual let's make that
12:33 - function in order to update first let's
12:38 - destroy everything in our item container
12:40 - which is where we're spawning our items
12:53 - all right so first we clear off all the
12:56 - old items then we cycle through our
12:57 - entire grid we ask the crafting system
12:59 - if it's not empty if not then we create
13:01 - an item on EDX that Y and we pass in the
13:04 - item that is currently in there all
13:06 - right so this function should be working
13:07 - for updating our visual let's come out
13:09 - when we set the crafting system and now
13:12 - we also want to call it whenever
13:13 - something changes so we need to be
13:14 - notified of that so let's go into our
13:16 - crafting system and here when something
13:18 - changes let's fire off an event
13:27 - all right so here we have our event
13:29 - called on great change and we invoke it
13:31 - when we set the item or modify the
13:33 - amount and now we can go back into our
13:35 - UI and in here when we receive it
13:38 - let's also subscribe to the andrei
13:40 - change event and when that happens then
13:42 - we update our visual okay
13:44 - so all this should be working let's
13:47 - remove these items for testing and see
13:50 - if it's okay here we are in yep our
13:53 - crafting window is empty now let's drag
13:55 - the wood drop it in there and there a
13:57 - giveaway place to win in that position
13:58 - track diamond place it in there and
14:00 - there you go just like that
14:01 - so now we can drag and drop items into
14:03 - correct positions on our grid awesome
14:05 - alright so now that we have the crafting
14:08 - system working so that we can drop
14:09 - things in various positions on the grid
14:11 - now it's finally time to handle making
14:13 - our recipes now there are many ways we
14:15 - can define our recipes we can make it
14:17 - visual or code based or even have an
14:19 - external tool here let's go with the
14:21 - simplest way and then you can expand
14:23 - upon it to fit your own needs here on
14:25 - our crafting system let's define our
14:27 - recipe alright so here we have our stick
14:49 - recipe we essentially create a grid of
14:51 - the same grid size then we simply place
14:54 - the item types required so as you can
14:56 - see it's none on most of them except
14:58 - right here down the middle we have two
14:59 - pieces of wood alright now let's make a
15:02 - function to try to get a recipe output
15:07 - so we settled through all of our recipe
15:10 - positions and see if they match with
15:11 - what's currently on the grid
15:28 - all right so we cycled through our
15:30 - entire grid we compared it against our
15:33 - recipe if the recipe should have an item
15:35 - in this position then we test if it's
15:38 - empty or the item in there is different
15:40 - from the one that should be there then
15:42 - this is an invalid recipe so we return
15:43 - none and if you go through and all of
15:45 - them are valid then we return our steak
15:47 - recipe all right so here's how we're
15:49 - getting our recipes and now in our
15:51 - crafting system let's also make a field
15:53 - for the current output all right so then
16:08 - we have a function to create an output
16:10 - so we test against the recipe if the
16:13 - recipe has no output then the output is
16:14 - no if not then we create a new item for
16:17 - our output
16:17 - all right so whenever we change
16:19 - something in our recipe and let's try to
16:21 - create that so over here when you have
16:23 - the set item we do all this and we try
16:26 - to create our output so now in order to
16:28 - have the UI update let's make a function
16:30 - to get the current output and now we can
16:35 - go back into the yuan and here when we
16:37 - update our vision let's also ask if the
16:40 - crafting system if the get output item
16:42 - is not known then we can create our item
16:46 - output all right so just like this
16:51 - everything should be working and let's
16:53 - test ok so here we are in our crafting
16:55 - system start off empty ok now let's pick
16:58 - up this piece of wood and drop it right
16:59 - down the middle
17:00 - and yet there you go the wood is there
17:02 - but there are still no output so the
17:03 - recipe has two pieces of wood one above
17:06 - the other
17:06 - so now let's drag this one drop it in
17:08 - there and there you go there's our
17:09 - output successfully created alright
17:11 - awesome so over here our recipe is
17:13 - working correctly so now we can take
17:15 - this stick and drop it over here into
17:17 - our inventory and if there it is however
17:20 - you can already see an issue we crushed
17:22 - this stick but essentially didn't have
17:24 - any cost like here we still have five
17:25 - and five so something was crafted but
17:27 - nothing was consumed what's all that
17:29 - so here in our crafting system let's
17:31 - make a function to
17:33 - our recipe items and here what we're
17:38 - going to do is cycle through our entire
17:40 - brand and we're going to remove an
17:44 - amount from each of them all right that
17:49 - you do it so now we need to call this
17:50 - function and now the way that the items
17:53 - work in order to work with various
17:55 - containers is each container has a
17:57 - higher mulder interface here's the
18:00 - moments to remove item add item and can
18:02 - add item so when an item goes from the
18:04 - inventory into the crafting system or
18:07 - the character equipment it gets removed
18:09 - from the atom holder that was holding it
18:11 - so here that is being implemented in the
18:13 - crafting system and it's over here that
18:15 - we know that we removed the output item
18:18 - when that happens we create a new output
18:20 - and when we do then let's consume our
18:22 - recipe items
18:23 - ok so let's test ok so here we are and
18:27 - we have our wood so let's go and drop it
18:29 - in there and there you go stoned our
18:30 - recipe now drop it in there and there
18:32 - you go download recipe we have our stick
18:33 - and if I move it away there you go
18:35 - invalid recipe no stick alright so put
18:37 - it in there there we have our stick no
18:39 - let's pick it up and drop it in the
18:41 - inventory and there you go we have an
18:43 - stick in our inventory and the items
18:45 - were consumed so we have our sick and
18:47 - just four piece of wood now drag another
18:49 - one there we go another stick now we
18:51 - just got three just have to you just
18:52 - have one now drop it and there you go we
18:55 - built five sticks and we no longer have
18:57 - any wood so you consume all of it and we
18:59 - no longer have a valid recipe awesome ok
19:02 - so just like this we have our crafting
19:04 - system pretty much complete let's just
19:06 - set it up to handle multiple recipes so
19:09 - in our crafting system instead of having
19:11 - just one steak recipe let's have a
19:13 - dictionary of recipes ok so we have a
19:18 - dictionary with the key of item type and
19:21 - a value of item type all right
19:28 - okay so we instantiate our dictionary
19:31 - then we create our recipe just like we
19:33 - did and we set it on the dictionary on
19:35 - the key stick alright that should work
19:37 - now down here on to get our recipe
19:39 - output essentially we're going to second
19:41 - through all of our recipes all right so
20:01 - we're cycling through all of our keys in
20:03 - our dictionary then we do the same
20:05 - foundation as previously we have a
20:07 - boolean we start off with true on the
20:09 - complete recipe if we find something
20:10 - that is different then it is not a
20:12 - complete recipe so as we reach down here
20:15 - if it is complete we return this item
20:17 - type if not then we go into the next
20:19 - dictionary recipe and if we go through
20:21 - all of them and we don't have any return
20:23 - then we return none all right so this
20:26 - should be working on exactly the same
20:27 - except working with a dictionary let's
20:29 - just test it out to make sure it's all
20:31 - works okay here we are only track one
20:33 - there and one in there and there you go
20:35 - we have to stick move it to the side and
20:36 - no stick okay so far so good
20:38 - so now I just need to add all the other
20:40 - recipes all right so here are the new
20:50 - recipes to find so for the wooden sword
20:52 - we have a stick down the middle then two
20:54 - wood above it and so none on the other
20:56 - sides and for diamond we have a stick
20:59 - into diamonds okay now let's try them
21:01 - out okay so first of all we have our
21:04 - wood and diamonds so now first we're
21:07 - going to need a stick so much drag they
21:08 - wouldn't there and wouldn't there there
21:10 - you go we have our stick so take out the
21:12 - stick now to make the wooden sword let's
21:15 - what you would above and now a stick
21:17 - below it and there you go we have our
21:19 - wooden sword so let's drag it and pick
21:21 - it up and there we go we have our wooden
21:22 - sword now for the diamond first we need
21:25 - a stick so let's put and pick up another
21:27 - stick now take out the wood and replace
21:30 - it with two diamonds with a stick the
21:32 - knife in and if there you go we have our
21:34 - diamond sword alright so there it is
21:36 - just like this everything is working
21:37 - correctly okay so here's the character
21:40 - equipment sister
21:40 - that was made in a previous video so
21:42 - again let's create our items alright
21:45 - here we have the wooden sword and the
21:47 - damn sword and right now the character
21:49 - doesn't have any sword equipped so we're
21:50 - only attacking with punches and kicks
21:52 - and now let's equip the wooden sword and
21:55 - there you go now he's using the wooden
21:57 - sword and I want to equip the diamond
21:59 - sword and there we go we have the
22:00 - diamond sword alright so here we have
22:02 - our fully functioning crafting system so
22:05 - we start off with some very basic
22:06 - resources then we build some complex
22:09 - items using the crafting window and then
22:11 - we combine those items with a character
22:13 - equipment in order to equip them so
22:15 - again here it is the whole thing working
22:17 - and as you saw the code is very simple
22:18 - so you can easily expand this to fit
22:20 - whatever recipes and items you want this
22:23 - video is made possible thanks to these
22:25 - awesome supporters go to
22:26 - patreon.com/scishow to code monkey to
22:29 - get some perks and help keep the videos
22:30 - free for everyone as long as you can
22:32 - download the project family natales from
22:34 - unicode marcom subscribe to the channel
22:36 - for more unity tutorials post any
22:38 - questions in heaven comments and I'll
22:39 - see you next time
22:41 - [Music]

Cleaned transcript:

in this video we're going to create the crafting system from Minecraft we're going to have our 3x3 we're in position the items according to a recipe and get our output that we can use what's begin hello and welcome I'm your code monkey and this channel is all about helping you learn how to make your own games with enough tutorials made by a professional indie game developer so if you find the video helpful consider subscribing okay so here's what we want to create we have the UI set up in here just like in Minecraft so we have a simple 3x3 grid as well as an output slot then down here is the current inventory where I have a bunch of items this is using the inventory that we made in a previous video then I can drag and drop items which again was also covered in another video and using this I can place items into the crafting window now the crafting works based on recipes those recipes are based on specific items being placed in specific positions in the crafting grid for example I place the wood right down the middle now just like this there's nothing on the output since this is not a valid recipe however now I can place this wood on the position right beneath it and there you go now we have a vellum recipe to output a stick so this is the recipe that we define in order to make a stick we have two pieces of wood one there and one in there now when I grab the stick and drop it in my inventory there you go over the piece of wood were consumed so the entire recipe has its cost and now another recipe is putting two pieces of wood on the top the other with a stick underneath it and there you go we have a wooden sword and if I now make another stick and then take these two out place the stick in there and the two diamonds on top and there you go now we have a diamond sword so here we have our fully functioning crafting system and now here on the side we also have the player equipment window this was also made in a previous video so right now my character is only attacking using punches and kicks however now I can drag and equip the wooden sword and there you go now he's using a wooden sword and I can take it out to replace it with the diamond sword that we crafted and there you go now we have this nice sword so over here you can see a whole nice ecosystem built from a bunch of separate systems so we have our inventory then we drag and drop items to place them into the crafting system the crafting system receives items and according to a recipe makes something and then we can take our crafting items and equip them into our character everything is written in a clear way so it is very easy to add more recipes and more items this video is made possible thanks to these awesome supporters go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone alright so this is our goal let's get to it okay so here's our starring scene I have my player character that I can move around and I can attack over here is the inventory and the equip you want right now there's nothing where you can equip so let's craft some items let's begin by making our crafting system script so we make a new script and code our crafting system now in here and let's get rid of mana behavior since we're not going to be using these functions instead let's make a simple constructor so in crafting system okay and now let's see how we're going to represent our grid for example we could use the grid system we created previously if I was making this system to use in one of my games that's exactly what I would do however in order to keep this video simple let's make a simple basic array in step so up here we make an array so we're going to have a private it's going to be of type item so an item array and call it our item array the atom class is in here this is the class that we created when we made the inventory system so make sure you watch that video so here we have our atom array however it's going to be a multidimensional array and now on the constructor we're going to initialize it and for the size let's define a constant so we have our grid size and we initialize alright alright so here we have our 3x3 crafting grid now let's make some helper functions to help work with this grid all right so here we have a bunch of functions to interact with our crafting system grid so you can ask if a certain position is empty we can get the item in that position certain item in that position increase the item amount decrease it remove an item and try to add an item so you first test if it's empty then we set the item if it's not empty then we test if it's the same type if so we increase the item amount and if not then we cannot add it so we should have pretty much all the actions we're going to need to implement with our crafting system now let's test this out so let's go back into the editor here we already have a testing game object with a testing script this is where we're making the connection between the player and the UI inventory and the character equipment and the UI character equipment now here let's construct a crafting system then let's create a new item so we have a new item and then we go into the crafting system and let's set the item and finally we do a debug log on the gift item on this position and now it's s and we should be able to see this time and located on the item on the zero zero position here we are any of the consumed essay we have a diamond placed on the zero zero position awesome so we have set up the basic logic for our cutting system now let's make our UI visual so here in the canvas let's build it so we make our game object call it our UI crafting system all right so here we have our crafting system UI we just have a simple background then we have a output slot here on the right and our 3x3 grid of input slots as you can see they are all named 0 0 1 0 2 0 and so on and then on top we have an item container in this item container is where we're going to in Senshi 8 the items that are placed on the grid okay so now let's handle the code let's make a new script for our UI like crafting system and we drag it in there okay now in here let's make a grid and locate all of our grid positions all right so here we have our references for all the various slots as well as the output slot now let's make a function to be able to spawn an item on a grid position so here we're going to instantiate that prefab so let's add a film for that reference and back in the editor we drag it okay alright so we have a function to create an item we instantiate our prefab wien located right on top of the slot transform position and we simply call the function to set the item okay so just like this we can now create an item on any position in our grid and now let's also make one to create an item on the output and just like that okay so now let's test it out let's go up here and let's create some items all right so we should be able to see a diamond a piece of wood and a sword made of wood let's see any of there we have our items correctly placed in our grid so we got a diamond there wooden there and a sword in there all right awesome and again since we're using the prefab that we made previously we can simply grab and drag and drop these items all right so far so good now my 10 on being able to take an item and drop it on to the crafting window so first let's make a script out to our slots that won't handle the item drop so here we make a new C sharp script color our UI crafting items like and let's write the script onto every single one of our Smuts so crafting Adam son yep right now in here we're going to do just like we did on the equip inventory video so check that out if you haven't seen it yet essentially we're going to capture the eye drop an alert event so inside unity engine dot event systems so here is the script that we made in the character equipments what now we could probably make this more generic and use it for both scenarios but in this case let's just copy face the same code so we're going to have the same behavior alright so on drop we're simply going to fire off an event okay there it is very simple now let's go back into the main UI script and now in here we need to know on which word position we dropped an item so in here for example we could subscribe individually to every single item slot however that would result in a ton of duplication code so instead of let's use a single event but we're going to pass in the X&Y into our slot so first let's go into our slot script and in here let's receive the X and the y okay we have this function test them and now over here on our item drop event Rx and let's add some more so let's set a min for the X and then for the Y okay so we now have this event being fired and it also tells us the X&Y and now we can go back into our crafting system and in here we can go into our slot transform array we get the component of type UI crafting slot and in there we subscribe to the on item dropped event all right so anytime we drop something into any slot it will fire off this event and over here we have the Adam dropped event args so this contains the X and the y and here just for testing let's do a simple debug log and we also need to call the set X Y function so in here alright so we can't set X Y we subscribe to the event then on the event we do a debug log which shows the item the X and one alright let's test ok here we are let's pick up this diamond and drop it in there and if there you go it says we dropped an item on position to zero which is indeed that one now drop a piece of wood in there and there your wood alright so we have everything working correctly awesome now that we have the visuals working let's interact with the crafting system so we're here on our UI script let's have a function to receive our crafting system all right we just set it like this and now we can go back into our testing script and here we can make our connections so we first make the crafting system now let's make a sterilized feel for our UI crafting system and we concept and we trust in our crafting system all right so now we have the UI being aware of the crafting system and now over here when we capture any dropped let's tell the crafting system to try to add that item into that position so we can use the function that we made previously try add item and we pass in the edot item into this X and one alright so just like this it should be working try to add an item into our crafting system on a specific position however if we do just like this then we won't actually see anything so we need to update our visual let's make that function in order to update first let's destroy everything in our item container which is where we're spawning our items all right so first we clear off all the old items then we cycle through our entire grid we ask the crafting system if it's not empty if not then we create an item on EDX that Y and we pass in the item that is currently in there all right so this function should be working for updating our visual let's come out when we set the crafting system and now we also want to call it whenever something changes so we need to be notified of that so let's go into our crafting system and here when something changes let's fire off an event all right so here we have our event called on great change and we invoke it when we set the item or modify the amount and now we can go back into our UI and in here when we receive it let's also subscribe to the andrei change event and when that happens then we update our visual okay so all this should be working let's remove these items for testing and see if it's okay here we are in yep our crafting window is empty now let's drag the wood drop it in there and there a giveaway place to win in that position track diamond place it in there and there you go just like that so now we can drag and drop items into correct positions on our grid awesome alright so now that we have the crafting system working so that we can drop things in various positions on the grid now it's finally time to handle making our recipes now there are many ways we can define our recipes we can make it visual or code based or even have an external tool here let's go with the simplest way and then you can expand upon it to fit your own needs here on our crafting system let's define our recipe alright so here we have our stick recipe we essentially create a grid of the same grid size then we simply place the item types required so as you can see it's none on most of them except right here down the middle we have two pieces of wood alright now let's make a function to try to get a recipe output so we settled through all of our recipe positions and see if they match with what's currently on the grid all right so we cycled through our entire grid we compared it against our recipe if the recipe should have an item in this position then we test if it's empty or the item in there is different from the one that should be there then this is an invalid recipe so we return none and if you go through and all of them are valid then we return our steak recipe all right so here's how we're getting our recipes and now in our crafting system let's also make a field for the current output all right so then we have a function to create an output so we test against the recipe if the recipe has no output then the output is no if not then we create a new item for our output all right so whenever we change something in our recipe and let's try to create that so over here when you have the set item we do all this and we try to create our output so now in order to have the UI update let's make a function to get the current output and now we can go back into the yuan and here when we update our vision let's also ask if the crafting system if the get output item is not known then we can create our item output all right so just like this everything should be working and let's test ok so here we are in our crafting system start off empty ok now let's pick up this piece of wood and drop it right down the middle and yet there you go the wood is there but there are still no output so the recipe has two pieces of wood one above the other so now let's drag this one drop it in there and there you go there's our output successfully created alright awesome so over here our recipe is working correctly so now we can take this stick and drop it over here into our inventory and if there it is however you can already see an issue we crushed this stick but essentially didn't have any cost like here we still have five and five so something was crafted but nothing was consumed what's all that so here in our crafting system let's make a function to our recipe items and here what we're going to do is cycle through our entire brand and we're going to remove an amount from each of them all right that you do it so now we need to call this function and now the way that the items work in order to work with various containers is each container has a higher mulder interface here's the moments to remove item add item and can add item so when an item goes from the inventory into the crafting system or the character equipment it gets removed from the atom holder that was holding it so here that is being implemented in the crafting system and it's over here that we know that we removed the output item when that happens we create a new output and when we do then let's consume our recipe items ok so let's test ok so here we are and we have our wood so let's go and drop it in there and there you go stoned our recipe now drop it in there and there you go download recipe we have our stick and if I move it away there you go invalid recipe no stick alright so put it in there there we have our stick no let's pick it up and drop it in the inventory and there you go we have an stick in our inventory and the items were consumed so we have our sick and just four piece of wood now drag another one there we go another stick now we just got three just have to you just have one now drop it and there you go we built five sticks and we no longer have any wood so you consume all of it and we no longer have a valid recipe awesome ok so just like this we have our crafting system pretty much complete let's just set it up to handle multiple recipes so in our crafting system instead of having just one steak recipe let's have a dictionary of recipes ok so we have a dictionary with the key of item type and a value of item type all right okay so we instantiate our dictionary then we create our recipe just like we did and we set it on the dictionary on the key stick alright that should work now down here on to get our recipe output essentially we're going to second through all of our recipes all right so we're cycling through all of our keys in our dictionary then we do the same foundation as previously we have a boolean we start off with true on the complete recipe if we find something that is different then it is not a complete recipe so as we reach down here if it is complete we return this item type if not then we go into the next dictionary recipe and if we go through all of them and we don't have any return then we return none all right so this should be working on exactly the same except working with a dictionary let's just test it out to make sure it's all works okay here we are only track one there and one in there and there you go we have to stick move it to the side and no stick okay so far so good so now I just need to add all the other recipes all right so here are the new recipes to find so for the wooden sword we have a stick down the middle then two wood above it and so none on the other sides and for diamond we have a stick into diamonds okay now let's try them out okay so first of all we have our wood and diamonds so now first we're going to need a stick so much drag they wouldn't there and wouldn't there there you go we have our stick so take out the stick now to make the wooden sword let's what you would above and now a stick below it and there you go we have our wooden sword so let's drag it and pick it up and there we go we have our wooden sword now for the diamond first we need a stick so let's put and pick up another stick now take out the wood and replace it with two diamonds with a stick the knife in and if there you go we have our diamond sword alright so there it is just like this everything is working correctly okay so here's the character equipment sister that was made in a previous video so again let's create our items alright here we have the wooden sword and the damn sword and right now the character doesn't have any sword equipped so we're only attacking with punches and kicks and now let's equip the wooden sword and there you go now he's using the wooden sword and I want to equip the diamond sword and there we go we have the diamond sword alright so here we have our fully functioning crafting system so we start off with some very basic resources then we build some complex items using the crafting window and then we combine those items with a character equipment in order to equip them so again here it is the whole thing working and as you saw the code is very simple so you can easily expand this to fit whatever recipes and items you want this video is made possible thanks to these awesome supporters go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone as long as you can download the project family natales from unicode marcom subscribe to the channel for more unity tutorials post any questions in heaven comments and I'll see you next time
