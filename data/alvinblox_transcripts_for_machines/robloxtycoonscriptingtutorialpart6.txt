okay in this part we're going to learn how to create buttons that can only be unlocked once another item is purchased so for example if we want the player to firstly buy the conveyor and then once they've bought the conveyor the button for the dropper then appears okay rather than every single button being visible when the player first joins so to do this uh there's a few ways and I'm sure there's you know per L acceptable ways of doing this um but the way I've decided to do it is for every button if you want it to uh then unlock some other buttons once you've purchased the item we're going to create an attribute for it so I'm going to create a string we're going to call it item IDs um to appear once bought okay and then I'm just going to put the IDS of the items that I want to um appear when they've purchased this item so let's say they want to unlock they want to make the The Dropper appear okay so it doesn't mean they're going to buy the dropper it just means the dropper becomes purchasable so that has an IDE of two so we're going to change the item IDs to appear once bought to two now we set this to be a string okay um we didn't set it to be a number so whilst we have a number here it's actually a string okay and and this is because you might want to have multiple item IDs right so let's say we wanted to have items 2 3 4 and five um appear once we've bought them we can do this because it's a string uh so it's essentially text it's not actually a number this is just some text uh however you can see the ID of item to unlock is a number if we try to give it multiple values it won't let us so um the the reason I I've made this a string is so that we can allow multiple items to then be visible or purchasable once this stter well this this conveyor has been has been uh unlocked and what we'll do is we'll write some code which will uh extract the numbers from this string and we can make them all appear so what we now want to do is we want to go to our code and when this item is unlocked we're going to want to um individually make the buttons appear so in the plot Handler around line 79 where we've got the button do touched we want to scroll down past the point where we know that they can afford the item and what we want to do is we then want to see if the button has an item IDs to appear once bought attribute so we can say local item IDs to appear once bought equals uh button get get attribute item IDs to appear once bought like this okay and then we can see you can check to see if that actually exists because it might not exist we might not have set an attribute for that button so if item IDs to appear once bought then we want to take this string and we want to turn it into the individual numbers because this is just one string right now we want to get these four numbers or however many numbers there are from this string so we're going to say um local numbers so always say local item IDs to uh item IDs equals uh string dot uh split okay and this is going to split the string up into pieces so we can get the individual numbers so item IDs to appear once bought that's our string and then we tell the game what the separator is and the separator is the character in between the numbers you in our case it's commas okay cuz we've got 2 comma 3 comma 4 comma 5 so we're basically saying where there's a comma in this string split it up and so that we can get the individual character that's to the left or to the right of it in that case the numbers whether that's number two number three number four or number five so if we put our comma in here in uh in as a string by using the quote marks or speech marks we can then this will now be the table of our numbers so it will look something like this 2 3 4 5 but because this is a table we can then get the individual numbers from it by indexing that table so we want to Loop through this table so for underscore comma uh Item ID in item IDs do we now have the individual item ID number so we will Loop through and we will do it for two three four and five so what we want to do is we want to firstly get the item uh in the template items uh by its ID sorry I mean get the button okay um so local uh we can just call it local button I am wary that we have gotten a variable already called button here um but since this is nested within our for Loop it will only apply to this for Loop so it's okay so button equals uh we want to find the button in the buttons folder here in the workspace that has the ID of item to unlock so what we're actually going to do is I'm going to create another function like we did earlier which just like these ones which will let us do an action like this without having to Nest that code in this for Loop here so I'm going to call the function get button by ID of item to unlock okay and I'm going to pass that item ID to our function and we will we will code the function to return the button object to this variable so let's just copy the name of this function and go to the top of our script and we're going to create a local function and we're going to call it the same get button by ID of item to unlock now we're also going to need to pass the player and the item ID so let's go back down and let's just pass the player as well to this function because this function is outside of our um create plot event which passes the player so we have to keep a reference to that player so that we can access that player from this function so that's why we pass it to this function and so what we're going to do is we're going to Loop through this player's plot so we're firstly going to want to get their plot so I'm just going to move this function below the get plot function um and then I'm going to call it so local plot equals get plot player if not plot then return end because we obviously don't want to carry on if there's no plot for some reason this is just like a fail safe now we can Loop through the buttons folder in that plot so for underscore comma button in plot. buttons colon get children do if button get attributes ID of item to unlock lock um in fact we will create a variable for this local ID of item to unlock if ID of item to unlock we just need to make sure it exists just in case you forgotten to set up this attribute it would be nil and it would then cause an error so um we can actually say if not uh ID of item to unlock then continue end and that will just move on to the next button in the loop uh by this point we know that the the attribute exists so we can say uh if item id uh is equal to ID of item to unlock then return button end okay and I'm going to actually put this onto another line just to make it more readable so this is going to return the button and if there is no button it won't return anything at all so we can now go back down to our code and uh where is it here it is so we now have the button but let's just make sure it exists so if not button then continue end and then by this point we know that the button exists uh we have now found the button so we want to make it visible now it's it's going to be visible already because we haven't actually written any code that hides it so I think we should do that first um so let's figure out how we should hide this button now there's two ways we can do this um the first method which is the easier method is we just add an attribute to every button that we want to only appear once another button has been uh touched and we can just add an attribute to that to say hidden and then when the game first loads it will hide all of those buttons the other option is we Loop through every single button and we see if it is listed in another button uh in the item IDs to appear once bought uh string however that would mean if you have a lot of items it's going to be looping over every single item and it might might cause some performance issues so that's the way I see it some people in the comments might have their own um you know view so personally what I'm going to do is I'm just going to choose the buttons I don't want to appear by default when the Tycoon loads and I'm just going to add a Ulan attribute okay and I'm going to call it hidden and I'm going to click save I'm going to make it true now some people would argue that having to set another attribute is just another thing you have to remember to do and that's true however I think for this Tycoon and for this series it's the simplest method of doing it so there's no right or wrong answer this will work either way I just wanted to explain myself so what we can now do now that we've set up this hidden attribute in the button is when we load in our buttons in the plot Handler around line 86 we want to firstly check to see if this is hidden so we can say if button get attribute hidden then uh we want to hide the button so button. transparency equals 1 and we also don't want it to um unlock the item when you touch it because you can still obviously touch it when it is hidden so firstly we're going to say button. canide equals false and then in the button. touched event we want to say if button get attribute hidden then return end okay because if it is hidden if it is true then it will just end the event there so let's just uh also we're going to need to hide the items as well so we've hidden the button we we just now need to hide the uh items I believe uh or actually that might be done um by itself right because we haven't actually touch T that button yet so I think we're good there um so I think let's just let's just um go back to our conveyor button and let's change the item IDs to appear once bought I only want to unlock the dropper so the dropper has id2 so we're just going to change this value to two because obviously we don't have any any other items with the IDS of four or five yet so you've set this to be two so that when this button the the conveyor is pressed then the item IDs to appear once bought are going to be two and that is the dropper so the dropper is going The Dropper button is going to appear when we've stepped on the conveyor button and we've bought the conveyor anyway Let's uh just um check this out now what I'm also going to do is I'm going to just um in my uh no I'm not going to do that actually I'm just going to click on play now if you're like me and you've tested the game a few times and you realize you can't go back to the start because you've unlocked everything let me show you how to solve that because that's what I've just realized so you want to go and get the data store editor now I think it costs 100 Robo so if you don't want to pay for it you just want to change player data sorry um do something else so you might want to change it to player data too if you do that it's going to reset every player's data okay so if you want to get the old data back just change it to what it originally was called but like I'm saying the better way to do it is to use the data store editor plugin which we talked about in the last uh episode so you click on it and then you I'm just going to drag it to fill up the whole screen right and then you type in your name of your data store which is in that script so it was called player data for me and then you put player and then the user ID which is the format we set it up in the data script player underscore and then the user ID so in my case it's player1 49430 69 which is my user id you click on data you don't even have to click on data you can just uh click on the delete and click on delete and that will delete my data for that slot so it only affects me if you had other players in your game wouldn't affect them obviously cuz it's just deleting my data my specific user ID so now we're back uh let's walk over and going to need to give myself some cash so whilst I'm walking over I'm going to switch to server mode by clicking on current client going to go to the properties sorry go to the Explorer find my player find my leader stats go to my cache I'm going to set it to 500 and go back to current client mode I walk over here and you can see that the dropper button is not there although the text above it is and that's cuz we just forgot to turn that off um but I can walk over it technically sorry you can't see that I just realized technically uh you can see the the text is there but the button isn't but the button is still there like if I get the uh select tool out and hold down uh alt you'll see it's here um the button is here I can step on it whatever it's just not working because it's set to be transparent and in the properties panel you can see that the hidden property is true now let me just walk over I'm going to try and keep it in view okay um you can't see my character but if you just watch closely I'm about to step on the conveyor button which is right here if you watch this hidden attribute I just step on it okay I've bought the conveyor uh however the uh dropper button is still not appearing so let's go and fix that so firstly let's fix the text appearing above the button so we go to the plot Handler we go to the if statement here where we set the transparency and we're just going to say uh button. billboard gy. enabled equals false okay so that's the first part done secondly we need to set the buttons hidden attribute to be false when the player buys an item so we'll just scroll down here to the item IDs to appear once bought this is where we left it right we left it here uh because we had a comment that we wanted to make the button visible so we can now say button. transparency equals z button. billboard GUI enabled equals true and button. can cide equals true uh and also button set attributes hidden and we can just set this to nil uh and that should just remove it I believe uh or you could set it to false it doesn't really matter I think nil will just remove it um so let's uh I think that's all good so what we're going to want to do is we're going to want to go back to the plugins data store editor and then we're going to put in my data player data uh and then player uncore 14943 069 and then I'm just going to delete the items table because I want to keep my cash at 450 I don't want to have to bother with you know setting my cash again on the server and all that um so if we go back and click on play and we're just going have to walk over again this time you can see that the text above the billboard is gone of the button that was hidden so that's a good thing um and hopefully when we step on this button if we just go back to have a look at our button which is hidden over there you have a look at the hidden property you just watch this hidden property when I step on the button okay I'm going step on it uh it is still true for some reason hm okay um well we're going to have to look into that so for some reason the dropper button is still um true and I I have a feeling this might be because the when we do the string dos split on the item IDs these are still strings aren't they um they're not numbers and we are sending this uh Item ID to our function but this item ID is still technically a string because it was a string when we set it in the item IDs to appear once bought we only just split it up so that we had um separated the IDS but they were they're still strings so let's see what happens if we change these to be a string we say item id equals two number item id this will change it from a string to a number so let's go back let's go back to the data store editor just look up my player data player1 14943 069 and this is really uh what debugging is about like you know it only took me a couple of seconds to realize what the problem was here but for you watching this video you might have been stuck on this problem for a very long time it might have even driven you to give up because it's not something you can just see it's something you have to know because you have to think uh logically and you have to think about the reasons why something might be going wrong and all of the underlying causes um which is a key skill in programming really so that's why I leave these sort of problems in the video uh and you can see if you just missed that I stepped on the conveyor and uh The Dropper button has now uh appeared which means it is working um which is perfect so if we now step on the dropper we can purchase that and uh there we go we've just managed to set up uh buttons which uh unlock themselves uh once you've uh unlocked another button which is uh really cool so let's just click on stop and let's load our plot one more time just to make sure everything's going well and there you go it all seems to be working perfectly so uh there you go that's how you add a set of buttons that keep on unlocking other buttons all you have to do is just add the hidden attribute uh uh to the to the button that you want to hide and then on the button which you want to um step on to unlock more items you add the item IDs to appear once bought make sure it's a string uh that way you can set it to unlock multiple items uh and we can test this actually uh if we change this to two and comma 1 so it also unlocks the painting and then we add the uh hidden you have to add the hidden billboard as well attribute to the item as well uh that you want to hide um we can try this one last time just going to reset my data layer data layer 14943 069 delete delete uh and if you don't know what your Roblox user ID is go to your Roblox profile and it will appear in the URL alternatively you can just go to players choose your player and it's right here character appearance ID so that's how you find it it's worth memorizing I know mine off by heart uh and if you're a developer you probably also know yours uh so we'll just give ourselves some cash on the server and you can notice that the painting button is also gone um so what should happen is when we step on the uh conveyor uh it should appear both the dropper and the um both the dropper and the painting now I also want to test one more thing which is now that we've unlocked the buttons uh if we leave and rejoin are they going to still be there now I have a hunch that they won't no they are gone and this is a flaw so this would break the game because if you have unlocked the buttons but you've not unlocked the items they are gone for good so how are we going to solve this well really we just need to take this code that we've written already which will unlock the items when you step on the button and up here when we load in all of the buttons we have this if statement that checks to see if the item's already been unlocked and we just continue if that's the case however just before the continue I think if we paste this here uh it should just load the buttons so I want to test this let's just see if this works because this would be a really quick fix if that is the case so let's click on the play button and see what happens okay we have an error which says buttons is not a valid member of part let's have a look into that that so line 18 uh line 18 line 95 um apologies I also just realized you couldn't see what I just uh typed in but all I did was I went and took this code which is here um for the item IDs to appear once sport I've copied it and I've just pasted it up here so apologies about that um so yeah so we have a problem on line 18 here let's go to line 18 line 18 okay uh plot do buttons buttons is not a valid member of plot one uh okay uh plots buttons so there should be a but so ah it's because I think the uh buttons folder is not yet in the plot um okay yeah so let's take this code and we'll just remove it so it was as you were you don't have to worry about changing any of this um but I'm just going to take that code I'm going to wait until we've looped through all of the buttons and I'm going to do another loop uh once the buttons folder has been added to the plot I'm going to say 4core button in template buttons get children do I'm going to paste uh I'm going going to um hold on I'm going to take this again this uh condition which checks to see if um the items ID of the buttons item id of item to unlock is in the item ID's table which means they own the button and they've unlocked it and then this will um make they should make the items appear that are in the buttons ID of items to appear once bought it should make them appear just like we do at this part of the script when you tap on the button so let's click on play again and okay there we go so it seems to be working now uh the items are indeed the buttons are indeed appearing last time they weren't so that seems to be working just fine and we will try it one more time from a new save just to be completely sure it's always good to test make sure everything is working so plugins data store editor and then player data and then player1 14943 069 we're just going to remove the items table and click on Save we'll rejoin I'm going to click on play here just to teleport me straight to the plot and there we go so we now going to walk over and the only button that appears is of course the starter item but we now have our other two buttons appearing going to click on stop and then going to rejoin just to make sure it's all good it's all working and there we go all good seems to be working I'm going to leave again play one more time so this time the painting should load the conveyor should load and the dropper button should load but the dropper shouldn't be there and it all seems to be working perfectly fine so that was how to add um extra buttons which appear once you've unlocked an item I know we haven't added the um the item name yet to the uh to the uh billboard GUI uh but we'll we'll get to that I mean I'll show you I'll show you how to do it right now um all you need to say is button billboard GUI dot text label. text equals um uh uh get item from template plot um button get attributes ID of item to unlock do name or empty string just in case it doesn't exist and then if you click on play here ah I've just realized all of my buttons I've been purchased um so I'm going to have to reset my data one more time I will just speed up the video for this part okay I've just reset my data and I'm going to join the game and there you go it now has the name of the item above the button so it says conveyor I purchase the conveyor and then suddenly The Dropper appear appears and then the painting appears perfect so there you go that was how to add sub buttons into your Tycoon I hope it was useful if it was please like Please Subscribe share the video and I'll see you in the next one