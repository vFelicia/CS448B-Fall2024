okay so last time we set up our plots for our Tycoon and we successfully managed to give a specific plot to a player who joined the game uh so now we need to give the player the ability to buy stuff uh and that's usually done by buttons so I'm going to show you how to do that in this video so firstly we're going to need a button uh and we're keeping things quite simple in this series so I'm just going to insert a part to be our template button okay I'm going to make it red and I'm going to make it slightly squared like this okay as long as you've got a part it's fine it's no real um issue what whatever it looks like so I'm just going to use this okay and uh I'm just going to call it a button okay now some of you might have a button which is a model it's going to vary of course um but I'll show you how we can work with models or or other sort of types of Parts later on but for now I'm I'm just going to use a simple button so I'm going to go to the properties panel and I'm going to make sure that it is anchored okay and make sure that can Collide is also true doesn't really matter but it will just give you that nice satisfying effect when you walk on the button and you step on it uh and once that's done then that's pretty much it um the only thing we're going to have to do is give it a tag down here in the tags area so click on the plus and just type button okay so that is all good next thing we want to do is we want to put it in a special place so I'm just going to put it over here okay and this is going to be the button that buys the very first thing in our Tycoon but what is it going to buy like we need to tell the player what they're going to get if they step on this button so we're going to click on the and I remember you just couldn't see what I just where it just dragged it to my apologies um I've just dragged it to the the corner of my base plate but to make some text on the button to show what they buying we need to go into the Explorer panel click on our button click on the little plus sign and we're going to choose a billboard GUI okay and then inside this billboard GUI we want to insert a text label now you might not see anything appear That's okay what we need to do is we need to go to the Ador property of the billboard GUI and we need to set it to the button firstly uh and then we need to change the SI so I'm going to change it to 1 comma 0a 1 comma 0 and now we can start to see it sort of appear um but this is slightly too small so I'm going to just set it to 3 comma 0 comma 3 comma 0 uh and this is sort of getting somewhere um again I'll just zoom out so you can see and I'm just going to zoom back in now to the properties uh panel because we're going to be working here for a little bit of time so don't really worry if you can can't see what's going on um so I'm going to now set the light influence to zero and what this does is it makes it easier to see right it makes it brighter essentially so light influence down to zero and then I'm going to go to my text label inside the Billard GUI and I'm going to set the size property to 1 comma 0 comma 1 comma 0 and this is going to make it fill the entire of the billboard GUI we can now set the background transparency to one and that is going to make the background go away and then I'm going to scroll down in the properties window and I'm going to set text scaled to be checked that will make the text bigger we can't see the text just now but we'll get on to that in a moment uh and then uh yeah let's just give it some text so we can just say um stter item for example and you can see it's going into the button so we can again fix that I'm going to change the size of the billboard GUI so I've selected the billboard GUI and I'm going to set the size from 3030 to 30 one Z okay and you can see it's just disappeared again slightly that's okay we're going to change the studs offset World space to 0 comma 3 comma 0 and this has moved the text upwards all right so now we can see what our button is going to give us but again I'm not a huge fan of this um font or this color so I'm going to set the text color 3 to White I'm going to set the font face to fredoka 1 and I'm going to insert into my text label a UI stroke okay so I've inserted my UI stroke and I'm going to set the thickness I mean you can set it to whatever you want like there's no there's no right or wrong here um you might see that it's it cuts off here so when I'm going to do is I'm going to go to the text label and I'm going to change the size rather from the first value being one I'm going to set it to 0.95 so it covers 95% of the scale rather than 100% then I'm going to set the position first value to 0.5 and then I'm going to set the Anchor Point to.5 comma 0 okay and that should sort that issue out uh again I'm not a huge fan of this uh Black Background so I'm just going to change this to a uh let's go with a let's go with a red right because we've got a red button uh and then yeah that's it really we've Now set up our button um and yeah it's good to go there's there's not much else to do here uh so now we actually need to make it work how are we going to do that well firstly we need an item that they can buy so I'm just going to head straight to the toolbox and I'm going to pull something out of free models just to test M with um let's go with um let's go with this missing Noob poster now obviously you got to be careful when you're taking things from the toolbox you never know what could be inside of them um this is just for testing though so you could always just make a part of your own so let's say this button will unlock this poster okay first thing you want to do is you want to position your poster or your item wherever you want it to be so when the player presses the button where do you want this to appear it doesn't have to be necessarily near the button but you know you just got to think about placement so let's say it's going to go on the wall like let's say we have a wall here and this is the ideal place that's fine uh but we now have an item so we need to somehow connect this item to this button so that when we step on this button the game knows ah okay you stepped on this specific button therefore we're going to unlock this specific item and a great way to do this is by having um an identifier system also known as an ID so you give every single item in your game a specific ID and then in every single button you can then um set an attribute just like we did with the plots to say okay you step on this button uh we have saved we've we've logged the ID of the item for this button so now that you've stepped on it we're just going to load it so the first thing to obviously do is set an attribute of this item of this poster so select it in the Explorer then go to the properties and under the attributes section click on the plus a popup will appear saying add attribute we want it to be a um we want it to be a number it could be a string but for this video series we're going to make it a number and I'm going to set it to one okay so so since this is the first item it's going to have an IDE of one if you add another item this is really important if you add another item to your game it will be two and then the next one will be three four five 6 7 it's it's really important you don't have two items with the same ID they don't necessarily have to be going in um in order as well like they don't have to go be going up by one every time like the the next item I insert could be 100 as its ID as long as it's unique uh and I say unique because it it it can only be it can only have that one ID like there can only be one ID for every item if you have two items that have the same ID it completely defeats the point because the the idea is that you have a completely unique identifier so you know exactly what you're going to unlock when you step on the button so I've just realized I've done this wrong by the way I've I've named the attribute as as one uh and you need to name it as um ID so click on the rename I'm I'm just going to delete it and do it again so you click on the the Plus for the attribute and then this comes up saying add attribute you want to call it ID right the name should be ID and then the type should be number so I've got a capital I and a lowercase D um that's just how I'm going to format it and the type should be number once you've done that you then set the value of the attribute to one okay and for the next item it would be two three 100 a th000 whatever as long as every single item has a different ID that's just what I'm trying to um get across to you so now that we've set the ID of the actual item we now need to set a value in this sorry an attribute in the button to let it know which item we want to unlock so I'm going to add another attribute in the button make sure the button is selected then go to the properties window and click on the plus add attribute we're going to name this ID of item to unlock okay I formatted it like this with a capital I for ID o for of I for item t for two and U for unlock you get the idea and this is also going to be a number so because I want this button to unlock my poster and the poster has an ID of one I want my ID of item to unlock attribute for the button to also be one and now we've told the game that when we step on this we want to unlock this although we haven't actually done it yet because we need to just do this final part in code so if I go back here and I go to my plot Handler um in fact let's have a look what we've got at the moment so we've got our plot Handler um I'm just thinking on my feet and I'm going to create a separate script I'm going to create another script in server script service um let me just go whoops me go here going to click on plus icon going to click on our script going to go back and what we want to do is we want to get all of the buttons we're just going to do a brief outline of what we want to code so we want to get all of the buttons in the game and when you step on each button we want to unlock the item now at the moment we we don't have we only have one button um we need to make this button appear on a player's plot when they are given a plot because obviously this button is only on one plot for now so what I'm going to do is I'm going to um yeah this this is I'm just thinking here so what we want to do is we want to put this uh button um on a player's plot when they uh are given a plot because at the moment we just set the attribute so what I'm going to do is I'm going to take this specific plot um that we're working on at the moment and I'm going to just call it a template plot for now okay and then I'm going to take our button and our model and I'm just going to drag them inside the template plot and then I'm going to create a folder I'm going to create two folders I'm going to create one folder inside this and I'm going to call it buttons and I'm going to create another folder and I'm going to call it items I'm going to drag my model into items and I'm going to drag my button into the buttons and then uh I'm I'm going to drag this outside of the plots folder because it's no longer a plot it's it's a template plot um so I'm just going to move this over here this is just going to be like our our working area where we can design our Tycoon and then um we can just put another plot in its place here okay so so this is now like our working area where we design the Tycoon we put all of the items in place and then what we'll do is when a player joins the game and is given a plot we will um basically clone this and put it you know where everything should be okay but we'll get onto that later um in fact we'll get onto it now so we're going to go into our plot Handler and when we give the player their specific plot uh we want to um we want we want to load the buttons right so um what we'll do is we will go back to our plot Handler and we will say load buttons so what we'll do is we want to firstly get the template plot so local template plot equals game. workspace template plot and then on once we have got the template plot we're going to get the buttons out of the template plot so local buttons so template buttons equals template plot do buttons clone okay and template buttons do parent equals plot so we're cloning out the buttons from the template plot and we're putting them into the new plot that we've just given to the player now only problem is these buttons are going to be over here right say the player is given this plot over there well the buttons are going to be cloned but they're still going to be in this location so how do we move the buttons from here to over here if they're on this plot or what if they're on this plot or this plot or this plot but what we need to do is we need to get the position of the button relative to this plot first so if we were to say okay how far away is this button from the center of the plot and it would probably be something like okay 20 studs in this direction and 30 studs in this direction and then what we can do is we can then take that value all those coordinates and we can say okay well we now want to have it on this plot so we're going to take the center of this plot and we're going to put that specific button 20 studs away on this axis and 30 studs away on this axis so it puts it in the in the same position but just relative to a different plot so to do this we need to go to the plot Handler and we're going to say just before the parenting we're going to go for underscore comma button in template buttons get children do what we want to do is we want to get the position get the position of the button relative to the template plot so this is just another way of saying how far away is the button from the center of the template plot right it could be like 20 stud by 30 studs and to do this we will say uh template plot do cframe to object space and yes you need a lowercase T although it doesn't really matter you could do either like this um button dot button. cframe now here's the thing if you had if your button is a model if it's not if so it could it could either be a part or a model but if it's a if it's a part like me you say button. cframe if it's a model you say button colon get pivot with a pair of brackets okay so you do this if it's a model if it's if it's just a part you say button. cframe that's what I was alluding to earlier so we we've got the relative C frame so so relative C frame is the difference between the center of the template plot and where it currently is so it could be 20 studs by 30 studs it's just telling how far away it is from the center and once we know this we can then say button do cframe uh equals um let me just think here plot to World space relative cframe now again if your button is a part you say button. cframe if your button is a model you say button colon Set uh you say pivot 2 and then you put the C frame in Brackets like this so this is for model if it's a part you say button. cframe equals plot to World space relative CF frame now let's see if this works because sometimes it can get confusing and it doesn't work so let's just click on play and see what happens uh okay two World space is not a valid member of part that's because I forgot to say part. cframe so plot. cframe C on to World space okay and click on play again the plot has been given to Alvin blocks so and there's a button over here so this is surely my plot yep there it is so the button is there it's in the exact same place as it is on the other um plots and now um we just need to make it so that when you step on the button it makes the object appear so we're not going to worry about checking if you have enough money just yet but what we'll do is we'll say button. touched colon connect function hit hit is going to be the thing that touched the button firstly we want to check to make sure it's a player uh and I've put this I've put this event to detect when the button has been touched inside this for Loop because it's going to get done to every single button that's in the template so we're going to say first we want to check if it's a player so we can create a variable um which will let us know if the player exists we can say game do players colon get player from character hit do parent and then if it exists then this player variable will be true so we can say if player uh or if not player then return end and that will just kill the function it won't go any further because we don't want to be dealing with anything that isn't a player then we want to actually make sure they own the plot so if um plot colon get attribute owner uh is not equal so you got that little curly line um brace whatever it is uh equals um player do user ID again return end because we don't want to be dealing with this player if they don't own the plot so this means not equal to don't get confused and don't write an equal sign um and so by this point we'll know that yes this is the owner of the plot and I'm just going to add a little Todo that we need to actually remove currency or check if they have enough um which we'll do in a future video but assuming they do we're just going to say uh we want to firstly get the ID of the item which again is another attribute of the button so item to unlock equals uh button get attributes um ID of item to unlock I believe is what we called it yeah ID of item to unlock uh if for some reason this doesn't exist maybe you forgot to add it we can say if not item to unlock then warn you forgot to add an ID of item to unlock attribute CU I bet you'll do that once we'll do a return end just to make sure you don't forget that and finally what we can do is we can find this model in the items folder and we can do the same thing we can position it relative to where it was on template plot um but we're actually going to do that uh I'm just thinking again on my feet yeah so what we're going to do is we're going to um we're going to keep those in the template plot I think and then we'll just move them over when they're needed so when you step on a button so we can get the we can get the template items which is this folder here and we will just store that as variable and then we can say if template items find first child item to unlock uh then no that's not going to work sorry sorry um what we need to do is we need to Loop through this folder until we find the item so for underscore item in template items get children do uh we need to check to see if the item get attribute ID equals the item to unlock I'm going to call this item to unlock ID so that we don't get confused I'm going to update it here and here so if it has the same ID in fact we can say if the ID is not equal to the item to unlock ID then continue end obviously it's the wrong item but if we get to this point in the code we found the correct item so we want to clone it out and reposition it for our for our plot so I'm going to create a variable call it item clone it's going to be item colon clone item clone um parent equals uh plot dot well we'll sort that in a moment um I'm going to create a folder and call it items items folder instance. new folder items folder. name equals items items folder. parent equals plot and then I'm going to the same thing for the buttons I'm going to create a buttons folder just to keep everything organized so just copying and pasting this going to call this one buttons instead of items um and then for our button instead of saying um just a second template buttons get children um I'm going to say button. parent down here is buttons folder and then I'm going to say item clone. parent equals items folder and now we just need to get the relative C frame again of the item so relative item cframe equals template plot. cframe colon 2 object space iton clone. cframe now here's the important part we could have an item that's a model so I'm going to change this to a variable and I'm going to call it item C frame then going to create the variable item C frame and I'm going to say if item clone is a model then item cframe equals item get pivot Cod on get pivot because you can only get a cframe of a model like this however if the item is a base part then item C frame it's important you say base part as well because it covers things like meshes unions Etc item cframe equals item clone do cframe and I just realized I said item here instead of item clone there we go okay so I know this is getting slightly confusing but we'll go over the code at the end we're nearly there um so now that we have got the I item C frame um whether it's a model or not we've got the relative item C frame so we can then say item clone uh and again we're going to have to do another um check here if item clone is a model then um relative item clone pivot to and we're going to say um template plot do cframe to worldspace relative item cframe and then we need a closing bracket there else if item clone is a base part then item clone. cframe equals this okay okay that should be everything so let's just test this and see if it works think it should work and then we'll just go over the code very quickly at the end so I'm just going to run over to my button okay I'm going to step on the button and nothing seems to have happened so let's do some debugging so I'm going to go into the Explorer firstly I want to know uh is the is the painting actually there so let's go to to the plot let's go to my plot uh so I'm noting we have two buttons folders for some reason um and there are loads of paintings being spawned but they're over there they should be over here um so that suggests that there is something wrong with the oh yes this is my bad so we are basically putting them back in the same place back on the template plot we should be putting them on the plot rather than the template plot and what I'm also going to do is I'm going to create a variable because we're reusing this we're writing the same thing twice so just to make it cleaner I'm going to call this world um world C frame of new plots and I'm going to update this here and here it just looks a lot cleaner like that um and let's just go over the codee once more then so when the um so we we've firstly created uh an items folder and a buttons folder in the plot uh for some reason there was another buttons folder in there I just want to have a look and see why that was the case I think it's because we copied out the buttons folder um directly from the template plot here yeah we did so we don't actually need that this uh brand new buttons folder uh instance new because we're cloning out the the buttons from the template plot um so what we're doing is for every single button we are positioning it on the plot we're getting the relative C frame relative to the template plot so basically saying how far away is the button from the center of the template plot and then we are um putting the button onto the new plot and we're just transforming it by that same relative amount so that that could be 20 studs on the x axis and 20 studs on the Zed axis and so that is just putting it on our new plot then when the button is touched we're firstly making sure this is an actual player and not something else like a brick that might have fallen from the sky and touched the part uh we're making sure that this player is the owner of the plot because we don't want another player buying your own stuff uh we are then getting the corresponding ID of the item which is associated with the button do you remember at the beginning of the video we set up the attributes on both the button and the item which had a corresponding ID so we're getting the items ID from the button here and then we are finding that item in the template items which are still in the template plot and once we found it we are cloning it we are then doing the same thing here as we did with the button in that we're finding how far away it is from the center of the template plot and then we are setting it in the new plot by that amount uh and then finally we are just moving the item to that world space position depending on whether it's a model or a base part because you have to move models differently to how you move base parts and then finally we are putting that item into the items folder which we created for our plot and we have one last thing to fix which is a squiggly Orange Line underneath when we say button. parent equals buttons folder that's because we removed the buttons folder variable and I'm just going to change it to template buttons okay so deep breath that was a lot let's now go back in and see if it was fixed all right let's head over to the button and let's step on the button and there you go our painting has been added into the game so there we go we've just managed to make our button work um I think there might be one more problem with it though which is you can step on it multiple times and loads more paintings get added so we'll just briefly fix that by going back to the plot Handler and uh then we can just say um if button colon get attribute purchased then button uh well in fact what we could just do instead is get ready for this we can just say button colon destroy and that will remove the button so you can't step on it again and then I'm going to go back over to our plot okay I'm going to step on the button there we go we have our model the button has been destroyed and when you look at that there is only one model in the game so there you go um that was a longer video than usual uh the next one should be on your screen if it's out by this time I'll try to keep the other ones shorter but if you're enjoying it so far please do like Please Subscribe share it with a friend of course and I'll see you in the next one