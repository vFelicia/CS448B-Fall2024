With timestamps:

00:00 - welcome back to part three in how to
00:01 - make a sword fighting game on roblox so
00:04 - we're gonna do we're gonna continue by
00:07 - creating our game loop script so that we
00:10 - can see who's left in the game and we
00:12 - can crown a winner or if the timer runs
00:15 - out then we can restart the game award
00:18 - no points so what we're gonna do is
00:21 - we're just going to jump out of the
00:23 - second-last
00:24 - end here so that we have a final end at
00:27 - the bottom of our script and we're going
00:29 - to update the status value to get ready
00:34 - to play and then we're gonna wait two
00:38 - seconds and we're gonna start creating
00:42 - our game of for loop so it's gonna be a
00:45 - for loop if it counts down from whatever
00:47 - the game length is to zero going down in
00:50 - increments of one so we can say for I
00:53 - and I is gonna be the time left okay so
00:56 - so I equals going from game length so
01:01 - however long the game is because
01:02 - remember we set the variable and game
01:04 - length at the top here so from game
01:07 - length all the way down to zero going
01:09 - down in increments of minus one do and
01:13 - we've added another end for us and the
01:16 - first thing we need to do is add a
01:18 - weight one because we're going down in
01:20 - increments of 1 each second so we need
01:23 - to add a time delay of one second so the
01:26 - I the I value counts down every second
01:29 - the next thing we want to do is we want
01:31 - to loop through every single player
01:33 - currently left in that table so for I
01:36 - comma player in pairs and then we're
01:39 - going to do the player's table PL RS do
01:42 - and then we've got another end here
01:45 - could you go on to the for loop we want
01:47 - to check to see if the player is still
01:48 - there they haven't left yet if player
01:51 - then character equals player character
01:57 - if not character so if there isn't a
02:00 - character then they've probably left the
02:03 - game or something else has happened to
02:05 - their character else if character find
02:10 - first child game tag
02:13 - if they've got that game tag that I
02:14 - mentioned earlier that tells us that
02:16 - they're still in the game then we know
02:19 - that they are still alive
02:22 - so we can say print player dot name dot
02:26 - docks were concatenating it together
02:28 - with to be a string is it still in the
02:32 - game so we're just printing out that the
02:34 - play is still in the game so that we can
02:36 - just see who's alive and who isn't
02:38 - so if they are still in the game then we
02:42 - can carry on we don't need to do
02:43 - anything to them else we know that they
02:46 - are dead okay so what we can do is we
02:50 - can remove them from the players table
02:52 - just like we did earlier we can say
02:54 - table don't remove from the players
02:56 - table at the position I because I is
02:59 - their current position in fact let's
03:02 - just change this to an X and change the
03:07 - X over here so in this for loop here
03:09 - where we're looping through all players
03:11 - in the game we'll use X as our counter
03:14 - okay because we're already using I up
03:16 - here in our in our countdown for loop so
03:19 - we don't really want to get confused so
03:21 - we're just changing I to X because at
03:24 - the I value the counter value can be
03:27 - anything anything you want it could be
03:29 - dog it could be cat it could be Y but
03:31 - we're calling X just because that's what
03:33 - I've thought of quickly so what we're
03:36 - doing we're removing them from the table
03:38 - at their current position which is X and
03:41 - then that's all that we need to to do so
03:46 - we'll just go back to this if statement
03:47 - here and we can do an else table don't
03:51 - remove from the players table we can do
03:55 - the same thing remove them from X again
03:59 - in case there isn't a player so they've
04:01 - failed at the first if statement and
04:03 - then we can print player dot name and
04:06 - then dot has been removed and if you
04:11 - want we can put this after the table
04:13 - don't remove right here so it's just
04:17 - printing that they've been removed from
04:18 - the table if they have died okay so now
04:21 - that we've done that just before our
04:22 - weight one we can update the status
04:25 - value to say
04:26 - there are and then we'll do a space
04:28 - because we're concatenating again i dot
04:31 - op seconds remaining and well then I'm
04:39 - gonna say how many players are remaining
04:41 - so you can say dot dot and then we say
04:44 - hashtag PL RS the hashtag for the table
04:47 - tells us how many players are left in
04:49 - that table players so this is just gonna
04:52 - tell us how long's left in the match and
04:53 - how many players are still fighting so
04:56 - now that we've done this we can get on
04:57 - to the absolute checking to see if
04:59 - someone's won whether the timer's run
05:01 - down or whether nobody won ok because
05:04 - there's lots of different things that
05:05 - could happen you know they could fight
05:07 - each other at the same time have the
05:09 - same amount of damage and as if by some
05:11 - absolute magic look they could kill each
05:14 - other at the same time it's practically
05:16 - impossible but you know we will still
05:18 - walk account for it anyway
05:19 - so if the number of players is equal to
05:22 - one then we know that there is one
05:24 - person standing they've got the epic
05:26 - victory Wow
05:27 - because they are the last person
05:28 - standing we want to get that player so
05:31 - if there's only one person left in the
05:32 - action table there can only be one
05:34 - person that's able and they will be a
05:36 - position number one so we can say status
05:38 - table value equals the winner is and
05:41 - then we can say dr. PL RS plays table
05:46 - we're getting the first person the first
05:48 - objects in that table got name Lukas in
05:51 - the name of that player and then what
05:52 - we're gonna do is we're gonna increment
05:54 - their books value gonna give them some
05:56 - books because they own the game so we
05:58 - can do player players 1 dot Lee's stats
06:01 - doc books don't foul you equal players 1
06:05 - dot the leader stats doc books dot value
06:09 - plus 25 in fact let's make this a
06:12 - variable reward and then at the top we
06:15 - can say a local reward equals 25 so
06:20 - reward is how many books they're gonna
06:21 - get if they win the game and I've just
06:23 - set this to 25 if you wanted to increase
06:26 - it to maybe 100 you can set it to 100
06:29 - whatever you like so it's the amount of
06:30 - currency they're gonna get if they win
06:32 - so we're taking the amount of books they
06:35 - currently have and we're setting it to
06:37 - whatever they currently have with their
06:39 - reward added on
06:40 - so if I can only have 50 books and I win
06:42 - this will be 50 and we're gonna update
06:45 - that to 50 at 25 so that we're gonna
06:48 - have 75 books so now that someone's won
06:52 - we can break out of this for loop
06:53 - because the game is over we can break
06:56 - out from this game length loop and we
06:58 - can end the game however there are
07:00 - different things which could happen
07:01 - different events okay so it's not that
07:04 - there's gonna be one person left every
07:06 - time people could go afk and the game
07:08 - could last forever for the whole entire
07:10 - time limit so we have to check to see if
07:12 - we could check to see if there are no
07:14 - players left as I said earlier else if
07:17 - number players equals equals zero then
07:20 - status not value equals no buddy one
07:25 - okay and then we can break from this
07:28 - again and obviously if the timer runs
07:30 - down to zero that will break itself
07:32 - because the timer ran out but we could
07:34 - say else if I equals equals zero then
07:40 - status top value equals time up and then
07:46 - we can break from that again so there we
07:49 - go we have done our game loop it now
07:52 - covers all different possible events
07:54 - which would happen if one person's left
07:56 - if nobody's left or if the timer runs
07:58 - down it will account for those different
08:01 - possibilities so what we need to do now
08:03 - is we need to clean up with the game
08:05 - when it's finished so we can print end
08:07 - of game and then we can loop through all
08:09 - of the players in the game not in the
08:11 - pledge table because there we nobody
08:13 - left so we can say for I comma player in
08:16 - pairs game dot players come on gets
08:20 - players do character equals player
08:24 - character if not character so if the
08:27 - character isn't there anymore
08:28 - then we're just gonna ignore them else
08:29 - if they have got a character we're going
08:32 - to destroy the game tag if they have one
08:34 - and we're gonna get rid of their sword
08:35 - from the from their backpack so we can
08:39 - say if if character am i spell all right
08:44 - yep if character fine first child game
08:47 - tag then character duck game tag curl
08:51 - them destroy so we're just getting
08:53 - relaxed
08:54 - we don't want them to have more than one
08:56 - okay we only want them to have one and
08:58 - at the end of the game we all destroy it
09:00 - from their character and then we can say
09:02 - if character come on fine first child
09:06 - sword then we're going to destroy that
09:09 - as well sorry we want to do play it up
09:11 - backpack because they will probably have
09:13 - it in their backpack
09:14 - so if played our backpack fine first
09:16 - child sword then player dot backpack
09:20 - doctor sword : destroyed unless just do
09:24 - the same thing again for their character
09:26 - copy and paste this in case they have
09:28 - the sword equipped if character find
09:34 - first child sword then character dot
09:40 - sword destroy so we're just removing it
09:43 - from wherever it might be it could be in
09:45 - their character equipped they could have
09:47 - in their backpack so we're just removing
09:49 - it from all these different places and
09:52 - then what we're going to do is we're
09:55 - going to destroy the clone map from the
09:59 - game okay and we're also going to want
10:06 - to respawn all the characters at the end
10:09 - of the game so what we can do is we can
10:12 - save player turn on load character now
10:14 - if you don't want to if you don't want
10:15 - everyone to respawn then you can get rid
10:18 - of this line or comment out but I'm
10:20 - gonna keep it in because it just
10:21 - respawns everyone and looks as if a new
10:23 - game is starting so after we've
10:25 - destroyed the map I'm just gonna do a
10:27 - wait two seconds and we're gonna set the
10:30 - status value to game and it okay so that
10:36 - should be our game loop completely
10:38 - finished now there might be a few bugs
10:40 - so what we're gonna do is we're gonna go
10:41 - into a normal game into a test server
10:44 - and we're going to test the game for any
10:46 - books so let's go ahead and do that now
10:48 - so we're going to just firstly save the
10:51 - game by pressing ctrl s or command s and
10:54 - then we're going to go into a test
10:56 - server we're going to do two players and
11:00 - we're going to load it up so let's load
11:02 - it up and see what happens
11:05 - so if we do have some bugs we'll go
11:07 - fix it that's okay it's likely that you
11:10 - will have books there's nothing to worry
11:11 - about you just have to go and look into
11:13 - your script if you get one look at the
11:15 - line where is telling you where errored
11:16 - and if you are getting an error then you
11:19 - have to work out why that's happening so
11:21 - there's lots of different places that
11:22 - can help you
11:22 - you have the scripting helpers forum
11:25 - lots of other places where you can go
11:27 - and you should be able to fix your code
11:30 - but hopefully we won't have any bugs and
11:31 - we're just waiting for this test server
11:33 - to load up okay so we've got the server
11:37 - here so let's just switch out for the
11:40 - for the players to be added into the
11:42 - game so this is the server so this is
11:46 - where we can see what's going on we can
11:49 - see all of the players and these other
11:50 - two windows of studio which we're about
11:52 - to open they are the the two players
11:55 - which we have created this server with
11:57 - so they're going to be added anytime now
11:59 - you can see that the status is currently
12:02 - set to waiting for enough players let's
12:06 - just drag each player over here and get
12:09 - rid of these boxes so that's player 1
12:14 - and we have player 2 over here you can
12:18 - see says intermission and get ready to
12:22 - play there are 49 48 seconds remaining
12:26 - and two players left we do have a little
12:28 - bit of delay here because studio just
12:30 - take a while so player 2 or player 1 her
12:33 - if it was just one that match because of
12:34 - that but if we just go and wait for the
12:36 - actual game starts up again we have two
12:38 - players in the round now and if we wait
12:42 - for the game to load it says get ready
12:44 - to play there are 50 seconds remaining
12:47 - and two players left which is correct
12:49 - you can see the timer is ticking down
12:50 - now let's go ahead and just test out our
12:53 - game for any bugs let's see if we were
12:54 - able to walk off them up no we're not we
12:58 - can't walk off the map let's see if the
13:02 - sort work get the sort of working for me
13:04 - and let's just wait for the timer to
13:08 - tick down all the way to zero okay so
13:11 - time up and game ended so we all get
13:15 - teleported back to the lobby
13:17 - it says intermission and we wait for
13:20 - another game just
13:21 - Dart nobody got awarded any books that
13:23 - round because nobody won however let's
13:26 - go and kill somebody and actually see if
13:28 - we get the points so it says there are
13:30 - 48 seconds remaining and two players
13:32 - left now one thing that is going to
13:35 - happen is if we go over here and kill
13:39 - somebody I don't think that the two
13:42 - players left is going to update straight
13:44 - away I think it's only going to update
13:47 - when the player down here respawns
13:49 - because there they will be respawned and
13:52 - they won't have their player tagged
13:53 - there we go so it said the winner is
13:56 - player two when the person respawn so
13:59 - what we need to do when the one we
14:02 - finished testing is we need to create a
14:04 - event so that when somebody dies then we
14:08 - will immediately remove their game tag
14:10 - and we can crown the winner so now let's
14:13 - try and die at the same time now
14:19 - hopefully it should say that play a to
14:22 - one or player one whoever it was that
14:24 - died first and there we go you can see
14:27 - that everything needs to do working fine
14:30 - so let's go back into studio add that
14:32 - that event which will run when the
14:34 - player dies so that we can immediately
14:36 - remove the game tag and we should be
14:39 - good to go so let's click on clean up
14:40 - and go back to our stats are screwed
14:44 - because that's where we're going to
14:46 - create this event we're gonna have a
14:48 - humanoid died event which ones when the
14:50 - player dies and we're just going to
14:53 - we're gonna make it so that the player
14:55 - has their game tag instantly removed so
14:58 - let's go back in to stats here and we
15:00 - can say player top character added turn
15:05 - on connect function character okay the
15:09 - character parameter here that's going to
15:11 - be the character that we're working with
15:14 - and any characters that do any player
15:18 - that is in the game whatever we do to
15:21 - the character we will do to the actual
15:24 - player so we're just using character as
15:26 - as the cur a dummy right now and
15:28 - anything that we write and here will
15:30 - happen to each player so we want to do
15:32 - character dot humanoid
15:35 - got died : connect function so let's
15:40 - have a look dice power that wrong yes I
15:41 - did
15:42 - so whenever the person dies whenever
15:44 - somebody dies this event will run now
15:49 - the reason we're putting this inside a
15:50 - character added event is because we need
15:52 - to get their character and the only way
15:54 - to do that it's used character added and
15:56 - that will fire whenever the person
15:57 - respawns
15:58 - when their character is added back into
16:00 - the workspace so inside of there we're
16:02 - getting the humanoid and then we're
16:04 - doing an event on that humanoid waiting
16:07 - for them to die and when they do die we
16:09 - connect that to this function and this
16:11 - function is a block of code which will
16:13 - run whenever that happens so what we
16:16 - want to do is we want to say if a
16:18 - character cut on find first child game
16:21 - tag then characters look game tag cut on
16:26 - destroy just like that and then what we
16:29 - want to do is instantly reload their
16:31 - character so that they go back to the
16:34 - lobby straight away so we don't have to
16:36 - wait five seconds for them to respawn
16:39 - and one last thing that we're gonna do a
16:41 - nice little bonus is we're gonna create
16:44 - a little kill feed that shows when
16:46 - somebody's killed someone and it will
16:48 - say in the GUI at the top player one
16:50 - killed player two to do that we're gonna
16:53 - use a feature in this specific sword now
16:56 - if you're using a different sword this
16:58 - isn't going to work so you can still add
17:01 - it in but it probably won't work you'll
17:02 - need to code it into your sword yourself
17:04 - but the sword which I'll put into the
17:06 - description just have this feature and
17:07 - I'll show you it now so in the resources
17:10 - module script in player damager you can
17:12 - see that whenever somebody gets damaged
17:15 - we create a tag called creator and the
17:18 - value of that tag is the player that
17:20 - killed that player or damaged them so
17:23 - when they do die we can look at this
17:24 - crater tag in their player and we can
17:26 - update the status to say that the value
17:29 - of that crater tag killed the player
17:31 - that died so we can say if characters
17:35 - like humanoid and characters are
17:38 - humanoid find first child creator
17:42 - because the crater tag is actually going
17:45 - into the humanoid as you can see
17:48 - being parented into the humanoid here
17:50 - then we can say game replicator storage
17:54 - dot status dot value equals to strength
17:59 - we need to convert this to a string it's
18:02 - because the crater value is it's it's
18:06 - actually the player object it's not
18:08 - actually the name of the player so we
18:10 - can say character dr. humanoid got
18:15 - create or dot value and then we say dot
18:19 - dot actually it's the player's name I
18:21 - believe do yes it is the player's name
18:26 - so we're concatenating it together
18:29 - and we just want to make sure that it is
18:31 - a string so we can say dot dot killed
18:36 - with spaces in between because we're
18:39 - concatenating I don't say dot dot player
18:42 - name and then if we go and test this out
18:45 - our kill feed should be working so what
18:49 - I'm going to do is we're going to load
18:51 - up another local server now because it
18:54 - took ages last time to load up I'm gonna
18:55 - pause the video and restart it when we
18:57 - loaded up ok I just drew in the game you
19:00 - can see says intermission it says get
19:02 - ready to play and for some reason I
19:05 - cannot new I think this is a roblox
19:08 - issue yep there we go
19:12 - so it says there are 39 seconds
19:15 - remaining two players left so let's go
19:18 - ahead and kill this person okay there we
19:22 - go and it said the game ended
19:24 - intermission and I got 25 books so if we
19:29 - wait for another game to start get ready
19:33 - to play you can see that the animations
19:35 - don't work for me that's because I
19:37 - haven't actually used them but you can
19:39 - download the animations think I will
19:41 - leave a link to a depth or on person how
19:45 - to do that so let's go ahead and try to
19:47 - get a second win on the bounce can we do
19:49 - it no because he it said that we got
19:53 - killed at the top with our kill feed try
19:55 - and look out for that in the future so
19:56 - the kill feeds working and you can see
19:58 - that it will show up that you have one
20:01 - instantly after because the game tag is
20:04 - instantly being destroyed so have a look
20:06 - at the kill feed at the top it says that
20:08 - I killed Magic Man it doesn't pop up
20:11 - very long but that can be edited in the
20:14 - future if you want
20:14 - I might remove the game end didn't add a
20:17 - longer waits just so you can see the
20:19 - kill feed and the states updates but all
20:23 - no it's pretty good you can see I've got
20:25 - 50 books I no sir I haven't got 50 books
20:28 - nako right here it's got 50 books I've
20:29 - got 25 books
20:30 - let's see though if we can't run the
20:33 - timer down don't kill anyone
20:35 - testing needs time so hopefully no one
20:38 - will kill me let's let's have a look
20:40 - I'll just pause this and speed it up
20:43 - okay so there are 5 seconds remaining
20:45 - let's see what happens when the timer
20:47 - ticks down to 0 it says time up game
20:50 - ended nobody got any points and the game
20:53 - restarts so I've done a little bit more
20:55 - testing and I've discovered a few more
20:57 - books one of the books is that sometimes
21:00 - you will spawn in the map so you're
21:03 - stuck in the map and sometimes you'll
21:05 - fall out of the map so what gonna do is
21:07 - we're gonna just make the spawns a
21:08 - little bit higher and we're also going
21:10 - to do is we're also going to fix another
21:14 - book which I found which is that if you
21:16 - leave the game when it's running it
21:19 - won't register that you left so what
21:22 - we're gonna do is we're just gonna reset
21:23 - and I'll show you how to fix these bugs
21:27 - but this is what's going to happen when
21:30 - they are fixed if you wait for the game
21:32 - to start I will say get ready to play
21:36 - but you see that one of the players is
21:39 - stuck in them up so we need to make sure
21:41 - that the players are teleported a little
21:43 - bit higher than the spawn so they don't
21:44 - get stuck so it says three players left
21:47 - and if I just ask someone to leave so
21:50 - we'll say magic believe what we want is
21:53 - for the number three at the top to
21:56 - change to a two which it does but at the
21:59 - moment without the fix it will stay at
22:01 - three so I'm going to show you how to
22:03 - fix that now what we're going to do is
22:05 - we're going to go back to the main
22:06 - script and just on line at 98 in the for
22:10 - loop here where we're checking to see if
22:13 - not character then
22:14 - we're going to say table don't remove
22:16 - players X so make sure that's added in
22:20 - there
22:20 - and also what we're gonna do to fix
22:22 - these spawn issues is we're going to go
22:24 - back to where we teleport the players to
22:27 - the spawn and we're just going to do
22:29 - where we're setting the humanoid route
22:31 - part C frame we're going to do plus C
22:34 - frame dot new actually we're going to do
22:37 - the Plus vector three dot new zero five
22:41 - zero okay actually let's make that ten
22:45 - so that they well above the the spawn so
22:49 - that should fix both of the issues and
22:51 - also here we've got the kill feed and
22:55 - let's go back to the main script at the
22:57 - end now let's just do a weight of about
23:03 - two seconds after the end of game just
23:06 - so that we can see who won before it
23:08 - ticks over to say game ended so let's go
23:11 - ahead and publish those changes and
23:13 - we'll get some more testers in to see if
23:15 - the issues are fixed okay so we're in
23:17 - the game and it says 24 seconds
23:20 - remaining and four players left
23:22 - but there's one two three players left
23:25 - actually so let's go into the console
23:27 - and go back over here and see if there's
23:31 - any errors so it says that there are
23:34 - four people soon the game one two three
23:36 - four one two three
23:39 - where's the last person hmm oh there
23:43 - they are they're hiding underneath a
23:45 - cactus so there are four people left so
23:48 - that's okay so let's just change this
23:51 - let's hide that and let's wait for the
23:54 - next game to start so there's one two
23:56 - three four there's five of us I think
23:58 - one dude yep I so let's have a look get
24:02 - ready to play five players left now
24:05 - let's see who kills first so it should
24:07 - go down to four yep let's see who's
24:11 - gonna die next
24:12 - so still four players left let's see if
24:14 - we can kill some more people oh I got
24:19 - killed a case there's 30 seconds left
24:21 - three players remaining nobody has
24:24 - spawned in the ground yet which is good
24:26 - and let's see who's going to win out of
24:28 - last three okay so there's two left and
24:32 - the winner is Magic Man 12 so there we
24:35 - go we've got some more people in the
24:36 - game now so let's go and see if it
24:38 - handles well with some more people wait
24:41 - for the game to start so six players
24:46 - left I just came to one for now so one
24:50 - two three four yep and I'm gonna go and
24:52 - kill groovy over here so we've got three
24:54 - left now and hopefully I'll be able to
24:57 - win this one and get the epic a victory
24:59 - royale alright I see if we can do it can
25:02 - we do are we got killed okay so it's
25:04 - pretty good at the moment pretty good I
25:06 - don't see any bugs in the console either
25:09 - all looks good so the last thing that
25:12 - we're going to do we're going to go back
25:13 - into the stats and we're just going to
25:16 - do in player added character dot
25:19 - humanoid don't walk speed equals 16 now
25:25 - walk speed has a capital W and a capital
25:27 - s the reason we're doing this is we're
25:29 - just setting it to the default value
25:31 - because sometimes the player will freeze
25:33 - and I don't think I don't know if this
25:35 - is because of the the sword or the walk
25:37 - speed but I think adding this should fix
25:39 - it and also position positioning the
25:41 - spawns above the map should help as well
25:43 - so that is all we need to do now and I
25:46 - think that's the end of this part so
25:48 - that's the end of part three in future
25:51 - parts we'll be learning how to add
25:53 - things like game passes developer
25:54 - products and data saving to the game so
25:58 - make sure you like and subscribe to my
26:00 - youtube channel so you don't miss that
26:01 - this has been how to create a sword
26:03 - fighting game on roblox make sure you
26:06 - turn on the notification about seen em
26:07 - miss out when I upload a new video and
26:09 - this is Alvin blocks or see you in the
26:11 - next part

Cleaned transcript:

welcome back to part three in how to make a sword fighting game on roblox so we're gonna do we're gonna continue by creating our game loop script so that we can see who's left in the game and we can crown a winner or if the timer runs out then we can restart the game award no points so what we're gonna do is we're just going to jump out of the secondlast end here so that we have a final end at the bottom of our script and we're going to update the status value to get ready to play and then we're gonna wait two seconds and we're gonna start creating our game of for loop so it's gonna be a for loop if it counts down from whatever the game length is to zero going down in increments of one so we can say for I and I is gonna be the time left okay so so I equals going from game length so however long the game is because remember we set the variable and game length at the top here so from game length all the way down to zero going down in increments of minus one do and we've added another end for us and the first thing we need to do is add a weight one because we're going down in increments of 1 each second so we need to add a time delay of one second so the I the I value counts down every second the next thing we want to do is we want to loop through every single player currently left in that table so for I comma player in pairs and then we're going to do the player's table PL RS do and then we've got another end here could you go on to the for loop we want to check to see if the player is still there they haven't left yet if player then character equals player character if not character so if there isn't a character then they've probably left the game or something else has happened to their character else if character find first child game tag if they've got that game tag that I mentioned earlier that tells us that they're still in the game then we know that they are still alive so we can say print player dot name dot docks were concatenating it together with to be a string is it still in the game so we're just printing out that the play is still in the game so that we can just see who's alive and who isn't so if they are still in the game then we can carry on we don't need to do anything to them else we know that they are dead okay so what we can do is we can remove them from the players table just like we did earlier we can say table don't remove from the players table at the position I because I is their current position in fact let's just change this to an X and change the X over here so in this for loop here where we're looping through all players in the game we'll use X as our counter okay because we're already using I up here in our in our countdown for loop so we don't really want to get confused so we're just changing I to X because at the I value the counter value can be anything anything you want it could be dog it could be cat it could be Y but we're calling X just because that's what I've thought of quickly so what we're doing we're removing them from the table at their current position which is X and then that's all that we need to to do so we'll just go back to this if statement here and we can do an else table don't remove from the players table we can do the same thing remove them from X again in case there isn't a player so they've failed at the first if statement and then we can print player dot name and then dot has been removed and if you want we can put this after the table don't remove right here so it's just printing that they've been removed from the table if they have died okay so now that we've done that just before our weight one we can update the status value to say there are and then we'll do a space because we're concatenating again i dot op seconds remaining and well then I'm gonna say how many players are remaining so you can say dot dot and then we say hashtag PL RS the hashtag for the table tells us how many players are left in that table players so this is just gonna tell us how long's left in the match and how many players are still fighting so now that we've done this we can get on to the absolute checking to see if someone's won whether the timer's run down or whether nobody won ok because there's lots of different things that could happen you know they could fight each other at the same time have the same amount of damage and as if by some absolute magic look they could kill each other at the same time it's practically impossible but you know we will still walk account for it anyway so if the number of players is equal to one then we know that there is one person standing they've got the epic victory Wow because they are the last person standing we want to get that player so if there's only one person left in the action table there can only be one person that's able and they will be a position number one so we can say status table value equals the winner is and then we can say dr. PL RS plays table we're getting the first person the first objects in that table got name Lukas in the name of that player and then what we're gonna do is we're gonna increment their books value gonna give them some books because they own the game so we can do player players 1 dot Lee's stats doc books don't foul you equal players 1 dot the leader stats doc books dot value plus 25 in fact let's make this a variable reward and then at the top we can say a local reward equals 25 so reward is how many books they're gonna get if they win the game and I've just set this to 25 if you wanted to increase it to maybe 100 you can set it to 100 whatever you like so it's the amount of currency they're gonna get if they win so we're taking the amount of books they currently have and we're setting it to whatever they currently have with their reward added on so if I can only have 50 books and I win this will be 50 and we're gonna update that to 50 at 25 so that we're gonna have 75 books so now that someone's won we can break out of this for loop because the game is over we can break out from this game length loop and we can end the game however there are different things which could happen different events okay so it's not that there's gonna be one person left every time people could go afk and the game could last forever for the whole entire time limit so we have to check to see if we could check to see if there are no players left as I said earlier else if number players equals equals zero then status not value equals no buddy one okay and then we can break from this again and obviously if the timer runs down to zero that will break itself because the timer ran out but we could say else if I equals equals zero then status top value equals time up and then we can break from that again so there we go we have done our game loop it now covers all different possible events which would happen if one person's left if nobody's left or if the timer runs down it will account for those different possibilities so what we need to do now is we need to clean up with the game when it's finished so we can print end of game and then we can loop through all of the players in the game not in the pledge table because there we nobody left so we can say for I comma player in pairs game dot players come on gets players do character equals player character if not character so if the character isn't there anymore then we're just gonna ignore them else if they have got a character we're going to destroy the game tag if they have one and we're gonna get rid of their sword from the from their backpack so we can say if if character am i spell all right yep if character fine first child game tag then character duck game tag curl them destroy so we're just getting relaxed we don't want them to have more than one okay we only want them to have one and at the end of the game we all destroy it from their character and then we can say if character come on fine first child sword then we're going to destroy that as well sorry we want to do play it up backpack because they will probably have it in their backpack so if played our backpack fine first child sword then player dot backpack doctor sword destroyed unless just do the same thing again for their character copy and paste this in case they have the sword equipped if character find first child sword then character dot sword destroy so we're just removing it from wherever it might be it could be in their character equipped they could have in their backpack so we're just removing it from all these different places and then what we're going to do is we're going to destroy the clone map from the game okay and we're also going to want to respawn all the characters at the end of the game so what we can do is we can save player turn on load character now if you don't want to if you don't want everyone to respawn then you can get rid of this line or comment out but I'm gonna keep it in because it just respawns everyone and looks as if a new game is starting so after we've destroyed the map I'm just gonna do a wait two seconds and we're gonna set the status value to game and it okay so that should be our game loop completely finished now there might be a few bugs so what we're gonna do is we're gonna go into a normal game into a test server and we're going to test the game for any books so let's go ahead and do that now so we're going to just firstly save the game by pressing ctrl s or command s and then we're going to go into a test server we're going to do two players and we're going to load it up so let's load it up and see what happens so if we do have some bugs we'll go fix it that's okay it's likely that you will have books there's nothing to worry about you just have to go and look into your script if you get one look at the line where is telling you where errored and if you are getting an error then you have to work out why that's happening so there's lots of different places that can help you you have the scripting helpers forum lots of other places where you can go and you should be able to fix your code but hopefully we won't have any bugs and we're just waiting for this test server to load up okay so we've got the server here so let's just switch out for the for the players to be added into the game so this is the server so this is where we can see what's going on we can see all of the players and these other two windows of studio which we're about to open they are the the two players which we have created this server with so they're going to be added anytime now you can see that the status is currently set to waiting for enough players let's just drag each player over here and get rid of these boxes so that's player 1 and we have player 2 over here you can see says intermission and get ready to play there are 49 48 seconds remaining and two players left we do have a little bit of delay here because studio just take a while so player 2 or player 1 her if it was just one that match because of that but if we just go and wait for the actual game starts up again we have two players in the round now and if we wait for the game to load it says get ready to play there are 50 seconds remaining and two players left which is correct you can see the timer is ticking down now let's go ahead and just test out our game for any bugs let's see if we were able to walk off them up no we're not we can't walk off the map let's see if the sort work get the sort of working for me and let's just wait for the timer to tick down all the way to zero okay so time up and game ended so we all get teleported back to the lobby it says intermission and we wait for another game just Dart nobody got awarded any books that round because nobody won however let's go and kill somebody and actually see if we get the points so it says there are 48 seconds remaining and two players left now one thing that is going to happen is if we go over here and kill somebody I don't think that the two players left is going to update straight away I think it's only going to update when the player down here respawns because there they will be respawned and they won't have their player tagged there we go so it said the winner is player two when the person respawn so what we need to do when the one we finished testing is we need to create a event so that when somebody dies then we will immediately remove their game tag and we can crown the winner so now let's try and die at the same time now hopefully it should say that play a to one or player one whoever it was that died first and there we go you can see that everything needs to do working fine so let's go back into studio add that that event which will run when the player dies so that we can immediately remove the game tag and we should be good to go so let's click on clean up and go back to our stats are screwed because that's where we're going to create this event we're gonna have a humanoid died event which ones when the player dies and we're just going to we're gonna make it so that the player has their game tag instantly removed so let's go back in to stats here and we can say player top character added turn on connect function character okay the character parameter here that's going to be the character that we're working with and any characters that do any player that is in the game whatever we do to the character we will do to the actual player so we're just using character as as the cur a dummy right now and anything that we write and here will happen to each player so we want to do character dot humanoid got died connect function so let's have a look dice power that wrong yes I did so whenever the person dies whenever somebody dies this event will run now the reason we're putting this inside a character added event is because we need to get their character and the only way to do that it's used character added and that will fire whenever the person respawns when their character is added back into the workspace so inside of there we're getting the humanoid and then we're doing an event on that humanoid waiting for them to die and when they do die we connect that to this function and this function is a block of code which will run whenever that happens so what we want to do is we want to say if a character cut on find first child game tag then characters look game tag cut on destroy just like that and then what we want to do is instantly reload their character so that they go back to the lobby straight away so we don't have to wait five seconds for them to respawn and one last thing that we're gonna do a nice little bonus is we're gonna create a little kill feed that shows when somebody's killed someone and it will say in the GUI at the top player one killed player two to do that we're gonna use a feature in this specific sword now if you're using a different sword this isn't going to work so you can still add it in but it probably won't work you'll need to code it into your sword yourself but the sword which I'll put into the description just have this feature and I'll show you it now so in the resources module script in player damager you can see that whenever somebody gets damaged we create a tag called creator and the value of that tag is the player that killed that player or damaged them so when they do die we can look at this crater tag in their player and we can update the status to say that the value of that crater tag killed the player that died so we can say if characters like humanoid and characters are humanoid find first child creator because the crater tag is actually going into the humanoid as you can see being parented into the humanoid here then we can say game replicator storage dot status dot value equals to strength we need to convert this to a string it's because the crater value is it's it's actually the player object it's not actually the name of the player so we can say character dr. humanoid got create or dot value and then we say dot dot actually it's the player's name I believe do yes it is the player's name so we're concatenating it together and we just want to make sure that it is a string so we can say dot dot killed with spaces in between because we're concatenating I don't say dot dot player name and then if we go and test this out our kill feed should be working so what I'm going to do is we're going to load up another local server now because it took ages last time to load up I'm gonna pause the video and restart it when we loaded up ok I just drew in the game you can see says intermission it says get ready to play and for some reason I cannot new I think this is a roblox issue yep there we go so it says there are 39 seconds remaining two players left so let's go ahead and kill this person okay there we go and it said the game ended intermission and I got 25 books so if we wait for another game to start get ready to play you can see that the animations don't work for me that's because I haven't actually used them but you can download the animations think I will leave a link to a depth or on person how to do that so let's go ahead and try to get a second win on the bounce can we do it no because he it said that we got killed at the top with our kill feed try and look out for that in the future so the kill feeds working and you can see that it will show up that you have one instantly after because the game tag is instantly being destroyed so have a look at the kill feed at the top it says that I killed Magic Man it doesn't pop up very long but that can be edited in the future if you want I might remove the game end didn't add a longer waits just so you can see the kill feed and the states updates but all no it's pretty good you can see I've got 50 books I no sir I haven't got 50 books nako right here it's got 50 books I've got 25 books let's see though if we can't run the timer down don't kill anyone testing needs time so hopefully no one will kill me let's let's have a look I'll just pause this and speed it up okay so there are 5 seconds remaining let's see what happens when the timer ticks down to 0 it says time up game ended nobody got any points and the game restarts so I've done a little bit more testing and I've discovered a few more books one of the books is that sometimes you will spawn in the map so you're stuck in the map and sometimes you'll fall out of the map so what gonna do is we're gonna just make the spawns a little bit higher and we're also going to do is we're also going to fix another book which I found which is that if you leave the game when it's running it won't register that you left so what we're gonna do is we're just gonna reset and I'll show you how to fix these bugs but this is what's going to happen when they are fixed if you wait for the game to start I will say get ready to play but you see that one of the players is stuck in them up so we need to make sure that the players are teleported a little bit higher than the spawn so they don't get stuck so it says three players left and if I just ask someone to leave so we'll say magic believe what we want is for the number three at the top to change to a two which it does but at the moment without the fix it will stay at three so I'm going to show you how to fix that now what we're going to do is we're going to go back to the main script and just on line at 98 in the for loop here where we're checking to see if not character then we're going to say table don't remove players X so make sure that's added in there and also what we're gonna do to fix these spawn issues is we're going to go back to where we teleport the players to the spawn and we're just going to do where we're setting the humanoid route part C frame we're going to do plus C frame dot new actually we're going to do the Plus vector three dot new zero five zero okay actually let's make that ten so that they well above the the spawn so that should fix both of the issues and also here we've got the kill feed and let's go back to the main script at the end now let's just do a weight of about two seconds after the end of game just so that we can see who won before it ticks over to say game ended so let's go ahead and publish those changes and we'll get some more testers in to see if the issues are fixed okay so we're in the game and it says 24 seconds remaining and four players left but there's one two three players left actually so let's go into the console and go back over here and see if there's any errors so it says that there are four people soon the game one two three four one two three where's the last person hmm oh there they are they're hiding underneath a cactus so there are four people left so that's okay so let's just change this let's hide that and let's wait for the next game to start so there's one two three four there's five of us I think one dude yep I so let's have a look get ready to play five players left now let's see who kills first so it should go down to four yep let's see who's gonna die next so still four players left let's see if we can kill some more people oh I got killed a case there's 30 seconds left three players remaining nobody has spawned in the ground yet which is good and let's see who's going to win out of last three okay so there's two left and the winner is Magic Man 12 so there we go we've got some more people in the game now so let's go and see if it handles well with some more people wait for the game to start so six players left I just came to one for now so one two three four yep and I'm gonna go and kill groovy over here so we've got three left now and hopefully I'll be able to win this one and get the epic a victory royale alright I see if we can do it can we do are we got killed okay so it's pretty good at the moment pretty good I don't see any bugs in the console either all looks good so the last thing that we're going to do we're going to go back into the stats and we're just going to do in player added character dot humanoid don't walk speed equals 16 now walk speed has a capital W and a capital s the reason we're doing this is we're just setting it to the default value because sometimes the player will freeze and I don't think I don't know if this is because of the the sword or the walk speed but I think adding this should fix it and also position positioning the spawns above the map should help as well so that is all we need to do now and I think that's the end of this part so that's the end of part three in future parts we'll be learning how to add things like game passes developer products and data saving to the game so make sure you like and subscribe to my youtube channel so you don't miss that this has been how to create a sword fighting game on roblox make sure you turn on the notification about seen em miss out when I upload a new video and this is Alvin blocks or see you in the next part
