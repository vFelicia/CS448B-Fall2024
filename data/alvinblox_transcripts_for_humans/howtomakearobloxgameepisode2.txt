With timestamps:

00:00 - so welcome back what we're gonna do now
00:01 - is we're going to choose a random map
00:03 - and get it loaded into the game so the
00:06 - player can be teleported it later on so
00:09 - let's begin don't forget if you're new
00:11 - to my channel then click on the
00:12 - notification bar and make sure to
00:14 - subscribe so you don't miss out on
00:15 - upload a brand new video so what we're
00:18 - gonna do is we're going to firstly get
00:20 - the maps okay from this maps folder so
00:23 - we can say the local available Maps
00:26 - equals and then the same maps folder
00:28 - curran get children with a pair of
00:32 - brackets on the end this is gonna return
00:34 - a table okay my table looks like this
00:36 - and it's just a list of all of the
00:39 - different maps that we can choose from
00:41 - so it might be desert for one grass for
00:44 - another and we're gonna make it pick a
00:46 - random number from one to however many
00:49 - entries we have in this table so there's
00:51 - two entries so we're gonna want to pick
00:53 - one of two and because in a table each
00:56 - item is attributed to a number so desert
01:00 - is the first item in the table so it's
01:03 - starts at position one okay so this one
01:07 - is position 1 and we have position 2 and
01:09 - the value of position 2 is grass
01:13 - so if number 2 was picked then it would
01:15 - be the grass map if number 1 was picked
01:17 - it would be the desert map you get the
01:19 - idea so what we're going to do is we've
01:22 - got our table and we want to find a
01:25 - random map from this table so we can do
01:28 - the local chosen map equals available
01:32 - Maps and then what we want to get
01:34 - something from a table we do square
01:37 - brackets and we put the number okay so
01:40 - if we wanted desert we would put 1 if
01:42 - you wanted grass we would put 2 but we
01:45 - want a random number so what we can put
01:48 - in here is math dot random and then a
01:50 - pair of normal brackets or parentheses
01:53 - however you want to say it and we want
01:54 - to pick a random number from 1 so that's
01:56 - the first number then we do comma to
01:59 - show it we want it now to the second
02:01 - number and the number want to go up to
02:03 - is however many maps we have so an easy
02:07 - way to find out how many maps you have
02:08 - is to put a hashtag and then available
02:11 - maps and that will give you the number
02:13 - of
02:13 - items in the available maps table so if
02:16 - there are three maps then hashtag
02:18 - available maps will be three so we're
02:20 - picking a map in the maps table from one
02:23 - to three okay so if there were three
02:25 - values it'd be one two three if there
02:27 - were ten maps it would be one to ten you
02:28 - get the idea so chosen map will be the
02:31 - model of the chosen map so what we can
02:35 - do is we can say status not value equals
02:39 - chosen map dot name and then we want to
02:43 - put chosen okay so we want to
02:46 - concatenate here so you want to put two
02:48 - things together we have the name of our
02:51 - map which we don't know and we also have
02:53 - chosen which is in speech marks so this
02:56 - is a string and we want to concatenate
02:58 - this together so put the two together
02:59 - and to do that we put two dots or
03:03 - periods in between the two things we
03:07 - want to put together so concatenate
03:09 - basically means put together so we're
03:11 - putting the name of the map together
03:13 - with chosen to show that specific map
03:17 - has been chosen so now that we've done
03:19 - that what we can do is we can clone this
03:22 - map and put it into the workspace so
03:25 - that we can teleport players to that map
03:27 - so local cloned map and once again we do
03:30 - another variable equals chosen map code
03:33 - on clone with a capital C clone doesn't
03:36 - really matter but it is good practice to
03:39 - use capital C and remember put a pair of
03:42 - brackets parenthesis on the end of that
03:44 - because it's an inbuilt function to
03:45 - clone something and we want to say clone
03:47 - map dot parent equals you can just say
03:51 - workspace you could say game dot
03:53 - workspace but it is acceptable to put
03:56 - workspace so we want to now teleport
03:59 - players to that map now remember in part
04:05 - one where we created our map and we
04:07 - added these spawn points what we're
04:09 - gonna do is we're gonna index every
04:11 - single spawn point and teleport each
04:13 - player to one of those specific spawn
04:15 - points so go back to the main script and
04:18 - what we're gonna do is when the same
04:19 - local spawn points equals to clone the
04:23 - map because we're not using the chosen
04:25 - map using the one that we cloned and
04:27 - to say : find first child and then in
04:31 - brackets and speech marks wouldn't say
04:33 - spawn points so we're just telling the
04:36 - map to look for these spawn points here
04:39 - find first child will send back the
04:41 - first item it sees which is called spawn
04:44 - points so these ballin points we're
04:47 - gonna just chair to see if you actually
04:48 - have the spawn points in your map so if
04:51 - not spawn points then it should print
04:53 - you do not have actually you could just
04:56 - print spawn points not found now this
05:00 - shouldn't run but if you see spawn
05:03 - points not found in your output window
05:06 - at the end that means that you haven't
05:07 - put spawn points in your map so double
05:10 - check that and make sure that spawn
05:11 - points is spelled correctly everything
05:13 - looks like mine this is just a little
05:15 - way to check to see if you've done it
05:17 - right or you don't need to add it in but
05:19 - we'll keep in anyway so we now want to
05:22 - do the same thing as we did with the
05:23 - maps we want to find these spawn points
05:25 - that are available because we don't want
05:26 - to teleport people to the same spawn
05:28 - point so we can say local available
05:30 - spawn points equals spawn points :
05:35 - get children okay with parent rackets or
05:38 - parentheses on the end and that is gonna
05:40 - return as I said earlier another table
05:43 - okay so this is our table and we might
05:45 - have multiple spawns in here and so we
05:49 - have spawn points because they're all
05:51 - called spawn point don't forget okay but
05:55 - imagine all these spawn points are at
05:57 - different positions in the map so we
05:58 - have one we have two we have three we
06:03 - have four we have five okay so imagine
06:06 - we have five spawn points we're gonna
06:08 - choose a random number from one to five
06:09 - and then whichever spawn point gets
06:12 - chosen we will teleport that specific
06:15 - player to that spawn will then remove it
06:18 - from the table okay this is the
06:21 - available spawn points table so nobody
06:23 - else can get teleported to that spawn
06:25 - and then when everyone has been
06:27 - teleported then the game can begin now I
06:31 - need to stress that you need to have
06:33 - more spawns than the number of players
06:35 - in your game if you have six players in
06:37 - your game but only five spawns then
06:40 - one person isn't gonna to get teleported
06:42 - because there won't be enough spawn
06:44 - points left so make sure you have enough
06:47 - spawn points I recommend you do double
06:50 - because you know roblox might mess up
06:52 - the servers and give you more than your
06:55 - allocated amount so if your server size
06:57 - is 5 where blocks might mess up and give
06:59 - you 7 or 8 because the server's might
07:01 - get overloaded or you might accidentally
07:03 - bump up the server count and forget to
07:05 - update the spawns so make sure you have
07:07 - enough spawns for everyone in your game
07:09 - else it won't work so we've got children
07:14 - we've got the children we've got all the
07:15 - spawn points now in this table all we
07:18 - need to do is loop through each player
07:20 - in the player's table we made earlier
07:22 - doing say for I comma player in pairs
07:26 - and in these brackets the table that
07:28 - we're going to loop through is the
07:30 - players table so PL RS do and for each
07:33 - player we want to check to see if they
07:35 - still exist
07:36 - so if player then and if the player is
07:41 - there then we want to firstly get their
07:44 - character so character equals player
07:46 - door character now the player might have
07:50 - left the game already
07:52 - so we need to see if their carrot if the
07:54 - player still exists and if there isn't a
07:57 - character which is their their model
07:59 - their actual player that you see in the
08:01 - game if not character then well actually
08:05 - yes let's just say if character first so
08:08 - if there's a character we'll do code to
08:10 - teleport themselves there is no
08:13 - character okay maybe they reset maybe
08:16 - their character got destroyed something
08:18 - happened but there is no character so we
08:19 - need to check to see if they're still in
08:21 - the game because this is a warning sign
08:22 - that we need to kick them out of the
08:24 - table because if they've already left we
08:26 - don't want them to win just because
08:27 - they're sitting there in the table being
08:29 - inactive so we're gonna do is we're just
08:32 - gonna check to see if not to play up
08:34 - then so if the player isn't there then
08:36 - we know that they've left the game so we
08:38 - can remove them from the players table
08:40 - so because it's inevitable that somebody
08:43 - is gonna leave the game drawing the game
08:45 - okay rage quit four stars okay so if
08:48 - someone leaves the game they're gonna
08:49 - still be in the table and the script the
08:51 - game is still gonna think that they're
08:53 - in the game because
08:54 - they've left but they're still in this
08:55 - table so we need to constantly be
08:57 - checking to see if they've left the game
08:58 - yet and if they have we're gonna do
09:00 - table not remove and then we're gonna
09:03 - specify the players table and then the
09:06 - the number remember I said only about
09:07 - the numbers being attributed to each
09:09 - item in the table we need to find their
09:11 - number okay because you can't just say
09:13 - players don't remove and put their user
09:15 - name in okay doesn't work like that okay
09:17 - you can't do that you have to say the
09:19 - number at which they exist so now
09:22 - luckily because we're already looping
09:24 - through this players table we know what
09:26 - number order yeah because if we've got
09:28 - to this current player we know that
09:29 - their number is I because I is the
09:32 - number of times or the current table
09:35 - index will loop through so if there is
09:37 - it's the fourth object in the table I is
09:39 - gonna be four by the time we get around
09:41 - to looping through to them so what we
09:43 - need to do is we just can you say
09:44 - players comma I because I is the number
09:47 - where they are on the table for we
09:49 - passed in it for us so now that we've
09:51 - removed them from the table we can
09:53 - actually work on teleporting them if
09:55 - they're still in the game so what we
09:57 - need to do is we need to say character
09:59 - hold on find first child humanoid root
10:03 - part now the humanoid root part is a
10:06 - part that exists in the player and it
10:09 - will work for all body types are six are
10:11 - 15 and throw because our 16 and our 15
10:15 - are different you can't tell whether
10:16 - someone is our six or our 15 where you
10:19 - can but I'll take a lot more code so if
10:21 - it was our six you'd have to teleport
10:23 - their torso if it was our 15 you'd have
10:25 - to move their lower torso or upper torso
10:27 - because there's no such thing as a torso
10:29 - in our 15 but our six our 15 and anthro
10:32 - have a part called a humanoid root part
10:35 - so it doesn't matter what body type they
10:37 - are we can just change the position of
10:39 - the humanoid root part and their whole
10:41 - character will follow with them and
10:42 - we're just getting the first humanoid
10:44 - root part that we see I'm gonna say dot
10:46 - C frame equals available spawn points
10:49 - and we want to get the first object in
10:53 - this table now we're not getting a
10:55 - specific spawn point because we're
10:58 - teleporting one player to the spawn
11:00 - point okay so let's say we teleport the
11:03 - first player to the first object in the
11:05 - spawn points table and then
11:07 - we will move whatever's at position one
11:09 - from the table so that spawn point is
11:12 - going to be gone so all the other spawn
11:13 - points at position two three four five
11:16 - six are gonna move along and shift along
11:18 - one space so that the spawn point in
11:21 - position two will shift into position
11:23 - one so there's always going to be a
11:25 - spawn point at position one no matter
11:27 - what so we don't need to worry about
11:29 - getting a specific spawn point what we
11:32 - just need to do is say dot C frame so
11:36 - that is the position of the spawn point
11:38 - and we're teleporting the players
11:40 - humanoid route part to that C frame okay
11:42 - so if we just go into a game I just want
11:45 - to show you this to you right ok we'll
11:47 - add it into the game now I'm gonna go
11:48 - into the workspace go into my player and
11:51 - you can see we've got upper torso right
11:54 - lower torso okay we can see you've got
11:56 - this humanoid root part now if we move
11:58 - the humanoid root part to a different
12:01 - position say 78 and let's just move
12:04 - ourselves you can see my entire body
12:06 - moves with the part so that's why we're
12:08 - moving the humanoid root part so now
12:11 - that we've teleported the player we need
12:13 - to remove that spawn point from the
12:15 - available spawn points table so that no
12:17 - one else can be teleported to that spawn
12:19 - point and as I said all the other spawn
12:22 - points can shift down so we can say of
12:24 - table don't remove available spawn
12:28 - points , and then one because as I said
12:32 - we're dealing with the first objects in
12:34 - the table to make it simpler
12:35 - we're always teleporting to the first
12:37 - object removing that first object so
12:40 - they all shift down and we'll have the
12:42 - objects in first position for the next
12:43 - person so there we go we have teleported
12:46 - the player all this left is to give them
12:48 - a sword and we can move on to the actual
12:51 - game getting started seeing if
12:53 - everybody's died and we can give out
12:55 - rewards later on so let's go ahead and
12:58 - do that now we're going to just going to
13:00 - give them a sword and as I said earlier
13:02 - we've got this sword in server storage
13:05 - here and it's also gonna mean in
13:06 - description so you just need to go to
13:08 - the link in the description then you
13:09 - need to take that model so purchase it
13:12 - and then go into your toolbox and then
13:15 - if you click on my models it should be
13:17 - there ok my models and
13:20 - you can click it insert it into your
13:21 - game and drag it into service storage
13:24 - right so what we're going to do is we're
13:26 - going to give them the sword so you can
13:28 - say local sword equals server storage
13:31 - dot sword Curlin comb we're copying
13:34 - we're basically making a clone of it
13:35 - copying the sword I'm gonna say sword
13:37 - doc parent equals player backpack and
13:41 - this will put it in their inventory so
13:43 - they can equip the sword and fight other
13:45 - people with it now the next thing that
13:47 - we're gonna do is we're gonna insert
13:48 - something called a game tag now a game
13:50 - tag is what we use to track how many
13:53 - players are left in the game because
13:55 - when the game starts we want to know how
13:56 - many players are left from that original
13:59 - players table because we want to know
14:01 - who's died and because this is last
14:03 - month's standing we want to make sure
14:05 - that we reward whoever is the last
14:07 - person standing so we'll have a game tag
14:10 - and we'll insert this tag into the
14:12 - player's character and when they die
14:14 - we're going to remove this tag and then
14:16 - when we do the before loop from when the
14:18 - game is running every second we will
14:21 - check each player to see if they have a
14:22 - game tag and if they don't we'll remove
14:24 - them from the players table and
14:26 - eventually when there's one player left
14:28 - in the players table we'll know that one
14:30 - person is left standing so what we can
14:33 - do is end the game
14:35 - give them some reward and move on to the
14:37 - next game so that's why we're using a
14:39 - game tag is basically a value which
14:41 - isn't going which is going to go into
14:43 - the player's character and you'll see
14:45 - more how it works in a minute so to do
14:47 - this we're just gonna say a local game
14:49 - tag equals instance dot new bull value
14:54 - although it could be any type of value
14:56 - we're not using the value type we just
14:59 - inserting this tag so that we can
15:01 - reference it later on in the script to
15:04 - show that they're still in the game and
15:05 - he wants to anyone anyone still in the
15:08 - game will have this game tag anyone
15:10 - that's died won't have it because we all
15:12 - remove it so we can see who's still in
15:14 - the game and who is dead so we can say
15:18 - game tag dot name equals game tag with
15:22 - capital G and capital T and game tied
15:26 - parent equals player
15:30 - dot character okay this is why it's so
15:33 - important to check if the characters
15:35 - there because if there isn't a character
15:36 - this script is gonna break because there
15:39 - is no characters no character has been
15:40 - found how can we insert a game tag into
15:42 - the players character if there isn't a
15:44 - character so that's what we do the if
15:45 - statement to check to see if the
15:47 - characters there and if it is we can run
15:49 - this code but in case it isn't there
15:51 - which could happen because they could
15:52 - leave the game we can remove them from
15:54 - this table and move on to the next
15:56 - person in the for loop so now that we've
15:58 - inserted the game tag we can get started
16:01 - on the actual game mechanic so that we
16:04 - can count down from our game length and
16:07 - constantly check to see if there's one
16:09 - player left standing so what we'll do is
16:12 - we'll do that in the next part of the
16:14 - video but just to finish this one off
16:16 - we're just gonna do a little bonus and
16:17 - add the GUI so that you can see the
16:20 - status value in action so what we're
16:22 - gonna do is we're gonna create a nice
16:24 - little GUI which shows the current
16:27 - status so it will update for all players
16:30 - now I'm going to be using a plug-in for
16:32 - this called around if I I'm gonna leave
16:35 - a link to it in the description down
16:36 - below if you want to use it you don't
16:38 - have to all you're gonna do is make our
16:40 - geo eyes look really nice and smooth so
16:42 - we're gonna go and complains we're going
16:45 - to go to manage plugins and we're gonna
16:49 - click on find plugins and once that's
16:51 - loaded
16:52 - we're gonna go to search and we're gonna
16:55 - click on search when it loads up and
16:57 - type in around if I and click on round
17:01 - fight by stell Rex click on install and
17:05 - that's going to install it into our
17:07 - roblox studio so just wait for that and
17:09 - it should come up saying yep installed
17:12 - and you can see round if I has been
17:15 - added so we're gonna go into starter GUI
17:18 - because that's where all of the GUI
17:20 - graphical user interface elements are
17:22 - made and we can click on the plus and
17:26 - insert a screen GUI we're gonna call
17:29 - this screens UIs status and then we're
17:32 - going to click on text label okay text
17:35 - label is a GUI element which allows you
17:40 - to show text on the screen so the user
17:42 - can't click it
17:43 - button it just shows text so we're gonna
17:46 - take this label click it and we're gonna
17:48 - scroll down here and set the position to
17:50 - naught point 5 - 100 because that's half
17:54 - of the size which is 200 0 50 okay now
17:58 - that puts it in the middle of our screen
17:59 - um actually let's just go ahead and make
18:02 - this a little bit bigger I'm gonna set
18:04 - it to 500 and then we can change this -
18:07 - 102 - 250 because that is half of 500 if
18:11 - you having a bit of trouble with this
18:12 - you don't know what I'm doing here I'm
18:14 - just positioning it not 0.5 puts it in
18:16 - the middle of the screen and negative
18:18 - 250 is the offset so that it sets it
18:21 - back 250 pixels so that it is truly in
18:25 - the middle and you can see on all
18:27 - devices it's in the middle and then here
18:29 - 0 50 we're just putting it 50 pixels
18:33 - down the screen from the top so if that
18:36 - was a bit confusing you can just drag it
18:37 - around but this method is better for it
18:40 - appearing on all devices because you can
18:42 - now see if we go into test emulator you
18:46 - can see it scales pretty good on all
18:48 - devices so you can see iPhone X works
18:50 - fine so yes there you go what we want to
18:53 - do now is just go down to properties
18:56 - click on text scaled so that the text
18:59 - becomes nice and big and you can change
19:01 - the text if you want it doesn't matter
19:04 - though because that's not going to be
19:06 - shown when the game starts so all that's
19:08 - left to do is round defy this so we can
19:11 - click on plugins round if I
19:14 - and you can see the GUI ker it's got
19:17 - nice curved edges and looks much cleaner
19:19 - now you'll have to go back to text label
19:22 - and set z-index to two that just makes
19:27 - it appear on top of the image label if
19:29 - you can't see your text set the C index
19:32 - to two so there you go
19:34 - if round fight isn't working for you
19:36 - then don't use it maybe in future if
19:39 - it's broken I don't think it's broken or
19:42 - gets updated it might be little bit
19:44 - different but that's how it is today so
19:46 - that is how you do the GUI design now we
19:49 - just need to do the the actual coding of
19:51 - it which doesn't take long so we're
19:52 - gonna insert a local script into this
19:55 - text label not a normal scripts a local
19:58 - script because it's local to the client
20:01 - to that player so what we're gonna do is
20:03 - we're going to firstly create a variable
20:06 - for our status so you can say local
20:08 - status equals game colon get service and
20:12 - replicate the storage because that's
20:13 - where it's stored code on wait for child
20:17 - status remember waiting for it to be
20:20 - added because the script might already
20:22 - be running executing before the status
20:26 - has been added into the game so now that
20:28 - we've got that we can just say script
20:31 - dot parent dot x equals status got value
20:36 - now this is updating it when they first
20:38 - join the game but what about when the
20:40 - status party changes because it's bound
20:43 - to change so we have to make sure that
20:45 - when it changes we have a function that
20:47 - we can fire off to update the text so
20:50 - it's quite simple reason to say status :
20:53 - get property changed signal and the
20:56 - property that we want to update the text
20:59 - when it's changed is value so when the
21:01 - value of status changes we're gonna
21:03 - update the text label so we can say
21:06 - current connect function function like
21:10 - this drop a couple of lines and say
21:13 - script parent text label dot text equal
21:17 - status dot value now just a quick
21:19 - reminder guys make sure that you've
21:21 - saved your project click on file and
21:24 - then click on save as and make sure it's
21:26 - saved in case something
21:27 - but happens you can get it back and
21:29 - let's go ahead and test this out so
21:33 - we're heading into the game so there we
21:35 - go we're in the game and you can see the
21:37 - status bar has been updated because
21:40 - first time we joined the game it set the
21:42 - text to whatever the status currently is
21:44 - which is waiting for enough players now
21:46 - if we go ahead and change this status
21:49 - okay on the server so imagine this is
21:52 - the script that goes in and changes this
21:54 - status okay I press Enter
21:57 - and we go back right let's have a look
22:00 - okay so it's not it's not actually
22:02 - changing okay so let's go into the
22:04 - output here and we've got an error okay
22:07 - and this is fine and it says text label
22:09 - it's not a valid member of text label
22:11 - let's go back to the local script to see
22:13 - what happened it's on line seven and it
22:16 - says script parent text label dot text
22:19 - aha
22:20 - so there's our issue what I did was I
22:23 - put the local script in the text label
22:26 - but I accidentally said script parent
22:29 - dot text label okay but the text label
22:32 - already is the parent because it's
22:34 - inside so if we get rid of that text
22:36 - label and retry everything should be all
22:39 - good so that is all you do if you find
22:41 - an error you go into the output you have
22:43 - a look where it is you try and fire them
22:44 - out what's going wrong and you try and
22:46 - fix it so let's go back into the
22:50 - replicated storage let's change it to
22:53 - hello and there you go you can see that
22:56 - the status has changed now usually the
22:59 - server will update this but if a client
23:02 - or a player tried to change this to
23:04 - exploit the server only they would see
23:06 - it okay so let's imagine I'm a hacker
23:09 - okay and I'm changing this value to
23:12 - goodbye okay you can see it's changed
23:16 - for me but if we switch to the server
23:18 - and we go in here you can see it still
23:21 - says waiting for enough players it
23:23 - didn't even say hello because we changed
23:25 - that on the client as well so you don't
23:28 - need to worry about that too much that's
23:30 - quite advanced but we have got our
23:31 - status bar working now and we should be
23:34 - ready to go on to scripting the actual
23:36 - game in the next part so make sure that
23:38 - you subscribe to my channel already if
23:40 - you haven't
23:41 - make sure you turned on the notification
23:42 - bar and you've liked these videos to let
23:44 - me know that you want more if you want
23:46 - to go straight to part 3 which I do
23:48 - recommend you should click on the video
23:50 - thumbnail on your screen now I'll see
23:53 - you over there in part 3

Cleaned transcript:

so welcome back what we're gonna do now is we're going to choose a random map and get it loaded into the game so the player can be teleported it later on so let's begin don't forget if you're new to my channel then click on the notification bar and make sure to subscribe so you don't miss out on upload a brand new video so what we're gonna do is we're going to firstly get the maps okay from this maps folder so we can say the local available Maps equals and then the same maps folder curran get children with a pair of brackets on the end this is gonna return a table okay my table looks like this and it's just a list of all of the different maps that we can choose from so it might be desert for one grass for another and we're gonna make it pick a random number from one to however many entries we have in this table so there's two entries so we're gonna want to pick one of two and because in a table each item is attributed to a number so desert is the first item in the table so it's starts at position one okay so this one is position 1 and we have position 2 and the value of position 2 is grass so if number 2 was picked then it would be the grass map if number 1 was picked it would be the desert map you get the idea so what we're going to do is we've got our table and we want to find a random map from this table so we can do the local chosen map equals available Maps and then what we want to get something from a table we do square brackets and we put the number okay so if we wanted desert we would put 1 if you wanted grass we would put 2 but we want a random number so what we can put in here is math dot random and then a pair of normal brackets or parentheses however you want to say it and we want to pick a random number from 1 so that's the first number then we do comma to show it we want it now to the second number and the number want to go up to is however many maps we have so an easy way to find out how many maps you have is to put a hashtag and then available maps and that will give you the number of items in the available maps table so if there are three maps then hashtag available maps will be three so we're picking a map in the maps table from one to three okay so if there were three values it'd be one two three if there were ten maps it would be one to ten you get the idea so chosen map will be the model of the chosen map so what we can do is we can say status not value equals chosen map dot name and then we want to put chosen okay so we want to concatenate here so you want to put two things together we have the name of our map which we don't know and we also have chosen which is in speech marks so this is a string and we want to concatenate this together so put the two together and to do that we put two dots or periods in between the two things we want to put together so concatenate basically means put together so we're putting the name of the map together with chosen to show that specific map has been chosen so now that we've done that what we can do is we can clone this map and put it into the workspace so that we can teleport players to that map so local cloned map and once again we do another variable equals chosen map code on clone with a capital C clone doesn't really matter but it is good practice to use capital C and remember put a pair of brackets parenthesis on the end of that because it's an inbuilt function to clone something and we want to say clone map dot parent equals you can just say workspace you could say game dot workspace but it is acceptable to put workspace so we want to now teleport players to that map now remember in part one where we created our map and we added these spawn points what we're gonna do is we're gonna index every single spawn point and teleport each player to one of those specific spawn points so go back to the main script and what we're gonna do is when the same local spawn points equals to clone the map because we're not using the chosen map using the one that we cloned and to say find first child and then in brackets and speech marks wouldn't say spawn points so we're just telling the map to look for these spawn points here find first child will send back the first item it sees which is called spawn points so these ballin points we're gonna just chair to see if you actually have the spawn points in your map so if not spawn points then it should print you do not have actually you could just print spawn points not found now this shouldn't run but if you see spawn points not found in your output window at the end that means that you haven't put spawn points in your map so double check that and make sure that spawn points is spelled correctly everything looks like mine this is just a little way to check to see if you've done it right or you don't need to add it in but we'll keep in anyway so we now want to do the same thing as we did with the maps we want to find these spawn points that are available because we don't want to teleport people to the same spawn point so we can say local available spawn points equals spawn points get children okay with parent rackets or parentheses on the end and that is gonna return as I said earlier another table okay so this is our table and we might have multiple spawns in here and so we have spawn points because they're all called spawn point don't forget okay but imagine all these spawn points are at different positions in the map so we have one we have two we have three we have four we have five okay so imagine we have five spawn points we're gonna choose a random number from one to five and then whichever spawn point gets chosen we will teleport that specific player to that spawn will then remove it from the table okay this is the available spawn points table so nobody else can get teleported to that spawn and then when everyone has been teleported then the game can begin now I need to stress that you need to have more spawns than the number of players in your game if you have six players in your game but only five spawns then one person isn't gonna to get teleported because there won't be enough spawn points left so make sure you have enough spawn points I recommend you do double because you know roblox might mess up the servers and give you more than your allocated amount so if your server size is 5 where blocks might mess up and give you 7 or 8 because the server's might get overloaded or you might accidentally bump up the server count and forget to update the spawns so make sure you have enough spawns for everyone in your game else it won't work so we've got children we've got the children we've got all the spawn points now in this table all we need to do is loop through each player in the player's table we made earlier doing say for I comma player in pairs and in these brackets the table that we're going to loop through is the players table so PL RS do and for each player we want to check to see if they still exist so if player then and if the player is there then we want to firstly get their character so character equals player door character now the player might have left the game already so we need to see if their carrot if the player still exists and if there isn't a character which is their their model their actual player that you see in the game if not character then well actually yes let's just say if character first so if there's a character we'll do code to teleport themselves there is no character okay maybe they reset maybe their character got destroyed something happened but there is no character so we need to check to see if they're still in the game because this is a warning sign that we need to kick them out of the table because if they've already left we don't want them to win just because they're sitting there in the table being inactive so we're gonna do is we're just gonna check to see if not to play up then so if the player isn't there then we know that they've left the game so we can remove them from the players table so because it's inevitable that somebody is gonna leave the game drawing the game okay rage quit four stars okay so if someone leaves the game they're gonna still be in the table and the script the game is still gonna think that they're in the game because they've left but they're still in this table so we need to constantly be checking to see if they've left the game yet and if they have we're gonna do table not remove and then we're gonna specify the players table and then the the number remember I said only about the numbers being attributed to each item in the table we need to find their number okay because you can't just say players don't remove and put their user name in okay doesn't work like that okay you can't do that you have to say the number at which they exist so now luckily because we're already looping through this players table we know what number order yeah because if we've got to this current player we know that their number is I because I is the number of times or the current table index will loop through so if there is it's the fourth object in the table I is gonna be four by the time we get around to looping through to them so what we need to do is we just can you say players comma I because I is the number where they are on the table for we passed in it for us so now that we've removed them from the table we can actually work on teleporting them if they're still in the game so what we need to do is we need to say character hold on find first child humanoid root part now the humanoid root part is a part that exists in the player and it will work for all body types are six are 15 and throw because our 16 and our 15 are different you can't tell whether someone is our six or our 15 where you can but I'll take a lot more code so if it was our six you'd have to teleport their torso if it was our 15 you'd have to move their lower torso or upper torso because there's no such thing as a torso in our 15 but our six our 15 and anthro have a part called a humanoid root part so it doesn't matter what body type they are we can just change the position of the humanoid root part and their whole character will follow with them and we're just getting the first humanoid root part that we see I'm gonna say dot C frame equals available spawn points and we want to get the first object in this table now we're not getting a specific spawn point because we're teleporting one player to the spawn point okay so let's say we teleport the first player to the first object in the spawn points table and then we will move whatever's at position one from the table so that spawn point is going to be gone so all the other spawn points at position two three four five six are gonna move along and shift along one space so that the spawn point in position two will shift into position one so there's always going to be a spawn point at position one no matter what so we don't need to worry about getting a specific spawn point what we just need to do is say dot C frame so that is the position of the spawn point and we're teleporting the players humanoid route part to that C frame okay so if we just go into a game I just want to show you this to you right ok we'll add it into the game now I'm gonna go into the workspace go into my player and you can see we've got upper torso right lower torso okay we can see you've got this humanoid root part now if we move the humanoid root part to a different position say 78 and let's just move ourselves you can see my entire body moves with the part so that's why we're moving the humanoid root part so now that we've teleported the player we need to remove that spawn point from the available spawn points table so that no one else can be teleported to that spawn point and as I said all the other spawn points can shift down so we can say of table don't remove available spawn points , and then one because as I said we're dealing with the first objects in the table to make it simpler we're always teleporting to the first object removing that first object so they all shift down and we'll have the objects in first position for the next person so there we go we have teleported the player all this left is to give them a sword and we can move on to the actual game getting started seeing if everybody's died and we can give out rewards later on so let's go ahead and do that now we're going to just going to give them a sword and as I said earlier we've got this sword in server storage here and it's also gonna mean in description so you just need to go to the link in the description then you need to take that model so purchase it and then go into your toolbox and then if you click on my models it should be there ok my models and you can click it insert it into your game and drag it into service storage right so what we're going to do is we're going to give them the sword so you can say local sword equals server storage dot sword Curlin comb we're copying we're basically making a clone of it copying the sword I'm gonna say sword doc parent equals player backpack and this will put it in their inventory so they can equip the sword and fight other people with it now the next thing that we're gonna do is we're gonna insert something called a game tag now a game tag is what we use to track how many players are left in the game because when the game starts we want to know how many players are left from that original players table because we want to know who's died and because this is last month's standing we want to make sure that we reward whoever is the last person standing so we'll have a game tag and we'll insert this tag into the player's character and when they die we're going to remove this tag and then when we do the before loop from when the game is running every second we will check each player to see if they have a game tag and if they don't we'll remove them from the players table and eventually when there's one player left in the players table we'll know that one person is left standing so what we can do is end the game give them some reward and move on to the next game so that's why we're using a game tag is basically a value which isn't going which is going to go into the player's character and you'll see more how it works in a minute so to do this we're just gonna say a local game tag equals instance dot new bull value although it could be any type of value we're not using the value type we just inserting this tag so that we can reference it later on in the script to show that they're still in the game and he wants to anyone anyone still in the game will have this game tag anyone that's died won't have it because we all remove it so we can see who's still in the game and who is dead so we can say game tag dot name equals game tag with capital G and capital T and game tied parent equals player dot character okay this is why it's so important to check if the characters there because if there isn't a character this script is gonna break because there is no characters no character has been found how can we insert a game tag into the players character if there isn't a character so that's what we do the if statement to check to see if the characters there and if it is we can run this code but in case it isn't there which could happen because they could leave the game we can remove them from this table and move on to the next person in the for loop so now that we've inserted the game tag we can get started on the actual game mechanic so that we can count down from our game length and constantly check to see if there's one player left standing so what we'll do is we'll do that in the next part of the video but just to finish this one off we're just gonna do a little bonus and add the GUI so that you can see the status value in action so what we're gonna do is we're gonna create a nice little GUI which shows the current status so it will update for all players now I'm going to be using a plugin for this called around if I I'm gonna leave a link to it in the description down below if you want to use it you don't have to all you're gonna do is make our geo eyes look really nice and smooth so we're gonna go and complains we're going to go to manage plugins and we're gonna click on find plugins and once that's loaded we're gonna go to search and we're gonna click on search when it loads up and type in around if I and click on round fight by stell Rex click on install and that's going to install it into our roblox studio so just wait for that and it should come up saying yep installed and you can see round if I has been added so we're gonna go into starter GUI because that's where all of the GUI graphical user interface elements are made and we can click on the plus and insert a screen GUI we're gonna call this screens UIs status and then we're going to click on text label okay text label is a GUI element which allows you to show text on the screen so the user can't click it button it just shows text so we're gonna take this label click it and we're gonna scroll down here and set the position to naught point 5 100 because that's half of the size which is 200 0 50 okay now that puts it in the middle of our screen um actually let's just go ahead and make this a little bit bigger I'm gonna set it to 500 and then we can change this 102 250 because that is half of 500 if you having a bit of trouble with this you don't know what I'm doing here I'm just positioning it not 0.5 puts it in the middle of the screen and negative 250 is the offset so that it sets it back 250 pixels so that it is truly in the middle and you can see on all devices it's in the middle and then here 0 50 we're just putting it 50 pixels down the screen from the top so if that was a bit confusing you can just drag it around but this method is better for it appearing on all devices because you can now see if we go into test emulator you can see it scales pretty good on all devices so you can see iPhone X works fine so yes there you go what we want to do now is just go down to properties click on text scaled so that the text becomes nice and big and you can change the text if you want it doesn't matter though because that's not going to be shown when the game starts so all that's left to do is round defy this so we can click on plugins round if I and you can see the GUI ker it's got nice curved edges and looks much cleaner now you'll have to go back to text label and set zindex to two that just makes it appear on top of the image label if you can't see your text set the C index to two so there you go if round fight isn't working for you then don't use it maybe in future if it's broken I don't think it's broken or gets updated it might be little bit different but that's how it is today so that is how you do the GUI design now we just need to do the the actual coding of it which doesn't take long so we're gonna insert a local script into this text label not a normal scripts a local script because it's local to the client to that player so what we're gonna do is we're going to firstly create a variable for our status so you can say local status equals game colon get service and replicate the storage because that's where it's stored code on wait for child status remember waiting for it to be added because the script might already be running executing before the status has been added into the game so now that we've got that we can just say script dot parent dot x equals status got value now this is updating it when they first join the game but what about when the status party changes because it's bound to change so we have to make sure that when it changes we have a function that we can fire off to update the text so it's quite simple reason to say status get property changed signal and the property that we want to update the text when it's changed is value so when the value of status changes we're gonna update the text label so we can say current connect function function like this drop a couple of lines and say script parent text label dot text equal status dot value now just a quick reminder guys make sure that you've saved your project click on file and then click on save as and make sure it's saved in case something but happens you can get it back and let's go ahead and test this out so we're heading into the game so there we go we're in the game and you can see the status bar has been updated because first time we joined the game it set the text to whatever the status currently is which is waiting for enough players now if we go ahead and change this status okay on the server so imagine this is the script that goes in and changes this status okay I press Enter and we go back right let's have a look okay so it's not it's not actually changing okay so let's go into the output here and we've got an error okay and this is fine and it says text label it's not a valid member of text label let's go back to the local script to see what happened it's on line seven and it says script parent text label dot text aha so there's our issue what I did was I put the local script in the text label but I accidentally said script parent dot text label okay but the text label already is the parent because it's inside so if we get rid of that text label and retry everything should be all good so that is all you do if you find an error you go into the output you have a look where it is you try and fire them out what's going wrong and you try and fix it so let's go back into the replicated storage let's change it to hello and there you go you can see that the status has changed now usually the server will update this but if a client or a player tried to change this to exploit the server only they would see it okay so let's imagine I'm a hacker okay and I'm changing this value to goodbye okay you can see it's changed for me but if we switch to the server and we go in here you can see it still says waiting for enough players it didn't even say hello because we changed that on the client as well so you don't need to worry about that too much that's quite advanced but we have got our status bar working now and we should be ready to go on to scripting the actual game in the next part so make sure that you subscribe to my channel already if you haven't make sure you turned on the notification bar and you've liked these videos to let me know that you want more if you want to go straight to part 3 which I do recommend you should click on the video thumbnail on your screen now I'll see you over there in part 3
