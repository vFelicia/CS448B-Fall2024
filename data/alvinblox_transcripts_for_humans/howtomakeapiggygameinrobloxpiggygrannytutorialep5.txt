With timestamps:

00:00 - hello everyone and welcome back to
00:01 - episode 5 in my how to make a piggy game
00:04 - in roblox series now we're getting
00:07 - closer and closer to finishing this
00:09 - series but today what we need to do we
00:12 - need to make Lea we need to add the
00:15 - logic in the for loop in our start round
00:17 - to detect when the players escape
00:20 - because currently if you escape it won't
00:24 - end the round so that's what we'll do
00:25 - today we're also going to be working on
00:27 - crouching and traps as well so very
00:31 - important parts of the game which are
00:34 - you know crucial to to how piggy works
00:37 - because we're balancing it out we're
00:39 - giving the piggy a little bit of power
00:41 - in that they can place traps but we're
00:43 - also allowing the players to Crouch so
00:46 - if they get in a sticky situation and
00:48 - they're trapped somewhere then they can
00:51 - crouch down and and get out one of those
00:53 - holes in the floor so that they can
00:55 - escape from the piggy so I've been
00:58 - getting a lot of questions from people
00:59 - saying that their game looks quite dark
01:02 - and if there's any way to turn up the
01:04 - brightness and there is if you go into
01:06 - lighting click on the lighting service
01:09 - and in the properties window you'll see
01:11 - this ambient property now if you turn
01:13 - this up it makes the game a lighter I
01:16 - wouldn't turn it up to the max amount so
01:19 - you just drag the slider and but drag it
01:21 - and see what's best for your game you
01:23 - can also edit the light bricks you can
01:27 - add your own bricks and put spotlights
01:29 - in them or surface lights like I've done
01:31 - in the in the lobby and also in the main
01:34 - map you'll see that if we have a look
01:38 - okay now it's in the intro tunnel
01:40 - actually I've put a light part with a
01:43 - surface light and that can make parts of
01:47 - the game brighter or darker so let's get
01:50 - straight into the code to end around if
01:54 - people escape so in the round module
01:57 - scripts we are going to go down here and
02:02 - in the last video we inserted the
02:07 - escaped value into the player when they
02:09 - exited the final door if we have a look
02:12 - for that
02:13 - you will see in the door module it's
02:16 - already there but it inserts this value
02:20 - called escaped when you touch the exit
02:24 - door which is unlocked with the white
02:26 - key so when you do touch it if you're a
02:30 - contestant and you've not already
02:32 - escaped you've not already got one of
02:33 - these values in your player we're going
02:35 - to insert that escaped value it's a ball
02:37 - value so it's going to be true or false
02:39 - but that doesn't matter it's just like
02:41 - one of those tags which we insert so
02:43 - that we can detect if you've got it and
02:44 - if you've got the escaped tag in your
02:46 - player we'll know that you've escaped
02:48 - and then that way in the round module
02:50 - all we need to do is every second just
02:53 - loop through all of the players and then
02:56 - if they have a escaped value then we can
02:59 - just have a variable and increase that
03:01 - for every single player that has it and
03:02 - that will tell us the amount of players
03:04 - that have escaped so let's create a
03:07 - variable and call it escapees I'm going
03:11 - to set this to zero it's going to be
03:13 - zero every single time it it loops
03:15 - around at the starts but then when we
03:17 - loop through every player in the game
03:19 - we're going to have another if statement
03:21 - here and we'll just say if player and by
03:26 - the way we are not never mind
03:31 - yes so we'll say if player kernel find
03:34 - first child escapes so if they've got
03:39 - that escaped value inside of them then
03:41 - we know that they've obviously hit the
03:42 - the door the final door and it's given
03:45 - them that value then we're going to
03:47 - increase that escapees variable by one
03:49 - so escapees equals escapees plus one so
03:53 - if there's five people in the game with
03:55 - this tag then it's going to start zero
03:58 - it's gonna loop through every player in
04:00 - the game and it's going to update this
04:01 - escapees variable by adding one to it
04:03 - and it's going to do that five times so
04:05 - at the end of the for loop we will know
04:07 - that there are five escapees because the
04:09 - escapees variable will be set to five so
04:12 - now we need to do a if statement outside
04:15 - of it just like we've done with the
04:16 - others before if the piggy is alive or
04:18 - not if they've if they've left if the
04:21 - piggy killed everyone and if the times
04:22 - up so we'll say if escapees is greater
04:26 - than zero
04:27 - if more than one person's escapes what
04:30 - sorry if one person or more has escaped
04:33 - if that escapees value is greater than
04:35 - zero then we're going to set the outcome
04:39 - variable to be escapes and so we can
04:44 - check in a minute to see if the outcome
04:46 - is escaped and if it is we can set the
04:48 - status value but then we want to break
04:50 - break out of the the for loop here the
04:55 - outer for loop which is counting down
04:57 - from ten minutes because everyone's
04:59 - escaped so we need to end the round then
05:02 - down here we can just add another else
05:03 - if we can say else if status value
05:09 - equals escapes oh do a leak cause needed
05:13 - there because it's an if statement then
05:16 - status dot value equals contestants have
05:22 - escaped piggy the losses okay so when
05:29 - the first person escapes and gets out we
05:33 - will just end the round okay
05:35 - now you could change this to end the
05:39 - round only when all the contestants are
05:42 - out but if you've got someone who's afk
05:46 - for example then they're probably not
05:49 - going to escape and the Piggy's going to
05:51 - have to catch them so it just ends the
05:53 - round when the first person's escapes
05:54 - because everyone's going to be working
05:56 - in the team and when the first person
05:58 - escapes everyone else is probably going
06:00 - to be around them escaping at the same
06:02 - time so I'm just ending the round when
06:04 - the first person or you know it could be
06:07 - everybody escapes at once
06:09 - but as soon as that first person has
06:11 - been registered and there's one escapee
06:13 - is going to end the round so of course
06:17 - there'll be a five-second wait as well
06:18 - so everybody else who still hasn't
06:21 - escaped has five seconds to head to the
06:24 - exit and get out before the round ends
06:26 - so now if we go in to the game and try
06:31 - out we should be able to escape and end
06:34 - the round
06:36 - so you're gonna start with the game and
06:38 - I'm gonna cut this part out so I'm gonna
06:41 - skip to when I'm about to escape in fact
06:44 - what I'm gonna do and I'm going to show
06:45 - you this as well if you want to save
06:47 - time and allow your player to escape
06:50 - really quickly if you're just testing
06:51 - you can go into the server window if
06:53 - you're in the test mode open up the
06:56 - server window and then head over to the
06:58 - map I'm going to use the Select tool I'm
07:00 - gonna press alt this selects each
07:02 - individual wooden block I'm just going
07:04 - to delete it because that's what the
07:05 - hammer would do then I'm gonna alt click
07:08 - on the generator and I'm going to set
07:09 - the on value to be true I'll change the
07:13 - color of this the display as well
07:14 - because that's usually what happen and
07:16 - then I need to get the white key so I'm
07:19 - going to basically alt click on this
07:21 - purple door which is the door to the
07:24 - downstairs area which is where the white
07:26 - key is I'm gonna move it away I'm going
07:28 - to drag it somewhere else I don't know
07:29 - where it's gone I'll just drag it out of
07:31 - the way so now and you have to do that
07:33 - on the server by the way so that
07:36 - everybody in the game can see it both
07:38 - the Piggy and me when we go down here
07:40 - this was that I was just a shortcut to
07:42 - save us from having to complete the game
07:45 - basically to get the final key so I'm
07:47 - gonna pick up the final key and we're
07:50 - gonna head over I know it's very dark
07:52 - down here and you can't really see and
07:54 - that's why you need to increase the
07:55 - ambience or maybe add a a surface light
07:57 - I'll probably do that later on and I'm
08:00 - gonna go back up here and now if we open
08:04 - up the server again and we go into the
08:10 - players service and it's player 1 you
08:12 - can see we don't currently have an
08:14 - escaped value but if you just move out
08:16 - over there
08:17 - there we go watch carefully as I unlock
08:19 - the door okay it's this
08:22 - that is added the escaped value and go
08:27 - it's ended the round okay I'll show you
08:31 - again I've opened up the server I'm
08:32 - gonna pick up the white key I'm gonna
08:33 - head out and it says you escaped and
08:37 - then it ends the round
08:38 - oh and just realized I made a mistake
08:42 - I said status top value instead of
08:44 - outcome I should have said house if
08:46 - outcome equals equals escapes then it
08:50 - will print out it will set status to say
08:52 - contestants have escaped that's why it
08:55 - didn't write that when we escaped so
08:57 - let's try once more
08:58 - and I've also just taken the status not
09:02 - value equal to MS I and I've put it
09:05 - above thee above any of these if
09:08 - statements here because it will update
09:10 - the status to the current time before it
09:13 - breaks the for loop because if it had
09:15 - broken it wouldn't have updated the
09:17 - status timer to the latest time so I've
09:20 - moved it from the bottom down here just
09:22 - up here but I've not I've not moved the
09:25 - weight so keep the weight down here but
09:27 - I've put the status just after the for
09:31 - loop and before the assignments but it
09:32 - doesn't really matter but what it
09:34 - doesn't matter
09:35 - is that you've changed the you made sure
09:37 - that you said outcome equals equals
09:39 - escapes just as you have with the others
09:41 - so let's go test that out again so if
09:45 - you go over here and we pick up the key
09:47 - which I've just brought up from
09:48 - downstairs in the server and I'm going
09:51 - to unlock the door and it says
09:53 - contestants have escaped piggy loses and
09:55 - then the next round is going to start
09:57 - brilliant yeah so what we now need to do
10:02 - because if we just pause the game here
10:03 - we open up the Explorer and we go in
10:07 - here you'll still see I've got the
10:09 - escaped value so we need to delete that
10:11 - in our in our cleanup function where we
10:15 - you know clean up the round ready for
10:17 - the next one
10:18 - so if we go into the remove tags area
10:20 - what we can do is we can just do a very
10:23 - very simple in the else if V is a
10:25 - contestant we don't want to do this for
10:27 - the piggy goes to sewing two contestants
10:29 - that can escape so we're going to say
10:32 - what you can do it outside if you want I
10:34 - guess
10:35 - it doesn't really matter so you can say
10:38 - if the color find first child because if
10:42 - the piggy doesn't have it then it won't
10:43 - matter escapes then V dot escape to coat
10:48 - on destroy so if the player has the
10:51 - escaped value then we're going to delete
10:53 - it and then that way they'll have to
10:56 - escape again in the next round for them
10:58 - to get it because if we kept it in it
11:00 - will start being counted from the start
11:02 - of the next round when you haven't
11:03 - escaped so that's very important there
11:06 - and if you do try it again you'll see
11:08 - that the escape value gets deleted so
11:11 - you can see if we pick up the key unlock
11:14 - the door you'll see that player 2 has
11:16 - the escape value but then as the round
11:19 - ends and the remove tags function fires
11:21 - it gets destroyed as does any
11:24 - contestants value all right next we're
11:28 - going to work on the crouching a lot of
11:32 - people have been wanting to know how to
11:33 - do this I'm going to show you and just
11:35 - as with the piggy bats I can't share my
11:37 - animations with you because roblox just
11:39 - prevents you from sharing animations of
11:41 - the minute so I'm going to teach you how
11:42 - you can make your own piggy and Crouch
11:44 - animation it's very very simple but the
11:47 - majority of the work has already been
11:48 - done the crouching script was in the
11:51 - piggy kit so if you're going to start
11:54 - the GUI click on main GUI and it's
11:56 - inside this anims local script which is
12:00 - where if you often it won't work as a
12:03 - minute but if you have an animation in
12:05 - here which you own it would work
12:07 - straight away so I'm going to walk you
12:08 - through the code so firstly we've got
12:11 - this function which we're going to call
12:13 - and it firstly checks to see if you're a
12:15 - contestant because we only want the
12:16 - contestants to be able to crouch and if
12:19 - you are a contestant then we've got this
12:21 - variable called and in playing which
12:23 - tells us whether the animation is
12:25 - currently playing or not because if it
12:27 - is currently playing which is handled in
12:30 - this else statement then we want to stop
12:32 - the animation but if it's not currently
12:34 - playing we want to start it so to start
12:37 - the animation we create an animation
12:38 - objects we load in the animation ID
12:40 - which we've put in this variable up here
12:42 - and so if you want to put your own
12:45 - animation in you just change the ID here
12:47 - but keep the RBX assets
12:48 - I D but and then you play the animation
12:51 - because you load it into the characters
12:53 - humanoid and then you play it and then
12:56 - I'm slowing the player down so I'm
12:57 - setting the player's character the
12:59 - humanoid in the in the humanoid setting
13:01 - their walk speed property walk speed has
13:04 - capital s to ten so it slows them down I
13:06 - update the variable so it then when we
13:09 - call the Crouch function again the an
13:12 - implying will be true so it will do the
13:15 - opposite of what it currently is doing
13:16 - sort of like the stop will play it and
13:18 - then I'm setting the as a GUI which will
13:21 - appear called Crouch inside the main GUI
13:24 - here I just make it visible you can see
13:28 - and when you press the Crouch button or
13:31 - you start crouching it will change the
13:33 - color to be blue roughly text and the
13:36 - image button and it will just print out
13:39 - that it's plain when you want to stop
13:40 - the animation it will print it's going
13:42 - to stop then it's going to loop through
13:43 - all of the while it's going to call a
13:47 - function on your humanoid called get
13:49 - playing animation tracks this is built
13:51 - into roblox and it will return back a
13:54 - table of all of the animations that are
13:56 - currently playing and so we can loop
13:58 - through them in this for loop and stop
14:00 - every animation it's currently playing
14:01 - so it basically stops your Crouch then
14:05 - and if you don't want to if you have
14:07 - other the other animations that you
14:08 - don't want to stop you could have an if
14:10 - statement here to check the name of the
14:12 - animation and only stop a certain one
14:14 - but this will stop all animations we
14:17 - don't have any other animations in the
14:18 - game currently for the contestants
14:20 - except for the Piggy bat but that's for
14:22 - the piggy so doesn't matter we're then
14:24 - assessing the walk speed back to the
14:26 - default of 16 so if you increase your
14:28 - walk speed your default walk speed and
14:30 - make sure that you change it here as
14:31 - well because 16 is the current defaults
14:34 - then we set the an implying variable to
14:36 - false so that when we press Crouch again
14:38 - it will do the opposite and we're just
14:40 - reverting the image button and the text
14:42 - labels color back to white so it looks
14:44 - on the GUI that it's not enabled then
14:46 - down here we're using the user input
14:48 - service which is detecting user input so
14:52 - like when you press a key so when you
14:54 - have started an input so it could be a
14:57 - mouse click or something we are
14:59 - detecting if you press the left control
15:01 - button if you
15:02 - to change the button that starts your
15:04 - crouch you could do enum key code and
15:08 - then if you wanted it to be the a key
15:10 - you just write a he wanted it to be
15:13 - shift you'd say left shift I think yeah
15:17 - left shift so I'm going to leave it at
15:18 - left control and enum is like a list of
15:22 - options that we can choose because enum
15:25 - dot key code will only take a certain
15:26 - number of inputs it could be any key on
15:29 - your keyboard so we just look them up
15:30 - using an enum and then when you have
15:33 - pressed the correct inputs with calling
15:36 - the crouched function which is up here
15:38 - so it will either start or stop your
15:40 - crouching and then if you're on mobile
15:42 - to make it work we're also hooking it up
15:45 - to a mouse button one click event on the
15:47 - Crouch button so that you can click the
15:50 - button I just show you to enable or
15:53 - disable your crouching and then down
15:56 - here we have some code for a remote
15:59 - events which we're going to add in to
16:01 - replicate the storage so go into
16:02 - replicated storage add another remote
16:05 - events and make sure that you call it
16:07 - toggle crouch now what this is going to
16:11 - do is in the server at certain time so
16:15 - for example at the end of the round we
16:17 - want to disable the crouching if you're
16:20 - in the lobby so also if you're the piggy
16:23 - we want to turn off your ability to
16:25 - crouch or to show the GUI
16:27 - so we can fire the toggle crouch event
16:30 - from the server and we can have an
16:33 - argument which will be whether it's
16:34 - going to be turned visible or invisible
16:37 - so true or false and then when that is
16:40 - fired from the server we can set the
16:42 - visibility of the Crouch button to
16:44 - either be true or false
16:46 - we will stop playing the animations and
16:49 - we will set everybody's walk speed back
16:52 - to 16 so this remote events events is
16:57 - going to be used to turn off the
16:59 - crouching for people at certain times so
17:01 - when the round ends so we fire it from
17:04 - the server and then all clients are
17:05 - going to pick it up with this event and
17:07 - it's going to remove that it's going to
17:09 - make the Crouch GUI invisible it's going
17:12 - to stop the current animation it's going
17:14 - to
17:14 - reset and in playing to false so you're
17:16 - not crouching anymore and we will set
17:20 - that in a server script so let's just go
17:23 - into the server scripts where we want to
17:27 - disable the crouching and we can fire
17:30 - this toggle Crouch events so if you
17:34 - think about it if somebody has just
17:37 - played around we want to hide the
17:41 - crouching GUI when you hit the lobby
17:45 - again when the round is over so what we
17:48 - can do is in the remove tags function
17:53 - which will just clean up after arounds
17:54 - finished in this for loop looping
17:57 - through all the players in the game we
17:59 - can say game got replicated storage
18:01 - toggle crouch and in fact that's what
18:06 - we'll do is we'll put this outside of
18:09 - the for loop here because we only need
18:12 - it to run once because we're going to
18:14 - fire it for all clients like this so for
18:18 - every player in the game we're going to
18:19 - fire this or a motive end and that way
18:22 - when we use fire or clients we don't
18:23 - need to specify the player who we're
18:25 - going to fire this event for because
18:27 - it's going to fire for every player in
18:28 - the game and we want to toggle it to be
18:31 - false we want so we're sending the false
18:33 - argument so that when we pick it up in
18:35 - this script we've got the visibility so
18:38 - we can set the Crouch crouch GUI
18:41 - visibility to be false even though this
18:44 - is disabling the animations anyway I
18:46 - guess we could just say false here and
18:49 - that would do it anyway but so I'm going
18:52 - to remove that so a visibility argument
18:55 - because this is just disabling the
18:57 - Crouch anyway so it's not like we're
18:58 - going to use it to turn it on in fact
19:04 - that's not true because we're gonna want
19:05 - to actually enable the GUI again so I'm
19:06 - going to keep this visibility I'm gonna
19:10 - keep that because we might want to turn
19:12 - it on or off so it might be true or
19:14 - might be false at times because we will
19:17 - want to when the round starts we're
19:19 - going to want to enable it again for all
19:21 - the players that aren't the piggy so if
19:23 - we go back to the round module so we've
19:25 - done that and that will disable it for
19:26 - everyone
19:27 - but then if we go into our game logic
19:32 - script and goes let's think about this
19:36 - so when the piggy has been chosen and
19:40 - we're removing the piggy from the table
19:43 - if they are the chosen piggy let's do an
19:46 - else so if the ALF statement runs we
19:49 - know that the contestant that we're
19:51 - currently looping through is not going
19:52 - to be the piggy so we want to toggle the
19:55 - Crouch GUI to show up so we can say game
19:57 - got replicated storage darts toggle
20:01 - crouch curl on fire clients and then we
20:05 - want to we're not doing fire all clients
20:07 - because that would fire it for the piggy
20:09 - as well so we're firing for each
20:10 - individual contestant but we're looping
20:12 - through them at the same time so it's
20:14 - going to happen for all contestants
20:15 - we're then going to pass the argument
20:17 - true so that when we go down into the
20:19 - Animas crypt and it's gets and picked up
20:22 - you're going to enable the Crouch GUI
20:25 - it's going to disable your animations
20:28 - that are currently playing though and
20:29 - set the an implying to false so that
20:31 - it's just appeared and from then on you
20:35 - can start playing pressing crouching and
20:38 - clicking the button and stop playing
20:40 - your animation so it's just enabled the
20:42 - Crouch GUI then we need to enable the
20:47 - GUI one more time for those that join
20:49 - halfway through the round so if we go
20:51 - into the event handling script and we go
20:53 - down into this menu play event this is
20:55 - going to be when people join halfway
20:57 - through when they've pressed play on the
20:59 - menu so what we can do is we can say
21:01 - game dot replicated storage dot toggle
21:03 - crouch her on fire clients again not
21:08 - fire all clients we're sending the
21:10 - specific player that we want to enable
21:12 - the GUI for which can be player because
21:15 - it's the player that clicked the button
21:17 - and get passed to this on server events
21:20 - and then we're going to say true because
21:22 - we want it to appear so now
21:26 - when the game starts we should be seeing
21:28 - that crouched GUI appear that's wait and
21:33 - see there we go it's appearing for the
21:37 - player on the right because they are a
21:38 - contestant but the player on the left is
21:40 - the Piggy's office it's not going to
21:41 - turn it's not going to appear now next
21:44 - we need to make this crouching animation
21:48 - now because I've already made one but I
21:50 - can't share it with you this is what its
21:52 - gonna look like okay so we're gonna make
21:54 - this I'm going to teach you how to make
21:55 - it so you can make it for yourself in
21:57 - the animation editor is very simple and
21:59 - I know my Crouch animation doesn't look
22:01 - the best that's because I spent about
22:02 - five minutes on it because I know that I
22:05 - knew that I wasn't gonna be able to
22:06 - share it with you so I'm not going to
22:07 - make a very detailed one because it's
22:09 - you that's going to be making the
22:10 - animation in the end so let's go ahead
22:11 - and do that now
22:12 - so we're going to open up the animation
22:16 - editor but before we do that we're going
22:19 - to insert a rig so click on build rig
22:22 - then click on our 15-block rig now I'm
22:26 - not going to do a r6 animation because
22:29 - I'm going to set this game to be r15
22:32 - only if you wanted to do an r6 one you
22:34 - could but arms are going to set the game
22:37 - to our fifty and it makes it look a lot
22:38 - simpler so then go into animation editor
22:43 - click on your dummy then you can name
22:46 - the animation I'm gonna call it crouch
22:47 - and click on create' and what we need to
22:52 - do is don't move the blue line okay
22:56 - don't move the scrubber first thing
22:58 - we're going to do click on the three
22:59 - dots very important then click on set
23:01 - animation priority and click action if
23:04 - your Crouch animation isn't working for
23:06 - you it's most likely because you've
23:08 - forgotten to set the animation priority
23:10 - and it's not being played because the
23:12 - roblox movements grips when you walk and
23:15 - your idle are being played and being
23:18 - prioritized and played over it so it's
23:20 - not playing at all so set the animation
23:22 - priority to action then again don't move
23:26 - the scrubber but we're going to position
23:30 - this rig into a crouching position so to
23:34 - do this well imagine that this grid is
23:37 - the floor so we're going to firstly
23:39 - click
23:40 - on their lower torso so this small torso
23:44 - here okay you have to click on this one
23:45 - if you click on the upper torso and try
23:47 - and move the player all their body parts
23:49 - are going to get skewed off and I'm not
23:51 - going to work so click on the lower
23:53 - torso here okay
23:55 - then go to home select the move tool and
23:58 - drag him down get it to about here so
24:03 - that his torso in fact I'm just gonna do
24:05 - it around here so that say quarter of
24:09 - his leg is above the ground then I'm
24:12 - going to take his right leg I'm going to
24:16 - use the rotate tool and I'm going to
24:18 - rotate it vertically okay so it looks
24:22 - like he's bending his arm his leg sorry
24:26 - then I'm gonna take the next part of his
24:29 - leg and bend it up a bit
24:30 - okay right then I'm gonna take the next
24:34 - leg gonna click on the upper part of it
24:37 - I'm gonna drag it rotate it forward like
24:40 - this I'm gonna take the second part of
24:42 - his leg and drag it down a bit okay so
24:47 - not the best Crouch animation but guess
24:49 - what it works um if you want to animate
24:52 - the arms you can do so as well so you
24:55 - could maybe drag them into the middle
24:58 - like this I know in the actual piggy
25:02 - game the animation animates their arms
25:05 - so I'm just going to show you how to do
25:07 - that as well and again my animation
25:09 - skills aren't very good I'm mainly a
25:11 - scripter so you know bear with me a bit
25:16 - here so when you've finished your
25:18 - animation again not moving the we're not
25:22 - moving the scrubber along because we
25:25 - want it to be playing this infinitely
25:27 - this same pose let's check this one out
25:31 - what I'm gonna do is I'm going to move
25:34 - the lower torso off the ground a little
25:36 - bit more like this just so that we can
25:39 - get the players legs in like this and
25:42 - I'm gonna rotate the leg up a little bit
25:45 - more if you don't want it to snap when
25:47 - you rotate click on model and uncheck
25:49 - the rotate in the snap to grid section
25:52 - that way you'll just have free control
25:53 - over your
25:54 - Lex I'm gonna bend this one a little bit
25:56 - more like this okay now if we play the
26:03 - animation first I'm going to click on
26:04 - this button here so that it loops and if
26:08 - you just play it it's going to off see
26:09 - it's going to constantly loop we only
26:11 - got one pose so the players always going
26:13 - to look like this so now what we can do
26:17 - is we can export this animation so click
26:22 - on the three dots click on exports and
26:24 - then click create new give it a name I'm
26:27 - gonna call it crouch come finish and the
26:31 - same as we did with the piggy bat select
26:33 - just the ID right click copy if you
26:37 - don't see this box just go to the roblox
26:39 - page website go to create and then in
26:43 - the size section you should see
26:44 - animations and you can find a link to
26:46 - your animation right then close down the
26:49 - animation editor head back to your
26:51 - animus grips and take the animation ID
26:55 - variable and replace the numbers here
26:57 - with your animation ID keep this RBX
27:01 - asset ID part because that tells the
27:03 - script to look up on the roblox site for
27:06 - this animation ID right now we're good
27:09 - to test it out so we're gonna go into a
27:12 - server again and see what happens now it
27:14 - might be that it's probably likely that
27:16 - we're gonna have to change this
27:18 - animation because it might not look
27:19 - right but that's fine I'll show you how
27:21 - we can change it alright so here we go
27:26 - around about the starts okay the GUI
27:32 - hasn't shown up we'll investigate that
27:36 - in a minute but if we press ctrl the
27:38 - scripts still be working so there we go
27:40 - we are crouching and you can see that
27:43 - we're now it's working pretty good I'm
27:45 - liking this animation and now we can
27:49 - slip through these little holes where as
27:51 - we couldn't before so if the P key was
27:53 - chasing you and you wanted to make a
27:54 - quick escape you could just a crouch
27:56 - down and boom you're out so really
27:58 - really nice I like that so I'm going
28:03 - record myself debugging this animation
28:06 - GUI to see what's happening okay it's
28:10 - appeared now for some reason okay so
28:12 - that's very weird because I've been
28:15 - testing it a lot of times and it's been
28:17 - showing up the crouch UI and so that one
28:20 - time where it didn't show up was quite
28:22 - interesting because it obviously works
28:25 - but then for some reason that time when
28:29 - we first tested the animation it didn't
28:31 - which is very interesting but I'll just
28:35 - reset and you'll see that the Crouch UI
28:38 - is still there but nevermind it's gone
28:42 - now because we fired that toggle crouch
28:44 - because obviously we died and then we
28:46 - respawned and then it loaded everybody
28:48 - again when the round had ended and I'd
28:51 - let's to see yeah it seems to be working
28:53 - for me so I don't think there's any
28:55 - issues that might have just been a
28:56 - one-off but the good thing is that we
29:01 - have our animation in there now and it
29:03 - is working really well so we don't need
29:05 - to go back in and edit it but if you do
29:07 - want to change your animation a bit it's
29:09 - very simple head back into the animation
29:11 - editor like this and it might have
29:14 - loaded itself but if it hasn't then
29:16 - click on the three dots import from
29:19 - roblox and then select the Crouch
29:21 - animation that you're saved and then to
29:23 - save yourself from having to put the
29:25 - animation ID and again when you are want
29:27 - wanting to export it again just
29:29 - overwrite the one you just made but
29:31 - really important is that you click the
29:34 - three dots set animation priority and
29:36 - click action else it's not going to work
29:38 - I can't dress that enough okay so that
29:42 - is the crouching done so if you're still
29:46 - having problems make sure that you've
29:47 - added the remote event and that you've
29:48 - been following along carefully and also
29:50 - that you've done your animation yourself
29:52 - because it's not going to work unless
29:54 - you've made your own animation and put
29:56 - it into the Animas scripts okay so next
30:00 - we're going to do is we're going to do
30:02 - the traps so we've done the crouching we
30:07 - now need to make the traps for the piggy
30:09 - now I'm just going to say delete this
30:11 - dummy when you finished with it we no
30:12 - longer need it that was only used for
30:14 - the animation so
30:16 - I'm going to show you now how you can
30:18 - make your traps work so alongside the
30:24 - main GUI in the piggy kit I also gave
30:26 - you a GUI called trap GUI now if you
30:29 - make this GUI enabled click on it and
30:32 - set the enabled property to be true
30:33 - you'll see that it appears and it shows
30:37 - a bear trap with the amount of traps you
30:39 - have left and also a instruction so that
30:42 - you press the control button or you tap
30:45 - on the button click it to place a trap
30:47 - so inside of here there's a local script
30:50 - and it's very similar actually to the
30:53 - animations in it there's a function
30:56 - called trap and when called it detects
30:59 - to see if you're the piggy if you've got
31:00 - that value inside that tells you the
31:02 - piggy we've also got a D bounce and the
31:04 - debounce allows you to have a cool-down
31:08 - so you can only use the trap once every
31:10 - 5 seconds and the way that works that we
31:12 - have a variable and we set it to false
31:13 - to begin with and we'll only let you
31:16 - place a trap if that variable is false
31:19 - and so not debounce is the same saying
31:23 - if the bounce is false so if it is false
31:25 - we're gonna set it to true so that if
31:27 - you keep putting trap because the
31:28 - debounce variable is now set to true
31:30 - this is not going to pass so it's not
31:33 - going to let you place any more traps
31:34 - until the debounce becomes false so
31:36 - after 5 seconds we're going to set D
31:38 - bounce to be false and then once the
31:42 - debounce has first been set the text
31:44 - label inside the trap button which looks
31:47 - like this
31:48 - this control / tap will change its text
31:51 - to say wait and then we will fire a
31:56 - remote event to the server which is
31:58 - going to place that trap and we're also
32:00 - going to script a value into the player
32:04 - called trap counts we haven't made that
32:06 - yet but we will do it very soon and that
32:09 - is going to track how many traps the
32:13 - piggy has left to use and every time
32:16 - they place a trap will update the red
32:18 - eye so have a look at the red text which
32:22 - says 5 to be the amount of traps you
32:25 - have left the value of that truck out
32:27 - and then after five seconds we set the
32:29 - debounce to false and we set the text
32:31 - label of the trap that says control back
32:35 - to its original value which was saying
32:37 - weight before and then we using the user
32:39 - input surface again to see if you've
32:41 - pressed the left control and if you have
32:42 - then we'll call up the trap function and
32:45 - if you've clicked it maybe you might be
32:46 - on a mobile you've tapped it or clicked
32:48 - it it will also call the trap function
32:51 - and also we have another remote event
32:53 - called toggle trap this is very similar
32:55 - to toggle crouch in that it will make
32:58 - the trap GUI show up or go off screen it
33:03 - will make it visible or invisible but
33:05 - instead it sets its enabled property
33:07 - instead of the visible property of the
33:10 - trap person which you could set but I've
33:12 - just chosen to use enabled so we're
33:15 - gonna need two more remote events to
33:17 - begin with and it's we're gonna have one
33:19 - for the toggle trap so insert our most
33:22 - events and set it to toggle trap like
33:25 - that and one more which is going to be
33:29 - called place trap so we're going to fire
33:34 - the place trap when we want to lay down
33:36 - a trap in the Piggy's current location
33:38 - and then we're going to have another one
33:40 - which will make the trap GUI appear on
33:46 - the screen or make it go off the screen
33:47 - when the ground is finished or when the
33:50 - piggy has been selected so firstly let's
33:54 - make this trap GUI show up so very
33:56 - simple so let's go into the round module
34:02 - and we're gonna go to the function where
34:06 - we teleport the piggy teleport piggy
34:14 - here we go
34:15 - teleport piggy so inside of here well
34:19 - firstly going to create that a value
34:22 - inside of the piggy called trap count
34:25 - okay very simple and this is what's
34:28 - going to look like just to speed up the
34:30 - video by now you should know how to
34:34 - insert values so recruiting a variable
34:37 - called trap count where instancing in a
34:40 - in value
34:41 - changing its name to be trap counts then
34:44 - by setting its value to be five that's
34:46 - the amount of traps the piggy can place
34:48 - of course you can change this to a
34:49 - bigger number such as ten I recommend
34:51 - you keep it at five because it keeps the
34:53 - game balanced and then we're gonna say
34:55 - trap counselor parent equals player so
34:57 - it puts it in the piggy in there player
34:59 - so only the piggy is going to have this
35:01 - value that's why we've put it in to
35:03 - teleport piggy and then we're going to
35:05 - want to make that GUI appear so we're
35:08 - gonna say game dot replicate this
35:09 - storage got toggle trap I'm sorry
35:12 - toggle trap Carol on fire clients not
35:15 - fire all clients we're gonna use fire
35:17 - clients we only want to fire it for the
35:19 - piggy so we're going to put the player
35:21 - in the player argument that's going to
35:22 - fire four which is going to be the piggy
35:24 - which we passed to this function and
35:26 - then we're going to set the second
35:29 - argument to be true because we want to
35:31 - make that DUI appear and later on when
35:33 - we want to make it invisible or disabled
35:37 - we will just call at this remote event
35:40 - again specifying the piggy and also
35:42 - having the second argument to be false
35:44 - so that the script knows to set the
35:46 - enabled property of the trap GUI to be
35:49 - false so next we need to do just that so
35:53 - we're going to scroll down a bit to the
35:55 - remove tags function and inside of here
35:58 - inside of the if the find first child
36:01 - picky when we're looping through all the
36:02 - players in the game when we found the
36:04 - piggy what we're going to do is we're
36:07 - going to firstly just underneath the
36:09 - part where it deletes your tools and the
36:12 - piggy back we're going to see if you
36:15 - have that trap count value so if the
36:18 - code on find first child trap counts
36:22 - then V dot trap counts :
36:27 - destroy okay it's going to delete that
36:30 - trap count value out of your player
36:31 - because we no longer need it and if
36:34 - you've just been the piggy
36:35 - and the next round you're gonna be a
36:38 - contestant even if you are the piggy
36:40 - next runned again it's going to insert
36:41 - another trap count into your player so
36:43 - we need to delete it at the end of the
36:44 - round especially though if you're going
36:47 - to be a contestant next round we don't
36:49 - want you to have a trap count value in
36:51 - your player so after that we're then
36:53 - going to fire
36:55 - that our remote event again to disable
36:57 - the trap GUI on the picking screen
36:59 - because if they're no longer the piggy
37:00 - we don't want them to be able to see
37:02 - that's trapped GUI because if they're a
37:04 - contestant next round they're gonna get
37:06 - the toggle crouch they're gonna get the
37:07 - crouch GUI which is gonna be in the same
37:10 - position so we're gonna say game don't
37:12 - replicate the storage once again
37:13 - topping trap curl on fire clients we
37:17 - need to pass the piggy the current
37:19 - player that we're looping through whose
37:21 - GUI we're going to disable that's going
37:23 - to be V because V represents the current
37:25 - player that we're looping through in
37:27 - this table and that table is game dot
37:29 - players come get players up here so the
37:32 - current player that we're looping
37:33 - through it's going to be V we know that
37:35 - there's a piggy because we've doing this
37:37 - if statement to check if they are then
37:38 - we're gonna say comma and we're gonna
37:40 - say folks because we want to disable the
37:45 - trap GUI now in theory if you are chosen
37:51 - to be the piggy then after you die then
37:55 - the GUI should hide itself because it's
37:57 - got a reset on spawn property set to
37:59 - true so we'll reset how it first looked
38:02 - when the GUI was inserted into your
38:05 - player and the trap button is going to
38:08 - be invisible at that point because the
38:11 - GUI is disabled but just as a good
38:13 - practice to make sure that actually did
38:15 - happen we can use this toggle trap
38:17 - remote event to make sure that it is
38:19 - disabled and set to a false which is
38:22 - useful if you don't kill the piggy for
38:24 - example if you just teleport them back
38:25 - after the end of the round so now if we
38:30 - test the game out you'll see that when
38:32 - the round begins the piggy should see
38:36 - they're trapped GUI and there we go they
38:39 - do see it and for some reason the toggle
38:43 - Crouch still is not working so we will
38:45 - investigate that a bit more but before
38:50 - we do that we are going to make it so
38:51 - that the piggy is able to place their
38:54 - traps because currently they will be
38:56 - able to press control and it will say
38:58 - wait but they won't be able to actually
39:00 - place them and that's because we've got
39:02 - to do the coding on the server we got to
39:04 - pick up that's remote events called
39:06 - place trap when it gets fired
39:08 - and we're going to place a trap in the
39:11 - Piggy's current location we're going to
39:12 - do that on the server though so let's go
39:16 - into the event handling script and let's
39:19 - just create a another event called game
39:27 - replicate this storage dot place trap
39:30 - dot on server event so when it's fired
39:32 - to the server colon connect function
39:35 - player just like that and then we need
39:39 - to firstly make sure that the person
39:42 - that's calling this remote event is the
39:43 - piggy because it could be somebody that
39:45 - you know tries to exploit and is
39:49 - actually a contestant so we can say if
39:52 - player cut on find first child piggy
39:57 - so if they've got that piggy value then
40:00 - we'll make sure that they've got a trap
40:01 - count value if player curl on find first
40:05 - trialed trap count then we need to have
40:12 - a debounce don't we we need to have a
40:14 - diva like we had a V bounce for the what
40:19 - do we have the D that's the debounce was
40:21 - for is the it was in so we had D bounce
40:31 - for these stun scripts and the bat
40:36 - script as well but yeah the debounce
40:40 - will stop the piggy from being able to
40:42 - lay down five traps at once by spamming
40:45 - on the Crimewatch button so local trap
40:47 - debounce equals false this is only going
40:51 - to be used in this place trap event so
40:54 - we need to say if not trap debounce then
41:00 - so if d bat is the trap debounce is
41:03 - false which means that they can place a
41:05 - trap we need to set it to be true so
41:07 - they can no longer place a trap after
41:09 - that for us for a five seconds so we'll
41:13 - wait five seconds and then we'll set
41:15 - trap D bounce back to false so that for
41:17 - five seconds you won't be able to place
41:19 - any more traps before it then unlocks
41:21 - again
41:22 - to the five seconds will unlock the
41:23 - debounce by setting the variable back to
41:25 - false because we allow the for loop to
41:28 - pass if the condition is that lead
41:30 - trapped debounce is false so when it's
41:34 - true it's not going to run so in here we
41:37 - need to then check to see if the player
41:39 - has enough traps left because they could
41:41 - have used the fall of their traps so if
41:44 - player dot trap count dot value is
41:48 - greater than zero then if it have got
41:52 - enough traps a number greater than zero
41:55 - so five four three two or one if they
41:58 - have zero traps well it's not going to
42:00 - pass because zero is we our condition is
42:04 - that the amount of traps that you have
42:07 - has to be greater than zero and so then
42:10 - we need to put the bear trap in the map
42:14 - but we firstly have to check see if the
42:17 - map is there so we say if game dot
42:21 - workspace curl on find first child map
42:25 - this is just some extra security and
42:28 - safety so that the script won't error if
42:30 - the map isn't there for some reason
42:32 - no reason why it shouldn't be but you
42:34 - know then we're gonna say player the
42:41 - dart truck and we're gonna subtract one
42:43 - from their current trap camps when
42:45 - they've placed a trap we need to remove
42:46 - one from their trap count value so
42:48 - player thought trap count thought value
42:50 - equals and then we'll just say play a
42:53 - lot truck a lot value because that's
42:55 - their current value minus one so it
42:57 - takes one away from the current value so
42:59 - if they have 5 it would be 5 minus one
43:02 - so would then turn into four right now
43:05 - we need to actually place the bear trap
43:07 - so in the piggy kit I gave you a mesh of
43:11 - a bear trap I'm just going to drag it
43:13 - into workspace to show you here we are
43:16 - nice bear trap very nice you can resize
43:19 - it if you want doesn't really matter so
43:21 - I'm going to take this bear trap in fact
43:24 - it kind of does matter if you resize it
43:26 - on the y-axis you make it bigger like
43:30 - this then it's going to interfere in a
43:33 - minute with the placement and I'll
43:34 - explain more so
43:35 - put it back into server storage that was
43:37 - just to show you go back into event
43:39 - handling we're going to clone this bear
43:42 - trap so local trap equals game doctor
43:46 - server storage dot bear underscore trap
43:49 - colon clone because it's got an
43:51 - underscore in the name then we're going
43:55 - to set the C frame off of the trap so C
43:58 - frame again is like the position but
44:00 - with rotation as well so C frame is just
44:04 - a better way in my opinion of placing
44:06 - these type of things so we're gonna set
44:08 - the traps C frame to be the C frame of
44:13 - the player's humanoid root partner the
44:16 - humanoid root part is a invisible part
44:19 - in the middle of the player's character
44:20 - so positioning it there we'll be able to
44:24 - put it where the player standing right
44:28 - in terms of x and y because it will be
44:31 - in the middle of the player's character
44:32 - sorry x and z the y value it will be off
44:36 - the ground in the middle of the player's
44:38 - character so we'll need to offset it a
44:40 - bit to put it down on the ground so
44:43 - we're gonna say player dot character dot
44:47 - humanoid root part dot C frame - and
44:52 - this is how we offset it so it's
44:54 - currently going to be in the middle of
44:56 - the piggies body so like about level
44:59 - with their bats or their arm so we need
45:03 - to subtract a number of studs from this
45:05 - C frame value to put it down on the
45:08 - ground and so if you've increased the
45:10 - size of your trap you're going to need
45:14 - to change this number the amount of
45:17 - studs this that it's going to be offset
45:18 - by so that it is it looks like it's on
45:21 - the floor so we're going to say - vector
45:26 - 3 dot new so vector3 value is just made
45:32 - up of three values and x y&z value and
45:35 - they are the amount of studs that is
45:37 - going to move on each axis so we can
45:40 - leave the x and y values 0 sorry the x
45:43 - and z value 0 but we're going to set the
45:45 - Y value to be 3.5 so it's going to
45:48 - subtract 3
45:49 - point five studs vertically from the C
45:52 - frame of the trap so it's going to move
45:55 - it down by three point five studs if you
45:58 - wanted to move it up you would change
46:00 - this to a plus but it's a minus because
46:02 - we want to subtract to move it down so
46:05 - now that we've placed the trap and again
46:08 - change this if you want if you don't
46:11 - change your piggy character as well this
46:14 - should work fine but if you use a
46:15 - different piggy character which might be
46:17 - a different size you'll probably need to
46:19 - change this value three point five so
46:20 - play around with it although currently
46:22 - works well for me right next we need to
46:25 - parent this trap so I'm gonna put it in
46:28 - the map so trap dot parents equals game
46:31 - dot workspace find first child map and
46:39 - so that will put it in the map and that
46:42 - should be good now we then you might be
46:46 - wondering how do we kill the player when
46:50 - they step on it I've put a script in
46:53 - there it's called full damage I don't
46:55 - know why I think it's because I copy the
46:57 - script and forgot to rename it so I'm
46:59 - going to rename it to be death script
47:01 - although it doesn't really matter but in
47:03 - this bear trap again in the picky kit it
47:06 - came with it there's a touch deven so
47:08 - when something touches the bear trap
47:10 - he's going to get their player from
47:14 - their character the character is going
47:16 - to be the parent of the hit the hit is
47:18 - the argument that the part that touched
47:19 - the bear trap or the thing the body part
47:22 - so if it is a player and they're not the
47:24 - piggy is going to set their walk speed
47:27 - to be zero for five seconds and then
47:28 - it's going to set their walk speed back
47:32 - to 16 so you're going to be stuck for
47:34 - five seconds and after the five seconds
47:36 - it's going to destroy the trap so
47:39 - multiple people could get stuck in this
47:41 - trap but I
47:45 - I don't think that's a good idea for a
47:47 - few reasons because let's think about it
47:50 - if somebody first steps on the bear trap
47:52 - and then two seconds later someone else
47:54 - steps on it well after the bear trap
47:57 - gets destroyed after the first five
47:59 - seconds for the first person the traps
48:01 - going to get removed so it's going to
48:03 - stop this script so there won't be the
48:07 - second player that steps on it because
48:09 - the script gets destroyed he will be
48:11 - stuck forever so we're gonna have a
48:12 - debounce so I'm going to make another D
48:14 - bound so local debounce
48:16 - it was false and I'm going to say if
48:21 - player then if not D bounce then the
48:26 - bounce equals true gonna do this put
48:31 - this inside of here and then take this
48:35 - code ice might look a bit confusing but
48:39 - bear with me just thought about this
48:46 - whilst I was recording so cool so I've
48:51 - added the D bounce in here and there's
48:55 - no point in setting the D bounce value
48:57 - to become false again because we're
48:58 - gonna delete the bear trap and it will
48:59 - stop the scripts but what it will do is
49:01 - it will only allow one player to get
49:03 - stuck so when one player wants or when
49:06 - you activate the trap nobody else can
49:08 - get stuck in it because it will get
49:10 - destroyed after five seconds anyway and
49:11 - this will prevent players from getting
49:13 - stuck forever if they step on a trap
49:15 - that somebody else has stepped in so
49:17 - because after five seconds it's going to
49:20 - destroy the script if somebody else is
49:22 - stepped on it halfway through that five
49:24 - seconds the scripts going to be
49:25 - destroyed before they're five seconds
49:26 - are up so they're going to get
49:27 - infinitely stuck so you only want the
49:29 - first player that touches the bear trap
49:31 - to get stuck and this should do it okay
49:36 - go give it a try okay we've still got
49:40 - that toggle crouch GUI issue to work out
49:43 - as well but if we wait for the game to
49:47 - load you can see the piggy has their
49:50 - bear trap has loaded up and if they
49:54 - wanted to they could press control and
49:55 - it's gonna place a trap I'm gonna wait
49:58 - until he gets spawned in so we can get
50:02 - the player on the Left caught in the
50:04 - trap which would be in two seconds
50:06 - here we go so I'm gonna place a trap
50:08 - over here and I'm gonna place another
50:12 - one do you see how the number here went
50:14 - down as I placed one here we go and
50:17 - would place another one up here and if I
50:22 - go and stand in one of these Oh
50:26 - interesting the trap hasn't showed up oh
50:31 - hold on let's just have a look at this
50:41 - interesting
50:42 - okay we're going to have a bit of a
50:44 - debug now we're gonna try and debug this
50:47 - so let's just give the piggy some more
50:48 - traps it's not going to update on their
50:50 - GUI but if they place a trap then it
50:57 - destroys itself after five seconds uh I
50:59 - think I know what we've done here so
51:02 - what I think I've done is let's let's
51:06 - look at this so yeah my mistake so even
51:10 - if the piggy touches it we're already
51:12 - starting with debounce so because this
51:15 - if statement comes after the debounce if
51:17 - statement if the piggy steps on the trap
51:20 - it's going to start the debounce and
51:23 - it's going to wait five seconds even if
51:27 - they are the piggy it doesn't matter
51:28 - because this wait five seconds isn't in
51:30 - the if statement when it's when it
51:31 - should be and this should be in it as
51:33 - well so it's going to just destroy it
51:35 - after anybody touches it so when the
51:37 - piggy touches it which we don't want so
51:39 - let's take the ste bounce and put it
51:42 - inside of this if statement and then
51:47 - we'll take this code here and we'll put
51:51 - it in here as well so it's kind of hard
51:55 - to get your head around the bounce so
51:56 - don't worry if you finding it a little
51:58 - bit hard to understand let us just sort
52:03 - this out okay we've got an indent of one
52:08 - extra indent which we didn't need okay
52:11 - this should work now so the debounce
52:14 - will only trigger if the player is not
52:18 - the piggy so when somebody who is not
52:21 - the piggy steps on the bear trap then
52:24 - we're going to see if the debounce is
52:27 - false and if it is we're gonna set it to
52:28 - true so nobody else can step on the bear
52:31 - trap then we're gonna make the character
52:33 - stand still five seconds and then it's
52:36 - going to wait five seconds and then it's
52:39 - going to delete the script we don't need
52:41 - to set the debounce to false because the
52:43 - scripts gonna get deleted anyway because
52:44 - only one player is going to be using
52:46 - this trap let's try it once more so they
52:48 - go little example of me debugging my own
52:51 - code there so you need to learn how to
52:53 - debug as well so that when you face the
52:55 - type of problem
52:56 - you can fix them yourself and as you do
52:58 - more coding as you look into more
52:59 - problems your problem-solving skills
53:01 - they will get better trust me so here we
53:06 - go again wait five seconds to start the
53:09 - round and we will place one of the traps
53:13 - when the piggy spawns interestingly
53:18 - though the Crouch has appeared again so
53:20 - interesting we'll have to look into that
53:22 - a bit more I'm still a little bit
53:24 - puzzled as to why that's not working but
53:26 - if we wait for the piggy spawn which
53:31 - should be very soon
53:33 - I'm gonna head down to the lobby section
53:37 - down here I'm gonna let the piggy place
53:40 - trap
53:41 - and now if I step in one of these traps
53:45 - I get stuck and you can see I've kind of
53:49 - walked into the trap here and it's so if
53:55 - I jump into it I'd get stuck in it and
53:57 - that's because the trap is a and if I
53:59 - just walk on the edge of it it doesn't
54:01 - look like I'm touching it it still kills
54:03 - me all right it still freezes me that's
54:06 - because the trap is quite big I think if
54:09 - you make the trap smaller and you set
54:12 - the can collide in fact you don't need
54:14 - to make it smaller you can just set the
54:15 - can collide oh never mind actually
54:17 - that's that's a good point
54:20 - let's think about this so you could add
54:25 - a small weight here of maybe not 0.25
54:30 - seconds just to allow the player to walk
54:33 - into the trap a little bit more and that
54:36 - way they would it would look as if they
54:39 - get stuck in the middle of it they're
54:41 - still touching it they're just touching
54:42 - an invisible part of the block which we
54:44 - can't see because it's a mesh whereas
54:46 - there's a hitbox around it so if we go
54:49 - in at one of the edges we'll still be
54:51 - able to touch it so we'll try this again
54:56 - okay let's try this
54:58 - there we go that looks much better so
55:00 - just a little delay to allow me to keep
55:02 - walking into the trap before it deletes
55:04 - awesome and if we look at this again the
55:07 - piggy cannot get stuck because he's got
55:09 - that value inside of him which tells the
55:11 - script in the bear trap that he is the
55:12 - piggy so it's not going to trap him
55:16 - whereas because I'm a contestant I've
55:18 - not got a piggy value he's going to make
55:19 - me get stuck and the piggy he wants can
55:22 - use up all of his traps in one go we'll
55:25 - just let him use them here and when he
55:32 - gets down to zero he'd have none left
55:34 - so the piggy needs to use these traps
55:37 - really wisely and see he's down to zero
55:40 - he can't place any more but he can kill
55:42 - me okay brilliant
55:45 - so all it is left to do is fix that bug
55:50 - with the Crouch GUI and that we should
55:54 - be good for this episode
55:55 - in fact there's actually a hidden bug
55:59 - which I haven't told you about yet which
56:01 - we will also have a look at fixing in
56:02 - this episode and that is even though our
56:05 - Crouch DUI doesn't appear of course we
56:07 - can still Crouch but if you step in one
56:10 - of the piggies traps right now there's a
56:13 - bug that when you get stuck a quick way
56:17 - to get out of the trap is to crouch down
56:19 - so I'll show you again move the piggy
56:22 - out the way you get stuck in the trap if
56:23 - you crouch you can get out of it because
56:25 - the Crouch is adjusting your walk speed
56:28 - remember to slow you down and speed you
56:30 - back up when you press control so we're
56:32 - gonna have a look in that book as well
56:33 - so two books regarding the crouching to
56:37 - fix so I'm going to record myself
56:41 - investigating this book so that it helps
56:43 - teach you some debugging skills so I
56:45 - don't know at first whether this event
56:47 - is actually being picked up when it gets
56:48 - fired
56:49 - so let's print toggle cracks fired with
56:55 - visibility and then I'll pass through
56:59 - the visibility
57:02 - the visibility Oh
57:08 - already found the book that's about
57:11 - visibility wrong if you have a look
57:16 - it says visibility so visibility and Oh
57:23 - actually mm now that can't be right that
57:28 - can't be right because even I spelt it
57:31 - wrong I still have dated the crouch
57:34 - value so that's not the that's not the
57:36 - problem fixed so let's print out again
57:38 - toggle crouch picked up with visibility
57:47 - dot visibility
57:51 - I'll set it to be visibility anyway but
57:54 - we still need to work out why it isn't
57:57 - working so into test mode and trust me
58:02 - we'll get this book fixed there's no
58:04 - such thing as an unsolvable bug in my
58:07 - book because we'll be able to fix it
58:10 - trust me just got adopt the mentality
58:13 - that you can fix a book because I fix
58:16 - lots of books in my roblox development
58:18 - career so it's just about the learning
58:21 - so let's open it up
58:22 - crouched I see if it what we need to
58:24 - firstly work out here's the piggy ah
58:28 - attempt couldn't oh whoops I forgot to I
58:35 - forgot to hum fix the book what I've
58:38 - forgotten to set it to a string because
58:39 - you can't concatenate a ball value with
58:42 - a string but it appears that visibility
58:46 - is being fired sorry the event is being
58:50 - fired and it's passing a boolean value
58:52 - to it which is going to be either true
58:55 - or false
58:56 - so if we just test this again I'm going
58:58 - to skip to when it loads okay let's open
59:02 - up the outputs okay it's a
59:07 - for some reason while off see it should
59:11 - have here but it's very weird that
59:12 - sometimes it doesn't appear whereas
59:14 - sometimes it does okay interesting so
59:19 - I've just launched the game again and it
59:21 - hasn't fired the event we can see
59:24 - because asn't printed out there's been
59:25 - picked up so we know that the problem we
59:33 - know that the problem is to do with when
59:36 - we are firing it the event so let's have
59:41 - a look at that so it's going to be
59:50 - toggle crouch let's go to where we fire
59:55 - it so when we're looping through all of
59:57 - the contestants
59:58 - we are toggle crouch fire clients V true
60:05 - so it would appear that it's not getting
60:09 - to this else statement so let's print
60:11 - out firing toggle crouch for player V
60:22 - dot name and then let's print out V dot
60:30 - name outside of this if statement so we
60:31 - can see all of the players that is
60:33 - looping through interesting okay let's
60:40 - try again okay so
60:44 - it's worked again so let's go into the
60:46 - server and see what it says
60:47 - so it says player one now player 1 is
60:51 - the piggy so it's only printed out
60:53 - player one for some reason so let's have
60:55 - a look at this so let's go back to our
60:58 - game logic no game logic ran module no
61:06 - game logic my apologies
61:08 - so let's have a look so it's printed out
61:13 - player 1 which suggests that player 2 is
61:18 - not in this table for some reason let's
61:21 - have a look so it would suggest that's
61:33 - it would suggest that the second player
61:36 - is getting removed so I'm going to see
61:39 - I'm going to Prince added player
61:44 - v-- oom2 contestants I'm going to add
61:49 - them to this contestants table up here
61:51 - well I'm going to print when each
61:52 - player's added I've got a slight theory
61:55 - which I won't share with you yet I will
61:59 - share it with me though if this works ok
62:06 - I think my theory is correct so what's
62:09 - happening is the players at the start of
62:11 - the game are being added to this
62:13 - contestants table ok but when we get to
62:17 - the you see only prints out player 1
62:19 - it's not printing out player 2 who is
62:22 - the actual contestant so this to me is
62:24 - suggesting that when we are removing
62:26 - table we using table don't remove to
62:29 - remove the key out of the table it is
62:34 - this will sound very it might this might
62:38 - be hard to me to explain to you but if
62:39 - we imagine that in our table in our
62:44 - table here we have Alvin and we have na
62:50 - yeah if let me think about this for a
62:57 - second so if this piggy is the is me is
63:04 - a B what's going to happen is the for
63:09 - loop is starting out looping through all
63:11 - the contestants so it's going to loop
63:13 - through the first person and so I is
63:17 - going to be one and it's going to work
63:19 - out
63:20 - that a Billy is the piggy so it's going
63:22 - to remove a B from the table so what it
63:27 - looks like now is this Nyko 88 who is
63:33 - the contestant it's the only one left in
63:36 - the table and because a B has been
63:38 - removed his index is now one so when it
63:44 - then loops around and you would expect
63:46 - it to move on to nacho 88 it doesn't it
63:50 - just ends out of the for loop because it
63:54 - thinks that NACO 88 is at index 1
63:58 - because in the because these are index 1
64:00 - now well I would increase by 1 so I
64:04 - think what we need to do to fix this is
64:06 - to remove this part where we fire the
64:12 - toggle crouch but instead copy and paste
64:18 - this for loop and instead of this this
64:27 - fee equals equals chosen piggy we'll
64:29 - change it to not equal to chosen pigley
64:31 - and so if for everyone in the
64:35 - contestants if they are not the piggy
64:38 - then we're going to fire the toggle
64:41 - crouch for them because they they should
64:43 - still be in the contestant in the
64:45 - contestant table it's just that because
64:47 - the way it works when you remove someone
64:50 - from the table it shifts along but the I
64:53 - value will stay the same so you might
64:55 - miss someone out which is why the toggle
64:58 - Crouch is not firing but this way we
65:01 - have a separate for loop is going from
65:03 - the start again and
65:04 - will no longer be a piggy in there so it
65:06 - will it won't remove anyone from the
65:09 - table it will just start from the
65:11 - beginning again and it will set the
65:13 - toggle Crouch to enable to everybody so
65:17 - that should do it
65:18 - and you see I had to debug that there
65:21 - was no error I had to think logically
65:23 - about how it was working and I got to
65:25 - the end now if you're a beginner
65:27 - scriptor it's unlikely that you would
65:29 - have found the solution to that problem
65:31 - it might have took you a couple of hours
65:33 - but because I'm an experienced coder I
65:35 - managed to find that book really quickly
65:37 - and rectify it so the more coding you do
65:40 - and the more problems and books you get
65:42 - the better you get solving them so a
65:44 - couple years ago I wouldn't be able to
65:45 - solve that problem as quick as I have
65:47 - done right now but just keep going
65:50 - so to recap we're adding another for
65:52 - loop with this if statement here okay so
65:55 - if V the player is not equal to chosen
65:59 - pigley then we're gonna fire the toggle
66:03 - crotch rent now I hope this works
66:04 - because um I haven't actually tested it
66:06 - yet so let's see and the thing that led
66:10 - me to believe this was because it was
66:12 - only what it was only breaking and not
66:14 - showing the toggle Crouch when player
66:17 - two was not the piggy so when player one
66:20 - was the piggy they'd be the first one in
66:22 - the table I think and it would be
66:24 - removing them first which would leave
66:26 - player two still in the table but
66:28 - because the for loop had then moved on
66:31 - and changed I - - and realized there
66:34 - wasn't a second element in the table
66:35 - anymore
66:36 - it just broke out so let's see here so
66:43 - player 1 is the piggy so this wouldn't
66:45 - of sorry player 2 is the piggy but
66:49 - player 1 would come first anyway so this
66:51 - wouldn't affect it but let's keep trying
66:52 - it and here we go player 2 is the non
66:57 - piggy player 1 is the piggy and it's
67:00 - working perfectly so he press control it
67:02 - goes blue and when we release it it goes
67:04 - white and you can also click so really
67:07 - awesome we've got the crouching in here
67:08 - and if we go back to the server you'll
67:10 - see I did play a one two contestants
67:12 - added player two two contestants and
67:14 - then it fired the toggle crouch for
67:16 - player two
67:18 - so we've just fixed that book together
67:19 - and we've now got a working trap system
67:22 - we've got a working crouch system and
67:26 - we've got the animations done for them
67:27 - as well we've also been able to make the
67:31 - players escape from the game as well
67:32 - which is really really awesome final
67:36 - thing we need to do is fix that bug with
67:38 - the traps where if you get stuck in a
67:40 - trap you can crouch and it will change
67:42 - your walk speed now let's have a look
67:45 - and see if we can fix this so my
67:48 - solution proposed solution is to when
67:51 - you step in a trap we'll put a value
67:53 - inside your player called stuck and then
67:56 - in the crouching scripts we can detect
67:58 - if you have that stuck value and if you
68:01 - do have it then we won't let you crouch
68:05 - so let's see
68:08 - so in this debounce just after the
68:10 - debounce equals true we're going to say
68:15 - local stuck equals instance got you all
68:20 - value stuck dot name equals stuck and
68:25 - stuck dot parents equals player now I'm
68:30 - not going to worry about setting its
68:32 - value we don't need to do that all we
68:33 - need to do is just put it in the player
68:34 - so we can see if they have this tag it's
68:37 - more of a tagger and a value just
68:39 - telling us that they're stuck so now
68:40 - that we've done that we can or will need
68:44 - to delete it afterwards won't we will
68:45 - need to say player player dot stuck :
68:53 - destroy and that will delete it from
68:57 - there player in fact we'll just do if
68:59 - player find first child stuck then just
69:06 - in case it gets deleted somewhere else
69:08 - for some reason and it's not there if
69:10 - they leave the game after getting stuck
69:11 - you know so that's a good idea actually
69:16 - you can say if player dot character in
69:19 - there as well just in case they leave
69:21 - when they get stuck so this will delete
69:24 - after 5 seconds and then in the
69:26 - crouching script
69:28 - is here let's just put another if
69:31 - statement in here if player so if not so
69:36 - if they don't have the Crouch value if
69:37 - not player find first child stuck so we
69:41 - only want this if statement to run the
69:44 - code inside of it if they're not stuck
69:49 - yeah so we'll add another let me just
69:55 - look at this we need to have a an extra
69:58 - end there we go so if they don't have a
70:00 - stuck value then we will let them crouch
70:03 - but if they do have a stuck value and we
70:05 - will not let them because they're gonna
70:07 - be stuck in that's trap let's go and try
70:10 - this out so here I am I'm gonna place a
70:16 - load of traps as the piggy and I'm going
70:20 - to go and walk into them here and I get
70:25 - stuck i'ma try and Crouch but it's not
70:26 - gonna let me I'm pressing the Crouch key
70:28 - because I'm stuck but as soon as I
70:30 - become out of the trap it will let me
70:33 - crouch again there we go so if we look
70:40 - in the player player 2 and I place
70:45 - another trap watch carefully over here
70:47 - as I step in it
70:48 - you ready watch here so the stuck value
70:53 - has gone into my player so when I press
70:54 - control it sees that I have this stuck
70:57 - value so it won't let me crouch but as
70:59 - soon as it gets destroyed it will let me
71:00 - crouch again so awesome we fixed that
71:02 - bug so now if the piggy was to guaran
71:07 - let's say for example he puts a trap
71:09 - here and then he shuts the door again
71:11 - and the pig is chasing me so I decided
71:14 - to go and escape in here oh I can't go
71:17 - down I'm stuck so he can come in here
71:19 - and he can kill me so there we go we
71:22 - seem to have fixed the traps in the game
71:27 - and at the end of
71:30 - around the roles have changed so player
71:33 - to who was the character to begin with
71:35 - has now become the piggy or as the
71:37 - player on the right now has the ability
71:39 - to crouch but when the person on the
71:42 - left now presses control
71:44 - they don't crouch instead they place the
71:46 - trap really really awesome so that is
71:50 - pretty much the piggy game completed in
71:53 - terms of the round you're able to play
71:55 - now and have a proper game so as I said
71:58 - in the last video publish it by clicking
72:01 - on file and then click publish to roblox
72:05 - and you will be able to it's gone off my
72:09 - screen here we go you'll be able to give
72:11 - it a name description and then click on
72:14 - create that will then give you a link to
72:19 - the place if you want to make it set to
72:22 - active so that players can play it click
72:24 - on game settings and then click on
72:27 - permissions and set it to public so that
72:30 - anyone can play it and then if you go
72:33 - into your roblox
72:35 - profile sorry your roblox create page on
72:39 - the roblox menu at the top then you'll
72:43 - be able to see your place and your webs
72:45 - go and play it and you should be able to
72:47 - get a link to it as well from this
72:49 - button here I think it's only just
72:51 - because we've published it it's not
72:52 - showing up but if you do go to your
72:54 - roblox here you go you go to the create
72:59 - page click on games which is the first
73:02 - tab anyway and then click on the starts
73:04 - place you'll be able to go and play it
73:06 - with your friends so I'm sure that a lot
73:09 - of people in the comments will be asking
73:10 - oh can you make an extra feature for
73:12 - this can you make an extra feature to do
73:14 - that for example map voting and the
73:18 - answer is I can't do every single
73:19 - feature of piggy um you need to realize
73:21 - that and if you want to make your own
73:24 - features your own other features that
73:26 - you want to add then you can learn the
73:30 - basics of roblox scripting and you can
73:32 - try and make them yourself because it's
73:34 - just impossible for me to reply to
73:35 - everyone's comments and add every
73:37 - feature that everybody wants me to make
73:39 - I've tried to make this games realistic
73:40 - as possible but we do have to end this
73:42 - series at
73:43 - some point and I am going to create some
73:46 - extra videos after this off some more
73:48 - features but this is the main game
73:51 - completed so just know that I'm unable
73:53 - to make every single feature that you
73:55 - request but I will try to add on to them
73:57 - as much as I can I'll keep on supporting
74:00 - this series but at some point I have to
74:03 - stop them so that I can work on other
74:05 - videos and other projects if you
74:07 - understand that but we've made a pretty
74:09 - cool
74:10 - piggy games giving you a great
74:11 - introduction to roblox to do and
74:13 - scripting I recommend now that you go
74:16 - and check out my 23 I'm counting
74:18 - we're adding more videos as we go along
74:20 - 23 part series for those that are new to
74:23 - roblox development so you can learn the
74:25 - basics of coding I'm also going to be
74:27 - working on an advanced series after that
74:29 - as well so that you'll be able to learn
74:32 - how to make your own games that that you
74:35 - want to make you know not just games
74:37 - like piggy but you can make what you
74:39 - want to create I've got lots of videos
74:41 - on my channel and lots of other how to
74:42 - make a game series for you to check out
74:44 - but so I will keep adding to this series
74:47 - if I can as I said I've got some
74:49 - features that I do want to think about
74:51 - adding such as map voting that's
74:54 - something that you might see coming soon
74:56 - so yeah anyway thank you for watching
74:58 - this series so far I've been having
75:01 - blocks your host and guide please
75:04 - subscribe to my channel if you haven't
75:06 - already don't forget to click the like
75:08 - button and you can go to the next
75:09 - episode in the series if it's out by the
75:12 - time you're watching by clicking on the
75:14 - thumbnail in the middle of your screen
75:15 - there will be an arrow pointing to it so
75:17 - I'll see you in the next episode thanks
75:19 - for watching and I'll see you next time
75:21 - Cheers bye

Cleaned transcript:

hello everyone and welcome back to episode 5 in my how to make a piggy game in roblox series now we're getting closer and closer to finishing this series but today what we need to do we need to make Lea we need to add the logic in the for loop in our start round to detect when the players escape because currently if you escape it won't end the round so that's what we'll do today we're also going to be working on crouching and traps as well so very important parts of the game which are you know crucial to to how piggy works because we're balancing it out we're giving the piggy a little bit of power in that they can place traps but we're also allowing the players to Crouch so if they get in a sticky situation and they're trapped somewhere then they can crouch down and and get out one of those holes in the floor so that they can escape from the piggy so I've been getting a lot of questions from people saying that their game looks quite dark and if there's any way to turn up the brightness and there is if you go into lighting click on the lighting service and in the properties window you'll see this ambient property now if you turn this up it makes the game a lighter I wouldn't turn it up to the max amount so you just drag the slider and but drag it and see what's best for your game you can also edit the light bricks you can add your own bricks and put spotlights in them or surface lights like I've done in the in the lobby and also in the main map you'll see that if we have a look okay now it's in the intro tunnel actually I've put a light part with a surface light and that can make parts of the game brighter or darker so let's get straight into the code to end around if people escape so in the round module scripts we are going to go down here and in the last video we inserted the escaped value into the player when they exited the final door if we have a look for that you will see in the door module it's already there but it inserts this value called escaped when you touch the exit door which is unlocked with the white key so when you do touch it if you're a contestant and you've not already escaped you've not already got one of these values in your player we're going to insert that escaped value it's a ball value so it's going to be true or false but that doesn't matter it's just like one of those tags which we insert so that we can detect if you've got it and if you've got the escaped tag in your player we'll know that you've escaped and then that way in the round module all we need to do is every second just loop through all of the players and then if they have a escaped value then we can just have a variable and increase that for every single player that has it and that will tell us the amount of players that have escaped so let's create a variable and call it escapees I'm going to set this to zero it's going to be zero every single time it it loops around at the starts but then when we loop through every player in the game we're going to have another if statement here and we'll just say if player and by the way we are not never mind yes so we'll say if player kernel find first child escapes so if they've got that escaped value inside of them then we know that they've obviously hit the the door the final door and it's given them that value then we're going to increase that escapees variable by one so escapees equals escapees plus one so if there's five people in the game with this tag then it's going to start zero it's gonna loop through every player in the game and it's going to update this escapees variable by adding one to it and it's going to do that five times so at the end of the for loop we will know that there are five escapees because the escapees variable will be set to five so now we need to do a if statement outside of it just like we've done with the others before if the piggy is alive or not if they've if they've left if the piggy killed everyone and if the times up so we'll say if escapees is greater than zero if more than one person's escapes what sorry if one person or more has escaped if that escapees value is greater than zero then we're going to set the outcome variable to be escapes and so we can check in a minute to see if the outcome is escaped and if it is we can set the status value but then we want to break break out of the the for loop here the outer for loop which is counting down from ten minutes because everyone's escaped so we need to end the round then down here we can just add another else if we can say else if status value equals escapes oh do a leak cause needed there because it's an if statement then status dot value equals contestants have escaped piggy the losses okay so when the first person escapes and gets out we will just end the round okay now you could change this to end the round only when all the contestants are out but if you've got someone who's afk for example then they're probably not going to escape and the Piggy's going to have to catch them so it just ends the round when the first person's escapes because everyone's going to be working in the team and when the first person escapes everyone else is probably going to be around them escaping at the same time so I'm just ending the round when the first person or you know it could be everybody escapes at once but as soon as that first person has been registered and there's one escapee is going to end the round so of course there'll be a fivesecond wait as well so everybody else who still hasn't escaped has five seconds to head to the exit and get out before the round ends so now if we go in to the game and try out we should be able to escape and end the round so you're gonna start with the game and I'm gonna cut this part out so I'm gonna skip to when I'm about to escape in fact what I'm gonna do and I'm going to show you this as well if you want to save time and allow your player to escape really quickly if you're just testing you can go into the server window if you're in the test mode open up the server window and then head over to the map I'm going to use the Select tool I'm gonna press alt this selects each individual wooden block I'm just going to delete it because that's what the hammer would do then I'm gonna alt click on the generator and I'm going to set the on value to be true I'll change the color of this the display as well because that's usually what happen and then I need to get the white key so I'm going to basically alt click on this purple door which is the door to the downstairs area which is where the white key is I'm gonna move it away I'm going to drag it somewhere else I don't know where it's gone I'll just drag it out of the way so now and you have to do that on the server by the way so that everybody in the game can see it both the Piggy and me when we go down here this was that I was just a shortcut to save us from having to complete the game basically to get the final key so I'm gonna pick up the final key and we're gonna head over I know it's very dark down here and you can't really see and that's why you need to increase the ambience or maybe add a a surface light I'll probably do that later on and I'm gonna go back up here and now if we open up the server again and we go into the players service and it's player 1 you can see we don't currently have an escaped value but if you just move out over there there we go watch carefully as I unlock the door okay it's this that is added the escaped value and go it's ended the round okay I'll show you again I've opened up the server I'm gonna pick up the white key I'm gonna head out and it says you escaped and then it ends the round oh and just realized I made a mistake I said status top value instead of outcome I should have said house if outcome equals equals escapes then it will print out it will set status to say contestants have escaped that's why it didn't write that when we escaped so let's try once more and I've also just taken the status not value equal to MS I and I've put it above thee above any of these if statements here because it will update the status to the current time before it breaks the for loop because if it had broken it wouldn't have updated the status timer to the latest time so I've moved it from the bottom down here just up here but I've not I've not moved the weight so keep the weight down here but I've put the status just after the for loop and before the assignments but it doesn't really matter but what it doesn't matter is that you've changed the you made sure that you said outcome equals equals escapes just as you have with the others so let's go test that out again so if you go over here and we pick up the key which I've just brought up from downstairs in the server and I'm going to unlock the door and it says contestants have escaped piggy loses and then the next round is going to start brilliant yeah so what we now need to do because if we just pause the game here we open up the Explorer and we go in here you'll still see I've got the escaped value so we need to delete that in our in our cleanup function where we you know clean up the round ready for the next one so if we go into the remove tags area what we can do is we can just do a very very simple in the else if V is a contestant we don't want to do this for the piggy goes to sewing two contestants that can escape so we're going to say what you can do it outside if you want I guess it doesn't really matter so you can say if the color find first child because if the piggy doesn't have it then it won't matter escapes then V dot escape to coat on destroy so if the player has the escaped value then we're going to delete it and then that way they'll have to escape again in the next round for them to get it because if we kept it in it will start being counted from the start of the next round when you haven't escaped so that's very important there and if you do try it again you'll see that the escape value gets deleted so you can see if we pick up the key unlock the door you'll see that player 2 has the escape value but then as the round ends and the remove tags function fires it gets destroyed as does any contestants value all right next we're going to work on the crouching a lot of people have been wanting to know how to do this I'm going to show you and just as with the piggy bats I can't share my animations with you because roblox just prevents you from sharing animations of the minute so I'm going to teach you how you can make your own piggy and Crouch animation it's very very simple but the majority of the work has already been done the crouching script was in the piggy kit so if you're going to start the GUI click on main GUI and it's inside this anims local script which is where if you often it won't work as a minute but if you have an animation in here which you own it would work straight away so I'm going to walk you through the code so firstly we've got this function which we're going to call and it firstly checks to see if you're a contestant because we only want the contestants to be able to crouch and if you are a contestant then we've got this variable called and in playing which tells us whether the animation is currently playing or not because if it is currently playing which is handled in this else statement then we want to stop the animation but if it's not currently playing we want to start it so to start the animation we create an animation objects we load in the animation ID which we've put in this variable up here and so if you want to put your own animation in you just change the ID here but keep the RBX assets I D but and then you play the animation because you load it into the characters humanoid and then you play it and then I'm slowing the player down so I'm setting the player's character the humanoid in the in the humanoid setting their walk speed property walk speed has capital s to ten so it slows them down I update the variable so it then when we call the Crouch function again the an implying will be true so it will do the opposite of what it currently is doing sort of like the stop will play it and then I'm setting the as a GUI which will appear called Crouch inside the main GUI here I just make it visible you can see and when you press the Crouch button or you start crouching it will change the color to be blue roughly text and the image button and it will just print out that it's plain when you want to stop the animation it will print it's going to stop then it's going to loop through all of the while it's going to call a function on your humanoid called get playing animation tracks this is built into roblox and it will return back a table of all of the animations that are currently playing and so we can loop through them in this for loop and stop every animation it's currently playing so it basically stops your Crouch then and if you don't want to if you have other the other animations that you don't want to stop you could have an if statement here to check the name of the animation and only stop a certain one but this will stop all animations we don't have any other animations in the game currently for the contestants except for the Piggy bat but that's for the piggy so doesn't matter we're then assessing the walk speed back to the default of 16 so if you increase your walk speed your default walk speed and make sure that you change it here as well because 16 is the current defaults then we set the an implying variable to false so that when we press Crouch again it will do the opposite and we're just reverting the image button and the text labels color back to white so it looks on the GUI that it's not enabled then down here we're using the user input service which is detecting user input so like when you press a key so when you have started an input so it could be a mouse click or something we are detecting if you press the left control button if you to change the button that starts your crouch you could do enum key code and then if you wanted it to be the a key you just write a he wanted it to be shift you'd say left shift I think yeah left shift so I'm going to leave it at left control and enum is like a list of options that we can choose because enum dot key code will only take a certain number of inputs it could be any key on your keyboard so we just look them up using an enum and then when you have pressed the correct inputs with calling the crouched function which is up here so it will either start or stop your crouching and then if you're on mobile to make it work we're also hooking it up to a mouse button one click event on the Crouch button so that you can click the button I just show you to enable or disable your crouching and then down here we have some code for a remote events which we're going to add in to replicate the storage so go into replicated storage add another remote events and make sure that you call it toggle crouch now what this is going to do is in the server at certain time so for example at the end of the round we want to disable the crouching if you're in the lobby so also if you're the piggy we want to turn off your ability to crouch or to show the GUI so we can fire the toggle crouch event from the server and we can have an argument which will be whether it's going to be turned visible or invisible so true or false and then when that is fired from the server we can set the visibility of the Crouch button to either be true or false we will stop playing the animations and we will set everybody's walk speed back to 16 so this remote events events is going to be used to turn off the crouching for people at certain times so when the round ends so we fire it from the server and then all clients are going to pick it up with this event and it's going to remove that it's going to make the Crouch GUI invisible it's going to stop the current animation it's going to reset and in playing to false so you're not crouching anymore and we will set that in a server script so let's just go into the server scripts where we want to disable the crouching and we can fire this toggle Crouch events so if you think about it if somebody has just played around we want to hide the crouching GUI when you hit the lobby again when the round is over so what we can do is in the remove tags function which will just clean up after arounds finished in this for loop looping through all the players in the game we can say game got replicated storage toggle crouch and in fact that's what we'll do is we'll put this outside of the for loop here because we only need it to run once because we're going to fire it for all clients like this so for every player in the game we're going to fire this or a motive end and that way when we use fire or clients we don't need to specify the player who we're going to fire this event for because it's going to fire for every player in the game and we want to toggle it to be false we want so we're sending the false argument so that when we pick it up in this script we've got the visibility so we can set the Crouch crouch GUI visibility to be false even though this is disabling the animations anyway I guess we could just say false here and that would do it anyway but so I'm going to remove that so a visibility argument because this is just disabling the Crouch anyway so it's not like we're going to use it to turn it on in fact that's not true because we're gonna want to actually enable the GUI again so I'm going to keep this visibility I'm gonna keep that because we might want to turn it on or off so it might be true or might be false at times because we will want to when the round starts we're going to want to enable it again for all the players that aren't the piggy so if we go back to the round module so we've done that and that will disable it for everyone but then if we go into our game logic script and goes let's think about this so when the piggy has been chosen and we're removing the piggy from the table if they are the chosen piggy let's do an else so if the ALF statement runs we know that the contestant that we're currently looping through is not going to be the piggy so we want to toggle the Crouch GUI to show up so we can say game got replicated storage darts toggle crouch curl on fire clients and then we want to we're not doing fire all clients because that would fire it for the piggy as well so we're firing for each individual contestant but we're looping through them at the same time so it's going to happen for all contestants we're then going to pass the argument true so that when we go down into the Animas crypt and it's gets and picked up you're going to enable the Crouch GUI it's going to disable your animations that are currently playing though and set the an implying to false so that it's just appeared and from then on you can start playing pressing crouching and clicking the button and stop playing your animation so it's just enabled the Crouch GUI then we need to enable the GUI one more time for those that join halfway through the round so if we go into the event handling script and we go down into this menu play event this is going to be when people join halfway through when they've pressed play on the menu so what we can do is we can say game dot replicated storage dot toggle crouch her on fire clients again not fire all clients we're sending the specific player that we want to enable the GUI for which can be player because it's the player that clicked the button and get passed to this on server events and then we're going to say true because we want it to appear so now when the game starts we should be seeing that crouched GUI appear that's wait and see there we go it's appearing for the player on the right because they are a contestant but the player on the left is the Piggy's office it's not going to turn it's not going to appear now next we need to make this crouching animation now because I've already made one but I can't share it with you this is what its gonna look like okay so we're gonna make this I'm going to teach you how to make it so you can make it for yourself in the animation editor is very simple and I know my Crouch animation doesn't look the best that's because I spent about five minutes on it because I know that I knew that I wasn't gonna be able to share it with you so I'm not going to make a very detailed one because it's you that's going to be making the animation in the end so let's go ahead and do that now so we're going to open up the animation editor but before we do that we're going to insert a rig so click on build rig then click on our 15block rig now I'm not going to do a r6 animation because I'm going to set this game to be r15 only if you wanted to do an r6 one you could but arms are going to set the game to our fifty and it makes it look a lot simpler so then go into animation editor click on your dummy then you can name the animation I'm gonna call it crouch and click on create' and what we need to do is don't move the blue line okay don't move the scrubber first thing we're going to do click on the three dots very important then click on set animation priority and click action if your Crouch animation isn't working for you it's most likely because you've forgotten to set the animation priority and it's not being played because the roblox movements grips when you walk and your idle are being played and being prioritized and played over it so it's not playing at all so set the animation priority to action then again don't move the scrubber but we're going to position this rig into a crouching position so to do this well imagine that this grid is the floor so we're going to firstly click on their lower torso so this small torso here okay you have to click on this one if you click on the upper torso and try and move the player all their body parts are going to get skewed off and I'm not going to work so click on the lower torso here okay then go to home select the move tool and drag him down get it to about here so that his torso in fact I'm just gonna do it around here so that say quarter of his leg is above the ground then I'm going to take his right leg I'm going to use the rotate tool and I'm going to rotate it vertically okay so it looks like he's bending his arm his leg sorry then I'm gonna take the next part of his leg and bend it up a bit okay right then I'm gonna take the next leg gonna click on the upper part of it I'm gonna drag it rotate it forward like this I'm gonna take the second part of his leg and drag it down a bit okay so not the best Crouch animation but guess what it works um if you want to animate the arms you can do so as well so you could maybe drag them into the middle like this I know in the actual piggy game the animation animates their arms so I'm just going to show you how to do that as well and again my animation skills aren't very good I'm mainly a scripter so you know bear with me a bit here so when you've finished your animation again not moving the we're not moving the scrubber along because we want it to be playing this infinitely this same pose let's check this one out what I'm gonna do is I'm going to move the lower torso off the ground a little bit more like this just so that we can get the players legs in like this and I'm gonna rotate the leg up a little bit more if you don't want it to snap when you rotate click on model and uncheck the rotate in the snap to grid section that way you'll just have free control over your Lex I'm gonna bend this one a little bit more like this okay now if we play the animation first I'm going to click on this button here so that it loops and if you just play it it's going to off see it's going to constantly loop we only got one pose so the players always going to look like this so now what we can do is we can export this animation so click on the three dots click on exports and then click create new give it a name I'm gonna call it crouch come finish and the same as we did with the piggy bat select just the ID right click copy if you don't see this box just go to the roblox page website go to create and then in the size section you should see animations and you can find a link to your animation right then close down the animation editor head back to your animus grips and take the animation ID variable and replace the numbers here with your animation ID keep this RBX asset ID part because that tells the script to look up on the roblox site for this animation ID right now we're good to test it out so we're gonna go into a server again and see what happens now it might be that it's probably likely that we're gonna have to change this animation because it might not look right but that's fine I'll show you how we can change it alright so here we go around about the starts okay the GUI hasn't shown up we'll investigate that in a minute but if we press ctrl the scripts still be working so there we go we are crouching and you can see that we're now it's working pretty good I'm liking this animation and now we can slip through these little holes where as we couldn't before so if the P key was chasing you and you wanted to make a quick escape you could just a crouch down and boom you're out so really really nice I like that so I'm going record myself debugging this animation GUI to see what's happening okay it's appeared now for some reason okay so that's very weird because I've been testing it a lot of times and it's been showing up the crouch UI and so that one time where it didn't show up was quite interesting because it obviously works but then for some reason that time when we first tested the animation it didn't which is very interesting but I'll just reset and you'll see that the Crouch UI is still there but nevermind it's gone now because we fired that toggle crouch because obviously we died and then we respawned and then it loaded everybody again when the round had ended and I'd let's to see yeah it seems to be working for me so I don't think there's any issues that might have just been a oneoff but the good thing is that we have our animation in there now and it is working really well so we don't need to go back in and edit it but if you do want to change your animation a bit it's very simple head back into the animation editor like this and it might have loaded itself but if it hasn't then click on the three dots import from roblox and then select the Crouch animation that you're saved and then to save yourself from having to put the animation ID and again when you are want wanting to export it again just overwrite the one you just made but really important is that you click the three dots set animation priority and click action else it's not going to work I can't dress that enough okay so that is the crouching done so if you're still having problems make sure that you've added the remote event and that you've been following along carefully and also that you've done your animation yourself because it's not going to work unless you've made your own animation and put it into the Animas scripts okay so next we're going to do is we're going to do the traps so we've done the crouching we now need to make the traps for the piggy now I'm just going to say delete this dummy when you finished with it we no longer need it that was only used for the animation so I'm going to show you now how you can make your traps work so alongside the main GUI in the piggy kit I also gave you a GUI called trap GUI now if you make this GUI enabled click on it and set the enabled property to be true you'll see that it appears and it shows a bear trap with the amount of traps you have left and also a instruction so that you press the control button or you tap on the button click it to place a trap so inside of here there's a local script and it's very similar actually to the animations in it there's a function called trap and when called it detects to see if you're the piggy if you've got that value inside that tells you the piggy we've also got a D bounce and the debounce allows you to have a cooldown so you can only use the trap once every 5 seconds and the way that works that we have a variable and we set it to false to begin with and we'll only let you place a trap if that variable is false and so not debounce is the same saying if the bounce is false so if it is false we're gonna set it to true so that if you keep putting trap because the debounce variable is now set to true this is not going to pass so it's not going to let you place any more traps until the debounce becomes false so after 5 seconds we're going to set D bounce to be false and then once the debounce has first been set the text label inside the trap button which looks like this this control / tap will change its text to say wait and then we will fire a remote event to the server which is going to place that trap and we're also going to script a value into the player called trap counts we haven't made that yet but we will do it very soon and that is going to track how many traps the piggy has left to use and every time they place a trap will update the red eye so have a look at the red text which says 5 to be the amount of traps you have left the value of that truck out and then after five seconds we set the debounce to false and we set the text label of the trap that says control back to its original value which was saying weight before and then we using the user input surface again to see if you've pressed the left control and if you have then we'll call up the trap function and if you've clicked it maybe you might be on a mobile you've tapped it or clicked it it will also call the trap function and also we have another remote event called toggle trap this is very similar to toggle crouch in that it will make the trap GUI show up or go off screen it will make it visible or invisible but instead it sets its enabled property instead of the visible property of the trap person which you could set but I've just chosen to use enabled so we're gonna need two more remote events to begin with and it's we're gonna have one for the toggle trap so insert our most events and set it to toggle trap like that and one more which is going to be called place trap so we're going to fire the place trap when we want to lay down a trap in the Piggy's current location and then we're going to have another one which will make the trap GUI appear on the screen or make it go off the screen when the ground is finished or when the piggy has been selected so firstly let's make this trap GUI show up so very simple so let's go into the round module and we're gonna go to the function where we teleport the piggy teleport piggy here we go teleport piggy so inside of here well firstly going to create that a value inside of the piggy called trap count okay very simple and this is what's going to look like just to speed up the video by now you should know how to insert values so recruiting a variable called trap count where instancing in a in value changing its name to be trap counts then by setting its value to be five that's the amount of traps the piggy can place of course you can change this to a bigger number such as ten I recommend you keep it at five because it keeps the game balanced and then we're gonna say trap counselor parent equals player so it puts it in the piggy in there player so only the piggy is going to have this value that's why we've put it in to teleport piggy and then we're going to want to make that GUI appear so we're gonna say game dot replicate this storage got toggle trap I'm sorry toggle trap Carol on fire clients not fire all clients we're gonna use fire clients we only want to fire it for the piggy so we're going to put the player in the player argument that's going to fire four which is going to be the piggy which we passed to this function and then we're going to set the second argument to be true because we want to make that DUI appear and later on when we want to make it invisible or disabled we will just call at this remote event again specifying the piggy and also having the second argument to be false so that the script knows to set the enabled property of the trap GUI to be false so next we need to do just that so we're going to scroll down a bit to the remove tags function and inside of here inside of the if the find first child picky when we're looping through all the players in the game when we found the piggy what we're going to do is we're going to firstly just underneath the part where it deletes your tools and the piggy back we're going to see if you have that trap count value so if the code on find first child trap counts then V dot trap counts destroy okay it's going to delete that trap count value out of your player because we no longer need it and if you've just been the piggy and the next round you're gonna be a contestant even if you are the piggy next runned again it's going to insert another trap count into your player so we need to delete it at the end of the round especially though if you're going to be a contestant next round we don't want you to have a trap count value in your player so after that we're then going to fire that our remote event again to disable the trap GUI on the picking screen because if they're no longer the piggy we don't want them to be able to see that's trapped GUI because if they're a contestant next round they're gonna get the toggle crouch they're gonna get the crouch GUI which is gonna be in the same position so we're gonna say game don't replicate the storage once again topping trap curl on fire clients we need to pass the piggy the current player that we're looping through whose GUI we're going to disable that's going to be V because V represents the current player that we're looping through in this table and that table is game dot players come get players up here so the current player that we're looping through it's going to be V we know that there's a piggy because we've doing this if statement to check if they are then we're gonna say comma and we're gonna say folks because we want to disable the trap GUI now in theory if you are chosen to be the piggy then after you die then the GUI should hide itself because it's got a reset on spawn property set to true so we'll reset how it first looked when the GUI was inserted into your player and the trap button is going to be invisible at that point because the GUI is disabled but just as a good practice to make sure that actually did happen we can use this toggle trap remote event to make sure that it is disabled and set to a false which is useful if you don't kill the piggy for example if you just teleport them back after the end of the round so now if we test the game out you'll see that when the round begins the piggy should see they're trapped GUI and there we go they do see it and for some reason the toggle Crouch still is not working so we will investigate that a bit more but before we do that we are going to make it so that the piggy is able to place their traps because currently they will be able to press control and it will say wait but they won't be able to actually place them and that's because we've got to do the coding on the server we got to pick up that's remote events called place trap when it gets fired and we're going to place a trap in the Piggy's current location we're going to do that on the server though so let's go into the event handling script and let's just create a another event called game replicate this storage dot place trap dot on server event so when it's fired to the server colon connect function player just like that and then we need to firstly make sure that the person that's calling this remote event is the piggy because it could be somebody that you know tries to exploit and is actually a contestant so we can say if player cut on find first child piggy so if they've got that piggy value then we'll make sure that they've got a trap count value if player curl on find first trialed trap count then we need to have a debounce don't we we need to have a diva like we had a V bounce for the what do we have the D that's the debounce was for is the it was in so we had D bounce for these stun scripts and the bat script as well but yeah the debounce will stop the piggy from being able to lay down five traps at once by spamming on the Crimewatch button so local trap debounce equals false this is only going to be used in this place trap event so we need to say if not trap debounce then so if d bat is the trap debounce is false which means that they can place a trap we need to set it to be true so they can no longer place a trap after that for us for a five seconds so we'll wait five seconds and then we'll set trap D bounce back to false so that for five seconds you won't be able to place any more traps before it then unlocks again to the five seconds will unlock the debounce by setting the variable back to false because we allow the for loop to pass if the condition is that lead trapped debounce is false so when it's true it's not going to run so in here we need to then check to see if the player has enough traps left because they could have used the fall of their traps so if player dot trap count dot value is greater than zero then if it have got enough traps a number greater than zero so five four three two or one if they have zero traps well it's not going to pass because zero is we our condition is that the amount of traps that you have has to be greater than zero and so then we need to put the bear trap in the map but we firstly have to check see if the map is there so we say if game dot workspace curl on find first child map this is just some extra security and safety so that the script won't error if the map isn't there for some reason no reason why it shouldn't be but you know then we're gonna say player the dart truck and we're gonna subtract one from their current trap camps when they've placed a trap we need to remove one from their trap count value so player thought trap count thought value equals and then we'll just say play a lot truck a lot value because that's their current value minus one so it takes one away from the current value so if they have 5 it would be 5 minus one so would then turn into four right now we need to actually place the bear trap so in the piggy kit I gave you a mesh of a bear trap I'm just going to drag it into workspace to show you here we are nice bear trap very nice you can resize it if you want doesn't really matter so I'm going to take this bear trap in fact it kind of does matter if you resize it on the yaxis you make it bigger like this then it's going to interfere in a minute with the placement and I'll explain more so put it back into server storage that was just to show you go back into event handling we're going to clone this bear trap so local trap equals game doctor server storage dot bear underscore trap colon clone because it's got an underscore in the name then we're going to set the C frame off of the trap so C frame again is like the position but with rotation as well so C frame is just a better way in my opinion of placing these type of things so we're gonna set the traps C frame to be the C frame of the player's humanoid root partner the humanoid root part is a invisible part in the middle of the player's character so positioning it there we'll be able to put it where the player standing right in terms of x and y because it will be in the middle of the player's character sorry x and z the y value it will be off the ground in the middle of the player's character so we'll need to offset it a bit to put it down on the ground so we're gonna say player dot character dot humanoid root part dot C frame and this is how we offset it so it's currently going to be in the middle of the piggies body so like about level with their bats or their arm so we need to subtract a number of studs from this C frame value to put it down on the ground and so if you've increased the size of your trap you're going to need to change this number the amount of studs this that it's going to be offset by so that it is it looks like it's on the floor so we're going to say vector 3 dot new so vector3 value is just made up of three values and x y&z value and they are the amount of studs that is going to move on each axis so we can leave the x and y values 0 sorry the x and z value 0 but we're going to set the Y value to be 3.5 so it's going to subtract 3 point five studs vertically from the C frame of the trap so it's going to move it down by three point five studs if you wanted to move it up you would change this to a plus but it's a minus because we want to subtract to move it down so now that we've placed the trap and again change this if you want if you don't change your piggy character as well this should work fine but if you use a different piggy character which might be a different size you'll probably need to change this value three point five so play around with it although currently works well for me right next we need to parent this trap so I'm gonna put it in the map so trap dot parents equals game dot workspace find first child map and so that will put it in the map and that should be good now we then you might be wondering how do we kill the player when they step on it I've put a script in there it's called full damage I don't know why I think it's because I copy the script and forgot to rename it so I'm going to rename it to be death script although it doesn't really matter but in this bear trap again in the picky kit it came with it there's a touch deven so when something touches the bear trap he's going to get their player from their character the character is going to be the parent of the hit the hit is the argument that the part that touched the bear trap or the thing the body part so if it is a player and they're not the piggy is going to set their walk speed to be zero for five seconds and then it's going to set their walk speed back to 16 so you're going to be stuck for five seconds and after the five seconds it's going to destroy the trap so multiple people could get stuck in this trap but I I don't think that's a good idea for a few reasons because let's think about it if somebody first steps on the bear trap and then two seconds later someone else steps on it well after the bear trap gets destroyed after the first five seconds for the first person the traps going to get removed so it's going to stop this script so there won't be the second player that steps on it because the script gets destroyed he will be stuck forever so we're gonna have a debounce so I'm going to make another D bound so local debounce it was false and I'm going to say if player then if not D bounce then the bounce equals true gonna do this put this inside of here and then take this code ice might look a bit confusing but bear with me just thought about this whilst I was recording so cool so I've added the D bounce in here and there's no point in setting the D bounce value to become false again because we're gonna delete the bear trap and it will stop the scripts but what it will do is it will only allow one player to get stuck so when one player wants or when you activate the trap nobody else can get stuck in it because it will get destroyed after five seconds anyway and this will prevent players from getting stuck forever if they step on a trap that somebody else has stepped in so because after five seconds it's going to destroy the script if somebody else is stepped on it halfway through that five seconds the scripts going to be destroyed before they're five seconds are up so they're going to get infinitely stuck so you only want the first player that touches the bear trap to get stuck and this should do it okay go give it a try okay we've still got that toggle crouch GUI issue to work out as well but if we wait for the game to load you can see the piggy has their bear trap has loaded up and if they wanted to they could press control and it's gonna place a trap I'm gonna wait until he gets spawned in so we can get the player on the Left caught in the trap which would be in two seconds here we go so I'm gonna place a trap over here and I'm gonna place another one do you see how the number here went down as I placed one here we go and would place another one up here and if I go and stand in one of these Oh interesting the trap hasn't showed up oh hold on let's just have a look at this interesting okay we're going to have a bit of a debug now we're gonna try and debug this so let's just give the piggy some more traps it's not going to update on their GUI but if they place a trap then it destroys itself after five seconds uh I think I know what we've done here so what I think I've done is let's let's look at this so yeah my mistake so even if the piggy touches it we're already starting with debounce so because this if statement comes after the debounce if statement if the piggy steps on the trap it's going to start the debounce and it's going to wait five seconds even if they are the piggy it doesn't matter because this wait five seconds isn't in the if statement when it's when it should be and this should be in it as well so it's going to just destroy it after anybody touches it so when the piggy touches it which we don't want so let's take the ste bounce and put it inside of this if statement and then we'll take this code here and we'll put it in here as well so it's kind of hard to get your head around the bounce so don't worry if you finding it a little bit hard to understand let us just sort this out okay we've got an indent of one extra indent which we didn't need okay this should work now so the debounce will only trigger if the player is not the piggy so when somebody who is not the piggy steps on the bear trap then we're going to see if the debounce is false and if it is we're gonna set it to true so nobody else can step on the bear trap then we're gonna make the character stand still five seconds and then it's going to wait five seconds and then it's going to delete the script we don't need to set the debounce to false because the scripts gonna get deleted anyway because only one player is going to be using this trap let's try it once more so they go little example of me debugging my own code there so you need to learn how to debug as well so that when you face the type of problem you can fix them yourself and as you do more coding as you look into more problems your problemsolving skills they will get better trust me so here we go again wait five seconds to start the round and we will place one of the traps when the piggy spawns interestingly though the Crouch has appeared again so interesting we'll have to look into that a bit more I'm still a little bit puzzled as to why that's not working but if we wait for the piggy spawn which should be very soon I'm gonna head down to the lobby section down here I'm gonna let the piggy place trap and now if I step in one of these traps I get stuck and you can see I've kind of walked into the trap here and it's so if I jump into it I'd get stuck in it and that's because the trap is a and if I just walk on the edge of it it doesn't look like I'm touching it it still kills me all right it still freezes me that's because the trap is quite big I think if you make the trap smaller and you set the can collide in fact you don't need to make it smaller you can just set the can collide oh never mind actually that's that's a good point let's think about this so you could add a small weight here of maybe not 0.25 seconds just to allow the player to walk into the trap a little bit more and that way they would it would look as if they get stuck in the middle of it they're still touching it they're just touching an invisible part of the block which we can't see because it's a mesh whereas there's a hitbox around it so if we go in at one of the edges we'll still be able to touch it so we'll try this again okay let's try this there we go that looks much better so just a little delay to allow me to keep walking into the trap before it deletes awesome and if we look at this again the piggy cannot get stuck because he's got that value inside of him which tells the script in the bear trap that he is the piggy so it's not going to trap him whereas because I'm a contestant I've not got a piggy value he's going to make me get stuck and the piggy he wants can use up all of his traps in one go we'll just let him use them here and when he gets down to zero he'd have none left so the piggy needs to use these traps really wisely and see he's down to zero he can't place any more but he can kill me okay brilliant so all it is left to do is fix that bug with the Crouch GUI and that we should be good for this episode in fact there's actually a hidden bug which I haven't told you about yet which we will also have a look at fixing in this episode and that is even though our Crouch DUI doesn't appear of course we can still Crouch but if you step in one of the piggies traps right now there's a bug that when you get stuck a quick way to get out of the trap is to crouch down so I'll show you again move the piggy out the way you get stuck in the trap if you crouch you can get out of it because the Crouch is adjusting your walk speed remember to slow you down and speed you back up when you press control so we're gonna have a look in that book as well so two books regarding the crouching to fix so I'm going to record myself investigating this book so that it helps teach you some debugging skills so I don't know at first whether this event is actually being picked up when it gets fired so let's print toggle cracks fired with visibility and then I'll pass through the visibility the visibility Oh already found the book that's about visibility wrong if you have a look it says visibility so visibility and Oh actually mm now that can't be right that can't be right because even I spelt it wrong I still have dated the crouch value so that's not the that's not the problem fixed so let's print out again toggle crouch picked up with visibility dot visibility I'll set it to be visibility anyway but we still need to work out why it isn't working so into test mode and trust me we'll get this book fixed there's no such thing as an unsolvable bug in my book because we'll be able to fix it trust me just got adopt the mentality that you can fix a book because I fix lots of books in my roblox development career so it's just about the learning so let's open it up crouched I see if it what we need to firstly work out here's the piggy ah attempt couldn't oh whoops I forgot to I forgot to hum fix the book what I've forgotten to set it to a string because you can't concatenate a ball value with a string but it appears that visibility is being fired sorry the event is being fired and it's passing a boolean value to it which is going to be either true or false so if we just test this again I'm going to skip to when it loads okay let's open up the outputs okay it's a for some reason while off see it should have here but it's very weird that sometimes it doesn't appear whereas sometimes it does okay interesting so I've just launched the game again and it hasn't fired the event we can see because asn't printed out there's been picked up so we know that the problem we know that the problem is to do with when we are firing it the event so let's have a look at that so it's going to be toggle crouch let's go to where we fire it so when we're looping through all of the contestants we are toggle crouch fire clients V true so it would appear that it's not getting to this else statement so let's print out firing toggle crouch for player V dot name and then let's print out V dot name outside of this if statement so we can see all of the players that is looping through interesting okay let's try again okay so it's worked again so let's go into the server and see what it says so it says player one now player 1 is the piggy so it's only printed out player one for some reason so let's have a look at this so let's go back to our game logic no game logic ran module no game logic my apologies so let's have a look so it's printed out player 1 which suggests that player 2 is not in this table for some reason let's have a look so it would suggest that's it would suggest that the second player is getting removed so I'm going to see I'm going to Prince added player v oom2 contestants I'm going to add them to this contestants table up here well I'm going to print when each player's added I've got a slight theory which I won't share with you yet I will share it with me though if this works ok I think my theory is correct so what's happening is the players at the start of the game are being added to this contestants table ok but when we get to the you see only prints out player 1 it's not printing out player 2 who is the actual contestant so this to me is suggesting that when we are removing table we using table don't remove to remove the key out of the table it is this will sound very it might this might be hard to me to explain to you but if we imagine that in our table in our table here we have Alvin and we have na yeah if let me think about this for a second so if this piggy is the is me is a B what's going to happen is the for loop is starting out looping through all the contestants so it's going to loop through the first person and so I is going to be one and it's going to work out that a Billy is the piggy so it's going to remove a B from the table so what it looks like now is this Nyko 88 who is the contestant it's the only one left in the table and because a B has been removed his index is now one so when it then loops around and you would expect it to move on to nacho 88 it doesn't it just ends out of the for loop because it thinks that NACO 88 is at index 1 because in the because these are index 1 now well I would increase by 1 so I think what we need to do to fix this is to remove this part where we fire the toggle crouch but instead copy and paste this for loop and instead of this this fee equals equals chosen piggy we'll change it to not equal to chosen pigley and so if for everyone in the contestants if they are not the piggy then we're going to fire the toggle crouch for them because they they should still be in the contestant in the contestant table it's just that because the way it works when you remove someone from the table it shifts along but the I value will stay the same so you might miss someone out which is why the toggle Crouch is not firing but this way we have a separate for loop is going from the start again and will no longer be a piggy in there so it will it won't remove anyone from the table it will just start from the beginning again and it will set the toggle Crouch to enable to everybody so that should do it and you see I had to debug that there was no error I had to think logically about how it was working and I got to the end now if you're a beginner scriptor it's unlikely that you would have found the solution to that problem it might have took you a couple of hours but because I'm an experienced coder I managed to find that book really quickly and rectify it so the more coding you do and the more problems and books you get the better you get solving them so a couple years ago I wouldn't be able to solve that problem as quick as I have done right now but just keep going so to recap we're adding another for loop with this if statement here okay so if V the player is not equal to chosen pigley then we're gonna fire the toggle crotch rent now I hope this works because um I haven't actually tested it yet so let's see and the thing that led me to believe this was because it was only what it was only breaking and not showing the toggle Crouch when player two was not the piggy so when player one was the piggy they'd be the first one in the table I think and it would be removing them first which would leave player two still in the table but because the for loop had then moved on and changed I and realized there wasn't a second element in the table anymore it just broke out so let's see here so player 1 is the piggy so this wouldn't of sorry player 2 is the piggy but player 1 would come first anyway so this wouldn't affect it but let's keep trying it and here we go player 2 is the non piggy player 1 is the piggy and it's working perfectly so he press control it goes blue and when we release it it goes white and you can also click so really awesome we've got the crouching in here and if we go back to the server you'll see I did play a one two contestants added player two two contestants and then it fired the toggle crouch for player two so we've just fixed that book together and we've now got a working trap system we've got a working crouch system and we've got the animations done for them as well we've also been able to make the players escape from the game as well which is really really awesome final thing we need to do is fix that bug with the traps where if you get stuck in a trap you can crouch and it will change your walk speed now let's have a look and see if we can fix this so my solution proposed solution is to when you step in a trap we'll put a value inside your player called stuck and then in the crouching scripts we can detect if you have that stuck value and if you do have it then we won't let you crouch so let's see so in this debounce just after the debounce equals true we're going to say local stuck equals instance got you all value stuck dot name equals stuck and stuck dot parents equals player now I'm not going to worry about setting its value we don't need to do that all we need to do is just put it in the player so we can see if they have this tag it's more of a tagger and a value just telling us that they're stuck so now that we've done that we can or will need to delete it afterwards won't we will need to say player player dot stuck destroy and that will delete it from there player in fact we'll just do if player find first child stuck then just in case it gets deleted somewhere else for some reason and it's not there if they leave the game after getting stuck you know so that's a good idea actually you can say if player dot character in there as well just in case they leave when they get stuck so this will delete after 5 seconds and then in the crouching script is here let's just put another if statement in here if player so if not so if they don't have the Crouch value if not player find first child stuck so we only want this if statement to run the code inside of it if they're not stuck yeah so we'll add another let me just look at this we need to have a an extra end there we go so if they don't have a stuck value then we will let them crouch but if they do have a stuck value and we will not let them because they're gonna be stuck in that's trap let's go and try this out so here I am I'm gonna place a load of traps as the piggy and I'm going to go and walk into them here and I get stuck i'ma try and Crouch but it's not gonna let me I'm pressing the Crouch key because I'm stuck but as soon as I become out of the trap it will let me crouch again there we go so if we look in the player player 2 and I place another trap watch carefully over here as I step in it you ready watch here so the stuck value has gone into my player so when I press control it sees that I have this stuck value so it won't let me crouch but as soon as it gets destroyed it will let me crouch again so awesome we fixed that bug so now if the piggy was to guaran let's say for example he puts a trap here and then he shuts the door again and the pig is chasing me so I decided to go and escape in here oh I can't go down I'm stuck so he can come in here and he can kill me so there we go we seem to have fixed the traps in the game and at the end of around the roles have changed so player to who was the character to begin with has now become the piggy or as the player on the right now has the ability to crouch but when the person on the left now presses control they don't crouch instead they place the trap really really awesome so that is pretty much the piggy game completed in terms of the round you're able to play now and have a proper game so as I said in the last video publish it by clicking on file and then click publish to roblox and you will be able to it's gone off my screen here we go you'll be able to give it a name description and then click on create that will then give you a link to the place if you want to make it set to active so that players can play it click on game settings and then click on permissions and set it to public so that anyone can play it and then if you go into your roblox profile sorry your roblox create page on the roblox menu at the top then you'll be able to see your place and your webs go and play it and you should be able to get a link to it as well from this button here I think it's only just because we've published it it's not showing up but if you do go to your roblox here you go you go to the create page click on games which is the first tab anyway and then click on the starts place you'll be able to go and play it with your friends so I'm sure that a lot of people in the comments will be asking oh can you make an extra feature for this can you make an extra feature to do that for example map voting and the answer is I can't do every single feature of piggy um you need to realize that and if you want to make your own features your own other features that you want to add then you can learn the basics of roblox scripting and you can try and make them yourself because it's just impossible for me to reply to everyone's comments and add every feature that everybody wants me to make I've tried to make this games realistic as possible but we do have to end this series at some point and I am going to create some extra videos after this off some more features but this is the main game completed so just know that I'm unable to make every single feature that you request but I will try to add on to them as much as I can I'll keep on supporting this series but at some point I have to stop them so that I can work on other videos and other projects if you understand that but we've made a pretty cool piggy games giving you a great introduction to roblox to do and scripting I recommend now that you go and check out my 23 I'm counting we're adding more videos as we go along 23 part series for those that are new to roblox development so you can learn the basics of coding I'm also going to be working on an advanced series after that as well so that you'll be able to learn how to make your own games that that you want to make you know not just games like piggy but you can make what you want to create I've got lots of videos on my channel and lots of other how to make a game series for you to check out but so I will keep adding to this series if I can as I said I've got some features that I do want to think about adding such as map voting that's something that you might see coming soon so yeah anyway thank you for watching this series so far I've been having blocks your host and guide please subscribe to my channel if you haven't already don't forget to click the like button and you can go to the next episode in the series if it's out by the time you're watching by clicking on the thumbnail in the middle of your screen there will be an arrow pointing to it so I'll see you in the next episode thanks for watching and I'll see you next time Cheers bye
