With timestamps:

00:00 - everyone welcome to part 2 of the egg
00:02 - hatching system in this video we're
00:05 - going to be working on the inventory as
00:07 - well as how to make your pet appear next
00:11 - to your character so first things first
00:13 - we need to set up this inventory and the
00:16 - way it's going to work is in your player
00:19 - objects when you join the game there
00:23 - will be a folder inserted into your
00:25 - player and if you go into the players
00:27 - and your player just like leader stats
00:29 - will have another folder and we're going
00:32 - to call this folder pet inventory
00:34 - whenever you buy a pets and it's then
00:38 - going to go in your inventory we will
00:40 - store it as a value we'll store its name
00:43 - as a value in that folder which we're
00:46 - going to create and then what we can do
00:48 - is we can use that folder to just keep
00:50 - all of our pets that we have in there
00:52 - and that way we can we can show them all
00:55 - in a GUI we can then save them later on
00:57 - in a data store which will probably
00:59 - cover it in the third episode and it's
01:01 - just the best way to do it so if we just
01:05 - stop the game here and we go into our
01:07 - script here I'm actually gonna call this
01:10 - the main scripts and what we need to do
01:17 - need to create those two folders Oh
01:19 - actually we're gonna create a folder for
01:21 - the pet inventory I'm also going to have
01:24 - another value and that value is going to
01:26 - be for the pet that's equipped so when
01:28 - you equip a pet we're gonna store that
01:30 - in a value so we know which pet you have
01:33 - got equipped so to do that very simple
01:36 - we're going to create a variable for the
01:39 - pet inventory so local inventory equals
01:42 - instance dot new and we're going to
01:44 - insert a folder okay now this inventory
01:48 - we're just gonna call it pets inner
01:50 - industry and it's going to go in the
01:55 - player just like that and for I equipped
02:02 - pet we can say local equipped pet equals
02:06 - instance new and because we're going to
02:08 - be storing the name of the equipped pet
02:10 - we're gonna have a string value
02:13 - so a string value just holds some text
02:16 - and in this case it will be the name of
02:18 - the pet anyway
02:20 - let's name this value equipped pet and
02:24 - we'll put it inside the player as well
02:28 - so now we've set those two things up the
02:31 - folder and the equipped pets will be
02:34 - able to then put pets inside the folder
02:38 - so we'll have a more string values just
02:41 - like the equip to pet but they will go
02:43 - inside the pet inventory so I'll give
02:44 - you an example if we had a larva Lord
02:47 - pet then it would look like this the
02:52 - name would be a string value the name of
02:55 - the pet would be in this string value
02:56 - and it would be inside the pet inventory
02:59 - and so if we have lots of different pets
03:02 - say we have a monkey or we had a B then
03:06 - we just need to look inside this folder
03:08 - and we'd see all of the pet names of the
03:11 - pets that we own so every time we buy a
03:13 - pet we'll insert a value into this
03:15 - folder
03:16 - and every time we load our data store
03:18 - which has the saved these saved names
03:21 - will load the values so this pet
03:23 - inventory is going to be where each
03:25 - player's pets that they own are stored
03:28 - not the objects though just their name
03:31 - so it's a reference to the pet so that
03:33 - we can load the pet out of replicated
03:35 - storage okay next we need to create the
03:38 - GUI so it's gonna be very simple I'm
03:41 - gonna insert a screen GUI I'm gonna call
03:43 - it inventory then inside of there we're
03:48 - gonna have a mainframe now I'm gonna set
03:51 - the background color in fact before we
03:53 - do that I'm going to go to plugins UI
03:57 - design and click around if I you don't
04:00 - have to do this I'm just doing it for
04:01 - the design to make it look nicer and
04:04 - that converts it into an image so it has
04:05 - a nice rounded corners then I'm gonna go
04:08 - and set the image code 3 to be a nice
04:11 - light blue now what we've done that I
04:14 - need to change this size because right
04:15 - now it is calculated in pixels and
04:18 - that's not very good if you have
04:20 - different screen sizes because 100
04:23 - pixels is different on different devices
04:25 - based on the resolution
04:26 - so we need to change it to a scale based
04:28 - size which will change with the size of
04:32 - the screen so I'm going to set it to
04:35 - take up 50% of the x-axis so to do that
04:40 - I just set the scale value on the X so
04:42 - the first value to be no point five and
04:44 - the second value will be zero because we
04:46 - need to deal with the pixels then on the
04:49 - y axis I want it to take up
04:51 - three-quarters of the screen so I'm
04:53 - going to say north point seven five
04:54 - comma zero and again no a fourth value
04:58 - because that's offset and we don't want
04:59 - to deal with offset now when you've done
05:01 - that I'm going to set the anchor point
05:03 - to be naught point 5 comma naught point
05:06 - 5 this means that when we set the
05:08 - position which we're about to do it's
05:10 - going to set it in the middle because
05:12 - currently is being set in the top-left
05:14 - corner
05:15 - so whatever you set the position value
05:16 - to be is where this anchor point in the
05:19 - top left corner is going to be
05:20 - positioned if you want it to be in the
05:21 - true middle of the screen you have to
05:23 - set it in the middle so if I do that you
05:26 - can see it has moved because 0 0 0 0 is
05:30 - the top left of the screen and that's
05:31 - where the anchor point now is so we can
05:34 - set this to naught point 5 comma 0 comma
05:36 - naught point 5 comma 0 to put it in the
05:39 - middle of the screen 50% of the way on
05:41 - the y and x axes now that we've done
05:45 - that I'm going to insert a nice little
05:46 - title and in fact I'm going to change
05:49 - this frame a bit to be called pets now
05:52 - in here as I said the title we're going
05:54 - to insert a text label and what I'll do
05:57 - is I'll set text scalar to be true so it
06:00 - makes it the text bigger and I'm going
06:03 - to change the text to say inventory now
06:06 - I can change the font if I would like
06:08 - let's go with saw Sam's bold and I'm
06:11 - going to set the text color 3 to be
06:13 - white now we can't see it anymore but
06:17 - that's ok because we're about to make it
06:19 - transparent so set the background
06:20 - transparency to be 1 now I just need to
06:24 - set the size so it could it covers the
06:26 - entire of the x-axis for the frame so to
06:29 - do that I just set the scale on the X to
06:31 - be 1 comma 0 because we don't need the
06:33 - offset and if we just
06:36 - oops 1 comma 0 and then for the y axis I
06:40 - want it
06:40 - make up about 10% of the y-axis so about
06:44 - 10% of this length which will be about
06:46 - here so I'm going to set it to naught
06:48 - point 1 2 5 comma 0 let's see how that
06:52 - looks perfect
06:53 - so I don't need to change the position
06:55 - because it's already at the top of the
06:57 - screen now why do know is that because
07:00 - I've taken I've used up naught point 1
07:02 - to 5 or 12.5 percent of the screen of
07:07 - off the frames size and don't forget
07:10 - it's out of 1 the the the size left to
07:13 - be used is going to be 1 minus naught
07:16 - point 1 to 5 now if you were to
07:18 - calculate that one - naught point 125
07:24 - miles not point 1 to be fine you would
07:26 - get north 0.875 so that's going to be
07:29 - the size for our frame so insert a
07:31 - scrolling frame this scrolling frame is
07:34 - going to allow us to scroll through the
07:36 - different pets so we want it to cover
07:39 - the whole of the x axis only so we're
07:40 - going to set that to 1 comma 0 for the X
07:43 - for the y however we know that there's
07:45 - naught point 8 7 5 amount of scale were
07:49 - left on this honest on the frame so we
07:52 - can set the scale on the Y to naught
07:54 - point 8 7 5 comma 0 and now we have a
07:57 - little gap at the bottom all we need to
08:00 - do now is set the white scale position
08:03 - sorry the position value of the X its
08:07 - scale property will be no point one two
08:12 - five sorry only why not on the X not put
08:16 - one two five okay because that's the
08:18 - size of this text label so now our GUI
08:21 - is ready to go
08:23 - I'm going to set the background
08:24 - transparency to be one and the last
08:27 - thing we need to do is insert a UI grid
08:31 - layout to do that you just insert UI
08:34 - grid layout like this and what that will
08:36 - do is when you add pets into this frame
08:39 - they will be ordered into a grid so you
08:42 - don't have to worry about positioning
08:43 - them roblox does it for you so how cool
08:46 - is that
08:48 - all right final thing now we just need
08:50 - to insert a little button so we can open
08:52 - and close the GUI so click on the
08:54 - inventory then click on the plus click
08:56 - on text button and I'm going to change
08:58 - this to just be called button whoops
09:01 - button and then I'm going to click on
09:07 - the plus click on local scripts and
09:09 - inside of here we just need to write
09:11 - some simple code and all we need to do
09:13 - is it's so easy I'm going to just skip
09:16 - to what I've done it ok so script up
09:21 - peridot mouse button 1 click connect
09:23 - function so when you click on the button
09:24 - we're going to set its visible property
09:26 - to be the opposite of what it currently
09:29 - is so script parent parent is the
09:32 - inventory wait for child pets is this
09:36 - image label here got visible that's the
09:39 - visibility property we're going to set
09:41 - it to the opposite of what it currently
09:43 - is so when you say not it's just it
09:45 - gives you the inverse of this so if this
09:48 - was true then this would be false now
09:53 - what we need to do is just test it out
09:55 - and make it look good as well so I'm
09:58 - going to again use the round if I
10:00 - plug-in on this one you don't have to
10:01 - it's totally optional but I just like
10:04 - using it if you don't see the text
10:07 - anymore just make sure that the z-index
10:10 - of your button is bigger than the
10:13 - z-index of the image label that it's put
10:15 - inside the button so I'm gonna set this
10:16 - to 2 then text scaled is going to be
10:20 - true and I'm gonna set the gonna go into
10:24 - the image label and I'm gonna set the
10:25 - image color 3 gonna click pick screen
10:28 - color and let's select the color of the
10:30 - inventory that will just give us the
10:31 - same color then on the button and I set
10:34 - the text color 3 to be white I'm going
10:37 - to set the text stroke transparency to
10:39 - be not 0.5 I'm gonna set the text to say
10:42 - inventory then you can change the font
10:44 - if you'd like I'm going to leave it as
10:46 - it is now okay we'll go saw Suns bold
10:49 - again and then to position it all you
10:51 - need to do is well we're gonna change
10:54 - the size from offset to be scale so
10:58 - let's try not point one
11:00 - two comma zero
11:03 -  naught point naught 5 comma zero
11:05 - that usually works for me there we go
11:07 - that gives us a nice button size and to
11:10 - position it all we need to do is set the
11:12 - position if you want it to be a little
11:14 - tiny bit away from the edge on the
11:16 - x-axis you can set it to a naught point
11:18 - naught naught 5 or something like that
11:20 - comma zero comma and then for the Y to
11:24 - put it in the middle naught point 5
11:26 - comma zero you can see there's naught
11:28 - point naught naught 5 on the X has just
11:30 - edged it away from the side of the
11:32 - screen and finally now we're going to
11:37 - set the anchor point to be 0 because we
11:40 - don't need an anchor point on the x-axis
11:42 - common or point 5 that just puts it in
11:45 - the true
11:46 - middle of the screen on the y-axis the
11:48 - reason we don't have it for the x-axis
11:49 - is because it's only a short amount away
11:52 - from the side of the screen and we don't
11:54 - want it to drift away any further so
11:56 - that's doesn't matter okay now we set
11:58 - our GUI up and we're ready to go now
12:03 - what I'm going to do is I'm going to
12:04 - take my local scripts that we created in
12:07 - the last video and I'm going to drag
12:08 - this and keep it inside of my inventory
12:11 - I'm gonna change the name of it as well
12:13 - to be GUI client just so that we can
12:17 - know what all of our scripts do I'll
12:20 - change this one as well to be inventory
12:22 - button okay now we need to create a
12:26 - template for our pets and that's going
12:30 - to be an image button and it will be
12:32 - able to display the pet in the GUI and
12:35 - will also have its name and also it will
12:38 - be clickable so when we click the
12:40 - template we'll be able to equip our pets
12:43 - so let's go and create that now so I'm
12:45 - going to insert into the scrolling frame
12:47 - a image button and I'm going to call
12:52 - this template in the properties window
12:54 - and inside of there I'm going to insert
12:59 - a viewport frame the viewport frame is
13:02 - going to be used to display the pets
13:04 - because you can display roblox objects
13:06 - in a 3d world inside the viewport frame
13:10 - and I'm going to set the size of that
13:13 - so it covers the whole of the image
13:16 - button so it's gonna be 1 comma 0 1
13:19 - comma Z comma 1 comma 0 so it's 1 on the
13:23 - x and y scale so that just covers the
13:26 - entire image button we're then just
13:29 - going to insert a text label inside of
13:33 - here and this is gonna be the pet name
13:36 - so we'll call this pet name and we need
13:39 - to change the size of this as well so
13:41 - because we want it to take up the
13:43 - entirety of the templates x-axis we'll
13:48 - do 1 comma 0 for the X and then for the
13:52 - Y we only want it to take up around 20%
13:55 - of the Y value of the y scale so naught
13:59 - point 2 comma 0 and there we go it's
14:02 - just made the text label text label fit
14:05 - the button with then going to set the
14:08 - position so it's at the bottom of the
14:10 - template so we can say zero comma zero
14:13 - comma zero square sorry comma 1 comma
14:16 - zero like this so the third number is
14:18 - going to be 1 so it covers it so it's
14:21 - the bottom of the Y like that and we can
14:25 - just set the anchor point to be 0 comma
14:27 - 1 so the position is set from the bottom
14:30 - of the text label so that it doesn't go
14:33 - outside of the image button it's still
14:36 - within the square of this template now
14:41 - last thing we need to do is we're going
14:43 - to need to show on the screen
14:45 - whether this is equipped or not so I'm
14:47 - gonna insert another text label and same
14:50 - thing again really we're just going to
14:52 - set the size of this to be what I'm
14:59 - going to do naught point eight because I
15:01 - only want it to take up 80% of the
15:04 - templates X size instead of spanning the
15:08 - whole width so naught point 8 80% of the
15:11 - x width comma 0 and then for the y we'll
15:14 - do 20% again so common naught point 2
15:17 - comma 0 just like that and now we need
15:20 - to put it in the middle of the x axis so
15:22 - we can say naught point 5 comma 0 comma
15:25 - 0 comma 0 now
15:26 - in the middle we need to change the
15:28 - anchor point again so because we want it
15:31 - to be taking the exposition from the
15:34 - middle we need to change the first
15:36 - anchor point the ex anchor point to not
15:38 - point five just like that now I'm going
15:41 - to set the background transparency to
15:43 - one and I'm also going to do that for
15:46 - the pet name so that's a one let's name
15:51 - the other text label though I'm going to
15:53 - name it equipped and if you want you can
15:58 - spice up a little bit by changing the
16:00 - fonts I'm gonna change them to Gotham
16:04 - bold and that you can change the text if
16:08 - you really want but it doesn't really
16:09 - matter what I am going to do though is
16:12 - I'm going to set the border size pixel
16:16 - to three and I'm also going to change
16:18 - the border mode to inset on the template
16:20 - this means that I'll have a nice border
16:23 - surrounding it and it won't get cut off
16:25 - by the scrolling frame because we're
16:26 - using the insert method you can play
16:28 - around with your image label make it
16:31 - look however you want it to look mine
16:34 - looks fine now I'm happy with mine so
16:36 - all I'm going to change the background
16:38 - transparency of the you can change the
16:41 - background transparent of the viewport
16:42 - as well if you want if you don't want a
16:44 - white background you can change the
16:46 - color so yeah you can customize it
16:48 - however you want but you need to make
16:50 - sure you've got your template with
16:51 - viewport frame pet name and the equipt
16:53 - in there okay so when you film that I'm
16:56 - just going to duplicate a couple just to
16:58 - show you you can see our UI grid layout
17:00 - is ordering them in a nice grid like
17:03 - this so you can delete all but one and
17:07 - I'm just going to put this template into
17:09 - the GUI client local scripts because you
17:11 - don't need it for now and we can just
17:12 - store it in the local scripts and when
17:14 - we need to add a new pad we can clone
17:16 - out of that and update the text and
17:17 - everything right so now we can begin
17:20 - scripting it okay so we're going to
17:23 - firstly begin coding by creating a
17:26 - function which is going to add that
17:28 - template into our scrolling frame when
17:30 - we need to call it so just at the top of
17:33 - the script here I'm going to create a
17:35 - local function it's local to this script
17:38 - and we're going to call it ad
17:40 - to frame like this okay now inside of
17:44 - here we're gonna create a new template
17:46 - we're going to clone the template inside
17:48 - the local script so local new templates
17:51 - equals and we need to create a variable
17:53 - for our template wishing we can just say
17:57 - script cut on wait for child template so
18:01 - now we can just say template curl on
18:04 - clone then we can give it a name new
18:08 - templates dot name ah but how do we know
18:11 - the name of the pet which we're going to
18:14 - want to insert let's pass that to our
18:17 - function as an argument so when we do
18:20 - call a function we can tell the name of
18:22 - the pet because remember when we hatched
18:24 - an egg we're being sent the pet so we
18:26 - can just easily get its name and call
18:28 - this function so we'll send the object
18:30 - pet so we can do all sorts of things
18:32 - with it so new template dot name equals
18:35 - pet name and we want to then set the pet
18:38 - name text label inside of it because
18:41 - remember we just created that new
18:43 - template pet name dot text equals pet's
18:47 - name and we'll put it inside that
18:49 - scrolling frame so new template dot
18:53 - parent equals let's create variable for
18:58 - the scrolling frame local scrolling
19:02 - frame equals templates
19:05 - sorry not templates yes scripts
19:10 - dot parent wait for child pets wait for
19:15 - child scrolling frame okay
19:19 - so put that inside the scrolling frame
19:21 - and then what we can do is insert the
19:26 - whole a camera and pet for our viewport
19:29 - frame so if you don't know what a
19:30 - viewport frame is it renders roadblocks
19:32 - objects in in a GUI and you have to put
19:37 - those objects inside the viewport frame
19:38 - and also have a camera object so it
19:40 - knows where to look at so local camera
19:44 - equals instance new camera and then
19:48 - camera dot see frame we're setting the
19:51 - seat frame in the camera so telling it
19:53 - where to
19:53 - you look in order to view the pets and
19:59 - let's think about this yeah this will
20:04 - work because what we've got to do is
20:05 - we've got to position it to be looking
20:07 - at the pet what orders will plone the
20:13 - pet in fur so we'll do local new pets
20:17 - equals pet : clone we can then set the
20:22 - pets parents new pet parents to be the
20:27 - viewport frame so new template dot
20:30 - viewport frame and then we can position
20:35 - the camera to be looking at that pet so
20:38 - camera dot C frame equals new pet so C
20:42 - frame new so when we give two bits of
20:48 - data to the C framed on you the position
20:50 - where the cameras going to be and what
20:52 - it looks at so we want it to be
20:54 - positioned just in front of the pets so
20:59 - we can say pets dot all new pets even
21:02 - new pet primary part dot position and
21:06 - then we can do plus new pets dot primary
21:11 - parts dot C frame dot look the vector x
21:15 - three okay so what this is doing is
21:18 - getting the current position of the pet
21:20 - and then we are getting its
21:24 - forward-facing direction and we are
21:27 - moving three studs away from it so if
21:29 - the pet is here we are positioning the
21:35 - camera if you imagine the camera is the
21:38 - blue or greenish square we would be
21:43 - moving it three studs away from the
21:45 - forward-facing direction so the forward
21:47 - facing direction is here so we're going
21:49 - to move the camera we've currently
21:50 - positioned the camera here but we need
21:52 - to add on those three studs so one two
21:55 - three and now the camera is you know
22:00 - it's away from the pet so we it will be
22:03 - able to actually see it but what we need
22:05 - to do now is tell
22:06 - the script which direction the camera
22:09 - should be looking at because it could be
22:11 - looking this way that way we needed to
22:13 - look directly at the camera so to do
22:15 - this we just need to give it this the
22:18 - position of the pets and it will work
22:21 - out the direction it needs to look at so
22:24 - to do that we can just say pet dot
22:26 - primary part dot position or new pet
22:28 - doctor primary part dot position there
22:34 - we go
22:34 - so that will position the camera to be
22:36 - looking at the pet and the pet of course
22:38 - is in our viewport frame so anything
22:40 - that's in the viewport frame if the
22:42 - camera is looking at it it will get
22:43 - rendered so camera adopted parents we
22:47 - need to put that inside the viewport
22:49 - frame as well so new template viewport
22:51 - frame and we need to set the viewport
22:56 - frames current camera property so new
22:59 - templates got viewport frame whoops
23:04 - viewport frame dot current camera equals
23:08 - camera just like that so that will make
23:11 - the pet appear in the viewport frame
23:16 - okay so let's go and test this out I'm
23:19 - just going to call the function and in
23:21 - fact I'm going to add a quick yeah I'm
23:24 - going to go to the bottom of the script
23:25 - I'm going to do a weight 5 and then
23:29 - we're gonna say add to frame and we're
23:30 - gonna pass game don't replicate the
23:32 - storage dot pets and then monkey ok just
23:36 - in it as an example and let's see if
23:39 - this will display it in the GUI ok here
23:48 - we go
23:49 - wait 5 seconds and there we go so the
23:52 - monkey is now in the inventory GUI and
23:56 - we can see it because the viewport frame
23:58 - has rendered it only thing is that it
24:00 - doesn't display whether it is equipped
24:02 - or not yet that's because we obviously
24:04 - haven't coded it we will be doing that
24:06 - soon however so
24:09 - I'm gonna go back to my DUI client I'm
24:11 - gonna delete those two lines of code
24:13 - that we just added because we don't need
24:14 - them and it will cause a few issues if
24:18 - we keep that in there because it's a pet
24:19 - that we don't actually own what we do
24:24 - want to do though is we want to call
24:26 - this function when you hatch the egg so
24:29 - at the just after our on client event
24:32 - just inside this on client event just
24:34 - before we change the camera type we can
24:37 - say add to frame and we can put the pet
24:39 - in there because the pet is going to be
24:41 - the one that is sent from the server
24:43 - when we click the dispenser it's going
24:46 - to be the random pet which was selected
24:47 - and then we can just add it to the frame
24:49 - because we now own it and that will add
24:52 - the frame to our inventory once again
24:54 - let's go and try it out so I'll just
24:59 - close my inventory will all the way over
25:01 - here okay here we are click on the
25:04 - dispenser it's gonna hatch itself I'm
25:06 - also going to be it is a TV so if we
25:10 - check our inventory we now have the TV
25:12 - okay so very cool let's move on
25:16 - okay so let's park the local script
25:19 - coding for a little bit because I know
25:21 - you want to get to the good stuff you
25:22 - want to know how can I make this pet
25:25 - follow my character and it's a good
25:27 - question and that's what we're going to
25:28 - be scripting now and it involves using
25:30 - something called a line position and a
25:33 - line orientation and those two objects
25:36 - allow a parts to keep on moving and keep
25:41 - on following a certain point and to be
25:43 - attached to that point and what we can
25:46 - do we can set up two attachments and if
25:48 - you imagine your roblox character is
25:51 - this badly drawn version here we can set
25:55 - up an attachment and an attachment is
25:58 - basically a point that just moves
26:00 - through the character so it could be
26:01 - here right and we could also have our
26:04 - pet and the pet will have an attachment
26:07 - in it so if this was our pet the pet
26:10 - would have an attachment and we would
26:11 - create an unlined position and a line
26:14 - orientation which would which would take
26:16 - the two attachments and it would
26:19 - basically
26:21 - put them in the same position so you
26:23 - would tell the align position and the
26:25 - align orientation to move the pets
26:28 - attachment to always be in the same
26:30 - position as the characters one and as
26:33 - the character moves your attachment
26:35 - moves and so does the pet because the
26:37 - align orientation and the line position
26:39 - is telling the pet and is making the pet
26:43 - stay and and go wherever your character
26:46 - and your attachment goes so let's go
26:50 - ahead and create that now so in our main
26:52 - script in the server script service
26:54 - we're going to create a function this
26:56 - function local function we're going to
27:01 - call it a quick pet like this okay now
27:04 - we're gonna need two arguments we need
27:08 - to know the player who is calling the
27:10 - function who we need to equip the pet
27:12 - for so player and also the pet object so
27:17 - pet now we will supply these when we
27:22 - call a function and we'll have to know
27:27 - which player and which pet you know we
27:30 - don't already know the player or the
27:31 - pattern this is just like a placeholder
27:32 - so in this function what we need to do
27:35 - is we need to get the player's character
27:37 - so local character equals player dot
27:41 - character this is their model in the
27:43 - workspace with all their body parts so
27:46 - if the pet is not nil and the character
27:50 - also isn't new so when we say nil it
27:54 - means not that so if the character and
27:56 - the pets are there and they haven't been
27:59 - deleted for some reason something weird
28:01 - happen then we work we know we're going
28:06 - to be able to equip the pet for them
28:07 - because everything we need is there so
28:09 - let's firstly just check to see if they
28:12 - have a pet because when we do create
28:15 - this pet we will name it their name and
28:18 - then pets so in fact what we'll do is
28:22 - we'll say pet don't name so I'm so the
28:26 - way it's gonna work is we'll know the
28:28 - pet that they're going to equip and it's
28:31 - going to be the already cloned out for
28:33 - us and ready to go
28:34 - so we're gonna set this net is name this
28:36 - patent to be player name dot dot and
28:39 - then in a string we can say an
28:43 - apostrophe and an S patent so might be
28:46 - album blocks is pet or shedletsky is pet
28:49 - and this way the reason we're naming it
28:52 - is because if they already have a pet
28:55 - equipped we need to check to see if they
28:56 - have one in their character and we can
28:58 - just use this name because we know that
29:00 - this will be the identifier of their pet
29:02 - so if they had a TV or a monkey yes
29:05 - they're different pets but when they're
29:07 - in the character that they'll have the
29:08 - same name so we can just check to see if
29:09 - they already have a pet equipped by
29:11 - saying if character curl fine first
29:15 - child player dot or player name dot this
29:22 - is pets then character and then in
29:26 - square brackets you put player name dot
29:30 - and then pet in a string like that you
29:34 - can call and destroy on it and basically
29:37 - get rid of the old pet in from the
29:42 - character so once you've done that we're
29:45 - just setting the name of the new pet and
29:47 - we need to put that pet inside of their
29:52 - character so pets lock parents equals
29:55 - character but that's going to be the
29:56 - last thing we do because we want to make
29:57 - sure all of its properties are already
29:59 - set and it needs to be in position and
30:02 - aligned because if we parent it first it
30:05 - could just fall out of the of position
30:07 - and and possibly fall out of the map
30:09 - because we haven't constrained it yet to
30:11 - be attached to to someone's character
30:14 - anyway we need to set the pets primary
30:18 - Part C frame so sets primary part C
30:20 - frame this is just positioning it in
30:22 - place so it's going to be character
30:26 - humanoid root part dot C frame this is
30:30 - so the reason we're doing this is you
30:32 - might be wondering while we're about to
30:33 - use in a long position and align
30:35 - orientation to constrain it to the
30:38 - players character the reason we're doing
30:40 - this is because if you set up the align
30:43 - position the align orientation if it was
30:47 - quite far away it would have to travel
30:50 - all the way to our character so if we
30:52 - just position it to be by the character
30:55 - it will slowly move into position and
30:57 - you'll see that very soon so we've just
30:59 - positioned it the pet to be nearby the
31:01 - character now let's actually set up
31:04 - those aligned positions and orientations
31:05 - so that it constantly moves with the
31:07 - player so firstly let's get the size of
31:10 - the model so we'll set as a variable
31:12 - model size equals pets dot primary parts
31:17 - dot size now let's create the
31:20 - attachments remember the attachments are
31:21 - just they used to specify a position
31:26 - where you want something to go and this
31:28 - attachment will be relative to the
31:31 - player's character and it will move with
31:32 - a place character so local attachment
31:36 - character equals instance new
31:39 - attachments attachment character dot
31:43 - visible equals false make it invisible
31:45 - we don't need to see it and then we need
31:48 - to position it to be just away from the
31:53 - player's character so attachment
31:56 - character dot position equals back to
31:58 - three new and this is a relative think
32:01 - of this as being relative to where it's
32:03 - going to be right so I'll give you an
32:06 - example if it is parented to the
32:09 - humanoid root part attachment character
32:14 - dot parents equals character dot
32:17 - humanoid roots parts if this is parented
32:21 - to the humanoid root part then it is
32:23 - going to be relative to that so this
32:27 - vector three is just the number of studs
32:30 - away from the humanoid root part on each
32:32 - axis so I want it to be one away on the
32:34 - x-axis so it's not directly touching
32:36 - your torso and one stood above so it's
32:39 - just near you nearer to your head and
32:40 - it's as if it's floating we don't need
32:42 - to position it away on these Zed axis
32:45 - because it's already in line with our
32:47 - character and then
32:51 - we'll do atom model size here's if your
32:54 - model you're on your model to be
32:57 - touching your character will be
32:58 - interfering with your character if you
33:00 - just add on the model size it will
33:01 - position in it further away so depending
33:04 - on the size of the hitbox if it's too
33:05 - far away maybe reduce the size that
33:07 - hitbox or reduce this vector3 value here
33:10 - but this will position it just to be
33:12 - away from your your character okay let's
33:19 - do the same for the pets so local
33:21 - attachment pet equals incidence new
33:26 - attachment just inserting a new one into
33:29 - the game attachment pet dot visible
33:33 - equals false and we don't need to
33:35 - position it because it's when we parent
33:38 - it to the pets like this it will just be
33:44 - in the middle the attachment will be in
33:46 - the middle we don't need to do any
33:47 - positioning because we needed to
33:50 - position the previous one because we're
33:52 - telling it where the where to attach the
33:54 - pet to whereas we just know that the pet
33:56 - will be following the character
33:59 - attachment so it will be linked up the
34:02 - two attachments will kind of be stuck
34:04 - together in the same position so as long
34:07 - as the knee attachment for the pet is in
34:09 - the middle that's fine
34:10 - right now we can get to the good stuff
34:12 - we can insert an align position so this
34:15 - will basically align the two attachments
34:17 - if you had for example the the pet one
34:20 - over here and then you know you have the
34:24 - character one the we want like the pet
34:27 - one out here to always keep moving
34:30 - towards the characters one and and
34:32 - ideally you want them to be stuck
34:35 - together in the same place so if that
34:38 - was you know this is the character
34:41 - that's the character attachment you want
34:44 - the pets to be in the same place so
34:46 - local align and that's what the align
34:48 - position will do a line position it was
34:52 - instance dot new a line position
34:56 - so you have to give it a maximum amount
34:58 - of force to use when moving the pet
35:02 - towards the character so I only set
35:05 - that's 25,000 I've done a bit of testing
35:07 - that works out that 25,000 is that is an
35:09 - optimum value then we need to set the
35:12 - two attachments so it knows which
35:16 - attachments are going to be you know
35:18 - used and which one should be moving
35:21 - towards the other one so a line position
35:23 - doctor attachment zero that's going to
35:25 - be the pets okay and it's going to be
35:29 - the pet that is moving towards the
35:30 - character and we don't want the
35:32 - character to move moving towards the pet
35:34 - so a line position to attachment one is
35:37 - going to be attachment of character and
35:40 - then we need to set the responsiveness
35:42 - the responsiveness is the degree of how
35:48 - quick it is to respond to new movement
35:51 - so if you move your character how
35:52 - quickly should the pets respond and like
35:55 - as if wake up and start moving with you
35:57 - if you're if you're stood still again
35:59 - twenty five optimum value and then the
36:02 - last thing to do is parent it to the
36:05 - pets because this is going to be inside
36:08 - the pet right so if you were to test
36:12 - this out the pet would start moving with
36:14 - you but it would be a problem it would
36:18 - it wouldn't be rotated correctly and it
36:20 - would probably be spinning round and
36:21 - round and around now if you want to test
36:23 - it out I guess we could go and do that
36:25 - let's just add a wait five seconds at
36:28 - the bottom of the scripts
36:29 - sorry no will do a wait five seconds
36:32 - inside the player added and then we can
36:34 - say equip pets and we can give the
36:37 - player and game don't replicate this
36:40 - storage dot pets but monkey code on
36:43 - clone because we need to make a clone of
36:46 - the pet right let's click on play and
36:50 - hopefully this will work
36:51 - obviously we haven't tested it yet but
36:54 - after the five seconds okay cool we have
36:56 - an error so that's that's okay we can
36:58 - see what caused that on line 22 function
37:03 - equip
37:05 - attachments must be parented to apart
37:07 - instance oh my bad
37:09 - it needs to be parented to the primary
37:10 - part because with we're trying to parent
37:14 - it to the model so it needs to when
37:16 - you're doing an attachment it needs to
37:18 - go in the primary part so it will go in
37:20 - the hitbox it's just that we parented it
37:22 - to the model my bad okay let's try again
37:27 - then and here we go so you can see it's
37:31 - now the position is being aligned you
37:34 - know it's moving in the right place but
37:36 - it's the orientation is is not aligned
37:39 - so it's not constraining its orientation
37:41 - or its rotation so it's just letting it
37:43 - freely move around in the air but let me
37:45 - show you this it's called album blocks
37:47 - as pet and if we look in the hitbox we
37:49 - have an attachment in the past we have
37:51 - an attachment you can you see that
37:53 - little green dot
37:54 - well we've also got an attachment in our
37:57 - player somewhere I think it's in the
37:59 - humanoid root part here oh here it is
38:01 - attachment you can see they're in the
38:03 - same place so the attachment of the pet
38:05 - is is always going to be in the same
38:07 - position as the humanoid root part one
38:09 - and who nod root part one is is moving
38:12 - with our player all the time because
38:13 - it's moving when the humanoid root part
38:15 - moves and it is offset it relative to
38:18 - that the position of the united root
38:20 - part so whenever we move the attachments
38:22 - are moving and the pet is moving with us
38:24 - because the aligning position is forcing
38:27 - the pets to to move in to move so it's
38:30 - always so that this attachment here is
38:33 - always in the same position as the other
38:34 - attachment which means that the pet will
38:36 - be moving with us we just need to now
38:38 - set up the align orientation so it so it
38:41 - sets the rotation automatically so again
38:44 - this is quite simple quite similar to
38:46 - the align position local align
38:48 - orientation equals instance new online
38:52 - orientation make sure you get the
38:55 - spelling right and then again we set the
38:58 - max force I'm setting mine to 25,000
39:03 - again just you can play around with it
39:05 - if you like you have to use the same
39:06 - values as mine but these are the optimal
39:08 - values that I've figured out and then a
39:11 - lion orientation dot attachment sorry
39:15 - it's not max force
39:16 - it's not max force it's max talk and
39:19 - that is the it's the amount of rotation
39:23 - so how how much it will rotate and the
39:27 - amount of like force it puts into that
39:28 - rotation so so attachments zero is going
39:35 - to be the attachment pet an attachment
39:38 - sorry a line orientation dot attachment
39:45 - 1 equals attachment character and then a
39:48 - line orientation dot responsiveness
39:51 - again how quickly it check it responds
39:54 - to a change in position 25 and lastly
39:58 - alone orientation dot parent equals pet
40:01 - and now this should make its rotated
40:07 - properly it should just keep it in one
40:09 - rotation there we go so the pet is
40:13 - always gonna be facing us and moving
40:16 - with our character awesome now here's
40:20 - what it looks like if you reset the
40:23 - attachment is there an attachment when
40:26 - you swap them around you could see that
40:28 - I was actually being pulled towards the
40:31 - the pet so that's why it's just good to
40:34 - keep it as I did and that is because by
40:38 - default the force is applied to
40:40 - attachment 0 so the thing that you want
40:43 - the force to be applied to in this case
40:45 - the pet to move it towards the character
40:46 - will be attachment 0
40:48 - now since we know that this works I'm
40:50 - going to delete the two lines in the
40:53 - player added script because we don't
40:56 - want that and we also you know we don't
40:58 - know the pet that you want to equip yet
41:00 - we'll be doing that later on so the way
41:01 - this is going to work we've got our
41:03 - function done to equip the pet so this
41:07 - equipped pets string value whenever this
41:11 - changes its value changes currently it's
41:13 - got no value but the equipped pet will
41:16 - change its value when we click on a pet
41:19 - to equip when we click on one of the
41:20 - templates it's going to change the
41:22 - equipped pet value what we're going to
41:24 - do is we're going to set up an event so
41:27 - that's when at this value changes we
41:29 - fire dysfunction to equip the new
41:33 - equipped pets and also when the players
41:37 - character is added so when it's first
41:39 - added to the game but also when they
41:41 - reset and the reason we are going to
41:44 - have these two events is because the
41:47 - character added event we could begin
41:50 - late and it might not so your character
41:55 - might have loaded before you're equipped
41:57 - pets data has been loaded so you need
42:00 - that second event to detect when the
42:03 - equipped pets value changes and when it
42:06 - does change when the date has been
42:07 - loaded and it's been loaded it's really
42:09 - the value of the equipped pet changes to
42:12 - the latest saved data then that second
42:16 - event will be like a fallback option so
42:18 - the players pet always gets loaded so we
42:22 - can say let's firstly do the character
42:25 - added one so when the new character
42:27 - spawns into the game and the character
42:29 - is the player's model in the workspace
42:31 - so either when they first join or when
42:33 - they respawn so player character added :
42:36 - Connect function and then we are given
42:41 - an argument for the character I'm just
42:43 - going to call it car like this CH AR and
42:45 - what we can do is we can check to see if
42:49 - there is a pet in replicated storage
42:53 - with the name being the value of the
42:57 - equipped pets string value so if the
43:00 - equipped pet has a value for example it
43:03 - could be monkey then we'd look up its
43:05 - value in replicated storage in the pets
43:07 - folder so if game got replicated storage
43:11 - waits for child and then there would put
43:14 - pets and we say cutoff fine first child
43:20 - equipped pets value so if there is a pet
43:24 - with the in Inlet folder from our
43:28 - equipped pet value then we can equip it
43:31 - so we can call the equip pet function
43:33 - and we need to provide the player who is
43:37 - going to equip the pet so we already
43:39 - know that because it's the player that
43:40 - will join the game and we also then need
43:42 - to make
43:43 - of the pet so let's just copy this line
43:45 - just excluding the if and then and we do
43:49 - a comma and we paste it in as our second
43:51 - parameter we just need to add : clone so
43:55 - we're making a clone of this pet now
43:58 - just make sure you have the right amount
44:00 - of brackets or parentheses on the end so
44:02 - we've got one here at one opening
44:04 - bracket here and another one here as
44:08 - well so make sure you've got two closing
44:10 - brackets on the end one for the clone to
44:13 - close that off and the second one to
44:14 - close off the whole equip pet function
44:17 - so that is going to call the equip that
44:19 - function to equip your pet when you
44:22 - either respawn or join the game but you
44:25 - could join the game and you're equipped
44:28 - pet won't might not have loaded yet
44:30 - because the data store now we will be
44:32 - coding data store in the next video so
44:34 - you'll learn more about why we need to
44:37 - have this but also if you change your
44:39 - pet if you're playing the game and you
44:42 - decide to equip a different pet we're
44:44 - gonna just update this a quick pet value
44:46 - so we can check to see when the value of
44:49 - this string value called a quick pet
44:51 - changes and when it does change to a new
44:53 - pet we can call a quick pet again so to
44:56 - do that we use a changed event so
44:58 - equipped but not changed colon connects
45:03 - function so when a property of the
45:06 - string value changes so the property
45:09 - that's going to change is going to be
45:10 - the value so when it's value changes it
45:14 - will run when any property changes but
45:17 - we know that the only property that
45:20 - we're going to change is going to be the
45:21 - value of it because it's going to store
45:22 - the the name of our equipment Pet will
45:25 - say if equipped pets value is not nil
45:29 - then we want to check again to see if it
45:33 - is a pet in replicated storage we can
45:36 - just copy this code and put it in there
45:38 - just like this so we've got that second
45:41 - if statement checking to see if there is
45:43 - a pet in replicated storage with the
45:46 - with the name from the value of the
45:48 - equipped pet and if there is and we can
45:51 - call a quit pet again
45:53 - and another problem that we just have is
45:57 - that as we equip more and more pets
45:59 - we're going to have lots of attachments
46:02 - being added to the player so what we can
46:04 - do is we can just give them a name let's
46:05 - give each attachment a names of
46:07 - attachment character dot name equals
46:10 - attachment character and attachment pets
46:15 - the pet the attachment pet doesn't
46:17 - matter who's going to be deleted
46:19 - we already delete that but anything in
46:22 - the character let's have a look
46:24 - so the align position and a line
46:26 - orientation are going to be okay because
46:27 - they're just going to get deleted
46:28 - because they're inside the pet and we
46:29 - destroy old pets but the attachment
46:33 - character is going to need to be deleted
46:34 - so we can just say if the character dot
46:37 - humanoid root parts curl on fine first
46:40 - child attachment character capital C
46:45 - although if you've named it something
46:47 - different then if you use your own name
46:49 - code on destroy oh sorry
46:52 - then and then you just copy it again and
46:56 - we can say destroy on the end of it
46:59 - there
47:00 - I should really put this onto three
47:04 - lines let's do that so it's just going
47:07 - to remove that attachment if you had a
47:11 - pet already equipped it would remove
47:13 - that attachment before adds the new one
47:15 - so now that that gets destroyed let's go
47:18 - ahead and try it out so if we click on
47:22 - play and just close down the inventory
47:28 - open the outputs okay I go on the server
47:32 - and we change the equipped pet value to
47:38 - TV I've got a TV
47:42 - and if I change it to monkey I now have
47:46 - a monkey so you can see that the
47:49 - equipped pet got changed function is
47:52 - firing because when we change the value
47:55 - of the equipped pet is checking to see
47:57 - if it's an actual it's not nil and
47:59 - there's actually some text there and
48:02 - then it's checking to see if it's an
48:04 - actual pet in the folder in replicated
48:06 - storage and if it is then it's going to
48:08 - it's going to execute our equip patter
48:11 - function it's going to make it's going
48:13 - to look at that pet and equip it for our
48:15 - player so that is a success all we need
48:19 - to do now really is just do a bit of
48:22 - coding so that when you click one of
48:25 - your pets that will appear in this
48:26 - inventory GUI it will fire a remote
48:29 - event and then when we pick that remote
48:31 - event up on the server we can change the
48:33 - players equipped pets value because you
48:36 - can only change values that are stored
48:38 - in the player from the server house the
48:40 - changes won't take effect if you change
48:42 - them on the client side so that's what
48:44 - we're going to do next so here we are
48:48 - back inside the GUI client scripts and
48:51 - within the add to frame function we need
48:55 - to set up an event when you click on the
48:58 - templates button so we have a look
49:00 - inside the templates it's obviously an
49:03 - image button so we can just set up a
49:06 - mouse button one click event from that
49:08 - so if we just go to the bottom of the
49:11 - function here and we can set up a table
49:14 - to handle all of our connections now if
49:17 - you don't know what a connection is when
49:19 - you set up an event the scripts is
49:22 - constantly listening out for you to do
49:25 - the action so if I set up a mouse put
49:27 - some on click event the script is always
49:28 - going to be checking to see if I'm
49:30 - clicking the button yep so it's
49:32 - constantly checking that and that's
49:33 - using up memory and as you add more
49:35 - frames to your GUI that's more and more
49:38 - of these connections more events which
49:41 - are constantly checking to see if each
49:43 - individual button is getting clicked now
49:45 - if you have loads and loads of
49:50 - connections and it might be that you
49:53 - know you no longer need those
49:55 - connections
49:56 - because you might have some pets that
50:00 - you no longer own or something it's just
50:02 - a good idea to keep track of all of your
50:04 - connections because you can disconnect
50:06 - them and when you disconnect them it
50:07 - means that you're no longer listening
50:09 - out to see if that thing is happening
50:10 - and so you are saving a memory leak and
50:12 - a memory leak is when you just have
50:15 - unnecessary events which keep checking
50:18 - things for no reason even though you
50:19 - have no purpose in that so if we just
50:22 - have a table and we can fill that up
50:24 - with our connections and if we ever
50:26 - wanted to disconnect them for example if
50:29 - you sold a pet you would no longer want
50:31 - to check if you've clicked the button
50:33 - because you don't want it anymore you
50:35 - can just disconnect that connection so
50:37 - local button connections equals and a
50:41 - blank table like that at the top of the
50:43 - scripts is a variable and then to put
50:46 - the event connection in that table you
50:48 - can save button connections and do
50:53 - square brackets and then hash tag button
50:55 - connections plus one so it's just this
50:58 - is just a fancy way of saying table dot
51:00 - inserts but because you can't say well I
51:04 - mean could I guess but this is the
51:06 - better way because you're inserting it
51:08 - at the next available position so hash
51:11 - tag button connections is the number of
51:13 - objects so if you have got six objects
51:16 - currently in the table then the thing
51:18 - we're going to set this to they're going
51:19 - to be the seventh because it's six add
51:21 - one seven so the seventh index in the
51:23 - table basically the next available free
51:25 - index in the table that's going to be
51:27 - equal to new templates drop Mouse person
51:31 - one flick code on connect function so
51:37 - now this connection is stored in a table
51:39 - if we ever want to disconnect it we
51:41 - could loop through this table and
51:42 - disconnect everything inside of it but
51:45 - we don't need to do that but in the
51:46 - future if we need it to do that's why
51:47 - it's good practice to set it opposite
51:48 - connection like that so we the pet is
51:54 - either going to be equipped or
51:55 - unequipped alright if it is currently
51:58 - equipped than the text of the equipped
52:02 - text like what was going to say equipped
52:03 - if it's not currently equipped it's
52:05 - gonna say unequipped so we can check
52:08 - see if new template dot equipped dots
52:12 - text equals equipped it's gonna be in
52:16 - capital letters for me by the way then
52:20 - so if it is so is it just the text
52:23 - currently says equipped we know that as
52:27 - it is already equipped they want to
52:31 - unequip it so if they click it again
52:33 - once they've already equipped it they
52:34 - want to unequip it they want to they
52:36 - don't have to pay anymore so if they do
52:38 - want to do that then we'll have some
52:40 - code that will fire a remote events to
52:42 - tell the server that we want to unequip
52:44 - that pet but for now let's just deal
52:45 - with unequipping it so else if B text is
52:49 - not equipped then it must be unequipped
52:52 - and so we will know that it is already
52:56 - unequipped and now they want to equip it
52:59 - so to equip it we can create a remote
53:03 - event and we're gonna call this remote
53:05 - events equip heads and then we can say
53:11 - game don't replicate the storage dot
53:13 - equip pets curl on fire server and we
53:18 - need to send the name of the pet don't
53:20 - we so we can tell the server the name of
53:22 - the pet that we want to equip and
53:23 - obviously because we have our pet as an
53:25 - argument in this function because when
53:26 - we call the function we're supplying the
53:28 - pet which we know from our hatch egg
53:31 - event which tells us when it gets fired
53:33 - we can just send the pet's name just
53:38 - like that and yeah so we will deal with
53:43 - this for now so we'll go back to the
53:44 - main script and now at the bottom of the
53:48 - scripts we can pick up that server we're
53:51 - most sorry that remote events which will
53:54 - get fired we can pick it up in an event
53:56 - on the server so game the replicate this
53:59 - storage dot acquit pet dot on server
54:02 - event when it gets fired to the server
54:03 - from the client I'm gonna connect that
54:06 - to a function and we've got two pieces
54:08 - of information the first one is
54:09 - automatically sent by roblox that's
54:12 - going to be the player who fired there
54:13 - are most events and the second one is
54:15 - the one that we sent and it's going to
54:17 - be the pet name
54:18 - you don't you know you know you can call
54:20 - them whatever you like is the order that
54:22 - matters so the player always comes first
54:24 - and then from then on it's the order
54:25 - that you put them in so that you don't
54:27 - have to have the same name as I have so
54:32 - in here all we need to do is check if
54:35 - it's a natural pet in replicated storage
54:37 - so let's create a variable for it local
54:40 - pets equals game replicate the storage
54:42 - dot pets code on a find first child pet
54:47 - name
54:48 - so this pet variable is either going to
54:51 - be an object or it's going to be nil so
54:53 - if it's nil we'll just check because
54:55 - it's no there won't be a pet with the
54:57 - name in that folder so if pets then we
55:03 - also want to make sure that you own the
55:04 - pet so we can check to see if it's in
55:06 - your pet inventory because we don't want
55:08 - people to fire this remote event and say
55:12 - that they want to equip a pet that they
55:13 - don't actually own so we need to check
55:15 - they have it in their inventory
55:16 - so if pets and player got pets inventory
55:21 - find first child pet name because we
55:24 - have a value in that pet inventory
55:26 - folder with the same name as the pet so
55:29 - now that we've verified that they own
55:30 - the pet we can set their equip the value
55:33 - and when we when we change the value of
55:35 - the equipped pet then it will fire off
55:39 - this changed event and it will equip the
55:41 - pet for us so we can say player dot
55:44 - equipped
55:44 - pets dot value equals pet's name and
55:48 - then that way because the value has been
55:50 - changed it's awfully going to trigger
55:52 - this event and the pet is going to be
55:54 - equipped on the player so now what we
56:00 - need to do is we need to now you've
56:03 - equipped it we need to change the text
56:05 - on the client only because if you've if
56:07 - it was saying unequipped and you just
56:10 - equipped it we need to change the text
56:11 - to say equips or vice versa so the next
56:14 - time you click the button the new
56:17 - template dot equipped dot text will be
56:19 - something different and that's how you
56:21 - get unequipped first time then when you
56:24 - click it it goes equipped and when you
56:25 - click it again it goes unequipped
56:27 - because if you change the text you can
56:29 - just always check to see if the text
56:31 - is one or the other and then that will
56:33 - tell you what you want to do so we will
56:38 - create a function to do this because we
56:42 - also want to change the other frame so
56:44 - if you have five template frames in your
56:47 - inventory and one of them was already
56:50 - equipped and you clicked another you'd
56:52 - want to set them all except the one that
56:55 - you've just clicked to be unequipped so
56:56 - you want to reset the others so we will
56:59 - create a function outside of at the
57:02 - frame local function and we'll call it
57:04 - set template equipped so we want we're
57:09 - going to pass to this function make sure
57:11 - you add the ending by the way I'm going
57:13 - to pass this function the object of the
57:16 - template which is going to be equipped
57:19 - okay so it's template and then firstly
57:26 - we'll just loop through everything in
57:27 - the scrolling frame and then we'll set
57:29 - it to be unequipped so for I comma V in
57:33 - pairs scrolling frame : get children do
57:39 - so we need to check to see if the
57:43 - objects we're currently looping through
57:44 - is a is a is a template so if V curl on
57:52 - find first child it quits we know it's
57:56 - going to be a template if it has the
57:58 - equipped text label inside of it so if
58:00 - it does have that equipped we know it's
58:02 - a template so we can say we can set the
58:08 - equips text to then say unequip s'
58:11 - because we're setting them all to be
58:14 - unequipped first we're just resetting
58:15 - all the other buttons and you can also
58:18 - change the color of the texts label so V
58:21 - dot text color 3 equals color 3 dot from
58:25 - RGB now if it's unequipped i want it to
58:29 - be red so we know that red is going to
58:32 - be 2 5 5 comma 0 comma 0
58:34 - it's an RGB value so there's no green
58:37 - there's no blue there's just a 100% red
58:41 - if you wanted to get your own RGB value
58:44 - and you could just go into equipped go
58:46 - into text color three choose the color
58:48 - and there would be these three values
58:50 - here these three values make up a color
58:52 - that's just how it works thing it in the
58:54 - computing RGB red green blue Nick get
58:57 - three values mix them together and it
58:58 - creates a color so this will make it red
59:02 - so now that we've reset them all reset
59:04 - all the templates to be unequipped we
59:06 - want to set the one that we've just
59:08 - equipped to say that it's equipped so
59:11 - templates dots equipped dot text equals
59:14 - equipped and template dot equipped dot
59:21 - text color three and this time you might
59:25 - want it to be green so color three dot
59:28 - from RGB 0 255 comma zero and that will
59:32 - be a green color because only the green
59:33 - value has got a value above zero and
59:37 - it's 255 which means it's a hundred
59:39 - percent green no so again you could just
59:41 - use the color picker if you wanted to
59:42 - pick your own shade of green and you
59:44 - would put 103 to 1 to 53 in this case
59:47 - but I'm just doing a simple color which
59:49 - will give us green so this is making one
59:53 - template say equips and all the others
59:55 - are being set to unequipped now we have
59:57 - this for loop before we change the the
60:00 - the object that we want to say equipped
60:03 - because this is going to set all of the
60:05 - templates including the one that we want
60:06 - to set to equipped it will go unequipped
60:09 - first momentarily and then it will
60:11 - instantly set the one we want to be
60:14 - equipped so it's resetting them all to
60:15 - say unequipped and go red and then the
60:18 - one that we want is gonna say equipments
60:19 - gonna go green so that is why we have
60:22 - this function and then when we have
60:25 - equipped a pet we can just call set
60:29 - templates equipped and we want to give
60:32 - the new template the one that we just
60:34 - clicked because that's going to become
60:35 - our equips and pets are its frame now if
60:40 - it's already equipped when we want to
60:41 - equip it so we can we'll have another
60:45 - write event we'll call it an equip pet
60:47 - earn it quick pet and all fire that's
60:53 - now on the server we'll pick that up and
60:55 - we'll just set the changed about the
60:56 - a.m.
60:58 - quits pet value to be nil so game to
61:00 - replicate the storage dots burn equip
61:02 - pet coal on fire server we don't need to
61:06 - send any parameters we don't need to
61:08 - tell you the name of the pet because
61:10 - we're an equipping the pet we don't want
61:11 - any pet so once you've done that we just
61:15 - need to set the new templates equipped
61:17 - the text to be unequipped and its color
61:22 - as well new templates got equipped dot
61:26 - text color 3 equals color 3 from RGB and
61:31 - that's going to be red so we know that
61:33 - the Reds gonna be 2 5 5 comma 0 comma 0
61:36 - 4 again you can use whatever RGB value
61:38 - you'd like so this is going to set it to
61:42 - be gonna quit and just make it look red
61:44 - again so it shows that it isn't equipped
61:46 - and that is going to you know switch so
61:49 - when you click it first time it'll equip
61:51 - it and then the second time you'll
61:53 - become owner quiz so make sure that
61:55 - you're equipped text label is the text
61:58 - is set too unequipped has to be set to
62:02 - unequipped so this isn't going to work
62:03 - if it's not set so gonna quit this text
62:07 - label here then it's not going to well
62:11 - it it would work to be honest but it's
62:14 - just a good idea that we have we have it
62:16 - set to unequipped to begin with because
62:19 - that way it's in line with with what
62:21 - we're currently doing because it's like
62:22 - the text is are they going to be
62:23 - equipped or an equipped and by default
62:26 - it won't be equipped so who set it to be
62:28 - on equips
62:29 - ok so as i said we're gonna go back to
62:31 - the main script and we're going to do
62:34 - this unequip pets remote event now so
62:37 - very simple I'm just gonna copy and
62:40 - paste the equip pet code I'm gonna
62:44 - change the name from unequip from equip
62:46 - pet to only quit pet and we don't need
62:51 - the parameter or the argument for the
62:53 - pet name we just need to set the players
62:59 - player dot equipped pet dog value will
63:03 - just be an empty string like this
63:05 - instead of setting it to nil we set it
63:07 - to an empty string like this
63:10 - because I think you can have neil string
63:13 - values they have to just be an empty
63:14 - string like that
63:15 - so because wants it unequip the pet we
63:18 - need to delete any pet that they
63:20 - currently have in their character so to
63:21 - do this we can say if player dog
63:24 - character Kerlin fine first try old and
63:27 - then because we named it to be player
63:31 - name dots pet we can say player name dot
63:35 - dot was pets like this then you'll just
63:40 - say player doctor actor and then in
63:42 - square brackets because we know it's
63:43 - there now we don't use find for his
63:46 - child but if we were to use the square
63:48 - brackets in the if statement it could
63:50 - give us an error if it wasn't there so
63:52 - that's why we use find for a child just
63:53 - who doesn't break the script if it isn't
63:56 - there it doesn't cause an error so fine
63:57 - for his child is like a fallback option
63:59 - in case it isn't there so we can say
64:01 - player dot name dot is pet curl on
64:06 - destroy like this and that's going to
64:09 - delete the pet from their character and
64:12 - as well we will delete the attachment
64:19 - let's let's take yeah let's do if player
64:28 - dot characters a humanoid root part
64:31 - color find first child attachment
64:34 - character then player character the
64:39 - humanoid root parts find first child
64:43 - attachment character : destroy okay and
64:49 - that will delete the attachment from
64:51 - their character that which we do delete
64:55 - in the equipped pet functions but if
64:57 - they're not equipping a new pet it will
64:59 - stay there so we can just delete it
65:00 - there and then so i think that's
65:04 - everything
65:04 - let's just have a quick scan through so
65:07 - we have set up our events for when the
65:11 - player respawns and when they're
65:13 - equipped pet changes so they can get a
65:15 - new pets and we've also done the client
65:18 - coding as well so that when they click
65:20 - on a button they can either
65:22 - Equipe or unequip the pets so let's go
65:27 - and give it a try I'm going to go join
65:28 - the game and we're gonna have to walk
65:30 - all the way over to that inventory I
65:34 - capture but that's okay just try to
65:37 - speed things up a little bit so if we go
65:39 - and buy our egg for five hundred cash we
65:43 - can see that it's going to hatch what do
65:45 - we get we get a larva Lord I believe
65:47 - that is so let's check our inventory we
65:50 - have a lava Lord and it is unequipped or
65:52 - I forgot to set the text to be read the
65:56 - property to be read so when the game
65:59 - first starts and the template is first
66:00 - created it's black into the red but
66:03 - that's okay we click it and okay let's
66:08 - have a look
66:08 - text color three is not a valid member
66:10 - of image person that's okay we'll check
66:12 - it out so that's gonna be on line 16 oh
66:17 - yeah we need to set the dots equipped
66:20 - dot text color 3 not V Delta X row 3
66:24 - that was my bad because V is the image
66:26 - button
66:27 - it's the equipt it's the template
66:28 - whereas the acquit is inside of the
66:31 - template so it's V dot equipped dot txt
66:33 - color 3 okay let's move in front of the
66:36 - in front of the dispenser and I'll click
66:41 - it and let's see what we hatched this
66:43 - time so it's gonna be the TV that's what
66:45 - the output saying yeah and the TV is in
66:47 - our inventory so if we click on it it's
66:50 - now equipped and there is no TV by our
66:54 - side okay that's cool we can check it
66:57 - out so look in the equipt pets and it is
67:02 - it's set to nothing let's try that again
67:05 - okay so what we can deduce from this is
67:09 - that it is not setting the equipped to
67:11 - pet the value when we click on it so
67:13 - let's check this out so see equip pets
67:22 - oh I know
67:25 - I know why I know why it's because it's
67:29 - because we haven't yet I forgot to do
67:33 - this this is my bad we have one week we
67:36 - buy the pets but it doesn't go into your
67:38 - pet inventory look isn't going to your
67:41 - pet inventory here so we need to insert
67:44 - a value which goes into the pet
67:45 - inventory when you buy this item so that
67:49 - we can tell you own it if you were to
67:52 - have it in the pet inventory that will
67:54 - give an example what would just hatch we
67:58 - hatched a TV so if if the TV was to go
68:03 - in here
68:04 - we had our value and we equipped it yeah
68:08 - it would acquit so it's because we
68:09 - haven't put it in the pet inventory and
68:11 - it's failing it's failing when we get to
68:13 - this part so because obviously it isn't
68:16 - in our you know our pet in Vitoria so
68:18 - when we do buy it let's go into our
68:20 - dispenser I can't really see it we go
68:23 - into the dispenser and our scripts and
68:26 - we do choose random pets we can just say
68:31 - local value equals instance I thought
68:35 - I'll just call it pet val equals
68:38 - instance new string value and pet valve
68:43 - name equals pet dog named pet val
68:46 - godparent equals player dot pets
68:49 - inventory let's try it again
68:53 - so this way it's inserting the value
68:56 - into the pet inventory so we will know
68:58 - that they own it so if we just do the
69:00 - egg again so we all get the monkey and
69:04 - if we just go and click on the equips we
69:09 - now have the monkey and the monkeys
69:11 - following us and we can unequip it and
69:13 - it's gone we can bring it back and yeah
69:17 - let's go and get another one so we're
69:19 - now getting the lava Lord and this time
69:21 - it says unequipped but the monkeys still
69:24 - equipped with we honor if we equip the
69:26 - lava Lord you can see the monkey is
69:28 - unequipped and the lava Lord is equipped
69:31 - so there you go so what I'm going to do
69:34 - now is I'm going to reset so we can test
69:37 - that it loads the
69:38 - it's pet so let's just take a look at
69:41 - this
69:41 - this shouldn't reset ok it has resets I
69:45 - know why that is though don't worry but
69:47 - we know that the pet is stayed with us
69:49 - and his respawn that's because look at
69:50 - the character added event but how do we
69:53 - stop the pets from going away when we
69:55 - reset very simple we need to go into the
69:58 - inventory here and the inventory has a
70:01 - property called reset on spawn if you
70:03 - set that to be unchecked it's not going
70:05 - to reset when you respawn and the last
70:07 - thing is I'm going to go into the
70:08 - equipped I'm going to set the text color
70:10 - 3 to be 255 comma zero comma zero and
70:15 - I'm also going to set text stroke
70:17 - transparency to be not 0.5 so we have a
70:19 - little with a black outline so we can
70:21 - read the we can read it easily we can
70:25 - read that the equipped and owner quits
70:26 - values so let's just try this one more
70:30 - time so this is called testing and
70:34 - making sure that your program when your
70:37 - product is free of bugs and it's working
70:40 - to the standard you expect and the
70:42 - reason I'm leaving this in and I'm not
70:44 - edit editing it out is because it's
70:45 - something you can have to go through as
70:47 - a programmer I'm keeping it real and
70:50 - this is the what you'll have to go
70:51 - through if you're programming your own
70:52 - roblox games lots of testing lots of
70:55 - iteration all of that and that's what
70:58 - goes down to making good products and
71:00 - good services so I might have overdone
71:02 - it with the text stroke transparency a
71:05 - little bit I might increase that to
71:06 - about nine point seven five so it makes
71:08 - it a bit easier to read but I can equip
71:10 - the monkey I can equip the lava Lord
71:13 - doesn't matter I'll equip the monkey
71:14 - though and we'll reset and remember that
71:18 - it's updating our equipped pet to be
71:20 - whichever one is currently equipped and
71:23 - that is what is allowing us to respawn
71:24 - them in and keep track of the the pets
71:26 - we have the pets now get inserted into
71:29 - the pet inventory if you wanted we could
71:31 - equip the lava Lord
71:32 - so working very well in my opinion all
71:35 - that's left to do with the data stores
71:37 - and I'm not going to do that in this
71:38 - episode because this one has taken me a
71:41 - while to record and maybe it's a
71:43 - challenge for you you could try and work
71:46 - out how to data store your own pets
71:48 - before that video comes out hopefully it
71:50 - will be out within a week or so
71:52 - but the issue it probably will be out by
71:55 - the time you're watching this video if
71:56 - you're watching it in the future
71:57 - but yeah so thanks for watching this has
72:00 - been episode number two in how to make a
72:02 - pet system in roblox I recommend you
72:05 - watch some of my other videos and fats
72:08 - I'll leave it on the screen for you to
72:09 - go ahead and watch now so why don't you
72:11 - go ahead watch it and don't forget to
72:13 - subscribe to the channel as well and
72:15 - like the video if you've enjoyed it and
72:16 - share it with a friend as well who you
72:18 - think might find this out forum so
72:20 - thanks for watching I'll see you in the
72:21 - next one
72:22 - Cheers

Cleaned transcript:

everyone welcome to part 2 of the egg hatching system in this video we're going to be working on the inventory as well as how to make your pet appear next to your character so first things first we need to set up this inventory and the way it's going to work is in your player objects when you join the game there will be a folder inserted into your player and if you go into the players and your player just like leader stats will have another folder and we're going to call this folder pet inventory whenever you buy a pets and it's then going to go in your inventory we will store it as a value we'll store its name as a value in that folder which we're going to create and then what we can do is we can use that folder to just keep all of our pets that we have in there and that way we can we can show them all in a GUI we can then save them later on in a data store which will probably cover it in the third episode and it's just the best way to do it so if we just stop the game here and we go into our script here I'm actually gonna call this the main scripts and what we need to do need to create those two folders Oh actually we're gonna create a folder for the pet inventory I'm also going to have another value and that value is going to be for the pet that's equipped so when you equip a pet we're gonna store that in a value so we know which pet you have got equipped so to do that very simple we're going to create a variable for the pet inventory so local inventory equals instance dot new and we're going to insert a folder okay now this inventory we're just gonna call it pets inner industry and it's going to go in the player just like that and for I equipped pet we can say local equipped pet equals instance new and because we're going to be storing the name of the equipped pet we're gonna have a string value so a string value just holds some text and in this case it will be the name of the pet anyway let's name this value equipped pet and we'll put it inside the player as well so now we've set those two things up the folder and the equipped pets will be able to then put pets inside the folder so we'll have a more string values just like the equip to pet but they will go inside the pet inventory so I'll give you an example if we had a larva Lord pet then it would look like this the name would be a string value the name of the pet would be in this string value and it would be inside the pet inventory and so if we have lots of different pets say we have a monkey or we had a B then we just need to look inside this folder and we'd see all of the pet names of the pets that we own so every time we buy a pet we'll insert a value into this folder and every time we load our data store which has the saved these saved names will load the values so this pet inventory is going to be where each player's pets that they own are stored not the objects though just their name so it's a reference to the pet so that we can load the pet out of replicated storage okay next we need to create the GUI so it's gonna be very simple I'm gonna insert a screen GUI I'm gonna call it inventory then inside of there we're gonna have a mainframe now I'm gonna set the background color in fact before we do that I'm going to go to plugins UI design and click around if I you don't have to do this I'm just doing it for the design to make it look nicer and that converts it into an image so it has a nice rounded corners then I'm gonna go and set the image code 3 to be a nice light blue now what we've done that I need to change this size because right now it is calculated in pixels and that's not very good if you have different screen sizes because 100 pixels is different on different devices based on the resolution so we need to change it to a scale based size which will change with the size of the screen so I'm going to set it to take up 50% of the xaxis so to do that I just set the scale value on the X so the first value to be no point five and the second value will be zero because we need to deal with the pixels then on the y axis I want it to take up threequarters of the screen so I'm going to say north point seven five comma zero and again no a fourth value because that's offset and we don't want to deal with offset now when you've done that I'm going to set the anchor point to be naught point 5 comma naught point 5 this means that when we set the position which we're about to do it's going to set it in the middle because currently is being set in the topleft corner so whatever you set the position value to be is where this anchor point in the top left corner is going to be positioned if you want it to be in the true middle of the screen you have to set it in the middle so if I do that you can see it has moved because 0 0 0 0 is the top left of the screen and that's where the anchor point now is so we can set this to naught point 5 comma 0 comma naught point 5 comma 0 to put it in the middle of the screen 50% of the way on the y and x axes now that we've done that I'm going to insert a nice little title and in fact I'm going to change this frame a bit to be called pets now in here as I said the title we're going to insert a text label and what I'll do is I'll set text scalar to be true so it makes it the text bigger and I'm going to change the text to say inventory now I can change the font if I would like let's go with saw Sam's bold and I'm going to set the text color 3 to be white now we can't see it anymore but that's ok because we're about to make it transparent so set the background transparency to be 1 now I just need to set the size so it could it covers the entire of the xaxis for the frame so to do that I just set the scale on the X to be 1 comma 0 because we don't need the offset and if we just oops 1 comma 0 and then for the y axis I want it make up about 10% of the yaxis so about 10% of this length which will be about here so I'm going to set it to naught point 1 2 5 comma 0 let's see how that looks perfect so I don't need to change the position because it's already at the top of the screen now why do know is that because I've taken I've used up naught point 1 to 5 or 12.5 percent of the screen of off the frames size and don't forget it's out of 1 the the the size left to be used is going to be 1 minus naught point 1 to 5 now if you were to calculate that one naught point 125 miles not point 1 to be fine you would get north 0.875 so that's going to be the size for our frame so insert a scrolling frame this scrolling frame is going to allow us to scroll through the different pets so we want it to cover the whole of the x axis only so we're going to set that to 1 comma 0 for the X for the y however we know that there's naught point 8 7 5 amount of scale were left on this honest on the frame so we can set the scale on the Y to naught point 8 7 5 comma 0 and now we have a little gap at the bottom all we need to do now is set the white scale position sorry the position value of the X its scale property will be no point one two five sorry only why not on the X not put one two five okay because that's the size of this text label so now our GUI is ready to go I'm going to set the background transparency to be one and the last thing we need to do is insert a UI grid layout to do that you just insert UI grid layout like this and what that will do is when you add pets into this frame they will be ordered into a grid so you don't have to worry about positioning them roblox does it for you so how cool is that all right final thing now we just need to insert a little button so we can open and close the GUI so click on the inventory then click on the plus click on text button and I'm going to change this to just be called button whoops button and then I'm going to click on the plus click on local scripts and inside of here we just need to write some simple code and all we need to do is it's so easy I'm going to just skip to what I've done it ok so script up peridot mouse button 1 click connect function so when you click on the button we're going to set its visible property to be the opposite of what it currently is so script parent parent is the inventory wait for child pets is this image label here got visible that's the visibility property we're going to set it to the opposite of what it currently is so when you say not it's just it gives you the inverse of this so if this was true then this would be false now what we need to do is just test it out and make it look good as well so I'm going to again use the round if I plugin on this one you don't have to it's totally optional but I just like using it if you don't see the text anymore just make sure that the zindex of your button is bigger than the zindex of the image label that it's put inside the button so I'm gonna set this to 2 then text scaled is going to be true and I'm gonna set the gonna go into the image label and I'm gonna set the image color 3 gonna click pick screen color and let's select the color of the inventory that will just give us the same color then on the button and I set the text color 3 to be white I'm going to set the text stroke transparency to be not 0.5 I'm gonna set the text to say inventory then you can change the font if you'd like I'm going to leave it as it is now okay we'll go saw Suns bold again and then to position it all you need to do is well we're gonna change the size from offset to be scale so let's try not point one two comma zero naught point naught 5 comma zero that usually works for me there we go that gives us a nice button size and to position it all we need to do is set the position if you want it to be a little tiny bit away from the edge on the xaxis you can set it to a naught point naught naught 5 or something like that comma zero comma and then for the Y to put it in the middle naught point 5 comma zero you can see there's naught point naught naught 5 on the X has just edged it away from the side of the screen and finally now we're going to set the anchor point to be 0 because we don't need an anchor point on the xaxis common or point 5 that just puts it in the true middle of the screen on the yaxis the reason we don't have it for the xaxis is because it's only a short amount away from the side of the screen and we don't want it to drift away any further so that's doesn't matter okay now we set our GUI up and we're ready to go now what I'm going to do is I'm going to take my local scripts that we created in the last video and I'm going to drag this and keep it inside of my inventory I'm gonna change the name of it as well to be GUI client just so that we can know what all of our scripts do I'll change this one as well to be inventory button okay now we need to create a template for our pets and that's going to be an image button and it will be able to display the pet in the GUI and will also have its name and also it will be clickable so when we click the template we'll be able to equip our pets so let's go and create that now so I'm going to insert into the scrolling frame a image button and I'm going to call this template in the properties window and inside of there I'm going to insert a viewport frame the viewport frame is going to be used to display the pets because you can display roblox objects in a 3d world inside the viewport frame and I'm going to set the size of that so it covers the whole of the image button so it's gonna be 1 comma 0 1 comma Z comma 1 comma 0 so it's 1 on the x and y scale so that just covers the entire image button we're then just going to insert a text label inside of here and this is gonna be the pet name so we'll call this pet name and we need to change the size of this as well so because we want it to take up the entirety of the templates xaxis we'll do 1 comma 0 for the X and then for the Y we only want it to take up around 20% of the Y value of the y scale so naught point 2 comma 0 and there we go it's just made the text label text label fit the button with then going to set the position so it's at the bottom of the template so we can say zero comma zero comma zero square sorry comma 1 comma zero like this so the third number is going to be 1 so it covers it so it's the bottom of the Y like that and we can just set the anchor point to be 0 comma 1 so the position is set from the bottom of the text label so that it doesn't go outside of the image button it's still within the square of this template now last thing we need to do is we're going to need to show on the screen whether this is equipped or not so I'm gonna insert another text label and same thing again really we're just going to set the size of this to be what I'm going to do naught point eight because I only want it to take up 80% of the templates X size instead of spanning the whole width so naught point 8 80% of the x width comma 0 and then for the y we'll do 20% again so common naught point 2 comma 0 just like that and now we need to put it in the middle of the x axis so we can say naught point 5 comma 0 comma 0 comma 0 now in the middle we need to change the anchor point again so because we want it to be taking the exposition from the middle we need to change the first anchor point the ex anchor point to not point five just like that now I'm going to set the background transparency to one and I'm also going to do that for the pet name so that's a one let's name the other text label though I'm going to name it equipped and if you want you can spice up a little bit by changing the fonts I'm gonna change them to Gotham bold and that you can change the text if you really want but it doesn't really matter what I am going to do though is I'm going to set the border size pixel to three and I'm also going to change the border mode to inset on the template this means that I'll have a nice border surrounding it and it won't get cut off by the scrolling frame because we're using the insert method you can play around with your image label make it look however you want it to look mine looks fine now I'm happy with mine so all I'm going to change the background transparency of the you can change the background transparent of the viewport as well if you want if you don't want a white background you can change the color so yeah you can customize it however you want but you need to make sure you've got your template with viewport frame pet name and the equipt in there okay so when you film that I'm just going to duplicate a couple just to show you you can see our UI grid layout is ordering them in a nice grid like this so you can delete all but one and I'm just going to put this template into the GUI client local scripts because you don't need it for now and we can just store it in the local scripts and when we need to add a new pad we can clone out of that and update the text and everything right so now we can begin scripting it okay so we're going to firstly begin coding by creating a function which is going to add that template into our scrolling frame when we need to call it so just at the top of the script here I'm going to create a local function it's local to this script and we're going to call it ad to frame like this okay now inside of here we're gonna create a new template we're going to clone the template inside the local script so local new templates equals and we need to create a variable for our template wishing we can just say script cut on wait for child template so now we can just say template curl on clone then we can give it a name new templates dot name ah but how do we know the name of the pet which we're going to want to insert let's pass that to our function as an argument so when we do call a function we can tell the name of the pet because remember when we hatched an egg we're being sent the pet so we can just easily get its name and call this function so we'll send the object pet so we can do all sorts of things with it so new template dot name equals pet name and we want to then set the pet name text label inside of it because remember we just created that new template pet name dot text equals pet's name and we'll put it inside that scrolling frame so new template dot parent equals let's create variable for the scrolling frame local scrolling frame equals templates sorry not templates yes scripts dot parent wait for child pets wait for child scrolling frame okay so put that inside the scrolling frame and then what we can do is insert the whole a camera and pet for our viewport frame so if you don't know what a viewport frame is it renders roadblocks objects in in a GUI and you have to put those objects inside the viewport frame and also have a camera object so it knows where to look at so local camera equals instance new camera and then camera dot see frame we're setting the seat frame in the camera so telling it where to you look in order to view the pets and let's think about this yeah this will work because what we've got to do is we've got to position it to be looking at the pet what orders will plone the pet in fur so we'll do local new pets equals pet clone we can then set the pets parents new pet parents to be the viewport frame so new template dot viewport frame and then we can position the camera to be looking at that pet so camera dot C frame equals new pet so C frame new so when we give two bits of data to the C framed on you the position where the cameras going to be and what it looks at so we want it to be positioned just in front of the pets so we can say pets dot all new pets even new pet primary part dot position and then we can do plus new pets dot primary parts dot C frame dot look the vector x three okay so what this is doing is getting the current position of the pet and then we are getting its forwardfacing direction and we are moving three studs away from it so if the pet is here we are positioning the camera if you imagine the camera is the blue or greenish square we would be moving it three studs away from the forwardfacing direction so the forward facing direction is here so we're going to move the camera we've currently positioned the camera here but we need to add on those three studs so one two three and now the camera is you know it's away from the pet so we it will be able to actually see it but what we need to do now is tell the script which direction the camera should be looking at because it could be looking this way that way we needed to look directly at the camera so to do this we just need to give it this the position of the pets and it will work out the direction it needs to look at so to do that we can just say pet dot primary part dot position or new pet doctor primary part dot position there we go so that will position the camera to be looking at the pet and the pet of course is in our viewport frame so anything that's in the viewport frame if the camera is looking at it it will get rendered so camera adopted parents we need to put that inside the viewport frame as well so new template viewport frame and we need to set the viewport frames current camera property so new templates got viewport frame whoops viewport frame dot current camera equals camera just like that so that will make the pet appear in the viewport frame okay so let's go and test this out I'm just going to call the function and in fact I'm going to add a quick yeah I'm going to go to the bottom of the script I'm going to do a weight 5 and then we're gonna say add to frame and we're gonna pass game don't replicate the storage dot pets and then monkey ok just in it as an example and let's see if this will display it in the GUI ok here we go wait 5 seconds and there we go so the monkey is now in the inventory GUI and we can see it because the viewport frame has rendered it only thing is that it doesn't display whether it is equipped or not yet that's because we obviously haven't coded it we will be doing that soon however so I'm gonna go back to my DUI client I'm gonna delete those two lines of code that we just added because we don't need them and it will cause a few issues if we keep that in there because it's a pet that we don't actually own what we do want to do though is we want to call this function when you hatch the egg so at the just after our on client event just inside this on client event just before we change the camera type we can say add to frame and we can put the pet in there because the pet is going to be the one that is sent from the server when we click the dispenser it's going to be the random pet which was selected and then we can just add it to the frame because we now own it and that will add the frame to our inventory once again let's go and try it out so I'll just close my inventory will all the way over here okay here we are click on the dispenser it's gonna hatch itself I'm also going to be it is a TV so if we check our inventory we now have the TV okay so very cool let's move on okay so let's park the local script coding for a little bit because I know you want to get to the good stuff you want to know how can I make this pet follow my character and it's a good question and that's what we're going to be scripting now and it involves using something called a line position and a line orientation and those two objects allow a parts to keep on moving and keep on following a certain point and to be attached to that point and what we can do we can set up two attachments and if you imagine your roblox character is this badly drawn version here we can set up an attachment and an attachment is basically a point that just moves through the character so it could be here right and we could also have our pet and the pet will have an attachment in it so if this was our pet the pet would have an attachment and we would create an unlined position and a line orientation which would which would take the two attachments and it would basically put them in the same position so you would tell the align position and the align orientation to move the pets attachment to always be in the same position as the characters one and as the character moves your attachment moves and so does the pet because the align orientation and the line position is telling the pet and is making the pet stay and and go wherever your character and your attachment goes so let's go ahead and create that now so in our main script in the server script service we're going to create a function this function local function we're going to call it a quick pet like this okay now we're gonna need two arguments we need to know the player who is calling the function who we need to equip the pet for so player and also the pet object so pet now we will supply these when we call a function and we'll have to know which player and which pet you know we don't already know the player or the pattern this is just like a placeholder so in this function what we need to do is we need to get the player's character so local character equals player dot character this is their model in the workspace with all their body parts so if the pet is not nil and the character also isn't new so when we say nil it means not that so if the character and the pets are there and they haven't been deleted for some reason something weird happen then we work we know we're going to be able to equip the pet for them because everything we need is there so let's firstly just check to see if they have a pet because when we do create this pet we will name it their name and then pets so in fact what we'll do is we'll say pet don't name so I'm so the way it's gonna work is we'll know the pet that they're going to equip and it's going to be the already cloned out for us and ready to go so we're gonna set this net is name this patent to be player name dot dot and then in a string we can say an apostrophe and an S patent so might be album blocks is pet or shedletsky is pet and this way the reason we're naming it is because if they already have a pet equipped we need to check to see if they have one in their character and we can just use this name because we know that this will be the identifier of their pet so if they had a TV or a monkey yes they're different pets but when they're in the character that they'll have the same name so we can just check to see if they already have a pet equipped by saying if character curl fine first child player dot or player name dot this is pets then character and then in square brackets you put player name dot and then pet in a string like that you can call and destroy on it and basically get rid of the old pet in from the character so once you've done that we're just setting the name of the new pet and we need to put that pet inside of their character so pets lock parents equals character but that's going to be the last thing we do because we want to make sure all of its properties are already set and it needs to be in position and aligned because if we parent it first it could just fall out of the of position and and possibly fall out of the map because we haven't constrained it yet to be attached to to someone's character anyway we need to set the pets primary Part C frame so sets primary part C frame this is just positioning it in place so it's going to be character humanoid root part dot C frame this is so the reason we're doing this is you might be wondering while we're about to use in a long position and align orientation to constrain it to the players character the reason we're doing this is because if you set up the align position the align orientation if it was quite far away it would have to travel all the way to our character so if we just position it to be by the character it will slowly move into position and you'll see that very soon so we've just positioned it the pet to be nearby the character now let's actually set up those aligned positions and orientations so that it constantly moves with the player so firstly let's get the size of the model so we'll set as a variable model size equals pets dot primary parts dot size now let's create the attachments remember the attachments are just they used to specify a position where you want something to go and this attachment will be relative to the player's character and it will move with a place character so local attachment character equals instance new attachments attachment character dot visible equals false make it invisible we don't need to see it and then we need to position it to be just away from the player's character so attachment character dot position equals back to three new and this is a relative think of this as being relative to where it's going to be right so I'll give you an example if it is parented to the humanoid root part attachment character dot parents equals character dot humanoid roots parts if this is parented to the humanoid root part then it is going to be relative to that so this vector three is just the number of studs away from the humanoid root part on each axis so I want it to be one away on the xaxis so it's not directly touching your torso and one stood above so it's just near you nearer to your head and it's as if it's floating we don't need to position it away on these Zed axis because it's already in line with our character and then we'll do atom model size here's if your model you're on your model to be touching your character will be interfering with your character if you just add on the model size it will position in it further away so depending on the size of the hitbox if it's too far away maybe reduce the size that hitbox or reduce this vector3 value here but this will position it just to be away from your your character okay let's do the same for the pets so local attachment pet equals incidence new attachment just inserting a new one into the game attachment pet dot visible equals false and we don't need to position it because it's when we parent it to the pets like this it will just be in the middle the attachment will be in the middle we don't need to do any positioning because we needed to position the previous one because we're telling it where the where to attach the pet to whereas we just know that the pet will be following the character attachment so it will be linked up the two attachments will kind of be stuck together in the same position so as long as the knee attachment for the pet is in the middle that's fine right now we can get to the good stuff we can insert an align position so this will basically align the two attachments if you had for example the the pet one over here and then you know you have the character one the we want like the pet one out here to always keep moving towards the characters one and and ideally you want them to be stuck together in the same place so if that was you know this is the character that's the character attachment you want the pets to be in the same place so local align and that's what the align position will do a line position it was instance dot new a line position so you have to give it a maximum amount of force to use when moving the pet towards the character so I only set that's 25,000 I've done a bit of testing that works out that 25,000 is that is an optimum value then we need to set the two attachments so it knows which attachments are going to be you know used and which one should be moving towards the other one so a line position doctor attachment zero that's going to be the pets okay and it's going to be the pet that is moving towards the character and we don't want the character to move moving towards the pet so a line position to attachment one is going to be attachment of character and then we need to set the responsiveness the responsiveness is the degree of how quick it is to respond to new movement so if you move your character how quickly should the pets respond and like as if wake up and start moving with you if you're if you're stood still again twenty five optimum value and then the last thing to do is parent it to the pets because this is going to be inside the pet right so if you were to test this out the pet would start moving with you but it would be a problem it would it wouldn't be rotated correctly and it would probably be spinning round and round and around now if you want to test it out I guess we could go and do that let's just add a wait five seconds at the bottom of the scripts sorry no will do a wait five seconds inside the player added and then we can say equip pets and we can give the player and game don't replicate this storage dot pets but monkey code on clone because we need to make a clone of the pet right let's click on play and hopefully this will work obviously we haven't tested it yet but after the five seconds okay cool we have an error so that's that's okay we can see what caused that on line 22 function equip attachments must be parented to apart instance oh my bad it needs to be parented to the primary part because with we're trying to parent it to the model so it needs to when you're doing an attachment it needs to go in the primary part so it will go in the hitbox it's just that we parented it to the model my bad okay let's try again then and here we go so you can see it's now the position is being aligned you know it's moving in the right place but it's the orientation is is not aligned so it's not constraining its orientation or its rotation so it's just letting it freely move around in the air but let me show you this it's called album blocks as pet and if we look in the hitbox we have an attachment in the past we have an attachment you can you see that little green dot well we've also got an attachment in our player somewhere I think it's in the humanoid root part here oh here it is attachment you can see they're in the same place so the attachment of the pet is is always going to be in the same position as the humanoid root part one and who nod root part one is is moving with our player all the time because it's moving when the humanoid root part moves and it is offset it relative to that the position of the united root part so whenever we move the attachments are moving and the pet is moving with us because the aligning position is forcing the pets to to move in to move so it's always so that this attachment here is always in the same position as the other attachment which means that the pet will be moving with us we just need to now set up the align orientation so it so it sets the rotation automatically so again this is quite simple quite similar to the align position local align orientation equals instance new online orientation make sure you get the spelling right and then again we set the max force I'm setting mine to 25,000 again just you can play around with it if you like you have to use the same values as mine but these are the optimal values that I've figured out and then a lion orientation dot attachment sorry it's not max force it's not max force it's max talk and that is the it's the amount of rotation so how how much it will rotate and the amount of like force it puts into that rotation so so attachments zero is going to be the attachment pet an attachment sorry a line orientation dot attachment 1 equals attachment character and then a line orientation dot responsiveness again how quickly it check it responds to a change in position 25 and lastly alone orientation dot parent equals pet and now this should make its rotated properly it should just keep it in one rotation there we go so the pet is always gonna be facing us and moving with our character awesome now here's what it looks like if you reset the attachment is there an attachment when you swap them around you could see that I was actually being pulled towards the the pet so that's why it's just good to keep it as I did and that is because by default the force is applied to attachment 0 so the thing that you want the force to be applied to in this case the pet to move it towards the character will be attachment 0 now since we know that this works I'm going to delete the two lines in the player added script because we don't want that and we also you know we don't know the pet that you want to equip yet we'll be doing that later on so the way this is going to work we've got our function done to equip the pet so this equipped pets string value whenever this changes its value changes currently it's got no value but the equipped pet will change its value when we click on a pet to equip when we click on one of the templates it's going to change the equipped pet value what we're going to do is we're going to set up an event so that's when at this value changes we fire dysfunction to equip the new equipped pets and also when the players character is added so when it's first added to the game but also when they reset and the reason we are going to have these two events is because the character added event we could begin late and it might not so your character might have loaded before you're equipped pets data has been loaded so you need that second event to detect when the equipped pets value changes and when it does change when the date has been loaded and it's been loaded it's really the value of the equipped pet changes to the latest saved data then that second event will be like a fallback option so the players pet always gets loaded so we can say let's firstly do the character added one so when the new character spawns into the game and the character is the player's model in the workspace so either when they first join or when they respawn so player character added Connect function and then we are given an argument for the character I'm just going to call it car like this CH AR and what we can do is we can check to see if there is a pet in replicated storage with the name being the value of the equipped pets string value so if the equipped pet has a value for example it could be monkey then we'd look up its value in replicated storage in the pets folder so if game got replicated storage waits for child and then there would put pets and we say cutoff fine first child equipped pets value so if there is a pet with the in Inlet folder from our equipped pet value then we can equip it so we can call the equip pet function and we need to provide the player who is going to equip the pet so we already know that because it's the player that will join the game and we also then need to make of the pet so let's just copy this line just excluding the if and then and we do a comma and we paste it in as our second parameter we just need to add clone so we're making a clone of this pet now just make sure you have the right amount of brackets or parentheses on the end so we've got one here at one opening bracket here and another one here as well so make sure you've got two closing brackets on the end one for the clone to close that off and the second one to close off the whole equip pet function so that is going to call the equip that function to equip your pet when you either respawn or join the game but you could join the game and you're equipped pet won't might not have loaded yet because the data store now we will be coding data store in the next video so you'll learn more about why we need to have this but also if you change your pet if you're playing the game and you decide to equip a different pet we're gonna just update this a quick pet value so we can check to see when the value of this string value called a quick pet changes and when it does change to a new pet we can call a quick pet again so to do that we use a changed event so equipped but not changed colon connects function so when a property of the string value changes so the property that's going to change is going to be the value so when it's value changes it will run when any property changes but we know that the only property that we're going to change is going to be the value of it because it's going to store the the name of our equipment Pet will say if equipped pets value is not nil then we want to check again to see if it is a pet in replicated storage we can just copy this code and put it in there just like this so we've got that second if statement checking to see if there is a pet in replicated storage with the with the name from the value of the equipped pet and if there is and we can call a quit pet again and another problem that we just have is that as we equip more and more pets we're going to have lots of attachments being added to the player so what we can do is we can just give them a name let's give each attachment a names of attachment character dot name equals attachment character and attachment pets the pet the attachment pet doesn't matter who's going to be deleted we already delete that but anything in the character let's have a look so the align position and a line orientation are going to be okay because they're just going to get deleted because they're inside the pet and we destroy old pets but the attachment character is going to need to be deleted so we can just say if the character dot humanoid root parts curl on fine first child attachment character capital C although if you've named it something different then if you use your own name code on destroy oh sorry then and then you just copy it again and we can say destroy on the end of it there I should really put this onto three lines let's do that so it's just going to remove that attachment if you had a pet already equipped it would remove that attachment before adds the new one so now that that gets destroyed let's go ahead and try it out so if we click on play and just close down the inventory open the outputs okay I go on the server and we change the equipped pet value to TV I've got a TV and if I change it to monkey I now have a monkey so you can see that the equipped pet got changed function is firing because when we change the value of the equipped pet is checking to see if it's an actual it's not nil and there's actually some text there and then it's checking to see if it's an actual pet in the folder in replicated storage and if it is then it's going to it's going to execute our equip patter function it's going to make it's going to look at that pet and equip it for our player so that is a success all we need to do now really is just do a bit of coding so that when you click one of your pets that will appear in this inventory GUI it will fire a remote event and then when we pick that remote event up on the server we can change the players equipped pets value because you can only change values that are stored in the player from the server house the changes won't take effect if you change them on the client side so that's what we're going to do next so here we are back inside the GUI client scripts and within the add to frame function we need to set up an event when you click on the templates button so we have a look inside the templates it's obviously an image button so we can just set up a mouse button one click event from that so if we just go to the bottom of the function here and we can set up a table to handle all of our connections now if you don't know what a connection is when you set up an event the scripts is constantly listening out for you to do the action so if I set up a mouse put some on click event the script is always going to be checking to see if I'm clicking the button yep so it's constantly checking that and that's using up memory and as you add more frames to your GUI that's more and more of these connections more events which are constantly checking to see if each individual button is getting clicked now if you have loads and loads of connections and it might be that you know you no longer need those connections because you might have some pets that you no longer own or something it's just a good idea to keep track of all of your connections because you can disconnect them and when you disconnect them it means that you're no longer listening out to see if that thing is happening and so you are saving a memory leak and a memory leak is when you just have unnecessary events which keep checking things for no reason even though you have no purpose in that so if we just have a table and we can fill that up with our connections and if we ever wanted to disconnect them for example if you sold a pet you would no longer want to check if you've clicked the button because you don't want it anymore you can just disconnect that connection so local button connections equals and a blank table like that at the top of the scripts is a variable and then to put the event connection in that table you can save button connections and do square brackets and then hash tag button connections plus one so it's just this is just a fancy way of saying table dot inserts but because you can't say well I mean could I guess but this is the better way because you're inserting it at the next available position so hash tag button connections is the number of objects so if you have got six objects currently in the table then the thing we're going to set this to they're going to be the seventh because it's six add one seven so the seventh index in the table basically the next available free index in the table that's going to be equal to new templates drop Mouse person one flick code on connect function so now this connection is stored in a table if we ever want to disconnect it we could loop through this table and disconnect everything inside of it but we don't need to do that but in the future if we need it to do that's why it's good practice to set it opposite connection like that so we the pet is either going to be equipped or unequipped alright if it is currently equipped than the text of the equipped text like what was going to say equipped if it's not currently equipped it's gonna say unequipped so we can check see if new template dot equipped dots text equals equipped it's gonna be in capital letters for me by the way then so if it is so is it just the text currently says equipped we know that as it is already equipped they want to unequip it so if they click it again once they've already equipped it they want to unequip it they want to they don't have to pay anymore so if they do want to do that then we'll have some code that will fire a remote events to tell the server that we want to unequip that pet but for now let's just deal with unequipping it so else if B text is not equipped then it must be unequipped and so we will know that it is already unequipped and now they want to equip it so to equip it we can create a remote event and we're gonna call this remote events equip heads and then we can say game don't replicate the storage dot equip pets curl on fire server and we need to send the name of the pet don't we so we can tell the server the name of the pet that we want to equip and obviously because we have our pet as an argument in this function because when we call the function we're supplying the pet which we know from our hatch egg event which tells us when it gets fired we can just send the pet's name just like that and yeah so we will deal with this for now so we'll go back to the main script and now at the bottom of the scripts we can pick up that server we're most sorry that remote events which will get fired we can pick it up in an event on the server so game the replicate this storage dot acquit pet dot on server event when it gets fired to the server from the client I'm gonna connect that to a function and we've got two pieces of information the first one is automatically sent by roblox that's going to be the player who fired there are most events and the second one is the one that we sent and it's going to be the pet name you don't you know you know you can call them whatever you like is the order that matters so the player always comes first and then from then on it's the order that you put them in so that you don't have to have the same name as I have so in here all we need to do is check if it's a natural pet in replicated storage so let's create a variable for it local pets equals game replicate the storage dot pets code on a find first child pet name so this pet variable is either going to be an object or it's going to be nil so if it's nil we'll just check because it's no there won't be a pet with the name in that folder so if pets then we also want to make sure that you own the pet so we can check to see if it's in your pet inventory because we don't want people to fire this remote event and say that they want to equip a pet that they don't actually own so we need to check they have it in their inventory so if pets and player got pets inventory find first child pet name because we have a value in that pet inventory folder with the same name as the pet so now that we've verified that they own the pet we can set their equip the value and when we when we change the value of the equipped pet then it will fire off this changed event and it will equip the pet for us so we can say player dot equipped pets dot value equals pet's name and then that way because the value has been changed it's awfully going to trigger this event and the pet is going to be equipped on the player so now what we need to do is we need to now you've equipped it we need to change the text on the client only because if you've if it was saying unequipped and you just equipped it we need to change the text to say equips or vice versa so the next time you click the button the new template dot equipped dot text will be something different and that's how you get unequipped first time then when you click it it goes equipped and when you click it again it goes unequipped because if you change the text you can just always check to see if the text is one or the other and then that will tell you what you want to do so we will create a function to do this because we also want to change the other frame so if you have five template frames in your inventory and one of them was already equipped and you clicked another you'd want to set them all except the one that you've just clicked to be unequipped so you want to reset the others so we will create a function outside of at the frame local function and we'll call it set template equipped so we want we're going to pass to this function make sure you add the ending by the way I'm going to pass this function the object of the template which is going to be equipped okay so it's template and then firstly we'll just loop through everything in the scrolling frame and then we'll set it to be unequipped so for I comma V in pairs scrolling frame get children do so we need to check to see if the objects we're currently looping through is a is a is a template so if V curl on find first child it quits we know it's going to be a template if it has the equipped text label inside of it so if it does have that equipped we know it's a template so we can say we can set the equips text to then say unequip s' because we're setting them all to be unequipped first we're just resetting all the other buttons and you can also change the color of the texts label so V dot text color 3 equals color 3 dot from RGB now if it's unequipped i want it to be red so we know that red is going to be 2 5 5 comma 0 comma 0 it's an RGB value so there's no green there's no blue there's just a 100% red if you wanted to get your own RGB value and you could just go into equipped go into text color three choose the color and there would be these three values here these three values make up a color that's just how it works thing it in the computing RGB red green blue Nick get three values mix them together and it creates a color so this will make it red so now that we've reset them all reset all the templates to be unequipped we want to set the one that we've just equipped to say that it's equipped so templates dots equipped dot text equals equipped and template dot equipped dot text color three and this time you might want it to be green so color three dot from RGB 0 255 comma zero and that will be a green color because only the green value has got a value above zero and it's 255 which means it's a hundred percent green no so again you could just use the color picker if you wanted to pick your own shade of green and you would put 103 to 1 to 53 in this case but I'm just doing a simple color which will give us green so this is making one template say equips and all the others are being set to unequipped now we have this for loop before we change the the the object that we want to say equipped because this is going to set all of the templates including the one that we want to set to equipped it will go unequipped first momentarily and then it will instantly set the one we want to be equipped so it's resetting them all to say unequipped and go red and then the one that we want is gonna say equipments gonna go green so that is why we have this function and then when we have equipped a pet we can just call set templates equipped and we want to give the new template the one that we just clicked because that's going to become our equips and pets are its frame now if it's already equipped when we want to equip it so we can we'll have another write event we'll call it an equip pet earn it quick pet and all fire that's now on the server we'll pick that up and we'll just set the changed about the a.m. quits pet value to be nil so game to replicate the storage dots burn equip pet coal on fire server we don't need to send any parameters we don't need to tell you the name of the pet because we're an equipping the pet we don't want any pet so once you've done that we just need to set the new templates equipped the text to be unequipped and its color as well new templates got equipped dot text color 3 equals color 3 from RGB and that's going to be red so we know that the Reds gonna be 2 5 5 comma 0 comma 0 4 again you can use whatever RGB value you'd like so this is going to set it to be gonna quit and just make it look red again so it shows that it isn't equipped and that is going to you know switch so when you click it first time it'll equip it and then the second time you'll become owner quiz so make sure that you're equipped text label is the text is set too unequipped has to be set to unequipped so this isn't going to work if it's not set so gonna quit this text label here then it's not going to well it it would work to be honest but it's just a good idea that we have we have it set to unequipped to begin with because that way it's in line with with what we're currently doing because it's like the text is are they going to be equipped or an equipped and by default it won't be equipped so who set it to be on equips ok so as i said we're gonna go back to the main script and we're going to do this unequip pets remote event now so very simple I'm just gonna copy and paste the equip pet code I'm gonna change the name from unequip from equip pet to only quit pet and we don't need the parameter or the argument for the pet name we just need to set the players player dot equipped pet dog value will just be an empty string like this instead of setting it to nil we set it to an empty string like this because I think you can have neil string values they have to just be an empty string like that so because wants it unequip the pet we need to delete any pet that they currently have in their character so to do this we can say if player dog character Kerlin fine first try old and then because we named it to be player name dots pet we can say player name dot dot was pets like this then you'll just say player doctor actor and then in square brackets because we know it's there now we don't use find for his child but if we were to use the square brackets in the if statement it could give us an error if it wasn't there so that's why we use find for a child just who doesn't break the script if it isn't there it doesn't cause an error so fine for his child is like a fallback option in case it isn't there so we can say player dot name dot is pet curl on destroy like this and that's going to delete the pet from their character and as well we will delete the attachment let's let's take yeah let's do if player dot characters a humanoid root part color find first child attachment character then player character the humanoid root parts find first child attachment character destroy okay and that will delete the attachment from their character that which we do delete in the equipped pet functions but if they're not equipping a new pet it will stay there so we can just delete it there and then so i think that's everything let's just have a quick scan through so we have set up our events for when the player respawns and when they're equipped pet changes so they can get a new pets and we've also done the client coding as well so that when they click on a button they can either Equipe or unequip the pets so let's go and give it a try I'm going to go join the game and we're gonna have to walk all the way over to that inventory I capture but that's okay just try to speed things up a little bit so if we go and buy our egg for five hundred cash we can see that it's going to hatch what do we get we get a larva Lord I believe that is so let's check our inventory we have a lava Lord and it is unequipped or I forgot to set the text to be read the property to be read so when the game first starts and the template is first created it's black into the red but that's okay we click it and okay let's have a look text color three is not a valid member of image person that's okay we'll check it out so that's gonna be on line 16 oh yeah we need to set the dots equipped dot text color 3 not V Delta X row 3 that was my bad because V is the image button it's the equipt it's the template whereas the acquit is inside of the template so it's V dot equipped dot txt color 3 okay let's move in front of the in front of the dispenser and I'll click it and let's see what we hatched this time so it's gonna be the TV that's what the output saying yeah and the TV is in our inventory so if we click on it it's now equipped and there is no TV by our side okay that's cool we can check it out so look in the equipt pets and it is it's set to nothing let's try that again okay so what we can deduce from this is that it is not setting the equipped to pet the value when we click on it so let's check this out so see equip pets oh I know I know why I know why it's because it's because we haven't yet I forgot to do this this is my bad we have one week we buy the pets but it doesn't go into your pet inventory look isn't going to your pet inventory here so we need to insert a value which goes into the pet inventory when you buy this item so that we can tell you own it if you were to have it in the pet inventory that will give an example what would just hatch we hatched a TV so if if the TV was to go in here we had our value and we equipped it yeah it would acquit so it's because we haven't put it in the pet inventory and it's failing it's failing when we get to this part so because obviously it isn't in our you know our pet in Vitoria so when we do buy it let's go into our dispenser I can't really see it we go into the dispenser and our scripts and we do choose random pets we can just say local value equals instance I thought I'll just call it pet val equals instance new string value and pet valve name equals pet dog named pet val godparent equals player dot pets inventory let's try it again so this way it's inserting the value into the pet inventory so we will know that they own it so if we just do the egg again so we all get the monkey and if we just go and click on the equips we now have the monkey and the monkeys following us and we can unequip it and it's gone we can bring it back and yeah let's go and get another one so we're now getting the lava Lord and this time it says unequipped but the monkeys still equipped with we honor if we equip the lava Lord you can see the monkey is unequipped and the lava Lord is equipped so there you go so what I'm going to do now is I'm going to reset so we can test that it loads the it's pet so let's just take a look at this this shouldn't reset ok it has resets I know why that is though don't worry but we know that the pet is stayed with us and his respawn that's because look at the character added event but how do we stop the pets from going away when we reset very simple we need to go into the inventory here and the inventory has a property called reset on spawn if you set that to be unchecked it's not going to reset when you respawn and the last thing is I'm going to go into the equipped I'm going to set the text color 3 to be 255 comma zero comma zero and I'm also going to set text stroke transparency to be not 0.5 so we have a little with a black outline so we can read the we can read it easily we can read that the equipped and owner quits values so let's just try this one more time so this is called testing and making sure that your program when your product is free of bugs and it's working to the standard you expect and the reason I'm leaving this in and I'm not edit editing it out is because it's something you can have to go through as a programmer I'm keeping it real and this is the what you'll have to go through if you're programming your own roblox games lots of testing lots of iteration all of that and that's what goes down to making good products and good services so I might have overdone it with the text stroke transparency a little bit I might increase that to about nine point seven five so it makes it a bit easier to read but I can equip the monkey I can equip the lava Lord doesn't matter I'll equip the monkey though and we'll reset and remember that it's updating our equipped pet to be whichever one is currently equipped and that is what is allowing us to respawn them in and keep track of the the pets we have the pets now get inserted into the pet inventory if you wanted we could equip the lava Lord so working very well in my opinion all that's left to do with the data stores and I'm not going to do that in this episode because this one has taken me a while to record and maybe it's a challenge for you you could try and work out how to data store your own pets before that video comes out hopefully it will be out within a week or so but the issue it probably will be out by the time you're watching this video if you're watching it in the future but yeah so thanks for watching this has been episode number two in how to make a pet system in roblox I recommend you watch some of my other videos and fats I'll leave it on the screen for you to go ahead and watch now so why don't you go ahead watch it and don't forget to subscribe to the channel as well and like the video if you've enjoyed it and share it with a friend as well who you think might find this out forum so thanks for watching I'll see you in the next one Cheers
