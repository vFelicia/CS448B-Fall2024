hello everybody and welcome back so in this last tutorial what we're gonna be doing is talking about message flashing now essentially message flashing is showing some kind of information from a previous page on the next page when something happens on the GUI so for example say I login it redirects me to another page and then maybe on the top of that page it says logged in successfully or if I log out maybe I'm gonna get redirected to another page but I want to show on that other page that I logged out successfully so I'll flash a message in a certain part of that page so that the user has some idea what they actually did so it's to give them a little bit more interaction with the page some feedback for things that they do so they have an idea what's going on and that rather than having to change the whole page entirely or passing through some other variables to show on the screen you can just flash a message and it makes it really easy to do this in flask so to actually flash a message all you need to do is to import flash and then you can use this function to display or kind of like post the messages that are to be flashed and then from the different pages we can decide where we want to flash those and we'll do that in a second so a basic example of when you might want to flash a message in our kind of script here and this is where we left off in the last tutorial is when we log out because what happens when we log out is we go to this page but then it pops our session and redirects us back to the login page so on the login page we probably want to show logged out successful so that they know there wasn't an error and they didn't you know they're not still logged in they know that they logged out so to do this I'm gonna say flash and then here I'll just put the message that I want to show which is you have been logged out like that and then the next actual parameter for this is the category now this is optional but I'm just gonna put info as the category as that's one of the builtin one so I believe that warning info and air and that's just if you want to show some icons and stuff beside it you could use the category to do that so that is pretty much it for flashing a message now we actually need to display the message from our different pages so what I'm gonna do is go to the login page and inside my block content I'm gonna write a few kind of templated code here to display all of the flashed messages that come up so to do this I'm going to say with oops if I could spell with correctly messages equals gets punished or flashed hundred square messages makes you add the brackets and then I will end my with so do % % and wit then what I'm gonna do is an if statement inside of here this if statement will just check if we actually have any messages to display so if messages like that we will end the if statement and then if we do have any messages to display we will loop through them and actually display them so now what I'm gonna do is go percent percent for in this case MSG in messages making sure we're spelling everything correctly then we'll end the for loop and then what I can do is display all these messages so to do that we'll just add a piece AG we'll put two of these curly braces will put MSG and then we'll end the P tag now I kind of zip through this cuz we've seen this before but essentially the width is just another Python syntax you can use in here we're gonna say messages equals whatever these get flashed messages are check if there's any to display if there is we'll loop through them we'll display them and that will be it now notice that we can actually have more than one flash message which means if we go between a few different pages maybe we'll show two or three flash messages on a specific page so I'm gonna leave that like this for now and we'll do a quick test and then we'll talk about some issues with what we have right now and adding some different flashes and some different ways of handling it so I'm gonna run this script so python tutorial 6.2 pi open this up in my browser you can see i had it running before so let's refresh that i'm on the home page i've also modified this navbar so that i have log in and log out as direct links here pretty basic you guys could probably figure out how to do that so i'll go to login will go like you know hello submit there we go around the user page now if we go to slash log out you can see that we get the message you have been logged out and it still shows our name now notice though if I go to like let's say the slash and then I go to slash logout again it says you have been logged out once more now maybe we only want to show that you have been logged out if you actually were logged in so in that case what we could do is we could check if we have a user in the session and only if we do then we will say you've been locked out so we could say we'll actually just copy this so if user in session user equals session user and then maybe we actually display like whatever their name is that they've been logged out so in this case we can say flash you have been logged out comma and then maybe we'll put their name so in this case I'll actually just use an F string like that and put user so now this way we actually display their name and tell them they've been logged out but only if we actually had a user in the session ok so that is pretty much it for that so now I'm going to show you how we can flash a few different messages I also want to change the page for this because we're gonna be using something different so let's start by actually creating a new HTML file which we'll use to render the user page because right now we just have these h1 tags and I'd like to make something that looks a little bit nicer so I'm gonna say user dot HTML new file we will simply extend that base template so extends in quotes face dot HTML and then we can add our blocks so we'll say block in this case title I don't really know what to call this one so I'll just call it oops what am I doing here and block we'll just call it like user because why not and then we'll add the blocks for content we'll set up our message flashing and we'll be good to go so block content and then and block I'm actually gonna make it so it displace like hello like welcome user whatever it is so to do that I'll just add a P tag and I'll just say welcome comma and then we'll just pass in actually like a user so we'll say user like that and then we can display that message flashing which all I'm gonna do to do that is copy this from the login page and put that at the top of the user page like that so now I think I missed one of the things from here I did I missed this with so let's grab that put that back in here top that in and now we'll display the message flashing and then this so now what we need to do is simply render this from our other page here so what I'm gonna do is go back to where we have user rather than just rendering the user's name will actually render the template so we'll say render template believe I've called this users HTML and then we'll pass user equal user like that and that should display it for us now let's see where else we might want to flash a few more messages before we end here so let's grab a flash here actually I don't need to copy the I'll just type it out so for example when they login we probably want to tell them that they logged in so to do that we can flash a message in here so we'll say flash and then login successful like that so we'll flash that one there we'll also flash that one hmm you know what what what I'm gonna do here is what this is doing right is saying if you go to the login page but you're already logged in it just brings you to the user page it just redirects you there so what I'll do is say if they go to the login page and they get redirected already logged in so that way when they go back to the user page they know that no nothing went wrong they actually just are already logged in so that's why they got redirected there okay so I think that is pretty much good for now when I go to this user page I'm actually gonna flash a message that says you are not logged in because that means that if they try to go to the user page and they're not logged in they shouldn't be able to see anything so we'll redirect them back to the login page so anyways this might not be perfect but this will do for now so let's test it out and see if I made any errors which I likely did so let's go back to the home page so I'll just go home like that you have been logged out okay I think that was just the last message to show so let's go to slash login there we go let's login as Tim submit long and successful welcome Tim okay looks like that's working right now let's go back to the home page no messages to display let's go login already logged in welcome Tim and then last we will check out logout and when we did that he didn't flash the message back on this page let me check if this is actually correct here what I'm gonna do is just honestly rather than checking this session here let's just always flash that you've been logged out because regardless of what they do they probably should be told that they were logged out so let's just do this now again login you know H submit oh what's going on here let's see here okay successful login now if we go to back to slash law you've been logged out function user at blah blah okay that's interesting why that showed that um user Oh oops this is displaying a function I need to get rid of f string my apologies guys okay but that is essentially how we flash the messages don't worry about that last error just because I was passing the user function so displayed this weird string of text but that is message flashing so with that if you guys enjoyed the video make sure you leave a like and subscribe in the next video I think we're gonna get into some database stuff and start getting a bit more complicated and talk about how to set up an actual scalable web server so anyways that has been it and I will see you guys in the next flasks tutorial