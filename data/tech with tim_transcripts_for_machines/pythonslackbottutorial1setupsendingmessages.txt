hello everybody and welcome to a brand new tutorial series on building a slack bot in python now i'll quickly introduce what slack is in case any of you are not aware but slack is just another messaging platform it's similar to something like discord maybe even comparable to something like microsoft teams i know a lot of large companies use slack for their main communication the nice thing with it is it's really easy to direct message people you can add teammates you have a bunch of different channels there's all kinds of emojis you can have some nice formatted messages i don't use slack all that often but a lot of you guys have been asking me to make a slack bot so i figured i would go ahead and make this tutorial series now in this series i'm going to be making kind of shorter videos aiming to have them about 10 to 15 minutes in length that show you kind of individual things so the first thing we're going to do in this video is just configure the slack bot which will actually take a good amount of time and then we'll actually add it into a channel and have it so it sends a message that will just show you the basics and the setup then from there what we'll do is we'll configure events so essentially allowing us to subscribe to specific events so if a user you know messages in a channel that will send us that message or send us an event that happened we can handle that event and then maybe we could reply to them we could track that message we can see if they send a command so on so forth we can do all kinds of stuff like that so you'll see what we're going to do later in the tutorial series but let's go ahead and get started the first thing we're going to need to do here is just make a new workspace so you can see right now i'm in the workspace i was using before i called it python api tutorial just the slack api i was just messing around before preparing for this tutorial but to create a new workspace you're going to have to obviously make an account on slack i'm going to assume you can figure out how to do that on your own and then if you're already in a workspace for some reason you can click on it and then click add workspace so i've already got that open here this is the page that will pop up when you press add workspace you need to insert an email i'll get my email to actually be blurred here i don't want you guys to see that and then i will click continue all right it's going to send me a confirmation code i'll go ahead and set this up and then once the workspace is ready i'll be right back all right so i went ahead and configured that i guess i'll just call this one slackbot tutorial i'll just label this one youtube so i can differentiate these two and now i have a new workspace i'm not going to add any teammates here let's skip that step and i guess we'll say hello team as our first message all right so here we are we are in our new workspace now what we're going to do is go ahead and head over to the slack api website all of the links here will be in the description you can find them down below and we're going to configure our first app so what i'm going to do is press on my app right here are your apps in the top corner you'll notice that i already have one right here your page may look a little bit different but all we're going to do is press create new app and go ahead and give it a name and then choose what workspace we want this to be in so i'm going to go ahead and name this one youtube bot like that and then i'll put this inside of slackbot tutorial for youtube all right so create app and now you can see we're on the kind of the dashboard here and we're gonna have to do is configure a bunch of different things so the first thing that we're going to do here is we're actually going to go ahead and go to bots like this and we're going to go to review scopes and add so essentially we need to give our bot permissions for whatever it's going to be doing in the channel so we can pick how many permissions we want it to have it can merely just read messages or it can send messages or it can add reactions or it can view email addresses and all kinds of different things like that so what we're going to do is go down here to add in oauth scope essentially the scopes are just the permissions that we have for our bot in whatever workspace we're in so here we can see there's a bunch of different scopes they have permissions for what they all do you obviously could add all of them if you wanted to but right now we only need one and we just need the chat and then right one so i need to find where that is uh chat chat chat come on where are you chat right is somewhere okay so i found it i just searched right here and then it popped up i have chat right okay so that's all we need this just allows us to send messages in a chat later on we will add other permissions and you'll see how we actually figure out which ones we need to add but for now that's all we need the next thing that we need to do is actually generate a token for our bot so to do that we first need to install this into our workspace and then i believe we can generate a token we're going to take that token copy that on our clipboard and then we'll add that to our actual python code which we'll start writing in a second so i'm going to say install app here we can say you know this is what it's allowed to do perform actions and channels and conversations we will allow that and there we go so now you can see we get a token for your workspace so i'm going to copy that token right here i will blur this out just so you guys don't see it and mess with my slack bot but just something to note here that if we add any more scopes we will need to reinstall this app into our workspace so if you mess with any of these scopes you're going to need to reinstall this i don't think the token will change when you do that but just keep in mind it will ask you to reinstall this in the workspace if you mess around with any of the scopes all right so now that we have that we're actually kind of good to go and we can head over to our python code so i'm in vs code right now this is the editor i'm going to use for this tutorial of course you guys can use whatever you want but i'm going to start by just making a new python file and calling this bot.pi you can call this whatever you want it does not need to be called bot.pi i'm also going to make another file here and i'm going to call this dot env now dot env is standing for our environment variable file so this is going to hold our token and a few other things that we'll need later on so that we can actually connect to our workspace and to our slack bot so the first thing i'm going to do in here is i'm going to say slack underscore token equals without a space and then i'm going to paste that token that i had from the slack api so go ahead and do that dot env so just period as the start you should see a little gear icon popping up if you're in vs code if you're not vs code that's totally fine just make sure these two files the python file and the env file are in the same directory then go ahead and save this file now what we're going to need to do next is install some python packages using pip so if you're not familiar with pip i actually don't know what it stands for i always call it uh package installer for python but i know that's not the correct name but anyways we need to go to our command prompt on our system if you are on mac in linux this is going to be a little bit different so i'll explain those steps in one second but start by just typing pip so p i p we type that and you should see some output popping up now this obviously assumes you have python installed on your system now for some reason pip is not working i have a video on my channel that explains how to install pygame so if you follow that what it will actually do is show you how to reconfigure your pip obviously when you get to the step where you're installing pi game rather than installing pi game install the module i'm about to show you here so if pip is working for you then what you're going to do if you're on windows in your command prompt is do pip install spell install correctly and then slack and spell slack correctly client this is what we're going to need to use to actually connect to our slack client so we'll just pip install slack clients now oops let me go back to command prompt here the next thing that we're going to need to do is install python hyphen dot env now what this is going to do is allow us to read from this environment variable file i just always like to use this module it makes things a lot easier so pip install python hyphen dot env make sure you add the python hyphen before all right so we're going to install that you can see that we're already satisfied for me but you guys should see some kind of loading bars and everything should be working now if you're on linux or you're on mac this will be the exact same steps except you're going to go to terminal and instead of pip you're going to type pip 3. so pip 3 should be the only difference here and if that doesn't work for you again i have another video that shows you how to reconfigure pip on mac so that works so i will leave that in the description as well and maybe put a card somewhere on the screen all right now that we have that what we're going to do is go inside of our bot.pi file and start writing some code so the first thing i'm going to do is i'm going to import slack next i'm going to import os which stands for operating system i believe and then we're going to import something from pathflip now pathlib is built into python 3 by default i will note right now that you need to use python 3.6 or above so you should already be using that version but you do need that so actually i'm going to say not import pathway but i'm going to say from pathlib import and then with a capital p path and then i'm going to say from oops if i can type correctly here from dot env import load underscore dot env what this is going to do is simply load our environment variable file so the first thing i'm going to do is say env underscore path which stands for our environment variable file path is equal to path and then i'm going to put a dot inside of a string here this stands for current directory then i'm going to add a slash and i'm going to do env with a period before it so this is just denoting where the path for our file is so that we can load it next we're going to say load.env and then we're going to say dot env underscore path equals env underscore path again just loading this environment variable file which will load the environment variable that we had inside of there next what we're going to do is we're going to say rtm client which is just the client that we're sorry not rtm client what am i saying this should be client is equal to slack dot web clients web client is what we're going to use for this tutorial there is some other clients built into slack here i'm not really going to talk about them it's just part of the slack api in this specific module in our case we're going to use the web client so we're going to say client equals slack dot web client and then we're going to say token equals os dot environ or however you say that and then inside of square brackets we're going to put the name of the environment variable that we had here so in this case i put slack token so i'm going to go ahead and put slack token inside of here and what this should do is load the actual value from this file and then kind of pass that in as our token so that is how we're going to store the token the reason i'm not just storing it in plain text here is because it's better practice to load this as an environment variable and say you had this on a github repository or something you would simply upload all of the code and you just wouldn't upload this environment variable file so that way no one knows what your token is so hopefully that makes sense all right so now we have client this should actually be working what we're going to do is go ahead and run this and see if this works all right so i got an annoying error here that's saying no module named slack now it's actually good that i ran into this because i wanted to cover this for you guys what happens here is that slack recently like the their api for it or the python package has been changed a bunch so if this doesn't work for you for some reason what you're going to need to do is simply uninstall slack so pip uninstall slack clients like that and then just simply reinstall it afterwards so in this case i'm going to say yes we will remove all of that and then i'm going to say pip install slack clients like that and hopefully this should reinstall and everything should be working fine so that uninstall and reinstall actually works for me you can see i'm not getting that red squiggly line anymore and now slack should actually import properly so let me go ahead and run this and we can see that that actually worked there was no error which means that this is perfectly fine so the next thing that i will do is i will set this up so we actually send a message into the slack client but just or sorry slack workspace what am i saying but if you run this and no errors happen at all you're good you will see an error if your token is incorrect or if you can't connect to your slack web client so next what i'm going to do is i'm going to say client dot and this should be chat and then dot underscore post message and this is simply the method to actually post the message to the chat now the first thing that we need to pass in here is the channel that we want to post to so we're going to say channel equals and then we're going to do the pound sign for the name of the channel and then test or whatever other channel we have so in this case let's actually go back to our slack workspace and rather than just having this general channel here what i'm going to do is make a new channel so i'll create a new channel i'm just going to call this one test like that i will press create i don't need to add anyone into this right now but what i will do is connect an app so notice this is add people and connect an app so i have to add my youtube bot into this channel otherwise i'm gonna get an error so let's say connect an app and then we should see that we have youtube bot i will go ahead and i will add that in all right so now we have the youtube bot inside of this channel and we should be good to connect to it and send a message into it so i will leave this open i guess we'll go back to that in a second but we'll say channel equals test the name of the channel we just created and then text is going to be equal to whatever we want to send so in this case let's just say you know hello world exclamation point now what i can do is simply run this and we should see that we don't get any errors that's great and if i go back to my slack channel here we have our youtube bot saying hello world now let me just show you quickly what happens if i try to send something in the general channel when our bot is not added to that channel so let's say general like that and let's run this and notice that we get all kinds of text giving us an error if we look right here it says the server responded with okay false which means no this was not good error not in channel so it's telling us the bot is not inside of the channel so if you run into any errors just look at this last line here and see if you can kind of understand what was sent but that is pretty much all i wanted to show you for this video so i'll go back to test run this one more time to make sure that i haven't messed anything up and we can get we get hello world popping up one more time so obviously in the next few videos we're going to be doing a lot more advanced stuff this was just the basic setup i wanted to show you guys how we can configure everything and hopefully that's working for all of you so with that being said if you enjoyed make sure you leave a like subscribe to the channel and leave a comment letting me know what you want to see for the rest of this tutorial series