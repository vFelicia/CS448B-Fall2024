in this video i'll be giving you an introduction to the module known as pi monk and showing you how we can use it to perform physics simulations now this is a great module it's really easy to use and you can do a ton of powerful stuff with it and so i'm going to go through a few demos right now just to explain and show what the module is capable of then i will go through a tutorial where we actually build out a project using pie monk anyways let's have a look at this one right here so i can actually use a camera in pi monk and kind of move this around and view different objects obviously some objects are falling off the screen i could say rotate the camera okay that's the first demo i wanted to show you these are all just demos that were provided by pi bunk so let me walk through a bunch of them really quickly uh here's another one that's kind of like a flipper game so i can spawn in balls and i can kind of flip them around and the great thing here is that you don't have to understand or implement these physics on your own you just place objects onto the screen and then control how you want to move them and then all of the physics will be implemented for you so you don't need to be great at physics to actually use this uh here's another demo let's have a look at what this one is you can see that we can have kind of like a pivoting i don't even know you would call this platform rolling balls on here okay pretty straightforward let's go to this one this one is actually a playground and what this lets me do is kind of create my own object so i can click here to create different objects i can actually draw an object like this if i want to maybe i'll draw it like a big square okay that's this demo another one we could make like a platformer game using this so let's have a look here you can see that i can move this thing around jump up i can actually double jump if i hit this twice again just want to go through some quick demos and illustrate to you kind of the power of this module continuing let's have a look at like a planet or satellite simulation so let me run this one okay we can see there's a bunch of satellites or planets that are revolving around the sun very nice and then lastly this is what we're actually going to build out i think this is cooler than the demos that they had anyways let's look at this okay so here you can see that i have kind of this swinging pendulum it's not really a pendulum what i can do is place a ball and i can actually launch the ball and destroy stuff so this is what we're going to be building out i'm going to teach you how to build this it is not very complicated again because all of the physics will be done for us let's just hit this very nice so with all of that said hopefully you guys are excited now let's go ahead and get into the tutorial after a quick word from our sponsor before we dive in i need to thank ltm designer for sponsoring this video ltm designer is the world's most trusted pcb design system that enables engineers to effortlessly connect with every facet of the electronics design process ltm designer has used 35 years of innovation and development to create a truly unifying design environment that makes it the most used pcb design solution on the market ltm designer provides an intuitive and powerful interface that lets you design pcbs rapidly while interacting and collaborating with your mechanical designers the interface provides a photo realistic 3d environment collaboration and synchronization with tools including solidworks ptc creo and autodesk inventor realistic rigid flex designs multiboard assembly and much more ltm designer is the most popular ecad tool and electronics design software and you can get started with it today for free by pressing the link in the description and registering for a free trial thanks again to ltm designer for sponsoring this video and now let's dive in alright so let's start getting into this tutorial i will mention that this is not designed for complete beginners you do have to understand python to be able to follow along with this and if you don't know python or you want to get better at programming then you can check out my course programming expert dot io you can use code tim for a discount i will leave that in the description anyways as you saw we are going to build the project where we can launch that ball around the screen have it collide with different objects and essentially just destroy whatever structures it is that we make the way i'm coding this is going to be really easy for you to add other objects there and you can kind of customize it however you like but this will be a really good starter project for this module now i do want to mention that i'm not an absolute pro with this module so there may be a few things that i explained that are slightly different than from the documentation so if you really want to know everything that's possible with this module then please do check out the documentation i will leave that in the description okay so the first thing we need to do here to get started is install the module so open up your command prompt open up your terminal if you're on linux or mac and type in the following command pip install and then pimonk okay and then it's going to install it and then if we want to be able to draw the simulation we need to either use pi glit or a use pie game so i'm going to use pie game because that's the one that i know best so pip install pie game so pie game will actually handle all of the graphics and then all of the physics and simulator type stuff will be handled by pie monk okay now for some reason those commands do not work i will leave two commands or sorry two videos on the screen and in the description that will show you how to fix this for mac and for windows but you can try the command pip3 install pygame and pymonk and you can also try this command this one works for a lot of people python hyphen m pip install or python 3 hyphen m pip install okay at this point i'm going to assume you have those modules installed now we are going to import them so i've just opened up a file here in the sublime text feel free to open this wherever you'd like just call it tutorial.pi doesn't really matter where you code this i'm gonna say import pi game i'm going to say import and then pi monk and then i'm going to import we want the math module and i'm going to import pie monk dot and then this is going to be i think it is pie game underscore util let me have a look here at my cheat sheet yes it is so the reason we need this is because we want to set pie monk up to use pie game to draw so that's what this import is going to be for here okay now that we have that i'm going to say pygame dot init just to initialize it and the first thing i want to do is set up a pi game window that i'm going to draw all of the simulation stuff onto so i'm just going to say width height is equal to and i'm going to make mine a thousand width and 800 height now i have a large display so i'll be able to see this for some of you it might be a little bit too big so you can adjust these numbers to be whatever you want and then i'm going to say my window is equal to pygame dot display dot set underscore mode and then inside of a tuple here i need to pass the width and the height okay so now we have a pi game window now that we have the pi game window i just want to set up what's known as our main event loop which is just going to display the pi game window and we're going to use pi monk to actually render all of our stuff so i'll show you how it works i'll just bear with me for kind of the setup steps here in our code so i'm going to make a function i'm going to call this run and inside of here i'm going to take a window i'm going to take a width and i'm going to take a height now i'm going to make a variable i'm going to say run is equal to true and i'm going to make something called a clock and what a clock is going to do is make it so that our main game loop is going to run at a certain speed we'll see this in one second but for now i'm going to say pi game dot time dot clock and then i'm going to put a while loop here and i'm going to say wow and then the variable run so while that variable is true we're going to do this and inside of here i'm going to say clock dot tick and i'm going to make another variable here called fps and i'm going to make this equal to 60. and then inside of here i'm going to say clock.tick and then fps so what this does is make it so this while loop here can run a maximum of 60 frames per second so that's what the clock is doing just regulating the speed so it's not going to run variably based on the other things on your computer and the speed of your processing cores so if i didn't have this clock.tick here then your simulation would be a very different speed than my simulation because it would depend on the speed of the processor and how quickly this while loop could be ran by your computer alright so now that we have this i'm just going to set up an event checking loop now what this is going to do is just loop through all of the events that are occurring in our pi game or in our pi monk simulation and essentially allow us to close the window when we hit the x button so you'll see what i mean in a second but i'm going to say for event in pi game and then this will be dot event dot get i'm going to say if event dot type is equal to pi game dot and then in all capitals quit what i'm going to do is say run is equal to false and then i'm going to break out of this while loop or break out of this for loop sorry and what this will do is make it so we're no longer going to run the wall so essentially we're looping through all of the events that are occurring in pi games this will give us any mouse button presses any keyboard presses when we move the mouse all that type of stuff as well as if we hit the quit button on our window if we do that we want to quit the game so we're going to say run equals false and then break and then down here outside of the wall loop i'm just going to say pie game dot quit and what this will do is just quit pie game for us okay now i want to call this run function we need to add a few more things to it but for now i'm going to say if underscore underscore name is equal to underscore underscore main underscore underscore then i want to call run and i'm going to pass the window the width and the height to this function okay so just a few more things here for the setup before i can actually start running the application and talking more about pie monk now i want to make a pie pie monk space so with pie monk we have this thing called space so what i can do is say space is equal to pie monk dot space and the space is where we're going to put all of our objects so what's going to happen is we're going to draw whatever is in this space we can have multiple spaces but in this case we're just going to have one space we place all of our different pie monk objects so rectangles circles polygons whatever different points that we have the ball that's going to be moving around the screen all of those go in the space then pie monk will do a simulation within the space between all of the different objects it will handle the collision of the objects for us it will handle the objects moving around the screen it will handle applying force to the objects and gravity and all that type of stuff so we don't have to do any of that which is really nice okay so then we're going to say space dot gravity and this is going to be equal to a tuple and we have to give a gravity for both the x direction and the y direction so let's say we want to simulate being on mars or something or being on a really weird planet i don't know if any planets have a gravity that is going in the x direction but you know what i mean i could set the gravity to be whatever i want and we would be pushed either you know in an x direction or y direction based on the the acceleration that i put here so what i'm going to do is put 0 and then negative 981. now i could do 9.81 but that's going to be really slow for my simulation so when i do negative 981 this is just simulating gravity right now as you're going to see here in this simulation we don't have to do all completely real values and all of the units that we pass to the simulation are going to be completely up to us so pi monk is a unitless module or unitless library and what that means is that we essentially decide what all of the units are going to be as opposed to passing grams or kilograms or meters per second or meters per second squared or whatever the different physics units would be we just come up with whatever we want and we just pass the value to pi muck so here i'm passing 981 you can interpret that however you want but that's going to be my gravity and i actually want to make this positive because in pie game as we go down the screen the y increases and so i want my gravity to pull me down as opposed to moving me up which would be what i get if i have negative 981. i'll continue to explain all the position and coordinates later on but that is the gravity so now that we have this what i need to do is set up some drawing options for my space so by default the simulation here in pi monk it doesn't draw anything it just does the simulation and then allows us to get the the information about different bodies or different objects that we have so you don't always want to draw it right but sometimes in our case we do want to draw it so i need to set up my draw options so i'm going to say draw options is equal to and then this is going to be pi monk dot and then pi game underscore util dot and then draw and then options like that and what i need to pass here is the window of pie game that i want to use to draw my simulation onto so i'm going to set my draw options equal to pi monk dot py game util.draw options and then i pass the window and that's now where my simulation is going to be drawn however it's not drawn unless i manually draw it so what i'm going to do is make a draw function here i'm going to say define draw this is going to take in my space and it's going to take in my window and the first thing i'm going to do is i'm going to clear my window and the way i clear that is just by drawing a color onto the screen and filling the entire screen with it so i'm going to say window dot fill i'm going to fill this with white and then on the next line i'm going to say space dot and this is going to be debug underscore draw and i'm going to pass to this actually sorry i need to pass my draw options so i'll take in my space i'll take in my window and i will also take in my draw options like that so i'll say draw options okay so this will draw the simulation for me that's really all we need right now and then if we wanted to draw anything else onto the window we could do that inside of here uh not from the space we could just draw that using the regular pi game draw methods if you're familiar with those okay now that we have this though i just need to call the draw function so i'm going to say clock.tick fps and then right before i do that i'm going to say draw i'm going to pass my window i'm going to pass my space and i want to pass my draw options so i'll pass those like that nice okay last thing i want to do here after my draw is i want to say space dot step and i need to step this by a certain amount now what this step is is very similar to this clock.tick but essentially it says how fast my simulation should go so in this case since i'm rendering 60 frames per second and i want the unit that i pass here to be in seconds i'm going to say okay well i want to step this by 1 60 of a second every single time i run this while loop so what i'm going to do say dt standing for delta time or difference in time is going to be equal to 1 divided by the fps so whatever i set the fps to i want my displacement to be or not displacement uh difference in time delta time whatever to be 1 over fps so i'm stepping every single loop my simulation forward by 1 over the fps you know seconds right hopefully that makes sense excuse me just need to clear my throat there okay so space dot step displacement time i keep saying displacement time delta time and that will actually step the simulation forward now i know we've just written a lot of code we haven't tested anything yet we also don't have any bodies on the screen but let's just run the code and see if we're getting any errors and then we'll continue and actually place a body into our space and watch how gravity pulls it downwards so let's run this and we got an issue it says space object has no attribute fill okay my apologies ah so we the issue here is we have this draw function and we have space and window but i passed window and space so i need to pass this in the other way space window just my order is correct okay let's rerun this and what's going on here okay so we don't get any errors but notice here that i'm filling my screen with white but we're not actually seeing that go on the screen the reason for that is i haven't updated the display so i'm going to say pie game dot display dot update so now when i do this we should see that we get a white screen and we do there we go we have set up kind of the basics of our application we now have stuff being drawn onto the screen or at least we have a white background now we want to actually use pi monk to add an object to the screen and then watch how gravity pulls it downwards so let's make another function here let's say define add and let's just go with object for now and let's take in space in here and let's add an object to our screen and then watch it move around so in pi monk we have what's known as a body now a body is a rigid body from physics if you're familiar with that and we also have what's known as a polygon or a kind of a shape so we have a body and then we have a shape now in pie monk what we do is we separate the collision and kind of the physics of an object from its representation on the screen so we may have an image that we display and that image will be linked to a specific body but all of the calculations and computations that we're doing are related to the body now i know this is a little bit confusing but we have the image and we have the body the image is attached to the body but we do everything on the body so that way the image that we show can be slightly different than what the actual body is so if you're familiar with like fps games or anything where there's a like a hitbox involved in it that's kind of what the point of this is here we have like the underlying hitbox and then we have the image that we put on top of it and so we'll make the underlying hitbox usually simpler and then the image will be more complicated so if you're familiar with you know any video games you've probably seen this before where maybe you shoot someone and if you shoot like on the very very edge of the actual sprite that's being drawn on the screen it doesn't say that it hit them because it didn't hit the underlying body or the underlying hitbox so i just wanted to explain that before i start coding this out but for now let's create a body so i'm going to say body is equal to and then this is going to be pi monk dot and it's going to be body like this and for our body i don't need to pass anything inside of here i just initialize a body but what i will do is set its position so i'm going to say the body dot position and then i pass a tuple which is the x y of the center of the body on the screen so if i want the center of this body to be at say 300 300 then i pass that now as i said in pi game actually let me run this here so i can explain this the top left hand corner so 0 0 is right here so 0 0 is the top left hand corner which means if i go to the right my x is increasing so over here would be the width and then zero and then the bottom right hand corner would be the width and the height that would be the position and then the middle of the screen will be width over two height over two as opposed to being zero zero i know many people are familiar with the middle of the screen being zero zero not the case in pi game the top left is zero zero so that means when i'm drawing at 300 300 i'll be drawing like kind of close to where my mouse is here um yeah that's that's where i'll be drawing okay so we set the position to be 300 300 then what i need to do is actually have a shape that i'm going to draw with this body and i need to attach this shape or this polygon to the body so let's go here and say shape is equal to and then this is going to be pie monk dot and then circle and i want to pass to this a body as well as a radius so let's actually change this function here i'm going to change this to say create ball okay we'll take in the space we'll take in a radius and we'll take in a mass for now so the radius will be past this function so we'll just use it here and then once i've done this what i want to do is set the mass of this object now we need to have the mass because we're going to be moving this on the screen and well to apply gravity to it needs some mass so we'll set the mass equal to whatever mass it is that was uh sent in and then if i want to change the color of this shape i can say the shape.color is equal to and then i have to pass an rgba value so that's red green blue alpha so for now if i want the ball to be say red i would do 255 0 0 and then 100. so the last argument here is between 0 and 100 it's the alpha or the opacity or transparency whatever you want to call it of this object so if i made it 50 then it would be 50 transparent when i make it 100 it's completely opaque and so we can't see through it okay so now that we have that what i need to do lastly is say shape.add and i need to add both the body as well as the shape to the simulation so i'm going to say body and shape like that and then what i can do here is i can simply return the shape okay so i know i just went through a lot here again all we're doing is we're creating a body we're creating a shape that's going to be for that body then we're setting the mask we're setting the color and then i need to add both of these things into the pie mug simulation so now they can be moved around i can't just add the shape if i were to do that it's not going to work because what is it attached to well what it's attached to isn't now in the simulation however i could add the body without adding the shape if i wanted to anyways the point is i need to add both the body and the shape here to the simulation for this to work properly and they'll be kind of attached to each other okay so let's now run this so what i want to do is say let's go here ball is equal to and then this is going to be create ball and we'll say space and then not the width and the height i need to pass a mass as well as a radius and i think the radius is first so let's pass a radius of like 30 and a mass of say 10. now again treat these units as whatever you want we could say this is like 10 kilograms whatever it doesn't really matter what you want to say it is okay so now that we have that it should just be added to the simulation and we should see when we start drawing it actually shows up on the screen so let's run this and notice that we have a ball and just instantly starts falling because of gravity right awesome that is what we wanted everything is working great okay so now that we have created a ball the next thing i want to do is create some boundaries on the screen so the ball can't just fall through right now the thing here is that the objects that we currently have and that we place on the screen they're going to have gravity applied to them because they're not static they are dynamic objects or they are dynamic bodies so for these different bodies here we have an option to either have a dynamic body or a static body i think there's another option as well but those are the two main ones so now we want to create some static objects that are not going to move and just are going to be kind of walls and floors for the simulation so then objects can't kind of fall through right so let's figure out how to do that now let's write a function let's say create and then boundaries and inside of here i'll just take space i'm going to take the width and the height of the screen because i'll draw these dynamically based on what that width and height is so i'm going to start by making a list here i'm going to say rex or rectangle is equal to a list and here i'm going to define all of the different rectangles that i want to draw onto the screen and then we'll use a for loop to loop through all of them and draw them rather than writing out the draw command four times in a row which would be a lot of unnecessary code so for a rectangle in pie monk you simply need an x and y position of the center of the rectangle and then you need the width and the height of that rectangle so i'm going to pass a list here i'm going to put a list here and then for the width and the height again this is the center of the rectangle so the first one i'm going to do is going to be width over 2 and then this will actually be height minus and then i'm going to make the the height of my rectangle be 20 units so i'm going to subtract 10 here to make sure that we are perfectly flush at the bottom of the screen so then the next thing i'm going to pass is the size of the rectangle so i want the size to be the entire width of the screen and i want the height of the rectangle to be 20. so again we want to pass the center of the rectangle so if i want this to be directly in the middle of the screen i pass width over 2 for the center of the rectangle and then i want this to be right at the bottom of the screen and i want to have a height of 20. so since i want to have a height of 20 i pass height minus 1 because as we go down we increase in y so we take the height which will be 800 we subtract 10 so we're going to place this at 790 the middle of the rectangle meaning that this 20 height right here will take up the entire bottom aspect of the screen none of it will be off of the screen okay so that's what we're going to have for the floor then we want to have the ceiling so for the ceiling this will be the same thing except it's just going to be 10 for the y and actually we don't need to change anything here so we just change the y translate it all the way up on the screen so now it's at 10 as opposed to height minus 10. now that we have that we want to have the walls so let's copy this and actually let's paste it twice now the walls will be slightly different the first wall we're going to want to place at position 10 and then we're going to have this be at height over 2. actually i think that's correct yeah height over 2. then we're going to have the width b20 i'm gonna have the height be equal to height and then for the next wall this is going to be at height or sorry not height width minus 10 and then this will be again height divided by two and then it will be 20 and height okay so let's explain why i did this so for the x coordinate we want this to be to the furthest left possible so we're going to put 10 because the width is 20 so that means the middle will have it perfectly lined up with the left hand side of the screen and then for the height of this i need to pass the center of the rectangle for the height so i'm passing height over two that's going to be perfectly in the middle of the screen and then i want to have the width of 20 and the height of height and then the same thing pretty much applies here with the width minus 10 like it did with our height minus 10. okay so now we have all of our rectangles so we want to draw them so i'm going to say 4 and then i'm going to say that this will be the position and the size in and then rex and then that will give me each one of these elements as i loop through okay and i need to make a body as well as a shape for this body so i'm going to say my body is equal to and then this is going to be pie monk dot and what will we do here and this will be body except this time i don't want the body to move so i have to make it a static body so i'm going to say my body type is equal to and then this is going to be pi monk dot and then body dot and then static like that so that means it's not going to move now that i have that body what i can do is put the positions i'm going to say body dot and then position is equal to my position and then i want to make a rectangle that i'm actually going to show on the screen for this body so the way i do that is i say my shape or i could say my polygon or my rectangle whatever i want to call let's go with shape is going to be equal to pie monk dot poly dot and i'm going to use this method here called create box and what create box will do is it will take in the body that i want this to be associated with or attached to as well as the size now i will also mention here that you can make some more complicated objects where you define this body and then you have multiple shapes or multiple polygons that you put onto the same body so just keep that in mind you can do that if you want to you can make some really cool and advanced shapes and we'll look at that when we actually create kind of that pendulum that has the circle as well as that line segment that's attached to that uh i don't even know you would call it like elastic or rope or whatever you want to say it is anyways now that we've done that all we actually need to do is just add this shape to our space so we're going to say space.add and we're going to add the body as well as the shape okay there we go all right so now we have created the boundaries again we make our body we set the position of the body then we make this shape the shape is attached to the body all right so now that we've added this we should be able to just call this function and actually see all of our boundaries on the screen so let's call this right after we make our ball so let's say create and then boundaries like that and what do i need to pass here i need to pass the space and the width and the height so let's pass space width and height and let's run the code and see what we get okay so notice now that my ball is going to stop because well it hit a floor and these are all our static bodies that are sitting around that are not being affected by gravity now just for experimental purposes here let's see what happens if i remove the static type so if i remove static here i do need to add a mass either to the body or to the shape so i'm going to say the shape dot mass is equal to 10 just so i don't get a crash but let's run this now and you'll notice that all of these are going to fall right because they are not stacked so let's go back to static i just wanted to prove to you this does indeed make it so they stay still alright so now that we've done that let's run this one more time and notice what happens when the ball hits the ground it just stops completely it doesn't bounce it doesn't roll now why is that happening well the reason that's happening is because there's no elasticity between the ball and between the floor so what i can actually do is add a property to both the ball as well as the floor called elasticity and that in this context here is going to relate to how bouncy either of these surfaces are so for my rectangles i probably don't want them to be too bouncy but i'm going to say shape dot elasticity and this will be equal to something like 0.4 and while i'm at it i can add a friction so i can add a friction like 0.4 or 0.5 and that's going to be the coefficient of friction between this and then anything else that hits it although the other objects that hit this will have a friction as well again please reference the documentation if you want to see exactly what all of these different properties mean and how they work it is slightly confusing and again i'm not mastering this module i'm just giving you a basic introduction okay so now we have our elasticity and our friction so i'm just going to go to my create ball and i need to add the same properties here but before we do that we can test it where and see what happens if we just add these two and don't change anything on the ball so notice now nothing happens because if one has an elasticity but the other doesn't it's just going to stay still so we need to add elasticity on the ball as well so i'm going to go here and say shape dot elasticity is equal to and then i want this to be pretty bouncy so i'm going to go with 0.9 now you can go higher than 1 if you want but if you do that you'll get some really weird results and essentially the higher the number you have here the more elastic or the more bouncy it's going to be so we have that for the ball elasticity and we're going to have shape dot friction and let's just make this equal to zero point and four and again higher number here is actually going to be the more friction lower number less friction that you have okay let's run this and see what we get and now notice that the ball actually bounces when it hits the floor so that's what we wanted didn't bounce a ton but if we were to increase the elasticity on both this shape here as well as this shape then you would see that it would bounce more okay so we now have a ball we now have our boundaries now let's make it so we can shoot the ball around the screen and once we do that we can add some obstacles to the screen or kind of structures that we can destroy or we can yeah i guess make them tumble over and that will pretty much wrap up the simulation for now okay so let's make it so we can shoot the ball so first i will show you how we kind of apply force to an object and then once you see how that works it'll be pretty easy to actually set up kind of the angles and make it so based on how far our mouse is from the ball that's the amount of power we get when we launch the ball so i want to add an event here so i'm going to say let's go like this if pygame dot event or not pi game.event if event dot type is equal to pygame dot and we're going to say mouse button down so if this is if you hit a mouse button okay mouse button down then what we will do is okay what the heck sorry i need to fix this mouse button down sorry about that if you press a mouse button then we will apply force to the object so the way that we apply force is we first need the object so in this case we have a ball so i'm going to say ball dot and then body dot and then this is going to be apply underscore force i think it's actually going to be apply impulse at underscore local something i got to look at what this method is because i forget exactly what it is but it is apply impulse at local points okay apply impulse at local point and then what we need to pass here is the amount of force that we want to apply so i'm going to apply a force of 10 000 and then 0 and then i need to say where on the object i want to apply it i want to apply it at the center so i'm going to pass 0 0. now let's take a step back here just so we understand what all of these different aspects are so first we see from create ball we are returning the shape so notice we're not returning the body we're returning the shape now the shape has an attribute on it called body so i'm going to say ball dot body to get access to the body because again all of the physics stuff is happening with the body not with the shape so i need to apply the impulse and when impulses is essentially a very quick force being applied to an object at a certain location so this is the force that i'm applying in the x direction i'm applying no force in the y direction and then i'm applying this at 0 0. now when i apply that at 0 0 it means the center of the ball if i wanted to apply it slightly i guess to the left of the ball or not directly in the center then i would change these different coordinates right here because i'm doing this at local point now i also can apply an impulse just at any location in my space again i'll point to the documentation to see exactly how to do all of that stuff but there's a bunch of functions here for applying forces to different objects this is just the one we're going to use right now okay so that's really all we need for now i just want to see what happens when we click the mouse essentially with our ball on the screen and if this force is going to be too little uh or too large and what will affect this force here is going to be the mass of the ball so where is our ball here well our mass actually we created right here so we have a mass of 10. if we increase this mass it will decrease what the force is going to do to this object because we need more force to move a heavier object right anyways let's just run this and let's see what we get okay and when i press the mouse button i gave me an error it said body object has no attribute apply impulse at local point well we should spell impulse correctly and that will probably fix it so impulse like that let's run the code let's click the mouse button and then notice it kind of launches our ball around it's applying the force at zero zero and the ball will actually spin nice there you go that is what happens when we apply our force okay so now that we've seen how to apply the force to the ball let's actually just make the force a little bit larger so let's make this like 50 000 and let's see if we get any weird errors or not okay actually that's working fine and notice that actually went through the ceiling so the reason that happened and why i wanted to show this to you is that if you apply or if you have a velocity that's really high in your simulation there's going to be a chance that between the two frames where your ball is moving in this case because it's a ball you don't actually end up finding a collision with an object because the ball moves way too quickly so essentially the way collision's working is every single frame you're checking if it's hitting an object now since the the ball is going to be moving so quickly what happens is it will start like maybe right close to the wall and then the next frame will already have moved outside of the wall and so you won't have seen that it collided with something because in one frame it moved whereas if you have a less velocity then you can actually check for a collision because you'll see that it actually goes inside of the wall then you can kind of pop it outside of the wall and make it bounce outwards or make it bounce off the wall hopefully that makes a bit of sense but i just want to show you if you have your velocities too high which happens when we apply this much force there's a probability that you could actually miss collision with an object especially if that object is very thin alright so now that we've looked at that i want to make it so we launch the ball at a specific angle based on where our mouse is relative to the ball same thing with the power that the ball gets that's going to be relative to how far the mouse is away from the ball so i want to write two functions up here that we're going to use in one second the first function is going to be calculate distance this is going to take in a point one and a point two and just return the absolute distance between these two points so the way i do this is i can return the math dot sqrt of and then this is going to be p2 at i guess 1 minus and then p1 at 1. now these are going to be tuples of x y positions okay we're going to raise this to the exponent 2 and then we're going to add this to the p1 of actually the p2 of 0 minus the p1 of 0 to the exponent 2. okay so that will give us the absolute distance between two points then i want to do something that gives me the angle between two points so i'm going to say define calculate and then angle and this is going to be p1 and p2 and i'm going to return the math dot then arc tangent 2 and then i need to do p2 at 1 minus this will be p1 at and then 1. and then this is going to be p2 at zero minus p2 or minus p1 at zero okay so what arc tangent two gives me is the angle in radians between these two points assuming that point two is located at zero zero so if point two is zero zero then point one is anywhere around point two and it gives you the angle between zero zero which is point two and then the other point hopefully that's clear but that's what arc tangent two does gives it to you in radians which we'll use so now that we have both of these things what i want to do is draw a line between my mouse and the ball whenever it's on the screen just so we can clearly see kind of what angle we're getting in the relative amount of power we'll draw that line onto the screen and then i will use the coordinates of the ball as well as the ending point of the line which is just going to be our mouse to determine the distance as well as to determine that angle so what i want to do and what you saw previously is i want to make it so when you click on the screen it spawns the ball wherever your mouse is that way we know the position of the ball and then we can use the position of the mouse and the ball to draw the line so on and so forth so the first thing i need to do here is i need to remove this ball equals create ball here because i only want to do that when i click down on the mouse so i'm going to make two variables here the first variable is going to be pressed underscore pause which for now is going to be equal to none and i'm going to say ball and it's going to be equal to none as well then in my pie game.mouse button down we'll comment this out for now and we'll say if not ball so if there's no ball currently on the screen then we want to create the ball so i'm going to say ball is equal to create ball and yeah that's fine for now now after i create the ball i want to say the pressed underscore position is equal to and this is going to be pygame dot mouse dot get underscore position and actually i need to use this when i create the ball because i want to place the ball at a certain position right so when i create the ball i'll pass this space i'll pass the radius the mass and then i will pass the position which will just be equal to pressed underscore pause so now i need to go here to when i'm making the ball i'm going to take in a position we're going to say body.position is equal to pause and that will put it directly in the center of our mouse which is what we want okay so now what should happen is when we click the mouse button it should create the ball add that to the screen or add that to the space and it should be exactly where our mouse is let's try this let's click and there you go it makes the ball and then it's not going to let me make another ball and the reason it doesn't let me do that is because i have the ball variable defined so this if statement is false or the condition here is false okay now that we've placed the ball though i want after we've placed it to be able to launch the ball and then additionally to be able to click again to delete the ball so i'm going to say if pressed position so if we have this variable here so i'll say lf press position then i want to launch the ball like that okay so if we have created the ball then we can launch it and then lastly i'm going to say else i want to say ball is equal to none and then the press position is equal to none as well so what happens now is if we don't have a ball we press it will create the ball if we have the ball so we have pressed position then we will launch the ball at the angle between our our mouse and the ball we haven't done that yet but that's what we'll do in a second and then lastly if we've just launched the ball when we click again it will delete the ball from the screen by removing ball and removing press pause now i also realized i have to do something here space dot and then remove and i need to remove the ball as well as the ball dot body from the screen okay so when i do this it should remove both of them for me uh from the space or from the screen okay hopefully that makes sense that's what we're doing here let's rerun and let's see what happens okay i click when i press it launches and when i press again for some reason it is not actually deleting the ball okay the reason for this is that i need to say pressed position is equal to none inside of here sorry and then remove it from here because this was never going to be set to none so i'm just constantly launching the ball now after we launch it once sets that equal to none so then we're able to actually set ball equal to none and then remove it and i can't set ball equal to none uh before i remove it so we want to remove this before we do that okay a few bugs but that's fine so let's rerun now let's see what we get launch and then it removes it from the screen then i hit okay launch removes from the screen launch removes from the screen nice that is all working okay now we just need to calculate those angles so what i'm going to do here is write a variable above here and i'm going to say line actually i'm going to say if the ball is on the screen then line is going to be equal to and this is going to be the pressed position as well as and then our pi game dot mouse dot get underscore pause but i want to actually swap these around here okay so i'm just putting the two coordinates i want to draw a line between so the mouse position as well as the ball and actually no i want it the other way sorry sorry about that uh this is the correct way i had to write the first time and then before this i'm going to say line is equal to none okay then what i want to do is pass this line to my draw function so then inside of draw we can draw the line onto the screen so now let's go here to our draw and let's take an a line and let's just go here and say if line so if we have a line so if it's not equal to none then what i will do is pi game dot draw dot line i want to draw this on my window what color do i want to draw this let's just draw the line in black and then we'll pass the position 1 and position 2 of the lines this will be line zero and line one to get the two different positions then i can pass the thickness of the line let's just go with the thickness of three okay that should draw the line for us i also want to put this before i draw this so it will be beneath my ball and beneath everything else we'll see if we want to change that or not but for now i want to draw it before this so this gets drawn over top of it so we'll have the line underneath the ball not over top of it okay now let's try this and let's see ah okay so we're getting an error here and the issue is that i set the press position of the ball right when the ball spawns on the screen but the ball is moving so since the ball has moved obviously now the position is different than it was before but my line is working from a static position so what i'm going to do is make it so that when i make my ball it's not going to be moving it's going to be static but then as soon as i'm about to launch it we will make it so it's no longer static it's dynamic and then it starts moving and we stop drawing the line all right that makes more sense to me so body is equal to pi monk dot body and then this is going to be body underscore type is equal to pi monk dot body dot static okay and then before we want to launch the ball we need to make it dynamic so what i can do here say ball dot and then this will be body dot body type is equal to and then pi monk dot body dot and then dynamic that changes the type for us and then here for my line i'm going to say if ball and pressed position because if i set the press position equal to none meaning i've just launched the ball i don't want to be drawing the line between my mouse and the ball because i can't launch it again i need to remove it and then replace it before i launch okay a lot going on but let's save let's rerun okay let's place this there we go we now have our line uh you can argue if you want the line above or below but now i can launch the ball nice okay so now that we've done that we need to launch it in the correct direction because it's just going to launch you know in the same direction every time okay so let's go here and let's now calculate the angle so i'm going to say the angle is equal to and this is going to be calculate and then underscore angle and i'm just going to pass this my asterix line which is going to break the line into the two different what he called elements in the list and pass those as p1 and p2 so this will give me an angle in radians then i want to use that angle in radians to calculate a force but the force is going to be based on the distance of the ball so i'm going to say my force is equal to and then this is going to be calculate force same thing sorry not calculate force calculate distance same thing i'm going to pass both the components of my line and i'm going to multiply this by 100 just so that we increase the amount of force now you can change this number if you want it to be less or more but there you go now that we have the force i want to break the force into the two individual components and that's based on the angle of the line so quickly we'll do a little illustration here so if my ball is here and my mouse is right here then we have kind of a triangle that looks like this this is a right triangle this is going to be my total force and i need to break that force into the two components so the x direction and the y now i know this angle theta and since i know this and it's a right triangle i can easily solve for y and x because i know both the force and the angle so there's these great shortcuts and just excuse me because i'm writing with my mouse here but we have so and then i have this toa okay now o stands for opposite h is hypotenuse and then a is adjacent and so if i want to calculate 4x for example this is adjacent to the angle that i'm talking about so i need to use cosine so i take the cos of my theta this is very very difficult to do with the mouse and then i multiply that by my force and that gives me x and then i do the same thing with sine for y so i take sine of theta multiplied by f and then that gives me the force in the y direction all right hopefully that makes sense quick trigonomic what do you want to call that lesson so we'll say fx is equal to and then i say we need to use cosine for this so it's going to be math.sine math.cosine of the angle multiplied by whatever this force is i'm going to say fy is equal to math.sine of the angle multiplied by the force and then here i can just pass my fx and fy and now the ball should shoot off in that direction okay so let's try this and let's spawn a ball and notice we shoot in that direction and it goes quite fast we might want to reduce how much we're multiplying the force by but let's try launching it like that okay so let's reduce the force slightly so rather multiplying by 100 let's multiply by 50. we also could increase the mass of the ball if we want and it would have the same effect but this is fine for now so if i go here now i launch okay that looks a bit better nice then we're bouncing off of the floor let's launch in that direction looks great all right so now that we have that the hard stuff is done all we have to do is draw a few objects on the screen that we want to be able to actually hit right that's it so let's do a function here and let's say define draw or create underscore structure okay and let's take in here the space the width and the height and then i will start designing kind of a few rectangles that we can interact with so let's say rex is equal to and let's place a few inside of here now i'm just going to copy some values that i have from the other screen so let me have a look at these here the first rectangle that i'm going to draw is going to be at 600 and then height minus 120 and then we're going to draw this at 40 and 200 and for the color here i'm actually gonna put my color up here this is going to be brown and this is going to be equal to 139 69 19 and 100 so our rgba value so i'm going to define my position my size the color of the rectangle which is going to be brown and then the mass of the rectangle which is going to be a hundred i did it slightly different for this because i didn't really care about the color of the mask but here i want a color and then we can adjust the mass and you'll see that those objects behave differently and will move more if they have a lighter mass when they get hit by the ball right okay so there we go that's the first rectangle that we want now let's copy this the second rectangle we want is going to be the exact same except rather than 600 we're going to place it at 900 so we're going to have kind of two vertical rectangles here that's what these two are and then i want to draw a rectangle that goes over top of those vertical rectangles and for that we're going to need a position of 700 or 750 sorry this is going to be height minus 240 and then we're going to have 340 as the width and 40 as the height and then this is going to be brown again and for the mass it's going to be slightly uh more because this is thicker so it's going to be 150. okay so we'll do the rest of the rectangles later but for now let's draw these out using a for loop so i'm going to say 4 and then this will be position size color mass and then in rex like that then we want to make a body the body will be equal to pie monk.body this is not going to be static we are then going to do the position so body dot position okay this is going to be equal to the position we're going to make our shape so i'm going to say shape is equal to and then this will be pi mock.poly.createbox perfect we'll pass our body and our size and then we'll say shape dot color is equal to the color shape dot mass is equal to mass and then we'll say shape dot elasticity and we can set this equal to something like maybe 0.4 and we can say the shape dot friction and again says to whatever we want let's just go with 0.4 okay now we want to add this to our space so i'm going to say space.add i'm going to add the body and i'm going to add the shape and that should be all we need for this create structure function if we want to add more structures or more rectangles we'll just put them inside of here we'll do that later okay so let's now run this function so let's say create and then this is going to be underscore structure pass the space with and height and i won't go through all of these different you know values that i came up with but you'll see how they look on the screen and then you can kind of adjust them and tweak them as you please so let's run this and see we get this structure right here now one thing i will show you is that if we want a nice outline for it what we can do is pass a radius to our shape so i can say radius is equal to one now this will add a curved edge if you make this really large but it also adds a uh what do you call it kind of border for the shape so here when i make radius equal to one now you can see that we actually get a nice border and if i say radius is equal to like 10 uh then we get a really thick border okay so it rounds the edge slightly as you can see but it's also the thickness of the border for the shape i don't want to be quite that large so let's maybe just go with two and that looks good to me okay let's make a ball let's launch it at it and nothing happened okay there you go something happened so let's launch here and i can actually take out the support and they're going to fall you know according to regular physics all right now that we have done that we did our structure let's just handle doing that kind of jointed object that you saw before kind of the swinging pendulum and then i'll probably leave it at that because you guys can kind of add whatever you want to this right it's very simple from there to kind of add more objects make more structures you have the the foundation done so let's make a function here and let's say define and let's go with create underscore pendulum i have no idea how you spell that let's just say create swinging ball there you go that's more in my vocabulary we'll take in the space we'll take in the actually i don't even care about the width and the height we'll just draw it at a static position here all right so here we're going to make a more advanced shape attached to our body and it's going to be attached to a joint that's fixed to the screen so we're going to have a body that's fixed to the screen it's going to be our kind of rotation center where they're going to have a joint between that and then our body that is not fixed that can actually move around the screen but the body that's not fixed is going to be a more complex shape because we're going to have a line segment in combination with a circle and so you'll see how we do more advanced polygons and shapes here in this example now i'm going to be reading from my other screen because i don't have all of this memorized if you see me looking over here that's what i'm doing just kind of referencing my code so i'm going to say rotation underscore center underscore body and this is going to be equal to a pi monk body and the body type is going to be pi monk dot body dot and then static because this is not going to move it's going to be that rotation axis right a rotation center body as i say here then i need to set the position of this so rotation center body is equal to set this wherever you want but i'm going to go with 300 300. okay now that we have that we want to make the actual swinging body so i'm going to say body is equal to and then pi monk dot body okay we need a position for this so we're going to say the body dot and then position is equal to and then i have this set at 300 300. now if you set this at the exact same position as the rotation center body then when we draw the joint you're not really going to see the joint you'll just swing around the axis because of the fact they're together however if i were to change this slightly so maybe i move the rotation body up and i make it like 270 now you'll actually see the joint between them but this is showing you how you can make something swing when you have a joint and again if you put this in the exact same position then our body is going to overlap with the rotation center body and so it's going to look like we're just swinging around a static point as opposed to having the joint that's connecting the two which you'll see in a minute it's going to be better to illustrate when we actually have a visual here but i just want to explain why i have the positions as i do so here we're going to say line is equal to pimonk dot and then this will actually be segment and we're going to pass to this the body and then the two positions of the line that we want to draw relative to the body so i'm going to say 0 0 which means the first position of our line is going to be right in the middle of the body and then the second position of my line is going to be 255 and 0 so x 255 and then 0 here okay then the next thing that we pass here is the thickness which i'll go with five now i'm going to make a circle so i'm going to say circle is equal to pi mark dot circle body 0 0 however i think i need a radius for this as well and actually yeah the radius comes first so i'm going to go radius now if i put this at 0 0 again this is relative to the body so this means the circle will be directly in the center of the body but i don't want that i actually want it to be at the end of the line segment so i'm going to pass this at 255 so now it'll be right at the end here of where this line segment is okay so now we have our circle now we have our line now what we can do is set friction for both of these things so i can say line dot friction is equal to one okay now you can say circle dot friction is equal to one and i can also add elasticity as well as mass so i'm going to say the line dot mass is equal to let's go with like eight and the circle.mass will be equal to thirty okay then we are going to add elasticity for the circle so i'm gonna say circle.elasticity is equal to 0.95 just so it bounces off of stuff and then we can bounce our ball off of this circle okay now that we've done that we want to create our joint so i'm going to say my rotation underscore center underscore and then joint is equal to and then pi monk dot and this is going to be called a pin joint there's some other types of joints and like springs and stuff that you can do but pin joints one we're going to do and then we have the two bodies that we want to connect so we want to connect our body as well as our rotation center body and then where do we want to connect on the two bodies relative to them well zero zero and zero zero so what these two arguments say here is okay on the body where do you want the joint to be connected when i say zero zero we're going to connect it in the center of the body and same thing here for the rotation center body now if i were to change this slightly i could make it so the joint would say attached to the very top of the body or the left side of the body or the right side of the body or really anywhere on it that i want so it's very flexible here with the join okay now that we have that i'm going to say space dot add and i'm going to add a bunch of things here i'm going to add my circle i'm going to add my line i'm going to add my body and i'm going to add my rotation center body oh sorry not rotation center body rotation center joint now notice here that i don't add the rotation center body now that's fine because there's no shape associated with the rotation center body it's simply there so we can use it in the joint so for the joint we have our body and our rotation center body so you will actually end up seeing something on the screen for the static joint but i don't want to draw the rotation center body onto the screen because we don't need to all right kind of hard to explain it more than that you can have a look at the pi mic documentation as i keep saying if you want to learn more for now though let's call this and let's see what happens so let's say create swinging ball and let's pass our space and then did i take a width and a height in here no uh no just a space okay so let's just take space all right let's run this and let's see what we get and we got an error it says tuple object has no attribute underscore body okay let me have a look here and see what the problem is all right i found the problem i'm sure many of you already saw this i forgot to put position here so i said rotation center body is equal to a tuple as as opposed to saying rotation center body dot position is equal to that so i change that fingers crossed it should work now let's run the code and there you go now you can see we get what i was talking about so i'm drawing the joint right so i have the two points of the joint and that's why i didn't need to draw the rotation center body because when i have the joint i'm automatically going to get that now let's just launch something off of here and obviously you know the physics work as we expect okay let's launch again we can bounce them off each other and now let me show you what happens if i remove the distance or the displacement between the the y in the joint so let's remove this and let's change it now so the rotation center body is at the same position as the body so now when i do this so now you can see it just looks like we're swinging around this static point you don't really see the joint there's like a slight tiny bit of movement based on the way it's implemented but it looks like we're just swinging on a static point okay so there you go that is really all i wanted to show you now i know in my example earlier i had some more objects but i figured you guys can easily add that you don't need to watch me for another 10 minutes just type in a bunch of lines of code and all the code that i wrote here will be available from the description so if you want to copy and paste it and edit it as you please this is really cool i'm planning on messing around with this module more and doing some more stuff in the future if you guys want to see more pie monk on this channel please do leave a comment let me know tell me what type of simulations you want to see what other videos you want to see on this channel always open to your feedback if you guys enjoyed this make sure to leave a like subscribe to the channel check out programming expert from the link in the description with that said i will see you in another youtube video you