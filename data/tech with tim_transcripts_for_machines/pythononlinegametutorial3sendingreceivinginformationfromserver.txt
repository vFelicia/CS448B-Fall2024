hey guys and welcome back to video 3 so what we're gonna be doing in this video is we're gonna be coding the kind of client side of this so connecting to the server I know we already coded a client but we're gonna code like the network aspect of the client so that it can connect to the server it's not as much code it's a bit more straightforward and then we're just gonna test out sending very basic information to the server and hopefully getting some back see if that's working ok and then in the next video we're gonna be connecting this so like the little user interface we created with moving that block around in the first video we're gonna be connecting that so that we can have multiple clients running and we can see like different blocks moving on each screen ok so that will involve a bit more work hopefully by video 5 we'll have like a fully working kind of game that's working over the network ok that's the goal so within this video I just want to start by saying on the server class here or sorry server file I did actually forget two lines of code in the last video so after this except break in threaded client just need to add this print loss connection and then connection dot close all this is doing is once we break out of this threaded client we're just letting the we're just gonna print this to the console so we can see what it looks like and then we're gonna close that connection so that we can possibly reopen it in the future okay really straightforward that's all you gotta add so just make sure you add that before moving on oh yeah so next we're gonna do is we're gonna create a new file and I'm gonna call this network okay now you don't have to put what I'm going to in a new file it's just a lot easier so that's why I'm going to do that so let's do network and in here we're gonna import socket now what I'm gonna do is I'm just gonna code a class it's gonna be responsible for connecting to our server this just makes it like so I can reuse this class in the future and you guys could reuse this class in the future and it's just bit cleaner and nicer and that's why I like to do things so I'm gonna say class network again call us whatever you want and in here we're just gonna set an initialization function we'll take actually as Network do we need anything and network now I think we'll just leave like that so we're gonna say self dot clients equals socket socket it's gonna be the exact same arguments as last time so it's a socket dot if' net I think is that what it is i F underscore net af underscore inodes okay and then we'll do socket dot sock stream like that okay now we're going to define the server and the port again so self dot server equals self thought port equals five five five five now for the server this again this number has to be the same as the one you used in the server what do you call it the server file here so no matter what like no matter where you actually are like what client you're using this number is going to stay the same because this is the server you're connecting to it's not the clients address we don't actually have to define the clients address anywhere it'll automatically get that for us okay so what we're gonna do now we have clients server port we need to do this self dot addr equals and then we're gonna say server so self thought server and then self dot port in here okay and then self dot what he called self thought ID is gonna be equal to self dot connect okay now you guys actually let's just do self dot connect right now and we'll talk about why I was gonna have this ID later once we add that functionality the server can essentially I wanted to have an ID that was returned here alike that was stored in this network object just because we are gonna have to like be sending an ID to each of our clients so they know if they're like player one or player to but we'll do that later because we don't really we can't really do that yet okay so we've called this connect method so we need to write that now so let's say define connect okay and in here I believe we should probably be given actually I think it's probably fine just use self right now what we can do is we new self dot clients dot connect okay and then in here we knew self dot addr now we're gonna throw this in a try and except just in case you know this isn't working so we'll say try say accept and is a renew socket air let's say accept and we'll just pass right there okay I just in case this doesn't work so we'll try this we'll try to connect accept pass now once we actually connect what we're going to do is we're return I'm just looking at my other screen right now a selftaught client don't receive and then we'll do 2048 dot decode okay so what this is gonna do I'll talk about this because it might be a little bit confusing is when we connect we want to actually send some kind of information immediately back to the object that connected to us so like for example it's going to I didn't mean to close that what's going to server here and you can see when we initially connect we're not sending any information until we receive something now that's fine but when we connect we should really send some kind of like validation token or like ID back to our network object or back to our client so what I'm gonna do in here I'm just like on dot send okay and then in here what we're gonna type is let's see what should we really type here uhm STR dot in the code then here we'll say connected like that okay just so we know that we did indeed connect if that means if we set this equal to a value so self thought I don't know let's say ID equals self dot connect what'll happen is when we connect will return that string connected so this will get connected and since it's encoded we need to decode it obviously so if we want to print actually in here self dot ID it should say like connected okay let's see if that works okay so now that we actually have that let's see if we can connect to the server and then we'll deal with sending information from the client to the server as opposed to just getting it from the server okay I know it's a bit confusing right now I'm just turn to figure out the best way to do this so let's try this guy so we're gonna say N equals Network I will just type this at the bottom of the script we won't do this after will delete this just for testing purposes and then we're just gonna say actually that's probably all we need to do because it'll just print our ID okay so let's create a configuration for a network so nuke it configuration type network in here and then select that path and then let's test if this is working so remember what I said when we're gonna connect right to our server what we have to do is first run that server script so let's run the server script here waiting for a connection server started okay let's run this network script now invalid argument was supplied s not listened to hmm okay so I had a quick look here I realized the mistake was I was actually running this server two times so obviously that's not gonna work for us so we can put two back in this listen I'm not sure if you guys will see if I left that in the video or not but let's go to network and we also need to change this to AF instead of AF I don't know why typed I fi literally set AF when I was typing it but that's fine and we have server I'm actually running it right now so make sure you guys run that and then they'll run that we can see if this works okay sweet so I know it doesn't seem like much but you can check here if we go to server it says connected to and then gives us that address it's also printing out some other thing that I honestly don't know what that means and then saying disconnected and lost connection sweet that's actually really good and that means that were everything is working and you can also see that we have connected being printed here so that means when we connect to the server we're actually getting the value that is sending so we're getting this connected and we're printing it out decoding it all fine so that's really awesome so now the only next step is to actually send information to the server and keep like a loop going like sending receiving sending receiving sending receiving now let's actually just test um if I run this again you can see again obviously it's working again so this is the server just continually is running I don't actually have to stop this unless I want to make modifications to it so let's just keep that running for now and let's add something to our network class so in our network class we're gonna define a method that's gonna be sent now this method is gonna be very useful later on because it's gonna save us a lot of time so in Santa bridge can take a string which is gonna be data okay and all we're gonna do in here is we're going to try to self dot client dot send and I'm gonna say data STR actually dot in code Donna and then we're gonna get a reply from that server so we're gonna say return so exact same thing that we're doing here selftaught client I receive twenty 48.2 code and will accept and I believe this is a socket error yeah the socket cut error as E and just print e so if we get into some error where you know either we're sending or we're receiving it's not working let's just print that Arab to the screen so we have a look at what that really means so now let's do a test and try to send information to the server and then get something back okay now the information that we're getting back should just be the same information because that's what we have in server we're just gonna send exactly what we got right back right so doesn't make sense right now to do that but we'll talk about like what we can what valid information we can send how to send receive information in the next video when we connect up the client to the thing okay so what we're gonna do is gonna say and not send and we'll print and not send okay and we'll print and not send again and let's just send like a few bits of information and see if everything is indeed working ok so n dot send and then in here let's just type hello and we'll type working okay and see if this works so we have actually you should have yeah server is working well let's run our client and you can see we get connected hello working and if we come here it says received hello sending hello received working sending working so that's awesome that means our network class is working sending information receiving information is working server is working and now the only thing that's left to do essentially is to connect that up to this so use this network class in some meaningful way here and then to actually store information on the server and then send that information to multiple clients which we'll doing in future videos so that's gonna be it for this video we got the network class working hooked up to the server I find this stuff really cool personally like I'm really excited about doing this and showing you guys how to do this I think it's really awesome that within like a few minutes you can just set up a basic server on your local network and send or receive information and it's only like how many lines of code is this like a hundred not very many but anyways let me know what you guys have thought of this video and if you're excited for the next one and I will see you there