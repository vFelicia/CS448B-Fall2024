hey guys and welcome back so in today's video what we're gonna be doing is talking about user registration and how to create an account on Django now fortunately for us Django actually does quite a bit of the hard work at least for us so all we have to do really is format a form and then just add a few things to our project it is a bit of a tedious process but it's much easier because of Django and another reason why a lot of people love Django because it does stuff like this for you you can see right now I have open the thing we're gonna be creating now this is just in a copy of the project that I'm working on and I just made this to make sure it was gonna work create a count page and we're gonna be making this to start we'll be adding an email field to this as well or like a add name or something like that field to this as well and yeah that's kind of all we're gonna be doing today in the next video we'll talk about how to log in and how to log out and then how to restrict access to certain parts of the website to certain users so for example the admin user can access the admin dashboard and they can see all of the different databases and all that whereas a regular user won't be able to do that so let's get started now the first step and what we're gonna have to do to do this actually is create a new application so what I want to do is right now we already have an application called main but I want to create an application now called like users are called register or something like that that is going to handle the login logout and registration for our website now this is the reason I'm doing this is also so that you can just copy this application and put it into any other Django project and because it just kind of makes sense to separate things out so to do that we're gonna go to our command line and we're gonna create a new app using that Python managed to Python so just a Python managed up pie and when I say start app and in this case I'll just call mine register like this you can name yours whatever you want but I'm sure to say register so there we go it has successfully executed and now if we go to our directory we can see that we have register popping up here now what I'm gonna do to start is I'm just gonna what do you call it modify some URLs so we're gonna add a page that we'll be able to use to register because we need register page so let's open up subline text here let me just open up a new window why is this not working one second guys file open folder here we are okay so Jing go right there okay so there we go now we're in Django and what I'm gonna do is I'm going to modify the URLs from within my main file here so that we're gonna link to a view that we're gonna create inside of our new application called register so if I go to URLs here you can see that right now these are our main URLs that we have inside of our main application but what I want to do is go to the URLs inside of my site so let's do that here and what I want to do is just add a new path that's going to direct to a new page and in this case I'm just gonna call this one slash create I guess or actually not create let's do register so like registering for a new account we'll call it that and what I'm gonna do is I'm going to link this directly to the function that's gonna render this from our register application so what I'm gonna do inside of register now and I'll come back to this in a second is instead of used up hi I'm simply gonna create a function in this case I'm just gonna say define we'll call it register as well it'll take response and then in here all we'll do is just return render and then we will render something in here in a second Bowl just fill that in for right now so we go back to URLs what I'm gonna do now is I'm going to import this file in this function so that we can use it from in here to link directly to that view so to do that I'm gonna say from and in this case we'll do a register because that's the name of our folder register imports in this case views as and I'm just gonna say V now the reason I'm saying views as V is because we could possibly be importing some more views into here and all of them are gonna be called views right like the views for this application is the same as the name of the views for the main application so just by doing it as something that way we're gonna differentiate them so we don't run into any mistakes essentially so now I'm gonna say what we'll go to is we go to V dot in this case actually from register import views will go to V dot register like that and will say name equals in this case register now add that comma and we should be good in terms of linking to that okay so now that we've done that what I want to do first of all is create an actual page that will be our register page which involves creating a template for that so I need to do the same process I did to create templates within my main application and that is starting off by creating a new folder inside of our register application and in this case I'm just gonna call it templates ten plates like that and then inside of templates I'm gonna create another new folder and if we remember we call this register now inside of register I can create my file which will be my register HTML file which will display the form that we're going to see so I'm just gonna start by extending my base template and the way that we do this now because this is in what do you call a different directory is the exact same as before we just have to specify where we're getting it from so we're gonna say main slash based HTML and then what we're gonna do in here is we'll do our blocks so I have the block title and we'll have the block content so block title and in this case we'll just say create and a couch or something like that and then we can end that block and block and then now we'll do our block content and then we will keep going from there so say block content and here we'll say percent percent and block now we'll save this as register dot HTML inside that template file and there we go we have now created the file that we can render and display on the screen now while we're in here I'm just gonna fill this in and populate it and all I'm gonna do essentially to do this is I'll use a little bit of style a little bit of bootstrap styling and then just display the form inside of here using the way that we can just display Django forms and then you guys will see how it works in a second anyways so let's start to create some form tatics will say form in this case we're gonna say method equals post because this is gonna be the forum to create a new account so obviously it's gonna have to be post method because we need to make sure that information is secure when we're sending it to the backend say for method equals post I'm gonna say class is equal to in this case forum group and then we'll end that form tag and in here we will simply do what he call its form like this now the only other thing we need to add is a button and this button will be the submit button because by default Django doesn't generate that for us so what we can do to do this to just say button we'd say type equals if I didn't hit insert there you type equals submit submit like that and what else do we even need for this we say class equals in this case BTN and on BTN success I believe that's the class name and I can end that button tag and inside here we'll just say what do you call it joy in' or like register like that and that's what we're gonna do for now we'll make this look a little bit better after but that's all we really need for right now okay so now that we've done that we've said well we're gonna pass a form to this view so that means from inside here we're gonna have to be passing a form now what's really nice is Django actually automates the form for what he call it logging in and creating a new account it makes one for you that you can just use so what I'm gonna do is simply import the built in Django form and then we're just gonna use it inside of here to pass to our register template so the way that we do this is we have to I'm actually just gonna copy these in because they're a bit long and I don't wanna mess up the the spelling where I say from Django contrib off import login import authenticate and then we're also gonna import from Django contrib off forums we're gonna import user creation form now this user creation form is what we're gonna use to create a new user and this in a prebuilt form just like when we went into our application and we create our own form using the Django builtin forms this one's just already made for us and we can go ahead and start using it right away so to use this I'm gonna say form equals and in this case user creation form and then when I render my template all pass response will do in this case register and in this case slash register dot HTML and for the context here will pass in form colon form so assuming I spelt everything correctly now if we actually run our server and go to this we should see a form showing up actually one step for that that I should not have forgotten but I almost did we need to add our application in this case which is registered into our settings dot PI file because if you remember when we initially created a new application you can see that we added this main Apps domain config well we need to repeat this process now with our new application which is registers so let's just copy this and paste it down here and instead of having main we're gonna change this to just be register and here register as well remember that capital at the beginning okay so now that we've done that assuming I don't make any mistakes if we run the server we should be all good at we should be able to see all this stuff so let's do this now I will say Python managed dot PI and in this case run server okay no issues so let's grab that let's go actually I'm just gonna refresh this and it should pop up and now you can see that we are actually getting this beautiful register window now I'm saying that sarcastically because obviously this does not look amazing and we're gonna work on styling this and making it look a little bit better in a second but you can see that we actually have a somewhat functional user registration window already created for us and you can see it says required 150 characters this is the thing that you need for passwords and then it asks you for username password and all this stuff and then there's a register button that we created so that's awesome and that works well now all we the thing is though if we actually type anything in here so for example I say Tim and make my password one two it says your pastor cannot be entirely new net new American must be at least 8 characters ok let's just type it's lame a bunch of letters for example and if I type a bunch of other letters and hit register we run into an error that CRS F CSRF token is missing so I'll have to add that but my point here was gonna be that this register button doesn't actually do anything just like when we created a form before we actually need to add the functionality to save the form and create the new user which is what we will do now after we add that token that we need so let's add that token first of all inside of here CS CSRF underscore token and now let's go into view stop hi and let's check how we can validate this form and how we can actually save things using it first of all before we start styling it too much so we're gonna do is what we've done before so we're gonna say if response dot method equals equals and in this case post then that means that we are going to be creating a new user so what we'll do in here is we'll start by saying actually we'll take this form I will put it up here and inside of here will populate this with response dot post now what we'll say say if form dot is and I believe it's underscore valid what we can do to save the form which is very easy is literally just say form dot save and what this is going to do is actually save our new user in the users database for us and I'll show you how this works in just a second but let's add this else here so that we create a blank form if for some reason we're not getting that post request right so this is all we need to do actually to handle and make this form work obviously we're gonna be doing a lot more here but before we're finished but this will actually allow us to have a valid form so let us try to get this working now so let me go back here and let me refresh the page and now let's try to create an account and let's say let's make an account tech with Tim we can just make the password check with Tim 1 2 3 ok and let's hit register all right what was issued the password the to password fields did not match ok so you can see actually as well maybe that was good that I messed this up it even gives you messages when things are wrong with the form so it says the two password fields didn't match so that obviously means I spelled something wrong so let's try that again and hit register password is too similar to the user name oh man see this is this is why we use Django form because they do all this wonderful stuff for us okay let's try this now Tim with tech how about that Tim with tech one two three Tim with tech one two three register the password is two cylinders two username okay I'm just gonna use one of my own passwords and hopefully it doesn't show it anywhere on the screen okay so now we've registered and I actually create an account called tech with Tim and I've I've done that I know it doesn't look like anything happened but that's what we're gonna add as well next when we Korean account will redirect to a new page but let's try going to the admin dashboard here quickly and see if we can see this new user in our database so let me sign in here and if I go to users you can see that now we actually have two users we have Tim which is the admin user which is me and we have tech with Tim which is the new user that was just created so if I go into tech with Tim that's like the password hashing and stuff and then you can see that it has the name and that's all that we have for right now so the next things that I want to add to this now is how we can get like an email or how we can get a first name and a last name for example and how to redirect to a new page once we've created an account so once we've create an account what I'd like to do is redirect to a new page so to do that what I'm going to do is from Jango to shortcuts import render and import redirect and all we'll do in here is just instead of returning this response we'll simply just return a redirect so we'll return redirect and in this case where we go we will just go to slash home so now if I recreate a new user we would go to the home page and the user would be created so that's great for that but what I want to do now is have the ability to add a new field to our form so for right now all we had was those three fields but what if when you create a new user you want to ask a ton of different questions like a phone number you want to get all that kind of stuff how can we do that well to do that what we need to do is inside of our application here I believe we need to create a new file called forms dot PI so what we're gonna do is inside of register we're going to do new file we're going to save this as form stop I and we're just gonna modify our form slightly so save that as their an issue this reason why this isn't working forms dot P why um hit enter okay I'm very confused right now why this is not working forms okay uh anyways let's try this one more time okay so for some reason that was just messing up but anyways forms dot pi and what we're gonna do for this now is actually import these same things that we had before so this login authenticate user creation form so let's copy those and paste those in here and what I'm gonna do now is just create a class that is that inherits from user creation form and add a few new fields to it so to do that I'm going to say class and in this case I'll just do register form and will inherit from user creation form and that means we're gonna get all the same properties as user creation form so we're gonna have that nice layout as well but instead now we'll add a few new attributes so for example if I wanted to add an email here what I could do is I could say email equals and in this case models which I need to import as well so let me import this we're gonna say from Django models I believe import model it's either models or models and anyway so let's do I email equals models dot and in this case we'll say email field like that and it's might be lowercase I'm not sure okay so we'll do email field there and now what we're gonna do is add something that we haven't done before which will allow us to change some of the parent properties of this class so I'm gonna create a new class inside of this class which is called meta now it needs to be named this and what I'm gonna do in here is define the fact that this register form is going to save into the users database so you know how when we did user creation form don't save it saved the form well we need to say that when we're using this form we need to save in the user database so to do that I need to import a few other things so one second here what I'm going to do is just go to I'm gonna say from Jango dot Khan trib dot off dot models and in this case import user and actually I need to change this Jango top models thing up here because this is incorrect I'm gonna say from Jango import forms and instead of models this is gonna be forms by bad on that so say in email eels forms dot email field and then inside of this meta class what I'm gonna do is say model is equal to in this case user so I'm defining that we are going to change the user model whenever we save something in this this form so now I'm also gonna define one more property which is going to be fields now what this fields property is gonna do is pretty much lay out where I want my fields to be so typically when you sign up you asked to do a username and email a password and the other password well right now if I were to actually use this form this email field wouldn't be showing up and that's because inside of the parent class it doesn't know that we have this email field so I have to define that so to do this what I do is I simply type the name of the fields inside of this list in the order that I want them to appear in my form so if I wanted a mail to show up first I would type email if I wanted a username to type up first I would type username so in this case let's do user name email and then we'll do password one and password two now these three field names username password one and password two are already built into the form so this user creation form that's why I'm using them if we were to per say create another field here maybe we created a field that was like your gender or something like that then we would have to put that field in here as well if we wanted to show up on the form and this will specify in what order we want things to show up so that's how you can change that as well so now that we've done that we need to now start using this register form rather than using this user creation form so if I go in my view stop hi file now I can actually remove this what I'm gonna say is from and in this case we can just import it directly from forms so say from forms import and in this case we'll do register register form like that and now rather than using user creation form will use register form like this and this should be working for us assuming I did not make any mistakes so register form so now let's try to reload the page and see what we're getting on what do you call it let me make sure that this actually is running quickly is it seeing that we changed anything one second guys no module named forms interesting I have formed up high right here let's try from dot forms and see if this works there we go so I just need to add that dot before four but four forms okay so let's go now back to what was its register like this and see what we get now okay so now we have user name email password and password confirmation now I know this is still very messy but we have successfully added an email field so now it's time to actually make this look a little bit nicer using a little bit of bootstrap and what's known as crispy forms so crispy forms is a really popular form kind of framework used in Django and you just have to install it using pip so what I'm gonna do is simply go into my command line here and do pip install and we're gonna say Django crispy forms like that so not equal sign that needs to be a hyphen and what this does is it has some automatic styling for our forms it's really easy to use so that's what this module is essentially so we're just gonna pip install that same way that we installed Django and just make sure that it's in your virtual environment now you can see I already have it installed but once you have it installed there's a few steps we have to actually use this so to use crispy forms what we need to do first of all is go into our my site settings file so we need to find my site my site and go to settings not pi and we have to add krispies forms into this settings not pi file so to do this what we're gonna do is we're gonna say Krispy I think it's just Krispy underscore forms we get I'm pretty sure that's all we have to do but I will double check here because I'm likely incorrect let's see here no that's actually correct so crispy underscore forms and what we also have to do is go down to the bottom of our settings dot PI file and we have to define what CSS layout or I don't know framework that our crispy forms is actually going to use so to do this I'm gonna say crispy and in this case underscore template underscore PAC and in this case I'm gonna say boot strap for now if you want your crispy forms to use a different kind of framework CSS framework you can just look up how to do that online it's very simple but you just change this the reason I'm setting this to bootstrap for is because by default it uses bootstrap two and on our website we're already using bootstrap four so we might as well just use it now okay so now that we've done that we're actually have to start using these crispy forms that's what they're called so since we've had them imported into the project and we have everything set up all we have to do to use our crispy forms is at the beginning of our what do you call it file here it actually doesn't have to be at the beginning but it has to be before where we use it what we're gonna do is we're gonna use our crispy forms so I believe to do this we have to say include something I have to have a look as I forget how to do it at its not include its load so load crispy underscore forms like this and in this case underscore tags now all we're gonna do to use this crispy form very straightforward is we're just gonna put this little up what is a straight line here bar I don't know what it's actually called someone knows comment down below and recite it we're just gonna do crispy like that now what this does is it's actually a filter and I'm not really going to talk about exactly what filters are but if you know fill what a filter is then that's what this is doing it's just gonna modify our form to make it look a little bit nicer and add a bit of styling too so let's try this now and see if everything is actually working so let me run the server see if we got any issues or not no we don't so now let's refresh this and let's see the drastic change that is about to happen there we go how much nicer does that look that other form right we have user name email password and password confirmation not it's just much better and you can see if I go register it's still doing this so that is essentially how we create a register form for our users to create new users now right now it'd probably be a good idea to add like a bar on the side to do register and I'll whatnot but for now we're just gonna leave it at this in the next video what we'll do is talk about logging in using these users and all that kind of stuff we might add a little bit more to this register page but for now I think that's fine and with that being said that's gonna be the video I hope you guys enjoyed if you did please make sure you leave a like and subscribe and I'll see you again in another one