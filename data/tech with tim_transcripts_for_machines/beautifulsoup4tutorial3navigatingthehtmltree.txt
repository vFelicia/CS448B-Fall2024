hello everybody and welcome to video three in this python web scraping tutorial series in this video i'm gonna be showing you how we can actually navigate through the tree so the tree structure that's generated by reading in an html document specifically i'm going to show you how we can do this to actually find the prices of different cryptocurrencies so i have this window right here which is coin market cap open notice there is kind of like a table here of all of these different coins and i'll show you how we can kind of iterate through them using some different functionality of beautiful soup i've not yet showed you get the name and then get the price with that said let's go ahead and dive in all right so let's go ahead and get started in front of me here i have the website coinmarketcap.com which has all of the popular cryptocurrencies and then i've opened it up in inspect element or opened the inspect tab the way you do this in chrome is you right click and you press inspect you can also do control shift and i believe that's an i anyways you can see this is kind of what the html is looking like and the data that i want here is inside of this table so if you look here i'm going to highlight over tbody tbody is what i'm looking for i want to see the data in this table and so what i'm going to start by doing here and notice i already have the code that actually loads in the coinmarketcap.html just wrote the url got my request or sent my request grabbed the text and then read it in with beautiful soup but what i'm going to start by doing is looking for the tea tbody tag so i'm just going to say doc dot tbody i think this should work at least and this should give me the actual table body so tbody is equal to that and let's print it tbody okay when i print this we do indeed get the table body that we are looking for so what i want to show you in this video is how we can navigate by looking at things that are on at the same level in the tree so if we have a look here notice that t body is the parent of all of these table rows and all of these table rows are on the same level in the tree so what i could do is just get all of the contents of the table body and loop through this right i think i showed you how to do that but i will show you that again what we can also do is look at the siblings of tags that are within the same level of the tree so all of these table rows here they're all siblings of each other because they're at the same level they have the same parent and so from any one of these table rows i can go to the next sibling or the previous sibling so i don't just have to traverse by searching for specific tags from one tag i can jump down to the next one these tags don't need to be named the same thing it just allows you to go to the next sibling or the previous sibling or all of the next siblings or all of the previous siblings so let's have a look at how that works so i have my t body and i'm actually going to start by just saying trs is equal to t body dot contents now what this does is give me a list of all of the tags that are inside of my table body so it should give me all of my table rows so if i print tr's like this we should see we get a list and if i go to the top here notice we have a table row so now that i have the table row i just i'll just show you how the the siblings work so if we go to tr's here let's grab the very first table row that we have and let's look at this next sibling like that so if we go trs.next sibling it should work should give me something it gives me the next table row that is uh after the first table row and to prove this to you let's try to look here notice this says f the very first piece of data that we have in our table is bitcoin and so that is indeed working it's giving us the next sybil now in the same way if i go to table rows one i can use dot previous sibling so this will bring me back up in the tree to the previous sibling so let's look for a bitcoin here somewhere i'm sure can i can i search it uh no that's not gonna work in my console okay let's just run this again so that i get the output uh i think bitcoin is somewhere here yeah there you go okay btc so it is indeed giving me the correct sibling that we are looking for now in the same way that you can look at the next sibling you can look at the next siblings so if i go next siblings like this from table row 0 then this will give me a generator object now a generator object is just something you can iterate through so if i wanted to look through this i could say actually can i turn this to a list i think i can turn this to a list let's convert this to a list and i am able to look at all the table rows that come after the first table row okay that's the basics of traversing on the same level so we will continue in one second but i need to quickly thank the sponsor of this video and the series which is i'll go expert algo expert is the best platform to use when preparing for your software engineering coding interviews they have mock interviews a data structures crash course and many other very helpful features to ace your software engineering coding interviews check them out from the link in the description and use the code tech with tim for a discount on the platform now i showed you previously we can also use something like dot parent if i use dot parent this will give me the tag above me so let's not turn this into a list let's go table row 0 dot parent and then notice it should give me the entire tbody tag and just to show you we actually look at the name here and this gives us the name of the tag perfect now again we can also look at the descendants now the descendants gives us everything that comes after or inside of this tag so if i go tr0.descendant and i run this again we get a generator object okay let's convert this to a list and let's run and now notice we should get all of the table data that we're looking for so multiple ways to do this rather than descendants you can also do dot contents both of them work and you can also do dot children now they work a little bit different the children will just give you the tags that are inside of the table rows tag whereas descendants i believe is going to give you everything even the tags that are inside of the other tags uh that might be incorrect but regardless there's descendants children and then what else do we have dot contents okay anyways now that i've showed you kind of traversing the different levels looking at the parent looking at the descendants the contents we want to actually complete our example we want to look for all of the names of the cryptocurrencies and then the prices so we have all of our table rows so what i need to do is loop through all of my table rows first though i'm just going to say prices is equal to an empty dictionary i'm going to say 4 tr in trs and look through all of them now for each table row i want to look through all of the table data that's inside of that table row so i'm going to say 4 td in tr dot contents that should give me all of the td tags that i can then loop through then what i want to do inside of here is print td and just have a look at this and i'll print a blank line after this as well just so we can see what this looks like okay so let's go to the very top here and notice we get td okay this looks like an icon or something then we get the rank then we get what looks like the name of the cryptocurrency and then we get the price so we're getting rank uh sorry not rank we're getting something rank name price so we just want the first four here so i don't know if i can actually index this but let's go colon 1 colon 4 like that and that should give us actually want 2 colon 4 that should give us just the name and just the price so let's try this now and see if that crashes no okay so that's good so now we're just getting the name and we're just getting the price so for all of my table rows or all my table data i'm just looking at the second and third piece of information because that's the only ones that i want okay so now that i have the second and the fourth piece of information what i'm actually going to do is change this and i'm going to say that my name and my price is equal to this such that i get one variable storing what the name is and one storing with the prices and then we'll loop through the name and the price accordingly so now let's just print the name and make sure this is working properly okay so if we print name there we go all is good now we need to actually find what the name is inside of all of this gibberish so we have all of these kind of things here but what i'm looking for is just not the ticker symbol i actually want the proper name which should be bitcoin not btc okay so bitcoin is right here and this is inside of a class that has this so let's look for this class here actually maybe we can just look for the p tag in fact yes let's just look for the p tag and then see what we get inside of the p text i'm going to say print name dot p and now that i do this okay so it works up here but here is not getting the correct name so we'll have to fix that but this is at least giving me the top coins so we could just look for the top coins in fact they'll probably be easier for now so let's just do that right now so i'm just going to look for the top coins and that will give me bitcoin like that okay so now that i have the p tag if i want just the name this is going to be dot string to give me what's inside of the p tag so let's run this and now notice we are getting the correct names although we had an error because i guess once we get down to this point the names are no longer stored inside of the ptype so how many names do we have here one two three four five six seven eight nine ten so let's just look at the first ten table rows then so that hopefully we no longer get this error and there we go now we're all good we're going to get the top 10 coins okay so now that we have the name we can say that the i guess for fixed name is equal to this and now we need to look for the price so let's try to look for the price so let's print out the price and let's see what we are getting okay so the price seems to be of the a tag uh yes inside of the a tag so let's just look for the a tag in each of these let's go price dot a now we're getting just the link and now what we want to do is get the actual price so now we can say dot string and then there you go that gives us the price perfect so now that we have that let's say fixed underscore price is equal to that and let's go prices at fixed underscored name is equal to fixed underscore price and then we will print out our prices okay so let's have a look here and notice we get all of the prices that we are looking for so there you go that is how you can find the prices from a coin market cup now really the point of this video was just to show you how to navigate this tree show you the next sibling previous sibling parent etc i don't have a great use for them because you can see this is somewhat easier right to just look at the contents look at specific contents that we want grab the name grab the price store it in dictionary print it out so there you go just there's an example of how you can actually use this in a real world scenario to find the price of cryptocurrency now yeah we did have an issue that's why we only have to look for 10 here if i wanted to make this video longer i would make it work for the rest of them but if you wanted to make it work for the rest of them then what you need to do is find kind of what happens after 10. so maybe the first 10 you find like this and then the rest of them you find in a different way or you just come up with a better strategy that doesn't involve looking for just the p tag and maybe you look for a specific amount of text or you look for a dollar sign or something along those lines anyways with that said i think i'm going to end the video here in the next video i am going to show you how we can search across multiple websites for graphics cards prices and then compare them and return what website has the best price i think that will be an interesting application of this if there's anything else you guys want to see let me know in the comments down below make sure to like the video subscribe to the channel i will see you in another one you