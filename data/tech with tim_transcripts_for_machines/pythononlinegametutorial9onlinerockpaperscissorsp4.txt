so remember we're obviously we don't want to show the other player what one of the players moves is unless both of them have gone it's like we want to know what our move is but we can't know what the other players move us until we've both made a move so to do this we're gonna do we're gonna start by just getting both player moves we're gonna say game don't get underscore player underscore move we're gonna get move zero and actually we'll copy this and just do move to and change this to one so let's start by getting the moves and then now we're gonna check if we should show those moves if we should show waiting we're if we should show locked in okay so to do this we're and say if game dot both went okay like that we're gonna say is gonna say at x1 equals font render and we're just gonna use the same font as before and what its gonna be is move 1 comma 1 comma and we'll make this black so 0 0 0 okay and we'll copy this and we'll do the same thing except x2 is gonna be equal to move to so essentially this is saying if both of the players have gone well we can show their moves cuz they both made them so let's do that and it's just rendering that font and will display the font after you see it works so now otherwise if both players have not gone what we need to do is we need to actually let me just check something for a second is we need to determine if we're gonna show locked in meaning the other player actually has gone but we're not gonna show their move or if we're going to show waiting which means the other player hasn't gone so to do this we're gonna say if game dot p1 went and P equals equals 0 so this is saying if we have gone and it's our current like we are the player we're player 1 so if player 1 is gone and we are player 1 what we're gonna do is going to say x 1 equals font dot render move 1 which is a move we've done which is fine if we see that and then we're gonna say 1 and color 0 0 0 okay L if game dot p2 went and is this one it is actually sorry game dot p1 went you guys will see how this works what we're gonna say and I say text 2 equals the same thing now this might be confusing but essentially what this is doing is it's saying if player 1 is gone and we are player 1 we're gonna say if I spelled render correctly render like that render sorry I got interrupted there okay so if player 1 is gone and we are player 1 then we want to show underneath like you were move with our move is otherwise what we want to show is we want to show that like locked in so we're gonna change this to locked in underneath opponents move because it means player 1 went but it's not us so it's not our move so that means we want to show it under opponents moves you'll see how this works we're gonna say locked in like that okay all right now we're just gonna do else so this actually just stands for if game v1 hasn't like if they haven't moved yet we're gonna just going to say text 2 equals waiting so we say waiting dr. doe I believe that's correct umm actually sorry these all need to be text 1 by man ok all right I know this is confusing but we'll go through adapter all right so we're gonna actually copy this and we're just gonna change everything to 2 so this is gonna be p2 this is gonna be 1 this is gonna be it's gonna be and it's gonna be 2 and this is gonna be 2 as well and then we just make sure that I did that correctly I believe I did ok sweet and now we are going to actually show these we're gonna let these on the screen we're actually really close to finish guys so to do this we're gonna say if P equals equals 1 so a for player 1 will do is say windup lit and we'll say text 2 and then we're gonna show it we're gonna show it at a hundred and 350 okay now we'll copy this so ctrl D and we'll blitt one except instead about a hundred we're gonna change this to 400 now we're just gonna put an else so if we're not player 1 clearly we must be player 0 so we're just going to reverse these player 1 player 2 now the reason we're doing is because this is gonna be where like player one and player two's moves are shown on the screen so we want it to make so that for each of our clients rather than saying like player 1 player 2 and having one of the clients have their move on the right side and one of them Abbott on the left side we want it to be the same for each client you guys will see how this works when we actually run the thing so let's actually just uh let's add in drawing the buttons so to draw the buttons we could we could draw them in this else statement actually that might be better yeah let's do it inside of this this else okay we're gonna say for BTN in buttons we're just gonna say BTN draw and give it a win and I think that's actually all we need to do and lastly we're just gonna update the display so Prime dots play update now assuming I didn't make any critical errors this should actually be working so I know this has been a lot of code and a lot of writing but I think I've kept it to just about an hour now actually and that's actually pretty decent time for creating a game like this so you guys will see how this works out okay so let's try running our server and see if we got any errors first off okay server waiting for a connection service started good sign so far ok clients let's try running a client so I'm going to client Oh name P is not defined when game P ah ok so what we're gonna do for client this is a really easy fix just change this to player and I might have to change oh yeah up here when I do redraw game window as well to go do win game and player ok so fix that alright client run waiting for player alright good sign it's around another one and would you look at that ok they both launch it now so you saw that waiting for player showed up but as soon as we are ready now both of them are showing up ok so this should be player 1 this should be player 0 or player player 1 player 2 right okay so let's try this now rock I ran out of input self client I receive 2048 okay so let just have a quick look at why this might be ah so I think I might've fine found the issue I'm actually I don't know if this is the issue exactly but we do need to fix this where I do game dot reset inside of server here it actually just be set went because that's what I called it inside here reset went so she's got make sure we do that okay guys so really silly error here actually um the issue was on the server side here I'm calling play right like game dot play and so if actually I need to get rid of six I was just printing out the exception so I can see what it was but essentially play doesn't actually exist because I misspelled something on game I miss spelt it and misspelled the player should be play so that was the issue I was running into it just it was very difficult to see because it was just accepting it and not like not printing anything out just continuing to run the server so I couldn't find it but essentially if we run the server and we run the two clients now we should have everything working I haven't actually tested it so let's pray if I go paper suite so he goes paper here we're not getting locked in over here so that might be an issue but see if we make something here then offense you lost and you won okay so we have a slight issue but it's pretty easy fix let's just go up to client just look through we're just probably messing something up in the drawing code here so oh that would make sense well we're not actually end up drawing yeah so this if P equals equals one this just needs to top back one one indentation level and that we should have everything actually working fine so let's try this now client client and let's go rock okay so that works but it's not doing the locked in for some reason so let's check this this locked in portion I just closed that server and make sure that this is actually working so that needs to be p2 went and well if this one should be working those what's confusing okay so actually so that one just need to be p2 went game p2 went let's try this server and let's go client and let's ride again and scissors locked in sweet so that's actually working and the game is pretty well finished all we got to do is out a menu screen and we're gonna be done so now let's go scissors this is a scissors scissors that's not correct we got to fix that as well okay I thought I had everything working guys I really thought so okay so I actually I do I do know the issue it was it's pretty straightforward so in main here when we check the let's see here the winners where do we check winners if it equals equals 1 because equals negative 1 ah okay so game don't winner needs brackets of course it does so we need to add that so obviously just some silly Aires guys so server's running right now let's run these clients see if everything is indeed working as it's supposed to be now okay so let's try this paper locked in scissors you lost you won yay okay everything's working okay paper paper tie game sweet okay so you guys can all really mess around at the timing you can see how this is working so the only last thing to do now is watch this if I disconnect disconnects both of them so what we're gonna want to do now if that happens is instead of just completely like exiting the game we're gonna want to bring them to a menu screen where they can just click to reconnect and this is a really this actually really easy to do so what we're gonna do is we're gonna define another function I'm gonna call this menu underscore screen okay and in here all we're gonna do is have a really basic while loop that just checks if you click something and all it's gonna do there is click the run that main function so we're gonna do is just a run equals true or say well run okay and then in here we're gonna say for event in PI game the event dot gets and that obviously we're going to check if they click exit so if event type because he goes PI game dot quit then we will do is just do PI game don't quit Ron equals false otherwise if they click any key so let's say if event dot type equals equals PI game dot and we'll just say mouse button down so why should just get it they'll click the mouse button then what we'll do is we'll simply say Ron equals false and at the bottom of Ron equals false what we're gonna do is we're just gonna call main so all this is gonna do and we'll call menu under stores screen here so we said while true comma menu screen okay I won't go through this in a second or say while true menu screen okay so we're gonna do is in menu screen if they click something we're gonna call the main function which is simply going to what do you call it do all of this stuff in here and then if they exit out of the main function so if you say like Ron equals false because they disconnected it'll just rerun the menu screen which means that they'll be prompted to reconnect to new game awesome what we'll do in here is a lot of clock as well so say Clark equals PI game dot time o'clock give it a tick so clock dot tick sixty will do will just draw something in here we don't need to use the redraw window function we'll just do font equals PI game dot font dot s why is font in here we'll do go Comic Sans will go sixty and then we're just gonna render some text will say text equals volunteer and ER in here will simply say click to connect our click to play exclamation point one some nice red text and we can just continually actually we can just window fill so wind fill and we'll just fill it with white suppose your zero or what I say gray actually 128 128 and we should just where is wind do i define it up here somewhere yes I do so that's sweet winds up there so what we can do is just fill the window run into this while loop put some text on the screen we may actually have to fill this every frame let's get rid of one of those brackets I created so let's fill this every frame actually okay so we'll fill it we will blitt this font so it's a wind blitz text and you know what for right now I don't want to deal will just do it statically we'll just do like 150 so it's night at the top of the screen actually let's go 100 200 Ok Go my game don't display don't update like that then if they click something what should happen is that you break this loop they should be brought to you the main thing and yeah that should hopefully be working for us so let's try this client click to play ok a little a little sketchy on the click to play but let's see you if we click to play ok waiting for player so this is what actually what I wanted so it says waiting for player we're gonna wait for someone else to connect ok boom connected sweet so now we're ready so let's just run a game let's go rock scissors now let's just see what happens if we click X this one goes to the menu screen where it says click to play and it can be what he called play against someone else right and that's exactly what we wanted we may also want to add like a back button to go back but I'll leave that to you guys so guys I'm gonna leave the tutorial here if you guys have any questions or run into any bugs or anything please let me know this is by no means like a full complete game there's still obviously a lot of things that could be added to this and I might continue a serious later but I think for now that's probably enough I hope that you guys learned how to make an online game I find this stuff really freaking cool and really interesting how you can have like a ton of different clients connecting together you know if you guys want to play against me using this I'd be happy to put this on an external server release it maybe do a livestream where I play against some of you guys I think that'd be really interesting and cool and some of you mentioned that you might want to do that so with that being said if you guys enjoyed the series please consider subscribing to the channel and liking the video and that being said I'll see you guys in another video