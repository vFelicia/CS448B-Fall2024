clientside and then we're going to say is going to say P equals one and what this means is player equals one and you'll see why we need to do this in a second okay so now we're gonna do start new thread now notice insert new thread I added two new parameters P and game ID so this means the current player so it's either player zero or player one and the game ID and game ID is gonna stand for which game in this games dictionary are we playing in this threaded client like which one of our clients that's connected here is playing which game that's why we need that so let's pass that information Syrena pass P which is either gonna be 0 or 1 like we have there and we're gonna pass game ID and then we'll have that up here and just remember that threaded clients one of these functions is continuously running for every single one of our clients so if we have a hundred clients we have a hundred different functions of this running in the background at the same time ok awesome so that's how about it's working inside our threaded client now excuse me I try to take a break there inside of our threaded client we now need to add some things so the first thing we're gonna add is ID count we're gonna global ID count because if someone leaves our game or disconnects we're gonna need to subtract from that so we can keep track up accordingly like how many people are connected how many games are running and all that stuff ok now the first thing we're gonna do when someone can next to our woody called our server is we're gonna send them what player there remember what I was saying in this game class we're in this network class sorry then when we connect we're initially just going to decode a string that's either going to be 0 or 1 to tell us what player we are ok so what we're gonna do is we're going to send conn don't send str dalton code P and I believe this should be actually string P like that so that we know if we're player 2 0 or if we're player 1 that's the first step next we're gonna say reply equals a blank string we want to say a while true and this is where we're gonna start doing some more serious stuff in here so the way that it's going to work in terms of sending string data from our client to our server you we're gonna send one of three different options we're gonna send get we're gonna send reset or we are going to send a move and the move is gonna be like rock paper or scissors so if we send get what that means is we want to get the game from the server so we're gonna send that every frame we're gonna send get that string get and then the server is gonna look and it's gonna say okay what are you sending your sending get alright we'll send you back the game that's how that's gonna work another option is reset reset means reset the game the game has finished both players played reset and that's gonna be sent from the client side because the client knows when we want to reset right the last one is a move same thing when the client makes a move so like rockpaperscissors if they are allowed to make that move which will check on the client side we'll send that move to the server the server will update the game accordingly and then it will send back the game to the client and that's how that's going sweet so what we'll do now is going to say well true let's say data equals con dot receive and then we're gonna say 4096 and here instead of 2048 what you're using before dot decode the reason we're doing this is just in case we're sending too much information that is more than 2048 bits we want to just double this number so we can get more if you run into any issues that say like pickle data was true onst or like ran outta input just increase this number okay you can literally just do x tune here and that should hopefully fix the error if it doesn't work you can like multiply by 4 multiply it by 8 and that should hopefully fix your error for you okay so now what we're gonna say is gonna say if game ID in games now I'll talk about why we're doing this in a second we're gonna say they're gonna say game equals games game ID so essentially every time we run this while loop we're gonna check if the game still exists and that's what we're doing right so in this games dictionary we're seeing if this game ID which is the key to access the game is still there now why would we check that well if one of our clients disconnects the game we're actually gonna delete that game from the what he call it the games thing now what that's doing for us excuse me is not only like keeping track of our memory which means that we're not gonna just continually keep creating games so like Sarah server ran for weeks and we never deleted any games then we probably rotten run out of memory on our computer right if we're playing a lot of games but it's also gonna tell the other client that was connected to that game that hey this game no longer exists that means the other person must have disconnected from it so we have to do something accordingly go back to the menu screen right do something like that okay so that's we'll do there and then we're going to say in here is gonna say if not data we're gonna break this similar to before so I'll go through it a bit quicker we're gonna say else and now we're going to check the three different things that could have been sent right so we've received the data so we're gonna check if we got reset get or if we got a move so the first thing we'll check will save data equals equals reset okay then we're gonna say if data does not equal yet and then else sorry there should be an Elif Alec data it does not equal yet else we'll do something else actually do we need an else no we don't you knows okay so if data equals reset what we're gonna do is we're going to say game dot reset right because we already have the game and if we look in here what resets doing is essentially it's resetting both players one so we can play another game really straightforward for that next one if data equals yet what we're gonna do is say game or if data does not equal get sorry so if it didn't equal reset and it does not equal get well then it must be a move so it means we're either getting rockpaperscissors so we're gonna send that move to the game to update it so to do that we're gonna say game don't play and then we're gonna do with the current player number which is P and then the move and the move is gonna be whatever this data is right so it'll be data okay and then otherwise so I guess after that what should we do here we'll say reply equals game and that what we ready to do is going to be conned send all I'm gonna say pickle dot dumps and not dancer reply okay and what this is gonna do let me just make sure I didn't run to any errors here is simply going to package up our game into that nice um send able form we're gonna send it over to our clients clients gonna receive it on pickle it and then use it to obviously make moves and do different things and draw it to the screen and all that okay alright so I think that makes sense we can go through it really quickly what time we got twenty five minutes alright so we'll go through really quickly essentially what's happening when you connect we're gonna check if we have an even amount of players or an odd amount of players if it's an odd amount of players when you connect that means we need to create a new game so we create a new game if it's not that means we need to assign you to a game so what we're gonna do is make the current game that only has one player in it ready we're gonna assign you to that and start a new thread when we start the new thread what's gonna happen is we're gonna send to the client what player they are either player zero or player one and then what we're gonna do is we're going to constantly receive string data from the client if the game still exists then what we'll do is we'll check if they're sending us reset get or remove if they're sending us a move we'll make that move if they're sending us reset we'll apply that reset to the game and then we're just gonna constantly send back to them the game object and now what we need to do is just really quickly add some else statements in here so that if some of this stuff doesn't happen we have like a catch for it okay so what we'll do here is we're just gonna simply say else break okay that should be aligned up here and we're just gonna add a try and except up here so we're gonna say try and we're gonna indent all this by just highlighting and pressing tab let us say accept and then pass I think that's yeah no not passer accept and then break just in case you know something goes wrong with this data dot receive we want to make sure the server keeps running so we have that try and accept and then underneath this except in line with the main function indentation what we'll do is if we break it out of this while loop we need to close the game and delete it so to do that is actually we're going to print some on my wrong file here two prints lost connection and then we're gonna print what do you call it closing game okay actually we can print that game ID two won't see what game idea we're closing so I said lost connection closing game game ID okay and then we're gonna try to delete games game ID otherwise we will accept and pass okay and then underneath here last thing we're gonna do is gonna say ID count equals one and we're going to say connection got close now that I actually think about it we should probably put this closing game only in this try after we delete just so that we don't we only close the game once we don't say we're closing the game twice okay so what we're doing down here essentially is if we break out of this while loop so for example if the game no longer exists we're gonna break if something goes wrong with this getting data so like the player disconnected we're gonna break we're gonna say lost connection we're gonna try to delete that game the reason we have this try here is because if both players disconnect at the same time one player will delete the game before the other so if we try to delete a key that doesn't exist we're gonna run into an issues we try that if that works we'll say print closing game and then we'll say that game ID otherwise we're gonna pass we're going to subtract from the ID count and we're gonna close the connection sweet so we're rolling we're going pretty fast here now all we got to do is code the client now this is probably the most amount of code I think it's about a hundred lines it just is a lot of drawing stuff okay so I'm gonna take a break we'll be back in one second and we're gonna code the client alright so I'm back now and we've got about 150 lines to write for this file it's pretty tedious because a lot of the stuff is to do with the drawing like we need those buttons to be working we need like all that text to be showing up so that's like 90 percent or not 90 percent but like 70 percent of the code about to write is just gonna be cosmetic stuff but I mean what do you want me to tell you that's what we need to do if we're gonna make an online graphical game right so let's start by just coding a class and this is gonna be a button class just that when we have those three buttons you know it just makes things easier so we're gonna do our Annette what do we need to be in it I'm gonna go for text sorry I'm coding in the wrong file text XY and color and we're just gonna say that the width and the height will be uniform in here and we'll just make it the same for all of our buttons we're gonna say selfthought tax equals text self dot x equals x self dot y equals y and self the color equals color okay sweet we also add a width and a height here so we'll say self dot width equals 150 selfthought height equals 100 and feel free to play with these numbers it's just what I decided by the way guys just really want to say this I'm not focusing on how good this game looks I know it looks like crap but you guys I know can go through and tweak the colors and tweak the positions and all that I just don't want to focus on that because I want to get the hard stuff out of the way in the tutorial okay so let's do a little draw method in here pretty straightforward there's a new play game dot draw dot rect and then for the rectangle we're gonna take window which is that parameter for the draw and then we're gonna do which we do color so self docked self thought color and then we're gonna need that rectangle position which is gonna be self dot X self del Y self dot width and self dot tight like that okay and then I guess let's see if there's anything else we need to add to that no that's fine we're going to find a font so we actually need to make sure you just add this at the top pi game font got an it okay make sure you guys add that and we're gonna do font equals high game dark thoughts dot s sys font should help you spell font correctly and then here you're gonna pick your favorite fonts I like Comic Sans I'm gonna make this how big should this be let's make it 40 and then what we're gonna do is going to render some font so we're gonna say text equals thought dot render and we're gonna put self dot text we're gonna do one and we're gonna do the color which will be I guess in this case or white 255 255 255 okay next we're gonna draw this on the screen now we want this to be centered on the button so I'm gonna do some like decently complicated math it's not really that crazy but we're gonna say wind up blue text and then we're gonna say selfthought X is it no it's + selftaught x + in brackets and we're gonna round in these brackets I know this is confusing or a new self though with over two round and we're gonna say text get underscore width over 2 now what this is doing essentially is we're starting out our exposition but obviously we want our text to be centered so to send our text we need to know not only the width of the like container of the button but the width of our text so we're gonna get the width of our text our VAR button we're gonna subtract that from the width of woody coats our text so that way it should add like 20 or 30 pixels from the left side so our Texas Center okay for the Y we'll do a similar thing so inside make sure you don't mess up these brackets inside here we're just gonna actually copy this and we're gonna paste it right after a comma and we're simply gonna say self dot y + round self dot height okay plus text dot get underscore height or minus Tex together it's gonna right over and that should Center our button yeah okay next we're gonna say define click we're gonna add a position here this is just gonna tell us if we clicked on the button or not so it's a really basic if statement yes we're just gonna say X 1 equals pause 0 + y 1 equals pause 1 now what we're gonna say is gonna say if self dot X is less than equal to X 1 less than or equal to self dot X + self dot width and self dot y is less than or equal to Y 1 less than or equal to self dot y + self dot height believe that's correct just check this yep that's correct then what we'll simply do is we'll return true indicating that we did press the button otherwise we will return false now I know I'm speeding through this but it just cuz it's really basic PI game stuff and we're doing online games so make sure I change that so don't want to focus too much on the cosmetics but essentially what this is doing is it's checking if the coordinate which we're going to pass in here which is going to be a tupple of x and y of our mouse position is actually in the button and the way we're doing that is we're saying well we go on the X right we check if it's greater than the X we check if it's less than the X plus the width so like if it's in between the little box and then for the Y value we do the same thing but we're checking vertically to see if it's in that box if you don't understand that I have PI game tutorials where I go through like collision and how all that works I'm not really going to talk about that right now okay sweet so we've got that working now what we're gonna do is actually let's see what I want to code now let's code the main function and that will get them to redraw window so the first thing we're gonna do is we're gonna define those three buttons so we're gonna have at the bottom of our screen so rockpaperscissors do that we're gonna say buttons equals and we're just gonna make three buttons first button will be rock so you say rock we're gonna start it at 5500 and then we're just gonna go and give it a color of zero zero zero okay we're gonna create another button will say button and then we'll say scissors we'll give it a let me just check here 250 as next 250 as next 500 as Y and for the color for that I gotta check what color I made this I believe that I made that red okay so the two 5500 and then one more button can anyone guess what this one is going to be it's gonna be paper we're gonna put this out of position of 450 so we can go here 450 500 and we will simply make it blue or green sorry 0 255 0 so red green blue okay sweet so that should be it for our buttons and now we'll get into the main function and start coding some stops