hey guys and welcome back to another django tutorial so in today's video what we're gonna be doing is talking a bit about forms now forms are essential to any website an example of a form isn't like a login form or a create new account form or maybe a create new todo list for our example here so we're gonna be doing today is just making a form that will allow us to create a new todo list and then in the next video we will create a more advanced form that will allow us to add items to our existing todo lists so I want to make a way essentially right now that we can create a new todo list without having to use the command prompt I just want to create a web page that'll allow us to do that so what I'm gonna do is create a new page on our website called creates that will allow us when we go there to create a new page using a form so what I'm gonna do is start by setting up a path to that page creating a new template and then we will work on an actual form itself so in this case I'm just gonna say that creates will be where we want to go and then we'll say view starts create and we'll name it create like that I think I can just probably just put create like that tube and whatever that's fine oh it's not we've done that let's go into our views file let's create a new function we say define create will say response like that and then in here we're just gonna return the same thing but we'll just change the file name to be created a ch2 ml and we'll create that file right now so we go inside of our main file here I'm just going through this quickly because we've already essentially done this a bunch of times I'm going to extend so this extends and in this case main slash based HTML and then we will have to do those blocks or we don't have to you but we will do those blocks so in this case block title and we'll just call this create new list and then we will end the block like that and I'm just gonna copy this and put it down here but just change the name of the block to be what do you call it content like that okay so now I'll save this as what do we want creates dot HTML and we have created the template for our what do you call it in create page so in here I'll just say create page and we will add the form content into here afterwards so now that we've done that we should have a page on our website essentially that when we go to create it'll bring us to this HTML page which extends obviously our based on HTML and to give you a reminder this is what our based on HTML file looks like ok so what we need to do now is actually create a form that will show up on our create page now when you create forms most of you are probably used to doing something like this where you go in the HTML and you actually code the form yourself so for example you do form your gonna say method equals maybe we're gonna say post in this case and I'll talk about the different methods in a second you're gonna say action equals and in this case we're gonna go back to the same page and then maybe you make a button and that button is type equals submit maybe that's a name equals like save or something and then you end the button and maybe you do so like that so this like this is an example I'm just doing this because we're actually gonna need to do this but you guys get the idea that this is typically how you create a form and then above all of this you're gonna do all of the different fields in your form so for example I've got a username and password you do an input field for user name input field for password you give them some labels some names all that kind of fun stuff now Django makes this a lot easier because all we actually have to do is pass in a variable called form and Django will actually generate the HTML for the form that we create for us now this makes no sense right now because we haven't created a form yet but what we're gonna be doing is passing a form object so we'll create our own form class and we'll create an instance of that and pass it into our HTML and it'll generate the HTML for those form fields for us so for example if we had user name and password this is all like whatever form we pass in here will automatically be generated for us I mean you guys will see how that works in a second the only thing that we need to do when we're creating a form is make these form tags like this and then add a submit button that will well submit the form for us that's all we have to do so now how we actually need to create the form so this will start making sense now what we're gonna do is make a new file inside of our main application directory and we're going to call it form stop pi so let's save this as form sup hi make sure in the right directory and what we're going to do at the top here you're going to say from Django import forms and now we're gonna create a class and this class is gonna be called whatever we want our form to be called and it will define the attributes in the fields in our form so I'm gonna call mine creates a new list and in here we are going to inherit from forms dot form which will allow us essentially to have the form automatically generated for us and to do a lot of cool stuff which we'll talk about later so I'm gonna set now the fields for my form now these fields are the exact same as the fields in your database so for example like boolean field integer field anything like that but what we'll so the way we do it essentially as we say forms dot in this case I want to character field for my name so I'll to say character field or char field and then in here I need to give it an optional argument or I don't need to then but I can give it an optional argument of label which will be what shows up before the little box so that it um you know we know what we're typing in here and then we can give it a max underscored length as well which I believe is required and I'm just gonna set this equal to 200 characters because that's probably all we need so essentially all we're doing when we create a forum is we're just gonna list all the different attributes that we want for our form as class variables underneath the the class so if I want an another attribute that maybe was like a check button or something like that what I can do is I can say like check equals forms dot boolean fields like this and that's all I have to do and now when I pass this form into Django it'll automatically create not only a name what he could a name character fields like text input it'll also create a boolean field which will be like a check button and then we can do other kinds of fields as well and if you want to know all the different types I'll leave a link here in the description to all these different kind of fields that you can use okay so that's how we create a form if you want to create another form same thing you make another class and do all of the different attributes you want in that form and we'll get a bit more advanced with it actually in the next video as well so anyways now we've created a form so let's go back to this view stop pie file and let's now actually pass this form into our create HTML so we're obviously going to need a variable called form here and we're gonna have to pass that in so what I need to do now is I essentially I need to create an instance of this form and pass it to my HTML so to do that I have to start by importing that so oh I already imported it here but anyways just do from dot forms import and then the name of your form so mine case create a new list and then what we're gonna do is we're going to say form equals create new lists like this now what this will do is create a blank form and we will pass that into our HTML and it will know what to do with it and generate the form for us on that create page so let me show you this working in action now so I'm just going to run my server I'm sure you guys know to do this by now and if I go to this link here actually I go to slash create you can see that now we get to create a new page you can see that we have a name we have a check button and we have this create new button so that button was the button that I created but this name field we didn't make this check button we didn't make Django automatically generated that for us now notice that obviously these don't look great we want to add some HTML to them we want to add some CSS we want to do all kinds of stuff I'm gonna show you how we can do that later but just know that Django is capable of automatically generating all of the HTML for your forms so so before I go any further into how we're actually gonna get information from this form because right now we have we're not actually doing that and it's not gonna work if we actually try to submit this form I will show you how we can look at the form in a different way so for example if we go to create dot HTML here there's a few default layouts for our form so we have as underscored table which is what is actually showing for us right now but we also have dot as underscore P which will mean that the form will go like vertically down so all the items will keep going down and then we have AZ underscore ul which means the form is gonna show up on little dots like as a list item so these are a few different ways that we can show the form just looking like a little bit difference if I do as P for example I believe we're running the server right now and I go here and refresh you can see that now it looks a little bit nicer in terms that we have the name and then we have the check box and they're just right after each other and do paragraphs I just want to show you that if I try to hit this button notice that we get this little please fill out this field nicelooking JavaScript actually pops up now the reason this does this is because Django is generating the form and the HTML for us if we had creed in our own form we wouldn't have we wouldn't see this this nice popup text right so that's one of the advantages of using the Django builtin forms although I will show you kind of the limits some of the limitations you may have with that now if I go to if I hit this check box same thing you can see even when I'm hovering over it we get like please check this box if you want to proceed like stuff like that right now notice that if I type something in here and I hit create new it says please check this box well this box might be an optional check box if we want to make this not a required field then what we can simply do to do that is go into our forms and inside boolean field here because they required equals false and now if i refresh the website here you see what I hovered is not saying anything and if I type like something in here and hits a hit create new it will work now I'll show you what happens right now when I do this and how we can fix this so when I do this it says we are get a CSRF verification failed now that is because whenever we're creating a form inside of our HTML we need to actually add these tags number to show you so essentially we need to just do CRS F underscore a token every time that we create a new form inside of Django this just needs to go inside of our form tags don't ask me why because I honestly don't really know it's something to do with security in terms of like verification and validation and stuff so just put that in here whenever you create a form so when you try to submit it you don't run into any issues okay so now that we've done that it's time to actually start creating new todo lists based on what the user types in so now it's time to talk about the difference between post and get requests so if I'm gonna go to I'll go to be used up high for right now and we need to talk about post and get so there's two different ways to send information to the server and that's essentially what our forum is doing when we hit submit submit what's gonna happen is it's gonna save all of that information that was in our forum it's gonna bundle it up in some kind of way and send it to the server now there's two main ways of doing this post and get now the reason for this like the reason they have two different ways is because there's two different functions for each of them typically like technically you can do anything with get that you can do with post but they have different security reasons behind them so for post is you're gonna want to use posts essentially whenever you're doing something that's kind of secret so for example getting a user's password if you're sending that to the server it needs to be encrypted because otherwise if it's not then other people can very easily see the password and change it and do all kinds of stuff so you're gonna use post whenever you're essentially doing anything that's kind of secret or the information needs to be encrypted when it's ended sent to the server now you also use post whenever you're making any modifications to like the database or anything like that you use get when you're just trying to simply like retrieve information so for example say I type in like the ID of the what he caught the todo list I want to get well we could get that using a get request not a post request because we don't like everyone can see what the ID of the todo list is that's fine we don't care that information what actually happens when you use get is all of the information that you type in the form gets pasted in the URL so when it goes to the next page it just simply reads the URL and gets that information whereas post actually hides the information encrypts it and sends it to the server now I'm oversimplifying exactly how these work but I want to make sure you guys understand that interesting post and get if you're unsure just use post but the reason you would use get over post is for example say you want to bookmark like a search result or something or you want to save some information which is a specific URL then you would use get because I don't know like I'm trying to think of a good example if you ever go you ever go to any links let's go to YouTube for example and then youtube.com slash and in this case I said like search equals tech with Tim you ever see something that looks like this this is what's known as a get request where the information that the user typed in in this case it would've been in the search bar for the YouTube gets pasted in the URL and then if you hit this I don't think this is gonna work because this is obviously not the way you search for something on YouTube uhhuh but it just gives you that page right whereas if I'm gonna be typing in my password it's not gonna save the password up in this bar because it's gonna use a post request and obviously the reason we use this get request is because maybe we want to save these search results and bookmark them and we wouldn't be able to do that if we're using a post request so anyways that is how posting get works I'm sure you guys are already confused if you have any questions let me know but I'm trying to explain as best as I can so anyways when we use this on we code this create window or this create page we're gonna use a post request because we want to encrypt the name of the what he called the todo list that you are creating and because they're gonna be modifying the database we need to use a post request so anyways all we have to do we don't don't touch anything in here because we've already set that the method is gonna be post but what happens when we have post and get requests is they are actually passed through this variable to our view so our view knows or can tell based on this variable here whether or not we are trying to post something or we're trying to get something when we access this page so to check this if we've passed a post request or a get request what we do is we say if response dot method equals equals and in this case post and this will tell us if we are trying to make changes who are passing information from the forum back to this page so if we are posting we're going to be doing something different than if we are getting so those are the two requests right post or get by default it's always get but whatever you're changing something you're gonna use post so anyways we're using post now so if we're using post what we need to do is the Fallen we have to say form equals creates new list but in here what we're gonna do is we're gonna say response dot post now what this does and what this is holding is all of the information from our what do you call it from our forum so essentially when we get this response top post it's gonna contain a dictionary that has all of the IDS of all of our different attributes all of our different inputs and it's gonna save the values that you typed in them so when you pass this to create a new list what its gonna do is create a new form that has those values populated in them so by default right if we go to forums you can see that we don't have any default value for the character field or for the boolean field so what's gonna happen is it's going to automatically set those values to what is received here and then we can start doing things with this form and validating it and creating a new to do todo list so now that we've created this form what we'll do is we'll say what do you call it here we're going to say if form Dodge is underscore valid what we'll do in here is now we will create a new todo list and add that with the name that was given to us so we're gonna say T equals and then to do list and we'll say name equals in this case we'll say n up here say N equals at form cleaned underscore data name now I'll talk about what this is doing so essentially our form is going to take this post it's gonna get all the data from the form and then we're able to access that data by just using it like a dictionary so you nuke doc cleaned underscore data I'm just gonna clean up the data for you unencrypted it and then what you do is you type the name of whatever the field that you want so in this case we named arts name so we use name and then we can get that data and we can use it to create a new todo list and then save that todo list like that and that is all we need to do now so that when we use this form every time we type in a name that's valid it creates a new todo list now this might be a little bit confusing but I hope you guys kind understand it this is valid method is automatically created and exists because of the fact that we're inheriting from form stop form and this thing is amazing and what it does is just automatically checks all of the fields that you've defined to make sure that they have valid input if they do then this is valid will return true if they don't it will return false and obviously you were seeing that it was telling us what was wrong with all of the different fields when it was incorrect so let's go back to create now let's click I might have to rerun the server here we'll see I've saved this save all this stuff and I think that updated anyways we'll check here quickly so I go back to create you can see now that we have create page we have name and we have a checkbox so let's now do like create a new todo list called Tim let's say create new and what will happen now is essentially we have created a new todo list called Tim now you might not actually be able to you can't tell that we've done that but that is precisely what we've done now we can create more todo lists and say like the new todo list Tim we could say like Jo create that and that has created a new todo list for us so now let's actually show that todo list right after we create it so for right now all we're doing is just returning the form with whatever information we passed in it but what we can do is we can say that all right if we're saying response is post instead of returning that form that has the name of the to do as we just created let's redirect to that to do list so you can see what it looks like so to do that what we can say is gonna say return HTTP and instead of saying response this time we will say HTTP and then response redirect if I can get my capitals work in here redirect like that and then in here all we have to do is put the page we want to go to so in this case I'm going to say slash and then I like percent I I mean I say percent and in this case I'm gonna say tid which will be the idea that Euless we want to go to now I also just have to import this HTTP response so I'll do it up here so from Django HTTP import HTTP response redirect and now what will happen is instead of returning this form and returning the main dot create HTML page we will redirect to the page that we've defined here which will be the ID of the to do list we just created so now this should have updated it did so let's try this again with Joe we said create new and we are redirected to the page that displays to Joe to us right and that is essentially how that works so that is the way that you create a form if we wanted to let's say get more information from the form what we could do is print out like if the checkbox was hit or not like we can do all kinds of stuff you can obviously create more than one form by doing multiple forms in here you can have more than one form on each page with different submit buttons all that kind of stuff in the next video I'll talk about creating custom forms so modifying some stuff maybe making some things look better and then in future videos you're gonna be adding bootstrap to our website and we're doing login forms all this kind of stuff so if you guys don't get it now we will be going over more of it in the future but these are just kind of the basics of Django forms