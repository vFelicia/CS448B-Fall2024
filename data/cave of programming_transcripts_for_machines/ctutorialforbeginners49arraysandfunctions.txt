hello this is John from Cave of programming. comom in this tutorial we're going to look at arrays and functions we're going to look at passing arrays two functions most of all and we're also going to have a quick look at returning arrays from functions so I'm in Eclipse as usual and I've got my um main function here and uh I'm using the G compiler as usual so I'm going to start by declaring an array here let's make it an array of strings which I'll call texts and um put the array brackets in there and I'll initialize that uh so if we initialize it we don't need to put the number of elements in the array as we've seen before so let's initialize it with um Apple orange and banana now supposing we want to pass this array to a function let's create a function up here let's make it void um I'll call it show in fact I'll call it show one because I'm going to have probably three of these let's say show one now the the kind of most intuitive way to pass an array to a function is to use the whole type of the array which is string text and um uh square brackets so um we don't have to call this text of course we could call it anything that we like uh we could call it strings or whatever could call it anything but I'll call it text just so I don't have to think of another name for this variable um and now we could we could pass that in so we could say pass the array into the function let's say show one and texts like that let's Loop through the array so let's say for in I equals not I less than three cuz there's three elements in the array I ++ and we'll do c out text I endler so this works exactly as you'd expect pretty much if we run this we've got Apple Orange banana now there is a problem here which is that um when we pass an array like this we lose the information about how many elements are actually in the array to underline that we could do see out here this will work see out size of text and that's going to give us um well a string occupies on this with this compiler 24 bytes so we've got three of them so the whole array is going to be 72 bytes so we get 72 there but if we try the same thing here for one thing um we probably well at least in my compiler I'm going to get a compil a warning so it's going to give me a warning but it still builds it's not an error and um so the warning is this stuff about size of on array function parameter will return size of string pointer what we actually get when we when we run it is we just get the size of the pointer which is the same as size of long which is um at least with this compiler which is 8 bytes so we've lost the size information with this syntax and for that reason it's it's a a common thing to do is to pass in the number of elements in the array uh as a parameter so let's say int um elements or we could call it n elements or something to underline that it's um excuse me to underline that it's a it's an integer it's a number let's say int element n elements and then we could pass that in uh here so that's three and we could use n elements here n elements and because we we definitely don't want to change this number for good practice we should declare it Con as well so that we can't change it within this function and if we run this it works as before I don't think we we saw any compiler warnings there oh yeah we would do because of this um so let's put a note here returns size of pointer that doesn't work and now if we build this we shouldn't see I don't expect to see any warnings here so it's fine now another uh syntax that you can use well in fact this is exactly equivalent to doing this where we pass a pointer like that um so this is is really exactly the same as this there's not there's not any difference um so if we if we do that let's call this show two it's going to work exactly the same so these two are equivalent and you'll recall that with a pointer you don't have size information there you have the information about how big the pointer variable is it's 8 bytes cuz it contains a memory address that can take 8 bytes to specify but we don't have the information about how many elements are in the array you can even uh put a number here um like three but C++ will just completely ignore it I could put two in there or whatever and we can still merrily pass in an array with three elements we don't even get a compiler warning with this compiler anyway um so this this is really useless there's no point putting a number there except perhaps is just to remind you uh about the number of elements that are expected there that's really the only thing that it's good for if you do want to retain size information you have to pass a pointer to the array let's show that so let's call this show three now we can get rid of the number of elements CU we're not going to need it and uh we can say string so we'll say string text array just as before and using this syntax you have to specify the number of elements in the array correctly so I'll say it's got going to have three elements now to pass in a reference you might expect that we just do this um this if you recall uh the tutorial on references but the problem is that this actually specifies an array of references to Strings which is um no use what we want is a reference to an array of strings so we actually have to put round brackets around this bit and perhaps this is the reason why this syntax I haven't seen it really Ed much it just doesn't look that look that nice but it does work and then we can use our old trick to get the um number of elements in the array we can say size of text divide by size of string because we've got strings in the array and if we do that we can call show three and it has correctly now it does have that information correctly about the number number of elements in the array we're outp putting Apple orange banana here so this is all working and here C++ will check that you're passing in in an array with the correct number of elements so if we change that to two and we build that then we get an error um it won't let us run that uh it's possible some other compiler might give you just a warning but um I'm guessing most of them will give you an actual error you have to have the right number in there that's kind the point of it uh so three different useful syntaxes there for passing arrays I also just want to mention quickly uh returning an array from a function um so to do that the thing to do is return a pointer so we could say string pointer um get array let's call it and um what you must avoid is let's create an array here I'll put something different in it like 1 2 3 now you can return that text but you mustn't and if in fact if we build this we'll get probably a warning but not an error so this this has given me a warning which is nice but um this is no good at all because what's happening is we've got this array which is scoped to these brackets then we we we are returning a uh pointer to that array but we'll be that pointer will then point at something that no longer exists after this function returns so um you must not do that let's uh let's just put here um don't don't return pointers to local variables because that's really what this is It's a local variable and we can't return pointers to variables within functions because they don't exist anymore after you leave the function if you wanted um you could in fact declare the array somewhere where it's available to all functions so um if I put this up here like this let's call it something else the same numbers and then here I'm going to return numbers that would actually work so if we build this that would work just fine it's a bit useless because why returns something when it's it's available anywhere but the point uh really of this is just to show you that you can declare variables outside of any function and then they're going to be available in any function in your file below where you declare them um so whoops let's say here um could declare the CLA if I can spell it right variables here okay but um but whatever you do don't don't return um a local variable from a function cuz that's really going to mess things up and if you do need to return an array from a function you can uh just return it as a pointer and that's that's useful for example if you've um if you've used the new operator within your function let's take a quick look at that let's say we've got I use Char Just For Change here but this also applies to Strings we could say CHP pointer um I don't know get memory and in this function we could do something like um uh Char pointer p m equals new Char and then some some number of chars let's let's say 100 we could return pmen that's fine because we're using new we're explicitly allocating memory and that will not be de deallocated until you call delete on it so now we could do um Char pointer P um P memory I'll call it something different just to underscore that it's it is different we could call it PM again it doesn't matter equals get me memory like that but then we have to remember to free that memory later when you use new the responsibility is entirely on you to free up that memory so again although this is quite common clearly um it's not ideal because uh you have to know that this function when you call it you have to know that it allocates memory because you've got to delete it and again quite a common thing to do um would be to declare another function let's say um void void free memory which can take a Char pointer p m and then all that's going to do is to call delete like that so p m and then here we could say free memory P memory so this is also quite a common pattern in C++ let's just run that make sure it it actually builds and seems to work so if you create a function that allocates memory it's a common practices also to create a function that deallocates that memory and then in the documentation of your functions you can say okay if you call in this case get memory you must remember to call free memory to deallocate that memory so that's quite a common thing to do uh just to um just to avoid the user having to realize that um they need to free an array of memory you just provide them with a nice utility function to clean up whatever this function did and call them imp purs that's a common pattern in C++ okay so to practice this um I'd recommend just just trying all of these things try passing an array to a function using these three different syntaxes use an array pass in the number of elements um use a pointer and also use a reference to an array and check that you can iterate through the array in your function you might also want to try just doing this creating a function that allocates memory and another function that deallocates some memory and if you want you can use that memory to do something put some characters or strings in there whenever your you're returning from that function so try those for yourself and try doing size of like I've done on the um on the array variable that you passed your function so you can see how size of responds in these three different situations and uh you can see if your compiler gives you a warning or not when you do something that you shouldn't do basically so um so that's it for this tutorial it's definitely worth practicing that just just try it for yourself passing arrange to functions using these three different syntaxes and until next time happy coding