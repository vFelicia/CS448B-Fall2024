With timestamps:

00:02 - hello fellow scratchers i'm griff patch
00:05 - do you see anything extra cool about
00:07 - this scene apart from that overly large
00:09 - scratch cat
00:10 - oh boy yes look at that pose look at
00:13 - their feet look at their legs what magic
00:15 - is this indeed welcome to part four of
00:19 - our classic scratch platformer tutorial
00:21 - we've covered player movements
00:22 - collisions scene switching and in the
00:24 - last episode player animation that was
00:26 - so cool
00:28 - and today we are talking about character
00:30 - posing and slopes
00:33 - we'll begin by fixing it so our player
00:35 - isn't stopped in their tracks by a minor
00:37 - bump in the road
00:38 - then we'll fix the issue with standing
00:40 - on ridiculously steep slopes and finally
00:43 - you must stay tuned as we add support
00:46 - for new standing poses and automatic
00:48 - feet leveling oh my what an episode of
00:51 - course for those of you who have chosen
00:54 - to use your own player sprite i'm sure
00:56 - scratchy doesn't mind yes this episode
00:59 - is also for you however we are focusing
01:02 - on you scratchy
01:04 - we begin by saving a new copy of our
01:06 - episode three scripts good to keep a
01:09 - backup and then name this one as episode
01:12 - 4.
01:13 - let me just hide these old variable
01:15 - reporters for a clean stage
01:17 - super
01:18 - up until now we designed our level to
01:20 - avoid having any slopes because well our
01:22 - player is completely incapable of even
01:25 - stepping over a tiny lump in the ground
01:27 - at least without jumping of course
01:30 - so we must begin by updating our level
01:33 - click into the level sprite and then the
01:35 - costumes tab i'm going to draw a curved
01:38 - bit of level in the lower right of the
01:40 - canvas
01:41 - draw a square
01:44 - then with the shaping tool select the
01:46 - top right point and delete it either by
01:49 - pressing delete or pressing the delete
01:51 - key
01:52 - then grab the middle of the line and
01:54 - drag it inwards to form a beautiful
01:56 - curve you can tweak it to look just
01:58 - right there that will do nicely
02:02 - while we're at it i'll also reshape this
02:04 - floating platform into a useful diamond
02:06 - platform
02:07 - good that should work well
02:09 - run the project and let's see what we
02:12 - have to work with
02:13 - we are pretty nimble able to jump onto
02:16 - and run down slopes but can we run up
02:19 - no siree we end up just running on the
02:21 - spot not very impressive
02:24 - to fix this we need to look back at our
02:26 - define move in steps custom block
02:29 - this clever block splits a bigger
02:31 - movement into smaller steps so that we
02:33 - can detect a collision and stop the
02:35 - player as soon as that occurs
02:38 - to allow the player to walk up slopes we
02:40 - just need to relax this rule a little
02:42 - and see if moving the player up a little
02:44 - might also get us out of the collision
02:46 - doing this over the course of a full
02:48 - movement will guide the player up a
02:50 - gentle slope
02:52 - okay this is the movement loop and here
02:54 - is where we move the player in the x
02:56 - direction the collisions are detected
02:58 - here
02:59 - so pull out the set x and set speed x
03:02 - blocks
03:05 - we'll make a new custom block to replace
03:07 - these naming it
03:09 - collide x
03:10 - slope or wall
03:16 - attach the define block to the scripts
03:18 - we moved out
03:21 - and replace them with a fresh collidex
03:23 - block
03:25 - great now we can work on pushing the
03:28 - player upwards
03:29 - basically if there is space to move a
03:31 - player up then we should do so
03:34 - therefore begin by changing y by one
03:41 - then check whether we're touching
03:42 - anything solid
03:45 - if touching is greater than zero
03:50 - then we are indeed not out of the ground
03:52 - yet
03:54 - but perhaps we might try moving up one
03:56 - more time duplicate the hole change y
03:58 - stack and put it in the if
04:03 - right so if again we are not out of the
04:06 - collision perhaps we've hit a wall let's
04:08 - return the player's y position back to
04:10 - its original value change y by negative
04:13 - 2.
04:14 - then since this is not a slope after all
04:17 - bring back those two blocks to push the
04:18 - player out of the wall as before
04:21 - finally stop this script
04:26 - but
04:27 - if the player has successfully moved out
04:29 - of the ground then we accept this new
04:31 - position and continue the script without
04:34 - backing out and up the slope we should
04:36 - go
04:37 - nice let's give it a test hit the green
04:39 - flag
04:40 - and down and then back up
04:42 - oh yeah look at that this is excellent
04:45 - news no more stubbed toes or excess
04:48 - jumping for us we are a lean mean hill
04:51 - running machine
04:52 - but perhaps there's something to miss
04:54 - here obviously there's a limit on how
04:56 - steep scratch cat will climb but do you
04:58 - notice how scratchy appears to actually
05:00 - move quicker as they travel up the slope
05:03 - but that's because our speed x is
05:04 - staying constant but we are adding to
05:07 - our total speed by also moving upwards
05:09 - now to combat this we need the act of
05:11 - climbing a hill to simply slow down our
05:13 - player
05:17 - this collide script only runs when we
05:19 - are going up a hill
05:21 - so to slow the player down set speed x
05:23 - to
05:25 - speed x multiplied by
05:31 - 0.95
05:32 - this is the effect of making hit a speed
05:34 - just a little bit less each time the
05:36 - player is moved up by a collision
05:39 - running that now and wow it's
05:41 - surprisingly effective the slope takes
05:43 - the edge off scrapcats top speed
05:45 - but the last steeper incline that's
05:48 - still too fast
05:49 - okay so duplicate the set speed x and
05:52 - bring within the if above this only runs
05:55 - if we're moving up a steeper incline
05:58 - change the multiple to 0.8 this will
06:01 - really slow the player down a lot more
06:03 - and you can play with these values to
06:04 - get the effect you want for your game
06:06 - green flag oh and i think we have ruined
06:09 - scratchy's hill running dreams but the
06:12 - good news is that it's looking a lot
06:14 - more natural sorry about that scratch
06:16 - cat
06:17 - next we'll talk about the downhill
06:20 - skipping effect oh gosh this is a common
06:23 - problem when our player hits the ground
06:25 - we naturally set their speed y to zero
06:28 - but when running down a slope this has
06:31 - the effect of suddenly making us change
06:32 - direction and literally sends us
06:34 - skipping our way down the slope
06:37 - it's not an awful problem but we can do
06:39 - better we need to preserve some of the
06:42 - downward motion after a collision to
06:44 - allow a more smooth descent
06:46 - find the define move in step script
06:49 - again
06:49 - this time we are looking for the
06:51 - vertical movement that's the y direction
06:53 - down here
06:55 - just like before we'll pull out the
06:56 - scripts within the if
06:58 - set y and below into some free space and
07:01 - then make a new custom block naming it
07:03 - collide y
07:05 - ceiling or floor
07:10 - we'll use the scripts we just removed as
07:13 - the body of this new defined block and
07:15 - pop a new collide y block in their place
07:20 - cool we are on our way
07:22 - so we only want to alter the downward
07:24 - movement after a collision
07:28 - ignore upwards motion for now
07:30 - in that case use a new if
07:34 - this time checking that speed y is
07:37 - greater than zero
07:39 - rather than less than
07:41 - so when it's greater than zero it's
07:42 - moving upwards so just set speed y to
07:45 - zero and stop this script
07:48 - functionally no different from before
07:51 - but otherwise yes we can set falling to
07:54 - zero we're on the ground now but what
07:56 - about the speed y well we don't want to
07:59 - set it to zero but we do need it to
08:01 - reduce in that direction
08:03 - a quick trick is to set speed y to speed
08:06 - y multiplied by 0.8 again hopefully
08:10 - leaving them enough momentum to slide on
08:12 - down the slope
08:13 - but slowing them enough to remove any
08:15 - weird side effects
08:17 - let's give it a test
08:19 - so we run up the hill and then down we
08:22 - go
08:23 - oh cool this is much better once
08:26 - scratchy is dashing down the hill his
08:28 - downward momentum keeps him tightly on
08:30 - the slope hold on let me do a quick side
08:33 - by side comparison
08:34 - the video on the right is the updated
08:36 - scripts and oh boy yes the new scripts
08:38 - have it they are silky smooth i'm well
08:41 - pleased with that
08:44 - there comes a point though when we
08:46 - cannot continue to ignore our players
08:48 - strange ability to stand on a really
08:50 - really steep slope look at this hanging
08:52 - on by a toe it's pretty obvious that if
08:54 - we tried this at home we'd be sliding
08:56 - down this hill on our faces so what do
08:59 - we do now about these inclines although
09:02 - they may not look like it here their
09:04 - collision shapes are actually made up of
09:06 - jagged runs of pixels like this
09:10 - our player's hitbox is catching its toe
09:12 - on one of these and the cat thinks it's
09:14 - on a platform
09:15 - to get around this we need to check
09:17 - whether our player can move across and
09:19 - down by 2 pixels if there's no collision
09:22 - there to stop them then we'll let them
09:24 - slip off down the slope
09:26 - okay let's do this we start by making a
09:29 - new custom block naming it slip
09:36 - still within the define collide y
09:38 - scripts
09:39 - place an if block around the set falling
09:46 - and check whether falling is greater
09:48 - than zero
09:54 - we only want to trigger a slip call in
09:57 - here when we just land
09:59 - otherwise we'll be calling this from
10:01 - elsewhere
10:02 - you'll see in a mo so drop in our slip
10:05 - block
10:07 - great so we can change y by minus 2 to
10:11 - check below the player
10:15 - but also we change x by 1 to look to the
10:17 - right
10:18 - next we check whether we are touching
10:20 - solid
10:22 - and use and if touching is less than one
10:31 - this means we are not touching the
10:32 - ground in this direction so we want to
10:35 - slip
10:36 - the first thing we do is set falling to
10:39 - nine
10:40 - this needs some explanation it's a
10:42 - little trick because the falling
10:43 - variable is used to prevent the player
10:45 - from jumping while they're in the air by
10:47 - setting this to a number larger than 3
10:49 - or so we will be preventing the player
10:51 - from jumping when they are slipping down
10:53 - a slope like this
10:55 - now you may think this is
10:56 - counterproductive because we may want to
10:58 - add wall jumping later but don't fear
11:01 - that is a completely different mechanic
11:03 - altogether
11:05 - another tweak to make is to change our
11:07 - speed x by one that will accelerate the
11:10 - player to the right a little bit as we
11:12 - slip down and then stop this script
11:16 - but
11:16 - what if we are not slipping
11:19 - we have to undo the previous move we
11:21 - made up here
11:24 - so change y by 2 this time and then
11:27 - change x by -1
11:30 - super that's slopes that go downhill to
11:32 - the right sorted let's give that little
11:34 - beauty a test
11:36 - okay i don't care what you say that
11:38 - actually looks really cool when we land
11:41 - on a slope we slide right down
11:44 - i'll just make sure i can still stand on
11:47 - a less steep slope over here
11:49 - yeah no sliding down this that's really
11:51 - good really good
11:53 - well since that's working we should
11:54 - complete our scripts by adding the left
11:56 - hand slopes too duplicate everything
11:59 - from the check touching solid block
12:07 - we've checked down two pixels and to the
12:09 - right by one we just need to move left
12:12 - by two steps then to check for the left
12:14 - hand slopes
12:15 - and get rid of the change y block
12:18 - and change x by minus two instead
12:21 - pop these scripts back at the bottom
12:23 - it's all very similar except now we
12:25 - change our speed x by minus one to
12:28 - accelerate the player off to the left
12:31 - finally make sure to update the last
12:32 - change x by to be one now to bring us
12:36 - back to where we started now i can't
12:38 - test this yet on my level as i don't
12:40 - have any left hand slopes i better
12:42 - quickly pop one in
12:47 - there that's it
12:48 - and we can test
12:49 - i just need to jump up to the right and
12:52 - you can see there that there's no way i
12:54 - can get a footing on this now i slide
12:56 - right off success is ours
12:58 - you may notice that we see a bit of
13:00 - jitter when running up a slope and we've
13:02 - reached a point where we can't go any
13:04 - further do you see that
13:07 - okay it's not a problem find the define
13:09 - clyde x script
13:12 - and right on the bottom pop a slip block
13:15 - 2.
13:17 - this ensures we're always checking for
13:19 - slips whether we're colliding from
13:21 - falling on the ground or from running
13:23 - across it
13:24 - testing again running up the slope now
13:26 - and that's considerably better good job
13:30 - now if you are sticking to using a
13:32 - square player costume like guy then i
13:35 - suggest you might be able to skip the
13:37 - rest of the episode or just make use of
13:39 - the parts that you want however for
13:41 - players who stand up straight this is
13:43 - going to be cool it's time to take a
13:46 - second look at advanced hitboxes
13:49 - standing just here i gotta say it's
13:51 - perhaps a little odd that we still
13:53 - appear to be balanced perfectly on one
13:55 - toe
13:56 - it would be so much better if the center
13:58 - of our sprite costume could sit on the
14:00 - ground rather than the edge of our
14:02 - hitbox
14:03 - this is especially an issue when we
14:05 - stand on the edge of a step like this we
14:08 - prefer him to slip off at this point
14:09 - really
14:10 - luckily due to our recent changes to
14:12 - slip the player down slopes we can now
14:14 - do something quite awesome in the world
14:16 - of hitboxes
14:18 - click into the player's costumes and
14:19 - find the hitbox costume 20.
14:24 - this was perfectly rectangular to avoid
14:26 - any snagging on the edges of platforms
14:29 - but now with the slip block we are a
14:31 - little more free to experiment with
14:33 - shape
14:34 - so click into the next costume hitbox
14:37 - version 2.
14:38 - so what you will notice is that the
14:40 - bottom of the hitbox is a sharp point
14:43 - this is placed on the floor between
14:45 - scratch's feet
14:46 - when on a slope it means that the hitbox
14:48 - will no longer balance on a corner
14:50 - the next interesting thing is that the
14:52 - top of the hitbox is much wider than
14:54 - before this allows us to accommodate the
14:57 - scratch cat's large head preventing it
14:59 - overlapping the ground quite so much
15:02 - but how come we can use this shape now
15:05 - when previously we said we needed a
15:06 - perfect rectangle
15:08 - well the answer is that the slip feature
15:10 - we just added will automatically cause
15:12 - our player to slip off steep edges and
15:14 - that includes the steep edges of our
15:16 - hitbox
15:18 - let's just give that a try
15:20 - find that when i receive tick first
15:22 - script now switch the hitbox to hitbox
15:25 - 2.
15:28 - don't forget we also need to do the same
15:30 - in the define begin scene script here
15:40 - so hit the green flag and let's see
15:43 - right off we find our feet are planted
15:46 - centrally on the curve of the ground
15:48 - rather than above it that's good
15:50 - and now off we go to the right we'll
15:52 - find that we can no longer squish right
15:54 - up against the wall like we used to
15:56 - another boon
15:58 - so how about the edge of steps
16:00 - oh yes this is excellent our player now
16:02 - slips off the very edge and is pushed
16:04 - away from the wall by our new conical
16:06 - hitbox wonderful
16:08 - so just test now that the slopes are
16:10 - still behaving themselves as before
16:12 - yes indeed cool
16:15 - so
16:16 - now the player is more closely hugging
16:18 - the ground but our feet they are still
16:21 - looking a little odd one hanging in the
16:23 - air and the other clipping into the
16:24 - ground
16:25 - it would make sense for the feet to be
16:27 - level with the slope we are standing on
16:30 - what can we do about this
16:32 - well we could switch the player rotation
16:34 - style to all directions and try to match
16:36 - the player's direction to the floor
16:41 - but while this might look great for
16:43 - vehicles small cube players or even blue
16:45 - hedgehogs it's just not suitable for
16:47 - slower moving bipeds like scratch cat
16:50 - instead we want to keep the player
16:52 - upright and adjust their legs and feet
16:54 - to accommodate the change of the slope
16:57 - this does require drawing extra costumes
16:59 - for the possible slopes we might stand
17:01 - on but luckily for you if you've taken a
17:04 - peek in the costumes i provided you will
17:06 - find costumes 28 to 32 very interesting
17:10 - here if i click on costume29 you can see
17:13 - scratchcat is far better posed for the
17:15 - slope now not perfect but when they are
17:18 - small again very acceptable
17:20 - equally i can move them over here we can
17:23 - check the standing costumes again and
17:25 - perhaps this one
17:27 - okay there this one works well
17:29 - to draw these costumes i simply started
17:31 - with the default standing pose and then
17:34 - draw a line passing through the middle
17:36 - point between their feet the rear foot
17:38 - then needs to be drawn a little bit
17:40 - higher up and the back foot lower down
17:42 - you may find you need to reposition the
17:43 - player's body too to avoid the front leg
17:45 - stretching too long
17:47 - now as a quick note if you're trying to
17:49 - angle a player sprite like guy you may
17:51 - indeed want to use rotation to put them
17:54 - at a suitable angle with a slope but
17:56 - it's a lot more tricky to get right with
17:58 - this technique so
18:00 - how many poses will we need to draw
18:03 - well it's up to you but i find even just
18:06 - five standing poses is quite adequate
18:09 - what's more we don't even need to redraw
18:11 - any costumes for the running poses as
18:13 - when they're moving around the issue of
18:15 - where their feet are positioned is much
18:16 - less obvious
18:18 - so we have these five poses the next
18:21 - problem is working out how to get
18:22 - scratched to pick the right one for the
18:24 - right situation
18:26 - you'll need some way in code of
18:28 - examining the ground at their feet
18:30 - the simplest way to achieve this would
18:32 - be as follows we draw a specialized hit
18:36 - box for each standing pose shaping them
18:38 - to match the position of just the
18:40 - player's feet
18:57 - then to find which standing pose to use
18:59 - we switch through each of the hitboxes
19:01 - to find the one that does not collide
19:04 - with the level
19:06 - the first pose is the flat ground pose
19:09 - oh it's the same color as the level hold
19:11 - on i'll change that
19:13 - so now you can see the hitbox is
19:15 - touching the ground
19:17 - from that we can deduce that the start
19:19 - ground pose will not work
19:22 - we try the next hitbox
19:25 - nope this is also touching the ground
19:27 - hitbox 3 then
19:31 - this one does not touch the ground the
19:34 - third hitbox is the winner now since we
19:37 - are very forward thinking we set up our
19:39 - standing costumes in the same order as
19:41 - the angled hitboxes this way the third
19:44 - hitbox means we switch to the third
19:47 - standing costume
19:51 - click and there you go we found our pose
19:54 - excellent
19:56 - this works just as well on any slope in
19:58 - our game
20:06 - i think it's time to get scratching find
20:10 - with me the define set costume
20:13 - since all we are doing is leveling off
20:14 - the cat's feet this is the best place to
20:17 - do the job
20:18 - scroll down to the bottom to where we
20:20 - are setting the costume to stand
20:22 - we'll start by setting the costume to
20:24 - the first of the five hit angle costumes
20:26 - it's called hit angle zero
20:32 - then we loop through them with a repeat
20:34 - for a count of five
20:36 - so firstly is our hit angle sprite
20:39 - colliding with the level
20:40 - check touching solid and then if
20:43 - touching is less than one
20:52 - the hit angle costume is not touching
20:54 - the level so great we found the angle of
20:57 - the ground
20:58 - we now want to switch to the matching
21:00 - scratch cat costume we need to move 5
21:03 - costumes forward so use an addition
21:06 - block starting with the current costume
21:08 - number
21:14 - and then add five
21:18 - super so then we can stop this script we
21:21 - would be done
21:22 - but if the hit angle costume did not
21:25 - touch the level then we should move on
21:27 - to the next hit angle costume before
21:29 - this repeat block loops around and off
21:32 - the scripts go again
21:35 - then finally if none of the hit angle
21:37 - costumes worked then we just switch
21:39 - costumes back to the original standing
21:41 - costume for good measure
21:43 - shall we give that a try
21:45 - wow
21:46 - i forgot how big i'd made this guy but
21:49 - at least he's got his feet in the right
21:51 - place let me just shrink him down a
21:53 - touch back to 40.
21:56 - great now notice how as i turn left and
21:59 - right his feet remain rooted on the
22:01 - slope
22:02 - and i can move to the less angled ground
22:05 - oh yes i'm loving this very much it even
22:07 - looks quite cool when one leg is
22:09 - dangling off the edge of a step
22:11 - you may find you need to tweak your
22:12 - angled hitboxes until you get the best
22:15 - slope detection but these costumes are
22:17 - working really well here
22:20 - wow this episode is drawing to a close
22:23 - but we are in an awesome place now ready
22:25 - to look at adding seriously cool wall
22:28 - jumping and sliding i'm so excited for
22:30 - that along with moving platforms another
22:33 - favorite of mine i do hope you've
22:35 - enjoyed watching today please smash the
22:37 - like button and don't forget to
22:39 - subscribe to my channel to catch the
22:41 - latest videos if you are a loyal fan or
22:43 - an educator then please can i encourage
22:46 - you to support the channel further by
22:47 - joining the channel membership i do what
22:50 - i can to make you the best videos
22:51 - possible and the extra support is really
22:54 - appreciated thank you so much and thank
22:56 - you for watching hope you have a great
22:58 - week ahead and scratch on guys
23:05 - [Music]

Cleaned transcript:

hello fellow scratchers i'm griff patch do you see anything extra cool about this scene apart from that overly large scratch cat oh boy yes look at that pose look at their feet look at their legs what magic is this indeed welcome to part four of our classic scratch platformer tutorial we've covered player movements collisions scene switching and in the last episode player animation that was so cool and today we are talking about character posing and slopes we'll begin by fixing it so our player isn't stopped in their tracks by a minor bump in the road then we'll fix the issue with standing on ridiculously steep slopes and finally you must stay tuned as we add support for new standing poses and automatic feet leveling oh my what an episode of course for those of you who have chosen to use your own player sprite i'm sure scratchy doesn't mind yes this episode is also for you however we are focusing on you scratchy we begin by saving a new copy of our episode three scripts good to keep a backup and then name this one as episode 4. let me just hide these old variable reporters for a clean stage super up until now we designed our level to avoid having any slopes because well our player is completely incapable of even stepping over a tiny lump in the ground at least without jumping of course so we must begin by updating our level click into the level sprite and then the costumes tab i'm going to draw a curved bit of level in the lower right of the canvas draw a square then with the shaping tool select the top right point and delete it either by pressing delete or pressing the delete key then grab the middle of the line and drag it inwards to form a beautiful curve you can tweak it to look just right there that will do nicely while we're at it i'll also reshape this floating platform into a useful diamond platform good that should work well run the project and let's see what we have to work with we are pretty nimble able to jump onto and run down slopes but can we run up no siree we end up just running on the spot not very impressive to fix this we need to look back at our define move in steps custom block this clever block splits a bigger movement into smaller steps so that we can detect a collision and stop the player as soon as that occurs to allow the player to walk up slopes we just need to relax this rule a little and see if moving the player up a little might also get us out of the collision doing this over the course of a full movement will guide the player up a gentle slope okay this is the movement loop and here is where we move the player in the x direction the collisions are detected here so pull out the set x and set speed x blocks we'll make a new custom block to replace these naming it collide x slope or wall attach the define block to the scripts we moved out and replace them with a fresh collidex block great now we can work on pushing the player upwards basically if there is space to move a player up then we should do so therefore begin by changing y by one then check whether we're touching anything solid if touching is greater than zero then we are indeed not out of the ground yet but perhaps we might try moving up one more time duplicate the hole change y stack and put it in the if right so if again we are not out of the collision perhaps we've hit a wall let's return the player's y position back to its original value change y by negative 2. then since this is not a slope after all bring back those two blocks to push the player out of the wall as before finally stop this script but if the player has successfully moved out of the ground then we accept this new position and continue the script without backing out and up the slope we should go nice let's give it a test hit the green flag and down and then back up oh yeah look at that this is excellent news no more stubbed toes or excess jumping for us we are a lean mean hill running machine but perhaps there's something to miss here obviously there's a limit on how steep scratch cat will climb but do you notice how scratchy appears to actually move quicker as they travel up the slope but that's because our speed x is staying constant but we are adding to our total speed by also moving upwards now to combat this we need the act of climbing a hill to simply slow down our player this collide script only runs when we are going up a hill so to slow the player down set speed x to speed x multiplied by 0.95 this is the effect of making hit a speed just a little bit less each time the player is moved up by a collision running that now and wow it's surprisingly effective the slope takes the edge off scrapcats top speed but the last steeper incline that's still too fast okay so duplicate the set speed x and bring within the if above this only runs if we're moving up a steeper incline change the multiple to 0.8 this will really slow the player down a lot more and you can play with these values to get the effect you want for your game green flag oh and i think we have ruined scratchy's hill running dreams but the good news is that it's looking a lot more natural sorry about that scratch cat next we'll talk about the downhill skipping effect oh gosh this is a common problem when our player hits the ground we naturally set their speed y to zero but when running down a slope this has the effect of suddenly making us change direction and literally sends us skipping our way down the slope it's not an awful problem but we can do better we need to preserve some of the downward motion after a collision to allow a more smooth descent find the define move in step script again this time we are looking for the vertical movement that's the y direction down here just like before we'll pull out the scripts within the if set y and below into some free space and then make a new custom block naming it collide y ceiling or floor we'll use the scripts we just removed as the body of this new defined block and pop a new collide y block in their place cool we are on our way so we only want to alter the downward movement after a collision ignore upwards motion for now in that case use a new if this time checking that speed y is greater than zero rather than less than so when it's greater than zero it's moving upwards so just set speed y to zero and stop this script functionally no different from before but otherwise yes we can set falling to zero we're on the ground now but what about the speed y well we don't want to set it to zero but we do need it to reduce in that direction a quick trick is to set speed y to speed y multiplied by 0.8 again hopefully leaving them enough momentum to slide on down the slope but slowing them enough to remove any weird side effects let's give it a test so we run up the hill and then down we go oh cool this is much better once scratchy is dashing down the hill his downward momentum keeps him tightly on the slope hold on let me do a quick side by side comparison the video on the right is the updated scripts and oh boy yes the new scripts have it they are silky smooth i'm well pleased with that there comes a point though when we cannot continue to ignore our players strange ability to stand on a really really steep slope look at this hanging on by a toe it's pretty obvious that if we tried this at home we'd be sliding down this hill on our faces so what do we do now about these inclines although they may not look like it here their collision shapes are actually made up of jagged runs of pixels like this our player's hitbox is catching its toe on one of these and the cat thinks it's on a platform to get around this we need to check whether our player can move across and down by 2 pixels if there's no collision there to stop them then we'll let them slip off down the slope okay let's do this we start by making a new custom block naming it slip still within the define collide y scripts place an if block around the set falling and check whether falling is greater than zero we only want to trigger a slip call in here when we just land otherwise we'll be calling this from elsewhere you'll see in a mo so drop in our slip block great so we can change y by minus 2 to check below the player but also we change x by 1 to look to the right next we check whether we are touching solid and use and if touching is less than one this means we are not touching the ground in this direction so we want to slip the first thing we do is set falling to nine this needs some explanation it's a little trick because the falling variable is used to prevent the player from jumping while they're in the air by setting this to a number larger than 3 or so we will be preventing the player from jumping when they are slipping down a slope like this now you may think this is counterproductive because we may want to add wall jumping later but don't fear that is a completely different mechanic altogether another tweak to make is to change our speed x by one that will accelerate the player to the right a little bit as we slip down and then stop this script but what if we are not slipping we have to undo the previous move we made up here so change y by 2 this time and then change x by 1 super that's slopes that go downhill to the right sorted let's give that little beauty a test okay i don't care what you say that actually looks really cool when we land on a slope we slide right down i'll just make sure i can still stand on a less steep slope over here yeah no sliding down this that's really good really good well since that's working we should complete our scripts by adding the left hand slopes too duplicate everything from the check touching solid block we've checked down two pixels and to the right by one we just need to move left by two steps then to check for the left hand slopes and get rid of the change y block and change x by minus two instead pop these scripts back at the bottom it's all very similar except now we change our speed x by minus one to accelerate the player off to the left finally make sure to update the last change x by to be one now to bring us back to where we started now i can't test this yet on my level as i don't have any left hand slopes i better quickly pop one in there that's it and we can test i just need to jump up to the right and you can see there that there's no way i can get a footing on this now i slide right off success is ours you may notice that we see a bit of jitter when running up a slope and we've reached a point where we can't go any further do you see that okay it's not a problem find the define clyde x script and right on the bottom pop a slip block 2. this ensures we're always checking for slips whether we're colliding from falling on the ground or from running across it testing again running up the slope now and that's considerably better good job now if you are sticking to using a square player costume like guy then i suggest you might be able to skip the rest of the episode or just make use of the parts that you want however for players who stand up straight this is going to be cool it's time to take a second look at advanced hitboxes standing just here i gotta say it's perhaps a little odd that we still appear to be balanced perfectly on one toe it would be so much better if the center of our sprite costume could sit on the ground rather than the edge of our hitbox this is especially an issue when we stand on the edge of a step like this we prefer him to slip off at this point really luckily due to our recent changes to slip the player down slopes we can now do something quite awesome in the world of hitboxes click into the player's costumes and find the hitbox costume 20. this was perfectly rectangular to avoid any snagging on the edges of platforms but now with the slip block we are a little more free to experiment with shape so click into the next costume hitbox version 2. so what you will notice is that the bottom of the hitbox is a sharp point this is placed on the floor between scratch's feet when on a slope it means that the hitbox will no longer balance on a corner the next interesting thing is that the top of the hitbox is much wider than before this allows us to accommodate the scratch cat's large head preventing it overlapping the ground quite so much but how come we can use this shape now when previously we said we needed a perfect rectangle well the answer is that the slip feature we just added will automatically cause our player to slip off steep edges and that includes the steep edges of our hitbox let's just give that a try find that when i receive tick first script now switch the hitbox to hitbox 2. don't forget we also need to do the same in the define begin scene script here so hit the green flag and let's see right off we find our feet are planted centrally on the curve of the ground rather than above it that's good and now off we go to the right we'll find that we can no longer squish right up against the wall like we used to another boon so how about the edge of steps oh yes this is excellent our player now slips off the very edge and is pushed away from the wall by our new conical hitbox wonderful so just test now that the slopes are still behaving themselves as before yes indeed cool so now the player is more closely hugging the ground but our feet they are still looking a little odd one hanging in the air and the other clipping into the ground it would make sense for the feet to be level with the slope we are standing on what can we do about this well we could switch the player rotation style to all directions and try to match the player's direction to the floor but while this might look great for vehicles small cube players or even blue hedgehogs it's just not suitable for slower moving bipeds like scratch cat instead we want to keep the player upright and adjust their legs and feet to accommodate the change of the slope this does require drawing extra costumes for the possible slopes we might stand on but luckily for you if you've taken a peek in the costumes i provided you will find costumes 28 to 32 very interesting here if i click on costume29 you can see scratchcat is far better posed for the slope now not perfect but when they are small again very acceptable equally i can move them over here we can check the standing costumes again and perhaps this one okay there this one works well to draw these costumes i simply started with the default standing pose and then draw a line passing through the middle point between their feet the rear foot then needs to be drawn a little bit higher up and the back foot lower down you may find you need to reposition the player's body too to avoid the front leg stretching too long now as a quick note if you're trying to angle a player sprite like guy you may indeed want to use rotation to put them at a suitable angle with a slope but it's a lot more tricky to get right with this technique so how many poses will we need to draw well it's up to you but i find even just five standing poses is quite adequate what's more we don't even need to redraw any costumes for the running poses as when they're moving around the issue of where their feet are positioned is much less obvious so we have these five poses the next problem is working out how to get scratched to pick the right one for the right situation you'll need some way in code of examining the ground at their feet the simplest way to achieve this would be as follows we draw a specialized hit box for each standing pose shaping them to match the position of just the player's feet then to find which standing pose to use we switch through each of the hitboxes to find the one that does not collide with the level the first pose is the flat ground pose oh it's the same color as the level hold on i'll change that so now you can see the hitbox is touching the ground from that we can deduce that the start ground pose will not work we try the next hitbox nope this is also touching the ground hitbox 3 then this one does not touch the ground the third hitbox is the winner now since we are very forward thinking we set up our standing costumes in the same order as the angled hitboxes this way the third hitbox means we switch to the third standing costume click and there you go we found our pose excellent this works just as well on any slope in our game i think it's time to get scratching find with me the define set costume since all we are doing is leveling off the cat's feet this is the best place to do the job scroll down to the bottom to where we are setting the costume to stand we'll start by setting the costume to the first of the five hit angle costumes it's called hit angle zero then we loop through them with a repeat for a count of five so firstly is our hit angle sprite colliding with the level check touching solid and then if touching is less than one the hit angle costume is not touching the level so great we found the angle of the ground we now want to switch to the matching scratch cat costume we need to move 5 costumes forward so use an addition block starting with the current costume number and then add five super so then we can stop this script we would be done but if the hit angle costume did not touch the level then we should move on to the next hit angle costume before this repeat block loops around and off the scripts go again then finally if none of the hit angle costumes worked then we just switch costumes back to the original standing costume for good measure shall we give that a try wow i forgot how big i'd made this guy but at least he's got his feet in the right place let me just shrink him down a touch back to 40. great now notice how as i turn left and right his feet remain rooted on the slope and i can move to the less angled ground oh yes i'm loving this very much it even looks quite cool when one leg is dangling off the edge of a step you may find you need to tweak your angled hitboxes until you get the best slope detection but these costumes are working really well here wow this episode is drawing to a close but we are in an awesome place now ready to look at adding seriously cool wall jumping and sliding i'm so excited for that along with moving platforms another favorite of mine i do hope you've enjoyed watching today please smash the like button and don't forget to subscribe to my channel to catch the latest videos if you are a loyal fan or an educator then please can i encourage you to support the channel further by joining the channel membership i do what i can to make you the best videos possible and the extra support is really appreciated thank you so much and thank you for watching hope you have a great week ahead and scratch on guys
