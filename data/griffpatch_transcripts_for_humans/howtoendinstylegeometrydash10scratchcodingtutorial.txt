With timestamps:

00:00 - [Music]
00:01 - hello fellow
00:03 - scratchers the end is
00:06 - no no not the end of the Geometry Dash
00:09 - series but the end portal of our
00:11 - Geometry Dash levels and this is a key
00:14 - moment where the player gets to
00:16 - celebrate their victory in style so we
00:18 - need to make this look amazing just look
00:21 - at those awesome particle effects we are
00:24 - going to have a lot of fun creating this
00:26 - one firstly we'll need to Define where
00:29 - are levels end a simple update to the
00:32 - level with a color trigger should do the
00:33 - trick then comes our delightfully
00:36 - apocalyptic particle system followed
00:38 - quickly by the players's end of game
00:41 - animation sequence sending them tumbling
00:43 - through the air and into the center of
00:45 - that most sucky of portals no mean feet
00:49 - so all that come and more are you
00:52 - excited yes me too so open up your
00:55 - projects from where we left off in
00:57 - episode 9 and we'll take a moment to
01:00 - save them as a new copy for this this is
01:02 - episode 10 guys let's get scratching
01:07 - we'll Begin by defining the end of our
01:09 - levels so click into the level Sprite
01:12 - and open the costume editor I'm going to
01:15 - go and copy a run of tiles that I can
01:18 - reuse to create a vertical wall and then
01:21 - to make testing easy I'll duplicate the
01:24 - very first costume and create my end
01:27 - portal right here at the start let's
01:29 - name it end one okay so paste in those
01:33 - tiles and build your end wall use shift
01:37 - to keep things aligned and it wants to
01:39 - be as tall as you can possibly make it
01:42 - then smash that green flag and we can
01:44 - check it all looks
01:46 - good smashing literally to give it a bit
01:50 - of a glow I'm going to draw a rectangle
01:52 - on its left Edge and then switch it to a
01:55 - gradient fill from transparent on the
01:57 - left to Canan blue
02:01 - that looks really nice all we need to do
02:03 - now is put a stop to the level scrolling
02:06 - the moment this end wall appears in view
02:09 - to trigger this we'll use a new unique
02:12 - color so just change the Hue away from
02:14 - San just aad and then we'll draw an 8
02:18 - pixel wide line down the left edge of
02:20 - the wall holding shift like so perfect
02:25 - if you are having trouble drawing this
02:26 - then I'll make sure to add it to my
02:28 - asset project linked under the video
02:31 - here it is under the level asset
02:33 - Sprite now to detect the bar of color
02:36 - entering the
02:37 - screen make the level Sprite visible on
02:40 - the stage so that we can see the end
02:42 - portal and then create a new Sprite
02:46 - we'll name it end detector no prizes at
02:50 - guessing what this is for and I'm going
02:52 - to draw a bright red square starting two
02:55 - grid squares above Center and dragging
02:58 - it out to the left to be four by four
03:00 - grid squares in size that's 16
03:02 - pixels so we want to detect the portal
03:05 - once it Scrolls a little way into view
03:08 - so move the detector Sprite on the stage
03:10 - to just around here right to the code
03:14 - when green flag
03:16 - clicked go to XY and I'll round these
03:20 - values off to 220 by
03:24 - zero and the game begins when I receive
03:27 - game
03:28 - on we'll first wait for 1 second this is
03:32 - to allow the game to start and to ensure
03:33 - we don't accidentally trigger the end of
03:35 - level at startup and now we wait until
03:38 - our detector is touching color and then
03:42 - very carefully use the Color Picker to
03:45 - select the bright bar of color next to
03:48 - our
03:49 - portal then when that happens what do we
03:52 - do we stop the level scrolling any
03:54 - further by setting scroll speed to zero
03:58 - great let's give that a test and here
04:00 - comes the
04:01 - portal oh wait
04:04 - what that was a complete failure wasn't
04:07 - it did I not pick the correct color
04:10 - oh the weight let's try 0.1 seconds
04:15 - instead I bet this will
04:16 - [Music]
04:18 - work yes oh my gosh that had me going
04:21 - for a
04:24 - moment next up we're going to add in
04:26 - those beautiful particle effects for
04:30 - tast and a new message level
04:34 - complete now for the particles to appear
04:36 - in all their Glory we'll want to scroll
04:39 - the screen up a little bit to give us
04:41 - some more space to work
04:43 - with when I receive level
04:47 - complete Loop forever and we'll check if
04:51 - the floor is on screen if camera Y is
04:56 - less
04:57 - than floor shimmy then yes the floor is
05:01 - still on screen so we want to smooth
05:04 - scroll it downwards change camera y by
05:09 - and we'll use a round
05:10 - block and then we multiply by 0.1 for
05:14 - that smooth scroll effect and we want
05:18 - the difference so use a subtract between
05:21 - floor shimmy and the current camera
05:24 - y let's see that in action shall
05:28 - we and
05:31 - again nice the level snappily Scrolls
05:35 - down to reveal more portal which means
05:38 - it's time to create something awesome
05:41 - the end portal particles if we look at
05:44 - the official Geometry Dash the way these
05:47 - appear to work is that they spawn in a
05:49 - semicircle around the center of the end
05:51 - portal and various sizes and speeds they
05:54 - get sucked directly into its core
05:57 - shrinking as they do well then particles
06:01 - we already have two Sprites for these
06:03 - particles and particles too do we need
06:05 - more tell you what let's rename
06:07 - particles 2 as explode particles so we
06:11 - remember what it was for and now yes we
06:14 - will create a brand new Sprite naming it
06:17 - end particles I'm keeping all these
06:20 - separate just to avoid making the code
06:22 - more complex what we will need is to
06:25 - copy the particle costume from the
06:27 - explode particles into our new end
06:30 - particle
06:31 - Sprite nice we are ready to code this up
06:35 - first let's initialize things when green
06:37 - flag clicked
06:40 - hide only when we receive a level
06:42 - complete do we want to start spawning
06:45 - particles and lots of them repeat 10 to
06:48 - gradually bring them in and then create
06:51 - clone of myself but not just one six
06:55 - create clones all at once doing this 10
06:58 - times over will give us six particle
07:00 - clones in this end of level effect nice
07:03 - now we want to position the new clones
07:05 - in a semicircle around the center of the
07:06 - end portal which happens to be where we
07:09 - placed this end detector Sprite when I
07:13 - start as a clone
07:16 - show and go to the end detector now we
07:21 - spread these particles out in a
07:22 - semicircle point in
07:25 - Direction pick
07:27 - random from 0o point 0 to
07:32 - 180 and then move by -200 steps yes that
07:37 - is backwards because we are backing them
07:39 - up ready to fly forwards back into the
07:42 - portal to test this Theory click the
07:45 - when I receive level complete script and
07:47 - watch all 60 clones form a beautiful
07:50 - semicircle very cool I do note that
07:54 - these particles are displaying rotated
07:56 - and we don't want that so click on the
07:58 - direction input and switch to don't
08:00 - rotate tap the stop button to reset the
08:03 - clones and then click the level
08:05 - completed script again excellent they
08:08 - are all uniform however we don't want
08:11 - them to appear in a perfect line like
08:13 - this so distribute them out by moving by
08:15 - a pick random between -30 and
08:21 - -200 great that did the job finally then
08:25 - let's mix up their sizes to set size two
08:29 - pick random between 75 and
08:34 - 110 now let's get things
08:37 - animating each particle wants to travel
08:40 - at its own speed so make a new variable
08:43 - named speed ensuring it's for this
08:46 - Sprite only then we set speed to a
08:51 - random number between
08:53 - 40 and 14 feel free to play around with
08:57 - all these numbers to see what effect
08:59 - they have on your animation after we get
09:01 - it working now we animate within a
09:03 - repeat until Loop repeating until the
09:07 - distance from this particle to the end
09:11 - detector is less than speed that means
09:15 - if we move forward by speed anymore we
09:17 - would go past the
09:19 - end then we move forward by
09:23 - speed making sure you stopped the
09:25 - project first click on the level
09:27 - completed script and what those
09:29 - particles fly to the end detector that
09:32 - is really good and every time we click
09:34 - it more particles are
09:36 - cloned but after a few clicks we exceed
09:40 - that 300 clone limit and no more
09:42 - particles get generated sad for now
09:46 - click the stop button to reset the
09:48 - clones and then we can test them again
09:51 - okay these particles are too big we can
09:53 - shrink them down over time by dropping
09:56 - in a change size by negative three
10:00 - inside the
10:01 - loop that's
10:03 - better okay we need these particles to
10:06 - not stop and to keep running the most
10:09 - efficient way to do this is just to
10:11 - recycle them in a loop over and over
10:13 - again so bring in a forever block and we
10:16 - want all the scripts from the set size
10:19 - block onwards separate those off but
10:22 - before we continue duplicate the goto
10:25 - pointing Direction and move blocks from
10:27 - up here and drop them onto the the end
10:30 - of the repeat until block down here this
10:32 - will reset each particle then drop the
10:35 - entire script into the forever Loop and
10:37 - join it all
10:39 - together so why did we add a duplicate
10:41 - of these initializing scripts down here
10:44 - simply because we wanted the new clones
10:46 - to appear further away than the initial
10:49 - ones that we created at top so replace
10:51 - the -30 with
10:54 - A180
10:56 - instead okay here goes nothing click the
10:59 - level complete script
11:01 - again and behold that is one cool effect
11:05 - don't you think is there anything we
11:06 - could improve well I'd quite like the
11:09 - particles to be shrinking even smaller I
11:12 - think we're currently hitting the limit
11:13 - of how small scratch will allow our
11:15 - particles to go but that's easy to fix
11:17 - we just need to draw a larger rectangle
11:20 - around the particle and then make that
11:23 - transparent now the costume is reported
11:25 - as being over 60 pixels wide so it
11:27 - should be allowed to shrink down
11:29 - more and yes it does perfect that is the
11:33 - effect we were after we've got to see
11:35 - this in game but first click into the
11:38 - end detector and drop a hide block under
11:41 - the green flag
11:42 - script guys are you ready for this smash
11:45 - the green flag and we'll see this all
11:47 - put
11:48 - together oh yeah this is looking perfect
11:52 - don't you think it's really got that
11:53 - Geometry Dash Vibe I'm just so looking
11:56 - forward to getting the player to hurtle
11:58 - into it too
12:00 - but we've got some work to do to make
12:01 - this happen in our player Sprite scroll
12:04 - down to the game on scripts you see we
12:07 - have a concept of the level scrolling
12:10 - speed but to allow the player to move
12:12 - when the level doesn't we'll need a new
12:15 - variable speed X for this Sprite only
12:19 - this is the Players movement speed so
12:22 - before setting scroll speed drop in a
12:25 - set speed X and we'll set it to 10 now
12:30 - the scroll speed can be adjusted to be
12:32 - the opposite of our player speed so
12:35 - subtract speed X that will still be -10
12:38 - in this
12:40 - case next in the forever Loop below
12:43 - before we change y We'll add a change
12:47 - X2 and we add together the new speed
12:51 - X and the scroll speed you see under
12:55 - normal operation these cancel each other
12:57 - out moving 10 to the right and scrolling
13:00 - back 10 to the left but when the
13:02 - scrolling stops the player should now
13:04 - shoot off to the right just like that
13:08 - excellent oh well apart from that
13:10 - annoying death Loop but we'll fix that
13:14 - later but let's not get too carried away
13:17 - we haven't yet checked our ship mode
13:19 - I'll need to move the end portal back a
13:21 - bit in the level now watch what happens
13:24 - when the level stops scrolling our ship
13:27 - suddenly points upwards that's because
13:29 - of how we are calculating its Direction
13:32 - let me show you find the ship movement
13:34 - custom
13:38 - block and down at the bottom this
13:41 - pointing Direction script we are using
13:44 - scroll speed in the calculation but now
13:47 - this needs to work off our speed X for
13:50 - when the scrolling stops but we'll need
13:53 - to negate it with a subtract to match
13:55 - the scroll
13:56 - speed testing that again
14:02 - and that fixed it great I must just
14:05 - point out that we could simplify this
14:07 - math a teeny bit now if we want it by
14:09 - removing the subtract from the
14:11 - right and switching the left ad to be a
14:14 - subtract instead 90 subtract the eight
14:18 - and blah blah blah there we go a lot
14:22 - neater and it works just as well now
14:26 - let's study the player motion
14:29 - the next thing to occur is the Players
14:31 - slows down before launching up and being
14:33 - Hur into the portal so scroll down into
14:37 - some free space and we'll trigger this
14:40 - off of a when I receive level complete
14:44 - hat block a small delay of five
14:46 - animation frames using an empty repeat
14:50 - five and then another repeat five this
14:53 - time slowing down the player so change
14:56 - speed X by negative two doing that five
15:00 - times will bring the player speed right
15:02 - down to zero a full
15:04 - stop also we want to gradually bring the
15:07 - vertical movement to a halt to set speed
15:10 - y to itself speed y multiplied by 0.5
15:16 - halfing its value each
15:18 - frame finally stop other scripts in this
15:22 - Sprite to Halt the main game Loop and
15:25 - then oh hold on we've coded this before
15:28 - just above this makes sure the player is
15:30 - not appearing as a hitbox set rotation
15:33 - style to all around and switch costume
15:36 - to mode and I think we should give that
15:39 - a quick test to see how we are
15:41 - doing oh cool I am liking this we slide
15:45 - to a stop and you'll see that once the
15:47 - main game Loop ends our level is free to
15:50 - fully scroll up to reveal the full
15:52 - portal which is great
15:55 - news let's continue this animation over
15:58 - the the next five frames repeat
16:01 - five change speed y by two to accelerate
16:04 - the player
16:06 - upwards and turn clockwise by speed y
16:11 - I'll use that because it will make a
16:13 - spin faster as we move upwards talking
16:16 - of which change y by speed y to do just
16:21 - that finally add some particles with a
16:24 - create clone of
16:26 - particles this is just just the start to
16:29 - get the player spinning now we add the
16:31 - scripts to bring it all home repeat
16:35 - until the player's X
16:38 - position is greater
16:42 - than 200 that is the right of the screen
16:46 - and we can duplicate the scripts above
16:48 - from the turn block
16:50 - onwards but don't turn by speed y now
16:53 - instead we'll just turn by 10° each time
16:57 - also as well as as changing y we now
16:59 - need to change X too by our speed X
17:05 - variable to make them accelerate towards
17:07 - the portal change the variable speed X
17:11 - by
17:14 - 0.75 and change speed y by now this
17:18 - wants to direct us towards a y position
17:21 - of zero so we can use a negative
17:24 - fraction of the Y position divide y
17:27 - position
17:30 - by
17:31 - 70 we also need to dampen this motion to
17:35 - avoid overshoot so set speed y to itself
17:39 - speed y multiplied by
17:43 - 0.9 want to see how that is looking yes
17:47 - me too here it comes oh wow what a
17:52 - delight will curve that is exactly what
17:55 - I wanted a quick launch upwards and then
17:57 - spinning we are pulled back into the
18:01 - portal the last special effect we can
18:04 - easily add in is the large circular
18:06 - explosion it's very similar to our
18:09 - smaller death explosion after all we'll
18:11 - trigger it using a broadcast for the new
18:15 - message win
18:18 - explosion and at the same time we'll set
18:21 - our players ghost effect to 100 to hide
18:23 - them
18:25 - away now click into the explosion
18:28 - Sprite you can click this script to see
18:31 - the small explosion animation play on
18:33 - the stage its size is defined by this
18:36 - 170 value over here let's make this
18:39 - configurable and make a new custom block
18:42 - to house it in name it boom size with an
18:46 - input named size leave the run without
18:50 - screen refresh clear as this wants to
18:51 - play back as a full animation okay and
18:55 - then make use of the block right away
18:57 - within the game over a script the size
19:00 - wants to be set to the same 170 value
19:03 - used in the old script and that frees us
19:05 - up now to replace the 170 with this size
19:09 - input perfect it works just as before so
19:14 - now duplicate the game over receiver and
19:17 - change it to a win explode then increase
19:21 - the size to
19:22 - 600 yeah super big I hope that works oh
19:27 - yeah let's see that
19:29 - [Music]
19:31 - again so what about this music ending so
19:37 - abruptly had you noticed well when you
19:40 - finish a level often the music track
19:42 - will be coming to an end anyhow but
19:45 - let's neaten this up look at the first
19:48 - game on script in the player Sprite this
19:51 - is sadly being stopped by any use of the
19:54 - stoer the scripts in Sprite so we're
19:56 - going to have to move the music out of
19:58 - the player Sprite into a new Sprite of
20:01 - its own named music and then copy the
20:05 - stereom madness soundtrack from the
20:07 - player Sprite into the new music Sprite
20:11 - I'll delete the one in the player Sprite
20:13 - now to avoid
20:14 - confusion next up we can copy the game
20:17 - on sound playing script into the music
20:19 - Sprite
20:20 - too and again delete the script from the
20:23 - player
20:25 - Sprite now click into the music Sprite
20:28 - yeah that's looking good all we need to
20:31 - do is make sure this music is still
20:33 - stopped when the player dies when I
20:36 - receive game
20:38 - over stop other scripts in this Sprite
20:42 - easy testing that we can now confirm
20:45 - that the music continues when we hit the
20:47 - end of the
20:48 - level check and if we smash into a spike
20:52 - then the music instantly stops check and
20:56 - restarts when the level starts starts
20:58 - over check all is good so finally when
21:02 - the level really does end let's fade the
21:05 - music gradually out to nothing when I
21:08 - receive level
21:12 - complete we can wait for 1 second before
21:15 - repeating over the next 20
21:19 - frames changing the volume gradually by
21:23 - -5 20 * 5 is 100 of course if we do this
21:28 - we must be careful to restore the sound
21:31 - when the music begins again so set
21:33 - volume to 100 before we begin our main
21:36 - music
21:37 - Loop hey talking of Music Loops we might
21:40 - as well terminate this music Loop once
21:42 - the music has faded out with a stop
21:44 - other scripts in
21:46 - Sprite let's give that a
21:52 - go that's good the music is brought to a
21:55 - tidy end of course you may well try to
21:58 - synchronize your music length to the
22:00 - length of your level in which case you
22:03 - might want to remove the forever loop
22:05 - from your music track all together but
22:07 - that is completely up to you the only
22:10 - thing remaining in this episode is for
22:12 - us to try to get the game to boot back
22:14 - to the main menu once we've beaten a
22:16 - level we'll instigate this from within
22:19 - the end detector Sprite but you may want
22:22 - to do this elsewhere it's completely up
22:24 - to you we wait for I don't know say 8
22:28 - seconds that could be too long we'll see
22:30 - and then we stop other scripts in the
22:32 - Sprite specifically the script that
22:35 - Scrolls us
22:36 - upwards and then broadcast to restart
22:39 - the main menu a new message main
22:43 - menu okay let's go around our Sprites
22:46 - making sure they behave correctly now
22:48 - the menu Sprite first we need to replace
22:52 - these green flag receivers with main
22:54 - menu receivers
22:56 - instead both of
23:00 - them the player right next this green
23:03 - flag also needs replacing when I receive
23:05 - main
23:08 - menu the level Sprite that doesn't have
23:11 - any green flag scripts but it does need
23:13 - to reset when I receive main
23:17 - menu hide and then delete any
23:22 - clones lastly the end particles
23:26 - similarly when I receive main
23:30 - menu delete this clone is that it let's
23:35 - check uh nope our main menu has
23:39 - disappeared all
23:41 - together ah I know back into the menu
23:45 - Sprite we never kicked off the main menu
23:48 - scripts when green flag clicked
23:51 - broadcast main menu of
23:55 - course and that looks best better but
23:58 - let's check out the level
24:00 - restart normal death is
24:03 - okay and now wait for
24:07 - it yeah I knew 8 seconds might seem too
24:10 - long one eternity
24:14 - later um what's this gosh I'm not doing
24:19 - so well am I H looks like I forgot to
24:22 - reset the player Sprite fully and the
24:25 - level scrolling too I know what it is in
24:27 - our player Sprite scroll down to just
24:30 - before the main game Loop we need to
24:33 - duplicate the set speed X and set scroll
24:36 - speed blocks here and we'll set them in
24:38 - the main menu script to get level
24:41 - scrolling once
24:43 - more then to bring the level back into
24:46 - view we need to also set camera
24:49 - y back to
24:51 - zero lastly to reveal the ghosted out
24:54 - player drop in a clear graphic effects
24:57 - block two
24:58 - too is that it are we done smash the
25:02 - green flag and we'll take a
25:04 - look I'm flying through the level to the
25:07 - end now and
25:12 - waiting yes it was worth the wait it's
25:15 - all beautifully restored once more man
25:20 - that was a ride but we finally did it we
25:23 - can stuff that end of level costume
25:25 - wherever we need it in the level and the
25:27 - game will play out perfectly all it
25:30 - needs now is a splash screen to
25:31 - congratulate the player on beating the
25:33 - level but I leave that as an exercise
25:36 - for you if you'd like to keep that a go
25:37 - yourselves either way I'm dead excited
25:40 - to see how your projects are getting
25:41 - along so do submit them to the scratch
25:44 - Studio linked under this video so what
25:47 - is next for this tutorial series I would
25:49 - expect we can now turn our hand to
25:51 - exploring more of the exciting game
25:53 - elements like jump pads and orbs other
25:56 - player modes I can't wait for for those
25:58 - and also how to add more than one level
26:01 - now that would be awesome right if you
26:04 - agree then please smash that like button
26:06 - and don't forget to subscribe to this
26:07 - channel checking the Bell icon so it's
26:10 - not to miss the next exciting episode
26:12 - the moment it drops but until next time
26:15 - thank you for watching have a great week
26:18 - ahead and scratch on
26:20 - [Music]
26:26 - guys
26:32 - [Music]
26:42 - oh

Cleaned transcript:

hello fellow scratchers the end is no no not the end of the Geometry Dash series but the end portal of our Geometry Dash levels and this is a key moment where the player gets to celebrate their victory in style so we need to make this look amazing just look at those awesome particle effects we are going to have a lot of fun creating this one firstly we'll need to Define where are levels end a simple update to the level with a color trigger should do the trick then comes our delightfully apocalyptic particle system followed quickly by the players's end of game animation sequence sending them tumbling through the air and into the center of that most sucky of portals no mean feet so all that come and more are you excited yes me too so open up your projects from where we left off in episode 9 and we'll take a moment to save them as a new copy for this this is episode 10 guys let's get scratching we'll Begin by defining the end of our levels so click into the level Sprite and open the costume editor I'm going to go and copy a run of tiles that I can reuse to create a vertical wall and then to make testing easy I'll duplicate the very first costume and create my end portal right here at the start let's name it end one okay so paste in those tiles and build your end wall use shift to keep things aligned and it wants to be as tall as you can possibly make it then smash that green flag and we can check it all looks good smashing literally to give it a bit of a glow I'm going to draw a rectangle on its left Edge and then switch it to a gradient fill from transparent on the left to Canan blue that looks really nice all we need to do now is put a stop to the level scrolling the moment this end wall appears in view to trigger this we'll use a new unique color so just change the Hue away from San just aad and then we'll draw an 8 pixel wide line down the left edge of the wall holding shift like so perfect if you are having trouble drawing this then I'll make sure to add it to my asset project linked under the video here it is under the level asset Sprite now to detect the bar of color entering the screen make the level Sprite visible on the stage so that we can see the end portal and then create a new Sprite we'll name it end detector no prizes at guessing what this is for and I'm going to draw a bright red square starting two grid squares above Center and dragging it out to the left to be four by four grid squares in size that's 16 pixels so we want to detect the portal once it Scrolls a little way into view so move the detector Sprite on the stage to just around here right to the code when green flag clicked go to XY and I'll round these values off to 220 by zero and the game begins when I receive game on we'll first wait for 1 second this is to allow the game to start and to ensure we don't accidentally trigger the end of level at startup and now we wait until our detector is touching color and then very carefully use the Color Picker to select the bright bar of color next to our portal then when that happens what do we do we stop the level scrolling any further by setting scroll speed to zero great let's give that a test and here comes the portal oh wait what that was a complete failure wasn't it did I not pick the correct color oh the weight let's try 0.1 seconds instead I bet this will work yes oh my gosh that had me going for a moment next up we're going to add in those beautiful particle effects for tast and a new message level complete now for the particles to appear in all their Glory we'll want to scroll the screen up a little bit to give us some more space to work with when I receive level complete Loop forever and we'll check if the floor is on screen if camera Y is less than floor shimmy then yes the floor is still on screen so we want to smooth scroll it downwards change camera y by and we'll use a round block and then we multiply by 0.1 for that smooth scroll effect and we want the difference so use a subtract between floor shimmy and the current camera y let's see that in action shall we and again nice the level snappily Scrolls down to reveal more portal which means it's time to create something awesome the end portal particles if we look at the official Geometry Dash the way these appear to work is that they spawn in a semicircle around the center of the end portal and various sizes and speeds they get sucked directly into its core shrinking as they do well then particles we already have two Sprites for these particles and particles too do we need more tell you what let's rename particles 2 as explode particles so we remember what it was for and now yes we will create a brand new Sprite naming it end particles I'm keeping all these separate just to avoid making the code more complex what we will need is to copy the particle costume from the explode particles into our new end particle Sprite nice we are ready to code this up first let's initialize things when green flag clicked hide only when we receive a level complete do we want to start spawning particles and lots of them repeat 10 to gradually bring them in and then create clone of myself but not just one six create clones all at once doing this 10 times over will give us six particle clones in this end of level effect nice now we want to position the new clones in a semicircle around the center of the end portal which happens to be where we placed this end detector Sprite when I start as a clone show and go to the end detector now we spread these particles out in a semicircle point in Direction pick random from 0o point 0 to 180 and then move by 200 steps yes that is backwards because we are backing them up ready to fly forwards back into the portal to test this Theory click the when I receive level complete script and watch all 60 clones form a beautiful semicircle very cool I do note that these particles are displaying rotated and we don't want that so click on the direction input and switch to don't rotate tap the stop button to reset the clones and then click the level completed script again excellent they are all uniform however we don't want them to appear in a perfect line like this so distribute them out by moving by a pick random between 30 and 200 great that did the job finally then let's mix up their sizes to set size two pick random between 75 and 110 now let's get things animating each particle wants to travel at its own speed so make a new variable named speed ensuring it's for this Sprite only then we set speed to a random number between 40 and 14 feel free to play around with all these numbers to see what effect they have on your animation after we get it working now we animate within a repeat until Loop repeating until the distance from this particle to the end detector is less than speed that means if we move forward by speed anymore we would go past the end then we move forward by speed making sure you stopped the project first click on the level completed script and what those particles fly to the end detector that is really good and every time we click it more particles are cloned but after a few clicks we exceed that 300 clone limit and no more particles get generated sad for now click the stop button to reset the clones and then we can test them again okay these particles are too big we can shrink them down over time by dropping in a change size by negative three inside the loop that's better okay we need these particles to not stop and to keep running the most efficient way to do this is just to recycle them in a loop over and over again so bring in a forever block and we want all the scripts from the set size block onwards separate those off but before we continue duplicate the goto pointing Direction and move blocks from up here and drop them onto the the end of the repeat until block down here this will reset each particle then drop the entire script into the forever Loop and join it all together so why did we add a duplicate of these initializing scripts down here simply because we wanted the new clones to appear further away than the initial ones that we created at top so replace the 30 with A180 instead okay here goes nothing click the level complete script again and behold that is one cool effect don't you think is there anything we could improve well I'd quite like the particles to be shrinking even smaller I think we're currently hitting the limit of how small scratch will allow our particles to go but that's easy to fix we just need to draw a larger rectangle around the particle and then make that transparent now the costume is reported as being over 60 pixels wide so it should be allowed to shrink down more and yes it does perfect that is the effect we were after we've got to see this in game but first click into the end detector and drop a hide block under the green flag script guys are you ready for this smash the green flag and we'll see this all put together oh yeah this is looking perfect don't you think it's really got that Geometry Dash Vibe I'm just so looking forward to getting the player to hurtle into it too but we've got some work to do to make this happen in our player Sprite scroll down to the game on scripts you see we have a concept of the level scrolling speed but to allow the player to move when the level doesn't we'll need a new variable speed X for this Sprite only this is the Players movement speed so before setting scroll speed drop in a set speed X and we'll set it to 10 now the scroll speed can be adjusted to be the opposite of our player speed so subtract speed X that will still be 10 in this case next in the forever Loop below before we change y We'll add a change X2 and we add together the new speed X and the scroll speed you see under normal operation these cancel each other out moving 10 to the right and scrolling back 10 to the left but when the scrolling stops the player should now shoot off to the right just like that excellent oh well apart from that annoying death Loop but we'll fix that later but let's not get too carried away we haven't yet checked our ship mode I'll need to move the end portal back a bit in the level now watch what happens when the level stops scrolling our ship suddenly points upwards that's because of how we are calculating its Direction let me show you find the ship movement custom block and down at the bottom this pointing Direction script we are using scroll speed in the calculation but now this needs to work off our speed X for when the scrolling stops but we'll need to negate it with a subtract to match the scroll speed testing that again and that fixed it great I must just point out that we could simplify this math a teeny bit now if we want it by removing the subtract from the right and switching the left ad to be a subtract instead 90 subtract the eight and blah blah blah there we go a lot neater and it works just as well now let's study the player motion the next thing to occur is the Players slows down before launching up and being Hur into the portal so scroll down into some free space and we'll trigger this off of a when I receive level complete hat block a small delay of five animation frames using an empty repeat five and then another repeat five this time slowing down the player so change speed X by negative two doing that five times will bring the player speed right down to zero a full stop also we want to gradually bring the vertical movement to a halt to set speed y to itself speed y multiplied by 0.5 halfing its value each frame finally stop other scripts in this Sprite to Halt the main game Loop and then oh hold on we've coded this before just above this makes sure the player is not appearing as a hitbox set rotation style to all around and switch costume to mode and I think we should give that a quick test to see how we are doing oh cool I am liking this we slide to a stop and you'll see that once the main game Loop ends our level is free to fully scroll up to reveal the full portal which is great news let's continue this animation over the the next five frames repeat five change speed y by two to accelerate the player upwards and turn clockwise by speed y I'll use that because it will make a spin faster as we move upwards talking of which change y by speed y to do just that finally add some particles with a create clone of particles this is just just the start to get the player spinning now we add the scripts to bring it all home repeat until the player's X position is greater than 200 that is the right of the screen and we can duplicate the scripts above from the turn block onwards but don't turn by speed y now instead we'll just turn by 10° each time also as well as as changing y we now need to change X too by our speed X variable to make them accelerate towards the portal change the variable speed X by 0.75 and change speed y by now this wants to direct us towards a y position of zero so we can use a negative fraction of the Y position divide y position by 70 we also need to dampen this motion to avoid overshoot so set speed y to itself speed y multiplied by 0.9 want to see how that is looking yes me too here it comes oh wow what a delight will curve that is exactly what I wanted a quick launch upwards and then spinning we are pulled back into the portal the last special effect we can easily add in is the large circular explosion it's very similar to our smaller death explosion after all we'll trigger it using a broadcast for the new message win explosion and at the same time we'll set our players ghost effect to 100 to hide them away now click into the explosion Sprite you can click this script to see the small explosion animation play on the stage its size is defined by this 170 value over here let's make this configurable and make a new custom block to house it in name it boom size with an input named size leave the run without screen refresh clear as this wants to play back as a full animation okay and then make use of the block right away within the game over a script the size wants to be set to the same 170 value used in the old script and that frees us up now to replace the 170 with this size input perfect it works just as before so now duplicate the game over receiver and change it to a win explode then increase the size to 600 yeah super big I hope that works oh yeah let's see that again so what about this music ending so abruptly had you noticed well when you finish a level often the music track will be coming to an end anyhow but let's neaten this up look at the first game on script in the player Sprite this is sadly being stopped by any use of the stoer the scripts in Sprite so we're going to have to move the music out of the player Sprite into a new Sprite of its own named music and then copy the stereom madness soundtrack from the player Sprite into the new music Sprite I'll delete the one in the player Sprite now to avoid confusion next up we can copy the game on sound playing script into the music Sprite too and again delete the script from the player Sprite now click into the music Sprite yeah that's looking good all we need to do is make sure this music is still stopped when the player dies when I receive game over stop other scripts in this Sprite easy testing that we can now confirm that the music continues when we hit the end of the level check and if we smash into a spike then the music instantly stops check and restarts when the level starts starts over check all is good so finally when the level really does end let's fade the music gradually out to nothing when I receive level complete we can wait for 1 second before repeating over the next 20 frames changing the volume gradually by 5 20 * 5 is 100 of course if we do this we must be careful to restore the sound when the music begins again so set volume to 100 before we begin our main music Loop hey talking of Music Loops we might as well terminate this music Loop once the music has faded out with a stop other scripts in Sprite let's give that a go that's good the music is brought to a tidy end of course you may well try to synchronize your music length to the length of your level in which case you might want to remove the forever loop from your music track all together but that is completely up to you the only thing remaining in this episode is for us to try to get the game to boot back to the main menu once we've beaten a level we'll instigate this from within the end detector Sprite but you may want to do this elsewhere it's completely up to you we wait for I don't know say 8 seconds that could be too long we'll see and then we stop other scripts in the Sprite specifically the script that Scrolls us upwards and then broadcast to restart the main menu a new message main menu okay let's go around our Sprites making sure they behave correctly now the menu Sprite first we need to replace these green flag receivers with main menu receivers instead both of them the player right next this green flag also needs replacing when I receive main menu the level Sprite that doesn't have any green flag scripts but it does need to reset when I receive main menu hide and then delete any clones lastly the end particles similarly when I receive main menu delete this clone is that it let's check uh nope our main menu has disappeared all together ah I know back into the menu Sprite we never kicked off the main menu scripts when green flag clicked broadcast main menu of course and that looks best better but let's check out the level restart normal death is okay and now wait for it yeah I knew 8 seconds might seem too long one eternity later um what's this gosh I'm not doing so well am I H looks like I forgot to reset the player Sprite fully and the level scrolling too I know what it is in our player Sprite scroll down to just before the main game Loop we need to duplicate the set speed X and set scroll speed blocks here and we'll set them in the main menu script to get level scrolling once more then to bring the level back into view we need to also set camera y back to zero lastly to reveal the ghosted out player drop in a clear graphic effects block two too is that it are we done smash the green flag and we'll take a look I'm flying through the level to the end now and waiting yes it was worth the wait it's all beautifully restored once more man that was a ride but we finally did it we can stuff that end of level costume wherever we need it in the level and the game will play out perfectly all it needs now is a splash screen to congratulate the player on beating the level but I leave that as an exercise for you if you'd like to keep that a go yourselves either way I'm dead excited to see how your projects are getting along so do submit them to the scratch Studio linked under this video so what is next for this tutorial series I would expect we can now turn our hand to exploring more of the exciting game elements like jump pads and orbs other player modes I can't wait for for those and also how to add more than one level now that would be awesome right if you agree then please smash that like button and don't forget to subscribe to this channel checking the Bell icon so it's not to miss the next exciting episode the moment it drops but until next time thank you for watching have a great week ahead and scratch on guys oh
