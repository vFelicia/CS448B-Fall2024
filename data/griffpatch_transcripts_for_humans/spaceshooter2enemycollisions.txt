With timestamps:

00:00 - [Music]
00:02 - hello fellow scratchers
00:04 - welcome to the much anticipated episode
00:06 - two of our space shooter tutorial
00:08 - lemonoid invasion and this is going to
00:11 - be
00:11 - exciting as those rampant lemons are
00:14 - finally about to make their appearance
00:16 - we are also going to cover a common
00:18 - cause of many a scratch's headache
00:20 - two-way collisions between clones delays
00:23 - hit lemons
00:24 - or lemons hit lasers so yeah we had lots
00:27 - of fun with episode one
00:28 - and i got such an amazing response just
00:31 - look at all these scratch projects
00:33 - wow if like me you want to see more then
00:36 - stay tuned because i'm going to dig into
00:38 - these later on in the video
00:39 - so cool i just love what you guys are
00:41 - creating but
00:43 - now on with part two okay
00:46 - i've updated the lemonoid asset project
00:48 - on my griffpatch tutor account
00:50 - a link to it is available under the
00:52 - video you don't need to use these but
00:54 - i've added some new sounds to the
00:55 - project that i will be making use of
00:57 - today
00:58 - convenience they're all in this sprite
01:00 - named all
01:01 - audio i'll just backpack the audio
01:04 - sprite and we're ready to go
01:06 - open the tutorial project and drag the
01:08 - audio sprite from your backpack into the
01:10 - project like so
01:13 - let's see what we have there's the main
01:16 - music theme
01:16 - at the top here a laser sound
01:21 - and three explosions that's cool
01:24 - hey why don't we make use of the game
01:26 - music right away
01:27 - drag the top sound into the stage sprite
01:30 - have you made an audio loop before it's
01:32 - dead easy
01:34 - now in a stage sprite add a when green
01:36 - flag clicked
01:37 - and start of rev-loop
01:40 - then simply drop in the topmost play
01:42 - sound block
01:44 - that's the play sound until done one
01:47 - give it a test oh yeah i can almost feel
01:50 - those lemons
01:51 - charging up their juice powered space
01:53 - drives but
01:54 - before we can shoot them in style we
01:56 - really need an audible laser sound
01:59 - back in the all audio sprite let's drag
02:02 - the laser
02:03 - shoot 16 sound to the laser sprite
02:06 - and then in the laser sprite simply
02:08 - place a start sound
02:10 - laser right at the top of the when i
02:12 - start as clone block
02:14 - this time don't use the start sound and
02:16 - wait
02:17 - otherwise your new laser sprite won't
02:19 - appear until the sound has finished
02:20 - playing
02:21 - that would not be good at all testing
02:23 - that now
02:24 - and yeah that will do fine you'll note
02:28 - that i edited this sound to make it
02:29 - quite a bit
02:30 - quieter than its original level because
02:32 - otherwise it would get
02:33 - super annoying okay it's been a long
02:37 - time coming but it's
02:38 - lemon time make a new sprite and name it
02:41 - lemon
02:42 - now i don't know which of you have
02:44 - studied the finer qualities of the
02:45 - majestic
02:46 - lemon subtle form but let me quickly
02:49 - guide you on how to draw this
02:50 - surprisingly complex fruit
02:52 - start with a yellow oval around 11 grid
02:55 - squares wide
02:56 - and seven squares tall now this is
02:59 - important
03:00 - using the selection tool click and drag
03:02 - the entire lemon until it snaps to the
03:04 - center of the canvas
03:06 - see this little center indicator snap
03:08 - into place this ensures the lemon
03:10 - rotates nicely around in the middle when
03:12 - we add it into the game
03:13 - your spacecraft should have been done
03:15 - the same way
03:16 - next i'm using the shaping tool to pull
03:18 - in the line above and below each end of
03:21 - the lemon
03:22 - that's pretty cool i think i could tweak
03:24 - this lemon shape forever
03:27 - okay we should name the costume lemon
03:30 - and then we'll make a second costume
03:32 - which we'll name big
03:34 - if you've followed any of my other
03:35 - tutorials you'll know all about this
03:38 - we can use it when we want a sprite move
03:40 - off screen
03:41 - this one is going to be huge though zoom
03:44 - right out of the drawing canvas like so
03:46 - and then use the rectangle tool to draw
03:48 - the biggest rectangle you possibly can
03:51 - even bigger than the main canvas that
03:53 - should do us
03:54 - just fine and will allow us to move
03:56 - things really far
03:57 - off the screen right to code then
04:01 - let's set the sprite up how we want it
04:04 - when green flag clicked
04:05 - switch to the lemon costume and then
04:07 - right away send the lemon sprite to the
04:09 - back layer
04:10 - this will be important to ensure the
04:12 - lasers and the player
04:14 - appear in front of the lemons but it has
04:16 - another effect
04:17 - and that is to change the order of which
04:19 - sprite scripts
04:21 - run first but that is a story for
04:23 - another tutorial
04:25 - set size to 300 and run the project to
04:28 - check the sprite's size
04:30 - yeah that's about right if your sprite
04:32 - isn't showing then just tap the show
04:34 - button here
04:36 - okay so the plan is to use clones to
04:38 - bring the new lemons into the game
04:40 - so we'll hide this initial lemon sprite
04:43 - just like we did for the main laser
04:44 - sprite
04:46 - only the clones of the lemon will be
04:47 - made visible
04:49 - so the game has now begun but we should
04:52 - delay our first lemon's appearance
04:53 - using a weight block however i'm going
04:56 - to set it to zero
04:57 - until later on as having to wait would
05:00 - make testing annoying
05:01 - we'll increase it later next we'll add a
05:03 - forever loop
05:04 - this is where we'll begin cloning lemons
05:07 - make a new block named new enemy
05:11 - and use it in the forever loop this will
05:14 - create the clone
05:15 - and so we then just need to wait for two
05:18 - seconds to begin with
05:19 - before repeating and creating the next
05:21 - enemy lemon
05:23 - now this will be far too quick for our
05:24 - real game but again it will make testing
05:27 - things easier
05:28 - let's think now about how we want a new
05:31 - enemy to appear
05:32 - my idea is to create each lemon
05:34 - off-screen and then to get the lemon to
05:36 - slowly drift in towards the center of
05:38 - the stage
05:39 - pass by and slip quietly off the other
05:41 - side
05:43 - there's a number of ways i can think of
05:44 - setting this up and the one i settled on
05:46 - is this position a lemon in the middle
05:49 - of the screen
05:51 - turn it to face a random direction and
05:53 - then walk it backwards
05:55 - off screen so now if we slowly move the
05:58 - lemon forward it is guaranteed to come
06:00 - back to the middle before continuing
06:02 - onwards
06:02 - excellent let's get scratching we'll
06:06 - start by switching the lemon sprite to
06:08 - use the big
06:09 - costume after all we want to push the
06:11 - lemon far
06:12 - off screen so this is a must now
06:15 - position in the center of the stage with
06:16 - a go to x0 and y0
06:19 - i'm going to make a new variable though
06:21 - to keep track of the lemon's direction
06:23 - of movement
06:24 - naming it d d i r ensuring
06:27 - it's for this sprite only now set it to
06:31 - pick
06:31 - random of -180 to 180
06:35 - to give us a full circle of possible
06:37 - directions
06:39 - now we can use a point in direction
06:42 - of d good so all that's left is to walk
06:46 - it backwards off the screen
06:48 - so move by
06:51 - negative 350. negative movement always
06:55 - moves us right backwards
06:57 - okay the lemon should be well off screen
07:00 - so it's safe to switch back to the lemon
07:02 - costume once more
07:04 - lastly before we actually clone our
07:06 - lemon we should decide how fast it will
07:09 - travel
07:10 - so make a new variable named speed again
07:12 - ensuring it's for this sprite only
07:14 - as we want different lemons to have
07:16 - their own speeds
07:18 - i'm going to set speed to 1. that's nice
07:20 - and slow for the initially large lemons
07:23 - and now yay we create clone of myself
07:27 - all the work we just did will be copied
07:29 - into the new clone ready to go
07:32 - wow we're doing a lot of coding without
07:34 - a test and that can make finding
07:36 - problems harder
07:37 - but we're not quite ready yet the lemon
07:40 - should be cloning off screen but we
07:41 - haven't yet told it what to do when it
07:43 - gains consciousness
07:45 - so when i start as a clone show the
07:48 - lemon
07:51 - and straight into a forever loop
07:54 - then simply move it forwards
07:58 - by speed and we can test
08:02 - yay and here comes a lemon gosh
08:05 - they really are slow they are coming in
08:08 - from random directions forgive me if i
08:11 - speed this up
08:12 - and they are traveling through the
08:13 - center of the screen before moving off
08:15 - the other side
08:17 - ah except not quite look at this
08:21 - i've coloured the border so you can see
08:22 - it the lemons are getting trapped on the
08:25 - edge of the screen
08:26 - we should have used the big costume
08:28 - trick
08:30 - switch the costume to big before we move
08:33 - the sprite forward
08:34 - and then afterwards switch it back to
08:36 - lemon easy as lemon pie
08:43 - now you can see each citrus oval glides
08:45 - smoothly out of view
08:47 - much better but where do they go
08:51 - the answer is nowhere useful yet
08:55 - in games like this one it is common to
08:57 - allow the enemies to wrap around from
08:59 - one side of the level to the other
09:01 - this way we are forced to keep shooting
09:03 - them to prevent us being overrun
09:05 - as more and more enemies are introduced
09:07 - into the game make a new custom block
09:09 - and we'll name it wrap around
09:15 - and move it into some free space we can
09:17 - make use of the new block here
09:19 - just after moving forwards but before we
09:22 - switch back to the lemon costume
09:24 - wrapping around then we could code this
09:27 - the shorter
09:28 - but trickier to understand way using
09:30 - mods
09:31 - or do it the long but simple way
09:34 - this time we are going to do it the long
09:36 - simple bring in an if else block
09:39 - check if x position is greater than 350
09:42 - that's way off the right hand side of
09:44 - the screen
09:44 - we want it to wrap back around to the
09:46 - left so set
09:48 - x to negative 350
09:51 - but what if the lemon has moved off the
09:53 - left side of the screen
09:54 - if x position is less than minus 350
09:57 - then we set x to 350. that wraps it back
10:01 - over to the right again sorted let's do
10:05 - the same for the y positions
10:06 - i'm going to duplicate the whole thing
10:09 - but to be honest
10:10 - we have to change so much that we might
10:12 - be better off scripting this all over
10:13 - again
10:14 - if y position is bigger than 280
10:18 - set y position to negative 280.
10:21 - else if y position is less than -280
10:25 - then set y to 280.
10:33 - cool that looks about right let's test
10:36 - it
10:40 - whoa and now it occurs to me that with
10:42 - this many lemons spawning
10:44 - i can't easily tell if this wrapping
10:46 - around is working or not
10:48 - i'm going to change the speed of the
10:49 - lemons to be 8
10:51 - and increase the delay between new
10:53 - lemons to be every 10 seconds
10:56 - and then let's test again yeah now i can
10:59 - see
11:00 - that the single lemon is traveling off
11:01 - the bottom and reappearing at the top
11:04 - very nicely clicking the green flag
11:06 - again causes the lemon to start in a
11:08 - different direction and we can confirm
11:09 - that it wraps around again
11:11 - top to bottom right to left left to
11:13 - right etc
11:15 - okay let's put the delay back to one
11:18 - second
11:18 - and the speed also to one
11:22 - now look at this all the lemons are
11:24 - coming headlong
11:25 - towards me but something is amiss you
11:28 - see
11:28 - these lemons are not projectiles or
11:31 - spacecraft
11:32 - i want them to be more akin to space
11:34 - rocks
11:35 - and everyone knows that space rocks and
11:37 - lemons for that matter
11:38 - spin around as they travel through space
11:40 - our lemons have
11:42 - no spin and here we run into a little
11:45 - problem
11:46 - if we start turning our lemons to make
11:47 - them spin around
11:49 - then the direction the lemon travels in
11:50 - will change too
11:52 - because they're always traveling forward
11:54 - but we wanted the lemons to travel in
11:56 - straight
11:56 - lines so we have a challenge to solve
12:00 - because
12:00 - i really want those spinning yellow
12:02 - fruits
12:04 - okay let's set that weight block back to
12:06 - two it was just too quick
12:08 - i find that when i start as a clone
12:10 - script
12:11 - the problem we have is this move block
12:14 - it would be useful to be able to move
12:16 - the lemon in a direction other
12:17 - than that which it is facing okay
12:20 - i think you need to know this next trick
12:24 - i use this all the time in a lot of
12:25 - projects so i think you may be ready to
12:27 - use it too
12:28 - here we go change x by speed
12:32 - multiplied by
12:37 - and here's the bit you won't like sign
12:45 - of direction
12:51 - then we also change y by speed
12:54 - multiplied by cosine of direction
12:58 - so this is written as sin and cos
13:01 - so what does this do well believe it or
13:04 - not
13:04 - this script does exactly the same thing
13:07 - as
13:07 - the move speed block don't believe me
13:11 - let's swap the move block for those two
13:13 - lines and then
13:14 - watch this running the project now
13:18 - and there behold the lemons are
13:21 - traveling
13:22 - just the same as if we were using the
13:24 - old move block
13:26 - well welcome to the mathematics of the
13:28 - move block
13:29 - this is actually how the move block
13:31 - works it will be using a sign and cause
13:34 - itself to work out how to move forward
13:37 - so why bother telling you this little
13:39 - nugget of information
13:41 - well we wanted to be able to move the
13:43 - lemon in one direction
13:45 - while it is facing a different direction
13:48 - and now with this change we can all we
13:50 - need to do
13:51 - is drop in the direction here so replace
13:54 - the direction reporter
13:56 - with our variable de dir yes
13:59 - now it becomes obvious why i made this
14:01 - variable way back at the beginning
14:03 - we can just check everything is still
14:04 - working
14:09 - yeah and so the fun bit place a
14:12 - turn right by 5 degrees just after the
14:15 - change y block
14:17 - are you ready for this
14:22 - look at that we have our beautifully
14:24 - sour juicy nuggets spinning menacingly
14:27 - towards the center of the stage
14:28 - that's a victory for us but our reveling
14:32 - will be short-lived
14:33 - if we don't sort out our lasers i have
14:36 - the need to start
14:37 - fighting back we'll start in the lemon
14:40 - sprite
14:41 - add an if check after switching back to
14:43 - the lemon costume here
14:45 - and simply check whether the lemon is
14:47 - touching a laser
14:51 - if it is then for now just delete this
14:54 - lemon clone
14:56 - run the project and finally we can start
14:58 - to tell those lemons who is boss yes
15:01 - it's me well that's super easy i can
15:04 - wipe them out before they've even got
15:06 - fully onto the screen
15:08 - what you need to notice though is that
15:09 - my lasers are able to wipe out a lemon
15:12 - but they don't stop there they continue
15:14 - on destroying all the lemons in their
15:16 - path
15:17 - now this may be your desired behavior
15:19 - for your game but for me
15:21 - i want the lasers to only be able to hit
15:23 - one lemon
15:24 - and this is where we hit a difficulty
15:27 - and something that many a scratcher
15:29 - shakes their fist at because
15:31 - it feels like it should be really easy
15:35 - what is missing is that we know the
15:36 - lemon was touched by a laser clone
15:38 - but we don't know which clone how can we
15:41 - find out which one it was
15:44 - well sadly this question has no easy
15:46 - answer in reality
15:47 - there is no 100 accurate way of doing
15:50 - this
15:50 - without some enormous amount of work
15:52 - anyhow but
15:54 - luckily there are simple ways of getting
15:56 - quite close
15:57 - start by clicking into the laser sprite
16:00 - we are going to look out for when the
16:02 - laser
16:02 - is touching a lemon add another when i
16:06 - start as clone hat block
16:07 - and wait until the laser is touching
16:10 - a lemon as soon as this occurs we delete
16:13 - the laser clone
16:15 - right so is there anything wrong with
16:18 - this
16:19 - we are now deleting the lemon and the
16:21 - lasers when they are touching each other
16:23 - right
16:24 - sadly no run the project
16:27 - we have a new problem these lasers are
16:30 - really not doing a good job of
16:32 - destroying the lemons
16:33 - all the lasers are being deleted as they
16:36 - touch the lemons
16:37 - but not so the lemons they have somehow
16:40 - become much more resilient to our lasers
16:42 - so we can assume that they are not
16:44 - detecting the laser touches
16:46 - most of the time so why is that
16:50 - well there are three reasons that i know
16:53 - of
16:53 - ha shall we look at the first we have
16:56 - two sprites
16:58 - a laser and a lemon each one starts by
17:01 - moving the sprite
17:03 - and then checks whether it is colliding
17:05 - with the other sprite
17:06 - but although it looks on screen like
17:08 - these two sprites are moving at the same
17:10 - time
17:11 - they are not no everything in scratch
17:15 - runs in an order one after the other
17:18 - you don't see this on screen because it
17:20 - all happens too fast within a single
17:22 - screen refresh
17:24 - so in our example here the laser sprite
17:26 - scripts
17:27 - run first it moves the laser forward
17:31 - and then checks for collisions nope no
17:33 - collision there
17:35 - next the lemon gets to run its scripts
17:37 - it moves forward
17:38 - no no collision at this point the screen
17:42 - will refresh and the player sees both
17:43 - sprites have moved towards each other
17:46 - now it's a laser's turn again it moves
17:49 - forward and aha
17:50 - it has detected a collision what does it
17:52 - do next
17:54 - well it deletes itself hmm
17:57 - can you see the problem yet now the
17:59 - lemon script runs
18:00 - and the lemon moves and checks for a
18:02 - collision
18:03 - yep there's no laser so this lemon is
18:07 - safe and doesn't get deleted
18:09 - bother in computer terms what we have
18:12 - here is called
18:13 - a race condition as only one of these
18:15 - sprites will touch first
18:17 - and get deleted but we want both to get
18:20 - the chance to collide
18:21 - so what do we do there is a simple
18:23 - remedy for this
18:25 - all we need is for the laser to not get
18:27 - deleted
18:28 - until the lemon has run its next script
18:30 - then
18:31 - the lemon will also get to detect the
18:33 - collision and we can delete them both
18:35 - raw this is quite easy to do before we
18:38 - delete the laser clone
18:40 - drop in a weight block and we'll wait
18:42 - for
18:44 - zero seconds now hold on was that a
18:47 - mistake
18:48 - no no no this is really cool when you
18:51 - use a weight zero
18:52 - scratch will always wait for the next
18:54 - screen refresh
18:55 - even if you don't put in a length of
18:57 - time so that will ensure the lemon gets
19:00 - its moment to run
19:01 - and then we are free to delete this
19:03 - clone as before
19:05 - let's try that again now
19:12 - and look at that so much more promising
19:15 - most of our lasers are gliding correctly
19:18 - i can't help but note that a few lasers
19:20 - are somehow getting through
19:22 - not to worry i did say i could think of
19:24 - three reasons why collisions were not
19:26 - working and we've only addressed one of
19:27 - them
19:28 - we'll come back to this again later
19:30 - right now though i'm
19:32 - really keen to focus on what happens
19:34 - when a lemon is hit
19:36 - click into the lemon sprite if you paid
19:38 - attention to my original gameplay video
19:40 - you probably saw that these lemons are
19:42 - destined to split into three
19:43 - smaller lemons when destroyed this is a
19:46 - classic
19:47 - asteroids mechanic and i love it we can
19:49 - make a start on this by replacing the
19:51 - delete clone with a new custom block
19:53 - named
19:54 - enemy hit
20:02 - move the delete clone block over here
20:05 - okay
20:06 - when a lemon is hit we want it to split
20:08 - into smaller lemons
20:10 - let's begin by making the lemon half its
20:12 - original size
20:13 - by setting size 2 size divided by
20:18 - 2.
20:22 - we can test that
20:28 - [Music]
20:31 - yeah i'd say this is mostly working as
20:33 - expected but the smaller lemons are
20:35 - getting a bit too small
20:37 - at some point they should stop shrinking
20:39 - and just be deleted instead
20:40 - check if size is less than 35
20:46 - and use the delete this clone block if
20:48 - it is
20:49 - giving that a quick test should now let
20:50 - me put pay to those tiny lemons
20:53 - and yep i can confirm they are no more
20:56 - super now before we split we also want
20:59 - our lemons to travel
21:01 - faster so set
21:04 - speed
21:08 - to speed multiplied by
21:13 - 1.5 and to mix things up let's change
21:17 - the direction of the first lemon by a
21:18 - random number between
21:19 - 0 and 180 and here we go
21:23 - we split the lemon create a clone of
21:26 - self
21:27 - now we have two lemons but they are
21:30 - facing the same direction
21:31 - so change the variable dir da by a
21:35 - hundred and twenty
21:36 - that's a third of a full circle turn now
21:39 - clone again
21:40 - to make the third lemon and finally
21:42 - change the by
21:43 - another 120. oh yeah now this is
21:47 - exciting
21:48 - just before we test increase the time
21:50 - between new lemons appearing
21:52 - from two to every five seconds okay
21:56 - i'm going to test this
22:03 - this is sweet i love how those look as i
22:06 - blast them apart
22:07 - and wow how fast those little ones are
22:10 - traveling
22:11 - that makes them much more dangerous and
22:13 - tricky to shoot
22:14 - the more i blast the more lemons start
22:16 - to fill up the screen
22:17 - that's wonderful but now i'm seeing a
22:20 - lot more missed collisions between
22:22 - lasers and the smaller
22:24 - more speedy lemons i think we should
22:26 - take a look at the collision issue
22:28 - number two the second problem lies again
22:32 - in the order of our scripts here a laser
22:34 - is chasing a lemon
22:36 - the laser as before collides first so
22:40 - now
22:40 - we are being clever and not deleting the
22:42 - laser yet
22:43 - we allow the lemon a chance to run its
22:45 - scripts
22:46 - so here goes it first does its movement
22:49 - scripts
22:50 - uh oh do you see the problem the lemon
22:54 - only checks for collisions after moving
22:56 - and oh my gosh
22:58 - no collision is detected it's moved too
23:00 - far away
23:02 - okay so how do we solve that
23:05 - simple we change the order of the lemon
23:08 - scripts
23:08 - to perform the collision check first
23:11 - before moving
23:13 - like this now we ensure that the lemon
23:16 - is in the same position as it was when
23:17 - the bullet did its collision check first
23:20 - detecting the same collision but in
23:22 - reverse
23:23 - so yeah in the lemon sprite move the if
23:26 - touching laser to be the first thing we
23:28 - do in the forever loop
23:30 - even before changing the costume that's
23:32 - important
23:34 - let's give it a try
23:39 - i'm just picking off one lemon at a time
23:42 - and all i can say is yes i'm not seeing
23:46 - any failed collisions at
23:47 - all now that seems to have fixed the
23:49 - problem
23:50 - sweet so
23:53 - i'm really pleased how these lemons are
23:56 - looking
23:57 - and especially how well our collisions
23:58 - are being detected
24:00 - there's still quite a bit of polish
24:02 - before it looks at its best that though
24:04 - we'll have to wait until episode 3
24:06 - where we'll be adding lemon health
24:08 - special effects like light flashes
24:10 - and god rays and of course camera shake
24:13 - it's going to
24:14 - look amazing right before we go
24:18 - as i promised let's take a look at some
24:20 - of the projects created by fellow
24:21 - scratchers
24:22 - starting with two of my awesome channel
24:24 - members thanks guys
24:26 - raz kanaz kindly shared with me their
24:29 - take on episode one
24:30 - they followed the tutorial and then
24:32 - added mobile controls how
24:34 - cool is that this will be awesome once
24:37 - we introduce the lemons
24:38 - wow i just wish that scratch supported
24:41 - dual touch because
24:42 - we can't use both sticks at once razka
24:45 - naz thought of this too
24:46 - and the project comes in two flavors
24:48 - this second version simply follows the
24:50 - mouse
24:50 - firing as it goes awesome work
24:53 - and here's another project this time by
24:55 - channel member jude pom
24:57 - oh wow look at this it's a full game
25:00 - well done i don't think i can actually
25:03 - control the cat
25:04 - no they are just floating around but i
25:06 - have to shoot these lemons before they
25:08 - reach lemongirl in the middle
25:10 - poor lemongirl i'd love to know her
25:12 - backstory thanks so much
25:14 - for creating this game for us jude bomb
25:16 - and now
25:17 - just look at all these other projects in
25:19 - the lemonoid studio
25:20 - if you want some inspiration you just
25:22 - need to have a click through these
25:23 - i'm dead impressed with you guys well
25:26 - done
25:28 - [Music]
25:32 - and that is all we have time for this
25:35 - episode
25:36 - if you like this video then please smash
25:38 - the like button subscribe to catch the
25:39 - latest videos
25:40 - and now don't forget you have the option
25:42 - to become a channel member if you really
25:44 - want to support the creation of these
25:46 - tutorials
25:47 - the more support i get the faster these
25:48 - videos will come
25:50 - plus you get extra perks right away so
25:53 - please check that out so until next time
25:56 - have a great week ahead and scratch on
26:00 - [Music]
26:08 - guys
26:10 - [Music]

Cleaned transcript:

hello fellow scratchers welcome to the much anticipated episode two of our space shooter tutorial lemonoid invasion and this is going to be exciting as those rampant lemons are finally about to make their appearance we are also going to cover a common cause of many a scratch's headache twoway collisions between clones delays hit lemons or lemons hit lasers so yeah we had lots of fun with episode one and i got such an amazing response just look at all these scratch projects wow if like me you want to see more then stay tuned because i'm going to dig into these later on in the video so cool i just love what you guys are creating but now on with part two okay i've updated the lemonoid asset project on my griffpatch tutor account a link to it is available under the video you don't need to use these but i've added some new sounds to the project that i will be making use of today convenience they're all in this sprite named all audio i'll just backpack the audio sprite and we're ready to go open the tutorial project and drag the audio sprite from your backpack into the project like so let's see what we have there's the main music theme at the top here a laser sound and three explosions that's cool hey why don't we make use of the game music right away drag the top sound into the stage sprite have you made an audio loop before it's dead easy now in a stage sprite add a when green flag clicked and start of revloop then simply drop in the topmost play sound block that's the play sound until done one give it a test oh yeah i can almost feel those lemons charging up their juice powered space drives but before we can shoot them in style we really need an audible laser sound back in the all audio sprite let's drag the laser shoot 16 sound to the laser sprite and then in the laser sprite simply place a start sound laser right at the top of the when i start as clone block this time don't use the start sound and wait otherwise your new laser sprite won't appear until the sound has finished playing that would not be good at all testing that now and yeah that will do fine you'll note that i edited this sound to make it quite a bit quieter than its original level because otherwise it would get super annoying okay it's been a long time coming but it's lemon time make a new sprite and name it lemon now i don't know which of you have studied the finer qualities of the majestic lemon subtle form but let me quickly guide you on how to draw this surprisingly complex fruit start with a yellow oval around 11 grid squares wide and seven squares tall now this is important using the selection tool click and drag the entire lemon until it snaps to the center of the canvas see this little center indicator snap into place this ensures the lemon rotates nicely around in the middle when we add it into the game your spacecraft should have been done the same way next i'm using the shaping tool to pull in the line above and below each end of the lemon that's pretty cool i think i could tweak this lemon shape forever okay we should name the costume lemon and then we'll make a second costume which we'll name big if you've followed any of my other tutorials you'll know all about this we can use it when we want a sprite move off screen this one is going to be huge though zoom right out of the drawing canvas like so and then use the rectangle tool to draw the biggest rectangle you possibly can even bigger than the main canvas that should do us just fine and will allow us to move things really far off the screen right to code then let's set the sprite up how we want it when green flag clicked switch to the lemon costume and then right away send the lemon sprite to the back layer this will be important to ensure the lasers and the player appear in front of the lemons but it has another effect and that is to change the order of which sprite scripts run first but that is a story for another tutorial set size to 300 and run the project to check the sprite's size yeah that's about right if your sprite isn't showing then just tap the show button here okay so the plan is to use clones to bring the new lemons into the game so we'll hide this initial lemon sprite just like we did for the main laser sprite only the clones of the lemon will be made visible so the game has now begun but we should delay our first lemon's appearance using a weight block however i'm going to set it to zero until later on as having to wait would make testing annoying we'll increase it later next we'll add a forever loop this is where we'll begin cloning lemons make a new block named new enemy and use it in the forever loop this will create the clone and so we then just need to wait for two seconds to begin with before repeating and creating the next enemy lemon now this will be far too quick for our real game but again it will make testing things easier let's think now about how we want a new enemy to appear my idea is to create each lemon offscreen and then to get the lemon to slowly drift in towards the center of the stage pass by and slip quietly off the other side there's a number of ways i can think of setting this up and the one i settled on is this position a lemon in the middle of the screen turn it to face a random direction and then walk it backwards off screen so now if we slowly move the lemon forward it is guaranteed to come back to the middle before continuing onwards excellent let's get scratching we'll start by switching the lemon sprite to use the big costume after all we want to push the lemon far off screen so this is a must now position in the center of the stage with a go to x0 and y0 i'm going to make a new variable though to keep track of the lemon's direction of movement naming it d d i r ensuring it's for this sprite only now set it to pick random of 180 to 180 to give us a full circle of possible directions now we can use a point in direction of d good so all that's left is to walk it backwards off the screen so move by negative 350. negative movement always moves us right backwards okay the lemon should be well off screen so it's safe to switch back to the lemon costume once more lastly before we actually clone our lemon we should decide how fast it will travel so make a new variable named speed again ensuring it's for this sprite only as we want different lemons to have their own speeds i'm going to set speed to 1. that's nice and slow for the initially large lemons and now yay we create clone of myself all the work we just did will be copied into the new clone ready to go wow we're doing a lot of coding without a test and that can make finding problems harder but we're not quite ready yet the lemon should be cloning off screen but we haven't yet told it what to do when it gains consciousness so when i start as a clone show the lemon and straight into a forever loop then simply move it forwards by speed and we can test yay and here comes a lemon gosh they really are slow they are coming in from random directions forgive me if i speed this up and they are traveling through the center of the screen before moving off the other side ah except not quite look at this i've coloured the border so you can see it the lemons are getting trapped on the edge of the screen we should have used the big costume trick switch the costume to big before we move the sprite forward and then afterwards switch it back to lemon easy as lemon pie now you can see each citrus oval glides smoothly out of view much better but where do they go the answer is nowhere useful yet in games like this one it is common to allow the enemies to wrap around from one side of the level to the other this way we are forced to keep shooting them to prevent us being overrun as more and more enemies are introduced into the game make a new custom block and we'll name it wrap around and move it into some free space we can make use of the new block here just after moving forwards but before we switch back to the lemon costume wrapping around then we could code this the shorter but trickier to understand way using mods or do it the long but simple way this time we are going to do it the long simple bring in an if else block check if x position is greater than 350 that's way off the right hand side of the screen we want it to wrap back around to the left so set x to negative 350 but what if the lemon has moved off the left side of the screen if x position is less than minus 350 then we set x to 350. that wraps it back over to the right again sorted let's do the same for the y positions i'm going to duplicate the whole thing but to be honest we have to change so much that we might be better off scripting this all over again if y position is bigger than 280 set y position to negative 280. else if y position is less than 280 then set y to 280. cool that looks about right let's test it whoa and now it occurs to me that with this many lemons spawning i can't easily tell if this wrapping around is working or not i'm going to change the speed of the lemons to be 8 and increase the delay between new lemons to be every 10 seconds and then let's test again yeah now i can see that the single lemon is traveling off the bottom and reappearing at the top very nicely clicking the green flag again causes the lemon to start in a different direction and we can confirm that it wraps around again top to bottom right to left left to right etc okay let's put the delay back to one second and the speed also to one now look at this all the lemons are coming headlong towards me but something is amiss you see these lemons are not projectiles or spacecraft i want them to be more akin to space rocks and everyone knows that space rocks and lemons for that matter spin around as they travel through space our lemons have no spin and here we run into a little problem if we start turning our lemons to make them spin around then the direction the lemon travels in will change too because they're always traveling forward but we wanted the lemons to travel in straight lines so we have a challenge to solve because i really want those spinning yellow fruits okay let's set that weight block back to two it was just too quick i find that when i start as a clone script the problem we have is this move block it would be useful to be able to move the lemon in a direction other than that which it is facing okay i think you need to know this next trick i use this all the time in a lot of projects so i think you may be ready to use it too here we go change x by speed multiplied by and here's the bit you won't like sign of direction then we also change y by speed multiplied by cosine of direction so this is written as sin and cos so what does this do well believe it or not this script does exactly the same thing as the move speed block don't believe me let's swap the move block for those two lines and then watch this running the project now and there behold the lemons are traveling just the same as if we were using the old move block well welcome to the mathematics of the move block this is actually how the move block works it will be using a sign and cause itself to work out how to move forward so why bother telling you this little nugget of information well we wanted to be able to move the lemon in one direction while it is facing a different direction and now with this change we can all we need to do is drop in the direction here so replace the direction reporter with our variable de dir yes now it becomes obvious why i made this variable way back at the beginning we can just check everything is still working yeah and so the fun bit place a turn right by 5 degrees just after the change y block are you ready for this look at that we have our beautifully sour juicy nuggets spinning menacingly towards the center of the stage that's a victory for us but our reveling will be shortlived if we don't sort out our lasers i have the need to start fighting back we'll start in the lemon sprite add an if check after switching back to the lemon costume here and simply check whether the lemon is touching a laser if it is then for now just delete this lemon clone run the project and finally we can start to tell those lemons who is boss yes it's me well that's super easy i can wipe them out before they've even got fully onto the screen what you need to notice though is that my lasers are able to wipe out a lemon but they don't stop there they continue on destroying all the lemons in their path now this may be your desired behavior for your game but for me i want the lasers to only be able to hit one lemon and this is where we hit a difficulty and something that many a scratcher shakes their fist at because it feels like it should be really easy what is missing is that we know the lemon was touched by a laser clone but we don't know which clone how can we find out which one it was well sadly this question has no easy answer in reality there is no 100 accurate way of doing this without some enormous amount of work anyhow but luckily there are simple ways of getting quite close start by clicking into the laser sprite we are going to look out for when the laser is touching a lemon add another when i start as clone hat block and wait until the laser is touching a lemon as soon as this occurs we delete the laser clone right so is there anything wrong with this we are now deleting the lemon and the lasers when they are touching each other right sadly no run the project we have a new problem these lasers are really not doing a good job of destroying the lemons all the lasers are being deleted as they touch the lemons but not so the lemons they have somehow become much more resilient to our lasers so we can assume that they are not detecting the laser touches most of the time so why is that well there are three reasons that i know of ha shall we look at the first we have two sprites a laser and a lemon each one starts by moving the sprite and then checks whether it is colliding with the other sprite but although it looks on screen like these two sprites are moving at the same time they are not no everything in scratch runs in an order one after the other you don't see this on screen because it all happens too fast within a single screen refresh so in our example here the laser sprite scripts run first it moves the laser forward and then checks for collisions nope no collision there next the lemon gets to run its scripts it moves forward no no collision at this point the screen will refresh and the player sees both sprites have moved towards each other now it's a laser's turn again it moves forward and aha it has detected a collision what does it do next well it deletes itself hmm can you see the problem yet now the lemon script runs and the lemon moves and checks for a collision yep there's no laser so this lemon is safe and doesn't get deleted bother in computer terms what we have here is called a race condition as only one of these sprites will touch first and get deleted but we want both to get the chance to collide so what do we do there is a simple remedy for this all we need is for the laser to not get deleted until the lemon has run its next script then the lemon will also get to detect the collision and we can delete them both raw this is quite easy to do before we delete the laser clone drop in a weight block and we'll wait for zero seconds now hold on was that a mistake no no no this is really cool when you use a weight zero scratch will always wait for the next screen refresh even if you don't put in a length of time so that will ensure the lemon gets its moment to run and then we are free to delete this clone as before let's try that again now and look at that so much more promising most of our lasers are gliding correctly i can't help but note that a few lasers are somehow getting through not to worry i did say i could think of three reasons why collisions were not working and we've only addressed one of them we'll come back to this again later right now though i'm really keen to focus on what happens when a lemon is hit click into the lemon sprite if you paid attention to my original gameplay video you probably saw that these lemons are destined to split into three smaller lemons when destroyed this is a classic asteroids mechanic and i love it we can make a start on this by replacing the delete clone with a new custom block named enemy hit move the delete clone block over here okay when a lemon is hit we want it to split into smaller lemons let's begin by making the lemon half its original size by setting size 2 size divided by 2. we can test that yeah i'd say this is mostly working as expected but the smaller lemons are getting a bit too small at some point they should stop shrinking and just be deleted instead check if size is less than 35 and use the delete this clone block if it is giving that a quick test should now let me put pay to those tiny lemons and yep i can confirm they are no more super now before we split we also want our lemons to travel faster so set speed to speed multiplied by 1.5 and to mix things up let's change the direction of the first lemon by a random number between 0 and 180 and here we go we split the lemon create a clone of self now we have two lemons but they are facing the same direction so change the variable dir da by a hundred and twenty that's a third of a full circle turn now clone again to make the third lemon and finally change the by another 120. oh yeah now this is exciting just before we test increase the time between new lemons appearing from two to every five seconds okay i'm going to test this this is sweet i love how those look as i blast them apart and wow how fast those little ones are traveling that makes them much more dangerous and tricky to shoot the more i blast the more lemons start to fill up the screen that's wonderful but now i'm seeing a lot more missed collisions between lasers and the smaller more speedy lemons i think we should take a look at the collision issue number two the second problem lies again in the order of our scripts here a laser is chasing a lemon the laser as before collides first so now we are being clever and not deleting the laser yet we allow the lemon a chance to run its scripts so here goes it first does its movement scripts uh oh do you see the problem the lemon only checks for collisions after moving and oh my gosh no collision is detected it's moved too far away okay so how do we solve that simple we change the order of the lemon scripts to perform the collision check first before moving like this now we ensure that the lemon is in the same position as it was when the bullet did its collision check first detecting the same collision but in reverse so yeah in the lemon sprite move the if touching laser to be the first thing we do in the forever loop even before changing the costume that's important let's give it a try i'm just picking off one lemon at a time and all i can say is yes i'm not seeing any failed collisions at all now that seems to have fixed the problem sweet so i'm really pleased how these lemons are looking and especially how well our collisions are being detected there's still quite a bit of polish before it looks at its best that though we'll have to wait until episode 3 where we'll be adding lemon health special effects like light flashes and god rays and of course camera shake it's going to look amazing right before we go as i promised let's take a look at some of the projects created by fellow scratchers starting with two of my awesome channel members thanks guys raz kanaz kindly shared with me their take on episode one they followed the tutorial and then added mobile controls how cool is that this will be awesome once we introduce the lemons wow i just wish that scratch supported dual touch because we can't use both sticks at once razka naz thought of this too and the project comes in two flavors this second version simply follows the mouse firing as it goes awesome work and here's another project this time by channel member jude pom oh wow look at this it's a full game well done i don't think i can actually control the cat no they are just floating around but i have to shoot these lemons before they reach lemongirl in the middle poor lemongirl i'd love to know her backstory thanks so much for creating this game for us jude bomb and now just look at all these other projects in the lemonoid studio if you want some inspiration you just need to have a click through these i'm dead impressed with you guys well done and that is all we have time for this episode if you like this video then please smash the like button subscribe to catch the latest videos and now don't forget you have the option to become a channel member if you really want to support the creation of these tutorials the more support i get the faster these videos will come plus you get extra perks right away so please check that out so until next time have a great week ahead and scratch on guys
