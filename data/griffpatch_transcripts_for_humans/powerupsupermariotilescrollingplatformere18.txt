With timestamps:

00:02 - hello fellow scratchers i'm griff patch
00:05 - and welcome back to part 18 of our tile
00:07 - scrolling series probably soon to be
00:09 - rebranded as our how to code super mario
00:12 - advance 4 in scratch series
00:14 - today we finally will be adding mario
00:18 - what do you think we added them a long
00:19 - time back well kinda yeah but there's a
00:22 - difference between mario and super mario
00:25 - super mario is of course the big mario
00:27 - player while mario well he's the little
00:30 - tiny guy we start out with so today we
00:32 - add mini mario yay long time coming
00:36 - right in doing so we will introduce the
00:38 - power mechanic for mushrooms for this
00:40 - epic transformation into super mario and
00:43 - of course his power down when he gets
00:44 - caught by an enemy this is really fun to
00:47 - have and makes the game so cool for this
00:50 - we will of course need some new costumes
00:53 - so do head over to the starter asset
00:55 - project linked under this video
00:57 - take a look in the mario sprite costumes
01:00 - and scroll down there costumes 11 and
01:03 - onwards are the new mini mario costumes
01:05 - if i zoom in yeah there he is just open
01:08 - your backpack and drop the entire mario
01:10 - sprite in there great
01:13 - okay so open your tile scrolling
01:16 - projects from part 17. to prevent us
01:19 - losing any work make sure to save it as
01:21 - a copy and once scratch has stopped
01:24 - whirring we can name it part 18. yay
01:27 - guys let's get scratching we'll begin by
01:31 - bringing in those new costumes open your
01:33 - backpack again and drag the mario sprite
01:36 - into this project
01:38 - now we have the mario 2 sprite we want
01:40 - to find the mini walk 1 costume number
01:43 - 11 and then one by one we'll drag them
01:47 - into the official mario sprite like this
01:50 - all the way up to costume 19.
01:53 - super
01:56 - before we delete the mario 2 sprite just
01:58 - click into the mario and ensure we have
02:01 - all 19 costumes in there yep so delete
02:04 - mario 2.
02:08 - before we make use of any of these
02:10 - costumes let me just explain how they
02:13 - are set up it's important to realize i
02:15 - don't just chuck these costumes into
02:17 - scratch
02:18 - they are very purposefully positioned
02:19 - and aligned to work just right
02:22 - here is the big super mario costume if i
02:26 - leave a copy on the screen so that you
02:27 - can see how things line up then i'll
02:29 - switch to the mini mario
02:31 - now see how his feet are perfectly
02:33 - aligned with super mario this ensures as
02:36 - we switch between costumes we still have
02:38 - his feet on the floor
02:40 - now we could have done this a very
02:41 - different way by centering mario
02:43 - vertically and changing the height
02:45 - variable but as you will see this way
02:47 - turns out a lot less complicated
02:50 - now the walk animation of mini mario is
02:52 - just two frames rather than super
02:54 - mario's four
02:55 - to simplify our code i have therefore
02:57 - duplicated up the two mini mario walking
02:59 - costumes to make it a four frame walk
03:01 - cycle two
03:03 - now did you notice the names of these
03:05 - costumes is very specific all the super
03:07 - mario costumes begin with mario and the
03:10 - mini mario ones begin with mini other
03:13 - than that what follows is the same walk
03:16 - one turn jump this will make coding up
03:19 - the animations much easier you'll see in
03:21 - a moment
03:22 - oh and then there's this last costume
03:25 - mario transform this one is a mid-height
03:27 - mario between the mini and the super
03:29 - mario we'll use this to add a little
03:32 - pizzazz to our power up and down
03:34 - animations so are you ready our coding
03:37 - begins in the super mario sprite
03:40 - find with me the define paint sprite
03:42 - custom block
03:44 - now i'm using scratch add-ons quite
03:46 - heavily in this tutorial to find my way
03:47 - around
03:48 - when the project gets as big and
03:50 - complicated as this one it becomes a
03:52 - lifesaver
03:53 - so this script sets mario's costume
03:55 - based on their current action
03:57 - you can see all the switch costume names
04:00 - are mario this and mario that well
04:02 - that's useful because now we have a new
04:05 - set of mini mario costumes that all
04:07 - start mini this and mini that let's make
04:10 - it so that we can quickly switch between
04:12 - the two costume sets
04:14 - start by making a new variable naming it
04:17 - mario for all sprites
04:21 - now set it to
04:26 - mario oh dear scratch is still only
04:29 - showing half my block as i drag it
04:31 - around i hope that gets fixed soon
04:35 - duplicate that and this time set it to
04:38 - mini that's our new costume set name
04:41 - so bring in a join so where we are
04:44 - switching costume here to mario crouch
04:47 - we can join our mario variable with the
04:51 - word crouch to give us the full name
04:54 - mario crouch we just need to make
04:56 - absolutely sure we have written this
04:58 - without any typos and even the capital
05:00 - letters must be the same otherwise this
05:03 - will not work
05:04 - once we are sure we can drop it into the
05:06 - switch costume like so
05:09 - now we work our way down each of these
05:12 - switch costume blocks duplicating the
05:14 - join block and entering the
05:15 - corresponding costume action mario death
05:18 - mario jump
05:22 - mario walk three
05:28 - mario turn
05:36 - ah now
05:37 - this walk animation is not quite so
05:39 - straightforward we don't use a name here
05:42 - but the number one
05:44 - no problem though start by adding a new
05:46 - switch costume above it and oh yeah this
05:49 - is where we start with mario walk one
05:52 - now we replace this like the others with
05:54 - a join
05:55 - mario with walk one
05:59 - then when we had a one here below we
06:01 - replaced that with the current costume
06:03 - number block since that will now be the
06:06 - number of the first walk costume great
06:09 - it's time to give that a test
06:11 - assuming that mario variable is still
06:13 - set to mario with a capital m
06:16 - our costumes should look like they have
06:18 - for the last 16 episodes or so
06:20 - okay not so exciting but very cool that
06:23 - it is indeed looking correct
06:25 - but now for some fun click the set mario
06:29 - to mini block and pow did you see that
06:32 - we instantly switched over to the mini
06:35 - mario costume set that's awesome
06:38 - oh it's so refreshing to see him looking
06:39 - like this and there's his original
06:42 - losing live costume yes
06:45 - and of course we can just click on the
06:47 - blocks to switch back and forward
06:48 - between mario and super mario how cool
06:51 - is that
06:52 - and so easy to do just by being careful
06:54 - with how we named the costumes do you
06:56 - see how this could be extended to add
06:59 - even more types of mario later on if we
07:01 - wanted
07:02 - yeah i bet you did
07:04 - so tell me since mini mario is so small
07:08 - what happens when we crouch
07:10 - oh no what's this oh the dreaded purple
07:14 - square invasion has begun it's been a
07:16 - long time since we had one of these if
07:19 - you remember this occurs when we try to
07:21 - set mario to a costume that does not
07:23 - exist and in this case it's the mini
07:26 - mario crouch costume yeah mini mario can
07:29 - not in fact crouch and that is why there
07:32 - is no costume for this
07:34 - we need to prevent crouching from mini
07:35 - mario then so find the define handle
07:38 - keys jump crouch script
07:41 - here is where we are handling the key
07:43 - down for crouching
07:45 - add in an and
07:46 - and a mario is not equal
07:51 - mario is not equal to mini
08:00 - if i run the project now i can confirm
08:03 - that i'm smashing the down key and mario
08:06 - is not crouching and yeah there's no
08:08 - more purple square thank goodness for
08:10 - that i didn't like that purple square
08:12 - one bit
08:14 - but talking of crouching let me find
08:16 - those set mario blocks
08:19 - where'd they go uh here they are now
08:22 - clicking back into mario we can test
08:24 - that we are still able to crouch and yep
08:28 - we can still crouch and slide brilliant
08:31 - but that does pose the question
08:33 - [Music]
08:35 - switch back to mini mario and if i try
08:38 - to walk under this block i should be
08:40 - able to fit but ah no
08:43 - we are blocked by an invisible force and
08:45 - of course we are because for all the
08:47 - costume switching we have done we have
08:49 - not addressed the actual height of mario
08:51 - in the game engine where he is treated
08:53 - as full height still
08:54 - so back in the code find with me the
08:57 - define fix collision in direction dxdy
09:00 - script this is where we are looking at
09:02 - six possible collision points on mario
09:06 - notice how when mario crouches we are
09:08 - already excluding the top two points
09:10 - this reduces his height to just one
09:12 - block high
09:13 - well that sounds perfect for mini mario
09:16 - right
09:17 - so
09:18 - add an ore inside this knot and we'll
09:22 - only check these two upper collision
09:24 - points when we are not crouching
09:27 - or when mario equals mini
09:30 - nice
09:31 - let's give that a test shall we
09:34 - i'll try running under the platform
09:38 - yes that's no problem at all so what
09:41 - about the mystery blocks
09:43 - just check i can still trigger them
09:48 - yep that's brilliant and it means we
09:50 - have a mushroom to collect and you all
09:53 - know what that means
09:56 - yes now we need to add the power up
09:58 - feature to make mario transform into
10:01 - super
10:02 - mario for this we need to click into the
10:06 - enemy sprite since this is where the
10:08 - mushroom sprite lives
10:10 - find the defined tick life script this
10:12 - takes care of the mushroom sprite and
10:15 - scrolling down a bit here is where we
10:17 - detect mario picking it up
10:20 - let's broadcast a new message
10:24 - naming it collect one up
10:27 - we can use this to trigger the action on
10:29 - the mario sprite in a moment but first
10:32 - we need some new sounds do you still
10:35 - have the sound sprite in your project if
10:38 - not you'll find it in the asset project
10:40 - still
10:41 - sound number 19 is named power up listen
10:45 - to this
10:47 - and power down
10:50 - okay copy these two sounds into the
10:53 - mario sprite
10:55 - and then click back into the mario
10:57 - sprite
10:58 - confirm they are there
11:00 - and then to the code
11:02 - so this power-up action works very much
11:05 - like the mario lou's life script here in
11:08 - that while the action is taking place
11:10 - the entire game needs to pause
11:13 - this is to stop the enemies walking
11:15 - around and killing you while you upgrade
11:18 - begin by making a new when i receive
11:20 - collect one up block
11:22 - now this doesn't want to do anything if
11:25 - we are already super mario so if
11:28 - not mario equals mini
11:31 - just stop this script
11:33 - otherwise great we start the iconic
11:37 - power up sound
11:39 - and for starters just set mario to mario
11:43 - make sure to use the correct capital
11:44 - letters there for it to work and we can
11:47 - run the project
11:49 - here we go
11:50 - are you ready for this i'm excited
11:52 - [Music]
11:55 - we have upgraded this is so cool
11:58 - okay perhaps i'm overplaying this we
12:00 - still need to pause the game and show
12:02 - the actual transition animation
12:05 - firstly to pause the game loop bring in
12:08 - a stop other scripts in this sprite
12:11 - and do that right after the first if
12:14 - now we won't set mario to super mario
12:16 - right away so move that down here for
12:19 - later
12:20 - okay next up we need to wait for zero
12:23 - seconds
12:24 - now why is that well although we used a
12:27 - stopple script in sprite we have to wait
12:29 - one more game tick to allow all the
12:31 - other queued up event receivers scripts
12:33 - in the other sprites to finish running
12:35 - otherwise things will get out of order
12:37 - and all sorts of badness will creep in
12:40 - try without it if you wish and you'll
12:41 - see what i mean so we switch our costume
12:44 - to the transitional costume mario
12:46 - transform
12:48 - so we want to show this costume for two
12:50 - game frames now while the game is paused
12:53 - we still want the main game tiles to
12:55 - animate so add a repeat to and broadcast
12:58 - position tiles
12:59 - this won't allow any enemies to move but
13:02 - it will keep the tile costumes animating
13:04 - now to switch to the next costume
13:06 - duplicate the blocks above
13:08 - and switch to mario walk one that's the
13:12 - big mario costume
13:13 - i think we'll do this for three frames
13:15 - rather than two though
13:17 - but see what you prefer
13:19 - right before we can test this we need to
13:22 - set mario back to mini that is mini
13:24 - mario
13:29 - click that to set the variables and then
13:31 - click the event to see the animation
13:35 - oh wow that was short we got a little
13:38 - bob out of him but nothing more we need
13:40 - to loop this around a few times
13:44 - repeat three times and pop the two set
13:46 - costume scripts in here
13:50 - then return the whole thing back under
13:52 - the weight zero block
13:54 - set us back to the mini mario and click
13:57 - the event receiver again to test it
14:03 - right so this is just half the animation
14:05 - we currently switch between middle size
14:07 - and super mario we also need to do the
14:10 - same for mini to middle size mario in
14:13 - which case let's make a new custom block
14:16 - naming it loop transformation
14:18 - but make sure not to tick the run
14:21 - without screen refresh
14:22 - why because we want to play an animation
14:25 - in here that lasts more than one game
14:28 - frame
14:29 - put the entire repeat loop in there and
14:32 - as normal we'll then use this block
14:34 - where we took the scripts from
14:36 - then once the first animation is
14:38 - complete we finally set mario to mario
14:42 - that is big mario and use the loop
14:45 - transformation block once more
14:48 - all we need to change is which costume
14:50 - we are switching to
14:52 - of course we can use a join block
14:57 - with the walk one on the right and put
14:59 - the variable mario on the left
15:04 - this should now toggle between mini
15:06 - mario and transforming mario
15:08 - then full size mario and transforming
15:11 - mario let me just set mario back to mini
15:14 - before we can test it and here we go
15:22 - oh yeah i am liking that we have a very
15:25 - pleasant transformation there so what's
15:28 - left to do ah since we stopped the main
15:31 - game loop before playing this animation
15:34 - we need to way to kick it off again
15:36 - broadcast a new message of
15:39 - level continue game loop
15:42 - we can't use any existing receivers as
15:44 - they tend to initiate enemies etcetera
15:46 - and we don't want any of that
15:48 - if we scroll to our main game loop
15:50 - script
15:53 - you can introduce the new when i receive
15:55 - level continue game loop
15:58 - just here
15:59 - just like the other scripts we kick off
16:01 - the game loop custom block
16:06 - now hold on see how we are setting coins
16:09 - to zero when the game loop begins well
16:12 - that's no good anymore as it would
16:13 - happen when we collect a power up so
16:15 - take it out and we'll move it into the
16:18 - level start game loop
16:20 - but not our continue game loop
16:23 - but also there's another one where is it
16:31 - here we are level start game loop
16:33 - respawn
16:35 - this one also needs a set coins to zero
16:37 - before the game loop begins great
16:40 - now just one more change before we test
16:42 - this baby out find the define reset
16:45 - player script and we need to set mario
16:48 - to
16:49 - mini
16:55 - down at the bottom
16:59 - yeah and with that we are ready to test
17:02 - once more here we go now i'm even more
17:05 - excited to see the full classic
17:07 - transformation take place are you
17:11 - [Music]
17:19 - and oh yes now that's what i'm talking
17:22 - about if you got this far then i bet you
17:24 - are celebrating too because this is just
17:27 - too cool
17:31 - well then they say what comes up must
17:34 - come down so look when we now contact an
17:37 - enemy we are still launching into the
17:39 - lose life animation but when in super
17:42 - mario mode this is no longer how things
17:44 - should work by being super mario we
17:47 - should get a second chance that is we
17:49 - should shrink back to mini mario and
17:51 - continue from there now this is a little
17:54 - bit more tricky because it's not always
17:56 - the case for example dropping off the
17:58 - bottom of the screen is fatal no matter
18:01 - how big you are
18:02 - [Music]
18:06 - so we need to differentiate between
18:08 - different ways you can get hurt
18:10 - click into the enemy sprite
18:13 - we need to locate all the places where
18:15 - we broadcast mario lou's life
18:18 - if you have my dev tools extension or
18:20 - scratch add-ons installed then that
18:21 - comes in really useful here i'm looking
18:24 - up the lose life event
18:26 - okay here is one
18:31 - it's in the tick goomba script we're
18:33 - going to change it to a new event
18:38 - naming it mario hurt
18:49 - okay the next one is tick piranha
18:52 - change it to mario hurt
19:01 - tick shell
19:05 - again change it to mario hurt
19:10 - and that looks like it good
19:13 - so back into the mario sprite we go
19:17 - and look for the when i receive mario
19:20 - lou's life script
19:22 - well saying that we aren't actually
19:24 - going to do anything with that but we
19:26 - are going to make a new when i receive
19:28 - mario hurt script to work alongside it
19:32 - firstly if we are hurt and we are mini
19:35 - mario that is mario equals mini
19:40 - then we can simply defer to the lose
19:41 - live script by broadcasting mario lou's
19:44 - life
19:46 - and then stop this script
19:49 - but otherwise we want to play a new
19:52 - power down animation
19:54 - so as before we stop other scripts in
19:56 - this sprite
19:58 - and then wait for zero seconds again for
20:00 - the other broadcast to end
20:02 - loop transformation to play the first
20:04 - half of the animation and then set mario
20:07 - back to mini capital m
20:10 - loop transformation again to play the
20:12 - second half of the animation
20:14 - and broadcast level continue game loop
20:18 - [Music]
20:19 - smash that green flag i think first we
20:23 - should test we can still lose a life as
20:25 - mini mario
20:28 - yes we can no problems there although i
20:32 - still rather like seeing the correct
20:34 - little mario sprite when that happens
20:36 - but now as big mario let's go to our
20:39 - doom yes we shrink
20:42 - but oh no what happened we still died
20:45 - even so
20:47 - but of course since the game starts up
20:49 - again we are still touching the goomba
20:52 - so goomba gets to kill us all over again
20:55 - and that's it for mini mario okay so
20:58 - this is a little bit more complicated
20:59 - than it first looked
21:01 - the secret success here is that when
21:03 - mario gets hurt we should become
21:05 - invulnerable for a short amount of time
21:08 - that is he should flash a lot
21:11 - and not be able to be hurt just for a
21:12 - moment while and after he shrinks down
21:15 - again oh man but before we move away i
21:18 - forgot to play the power down sound
21:21 - just before we wait here start the power
21:23 - down sound
21:25 - right let's make a new variable yay call
21:29 - it invulnerable if you can spell it and
21:32 - make it for this sprite only
21:36 - then just after the wait
21:39 - set it to around 70 frames should do the
21:43 - trick
21:44 - that should end up giving us around a
21:46 - second and a half of time
21:48 - so now when this mario hurt event is
21:51 - triggered we can add in a new if check
21:54 - and say if invulnerable is greater than
21:57 - zero
22:00 - just stop this script you can't be hurt
22:02 - right now
22:04 - notice this doesn't stop us losing a
22:06 - life
22:07 - just not being hurt
22:10 - now if we look in the loop
22:11 - transformation script
22:13 - notice we always broadcast position
22:15 - tiles even if we are transforming
22:18 - this is the only receiver that is always
22:21 - broadcast at all times during the game
22:24 - we can make use of this to make our
22:26 - player flash
22:27 - when i receive position tiles
22:30 - if invulnerable is greater than zero
22:33 - then
22:38 - change invulnerable by minus one
22:42 - so that will count it back down to zero
22:44 - with each tick of the game
22:46 - now we want to flash mario every other
22:48 - frame
22:49 - we'll use a mod two for that so if in
22:52 - vulnerable mod 2
23:00 - is less than 1
23:02 - we can set ghost effect to 0. now a
23:05 - ghost effect of 0 means that the sprite
23:07 - is fully visible
23:08 - so when invulnerable is an even number
23:11 - and that includes 0 of course the sprite
23:14 - will be fully visible
23:15 - but when it's an odd number we set ghost
23:18 - effect to 99 that's pretty much
23:21 - invisible
23:22 - coolio let's test this
23:24 - [Music]
23:29 - just powering up and wait for it
23:34 - yes
23:35 - now that was very successful did you
23:38 - notice how we began flashing throughout
23:40 - the shrinking animation too that was
23:42 - exactly as planned and then the flashing
23:44 - stops and we should be
23:47 - here very vulnerable once more superb
23:51 - oh man goomba how dare you and not to
23:54 - worry all good testing right
23:56 - [Music]
23:59 - here i come gumbers
24:01 - actually i've changed my mind we should
24:03 - go all the way across the level
24:05 - and when we get to the
24:07 - yeah so we're gonna try dropping to our
24:09 - death
24:10 - as big mario
24:11 - [Music]
24:13 - okay nice we still come to our demise
24:16 - right away as it should be
24:19 - i wonder if it was supposed to switch to
24:20 - the small mario death sprite there drop
24:23 - me a comment if you know
24:25 - right
24:26 - we should make sure this invulnerable
24:28 - variable gets reset at the start of the
24:30 - game
24:31 - find the reset player script and we'll
24:34 - set invulnerable to zero after setting
24:37 - mario to mini
24:40 - so
24:41 - we are drawing to a close now but before
24:44 - we do let's just address one more thing
24:46 - that mini mario should not be able to
24:48 - jump quite as high as super mario around
24:52 - one block less i believe
24:54 - find the define handle keys jump and
24:56 - crouch script
24:58 - there's all sorts of ways we could fix
25:00 - this but the simplest right off the bat
25:02 - is to locate the start sound jump block
25:04 - here
25:05 - this is where we launch a new jump stick
25:08 - in an if right afterwards checking
25:10 - whether mario equals mini
25:18 - then if it is quickly set jumping to 3.
25:22 - this skips the first frames of the jump
25:24 - limiting the maximum height we can reach
25:26 - when in mini mario mode
25:28 - let's just test this out if i come over
25:30 - here to these mystery blocks and now
25:33 - test how high i can jump
25:35 - okay good so i could headbutt them but i
25:38 - can't jump high enough to get on top but
25:41 - then if i collect the mushroom and then
25:43 - come back to the same point
25:46 - look i can now jump right up above the
25:48 - mystery blocks brilliant
25:50 - and on that bombshell this episode has
25:53 - drawn to an end can i ask how your tile
25:57 - based scrolling games are coming along
25:59 - are you building a mario like me or
26:01 - making it all your own drop me a comment
26:03 - below and let me know what you're up to
26:06 - if you enjoyed this video then smash the
26:08 - like button and don't forget to
26:09 - subscribe to the channel so you get
26:11 - notified of the next video as it comes
26:13 - around if you want to support the
26:15 - channel further then you can become one
26:16 - of my paid members then you not only get
26:19 - those cool custom channel emojis but you
26:21 - also get priority replies and comments
26:24 - early access to videos and even the
26:25 - scratch projects themselves wow
26:28 - thank you so much for watching and until
26:30 - next time scratch on guys
26:33 - [Music]
26:38 - you

Cleaned transcript:

hello fellow scratchers i'm griff patch and welcome back to part 18 of our tile scrolling series probably soon to be rebranded as our how to code super mario advance 4 in scratch series today we finally will be adding mario what do you think we added them a long time back well kinda yeah but there's a difference between mario and super mario super mario is of course the big mario player while mario well he's the little tiny guy we start out with so today we add mini mario yay long time coming right in doing so we will introduce the power mechanic for mushrooms for this epic transformation into super mario and of course his power down when he gets caught by an enemy this is really fun to have and makes the game so cool for this we will of course need some new costumes so do head over to the starter asset project linked under this video take a look in the mario sprite costumes and scroll down there costumes 11 and onwards are the new mini mario costumes if i zoom in yeah there he is just open your backpack and drop the entire mario sprite in there great okay so open your tile scrolling projects from part 17. to prevent us losing any work make sure to save it as a copy and once scratch has stopped whirring we can name it part 18. yay guys let's get scratching we'll begin by bringing in those new costumes open your backpack again and drag the mario sprite into this project now we have the mario 2 sprite we want to find the mini walk 1 costume number 11 and then one by one we'll drag them into the official mario sprite like this all the way up to costume 19. super before we delete the mario 2 sprite just click into the mario and ensure we have all 19 costumes in there yep so delete mario 2. before we make use of any of these costumes let me just explain how they are set up it's important to realize i don't just chuck these costumes into scratch they are very purposefully positioned and aligned to work just right here is the big super mario costume if i leave a copy on the screen so that you can see how things line up then i'll switch to the mini mario now see how his feet are perfectly aligned with super mario this ensures as we switch between costumes we still have his feet on the floor now we could have done this a very different way by centering mario vertically and changing the height variable but as you will see this way turns out a lot less complicated now the walk animation of mini mario is just two frames rather than super mario's four to simplify our code i have therefore duplicated up the two mini mario walking costumes to make it a four frame walk cycle two now did you notice the names of these costumes is very specific all the super mario costumes begin with mario and the mini mario ones begin with mini other than that what follows is the same walk one turn jump this will make coding up the animations much easier you'll see in a moment oh and then there's this last costume mario transform this one is a midheight mario between the mini and the super mario we'll use this to add a little pizzazz to our power up and down animations so are you ready our coding begins in the super mario sprite find with me the define paint sprite custom block now i'm using scratch addons quite heavily in this tutorial to find my way around when the project gets as big and complicated as this one it becomes a lifesaver so this script sets mario's costume based on their current action you can see all the switch costume names are mario this and mario that well that's useful because now we have a new set of mini mario costumes that all start mini this and mini that let's make it so that we can quickly switch between the two costume sets start by making a new variable naming it mario for all sprites now set it to mario oh dear scratch is still only showing half my block as i drag it around i hope that gets fixed soon duplicate that and this time set it to mini that's our new costume set name so bring in a join so where we are switching costume here to mario crouch we can join our mario variable with the word crouch to give us the full name mario crouch we just need to make absolutely sure we have written this without any typos and even the capital letters must be the same otherwise this will not work once we are sure we can drop it into the switch costume like so now we work our way down each of these switch costume blocks duplicating the join block and entering the corresponding costume action mario death mario jump mario walk three mario turn ah now this walk animation is not quite so straightforward we don't use a name here but the number one no problem though start by adding a new switch costume above it and oh yeah this is where we start with mario walk one now we replace this like the others with a join mario with walk one then when we had a one here below we replaced that with the current costume number block since that will now be the number of the first walk costume great it's time to give that a test assuming that mario variable is still set to mario with a capital m our costumes should look like they have for the last 16 episodes or so okay not so exciting but very cool that it is indeed looking correct but now for some fun click the set mario to mini block and pow did you see that we instantly switched over to the mini mario costume set that's awesome oh it's so refreshing to see him looking like this and there's his original losing live costume yes and of course we can just click on the blocks to switch back and forward between mario and super mario how cool is that and so easy to do just by being careful with how we named the costumes do you see how this could be extended to add even more types of mario later on if we wanted yeah i bet you did so tell me since mini mario is so small what happens when we crouch oh no what's this oh the dreaded purple square invasion has begun it's been a long time since we had one of these if you remember this occurs when we try to set mario to a costume that does not exist and in this case it's the mini mario crouch costume yeah mini mario can not in fact crouch and that is why there is no costume for this we need to prevent crouching from mini mario then so find the define handle keys jump crouch script here is where we are handling the key down for crouching add in an and and a mario is not equal mario is not equal to mini if i run the project now i can confirm that i'm smashing the down key and mario is not crouching and yeah there's no more purple square thank goodness for that i didn't like that purple square one bit but talking of crouching let me find those set mario blocks where'd they go uh here they are now clicking back into mario we can test that we are still able to crouch and yep we can still crouch and slide brilliant but that does pose the question switch back to mini mario and if i try to walk under this block i should be able to fit but ah no we are blocked by an invisible force and of course we are because for all the costume switching we have done we have not addressed the actual height of mario in the game engine where he is treated as full height still so back in the code find with me the define fix collision in direction dxdy script this is where we are looking at six possible collision points on mario notice how when mario crouches we are already excluding the top two points this reduces his height to just one block high well that sounds perfect for mini mario right so add an ore inside this knot and we'll only check these two upper collision points when we are not crouching or when mario equals mini nice let's give that a test shall we i'll try running under the platform yes that's no problem at all so what about the mystery blocks just check i can still trigger them yep that's brilliant and it means we have a mushroom to collect and you all know what that means yes now we need to add the power up feature to make mario transform into super mario for this we need to click into the enemy sprite since this is where the mushroom sprite lives find the defined tick life script this takes care of the mushroom sprite and scrolling down a bit here is where we detect mario picking it up let's broadcast a new message naming it collect one up we can use this to trigger the action on the mario sprite in a moment but first we need some new sounds do you still have the sound sprite in your project if not you'll find it in the asset project still sound number 19 is named power up listen to this and power down okay copy these two sounds into the mario sprite and then click back into the mario sprite confirm they are there and then to the code so this powerup action works very much like the mario lou's life script here in that while the action is taking place the entire game needs to pause this is to stop the enemies walking around and killing you while you upgrade begin by making a new when i receive collect one up block now this doesn't want to do anything if we are already super mario so if not mario equals mini just stop this script otherwise great we start the iconic power up sound and for starters just set mario to mario make sure to use the correct capital letters there for it to work and we can run the project here we go are you ready for this i'm excited we have upgraded this is so cool okay perhaps i'm overplaying this we still need to pause the game and show the actual transition animation firstly to pause the game loop bring in a stop other scripts in this sprite and do that right after the first if now we won't set mario to super mario right away so move that down here for later okay next up we need to wait for zero seconds now why is that well although we used a stopple script in sprite we have to wait one more game tick to allow all the other queued up event receivers scripts in the other sprites to finish running otherwise things will get out of order and all sorts of badness will creep in try without it if you wish and you'll see what i mean so we switch our costume to the transitional costume mario transform so we want to show this costume for two game frames now while the game is paused we still want the main game tiles to animate so add a repeat to and broadcast position tiles this won't allow any enemies to move but it will keep the tile costumes animating now to switch to the next costume duplicate the blocks above and switch to mario walk one that's the big mario costume i think we'll do this for three frames rather than two though but see what you prefer right before we can test this we need to set mario back to mini that is mini mario click that to set the variables and then click the event to see the animation oh wow that was short we got a little bob out of him but nothing more we need to loop this around a few times repeat three times and pop the two set costume scripts in here then return the whole thing back under the weight zero block set us back to the mini mario and click the event receiver again to test it right so this is just half the animation we currently switch between middle size and super mario we also need to do the same for mini to middle size mario in which case let's make a new custom block naming it loop transformation but make sure not to tick the run without screen refresh why because we want to play an animation in here that lasts more than one game frame put the entire repeat loop in there and as normal we'll then use this block where we took the scripts from then once the first animation is complete we finally set mario to mario that is big mario and use the loop transformation block once more all we need to change is which costume we are switching to of course we can use a join block with the walk one on the right and put the variable mario on the left this should now toggle between mini mario and transforming mario then full size mario and transforming mario let me just set mario back to mini before we can test it and here we go oh yeah i am liking that we have a very pleasant transformation there so what's left to do ah since we stopped the main game loop before playing this animation we need to way to kick it off again broadcast a new message of level continue game loop we can't use any existing receivers as they tend to initiate enemies etcetera and we don't want any of that if we scroll to our main game loop script you can introduce the new when i receive level continue game loop just here just like the other scripts we kick off the game loop custom block now hold on see how we are setting coins to zero when the game loop begins well that's no good anymore as it would happen when we collect a power up so take it out and we'll move it into the level start game loop but not our continue game loop but also there's another one where is it here we are level start game loop respawn this one also needs a set coins to zero before the game loop begins great now just one more change before we test this baby out find the define reset player script and we need to set mario to mini down at the bottom yeah and with that we are ready to test once more here we go now i'm even more excited to see the full classic transformation take place are you and oh yes now that's what i'm talking about if you got this far then i bet you are celebrating too because this is just too cool well then they say what comes up must come down so look when we now contact an enemy we are still launching into the lose life animation but when in super mario mode this is no longer how things should work by being super mario we should get a second chance that is we should shrink back to mini mario and continue from there now this is a little bit more tricky because it's not always the case for example dropping off the bottom of the screen is fatal no matter how big you are so we need to differentiate between different ways you can get hurt click into the enemy sprite we need to locate all the places where we broadcast mario lou's life if you have my dev tools extension or scratch addons installed then that comes in really useful here i'm looking up the lose life event okay here is one it's in the tick goomba script we're going to change it to a new event naming it mario hurt okay the next one is tick piranha change it to mario hurt tick shell again change it to mario hurt and that looks like it good so back into the mario sprite we go and look for the when i receive mario lou's life script well saying that we aren't actually going to do anything with that but we are going to make a new when i receive mario hurt script to work alongside it firstly if we are hurt and we are mini mario that is mario equals mini then we can simply defer to the lose live script by broadcasting mario lou's life and then stop this script but otherwise we want to play a new power down animation so as before we stop other scripts in this sprite and then wait for zero seconds again for the other broadcast to end loop transformation to play the first half of the animation and then set mario back to mini capital m loop transformation again to play the second half of the animation and broadcast level continue game loop smash that green flag i think first we should test we can still lose a life as mini mario yes we can no problems there although i still rather like seeing the correct little mario sprite when that happens but now as big mario let's go to our doom yes we shrink but oh no what happened we still died even so but of course since the game starts up again we are still touching the goomba so goomba gets to kill us all over again and that's it for mini mario okay so this is a little bit more complicated than it first looked the secret success here is that when mario gets hurt we should become invulnerable for a short amount of time that is he should flash a lot and not be able to be hurt just for a moment while and after he shrinks down again oh man but before we move away i forgot to play the power down sound just before we wait here start the power down sound right let's make a new variable yay call it invulnerable if you can spell it and make it for this sprite only then just after the wait set it to around 70 frames should do the trick that should end up giving us around a second and a half of time so now when this mario hurt event is triggered we can add in a new if check and say if invulnerable is greater than zero just stop this script you can't be hurt right now notice this doesn't stop us losing a life just not being hurt now if we look in the loop transformation script notice we always broadcast position tiles even if we are transforming this is the only receiver that is always broadcast at all times during the game we can make use of this to make our player flash when i receive position tiles if invulnerable is greater than zero then change invulnerable by minus one so that will count it back down to zero with each tick of the game now we want to flash mario every other frame we'll use a mod two for that so if in vulnerable mod 2 is less than 1 we can set ghost effect to 0. now a ghost effect of 0 means that the sprite is fully visible so when invulnerable is an even number and that includes 0 of course the sprite will be fully visible but when it's an odd number we set ghost effect to 99 that's pretty much invisible coolio let's test this just powering up and wait for it yes now that was very successful did you notice how we began flashing throughout the shrinking animation too that was exactly as planned and then the flashing stops and we should be here very vulnerable once more superb oh man goomba how dare you and not to worry all good testing right here i come gumbers actually i've changed my mind we should go all the way across the level and when we get to the yeah so we're gonna try dropping to our death as big mario okay nice we still come to our demise right away as it should be i wonder if it was supposed to switch to the small mario death sprite there drop me a comment if you know right we should make sure this invulnerable variable gets reset at the start of the game find the reset player script and we'll set invulnerable to zero after setting mario to mini so we are drawing to a close now but before we do let's just address one more thing that mini mario should not be able to jump quite as high as super mario around one block less i believe find the define handle keys jump and crouch script there's all sorts of ways we could fix this but the simplest right off the bat is to locate the start sound jump block here this is where we launch a new jump stick in an if right afterwards checking whether mario equals mini then if it is quickly set jumping to 3. this skips the first frames of the jump limiting the maximum height we can reach when in mini mario mode let's just test this out if i come over here to these mystery blocks and now test how high i can jump okay good so i could headbutt them but i can't jump high enough to get on top but then if i collect the mushroom and then come back to the same point look i can now jump right up above the mystery blocks brilliant and on that bombshell this episode has drawn to an end can i ask how your tile based scrolling games are coming along are you building a mario like me or making it all your own drop me a comment below and let me know what you're up to if you enjoyed this video then smash the like button and don't forget to subscribe to the channel so you get notified of the next video as it comes around if you want to support the channel further then you can become one of my paid members then you not only get those cool custom channel emojis but you also get priority replies and comments early access to videos and even the scratch projects themselves wow thank you so much for watching and until next time scratch on guys you
