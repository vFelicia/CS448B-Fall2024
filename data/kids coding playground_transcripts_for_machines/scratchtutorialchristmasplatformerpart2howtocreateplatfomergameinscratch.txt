so welcome back guys it's kids coding flickround here today we'll be finishing the second part of the christmas platformer so from yesterday we had this code so like all this i'm gonna slowly go through it so if you did not finish anything you can do it right now you can pause the video and then we have the animated character that's it and then yesterday from yesterday we were able to make the player move around with friction so yeah that was what we did from yesterday so uh we're going to work on the pla main character now so let's go here so remember from the move player x speed x we're going to work on this so we have a variable called deviation so the variables without g in front of it are for this sprite only you have to make deviation for this sprite only it's a variable so you're just going to do this set the deviation to zero so what deviation is for is for the collision with walls and stuff like that so we're going to repeat until repeat until uh deviation is equal to 8 or not touching ground so before i had deviation equals 5 which does not work out very well because like you can glitch through the candy canes on one of my levels so you want to do eight so it depends on what your levels look like so i'm just doing i'm gonna do eight then we're gonna get a knot touching ground so if it's not touching the ground touching ground okay and then we're gonna change the y by one change y by one and then we're gonna change the deviation by 1. and after that we're going to get an if then statement so um if else statement so let's go control and if else statement put it under this thing so we're going to get if if it's touching the ground if touching ground uh and so this is for the wall jumping so we're going to put in if else in the first if then statement if then slot and then if the key up or the w is being pressed so i'm gonna do if key up up or w so duplicate that w uh right there so this is for wall jumping and and then we're going to get another if else statement so go to control and we're going to put that in the first slot um and i actually think this is not supposed to be an if else sorry about that it's supposed to be an if then not an if else so the first this if touching ground should be an if then so put that right there ground and then put this in like that so if key up or key w is being pressed then we are going to in this fl statement we're going to do if that whatever that speed x is right here is greater than zero so zero is greater so we're going to get speed x than zero then we're going to set the speed x and negative 16. so this is the wall jumping script set g speed x to negative 16. else we're going to set g speed x to 16 and then we're gonna set in here right here we're going to set the on ground to zero set on ground to zero so when uh on ground is equal to zero that means the player is inside the air and then next we're going to use the jumping variable we made i think so jumping it's for the sprite only we're gonna set jumping to one jumping to one means it's jumping in progress so we're gonna set jumping to one and then we're gonna set the g velocity to ten so that's gonna be the velocity and then we're gonna change the x by the g speed x change x by g speed x we're here and after that we're going to get uh else right here we're going to set the g speed x to zero okay and then after this we're going to get an if that statement if deviation is equal to eight if deviation is equal to eight deviation right here then we're going to do a change x change x by zero minus sx so that's going to be speed x the zero minus whatever the value speed x is so i'm going to get a subtraction symbol 0 minus the speed x so after that we're going to duplicate this i mean not duplicate it we're going to get change y instead to change the y by zero we duplicate this though instead of speed x we're going to minus it by the deviation okay so after that this is the code for the wall jumping and like collision script okay so next we want to make another custom block so we're going to call it jumping and we want to click the run screen without refresh right here so we have the jumping now let's define it okay so we're gonna get if then statement we're gonna just duplicate this if he up arrow or w is being pressed put that in here now we're gonna get another if then statement if the g on ground is greater than zero this means it is on the ground if it's greater than zero so if the g on ground is greater than zero that means it is on the ground if it's equal to zero then it's in the air so it's greater than zero it's on the ground okay so we're only going to allow the person to jump if it's on the ground so we're gonna have to set the g on ground g on ground to zero so if the player is on the ground that means we're gonna set it g on ground to zero that means you can jump and we're gonna set jump into one so then you can actually jump jumping a one and then we're going to set the g velocity to 15. okay so now we're finished with the jumping custom block remember what we did right here in start all control we're gonna have to um call up some more functions right here so right here we're gonna call jumping as well along with the movement control okay so this is we're gonna get an if else statement so this is like jumping gravity and all that stuff so when you're falling down you'll fall quicker and when you're jumping up you'll uh fall slower so when you're jumping falling down from like right here you're gonna fall faster so we're going to get an ifelse statement duplicate this code up arrow or key w and put that right here and then after that we're going to go to the variables and then we're going to change the g velocity velocity by the g gravity g gravity and then else we're going to change the g velocity by g gravity by times two so g gravity we define right here as negative one right here so that means if you multiply it by two that means it'll be negative two so you're going to fall faster if you're falling down from the high area so like that and then after that we're going to change the y by the g velocity so the g velocity is going to be the y so we can change y by the g velocity g velocity okay so now we've done all of that so as you can see right now when you click the play they'll just fall down immediately because we have not done the ground detection so that's why the ground is not working right now so you have to um just we're gonna add the code later after this so like when you click play the ground is not detecting it's not blocking him so now let's work on the script for that so we're gonna define a new custom block let's make a new block so we're gonna click the run screen without refresh and then we're going to name this block check hit ground so we're going to name it check hit ground so to detect if it's hitting the ground and we're going to add a boolean input we're going to call it is jump so is jumping fun screen that refresh okay and then we're going to click ok right here and now we can define this thing so we're going to repeat until control repeat until repeat until not touching ground touching ground uh and then if we're going to get an if else statement so we're going to put this right here so later we will define we'll call this function so you don't have to worry about it right now we'll call it later so then if it's not touching the ground then so like you you spawn right here right so we're gonna keep on decreasing the y by negative one so change y by negative one and then we're going to set the g velocity to zero g velocity to zero and after that else we're gonna change the y by one so then it will constantly push the player up on the ground so then it won't fall through that's why we did the run screen without refresh so then it's always refreshing so then it's always updating so the player will never fall through so we're gonna change the y by one the run screen that refresh just makes it immediate so then it won't fall through so that's what it does so then we're gonna do change y by one change y by one so then it'll keep on pushing it up we're gonna set the g velocity to zero and then set on ground to one set on the ground to one okay so on ground is greater than one so right here okay so we set the uh g on ground to one because it's on the ground because right here we defined it right here as if the g on ground is greater than one that means it's on the ground okay so now we have to add another if then statement let's go to control if jumping is equal to one if jumping is equal to one uh then we're gonna set jumping back to zero set jumping to zero okay and then now we're gonna have to define what this boolean input is so next we're gonna get a check platform detections from up here we broadcasted check platform detection right here so now we're gonna receive it so we're here when i receive check platform detection we're gonna get this boolean input so if the g velocity is greater than zero this is what this is is jumping is g velocity greater than zero the velocity is greater than zero okay so that's what we're gonna put there okay so now let's try it out okay now let's try it out so as you can see now it is uh blocking the player from falling down so now you can um move on the ground pretty fine and you have a little bit of friction okay now i think we can work on maybe the spikes and we can create one level okay also since we coded the jumping now you can actually jump so let's play it you can move around you can jump so that's what we can do right now jump and move around so yeah we will work on the other levels now so let's go so for the ground we have uh a bunch of costumes i'm just gonna use the first costume right now we're just gonna do one level for testing so let's go let's start out on the spikes so we're going to be using columns so in the spikes i'm going to get it when green fly clicked it's too big uh when green flag is clicked point direction of 90 because in one level i made it flip upside down so if you are going to make spikes flip upside down you have to make it point direction of 90 in the beginning and we're going to make it go to the front layer and hide in the beginning we're going to make a new my block place clone at so we're going to be using clones like i said put two inputs one has to be at x and one is y okay so then click okay and then we're going to set the x and y so we're going to make its other new variables so i think we already have them right here as you can see we have x and y so for the x and y we have to make them for this sprite only so make the x and y variable for just the spikes only so we're going to set the x to this x and we're going to set the y to this y and after that we're going to show and create a clone of myself okay after creating a clone when i start as a clone we want to go to the x and y so go to whatever the x and y value is which is this okay and then next we want to um we want to receive a message called reset okay so now let's go to the main character so before we can finish the spikes we have to broadcast a message from the main character so remember we had this check player position so we're gonna need it check player position player position so and then we're going to get forever loop forever loop um if you don't have to worry about the top right now yet but we'll need it later so we're just going to add it right now so if touching green flag and level is less than 11 um i did 10 levels that's why um 11 levels um so we're just gonna do like three levels right now so i'm just going to do it less than three so then we're going to do touching green flag green flag and then we're gonna um less than i'm just gonna do three for now um level the variable level then we're gonna change the level by one so like when you touch the green flag change the level by one change level by one and then we're gonna broadcast a message then we're going to name it start new level start new level okay and then start new level we're going to broadcast it into here so let's broadcast start new level right here in the main character so start new level we're going to we're going to broadcast reset and wait um we're gonna broadcast reset a new message reset and we're gonna broadcast setup so these are for like the other sprites setup is when you need multiple and yeah that's these are for the basically those obstacles and then we're gonna broadcast another start new level so when i receive start new level uh then we're gonna reset the player reset player and we're gonna broadcast start game start game okay okay so now after this we're going to go to the spikes so let's go to the spike code okay so now in the spikes we're going to get a reset so like this is when you reset you're gonna have to delete all the clones so when i receive reset delete this clone and then down here in setup this is setting up all of these spikes so setup we are going to set the x and y to zero in the beginning set x and set y to zero x and y and then we're going to get a if level is equal to one we only have one level right now so if level is equal to one so level one level and then we're going to use the place to clone block so you can just show the spikes like you can move this out of the way you can like drag it maybe like right here and then i'll show the x and y let's go back to the spikes and then we just write the x which is uh 17. and the y is negative 150 okay so spikes obviously don't kill you right now but as you can see they will place the spikes there and you can jump around there's a little bit friction so yeah that's basically it for this tutorial and actually one last thing before we end the video we actually want to add a little bit more code so right here we're going to go to the ground when green fly clicked go to zero zero let's go to the center go to zero zero and then we're gonna get a forever loop forever if level is less than four okay so if the level is less than four we're just gonna do four for now level and we're gonna switch the costume to whatever level it is switch costume to level put that in here okay so now when you touch the green flag as you can see let's play it when you touch the green flag it will switch to the next level you can see wall jumping is working as well so yeah as you can see it's going to the next level but it's not fully functioning yet so yeah that's basically it for this tutorial um if you enjoyed this video be sure to leave a like and subscribe and ring the notification bell as well see you guys in the next video bye you