in this video we're going to make a radar chart as commonly used in RPGs to display stats we're going to create a class to found our stats and then we're going to make the UI script to dynamically generate and update our radar chart let's begin hello and welcome I'm your code monkey and this channel is all about helping you will learn how to make your own games with indepth tutorials made by a professional indie game developer so if you find the video helpful consider subscribing alright so here's what we want to create we have the radar chart element in here with our five underlying stats over here we can see the inner values our stats go from 0 to 20 and you can see the radar correctly this place those inner valence with these nice buttons I can test to update so as you can see the offense goes down and that edge goes down goes up and it goes up so as I modify you can see that the radar chart correctly updates to any single value and here we are using a mesh in order to dynamically draw the radar chart based on these underlying values now we're going to start off by creating a simple stats class and set it up to hold a single stat then we're going to create the script to represent that stat in the UI along with some buttons to test it then we're going to modify our script to home multiple stats after that we're going to learn how to create a mesh in the UI and display two stats as a simple triangle and then we're going to add all of the remaining stats and play around with the values so we won't be creating both the radar chart and the underlying nice clean stats class so if only we want to see is how to create the UI mesh then skip to the later part of the video alright so this is our goal let's get to it so here we are in a completely empty scene now let's start off by creating a class to home our stats so here in the project folder go to scripts create a new C sharp script and let's just call this stats okay here's our code now first we're going to get rid of mana behavior since this class is going to be extremely simple so get rid of all this now all we really need to store is the value of each stat however as always let's make sure that we write clean code so here for example your first instinct might be to make a bunch of simple public ends that would work but you would be exposing the values to every other class in your program and they could easily be modified outside the valid ranges so it would not be good code since it would be very easy to break so inside this quad most or all of the underlying values privately and only expose functions to modify them so in here can make a private int let's come out our attacks that and then we expose a public void set attack stack amount so now we have this function exposed in order to set our text at and in here we can validate our new amount so in this case all we really want is to make sure that the value is above a certain minimum and billow a certain maximum so let's store those minimum and maximum as constants so all the way up here a public static int for the stat min and let's say the mean is zero and a public static int for the static max which in this case let's put it at 20 so every single staff can go from 0 to 20 this also makes it very easy to modify so if you had a game with the staff max of a hundred you would need to just change this constant and everything else will work fine so in here we do our validation so just like that we are clamping our value between a minimum and a maximum all right so this should do it now let's make a function to return the current value so we are again exposing a public function in order to return the value and now we need as a constructor to set the starting value all right so far so good we have nice clean class to home our stat value obviously later we will expand it to support all the other stats but for now let's keep it simple and make everything work with a single stat now that we have this set up let's make a testing script to test our code so back in the editor let's make a new csharp script let's just call this testing and let's create a new game object and we simply drag our testing script on to it okay now over here in our testings group this won't indeed extend mana behavior and here let's go into our private void start and in here we can test our class so let's first instantiate our stats object so we aren't sentient it with ten on our text at amount and then let them like do a debug blog on our stats that get a tax that amount okay so everything goes well we should be able to see a ten in our console let's test and if there it is a ten on the console okay great alright so we can now create and read our stats class this will be the basis that we're going to use in order to display our radar chart so let's make our UI object so we're here let's go into the canvas if you don't like to know how the campus is set up check out my video on how I do my basic setup for the UI so here all we need to do is create the new game object let's call this the UI stats radar chart and inside and let's create a UI image for our background and if we're on the project folder I have this nice background here it is a nice radar chart with five sides and let's also add a nice text object just to be our attack text label all right so here's our basic visual setup we have a background on top of the background we're going to dynamically generate a radar chart and we're going to have labels on various edges to indicate what each edge represents now in order to certain things and bones out of the radar chart and let's start off with a very simple bar once we have on the code working with a simple bar then we'll work on replacing the bar with a radar chart mesh so over here and let's create a new image this won't be our bar let's simply put the anchor on the bottom put it on zero zero and make it a rectangle like that now just stretch it to occupy right there on the edge and just like that okay so this bar won't work for our testing through code all we're going to do is modify the scale in here we're going to modify the Y and essentially if it's a Y of one it's going to be right at the edge so fooling max out on the attack and if it's less than it's less so it goes from zero to one okay great now let's make the code to handle all this so in here making a news script this won't be the UI stats radar chart and let's just drag it onto our main game object okay like that all right so now in here let's make a function to receive our stats object and store it all right so we have our private stats our inner object and we have a public function in order to set the stats now let's make a function to update the visual and in here we're going to update the bar so let's see how we set it up in the editor in here and let's just rename this instead of image let's call it the attack bar so we're going to grab the reference this game object and we're going to modify the scale on the one so this is where we need to modify our visual which means in here we need to go into these stunts and to get the attacks at amount however we want to get a normalize value rather than the actual amount so let's add that to our stats class so over here let's make a public will return the float let's go get Attack stat amount normalize and we return our normalized value so really all we need is a tax that divided by the maximum now since these are two ends we need to make sure to convert one of them to float in order to get a return foot all right so that's it now this function will return a value between 0 and 1 and now we can go back in here and we can now use this function to get the value that we're going to set into our attack bar yaxis all right that's it this should do it now let's just update it over here when we set stance we update the visual okay so this should be working now all we need to do is call this function so let's go into our testing script and over here first we need a reference to the UI stats radar chart so let's add it as a serialized field for our private UI stats parade our chart and with a reference after we create our stats object we simply call set stats and we pass in our stats object okay so our testing starts testing it in Senshi it's the stats it calls set stats on our UI script and the UI script sets the internal stats and updates our stats visual based on the amount that is on the attack stat so over here we are currently with 10 out of a maximum of 20 so our bar should be at half size yeah this is a serialize film so let's drag it in the editor over here is the testing game object there's our film and let's just drag this onto it all right that you do it lets test any up there it is our nice bar is at half size so we correctly have communication between our stats class and the UI display object now let's add some testing buttons to modify the stats amount in real time for land over here in the testing class for some testing buttons there are some on the code monkey utilities as long as you can download the utilities for free from in Tacoma comm utilities I have a function to make some nice testing button so let's use that I want to have the button to increase and want to decrease the stat amount right now the only function we have to modify is in order to set the amount so let's set some helper functions are to increase or decrease by 1 so we're here on the stats class let's make a public void called increase attach that amount another one for a decrease so here all we're doing is we set it to the current one pause one or the current one minus one okay right now we can use this functions on our button alright so we should have two buttons that when I was test increasing and decreasing our tax that amount now when we do that we need to make sure that our UI updates right now it's only updating when we set stats so since we have a mana behavior we can simply use our private ROI update and over here we just update our stats every frame all right let's test okay so here we are with two nice testing buttons and as you can see it starts off at half now let's increase and see if the bar increases and there you go it increases and let's see the maximum and yep it reaches maximum can no longer go higher now the and you it goes down and reaches zero and there you go doesn't go down anymore all right awesome so we now have the UI correctly displaying any value that we have on the underlying stats object now there's one thing we can improve in here right now on our UI we are updating on every frame so this works as you can see but it is quite wasteful most of the times it's updating when the underlying stats didn't change at all so we are really just wasting CPU cycles and necessarily so let's make sure we only update when needed for that we can go into our stats class and in here we're going to find an event whenever the sets have changed so let's go up here in order to make a public event use the standard event channel and let's call it on stats change so we have this event and we're going to trigger this event whenever the stats change so in here let's fire off the event all right so when we call the function to stat it's taxed that then we fire our event all right so far so good so right now you can see another example of why we should write code this way instead of just exposing a public int if we did that then we would have no way of knowing when the value would change and we would be forced to update on every single frame but since we worked our code nice and clean then we have this function which is the only function that modified this variable so we can simply add our event in here and everything won't work perfect so now we can go back into our UI script and in here when we receive our stats and let's subscribe to our event so onsets changed event we subscribe to that and when we get that event then we do update our stats video alright and now we can get rid of it from the update so it won't only update when stats changed so let's test and make sure that everything still works exactly the same so here we are so might have an increase and yep there you go goes up and goes down okay awesome so you have everything working with nice clean code and without wasting any CPU cycles okay awesome so now that we have everything working with a single stat it's time to handle multiple stats so here back in our set class right now we have a value and various functions to modify that though if we were to keep this pattern then we would have to duplicate all these functions for every single satellite that we wanted that would work but would obviously result in a ton of horrible duplicate code so that is not the correct way to do it instead let's make a nested class that won't contain all the logic for a single stat so let's go in here we're going to make a private class call it single stat and this will represent a single stat so now essentially we're going to put everything related to this stat inside our single stat class and now let's remove all the references to the attack stats specifically so this is just a start and everything on these functions is just set stat amount all right so there you go no more references to our single attack stat so now this class will represent any type of stat we want and over here on our stats class we will instead hold an instance of each single stat for each stat type so in here let's make a private of type single fat and here we'll have our attack stat and now we can also have our defense stat so the constructor will receive the amount for our attack and also an end for the defense stat amount and now in here we instantiate our two variables so let's also make a constructor for our single stat class so we receive the stat amount and we just set it like we were doing previously and in here let's instantiate our attacks that equals a new single set with our attacks that amount same thing for the defense all right so we have pretty much our two objects and everything is nice and cleanly separated now we still have an issue with our event being inside stat instead of outside and we also have an issue over here in our UI code since this function no longer exists so we need to expose functions to modify each specific stat type so let's go back into our stance and over here let's copy pretty much every single one of these functions however in here every single one of these is going to receive an extra argument to select which that modify in order to define various stat types let's go up here in order to make a public a new for our stat type and in this case we have attack and defense now know these functions we're going to receive a stat type okay so far so good so you can probably see where I'm going to this now we just need to get the single stat that matches up with this type so we have a function which takes a standpipe and returns our single Stan object this is a private one since no one outside will ever deal with this and all these functions simply call the inner function on our single stat all right so that's it and now we can also get rid of this error since the event won't be called on our stats and not on the single staff now over here just like this we have one potential issue with our event which is the event is only fired if it goes through this one but over here we're going directly through the increased stat so we need to modify it to make sure that everything goes through only this one so on the increase instead of going straight into the single stat we go into the stat amount and now we can go down into this one and remove these two all right so our code is now much more simplified and everything looks great and that's it we should now have our code correctly working with two stats which we can expand to any amount and we would need to do is add more values into this and new and add more inner variables so let's test out our stats with two stats so let's first go into testing and in here you can see all these errors so that one has a ten on the attacks huh and let's put a two on the defense that let's get rid of this debug log over here we have these buttons let's add two more for testing out our defense all right so we have updated everything now we essentially the stats with ten on the attack and two on the defense and we have our buttons which this one increases the attack and this one increase the defense so as you can see the only thing we need to change is over here the type on the argument so let's go into the UI now here we have the attack bar let's get the stat amount normalized of type attack then we're going to have another bar for the defense and let's come out the defense bar now let's make it in the editor so we have the attack bar and let's rotate it and put over here this is the defense bar all right that's it so let's test and see if we can correctly see a bar showing the attacks that another one showing the defense that and yep here we are and the attack is indeed at half and defense almost at zero and we can use our nice buttons in order to increase and decrease the attack and also the defense all right so we have our two stats of Emily's working perfectly and the way we set up the code also makes it very easy in order to modify things to support many more okay awesome so now it's the time to finally replace our testing bars with a custom mesh in order to draw our radar so for that let's go into the editor and in here let's take our radar chart and instead of having these bars so let's get pregnant instead of the bars we're going to draw a mesh now in order to draw a mesh let's create a new empty game object let's call this the radar mesh and inside we're going to have a canvas renderer this is what we can use in order to render a mesh on our canvas alright so that's it for our UI setup now let's go into the code and grab the reference to this canvas renderer so here in the radar chart is where things get interesting now I've done a couple videos on how to create a mesh from code but I'll go over it again in here on the updates that's visual we create a new mesh object now a mesh is essentially composed of vertices UVs and triangles the vertices are the various points of our mesh the UVs define how the texture is shown on each vertex and the triangles define which vertices compose a triangle polygons now that might seem confusing but it all becomes very easy once you see it in action so first we define our arrays so an array of vector threes for our vertices then we have an array of vector tools for our UV and finally we have an array of pins for our triangles alright so these are all the values we need to in order to display our mesh now just for starters let's simply start with one triangle so for one triangle we need three vertices then we need as many UVs as we have vertices so also three and four triangles we're only going to spawn one triangle so we need three points and do it so three okay now let's set the vertices so let's start off with vertices set the zero index in order to be on a vector 3.0 so this will be our origin then let's put one right above so on zero hundred won't be the vertex on index one and then on index two let's put it above it to the right okay so these are our points for right now our graph won't be a solid color so we don't actually need to bother with our movies so we'll leave them all at zero and now let's modify our triangles so you have index 0 1 & 2 now over here we need to set the indexes for the vertices and the triangle polygon is composed of three vertices so in this case it's very simple we start off at the origin so start off on index 0 then we go into this one which is right above it so we go into index 1 and finally we complete our triangle by going into the other vertex so so just like that we have our nice triangle now we upload our race into the mesh and that's it so we have successfully created our nice mesh now we need to display it so that's where the canvas renderer comes in let's go up here in order to grab our reference to the canvas renderer let's grab it on our awake in order to grab our reference okay we have our canvas renderer and reference so now we can go down here and all we need to do is call set mesh and press in our new mesh alright so the canvas renderer now has our mesh in order to see it we also need to pass in a material so we need to call the function set material over here as you can see we need a material so let's go up here to make a serialize field for a material and this material is what we're going to use in here and for now let's set the texture into no all right so that's it our triangle should now be visible in our u1 let's just drag our material so in here let's create a new material let's call this the radar material and in here let's modify the shader in order to use the UI default and let's tint it in nice green okay like that so back in here and let's drag the reference to our material and let's Destin everything should work and if there it is we have our nice triangle being drawn in our it you want so if we pause we can go and see that it is indeed being drawn right in here on this object and we can move it around and there it is we have a nice triangle mesh being drawn directly onto our UI so we're here as you can see this point up here is indeed on 0 100 and this one here is need on a hundred a hundred ok so we now know how to draw a simple triangle using a custom mesh on the UI now let's use the values from our stats in order to set the two points in our triangle so let's go in here in order to define our correct vertex ease so let's say the vector three for our attack vertex this one goes straight up so let's use vector three dot o and now we multiply it by a certain radar chart size so we can go here in the editor in order to test out so there it is that's the origin on zero zero and the total size of the radar and let's put it up there and it's about 145 okay so let's define here a quote for the radar chart size and let's put it at 145 so here the attack vertex won't be pointing upwards by our radar chart size multiplied by our stats not get stats amount normalize of our attack step all right so that's it we have the correct position for our attack vertex let's also put an int or the attack to vertex index and this won't be on index one so in here let's just set our attack vertex in there just to make sure that everything works let's see okay here we are and there is that point is indeed at half of the size so let's increase it and there you go the triangle correctly updates goes up and it goes down okay awesome so now let's also update our defense vertex now to keep things simple let's first do it just horizontally so one ninety degree angle so we need the effector three for the defense vertex in this case let's go to the right and we do pretty much the same map setting here our defense let's also define a defense vertex index this is just to help us keep our code nice and readable so the attack vertex is down one defense is down and defense vertex so using these variables helps us make sure that our triangles are correct so our triangle starts off at the origin then goes towards the attack vertex and then goes towards the defense vertex and that makes our tracker right so we have a triangle pointing up and went to the right showing the attack and the defense let's see any of their it is and the attack is indeed a half and the difference also in there so we can increase the attack increase defense and if there it is awesome we have our triangle nicely updated okay awesome so far so good so this is looking great right now however we want to display five stats so the defense isn't supposed to be shown at a ninety degree angle but rather at an angle that makes for our five sides so let's go to the code and in here let's first calculate that angle so we are going to call it our angle increment which will be three sixteen divided by five sides and I mean here we can apply this angle based on our vector so in here the attack vertex is pointing upwards now let's apply the rotation so we going to eternium Euler 0 and the X 0 on the Y and we only modify these egg and now the Zed won't be our angle increment multiply it by the index that is on the increment so this one is on 0 so here what we're doing is essentially applying a rotation on to our upwards vector so the attack will be rotated on 0 however the one on the defense can be rotated by an index of 1 so this might seem confusing but it all makes sense once you see the code in action so everything else stay the same and now let's see if it does follow the right corner for our five sided polygon and if there it is it is indeed working however the angle is inverted but the correct thing is working so as you increase the defense as you can see it goes straight along that line and the attack goes straight along that one so I just reverse it seen here instead of going positive on the angle let's go on the negative and there it is and everything looks awesome so we increase the defense and our radar chart doesn't need increase up to a maximum and up to a maximum there is our nice perfect triangle awesome okay so at this point we have pretty much everything done all we need to do is add the remaining stats so let's go back into our steps class and over here let's add all of them so it's that speed mana and finally health so we just add them on to our enemies and also in here and on the constructor we receive all our starring bones and the last thing we need is over here on our nice switch all right so that's it we should be able to have our stats class correctly holding every single one of our stat types so now let the remaining labels over here in the editor alright so there it is our nice labels now we just need to go into our UI script and over here we add the remaining vertices now in here the tricky thing will be the size of our arrays for the vertices it's very easy we have five points plus the origin so we have six vertices for the UVs must be the same size the vertices so also a six and now for the triangles now remember each triangle requires three vertices so in this case we're going to display our five stats with five triangles so we need three times five triangles okay so let's test again to make sure that our first trying only stone correct in order to do that we just need to go into testing and add all the remaining ones okay let's test here we are and yep our initial triangles still works okay now let's add the next triangle first we define the vertex and the index so the next one is a spin and here we increment the angle by one more so this one is 2 and the speed won't be on vertex index 3 so here we need another triangle so let's copy all these three positions now this won't be on index 3 4 & 5 now the first point will be the origin so sorry fat 0 yep then we go into our defense and then we go into these feed vertex so that's how we make our second triangle and just like that we should be able to see the speed and our radar chart and if there it is we have three points let's increase defense and if there you go difference goes up and the speed is in there at about five and the attack goes up and yep awesome all right so we are currently displaying our three values in our radar chart now let's have the remaining two all right so here it is all of our valance all I did was these new variables and increase the angle increment on each of them as well as the index then we define all six indexes and finally all the triangles as you can see the final triangle connects the origin on to the health vertex and on to the attack vertex the final one so let's test any of there it is our five stats are now being this point in our nice radar chart all right so at this point pretty much everything is working and here we have our nice testing buttons and let's increase the speed and see if now it increases and if there you go it increases the manner yep just like that and the help just like that let's put them all at the maximum and if there you go they own occupy the background perfectly increase and yep they're awesome all right so now we can punch this up a bit by adding our UVs now the UV defines what point in the texture course points that to vertex so we're here I have a nice gradient line it's a very simple tiny texture so essentially the origin will be on the left side not the other points on the right side so over here in our radar chart code let's go in here to set up the UV now in here for the origin will be on the left side so we can simply put it on factor 2.0 and for the others we could for example make a UV where each vertex would have a different color so the attack would be in red defense and polio and so on we could do that with UV but in this case and let's make them all the same color and just use the gradient from left to right so on these and let's simply put vector e 2.1 in order to stretch to the right side all right so that's it that's our UVs now since we're adding the UV we also need to go up here on our radar canvass mesh renderer as you can see in here we're passing the material and let's also pass our texture so up here let's make another serialize field this will be the texture 2d for our radar texture now we're going to use that at the same place that we use our material so in here let's just drag the gradient line all right awesome let's see how it looks and if there it is now we have our nice texture being applied as you can see at the edge we have our white border and darker on the inside and we can increase it to the maximum and just like that there's our nice final texture being applied into our radar chart okay so this is pretty much our completed element let's just add some polish all right so here we have our nice radar chart displaying all of our stats and some nice buttons to play around with we can see the internal values we can increase and decrease we can randomize and there you go their own very nice and random and just a fun nice little animation the code to display our radar chart is completely separate from our inner stats class so our code is nice and clean and we could easily modify this to add as many stats as we need so you can use this in any game where you would like to display some stats or you can just use the underlying stats class which has been very carefully constructed so that's it and this is our very nice final effect as always you can download the project files in utilities from indycar Montcalm if you liked the video subscribe to the channel for more ent tutorials post any questions you have in the comments and I'll do my best internal write see you next time