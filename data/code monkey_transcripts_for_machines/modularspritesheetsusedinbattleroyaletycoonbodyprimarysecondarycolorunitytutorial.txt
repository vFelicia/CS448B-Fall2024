hello and welcome I'm your code monkey in this video we're continuing to create modular spreadsheets as used for guests in Ballarat again we're going to use masks to define primary and secondary colors for our bodies let's begin so here is the spreadsheet we have been creating in this series we have the base part which for now really just contains the foot then we have a body that we are simply picking from four different choices then we have the head which we have been composing from a base head then on top of it we had a randomized hair randomized beard and we also tend random colors on both the hair the beard and also the skin color so with everything that we've learned so far we have all the tools to also be able to customize our bodies and we want to apply both primary and secondary colors so essentially we're going to do something very similar to what we did with the skin color where we have the skin color but we also have a mass to make sure we don't tent inside the eyes so that's the same process we're going to apply to the body in order to separate two parts and apply a different color to either of them the game is out now on seam so check it out to see what I'm teaching here apply to a real game so over here is the spreadsheets that contains all the bodies we have been picking randomly and over here is another one which has some parts centered in white essentially we're going to apply a tint to where we have the white parts and on the ones that are already colored we are going to leave those as is so now let's create the mask so here I have the white sprite opened in Photoshop and now since we're dealing with pixels we can actually fit both the primary and the secondary areas right on the same texture so in here just for testing I'm going to place just a circle I'm going to place a pure green circle so we are in here pick pure green so 0 255 and 0 place it in here so our green color won't be the primary mask and then print a blue circle again use a pure color to make it easier for testing and this will be our secondary cone so by removing base layer this is the mass that we're going to use in order to test so essentially we want to turn this area in one color and this area in another color and those tents will be applied on the base white spreadsheet so here is our mask in unity and now let's head to the code so here the first thing we need is to grab reference to our textures so let's set some 0s fields we're going to have the body texture in white and the body texture mask so let's go down here and see how we were doing the face tent here we define a array that contains all of the various skin colors we pick a random one from the array then we get the pixels from the base head texture then we grab the pixels from the base head mask texture and we tint the pixels inside the mask with our skin color so let's copy this and do the same thing down here on the body pixels and for now let's test only with the second body so in here we are grabbing the white pixels we are grabbing the mask and then let's define a color for the primary color in this case let's just use a pure red so now in here let's tint the body pixels using the body mask as our mask and tint with the primary cone okay so let's test and see how our body looks okay there's our body and as you can see it was tinted in red exactly where the mask is present so so far so good we are doing exactly the same thing as we did for the head we are tinting only inside a mask now obviously we want primary and secondary colors so we need to figure out how to mask but only when the mask matches our mask color over here in the masked texture we define the premiere mask on a green color and the secondary mask using a blue cone so back in our code let's make a function similar to this one general differences we're going to add another parameter that will be a color for our mask color and the only thing we're going to change is in here we're going to apply the tint if the mask alpha is bigger than zero so there's something on the mask and the mask color equals the same as our mask cone so over here we can now use this function now for the primary color we defined a new color we were using a pure green so for the red we give it a zero for the green we give it a one for the blue we give it a zero all right so we should be able to tint the body pixels but only when they match the green cone okay so let's see if only one of our circles appears tinted and give their nests our tint is only being applied on the mask that matches our green cone okay so now we can go back in the code and easily apply the other mask in here let's first define our primary colored mask so here we apply the primary and now let's apply the secondary for the secondary corner let's use a yellow and for the secondary masks color we use a pure blue so let's use this and apply this so again we are using the same body pixels with the same body mask but we're going to tint it using the secondary color but only when the mask matches the secondary mask oh all right now let's test and see if the final body has two tinted colors and yet there it is this circle is being tinted in red and this circle is being tinted in yellow so just like that we have everything we need now all we need to do is actually correctly apply the mask to our base textures okay so here is the final mass being correctly placed as you can see we have various areas for the primary color and various areas for the secondary color so let's see the result with this and yep there it is the final body being composed with a primary and secondary color as defined in our masks so with just some buttons to test and make sure we can use any color okay so here we are with some testing buttons you set the primary and secondary colors so in here and let's set the primary color to yellow secondary color to green and as you can see everything is updating correctly so we can set any color that we want and it all works perfectly fine and now with all the bodies enabled since we used a texture to define our mask you can see that everything is automatically applied to all of them so I can change all of them and they all get tinted correctly the game is out no one seems so check it out to see what I'm teaching here apply to a real game so there you have it we add even more customization to our spreadsheet by defining primary and secondary colors to our body sprite in the next video we're going to figure out how to save and load so we always get the same spreadsheet as always you can download the project from the new Tabriz from unity code monkey comm if you have any questions post them in the comments and I'll do my best answer them subscribe for more videos and I'll see you next time