check out the code monkey upon scene interactive tutorials complete games and more and here you can also see that all the various NPCs within range and if it was a physically accurate free cast and his filmed of you probably only goes from minus one hello and welcome I'm your code monkey a professional indie game developer and this is an interesting video where I will react and analyze a game trailer I will talk about how things work behind scenes and how you could build them in your own games in this case we're looking at the watch dogs gameplay trailer that was shown at e3 in 2013 alright so let's hit play ok so it starts off with the player controlling the camera so here it's in a state where the input controls only affect the camera so the player can look around but he cannot move then as you saw it smoothly transitions back into the normal camera following the player so we're here he's controlling the camera and just like this mule interpolates in sit down so when using same machine this is actually very easy to do you just position both of your cameras so for example there is one here controlling this nice camera and there's the one here controlling the car so you place these two virtual cameras and then through scene machine all you need to do is set this one as active and as he needs to do it won't automatically interpolate all the values between the both of them so just like this yep very easy to do and it's a very good and looking effect you can place virtual cameras all over your game and smuggle interpolate between them then here as you can see we have this nice little element showing a phone call and you can see that this actually lives inside of the world so as the camera rotates the element also moves around so for example this is something that you could build by building a canvas and positioning it in the world and using UI elements to build up all of this or you could build this whole thing using normal game objects and sprite renders now since the objects themselves in here are position in 3d so you can see that this square behind it is slightly behind it so as they move you can see that there is a bit of a parallax on the main track once I lose them I'll come for you alright so as you eye comes up the first thing that we see is over here the minima it is showcasing a simplified version of the world so there's a bunch of symbols to identify each object in the world and the minimap is also set up in 3d I covered how to do a minimap like this in a previous video now the main difference in here is that the edges in here are faded rather than being sewn so you could easily apply this fade effect with either a mask or a shader effect another difference from where I covered in that video is that this one is actually in 3d so you can see as he moves that the helicopter is an actual object so that really just means swapping the camera from orthographic to perspective and all of the elements from simple sprites into some basic meshes and in here we see an interactive ball element shown so essentially as the player is driving the mouse is locked into the center of the screen and then it just checks for interactable elements nearby that mouse position now the way that it does that is for example using a box cast starting from the camera position so it does a box cast and then locate some of the objects within this area it finds out whichever ones are interactable it finds this one and it applies a simple highlight and showcase the UI element then for the original outline you can do that with a simple shader for now effect and here as the camera rotates you can see it in action with this NPC so over here that NPC is not visible yet within the interactable range so once again it's probably doing some sort of box cast and as he rotates more you can see that the icons are showing up above the NPC so this is probably doing two boxes one that is much larger in order to show the UI element and one that is smaller where the object or the NPC is actually interacted on so as the camera rotates once it gets within a certain position if there you go now he's interactable now here you can see that the officers are in search mode so one way you could do that is to store the last position they saw the player then you just tell them to go to a random position within a certain radius of that last position and then here we see the helicopters family walking around it's doing pretty much the same thing so you just have the helicopter up there probably moving a bit left and right and then he's just randomly pointing the spotlight into various positions so this can be done by having an actual spotlight object and then on the ground you can have some sort of target game object and then just write a simple script for the spotlight to always look at that target then he simply moved that target around and spotlight automatically what's worked watch station filters to the suspect okay then here the player finally gets spotted and for the on earth element here it's actually very simple but it looks great so you can build this by just having 3 UI images set to film then you increase the film mount as the timer increases and do some simple math to figure out how much film each image should have so you increase them over time once the player is in the right view of the helicopter and it looks like a pretty good element then when the player goes way too far you can see that the home computer alerts us and I win here the helicopter is still up there still searching for the player but as he searches naturally he also does a recast so as the player goes underneath this tunnel you can see that the helicopter will try and locate the player and erase and we collide with this overpass so when the player goes into the tunnel the raycast fails and the helicopter cannot find them now here the player goes into a hidden area and then shits off his car so this puts him in a hidden state that does something like we do see detection radius it's possible they also add the ability to lower the tax rate that is even further when behind transparent objects like this fence so as a cop rolls by here the car AI is probably doing a recast directly towards the player and normally probably checks if the distance is under a certain value and if so then he is detected and then in here the fact that the car is offline probably acts as a negative multiplier on the detection radius and the same thing for defense here so let's say the fence gives it minus ten points on the detection range and the carving off also minus ten points so qui all modifiers then do some simple math to figure out if the player is at X bar or not so in this case the cop car goes by and yep he's not detected now over here you can finally interesting object now for example this could use a system like I covered in the four ways of opening doors in there I used an interface that all of the interactable objects must implement so then you simply do a box case or a sphere cast and locate all of the I interactive all objects within range of the player and if so then it shows up the UI element so in terms of coding the player doesn't actually know what is interacting Linde only knows is that he is interacting with something that implements the eye interact among interface so that's a great way of writing some clean code and making sure that your player can interact with a variety of objects and for the actual interaction could be just a simple function call and the object would simply increase the float by time down to time as long as the player is holding that button then for the visual it works pretty much the same way as the alert so increase on each side and then after it is completely films then the action enables any in this case opens the door now hear this news report comes on just as soon as the player enters so in this case it's just very simply you have a box Collider in here set to trigger and whenever the player enters this area you simply trigger this event now for the video you can use the video player component to play any video and display it on a simple kuan so this is how all of the TVs and billboards work so the video starts playing and then this guy in here starts becoming suspicious once again there's a suspicion meter increasing it's using pretty much exactly the same logic as the cops timer so he transitions from suspicious state to alert and he starts calling 911 and the player goes after him and can interrupt that copy and here you can also see that all the various NPCs within range they react to the player's action so once again it's probably just doing a simple sphere cast around the player and locating all of the objects that can react to the player's actions and then depending on the player action you can make them react differently so in this case the player simply destroyed the NPC's phone so all of these people aren't actually going to do anything other than Sara but you can see how this system is exactly the same thing that applies to all other actions so for example if the player had shot this NPC instead then the sphere cast would probably me much wiser and probably these ones would also react to the player's action and if he was shooting them they would probably start running away and calling the police now here we see the cameras in action again so once again something that's very easy to do with sim machine so the player in here has a virtual camera and as soon as he interacts he activates the second virtual camera and it's middle interpolates between both node and once they are in transition there's also a very nice shader fact you can do this by adding a renderer feature and apply an over eye to all the materials so you apply this effect to all the materials and as soon as the camera reach a necessarily position then you go back into the normal state then here he simply bounces from camera to camera I thought this mechanic was really interesting so again what he's doing here is doing once again a rake house to make sure that the interactable object is within the field of view and then it does a second direct break has to ensure that the actual camera isn't a code by any object now here we see a really interesting mechanic where the player has to distract the guards and let the NPC go safely so in our data the player interacts with this object which caused a sound so once again it does a sort of sphere cast it locates on the object within a radius that can actually listen to sound then if the guard is actually within range then he hears the sound then he moves on to investigate so for the interaction here it's pretty much the same as we saw previously for the door so the guard knows that when he listens to a sound he moves in to investigate and he moves to the sound position so right here oh and for the NPC movement that looks to be automatic so he's probably constantly checking around doing a cast on this area and he stays idle if the guard is in there and as soon as the guard steps out of that area then he finally does his animation and moves away go someone's got to be doing that now on the outside instead of being automatic the player actually manually I see NPC you can see how the move interaction is depends on where the player is looking at so in this case does a ray cast were the mouse position then checks if it hits onto any object and if so then it calculates in actual valid move position so in this case it appears to be simply on the base of the object so you just do a ray cast find this point then set the y equals zero and you get this point down here then simply position the um right on top of that position then once the player tells the NPC goes straight in there and here with this special object the assumption is that the enemies would spot him if the object is in this state so that is probably handle straight through code so the actual boxing ladder is probably just a basic one and while it's in this state then the object will probably behave pretty much like a fence so you would likely apply some sort of negative modifier onto the detection speed but he would still be detected you're probably worse like that rather than being an actual physically accurate ray cast since that would lead to a lot of player confusion so for example the NPC could be all the way in here and if it was a physically accurate free cast then maybe you could actually locate the NPC through here so that would probably cause a lot of player confusion so that's why this one is probably either solid or not solid and as it changes state then it probably goes into a point solid you caress any moves in that guy now will not find ya go quit go now here the player is going to use the Sun system again so as the object starts make noise once again it does a sort of sphere cast and then finds that this guy is within range so it calls some sort of noise function and then the AI simply points him to look in that direction now the first thing that the enemy does is obviously rotate to face the sound origin and then for detecting the player they use some sort of field of view value so the enemy is pointing in that direction and they're accommodating the vector towards the player position then simply column weights the angle so in this case the players at like 180 degrees and his film the view probably only goes from minus 45 to plus 45 on this side so just a simple math calculation to figure out if the enemies within the field of view and if not then he's not detected so in this case the player simply approaches in takes down the enemy stomper all right you're good oh yes on the squad no we're here it is a really interesting boat where it's looking for another player so this is a really cool feature essentially a player on a tablet or a phone could play along in a different way so after some quick matchmaking it finds another player the other player as you can see it has a different UI and in this gay is he can take an action to take down the helicopter and help the player and over here he can lift up some Walker's in order to do so yep it's a really cool feature I wonder how many people actually use it then over here to the players finally caught but the cops didn't shoot right away so for that they could just store a simple boolean if the player was seen using deadly force so if it were true they would similarly shoot to kill and if it's phone sending attempt to approach him and arrest the player instead and for the player action here it probably has just a very simple timer so if the player stops for a long enough then it goes into the surrender animation and then the special skills show up so here it's a very nice radar menu I covered something similar in the apex legends pink video so you just keep track of the Mars Delta and some like the appropriate skill then he selects a point out action which it's on all the lights on the building site now here the buildings don't actually have some real actual lights doing that you would have thousands of all these lights so that would be way too expensive so instead what they do have are simply emissive textures so for the vision for the White House all you do is simply disable the emission or set all those innocent actors to watch and everything goes for bright to nice and dark and for the effects there's all these parts happening right here so once again probably just doing a sphere cast around the player was for all the objects nearby that have some sort of electrical component and just spawned some particle effects right on top so the easiest way to do this is simply to modify the time dot time scale so if you set it to one then it runs at normal speed if you said at that point one that runs at ten percent of the speed so if you set it to a small bone and everything that depends on down to time won't be slowed down then dcups also change their material to the same as the ha'la'tha fact we saw previously so just a simple for now shader effect and at the same time it's showing the non critical spots at point incident so just some game objects position atthenes now if the player shoots near that position then the game keeps track of that and knows that player went in nonlethal route otherwise the game has some sort of honor system where the lethal so he takes down both the cops then he gets on a boat and drives away those buildings are gone that mission of the winds come on and everything all right so that's it this was a very different video from my normal ones it was really interesting to take a look at a game trailer and try to identify all the various elements and how you could possibly recreate them I hope you found this video interesting and useful and learn something along the way let me know in the comments if you'd like to see more videos like this feel free to leave suggestions on what other trailers I should react to check out the code monkey app on steam interactive tutorials complete games and more click knowing the description and add it to your wish list this video is made possible thanks to these awesome supporters go to patreon.com/scishow code monkey to get some perks and help keep the videos free for everyone like the video and subscribe to the channel if you'd like to see more post any question I have in the comments and I'll see you next time