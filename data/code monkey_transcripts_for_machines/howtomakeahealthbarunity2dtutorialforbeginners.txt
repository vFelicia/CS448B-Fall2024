hello and welcome I'm your code monkey min this video we're going to create a health bar and a script to control it let's begin so in order to make our health bar we're going to use sprite renderers with a white pixel that we can stretch and tint let's begin by making an empty game object and we're going to name this health bar so this will be the container for our bar now inside the first thing we need let's make another empty game object and this one is going to be for the background and for the background let's leave it at zero zero and we're going to add a sprite renderer so the sprite renderer doesn't actually show anything until you actually apply a sprite so let's drag a simple white pixel in there so that we can visualize our rectangle okay like that we can view the texture import settings in here and as you can see this is literally just a onebyone white pixel and it has pixels per unit of one this is very useful when you want to display a rectangle using a sprite runner so in here since this is our background let's tint it in a dark grey like that okay and for the sorting order drone depends on how your game is set up but for now let's leave it on the default and put it at a hundred all right so that's our background working perfectly now let's make the actual bar so we're going to set up the bar in such a way that we can easily modify the scale to be able to use a normalized value so let's go up here and make another empty game object and name this bar now for this game object we're going to leave it completely empty you won't see why the purpose of this game object is simply as an anchor for the actual sprite so inside this game object let's make another game object and this one let's name it bar sprite now for this one let's add a sprite renderer drag the white pixel and put the same size as the background sprite for the sorting order let's put an add 110 so that it shows up on top of the background so right now it is occupying the exact same space as the background however we're going to shift this to the right side so for that 20 so that it is shifted to the right on half of its size now the reason why we're doing this so that we can now go into the bar in here and we can easily modify the x value and to correctly pivot from the left side to the right all we need to do here is go to the left by half of our size and as you can see it is now shift to the left and this way if we give it a scale of zero you can see that it is an empty bar if we give a one it is full so all we need in our code is to convert whatever health values we are using into a normalized value and we can easily apply to our bar all right so that's a simple bar now for an optional thing let's add a border so let's duplicate the background call it border and let's drag it up there to keep things nice and organized and for the Orlan layer let's put it at ninety so it is behind the background put it in black and increase the size by a little bit there you go we got a nice little border behind our bar and we can go into our bar game object modify the X scale and as you can see it works perfectly as we want okay right now one last thing change the bar sprite to red so that this actually does represent a hump bar all right so that's our bar come only set up in the editor you can view in the game window yep that's a health bar right there alright so now let's make a script to control our bar through code so in our folder our skirts one room let's make a new csharp script and name it health bar we're going to drag this script into our main health bar game object just like that now inside our script let's begin by grabbing a reference to the bar transform so in here transform bar equals transform dot find our bar and just we're testing let's change the bar in here so the bar dot local scale equals new vector3 and we're going to put it on point four and one out so the bar should be displaying as 40% filled let's see and yep there you go you can see the bar and it is 40% film okay great now let's make a function for modifying the size of our bar first let's store the transform as a member variable so here a transform for our bar and we're going to set it in there okay great let's get rid of the update for now and make the start private to keeper toad nice and clean now let's make a public void set size and inside we're going to receive a float for the size normalize and now we're going to do in here is set the bar dot local scale to a new vector3 with the size normalized and one app so the size that we receive in here won't be between 0 & 1 and we apply to our bar as previously so now for testing let's create a basic game handler script so let's make in our script create new csharp squared name it game Kendall this is a simple script so that we can run things outside of our health bar so let's drag it on to this game object in here and inside the game handler we're going to first of all require a reference to our health bar bar and let's make this a serialized field and once we get our health bar let's set the health bar dot set size to let say point 4 up now in the editor and let's drag the health bar into our hump bar reference alright so there you the health bar is now correctly 40 percent film as we set in the game handler so now let's go back to the game Handler and let's make a little animation to constantly lower our health bar size so for that let's going here and I'm going to use a function periodic which is part of the code monkey utilities cause monkey value tells which as long as you can grab for free from unity code monkey calm now the function periodic simply creates a function that is triggered every certain amount of time so every let's say 30 milliseconds we're going to execute this function in here and now for that function let's make a float health equals 1 F so start our health component like foam and here if the health if it is bigger than 0 F then let's reduce the health by point zero one F and set the health bar the set size to our health all right so this simple script should be reducing this hunt amount and constantly setting the size of the health bar so the health Mar should be constantly going lower yep as you can see the bar is constantly going lower and l0 okay great so we can easily now modify the size of our health bar now let's go in our health bar and make another function for setting the bar color so let's make here only void set color and inside we're going to receive a color object and we're simply going to go into the bar dot find our bar sprite on the bar sprite and let's get the sprite renderer component and in there we simply set the color to this color so just for testing let's go in the game handler down here and let's set the health bar dot set color let's say color dot white so let's see if our bar is now white yep there you go we now have a white bar okay and now in here in our little animation let's make the bar flash when it is too low so in here let's do if he'll if it is under point three out so if we have under 30% home under 30% tone lettuce flashing and white but only sometimes so let's see if he'll multiply it by a hundred F remainder of three equals zero and setters why else lets it as red all right so in here multiplying our health by a hundred gives me a value between zero and 100 and doing the remainder of the division by three means that it will return zero only on every multiple of 3 so on three six nine etc and if it is a multiple of three then we set it as white if not then we sell it as well so this is just a simple basic animation to see if our set color is working correctly so our bars should be flashing white whenever it is under three percent health so let's see that all right so here's our own little bar and when it gets in our 30 yep it starts flashing okay so we can easily set up the size of this bar and we can also modify the color great so there you have it we create the health bar in the editor and made a script to control it through code we can easily modify to display any value that we want as always you can download the project files in utilities from unity code monkey comm if you have any questions post them in the comments and I'll do my best answer them subscribe for more videos and I'll see you next time