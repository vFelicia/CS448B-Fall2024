hello and welcome I'm your code monkey and in this video we're going to create a graph in unity let's get sir so we're going to create a graph in our UI let's first set up the visual for our graph window going to go into my UI my UI canvas and create a new empty game object name it window were inside let's create an empty game object and name it background and the image component and put it in black we're going to have another game object for our graph container and all of our graph dots won't be children of this particular transform and inside we're also going to have another background ok so let's set up the sizes so for my graph container background I'm going to expand it completely to occupy the whole thing for my graph container I'm going to anchor it on the lower left side and for my background I'm going to occupy the entire size of my window graph and my window graph size that's what I'm going to modify ok so visually we have our window in here I've got my window graph game object which are certain width and height the background occupying the entire space the graph container which is anchored to the hole on the left side and inside it as a background that is also occupying all the size of the graph container ok so inside our graph container is where we're going to place all of our dots so let's make a new csharp script and name it window graph so go in a csharp script window graph ok so in my code here first let's grab a reference to my graph container so I'm going to get a private rect transform for my graph container and I'm going to grab it on my private void awake at the graph container equals transform dot fine the grab container getcomponent I write transport I am also going to add a private sprite for my circle sprite which is what we're going to use to display each dot on our graph I'm going to make it a serialized feel so I can set it in the editor so let's make a function to create a circle for each dot so go and make a private void create circle and it's going to receive a vector for my anchor position so in here let's create our circle and going to game object create a new game object name it circle and add the time for a image the image is in using unity engine dot u I go into my game object dot transform dad set parent the parent will be the graph container and don't keep the wrong position go into my game object I'll get component a type image and set the sprite to my circle sprite then let me grab a reference to the rect transform which is a game object I get component type rect transform let's set the anchor position to the 1 receive ended function and set the rect transform dot size Delta to let's say 11 by 11 and let's anchor it to the lower left corner X transformed anchor min equals new vector 2 since we want on the lower left corner the main is gonna be on 0 0 and the maximum also be on 0 0 keep everything on the lower left corner okay so we can now create a circle let's create one just for testing and we're going to place it on let's say 200 200 back into my scene here and drag the window graph into my window graph game object and add the circle as my sprite so let's test and there you go as you can see the circle has spawned in there ok great so we can now spawn a circle and this is what we're going to use to display every value on our graph so back into my code here we're going to have a function and make a private void and call it show graph and this will receive a list of intz and call it value lists this is going to receive a list of all the values that we want to graph so inside it I'm going to cycle through the list and now in here we need to calculate the positions on the X and y axis for each value on our list for the x axis which in this case and let's say it represents time so something like each hour or day in your game we're simply going to increase it based on the list index so for my float X position let's say it is the I and x let's say X size go up here and the fine exercise let's say 50th this is the size distance between each point on the x axis now for the y axis which in this case let's say it represents money earned in the time frame so let's first decide upon a maximum for our graph maximum for our values so let's make a y maximum and let's just say it is a hundred F so on the values that we receive in here the highest will be a hundred that will define the top of our graph we also need to grab the height of our graph so let's go and make a graph height which will actually be the graph Container dot size Delta dot Y so the Y position for each value in here my float Y position won't be based on this valley that we're cycling so value list of I it won't be that divided by the maximum that I have set the Y maximum which will essentially give me a normalized value within my villain list and I'm going to multiply that by my graph height so if the value that I'm cycling in here is exactly why maximum if I do receive a hundred then too Umble okay the exactly at the graph right if I receive a zero in here then it won't be on zero so matters going to our weight here and create a value list I'm going to create a list of call it value list and let's give it some values okay I have my vilnius here let's remove our default circle and use show graph with this value list and down here when we show the graph obviously we need to create our circle on a new vector2 with the x position and the y position okay so let's go into our scene and we should now see a graph using these values so essentially goes up a bit and goes down a bit then goes up again let's see if that appears correctly and there you go here we have our families our first values second value the first one which as you can see here is a five and then you got a 98 so you can see that the five is very near the bottom of our graph and the 98 is very near at the top of our graph alright so it seems the values are being correctly displayed might as shift the first value a bit to the right so it doesn't hug the left side but everything else looks correct so go in here and on my let's just make it excise plus I times excellent okay yep there it is alright so now that we have our dots let's create some lines to link up all of our dots so back into our code and let's make another function and say it's a private void and name it creates dot connection in here I'm going to receive a vector two for my dot position a and a vector two for my dot position B essentially I want to create a rectangle that won't go from A to B so let us create a game object equals new game object name is dot connection give it an image type game object I'll transform that set parent to my graph container let me grab a reference to my rect transform equals game object I get component rect transform let's set up the anchor to the lower left side so right transform anchormen equals new vector2 on 00 same thing for the anchor max let's set up a size Delta of let's say a hundred F and three F so essentially a horizontal bar and for now let's position it anchor position at the dot position a just for testing this is good for now so obviously on our show graph here we need to call this function in order to do that we need the position of the first dot and the second down now when we're going through our cycle here we only have one dot so first of all let's modify this function to actually return the game object that we have created return our game object and now in here let's make game object circle game object which is the game object that we have created now we need to sort reference to the previous game object so let's make a game object last circle game object and it's going to start off as no and in here we're going to set it to our circle game object but before we do that if once game object if it is different then no that means this is not the very first dot so we can connect the last one to this one so it's in here that we're going to create a dot connection between dot a which let's say it's the last one that get component rect transform grab the anchored position and this circle game object get component right to transform dot okay so we are going through the list creating a circle on this position and then we check if we have a game object that was created previously so if we're not on the index 0 if we are then this will be known and don't do anything but every other index won't have a previous game object so it won't connect this one with the last circle game object right here and when we create our not connection we are creating a new game object we are setting the parent grabbing the transform putting the anchor on the lower left side setting the size Delta to be a basic horizontal bar and setting the anchored position on so let's go back into our scene and we should see a rectangle bar on top of every single dot yep there you go okay so we are correctly connecting all of the dots as you can see the only one that doesn't have is the very last one because it is connecting with the previous one so now that the connections are being correctly spawned we need to apply the rotation and place them in the correct position so essentially this bar will be rotated in the direction of this point and it will be placed on the middle point okay so back in my code here let me first go into my game object and get the component for my image and set the color to a new color set it in white but with half transparency so it looks a bit different from our dots now let us grab the vector two for our direction between position a and B so I'm going to grab the dot position B mine is not position a and normalize the whole thing I'm going to need a float for my distance which will be a vector to distance between my dot position a and dot position B so in order to rotate I'm going to go into right transform dot local Euler angles and the X and Y is 0 and the Zed is the rotation that we want to apply so in this case I'm going to use the code monkey utilities which is always you can grab for free from Unity code monkey com so using code monkey diet view tones I'm going to go into the utens class and I have a function there which is get angle from vector flow so essentially it takes this vector and converts it into an angle going between 0 and 360 so the only thing missing is our position right now it's a dot position a but we're only want to put it on that position a plus the direction towards our dot position B but we only want half so plus Direction times the distance times 0.5 so we place this exactly in the minimum between a and B okay so this should now be working we set the collar to be slightly transparent we count only the direction between and being we also come late the distance between a and B we positioned our rect transform in the midpoint between a and B so it's a plus direction towards B plus half the distance and we rotated it towards our direction now the only thing missing is the size Delta in here which will be our distance so let's see how our graph is looking and there you have it a very simple graph that you can use to display information in your game like profit per hour or number of guests per day you just grab a list of all your values and display them in a window in the next video we're going to add some visual separators on our x and y axes as always you can download the project files and utilities from unity code monkey comm if you have any questions post them in the comments and I'll do my best to answer them ok see you next time