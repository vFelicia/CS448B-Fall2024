in this video we're going to handle infinite map generation with difficulty for a endless runner we're going to create in level parts of varying difficulties and make it harder as the player goes along let's begin hello and welcome I'm your code monkey and this channel is all about helping you learn how to make your own games with nf2 torrents made by a professional indie game developer so if you find the video helpful consider subscribing so this is our goal we have our plane here some coins and some spikes he starts off stop and as soon as I press space there he goes off running and you can see I can dodge the spikes and jump up as soon as I grab a coin you can see the counter increasing and all the platforms are being instantiated now as I move forward and more platforms are instantiating they won't stop being the easy ones and they become the medium platforms and they are more difficult and grab from a different list and as I keep moving now there are hard platforms being spawned they are more difficult and down and if I keep moving even further and there you we now have the impossible platforms being spawned and if I done right now and there you go I'm dead now it asks me for a name so I can put a simple name and with the score of 57 and there you go there's our nice high score table storing our score so with this we have a nice simple completed endless runner minion alright so this is our goal let's get to it so here we have our starting point we've got our character right here bunch of coins spikes and our platforms and I can press space in order to start running and there he goes and as he runs the map is being automatically generated so as he gets to the edge more level parts are being spawned and they are picked randomly from a selection of parts that we manually created so we can pause and look at the scene view and here as we move forward you won't be able to see various level parts being automatically generated so jump jump and it gets the edge yep there's one being in Senshi ated and another one and so on okay great so right now we have a infinite map generation this is the same that was made in the 11th generation video so check the link in the description to see how we get to this point so in here essentially we have infinite level generation however we also have everything exactly the same so there's no difficulty change or any differences it just keeps going with the exact same level parts now we want to expand upon this and create more 11 parts with different difficulty and then randomly choose one based on a certain difficulty factor so let's get to it all right here in our scene view you can see we have our six different level parts now let's start by making a different one so let's just people keep this one and well let's call this the lesson park medium one so this won't be a part of medium difficulty now in here let's leave this pretty much the same just a simple platform and let's tint it in a different color just to make sure that it is being correctly spawned so here it is we just simpleton so we can easily identify it now let's update our prefab and let's get to the code so over here is our little generator we have a reference to the starting level part we have a list for only on level parts that we can instantiate any reference or player so as the player moves towards the last end position once he gets within a certain distance we simply spawn another 11 part okay now in order to modify this we're going to have multiple lists so here this won't be the level part easy and list and level dark medium list so here in the editor we can drag our local parts and for now let's just drag this one into the easy and this one into the medium okay so far so good now we need to figure out how we're going to define our difficulty there are many ways we can do it we could for example make it based on coins so at a certain number of coins it would increase the difficulty or we can make it based on the number of platforms let's go with out so we're here in the code let's see where we're spawning the next level part so here is the spawn level part when the player reaches the end and whenever we do this let's increase a counter then here a private int for the level parts spawn and when we spawn will be simply increasing and in here we are selecting our chosen level part so in here we can do a very simple if so we do a f11 part spawned if it is bigger than 10 then we want to grab it from the immediate list so over here by default we are choosing a easy level part and if we have spawned more than 5 then we've picked from the medium list all right let's test ok here we are let's start running and there we go and there's the first one being spawned and it's an easy on level part there's the second one the third the fourth the fifth and now let's see the six since we put just bigger than and there is our medium level part so there you go and now they are all medium ok awesome so we have correctly selected our chosen level part based on how many we have spawned so right now the game starts on easy and then becomes medium so just like that if you can already see where we're going with this code now instead of doing all our ifs in here on our spawn level part let's make a function dedicated to complain indeed difficult so this function will return the current difficulty now in order to identify it let's build a very simple inner so here a private enum for our difficulty let's have easy medium hard and impossible and down here let's return it from our function and here we can define our thresholds okay so here we define our values and now we have our nice function returning our difficulty it's not the spawn function and here we can just do a very simple switch to do a switch on the yet difficulty and by default we pick from the easy and list okay so now we have our cleaned up code we select the list of level parts based on our get difficulty and then we simply pick a random one now let's make the other own lists okay now all we need to do is fill it up so here on the editor so we have our four types the easy the medium the hard and the impossible we just drag our references into our level generator and now let's test okay here we are and start running and let's see we put five different per difficulty so this is the first one this is the second one the third that's the fourth one and that's the fifth and there you go we start seeing our medium platforms and as we move forward yep there we go now we have a hard platform being spawned and afterwards yep there it is there's our impossible platform being spun okay awesome so now that we have our logic working it's time to build our content however before we do that let's make it very easy in order to test so let's go into our code here and let's go up and make another serialize field for a transform and this will be the prefab for the testing platform so this will be essentially platform that we wish to test so we can go here on our awake in here let's see if our prefab field if it is not known then we are using our testing platform so we can do a simple debug log in order to say that we are using the debug testing platform this is very helpful for us to build our content and now on our spawning platform down here when we are spawning the unlevel part if our testing platform is different from now then we put our chosen level part as our PF testing platform okay awesome so this shouldn't let us quickly test whatever platform we need to test now here on the local generate let's for example drag the impossible reference and now every single one should be our impossible level part so let's see goes up and as he goes yup there you go he's spawning down okay awesome and we can see on the debug there it is there is our nice hopeful message okay so this one will help us in order to build our content now let's do it so here we are and I have built a bunch of moving parts for each difficulty level and all of them have been added to the various lists so as you can see the easy one starts out very simple then the medium then the hard and then the impossible as you can see the platform's become smaller they get more spikes and also more coins on the impossible they pretty much require perfect time so let's test and try to reach the impossible level so for starters here we are start running and there you go we start with our easy platforms and after a while there you go there's our medium platform starting to spawn and spawn more and take various from the random list okay okay there are you know we have the hard platforms being spawned and now let's see if I can make it to the impossible and just a couple more and yet there are the Impossibles being spawned so now these are very very difficult and there you go I've lost alright okay awesome so we have all our various difficulties being spawned based on how far we get so our logic is working pretty much perfectly now for just one final thing with difficulty and our coin score working let's just add a very simple high score table so over here is the high score table that was built in a previous video check down in the description to see how we created this now let's apply this to our project so I'm going to copy the table into my scene here is a patty DUI let's see the code here's the table code here we have our code for adding a high score entry and the whole thing already supports saving and loading so with the table here the first thing we need to do is make sure we show it when we died over here we have the die function this is what's triggered when the player hits a spike or starts falling very fast as you can see it shows e game over window which shows the retry button now before we show let's come late our scores so an end for the final score Emma let's say our score is based on the coin amount plus the level generator and get the 11part spot all right so with our final score we go into that high score table in order to hand our entry now in here we need the name so for now let's just put a testing name just to make sure that this works okay let's try okay so here we are and if we weren't straight into our spike if there you go there's our high score table okay everything is working now let's add our name so here let's make a quick script okay so here's the very simple script we just have a static function in order to show it takes a score and the action in order to submit our name and in here we simply have an input film that we can input with our name so here in the canvas here's how it's set up we simply have our name tags which has a text and an input field and here we set the unvalidated input notice that our character two upper and on show we simply selected someone let's test this out let's go into the player and here let's comment out these two and instead of going to the high score name input window in order to show let's show the final score and right now let's not do anything with this just a test to see if it shows up let's do it people don't walk on the name okay let's see okay here we are let's now on the first spike and when we hit it yep there you go there's our name now let's say a B C any of there you go there's on the log ABC okay awesome so we have pretty much everything working now in here instead of doing a TV a vlog we submit our name okay let's try dying and there you go hit the spike okay a VC yep there you go ABC with a score of eight now let's retry now let's get a bit further so here we are jumped a couple jump it up on okay now let's fall and die and we fall in yup were that now let's say test any of there you go we go up there with 14 okay awesome now try to make it as far as possible let's see here are the medium platforms now the hard part forms and I've made to the impossible ones let's see any of there you go I'm dead any up there's my high score right there on the top okay awesome so we have our very nice leaderboard so just like that we have created a MLS runner infinite level generation with increasing difficulty we can easily add more 11 parts and more obstacles and coins to make this more very than interesting then we also took the scoreboard that we created previously and added to our project as always you can download the project from the utilities from unity karmic account if you liked the video subscribe the channel for more ent to tourist post any questions you have in the comments and I'll do my best Internet alright see you next time