in this video we're going to create the double jump with the ability to make it a triple also a nice object to reset the jump count in midair so we can cross big gaps let's begin hello and welcome I'm your code monkey and this channel is all about helping you will learn how to make your own games with enough tutorials made by a professional indie game developer so if you find the video helpful consider subscribing ok so this is what we want to create we have our character in here moving left and right and with a simple jump now if I jump off in the middle of the air I can do a nice double jump and the code is extremely simple to use and we can easily upgrade it so right now we have a double jump but just by clicking this button you can see the jump counter in there click it and now we have two air jumps so I can do it to jump double jump in a triple jump ok for example here on the on left side we cannot reach that platform with a simple double jump so we can go do a nice upgrade now we have a nice triple jump and as you can see we have a nice Metroidvania design then here on this side we have a nice or object that object resets our air jump counter so for example we can use it to come across this gap so I do a jump double jump hit the object another jump note double jump and I can now cross this gap so we're going to implement all this and depending on the game you're making it's up to you to decide which parts to keep if all you want is a simple double jump then it's going to be very easy alright let's get to it our starting point is this scene which was created in the video on making a simple jump if you haven't seen that video already then go watch it before this one to see how the basic jump works the own link is in the description here I won't just do a quick overview and then we're going to take this and implement the long jump here is the player code if we scroll down to the update as you can see in here we're doing a simple input test to see if the space key has been pressed and when we press we modify the rigidbody velocity and move them up this jump only works when we press space and the character is grounded then over here we have our movement code this also provides us with full midair control so whilst women middle of the air we can also move mutton right so we are simply doing a test for the left and right arrow then we also have a bunch of calls to the playerbase class which is what handles our animations so the stirring scene that I have here is the unity package from the project files from that video that you can download from the website okay now let's get to work on our double job so let's go here into our jump code and in here the first thing we need to change in order to have double jump is to not test for is ground what a double jump really means is that we can jump whilst in midair but only a certain amount of times so let's start off with a very simple boolean let's go up here and we're going to make a private ball for the can double jump and now on the update in here if we are grounded then let's set the can double jump to true and here first we test if we press on the spacebar okay then we test if we are grounded then we can jump and if we are not grounded we test if we can double jump and if we do in the double jump then we set can double jump to false so we can only double jump once okay so we press space if we are grounded we do a normal jump if we are not grounded we test the boolean we jump and then we set it to false so the next time we try this will be false and we fall down and when we fall down into the ground this one runs and we set can double jump back into true let's see so here we are i press space and I can do an arm jump okay now press space twice once twice and if there you go I can do the double jump now try to do a triple jump so we jump we jump and yep it doesn't work until my phone down you know I can do another double check ok great so our placing double check logic is indeed working now here one issue we might have depending on the game design is that if I jump double jump and I hold space when he falls down he does not jump so that means if the player presses jump exactly before he hits the ground he won't jump and that might cause some frustration depending on your game this might be the intent design but let's say we want to have a double jump but also to hold down the jump button and have that work so let's go into our code so here we are testing if get keep down on the space so this one is true for exactly only one frame so if we want them to jump as soon as he touches the floor if the space is being held down then let switches from gate key down to just get key so this won't be true whenever the space key is held down so in here we do our normal jump if it's held down however for the double jump we just want to test when the key is actually pressed so in here we do a different if if we have the gate key down then we test for double jump so if we have space on down and the character touches the ground this one only true the character touches the ground so he starts jumping up there on the next frame the space key is still held down so this one goes true but he's not grounded so we go into in here however this one won't be fall since it's the second frame that the space key is held down so this one goes out and then if we do press space whilst we're in the middle of the air then this one goes true and then we test it we can double jump and we do our double jump okay so this makes our double jump in our normal jump much better for the player so we no longer have frustrated players because they clicked on the space bar right before the character hit the ground so here do a normal jump and if there you go a normal jump now do a jump and home the space bar so jump and I'm still holding and if there you go every time he falls he's jumping ok good so if I jump and I press right before I hit yep there you go he keeps jumping and now for the double jump let's go and press again and yep there you go Chun double jump and I cannot do a triple and if I hold as soon as he falls he jumps again alright so our code is much better much less frustrating alright great so our basic double jump is working correctly however here in the code using a boolean means that we are limited to just one double jump now the pinning on our design we may wish to add an upgrade so that the player can double jump and then unlock a triple jump so instead of a boolean let's define a int for the number of jumps so it's gone with the air jump camp and let's also define a maximum so a prevalent air jump count max we're making this a normal variable so we could easily upgrade from one air jump to two in order to get a triple jump four stars on our awake let's set the jump out max to just one so we have one jump whilst in midair so we're here when we are ground instead of setting can double jump to true we set our air jump count to zero so this contains the current number of air jumps that we have made so when we hit the ground we have zero and then in here when we test if can double jump instead of that we test if the air jump count is less than the maximum so that means we can still do a air jump so we do it and instead of setting it to false we just increase it so when we do a double jump this one will increase so it will go from zero to one and then the next time we try one under one is not true so we can no longer do it all right so let's test and see if the normal double jump is still work okay here we are in a normal jump Stoneworks okay let's see double jump jump and that won't jump and yep it's all works let's try a triple one too and yep there's no triple we only have two okay great so now let's change it in order to make a triple so here we are and all we need to do is set the max from one to two and now let's see okay we are do one two and three yep there you go so we now have one two three a triple jump completely working one two three so we can go here jump here one two and A three and yep I made it across this gap okay awesome now it's at a nice particle effect when jumping in midair so for that I have this prefab here which has just a simple particle effect there it is so what we need to do is pawn it when we get a double jump so let's go into the code and up here we're going to add another serialize field this will be a private transform for the prefab of the double jump effect okay now back in the editor let's drag our prefab reference in there okay and here on let us go to where we are doing our double jump so in here it's the normal jump and here we have our air jump which might be a double triple or anything else so it's in here that we want to instantiate simply instantiate our double jump effect just like that okay that should do it let's see here we are and the normal jump works let's see a double and if there you go when there's a nice little effect and also appears when you do a triple so double triple and it looks very nice okay awesome now let's make a simple indicator to show how many jumps we can perform so first in here let's make our visual so we make a simple sprite let's make it just a simple bar so I'm going to use the white pixel okay just like that a very simple bar let's give it a name so this won't be the air jump icon and let's make it a prefab now let's go into our player code and in here add another serialised field drag it in the editor just like that okay in here let's make a function to set the max jump count so here let's make a predatory set air jump count max we receive an end for the air jump count max inside we set the variable and then let's build our bars okay so we are instantiating as many air jump icons as we need so now we go here instead of setting the max directly let's use this function okay so now we have all of our icons now we need references so let's go up here make a list of game objects and this will be the air jump icon game object list let's instantiate it and here we add it to the list okay so we have our icons being accentuated and stored in a list now we need this to be able to make them visible or invisible so let's go up here when we use our jump count and let's update our icons so make a function for that in here make a front void call it spend air jump then here let's increase our air jump count and we're going to call this function instead so we increase the air jump count and then let's hide our spent icons okay so we do a cycle starting at zero going until the air jump count and we simply disable or hide the game object on this index so if your gym count is 1 then the first one will be hidden if it is 2 then the first 2 won't be hidden and so on so for resetting the visibility good let's do a function a proudful reset air jump count in which we set the air jump count back in to zero and we set them all as visible okay so now up here instead of setting that directly in there we simply we set it like that and here in order to make sure this doesn't run every frame let's only run this if the air jump count is bigger than zero then we reset it okay so that should do it so first we set the air jump count max we create all the icons and put them in a list then every time we do an air jump we call this function we increase our count and we hide one of the game objects then when we touch the ground again we reset the air jump which sets this one back in to zero and shows all of our icons so let's run the code and see okay here are our icons as you can see we have two air jumps available so now we do a normal jump and doesn't change do a double jump and yep one of them is hidden now do a triple and one is gone and the other one is gone and I can't jump anymore and as soon as I touch the ground everything resets we have two air jumps and yep there you go so now we jump do it double triple fall down double triple and fall down and reset okay awesome so we have as many jumps as we want as well as icons to tell us how many we have now let's do a fun test we're going to make a button so we can upgrade our jump count whilst in the middle of the game so let's go in here go into the canvas let's make a simple UI button ok so I have created a game object called our test UI inside I have a game object with a nice simple button it's using the button UI class which is part of the code monkey Tony's that you can grab for free from in Tacoma Keep Calm and this class is very simple it just allows me to easily create buttons so with this let's make a script so it making you see sharp script this won't be our test UI let's drag it onto the game object and in here we simply do a perfect awake grab the reference to our button and now when we click the button we want to upgrade the maximum number of jumps so let's go into the player and here we're going to need a reference for the player instance so let's just make a simple static field down here and let's make a static function in order to increase our jump count so we have a static function that we can come from anywhere else so it's perfect for our testing so in here when we click the button we call the player dot increase jump count max we call this static function this static function uses the instance and calls the increased jump count max which simply increases the air jump count by the maximum plus one okay so we should have a button to easily upgrade our jump whilst in the middle of our game so now let's go up here and by default let's leave them with zero so we only has a normal jump and then we're going to increase it let's see ok so here we are moving around as you can see there are no icons under so we do not have air jumps and let's see I can jump and yep there's no double jump I can only do normal jumps okay awesome now let's go in here click on the button and if there you go I now have a double jump so I can jump and jump again and there's the indicator now I still don't have enough in order to reach this platform so let's click in and you know I should have a triple jump so I do a first jump second jump triple jump so if I do them all at once and yep it's enough to reach this nice platform so I jump down and here and jump yep there it is so we now have a nice button and as you can see it's extremely simple to do a simple upgrade in order to increase the number of air jumps so with the functionality to operate the jumps you can see how we have some nice Metroidvania design now let's also create a nice object that we can use to reset the jump counter so here in the editor let's make a nice gap here on the right side that is only possible if we reset our double jump in midair so in here let's just push this to the side so here we start off with a double jump and now if we go here to the right side I jump and do a double jump and it's not enough to reach that platform so let's make a nice orb that we're going to place here in the middle so that when we hit it we reset our jump counter whilst in midair so let's see here in the editor I already have a nice sprite prepared there it is it's just a simple prefab with a nice particle effect behind it so this won't be our orb that won't reset our jump counter so let's go to our place and here in between these two jump platforms we're going to place it in here so the player jumps does a double jump then hits here he resets the air gem counter any jumps and double jumps again okay let's do that okay so in order to make sure that the player collides with this object we need to add what's going here make a circle Collider 2d and let's make this a trigger so it doesn't collide with the physics now let's make a script for it so in here a new csharp script this won't be our jump orb and drag it onto our prefab now in here let's do a front void on trigger enter 2d so this function is fired when a collider collide with this game object first thing we do is identify if it is the player so we test first if the collider the game object got get component of type player is not known so let's clean this up so if the play reference is not known then that means the player has collided with this jump order so we need this to make some function in the player that won't do what we want so let's say player let's just call it touch jump or okay let's make that function it's down here let's make it safe only boy touched or now when he touches your let's reset the air jump count so we call this and let's also make him do a auto jump so let's go and see our jump code here it is we modify the jump velocity so we can clean this up so we don't have duplicated code so let's go in here make a private toy jump and we're going to do this and in here we call our jump we spend the air jump and here we do a normal jump and finally down here when we reset the air jump count and we do a jump okay so that you do it so when the player collides with the jump or this code runs if this code identifies that it was indeed the player that collide with him it triggers this function on the player which resets the air jump count and triggers a jump let's see okay here we are everything works the same as normal we have our nice double jump now let's see if we can live with that we jump double jump collide with it and there's a jump another double jump and yep I can now reach this nice platform so I go back double jump touch it there's another jump and double jump and so on so hit it hmm and yep just like that okay awesome now in here the jump rope currently works every time so if I jump double jump hit the orb and here I'm constantly jumping every single time let's make it so that when we do jump on the orb it stays inactive for a certain amount of time here on the jump or let's make a simple timer so a private float let's call this the enable timer we make the appropriate update we reduce the enable timer and if it is under zero then we just set this jump orb into active so let's do here a part volume column jump or active and by default on our private boy in awake we start off as active and in here we only run our timer if we are not active so if we are not we countdown the timer when timer isn't left we set it back into active and when we trigger on the player we test if the jump fork is active and we have a play reference we make an jump then we set the jump orb to inactive then we also set the enable timer at let's say 5 seconds so when the player does an auto jump we disable the orb for five seconds after 5 seconds counts down the time and we set it back to enable so in order to visualize this let's modify the colon so when it's inactive it won't have the halfa turn to a half and when it's back to active it won't be fully visible so let's see here we are now let's go to our testing place we do a jump a double jump hit down and yet there you go now it's inactive and after 5 seconds you should see the alphago backed up and yep it's active again now we hit it any of their ego exactly so now we can no longer constantly jump on top of it since it only becomes active for a little while so in here do a jump double jump hit it it jumps that won't jump and I can now cross the huge gap awesome ok as one final thing let's just change the animation whilst we're doing our double jumps so here on the employer animations we are simply testing if the character is grounded if so we check the velocity if it's zero then we are playing the idle animation if not we are playing the move animation and when we are not ground we are playing the jump animation the player base also has a different function for a roll animation so that's what we're going to use however we only want to play that animation when it's on the double John so on the first jump we wanted to keep this one so for that we can similarly test compare the air jump count to the air jump count max so if the air jump count is still zero that means we did not knew any double jumps so in here we play the normal jump and if not we play the role animation alright that should look good let's see okay here we are do a jump it's not the same animation and that will jump and there you go on the second one we've got a very nice new animation going here jump hit it and double jump and yep everything looks quite nice hit jump and that one was disabled and didn't work and again we can still go here into the on left side pass this jump do this jump and now can we go in there and nope we cannot reach it so we click the button upgrade our double jump into a triple jump and now we can indeed reach this nice platform so here is our fully creative scene we start off with just a simple jump then we add the ability to do a double jump then we add the ability to make that internet integer so we can make any number of jumps so we can do a double triple or as many as we want then we created a nice special orb which we can touch in midair in order to reset our air jumps which provides excellent design for making different levels so we can go here jump it jump again and again the home code is extremely simple to use so we can make a nice upgrade system and click it and now we have a bunch of nice air jumps and we can constantly jump and everything works nice and easy and works great as always you can download the project files in utilities from unity code monkey comm if you liked the video subscribe the channel for more unity tutorials post any questions you have in the comments and I'll do my best answer alright see you next time