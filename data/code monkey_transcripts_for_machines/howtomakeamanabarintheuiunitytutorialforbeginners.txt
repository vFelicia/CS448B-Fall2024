hello and welcome I am your code monkey in this video we're going to make a mana bar in the UI let's begin so this is a bar we want to create a simple manner bar with the logic to regenerate and the ability to be able to spend mana so I can spend and the bar regenerates as you can see the texture is nicely animated it has a custom border and when it goes up you can see that it has a nice edge image and it vanishes in yet all right so let's get to it so here we are in an empty scene let's go into the canvas to create our bar so first we create an empty game object this will be our container inside let's have an image for our background okay it's expanded to occupy the home bar size all right now a game object for our bar and let's do this in blue all right like that now in here I'm going to drag a sprite for this one by one white pixel it literally is a texture just say one by one white pixel now we are adding this so we can now go into our bar and now we have access to the various image size so we can swap this from simple and select filmed and here set it to horizontal and go from the left alright so right now we have an extremely simple and easy to use bar we just change the film mountain here so as you can see when it is at one it's completely foam when it's at zero it's a little empty and somewhere in between so this is the only value we need to change through our code and finally just add a border and there it is our extremely simple bar all right so now with the UI setup complete let's head into the code make a new csharp script this will be the handler for our mana bar so in here let's first go on to our private void awake to grab a reference to our bar image all right we have a reference to our bar image and the way we're going to modify this is simply go and change the fill amount so for example in here and let's put it at point three just to test so here in the editor all we need is to drag our script and run the code and yep there you go as you can see the bar is currently 30% film alright great so now back in the code this is supposed to be a kind of mana bar so let's write some basic mana code where the main amount is constantly increasing so for that let's put the mana logic in a different class separate from the bar so here I make the photo class for our mana we need a field for the current man amount we also need a field for the region amount and let's also define a constant for the total alright now in here make a simple constructor and we just initialize that amount to zero and the mana regen amount let's say 30 yet so we're going to regen in 3 mana per second now let's make a function that won't run on update so we can simply call it update and in here we're just going to increase the minimum so we just do man amount was equals the mana regen amount multiplied by time.deltatime all right so just like that we are increasing the mana amount then we need a function to be able to spend some manner and we're just going to spend it if we do have enough okay and finally a function to get back a normalized value and here only do is return the MANET amount divided by the manner max all right so that's about it we have a very simple class to handle all the logic for our manner so now let's use this to test our metal bar so in a week let's create a manner object and here since this one is mono behavior in is attached to script it does indeed have a private oi update and now inside this update we have to call the manner update again we're doing it separately so we keep the logic in one class and dividual in another so this man class does not depend on this mana bar class and after we update the mana we simply go into our bar image and set the fill amount to manage get man at normalize all right so let's test there's the bar and as you can see it is indeed increasing on every frame all right so far so good now let's add a button to test spending our mana so for that here we are in the mana bar and I'm going to be using the code monkey utilities which as always you can grab for free from unity code monkey calm so from those I can go into the ECM debug class to create just a very simple button on the you are alright so this function takes a position for the button a text for the button and then an action and this action is triggered when we click on the button and when we click we want to try to spend some man alright so let's test okay here we are the man is increasing there's the testing button now if I click on it I clicked and as you can see nothing actually happened so let's go into our mana class to see why that is happening and the reason is actually pretty simple it's that in here on our updates we are increasing the met amount but we are not actually capping it so we are currently on letting man amount go way beyond mana max so when we spend we don't actually see it so in here all we need to do here all we do is climb our man amount all right so let's try again there's the bar it's filling up when it's the moon leaf oh and I click on spin Manor yep there you go now it correctly spent 30 men so I can spend several times when I get down there I can only spend any more since I need to have a minimum ok great so our extremely simple bar is pretty much done however this looks pretty boring so let's polish it up to make it look quite a lot better so here in the project files I have a bunch of interesting assets like for example in here our mana bar let's replace the bar with our mana bar and put everything in white ok right for the border let's replace with our mana border for a tea color in white now this border is meant to go on top so let's drag it to be on top of our bar okay there's our border now in here on the border in this case it is pretty much scale to correctly match our bar however in order to make it take the exact perfect proportions we can go into our sprite editor and here we can define various slices to be able to easily stretch our bar so we simply drag the top on to there drag the bottom in there and drag the side in there and design in there so this way our sprite will be automatically stretched in the middle bits but the corners won't stay exactly the same so it's a part on the board instead of being simple we simply sound like sliced and just like that you can see that the curves are much more correct now let's scale this alright so there's our border using proper textures which makes it look that much better so let's run this matter bar and even there it is it looks so much better and yep it is increasing so in the same and we can still spend everything so works the same right great now however this is still a bit too simple we want our texture to be animated so let's do that so in order to animate our texture instead of using an image let's remove this and we're going to instead use a raw image now let's drag our mana bar and well using a raw image we have access to more texture options so in here we are using a sprite but we could also have used a simple texture TD also with raw image we could apply a material and do some really interesting shader effects but for now let's simply do a very simple effect which is we want to constantly in here on our UV rect we want to constantly shift the X so that it seems like the bubbles are moving now as you can see once I move that that looks pretty bad and the reason is because we have to go into the meta bar and here on the wrap mode instead of being clamped it needs to be repeat and just like that everything repeats so now in here I can shift the UV rect and there you go the texture is consistently repeating ok so now let's do this movement through code so back in our code the first thing we do is comment out the bar image since that no longer exists instead we have a raw image and here on update instead of setting a fill amount we need to modify the UV rect alright that you do it so we grab the UV right stroke that is currently on the wrong image we shift the X to the left side by one per second and then we simply set the UV rect back into our raw image so let's see if the texture is consistently moving and if there it is the image is indeed being animated now it's moving a bit too fast but yep the effect is examined like this so now we still need to show the current map amount right now it's just fully filled since we can't use a fill amount with a raw image we need to use a different approach so in here we're going to use a mask so here is our mask we sim will create the new game object at the mask and the image component and made our bar a child of the mask so here as you can see the white part is the mask and if we shift the bar on this side as you can see it is no longer visible now in order to be able to move the mask let's stop using stretch and use just a regular width and height same thing for the inner bar and we also set the bar to be anchored on the left side so through code noir to achieve our effect we need to go into our bar mask and here is our width and we can simply change this and the texture behind it won't be animated as we were doing previously so we need is to modify the anchor to the left side and everything should work there it is there's the width going down okay so let's create this effect through our code first let's update the position of our raw image which is not like this or rather fine the bar mask and it's inside the bar mask okay and we also get a private right transform for a bar mask now in here on the update we are still animating the raw image okay that remains the same so we are doing the same thing we're doing previously we get the bar mass size Delta then we get the bar mana normalize and then we need to multiply that by the mask width so let's store it up here and we grab it from the rect transform size Delta X okay this way we don't have to write any magic numbers in our code so you do that and then just get the mana normalized multiplied by the width and finally we set the size Delta back to our modified bar master science No all right that's pretty much it let's see and yet there it is as you can see it is increasing in the texture behind the distant animated so we can spend some manner and there you go the madam bar goes down the texture remains animated and everything looks much better than simple solid colors and here the direction of the effect is very much personal preference since we can simply go into our code and swap from minus equals point to do plus equals and all of a sudden the texture direction is going in the opposite direction and there you go so now let's add one final effect we're going to add the glow on the edge of the bar so we're here in the project files I have these glow images alright so this is our edge image now let's change the position of this the same way we were changing the mask width so here in the code let's grab the edge rect transform and on update we're going to do pretty much the same thing we set the rect transform anchored position and the X will be the same as the bar mask width so we copy this and then put it on zero all right so it should pretty much be working let's see and if there it is there's the edge image accompanying as the mark gets filmed all right now the ad should be hidden if the bar is fully complete so let's do that so in here we can simply do that that came object set active and this one is only visible if the mana dot get mana normalized is under one so if the bar is not come loaded filmed it should be visible let's see and there it is the edge is visible once it gets to the end there you go it vanishes now I spent some mana there's the edge again goes up and vanishes all right great now let's add the final effect which is to make the edge animated all right so here is a simple animation we just had the two individual edge images and I'm here I just have a simple animation changing the Alpha and moving it a bit and here in the edge it has an animation component with that animation okay so let's see and yet there it is the final effect with a nice animation going up and when it gets to completely fall it hides itself so I can spend some mana and there it is the mana bar is filling out gets filled and come only empty and just like that I cannot spend if I don't have enough and yep it's regenerating and so on and so forth so there you have it you create a mana bar that displays a current mana amount that we can spend and regenerates over time we have the nice animation to the bar as well as it going on the edge making it one look very nice as always you can download the project files any tony's from unity code monkey comm if you have any questions post them in the comments and I'll do my best Internet subscribe for more videos and I'll see you next time