in this video I'm going to go over what I've been working on been around tycoon along with an overview of how each element works new buildings vips overlays maintenance and trash system and improved performance let's begin so there have been fewer videos lately since I've been focusing on making progress on Van erotic I'm trying to get the game fully completed and out of early access by the end of August so that's my priority right now you can pick up the game on Steam and if you do please make sure to write a review since reviews help the game stand out on Steam here I won't go over what I've been working on and a brief overview of how each element works if you'd like a more detailed video on anything I show here please post it in the comments so in total I've been working on adding a vending machine coffee shop new vips overlays crowd system performance and maintenance system serving with the coffee shop this is a building where the SU went to drink some coffee which replenishes their energy the building is composed of essentially two elements there's the coffee machine and the counter the outer part or it's very much like any other building so there's an exit and an entrance with a waiting queue let's look at a basic interaction the worker is waiting I guess goes in guests makes his request the worker takes the request goes to the coffee machine starts making the coffee wait for the coffee to be completed right now it's done now he grabs the coffee and gives the coffee yes guest leaves and so on the workers are dynamic so they're not stuck just serving one particular so I can have another counter in here and another one there and right now one chief guests can occupy all the counters and the worker is smart enough to be able to complete tasks to go from this counter this one in this meaning that a single worker can handle various counters without issue the counter has a position for the guest and one for the worker and the Commission has a position just for the worker all the tasks here are handled by the task system I've covered the entire test system on the channel so check out those videos to see how it works and in here on the coffee machine there's a very simple but interesting animation the coffee cup is just a simple sprite that gets shown or hidden depending on the state of the coffee machine and the coffee drip has a very interesting but simple animation so let's pause and look at it here it is in the editor and you can see the animation example like that this animation is very simple it looks like a liquid falling down which is exactly what is intended now over here is the texture as you can see just a static texture and then in here in the material you can see the offset is constantly increasing this is what makes it constantly move so it looks like liquid actually falling down the only thing you need to make sure that this works is to go onto the texture and make sure that the texture over here on the wrap mode you have repeat as long as it is on repeat this won't work so anytime you want to have a scrolling effect this is all you need to do a very simple but nice animation then another element is the vending machines over here the vending machine this is a really simple one which is essentially just a different type of building so I collect place at the end there you go there's the building right there essentially it's exactly the same as any other building except it does not have weighting although in reality it does have a waiting queue to manage all the guests going in there and using it except the waiting queue only has one slot and is invisible but in terms of functionality this is exactly the same as this the guess essentially goes to the vending machine thanks for Wow then decides whether it wants to drink or eat and then makes the decision grab this thing and solves his need many machine serves for something both thirst and hunger need then he leaves and vending machine becomes empty and lava gas can go in so it's a very interesting building that is quite different from all the others for the player it provides another way to solve hunger and thirst needs without taking up much space another nice addition are the new VIPs these are great for making the game more very I've made a video covering how I initially add the VIPs in the game so go check that out and now I've added seven more some of them you won't recognize if you've been following the channel so right now I've had this laser mage wizard and mystic which are characters that I do for the game jam RPG they work great as individual interesting VIPs then there's blueprint man which is supposed to be a character from Wolverine tycoon the ogre which is a character from hyper Knights battles and finally mr. America which you'll recognize from the video making Captain America so these are the new very interesting VIPs in terms of functionality every VIP is pretty much like every other guest they have needs and go to various buildings to have fun the only differences are they have special names special textures and a bunch of special messages and when they leave they affect the park rating more than a normal guest so it's a very nice feature that I had some nice variation to the game then I worked on something that isn't visible but it's always important performance improvements there are two places where I've improved performance significantly first is the confetti the confetti is used in this congratulations window that pops up whenever the player achieves certain goals this effect is great and it works however it is based on constantly in sin cheating and destroying images as you know instantiation and destruction are very expensive cons this confetti effect is actually something I made in a video a long time ago it was the video song raining a thousand subscribers it's a great effect but due to the in Senshi Asian it's actually quite performance heavy so whenever the congratulations window pops up it freezes the game for about a hundred milliseconds as in instantiate the initial line of confetti parts now one possible solution for this problem would be pulling the confetti parts that would mostly solve the issue since we would normally be in sin cheating and destroy but I want to go one step further and said just used a dynamic mesh that way the whole thing works on a single game object so for here are the two skirts the normal confetti and the confetti mesh now in terms of logic they are pretty much the same they have a list of confetti parts and then each confetti part is an instance of this class and has an update to move rotate and so on over here on the mesh is the exact same thing there's the class for a single confetti and again the update which moves it and so on so the logic on both of them are pretty much the same except one of them is using images and the other one is using a mesh for the mesh I've covered it in several videos on how you make a basic mesh it's very simple we need these vertices triangles and UVs and then you simply add a quad for each of them so quad is made up of four vertices four V's and six triangles so on the old script this is constantly in Senshi ating a certain prefab whereas on the new script it is simply adding a quad to the mesh so the end result is visually exactly the same however in terms of performance here is the normal effect constantly instantiated new parts so there is always some tiny micro stutters and as you can see taking 11 milliseconds and running at 90 frames per second and here it is the mesh effect and as you can see everything looks great there are no micro shutters there's nothing being Senshi ated or destroyed and over here you can see 400 frames per second so this is a great improvement and visually it looks exactly the same so in this case it's a great idea to use a single mesh instead of hundreds of game objects now speaking of meshes the other performance improvement involves very much the same thing now previously each round town was a single game object this is obviously not the ideal approach so we can pause and look at the hierarchy over here and we can see over here all these meshes these are all ground towns as you can see right there the ground town and there's hundreds of them so we're here each of them for every single ground town so so here if we look at these stats there it is we have 500 meshes being bashed now it's good that they're being bad but so this is quite wasting so now let's look at the new approach here it is and visually they look exactly the same however if we pause and go to the hierarchy there it is we no longer have a hundred objects right here every single one of those brown tiles is right here on a single mesh so again another performance improvement by grouping all of the separate game objects into a single mesh and if we go back into our stats and there it is now saved by batching only not so we have successfully eliminated 400 game objects replace them with a single one and it looks visually exactly the same so these are our two examples of things that the player will never notice since it looks exactly the same but he won't certainly enjoy the extra performance now since we're talking about meshes let's cover the various overlays more overlays is something I've wanted to do for a very long time since a tycoon game is really all about the player having as much information as possible and making it easy to understand previously the only overlay was this one the environment overlay so essentially each decoration object has a radius that affects the environment so if I go in here on to the environment and place another decoration let's say place statue in there you can see the new updated environment overlay so depending on the object some have a smaller radius and some have a bigger radius so just like that that one is you can see doesn't reach green so I can add a cup more objects and there you go just like that and the guests will enjoy having a nice environment now for the visuals of this overlay it is very much the same we again have a dynamic mesh everyone various overlays our own mesh base in order to achieve good performance some our grid based and some are not so for example over here the environment is grid based so it's based on the environment grid so they're essentially a class which separates the entire map into various segments and then each of them has a certain value so over here on the green has a high value and over here has a low value and where it's black has zero but then there are other overlays like for example here the transporters we're again made a stone based on a mesh so we can pause and look at the dynamic mesh here is the mesh and as you can see if those are all different but still this is all just a single mesh all we have here our individual quads constantly following our transporters so this overlay for example makes it easy in order to locate the various transporters another thing I've had recently are the maintenance workers so here they are and then various overlays for the various needs over here the excitment as you can see that one is really unhappy that one is really happy and so on and for the energy blather thirst hunger and over here the global happiness so these overlays should help the player quickly get an overview of how things are going there are so a bunch more overlays that I want to add like for the various financials like revenue in profit as well as average wait time then this overlay over here is the ground overlay so it works very much like the environment so it is grid based and each guest updates his position whenever he moves every once in a while so we're here this one helps you quickly understand where all the guests are located so ever here we can see some red areas so there's a lot of guests in here and not many around here right now I'm still working on this overlay I'm not sure if this contains all that much information but either way so far it works as a quick way of just seeing where all your guests are so that's the overlays and finally for the maintenance system this system is composed of three different parts there's the trash system the maintenance system and the maintenance workers the trash system randomly spawns trash on the map the maintenance system keeps track of the durability of various objects and the workers look for things to clean up or fix so further work is essentially they have a different AI from the transporters now the trash system is relatively simple but has some interesting things to it essentially over here there is a take counter constantly going down on every time tick as it goes down after a while it selects a random position in order to spawn some trash over here is some trash being spawned and if we look at the overlay for the environment there you go each trash object causes a negative effect on the environment so there you go they keep getting randomly spawned only on the positions where there is a ground town so for example trash will never to be spawned out here so that's one part of the system randomly spawning some trash and now we have the maintenance workers so let's hire some workers make them maintenance workers and now look at them and look at the environment overlay and you can see that one goes there twins are now Queens that one up and so on so all of them are cleaning out the trash as it gets spawned now the more guests you have more frequent the trash is fun right now this is obviously just a debug frequency so you need maintenance workers to clean it up then another part of the trash system is a new building which interacts with it which is over here on the park the trash can so here I'm going to place a trash can right there and there it is there's the visual for the trash can now when the trench system is going to spawn a trash object first it looks around the target position for any trash can if there's a trash can within range of the trash position it checks if that trashcan is full and if not it adds trash to the trash can if it is full then the trash gets spawned on the floor like normal the trash can is a very simple building which essentially just holds an INT in total we can hold five trash here is the trash can logic essentially this is very simple all it needs is this int for the trash your mouth and a maximum for the max amount of trash so here's a malfunction to try and if it's not fold and added for an event and various functions to see if it is fall or if it is empty and as it gets added the sprite gets updated so over here we can look and we can see right now that trashcan is completely empty and after a while as you can see no trash is being spawned in here because if this area is selected then it gets spawned right on top of the trash can and after spawning a couple of them there you go these pride changes now it is halffull and after a while they're dizzy trashcan is now completely full so now more trash can be spawned in here there it is that trash object was created in there because that trash can is now full and if we look at the overlays for the environment there you know now that one causes a negative reaction on the environment so that's a trash and again let's make these workers into maintenance workers and watch as they clean up there we go cleans it up and as you can see the environment is nicely being improved and then one of them will go and clean up the trash can and there you go not the trash can has been cleaned up and everything is nice and green okay awesome so that's the trash system now the in maintenance system is the other part of it it is not yet fully complete the idea is as gas use various objects and buildings they won't lose their ability and if completely broken they need to be repaired in order to get back to working again so right now I've only implemented the basics on a single object right here on the target practice Lane so this barn here is a debug bar showing the current maintenance tape so as you can see it is in there and when this guy finishes and shoots that one and there you go the maintenance bar went down since that guy used this length then the maintenance worker so let's assign one worker to be maintenance and there he goes he goes there and you repair the 'only so the core of it is working now I just need to apply to all the other buildings and figure out how I'm going to visually show the system to the player the idea being that obviously you need to take care of your park in order to make your guests happy so these have been the elements that I've been working on been around that new buildings VIPs overlays maintenance and trash system and improved performance the game is coming on nicely and I believe the final game won't be quite great it is out now on Steam early access so you can pick it up right now to play the current state and in doing so you'll be supporting this channel if you do get the game please make sure to write a review since those are very important for getting the game more visibility on Steam which helps it stand out if you like the video subscribe the channel for more dev logs and unity tutorials post any questions you have in the comments and I'll do my best answer alright see you next time you