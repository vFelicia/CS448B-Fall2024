in this video we're going to create a skill tree to unlock new abilities in unity we're going to create the UI and make each skill have a specific path to be unlocked it will be integrated with the previously made local system in order to get skill points let's begin hello and welcome I'm your code monkey and this channel is all about helping you learn how to make your own games with nf2 torrents made by a professional indie game developer so if you find the video helpful consider subscribing okay so this is what we want to make over here is my player character and I can move them around and in here we have the skill tree as you can see some skills are completely unlocked because they have certain specific requirements so in order to unlock the Earth's shadow first I need to unlock the whirlwind however it is also based on skill points so right now I cannot unlock the whirlwind because I have no skill points now I can spawn some enemies and as you can see when I kill them down here is the experience bar and yet there you go I gain experience for every enemy I kill and once I kill enough there you go I level up and over here we gain one scan point so this is using the unlevel system that we made in a previous video so go check that out and now that we have one scan point we can use it to unlock any of these skills so for example let's unlock the woman Surigao the whirlwind is unlocked and now we can unlock the earth shatter but again we don't have any skill points so let's get some more let's go on some more enemies use the whirlwind and there you go kill them all and over here we get a ton of exp with that exp we get more skill points and now we can unlock more skills once again they have specific paths so I cannot watch this one before I'm walking this one mark that one and now that one down and now spawns more enemies and in this case use earth shatter and there you go take them all out get tons of exp tons of skill points and tons of everything the whirlwind and the earth shatter are actually the same skills that I use in hyper nights that game is included in the game and also go pick it up to play it so just like that over here we have our nice game mode fully working so we go out we kill a bunch of enemies so there you go just kill them all take them all out and as we kill them we gain some exp with the XP we level up we gain some skill points you spend some points in order to get some new skills and then we kill more enemies get more skill points more level more exp more skills and more everything so here we have our awesome mini game this video is made possible thanks to these awesome supporters go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone alright so this our goal let's get to it okay here we are in our starring team I have my player character that I can move around and I have some enemies being spawned down here you can see the experience bar as I kill enemies it goes up and with enough exp the character and levels up so this was made in the unlevel system and it's what we're going to use in here in order to generate skill points all right so this is our start now back in the editor let's begin making the UI visual so over here on our canvas let's make a new UI call this our UI skill tree and in here let's just build a very basic button all right so here's our very basic button now for handling clicks I'm going to add the button UI component this is part of the code monkey Toby's that you can grow up for free from unity code Macomb this is a very simple component it just handles a bunch of Mouse interactions now let's make the script to handle our skill tree window so on our scripts folder let's create the new one and call it our UI skill tree and let's drag it in okay now in here let's just grab a reference to our button so when we click we're going to execute this action in here and for now let's just do a simple debug model all right that should do it let's test so here we are and click and we go we have our click alright so far so good now let's test and lock in a specific skill here the player is managed by this script as you can see it's pretty simple just sixteen lines long and then here we're taking care of the experience bar and matching it with the other level system then down here we have a bunch of functions that we're going to use for unlocking our skills so we have a function to test if we can use the earth shatter or warm wind or set a different movement speed and health amount max so now when we click on button let's invoke a specific skill however we do not want to do that directly we don't want to play a class to directly interface with the UI so for that let's make a proper class to handle all of our skills so here we make a new csharp script and let's call this our player skills here let's make this a very simple function so you get rid of everything including model behavior all right have a simple basic class and first of all it's making a noon to define all of our skills and for starters let's just try out the earth chatter then let's add a function to unlock a specific skill so this is the function that we're going to call from the UI in order to and welcome let's just keep track of all the ones that are already unlocked so we have a list of skill types and on our constructor we simply initialize our list then when we have the unlock we simply go into our list and we add our News compiled all right very simple now let's have a function in order to test if a specific skill type has been unlocked and now we do is we ask the list if it contains this particulars counter all right so here we have a very simple class to handle all of our player skills and now we can go back into our play class and then here let's go all the way up here to make a field for our player skills and then awake we initialize it all right and now down here on our function where we test if we can use the earth shatter we're going to ask the player skills class if the skill was involved and we're going to pass in the earth shatter all right so that's it now we have a specific class dedicated to handling all of the player skills now all we need to do is make sure that our UI interfaces with this function so to do that let's make a script to handle our connections back in the other term let's make a new csharp script call it our testing and make a game object to hone our script and drag the script onto it okay now in here let's add a field for the u.s. country as well as the player so we have references to our player and to our UI skull tree now we want the skill tree to interface with the players player skills so let's go into the UI skill tree and in here let's make a function to receive the player skills okay we have this function which receives our player skills and we set our internal field and then when you click on the skill we go into our player skills and we call unlock skill and we unlock the earth shatter all right so now we need to call this so for that here on testing we go into the UI skill tree and we can't set all your skills so now we need a reference to our player skills so let's going to the player and here and let's make a function to return this field all right so here we will return the player skills and now on testing we set it on the UI tree and we grab it from the player all right so all this should be working essentially we made a class to handle all of our skills so this class is only one responsibility then the player class holds an instance of our player skills and then we have the UI which interacts with the player skills that it receives so if our code is nicely separated and everything should be working what's test ok here we are and the earth shadow skill is on a button and I'm pressing the button and note nothing is happening so the skill is currently locked now let's click on this button and now we have unlocked the skill and press the button again and there you go there's my earth shatter skill so just like this we managed to unlock a skill by pressing a button on the UI awesome so with the structure that we built here we already have our 1 skill and we can easily unlock a bunch more skills so let's add the rest all right so here I've added more inium films for the remaining skill types now let's make the UI visuals all right so here I have had a bunch more buttons so we have the movement seed movement speed to health one how to the whirlwind and the earth shatter and now in our player scale we already have our enews just one thing over here on the unlock we're currently adding always no matter what so let's do a simple check to make sure the skill isn't already unlocked in case we accidentally unlock it twice so if it is not yet unlocked then we unlock it okay now we need to call this function so on the UI is country let's decode for all the other buttons alright so here we're just calling a simple function on the mouse click ok and now back in the player in here and let's send all the skills so here on the whirlwind let's use the same thing that we did on the earth shatter but in here we use this one okay so these two are working but now for the movement speed and health amount it's a bit different we need to actively no windows get unlocked so what's going to our player skills and in here let's make an event so here we have an event on skill on what and let's also make an event aargh so we can pass in what skill we unlocked so we have our event passing enough type on skill unlock the event args which contains a skill type so now let's call this event so down here when we unlock we add it to the list and then we fire off the infant so invoke with this and the new unlock cards then we pass in the skill type as our skin type alright so we have this event being fired whenever the scale gets and what so you can go back into the player and now we go all the way up here when we are in sin cheating our player skills let's subscribe to the on skill unlocked event and now when that happens let's do a switch on our skill type in case we have for example the move speed one then here and let's modify our things so we use this function in order to set our movement speed so on move speed one let's put it and let's say at 65 and then sweetu another all right now for the hump max alright so this should be working so what we did was we added some more enum values onto our skin types then we're unlocking those skills through this function which gets called through our UI and on the UI we also built the various buttons so then when this function is called and we unlock a skill we fire off an event and then on the player we are listening to that event and when that happens if it's a move speed or health max we modify that one immediately and if not then we have the functions asking if we can use our skills and if so we just has the player skills if the skill is unlocked all right so all that should be working let's test ok here and I'm going to try to do the earth shatter and nope can't do it the whirlwind nope and here I got the normal movement speed and the normal health bar so now let's unlock the whirlwind and now I hit it and there you go there's the warm wind skill now unlock the earth chatter and use a skill and there you I can use it now let's unlock the movement speed so this is in our movement speed click it and there you go now it's a bit faster and movement speed too and there you go now it's quite a lot faster now for the help there you go the health bar and that and walking it's a bit bigger and that and it's a bit bigger alright so here we have all of our skills being unlocked awesome so just like this our skill tree is already looking great now one thing that is usually common in skill trees is having a certain path so certain skills have other requirements before they can be unlocked so let's do that over here in our player skills let's simply make a function that will return the requirements for a particular skill so for example the health max 2 will have a requirement of health max 1 all right so we have our requirement and now here we have a particular issue due to the fact that we're working with in ohms so that is how we're going to deal with skills that do not have any requirement so the very first ones when approach would be to make this knowable and we could then return null this would work but honestly it doesn't look very good so instead let's keep it to returning a scum type and then we go up here and we simply have the first come type as our default none so this represents no scale type and then here we simply return that all right so we have our get scale requirement and now let's make a function to try to unlock a certain skill so the UI won't use this function instead of the one that actually unlocks it so we can make this one private and now here let's get the requirement for the skill so we have our requirement then we check if the requirement is not none so if we do have requirement then we check if is skill and whopped if the requirement has been unlocked and if so then we can indeed unlock this skill and if it has no requirement then of course we can unlock it but if it has a requirement and the requirement is not unlocked then we cannot unlock it now let's make this return a boolean in order for the UI to know if the skill was unlocked or not so here if we can well let's return true and if we can't unlock then we return false all right so now we have a function which tries to unlock the skill now let's go into our UI and in here as you can see we got our read error since this one is now private instead we need to use the try and a lot of skill so we replaced all those just like that and now this function you may return a boolean in case it succeeds or fails so you can use that in order to show a nice tooltip warning so here I'm using the tooltip warning which was made in a previous video so go check that out and now let's just apply to Alden now here we should really clean up this code since all of this has a lot of duplicated code but for now it should work just for testing so let's test it out okay so here we are now let's try to and while come to read way so I click and there you go I have an error I cannot unlock it since it has this one as a requirement so first and lock this one there we go the hump bar increased and now I can lock this one and there we go it worked so if i unlock movements feet to right away it doesn't work get the first one then the second one and if there you go just like that alright so with this we have our skill requirements working awesome now let's handle the UI visuals so here in the editor we're going to first show the unlock skills in black and white and low alpha and the skills that we can unlock in black and white with foam alpha and the unlock skills with normal colors so here in the project files I have a black and white shader so here it is very simple we just have our main texture we sample it then we use a saturation notes at the saturation to zero then we take the RGB we multiply it by a certain alpha we combine it all and we pass it into our sprite master node so now let's make our two materials so we have the skill marked and a skill unlockable now we're going to appoint this dynamically so let's go into our UI script and up here let's add our fields so we have our films for the skill mark material any unlockable material so here in the editor and let's drag our references okay good now let's make a update visuals function in here we test if the player skills lets us if a certain skill is unlocked so let's as the earth shatter if so then we go into the image on the UI and we modify the material and we set it to null so that it uses the default so if it isn't well then we set the default if it is not a lock then we need to ask if we can unlock it so we asked if we can unlock if so we use this material if not then we use this one so now let's just make this function so here we're just doing pretty much same logic as in here so we can now simplify this one to use this one all right so here we have it we have a nice function to ask if we can unlock so the UI skill tree we're using that one in order to define what material we should use so now we just need to actually update our visuals so we're going to update first of all when you receive the player stones we update it and then when we get the player skills we're also going to subscribe to the on skill unlocked event and when that happens we also update our videos all right so this should be working and we should be able to see the earth shadow button working correctly so let's test ok so here we are and here four stars it starts off black and white and transparent so it means it's completely locked and we cannot unlock it so first we unlock the one and there you go now it's just black and white and full so meaning that we can unlock it now we click we unlock it and now it's full color so now it says that it's already unlocked all right so we have a very visual indicator of which skills we can unlock now let's apply the colors also to background and to all the other skills all right so here I've refactor the code in order to have the same behavior for all the buttons but not have so much code copy pasting so I created a simple class to represent a single skill button and in here we have the update visual instead of having up here for every single one then we have instances of skill button and we update our visual and then in here we receive our transform the player skills and so on so we're doing exactly the same thing but our class is now much more clean so now let's test this out and everything should be working all right here we are and yet we have a visual difference between the ones that can be unlocked and ones that are still locked so now for example let's unlock our movement speed 1 and there you go that one turned into color and now that one is available so I can unlock it yep just like that so unlock that one yep its unlock now I can unlock this one and just like that alright so here we have our lock and unlock system working awesome now let's add some lines so we can see the unlock path so first let's add them over here in the editor all right so here I have added the three lines for our three and links between the skills now let's go into our script and here let's make a class to hem all our connections inside we have filmed for the skill time and the image array for our connections and then art for this class you show up in the editor we need to add the attribute serializable okay just like that and now all the way up here let's have an array of skill unlock paths and now we can go back in the editor so here's our script and we have our skill unlock pathway so we're going to have three unlock paths so for example the first one for movement speed two and we're going to have one image which is this one in here now the same for the rest all right we have our references now we go down into the visual function and let's first make them all dark so first we darken on the links and then afterwards we go through them again so here we have the skill that is either unlocked or can be unlocked so here let's show with the gold color alright so that's about it and now here I have these two textures the normal line and line glow so let's also use that to make it even more impactful alright let's test okay so here we are and yet we can see that our links are all dark and now if i unlock this one there you go now it becomes visible so now it's much more clear that i can now unlock this one so what this one there you go it changes and it changes alright awesome okay so here we have pretty much our entire skill tree working now finally just for fun I'm going to implement the eleven system that we made previously so we can level up to get skill points that we can then use so here I've added a indicator for these skill points on the UI so here we have these skill points text and now here on the player script it already has the unlevel system and the own level system fires off an event when the own level changes so here's where we're setting the indicator for the on level text in order to see how the own level system works make sure you check out that video so here we can handle getting some skill points so let's go into our player skills in order to store a certain number of skill points and here we got a private in just a something very simple and a function to add them and on the player when the player levels up we go into our player skills and we add news comfort now on the player skills when we try to and welcome let's make sure that we have enough skill points so when you try run/walk we test if we can unlock based on the requirements then we also test if skill points are more than zero then we reduce our skill points and we unmoor all right here it is now we just need to deal with the visual for its components so like always let's make a nice event to keep our code nice and clean so you have a simple event and when we add a stem point we invoke it and we do the same when we spend one so down here when we are spinning we fire off this event alright great so now on the UI lets get that visual all right so here it is very simple when we set the player skills we subscribe to the event and we update like we always do ok so let's test ok so here we are and we currently are on level 1 so we have 0 skill points so even though technically we can unlock this skill because it has no requirements we don't have these skill points so if you try to click nope we cannot unlock it so now let's spawn some enemies and there you go hit him and one more and there you go now we need one more so let's spawn some more and there you go now we are in level 2 and yet we have one skill point so take these out and now we can try to spend it so let's click and there you go we've unlocked the whirlwind and now again we got no more skill points so let's once more enemy now let's seize the whirlwind kill them all and there you go and lots of skill points and yep they're there now unlock the earth shatter let's spawn a bunch more enemies and use the earth shattering there you go and we can walk a bunch more just like that alright so here we have our nice game loop fully working so we have a level system and a skill tree we have our skill point so we cannot spend them if we don't have them then we spawn some enemy so we go out we kill some enemies by killing some enemies we get some experience with enough experience we get and level up within level up we get some skill points with some points we can unlock new skills so you can spawn more enemies kill them get more exp more levels more skill points and spend them all on everything so just like this we have our nice skill tree with our very skills working in tandem with the unlevel system our skill tree also has previous requirements so we can make some very specific unlock paths alright so once again here it is our awesome minigame this video is made possible thanks to these awesome supporters go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone as always you can download the project from the utilities forum in Tacoma com subscribe to the channel for more env tutorials post a new question haven't counts and I'll see you next time