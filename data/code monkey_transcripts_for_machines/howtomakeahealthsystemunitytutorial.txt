hello and welcome I'm your code monkey and in this video we're going to make a Health System we're going to build a class it can he'll take damage and display it as a health bar let's get started so to start off I have a basic scene here with a player character just moving around you can download the entire project from unity code monkey calm so the simplest Health System is a basic number if it's positive the unit is alive if it reaches zero the unit is dead so let's start by creating a new csharp script and call it health system ok remove all the references to monobehaviour since we want this to be an independent class and let's start by making a constructor so public health system and it will take an int for our private Oh set this dot help equals health all right so in order to get the health from our health system we're going to make a function rather than making our variable public in order to make our code nice and clean so public in get help it won't simply return our current home so here let's test things out and create the new health system equals new health system with a hundred and just debug log our current health was health system doctor get help so let's test it and our console should say 100 yep health 100 great so let's add some basic functions to our health system first of all public boy damage takes an import damage amount and simply reduce our health by the damage a mouse and a public void heal which will take amount and increase our health by the heal amount so in order to test it new health system dot damage caused a 10 points of damage print it again and get back up and print it again so now it should print 100 90 100 yep there it is now in order to make testing easier I'm going to create some debug buttons using the code monkey utilities as always you can grab the utilities from unity code monkey calm so I'm going to use the class CMD bug to create a new button on the UI and please stop button above and to the right give it a text damage and the function at the bottom one will trigger is the Health System damage and cause of 10 points of damage pranks are current health health was health system dot get help and place another button on the left side in order to heal and set of damage okay let's test the buttons yep we got here we can cause damage and the health goes down we can heal and then all that goes up great now in order to build our health bar we need to have the maximum health so let's have that proteins health max and in the constructor instead of receiving the helm we're going to receive the health mugs and set the health to the health max now in here we're also going to make sure that health stays within valid values if he'll goes under zero then the health equals zero and here if he'll goes above hell max then healthy closed health max test it again make sure it stays within the valid ranges damage keeps going down and stays under zero heal and doesn't go above a hundred great so now we're going to make the health bar create a new object call it health bar place it just slightly above the player create a background and just the sprite renderer with the basic one pixel just turn yep make another one for our bar sprite make it in red put the sorting order above the background and make a container for our bar sprite make the bar spray a child and shift it to the right bar to the left make the background in dark gray and place the bar there okay great so now we have our bar with collar here the background here and the container which we can modify the scale so now all we need is to represent our health between zero and one so essentially percentage so here in our health system we're going to make another public it's going to return a float it's going to be get health percent simply return the help / the help max and now in here we're going to get health person and then do health system damage give the ten points of damage and print it again so in theory this should print one this should print 0.9 let's try and in reality it doesn't it print zero reason for that is because we are using intz on our health system so the result is being cast down to an init easiest way to do this is to convert one of these just to a float and now it should say 1 and 0.9 yep great now that we have our health percentage we need to make a new script which will manage our health bar going to have a public boy function or set up in order to give that Health System system and on a private void on our update need to do transformed fine our bar and change the local scale it won't be new vector3 and on the X we're going to get the Health System dot get help percent on the Y just one scene here add the health bar to our health bar and we're going to need a reference in order to call this setup so on the game hammer here public health bar L bar then we're going to do how far down setup with our health system in here and put it in there and now the health bar should be correctly set up and display the value yep that goes up goes down great works so now that the health bar is working we're actually going to improve it slightly and here we're currently running this on every update it works but it's very wasteful and since it's updating every frame even when nothing changes now we just one health bar it's not a problem but if you have a thousand it would be a performance issue so we want the bar to just update when the health system actually changes in order to do that we're going to use events so in our health system we're going to make a public event use event handler and just on health change event handler is in the system namespace and we're going to trigger this event when it actually changes so in here if or if there are subscribers to our then we're going to trigger it that's our X dot empty same thing down here and now on our health bar instead of doing it on the update we're going to make health system dot on health changed we're going to we need to do the update when the helm actually changes so right now it should be working exactly the same but in terms of performance it is much better yep there you go still friends exactly as it should it's not in order to be able to create multiple health bars let's create a prefab call it the PF health bar and just drag our health bar onto it delete it from the scene and on the game handler instead of having a reference door how far to have reference to transform for the PF L bar now we're going to instantiate our PF bar 3 0 transform accentuated and then transform getcomponent alright ok so now let's add a reference and everything should be working the same have this health bar and I can damage making hue and that's it now we have our health system that can correctly heal and take damage and represents itself as a health bar which we can in sentient in any number of objects like the player enemies or destructible objects anything you want you can have a health system with a health bar if you have any questions post them in the comments and I'll do my best to answer them right see you next time