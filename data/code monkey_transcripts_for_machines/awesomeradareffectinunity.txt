this video is sponsored by hosting er go to hosting your comm slash code monkey and use the coupon code monkey to get up to 91 percent off yearly web hosting plans succeed faster with hosting in this video we're going to make a radar sweep effect we're going to have a bunch of enemies and items in our map and have a radar sweep through it and think when it locates something then in the end we're going to convert it into a UI minima let's begin okay so this is what we want to create over here we have a map with a whole bunch of enemies just randomly moving around as well as some items scattered throughout the map and if I press button there yo the enemies are now all hidden as if they had some sort of coding tech but they are still alive in the world and moving around I can also disable the items and disable the background so now everything looks black but if I enable the radar and there it is now I can see the radar sweeping through the area and triggering a nice ping whenever it hits an enemy or an item you can see the total radar range and you can see a different pink color based on whether it hit an enemy or a item so I can enable all the visuals and there you go as you can see there's an item in there and I mean there and as it goes past it it correctly identifies which one it is and with the keyboard I can also make it sweet faster or slower so just like that make it really fast any of there's a really nice radar effect so this is what we want for our radar effect and in the end we're going to convert it into a nice UI element like some sort of minimap now you can see that I have my player I can move it around and I can look at the minimap in order to identify what the radar is seen so there you go in here above me I have an item and if I enable the item visual there you go it is indeed in there and I can use the radar to locate it move up and capture the enemy and there are two more in here and yep there they are and just like that and I can also make the enemies invisible and there you go and they still show up on the radar so this can be used to detect cloaked enemies or maybe a special mini map that showed the location of hidden items or Easter eggs once you follow the tutorial and built this awesome effect you can make a WebGL build and publish it into your website which you can get through hosting er hosting er provides bestinclass hosting services that are extremely fast and very affordable with excellent customer support to help you succeed choose from a variety of plans and pick the one that best suits your needs making a website from scratch can be hard so use the very intuitive and easy to use website builder to get your page up and running quickly I've gone ahead and built this very nice website using the website builder in just under 30 minutes the best thing about it for me is how you have buttons to easily between desktop tablet and mobile formats making your website work properly in of those displays is usually a nightmare but with the website builder it's extremely easy so you can very quickly make a nice portfolio website that works great everywhere also if you're making some really cool online integrations for your game then check out their super fast and affordable cloud hosting solutions all the plans come with a 30day moneyback guarantee so you can try out the services without any risk go to hosting air.com slash code monkey and use the coupon code monkey to get up to 91 percent off yearly web hosting plans click the link in the description and succeed faster alright so this is our goal let's get to it so here we are in our starting scene and if I hit play you can see enemy's just moving around randomly as well as some static items and if I press a button I can make the enemies invisible they still exist but they are hidden and if I press another button I can hide the items all right so this is our starting point now over here in the editor let's begin by making the visual for our radar so we begin with an empty game object and call it radar now inside let's make a 2d sprite and this will be our sweet we're going to drag the sweeps right in here the radar online okay here it is alright so this is the sprite that won't be rotating around as you can see the sprite in here on the import options you can already see that the pivot is on the left I'm so in here everything is set up for me to simply move these at Valley now let's also add another sprite for the background all right here is our nice background sprite and make sure that both of them have the same size so this one has half though okay great and now inside our sweep let's set another sprite and do some beat for the trail and drag this one and just like that we have a nice trail behind it now let's place them all on a new sorting layer so in here and let's call the radar okay now put them all on the radar now for the background let's leave you down backgrounds only we're at zero then we want the trail so let's put the trail at 10 and then we want to sweep on top so let's put it at 20 so here is everything nicely set up let's test and there you go there's our very nice visual we have a background a line and a trail and then we're going to simply be rotating here on these head and there you go that's how our radar moves right awesome so now that we have the visuals working let's get to work on our script down here on this folder make a new script call this our radar and drag it on to the game object there it is okay now in here let's begin by grabbing your reference to our sweep transform so we can rotate it alright so here we have our transform and a for testing will it simply start by making it rotate constantly so we need to go into our update and in here in order to rotate it we're going to take the sweep transform and modify the Euler angles we're going to modify with a new vector3 we're going to increase it with a 0 and the X here on the Y and the Z is what do we want to change so in here let's define a certain rotation speed and here we increase the Z by rotation speed multiplied by time dot off the time all right so just like this we should be able to see our radar rotating and here it is and it is indeed rotating except it's going counterclockwise as always unity when you increase an angle it goes counterclockwise so we need to decrease it in order to go quite so let's do that here just swap the Pumas for eight months and also let's make it a bit slower okay and if there's our radar now correctly rotating around okay great now let's see how we can actually find objects while sweeping now here on the update function first we rotate ok and then after rotating we're going to do a physics 2d and do a ray cast so we started off at our origin which is our transform position and then we need a direction so we need to convert our rotation in Euler angles into a vector two for the direction so for that I can use a nice function on the utilities as always you can download the utilities for free from in Tacoma calm and here is a function that takes a float and returns a vector three with our direction so if you want to implement yourself here it is so we complete the vector based on what we have on the Euler angles N and finally we need a distance so I draw here make a private phone for the radar distance and on the way to let's set it let's set it to how much we set in the editor so you can see that we set our sweep to have a width of 150 so that's our radar range so in here put 150 and we use it in here alright so that's it we have our nice ray cast now the recast function as you can see returns a great cast hit 2d and this is a struct which contains the results from our ray cast so in here we can simply test if the array Cassidy the collider is not known if it is not known that it means we hit something so when we hit something let's spawn a popup so here using a function from the utilities in order to easily spawn a text popup and for the position again we can go into the rake asset and use the point field alright just like that okay so as our radar rotates it should be doing great casts on every frame and if it hits something it should display a popup let's see okay here we are in yep you can already see the various problems as the radar rotates around you can see it's correctly hitting the enemies and all the items all right awesome however as you can see we have a slight issue here every single object is being hit multiple times this is because every time we rotate our sweep we're doing another ray cast so if the object is big enough it will be held in multiple rotations so that means that we need to keep track of what objects we hit now there are multiple ways we can solve this problem in this case we're going with the simplest and most obvious one so here in our radar let's go up here and make a list of colliders here we have our list and we are instantiating on awake ok and now in here when we hit something let's first test if the collider list if it does not contain our Collider then we hit this one for the first time we hit it and we add it to the list okay so what's test and let's also make the rotation very slow okay here it is and yep just one pink and just one ping just one just one and just one and just one okay so it looks good but and yep there you go when it goes past another second time it no longer pings anything now the issue is obviously because we are filling up the array but we are never clearing so that means that we need to clear out our list at some point now one way to do it would be to clear everything on a full rotation however that could cause issues with moving objects so depending on how fast your objects are moving this solution might be better or worse in our case let's make sure we clear on a half rotation that should be enough for this case so over here before we rotate let's store the previous rotation position okay we have the previous one and then in here we have the current one so now let's calculate the rotations on a half rotation basis so here we are calculating both the previous and the current we are getting the remainder out of 360 and then reducing it by 180 so now using this we can make a simple if if the previous rotation was negative and the current rotation is not negative then here let's trigger our clear alright that should do it let's test okay here we are in yep one thing one one one okay so far so good now that paying another another now let's see if this one things again and yep there you go he pinged again that one pinged again alright awesome so we have just one ping per object and it works perfectly fine after a full rotation right great now instead of spawning this debug Papa might sexually spawn a nice effect over here in the project files I have this nice prefab it contains a simple sprite and a script to animate it fading here is the radar playing script as you can see it's extremely simple we just have a disappear timer and on update we increase the timer and then we reduce the Alpha and once the disappear timer is past the maximum we similarly destroy the game object and down here we also have a function to set the caller and want to set the timer right so very simple now here in the radar script let's add a serum ice field so we can drag our prefab and now in the editor let's drag our reference here's the script and just drag it okay and now down here when we actually collide an object instead of doing our debug pop up well it's actually just instantiate so we instantiate our radar paint prefab on the position which is the raycast hit point and then we don't want any rotation so simply quaternion dot identity alright so that's pretty much it let's test and here we are in yep as you can see the pings are correctly being spawned right great now in here we have our nice set caller function so let's use that to make the paying some look a bit better so in here we instantiate the radar ping and then we get the component of type radar thing and then here we can call set cone now let's spawn a different color one for the enemies and one for the items so let's identify if we hit an enemy or an item the way we can identify them is by what script they have so over here I have the various health icons and the enemies and as you can see the enemies have this character waypoint handler script and the health items as you can see has an item Hamel so we can use those to identify what we hit so in here we do a rake asset Collider so if game object that gets component of type item handler if it does contain that component then we hit on item and then on the other side we have if we hit the character Waypoint panel if so then we hit an enemy all right so now based on which one we hit we can go in here set color and pass in a new color so for the items let's pass in a green so here the color we have the red green and blue so for the red put 0 green one blue zero alright and now here for the enemy well let's make them in red alright that should do it let's test and if there it is we have our pings with different colors depending on what they hit so in here we have an item there your green pink and here we have our enemies and they have red things right awesome now in here we have one potential issue with our code in here in my level let's say that I want to spawn a wall so we new to the object okay so here it is my wall just with a sprite and a box Collider so let's run the code okay here it is let's see any of there's our issue our recast is hitting the wall as well as everything else now obviously we want the radar to only identify enemies and items and not to identify the wall so let's solve that now in here the solution is actually extremely simple here where we have our recast here it is as you can see we have our fields the origin direction and distance and then really have another field for our layer mask a layer mask is how we identify which layers we want to hit so let's go up here make a field for our layer mask and then down here we simply use it and now let's go into the editor here is our layer mask and as you can see unity already provides a very nice drop down check box and now in here we can identify which layers we want to hit so in our case we want to hit enemies and also our items all right so here's our very nice layer mask so let's test ok here we are and yep there you go it complain nor the wall well still pinging on everything else right awesome if you want to learn more about layers layer masks and bit masks check out this video where I go into detail into how they work all right now let's see one more issue we have over here as you can see we have two items placed right next to each other and on the radar when rotates as you can see only the very first one triggers a pink so the second one is not detected now the issue here is with our radar code over here we are using a simple ray cast so what this does is it fires a ray cast but not only goes until it hits something as soon as it hits something it stops so that means if we have two things one behind another one as soon as it hits the first one it come only stopped so it never checks the second one so what we need is a continuous ray cast to test all the objects that are hit in the entirety of our ray so for that instead of the raycast we can use the ray cast on this one as you can see it returns an array every cast hit 2d so to convert our script it's very simple instead of having just one we have Andray and then all we need to do is cycle through the array and inside we do exactly what we were doing previously all right so that's pretty much it now it's test okay here we are let's see these two any of there you go both of them trigger a pink so now objects are no longer hidden if they are behind another object right awesome so at this point we have pretty much our phone radar working if we hide our enemies there we go as you can see the radar is currently detecting everything and also hide the items there you go stone showing and hi the background and there you go we have a very nice radar effect as you can see it's rotating constantly and always doing a recast in order to identify where each object is right awesome so with the radar working let's do one cool thing which is to change our sweep speed so here on the radar we already have our rotation speed and now over here on update let's do a very simple input so we do a get down let's do some button okay so if we hit T let's increase the radar speed and then next to it lets us for an input on the r and let's decrease alright there it is let's see okay so here we are with a normal rotation speed it is currently set to 180 now I press T and there you go it's going slightly faster press a bunch times more and there you go it is now much much faster so there you go now it's at 480 and yep there you go very very fast and now we can hide everything any up just like that as you can see now we have our radar correctly showing where everything is there you go there's an enemy in there and now he's moving in there and there and there we can make it faster faster faster and there you go all right so this is our radar now if you remember we also have a function to set the disappear timer only things and right now if it's going too fast as you can see we can see multiple pings visible at the same time so you can also make the pings be related to the radar speed let's do that so we have the rotation speed and then in here we can go into the radar ping and we call set disappear timer so for example we can make sure that it always disappears before it rotates over again so for rotation is 360 degrees and here we want the time in seconds so here we can set the disappeared timer to be 360 degrees divided by our rotation speed that way as it finishes a rotation it will show again let's see and here we are and as you can see each pane stays pretty much exactly the same amount of time until it finally goes back so as we increase you'll be able to see that it maintains the exact same thing so at 500 there you go now the pings are much much shortlived and yep there you go they're showing all right alternatively we can also make them pre slow so we have multiple at the same time so in here let's see this and if there's our radar effect working and now the pings are essentially living for two rotations so we can almost see a trail of where the enemy has been so you can see this one moving now he's stopping in there now he moved there there there any up there you go and all the items are completely static right awesome so now that we have all this working let's have some fun and make the radar as a minimap so I'm going to do pretty much the same thing I did in the minimap video so check the link in the description and go watch that video to see a stepbystep on how to create the minimap and render your scene onto it okay so here is our nice effect as you can see I have a player here and I can move them around and here in the UI you can see the radar so the radar is no longer visible on here and now let's hide the items so only the enemies are visible and as you can see I have an enemy right next to me if there is and now I got one right below me and yep there it is and now there's an item in here and it's invisible so I can't see it so I can use the map and yep there you go and I've touched it and I've captured the atom now there's another one in here and I can use the radar to find them and yep cut that one and that one and there you go alright so here is our very nice radar effect being a boy to a UI object so again if you want to know how this works you can check out the minimum video where I go through it in detail but in here you can simply see that I have on a UI here an object it's very simple it just has a mask behind it it has a raw image and the raw image is using a render texture right here and then in here I have the main camera and using layers the main camera is not rendering the radar layer only everything else so here in the preview you can see that it doesn't show the radar objects and then I have a second radar camera and this one as you can see is only rendering the radar and it's rendering onto a target texture and then I simply have the radar attached to the player so as the player moves the radar goes with them so again here it is I'm moving my player and I can use the radar to locate the hidden items in any of their you are from the atom and there are a bunch of enemies that show up in the radar as well so over here we have our very nice effect as you can see this is a great effect if you have some sort of cloak enemies in your game or just some hidden easter egg items as always you can download the project company tony's from unity code Montcalm if you liked the video subscribe the channel for more ent tutorials post any questions you have in the comments and I'll see you next time you