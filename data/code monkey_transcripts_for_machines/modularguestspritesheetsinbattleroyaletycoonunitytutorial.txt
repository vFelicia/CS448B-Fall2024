hello and welcome I am your code monkey in this video we're going to create modular spreadsheets as used in valmarana tycoon let's begin so the goal is to make our guest is unique as possible if they all look the same then it wouldn't look very boring so we need some variation one way we could do it is similarly by making a lot of different spreadsheets that would work but it would be a lot of work meaning each unique spreadsheet one by one so the better option is to have modular spreadsheets where we create the final spreadsheets from a series of base body parts the game is out now on Steam so check it out to see what I'm teaching here apply to a rental game so again this is the sprite sheet that the animation system uses we have a head body hand and foot and here is the idle animation being pointed so this is the sprite sheet and over here I have a spreadsheet with just a bunch of bodies and over here a bunch of heads we want to create the final spreadsheet dynamically by composing it with different bodies and faces there are some parts of the spreadsheet that don't change so we are going to use this one as our base it already has the hand and the foot which we're going to leave the same for everyone all right so let's make some code create a new csharp script for a simple game hello so over here first of all we're going to need some serialize fields for a private texture 2d for our base texture then we're also going to have one for the head texture and for the body texture so let's set things up on a private void awake first thing we need is to create a new texture 2d this won't be our texture which will be a new texture 2d we'll give it a width and height using the same as on the actual spreadsheet so it's 512 by 512 for the texture format we're going to use our GBA in order to have encores and the Alpha Channel and finally enabled mid Maps now inside our texture we have two methods that we're going to use we're going to use get pixels which returns a flat array containing the color of each pixel and then we're going to use set pixels which takes an array of colors and sets the pixels on a given position so let's first copy on with our base pixels into the newly created texture so create a color array for the spreadsheetbased pixels now we're going to grab the base texture dot get pixels grab the text on starting on zero zero and going for five 2512 then using these pixels we're going to go into our texture not set pixels and place them on zero zero width and height of five twelve and give it this array okay so just like that our dynamically created texture shouldn't look exactly like our base texture and then after we set the pixels in order to apply the changes we need to call texture dot apply so it says to see if everything is working correctly over here in the editor for testing I have a quad which is using the guest material and as you can see it has no texture and next to it I have a guest game object which contains a body which again mesh renderer mesh filter and contains the guest material so let's have a civilized film for our guest material so we can change the texture inside the material so in here the same thing for a serialize field for a private material guest material and then when we create our texture we can set the gaps material that main texture and set the main texture to our neon created texture now one more thing we need to do is in order to use get pixels and set pixels we have to come here into our texture settings and in here we need to enable read and write so we need to do this for the body the head and the base and they won't read right on all of them okay so let's s and see if our sprite sheet is being correctly created and yep there it is our quad looks exactly just like our base texture but this is displaying our dynamically accentuated texture and the guests over here is using that same texture and as you can see the hands are correctly animated so now let's add a body and a head so first let's just grab the first one the head it has the size of 128 by 128 so we define a color ray for the head pixels we're going to go into the head texture and get the pixels starting on zero zero and going for 128 and 128 then we place them in the correct position on the spreadsheet so texture dot set pixels in order to view the correct coordinates the origin for the texture is on the lower left corner so our head is on an X of zero and on a Y of 384 so here we set the pixels on a nexus 0 Y of 384 with a walk with 128 128 and give it to e head pixels now let's do the same thing for the body and the body is on 256 okay so it's Essen we should be able to see our guess correctly with the initial body and head yep there's the head and body being correctly placed in our spreadsheet and correctly used for the animations now that we can copy a single body part we can easily randomize which body part we actually select so here on the head spreadsheet we have four different heads so we can randomize between each of them and same thing for our bodies so you know let's first define in for the head index which won't be a random range between 0 & 4 and now the head pixels each of them is separated by 128 so we do 128 multiplied by the index and then we place it on the exact same position so let's do the same thing for our body index and just like that we should be correctly using a random head and a random body so now let's just copy this code into its own function so we got a nice function we can call to generate a new texture which goes through here that's the same thing and we apply that created texture into our guess material and now for testing let's add a debug button so here I'm going to use the CMD web class to create a button on the UI this class is part of the code monkey Telly's that you can grab for free from unity code monkey comm so essentially we're creating a debug button in order to set the random texture which again will get a new texture every time we click ok so let's test and yep there's a guest with a random head and a random body and if I click the button there you go every time we are getting a random head random body and everything looks very unique so we can click this and we just four heads and four bodies you can see just how many different variations we can have the game is out now on Steam so check it out to see what I'm teaching here apply to a real game so there you have it we created a new unique texture by combining a random body and head in the next video we're going to dynamically our heads bright with a random beard and hair as always he can download the project files in utilities from mt called monkey calm if you have any questions post them in the comments and I'll do my best answer them subscribe for more videos and I'll see you next time