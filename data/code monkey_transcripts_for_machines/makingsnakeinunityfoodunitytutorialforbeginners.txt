hello and welcome I'm your code monkey min this series were making snake in unity in this video we're going to spawn some food and have our snake eat it let's begin so this is our scene so far we have our snake in here and we can move it with the keyboard it from Lausanne movement rules such as you cannot directly turn back so if I'm going to right I cannot go straight left I have to go up and then I can go to the left so now that we have the movement working let's add some food for our snake to eat essentially the food won't be spawned somewhere random on the grid so let's create a class to handle our 11 grid so in you see sheriff script and name it our 11 great this will be a simple script so let's remove monobehaviour and now in here we need to store a position for where the food is spawned so we can simply do a vector to int for our food word position now let's make a function to actually spawn our food so a private roit spawn food now in here we won't set the food grade position so in order to randomize we need to know the total size of our level so let's create a constructor for the level grid and in here we're going to receive an end for the width and an end for the height let's sort in fields ok so now we can go here and generate a random grid position so we do our food grid position equals a new vector to int and inside we get a random range between 0 and width and then a random dot range between 0 and the height ok so we now have the component random position for our food so that we have that let's add a visual so we are creating a new game object named food with a sprite random component so now for the sprite for our food let's go into the game assets class and here let's add a new field for the food sprite and back into our level grid let's use that sprite so we now have our food game object using the correct sprite tone we need this to locate an incorrect position so I take the game object our transform and set the position all right so this should be working we have our spawn food function which generates a random food credit position and then Senshi AIT's a new game object and gives it our transform position and the correct sprite so now obviously let's just spawn food as soon as we start our level and for testing let's try spawning a bunch of food just to make sure our food word position is correctly randomizing in order to do that let's do using code monkey so then I can go down here and use a function periodic the action we won't fire won't be the spawn food and let's call it once per second all right so this should be great just to test to make sure our random is working correctly and we are in sanh shading a new food now obviously the one thing we need is to actually create our level red object so for that we're going to go into game handler again this is the script that is simply on a starting object so we can use this to be our code entry point so in here we create let's store our level grid now we're going to instantiate it in here and for the width and height we and I've defined as 20 and also in our scene we have to go into the game assets and drag our food sprite and yep just like that okay let's test yep there's one piece of food and another one there I'll run there another room there and yep they are being correctly randomized all right so now that we can spawn food the next step is to make the snake eat it so back into our level grid class so let's make a function that won't be triggered when the snake moves now we're going to receive a vector to end for the snake we're in position so our snake won't trigger this function after it moves so when the snake moves we want to see if the snake moved on top of the food where its position if that happens we want to destroy the current game object so let's store this as a member variable so we destroy the current game object and then we call spawn food again and just for testing let's do a popup to make sure we see that the snake ate two and over here we no longer need this testing all right so when we sin she ate our level grid we are calling our spawn food which generates a food where it position and creates the game object and then we have a snake moved function which is called by our snake and it sends the snake red position and we simply check if the snake is in the exact same position as the food if so we destroy the food game object and we spawn another piece of food and just say the bug to say that the code executes so on we need to make sure all this works is to go into our snake class and make sure we trigger this function so here on the snake class let's go to where we are handling the in grid movement so here we are we change it we modify the transform so in here we need to have a reference to our level grid object and later on our level current object we are also going to need a reference to our snake so in order to do that we need to ask ourselves how are we going to handle the references now there are two ways we can do this we can add a static instance to the snake and the Eleven grid and call our functions as static or we can pass in references when we instantiate our object both approaches will work just the same in order to keep the code as simple as possible let's go with the second approach so in order to pass in our references and let's go into our game Hammond and here we are in sin she ating the 11 word and we can also add a feel for our snake so we now need to pass a reference to the 11 grid for the snake and a reference for the snake to the level grid so let's first passing the level where it to the snake by creating a simple set up function so here make a polaroid setup and in here we're going to receive our own local grid all right so very similar just make sure we pass in the reference to our snake and on the game hammer all we need to do is call the snake out set up function and pass in the autumn grit now we need to do the same thing for our level grid slide through the exact same pattern so here we do a public void setup and in here let's receive our snake so just like that our objects now have the references that they need and obviously on the game handler need to go into the level grid and call the setup and passing the snake reference so in here in our snake we can now go down here when we handle the word movement we modify our grid and then we tell the level grid that east snake has moved and we pass in our grid position so again our snake handles its grid movement it come weights the time and so on moves in a certain direction and ends up in a certain grid position after it moves it calls the snake moved function on our level grid and in this function will receive the snake worth position and we know our food word position if both of them match then our snake has eaten the food so we destroy the food game object and we spawn a new food object so let's see if all of that is working correctly okay so here I am and there's the food now I move the snake towards the food and yep it has ittan and another one spawn and another one has been eaten and another one there and so on so as you can see everything is working correctly all right so now that the basics seem to be working we have one potential issue in our code in here on the 11th when we are spawning our food we are just picking a completely random position now what that means is that we might be unlucky to spawn right on top of the snake now obviously we don't want that to happen so let's fix it we already have a reference to our snake so we can just easily ask the snake where it is when we try to spawn into a valid position so let's go into the snake to create a new function so we can return our grid position so if unlike the vectors you went and let's return the word position so now here on the eleven point let's do a cycle for making sure that our position is valid so do randomize the food word position while the snake that get weird position is the same as a food grid position so while the snake weird position is the same as the food then run this code again and generate the new one so in essence we're only going to leave this cycle when this position is not the same as our snake word position so down here we can make sure our position is valid so just like that our food should never spawn on top of our snake now the one issue we have in our code here is with regards to our spawn food we are constructing our level where it but only after constructing do we give it the snake reference so we cannot spawn food in here because if we do then our snake won't be known and it won't cause an error so we simply spawn the food on our setup instead of on our constructor so let's run the code and see if everything still works perfectly fine exactly as previously all right there's a snake I can move it around going towards the food and eat it and yep there you go the snake has eaten the food now I go into that one and I eat it and yep another one has been spawned and we can now be confident in knowing that the food will never be spawn right on top of the snake so there you have it we added food to our game and the ability for the snake to eat it in the next video we're going to grow our snake every time we eat some food as always you can download the project files and utilities from unity code monkey comm if you have any questions post them in the comments and I'll do my best to answer them subscribe for more videos and I'll see you next time