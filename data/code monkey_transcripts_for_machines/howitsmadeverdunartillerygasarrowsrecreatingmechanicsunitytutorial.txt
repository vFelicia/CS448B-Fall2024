hello and welcome i'm your code monkey here is the game for done which features some interesting mechanics and systems let's inspect and remake three mechanics from the game first the map artillery then the gas system with the masks and finally the minimap drawn arrows i will cover how they work how i remade them and how you two can make something like them just in your own games after watching this video you can go ahead and download the project files and inspect all the sources for yourself this video is part of my how it's made series where i remake interesting mechanics from various games go watch the home playlist link in the description if you want to learn some more about some other systems like for example the scout probe launcher from other wilds or the cleaning minigame from rover mechanic simulator or the soil moisture system from enzo in the world apart and follow the curator page on sim if you want to see more of these types of videos also if you haven't already played the game well then good news this one is actually part of the latest humboldt bundle which is made in partnership with unity themselves the bundle includes games as well as tons of awesome assets for you to make your own fps games it's a huge discount so definitely get it if you have any interest in making fps games at all and of course with this being a humble bundle it means part of the proceeds go to charity which is always great also this friday on the 24th i won't be participating in the official unity live stream we're going to play some verdun i'm going to talk about a bit about how i remade these mechanics i will be answering questions in chat and we will do a bunch of mini reviews and showcases of the various assets and bundle so if you like live streams then come check it out alright so first just a quick overview of the game it's a world war one first person shooter so just by itself that makes it a pretty unique setting all of the weapons and maps are very authentic you've got lots of boltaction rifles and pistols some mortar artillery and tons of mustard gas it's a pretty unforgiving game very fast time to kill both action rifles kill mainly with just a single body shot the main game mode is called front lines where you're constantly fighting to capture the next front line and then defending it from the enemy it's a pretty fun back and forth on a very unique setting so if you're a fan of first person shooters and this one is certainly worth a try and like i mentioned this one is included in the bundle so even if you pick it up mainly for the assets definitely give the game a try also fun fact this game was made with yinty okay so let's inspect and remake three mechanics from the game starting off with the map artillery so in the game one of the classes is an officer and the officer has limited weapons but also has the ability to call in airstrikes and give some orders the way the airstrike works is you press a button then you look at a certain point in the map anywhere in front of you an indicator shows up telling you exactly where the mortise won't land so then you press another button and sometime after that the mortars fall down and blow up the whole area it's a pretty fun mechanic and makes this class pretty interesting so let's first think about how we can remake this well in reality this mechanic is actually quite simple all you really need is just to know where in the world the player is looking at so based on that you can already guess that we're going to be using a simple raycast so over here is my version i've got my player character just a standard first person character controller and for the map i'm using a very simple unity ring so now i can look anywhere and press a button and when i do the target pointer shows up it's really nice really animated and wherever i look you can see that it's placed on the exact perfect position so it perfectly matches the terrain so i can look around to make sure i have the right target position then i simply press a button and now the target goes away the motors get fired and after a while they simply fall down and explode and blow up the whole area all alright awesome so as you can see pretty simple and works pretty great so let's see individually all the various parts for making this work like i said i have my player character with a very basic first person controller this is the kind of thing you can easily build yourself or maybe you can use unity star assets controller then for the map like i said i'm using a simple terrain object so i just made it add a bunch of hills a bunch of nice textures and there it is and also very importantly the terrain has a terrain collider that's very important then in code i've got a simple script attached to the player so here it is and like i said essentially since the mouse is locked at the center of the screen then all we really need to know is the mouse position in the world which is the same thing that i covered in the mouse video so as you can see over here all i'm doing is a physics raycast so i'm doing that it starts from the player camera position the raycast direction is the exact same one as the player camera forward transform then for the distance i just put max valley so it's essentially infinite and finally just got a simple layer mask so it detects only the layer so that's it that's how simple the raycast is then the raycast info is stored over here on the raycast hit and one of the things that this structure has is the point so this is the exact point in world space where we hit so with that then i just simply have a very basic target visual object so here it is it's just a very very basic mesh and i also added an animator just to have a nice up and down animation so pretty simple then all i do is just position that object exactly where the raycast hit and for the input logic and the state handling as you can see i've got a very basic state machine so just two states either normal or the aiming target so while it's normal i just listen to a key input if the player presses that then we go into the aiming target mode and it shows the target visual then while it's in here it does the raycasture then it tests for another key input and if the player hits that then we do spawn the artillery explosion and here i just had a simple timer just so that it's not instant just like the game when you press it doesn't explode right away takes a while for the motors to actually get fired and land and for this one i use the function timer so this is a class for my utilities which i actually covered in detail in another video it is pretty simple and very useful all it does is really just triggers an action after a certain time so it's perfect for doing exactly this how it works is really very simple it just has a simple flow timer constantly counting down once the timer is elapsed and it simply triggers the action and for the action this is of type action this is a type of delegate which you can go watch this video if you don't know what they are so by just using that i can say that i want to spawn the artillery explosion after two seconds and then for this one it's also very simple all it really does is just instantiate a bunch of vfx explosion prefabs just instantiate them on the artillery position then just add a bunch of randomness so that it's not always exactly the same so just spawn it and destroy the explosion and of course if you wanted the artillery to deal damage then this is where you would place that logic then the final piece of the puzzle is the screen shake so for that i use the syn machine impulse component here on the player i've got a cinemachine impulse source so it's set up with one of the preset signals so just some 6d shake very simple so this is the info source and then on the virtual camera i've also got an impulse listener so with that through the code all i need to do is just go into the impulse source and generate some impulse so that's all it does to do some very simple screen shake so when you put it all together here's the final result i start off normal then i press a button it shows the target i can aim around and look and say that i want to blow up this area then i press the button the mortars go away and after a few seconds boom they fall down and they explode the whole area all right awesome as you can see it's some of this it's pretty simple some pretty basic logic it's mainly just a raycast in a bunch of polish but yep it looks pretty great alright great by the way if you find the video helpful please hit the like button it's a tiny thing but it really does help thanks next up let's look at the gas system so with the game being set during world war one then of course it features some mustard gas some officers have the ability to drop mustard bombs instead of mortars the logic for firing that is pretty much exactly the same so just point somewhere and press the button except instead of spawning mortars it spawns some gas then for the gas itself if i go inside of it then the screen gets all blurry everything is messed up and if i stay inside then the player takes damage until eventually dies so to counter that every player has a gas mask which you can put on it slightly limits your vision but it enables you to stay inside the gas so if you have the mask on i can walk around and the screen is not blurry and i'm not taking any damage alright so that's it another interesting mechanic over here is my recreation i've got my character in my map and then over there as you can see there's a bunch of gas so if i go inside there you go the whole screen is blurry and i'm starting to take some damage but then i also have the ability to put on a gas mask and if i do yep it covers the screen by quite a bit so my vision is quite limited however as you can see my health is no longer going down and my screen is no longer blurry so i can go outside take off the mask and as i go inside put on the mask first go inside and yep no damage all of it looks pretty great alright so this is another great mechanic let's see how all this works now the core of it is the gas element itself and for the visual this one is really just a very basic particle system so here it is very very simple it just got the shape of a cone so it's running particles all around this area then for the emission just spawning them every once in a while for the speed they are simply moving upwards and slowly increasing in size and then for the color over a lifetime they simply fade out in the end and for the renderer just using some basic particles so that's a visual pretty simple then for identifying if the player is inside the gas area for that the gas has a simple sphere converter and of course it's set to trigger so it doesn't work as a solid object and over here on the layer it is placed on the gas layer then on the player i've got a simple script and on this script over here on the update all i'm doing is just a physics overlap sphere so what this does is it locates all of the colliders within a certain range so i'm just using the transform position and a small range so essentially locate some of the colliders directly on top of the player and then of course i'm using a simple layer mask in order to only identify the gas layers so this finds all the colliders near the player and if there's more than one then the player is inside a gas object so with that then just a simple logic to test if the mask is on and if it is not on then i simply do a basic damage timer this is just so i don't deal damage on literally every frame but rather it's time based so just a basic timer and just deal some damage to the player and for the online damage over here i am once again reusing the health system which was made on the very first video on this channel many years ago it's a very simple but very useful health system so on the script all i'm doing is just dealing damage to the player and then simply updating the ui element so that's how it detects if the player is inside a gas area just a basic physics query then for the visual difference as you can see like this the game is looking normal and if i go inside yep it gets on blurry and much more green so this is the original difference in order to apply that it's really just a volume set to a local so that means that this postprocessing profile is only applied if the player if the camera is inside of this sphere collector and for the effects it's all just pretty basic so just add a channel mixer to increase the green and then actually unity doesn't come with a standard blur effect but it does have depth of field so i just added this with a distance of zero so it pretty much blurs the whole thing also one very important thing for this to work like you mentioned this object is on a separate layer so if we go into the camera in order for that to be effective we need to go into the camera and down here on the environment we can see the volume mask so if you want that layer that post processing to be applied to this camera then we need to make sure the gas layer is also selected so with that if i'm like this and looks normal and if i go inside the collateral yep it turns into the other effects all right so far so good then for the final piece of the puzzle just the gas mask this one is really very basic it's literally just a image in the ui so if i go inside the canvas inside the gas mask if there it is it is literally just a texture occupying the whole screen and to make it a bit more fun i just had a very basic animation that literally just increases and decreases the scale of the image so the animator just has a basic is walking parameter so when the player is walking this one sets to true and when it is true then it triggers the transition goes into the gas moving animation and when that one is false goes back into the gas at all so very basic and finally to polish it all up i just had a simple fade so this is just a black image occupying the whole screen and i just got a simple animation that similarly starts with an alpha one and then it goes down so just like that just start spike and fades out so this is very useful for triggering the transition so it doesn't seem like the mass just appears instantly instead there's a nice fade forward all right so here is the final result i've got my player i've got my health bar so i'm on full health and everything looks normal and as i go inside yep i start taking damage and everything is blurry and very green now i go outside and now i'm safe now i've put on the mask everything looks good and i can safely go inside there and if there you go all the post processing is normal i'm not taking damage and everything looks great and if i take it off then yep there it is all right so that's the gas system it's just a very clever use of colliders and post processing volumes okay now for the final mechanic let's look at the minimap drawn arrows this is a really awesome feature that is perfect for any game where you want to give some orders so if you have a multiplayer strategy game or maybe you're making something like door kickers then this is a great mechanic so here it is in the game if you're playing with the officer class you can bring up the mini map and then with the mouse you can click and drag and it draws an arrow this is for you to give orders to the rest of the squad to tell them exactly where to go so the interesting part is that it's not a straight arrow you can really draw the exact path that you want so i can make the arrow in any shape to tell my teammates where to go and exactly what areas to avoid so this is a great mechanic for pretty much any team based game here is my version i've got my character and i'm walking around i can press a button in order to bring up the minimap it unlocks the mouse and now i can click and drag in order to draw an arrow in any shape in order to tell my characters exactly where to go so i click and i can do pretty much any shape that i want and everything draws perfectly okay now for this one in order to remake it i actually had to go and rewatch another video of mine since i forgot about how one thing was done it was a video where i covered how to draw dynamic meshes as a ui element specifically that one was making a stats radar chart so this is really the perfect moment for me to remind you that i really don't have infinite knowledge stored in my brain at all times i'm just like you whenever i don't know or don't remember how to do something i really just go searching for it and in this case i knew i covered this topic previously so i just searched my own videos and watched it again to remember how it works for making the visual i knew i needed a dynamic mesh so that was pretty easy i covered dynamic meshes in detail in another video it's very useful to know how to do that you just need to assign some vertices manually in order to draw the mesh now thankfully i've got this super useful mesh utils class that i made quite a while ago it's included in the project files for this video so in here i've got all kinds of functions for dealing with meshes specifically i've got a bunch of functions where i can already easily add another point to a previous mesh and the thing that i had to go rewatch that other video to remember is that you can assign a custom mesh to a ui element all you need to do is use the canvas render component and then call set material and set mesh that way you can draw dynamic meshes directly as a ui element so to make this mechanic work all you really need to know is how to work with dynamic meshes so i've got some basic logic for testing when the mouse button is down while it is held down and when let's go so when the player presses the mouse button i simply create a mesh directly on the player's mouse position so i use the rect transform utility in order to convert the input mouse position this one is in screen space and i use this function in order to convert from screen space into the local space of this transform so do that and we have the anchored position and then just create a mesh so literally just a point so create it and set it on the render and then on every update while the mouse is held down once again calculate the mouse local position then i just do a very basic distance check so this is just to make sure that it doesn't draw a new part on literally every frame so it waits until the mouse moves a little bit then i just count like the forward vector so that's this position minus the last position so that gives me the vector which is exactly how the mouse moved since the last point then since we have the new point i really just call the function in order to add it to my previous mesh so this function just takes the previous mesh it grabs the last two vertices so the last left and right and creates the new ones and simply adds it onto the mesh so for adding again just some basic mesh generation you just get the previous vertices uv triangles and set them all up so this looks slightly confusing but it's really quite simple once you know how to work with dynamic meshes with that i can simply click and drag in order to dynamically draw a line now the next part is the arrow and for that i literally just made a simple arrow texture and then as it's drawing after drawing the last point it simply places the airwreck transformer on that position and simply rotates it based on the forward vector and this is how you can convert a simple vector direction into euler angles and the final thing is simply the mouse so i just have a script attached to the player and it's listening to some events on the ui when the player press the button simply toggles the ui and when the ui is shown then it sets the cursor unlock state to none so it unlocks the cursor and when the ui hides then simply once again locks the cursor and then just enabling and disabling the player character controller so the player doesn't move and doesn't rotate as it moves the mouse so when you put it all together here is the final result so i've got my player character walking around i can press a button and up comes out the map and now anywhere i want i can just click and drag and tell my teammates in order to go through this area in order to attack this area so i can click i can drag i can make any shape that i want and yep it looks pretty great pretty dynamic alright awesome so as you can see this mechanic is also pretty simple to remake all you really need to know is how to work with dynamic meshes and that's pretty much it so if you have a multiplayer game then this is a great mechanic in order to enable some more tactical gameplay or maybe in a single player game you can use this to let the player draw some notes on their map alright so there you have it that's how you can recreate three interesting mechanics from verdun these are pretty interesting and as you can see they are definitely something you can implement in your own games if you want to try out the game for yourself check out the bundle and of course the bundle also contains tons of tools and assets perfect for making any fps game so if that's a genre you'd like to make then definitely grab the bundle it's an excellent discount also like i mentioned this friday on the 24th i won't be participating in the official unity live stream we're going to play around with the bumble assets and i won't be there answering any questions in chat so if you like watching live streams come ahead and say hi check out the full how it's made playlist follow the creator page on steam and like this video if you'd like to see more of these types of videos also let me know what other games have interesting mechanics that you'd like to know how they work alright hope that's useful check out these videos to learn some more thanks to these awesome patreon supporters for making these videos possible thank you for watching and i'll see you next time