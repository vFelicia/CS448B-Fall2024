hello and welcome I'm your code monkey and in this video we're going to take our previous UI arrow pointer and add the ability for multiple pointers let's get started so we previously created this arrow pointer in here it's pointing to a position in the world and displaying it as an arrow when the position is offscreen it should it's off to the side and chose an arrow when the position is onscreen and converts into a cross and it's placed on top of the target position we also have some code testing if we are near position and when we get close the arrow changes position oh just like that alright so now we want to be able to display multiple arrows pointing to different positions so first let's go into our quest pointer code in here someone pointed out in the previous video that there's a better way to test if the values are within the range and that is to use math F dot clamp so let's use that right now this week works by using clamp Oh make it cleaner so let's make our cafeteria position dot X equals method clamp clamp takes a value and puts it in between amen and maximum so the men is the border size and in this case the maximum is screen dot with minus our border size do the same thing for the wine using the Y bar size and on height and remove all this all right so this should work exactly the same but it's a bit more clean and there you go the arrow is still correctly placed within a border of the edge of the screen and everything is working the same ok great so now in the editor and let's place a couple more tents so let's duplicate place another one down here and another one far off in here we want to display different arrows pointing to each of these tents ok so let's go into our window code and in here we're using a show function which is consistent with the way this class is set up the window is shown when the function is called but now we want to have the window always active and create and destroy each individual arrow so let's rename show in to create pointers so rename create pointer as a little visual studio tip if you hit ctrl R R you can easily rename a function and it will rename every instance where that is used so now in here we're going to take a target position as normal but we're not going to select event to set a member position in here we're going to create a pointer object so let's first make a public class and call it quest pointer and we're making this public since we want to return this object to whoever wants to create a pointer let's make a constructor so public quest pointer and in here we're going to take a vector3 for our target position and store it as a member variable since each pointer is going to have its specific game object we're going to receive a game object for the pointer game object and also a sprite for the arrow sprite and another sprite for the cross sprite so on our create pointer let's create this object so make a quest pointer a quest pointer equals new quest pointer we're going to give it the target position for the pointer game object let's make a pointer game object and it's going to be a duplicate of our pointer template which is going to be essentially this let's just rename it back in our editor but it's going to be the same thing in here and we're going to give it in here also give it the arrow sprite and across sprite and finally let's return the quest pointer from our function return the quest pointer okay so now that we're creating this object and let's convert the rest of the code to use a subject instead of our previous member variables so let's go up here instead of having all this let's have a private quest pointer quest pointer and let's remove all of this which will actually be placed in our specific object and on awake instead of doing this we're going to do this on our constructor and we're going to have a public void update which we're going to execute the code that we were running previously and here so let's go copy all this into the specific object update copy the helper function as here there you go and on our update we're simply going to run the quest pointer dot update and also again since we're no longer hiding this window let's remove the hide in here in order to do our screen to our own point calculations we also need the UI camera so let's pass that in as a parameter as well so the UI camera let's pass it in in here alright so essentially our code is still working exactly the same but we have reorganized it to use an object instead of running everything on the windows update and then here set the member of quest pointer to this quest pointer so finally let's go into our game Handler and right now let's only create the pointer and comment out on this code right here ok so we're only creating the point so right now we should see pretty much the same thing that we saw previously ok so there you go that arrow is working exactly the same when I get to the end it gets placed on top ok great as you can see there is a secondary arrow here that is our template which we're going to hide but as you can see everything is working exactly the same but our code is now organized to be able to easily support multiple arrows so let's first go into our UI in here and rename this to pointer template and let's just hide it this is what we're going to use to duplicate to create our various pointers it's going here instead we're having the pointer it's the pointer template and when we create it we also have to do that set active to true yep there you go now I can only see my arrow ok good so now in order to add support for multiple arrows let's simply switches out from a simple quest pointer to a list of quest pointer name is what's pointer list in here we want to add our newly created quest pointer to our quest pointer lists so let's go into the quest pointer list and add this quest pointer ok now up here on our awake let su quest point journalist equals new and Senshi 8 our list and on our update we are going to go for each quest pointer quest pointer in quest pointer list and we're going to run our update all right so let's make sure everything is done working the same yep there I am there's a single arrow okay good so now let's go into our game hammer and create multiple pointers all right I am now creating a pointer on top of each specific tenth yep there you go we now we have three arrows let's see if they are pointing correctly and yep that one's playing two down one pointing to that one and that one is pointing away okay great so it seems like our multiple arrows are not correctly working so now the only thing missing is the ability to destroy them let's go into our window code and here let's make a public void destroy pointer and we're going to receive a West pointer as our parameter so West pointer so in order to destroy it let's remove it from the list remove our West pointer and let's create a function called destroy sound which we're going to place on our object in here public void destroy song and this function will destroy the game object so destroy the pointer game object okay so on my game handler in here when you create a new pointer the function to create the pointer returns a quest pointer so let's store that so store our window quest pointer dot quest pointer so first pointer so we are storing a reference to our pointer and here let's create a function updater the function updater is part of the code mock utilities which is almost you can grab for free from ent code monkey comm and a function updater triggers a action on every update so on this update we want to test if the player is near our quest point so let's test if vector3 not distance between the cameras main position the distance between that and our pointer position which in this case is 245 if it is under 40 F then let's simply destroy this quest pointers so going to our window quest pointer dot destroy the pointer and we're going to destroy this pointer and finally return true to destroy this function update okay I'm let's see if the first pointer is destroying when we get near it okay so here I am that's the first arrow so when I get near it should vanish and poof there you go it's gone all right let's apply that to all the others all right so here I am and when I get near to the first arrow and boom it vanishes the second vanishes and the third one there it is on the corner in there and when I get near it vanishes so there you have it we took our UI arrow pointer window and converted it to support multiple arrows in the next video we're going to customize our pointers with different sprites and colors as always you can download the project files in utilities from unity code monkey comm if you have any questions post them in the comments and I'll do my best to answer now subscribe for more videos and I'll see you next time