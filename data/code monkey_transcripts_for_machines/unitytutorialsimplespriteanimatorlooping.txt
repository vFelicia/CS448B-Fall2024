hello and welcome I'm your code monkey and in this video we're going to add more functionality to our sprite animator to make it handle looping and fire events let's get sir so in here I have the scene from the previous video with my character playing a wonk animation let's start off by adding a tag on for looping or not so going to our code here and in here we're going to add a private ball and just called and by default for now let's set it to false to test if our code works when hope is false so down here on our current frame we want to stop the animation if our current frame reset back to zero so let's go here and make if current frame equal zero so if we have reset back to the first frame we want to stop playing so let's make a new function and we're gonna call it stop play go down here and make a private boy stop playing and in order to stop playing we're going to make a new private ball and call it is playing by the phone set it to true and in here when we stop playing we just set it to phones and on our update if we are not supposed to be playing then we're simply gonna return and here we actually only want to stop playing if we are not supposed to loop and the current frame is zero if not then update the current frame as usual in here and let's set our frame right to one per second just so we can easily test and let's see it should play on frames and then stop there you go the second the third the fourth and stop okay great it's not changing anymore okay now let's reset our variable to true and make sure our previous behavior is still working just as it should there you go it is changing second third fourth and yep exactly it's not changing okay great so we can now control our animation and make it either loop or don't loop and we're going to add some events to fire every time the animation loops so going up here and make a public event it won't be of type event handler which is in the system namespace and we're going to call it on animation so this won't be fired every time the animation loops so in here we're going to fire it if we're back to frame 0 we want to fire it on both scenarios so let's set another hip down here if current frame equals 0 then we want to find so if on animation loop if it is different from no then we're going to trigger on animation with this and even our stock empty so in order to test our event let's just go into our script and make a game handler script we're going to attach it to our game handler object and on my game hand well let's make a private sprite animator called sprite animator and it's going to be a serious film so we can add it in the inspector I'm going to have a private void start and inside it I'm going to subscribe to the sprite animator dot on animation loop up here I'm going to be using the code monkey utilities which is always you can grab for free from int code monkey comm I'm going to go into the class CMD bug to spawn a text pop up on the mouse position and just say and on animation glue just an easy way to test to see if our events are being fired let's see and yep you can see it's firing the event every time the animation loops great now let's set up another event for when it loops but only trigger the first time which is sometimes very useful so let's make another public event on animation looped first time and now on this event won't be when the current frame is 0 and then we have to make sure we're on the first loop so we're going to need up here a private int will counter and let's start at 0 so every time we go back to current frame 0 we're going to increase our own and if we counter if it is one so the person loop has just finished then we're going to fire our event the event is on animation loop for the first time and into our game and learn let's add another subscriber to our event on animation loop for the first time let's download and make another popup on the mouse and we'll say that alright so now we should be saying the first popup won't pop up with both messages and subsequently only the second message yep everything is working right as you can see the first time it popped up both messages and now it's only firing the second event so there you have it we took our initial basic sprite animator and we added some loop functionality and firing events as always you can download the project files and utilities for free from unity code monkey comm if you have any questions post them in the comments and I'll do my best answer them see you next time