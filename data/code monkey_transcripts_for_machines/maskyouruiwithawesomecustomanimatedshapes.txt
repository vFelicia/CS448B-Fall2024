in this video we're going to learn how to make a custom UI mesh mask this way we can make a mesh out of any shape and mask out multiple parts of our UI while using just a single mask let's begin hello and welcome I'm your code monkey and this channel is all about helping you will learn how to make your own games with nf2 torrents made by a professional indie game developer so if you find the video helpful consider subscribing ok so this is one of those videos where I had a problem I did some research and I couldn't really find easy solution so if you're researching the same thing that I was which is how to making a mesh mask in the UI then hopefully this video won't help you now I need this because I wanted to mask multiple parts of the UI I wanted to have multiple lines of text and smoothly reveal each of them you can easily make a mask by creating a UI object adding an image and a mask component and then put whatever you want to mask as a child of that object however in doing it this way you don't mean to do just this image you can mask multiple children but you cannot mask using multiple parents so you cannot compose a mask of multiple objects now one simple solution is to make a texture with the Alpha Channel in the shape that you want so using this texture with two squares and yep it shows both parts of the annoying object however now we using this approach we're working with textures which makes animation relly tricky if I want to animate this I would need to smoothly make some of the mask pixels visible and that would be a very clunky way of doing things I was working on the code monkey steam app which by the way you can connect on link in the description to add it to your wish list I wanted to have some text on the interactive tutorials and using math to show parts of it over time so I needed to combine a mesh with a custom shape that I could easily animate to follow multiple text lines ok so here's what we're going to talk over here is this text object we just a buncha tests and it's inside a mask object now as I press point yep there you go you can see that the mask object is growing and smoothly showing the text now if we pause we can look at the mask and if there's the shape growing which shows the text behind it so we can hide the mask graphic and yep that's how it looks so far doing for a single line will work just fine using a simple image but then the issue is we want this mask to stay invisible and we aren't an add an other one so that we can continue masking out the various other lines so over here is the final result using multiple quads to make a single mesh mask over here you can see the final misshape which is a single mesh which itself is composed of three separate quads so you can build whatever mesh shape you want either through code or by manually building a mesh and using it as a mask so this is how you can make a custom mesh to mask out your UI this videos patreon sponsor is bad adventure bad adventurer is a game development duo currently working on their first game Wayfarers edge it's a RPG focused on exploring and settling unknown frontier lands in a low fantasy and Wild West theme check them out at bat Adventure calm thank you to the patreon sponsor and thank you to these awesome supporters for making this video possible go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone all right so this circle let's get to it okay so here we are in our starring scene and let's go into the UI canvas here and let's create a text object alright so here's some basic text now we want to mask it so let's first look at how a basic UI mask works and the way we do that is we create a new UI let's make it an image then here we add a component we add a mask component and now to mask something we just need to make it a child of this object so just drag that one on there and yep just like that the text is now only visible whilst inside the shape of this image now right now the source image in here is set to null so this is displaying a basic rectangle but you can assign any texture in here so for example let's use a circle and there you go now the mass takes on the shape of a circle so this is how you make a very basic mask you have the parent with an image and a mask and then you have whatever children you want and it masks out the children now the issue comes when let's say that we want to show this part of the text and then this part as well now since masks works based on the shape of the parent we can only have a single mask shape so the mask works based on what this image is rendered now like I said when possible approach is to make a texture with the shape that you want so down here I have this texture here just two squares and the rest of it is alpha transparent so if instead I apply this one and yep just like that I am masking out two parts of the underlying object so if your goal is just a fixed mass CheY then this approach won't do however since this is based on a texture and it's alpha Channel it makes it very tricky to modify in order to modify it I would have to play around with setting these pixels to fully opaque and so and so on so that would not be the best approach so instead let's create a custom mask shape let's create a new C sharp script call this the mesh mask ey and now here we're going to create our own custom mask type now to do that we just need to extend instead of monobehaviour we're going to extend mask upon graphic which is inside using unity engine dot UI so there it is let's just hit save and see now here and let's remove the mask and our image component and send let's add our nice script and yep just like that already shows a few fields so these are on from the mask eval graphic base class now for now let's leave everything at default let's just change the color to a nice green to make it very visible all right now back in the code here in order to make our custom mesh we're going to override one of the functions it's called the populate mesh now this one gets called automatically by the UI system to create the mesh of our mask ammonal graphic and this function has an argument of type vertex helper so it's a nice humper class to help us handle mesh shapes now the first thing we do is to make sure that you clear whatever the current shape of our mesh is so you're going to the vertex comfort and we just call clear okay and now it's in here that we can set up our customized shape so let's start off with a very simple square all right we have to find a position for all our vertices and then we just access the vertex helper to add a UI vertex quad all right so just like that now one thing here in order for this to actually work we need to give the UI vertex a color if you only were to add empty it just won't work I'm not sure why but just give it a random color and it works so this is really all it takes we clear the current my shape and then we add our custom vertices and if we go back into the editor any for any way we see our mask shape so here there is just basic quad with 50 by 50 all right great so our object is creating the mesh and making it masculine and in order to make it an actual mask we just need to add the mask component and just like that yep there it is and we can either show or hide the mask graphic okay so now let's see how this helps us solve the original problem of having a mask with multiple shapes down here we can make another UI vertex quad alright so we have our original quad and one next to it and if we go back and if there is we have our two visual quads so we have a single mask parent and by using a custom mesh we can mask out multiple areas of our underlying object so there it is alright awesome now we need to do is really just extend upon this concept so here let's try and making our mask let's just increase the size over time all right just like that we should see a rectangle stretching however when you go back here it doesn't actually work so our mesh shape is not actually increasing that is because we are missing one thing which is in here the UI system only calls this function when it absolutely needs you meaning that it does not call it automatically on every frame so if we want to do that we can make our predatory update and in here we tell it to update on vertices so we just go set vertices as dirty and they won't update so just like that now this should update on every frame and if there it is now we have our custom mess shape and mating over time awesome all right so now with this you can obviously use whatever mashup you want it doesn't have to be just a simple rectangle so for example you could make a mesh in the shape of a star and just rotate around or really any you want to animate and in any way you want alright so here is the final script that I made for the code monkey steam app it has the mesh mesh UI script then as a child of it it has the same text object and then over here I have a container with a bunch of children and each of them has a simple script just with two fields so just a fold for the start time and another one for the total time so that's eternal amount of time that this rectangle will take to reach its final shape so this object has this shape and each of them is covering one line and then they must mesh you why over here has a reference to the mask container and it simply applies those masks let's see there it is and all of a sudden yep there you go there's the masked shape being created over time so here it is with the game and the scene view side by side and you can indeed see the mesh shape constantly growing so this is a great way to smoothly scroll over some text in any matter you want as I said I researched this while working on the code monkey steam app if you haven't yet then please check the link in the description and add it to your wish list I'm trying to build something really cool and it should hopefully be out sometime next month this video is made possible thanks to these awesome supporters go to patreon.com/scishow to code monkey to get some perks and help keep the videos free for everyone as always you can download the project files in utilities from unity karma com subscribe the channel for more Hindi churros for sin square 7 cons and I'll see you next time