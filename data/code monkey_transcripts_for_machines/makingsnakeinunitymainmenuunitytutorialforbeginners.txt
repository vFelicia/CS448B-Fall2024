hello and welcome I am your code monkey man the series were making snake in unity in this video we're going to create the main menu let's begin so here is our game we have the snake that we can move around and eat some food we have the score being trapped every time we eat some food and if we hit the body of the snake we get a nice game over window so the core of the game is completely working now let's create a main menu from which you can start the game or quit at the desktop in order to create the main menu scene we could create a new scene and set up the camera and UI again or we can just duplicate our game scene and start from there so it's implicit in all this the main menu alright now in the scene oh let's get rid of all the things related to the game and leave only the main camera and the UI setup okay so now in our canvas let's make the main menu so let's begin by making a container object for the main menu and let's stretch it to occupy all of the space now in here we're going to have three buttons play how to play and quit so let's make a single button first the button container inside let's make another game object for the background which will have an image and another game object for our text all right this is our button now let's add the button UI component this is part of the code monkey utilities it's just a script that already contains a bunch of helpful code to deal with buttons so in here for example I can change the hover behavior type change to set active on the background so essentially the background won't be displayed if the mouse is on top of the button so let's test there's the button then as you can see when I'm passing mouse over the background is automatically displayed in order to show that the button is selected all right so let's create the other buttons all right so this is our basic main menu with our three buttons to control it so let's make the script to deal with the code so we make a new csharp script for the main menu window now in here first on awake let's grab our references okay so here I have a reference to the point button so let's change the click function which is the function that is triggered when we click on the button and when we do all we need is to load the game scene so we do the unloader that we built in the previous video and we load the unloader not seen for the game scene so essentially we're doing the exact same thing that we were doing here on the GAMEOVER window we just load the game scene so the play button should be working let's see okay let's go to the play button and click and yep there you go we are now playing our game all right good so now let's deal with the quick button now in order to quit the desktop all we need to do is call application dot quit now we can't actually test this right now since this line doesn't do anything in the editor but if we build our executable it won't quit back to the desktop so with these two done all that's left is to make the how to play so let's first go into the editor and here let's create a window to display how the game is played so here with the new game object I'm going to push it to the side just make it easier to see both things at once but through code we won't automatically reposition it back on zero so inside let's add a background and some text fields explaining how the game is played all right so here is our very simple how to play window it teaches the player how to move what the goal is and what to avoid so now let's go into the code first let's reposition our window so we set the rect transform anchored position back to zero okay the only reason we're doing this is so that here in the editor we can similarly position things around so here is the window I can shift it in here and then through code when we run the game it won't automatically be positioned in there okay so let's run the code and see and yep there's the how to play window showing up on top now obviously we don't want it to always be visible and for example right now it's hiding the other buttons so let's figure out a way to show this window whilst hiding the main buttons so in the editor let's make two containers this one will be a container for the main submenu so in there I'm going to drag the main buttons all right like that and then another container for the how to play sub menu and let's drag the how to play window on there okay so now we have two very nice containers that we can show and hide whenever we want to change what is visible so back in the code here let's create an enum to handle of our sub menus so here making a private enum this will be our subs for our sub menus and essentially we have the main sub menu and then we have the how to play submit okay now let's make a function to show a specific sub menu now the first thing we want to do is hide everything so first we hide both subs and then we'd both of them hidden we do a switch on the sub we want to show and we never on the sub that we want to show all right so this should be working now up here on the awake lights fix this code since these references are no longer correct so in here the play button is now inside the main sub and same thing for lis quit button instead of sending the how to play window directly to zero we send the how to play sub and same thing for the main sub just in case we move it and now in here we can finally set the code for the how to play button when we click that button we simply do show sub and we show the how to play so and after everything is initialized we simply show sub for our main sub alright so we created an animal to keep track of the various sub menus we have on awake we reposition them both to zero in case we modify them in the editor and we have a nice show sub function first of all it hides all of our subs then it does a switch on the target sub and it shows that one run awake with all of our setup and then we show our main sub so it's seafoam this is working okay so first of all the how to play sub is not visible which is what we want but if we click on how to play we should now see these buttons as beer and how to play window appear click and yep there you go there's the window and the main buttons are gone all right great now obviously we need a way to go back to the main sub so let's add a back button to this sub and here in the code and let's set up the code for that back button so essentially it's only how to play sub and when we click it we go back to the main cell alright let's see okay here it is everything works fine click on how to play there's know how to play window and now there's the back button click and now we're back into the main money all right great and again clicking on quit still works except we can't test it in the editor and click on play doesn't need start our game all right so everything is working just fine so now that we have the main menu fully working let's deal with adding a pause menu so we can go back to the main menu from the game so let's open up the game scene and in here on the UI where we made the game over window let's create a pause window now first let's add a background to darken everything and extend it to occupy the entire window again we are shifting it to the side so it is not occupying the rest of our UI and through code we will put it back on the center so in here we're going to do very much the same thing that we did with the main menu so let's make some buttons alright so the editor is set up we created some buttons exactly like we did for the main menu so now it's dealing with the code let's make a new C sharp script this will be the pause window and here the same thing let's go on to our awake get the reference to our buttons now for the main menu button it's very simple we just use the alert class to load back into our main menu so we need to add that in there so on the unloader and let's a new a new value for the main menu and again here in the editor we need to go into our build settings and drag our main menu onto the built list ok and now we need to deal with the code for resuming our game which also means that we need to deal with the code to pause our game so in order to do that let's do it on the game Handler down here and let's make a function so now in here we need a way to resume our game so we're going to add that function into the game handler game handler dot resume game we're going to do that function later now in here let's add some functions to show and hide this window just like we did in here for the game over window some basic show and hide functions and we call hide by default since the window isn't supposed to be visible all right so this should be working so now let's make the resume game function only game Hamlet when we resume the game let's hide the pause window and let's also make a function to pause our game and when we pause we tell the pause window to show static alright now in order to pass our game we're simply going to do time that time scale and set it to 0 F the time scale essentially applies a modifier to our time.deltatime so if it's zero the delta time will be zero since we were moving our snake using Delta time that means our game won't be stopped and obviously on resume we need to do the opposite which is set a time scale back to 1 all right so all of this code should be working now we need a way to trigger the pause game function so let's go here on the game handler make a update function and on the update let's capture the Escape key if we press escape let's pause the game so game handlers dock pause game all right so let's test and see if we can pause by pressing escape okay first of all the pause we know is not visible exactly as we want now let's eat something all right and I'm gonna press escape and the game didn't need pause but the window did not show up let's see why that is if we pause the game we can see that the window isn't it visible but it is shifted to the side so through code we need to move it back into the zero so let's do that here on the awake we simply start the transform alright so we set the anchored position any size Delta both to zero so now the window should be correctly shifted to the middle of the screen whenever we start a game so let's see all right so here we are and again everything works fine and now if I press escape yep there you go the pause window has indeed showed up with both of our buttons saying pause and as you can see in the background a snake has stopped moving so now let's see if it resumed when I click on resumed any of there you go the snake is moving again and again I can control it and move and eat all right great now there's one thing we can do to improve our code in here if I press escape it does indeed pause the game but pressing it again no longer does anything we need to now shift to the mouse in order to click resume so this is a very simple thing to improve so let's see on with that here on the game hammer let's make another function a public static ball is game pause and in here all we're going to do is return if the time time scale if it is 0 if there is 0 then the game is indeed passed so now we can use this function when we go up here when we capture for our escape key if the game is already paused then we do game Handler dot resume game and if not then we pause the game all right so let's test and see if our escape key now works as a pause toggle okay there's a snake moving press escape there's the pause screen press skip again and yep there you go over the game has resumed and I can still move and now eat another one pause and go back and it does go back now I can pause and also test out the main menu and if there you go we are back into the main menu which again shows the how to play go back go back into the play screen back into the pause and resume and everything works just fine so there you have it we have the main menu where we can sir a game quit the desktop or really how to play instructions we also create a pause menu and add the code to listen to an escape key press to pause and resume the game in the next video we're going to deal with sound and saving the high score as always you can download the project files in utilities from in tucumán keep calm if you have any questions post them in the comments and I'll do my best to answer them subscribe for more videos and I'll see you next time