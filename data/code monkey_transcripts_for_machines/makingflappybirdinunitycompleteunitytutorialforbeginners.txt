in this video we're going to create flappy bird completely from scratch in unity this is a great game for beginners to start with it's a very simple design that still involves some interesting logic let's begin hello and welcome I'm your code monkey and this channel is all about helping you learn how to make your own games with nf2 torrents made by a professional indie game developer so if you find the video helpful consider subscribing okay so here is what we're going to create in this video we're going to start off completely from scratch and build the whole game we start off with everything stopped waiting for our input we can play the game with the keyboard the mouse or with touch input as soon as you press the button there you go the bird starts flying and the own level starts being generated the pipes start coming in with gaps in between them we have nice sound effects for the bird jump and every time the score increases as you can see as more pipes get spawned the game becomes more difficult as the gaps in between them become smaller and when we die there you go we have a nice game over window that pops up in here you can see that we are storing our current score and our high score then we have our two buttons to retry and back to the main menu now when we retry it's very quick it reloads the main scene and we can try again very easily and the other button for the main menu we can get and we go into a very simple main menu where we can go into playing the game or quit to the desktop so we hit play and here we are back again everything is built correctly so the game works on both desktop and mobile the game is also nicely polished as you can see with bird flapping its wings when I click you can see it nicely rotate with jump velocity there are clouds in the background being moved with a nice parallax effect along with our ground and the pipes and here on the GAMEOVER window as you can see it also has a nice polished animation so this is our final goal now let's go through an overview of how we're going to get there we're going to start off with a completely empty scene making a brand new unity project then we're going to begin with our initial setup first setup the main scene and camera as well as organizing our hierarchy and project folders then with the basic setup done we're going to start working on the bird make the game object and the script to control it listen to input and use unity physics in order to move it with burden we're going to handle the other essential component of the game the pipes first learn how each pipe is setup with a body and head sprite as well as handle collisions between the bird and the pipes then we're going to start working on a level script which won't be responsible for spawning our pipes start off with a simple function to create a pipe with the correct size and position then expand the Panda to make a function to create both a bottom and a top pipe with a certain gap between them with the pipes being correctly spawned we're going to handle their movement as well as correct spawning and cleanup we're going to implement increasing difficulty based on the number of pipes spawned so as the player goes along the pipes become more frequent and with smaller gaps then we're going to get to work on making the UI first deal with the setup and then add a simple window to display the current score with the score working we're going to handle our game over state so make another window in the UI that pops up when the game ends which is when the bird hits a pipe the window shows the score and has a very quick retry button then we're going to make a proper loader class to handle all of our loading and with that it's time to make a simple main menu just another scene containing a button to play another to quit without that the game won't be almost fully working so it's time to finally add some sounds we're going to make a nice class that will be responsible for playing every sound and then after that we're going to handle our score detect when we have a high score and save it when we beat it as well as a nice message in the game over window so at that point the game won't pretty much be done and with everything done it won't be time to work on punch so we're going to add all the tiny little things that greatly improve presentation like the ground and claps per rotation when jumping as well as a nice animation on the game over window alright so again here is final game after all of that we have our bird jumping and going through the pipes these score increases and we have some nice sound effects everything is nice and polished and the game is very nice and playable all right so this is our goal let's get started so here we are in the unity main window let's name our new project flappy bird we're going to use the 2d template and let's it create alright here's our completely empty scene well let's first rename the scene in order to have a more appropriate name so this will be the game scene this will be the main scene where our game is we won't later have a different scene for the main menu and anything else we need so in here let's set up our camera since we selected 2d our camera is already in orthographic mode let's just change the size so we can use a larger unit size in our game and here the size is the orthographic size which represents half the vertical space shown in the camera so in here and let's set to 15 and now here on the scene view we can see that our camera is now displaying right here from minus 50 all the way up to plus 50 so we have a hundred units being displayed all right now let's make our main starting object so we make a new game object let's put it on zero zero zero now this won't contain the main script that handles our game so let's name it our game hemily it will also be the main container for our preset scene objects the better you keep your objects organized in your hierarchy these are it is to find what you're looking for so here let's drag our camera in order to be a child of the game hello okay now let's make a game handler script in order to handle our game this will be the entry point for most of the game so in here first let's make a new folder this will be our scripts folder and inside we create a new C sharp script and this will be our game helmet okay let's open the script and in here and let's just do a debug download on the start okay very similar script just so we can make sure that our script is running so now back in the editor let's select our game object and drag the script onto it okay let's test any of their lives on the console game hell more dots are okay great everything is looking good so far now let's set up some visuals so first we make a new folder this won't be our textures folder all right I have copied some textures onto this folder as always you can download the project files from the website so in here we have a simple background texture a bird a ground a pipe body and a pipe head here is also a white pixel texture it's literally just a one by one white texture this is great whenever we want to display a colored rectangle so let's begin by setting up the import options for this texture it's one by one so we set the pixels per unit to one so when we add this texture to a sprite renderer it won't occupy exactly one unit now for the other textures it's going to depend so let's start making our objects and then we'll hand all the pixels per sprite so first of all make a game I'll check this will be our background we add a sprite renderer component and drag the background sprite so here's our background sprite occupying the entirely of our camera view okay now that we have our background let's make our bird so a new sprite this will be our bird and let's drag the bird sprite okay this seems like a good science here it is in the game view and now that we have multiple sprites let's handle our sorting layers so we can simply go from the spread rendering here at a sorting layer now we have the default let's make a background layer and also a over layer so we have the background then on top of the background we have the default and on top the font we have another layer this one is just in case we need it later so here in our background we put it on the background and the bird let's leave it on the default okay so that's our basic setup for the main sprites we're going to need we have our hierarchy organized we our main camera our main object the bird and the background the project files are also nicely organized into folders so we have the scenes scripts and textures and now in order to help us develop the game faster we're going to use some very helpful classes from decode monkey utilities this is just an optional step you don't absolutely need to have them but it will help us in iterating and debugging our game in many ways the scale of a game the vampers based on the tools at our disposal so you can go to the website unity code market account download utilities for free and then you get a unity package file when you open that file you won't see this window so in here let's simply import everything and there you go here in our project files you can now see a new folder and in here it contains all of the utilities as you can see it also contains all these source files so feel free to go through all of these in order to see how all work now to make sure everything is set up correctly let's go back into our code into our game hammer and in here and let's spawn some testing popups so first we go here using code monkey and using code monkey utils and here let's spawned some popups every once in a while so for that we can use the function periodic this lets us automatically call a function every certain amount of time so this is the function we won't call inside we just do a text pop up on your mouse position okay so here it is very simple we are simply going to execute this function every 300 milliseconds so we should be able to see a nice text pop up just see if our utilities have been correctly set up let's see any app as you can see there are the messages so we have all of our utilities correctly worth this will be very useful as we go on so we have our complete set up almost done let's add just one more very useful thing let's make a class that we can use to easily reference assets from code so for example let's say here in the game ham where I want to spawn a pipe so what I would do would be create a new game object so here for example I'm creating a new game object with a sprite render and I mean here I need a reference for this part that I want to use so this is where it's really helpful to have a class that contains all of our asset references so let's do that here let's make a new csharp script this will be our game assets and now let's also make a game assets game object again keep it organized so drag it in there and drag our script onto it okay now this won't be a very simple class now for starters one thing we need is to be able to access our fields from everywhere else in our code so let's make a static accessor so we have a private static instance and the public function to get the instance then we just set the instance on our private Roy away okay so now everywhere else in our code we can access this in order to get this instance being static means that this can be accessed from everywhere else in our code so now all we need to do is add public fields for whatever assets we need and we won't be able to reference them through code so here just for testing let's do our public sprite for the pipe head sprite and now we can go back into our editor and there's our script as you can see there is the field now we can drag our pipe head okay so we have our asset reference right there so now we can go back into the game Handler and in here we can finally access that so we're going to became assets we get the instance and then we access the pipe heads Frank alright so let's see and if there is our created game object with the correct pipe head sprite so as you can see we're able to reference this asset through code now just one last thing and here we need to make sure that our awake runs before anyone else tries to access it so for that we can go into edit project settings now in here we have the script execution order and we can simply drag the game assets and drag it onto the top that will make sure that this script gets executed before any others test it again and yep everything is working perfectly fine ok great so here we have made all of our initial setup and we are finally ready to begin creating our game we setup the main camera as well as our main game object that won't be the entry point for our game we also import the code monkey utilities which won't be extremely useful for helping us make our games faster and we made the game assets class which also be very useful for grabbing asset references through code okay with all that done let's begin making some basic control for our bird we want the bird to be controlled on by either pressing the spacebar or clicking on the mouse so let's make a script to handle our bird so a new csharp script don't let's simply call this bird and let's drag it onto our bird game object okay now in here let's first make a private Lloyd update then our update let's capture the space key so we do if input dot get key down key code out space so this one the space is pressed now when we hit space we want the bird to jump so we're going to make a function to do that so jump and now in order to do the movement and later test for collisions we're going to use the Unity physics system so let's go to the editor to set that up okay here we are on the bird game object and in here let's add a circle Collider 2d and let's look at the size so here on let's make it slightly smaller than the sprite so the game is a bit more forgiving and exciting okay now this is just a Collider so right now it doesn't do anything in order to handle gravity let's add a rigidbody 2d and here for the constraints let's freeze the movement on the X it's a bird long ago up and down alright so that's pretty much it for the physics setup so we can test out this code and see any of their is the bird is already being affected by gravity okay so far so good now all we need to do is tweak these values to make sure they feel just right so in order to test our values let's first teste jumping so here on the private void awake let's grab a reference to our rigidbody okay we have the reference to our rigid body and now in here on our jump we want to jump to be repeatable and consistent so the bird is meant to jump the exact same amount every single time that's how we're going to make sure that the game is fair now to achieve that we're going to modify the rigid body don't laissez that won't give it an instant jump as soon as we press so in here we use vector to data to move around and then we need a certain jump amount so let's go up here to define a constant for the jump amount so a private constant load for the jump amount and here we multiply a vector sodaro by our jump or not okay well let's see if when we press space we can see our bird jumping there's a bird press space and if there you go he started going up okay great now let's tweak these valleys okay so these values seem just about right so when I press give there yo he has a nice and repeatable jump so if I price exactly at the same time you can see that everything is repeatable so it's very much based on player skill okay great so the valleys we have 35 on the gravity scale and here we have a hundred on the jump amount so just like that here's our basic bird jumping up in there okay awesome now let's make the jump also based on the mouse click so we can play either with the mouse or the keyboard so here we're testing for gate key down on space and let's also test or input not yet mouse button down on the in left mouse button so mouse button zero let's see okay here we are space stone works and click yep there you go clicking some words okay awesome so we now have two different input methods and our game works perfectly fine now with this it would also be very simple to make it work with touch input since it's pretty much the same as the mouse so here we have our basic jump working now that we have the basic jump let's work on our pipes so over here as you can see there are two pipe sprites there's the pipe head and the pipe body so to see how they're meant to be set up let's make one in the editor so just drag the pipe body and drag the pipe head so essentially we're going to have our pipe body then don't be stretched based on a certain height and then we have the pipe head on top of the body so this is how we're going to create our pipe now how we're going to handle collisions is again using the physics system so let's move the pipe right next to the burn okay like that and here on the pipe body and let's make sure it reaches just the top of the head and in here we add a box Collider this is how we're going to test for collisions let's make this a is trigger and everything else leave the same now back in our Bert code in here let's make a private void on trigger enter to D so this function gets called whenever this collider hits another Collider so in this case and let's just do a pop up so again let's go up here using the code monkey Stoney's so you can go into the CM debug class to just do a text pop up on the mouse position okay let's see if our collisions are working okay here we are now let's fall and touch the pipe any of their Dean that pop up and yep just like that okay so we are correctly and successfully identifying collisions between the bird and the pipes okay great so we now have the basic collisions working and also we know what we need in order to create a working pipe now let's make a script which will handle our level by creating and moving our pipes so we make a new csharp script let's call this our level let's make a new game object for our level and drag the script onto it and again keep things organized so drag it on there okay and I'm here in our level class let's begin by creating just a simple pipe so let's make a function a private boy create pipe here for the parameters let's receive a float for the height of the pipe and also a float for the exposition now let's create a pipe like the one we created here in the editor so we have a body and a head now here we can use prefabs in order to insensate our pipe so let's go here make a new folder for our prefabs and let's drag the pipe body and the pipe head let's name this TPF pipe body and pipette okay so here are both of our prefabs now in here we instantiate and now we need a reference to our pipe so we can go into our game assets in here at a public transform so we have our two fields for the head in the body let's drag them here's the game assets drag the pipe body and the pipe head okay we have our references and then we can go back into our level we instantiate go into the game assets class you get the instance and access the PF pipe head okay so we have the pipette being instantiated and also the pipe body and just like that we have both them being instantiated now let's test this out so in here make our private voice start we're going to create a pipe and for now the parameters don't matter so much is passed zero just so we can test okay here we are in yep we have correctly in Senshi in our prefabs here are both of our codes okay great now that we can create them let's position them so let's modify the pipe head position for the X we pass in our exposition and the Y will be based on the height but for now let's leave it just at zero and also please leave pipe body on the x position so let's test finding two pipes so the first one on zero and the second one on 20 okay let's see if we have two pipes being accentuated any of there it is we have a pipe here and one in there okay great now with positioning them based on the height let's start off by making a pipe that occupies half of the screen so over here in the main camera we set the orthographic size as 15 so that means we can see a hundred units so this one goes from minus 52 plus 50 so if you place them down here and put a height of 50 it should occupy half of the screen and now here on our prefabs there are some things we need to change over here on the pipe body so far we just changed it on the scale however right now we're going to do it differently here on the sprite instead of simple draw mode and let's choose sliced so we can now reset the scale and now instead we move based on the height let's fix this warning so go into our pipe body make this foam rect so here is our updated sprite instead of modifying the unloadin scale we're going to modify the draw mode width and height so here it goes up and down okay and one more thing go here onto our sprite and we're going to set a pivot on the bottom so now we can modify the height in units and place it right on the bottom so we're going to place our sprite on minus 50 and we want to add at a height of 50 and just like that the fight will reach exactly the middle of the screen okay now let's position this through our code also one thing we need to see is the width of our pipe so for example you could decide to have a variable wind but in our case not to keep things simple we're going to always keep the same width so let's sort this as our constant so here on the level let's make a private Const code for the pipe width and put that back and now we can go here into our pipe body so we access our sprite render and modify the size so for the size we pass in a new vector2 first with the fight width and then for the height we want so in this case our height so if we go in here and we pass in 50 which now be able to see our pipe body having 50 height let's see and he appears both our pipes let's see if they are indeed and yep there you go they are on the Y of zero new in a height of 50 okay so the height is indeed working however now we need the head to be on top of the pipe since this one is meant to be going bottomup so that means that we need to take the head and move around the way up there to the height except if we place it on the height it would be placed in here which would go past our desired height so we need to put it on the height minus half of the height of the head so let's do that through code so you position the pipe body make it the correct size and now for the pipe head it won't be placed on the height minus half of the head height so let's see how much is half of that height and here we can make also the head based on slice so we can easily see our width and height so here's our values essentially we wanted to put it up there minus half of that so minus 1.8 and it would be just in there now obviously you can also see that the head is behind the body that is not meant to happen so we can also just set the order in layer leave it on default and put it on 10 okay that should do it so let's put this value in our code so another predacons float for the pipe head height so in here we position the pipe in on the height minus half of the head height okay let you do it let's see and here we are and yep there's our pipe correctly positioned the pipe starts on zero goes all the way up to 50 so to the top of the screen and the head isn't it placed exactly on top so here we have a perfect pipe with a height of 50 okay so far so good now one thing we need is obviously to update the valleys on the box on either as you can see it's only down here so let's set the Buckskin letter size to match the size of the sprite so the box weather is here on the pipe body so we just take the Buckskin weather and modify the size going to give the same pipe with an hour height okay now let's see okay here we are the pipes are correct let's look at the buxom weather and there you go the height is correct however it is still on that origin whereas the sprite has an origin on the bottom that is because we set the pivot on the sprite to be on the bottom so we need to do is shift our box Collider up by half of its height let's do that here we take the size then we also modify the offset now the offset on the X is zero it's correctly centered and here its height x 0.5 any of there it is it's perfectly correct as you can see there to the box wire and yep it goes perfectly all the way to the top okay great now let's fix the issue of the pipes being spawned right here from the zero we want to spawn them obviously right here from the bottom so that means we need to know the camera orthographic size so let's make that over here and now that our private conflict for the camera ortho size which in this case we're using 50 in here in order to position them all we do is put them on or through size then add all the rest okay let's see if the body in the head are now starting from the bottom any of their it is we now have our pipe spawning right from the bottom okay great so we have pretty much our create pipe function working what's responding different heights so when we'd 1543 and Twain any of there's our pipes all of them with the correct Heights okay great so everything is working great however in the game you don't just have pipes on the bottom but also on the top so let's do that or here are not create pipe function let's add another parameter let's receive a bowl and this will be create on bottom so if this one is true we create a pipe on the bottom if it's false we create it on the top so in here essentially for our positions we just have to reverse it so here let's define a pipe head Y position so by default on the bottom we do what we were doing previously then we have an else if we were not from the bottom then we want to create from top so it will start on plus camera ortho size minus the height and plus the pipe head height times point five and that's what we use in here okay so that's the head correctly placed now for the body so the body is very simple if we are on the bottom we start on cameras or through size and on plus cameras I see from the top however the one thing is if we do it like this essentially we spawn around top and it won't start at top the screen and then go past outside of the screen since we set the pivot on the bottom so we can fix that by setting the high body dot local scale keeping it 1 on the X and invert it on the Y ok so this should be working so let's test it out in here so we should be able to see a pipe on the bottom and one on the top post them with 40 of height let's see and if there is we have correctly set up our pipes so we have a pipe right here on the bottom and when right there on the top we can all get the scene view and yep everything is perfectly start exactly in there they go exactly for 40 ok great so everything is perfect here testing with a height at 50 and yep they meet exactly in the middle all right great so we cannot spawn pipes both on the top and the bottom they are dynamic so we can spawn any size that we want now that we have similar is working in the flappy bird game design we normally always have a pipe on the top and one on the bottom so let's make a function that takes a gap size and calculates the size of the top and bottom pipes so in here we have our nice create pipe function ok everything is working perfect and I mean here we make another a private boy create gap pipes now in here will receive a float for the gap line meaning the height of the gap also evolves for the gap size so how big is the gap and also our fault for the exposition so we want to create a gap at this Y at this height with this specific size and obviously placed on this x position so that means we need to come like the height for both the top pipe and the lower pipe so let's start with the bottom pipe which is a symbol so we just do a create a pipe now for the height on a bottom pipe it will be the gap Y minus half of our gap size so gasp size times 0.5 F so this is our bottom pipe and now for the top pipe we need to know the total size of our play area so that's our camera ortho size x 2 so our play harriet has a hundred so to create our other pipe the height of this pipe is the ortho size times 2 F so the total playable area the gap wine and half of the gap size so we spawn our top pipe first of all we spawn it with the total size of the total playable area so it starts on top and reaches the bottom then we take away the gap wine so it goes just past that and then we take away half of the abbé sieyès okay so this should do it now let's go up here to test making a pipe so we create the gap pipes for the gap wine let's start off right in the middle so on 50 and for the gap size and let's say a size of 20 ok so we should be able to see two pipes that make up a gap with 20 of height and the app is right down the middle let's see and if there it is there's our pipes both of them being created by just one function and let's make sure that this is correctly working so let's create a game object just don't look at it any of there it is up here we have a Y of 10 and down here if there you go minus 10 so here we have a gap with size of 20 okay so our code is working perfectly great we automatically calculated the top and bottom pipes based on a certain gap Y and gap size so now with this next function we can get to work on making me in level generator but before we do that the pipes are not meant to be static but rather move with a level so here we have two options we can move our bird across the level and keep the pipe static or we can keep the bird static and move the pipes let's move the pipes instead so we don't have to deal with moving the camera so over here in the level class we need to keep track of what pipes have been spawned so we can actually move them so up here let's make a list of pipes so a private list let's store transforms and call this deep pipe list on the private void awake we initialize our pipe list and over here when we create the pipes let's add them to the list both the head and the body so in here pipe list add the pipe head and here at the pipe body okay so we are populating our list with all of our pipes now let's go to our update and in here and let's make a function called handle pipe movement now in this function let's just cycle through all the pipes and in here all we need to do is modify the pipe transform that position and move them to the left now we need to know how much we move them so let's go up here in order to make another constant for the pipe move speed and then here we just move them to the left so a new vector3 with 1 on the x x our speed and by time.com time alright so that's it very simple we go through our pipe list and we move the mounted left so let's test and here it is we have our pipe moving to the left ok great so this is working however the code isn't looking quite bad over here we have a list of transforms and each pipe is composed of two differ transforms it would make more sense to have a list of actual pipes and then the pipe class would handle whatever it contains so let's do exactly that down here let's make a class called pipe and then we have a transform for the pipe head so we have a feel to sort the pipette in the pipe body transform and we receive both of them in the constructor all right now also a public void move function and in here we're going to move the head and body exactly as previously so over here we were doing this and now we go down here and do the same thing for both the head and the body okay so far so good so we now have this nice simple class and now in here when we create a pipe we create the pipe head in a pipe body then in here we create a national pipe object so we now have an instance of our nice pipe class and now in here in our pipe list instead of stirring transforms let's store pipes so fix all these errors and here on the pipe list we no longer to add the head or the body but rather down here we do item list and add our pipe okay so this is working now we have on list of pipes and now in here on our Hema movement we cycle through all the pipes and instead of moving it directly we just call might not move all right that you do it what says to see if it's still working any of here we are and the pipe is still moving exactly the same as previously now one issue we have is regarding the cleaner now if we go into our scene view over here is the camera and there's the pipe continuing to move to the left as you can see it's going to continue moving towards infinity what we really want to do is clean up and destroy the pipe once it gets to a certain point right here on the edge of our screen so when it gets passed we wanted to be destroyed so it doesn't keep eating memory so we're here in our hmmm pipe movement have to remove it let's test if the pipe position is under a certain value so to get the position let's go into the pipe so here we're going to have a public float let's go get exposition and in here both of them are gonna be placed on the same X so either one is fine so let's just return the pipet transform that position dot X so we have a function which returns the pipe x position and now over here have to remove them we just need to test if the pipe dot get X position if it is under a certain value so to define that valve let's go up here to make another constant so project cons float let's call this the pipe destroy x position to see the position let's go into the editor over here we have our camera so let's see where that is so here it is the edge is on minus 90 now the way we set up our camera is going to depend on horizontally so in here if we had five by four it would be smaller so we need to make sure that we pick the value at the widest possible resolution so the why this is sixteen by nine so let's put it a bit on the edge so let's say minus a hundred so very here the pipe destroy exposition is on 100 M so we can now go down here test if the position is under the destroy exposition then we want to destroy D pipe so let's make a function in there to do that so we probably boy call of destroy self any here this is going to destroy the pipe so we need to do is run on destroy both transforms so we destroy the pipe head and the body transforms game objects and now in here that's one we need to come type dot destroy self ok the pipes have been destroyed now we need to remove them from the list so in here if we try to remove it directly whilst inside a for each we're going to have an error so instead of a for each let's do a simple for okay we have a symbol for instead so now in here after we destroyed the pipe we remove the pipe from the list and then since we are modifying the list we need to make sure we don't skip an index so we need to do I if we didn't then we would skip the index whenever we destroy a pipe alright so all this code should be working we're handling our movement same as previously going through every single pipe we moved them then we check the x position if it's past a certain value so if it's offscreen then we destroy the pipe and remove it from the list let's see ok here we are let's look at the scene view and if there's the pipe there's the camera and the destroyed position is somewhere in here so let's wait to see it go going to the left when it gets there yep there you go the pipe has been correctly destroyed right great so we have our pipes being correctly cleaned up alright so now that we have pipe movement and cleanup work it's finally time to handle level generation so to generate their own level what we need to do is constantly spawn pipes we want them to be generated but not come random we want a level to start off easy and become increasingly more difficult so that means fewer pipes that start with larger gaps and as it goes forward more pipes with smaller gaps we already have the pipes being automatically removed so all we really need to think about is how to spawn them so here in the code the first thing we're going to need is some timer between each pipe spawn so over here and let's define our timer so a private float let's call this the pipe spawn timer then we also need a maximum so a proud float for the pipe spawn time remarks now here on awaking let's set the timer max let's put it at 0.5 so spawn a pipe every half a second now on our update let's call another function to handle spawning okay we have a function tamil are spawning now in here the first thing we do is decrease the timer so the pipe spawn timer we decrease it by time dump time then we check if it's under zero it's in there zero then it's time to spawn another pipe so the first thing we do is reset the timer so we increase it by the max and in here let's spawn a pipe so we're going to use the same function to create gap pipes and I mean here we need the gap line in the gap size we'll deal with that later but more importantly we need the x position so we need to know where we're going to spawn it so for the X we can use pretty much the opposite of what we did to destroy so in here let's make another constant and the pipe spawn x position and set of minus 100 so beyond plus 100 okay so that I need here when you create the pipes we use that okay so here we are creating a pipe gap right on the edge on the right side so let's test and see if we have a pipe being spawned every half a second okay here we are and yep exactly pipes are being spawned every half a second obviously they are moving too slow and spawning too fast but yep the code is working every pipe is being spawned with the exact correct gap and moving to the left so let's look at the scene in order to make sure they're being destroyed there you go they're being spawned out there at the edge of the screen and yep they get destroyed in there okay great so our basic spawning is working now we just need to modify the valleys for the speed the spawn timer and also the only the gap height and Suns so first the speed and let's increase it and also increase the spawn time and okay that is looking quite a bit more appropriate we have the primes being spawned at a nice decent rate alright good so here we have our pipes being spawned now let's handle the height and the gap size now for the height we're going to essentially just randomize it and for the gap size we're going to tighten it over time so let's make a feel for that a private float for the gap size this is the gap size that we're going to use the spawn so let's start off at 50 so it's art it is extremely wide and now in here when we are spawning our pipe let's use that capsize and now we need to know what the height should be now in here we cannot randomize fix values since it's going to be dependent on the gap size so let's make a float for the mean height or D come elated and the min height won't be the gap size multiplied by 0.5 so the minimum height that we can spawn is gonna be half the gap size so right at the bottom so in this case with a gap of 50 the absolute minimum height will be 25 however even with that the gap will essentially touch the floor so let's add a mandatory minimum so a float for the height edge limit and let's say 10 F so it's not right at the bottom and for the height to come like the height was this nice limit so this should be a good minimum and now for the maximum first we start off the maximum at the total height over here we have the camera orthographic size and we know that the height of the camera is double the orthographic so a float for the total height will be the orthographic size x Qi so for our max height we start off at a total height and then we take away half the gap size so gap size times 0.5 and we also take away the height edge limit all right let you do it so we now have a nice minimum and maximum so for the height we just do a random range between the min height and the max height all right that should do it so let's see if our pipes now have a gap of 50 at random Heights okay okay here we are in yep as you can see they are moving down moving up so the height is random and they are not touching exactly on the edges so right now you can see the game is already quite nicely playable all right so the pipes are being spawned correctly the height is correctly calculated now all that's left to do is actually calculate a tightening gap so first just test out to make sure the code works with a small gaps and let's say 20 any of there we go there's one there one there and yep the height is indeed changing and 20 is already quite a bit difficult as you see I died and you know 20 is already very tough right great so everything is being correctly generated nice so now that we have our nice gap filled we can easily use it to increase our difficulty over time so at STARTTLS we start off at 50 nice and easy and now to increase our difficulty let's keep things nice and clean so define an informal T so in here if Tony Kanaan for need difficulty we're going to have easi then medium hard and finally impossible okay now down here let's make a function to get the current difficulty so we're going to return the difficulty now we need a way to keep track of when we should increase the difficulty so let's do it based on the number of pipes spawned so in here let's have a present for the pipes spawned and down here when we have the create gap pipes in here let's increase the pipe spawned and on the gap deferral let's just do some very simple ifs okay so you have a function that returns the current difficulty based on some preset values now let's make a function to actually set the difficulty values so a private void for our set difficulty this what is going to set all the various fields related to difficulty right now the only film we're using is for the gap size so uneasy we start off with the gap size of 50 okay so in here we are shrinking the gap size every time we increase our difficulty now over here on our awake instead of setting the gap size originally we call set difficulty and we start off at easy all right and then finally when we actually spawn our pipes so here we are we are increasing the file spawn and let's update our difficulty so set difficulty and get the different so whenever we spawn a pipe we update the difficulty right so that's pretty much it the more pipes respond the harder the difficulty and the smaller the gap so let's see if that happens every 10 pipes we are increasing let's see okay here we are and let's see and they're all starting off nice and small nice and easy and now when we get to number 10 the pipe gap should become smaller and there you go this one is quite a bit smaller than the previous one and now it keeps going and yep now it's definitely getting harder and yep all of them are quite a bit more difficulty quite a bit small gaps and there you go that one is already extremely small and in here I couldn't make it alright great so the difficulty is working based on the gaps but we can also modify the spawn timer so you could actually start spawning over here on the 50 okay so here we have our values and we need to do is tweak these values to get the game easier or harder so just like that we have our difficulty increasing over time so here is the game so far in yep it doesn't look quite nice however one issue is that all of that is just happening in the background right now there is no way to actually visualize any progress over here I have no idea how many times I have passed so we're going to deal with that by adding a simple UI element don't let us know how many pipes we have passed we're going to have a score window so let's begin by making it over here in the editor now in order to make a score window we need to setup the UI with a canvas so let's go here to our game handler game object in order to keep things nice and organized and in here let's make a new empty game object let's call this TTY now you can leave it in any position you want but personally I don't like to put it to the side so there it is so you have the main scene here and the UI in here just easier to keep track of things now inside the UI let's create a new canvas so we're here to UI a new canvas here is the canvas and as you can see it automatically create the event system let's keep things organized and drag it in there okay now inside the canvas let's create a UI images show we can see it there you go so here's our UI being displayed now let's set up our cannabis in here instead of overlay let's select camera this allows you to assign a camera that won't display the UI which is what we're going to do so in here we create a new camera let's call this the UI camera so this is the camera that is going to display our UI so here in the canvas just drag our camera onto it and just like that okay this is now our UI and as you can see in the game we can still see it okay so these are any camera settings very similar just don't clear orthographic and with the size of a hundred and here on the canvas for skill mode let's go with scale with screen size which resize UI elements to fit the screen and resolution and in here the reference resolution is the main resolution for your UI so if the current resolution is smaller don't be scaled down and bigger don't be scale up so this depends on your platform but for example for desktop games I'd like to put it in 720p so very simple 1280 by 720 then let's fully match by height which means that elements won't be resized if the height of our resolution changes so here's the game window and as you can see the square has that size and if I shift it up so as you can see it scales with the vertical size however if I change resolution to change the horizontal size as you can see the square does not change so this is what it means to match only just with the height and the reference pixels leave it at a hundred all right so this is our very simple UI correctly setup now inside our canvas where we can put any UI objects so let's make a new game object this will be our score window let's anchor our score to the right side and inside let's put up a UI text for the current score called as the score text alright here's our nice text object to any of there you go there's in our screen on the court okay now let's do the script in order to update our text object so in here make a new script this won't be our score window drag it on to the game object now in here let's first go into our prayers Boyd awake in order to grab the reference to the text field so we have our reference and now we need to deal with the score now for the score let's go into our level and find a way to return the pipe spawned so we make a public int get pipes spawn and we simply return the pipe spawn however in order to access this function we need to access the in level instance so let's make a static function to return the instance so up here so we have a static instance and we set it on our awake and then we have a static function we return the instance and now we can go back in the score window make our private void update and in here we set the score text text go into the in level class get the instance and get the pipe spawn alright so that's it we now have our nice score window asking the level for how many pipes have been spawned so let's see this working any of there it is one pipes one two pipes three four and so on all right great so as you can see the counter is correctly increasing as it's so posted right now one obvious issue we have is that the score is meant to increase when the bird passes a pipe and not when the pipe is spun so let's do that let's go to where the pipes are being spawned over here in the unlevel now we don't want to use the pipe spawned count but rather we want the score to increase based on when the pipes move so when the pipe gets passed the bird now in this case we are moving the pipes and not the bird so we need to test if the pipe is to the right of the bird then we move the pipe and then we test if it's to the left of the bird so before we do our movement let's define a bowl for is to the right of burned and this won't be if the pipe dot get position if the position into the pipe is to the right of the bird position it's not for the burn let's do another the bird is on zero okay then here we are to write the bird if the pipe X is to the right of the vertex position then we move the pipe then we test if the bird was to the right and is no longer to the right so less than or equal to the x position so we're here the pipe was to the right of the bird and now it no longer is so it's in here that we have successfully passed me bird so we have the logic for detecting it now we just need to handle the score so let's go up here make a private end for the pipes pass count and all we do is increase it in here five pass the bird so we increase it all right now we need a function to return this value so the same thing we did previously so here we have a function to get that value and now in the score window instead of getting the previous one we get the pipes passed all right that should do it let's test okay so here we are sir off at zero and when we pass this and yep the score increased and it looks nice although as you can see we have a nice error it's increasing by two every single time so 12 14 16 and so on the reason is because we have two pipes so we are passing two pipes every time we pass one gap so we want to calculate the gaps and not necessarily the pipes let's sort that so this in here is that we have two pipes per gap so one way we can solve this is very similarly doing the score count on a specific type of pipe either the top pipe or the bottom pile so that means that we need the pipe to know if it's a top or a bottom so in here on the gray pipe function we create either on the bottom or on the top so when we create a pipe let's pass in the same ball create bottom so in here a private ball for the crepe bottom and we receive it okay so now we know if this pipe is a bottom or a top now here let's just make a ball to return that and let's rename this to a more appropriate name okay so now we can use this function in order to test our scoring logic so I'm doing here we test if it's the right amount and left and the pipe is a bottom pipe if it is then we test for the score if not then we ignore it right so now we should have fixed our problem of increasing the score by two let's see okay here we are let's pass this one and if there you go increased by one two three and so on okay great so our code is working and everything is increasing exactly as intended all right so our logic is working and the scoring is working it's not with the basic sword let's see on with making a game over scenario right now over here when the bird hits a pipe we get a nice pump up but nothing actually happens everything keeps moving and there's no game over screen I don't so we are detecting the hits but not doing anything first let's stop the bird when we detect bird death so let's go to our bird class so we are taking birth death over here on our trigger enter now the bird is being controlled using physics so we can simply stop them by just going into the bird rigidbody2d in order to set the body type to body type dot static so this means exactly what it says the bird won't be completely static so let's see okay here we are now let's hit a pipe and see any of there you go hit the pipe and the bird no longer moves the bird has come only static and I click and nothing happens okay great now obviously as you can see the pipes are still being spawned and moving so let's stop that now in order to stop it we need over here the unlevel class to know when the bird has died so in order to communicate that to the level class let's go into the bird to add an event so we're going to have a public event and call it Ondine so the burden on fire this event when he dies so let's go in here here we have the birth death so we simply trigger the event all right that's it for firing our event now in order to subscribe to the event as you can see this is not static so we need an instance of our birth class so let's make a static instance the same we did for the level so you have a static instance that we set on a week then we have a function to get a static instance and now we can go into our level class and over here on our start we can go into the bird get the instance and subscribe to the on bird died event so here we have the function to test when the burden has died now let's just make sure that this code is working so instead of putting the popup in here let's spawn the popup on the unlevel make sure that this code is running so let's see the pop up when we hit the pipe and if there you go there's a nice pop up in the bar top okay great so we have this event being correctly fired now that we have that that means we know in our level class when the bird has died so we can use that to stop moving and spawning the pipes so let's go up here and keep things nice and clean so we make a private inhome for the current state and the possible states are either plain or the bird is dead and also store the current state now if we're here on a way preset is the start so starting state lights are off as plain then here on our update we're only going to have a movement and spawning if the current state is state that plane so if it's not playing we do nothing and finally in here when we have the bird died we simply modify the state and set it to state that bird death alright that should do it so we're here on the bird class we are not looking for the physics so we capture the trigger enter when we hit a Collider when we do we fire this event that the unlevel class is listening on this event which fires this function which then modify the state and if the state is per dead then of this movement then spawning no longer runs so let's see if everything stops the second we hit a pipe okay here we are still moving let's hit that pipe any of there you go everything stopped the bird stopped and level stopped the pipe stopped everything started awesome so we have pretty much a fully functioning game over state the bird and the pipes all stop now one of the main features of flappy bird is a quick restart and the way we built our game actually makes that extremely simple all we need to do is reload this current scene and we can easily start over so we're here when the bird has died let's just restart automatically in order to restart with a small delay let's use the function timer from the code monkey Tony's this lets is easily trigger an action after some time so we're going to trigger an action after one second and that action is going to be extremely simple all we need to do is reload the current scene all right that should do it so when the bird dies this code runs which creates a function timer which won't trigger this action after one second which will reload the current scene so let's try it okay move forward now let's hit the top pipe and there you go everything's stopped and after one second there you go everything starts over so hit this one and yep we got a nice restart and let's increase the score count so now you got a score of 1 to hit this one and they're going after one second reloads and everything is back to normal right awesome so far everything is working very nicely however when we start the game it's quite daring to start immediately now let's make it so that the game doesn't start until the player does a first jump that means we need to stop spawning pipes and moving the bird so first let's do it on a bird over here to stop the movement we can do the same thing that we did over here on the death so we set the rigidbody to be static so here on the weight that's what we said now let's also store a state in our bird the possible states are waiting to start then we have plain and dead okay now on our update we do a switch on the current state all right so case we are playing we do the same as previously and if we are waiting to start we also do the same thing so we listen to the same input we cause a jump and then we modify the state to be state at play and finally we change the rigidbody back into being dynamic okay so that you do it show the bird should start off as static then when we press spacebar for the first time we go into playing everything goes back to dynamic and everything continues so let's see if the bird waits for our input okay here we are and the bird is indeed stopped and when I press there you go everything starts and now everything's work normally gravity and so on okay right now as he saw the pipes were still moving while the bird was stopped so let's sort that over here on the eleven class let's add another state so first we count waiting to start now let's use the same pattern with it for the birthdeath so on the bird we make an event let's call this on started playing and we fire the event in here okay so we have this event and now back into the unlevel over here and let's do the same thing go into the word get the instance and subscribe to the on star plane when we start playing only to do is set the current state to be state that plane and on awake instead of starting on playing we start on waiting to start and that's it let's test okay here we are and nothing is moving score zero birds not moving no pipes nothing awesome now I click and there you go and everything starts exactly as in tennis so the bird is now moving pipes are spawning moving and so on now let's hit a pipe and after one second reloads to start and again nothing's moving click and we can start playing all over again and yep awesome great now let's replace our automatic reset with a more appropriate game over window so for that here in the editor let's make a new game object this will be the game over window okay so we have a very simple game over window we just have a background some text and the score text now let's make a button to retry so for that first we make a game object let's call this the retry button then inside we make an image for the background and then also some text say we try okay so now in the button game object we can add the button UI component this is from the code monkey Tonys it save nice and simple component that makes button handling very easy so in here for example we can easily set the button to have a mouseover color so when we pass the mouse over the button the color won't change right so that's it for the editor now let's make a script to handle it so a new csharp script this will be our game over window drag it onto the window now in here the same we did with the score we know let's grab a reference to our text object okay we have the text object now let's also set the button click action so here we have the action that happens when I click on the button let's do the same thing for reloading the scene so over here we have this code we are loading the current scene that some we're going to do and get rid of this from here and just put it in here alright that's it the button should be working now for the score text let's listen to the bird ID event so a private to its start and on cert we go into the bird get instance and subscribe to the on that event when the bird dies this function will be calmed so we have take a score text and text won't be the same thing that we did here on the open window so we get the instance get the fives past count all right that should be updating the text now one final thing is we only want this window to show when the bird actually dies so it's made two simple functions so we have a show and hide function the assembly set the game object to either active or inactive so that it's visible or invisible now on a wake we start off as hidden so we hide it and when we get the bird that we show it alright that should do it the window starts off hidden it shows when the bird dies it updates see text and only we try button we are reloading the current scene so let's see all of that in action okay so here we are and everything starts off stopped let's start jumping and if there you so far so good we have five swings pond and the bird moving now let's hit a pipe and if we're dead and there's the window popping up and indeed we have a score for score four and over here we have our nice button as you can see already has a very nice mouse over effect and when we click on it there you go we are back at the beginning and the scene reloads alright awesome okay so we have pretty much on the main design of our game working we start off with the bird and the completely stopped once we do our first jump everything starts the bird starts jumping the pipe starts bombing over time the pipes get harder as the gaps grow smaller and smaller and finally when I hit a pipe there you go we have a nice game over a window showing our score and having a we try button so we can click and start over okay so everything is great so far we have the basic design working now let's keep going first let's see only the unloading so right now everything works but in this slightly Genki way so when I hit and I click retry it immediately loads just the target seen since the seen loads pre fast this isn't really an issue but it would still be better to have a proper loading screen also our code in here on the game over window we are directly interfacing with the scene manager and using a string to load the target scene which is also not ideal so let's make a proper loading class so we're here in our project files let's make an easy sharp script this will be our loader let's make this a static class to make sure that we don't instantiate it right here let's start off with a public static void load function and now in here instead of receiving a string for the scene that we want load and let's make it nice and new so in here a public you noon call it scene and in here we can fill it up with all our scenes so right now we just have the game scene and on the load we receive a scene as a parameter now for the moment let's do the same thing we did in here so use the scene manager to load scene and instead of a string we use our scene in them okay great this code is now much more clean and now back in the game over window in here instead of that code interfacing directly with the scene manager we now go into the unloaded class in written load and then we pass in a target team okay so everything should still be working exactly the same but the code is now much cleaner let's see okay here we are let's move and die okay there's a game over window hit retry and there you go everything some words say that I'm home the same clean with trolley and everything loads back up okay awesome so now let's deal with the potential issue of our loading screen if they seem to have longer term load then we would essentially have a freeze frame while the scene gets loaded which would make the game unresponsive which is never a good thing so we should really have a simple loading scene so we're here on our scene so let's create a new scene this will be the unloading scene and then here extremely simple we just make a new UI canvas let's add a new UI text just saying loading a method we have an extremely simple loading team so what we want is to first move it into this scene and then we'll load our target scene that way the player knows that the game is loading instead of thinking it might have crashed since the screen is no longer frozen and in here since we made a proper unloader class we don't need to deal with anything over here on the email window we still count the unloader and now in here let's handle our loading scene so the first we have a scene into our enemy so we have the unloading scene and in here first we do see manager can load the scene when the loading scene and then we'll know the target scene however if we do it like this there won't be an issue so let's see it in order to load very scenes let's go into our build settings and in here make sure we have the unloading scene into our scenes in our bill so here we are again let's try dying and seeing now let's see if we see our moving scene and no we did not see it the issue in here is that we're unloading first the unloading scene and then the target scene exactly one segment after the other if there is no update between them then the screen won't actually refresh so we need to make sure that we run an update before we unload our target scene so we can do that with a very simple script let's make a new csharp script this won't be our another update since it won't wait for the first update and here just add it to an empty game object okay let's see the code now in here we just do on our private void update in here and let's just call a function on loader to let it know that we have fired an update and we can unload the target scene so we go into the loader and confection let's say load target scene okay let's make this function over here all we need to do is to store our targeting and in here we load our target team all right that should do it so we should now be able to see the loading scene show up before our target scene in here we're calling load we first moved in loading scene then that loads the unloading scene which runs this script and on the first update it will run this code and this code won't load the final target scene so we should now be able to see it in loading scene showing up okay here we are let's move now let's hit a pipe and the after we honor hit retry any up there you go there was the unloading scene right there now since the final scene load so quickly you can't really see the benefits of this but just imagine you had a lot more stuff into our game here and the game scene would take longer to load previously it would be stuck showing the game over window and being completely unresponsive whereas now it would show the unloading scene and some of the final scene was ready so with our load that are nice and working let's make a main menu we want a very simple main menu where we can just start the game or quit playing now in order to create the main menu we could go in here and create a new scene then we would set up the camera and the UI all over again or let's simply go in here and our game scene so press controld in order to duplicate let's say this is the main menu all right so now in here and let's get rid of all the things related to our game scene and leave only the main camera and UI setup okay so here is our set up scene now in the canvas let's make our main menu so we make a new game object what's going on this the main menu let's stretch it to occupy everything now inside we're going to have just two buttons when to play and when to quit so let's make the buttons the example like we did with the game over retry button so we can actually go there in order to grab it so here's the retry button just copy it and paste it in here okay so here we have our very basic main menu with two very simple buttons now let's make a script to control this so new script for our main menu window and just right in there okay now in here let's go into our price going away to grab a reference to the play button okay so in here on the click function for the play all we need to do is load our game scene so we're going to do the exact same thing with it on the game over window so just load the game scene so copy that yep that's it so the only button should be working again back here in the game we have to remember to go into our build settings in order to add our open scene there you go so we now have our three scenes in our build okay and if we start okay here it is there's a play button click it any up there you go we are now playing okay nice now for the quit button over here in order to quit the desktop all we need to do is call application quit now we can't actually test this right now since if we run and over here we click on the quit button nothing actually happens since this line doesn't run in the editor but if we build our executable it would actually quit our application so just like that we have a fully functioning main menu we start off in here hit play and we are back to playing and we can play and now we can die and go back and retry and nice okay great so now that this is working on the on the GAMEOVER window let's add another button to go back to the main menu so let's go into the game scene over here duplicate the retry button come with the main menu button okay that's our button now in the game over in the code over here we have the code for the retry button and now the code for the main menu button and all we need to do is load our main menu scene so in order to load it all we need to do is add it into our scene and so the main menu and that's it we can now easily load into the main menu let's try okay here we are on the main menu hit play and there you go we are now playing now hit a pipe there's the game over window with a retry and main menu click on main menu and yup we are back on the main menu so we can now quit or play yep okay awesome so we can now start at the main menu begin playing go back to the main menu and quit the game so far our game is completely muted so let's add some nice sounds over here in the project files have had the sounds folder with a bunch of different sounds so one for the party on some button sounds blues and a Scorza the sound effects will create a chip town which is a great free tool to create simple sounds that is an expanded version of another excellent tool which was SFX R so let's create a class to help us play our sounds in here a new C sharp script this will be our sound manager this class won't be responsible for playing all of our sounds so for starters let's make it static so we don't accidentally Senshi ate it now here let's first make a very simple function to play a simple sound so a public static void play sound in here in order to play our sound let's first create a game object we're going to create it with a audio source component now in order to play something we can go into audio source and call play one shot this takes an audio clip and place it once so that means we need a reference for our audio clip so to grab our reference let's add it into our game assets class in here let's just add a public audio clip and let's start with a bird jump okay now back in the same manner let's start playing this one so going to the game assets get the instance and play our bird job alright so this is very simple now to play our song let's go into the bird class in here let's go into our bird jump so here is our jump function and in here we can actually see some manager to play our sound okay that should do it for testing let's try here in the editor and let's go into our game assets and there's our field for our audio clip and let's drag the bird jump okay let's see here we are and when I click yep there you go we got a nice jump sound every time the bird jumps okay great so we can play a simple sound now let's change our code in order to be able to play different sounds so over here on the Sound Manager let's create a new to keep track of all our possible sounds okay we have our sounds and now in this function we receive a sound and now all we need to know is the audio clip that matches this sound so let's go into the game assets in here let's create a class to hold both an audio clip and a sound so a public class let's call it sound audio clip in here we have a public sound manager that sound and a public audio clip I do now in order to see this class in the editor we need to have the serum Liza Vaughn attribute okay so now instead of having references to audio clips we are going to have an array of sound audio clip so now we can go see how this looks in the editor and he appears our game assets with our sound audio clip array so in here and let's fill in all of these values as you can see each element has a sound so that one for the bird Jam when we drag the audio clip and the same thing for all the others okay we have filmed our array with their matching sound a noon and our audio clip now over here what we need to do is identify the audio clip that matches this sound so let's make a function to do just that okay here's our simple function we just do a very simple for each so I go through the entire array see if the sound matches the sound that we're looking for if so return the other clip and here we are supposed to always be able to match a sound with an audio clip in case that doesn't happen let's do a analog error to say that sound was not found and we returned no okay so now we need to do is go up here in order to get the audio clip for this sound okay so this function should be working now let's add our various sound so for Sony burn here on the words on the play sound we pass in the sound of bird jump when the bird dies and let's pass in the loose sound and over here on the unlevel when we increase our current score in here we just play the sound for the score okay our three sounds should now be playable let's see okay here we are everything is quiet now click and you have to jump sound works now let's see the score yep there's a score one two three four okay great now let's see the game over sound yep there you go our nice game over sound they're gonna hit retry again everything song jumps and that's right and game over okay awesome alright so as you can see we have all of our sounds correctly working now let's add the button sounds in order to another button sounds we're going to use something really cool an extension method so let's go into the sound manager and in here we're going to make a function to add button sounds which won't be an extension method of the button UI class so here a public static void let's call it add button sounds and now in order to make this an extension method we add this button UI prior but why the this keyword means that this is an extension method so we're essentially adding the Add button sounds method to the button ey class without actually modifying the code on the button UI class this is a great way for adding extra functionality to a previously written class so in order to use this function we can go for example on the GAMEOVER window and here we have both our buttons so we can simply access the button ey and call Add button sounds as you can see it says that it is an extension method so even though we're calling this method which appears to be called on the button UI this method actually exists in here so now here we can add these sounds to this button okay so we add on to this button UI a function on the mouse over to play the button over and on the mouse click to play the button click alright so let's test and see if our game over window now has sounds ok here we are now let's died and see the game over window yep there you go now let's pass the mouse yep there you go there's our nice sound not this one yep we are or two nice sounds so you can point and there you go a nice button sound now let's add the sound to these ones as well all we need is here on the main menu window and call Add button sounds and everything should be working here we are in the main menu and if we pass the mouse and we have a panel issue the issue here is because the game assets object does not exist in the main menu scene so we're trying to access a reference but there's no reference to be accessed so in solution to this problem is to go in here grab the game assets and making a prefab and I'll back in the main menu and we drag an instance of that same prefab now if we try we should be able to see that we have our references in here mighty pass if there you go that all the buttons work great okay awesome so we have added button sounds as well as fixed a simple problem alright so we are valid sound to our game we created the some integer class to be responsible for all sounds and the other scripts called the play sound to play the sounds when needed so now that we have this working let's deal with saving a high score now we are already calculating the score and displaying it in the UI so let's begin by seeing how we can store some data in order to do that we're going to use player preps this is the simplest way to store persistent data in unity so we're going to use player preps dot set int in order to store the highest score so in here let's test it out we store using a key of high score and let's set a score of 10 so just like this we are setting the play preps high score keen so we're then going to player preps call save and then let's see if the score was correctly saved so we do a debug log go into the player preps and get the int that is stored with the key high score all right so we should be able to see the log same 10 any of here in the console as you can see it doesn't need say 10 so we are correctly saving and loading our high score we can test by taking away this and it won't still say 10 yep there you go still says 10 so we now have persistent that so with this let's add the high score to the score window so here in the corner we have the current score and let's put above it our high score so let's go into the score window we're going to have another text game let's make it in the editor here is the score text let's just duplicate and make the high score text and put it above it just so we can see it okay now let's update it in the code so in here and let's set the high score text on our private voyage start so we set the high score text text and now in here we don't want to deal with the point press directly from our window class so let's make another class that won't deal with this course so over here make a new script this is only our score class in here let's make a function to return the high score so a public static int get high score and here on we're going to do is the same thing with it in here so point predicate end of our high score alright that's it now let's also make this class static to keep things nice and clean ok and now we can go back into our score window then here we can set the high score text to be on these four and we get the high score alright so we're asking the skorca let's return the high score it's only T and we should be able to see the text correctly on display any of there it is a high score which is currently stored as ten right so far so good now let's make a function to set a new high score so on the score class let's make a public static we're going to call it try set new high score and to return a boolean so here we receive a name for the score and essentially this is a function that we're going to call when the bird dies so we get this called with whatever score we have and here we update the high score if it is a new high score so first we get the current high score then we test if this score is higher than the previous one then we have a new high score so with the new one we're going to save it exactly as we did in here we set the end the high score is our new high score and then we return true since we did set a new high score and if not we'll return false which means we did not set any high school all right so far so good now let's go on the game Handler and here let's try calling the function to update the high score to 20 so join to the score and we try seven your high score on let's say 20 ok let's play and see if the score window correctly updated and if they're dizzy score win now says we have a high score of 20 okay so we can read the current high score and save a new one also just for testing let's go in the score and make a function to reset our high score so we can easily test all we do is set the high score back in to zero okay and now let's see where we're going to call our try set new high score the answer is we want to do it when the bird dies so let's subscribe to that event over here now here to subscribe to that event we could use the same pattern we did on the game over window where we have a monobehaviour and on start we subscribe to that event hovering here in order to keep our score class static let's go with a different approach all we need this to I have some sort of start function that we call from somewhere so for example we can have a public static void start and we call this function over here for example on the game hammer we call score dot start and now in here we can subscribe to the bird event so this is just a different approach and we achieve the exact same results pretty much as in here except we don't have to attach our score to any game object using a mana behavior so just a different pattern and here we have the function that is called when the bird dies so we can simply try to set the new high score and now we need the current score so we asked the unlevel for the get our pipes passed count and you try to set it okay so when the bird dies this function is fired which tries to set a new high score so this should be working now the current high score that we have saved is 20 so let's call reset before we do anything so on start we call reset and then we can play so here we are again with the high score of zero now let's start playing and beat the high score so all we need to do is go past one two now let's die and there yo game over we got a three now let's hit retry and we should be able to see high score three any of there it is high score of three now if we just hit one and we die without it zero or we try and yep sunsets three now let's try beating our high score of three okay here we are with the score six which is higher than three let's hit retry and there we go we have a new high score okay awesome so we have pretty much everything working now for one last thing let's set the high score indicator in the game over window so here in the afternoon let's go into the game over window so you have our high score text now let's do the code here on the game over window when the bird dies we show we updated text now let's also get a reference to the high score text so here on let's see if we have beat the new high score so here we're going to either show the current high score or say congratulatory message saying we have a new high score so let's test if the score in this run is a new high score so we can go into the unlevel get the product passed count if this one is bigger than the score dot get the high score if so then we have a new high score so let's set the high score text so it says new high score and if not if not then we just print the corn high score alright let you do it okay here we are let's try dying with just zero so hit this pipe right away there you go zero and it says high score six alright great now let's try to beat our high score so let's go past six pipes okay we have passed our current high score and we die and there you go we have our message saying new high score okay so just like that our scoring system is fully working all right so our game is pretty much completely done we start off with a bird completely sound then I click and the bird starts jumping and everything starts happening the pipes are coming we can cause the birth to jump and get through the pipes over time the pipes will come harder and the gaps become smaller as you can see when I pass the pipe there is the score increasing just like that yep exactly and now when you hit a pipe we have a nice game over window here we can see the score we got in this run as well as the current saved high score then we can quickly hit retry and here we are back again waiting for input so we can play again and over here and if we die again here the other button we have is to go back to the main menu here we are in the simple main menu where we can play or quit alright so the game is completely and fully working now it's time to polish up everything by adding the tiny details didn't make a huge difference first let's fix one quite serious issue which is there's currently no ground so in here if I fall down there you go nothing happens I'm still supposedly alive and the score is increasing forever so let's add a ground that moves along with the pipes you okay so here's our ground it works very much like the pipes so it gets fun moves to the left gets this pond and it's constantly spawning new ones so it goes on for infinity and if we stop if there you go we now can collide with the floor and we can no longer fall towards infinity so here in the scene view you can see how they are being spawn there you go moving to the left and after a while the one on the left gets pushed to the right side and there you go and everything will look seamless and it never ends okay great okay now let's add some cloud sprite you you you you okay so here we have a bunch of cloud sprites they are moving with a slower rate so they look like a nice parallax effect you you you you you you you you okay so we now have had a nice message before we start as soon as we start the message Heights and the high score shows up and also add the nice animation to the GAMEOVER window so there you go when it pops up it gets nicely animated so go and yep pops up nice and like that okay awesome you and now we have the bird animated flapping its wings and when we click it now points up and then starts pointing down based on its velocity all right that's another nice effect okay so here is our final polished game we start off with everything completely stop waiting for our input we can play the game with the keyboard the mouse or even with touch as soon as we press our button the bird starts flying an 11 starts being generated the pipes start coming with gaps in between them we have nice sound effects for the bird jump and every time we pass a pipe the score increases over time as more pipes get spawned the game becomes more difficult to the gaps getting smaller if we hit a pipe the bird dies and we have a nice game over window we are soaring a high score and the current score and now in here we can press retry in order to very quickly try over there you go and now in here if we die again we can see in the game of window we can go back into the main menu click it and we go to a nice very simple main menu or we can either play again or quit the game everything is built correctly so the game works on both desktop and mobile the game is also nicely polished as you can see the bird has a nice animation flapping its wings it rotates up as we jump and rotates down as it starts it fall down we have some parallax clouds at the top and a moving ground at the bottom and the a mover window as you saw has a nice animation we can hit right try and keep trying to beat our high score so in this video we went through the complete creation of flappy bird in unity starting completely from scratch I hope you found along and learn how to make this simple yet interesting game this was a massive video that took a lot of effort to make so let me know in the comments if you like this style of content and would like to see more as always you can download the completed project files in utilities from unity code monkey dotcom if you liked the video subscribe the channel for more ent tutorials post any questions you have in the cart then I'll do my best instrument all right see you next time