hey everybody today I need to explain triggers when an event happens a trigger does something I know that sounds very generic for example when we insert update or delete a record we can use a trigger to check data handle errors or audit tables we can do a plethora of things here's an example I have a table of employees we have an hourly pay column maybe I would like a salary column whenever we add an employee or update our hourly pay the employee's salary will be changed automatically with the trigger before creating a trigger let's update our employees table We'll add a salary column alter table employees add column salary the data type will be decimal 10 digits Precision of two we will place this column after the hourly pay column then select all from our employees table let's see what we have there we are there's our salary column let's update our employees table set our salary column equal to the hourly pay times to calculate an employee's salary using an hourly pay Sheldon Plankton for example take the hourly pay ten dollars per hour there's typically 40 hours in a work week then 52 weeks in a year Plankton would have a salary of twenty thousand eight hundred dollars so a shortcut you could just take the hourly pay times 2080. there are 2080 work hours in a typical year so take the hourly pay times 2080. then we will select all from employees there is everybody's salary currently whenever we update an employee's hourly pay I would like to also update the salary automatically with the trigger I don't want to have to calculate every employee's salary manually you know using a calculator like I just did we're going to create a trigger create trigger then we need a name for this trigger before we update the hourly pay we're going to do something I will name this trigger before hourly pay update we'll use either the keyword before or after do you want to do something before or after I would like to do something before before what before an insert before delete before an update before an update in this case on our table employees then add this line for each row we may be working with more than one row using a trigger so that's why we're including this line This trigger can involve one or more rows now what are we going to do before we update an employee's hourly pay let's set the salary equal to the hourly pay times 2080 because there's 2080 work hours in a typical year okay there's one more thing I'm going to add let's prefix salary and hourly pay with this new keyword new DOT salary new DOT hourly pay MySQL doesn't know if we're referring to the old salary and the old hourly pay we're telling MySQL we're calculating a new salary use the new hourly pay when that's changed in place of the old one okay let's take a look let's execute this statement our trigger has been created in your schemas window to find any triggers go to tables then find that table where we applied the trigger employees then triggers I probably need to refresh this there it is before hourly pay update otherwise you can type show triggers and here is our trigger here's the trigger name event update the table the statement and the timing let's select all from employees Mr Krabs is going to give himself an hourly pay raise because he's greedy let's update our employees table set the hourly pay equal to fifty dollars per hour where our employee ID equals one so Mr crab's salary is about fifty three thousand dollars per year before we update it we will change the salary of this employee from fifty three thousand dollars to over six figures 104 000 that change happened automatically with the trigger before updating the employee's hourly pay we calculated a new salary automatically let's make another change let's increase every employee's hourly pay by one dollar per hour Mr Krabs is now feeling generous update employees we will set the hourly pay equal to whatever the hourly pay currently is plus one we will apply this for every employee we don't need a where clause there everybody is now making one more dollar per hour and the salaries reflect that let's create a new trigger we will calculate a salary whenever we insert a new employee more specifically whenever we insert a new hourly pay right now we have a trigger that only kicks in when we update an hourly pay let's delete plankton Plankton got fired delete from employees where employee ID equals six select all from employees their Plankton is now gone let's create a trigger create trigger before hourly pay insert are we doing something after or before we're doing something before an event before are we updating inserting or deleting we are inserting before we insert a new record on our table employees for each row let's set the new salary equal to the new hourly pay times 2080. here is our new trigger let's take a look at our employees table select all from employees let's insert a new employee insert into employees values I'm just going to follow these columns employee ID 6. first name is Sheldon last name plankton hourly pay is ten dollars per hour for the salary I'm going to set this to null our trigger will kick in and set that position janitor higher date 2023 January 7th supervisor idea five let's see if our salary is calculated it was Plankton's hourly pay is ten dollars per hour meaning he has a salary of twenty thousand eight hundred dollars per year I do have a few more examples triggers are something you'll want to master they're really helpful we're going to create a new table this time create table expenses our expenses table will have three columns an expense ID the data type will be int this will be the primary key you could set this column to Auto increment if you want but but that's overkill for this topic I would say I'm going to try and keep it simple expense name the data type is varchar 50 is good I suppose then expense total I will set that to be decimal 10 digits Precision of 2 is fine then let's select everything from our table expenses let's insert some values insert into expenses we have three rows one two three ID of one the expense name is salaries for the value for now I'm going to set that to be zero the second row will be two supplies zero ID of three maybe taxes and zero I will calculate the expense total of my salaries bro update expenses I will set the expense total equal to I'll use a nested query select the sum of salary from employees where our expense name column right here is equal to salaries this is all of these salaries combined from the employees table the total is two hundred fifty four thousand two hundred eighty dollars whenever we delete an employee we will update this value found within another table our expenses table so let's create a trigger create trigger after salary delete are we doing something before or after we're doing something after deleting a salary after delete on employees for each row we will update our expenses table and set the expense total equal to whatever the expense total currently is minus that employee's salary if we're deleting a salary we will refer to that salary as the old salary the net aware Clause where expense name equals salaries okay we have created our trigger let's take a look at our expenses table I'm going to delete Plankton again he's fired delete from employees where employee ID equals six that's plankton then select all from expenses look at that our expense total changed it's now two hundred thirty three thousand dollars let's create a trigger that will update our salaries whenever we insert a new employee create trigger after salary insert we're doing something after this time after an insert on our table employees or each row we will update our expenses table we will set the expense total equal to the expense total plus the employee's new salary new DOT salary where expense name equals salaries let's insert a new employee let's take a look at our expenses table select all from expenses we will insert a new employee insert into employees our values employee ID 6. first name is Sheldon last name plankton hourly pay of ten dollars per hour the salary will be null that will be calculated automatically with the trigger position is janitor higher date 20230107 and a supervisor idea five let's see if this expense total will change which it does when we insert a new employee we're specifically a salary our expense total of salaries will be updated one last example that I promised we're done let's create a trigger that will update this value when we change an employee salary and that will probably be the most complicated one let's create a trigger after salary update we're doing something after we update on our table employees for each row let's update expenses set the expense total equal to the expense total Plus the employee's new salary minus the employee's old salary what's the difference we'll find the difference between the employee's new salary and their old salary add that to the expense total where expense name equals salaries we have created our trigger let's select all from expenses Mr Krabs is going to give himself another pay raise update employees set the hourly pay of Mr Krabs to 100 per hour where employee ID equals one our expense total underneath salaries is now changed it's now 356 200 dollars well all right everybody that's a trigger in simple words when an event happens do something such as when we insert update or delete something from a table a few of the benefits is that you can check data handle errors and audit tables it's a really helpful tool to have and well everybody those are triggers in MySQL