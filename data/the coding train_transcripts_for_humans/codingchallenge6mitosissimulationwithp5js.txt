With timestamps:

00:00 - Welcome to another quick Coding
Rainbow Coding Challenge.
00:04 - I'm going to see how
long it takes to program
00:06 - a mitosis simulation.
00:07 - Now, I should really admit
that this is not really
00:10 - going to be precisely a
simulation of mitosis,
00:13 - which is a complex,
interesting, biological process.
00:17 - I'm actually just going to be
sort of inspired by this idea
00:20 - and make a very, very simple
example of a bunch of bubble
00:23 - shapes floating on the screen,
and as you click on them,
00:26 - they split into two.
00:26 - So those bubble shapes, those
circles, will represent cells.
00:30 - You click on them.
00:30 - Those cells will split into two,
and then you click on those,
00:33 - and those will split.
00:34 - And from there, hopefully, maybe
some of you watching this video
00:37 - will take my example
and be inspired
00:38 - to read about mitosis and
other biological processes
00:41 - and make more complex,
sophisticated, and interesting
00:45 - interactive examples.
00:47 - But I already talked
for 48 seconds.
00:49 - Let's go.
00:50 - I want to see if I can wrap
this up in about 10 minutes.
00:51 - Let's see how that goes.
00:52 - I'm sure, by the end, we'll
find out it was much longer.
00:55 - So I've got an empty JavaScript
file here, and as always--
01:01 - not as always, but
as in a lot of these,
01:03 - I'm using something called P5JS,
which has a setup and a draw.
01:06 - And the main thing that I want
to do is I need a cell object.
01:10 - I need an object on
the screen to represent
01:13 - this idea of a cell.
01:14 - And so a way that I'm going to
do that is with a constructor
01:17 - function, as you've
seen now if you've
01:18 - watched any of these
other coding challenges.
01:21 - And I'm going to do something
a little bit different.
01:26 - I'm going to use a vector object
to store the cell object's
01:30 - position.
01:31 - So createVector is a
function that creates
01:34 - a vector, a vector
being a pairing
01:36 - of components, an x and a y.
01:37 - There's a lot more to vectors.
01:38 - I would encourage you to check
out my Nature of Code videos
01:41 - and tutorials.
01:42 - Oh, no, no, no, no promotional
stuff in these coding
01:44 - challenges, but
if you want more,
01:46 - you can take a look at those.
01:48 - And then I'm also
going to give this--
01:50 - it's going to be very
important for it to have
01:51 - a radius because I'm
going to use the radius
01:54 - when the cell splits, and
it has a radius of 20,
01:57 - the two children cells, so to
speak, will have radii of 10.
02:01 - So I'm going to start
it with a radius of 20,
02:04 - and I'm going to give it--
02:07 - I want them to move
around the screen, whoops,
02:10 - so I'm going to say
this.move equals function.
02:15 - And I'm going to say this.show
equals function, and let's
02:19 - first just show it, ellipse
at this.pos.x, this.pos.y.
02:26 - So pos is the vector.
02:30 - Pos has, built into
it, an x and a y.
02:32 - So when I want to
draw the circle,
02:33 - I want to draw it at
this.pos.x and this.pos.y.
02:37 - this.r, this.r.
02:39 - And I already am
starting to feel
02:40 - like this is enough code
for me to just go and put it
02:44 - in a new separate
file, so I'm going
02:46 - to make a file called
cell.js, and I'm
02:48 - going to paste it in there.
02:49 - And as always, if I make
another JavaScript file
02:52 - that I'm going to use, I
need to go to my HTML file
02:54 - and add that in.
02:56 - So I hope if, you're trying
to program along with me,
02:58 - you're pausing to do
some of this stuff,
03:00 - as I'm doing it kind of quickly.
03:01 - So now, we should be able
to see, at the very least,
03:04 - that I can make a single cell.
03:07 - And I'm going to make a canvas
that's 400 and 400 pixels wide.
03:10 - I'm going to give it a
dark grayish background,
03:13 - and I'm going to say cell
equals new Cell and cell.move,
03:21 - cell.show.
03:25 - So if I refresh this, we
should see-- where's that cell?
03:28 - It's up there in the top left
corner, so this is no good.
03:32 - Clearly, what I
want is for my cell
03:34 - to start somewhere not
the top left corner.
03:36 - What might be useful
right now would
03:38 - be to have it start
at a random location.
03:42 - So when I said createVector
with no arguments,
03:45 - it automatically made a vector
with an x of 0 and a y of 0.
03:47 - Now, I want a vector
with a random width
03:50 - and a random height, giving it
a random position in the window,
03:53 - so you can see, each time
I refresh this sketch,
03:55 - it starts in a new place.
03:56 - And I am calling a
function called move,
03:58 - but it's not moving anywhere.
03:59 - Why is it not moving anywhere?
04:01 - Because if I look at my
code, I didn't write anything
04:03 - in the move function.
04:04 - So one thing I could do--
oh, this is exciting.
04:08 - I could make a variable.
04:09 - I'm going to call
it change for--
04:12 - no, I'll call it velocity.
04:14 - It's kind of like
its velocity, vel,
04:16 - and I'm going to say
p5.vector.random.
04:19 - Oh, camera.
04:21 - random2D.
04:22 - Sorry about that everybody.
04:23 - I forgot a crucial thing,
which is to rehit this button.
04:26 - So here I am.
04:27 - I'm back, and there is a
function in P5 called random2D,
04:33 - which I call statically
on this sort of idea
04:35 - of a P5 vector, which
gives me a random vector.
04:38 - So if I say that,
and then if I say
04:40 - this.pos.add that,
what this is doing
04:44 - is it's actually saying
take that random velocity,
04:46 - add it to position.
04:47 - I could do this all with
just this.x and this.y, which
04:50 - I've done in other
videos, but kind of
04:52 - give you a little taste of
vectors in P5 here in this one.
04:55 - So now, if I refresh this,
you should see-- there we go.
04:57 - I want to get it somewhere
more in the middle.
04:59 - You can see it kind of
like jiggling around.
05:01 - Really wants to pick random
locations on the bottom.
05:03 - You can see, here's its
random nervous movement.
05:05 - Now, if you are
following along, I
05:08 - encourage you to
think about other ways
05:10 - to have this move
around the screen based
05:12 - on all sorts of possibilities.
05:14 - Steering behaviors would be
a great thing to look into.
05:16 - That's also why I'm
building this with vectors,
05:18 - because I have a lot of other
examples along these lines
05:20 - that you could take a look at.
05:24 - But one thing I want to do
is I want it to be bigger,
05:27 - and also, I think I
want to give it a color.
05:30 - So I'm going to give it a
color, which is going to be--
05:35 - I'm going to call
that variable c.
05:36 - And I'm going to
make-- in P5, I'm
05:38 - going to give it a
random red amount
05:40 - and a random blue amount.
05:42 - And I'm going to have that range
as at least starting at 100.
05:46 - And then I'm going to say fill
this.c, and I'm going to say--
05:53 - what am I going to say next?
05:54 - And I'm going to say no stroke.
05:56 - So now, here we go.
05:59 - We can see, each time,
I get a random circle
06:01 - with a slightly
different color somewhere
06:03 - in the window moving randomly.
06:05 - So this is good.
06:06 - Now, what I want is to
be able to click on it,
06:10 - and when I click on it,
have it split into two.
06:15 - So I need a new
data structure here.
06:17 - I need a data
structure that keeps
06:19 - track of a list of
these cell objects.
06:21 - Clearly, just one
is not good enough,
06:24 - so what I'm going
to need is an array.
06:26 - So let's go over here to sketch,
and let's change this to cells,
06:31 - and make that an array.
06:33 - And then I'm going to
say cells.push cell.
06:37 - So in setup, I'm still going
to make one new cell object.
06:40 - Oh, and this is the
array, so this is cells.
06:43 - It's a little
confusing to look at.
06:44 - Everything is the word cell, but
let's unpack this for a second.
06:49 - Capital Cell, the name of
the constructor function
06:51 - that makes cell objects.
06:53 - Lowercase cell, an
individual variable
06:56 - holding one cell object.
06:58 - Lowercase cell plural, the array
holding a list of cell objects.
07:02 - So I make one cell object
stored in this variable
07:06 - and immediately put
it in the array.
07:07 - You know what?
07:08 - It's a little bit
silly that I did
07:09 - that because this could be
written much more compactly
07:12 - like this.
07:13 - I just want to make a new cell
object and put it in the array.
07:15 - Why not write it that way?
07:17 - So let's now run this, and we
can see, oh, what's going on?
07:20 - I don't see anything.
07:22 - Let's look-- I got some errors.
07:23 - Cell is not defined.
07:25 - Why is it not defined?
07:26 - Look down here.
07:27 - I need to deal with the
fact that I have an array.
07:29 - So there is no such thing
as an individual cell.
07:32 - There is only the array.
07:33 - So what do I do?
07:35 - For var i equals 0 i is
less than cells.length i++.
07:41 - By the way, you are doomed.
07:43 - If you are watching
these videos,
07:44 - you are doomed to type for
var i equals 0 i is less than
07:48 - blank.length i++ for
the rest of your life.
07:51 - Just letting you know that.
07:52 - It's a nice thing to type.
07:53 - I enjoy it.
07:55 - So now, I want to move--
07:58 - no matter how many
cells there are,
08:00 - I want to move and
show the cells.
08:03 - So now, there we go.
08:06 - We've got our one cell.
08:07 - When I click on it,
I want it to split.
08:10 - We are trucking along now.
08:11 - Eight minutes.
08:11 - We're going to have this
mitosis simulation wrapped up
08:14 - in just a few minutes.
08:15 - What are we missing here?
08:17 - We need a mechanism to know if
the user has clicked the mouse,
08:20 - and then we need a
mechanism to know
08:21 - if the user has clicked the
mouse on a particular cell
08:23 - object.
08:24 - So knowing if the user
has clicked the mouse
08:26 - is easy because I can just say
function mousePressed, which
08:31 - is a global event in
P5, which just detects
08:34 - the mouse has been pressed.
08:37 - And then what I
need to do here--
08:39 - what do I need to do?
08:40 - I also need to loop through
all of these cell objects.
08:44 - Whoops.
08:47 - I'm very obsessed
with indentation.
08:48 - Apologies.
08:49 - So I need to say if cells
index i, what, clicked mouseX,
09:00 - mouseY.
09:06 - What's going on here?
09:08 - So I just realized there's
a really common thing
09:10 - that you might think to do.
09:13 - mousePressed is
a global function
09:16 - to detect if the user
clicks the mouse.
09:17 - Now, with dom elements, like
a button or a piece of text
09:21 - or the full canvas,
anything on a web page,
09:23 - you can attach an event
to a particular object
09:25 - to know if you clicked
only on that object.
09:27 - But this is stuff that
we're drawing in a canvas,
09:30 - so these are just pixels.
09:31 - It's up to us to create
that mechanism ourselves.
09:34 - And the way that we're going
to create that mechanism
09:36 - is by sticking with the mouse
is clicked anywhere, but then
09:39 - checking everything and
seeing if the mouse is
09:41 - clicked on one of those things.
09:42 - So I'm going to write a new
function called clicked inside
09:45 - of the cell object.
09:46 - And what am I going to
do in that function?
09:48 - I'm going to say
this.clicked equals function,
09:52 - and I need to check it against
a particular-- by passing
09:56 - in mouse X and mouse
Y. So I need an X
09:59 - and a Y as arguments to
this particular function.
10:02 - And what I want to
do is I want to know
10:04 - the distance between
this cell's position,
10:11 - its X and Y, and the X
and Y that I'm checking.
10:15 - And then if that distance
is less than what--
10:19 - the radius, then
I've clicked on it.
10:23 - Return true or return false.
10:26 - So because I'm going to handle
the stuff with the clicking
10:29 - elsewhere, I want this function
to do the figuring out but just
10:32 - send back the value
true or false.
10:34 - So now if I go back
here, I can at least
10:37 - say check to see
if this is working
10:40 - by putting a console.logged.
10:42 - OK, here we go.
10:43 - Dramatic drum roll please.
10:44 - [IMITATING DRUM ROLL]
10:46 - Look, I'm clicking over here
and I don't see anything.
10:48 - I'm clicking over here
and I don't see anything.
10:50 - And look at that,
I'm clicking on it.
10:51 - And I look-- let me
go right to the edge.
10:53 - Nothing.
10:54 - Let me click on it.
10:54 - So we've now at
least determined--
10:56 - we know how to figure out,
am I clicking on that or am I
10:59 - clicking on something else?
11:00 - And just to be sure that
this is really working,
11:03 - let's also at the beginning
add two cells to this array.
11:08 - And maybe I'm going to make
the canvas a little bit bigger.
11:11 - 700, 700 should be fine.
11:14 - And let me give myself
more space here.
11:18 - There we go.
11:18 - OK, so now I should be able to
click here, and I see CLICKED.
11:21 - Anywhere here, nothing.
11:22 - And if I click
here, also CLICKED.
11:25 - So I'm clicking on
any, there we go.
11:27 - So now what happens if
I click on one of them?
11:30 - I need to mitosis.
11:32 - I need that cell to split
into two copies of itself.
11:36 - How can I do that?
11:38 - This is exciting.
11:39 - Well there's so many
ways you could do this,
11:41 - I can't think of
all of them at once.
11:43 - Let's do it in a sort of
interesting way I think.
11:45 - What if I, inside
the cell, added
11:49 - a function called mitosis?
11:55 - And that function actually
makes two new cells.
12:07 - And how does it
make two new cells?
12:09 - It makes two new cells how?
12:11 - At its position where it is
with the same color with half
12:17 - the radius.
12:18 - So basically what
I want to say is,
12:21 - make a cell at this cell's
position with this cell's
12:25 - radius divided by 2 and
with this cell's color.
12:34 - Cell A and cell B. I want to
make two new cells like this.
12:39 - And you know what?
12:40 - Forget about making two.
12:42 - Let's just make one,
because let's have
12:44 - a function that's called--
12:47 - I'll call it mitosis,
but let's just make one.
12:51 - Because what can I do?
12:52 - I could say return
that cell, right?
12:56 - So this object knows how to make
a new cell with its material
13:00 - and return it.
13:01 - Now there's all sorts of fancy
ways to copy and clone objects,
13:04 - but I think an easy
way of doing it
13:06 - is just make a new object
with this object's data.
13:09 - This is a nice way
of doing it, but this
13:11 - won't actually work, right?
13:12 - Look at the
constructor function,
13:14 - look at those parentheses.
13:15 - There's nothing in them.
13:17 - So I need to be able to have
the constructor function receive
13:22 - arguments.
13:23 - It needs to receive a position,
a radius, and a color.
13:28 - So I'm going to change this
to get a position, a radius--
13:34 - a color, sorry-- and a position.
13:37 - So now this works.
13:39 - If I make the cell with
position, I get it.
13:43 - If I make it with a
radius, it fills it.
13:46 - If I made it with a
color, it fills it.
13:48 - Guess what?
13:48 - I'm going to show you guys
something wildly interesting.
13:52 - Off topic, but super useful.
13:55 - The problem is, this is how
I made the cell out here.
13:58 - I made the cell
with no arguments.
14:01 - In here, I made the
cell with arguments.
14:03 - How could I make a
cell that if I make it
14:05 - with an argument, I get--
14:07 - I use that argument?
14:08 - If I make it with no argument,
I get a default value?
14:11 - I'm going to show this to you.
14:17 - Well, can I actually do this?
14:21 - There might be a slight problem
with what I'm writing here,
14:26 - but I'm going to
show this to you.
14:36 - I'm just trying to
remember what I had.
14:40 - Something like this.
14:41 - So I had to really
think for a second.
14:44 - So I don't know.
14:45 - This should be fine.
14:46 - You can put function
expressions anywhere, yes?
14:49 - So what's going on here?
14:51 - I got two pipes, I've got pos,
two pipes, then createVector.
14:54 - Let's just see if this even
works or gives me an error.
14:57 - Amazingly, it's working.
14:58 - So what's happening here?
15:00 - Let's say you call new cell,
and you call it with this--
15:04 - you call it with
an actual value.
15:06 - Well that actual
value exists and so
15:09 - it gets assigned to
the object's variable.
15:12 - One of the funny
things about JavaScript
15:14 - is, absolutely anything can
get evaluated to true or false.
15:18 - So if you have a variable
that has a value,
15:21 - it gets evaluated
to true, basically.
15:25 - If you have a variable
that you didn't actually
15:27 - ever assign anything,
its value is undefined.
15:30 - And undefined gets
evaluated to false.
15:33 - So pos, if it's not
defined, is false.
15:37 - So if it's false
I want "or," so I
15:41 - want to assign this.pos
to this if it's true,
15:44 - or if it's not true,
this other value.
15:47 - So this is a way of
having optional arguments
15:49 - to constructor.
15:51 - Now it's-- it's sort of tricky.
15:53 - They're not all
optional because you
15:55 - have to have them still in
the right order, and then--
15:56 - I should make a whole video
just about this topic.
15:58 - But I'm off the beaten path
a little bit too much here.
16:01 - That's about enough,
I think, to show you.
16:02 - So now we can see-- and
what's happening here?
16:05 - I'm still got my CLICKED going,
and now what can I do here?
16:09 - Instead of-- if the cell is
clicked, this is what I want.
16:14 - Var cellA=cells index i.mitosis.
16:18 - Remember, that function
makes a new cell.
16:22 - And I'm just going
to do this twice.
16:25 - What I'm doing now is saying
if that cell is clicked on,
16:29 - make two new cells from that
cell's mitosis function.
16:32 - And then what?
16:34 - cells.push(cellA),
cells.push(cellB).
16:44 - And guess what?
16:45 - We could be, once again, more
concise by just doing this.
16:52 - And incidentally,
you can see now
16:55 - that if I wanted a cell
to split into five,
16:57 - I could just have a
little loop that runs--
16:59 - that does this five times.
17:01 - So let's see what happens here.
17:03 - Oops, do I have an error?
17:05 - Oops.
17:05 - Let me zoom out.
17:06 - Oh no, they're just up top.
17:08 - Click.
17:09 - Whoa, whoa, whoa, craziness.
17:13 - It's just moving faster, whoa.
17:15 - And I still only see one.
17:16 - What's going on?
17:17 - I-- I know what the problem is.
17:20 - Oh, lots of little tiny lessons
inside of these larger ideas.
17:24 - OK, let's look at
what the problem is.
17:27 - Look at this.
17:29 - This .pos equals pos
or create vector.
17:32 - So when pos is something, it
gets assigned to this .pos.
17:37 - When it's not something,
a new vector is made.
17:39 - Guess what?
17:41 - Guess what?
17:41 - We've made a fatal error here.
17:45 - Here is a cell.
17:47 - In the computer's memory, here
is the data for its position.
17:54 - Now we made a new cell.
17:58 - Two new cells.
18:00 - And so this is cell.pos.
18:02 - Now we have cellA.pos, and
now we also have cellB.pos.
18:08 - They are all pointing
to that same vector.
18:11 - Not the same exact
vector the same data.
18:14 - So if I move this
one, this one moves.
18:16 - And they all have the
same exact location.
18:17 - They can't move independently
from each other.
18:19 - So I don't want to do that.
18:21 - I need to take this and copy
it so that cell B-- copy it.
18:24 - So this is called,
like, variable--
18:28 - this is called a lot of things.
18:29 - I have a video about
this, another one.
18:31 - But this is the idea of pass
by reference, pass by copy.
18:35 - And what I need to
do here is I need
18:36 - to make sure I'm thoughtful here
and I make a copy of it. pos.--
18:42 - oh, this is going to be bad.
18:43 - Oh, I've made this so extra
complicated for no good reason.
18:46 - This is going to
give me an error.
18:48 - "Cannot read property
copy of undefined."
18:50 - Yeah, right.
18:51 - So it can't copy if
it doesn't exist.
18:53 - So I got to write a more
complex algorithm here,
18:56 - which is just if (pos),
this.pos equals pos.copy.
19:02 - I just have to break this out.
19:04 - Otherwise this.pos
equals a new vector.
19:12 - So this is just
a little bit more
19:14 - of a long-winded
write-- way of writing
19:16 - this for an optional argument.
19:18 - If you're getting a
position argument,
19:20 - then set this object's position
to that argument's copy.
19:23 - Otherwise, make a
new random vector.
19:25 - And this should be OK
now, so let's go back.
19:28 - What happened to my browser?
19:29 - I lost the browser.
19:30 - Come back to me, browser.
19:34 - Mitosis.
19:34 - OK, here we go.
19:35 - Click.
19:36 - Now let's click on it.
19:40 - Oh yes, they're there,
you just can't see them.
19:43 - And I clicked a bunch of times.
19:45 - I made so many little children.
19:47 - OK, hold on a second here.
19:48 - So in order to figure out
if this is really working,
19:51 - it would be--
19:52 - I need to do a couple of things.
19:54 - One is-- one way just to sort
of visually see what's going on
19:57 - is, let me add a
little bit of alpha.
19:59 - Is this going to work?
20:00 - I hope this works.
20:05 - That doesn't.
20:05 - Hold on.
20:06 - OK, hold on.
20:07 - I'll just put the alpha--
20:08 - I'm sorry.
20:09 - I'm going to put the alpha here.
20:16 - There you go.
20:17 - So you can see-- oh, why
did it-- it made so many.
20:19 - Oh, you know why
it made so many?
20:22 - That was kind of glorious.
20:24 - Look how many we're making.
20:26 - So why did make so many?
20:27 - Oh, this is fascinating.
20:29 - So the reason it made so
many is, look at this.
20:31 - I'm looping through
the array, right?
20:34 - I'm saying, let's think
about this over here.
20:36 - I've got this array with,
like, two cells in it.
20:40 - Cell and cell.
20:41 - I get to this one,
I click on it.
20:43 - So I add two more.
20:44 - And then I go check this one.
20:45 - But now these other
ones are being checked.
20:47 - My mouse still click, so
I'm adding to the array
20:49 - while I'm trying to get to
the end in my loop, which
20:51 - is a bit of a problem.
20:52 - So we can actually
solve this problem
20:54 - by going through
the array backwards.
20:56 - If I go through the
array backwards--
20:58 - I can also add to the
beginning, but that's going
20:59 - to make things really wonky.
21:00 - If I'm going through
the array backwards
21:02 - I can add things onto the
end without messing up
21:04 - my iterative thing
that I'm doing.
21:06 - So I'm going to
say cells.length-1.
21:09 - That's starting at the end.
21:11 - i is greater than or equal
to zero, and i minus minus.
21:16 - OK, so here we go.
21:18 - These are dark.
21:20 - Let's look at this one, zoom in.
21:21 - We're going to click
on it, and you can
21:23 - see now there's just two there.
21:24 - And if I click on one
of those, that one,
21:27 - it split into two as well.
21:29 - So-- and one thing
is I'm-- by the way,
21:31 - if they're overlapping
and I click,
21:32 - all of them are going to split.
21:34 - But that's a problem you can
worry about for another time.
21:37 - But let's at least fix
one more thing here,
21:40 - which is that I also might
as well say splice(i).
21:47 - So what does this do?
21:49 - The moment that I click
on a particular cell,
21:52 - add two new cells to the
array, and delete that one
21:57 - so that the cell that
was clicked on is cell i.
22:01 - So I'm deleting that one and
then I'm adding two new cells.
22:03 - So the two new cells get added
and the old one gets deleted.
22:06 - We can go back.
22:08 - I don't-- I don't know why.
22:09 - Maybe I should have a
brighter background.
22:12 - Someone-- someone make
me a nice visual design
22:14 - for this example
with nice colors
22:15 - and interesting
bacteria-looking-like things.
22:19 - Let's try this.
22:21 - There we go, that's nicer.
22:22 - So if I click on
here you can see two.
22:24 - And you know what I
don't love about this?
22:27 - They both start right where--
22:31 - they both start right
where that first one is.
22:33 - I feel like I want to give
them a little separation.
22:36 - A little bit of-- like,
almost as if a burst outward.
22:39 - So at least what I'm going
to do is say this.new.
22:46 - And by the way,
I'm going to say--
22:53 - oh, no.
22:53 - Sorry.
22:54 - I'm going to make
a new position,
22:56 - equals CreateVector(this.pos).
23:00 - I'm trying to think of the--
23:01 - it's like, the code gets
so long in a given line.
23:05 - I don't know why I'm deciding
I need to fix this for here.
23:08 - But what I want to do
is this.pos.x+random.
23:13 - Actually, you know what?
23:14 - I'm just going to--
23:15 - I'm just going to
set it to the right.
23:19 - Oh no, no.
23:19 - It has to be random because
one goes to the right.
23:21 - So-- oh yeah.
23:22 - Minus-- plus, sorry.
23:25 - So I'm going to-- sorry.
23:27 - Offset=random(-10, 10).
23:31 - And newpos equals this.pos+
offset comma this.pos.
23:40 - You know what I can do?
23:41 - I'm sorry.
23:42 - this.pos.x+= this.
23:46 - Sorry, I know I was thinking
about this through way
23:48 - too many times in my head,
of like a nice concise
23:50 - way of writing it.
23:51 - This is pretty good.
23:52 - I just want to--
23:52 - before I make that new cell, I
want to just shove its position
23:55 - to the right or
the left somewhat
23:57 - randomly so that
the new cells aren't
23:59 - in exactly the same position.
24:00 - And also, r divided by 2.
24:02 - Dividing it in half, while
probably accurate in some way,
24:05 - it just gets so small so fast.
24:06 - So I'm going to just
multiply it by like 0.8
24:09 - to have it just be 80% the size.
24:12 - Now, I guess 10 pixels is--
24:15 - oh, you know what?
24:16 - I should just make
it random based on r.
24:22 - And that might do the
trick to give it-- oops.
24:29 - That's too much, right?
24:30 - Whoa.
24:32 - Way too much, way too much.
24:38 - There we go.
24:38 - That's kind of what I wanted.
24:39 - It's still too
much a little bit.
24:41 - So I don't-- I don't
know what I'm doing here.
24:43 - Someone will come
up with a better.
24:44 - Really what I want,
and I'm going to--
24:47 - I'm going to comment this
out because it's really
24:50 - not a crucial detail.
24:51 - Do you know what I want?
24:52 - I want a system where the
bacteria are moving not just
24:55 - randomly, so that when you click
on it there's a bit of a burst.
24:58 - And if they have some
sort of physics to them,
25:00 - their velocity would be pointed
out in opposite directions,
25:02 - so you might see more of a
split there in that sense.
25:05 - So this is the basic idea.
25:07 - You can see as I click
on these, they separate.
25:11 - I'm going to let this
run for a little while,
25:13 - and the cells are splitting.
25:15 - So, I don't know.
25:16 - This was 25 minutes.
25:17 - Oh my goodness.
25:18 - 25 minutes mitosis example.
25:20 - I got to just stop now.
25:22 - Hopefully you will
take this idea
25:24 - and maybe actually build
more features into it.
25:27 - The motion could be
more interesting,
25:28 - when they split could
be something different.
25:30 - What happens if they
bump into each other?
25:32 - Maybe they come back together.
25:33 - Can you take two and
make one that's bigger?
25:35 - What other types of
things could you pass?
25:37 - What if they each have a label
and that label gets passed?
25:40 - So many possibilities.
25:41 - Please make some
variation on this.
25:43 - Read about actual mitosis and
teach me something about it
25:46 - and share it in the
comments or tweet at me.
25:48 - And I'll look forward
to seeing you next time.

Cleaned transcript:

Welcome to another quick Coding Rainbow Coding Challenge. I'm going to see how long it takes to program a mitosis simulation. Now, I should really admit that this is not really going to be precisely a simulation of mitosis, which is a complex, interesting, biological process. I'm actually just going to be sort of inspired by this idea and make a very, very simple example of a bunch of bubble shapes floating on the screen, and as you click on them, they split into two. So those bubble shapes, those circles, will represent cells. You click on them. Those cells will split into two, and then you click on those, and those will split. And from there, hopefully, maybe some of you watching this video will take my example and be inspired to read about mitosis and other biological processes and make more complex, sophisticated, and interesting interactive examples. But I already talked for 48 seconds. Let's go. I want to see if I can wrap this up in about 10 minutes. Let's see how that goes. I'm sure, by the end, we'll find out it was much longer. So I've got an empty JavaScript file here, and as always not as always, but as in a lot of these, I'm using something called P5JS, which has a setup and a draw. And the main thing that I want to do is I need a cell object. I need an object on the screen to represent this idea of a cell. And so a way that I'm going to do that is with a constructor function, as you've seen now if you've watched any of these other coding challenges. And I'm going to do something a little bit different. I'm going to use a vector object to store the cell object's position. So createVector is a function that creates a vector, a vector being a pairing of components, an x and a y. There's a lot more to vectors. I would encourage you to check out my Nature of Code videos and tutorials. Oh, no, no, no, no promotional stuff in these coding challenges, but if you want more, you can take a look at those. And then I'm also going to give this it's going to be very important for it to have a radius because I'm going to use the radius when the cell splits, and it has a radius of 20, the two children cells, so to speak, will have radii of 10. So I'm going to start it with a radius of 20, and I'm going to give it I want them to move around the screen, whoops, so I'm going to say this.move equals function. And I'm going to say this.show equals function, and let's first just show it, ellipse at this.pos.x, this.pos.y. So pos is the vector. Pos has, built into it, an x and a y. So when I want to draw the circle, I want to draw it at this.pos.x and this.pos.y. this.r, this.r. And I already am starting to feel like this is enough code for me to just go and put it in a new separate file, so I'm going to make a file called cell.js, and I'm going to paste it in there. And as always, if I make another JavaScript file that I'm going to use, I need to go to my HTML file and add that in. So I hope if, you're trying to program along with me, you're pausing to do some of this stuff, as I'm doing it kind of quickly. So now, we should be able to see, at the very least, that I can make a single cell. And I'm going to make a canvas that's 400 and 400 pixels wide. I'm going to give it a dark grayish background, and I'm going to say cell equals new Cell and cell.move, cell.show. So if I refresh this, we should see where's that cell? It's up there in the top left corner, so this is no good. Clearly, what I want is for my cell to start somewhere not the top left corner. What might be useful right now would be to have it start at a random location. So when I said createVector with no arguments, it automatically made a vector with an x of 0 and a y of 0. Now, I want a vector with a random width and a random height, giving it a random position in the window, so you can see, each time I refresh this sketch, it starts in a new place. And I am calling a function called move, but it's not moving anywhere. Why is it not moving anywhere? Because if I look at my code, I didn't write anything in the move function. So one thing I could do oh, this is exciting. I could make a variable. I'm going to call it change for no, I'll call it velocity. It's kind of like its velocity, vel, and I'm going to say p5.vector.random. Oh, camera. random2D. Sorry about that everybody. I forgot a crucial thing, which is to rehit this button. So here I am. I'm back, and there is a function in P5 called random2D, which I call statically on this sort of idea of a P5 vector, which gives me a random vector. So if I say that, and then if I say this.pos.add that, what this is doing is it's actually saying take that random velocity, add it to position. I could do this all with just this.x and this.y, which I've done in other videos, but kind of give you a little taste of vectors in P5 here in this one. So now, if I refresh this, you should see there we go. I want to get it somewhere more in the middle. You can see it kind of like jiggling around. Really wants to pick random locations on the bottom. You can see, here's its random nervous movement. Now, if you are following along, I encourage you to think about other ways to have this move around the screen based on all sorts of possibilities. Steering behaviors would be a great thing to look into. That's also why I'm building this with vectors, because I have a lot of other examples along these lines that you could take a look at. But one thing I want to do is I want it to be bigger, and also, I think I want to give it a color. So I'm going to give it a color, which is going to be I'm going to call that variable c. And I'm going to make in P5, I'm going to give it a random red amount and a random blue amount. And I'm going to have that range as at least starting at 100. And then I'm going to say fill this.c, and I'm going to say what am I going to say next? And I'm going to say no stroke. So now, here we go. We can see, each time, I get a random circle with a slightly different color somewhere in the window moving randomly. So this is good. Now, what I want is to be able to click on it, and when I click on it, have it split into two. So I need a new data structure here. I need a data structure that keeps track of a list of these cell objects. Clearly, just one is not good enough, so what I'm going to need is an array. So let's go over here to sketch, and let's change this to cells, and make that an array. And then I'm going to say cells.push cell. So in setup, I'm still going to make one new cell object. Oh, and this is the array, so this is cells. It's a little confusing to look at. Everything is the word cell, but let's unpack this for a second. Capital Cell, the name of the constructor function that makes cell objects. Lowercase cell, an individual variable holding one cell object. Lowercase cell plural, the array holding a list of cell objects. So I make one cell object stored in this variable and immediately put it in the array. You know what? It's a little bit silly that I did that because this could be written much more compactly like this. I just want to make a new cell object and put it in the array. Why not write it that way? So let's now run this, and we can see, oh, what's going on? I don't see anything. Let's look I got some errors. Cell is not defined. Why is it not defined? Look down here. I need to deal with the fact that I have an array. So there is no such thing as an individual cell. There is only the array. So what do I do? For var i equals 0 i is less than cells.length i++. By the way, you are doomed. If you are watching these videos, you are doomed to type for var i equals 0 i is less than blank.length i++ for the rest of your life. Just letting you know that. It's a nice thing to type. I enjoy it. So now, I want to move no matter how many cells there are, I want to move and show the cells. So now, there we go. We've got our one cell. When I click on it, I want it to split. We are trucking along now. Eight minutes. We're going to have this mitosis simulation wrapped up in just a few minutes. What are we missing here? We need a mechanism to know if the user has clicked the mouse, and then we need a mechanism to know if the user has clicked the mouse on a particular cell object. So knowing if the user has clicked the mouse is easy because I can just say function mousePressed, which is a global event in P5, which just detects the mouse has been pressed. And then what I need to do here what do I need to do? I also need to loop through all of these cell objects. Whoops. I'm very obsessed with indentation. Apologies. So I need to say if cells index i, what, clicked mouseX, mouseY. What's going on here? So I just realized there's a really common thing that you might think to do. mousePressed is a global function to detect if the user clicks the mouse. Now, with dom elements, like a button or a piece of text or the full canvas, anything on a web page, you can attach an event to a particular object to know if you clicked only on that object. But this is stuff that we're drawing in a canvas, so these are just pixels. It's up to us to create that mechanism ourselves. And the way that we're going to create that mechanism is by sticking with the mouse is clicked anywhere, but then checking everything and seeing if the mouse is clicked on one of those things. So I'm going to write a new function called clicked inside of the cell object. And what am I going to do in that function? I'm going to say this.clicked equals function, and I need to check it against a particular by passing in mouse X and mouse Y. So I need an X and a Y as arguments to this particular function. And what I want to do is I want to know the distance between this cell's position, its X and Y, and the X and Y that I'm checking. And then if that distance is less than what the radius, then I've clicked on it. Return true or return false. So because I'm going to handle the stuff with the clicking elsewhere, I want this function to do the figuring out but just send back the value true or false. So now if I go back here, I can at least say check to see if this is working by putting a console.logged. OK, here we go. Dramatic drum roll please. [IMITATING DRUM ROLL] Look, I'm clicking over here and I don't see anything. I'm clicking over here and I don't see anything. And look at that, I'm clicking on it. And I look let me go right to the edge. Nothing. Let me click on it. So we've now at least determined we know how to figure out, am I clicking on that or am I clicking on something else? And just to be sure that this is really working, let's also at the beginning add two cells to this array. And maybe I'm going to make the canvas a little bit bigger. 700, 700 should be fine. And let me give myself more space here. There we go. OK, so now I should be able to click here, and I see CLICKED. Anywhere here, nothing. And if I click here, also CLICKED. So I'm clicking on any, there we go. So now what happens if I click on one of them? I need to mitosis. I need that cell to split into two copies of itself. How can I do that? This is exciting. Well there's so many ways you could do this, I can't think of all of them at once. Let's do it in a sort of interesting way I think. What if I, inside the cell, added a function called mitosis? And that function actually makes two new cells. And how does it make two new cells? It makes two new cells how? At its position where it is with the same color with half the radius. So basically what I want to say is, make a cell at this cell's position with this cell's radius divided by 2 and with this cell's color. Cell A and cell B. I want to make two new cells like this. And you know what? Forget about making two. Let's just make one, because let's have a function that's called I'll call it mitosis, but let's just make one. Because what can I do? I could say return that cell, right? So this object knows how to make a new cell with its material and return it. Now there's all sorts of fancy ways to copy and clone objects, but I think an easy way of doing it is just make a new object with this object's data. This is a nice way of doing it, but this won't actually work, right? Look at the constructor function, look at those parentheses. There's nothing in them. So I need to be able to have the constructor function receive arguments. It needs to receive a position, a radius, and a color. So I'm going to change this to get a position, a radius a color, sorry and a position. So now this works. If I make the cell with position, I get it. If I make it with a radius, it fills it. If I made it with a color, it fills it. Guess what? I'm going to show you guys something wildly interesting. Off topic, but super useful. The problem is, this is how I made the cell out here. I made the cell with no arguments. In here, I made the cell with arguments. How could I make a cell that if I make it with an argument, I get I use that argument? If I make it with no argument, I get a default value? I'm going to show this to you. Well, can I actually do this? There might be a slight problem with what I'm writing here, but I'm going to show this to you. I'm just trying to remember what I had. Something like this. So I had to really think for a second. So I don't know. This should be fine. You can put function expressions anywhere, yes? So what's going on here? I got two pipes, I've got pos, two pipes, then createVector. Let's just see if this even works or gives me an error. Amazingly, it's working. So what's happening here? Let's say you call new cell, and you call it with this you call it with an actual value. Well that actual value exists and so it gets assigned to the object's variable. One of the funny things about JavaScript is, absolutely anything can get evaluated to true or false. So if you have a variable that has a value, it gets evaluated to true, basically. If you have a variable that you didn't actually ever assign anything, its value is undefined. And undefined gets evaluated to false. So pos, if it's not defined, is false. So if it's false I want "or," so I want to assign this.pos to this if it's true, or if it's not true, this other value. So this is a way of having optional arguments to constructor. Now it's it's sort of tricky. They're not all optional because you have to have them still in the right order, and then I should make a whole video just about this topic. But I'm off the beaten path a little bit too much here. That's about enough, I think, to show you. So now we can see and what's happening here? I'm still got my CLICKED going, and now what can I do here? Instead of if the cell is clicked, this is what I want. Var cellA=cells index i.mitosis. Remember, that function makes a new cell. And I'm just going to do this twice. What I'm doing now is saying if that cell is clicked on, make two new cells from that cell's mitosis function. And then what? cells.push(cellA), cells.push(cellB). And guess what? We could be, once again, more concise by just doing this. And incidentally, you can see now that if I wanted a cell to split into five, I could just have a little loop that runs that does this five times. So let's see what happens here. Oops, do I have an error? Oops. Let me zoom out. Oh no, they're just up top. Click. Whoa, whoa, whoa, craziness. It's just moving faster, whoa. And I still only see one. What's going on? I I know what the problem is. Oh, lots of little tiny lessons inside of these larger ideas. OK, let's look at what the problem is. Look at this. This .pos equals pos or create vector. So when pos is something, it gets assigned to this .pos. When it's not something, a new vector is made. Guess what? Guess what? We've made a fatal error here. Here is a cell. In the computer's memory, here is the data for its position. Now we made a new cell. Two new cells. And so this is cell.pos. Now we have cellA.pos, and now we also have cellB.pos. They are all pointing to that same vector. Not the same exact vector the same data. So if I move this one, this one moves. And they all have the same exact location. They can't move independently from each other. So I don't want to do that. I need to take this and copy it so that cell B copy it. So this is called, like, variable this is called a lot of things. I have a video about this, another one. But this is the idea of pass by reference, pass by copy. And what I need to do here is I need to make sure I'm thoughtful here and I make a copy of it. pos. oh, this is going to be bad. Oh, I've made this so extra complicated for no good reason. This is going to give me an error. "Cannot read property copy of undefined." Yeah, right. So it can't copy if it doesn't exist. So I got to write a more complex algorithm here, which is just if (pos), this.pos equals pos.copy. I just have to break this out. Otherwise this.pos equals a new vector. So this is just a little bit more of a longwinded write way of writing this for an optional argument. If you're getting a position argument, then set this object's position to that argument's copy. Otherwise, make a new random vector. And this should be OK now, so let's go back. What happened to my browser? I lost the browser. Come back to me, browser. Mitosis. OK, here we go. Click. Now let's click on it. Oh yes, they're there, you just can't see them. And I clicked a bunch of times. I made so many little children. OK, hold on a second here. So in order to figure out if this is really working, it would be I need to do a couple of things. One is one way just to sort of visually see what's going on is, let me add a little bit of alpha. Is this going to work? I hope this works. That doesn't. Hold on. OK, hold on. I'll just put the alpha I'm sorry. I'm going to put the alpha here. There you go. So you can see oh, why did it it made so many. Oh, you know why it made so many? That was kind of glorious. Look how many we're making. So why did make so many? Oh, this is fascinating. So the reason it made so many is, look at this. I'm looping through the array, right? I'm saying, let's think about this over here. I've got this array with, like, two cells in it. Cell and cell. I get to this one, I click on it. So I add two more. And then I go check this one. But now these other ones are being checked. My mouse still click, so I'm adding to the array while I'm trying to get to the end in my loop, which is a bit of a problem. So we can actually solve this problem by going through the array backwards. If I go through the array backwards I can also add to the beginning, but that's going to make things really wonky. If I'm going through the array backwards I can add things onto the end without messing up my iterative thing that I'm doing. So I'm going to say cells.length1. That's starting at the end. i is greater than or equal to zero, and i minus minus. OK, so here we go. These are dark. Let's look at this one, zoom in. We're going to click on it, and you can see now there's just two there. And if I click on one of those, that one, it split into two as well. So and one thing is I'm by the way, if they're overlapping and I click, all of them are going to split. But that's a problem you can worry about for another time. But let's at least fix one more thing here, which is that I also might as well say splice(i). So what does this do? The moment that I click on a particular cell, add two new cells to the array, and delete that one so that the cell that was clicked on is cell i. So I'm deleting that one and then I'm adding two new cells. So the two new cells get added and the old one gets deleted. We can go back. I don't I don't know why. Maybe I should have a brighter background. Someone someone make me a nice visual design for this example with nice colors and interesting bacterialookinglike things. Let's try this. There we go, that's nicer. So if I click on here you can see two. And you know what I don't love about this? They both start right where they both start right where that first one is. I feel like I want to give them a little separation. A little bit of like, almost as if a burst outward. So at least what I'm going to do is say this.new. And by the way, I'm going to say oh, no. Sorry. I'm going to make a new position, equals CreateVector(this.pos). I'm trying to think of the it's like, the code gets so long in a given line. I don't know why I'm deciding I need to fix this for here. But what I want to do is this.pos.x+random. Actually, you know what? I'm just going to I'm just going to set it to the right. Oh no, no. It has to be random because one goes to the right. So oh yeah. Minus plus, sorry. So I'm going to sorry. Offset=random(10, 10). And newpos equals this.pos+ offset comma this.pos. You know what I can do? I'm sorry. this.pos.x+= this. Sorry, I know I was thinking about this through way too many times in my head, of like a nice concise way of writing it. This is pretty good. I just want to before I make that new cell, I want to just shove its position to the right or the left somewhat randomly so that the new cells aren't in exactly the same position. And also, r divided by 2. Dividing it in half, while probably accurate in some way, it just gets so small so fast. So I'm going to just multiply it by like 0.8 to have it just be 80% the size. Now, I guess 10 pixels is oh, you know what? I should just make it random based on r. And that might do the trick to give it oops. That's too much, right? Whoa. Way too much, way too much. There we go. That's kind of what I wanted. It's still too much a little bit. So I don't I don't know what I'm doing here. Someone will come up with a better. Really what I want, and I'm going to I'm going to comment this out because it's really not a crucial detail. Do you know what I want? I want a system where the bacteria are moving not just randomly, so that when you click on it there's a bit of a burst. And if they have some sort of physics to them, their velocity would be pointed out in opposite directions, so you might see more of a split there in that sense. So this is the basic idea. You can see as I click on these, they separate. I'm going to let this run for a little while, and the cells are splitting. So, I don't know. This was 25 minutes. Oh my goodness. 25 minutes mitosis example. I got to just stop now. Hopefully you will take this idea and maybe actually build more features into it. The motion could be more interesting, when they split could be something different. What happens if they bump into each other? Maybe they come back together. Can you take two and make one that's bigger? What other types of things could you pass? What if they each have a label and that label gets passed? So many possibilities. Please make some variation on this. Read about actual mitosis and teach me something about it and share it in the comments or tweet at me. And I'll look forward to seeing you next time.
