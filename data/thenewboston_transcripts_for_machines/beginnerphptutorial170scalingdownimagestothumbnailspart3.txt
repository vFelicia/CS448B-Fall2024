okay so now what's the next stage of doing this well we need to create our new image so we need a new image created to be able to store this new thumbnail so I'm going to say new underscore image and this is going to equal image create true color all this is all this functions doing is creating a new image with a true true type color to it and that's important because we obviously want to maintain you know quality when we're creating a new image so now we need to specify the width and the height now obviously we've already got the width and the height here sorted out our new width in our new height so we say new width and new height done okay so now what we need to do is we need to load in our original image as a JPEG image in order to use the function we're going to use next is image copy resized so we need to load in our original image so I'm just going to write image or let's call it JPEG so we don't get in you know messed up with this thing here this set variable here so I'm going to say JPEG or or you could say old image old image equals and and the function we're using is image create from JPEG so image create from JPEG image so we've specified our image in here which is the value of passing through get through our URL and we're creating a new image from this so now we have the original image and we have the new image so now what we can do is use a function called image copy resized and what this is going to do is it's going to resize our image down with very specific parameters in so this function like with most GD library functions in this sense is takes a lot of parameters so let's go through and we'll explain each one as carefully while explaining the least I'll explain each one as carefully as I can so the function is image copy resized okay and this function takes ten parameters so we've got ten parameters to put in here four of which are the destination of x and y of the desk Tori the x and y placement of the destination image and the x and y placement of the source image we don't need to worry about these this is parameters 3 to 6 so we don't need to worry about these the first parameter we do need to worry about is the destination image and the destination image in our case is our new image because we want to create our thumbnail this new image here the second parameter is the old image so it's fine this is why I've named the variables how they are because we can see now what we're doing but we're resizing the new image to into the canvas of the oh sorry we're creating a new image here which we've done already and we're resizing the old image into the canvas of the new image so essentially what we're doing is we've created the canvas found new image which is with the new width and the new height and we're applying our old image to this now obviously this isn't enough parameters we need to specify things like the height and the width of the of the new and the and the old image so we need to scale it down appropriately because what we're not doing is performing a command which is actually going to resize the image itself whereas the function is named it with image copy resize so we're copying the old image to the new image but just with different width and height so the next three parameters like I said the four parameters are the destination X destination white source X and source Y we don't need to worry about these because they're just going from the top of the image they're just going to go straight in theory they're not going to be resized or moved in sorry they're not going to be moved anywhere ok so the seventh parameter we've got destination width so the destination width is obviously the new width and the destination height is obviously the new height because this is the destination that we're creating our thumbnail app inside this image this new image and then what we need to do is the source within the source height which is obviously the old width and the old height but we have called these image width and image height so image width image height remember with the GD library when you're specifying widths and Heights the width always comes before the height okay so now we are pretty much done that there's a just one last thing we need to do and we need to use the function image JPEG and this is going to display the image out on the screen for us so sorry new image so image JPEG new image this is the new image that we created with the new width of new height so I the thumbnail and now what we're doing is we're just outputting it onto the screen so let's uncomment this header here with changing our content type and let's go ahead into our browser and test it so fingers crossed okay great so what we've done here is we've returned the image with the scaled down height and width and you can see that it's maintained its aspect ratio it hasn't been distorted or elongated or stretched with ways or anything like that so let's still go back and have a look at the original image you can see that it's still sort of intact there but when we go back to this page we have resized our image okay so the last stage is to save this file so it can be processed so you can process this URL sort of on the fly if you like so what we want to do is we want to save the file itself so we just simply add a comma onto the inner parameters of this function this image JPEG function and we just specify a file name so the file name I'm going to choose is the original image name which is image and I'm going to append on and I'm going to say dot thumb dot jpg so this is going to be phone jpg and this is going to be dot thumb jpg so it's going to create a new JPEG image remember the dot jpg at the end is really important because then it's a recognizable extension so let's go ahead and run this page let's refresh okay so now what's happened is we've changed we've we've taken this phone dot jpg we processed it through we've resized it but then we've saved as phone jpg' thumb dot jpg so this is an image in my browser you can see that I can pick it up and drag it and copy it copy and paste it whatever I want to do so this is an image in itself of the resized thumbnail so now you can see how useful this function could be I wouldn't recommend calling it index dot PHP call it something like generate thumbnail PHP and then you can simply run an image through using this get variable and then you can process the image and output it to a file name of your choice