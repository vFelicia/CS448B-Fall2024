hey welcome back everybody this is Ian bringing you another video in this AI series with the New Boston so in today's video we are going to stay out of our code editor and we're just going to work inside of the promp layer dashboard so promp layer has a bunch of really cool features some of them we've covered in past videos in today's video we're going to cover the evaluate feature so in a nutshell what evaluate allows us to do is if we have a prompt or multiple prompts and we want to pass a data set through those prompts and see what the output is based on those inputs we can then run what's called a batch run which will automatically pipe our data set through the prompt or through the prompts give us the output at which point we can score it manually as a human grader or we can score it against a golden data set what the answers should be or we can have ai go back and look at it and give us an AI generated answer or rather an AI generated score and so in today's today's video we're going to look at the lattermost of those options we're going to have a additional prompt go back and look at the outputs from running our data set against our prompt and then we're going to have it give us a score so let's jump into it over here at the top we have the evaluate button this is at promp layer.com of course and we've already signed in so this is your welcome screen whenever you get to your dashboard so up top we're going to click on evaluate and this is going to take us to do something similar to this except you're not going to have all this history of previews and batch runs so the blue button here new batch run is going to allow us to create a new batch run let's go ahead and click on that and see what it has to offer so in the top right corner here we'll click on new batch run now we can give it a bat name so we'll simply call this one uh bies comments test and we're going to select the data set so the data set you can create yourself this just could be a CSV comma separated values if you export this from say a spreadsheet like Google sheet or Excel then you'll just have your headers up top and then you'll have all of your data in the subsequent rows everything will be comma delimited so we'll go ahead and select a preexisting data set here but if you wanted to you could click on new data set here and you could upload a CSV file so I'm going to select Bucky's posts and we're going to use that specific data set if you don't have a data set you can always use one of these data set examples down here you've got three to choose from and you can download one of those and pipe it through against one of your prompts so I'm going to click on build preview right here this blue button and it's going to start me out with a single column so you can see that this is the data set that I uploaded it's got a handful of previews there's actually 16 rows in addition to the few that we're seeing here this is just kind of a truncated View and so this is using an input variable called content that's the top pop here you can see inside the curly brackets we have content and then this is the actual content so in your comma separated values file your CSV file the header would be content and then each one of the rows in that column would be this data that you're seeing here or whatever your data is for your arbitrary data set so then you can add additional columns so you choose the column type and this is where it gets really cool we can pick a prompt template from one of our existing prompt templates we can actually send the request through a custom API endpoint so we can run it against any number of functions in an API that we've written or we can use the human input option so I'm going to choose the prompt template here and click on next so the column name here I'm just going to call this comment and then I'm going to select a template as the next step and you can see I've got a bunch of templates already in my library my registry of templates that I've created so we want to create a comment so I'm going to use the the create comment option here for the template name create comment you can do it by version or by label if you do it by label then you can go through here and choose which label if you do it by version you can just go through and select the different versions the default of course will be the most recent version of that template so I'll go ahead and save this now you can go through and change the settings if you want your template may already have the settings embedded in it but if you want to be explicit about which model you're using then you just click this little pencil here and you can customize your engine parameters you can decide which llm provider you want to use you can use a specific model from the llm provider and so on and so forth once you're done with that you can save it there are Advanced controls for things like temperature max token C top P frequency penalty and so on so once you're done with all of that you go ahead and save it if you want to do the customize option here we don't need that so we're going to close that back out I have to go back and add my column now I didn't mean to close that all the way but prompt template next name is going to be comment we'll select our template here create comment default version using version save everything good here now you can see as far as the input variables are concerned we have one called postore content that's being pulled out of the prompt template and so we want to decide which column from our data set is going to be mapped to that input variable we only have one which is content so that's the one that we're going to select now we can click on run column and it's actually going to run that preview against those first few you'll notice that the rest are hidden and we'll be able to see those when we run the full batch so right away it's actually running this data set through that template and it's coming back with brand new output from in this case GPT 3 and a half turbo so now what we want to do since we have the data set that's been piped through the template is we want to take an additional step add one more column where we include another prompt template that's going to look at this output based on that input and it's going to provide a score for us now as humans we could also look at it and have a column where we say okay this is good I'm going to give that a 100 that's bad I'm going to give that a zero but we also want to see if we can automate this process and hand it off to generative AI so let's go ahead and try that now we're going to click on ADD column here select the column type and again we're going to do a prompt template go next column name here we can just call it AI score if we want to and then select the template from the drop down I'm going to create comment evaluation so this is going to be the creation of an evaluation of a comment by our GPT model everything else is defaulted so we'll save that now this is the important part here the input variables we have our comment content right that is going to be the second column so we're going to send that one over to comment and then the next one post content is like we did previously that's going to be the content so the comment content is the output from our first prompt template and then the post content is the input from our CSV data set we can run this column and we're going to wait for these scores so I'm going to go ahead and move my camera out of the way here for a second so that we can see this button right here for run full batch let's go ahead and run the full batch cuz like I said these four pieces of data right here are only part of a larger 20 row data set so let's go ahead and run the full batch that's that button that you see up here in the corner and at this point it'll give you a suggested name or if you want to give it something more explicit you can type something here I'm going to go with the default Bucky's comments test and it just has today's date so I'll go ahead and click on create so it took a moment for these to come back but essentially what's happening is there are 20 rows of input data and therefore for the First Column has to pipe all 20 of those input variables through the prompt template sends 20 requests out to GPT 3 and half turbo waits for their responses and populates them here and then in order for our next prompt template to run with the scoring of the previous output it has to do the same thing all over again just on it's Shifting the data set over to the next column so it starts out with this input over here in the leftand column and it gets through this one and then once this output comes back now this one runs based on this output and we finally get these scores here so we can take a look at these we can see okay the comment here is it's so nice out today and then the comment that was generated by the AI was H I wish I could be outside enjoying it stuck inside studying for exams and then the score based on this input and this AI driven output is 80 from our prompt template so you can go through these and you can see and assess okay how well is the AI scoring these outputs that of course is going to be subjective to you the person that created all this but in addition to all that you can modify your batch run here to have an additional column that allows you as the human to provide scores so you can go in and manually say yes based on this input this is very close to what I expected and therefore it's a 90 or 95 or 100 or no based on this input this is not what I was expecting so this is close cl to a zero so that would be the human output this video we're specifically focusing on the AI generated output but in future videos we'll come back and show you how you can add additional columns for grading against a golden standard so when you already have the expected output you can see what the AI gave us and what it should have given us and you can see how those differ or the other option is that you as a human can go in and physically say okay this is 100 or this is a zero or anything in between that so this has been making batch runs of your evaluations against your prompt templates with your example data sets thanks a lot for watching this video can't wait to see you in the next one until next time peace