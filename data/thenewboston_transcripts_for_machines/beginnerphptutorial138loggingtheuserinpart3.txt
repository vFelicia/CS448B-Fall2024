so we need to continue in login form to actually log the user in so how are we going to do this first of all we need a query and this is going to be equal to select and we need to select the username user name and password from and that lets go reference back to our table to see from users so it's selecting from users where and then we're going to say username is equal to username and password is equal to password so we've constructed here a query where we're selecting the username and password in fact we don't even need to do that let's just select the ID so we're selecting the ID from our users table where the username is equal to Alex in this case and the password is equal to password in this case now we've got one problem already password is plain text and the password stored in the database is md5 data so what we need to do here is we need to say md5 wrapping around password which will then automatically convert this to an md5 value in fact now that's not going to work I'll tell you why if the user entered nothing we're still generating an md5 hash so we can get away with not entering a password so instead of doing that let's create a new variable which is probably better called password hash and that's going to equal to md5 of password so we create a new variable now we can pop this into our query like that so let's first of all execute this query so query run equals MySQL Oh query query and let's pop this into an if statement just to check that it works so if that then run this block otherwise something now we've actually now predetermined so if this query is fine and it works then we can in fact me we don't need this else here if this query works then we can do something with it and what we need to do with it is we need to check how many rows have been returned now if 0 rows have been returned we have if 0 rows been returned a username and a password don't match so we use name and password combination haven't matched which means they may have entered the correct username they may have not entered the correct password or viceversa they may have kren to the correct password but not the right username so we need to create a check in here first of all we'll say at query none and that's call num rows would be better and that's equal to MySQL num rows of our query that we've run and now we need to perform a check to say if query num rows is equal to 0 no such user exists otherwise do something else so here we're going to say echo invalid invalid username password combination okay so we've executed our query as long as the query is structured properly and it makes sense we're going to continue with this code here then we're creating a value of the number of rows returned then we're checking if that equals to 0 if it does equal to 0 it means that the username and password combination don't match so we echo out a warning to the user and we don't lock them in otherwise we need to say okay for now the users logged in successfully so let's use this as an example so let's go back to our users table we've got Alex in the password which i think is past one yet past one two three but the md5 hash remember we convert the md5 hash automatically when we process the login and then we have various bits of information which aren't important just now so let's try a user login that's incorrect so I'm going to type Billy and pass one two three now by mine the pass one two three one two three exists in the database but it doesn't exist next to Billy so let's click login we've got invalid username password combination so our SQL query was structured correctly but it returns no rows now otherwise we want to say if query num rows equals 1 then we can echo ok because we're never going to echo two rows because the username is not going to exist twice we're not going to have users on our website with the same username so now let's try this with Alex and pass on I think I typed pass yet pass one two three and click login and it says ok so now let's return some of the data that we've been processing so we can make sure that we network we already know it matches let's echo out username and will echo out and I will just echo out the password hash so you can see how this is working so once we've logged in correctly a user name and pass one two three you'll see that this is the hash the password hash of what we've entered which is starts with three to two and ends with a 24 so three to two a 24 so we know that it's converted the hash properly we know that anyway so now that the users logged in okay and we've displayed this okay message we don't actually want to do this this was just for our purpose what we now want to do is we want to set a session with the users ID so we've selected the ID from the database but now we need to get this data so I'm going to say user underscore ID and this is going to equal to MySQL result remember this function from when we learn specifics on using databases MySQL result we're taking the result from the query that we run earlier we're going for row zero and we're looking in the ID column so let's just echo out user ID so we know this works properly let's test now with adding another user so we can see if this ID is returned correctly for each user we login