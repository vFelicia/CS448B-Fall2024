so now that we've got that sorted we're not going to run into where any errors later on in our program update count doesn't need to take anything for now but we need to make user IP global for this function the first function we're going to be working on is the update count because this is probably the most simplest all we need to do is run a function to grab the value or a query rather to grab the value from the database we then need to grab this or add one to this and then insert it into the database or update the count field so let's go back to hits count so we can work with this so count at the moment is equal to zero so the first thing we're going to focus on doing is grabbing this value so let's create a query and it's just text for now we're going to run the query in a moment so we can see if the queries worked or not so I'm going to say select count from hits count that's it so let's put these in with apostrophes around them so we can see it better so now we can run the query so query run equals mysql query remember we're using this function and we're just putting the text that we've defined our query up here so this sum query should work because we know that it's working so let's run the page let's first of all call this function okay let's go back to our page and see if we have any errors okay we don't but I wanted to make sure we don't run into any error so I want to say if and I'm going to close this in brackets then we continue okay if not we want to say die and we want to say in fact we won't use die because this can sometimes interfere with the template of your website for example if you are including this at the top of your website you're not going to want to kill the rest of the page just because the query is not working so for now we're going to leave this out at the moment we've just got an if statement we haven't got an ifelse statement so all we're doing is we're saying if this query works then run it otherwise just be silent we're not going to say anything to the user but we could test it from now I suppose and we could say die and and then we can put my SQL error in there and this is a great method for debugging as well if you're not sure about your queries you want to add this in for now let's say you were to add some extra comma in there or something and to refresh you get the error back but like I said before if we get rid of this and then we put in and just before this an apt sign sorry just before this and we refresh we don't get an error back we're just silent about it so let's get rid of that now so presuming our query has run we've checked that our queries run we need to get the value returned from this query and we can do this using the MySQL result function so I'm going to say count equals mysql result now there's a few arguments we need to pass through to this the first one is the query and that's been run so that's query run and the second one is the row that we want to receive a get the value from now obviously we've only got one row only ever going to have one row we're not inserting more than one row we're just updating this single row here so remember this is the row here and this is the field name down here the column so row and column so we've got count equal to zero at the moment it's on the zero row so the first row is the zero row because remember we start at zero and the counting so we've got zero so we type zero in there and lastly we need to specify the field name which is count so I can just write count in there so now the value count this this here is equal to zero so let's echo count out to see what happens so update count functions now going to give us a zero back so let's just change this inside of our database to make sure that everything is working let's just give this a value of say twenty one we can go back to our page refresh and we get this value back so we know that everything's working properly let's just change this back to zero click go okay so back to zero now that we've got this count variable we can create a new variable called count Inc and that is going to be equal to count plus plus oh sorry Cal plus one otherwise we could say count plus plus but for now I'm just want to create a new variable to keep things simple so count Inc equals count plus one so now what we've got is we've got the original value which is zero let me just click back to here for the original value which is equal to zero then we've got the new value which is equal to one now because our original value is zero so now what we need to do inside here is perform another query to update this value so again we say query you can say query two or query update equals so we're saying update and count oh no sorry we're saying update hits count set count equal to and this is just going to be our count Inc value so count Inc so we can also enclose this in single quotation marks so update hits count to update this table that's not enough information now we need to say what we want to set so a setting count which is equal to let's just go down this here set that this value to count Inc which is now equal to one because we've refreshed so now we can run this query so query update run equals MySQL query remember we require this function to actually process our query so just doing this isn't enough so and that is query update and now we can use exactly the same structure here and we can say if and enclose this in brackets if query update run equals so if that is if that runs then we're going to echo out okay for now but we don't actually need to do that so I mean eventually we're not going to need this if statement we just need the query update and we can put an out sign in front of it but for our purposes now we're going to check this query has been successfully executed so let's go back to our table and back here so we know that we're definitely on 0 so our counters on 0 at the moment now with everything I've explained this should when we refresh the page call this function we're calling the update count function down here and it should update the value and increment it by one so let's refresh and we've got an OK value back here let's go back to PHP myadmin and click browse and you can now see that count is equal to 1