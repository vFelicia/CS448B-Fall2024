hello this is Alex from PHP academy' dog back with another video tutorial for the new Boston now in this tutorial we're looking at using the GHD library with PHP to generate an image based on a security code that we're going to make look much like this so it's a hard to read M code so it's going to be hard to read by bots that may be browsing data forms of browsing trying to submit forms obviously they're freely accessible to submit data through but if we add this simple functionality to perform it makes it harder to see so that's basically what we're going to be creating we're going to be using this creating this obviously in PHP but we're going to be using the GE library to generate our numbers we're going to have four characters you can see if I if I just refresh the page you can see that these numbers and in fact the the debtor the lines to skip the squiggly lines around them the noise if you like change as well so we're going to learn how to create one of these forms and then we're going to learn how to create well first of all the image itself we're going to learn how to create and then what we'll do is we're going to learn to create this little form here that allows us to actually match them so at the moment I can see an 8 a 3 a 1 I think an 8 so if I type 8 3 also at 8 3 1 & 8 and I click Submit we have this little confirmation up here a match now if I was to type the code in wrong so I could type 9 9 9 9 in here and click Submit you can see it says invalid code try again here I've got 3 7 double 0 I think click Submit and a match so you can see how you know this is quite flowing you can add it straight into your form as well so when you submit your form this must match as well and every time you resubmit a form say the user gets it wrong you can keep your data but you this will always change and they'll have to try again so the first thing we need to do let's talk about the flow of the program because we need to establish how we're going to do this before we actually do it now if you've already seen my tutorial on creating text to images then this will make a lot more sense so please if you haven't already watched that go back and have a look at the text image tutorial it will but it basically covers converting an email address to an image in order to maintain some level of security on a website with regards to spam and bots scanning through and taking email addresses so have a look at that tutorial in your learn the 90% of what we're going to be doing in this tutorial so it's very important you understand how to create images from text using GD first of all second of all if you know how if you know all of this you need to ensure that you've got Gd installed I'm using an X amp package so PHP comes with GD automatically installed the third thing to bear in mind is that the flow of the program and how it works so we need to think about first of all what we're doing here now the random numbers that you see are using the generated using the round function in PHP now what we're doing is we're setting this as a session now because we're setting this as a session it means that when we submit our page we can check whether it's already submitted and if it is submitted if we have submitted our form we can we can make the well if basically the flow of it is is that you type in your code here so we can type a thousand for example and it says invalid code try again so asks us to try again so we we try the code one and we store this value in a session so it's saved in a session which means that when we generate the image file itself in generate PHP so let's go over to generate PHP you can see this is where the image stems from and obviously the the numbers the same with regards to this however because we are setting the session on the index file this will change each time so if this doesn't make sense then it will when we go into the code the third thing you have to bear in mind is that we're using true type fonts then you can see that this fonts are sort of squirrely fun I've called that inside my inside my fire I've called that font TF F or t TF sorry because it's a true type font so we're going to be using in introducing a different function and this is called image TTFN text so we're creating text in an image format but we're using a true type font and we're going to import that file as well or at least incorporate it into this function and this function takes a couple more parameters that we haven't already looked at in other tutorials we're also going to be looking at the image line function as well so if you'd like to read up on them beforehand please feel free to do so say you understand the tutorial a lot better otherwise we're going to crack straight on with the code okay so now we're into generate dot PHP file there's a few things we need to do before we do anything else well the first thing is we need to change the content type of the page and we do this using the header function so if you've seen the other tutorials on the GED library you'll know that we have to change the header type in order to process this generator PHP file as an image in itself so we're going to say content type and this is image forward slash jpg so we're changing the content of this page now to a JPEG image which is perfect because we're outputting our capture image if you like as a JPEG image okay so the next thing we need to do is set up a few variables or a couple of variables just to ensure now we know what we're doing now the first one is the Exce that we're going to be inputting into or processing as an image so I'm going to create a variable called text and this is equal to dollar underscore session and I've called my cool the variable secured so if we're going to index dot PHP let's first of all set start sessions so a session start and then what we're doing is we're going to be generating this here so whilst I'm programming in here in generate PHP I want to ensure that it's defined first of all in index dot PHP and we've generated a random number so in here I'm simply going to say dollar underscore session secure equals Rand and we're generating a random number between a thousand and nine nine nine nine so this is going to give us a for a figure number