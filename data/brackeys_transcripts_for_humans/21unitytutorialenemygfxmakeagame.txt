With timestamps:

00:00 - thanks for tuning in at
00:02 - braies hello everyone and welcome to
00:04 - video number 21 in make a game a cool
00:08 - series on making a video game in unity
00:11 - so today's video is really really
00:13 - awesome what we're going to be doing is
00:14 - we're going to be importing uh some
00:17 - really cool looking graphics for our
00:20 - enemy and hopefully we get to set it all
00:22 - up uh if not I might split it up into a
00:26 - couple of videos we'll have to see um
00:29 - but this is super awesome whoops go away
00:31 - iCloud star and this is super awesome
00:34 - because it will of course make our game
00:35 - look better and I'll try and teach these
00:38 - techniques uh in a way so you should be
00:41 - able to import any model uh that you
00:44 - find or make yourself or whatever um so
00:47 - I really try uh to keep these um
00:51 - explanations uh General uh so you can
00:54 - apply them to to other models but um
00:57 - cool so of course if you have have any
01:00 - questions just hit head over to fis.com
01:03 - uh I'm there to answer your questions
01:06 - and uh then of course I want to mention
01:09 - that the model we are going to be using
01:11 - today was made by a cool uh guy named
01:14 - Seine iben and I will have a link to
01:18 - either a Facebook page or something of
01:20 - his he also provides other cool uh
01:23 - models and uh stuffff which you should
01:26 - definitely check
01:27 - out uh but another thing is that the
01:30 - model that we're going to be using can
01:32 - be found at uh at bra.com if we hit Ono
01:36 - projects and uh we look for the me a
01:40 - game course here uh I really need to
01:42 - redesign this page it's it's not really
01:45 - pretty but here you can download the
01:47 - scripts and assets and I will make sure
01:49 - to update that so the model we're going
01:52 - to be using is included so that's enough
01:56 - talking for now let's open up the mega
01:58 - game assets pack that you've done
01:59 - downloaded and also let's open up our
02:02 - project as we left it last time remember
02:04 - we ported it over to Unity 5 so it
02:07 - should look somewhat like this and uh at
02:11 - the moment when we hit play uh you can
02:13 - see that we can oops play here cool we
02:17 - can roll over and we have this Cube we
02:19 - have a dying mechanic when we hit it uh
02:22 - and uh we can also whoops for some
02:24 - reason it did it twice there we might
02:26 - fix that at some point and uh we can
02:28 - also just jump on top it and it will
02:31 - explode um however there is currently a
02:34 - bug with the particle system uh and I
02:36 - will show you what that uh what's that
02:39 - what that is all about um a bit later so
02:43 - now let's import the model so navigate
02:45 - to Mega game assets pack I'm just going
02:48 - to remove this here cool and uh then go
02:52 - under models and in here you see Mario
02:56 - enemy and uh we open that up and you can
03:00 - see there are three blender files first
03:02 - one the enemy. blend is the actual model
03:06 - that we're going to be using so that's
03:08 - kind of our starting point the other
03:10 - ones here enemy die and enemy walk also
03:13 - includes the enemy plus a couple of
03:15 - animations and it's very normal to do
03:17 - this where you have uh basically the
03:20 - enemy three times but with a single
03:22 - animation on each uh it's it's a very
03:25 - normal way of kind of um of handling
03:27 - these models that have
03:30 - animations so you'll see that quite a
03:32 - lot but it's really easy because in
03:34 - unity we can simply take the model from
03:36 - the enemy and the Rick from the enemy
03:39 - and then take the animation the die
03:41 - animation and walk animation from these
03:43 - two files and uh kind of link them to
03:47 - the enemy model so you'll see how we are
03:49 - going to be doing that and then we also
03:51 - have a body diffuse Mater or Texture
03:54 - here and then I diffuse texture so if we
03:57 - open this up let say it's pretty simple
04:00 - image uh that maps with the UVS cool and
04:05 - here you can kind of see what the enemy
04:07 - will uh look like uh but I don't want to
04:10 - spoil it fully it's of course from Mario
04:13 - where where else would we get a typical
04:16 - enemy so in here we are going to go
04:18 - under models we're going to make a
04:20 - folder here called Mario enemy or maybe
04:25 - just enemy I'm just going to call it
04:27 - enemy so double click that and of course
04:30 - you don't have to use the one I'm using
04:32 - uh it's it's of course going to be a bit
04:35 - easier if you can follow along the exact
04:37 - same way that I do it um but you can
04:39 - find any um nice decent looking model on
04:43 - the on the interwebs or use blender to
04:46 - create your own there a bunch of
04:48 - tutorials on the uh on YouTube on using
04:51 - blender too anyways so let's just select
04:55 - all of this and drag it into our newly
04:57 - created enemy folder
05:00 - and unity is going to load it all in and
05:02 - it might take a bit of time because it's
05:05 - uh importing these blender files but um
05:08 - actually that was fairly decent uh on
05:10 - the speed there and uh when you import
05:14 - it just like this uh you might see that
05:17 - uh the enemy gets it uh its material
05:21 - applied right away or you might see what
05:23 - I just saw that I will have to do it
05:25 - manually uh so that's kind of a 50 50/50
05:29 - chance
05:30 - I did this practice once and it and it
05:32 - for some reason linked up there um cool
05:35 - so what we're going to do here is we're
05:37 - going to take our enemy and bring it
05:39 - into the scene and you can see that it's
05:42 - way too big so let's just scale it down
05:45 - but instead of scaling it in here I want
05:47 - to use the scale factor here uh I just
05:51 - think that makes it a bit easier to work
05:53 - with and I'm going to set it to
05:57 - 0.2 uh other than that we we can pretty
06:00 - much leave any everything else as is
06:04 - looks good so let's it apply on
06:07 - that that's a lot better and we can do
06:10 - the same thing with these two so 0.2 not
06:13 - that it's going to make a difference
06:15 - because the model here is not something
06:17 - that we're going to be using just nice
06:19 - to keep it clean then select all of them
06:21 - go under rig and just make sure it's set
06:24 - to generic and create from this model
06:27 - and then we can set the root node
06:30 - uh to
06:31 - amateure and basically the root node is
06:33 - the top bone of your skeleton hierarchy
06:37 - uh so if you have modeled before you
06:39 - know what I'm talking about if not just
06:42 - select this then hit
06:44 - apply and uh it's just going to repport
06:48 - everything cool then we can go under
06:50 - animations and this is where you'll see
06:52 - also if we expand these you can see that
06:55 - under our enemy we have only the default
06:57 - take which we are not going to be using
06:59 - so we can select our enemy and disable
07:02 - import
07:03 - animations then we can select the enemy
07:05 - die and see that we have a default take
07:08 - which we're not going be using so we can
07:10 - remove that and then we have the enemy
07:12 - die so we can apply
07:14 - that just to tidy things up a bit and
07:17 - then on the enemy walk we can again
07:19 - remove the default take and just leave
07:21 - the enemy walk we also want to make sure
07:24 - that the enemy walk uh Loops as we play
07:27 - through it you can see it does so down
07:29 - here but we also want to have it do so
07:31 - in game and to make sure it does that uh
07:34 - simply enable Loop time and that's going
07:37 - to make sure it Loops so if for some
07:39 - reason your animation doesn't Loop
07:41 - simply find it by selecting the model
07:44 - going under the animations Tab and
07:46 - enabling Loop time if uh your model kind
07:51 - of jumps between looping and all that
07:53 - you can try and uh play around with uh
07:56 - baking in some of the root transforms uh
07:59 - and uh messing around with these
08:01 - settings uh it's going to work fine for
08:03 - the model that we're using here so um
08:06 - but yeah just so you know that's where
08:08 - you should play around with
08:10 - things cool so here you can see our
08:13 - shiny guy and uh let's add some uh
08:16 - materials to him so if we open up our
08:19 - enemy and go on the materials folder you
08:22 - can see he has a body material and an
08:24 - eye material and then what we
08:27 - do uh actually I know why they weren't
08:30 - automatically assigned now uh it's
08:33 - because this was named body diffuse and
08:35 - this was named I diffused if that has
08:38 - just had just been body and this I they
08:40 - would have automatically been assigned
08:43 - so you can of course rename them before
08:45 - importing but it's really as easy as
08:48 - selecting um actually I'm going to do
08:50 - that up here so selecting our
08:53 - body uh finding the material here and
08:56 - simply dragging the body diffuse into
08:58 - the be Channel and we're going to do s
09:01 - the same thing with the eyes so we're
09:03 - going to select eyes open up the uh
09:06 - material and then just drag the ey
09:09 - diffuse on the Albedo so now you can see
09:12 - he already looks a lot nicer that when
09:15 - then we can maybe select him and rotate
09:17 - him a bit so he faces the light that's a
09:21 - lot better and uh then we can select uh
09:24 - his two materials here so let's select
09:26 - the body uh let's make that brighter
09:29 - here something like that looks pretty
09:32 - good and maybe bump down the smoothness
09:35 - a
09:35 - bit something like that so our specular
09:39 - isn't as
09:40 - harsh uh then we can select the ey and
09:43 - here I really want to get that uh
09:45 - concentrated uh specula so I'm going to
09:48 - really bump up the smoothness quite a
09:50 - bit so we can get that really glossy eye
09:53 - feel I think that looks really really
09:57 - awesome uh with the light reflect cting
09:59 - there cool and I'm also going to bump up
10:02 - the
10:02 - albo uh color just a bit not too much
10:07 - there so now we have an awesome looking
10:09 - enemy and we can actually get him
10:11 - animated fairly quickly because we
10:13 - already have some nice looking
10:15 - animations we have a die animation looks
10:17 - like that I can just expand on this a
10:20 - bit see there and uh here we have the
10:24 - walk
10:25 - animation that's pretty much everything
10:27 - we're going to be needing for this
10:28 - fairly simple
10:29 - symol enemy so what we can do now is we
10:34 - can Implement him into our uh Cube so
10:38 - let's first select the enemy and uh
10:41 - let's drag him let's see here uh so we
10:45 - can find our enemy Center open up the
10:47 - enemy you can see we have a graphics
10:49 - object here uh so what I want to do is
10:52 - simply just um replace the graphics
10:55 - object with our new gra uh Graphics here
10:58 - so drag him under there rename him to
11:03 - Graphics take the other Graphics object
11:06 - and simply uh copy this component then
11:09 - remove it then we can uh just entirely
11:14 - disable uh and it's going to or remove
11:18 - this Cube I'm just going to wait wait a
11:20 - second then I'll show you how to solve
11:21 - that what it just said there uh but then
11:24 - select our Graphics here and then go up
11:26 - here and select uh paste component as
11:29 - new so now we have our box collider
11:31 - there then we can reset the transform by
11:33 - right clicking and uh we can also rotate
11:37 - them 90° you can type in 90 up here on
11:40 - the
11:41 - Y and uh what we want to do here is we
11:44 - want to drag him down so he's standing
11:47 - on okay now it's time to delete this
11:49 - Cube so we can uh simply select it and
11:52 - hit
11:53 - delete go continue and this is where a
11:56 - lot of people get lost because now this
11:58 - a't is isn't uh blue anymore because
12:00 - we've lost our prefab connection so how
12:03 - does do we um remove objects with while
12:07 - still kind of maintaining or um keeping
12:11 - uh ourselves linked to the preat well
12:15 - it's actually still linked but it's just
12:18 - not a connection anymore what that means
12:21 - is that if we want this to appear and
12:23 - work as a prefab again all we have to do
12:26 - is select the root here enemy Center and
12:28 - hit apply and everything goes back to
12:31 - Blue so that's something you will have
12:33 - to remember whenever you are um removing
12:37 - objects from a preab so now let's just
12:39 - drag him down here until he stands on
12:42 - the ground firmly there and uh then we
12:45 - can adjust the position of the Box
12:47 - collider using uh the center and size
12:51 - values
12:53 - here and uh one thing that you will
12:56 - notice is if you hold down Alt
12:59 - uh you can find tune the values a lot
13:02 - more than if you don't so that's nice if
13:05 - you really want to get precise with uh
13:13 - things so
13:16 - just kind of get it right that's going
13:18 - to be just fine for now cool we could of
13:21 - course be using a mes collider but I
13:23 - think that would just be overdoing
13:25 - things especially because this guy is
13:28 - going to be moving so that wouldn't
13:29 - wouldn't make too much sense uh we could
13:31 - then use multiple sphere colliders maybe
13:34 - to kind of brick him out uh but I really
13:37 - don't see the need uh I think a a box
13:40 - collider will juice just fine and it
13:42 - will definitely be a lot a lot less CPU
13:46 - intensive cool so now that we have that
13:48 - in place uh let's go ahead and adjust
13:50 - our killbox and hit box so let's just
13:53 - bring up our hit hit box here uh
13:56 - something like there looks pretty good
13:58 - let's just drag it out a bit drag it out
14:02 - here something like that so if we jump
14:05 - on that from any angle it's going to be
14:07 - really good he's going to die and then
14:10 - our
14:11 - killbox simply want to move that up a
14:13 - bit and uh scale it up a bit
14:17 - too something like that is going to be
14:20 - our kill box so now when we select
14:23 - everything here we can see kind of our
14:25 - Collis structure and I think that looks
14:29 - fairly great um there's a chance that we
14:31 - might hit the edge here without hitting
14:34 - uh either the um kill box or the hit box
14:38 - so maybe we'll just bring up the killbox
14:41 - a
14:44 - bit to kind of get rid of that edge case
14:48 - scenario we could be using more
14:50 - colliders uh to make it even more
14:52 - precise uh but I think we've kind of
14:54 - ruined that chance now uh then maybe a
14:58 - bit more on on the hitbox here just
15:01 - block that out and yeah I think in in
15:04 - practice this is going to be working
15:06 - just
15:07 - fine cool so now that we have that in
15:10 - place uh we can go ahead and hit play
15:12 - now and things should be working he's
15:15 - just not animating yet and uh we can die
15:18 - game
15:20 - over and uh we should also be able to
15:22 - kill
15:23 - him indeed we can one thing you will
15:26 - notice and this is was what I was
15:28 - talking about before with the particles
15:30 - is if we hit him while he's away from
15:33 - the center oops I'm so bad at this game
15:38 - um I will attempt to hit him while he's
15:41 - not in the center there the part
15:44 - particles will always spawn at the
15:46 - center point and the reason why is if we
15:49 - look at the enemy Center this is where
15:51 - our enemy script sits and if we double
15:54 - click on the enemy scripts to open it up
15:56 - in mono develop we'll see see that uh we
16:00 - are currently instantiating the death
16:02 - particles at this transform. position
16:06 - and with this rotation uh so that means
16:09 - that they will always spawn right here
16:11 - even though our enemy object has moved
16:15 - over here so that's kind of a problem
16:18 - that we are going to solve uh whilst
16:21 - animating this guy so let's uh start out
16:24 - by kind of creating the animation
16:27 - structure
16:29 - uh we're going to create an animator
16:31 - controller so if you remember we've done
16:33 - this before with the Enemy Center that's
16:35 - what controls him going back and forth
16:38 - now we're going to be doing this with a
16:40 - the move and die
16:42 - animations
16:45 - um actually one thing I want to tweak
16:48 - before we get into that is I just want
16:51 - to kind of rotate him whenever he uh he
16:55 - is going the in the other direction and
16:58 - that's
16:59 - easily done by simply trig the animation
17:01 - that we made for the enemy Center here
17:04 - so if we go under the enemy Center
17:06 - animator I've talked my animator panel
17:09 - down here so I can see it in the scene
17:11 - and game view whilst animating um we can
17:14 - see that we have this enemy
17:16 - move uh animation and uh if we select
17:19 - our enemy Center and go under animation
17:22 - we should we should be able to see it
17:24 - here in action and all I want to do here
17:28 - is simply go under add property make
17:31 - sure you navigate gate under enemy then
17:34 - transform and add the rotation property
17:39 - and uh what we can do with this let's
17:40 - just collapse the position there what we
17:43 - can do with this is that we can make
17:45 - sure that we have a key frame right here
17:48 - then move forward right until we hit the
17:50 - 4 second Mark uh then add a
17:53 - key then go right past it and add
17:57 - another key key and uh this is where uh
18:01 - we'll rotate him so we'll rotate him
18:05 - 180° on the
18:07 - Y oops what's going on oh we are
18:12 - animating the enemy Center we want to of
18:14 - course have the enemy selected Here and
18:16 - Now rotate
18:18 - 180° so we should see him kind of go
18:21 - forward whoa he's acting all kinds of
18:24 - crazy uh so let's go under the curves
18:27 - here
18:28 - uh let's uh oops let's select our
18:33 - rotation let's select the entire curve
18:35 - hit F to focus on it then right click go
18:39 - on flat to make sure that it doesn't do
18:42 - all these spinny things on its own now
18:44 - we can see what is going on and uh
18:47 - indeed it's acting weird it's going fine
18:49 - here it's going forward then it's
18:51 - rotating and then it starts slowly
18:54 - rotating in the other direction and uh
18:56 - that of course makes sense
18:59 - uh because we have a rotation key frame
19:01 - over here too so what we want to do with
19:04 - this is we want to duplicate this Frame
19:06 - here and just paste it over right up
19:10 - until this point so there he will turn
19:13 - again uh what you can do is of course
19:17 - extend this uh so that he uh Waits with
19:22 - rotating uh until he kind of moves uh to
19:27 - the right again but I think this is
19:28 - going to be looking just fine for our
19:31 - purposes can see what that does here
19:34 - rotate and I kind of like that this is a
19:37 - pretty aggressive effect we might
19:43 - just dim it down just a tad but I kind
19:46 - of like how um how how it just cuts off
19:51 - there and uh again if you can always
19:54 - mess around with the curves if you would
19:57 - like there to be some kind kind of
19:58 - smoothing uh but I like the flat mode
20:00 - for this quite a bit so now when we go
20:03 - in and play we should see him follow
20:07 - this
20:08 - pattern indeed we
20:12 - do cool so now that uh he's always
20:17 - facing the correct uh way direction we
20:21 - are going to make sure that he also
20:23 - animates so what we're going to do here
20:26 - is we're going to go into the project we
20:29 - go going to go under models enemy right
20:32 - click create animator controller and we
20:35 - are going to call this enemy
20:40 - controller uh or do we already have an
20:42 - enemy controller no this is the en enemy
20:45 - Center uh cool so enemy controller and
20:48 - then we'll uh go on the graphics object
20:51 - and you'll see it already has a an
20:54 - animator attached by default we can drag
20:57 - in the controller then we can open it up
21:00 - in our animator simply select it and
21:02 - click on the animator and you can see
21:05 - that you have it selected down here then
21:07 - what we want to do in here is we want to
21:10 - uh drag in some animation so we'll just
21:13 - dog it up here we can then
21:16 - expand our enemy
21:18 - die drag that in uh in there we'll also
21:22 - drag in our enemy
21:25 - walk and uh yeah that's the two states
21:28 - that we are going to be using we want to
21:30 - set the walk as the default uh the layer
21:35 - default state so you can see that it
21:37 - goes from our entry point into the enemy
21:40 - walk animation and then we only want to
21:43 - transition to the enemy die if something
21:46 - happens and we'll do this using a new
21:49 - part of the unity mechan uh system which
21:52 - is a trigger before we used bulls and
21:55 - then we uh kind of set them to true and
21:57 - then Qui quickly to false again or
21:59 - whatever but now we have a trigger
22:01 - component uh that simply allows us to
22:03 - trigger the animation without having to
22:06 - keep track of any values so that's super
22:08 - cool so what we can do here is simply
22:10 - call this trigger for die and then we
22:13 - can make a transition from the enemy
22:15 - walk to die and then select that and as
22:19 - the condition make sure we have the
22:21 - condition die uh then we'll make sure to
22:24 - disable has exit time or it's going to
22:27 - wait for the end of the animation and
22:29 - then maybe shrink down the um fade time
22:33 - just a bit so now when we go into G the
22:37 - game and maybe bring the animator down
22:40 - here we'll be able to observe what our
22:42 - enemy does here so he'll walk back and
22:46 - forth and when we click
22:49 - die he'll fall so that's super cool uh
22:53 - we also of course need to uh need him to
22:56 - stop animating but we'll do that through
22:59 - a
23:00 - script awesome so now that we have that
23:03 - in place um we are actually ready to
23:07 - kind of implement all of this uh inside
23:10 - of ja uh in in JavaScript um one thing
23:14 - that we will need to do is we will need
23:17 - to go under our enemy Center um
23:20 - controller here and make sure that it
23:23 - has a kind of non- animating state to
23:26 - transition to so so that it will uh stop
23:29 - moving once the uh character Falls and
23:33 - uh we'll again do this using a trigger
23:34 - and we'll just call that stop uh we'll
23:38 - then create an empty State here simply
23:41 - called
23:42 - um idle or stopped stopped is fine and
23:48 - uh then we can simply make a transition
23:50 - from enemy move one to stopped uh when
23:54 - stop the the stop triggers is uh is um
23:59 - set and uh then also you want to select
24:03 - the stopped uh State and make sure that
24:06 - right def false is set to false because
24:09 - right now if we hit play here and then
24:11 - stop
24:13 - him oops we also have to make sure that
24:17 - uh has exit time is set to false so
24:21 - right now if we just stop
24:23 - him oh actually that worked just fine
24:29 - surprising I expected him to jump right
24:33 - back oh he does he he jumps right to the
24:36 - center so we just want to select stopped
24:38 - here and disabled right the fals and now
24:41 - he will stop uh his uh walk animation or
24:45 - uh stop moving and just stay put where
24:48 - he um he was when the stop trigger was
24:52 - C cool so let's move on now now we can
24:56 - go into our enemy script and kind of
24:59 - edited uh to uh fit our new animation
25:04 - setup so let's double click the enemy
25:06 - here to open it up in mono develop and
25:09 - we want to make a couple of variables
25:11 - the first one is going to be to our
25:15 - enemy animator and it's going to be of
25:18 - type
25:19 - animator the second one is going to be
25:22 - the center animator that's also going to
25:26 - be a type animator
25:28 - and um I want this Sentry animator to be
25:32 - a private variable because we'll just
25:35 - fill that in ourselves then we're going
25:37 - to make in the F start function actually
25:41 - let's do a wake a wake is is generally
25:44 - used for making references to components
25:46 - and game objects then in here we can set
25:50 - Center
25:51 - anim equal to uh and then
25:56 - transform. get get
26:00 - component and we're going to get the
26:03 - animator component so that should be
26:06 - working I'm I'm too used to CP uh this
26:10 - might not be the correct way of doing
26:13 - things but if I remember correctly this
26:15 - should work then we are not going to
26:17 - destroy the game object anymore when we
26:19 - jump on his head and we don't want these
26:22 - uh particles to
26:24 - spawn uh at the transform position but
26:27 - in that at the uh enemy anim do
26:31 - transform.position and the same here so
26:34 - enemy an. transform.
26:38 - rotation uh then what we can also
26:40 - do is we can uh set the enemy
26:44 - [Music]
26:46 - anim do set trigger and uh the trigger
26:50 - name is
26:52 - die so the enemy will die there and uh
26:57 - then we can say centry
27:01 - anim
27:04 - do set trigger and then it was stop I
27:08 - believe there we go so that should
27:11 - actually do what we wanted to and
27:14 - hopefully we'll get no
27:15 - errors no we don't I actually remembered
27:18 - how to do this uh implicit downcast from
27:21 - component to uh animator yes I am aware
27:25 - that this is a downcast but um actually
27:29 - not sure how to kind
27:33 - of if we want to make this explicit in
27:36 - JavaScript I believe that we just write
27:39 - as
27:42 - animator yeah now it's an explicit
27:44 - downcast so basically what we're doing
27:46 - is we're saying that we want this get
27:49 - component uh to turn into an animator
27:53 - and we're doing that by using an S
27:56 - animator uh add on that's that's called
27:59 - casting Okay cool so now we should be
28:02 - able to select our enemy Center and then
28:05 - drag our enemy
28:08 - anim on here the graphics object there
28:12 - and uh it should gather its own animator
28:14 - itself so now when we hit
28:17 - play and uh we can see him walking here
28:21 - back and forth and when we jump on his
28:25 - head he dies but he does so kind of
28:29 - weirdly um so let's see if we can fix
28:32 - this so what has rotated here so that's
28:36 - still facing the correct way I believe
28:40 - and the enemy here that's rotated for
28:43 - some reason why does that rotate no it
28:47 - no it
28:48 - hasn't so what's going on uh let's
28:52 - see this for some reason has no
28:56 - influence on
28:58 - the graphics object even though it's ped
29:02 - to
29:03 - [Music]
29:05 - that that's super weird so let's just
29:07 - try that
29:11 - again jump on his head if if I'm able
29:15 - to oh my God this is
29:22 - embarrassing that
29:25 - worked okay so this is curious to me
29:28 - there you can see another bar we'll have
29:29 - to fix um but that's not really what I
29:33 - wanted to happen here maybe didn't have
29:37 - time to save the
29:40 - script okay so now it's working so we'll
29:42 - just assume oh now I know what was
29:45 - happening there of course okay so when
29:47 - he was very quickly rotating over here
29:50 - that's when he died and then of course
29:53 - the entire graphic was just
29:56 - flipped yeah so that's not really a huge
29:59 - amount of things we can do about that I
30:01 - mean we could reset the position but I
30:05 - don't really think that's something we
30:07 - want to
30:08 - do no that's just stupid let let's not
30:11 - worry about that and if if we encounter
30:14 - it a lot of times we'll fix it I I'm
30:16 - sure we'll find a way cool so uh the
30:19 - last thing is I want want to just gather
30:21 - some re uh references to these kill
30:24 - boxes because I think we should disable
30:26 - them um once the enemy dies um so in
30:31 - order for us to do that we'll also need
30:33 - to disable the Box collider uh
30:36 - so very easily easy way to do this is
30:40 - simply uh copying this box collider then
30:45 - removing the component then we are going
30:48 - to add an empty
30:51 - object call this box
30:55 - collider drag that under the enemy
30:58 - object reset its transform uh then
31:01 - simply go up here and paste the
31:04 - component as new and we can simply drag
31:07 - this
31:08 - down or uh I'm sorry reset the Y
31:12 - position here the center there and then
31:15 - drag it up a bit something like that and
31:20 - uh then what we can do is create another
31:23 - MC object and we'll just call this
31:28 - colliders drag that onto the enemy drag
31:31 - the Box hit and kill uh box colliders
31:35 - under there hit continue go up here hit
31:38 - apply and uh now we can head into the
31:41 - script create a
31:44 - variable that we are going to call
31:47 - variable
31:49 - colliders uh yeah colliders of type
31:54 - transform and uh then down here we will
31:57 - simply either destroy them or simply
32:00 - disable them I think we'll just destroy
32:02 - the object I don't see any reason why we
32:04 - would keep it so simply destroy the
32:08 - liers do game object something like that
32:13 - uh and then in here we'll make sure that
32:16 - we make a reference to our colliders
32:19 - object there and now when we hit play we
32:24 - should be able to jump on the guy's head
32:28 - and he falls down and then now we are
32:31 - unable to collide with him so that was
32:35 - basically everything for making an enemy
32:38 - let me just see how long that video was
32:41 - who okay so I think it's just barely uh
32:44 - short enough to keep it in one video so
32:46 - I hope you enjoyed it I really wanted to
32:49 - show every step of the way when making a
32:51 - character like this it's it's really a
32:53 - lot of tweaking and trying to get him
32:56 - work with the mechanics and all that and
32:59 - I I really didn't want to cut away on on
33:01 - any of the figuring out of stuff uh
33:04 - because I think it's very really
33:05 - important that you get to see that part
33:07 - of the process too so um thanks for
33:09 - watching I hope you enjoyed it and I'll
33:11 - see you in the next
33:13 - [Music]
33:22 - video

Cleaned transcript:

thanks for tuning in at braies hello everyone and welcome to video number 21 in make a game a cool series on making a video game in unity so today's video is really really awesome what we're going to be doing is we're going to be importing uh some really cool looking graphics for our enemy and hopefully we get to set it all up uh if not I might split it up into a couple of videos we'll have to see um but this is super awesome whoops go away iCloud star and this is super awesome because it will of course make our game look better and I'll try and teach these techniques uh in a way so you should be able to import any model uh that you find or make yourself or whatever um so I really try uh to keep these um explanations uh General uh so you can apply them to to other models but um cool so of course if you have have any questions just hit head over to fis.com uh I'm there to answer your questions and uh then of course I want to mention that the model we are going to be using today was made by a cool uh guy named Seine iben and I will have a link to either a Facebook page or something of his he also provides other cool uh models and uh stuffff which you should definitely check out uh but another thing is that the model that we're going to be using can be found at uh at bra.com if we hit Ono projects and uh we look for the me a game course here uh I really need to redesign this page it's it's not really pretty but here you can download the scripts and assets and I will make sure to update that so the model we're going to be using is included so that's enough talking for now let's open up the mega game assets pack that you've done downloaded and also let's open up our project as we left it last time remember we ported it over to Unity 5 so it should look somewhat like this and uh at the moment when we hit play uh you can see that we can oops play here cool we can roll over and we have this Cube we have a dying mechanic when we hit it uh and uh we can also whoops for some reason it did it twice there we might fix that at some point and uh we can also just jump on top it and it will explode um however there is currently a bug with the particle system uh and I will show you what that uh what's that what that is all about um a bit later so now let's import the model so navigate to Mega game assets pack I'm just going to remove this here cool and uh then go under models and in here you see Mario enemy and uh we open that up and you can see there are three blender files first one the enemy. blend is the actual model that we're going to be using so that's kind of our starting point the other ones here enemy die and enemy walk also includes the enemy plus a couple of animations and it's very normal to do this where you have uh basically the enemy three times but with a single animation on each uh it's it's a very normal way of kind of um of handling these models that have animations so you'll see that quite a lot but it's really easy because in unity we can simply take the model from the enemy and the Rick from the enemy and then take the animation the die animation and walk animation from these two files and uh kind of link them to the enemy model so you'll see how we are going to be doing that and then we also have a body diffuse Mater or Texture here and then I diffuse texture so if we open this up let say it's pretty simple image uh that maps with the UVS cool and here you can kind of see what the enemy will uh look like uh but I don't want to spoil it fully it's of course from Mario where where else would we get a typical enemy so in here we are going to go under models we're going to make a folder here called Mario enemy or maybe just enemy I'm just going to call it enemy so double click that and of course you don't have to use the one I'm using uh it's it's of course going to be a bit easier if you can follow along the exact same way that I do it um but you can find any um nice decent looking model on the on the interwebs or use blender to create your own there a bunch of tutorials on the uh on YouTube on using blender too anyways so let's just select all of this and drag it into our newly created enemy folder and unity is going to load it all in and it might take a bit of time because it's uh importing these blender files but um actually that was fairly decent uh on the speed there and uh when you import it just like this uh you might see that uh the enemy gets it uh its material applied right away or you might see what I just saw that I will have to do it manually uh so that's kind of a 50 50/50 chance I did this practice once and it and it for some reason linked up there um cool so what we're going to do here is we're going to take our enemy and bring it into the scene and you can see that it's way too big so let's just scale it down but instead of scaling it in here I want to use the scale factor here uh I just think that makes it a bit easier to work with and I'm going to set it to 0.2 uh other than that we we can pretty much leave any everything else as is looks good so let's it apply on that that's a lot better and we can do the same thing with these two so 0.2 not that it's going to make a difference because the model here is not something that we're going to be using just nice to keep it clean then select all of them go under rig and just make sure it's set to generic and create from this model and then we can set the root node uh to amateure and basically the root node is the top bone of your skeleton hierarchy uh so if you have modeled before you know what I'm talking about if not just select this then hit apply and uh it's just going to repport everything cool then we can go under animations and this is where you'll see also if we expand these you can see that under our enemy we have only the default take which we are not going to be using so we can select our enemy and disable import animations then we can select the enemy die and see that we have a default take which we're not going be using so we can remove that and then we have the enemy die so we can apply that just to tidy things up a bit and then on the enemy walk we can again remove the default take and just leave the enemy walk we also want to make sure that the enemy walk uh Loops as we play through it you can see it does so down here but we also want to have it do so in game and to make sure it does that uh simply enable Loop time and that's going to make sure it Loops so if for some reason your animation doesn't Loop simply find it by selecting the model going under the animations Tab and enabling Loop time if uh your model kind of jumps between looping and all that you can try and uh play around with uh baking in some of the root transforms uh and uh messing around with these settings uh it's going to work fine for the model that we're using here so um but yeah just so you know that's where you should play around with things cool so here you can see our shiny guy and uh let's add some uh materials to him so if we open up our enemy and go on the materials folder you can see he has a body material and an eye material and then what we do uh actually I know why they weren't automatically assigned now uh it's because this was named body diffuse and this was named I diffused if that has just had just been body and this I they would have automatically been assigned so you can of course rename them before importing but it's really as easy as selecting um actually I'm going to do that up here so selecting our body uh finding the material here and simply dragging the body diffuse into the be Channel and we're going to do s the same thing with the eyes so we're going to select eyes open up the uh material and then just drag the ey diffuse on the Albedo so now you can see he already looks a lot nicer that when then we can maybe select him and rotate him a bit so he faces the light that's a lot better and uh then we can select uh his two materials here so let's select the body uh let's make that brighter here something like that looks pretty good and maybe bump down the smoothness a bit something like that so our specular isn't as harsh uh then we can select the ey and here I really want to get that uh concentrated uh specula so I'm going to really bump up the smoothness quite a bit so we can get that really glossy eye feel I think that looks really really awesome uh with the light reflect cting there cool and I'm also going to bump up the albo uh color just a bit not too much there so now we have an awesome looking enemy and we can actually get him animated fairly quickly because we already have some nice looking animations we have a die animation looks like that I can just expand on this a bit see there and uh here we have the walk animation that's pretty much everything we're going to be needing for this fairly simple symol enemy so what we can do now is we can Implement him into our uh Cube so let's first select the enemy and uh let's drag him let's see here uh so we can find our enemy Center open up the enemy you can see we have a graphics object here uh so what I want to do is simply just um replace the graphics object with our new gra uh Graphics here so drag him under there rename him to Graphics take the other Graphics object and simply uh copy this component then remove it then we can uh just entirely disable uh and it's going to or remove this Cube I'm just going to wait wait a second then I'll show you how to solve that what it just said there uh but then select our Graphics here and then go up here and select uh paste component as new so now we have our box collider there then we can reset the transform by right clicking and uh we can also rotate them 90° you can type in 90 up here on the Y and uh what we want to do here is we want to drag him down so he's standing on okay now it's time to delete this Cube so we can uh simply select it and hit delete go continue and this is where a lot of people get lost because now this a't is isn't uh blue anymore because we've lost our prefab connection so how does do we um remove objects with while still kind of maintaining or um keeping uh ourselves linked to the preat well it's actually still linked but it's just not a connection anymore what that means is that if we want this to appear and work as a prefab again all we have to do is select the root here enemy Center and hit apply and everything goes back to Blue so that's something you will have to remember whenever you are um removing objects from a preab so now let's just drag him down here until he stands on the ground firmly there and uh then we can adjust the position of the Box collider using uh the center and size values here and uh one thing that you will notice is if you hold down Alt uh you can find tune the values a lot more than if you don't so that's nice if you really want to get precise with uh things so just kind of get it right that's going to be just fine for now cool we could of course be using a mes collider but I think that would just be overdoing things especially because this guy is going to be moving so that wouldn't wouldn't make too much sense uh we could then use multiple sphere colliders maybe to kind of brick him out uh but I really don't see the need uh I think a a box collider will juice just fine and it will definitely be a lot a lot less CPU intensive cool so now that we have that in place uh let's go ahead and adjust our killbox and hit box so let's just bring up our hit hit box here uh something like there looks pretty good let's just drag it out a bit drag it out here something like that so if we jump on that from any angle it's going to be really good he's going to die and then our killbox simply want to move that up a bit and uh scale it up a bit too something like that is going to be our kill box so now when we select everything here we can see kind of our Collis structure and I think that looks fairly great um there's a chance that we might hit the edge here without hitting uh either the um kill box or the hit box so maybe we'll just bring up the killbox a bit to kind of get rid of that edge case scenario we could be using more colliders uh to make it even more precise uh but I think we've kind of ruined that chance now uh then maybe a bit more on on the hitbox here just block that out and yeah I think in in practice this is going to be working just fine cool so now that we have that in place uh we can go ahead and hit play now and things should be working he's just not animating yet and uh we can die game over and uh we should also be able to kill him indeed we can one thing you will notice and this is was what I was talking about before with the particles is if we hit him while he's away from the center oops I'm so bad at this game um I will attempt to hit him while he's not in the center there the part particles will always spawn at the center point and the reason why is if we look at the enemy Center this is where our enemy script sits and if we double click on the enemy scripts to open it up in mono develop we'll see see that uh we are currently instantiating the death particles at this transform. position and with this rotation uh so that means that they will always spawn right here even though our enemy object has moved over here so that's kind of a problem that we are going to solve uh whilst animating this guy so let's uh start out by kind of creating the animation structure uh we're going to create an animator controller so if you remember we've done this before with the Enemy Center that's what controls him going back and forth now we're going to be doing this with a the move and die animations um actually one thing I want to tweak before we get into that is I just want to kind of rotate him whenever he uh he is going the in the other direction and that's easily done by simply trig the animation that we made for the enemy Center here so if we go under the enemy Center animator I've talked my animator panel down here so I can see it in the scene and game view whilst animating um we can see that we have this enemy move uh animation and uh if we select our enemy Center and go under animation we should we should be able to see it here in action and all I want to do here is simply go under add property make sure you navigate gate under enemy then transform and add the rotation property and uh what we can do with this let's just collapse the position there what we can do with this is that we can make sure that we have a key frame right here then move forward right until we hit the 4 second Mark uh then add a key then go right past it and add another key key and uh this is where uh we'll rotate him so we'll rotate him 180° on the Y oops what's going on oh we are animating the enemy Center we want to of course have the enemy selected Here and Now rotate 180° so we should see him kind of go forward whoa he's acting all kinds of crazy uh so let's go under the curves here uh let's uh oops let's select our rotation let's select the entire curve hit F to focus on it then right click go on flat to make sure that it doesn't do all these spinny things on its own now we can see what is going on and uh indeed it's acting weird it's going fine here it's going forward then it's rotating and then it starts slowly rotating in the other direction and uh that of course makes sense uh because we have a rotation key frame over here too so what we want to do with this is we want to duplicate this Frame here and just paste it over right up until this point so there he will turn again uh what you can do is of course extend this uh so that he uh Waits with rotating uh until he kind of moves uh to the right again but I think this is going to be looking just fine for our purposes can see what that does here rotate and I kind of like that this is a pretty aggressive effect we might just dim it down just a tad but I kind of like how um how how it just cuts off there and uh again if you can always mess around with the curves if you would like there to be some kind kind of smoothing uh but I like the flat mode for this quite a bit so now when we go in and play we should see him follow this pattern indeed we do cool so now that uh he's always facing the correct uh way direction we are going to make sure that he also animates so what we're going to do here is we're going to go into the project we go going to go under models enemy right click create animator controller and we are going to call this enemy controller uh or do we already have an enemy controller no this is the en enemy Center uh cool so enemy controller and then we'll uh go on the graphics object and you'll see it already has a an animator attached by default we can drag in the controller then we can open it up in our animator simply select it and click on the animator and you can see that you have it selected down here then what we want to do in here is we want to uh drag in some animation so we'll just dog it up here we can then expand our enemy die drag that in uh in there we'll also drag in our enemy walk and uh yeah that's the two states that we are going to be using we want to set the walk as the default uh the layer default state so you can see that it goes from our entry point into the enemy walk animation and then we only want to transition to the enemy die if something happens and we'll do this using a new part of the unity mechan uh system which is a trigger before we used bulls and then we uh kind of set them to true and then Qui quickly to false again or whatever but now we have a trigger component uh that simply allows us to trigger the animation without having to keep track of any values so that's super cool so what we can do here is simply call this trigger for die and then we can make a transition from the enemy walk to die and then select that and as the condition make sure we have the condition die uh then we'll make sure to disable has exit time or it's going to wait for the end of the animation and then maybe shrink down the um fade time just a bit so now when we go into G the game and maybe bring the animator down here we'll be able to observe what our enemy does here so he'll walk back and forth and when we click die he'll fall so that's super cool uh we also of course need to uh need him to stop animating but we'll do that through a script awesome so now that we have that in place um we are actually ready to kind of implement all of this uh inside of ja uh in in JavaScript um one thing that we will need to do is we will need to go under our enemy Center um controller here and make sure that it has a kind of non animating state to transition to so so that it will uh stop moving once the uh character Falls and uh we'll again do this using a trigger and we'll just call that stop uh we'll then create an empty State here simply called um idle or stopped stopped is fine and uh then we can simply make a transition from enemy move one to stopped uh when stop the the stop triggers is uh is um set and uh then also you want to select the stopped uh State and make sure that right def false is set to false because right now if we hit play here and then stop him oops we also have to make sure that uh has exit time is set to false so right now if we just stop him oh actually that worked just fine surprising I expected him to jump right back oh he does he he jumps right to the center so we just want to select stopped here and disabled right the fals and now he will stop uh his uh walk animation or uh stop moving and just stay put where he um he was when the stop trigger was C cool so let's move on now now we can go into our enemy script and kind of edited uh to uh fit our new animation setup so let's double click the enemy here to open it up in mono develop and we want to make a couple of variables the first one is going to be to our enemy animator and it's going to be of type animator the second one is going to be the center animator that's also going to be a type animator and um I want this Sentry animator to be a private variable because we'll just fill that in ourselves then we're going to make in the F start function actually let's do a wake a wake is is generally used for making references to components and game objects then in here we can set Center anim equal to uh and then transform. get get component and we're going to get the animator component so that should be working I'm I'm too used to CP uh this might not be the correct way of doing things but if I remember correctly this should work then we are not going to destroy the game object anymore when we jump on his head and we don't want these uh particles to spawn uh at the transform position but in that at the uh enemy anim do transform.position and the same here so enemy an. transform. rotation uh then what we can also do is we can uh set the enemy anim do set trigger and uh the trigger name is die so the enemy will die there and uh then we can say centry anim do set trigger and then it was stop I believe there we go so that should actually do what we wanted to and hopefully we'll get no errors no we don't I actually remembered how to do this uh implicit downcast from component to uh animator yes I am aware that this is a downcast but um actually not sure how to kind of if we want to make this explicit in JavaScript I believe that we just write as animator yeah now it's an explicit downcast so basically what we're doing is we're saying that we want this get component uh to turn into an animator and we're doing that by using an S animator uh add on that's that's called casting Okay cool so now we should be able to select our enemy Center and then drag our enemy anim on here the graphics object there and uh it should gather its own animator itself so now when we hit play and uh we can see him walking here back and forth and when we jump on his head he dies but he does so kind of weirdly um so let's see if we can fix this so what has rotated here so that's still facing the correct way I believe and the enemy here that's rotated for some reason why does that rotate no it no it hasn't so what's going on uh let's see this for some reason has no influence on the graphics object even though it's ped to that that's super weird so let's just try that again jump on his head if if I'm able to oh my God this is embarrassing that worked okay so this is curious to me there you can see another bar we'll have to fix um but that's not really what I wanted to happen here maybe didn't have time to save the script okay so now it's working so we'll just assume oh now I know what was happening there of course okay so when he was very quickly rotating over here that's when he died and then of course the entire graphic was just flipped yeah so that's not really a huge amount of things we can do about that I mean we could reset the position but I don't really think that's something we want to do no that's just stupid let let's not worry about that and if if we encounter it a lot of times we'll fix it I I'm sure we'll find a way cool so uh the last thing is I want want to just gather some re uh references to these kill boxes because I think we should disable them um once the enemy dies um so in order for us to do that we'll also need to disable the Box collider uh so very easily easy way to do this is simply uh copying this box collider then removing the component then we are going to add an empty object call this box collider drag that under the enemy object reset its transform uh then simply go up here and paste the component as new and we can simply drag this down or uh I'm sorry reset the Y position here the center there and then drag it up a bit something like that and uh then what we can do is create another MC object and we'll just call this colliders drag that onto the enemy drag the Box hit and kill uh box colliders under there hit continue go up here hit apply and uh now we can head into the script create a variable that we are going to call variable colliders uh yeah colliders of type transform and uh then down here we will simply either destroy them or simply disable them I think we'll just destroy the object I don't see any reason why we would keep it so simply destroy the liers do game object something like that uh and then in here we'll make sure that we make a reference to our colliders object there and now when we hit play we should be able to jump on the guy's head and he falls down and then now we are unable to collide with him so that was basically everything for making an enemy let me just see how long that video was who okay so I think it's just barely uh short enough to keep it in one video so I hope you enjoyed it I really wanted to show every step of the way when making a character like this it's it's really a lot of tweaking and trying to get him work with the mechanics and all that and I I really didn't want to cut away on on any of the figuring out of stuff uh because I think it's very really important that you get to see that part of the process too so um thanks for watching I hope you enjoyed it and I'll see you in the next video
