With timestamps:

00:00 - [Music]
00:03 - hello everyone and welcome to the 17th
00:06 - video in our Survival game series done
00:09 - by brais I the city of brais and in this
00:12 - video we are finally going to take a
00:14 - look at scripting doors so uh door
00:18 - functionality opening and closing and uh
00:21 - also some GUI that will ask the player
00:24 - whether or not he wants to open the door
00:26 - or um and until what key the player
00:29 - needs to press um also how to delay
00:34 - functionality um using the yield wait
00:37 - for seconds some more on that and uh
00:41 - keep in mind throughout this video that
00:43 - this this technique can be applied to
00:45 - pretty much uh anything that you want to
00:48 - open and close or move based on player
00:51 - input so that could be
00:53 - chests uh L larger Gates and um you get
00:59 - the point
01:00 - all right so as always I've opened up
01:03 - unity and uh you can see that uh a few
01:06 - things has
01:07 - changed uh first of all I have gone
01:10 - ahead and made a wall and a door uh I
01:14 - modeled them inside of Maya and they're
01:17 - not perfect there are some mistakes here
01:19 - and there uh but it was just a quick
01:21 - model to get um to get something to work
01:25 - with and uh they will of course be
01:27 - included in the uh updated version of
01:30 - the assets pack uh so if we go into the
01:33 - Imports folder here you can see that I
01:35 - have the door uh which is which includes
01:39 - both objects and I have set the scale
01:41 - factor to
01:43 - 0.5 and uh then I have the door UV the
01:48 - door UV with a normal map so that the
01:52 - light will reflect even prettier and a
01:56 - door wall UV and a normal map for that
01:59 - also
02:00 - so if we take a look at how I've set it
02:02 - up inside of unity we have a uh game
02:05 - object called the house piece in which
02:08 - we have both the house door and the
02:11 - house wall and and on them we have two
02:14 - materials on the door we have one called
02:17 - door
02:18 - UV and this is just a bump diffuse so
02:22 - that we can apply the normal map to it
02:25 - and as well we have the house wall bump
02:28 - the fuse and apply the normal
02:31 - map okay so uh that's it for importing
02:34 - it into unity and getting it set up like
02:37 - I have
02:38 - here um now let's go ahead and actually
02:41 - um make the door so uh here we have the
02:46 - house door and uh let's go ahead and hit
02:49 - the add component new script and also uh
02:53 - a lot of you have asked uh what if we
02:56 - don't have the add component button um
02:58 - the add component button was added in
03:02 - unity 4 um so all of the four versions
03:07 - will have the add component but if you
03:09 - don't you can either go ahead and update
03:11 - Unity or go to the component up here uh
03:15 - or right click down here and then hit
03:17 - create and then JavaScript and then drag
03:20 - it on all right so house door add
03:24 - component new script and we're going to
03:26 - call this door logic
03:30 - going to be a type JavaScript create an
03:33 - ad double click to open it up in mono
03:38 - develop and just waiting for it to
03:41 - [Music]
03:45 - open so I think we are
03:49 - there cool uh now we are going to keep
03:53 - the function update for later but the
03:55 - function start we can go ahead and
03:57 - delete and just space out the bracket
04:00 - keys and the function update cool so
04:03 - let's start with a uh variable no
04:06 - actually let's start with a ont trigger
04:09 - enter so uh new
04:12 - function and call this ont trigger enter
04:15 - all with
04:17 - capitals and we want to store some
04:19 - information we have talked about how
04:22 - this works in earlier tutorials uh so
04:25 - I'm just going to go through it really
04:27 - quickly so we called going to call the
04:29 - information the collider and it's going
04:31 - to be a type
04:34 - collider and uh inside of this we're
04:36 - going to type if the
04:39 - collider tag is equal
04:43 - to
04:46 - player then we want something to
04:49 - happen and uh let's just write a
04:53 - debug.log
04:55 - and then we can write working
05:01 - so uh this code will make sure that uh
05:06 - if we apply it to a trigger
05:09 - collider it will check if something
05:12 - enters it will then store some
05:14 - information on what entered and in this
05:17 - if statement it will check if what uh if
05:20 - the object that entered has a tag called
05:22 - player so if the object is the player
05:25 - and if it is the player it will just
05:27 - type working in the console window so to
05:30 - let us know that it actually
05:32 - worked um but one thing we don't want
05:36 - this applied to uh to the actual house
05:38 - door we want it applied to a trigger so
05:42 - I'll just go ahead and remove the
05:44 - component and uh if I just go ahead and
05:48 - hit
05:49 - play and run over here and keep on
05:54 - running you will notice that I can run
05:57 - right through the door so we want to
06:00 - create some
06:01 - colliders for this house
06:04 - wall I think I will use a mesh
06:08 - collider you could also create a lot of
06:11 - different box
06:12 - colliders to uh make sure that um you
06:16 - get accurate
06:17 - Collision if you want to know more about
06:20 - how Collision Works inside of unity and
06:22 - how you can make great Collision without
06:26 - um being too harsh on the computer then
06:28 - you can go and watch are mastering
06:30 - Collision tutorial for now I'm just
06:33 - going to hit add component physics mesh
06:37 - collider so now we can interact with
06:40 - this
06:41 - correctly and the
06:43 - door I'll just go ahead and create a box
06:47 - collider for the door so physics box
06:52 - collider and uh let's just tweak this a
06:56 - little bit so we could go ahead and just
06:59 - disable the house wall and uh let's have
07:03 - a look so we can TW tweak the centry
07:09 - settings and the size of it scale it
07:13 - down a little on the Y maybe a little
07:16 - more
07:17 - actually uh let's drag it
07:22 - down a
07:25 - bit and to the sides it looks fine but
07:30 - let's tweak the
07:31 - Z oh now the
07:35 - a to about there and position
07:39 - it accordingly in the X
07:46 - also so that actually looks really fine
07:49 - um I'm just going to push it down a
07:51 - little more cool so as you can see it
07:55 - isn't perfect but it will do um I'm sure
07:58 - it will do
08:00 - so now let's reenable the house wall and
08:03 - when we hit
08:04 - play and run over to the door we can't
08:09 - run through it and the same thing
08:11 - happens with the
08:14 - wall
08:16 - awesome now uh let's go ahead and make
08:19 - what will actually
08:21 - trigger a
08:23 - player uh be triggered by our player so
08:28 - let's go ahead and create a new empty
08:30 - game object so game object create empty
08:33 - drag it under the house door just so we
08:36 - can Center it on the door so censor the
08:39 - position on the rotation and one one one
08:43 - on the
08:45 - scale oh oh I selected the wrong object
08:48 - I selected our
08:50 - enemy that was not on purpose so game
08:53 - object create empty drag it under the
08:55 - house door 0 0 Z 1 1
09:01 - 1 cool uh now let's position
09:06 - it the right way so let's set all of
09:10 - these set that one to centry and this
09:12 - one to
09:13 - Global uh actually local and we can make
09:17 - sure it's centered on the
09:20 - door about there and now we want to
09:24 - create a collider for it so add
09:26 - component physics box Collider
09:30 - this could be any type of collider you
09:31 - want now we can just go ahead and scale
09:34 - it so we'll make it about as high as the
09:38 - door and as
09:41 - wide maybe a little wider
09:44 - actually and uh on the X
09:49 - here we are going to scale it quite a
09:51 - bit because this won't actually open the
09:54 - door this will just uh enable the player
09:58 - to open in the door so we want him to be
10:01 - able to do it from quite a distance and
10:04 - uh let's rename this
10:07 - to
10:09 - house house door
10:14 - trigger and uh to see if the trigger is
10:17 - placed well we can go ahead and hit play
10:20 - now without enabling the is
10:23 - trigger and therefore we can see when we
10:26 - collide with it so from here you you are
10:29 - going to be able to open the door that
10:31 - looks fine uh I actually well yeah that
10:36 - looks fine so let's just go with that
10:38 - and let's remember to check the is
10:41 - trigger this is very important let's
10:44 - also remember to select the player and
10:46 - tag him as player if you haven't done
10:48 - that
10:50 - already now we can go ahead and uh take
10:53 - a look at the script so this should be
10:56 - working now because we have tagged the
10:58 - player and we have set the object to a
11:00 - trigger so now we can go ahead and drag
11:02 - on the doll
11:05 - logic all right so that hits let's hit
11:11 - play and when we
11:13 - enter we can see that working is being
11:17 - called in the
11:18 - console cool now let's add to the script
11:23 - so we're going to do some uh we are
11:25 - going to make a
11:27 - variable which is going to be private
11:29 - because we don't want to actually change
11:32 - it in the uh in the inside of
11:35 - unity going to and we're going to call
11:38 - it draw
11:40 - gii and by default it's going to be
11:42 - equal to
11:45 - false then uh we're going
11:47 - to wait a second with implementing this
11:51 - first we're going to make the actual GUI
11:54 - so let's type a new function and GUI uh
11:59 - uh or
12:00 - gy is uh what we use whenever we want
12:04 - something to be drawn on the screen um
12:07 - so we use it for 2D
12:09 - elements so uh in this case we're going
12:12 - to use it for making some text actually
12:15 - a text label um so we are going to have
12:18 - a box around it now uh GUI elements can
12:22 - only be made through scripting inside of
12:26 - a function called undi and make sure you
12:29 - type it exactly like this with the
12:31 - capital
12:32 - letters now inside of this we are going
12:35 - to type
12:37 - G
12:40 - dobox and then open up a parenthesis
12:46 - rect for rectangle open up another
12:50 - parenthesis and then we are going to
12:53 - need four
12:55 - values the first two values will
12:58 - determine where on the screen it needs
13:01 - to be
13:02 - drawn so that would
13:05 - be first on the
13:09 - width on the X where we need it to be on
13:12 - the x axis and then on the Y so if I if
13:17 - I just go ahead and type hm uh 10 comma
13:23 - 10 and then we'll Define how long it
13:26 - should be and then I want to be
13:29 - 102 by
13:32 - 22 uh that works with the text we are
13:34 - going to be entering then end up the
13:37 - parenthesis
13:39 - comma and we're going to
13:41 - type press e to
13:48 - open like that and end everything up and
13:53 - end it with a
13:54 - semicolon now let's see how that look
13:57 - this looks so let's hit play
13:59 - and you can see that it's getting drawn
14:01 - in the upper left hand
14:03 - corner but we want it to be more like in
14:06 - the center of the screen you can have it
14:07 - wherever you want I'm going to
14:09 - decapitalize the o o in the open and I'm
14:14 - going to make sure that this is drawn in
14:16 - the center of the x
14:18 - value and this is done by using the
14:21 - screen. width the screen do width is
14:25 - simply how long is the screen
14:29 - and we're going to make sure that it's
14:32 - halfway so we are going to time uh say
14:35 - times 0.5 you could also divide by
14:39 - two then we're going to make sure that
14:41 - we calculate in the actual width of our
14:46 - um of our label so we are going to minus
14:50 - with half of our width so we're going to
14:53 - minus
14:55 - 51 now let's see if this works
15:00 - it's in the center of the x-axis now
15:02 - let's move it a little down on the Y uh
15:06 - let's just type
15:10 - 200 hit play I'm pretty satisfied with
15:14 - that
15:16 - great now let's make sure that this only
15:19 - appears whenever we are inside of the
15:21 - range where we can open the door so this
15:25 - will be done using our draw
15:27 - GUI so inside of this on trigger enter
15:31 - we're going to type draw
15:34 - gii equals
15:38 - true and now we're going to go inside of
15:41 - our function on guy and type if draw DUI
15:47 - is equal to
15:49 - true and then make some
15:52 - brackets
15:54 - around ri.
15:57 - boox
16:03 - and this will make sure that the gii is
16:06 - only drawn when the draw GUI is equal to
16:09 - true and it will be true once we enter
16:13 - the range so now let's hit
16:16 - play walk over here and you can see that
16:21 - now the GUI is drawn but watch What's
16:24 - happen what happens when we leave the
16:27 - sound it's still getting drawn so now
16:30 - let's make sure that it will uh that the
16:34 - draw DUI will turn turn false whenever
16:38 - we leave the trigger so create a new
16:40 - function called ont trigger
16:44 - exit and it's also going to store the uh
16:49 - collider information you can store it
16:51 - the exact same
16:53 - way and inside of
16:56 - here we are going to type
16:59 - if the collider tag is equal to player
17:03 - so it's going to be exactly the same you
17:05 - can just go ahead and duplicate what we
17:08 - made up here so if the collider tag is
17:10 - equal to player then we want the draw
17:12 - DUI to be false and remember this need
17:15 - to be on trigger
17:17 - exit all right so when we go into Unity
17:23 - now the GUI is drawn as long as we stay
17:26 - in the collider and when we leave the
17:29 - trigger it's not uh the draw GUI turns
17:32 - false and it won't be
17:34 - drawn great so that's it for enabling
17:38 - the uh and enabling and disabling the
17:41 - GUI now let's make a new function and
17:45 - this one is going to be the function
17:48 - update so we have it up
17:51 - here
17:54 - if uh if draw
17:57 - DUI
17:59 - is equal to
18:01 - true
18:02 - [Music]
18:05 - and
18:07 - input. get key
18:11 - down key
18:14 - code.
18:21 - e
18:23 - then open up the
18:26 - brackets then change
18:30 - door
18:35 - state so what we doing here is we are
18:37 - saying that if the draw GUI is equal to
18:40 - true so if we are inside of the
18:42 - trigger and the player presses the E
18:46 - button then we want to change the door
18:50 - State meaning that we want it to open or
18:54 - close now uh because I've written it
18:57 - this way the change door State and then
18:59 - open close parenthesis and a semic
19:01 - calling that means that I want to create
19:03 - this inside of a separate function
19:05 - called change door State you could also
19:08 - create this
19:09 - here and yet again you couldn't and I'm
19:13 - going to show you why so now let's type
19:17 - function change door
19:21 - State the
19:22 - [Music]
19:24 - parentheses and the
19:26 - brackets inside of this
19:29 - we going to
19:30 - type let just hold on a moment we're
19:33 - going to type
19:38 - if
19:39 - door is closed so here we're going to
19:43 - need a new
19:44 - variable so let's go up to the
19:47 - top and create a new variable so this is
19:52 - also going to be a private
19:55 - VAR and this is going to allow us to
19:57 - determine whether or not the the door is
19:59 - closed or not so door is
20:04 - closed and it's going to equal be equal
20:07 - to True by
20:09 - default so if door is
20:16 - closed is equal
20:19 - to
20:24 - true then we want something to
20:27 - happen
20:30 - and uh this is where you can insert your
20:33 - own logic I'm going to give you an
20:35 - example of how I would do it so I would
20:38 - say the
20:40 - door do
20:43 - animation do
20:46 - Crossfade and then open or whatever your
20:50 - animation is called so this requires
20:54 - that you make an actual animation and
20:56 - the reason for uh why I ride the door is
21:00 - because we are going to have to actually
21:02 - reference the house door because we have
21:05 - this house
21:06 - trigger and uh if we just animate this
21:10 - it's not going to be visible in
21:13 - game and uh actually let's go ahead and
21:16 - drag out this this house door trigger
21:19 - under the house piece so that it won't
21:21 - be uh influenced by the position of our
21:24 - door so when we animate the door
21:29 - um we we want to reference it from the
21:32 - trigger so let's go back into Mon
21:35 - develop and create our last variable
21:38 - this one is not going to be private
21:40 - because we want to apply it in unity
21:43 - it's going to be called VAR the
21:46 - door is going to be a type
21:50 - transform now we can just go into
21:54 - Unity wait for the script to
21:57 - update oh I can see we have an
22:00 - error door. animation.
22:03 - Crossfade says Crossfade is not a member
22:07 - of unity animation I think I've spelled
22:10 - it
22:12 - wrong might be cross fade yeah I spelled
22:16 - it one wrong and uh so we're going to do
22:20 - it like that so remember to capitalize
22:23 - the
22:24 - F now we have no errors and we can see a
22:28 - variable called the door appear in our
22:31 - script now we can just drag on the house
22:34 - door and that is
22:36 - it great so now let's write out the rest
22:40 - of the logic and then we can create the
22:43 - animations you could after the door
22:46 - animation starts playing also make it
22:48 - play a sound so we could do the door.
22:53 - audio do playay one
22:57 - shot this would play whatever audio
23:00 - Source you attach to the
23:03 - door
23:04 - so inside of this door
23:09 - here we could um we could apply a audio
23:14 - component so we could drag drag on a
23:18 - door squir king or um like a old wooden
23:23 - sound effect or something like that but
23:25 - for now I'm just going to go ahead and
23:29 - not do that so I'm just going to comment
23:31 - it
23:33 - out like
23:37 - this now let's move on door is
23:44 - closed will then be equal to F false
23:48 - because now we have opened the door the
23:50 - animation has started playing and the
23:52 - audio has started playing so the door is
23:55 - no longer
23:57 - closed now we want to wait a couple of
24:00 - seconds and then we want the door to
24:02 - close
24:04 - automatically and this is the reason why
24:06 - we are doing it in a separate function
24:09 - other than just to keep it keep the
24:10 - script looking
24:12 - clean it's because we want to use what
24:15 - is called a
24:16 - yield you're going to type yield space
24:20 - wait for
24:22 - seconds oops wait 4
24:27 - seconds
24:29 - and inside of the parentheses you're
24:31 - going to type hm let's say
24:34 - three a yield statement cannot be used
24:38 - inside of the function
24:40 - update that's just the nature of
24:43 - it and uh the reason why is because in
24:46 - the function
24:47 - update it is called every time the
24:50 - computer draws a frame and so if the
24:53 - function update is slowed the computer
24:55 - would stop drawing frames so you cannot
24:59 - yield in the function update you have to
25:02 - call a separate
25:04 - function to
25:06 - yield
25:09 - sweet now let's yield the 3
25:13 - seconds then say the door do
25:17 - animation do
25:21 - Crossfade and then
25:24 - close you could also use the open
25:27 - animation again and then just reverse it
25:30 - though that's a little bit more
25:34 - difficult then we could again insert
25:36 - some audio we could say the door.
25:40 - audio. playay one
25:43 - shot like
25:46 - this but uh or just
25:50 - doplay but again this wouldn't wouldn't
25:54 - really do anything except uh add the
25:59 - authentity to it so you can you could
26:02 - leave it there you can use it it's up to
26:06 - you so I'll just leave that
26:09 - commented and then door is
26:14 - closed equals true because now the door
26:17 - has closed
26:19 - again let's see if this
26:23 - works hit
26:26 - play go over to the door
26:30 - and now we should press e now keep in
26:34 - mind that we have still not added an
26:35 - animation so let's go ahead and make
26:38 - that
26:38 - first so I'll just quickly save to make
26:42 - sure that we don't lose all of this
26:45 - work now I want to select the door go to
26:49 - window
26:51 - animation and press the record it then
26:55 - asks me to add an animation component
26:58 - which which we will do we're going to go
27:01 - and save it onto the animations folder
27:03 - call this
27:05 - open and
27:07 - save now I've prepared the story for
27:11 - actually for making this
27:14 - animation and I've done that by making
27:17 - sure that the pivot point or the Anchor
27:20 - Point is in the right
27:24 - side actually down here to be more
27:27 - specific and this way when I go up here
27:30 - and change the pivot point to Pivot and
27:33 - not Center I can just rotate
27:36 - it along the Y AIS and it will work fine
27:41 - as a door
27:42 - animation so let's go under the rotation
27:45 - y hit add
27:48 - key then go move forward
27:52 - about uh half a
27:56 - second and and animate the door and you
27:59 - can make it open whatever want uh way
28:01 - you want and you can also choose how
28:04 - much I'm just going to write a prefix
28:06 - value of 90 or minus 90
28:11 - actually minus
28:13 - 90 great so now if we hit
28:18 - play the door will open we can also make
28:22 - it fade a little bit by selecting the
28:25 - key frame of the start and hit flat
28:27 - select selecting the key frame at the
28:29 - end and hit
28:30 - flat now it should smooth out the
28:33 - animation a
28:34 - bit awesome now let's create the close
28:38 - animation the same way so go to the
28:40 - where it says open here and create new
28:43 - clip again we going to go under the
28:46 - animations folder and we just going to
28:48 - call this
28:51 - close and I'm just quickly going to make
28:53 - it the same way so this time we'll start
28:56 - at minus 90
29:01 - we'll move
29:02 - forward and then whoops didn't start at
29:05 - minus
29:06 - 90 uh so we're going to start at
29:09 - minus
29:11 - 90 then go for it half a second and then
29:16 - go back to
29:18 - zero and I'm going to select all of the
29:20 - key frames and flatten
29:24 - them like
29:26 - that like that
29:29 - so when we hit
29:30 - play we can see the door closing
29:34 - again now let's hit the stop
29:37 - record and see if this
29:40 - works
29:42 - play and uh we can see that the door
29:45 - opens all by itself that's because we
29:48 - have the animation set to play
29:50 - automatically so select the house door
29:53 - and disable the play automatically and
29:56 - now we should see it working so I hit
29:59 - play walk to the door it says press e to
30:03 - open we press e and we can now move
30:07 - through and the door will close
30:10 - automatically behind our back so that's
30:13 - it for making a door open and close I
30:16 - hope you enjoyed the video and I'll see
30:18 - you in the next
30:19 - [Music]
30:26 - one a

Cleaned transcript:

hello everyone and welcome to the 17th video in our Survival game series done by brais I the city of brais and in this video we are finally going to take a look at scripting doors so uh door functionality opening and closing and uh also some GUI that will ask the player whether or not he wants to open the door or um and until what key the player needs to press um also how to delay functionality um using the yield wait for seconds some more on that and uh keep in mind throughout this video that this this technique can be applied to pretty much uh anything that you want to open and close or move based on player input so that could be chests uh L larger Gates and um you get the point all right so as always I've opened up unity and uh you can see that uh a few things has changed uh first of all I have gone ahead and made a wall and a door uh I modeled them inside of Maya and they're not perfect there are some mistakes here and there uh but it was just a quick model to get um to get something to work with and uh they will of course be included in the uh updated version of the assets pack uh so if we go into the Imports folder here you can see that I have the door uh which is which includes both objects and I have set the scale factor to 0.5 and uh then I have the door UV the door UV with a normal map so that the light will reflect even prettier and a door wall UV and a normal map for that also so if we take a look at how I've set it up inside of unity we have a uh game object called the house piece in which we have both the house door and the house wall and and on them we have two materials on the door we have one called door UV and this is just a bump diffuse so that we can apply the normal map to it and as well we have the house wall bump the fuse and apply the normal map okay so uh that's it for importing it into unity and getting it set up like I have here um now let's go ahead and actually um make the door so uh here we have the house door and uh let's go ahead and hit the add component new script and also uh a lot of you have asked uh what if we don't have the add component button um the add component button was added in unity 4 um so all of the four versions will have the add component but if you don't you can either go ahead and update Unity or go to the component up here uh or right click down here and then hit create and then JavaScript and then drag it on all right so house door add component new script and we're going to call this door logic going to be a type JavaScript create an ad double click to open it up in mono develop and just waiting for it to open so I think we are there cool uh now we are going to keep the function update for later but the function start we can go ahead and delete and just space out the bracket keys and the function update cool so let's start with a uh variable no actually let's start with a ont trigger enter so uh new function and call this ont trigger enter all with capitals and we want to store some information we have talked about how this works in earlier tutorials uh so I'm just going to go through it really quickly so we called going to call the information the collider and it's going to be a type collider and uh inside of this we're going to type if the collider tag is equal to player then we want something to happen and uh let's just write a debug.log and then we can write working so uh this code will make sure that uh if we apply it to a trigger collider it will check if something enters it will then store some information on what entered and in this if statement it will check if what uh if the object that entered has a tag called player so if the object is the player and if it is the player it will just type working in the console window so to let us know that it actually worked um but one thing we don't want this applied to uh to the actual house door we want it applied to a trigger so I'll just go ahead and remove the component and uh if I just go ahead and hit play and run over here and keep on running you will notice that I can run right through the door so we want to create some colliders for this house wall I think I will use a mesh collider you could also create a lot of different box colliders to uh make sure that um you get accurate Collision if you want to know more about how Collision Works inside of unity and how you can make great Collision without um being too harsh on the computer then you can go and watch are mastering Collision tutorial for now I'm just going to hit add component physics mesh collider so now we can interact with this correctly and the door I'll just go ahead and create a box collider for the door so physics box collider and uh let's just tweak this a little bit so we could go ahead and just disable the house wall and uh let's have a look so we can TW tweak the centry settings and the size of it scale it down a little on the Y maybe a little more actually uh let's drag it down a bit and to the sides it looks fine but let's tweak the Z oh now the a to about there and position it accordingly in the X also so that actually looks really fine um I'm just going to push it down a little more cool so as you can see it isn't perfect but it will do um I'm sure it will do so now let's reenable the house wall and when we hit play and run over to the door we can't run through it and the same thing happens with the wall awesome now uh let's go ahead and make what will actually trigger a player uh be triggered by our player so let's go ahead and create a new empty game object so game object create empty drag it under the house door just so we can Center it on the door so censor the position on the rotation and one one one on the scale oh oh I selected the wrong object I selected our enemy that was not on purpose so game object create empty drag it under the house door 0 0 Z 1 1 1 cool uh now let's position it the right way so let's set all of these set that one to centry and this one to Global uh actually local and we can make sure it's centered on the door about there and now we want to create a collider for it so add component physics box Collider this could be any type of collider you want now we can just go ahead and scale it so we'll make it about as high as the door and as wide maybe a little wider actually and uh on the X here we are going to scale it quite a bit because this won't actually open the door this will just uh enable the player to open in the door so we want him to be able to do it from quite a distance and uh let's rename this to house house door trigger and uh to see if the trigger is placed well we can go ahead and hit play now without enabling the is trigger and therefore we can see when we collide with it so from here you you are going to be able to open the door that looks fine uh I actually well yeah that looks fine so let's just go with that and let's remember to check the is trigger this is very important let's also remember to select the player and tag him as player if you haven't done that already now we can go ahead and uh take a look at the script so this should be working now because we have tagged the player and we have set the object to a trigger so now we can go ahead and drag on the doll logic all right so that hits let's hit play and when we enter we can see that working is being called in the console cool now let's add to the script so we're going to do some uh we are going to make a variable which is going to be private because we don't want to actually change it in the uh in the inside of unity going to and we're going to call it draw gii and by default it's going to be equal to false then uh we're going to wait a second with implementing this first we're going to make the actual GUI so let's type a new function and GUI uh uh or gy is uh what we use whenever we want something to be drawn on the screen um so we use it for 2D elements so uh in this case we're going to use it for making some text actually a text label um so we are going to have a box around it now uh GUI elements can only be made through scripting inside of a function called undi and make sure you type it exactly like this with the capital letters now inside of this we are going to type G dobox and then open up a parenthesis rect for rectangle open up another parenthesis and then we are going to need four values the first two values will determine where on the screen it needs to be drawn so that would be first on the width on the X where we need it to be on the x axis and then on the Y so if I if I just go ahead and type hm uh 10 comma 10 and then we'll Define how long it should be and then I want to be 102 by 22 uh that works with the text we are going to be entering then end up the parenthesis comma and we're going to type press e to open like that and end everything up and end it with a semicolon now let's see how that look this looks so let's hit play and you can see that it's getting drawn in the upper left hand corner but we want it to be more like in the center of the screen you can have it wherever you want I'm going to decapitalize the o o in the open and I'm going to make sure that this is drawn in the center of the x value and this is done by using the screen. width the screen do width is simply how long is the screen and we're going to make sure that it's halfway so we are going to time uh say times 0.5 you could also divide by two then we're going to make sure that we calculate in the actual width of our um of our label so we are going to minus with half of our width so we're going to minus 51 now let's see if this works it's in the center of the xaxis now let's move it a little down on the Y uh let's just type 200 hit play I'm pretty satisfied with that great now let's make sure that this only appears whenever we are inside of the range where we can open the door so this will be done using our draw GUI so inside of this on trigger enter we're going to type draw gii equals true and now we're going to go inside of our function on guy and type if draw DUI is equal to true and then make some brackets around ri. boox and this will make sure that the gii is only drawn when the draw GUI is equal to true and it will be true once we enter the range so now let's hit play walk over here and you can see that now the GUI is drawn but watch What's happen what happens when we leave the sound it's still getting drawn so now let's make sure that it will uh that the draw DUI will turn turn false whenever we leave the trigger so create a new function called ont trigger exit and it's also going to store the uh collider information you can store it the exact same way and inside of here we are going to type if the collider tag is equal to player so it's going to be exactly the same you can just go ahead and duplicate what we made up here so if the collider tag is equal to player then we want the draw DUI to be false and remember this need to be on trigger exit all right so when we go into Unity now the GUI is drawn as long as we stay in the collider and when we leave the trigger it's not uh the draw GUI turns false and it won't be drawn great so that's it for enabling the uh and enabling and disabling the GUI now let's make a new function and this one is going to be the function update so we have it up here if uh if draw DUI is equal to true and input. get key down key code. e then open up the brackets then change door state so what we doing here is we are saying that if the draw GUI is equal to true so if we are inside of the trigger and the player presses the E button then we want to change the door State meaning that we want it to open or close now uh because I've written it this way the change door State and then open close parenthesis and a semic calling that means that I want to create this inside of a separate function called change door State you could also create this here and yet again you couldn't and I'm going to show you why so now let's type function change door State the parentheses and the brackets inside of this we going to type let just hold on a moment we're going to type if door is closed so here we're going to need a new variable so let's go up to the top and create a new variable so this is also going to be a private VAR and this is going to allow us to determine whether or not the the door is closed or not so door is closed and it's going to equal be equal to True by default so if door is closed is equal to true then we want something to happen and uh this is where you can insert your own logic I'm going to give you an example of how I would do it so I would say the door do animation do Crossfade and then open or whatever your animation is called so this requires that you make an actual animation and the reason for uh why I ride the door is because we are going to have to actually reference the house door because we have this house trigger and uh if we just animate this it's not going to be visible in game and uh actually let's go ahead and drag out this this house door trigger under the house piece so that it won't be uh influenced by the position of our door so when we animate the door um we we want to reference it from the trigger so let's go back into Mon develop and create our last variable this one is not going to be private because we want to apply it in unity it's going to be called VAR the door is going to be a type transform now we can just go into Unity wait for the script to update oh I can see we have an error door. animation. Crossfade says Crossfade is not a member of unity animation I think I've spelled it wrong might be cross fade yeah I spelled it one wrong and uh so we're going to do it like that so remember to capitalize the F now we have no errors and we can see a variable called the door appear in our script now we can just drag on the house door and that is it great so now let's write out the rest of the logic and then we can create the animations you could after the door animation starts playing also make it play a sound so we could do the door. audio do playay one shot this would play whatever audio Source you attach to the door so inside of this door here we could um we could apply a audio component so we could drag drag on a door squir king or um like a old wooden sound effect or something like that but for now I'm just going to go ahead and not do that so I'm just going to comment it out like this now let's move on door is closed will then be equal to F false because now we have opened the door the animation has started playing and the audio has started playing so the door is no longer closed now we want to wait a couple of seconds and then we want the door to close automatically and this is the reason why we are doing it in a separate function other than just to keep it keep the script looking clean it's because we want to use what is called a yield you're going to type yield space wait for seconds oops wait 4 seconds and inside of the parentheses you're going to type hm let's say three a yield statement cannot be used inside of the function update that's just the nature of it and uh the reason why is because in the function update it is called every time the computer draws a frame and so if the function update is slowed the computer would stop drawing frames so you cannot yield in the function update you have to call a separate function to yield sweet now let's yield the 3 seconds then say the door do animation do Crossfade and then close you could also use the open animation again and then just reverse it though that's a little bit more difficult then we could again insert some audio we could say the door. audio. playay one shot like this but uh or just doplay but again this wouldn't wouldn't really do anything except uh add the authentity to it so you can you could leave it there you can use it it's up to you so I'll just leave that commented and then door is closed equals true because now the door has closed again let's see if this works hit play go over to the door and now we should press e now keep in mind that we have still not added an animation so let's go ahead and make that first so I'll just quickly save to make sure that we don't lose all of this work now I want to select the door go to window animation and press the record it then asks me to add an animation component which which we will do we're going to go and save it onto the animations folder call this open and save now I've prepared the story for actually for making this animation and I've done that by making sure that the pivot point or the Anchor Point is in the right side actually down here to be more specific and this way when I go up here and change the pivot point to Pivot and not Center I can just rotate it along the Y AIS and it will work fine as a door animation so let's go under the rotation y hit add key then go move forward about uh half a second and and animate the door and you can make it open whatever want uh way you want and you can also choose how much I'm just going to write a prefix value of 90 or minus 90 actually minus 90 great so now if we hit play the door will open we can also make it fade a little bit by selecting the key frame of the start and hit flat select selecting the key frame at the end and hit flat now it should smooth out the animation a bit awesome now let's create the close animation the same way so go to the where it says open here and create new clip again we going to go under the animations folder and we just going to call this close and I'm just quickly going to make it the same way so this time we'll start at minus 90 we'll move forward and then whoops didn't start at minus 90 uh so we're going to start at minus 90 then go for it half a second and then go back to zero and I'm going to select all of the key frames and flatten them like that like that so when we hit play we can see the door closing again now let's hit the stop record and see if this works play and uh we can see that the door opens all by itself that's because we have the animation set to play automatically so select the house door and disable the play automatically and now we should see it working so I hit play walk to the door it says press e to open we press e and we can now move through and the door will close automatically behind our back so that's it for making a door open and close I hope you enjoyed the video and I'll see you in the next one a
